# Comparing `tmp/DatastreamPy-1.0.12-py3-none-any.whl.zip` & `tmp/DatastreamPy-2.0.21-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,13 @@
-Zip file size: 7993 bytes, number of entries: 7
--rw-rw-rw-  2.0 fat     5709 b- defN 21-Oct-28 11:50 DatastreamPy/DS_Requests.py
--rw-rw-rw-  2.0 fat    21851 b- defN 21-Dec-21 12:58 DatastreamPy/DS_Response.py
--rw-rw-rw-  2.0 fat       43 b- defN 21-Dec-21 10:42 DatastreamPy/__init__.py
--rw-rw-rw-  2.0 fat       13 b- defN 21-Dec-21 13:01 DatastreamPy-1.0.12.dist-info/top_level.txt
--rw-rw-rw-  2.0 fat       97 b- defN 21-Dec-21 13:01 DatastreamPy-1.0.12.dist-info/WHEEL
--rw-rw-rw-  2.0 fat      414 b- defN 21-Dec-21 13:01 DatastreamPy-1.0.12.dist-info/METADATA
--rw-rw-rw-  2.0 fat      576 b- defN 21-Dec-21 13:01 DatastreamPy-1.0.12.dist-info/RECORD
-7 files, 28703 bytes uncompressed, 6979 bytes compressed:  75.7%
+Zip file size: 51198 bytes, number of entries: 11
+-rw-rw-rw-  2.0 fat    16190 b- defN 24-Jan-30 08:10 DatastreamPy/DSConnect.py
+-rw-rw-rw-  2.0 fat    22949 b- defN 24-Jan-30 08:12 DatastreamPy/DSUserDataObjectBase.py
+-rw-rw-rw-  2.0 fat     5633 b- defN 23-Aug-11 08:57 DatastreamPy/DS_Requests.py
+-rw-rw-rw-  2.0 fat    27153 b- defN 24-Jan-30 08:10 DatastreamPy/DS_Response.py
+-rw-rw-rw-  2.0 fat    60200 b- defN 24-Jan-12 09:49 DatastreamPy/DatastreamEconomicFilters.py
+-rw-rw-rw-  2.0 fat    52895 b- defN 24-Feb-13 09:08 DatastreamPy/DatastreamUserCreated_TimeSeries.py
+-rw-rw-rw-  2.0 fat     1041 b- defN 23-Aug-11 08:57 DatastreamPy/__init__.py
+-rw-rw-rw-  2.0 fat    27395 b- defN 24-Feb-13 09:10 DatastreamPy-2.0.21.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Feb-13 09:10 DatastreamPy-2.0.21.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       13 b- defN 24-Feb-13 09:10 DatastreamPy-2.0.21.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat      955 b- defN 24-Feb-13 09:10 DatastreamPy-2.0.21.dist-info/RECORD
+11 files, 214516 bytes uncompressed, 49580 bytes compressed:  76.9%
```

## zipnote {}

```diff
@@ -1,22 +1,34 @@
+Filename: DatastreamPy/DSConnect.py
+Comment: 
+
+Filename: DatastreamPy/DSUserDataObjectBase.py
+Comment: 
+
 Filename: DatastreamPy/DS_Requests.py
 Comment: 
 
 Filename: DatastreamPy/DS_Response.py
 Comment: 
 
+Filename: DatastreamPy/DatastreamEconomicFilters.py
+Comment: 
+
+Filename: DatastreamPy/DatastreamUserCreated_TimeSeries.py
+Comment: 
+
 Filename: DatastreamPy/__init__.py
 Comment: 
 
-Filename: DatastreamPy-1.0.12.dist-info/top_level.txt
+Filename: DatastreamPy-2.0.21.dist-info/METADATA
 Comment: 
 
-Filename: DatastreamPy-1.0.12.dist-info/WHEEL
+Filename: DatastreamPy-2.0.21.dist-info/WHEEL
 Comment: 
 
-Filename: DatastreamPy-1.0.12.dist-info/METADATA
+Filename: DatastreamPy-2.0.21.dist-info/top_level.txt
 Comment: 
 
-Filename: DatastreamPy-1.0.12.dist-info/RECORD
+Filename: DatastreamPy-2.0.21.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## DatastreamPy/DS_Requests.py

```diff
@@ -77,36 +77,36 @@
     singleReq = dict
     multipleReqs = dict
     
     def __init__(self):
         self.singleReq = {"DataRequest":{},"Properties":None,"TokenValue":""}
         self.multipleReqs = {"DataRequests":[],"Properties":None,"TokenValue":""}
     
-    def get_bundle_Request(self, reqs, source=None, token=""):
+    def get_bundle_Request(self, reqs, token=""):
         self.multipleReqs["DataRequests"] = []
         for eachReq in reqs:
             dataReq = {"DataTypes":[],"Instrument":{}, "Date":{}, "Tag":None}
             dataReq["DataTypes"] = self._set_Datatypes(eachReq[0]["DataTypes"])
             dataReq["Date"] = self._set_Date(eachReq[0]["Date"])
             dataReq["Instrument"] = self._set_Instrument(eachReq[0]["Instrument"])
             self.multipleReqs["DataRequests"].append(dataReq)
             
-        self.multipleReqs["Properties"] = {"Key":"Source","Value":source}
+        self.multipleReqs["Properties"] = None
         self.multipleReqs["TokenValue"] = token
         return self.multipleReqs
         
         
-    def get_Request(self, req, source=None, token=""):
+    def get_Request(self, req, token=""):
         dataReq = {"DataTypes":[],"Instrument":{}, "Date":{}, "Tag":None}
         dataReq["DataTypes"] = self._set_Datatypes(req["DataTypes"])
         dataReq["Date"] = self._set_Date(req["Date"])
         dataReq["Instrument"] = self._set_Instrument(req["Instrument"])
         self.singleReq["DataRequest"] = dataReq
         
-        self.singleReq["Properties"] = {"Key":"Source","Value":source}
+        self.singleReq["Properties"] = None
         self.singleReq["TokenValue"] = token
         return self.singleReq
     
 #--------------------HELPER FUNCTIONS--------------------------------------      
     def _set_Datatypes(self, dtypes=None):
         """List the Datatypes"""
         datatypes = []
@@ -121,14 +121,16 @@
     def _set_Instrument(self, inst):
         propties = [{'Key': DataRequest.hints[eachPrpty.Key],'Value': True} 
                 for eachPrpty in inst.properties] if inst.properties else None
         return {"Properties": propties, "Value": inst.instrument}
         
     def _set_Date(self, dt):
         return {"End":dt.End,"Frequency":dt.Frequency,"Kind":dt.Kind,"Start":dt.Start}
+
+
  #--------------------------------------------------------------------------        
     
    
 
             
     
 ##Datatypes
```

## DatastreamPy/DS_Response.py

```diff
@@ -1,1366 +1,1698 @@
-00000000: 0d0a 696d 706f 7274 2072 6571 7565 7374  ..import request
-00000010: 730d 0a69 6d70 6f72 7420 6a73 6f6e 0d0a  s..import json..
-00000020: 696d 706f 7274 2070 616e 6461 7320 6173  import pandas as
-00000030: 2070 640d 0a66 726f 6d20 6461 7465 7469   pd..from dateti
-00000040: 6d65 2069 6d70 6f72 7420 6461 7465 7469  me import dateti
-00000050: 6d65 2c20 7469 6d65 6465 6c74 610d 0a69  me, timedelta..i
-00000060: 6d70 6f72 7420 7079 747a 0d0a 696d 706f  mport pytz..impo
-00000070: 7274 2074 7261 6365 6261 636b 0d0a 696d  rt traceback..im
-00000080: 706f 7274 2070 6c61 7466 6f72 6d0d 0a69  port platform..i
-00000090: 6d70 6f72 7420 636f 6e66 6967 7061 7273  mport configpars
-000000a0: 6572 0d0a 696d 706f 7274 2061 7465 7869  er..import atexi
-000000b0: 740d 0a69 6d70 6f72 7420 7265 0d0a 0d0a  t..import re....
-000000c0: 0d0a 6672 6f6d 202e 4453 5f52 6571 7565  ..from .DS_Reque
-000000d0: 7374 7320 696d 706f 7274 2054 6f6b 656e  sts import Token
-000000e0: 5265 7175 6573 742c 2049 6e73 7472 756d  Request, Instrum
-000000f0: 656e 742c 2050 726f 7065 7274 6965 732c  ent, Properties,
-00000100: 2044 6174 6152 6571 7565 7374 2c20 4461   DataRequest, Da
-00000110: 7461 5479 7065 2c20 4461 7465 0d0a 0d0a  taType, Date....
-00000120: 232d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  #---------------
-00000130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000140: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000150: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000160: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000170: 2d2d 2d2d 2d2d 2d0d 0a63 6c61 7373 2044  -------..class D
-00000180: 6174 6173 7472 6561 6d3a 0d0a 2020 2020  atastream:..    
-00000190: 2222 2244 6174 6173 7472 6561 6d20 6865  """Datastream he
-000001a0: 6c70 7320 746f 2072 6574 7269 6576 6520  lps to retrieve 
-000001b0: 6461 7461 2066 726f 6d20 4453 5753 2077  data from DSWS w
-000001c0: 6562 2072 6573 7420 7365 7276 6963 6522  eb rest service"
-000001d0: 2222 0d0a 2020 2020 7572 6c20 3d20 2268  ""..    url = "h
-000001e0: 7474 7073 3a2f 2f70 726f 6475 6374 2e64  ttps://product.d
-000001f0: 6174 6173 7472 6561 6d2e 636f 6d22 0d0a  atastream.com"..
-00000200: 2020 2020 7573 6572 6e61 6d65 203d 2022      username = "
-00000210: 220d 0a20 2020 2070 6173 7377 6f72 6420  "..    password 
-00000220: 3d20 2222 0d0a 2020 2020 746f 6b65 6e52  = ""..    tokenR
-00000230: 6573 7020 3d20 4e6f 6e65 0d0a 2020 2020  esp = None..    
-00000240: 6461 7461 536f 7572 6365 203d 204e 6f6e  dataSource = Non
-00000250: 650d 0a20 2020 205f 7469 6d65 6f75 7420  e..    _timeout 
-00000260: 3d20 3138 300d 0a20 2020 205f 7072 6f78  = 180..    _prox
-00000270: 7920 3d20 4e6f 6e65 0d0a 2020 2020 5f73  y = None..    _s
-00000280: 736c 4365 7274 203d 204e 6f6e 650d 0a20  slCert = None.. 
-00000290: 2020 2072 6571 5365 7373 696f 6e20 3d20     reqSession = 
-000002a0: 7265 7175 6573 7473 2e53 6573 7369 6f6e  requests.Session
-000002b0: 2829 0d0a 2020 2020 6170 7049 4420 3d20  ()..    appID = 
-000002c0: 2250 7974 686f 6e4c 6962 2d31 2e30 2e31  "PythonLib-1.0.1
-000002d0: 3122 0d0a 2020 2020 7265 7153 6573 7369  1"..    reqSessi
-000002e0: 6f6e 2e68 6561 6465 7273 5b27 5573 6572  on.headers['User
-000002f0: 2d41 6765 6e74 275d 203d 2072 6571 5365  -Agent'] = reqSe
-00000300: 7373 696f 6e2e 6865 6164 6572 735b 2755  ssion.headers['U
-00000310: 7365 722d 4167 656e 7427 5d20 2b20 2720  ser-Agent'] + ' 
-00000320: 4461 7461 7374 7265 616d 5079 2f31 2e30  DatastreamPy/1.0
-00000330: 2e31 3127 0d0a 2020 2020 6365 7274 6669  .11'..    certfi
-00000340: 6c65 203d 204e 6f6e 650d 0a20 2020 0d0a  le = None..   ..
-00000350: 2020 2020 0d0a 232d 2d2d 2d2d 2d2d 2d43      ..#--------C
-00000360: 6f6e 7374 7275 6374 6f72 202d 2d2d 2d2d  onstructor -----
+00000000: 0d0a 6672 6f6d 2069 7465 7274 6f6f 6c73  ..from itertools
+00000010: 2069 6d70 6f72 7420 636f 756e 740d 0a69   import count..i
+00000020: 6d70 6f72 7420 7265 7175 6573 7473 0d0a  mport requests..
+00000030: 696d 706f 7274 206a 736f 6e0d 0a69 6d70  import json..imp
+00000040: 6f72 7420 7061 6e64 6173 2061 7320 7064  ort pandas as pd
+00000050: 0d0a 6672 6f6d 2064 6174 6574 696d 6520  ..from datetime 
+00000060: 696d 706f 7274 2064 6174 6574 696d 652c  import datetime,
+00000070: 2074 696d 6564 656c 7461 0d0a 696d 706f   timedelta..impo
+00000080: 7274 2070 7974 7a0d 0a69 6d70 6f72 7420  rt pytz..import 
+00000090: 706c 6174 666f 726d 0d0a 696d 706f 7274  platform..import
+000000a0: 2063 6f6e 6669 6770 6172 7365 720d 0a69   configparser..i
+000000b0: 6d70 6f72 7420 7265 0d0a 6672 6f6d 2065  mport re..from e
+000000c0: 6e75 6d20 696d 706f 7274 2049 6e74 456e  num import IntEn
+000000d0: 756d 0d0a 696d 706f 7274 2061 7374 0d0a  um..import ast..
+000000e0: 0d0a 6672 6f6d 202e 4453 5f52 6571 7565  ..from .DS_Reque
+000000f0: 7374 7320 696d 706f 7274 2054 6f6b 656e  sts import Token
+00000100: 5265 7175 6573 742c 2049 6e73 7472 756d  Request, Instrum
+00000110: 656e 742c 2050 726f 7065 7274 6965 732c  ent, Properties,
+00000120: 2044 6174 6152 6571 7565 7374 2c20 4461   DataRequest, Da
+00000130: 7461 5479 7065 2c20 4461 7465 0d0a 6672  taType, Date..fr
+00000140: 6f6d 202e 4453 5573 6572 4461 7461 4f62  om .DSUserDataOb
+00000150: 6a65 6374 4261 7365 2069 6d70 6f72 7420  jectBase import 
+00000160: 4453 5573 6572 4f62 6a65 6374 4661 756c  DSUserObjectFaul
+00000170: 742c 2044 5350 6163 6b61 6765 496e 666f  t, DSPackageInfo
+00000180: 2c20 4453 5573 6572 4f62 6a65 6374 4c6f  , DSUserObjectLo
+00000190: 674c 6576 656c 2c20 4453 5573 6572 4f62  gLevel, DSUserOb
+000001a0: 6a65 6374 4c6f 6746 756e 6373 0d0a 0d0a  jectLogFuncs....
+000001b0: 636c 6173 7320 4453 5379 6d62 6f6c 5265  class DSSymbolRe
+000001c0: 7370 6f6e 7365 5661 6c75 6554 7970 6528  sponseValueType(
+000001d0: 496e 7445 6e75 6d29 3a0d 0a20 2020 2045  IntEnum):..    E
+000001e0: 7272 6f72 203d 2030 0d0a 2020 2020 456d  rror = 0..    Em
+000001f0: 7074 7920 3d20 310d 0a20 2020 2042 6f6f  pty = 1..    Boo
+00000200: 6c20 3d20 320d 0a20 2020 2049 6e74 203d  l = 2..    Int =
+00000210: 2033 0d0a 2020 2020 4461 7465 5469 6d65   3..    DateTime
+00000220: 203d 2034 0d0a 2020 2020 446f 7562 6c65   = 4..    Double
+00000230: 203d 2035 0d0a 2020 2020 5374 7269 6e67   = 5..    String
+00000240: 203d 2036 0d0a 2020 2020 426f 6f6c 4172   = 6..    BoolAr
+00000250: 7261 7920 3d20 370d 0a20 2020 2049 6e74  ray = 7..    Int
+00000260: 4172 7261 7920 3d20 380d 0a20 2020 2044  Array = 8..    D
+00000270: 6174 6554 696d 6541 7272 6179 203d 2039  ateTimeArray = 9
+00000280: 0d0a 2020 2020 446f 7562 6c65 4172 7261  ..    DoubleArra
+00000290: 7920 3d20 3130 0d0a 2020 2020 5374 7269  y = 10..    Stri
+000002a0: 6e67 4172 7261 7920 3d20 3131 0d0a 2020  ngArray = 11..  
+000002b0: 2020 4f62 6a65 6374 4172 7261 7920 3d20    ObjectArray = 
+000002c0: 3132 0d0a 2020 2020 4e75 6c6c 6162 6c65  12..    Nullable
+000002d0: 426f 6f6c 4172 7261 7920 3d20 3133 0d0a  BoolArray = 13..
+000002e0: 2020 2020 4e75 6c6c 6162 6c65 496e 7441      NullableIntA
+000002f0: 7272 6179 203d 2031 340d 0a20 2020 204e  rray = 14..    N
+00000300: 756c 6c61 626c 6544 6174 6554 696d 6541  ullableDateTimeA
+00000310: 7272 6179 203d 2031 350d 0a20 2020 204e  rray = 15..    N
+00000320: 756c 6c61 626c 6544 6f75 626c 6541 7272  ullableDoubleArr
+00000330: 6179 203d 2031 360d 0a0d 0a23 2d2d 2d2d  ay = 16....#----
+00000340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00000370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000380: 2d2d 2d2d 2d2d 2020 0d0a 2020 2020 6465  ------  ..    de
-00000390: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-000003a0: 2075 7365 726e 616d 652c 2070 6173 7377   username, passw
-000003b0: 6f72 642c 2063 6f6e 6669 673d 4e6f 6e65  ord, config=None
-000003c0: 2c20 6461 7461 536f 7572 6365 3d4e 6f6e  , dataSource=Non
-000003d0: 652c 2070 726f 7879 3d4e 6f6e 652c 2073  e, proxy=None, s
-000003e0: 736c 4365 723d 204e 6f6e 6529 3a0d 0a20  slCer= None):.. 
-000003f0: 2020 2020 2020 2069 6620 2863 6f6e 6669         if (confi
-00000400: 6729 3a0d 0a20 2020 2020 2020 2020 2020  g):..           
-00000410: 2070 6172 7365 7220 3d20 636f 6e66 6967   parser = config
-00000420: 7061 7273 6572 2e43 6f6e 6669 6750 6172  parser.ConfigPar
-00000430: 7365 7228 290d 0a20 2020 2020 2020 2020  ser()..         
-00000440: 2020 2070 6172 7365 722e 7265 6164 2863     parser.read(c
-00000450: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
-00000460: 2020 2020 7365 6c66 2e75 726c 203d 2073      self.url = s
-00000470: 656c 662e 7572 6c20 6966 2070 6172 7365  elf.url if parse
-00000480: 722e 6765 7428 2775 726c 272c 2770 6174  r.get('url','pat
-00000490: 6827 292e 7374 7269 7028 2920 3d3d 2027  h').strip() == '
-000004a0: 2720 656c 7365 2070 6172 7365 722e 6765  ' else parser.ge
-000004b0: 7428 2775 726c 272c 2027 7061 7468 2729  t('url', 'path')
-000004c0: 2e73 7472 6970 2829 0d0a 2020 2020 2020  .strip()..      
-000004d0: 2020 2020 2020 7365 6c66 2e75 726c 203d        self.url =
-000004e0: 2073 656c 662e 7572 6c2e 6c6f 7765 7228   self.url.lower(
-000004f0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00000500: 6620 7365 6c66 2e75 726c 3a0d 0a20 2020  f self.url:..   
-00000510: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00000520: 7265 2e6d 6174 6368 2822 5e68 7474 703a  re.match("^http:
-00000530: 222c 2073 656c 662e 7572 6c29 3a0d 0a20  ", self.url):.. 
-00000540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000550: 2020 2073 656c 662e 7572 6c20 3d20 7365     self.url = se
-00000560: 6c66 2e75 726c 2e72 6570 6c61 6365 2827  lf.url.replace('
-00000570: 6874 7470 3a27 2c20 2768 7474 7073 3a27  http:', 'https:'
-00000580: 2c20 3129 200d 0a20 2020 2020 2020 2020  , 1) ..         
-00000590: 2020 2023 7365 6c66 2e75 726c 203d 2073     #self.url = s
-000005a0: 656c 662e 7572 6c20 2b27 2f44 5357 5343  elf.url +'/DSWSC
-000005b0: 6c69 656e 742f 5631 2f44 5353 6572 7669  lient/V1/DSServi
-000005c0: 6365 2e73 7663 2f72 6573 742f 270d 0a20  ce.svc/rest/'.. 
-000005d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000005e0: 5f74 696d 656f 7574 203d 2031 3830 2069  _timeout = 180 i
-000005f0: 6620 7061 7273 6572 2e67 6574 2827 6170  f parser.get('ap
-00000600: 7027 2c20 2774 696d 656f 7574 2729 2e73  p', 'timeout').s
-00000610: 7472 6970 2829 203d 3d20 2727 2065 6c73  trip() == '' els
-00000620: 6520 696e 7428 7061 7273 6572 2e67 6574  e int(parser.get
-00000630: 2827 6170 7027 2c20 2774 696d 656f 7574  ('app', 'timeout
-00000640: 2729 2e73 7472 6970 2829 290d 0a20 2020  ').strip())..   
-00000650: 2020 2020 2073 656c 662e 7572 6c20 3d20       self.url = 
-00000660: 7365 6c66 2e75 726c 202b 272f 4453 5753  self.url +'/DSWS
-00000670: 436c 6965 6e74 2f56 312f 4453 5365 7276  Client/V1/DSServ
-00000680: 6963 652e 7376 632f 7265 7374 2f27 0d0a  ice.svc/rest/'..
-00000690: 2020 2020 2020 2020 6966 2070 726f 7879          if proxy
-000006a0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-000006b0: 656c 662e 5f70 726f 7879 203d 207b 2768  elf._proxy = {'h
-000006c0: 7474 7027 3a70 726f 7879 2c20 2768 7474  ttp':proxy, 'htt
-000006d0: 7073 273a 7072 6f78 797d 0d0a 2020 2020  ps':proxy}..    
-000006e0: 2020 2020 6966 2073 736c 4365 723a 0d0a      if sslCer:..
-000006f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00000700: 2e5f 7373 6c43 6572 7420 3d20 7373 6c43  ._sslCert = sslC
-00000710: 6572 0d0a 2020 2020 2020 2020 7365 6c66  er..        self
-00000720: 2e75 7365 726e 616d 6520 3d20 7573 6572  .username = user
-00000730: 6e61 6d65 0d0a 2020 2020 2020 2020 7365  name..        se
-00000740: 6c66 2e70 6173 7377 6f72 6420 3d20 7061  lf.password = pa
-00000750: 7373 776f 7264 0d0a 2020 2020 2020 2020  ssword..        
-00000760: 7365 6c66 2e64 6174 6153 6f75 7263 6520  self.dataSource 
-00000770: 3d20 6461 7461 536f 7572 6365 0d0a 2020  = dataSource..  
-00000780: 2020 2020 2020 7365 6c66 2e74 6f6b 656e        self.token
-00000790: 5265 7370 203d 2073 656c 662e 5f67 6574  Resp = self._get
-000007a0: 5f74 6f6b 656e 2829 0d0a 2020 2020 2020  _token()..      
-000007b0: 2020 0d0a 232d 2d2d 2d2d 2d2d 2d2d 2d2d    ..#-----------
-000007c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000007d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000007e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2020 0d0a  ------------  ..
-000007f0: 232d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  #---------------
-00000800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00000820: 2d2d 2d2d 2d2d 2d2d 200d 0a20 2020 2064  -------- ..    d
-00000830: 6566 2070 6f73 745f 7573 6572 5f72 6571  ef post_user_req
-00000840: 7565 7374 2873 656c 662c 2074 6963 6b65  uest(self, ticke
-00000850: 7273 2c20 6669 656c 6473 3d4e 6f6e 652c  rs, fields=None,
-00000860: 2073 7461 7274 3d27 272c 2065 6e64 3d27   start='', end='
-00000870: 272c 2066 7265 713d 2727 2c20 6b69 6e64  ', freq='', kind
-00000880: 3d31 2c20 7265 744e 616d 653d 4661 6c73  =1, retName=Fals
-00000890: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
-000008a0: 2054 6869 7320 6675 6e63 7469 6f6e 2068   This function h
-000008b0: 656c 7073 2074 6f20 666f 726d 2072 6571  elps to form req
-000008c0: 7565 7374 7320 666f 7220 6765 745f 6275  uests for get_bu
-000008d0: 6e64 6c65 5f64 6174 612e 200d 0a20 2020  ndle_data. ..   
-000008e0: 2020 2020 2020 2020 2045 6163 6820 7265           Each re
-000008f0: 7175 6573 7420 6973 2063 6f6e 7665 7274  quest is convert
-00000900: 6564 2074 6f20 4a53 4f4e 2066 6f72 6d61  ed to JSON forma
-00000910: 742e 0d0a 2020 2020 2020 2020 2020 2020  t...            
-00000920: 0d0a 2020 2020 2020 2020 2020 2020 4172  ..            Ar
-00000930: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00000940: 2020 2020 7469 636b 6572 733a 2073 7472      tickers: str
-00000950: 696e 672c 2044 6174 6179 7065 7320 0d0a  ing, Dataypes ..
-00000960: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00000970: 6965 6c64 733a 204c 6973 742c 2064 6566  ields: List, def
-00000980: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
-00000990: 2020 2020 2020 2020 2020 7374 6172 743a            start:
-000009a0: 2073 7472 696e 672c 2064 6566 6175 6c74   string, default
-000009b0: 2027 270d 0a20 2020 2020 2020 2020 2020   ''..           
-000009c0: 2020 2020 656e 6420 3a20 7374 7269 6e67      end : string
-000009d0: 2c20 6465 6661 756c 7420 2727 0d0a 2020  , default ''..  
-000009e0: 2020 2020 2020 2020 2020 2020 2066 7265               fre
-000009f0: 7120 3a20 7374 7269 6e67 2c20 6465 6661  q : string, defa
-00000a00: 756c 7420 2727 2c20 4279 2064 6561 6675  ult '', By deafu
-00000a10: 6c74 2044 5357 5320 7472 6561 7473 2061  lt DSWS treats a
-00000a20: 7320 4461 696c 7920 6672 6571 0d0a 2020  s Daily freq..  
-00000a30: 2020 2020 2020 2020 2020 2020 206b 696e               kin
-00000a40: 643a 2069 6e74 2c20 6465 6661 756c 7420  d: int, default 
-00000a50: 312c 2069 6e64 6963 6174 6573 2054 696d  1, indicates Tim
-00000a60: 6573 6572 6965 7320 6173 206f 7574 7075  eseries as outpu
-00000a70: 740d 0a0d 0a20 2020 2020 2020 2020 2052  t....          R
-00000a80: 6574 7572 6e73 3a0d 0a20 2020 2020 2020  eturns:..       
-00000a90: 2020 2020 2020 2020 2020 2044 6963 7469             Dicti
-00000aa0: 6f6e 6172 7922 2222 0d0a 0d0a 2020 2020  onary"""....    
-00000ab0: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-00000ac0: 2020 6966 2066 6965 6c64 7320 3d3d 204e    if fields == N
-00000ad0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00000ae0: 2020 6669 656c 6473 3d5b 5d0d 0a20 2020    fields=[]..   
-00000af0: 2020 2020 200d 0a20 2020 2020 2020 2069       ..        i
-00000b00: 6e64 6578 203d 2074 6963 6b65 7273 2e72  ndex = tickers.r
-00000b10: 6669 6e64 2827 7c27 290d 0a20 2020 2020  find('|')..     
-00000b20: 2020 2070 726f 704c 6973 7420 3d20 5b5d     propList = []
-00000b30: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00000b40: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00000b50: 6e64 6578 203d 3d20 2d31 3a0d 0a20 2020  ndex == -1:..   
-00000b60: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00000b70: 7472 756d 656e 7420 3d20 496e 7374 7275  trument = Instru
-00000b80: 6d65 6e74 2874 6963 6b65 7273 2c20 4e6f  ment(tickers, No
-00000b90: 6e65 290d 0a20 2020 2020 2020 2020 2020  ne)..           
-00000ba0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00000bb0: 2020 2020 2020 2020 2347 6574 2061 6c6c          #Get all
-00000bc0: 2074 6865 2070 726f 7065 7274 6965 7320   the properties 
-00000bd0: 6f66 2074 6865 2069 6e73 7472 756d 656e  of the instrumen
-00000be0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00000bf0: 2020 2069 6e73 7470 726f 7073 203d 205b     instprops = [
-00000c00: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00000c10: 2020 2069 6620 7469 636b 6572 735b 696e     if tickers[in
-00000c20: 6465 782b 313a 5d2e 7266 696e 6428 272c  dex+1:].rfind(',
-00000c30: 2729 2021 3d20 2d31 3a0d 0a20 2020 2020  ') != -1:..     
-00000c40: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00000c50: 726f 704c 6973 7420 3d20 7469 636b 6572  ropList = ticker
-00000c60: 735b 696e 6465 782b 313a 5d2e 7370 6c69  s[index+1:].spli
-00000c70: 7428 272c 2729 0d0a 2020 2020 2020 2020  t(',')..        
-00000c80: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00000c90: 6561 6368 5072 6f70 2069 6e20 7072 6f70  eachProp in prop
-00000ca0: 4c69 7374 3a0d 0a20 2020 2020 2020 2020  List:..         
-00000cb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00000cc0: 6e73 7470 726f 7073 2e61 7070 656e 6428  nstprops.append(
-00000cd0: 5072 6f70 6572 7469 6573 2865 6163 6850  Properties(eachP
-00000ce0: 726f 702c 2054 7275 6529 290d 0a20 2020  rop, True))..   
-00000cf0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00000d00: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00000d10: 2020 2020 2020 2020 7072 6f70 4c69 7374          propList
-00000d20: 2e61 7070 656e 6428 7469 636b 6572 735b  .append(tickers[
-00000d30: 696e 6465 782b 313a 5d29 0d0a 2020 2020  index+1:])..    
-00000d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000d50: 696e 7374 7072 6f70 732e 6170 7065 6e64  instprops.append
-00000d60: 2850 726f 7065 7274 6965 7328 7469 636b  (Properties(tick
-00000d70: 6572 735b 696e 6465 782b 313a 5d2c 2054  ers[index+1:], T
-00000d80: 7275 6529 290d 0a0d 0a20 2020 2020 2020  rue))....       
-00000d90: 2020 2020 2020 2020 2069 6e73 7472 756d           instrum
-00000da0: 656e 7420 3d20 496e 7374 7275 6d65 6e74  ent = Instrument
-00000db0: 2874 6963 6b65 7273 5b30 3a69 6e64 6578  (tickers[0:index
-00000dc0: 5d2c 2069 6e73 7470 726f 7073 290d 0a20  ], instprops).. 
-00000dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000de0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00000df0: 2020 2020 2064 6174 7970 6573 3d5b 5d0d       datypes=[].
-00000e00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00000e10: 274e 2720 696e 2070 726f 704c 6973 743a  'N' in propList:
-00000e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00000e30: 2020 7072 6f70 203d 205b 7b27 4b65 7927    prop = [{'Key'
-00000e40: 3a27 5265 7475 726e 4e61 6d65 272c 2027  :'ReturnName', '
-00000e50: 5661 6c75 6527 3a54 7275 657d 5d20 0d0a  Value':True}] ..
-00000e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e70: 7265 744e 616d 6520 3d20 5472 7565 0d0a  retName = True..
-00000e80: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00000e90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00000ea0: 2020 2070 726f 7020 3d20 4e6f 6e65 0d0a     prop = None..
-00000eb0: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
-00000ec0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00000ed0: 656e 2866 6965 6c64 7329 203e 2030 3a0d  en(fields) > 0:.
-00000ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000ef0: 2066 6f72 2065 6163 6844 7479 7065 2069   for eachDtype i
-00000f00: 6e20 6669 656c 6473 3a0d 0a20 2020 2020  n fields:..     
-00000f10: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00000f20: 6174 7970 6573 2e61 7070 656e 6428 4461  atypes.append(Da
-00000f30: 7461 5479 7065 2865 6163 6844 7479 7065  taType(eachDtype
-00000f40: 2c20 7072 6f70 2929 0d0a 2020 2020 2020  , prop))..      
-00000f50: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00000f60: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00000f70: 7970 6573 2e61 7070 656e 6428 4461 7461  ypes.append(Data
-00000f80: 5479 7065 2866 6965 6c64 732c 2070 726f  Type(fields, pro
-00000f90: 7029 290d 0a20 2020 2020 2020 2020 2020  p))..           
-00000fa0: 2020 2020 2020 2020 2020 2020 200d 0a20               .. 
-00000fb0: 2020 2020 2020 2020 2020 2064 6174 6520             date 
-00000fc0: 3d20 4461 7465 2873 7461 7274 2c20 6672  = Date(start, fr
-00000fd0: 6571 2c20 656e 642c 206b 696e 6429 0d0a  eq, end, kind)..
-00000fe0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00000ff0: 6573 7420 3d20 7b22 496e 7374 7275 6d65  est = {"Instrume
-00001000: 6e74 223a 696e 7374 7275 6d65 6e74 2c22  nt":instrument,"
-00001010: 4461 7461 5479 7065 7322 3a64 6174 7970  DataTypes":datyp
-00001020: 6573 2c22 4461 7465 223a 6461 7465 7d0d  es,"Date":date}.
-00001030: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00001040: 7572 6e20 7265 7175 6573 742c 2072 6574  urn request, ret
-00001050: 4e61 6d65 0d0a 2020 2020 2020 2020 6578  Name..        ex
-00001060: 6365 7074 2045 7863 6570 7469 6f6e 3a0d  cept Exception:.
-00001070: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00001080: 6e74 2822 706f 7374 5f75 7365 725f 7265  nt("post_user_re
-00001090: 7175 6573 7420 3a20 4578 6365 7074 696f  quest : Exceptio
-000010a0: 6e20 4f63 6375 7265 6422 290d 0a20 2020  n Occured")..   
-000010b0: 2020 2020 2020 2020 2070 7269 6e74 2874           print(t
-000010c0: 7261 6365 6261 636b 2e73 7973 2e65 7863  raceback.sys.exc
-000010d0: 5f69 6e66 6f28 2929 0d0a 2020 2020 2020  _info())..      
-000010e0: 2020 2020 2020 7072 696e 7428 7472 6163        print(trac
-000010f0: 6562 6163 6b2e 7072 696e 745f 6578 6328  eback.print_exc(
-00001100: 6c69 6d69 743d 3529 290d 0a20 2020 2020  limit=5))..     
-00001110: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00001120: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-00001130: 0d0a 2020 2020 6465 6620 6765 745f 6461  ..    def get_da
-00001140: 7461 2873 656c 662c 2074 6963 6b65 7273  ta(self, tickers
-00001150: 2c20 6669 656c 6473 3d4e 6f6e 652c 2073  , fields=None, s
-00001160: 7461 7274 3d27 272c 2065 6e64 3d27 272c  tart='', end='',
-00001170: 2066 7265 713d 2727 2c20 6b69 6e64 3d31   freq='', kind=1
-00001180: 293a 0d0a 2020 2020 2020 2020 2222 2254  ):..        """T
-00001190: 6869 7320 4675 6e63 7469 6f6e 2070 726f  his Function pro
-000011a0: 6365 7373 6573 2061 2073 696e 676c 6520  cesses a single 
-000011b0: 4a53 4f4e 2066 6f72 6d61 7420 7265 7175  JSON format requ
-000011c0: 6573 7420 746f 2070 726f 7669 6465 0d0a  est to provide..
-000011d0: 2020 2020 2020 2020 2020 2064 6174 6120             data 
-000011e0: 7265 7370 6f6e 7365 2066 726f 6d20 4453  response from DS
-000011f0: 5753 2077 6562 2069 6e20 7468 6520 666f  WS web in the fo
-00001200: 726d 206f 6620 7079 7468 6f6e 2044 6174  rm of python Dat
-00001210: 6166 7261 6d65 0d0a 2020 2020 2020 2020  aframe..        
-00001220: 2020 200d 0a20 2020 2020 2020 2020 2020     ..           
-00001230: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00001240: 2020 2020 2020 7469 636b 6572 733a 2073        tickers: s
-00001250: 7472 696e 672c 2044 6174 6179 7065 7320  tring, Dataypes 
-00001260: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001270: 2066 6965 6c64 733a 204c 6973 742c 2064   fields: List, d
-00001280: 6566 6175 6c74 204e 6f6e 650d 0a20 2020  efault None..   
-00001290: 2020 2020 2020 2020 2020 2020 7374 6172              star
-000012a0: 743a 2073 7472 696e 672c 2064 6566 6175  t: string, defau
-000012b0: 6c74 2027 270d 0a20 2020 2020 2020 2020  lt ''..         
-000012c0: 2020 2020 2020 656e 6420 3a20 7374 7269        end : stri
-000012d0: 6e67 2c20 6465 6661 756c 7420 2727 0d0a  ng, default ''..
-000012e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000012f0: 7265 7120 3a20 7374 7269 6e67 2c20 6465  req : string, de
-00001300: 6661 756c 7420 2727 2c20 4279 2064 6561  fault '', By dea
-00001310: 6675 6c74 2044 5357 5320 7472 6561 7473  fult DSWS treats
-00001320: 2061 7320 4461 696c 7920 6672 6571 0d0a   as Daily freq..
-00001330: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-00001340: 696e 643a 2069 6e74 2c20 6465 6661 756c  ind: int, defaul
-00001350: 7420 312c 2069 6e64 6963 6174 6573 2054  t 1, indicates T
-00001360: 696d 6573 6572 6965 7320 6173 206f 7574  imeseries as out
-00001370: 7075 740d 0a20 2020 2020 2020 2020 2020  put..           
-00001380: 2020 2020 7265 744e 616d 653a 2062 6f6f      retName: boo
-00001390: 6c2c 2064 6566 6175 6c74 2046 616c 7365  l, default False
-000013a0: 2c20 746f 2062 6520 7365 7420 746f 2054  , to be set to T
-000013b0: 7275 6520 6966 2074 6865 2049 6e73 7472  rue if the Instr
-000013c0: 756d 656e 740d 0a20 2020 2020 2020 2020  ument..         
-000013d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000013e0: 2020 6e61 6d65 7320 616e 6420 4461 7461    names and Data
-000013f0: 7479 7065 206e 616d 6573 2061 7265 2074  type names are t
-00001400: 6f20 6265 2072 6574 7572 6e65 640d 0a0d  o be returned...
-00001410: 0a20 2020 2020 2020 2020 2052 6574 7572  .          Retur
-00001420: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
-00001430: 2020 2020 2020 2044 6174 6146 7261 6d65         DataFrame
-00001440: 2e22 2222 0d0a 2020 2020 2020 2020 2020  ."""..          
-00001450: 2020 2020 2020 200d 0a0d 0a20 2020 2020         ....     
-00001460: 2020 2067 6574 4461 7461 5f75 726c 203d     getData_url =
-00001470: 2073 656c 662e 7572 6c20 2b20 2247 6574   self.url + "Get
-00001480: 4461 7461 220d 0a20 2020 2020 2020 2072  Data"..        r
-00001490: 6177 5f64 6174 6152 6571 7565 7374 203d  aw_dataRequest =
-000014a0: 2022 220d 0a20 2020 2020 2020 206a 736f   ""..        jso
-000014b0: 6e5f 6461 7461 5265 7175 6573 7420 3d20  n_dataRequest = 
-000014c0: 2222 0d0a 2020 2020 2020 2020 6a73 6f6e  ""..        json
-000014d0: 5f52 6573 706f 6e73 6520 3d20 2222 0d0a  _Response = ""..
-000014e0: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-000014f0: 2020 6966 2066 6965 6c64 7320 3d3d 204e    if fields == N
-00001500: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00001510: 2020 6669 656c 6473 203d 205b 5d0d 0a20    fields = [].. 
-00001520: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00001530: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00001540: 2020 2072 6574 4e61 6d65 203d 2046 616c     retName = Fal
-00001550: 7365 0d0a 2020 2020 2020 2020 2020 2020  se..            
-00001560: 7265 712c 2072 6574 4e61 6d65 203d 2073  req, retName = s
-00001570: 656c 662e 706f 7374 5f75 7365 725f 7265  elf.post_user_re
-00001580: 7175 6573 7428 7469 636b 6572 732c 2066  quest(tickers, f
-00001590: 6965 6c64 732c 2073 7461 7274 2c20 656e  ields, start, en
-000015a0: 642c 2066 7265 712c 206b 696e 642c 2072  d, freq, kind, r
-000015b0: 6574 4e61 6d65 290d 0a20 2020 2020 2020  etName)..       
-000015c0: 2020 2020 2064 6174 6172 6571 7565 7374       datarequest
-000015d0: 203d 2044 6174 6152 6571 7565 7374 2829   = DataRequest()
-000015e0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000015f0: 2028 7365 6c66 2e74 6f6b 656e 5265 7370   (self.tokenResp
-00001600: 203d 3d20 4e6f 6e65 293a 0d0a 2020 2020   == None):..    
-00001610: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00001620: 6520 4578 6365 7074 696f 6e28 2249 6e76  e Exception("Inv
-00001630: 616c 6964 2054 6f6b 656e 2056 616c 7565  alid Token Value
-00001640: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00001650: 656c 6966 2027 4d65 7373 6167 6527 2069  elif 'Message' i
-00001660: 6e20 7365 6c66 2e74 6f6b 656e 5265 7370  n self.tokenResp
-00001670: 2e6b 6579 7328 293a 0d0a 2020 2020 2020  .keys():..      
-00001680: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00001690: 4578 6365 7074 696f 6e28 7365 6c66 2e74  Exception(self.t
-000016a0: 6f6b 656e 5265 7370 5b27 4d65 7373 6167  okenResp['Messag
-000016b0: 6527 5d29 0d0a 2020 2020 2020 2020 2020  e'])..          
-000016c0: 2020 656c 6966 2027 546f 6b65 6e56 616c    elif 'TokenVal
-000016d0: 7565 2720 696e 2073 656c 662e 746f 6b65  ue' in self.toke
-000016e0: 6e52 6573 702e 6b65 7973 2829 3a0d 0a20  nResp.keys():.. 
-000016f0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00001700: 775f 6461 7461 5265 7175 6573 7420 3d20  w_dataRequest = 
-00001710: 6461 7461 7265 7175 6573 742e 6765 745f  datarequest.get_
-00001720: 5265 7175 6573 7428 7265 712c 2073 656c  Request(req, sel
-00001730: 662e 6461 7461 536f 7572 6365 2c20 0d0a  f.dataSource, ..
-00001740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001770: 2020 2020 2020 7365 6c66 2e74 6f6b 656e        self.token
-00001780: 5265 7370 5b27 546f 6b65 6e56 616c 7565  Resp['TokenValue
-00001790: 275d 290d 0a20 2020 2020 2020 2020 2020  '])..           
-000017a0: 2020 2020 2023 7072 696e 7428 7261 775f       #print(raw_
-000017b0: 6461 7461 5265 7175 6573 7429 0d0a 2020  dataRequest)..  
-000017c0: 2020 2020 2020 2020 2020 6966 2028 7261            if (ra
-000017d0: 775f 6461 7461 5265 7175 6573 7420 213d  w_dataRequest !=
-000017e0: 2022 2229 3a0d 0a20 2020 2020 2020 2020   ""):..         
-000017f0: 2020 2020 2020 206a 736f 6e5f 5265 7370         json_Resp
-00001800: 6f6e 7365 203d 2073 656c 662e 5f67 6574  onse = self._get
-00001810: 5f6a 736f 6e5f 5265 7370 6f6e 7365 2867  _json_Response(g
-00001820: 6574 4461 7461 5f75 726c 2c20 7261 775f  etData_url, raw_
-00001830: 6461 7461 5265 7175 6573 7429 0d0a 2020  dataRequest)..  
-00001840: 2020 2020 2020 2020 2020 2020 2020 2370                #p
-00001850: 7269 6e74 286a 736f 6e5f 5265 7370 6f6e  rint(json_Respon
-00001860: 7365 290d 0a20 2020 2020 2020 2020 2020  se)..           
-00001870: 2020 2020 2023 666f 726d 6174 2074 6865       #format the
-00001880: 204a 534f 4e20 7265 7370 6f6e 7365 2069   JSON response i
-00001890: 6e74 6f20 7265 6164 6162 6c65 2074 6162  nto readable tab
-000018a0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-000018b0: 2020 2020 6966 2027 4461 7461 5265 7370      if 'DataResp
-000018c0: 6f6e 7365 2720 696e 206a 736f 6e5f 5265  onse' in json_Re
-000018d0: 7370 6f6e 7365 3a0d 0a20 2020 2020 2020  sponse:..       
-000018e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000018f0: 7265 744e 616d 653a 0d0a 2020 2020 2020  retName:..      
-00001900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001910: 2020 7365 6c66 2e5f 6765 745f 6d65 7461    self._get_meta
-00001920: 6461 7461 286a 736f 6e5f 5265 7370 6f6e  data(json_Respon
-00001930: 7365 5b27 4461 7461 5265 7370 6f6e 7365  se['DataResponse
-00001940: 275d 290d 0a20 2020 2020 2020 2020 2020  '])..           
-00001950: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
-00001960: 655f 6461 7461 6672 616d 6520 3d20 7365  e_dataframe = se
-00001970: 6c66 2e5f 666f 726d 6174 5f52 6573 706f  lf._format_Respo
-00001980: 6e73 6528 6a73 6f6e 5f52 6573 706f 6e73  nse(json_Respons
-00001990: 655b 2744 6174 6152 6573 706f 6e73 6527  e['DataResponse'
-000019a0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-000019b0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-000019c0: 6573 706f 6e73 655f 6461 7461 6672 616d  esponse_datafram
-000019d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-000019e0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000019f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00001a00: 2027 4d65 7373 6167 6527 2069 6e20 6a73   'Message' in js
-00001a10: 6f6e 5f52 6573 706f 6e73 653a 0d0a 2020  on_Response:..  
-00001a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a30: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
-00001a40: 7074 696f 6e28 6a73 6f6e 5f52 6573 706f  ption(json_Respo
-00001a50: 6e73 655b 274d 6573 7361 6765 275d 290d  nse['Message']).
-00001a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001a70: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00001a80: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00001a90: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00001aa0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00001ab0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00001ac0: 2045 7863 6570 7469 6f6e 3a0d 0a20 2020   Exception:..   
-00001ad0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-00001ae0: 6765 745f 6461 7461 203a 2045 7863 6570  get_data : Excep
-00001af0: 7469 6f6e 204f 6363 7572 6564 2229 0d0a  tion Occured")..
-00001b00: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00001b10: 7428 7472 6163 6562 6163 6b2e 7379 732e  t(traceback.sys.
-00001b20: 6578 635f 696e 666f 2829 290d 0a20 2020  exc_info())..   
-00001b30: 2020 2020 2020 2020 2070 7269 6e74 2874           print(t
-00001b40: 7261 6365 6261 636b 2e70 7269 6e74 5f65  raceback.print_e
-00001b50: 7863 286c 696d 6974 3d35 2929 0d0a 2020  xc(limit=5))..  
-00001b60: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00001b70: 204e 6f6e 650d 0a20 2020 200d 0a20 2020   None..    ..   
-00001b80: 2064 6566 2067 6574 5f62 756e 646c 655f   def get_bundle_
-00001b90: 6461 7461 2873 656c 662c 2062 756e 646c  data(self, bundl
-00001ba0: 6552 6571 7565 7374 3d4e 6f6e 652c 2072  eRequest=None, r
-00001bb0: 6574 4e61 6d65 3d46 616c 7365 293a 0d0a  etName=False):..
-00001bc0: 2020 2020 2020 2020 2222 2254 6869 7320          """This 
-00001bd0: 4675 6e63 7469 6f6e 2070 726f 6365 7373  Function process
-00001be0: 6573 2061 206d 756c 7469 706c 6520 4a53  es a multiple JS
-00001bf0: 4f4e 2066 6f72 6d61 7420 6461 7461 2072  ON format data r
-00001c00: 6571 7565 7374 7320 746f 2070 726f 7669  equests to provi
-00001c10: 6465 0d0a 2020 2020 2020 2020 2020 2064  de..           d
-00001c20: 6174 6120 7265 7370 6f6e 7365 2066 726f  ata response fro
-00001c30: 6d20 4453 5753 2077 6562 2069 6e20 7468  m DSWS web in th
-00001c40: 6520 666f 726d 206f 6620 7079 7468 6f6e  e form of python
-00001c50: 2044 6174 6166 7261 6d65 2e0d 0a20 2020   Dataframe...   
-00001c60: 2020 2020 2020 2020 5573 6520 706f 7374          Use post
-00001c70: 5f75 7365 725f 7265 7175 6573 7420 746f  _user_request to
-00001c80: 2066 6f72 6d20 6561 6368 204a 534f 4e20   form each JSON 
-00001c90: 6461 7461 2072 6571 7565 7374 2061 6e64  data request and
-00001ca0: 2061 7070 656e 6420 746f 2061 204c 6973   append to a Lis
-00001cb0: 740d 0a20 2020 2020 2020 2020 2020 746f  t..           to
-00001cc0: 2070 6173 7320 7468 6520 6275 6e64 6c65   pass the bundle
-00001cd0: 5265 7175 7365 742e 0d0a 2020 2020 2020  Requset...      
-00001ce0: 2020 2020 200d 0a20 2020 2020 2020 2020       ..         
-00001cf0: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
-00001d00: 2020 2020 2020 2020 2062 756e 646c 6552           bundleR
-00001d10: 6571 7565 7374 3a20 4c69 7374 2c20 6578  equest: List, ex
-00001d20: 7065 6374 7320 6c69 7374 206f 6620 4461  pects list of Da
-00001d30: 7461 7265 7175 6573 7473 200d 0a20 2020  tarequests ..   
-00001d40: 2020 2020 2020 2020 2020 2020 7265 744e              retN
-00001d50: 616d 653a 2062 6f6f 6c2c 2064 6566 6175  ame: bool, defau
-00001d60: 6c74 2046 616c 7365 2c20 746f 2062 6520  lt False, to be 
-00001d70: 7365 7420 746f 2054 7275 6520 6966 2074  set to True if t
-00001d80: 6865 2049 6e73 7472 756d 656e 740d 0a20  he Instrument.. 
-00001d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001da0: 2020 2020 2020 2020 2020 6e61 6d65 7320            names 
-00001db0: 616e 6420 4461 7461 7479 7065 206e 616d  and Datatype nam
-00001dc0: 6573 2061 7265 2074 6f20 6265 2072 6574  es are to be ret
-00001dd0: 7572 6e65 640d 0a0d 0a20 2020 2020 2020  urned....       
-00001de0: 2020 2020 2052 6574 7572 6e73 3a0d 0a20       Returns:.. 
-00001df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e00: 2044 6174 6146 7261 6d65 2e22 2222 0d0a   DataFrame."""..
-00001e10: 0d0a 2020 2020 2020 2020 6765 7444 6174  ..        getDat
-00001e20: 6142 756e 646c 655f 7572 6c20 3d20 7365  aBundle_url = se
-00001e30: 6c66 2e75 726c 202b 2022 4765 7444 6174  lf.url + "GetDat
-00001e40: 6142 756e 646c 6522 0d0a 2020 2020 2020  aBundle"..      
-00001e50: 2020 7261 775f 6461 7461 5265 7175 6573    raw_dataReques
-00001e60: 7420 3d20 2222 0d0a 2020 2020 2020 2020  t = ""..        
-00001e70: 6a73 6f6e 5f64 6174 6152 6571 7565 7374  json_dataRequest
-00001e80: 203d 2022 220d 0a20 2020 2020 2020 206a   = ""..        j
-00001e90: 736f 6e5f 5265 7370 6f6e 7365 203d 2022  son_Response = "
-00001ea0: 220d 0a20 2020 2020 2020 0d0a 2020 2020  "..       ..    
-00001eb0: 2020 2020 6966 2062 756e 646c 6552 6571      if bundleReq
-00001ec0: 7565 7374 203d 3d20 4e6f 6e65 3a0d 0a20  uest == None:.. 
-00001ed0: 2020 2020 2020 2020 2020 2062 756e 646c             bundl
-00001ee0: 6552 6571 7565 7374 203d 205b 5d0d 0a20  eRequest = [].. 
-00001ef0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00001f00: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00001f10: 2020 2064 6174 6172 6571 7565 7374 203d     datarequest =
-00001f20: 2044 6174 6152 6571 7565 7374 2829 0d0a   DataRequest()..
-00001f30: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-00001f40: 7365 6c66 2e74 6f6b 656e 5265 7370 203d  self.tokenResp =
-00001f50: 3d20 4e6f 6e65 293a 0d0a 2020 2020 2020  = None):..      
-00001f60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00001f70: 4578 6365 7074 696f 6e28 2249 6e76 616c  Exception("Inval
-00001f80: 6964 2054 6f6b 656e 2056 616c 7565 2229  id Token Value")
-00001f90: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00001fa0: 6966 2027 4d65 7373 6167 6527 2069 6e20  if 'Message' in 
-00001fb0: 7365 6c66 2e74 6f6b 656e 5265 7370 2e6b  self.tokenResp.k
-00001fc0: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
-00001fd0: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-00001fe0: 6365 7074 696f 6e28 7365 6c66 2e74 6f6b  ception(self.tok
-00001ff0: 656e 5265 7370 5b27 4d65 7373 6167 6527  enResp['Message'
-00002000: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-00002010: 656c 6966 2027 546f 6b65 6e56 616c 7565  elif 'TokenValue
-00002020: 2720 696e 2073 656c 662e 746f 6b65 6e52  ' in self.tokenR
-00002030: 6573 702e 6b65 7973 2829 3a0d 0a20 2020  esp.keys():..   
-00002040: 2020 2020 2020 2020 2020 2020 2072 6177               raw
-00002050: 5f64 6174 6152 6571 7565 7374 203d 2064  _dataRequest = d
-00002060: 6174 6172 6571 7565 7374 2e67 6574 5f62  atarequest.get_b
-00002070: 756e 646c 655f 5265 7175 6573 7428 6275  undle_Request(bu
-00002080: 6e64 6c65 5265 7175 6573 742c 2073 656c  ndleRequest, sel
-00002090: 662e 6461 7461 536f 7572 6365 2c20 0d0a  f.dataSource, ..
-000020a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-000020e0: 662e 746f 6b65 6e52 6573 705b 2754 6f6b  f.tokenResp['Tok
-000020f0: 656e 5661 6c75 6527 5d29 0d0a 2020 2020  enValue'])..    
-00002100: 2020 2020 2020 2020 2370 7269 6e74 2872          #print(r
-00002110: 6177 5f64 6174 6152 6571 7565 7374 290d  aw_dataRequest).
-00002120: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00002130: 2872 6177 5f64 6174 6152 6571 7565 7374  (raw_dataRequest
-00002140: 2021 3d20 2222 293a 0d0a 2020 2020 2020   != ""):..      
-00002150: 2020 2020 2020 2020 2020 206a 736f 6e5f             json_
-00002160: 5265 7370 6f6e 7365 203d 2073 656c 662e  Response = self.
-00002170: 5f67 6574 5f6a 736f 6e5f 5265 7370 6f6e  _get_json_Respon
-00002180: 7365 2867 6574 4461 7461 4275 6e64 6c65  se(getDataBundle
-00002190: 5f75 726c 2c20 7261 775f 6461 7461 5265  _url, raw_dataRe
-000021a0: 7175 6573 7429 0d0a 2020 2020 2020 2020  quest)..        
-000021b0: 2020 2020 2020 2020 2020 2020 2023 7072               #pr
-000021c0: 696e 7428 6a73 6f6e 5f52 6573 706f 6e73  int(json_Respons
-000021d0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-000021e0: 2020 2020 2069 6620 2744 6174 6152 6573       if 'DataRes
-000021f0: 706f 6e73 6573 2720 696e 206a 736f 6e5f  ponses' in json_
-00002200: 5265 7370 6f6e 7365 3a0d 0a20 2020 2020  Response:..     
-00002210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002220: 6966 2072 6574 4e61 6d65 3a0d 0a20 2020  if retName:..   
-00002230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002240: 2020 2020 2020 7365 6c66 2e5f 6765 745f        self._get_
-00002250: 6d65 7461 6461 7461 5f62 756e 646c 6528  metadata_bundle(
-00002260: 6a73 6f6e 5f52 6573 706f 6e73 655b 2744  json_Response['D
-00002270: 6174 6152 6573 706f 6e73 6573 275d 290d  ataResponses']).
-00002280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002290: 2020 2020 2020 7265 7370 6f6e 7365 5f64        response_d
-000022a0: 6174 6166 7261 6d65 203d 2073 656c 662e  ataframe = self.
-000022b0: 5f66 6f72 6d61 745f 6275 6e64 6c65 5f72  _format_bundle_r
-000022c0: 6573 706f 6e73 6528 6a73 6f6e 5f52 6573  esponse(json_Res
-000022d0: 706f 6e73 6529 0d0a 2020 2020 2020 2020  ponse)..        
-000022e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000022f0: 7572 6e20 7265 7370 6f6e 7365 5f64 6174  urn response_dat
-00002300: 6166 7261 6d65 0d0a 2020 2020 2020 2020  aframe..        
-00002310: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00002320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002330: 2020 2020 6966 2027 4d65 7373 6167 6527      if 'Message'
-00002340: 2069 6e20 6a73 6f6e 5f52 6573 706f 6e73   in json_Respons
-00002350: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00002360: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00002370: 6520 4578 6365 7074 696f 6e28 6a73 6f6e  e Exception(json
-00002380: 5f52 6573 706f 6e73 655b 274d 6573 7361  _Response['Messa
-00002390: 6765 275d 290d 0a20 2020 2020 2020 2020  ge'])..         
-000023a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000023b0: 6e20 4e6f 6e65 0d0a 2020 2020 2020 2020  n None..        
-000023c0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-000023d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000023e0: 6e20 4e6f 6e65 0d0a 2020 2020 2020 2020  n None..        
-000023f0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00002400: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00002410: 7269 6e74 2822 6765 745f 6275 6e64 6c65  rint("get_bundle
-00002420: 5f64 6174 6120 3a20 4578 6365 7074 696f  _data : Exceptio
-00002430: 6e20 4f63 6375 7265 6422 290d 0a20 2020  n Occured")..   
-00002440: 2020 2020 2020 2020 2070 7269 6e74 2874           print(t
-00002450: 7261 6365 6261 636b 2e73 7973 2e65 7863  raceback.sys.exc
-00002460: 5f69 6e66 6f28 2929 0d0a 2020 2020 2020  _info())..      
-00002470: 2020 2020 2020 7072 696e 7428 7472 6163        print(trac
-00002480: 6562 6163 6b2e 7072 696e 745f 6578 6328  eback.print_exc(
-00002490: 6c69 6d69 743d 3529 290d 0a20 2020 2020  limit=5))..     
-000024a0: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-000024b0: 6e65 0d0a 2020 2020 0d0a 232d 2d2d 2d2d  ne..    ..#-----
-000024c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000024d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000024e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000024f0: 2d2d 200d 0a23 2d2d 2d2d 2d2d 2d2d 2d2d  -- ..#----------
-00002500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 2020  -------------   
-00002530: 2020 2020 2020 2020 2020 0d0a 232d 2d2d            ..#---
-00002540: 2d2d 2d2d 4865 6c70 6572 2046 756e 6374  ----Helper Funct
-00002550: 696f 6e73 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ions------------
-00002560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00002580: 2d2d 2d2d 2d2d 2d0d 0a20 2020 2064 6566  -------..    def
-00002590: 205f 6765 745f 5265 7370 6f6e 7365 2873   _get_Response(s
-000025a0: 656c 662c 2072 6571 5572 6c2c 2072 6177  elf, reqUrl, raw
-000025b0: 5f72 6571 7565 7374 293a 0d0a 2020 2020  _request):..    
-000025c0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000025d0: 2020 2020 2020 2363 6f6e 7665 7274 2072        #convert r
-000025e0: 6177 2072 6571 7565 7374 2074 6f20 6a73  aw request to js
-000025f0: 6f6e 2066 6f72 6d61 7420 6265 666f 7265  on format before
-00002600: 2070 6f73 740d 0a20 2020 2020 2020 2020   post..         
-00002610: 2020 206a 736f 6e52 6571 7565 7374 203d     jsonRequest =
-00002620: 2073 656c 662e 5f6a 736f 6e5f 5265 7175   self._json_Requ
-00002630: 6573 7428 7261 775f 7265 7175 6573 7429  est(raw_request)
-00002640: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
-00002650: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00002660: 656c 662e 5f73 736c 4365 7274 3a0d 0a20  elf._sslCert:.. 
-00002670: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00002680: 7474 705f 5265 7370 6f6e 7365 203d 2073  ttp_Response = s
-00002690: 656c 662e 7265 7153 6573 7369 6f6e 2e70  elf.reqSession.p
-000026a0: 6f73 7428 7265 7155 726c 2c20 6a73 6f6e  ost(reqUrl, json
-000026b0: 3d6a 736f 6e52 6571 7565 7374 2c20 2070  =jsonRequest,  p
-000026c0: 726f 7869 6573 3d73 656c 662e 5f70 726f  roxies=self._pro
-000026d0: 7879 2c20 7665 7269 6679 203d 2073 656c  xy, verify = sel
-000026e0: 662e 5f73 736c 4365 7274 2c20 7469 6d65  f._sslCert, time
-000026f0: 6f75 743d 2073 656c 662e 5f74 696d 656f  out= self._timeo
-00002700: 7574 290d 0a20 2020 2020 2020 2020 2020  ut)..           
-00002710: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00002720: 2020 2020 2020 2020 6874 7470 5f52 6573          http_Res
-00002730: 706f 6e73 6520 3d20 7365 6c66 2e72 6571  ponse = self.req
-00002740: 5365 7373 696f 6e2e 706f 7374 2872 6571  Session.post(req
-00002750: 5572 6c2c 206a 736f 6e3d 6a73 6f6e 5265  Url, json=jsonRe
-00002760: 7175 6573 742c 2020 7072 6f78 6965 733d  quest,  proxies=
-00002770: 7365 6c66 2e5f 7072 6f78 792c 2076 6572  self._proxy, ver
-00002780: 6966 7920 3d20 7365 6c66 2e63 6572 7466  ify = self.certf
-00002790: 696c 652c 2074 696d 656f 7574 3d20 7365  ile, timeout= se
-000027a0: 6c66 2e5f 7469 6d65 6f75 7429 0d0a 2020  lf._timeout)..  
-000027b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000027c0: 2068 7474 705f 5265 7370 6f6e 7365 0d0a   http_Response..
-000027d0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-000027e0: 2072 6571 7565 7374 732e 6578 6365 7074   requests.except
-000027f0: 696f 6e73 2e43 6f6e 6e65 6374 696f 6e45  ions.ConnectionE
-00002800: 7272 6f72 2061 7320 636f 6e65 7272 3a0d  rror as conerr:.
-00002810: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00002820: 6e74 2863 6f6e 6572 7229 0d0a 2020 2020  nt(conerr)..    
-00002830: 2020 2020 2020 2020 7261 6973 650d 0a20          raise.. 
-00002840: 2020 2020 2020 2065 7863 6570 7420 7265         except re
-00002850: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
-00002860: 732e 436f 6e6e 6563 7454 696d 656f 7574  s.ConnectTimeout
-00002870: 2061 7320 636f 6e74 6f3a 0d0a 2020 2020   as conto:..    
-00002880: 2020 2020 2020 2020 7072 696e 7428 636f          print(co
-00002890: 6e74 6f29 0d0a 2020 2020 2020 2020 2020  nto)..          
-000028a0: 2020 7261 6973 650d 0a20 2020 2020 2020    raise..       
-000028b0: 2065 7863 6570 7420 7265 7175 6573 7473   except requests
-000028c0: 2e65 7863 6570 7469 6f6e 732e 436f 6e74  .exceptions.Cont
-000028d0: 656e 7444 6563 6f64 696e 6745 7272 6f72  entDecodingError
-000028e0: 2061 7320 6465 6365 7272 3a0d 0a20 2020   as decerr:..   
-000028f0: 2020 2020 2020 2020 2070 7269 6e74 2864           print(d
-00002900: 6563 6572 7229 0d0a 2020 2020 2020 2020  ecerr)..        
-00002910: 2020 2020 7261 6973 650d 0a20 2020 2020      raise..     
-00002920: 2020 2065 7863 6570 7420 7265 7175 6573     except reques
-00002930: 7473 2e65 7863 6570 7469 6f6e 732e 4854  ts.exceptions.HT
-00002940: 5450 4572 726f 7220 6173 2068 7474 7065  TPError as httpe
-00002950: 7272 3a0d 0a20 2020 2020 2020 2020 2020  rr:..           
-00002960: 2070 7269 6e74 2868 7474 7065 7272 290d   print(httperr).
-00002970: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00002980: 7365 0d0a 2020 2020 2020 2020 6578 6365  se..        exce
-00002990: 7074 2072 6571 7565 7374 732e 6578 6365  pt requests.exce
-000029a0: 7074 696f 6e73 2e50 726f 7879 4572 726f  ptions.ProxyErro
-000029b0: 7220 6173 2070 7278 7965 7272 3a0d 0a20  r as prxyerr:.. 
-000029c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000029d0: 2870 7278 7965 7272 290d 0a20 2020 2020  (prxyerr)..     
-000029e0: 2020 2020 2020 2072 6169 7365 0d0a 2020         raise..  
-000029f0: 2020 2020 2020 6578 6365 7074 2072 6571        except req
-00002a00: 7565 7374 732e 6578 6365 7074 696f 6e73  uests.exceptions
-00002a10: 2e52 6571 7565 7374 4578 6365 7074 696f  .RequestExceptio
-00002a20: 6e20 6173 2072 6571 6578 703a 0d0a 2020  n as reqexp:..  
-00002a30: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00002a40: 7265 7165 7870 290d 0a20 2020 2020 2020  reqexp)..       
-00002a50: 2020 2020 2072 6169 7365 0d0a 2020 2020       raise..    
-00002a60: 2020 2020 6578 6365 7074 2072 6571 7565      except reque
-00002a70: 7374 732e 6578 6365 7074 696f 6e73 2e53  sts.exceptions.S
-00002a80: 534c 4572 726f 7220 6173 2073 736c 6572  SLError as ssler
-00002a90: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00002aa0: 7072 696e 7428 7373 6c65 7272 290d 0a20  print(sslerr).. 
-00002ab0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00002ac0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00002ad0: 2072 6571 7565 7374 732e 6578 6365 7074   requests.except
-00002ae0: 696f 6e73 2e55 524c 5265 7175 6972 6564  ions.URLRequired
-00002af0: 2061 7320 7572 6c65 7272 3a0d 0a20 2020   as urlerr:..   
-00002b00: 2020 2020 2020 2020 2070 7269 6e74 2875           print(u
-00002b10: 726c 6572 7229 0d0a 2020 2020 2020 2020  rlerr)..        
-00002b20: 2020 2020 7261 6973 650d 0a20 2020 2020      raise..     
-00002b30: 2020 2065 7863 6570 7420 7265 7175 6573     except reques
-00002b40: 7473 2e65 7863 6570 7469 6f6e 732e 5265  ts.exceptions.Re
-00002b50: 7175 6573 7473 4465 7065 6e64 656e 6379  questsDependency
-00002b60: 5761 726e 696e 6720 6173 2072 6571 7761  Warning as reqwa
-00002b70: 726e 3a0d 0a20 2020 2020 2020 2020 2020  rn:..           
-00002b80: 2070 7269 6e74 2872 6571 7761 726e 290d   print(reqwarn).
-00002b90: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00002ba0: 7365 0d0a 2020 2020 2020 2020 6578 6365  se..        exce
-00002bb0: 7074 2072 6571 7565 7374 732e 6578 6365  pt requests.exce
-00002bc0: 7074 696f 6e73 2e52 6561 6454 696d 656f  ptions.ReadTimeo
-00002bd0: 7574 2061 7320 7265 6164 746f 7574 3a0d  ut as readtout:.
-00002be0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00002bf0: 6e74 2872 6561 6474 6f75 7429 0d0a 2020  nt(readtout)..  
-00002c00: 2020 2020 2020 2020 2020 7261 6973 650d            raise.
-00002c10: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-00002c20: 7265 7175 6573 7473 2e65 7863 6570 7469  requests.excepti
-00002c30: 6f6e 732e 496e 7661 6c69 6448 6561 6465  ons.InvalidHeade
-00002c40: 7220 6173 2069 6e76 6572 723a 0d0a 2020  r as inverr:..  
-00002c50: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00002c60: 696e 7665 7272 290d 0a20 2020 2020 2020  inverr)..       
-00002c70: 2020 2020 2072 6169 7365 0d0a 2020 2020       raise..    
-00002c80: 2020 2020 6578 6365 7074 2072 6571 7565      except reque
-00002c90: 7374 732e 6578 6365 7074 696f 6e73 2e49  sts.exceptions.I
-00002ca0: 6e76 616c 6964 5072 6f78 7955 524c 2061  nvalidProxyURL a
-00002cb0: 7320 696e 7650 7278 793a 0d0a 2020 2020  s invPrxy:..    
-00002cc0: 2020 2020 2020 2020 7072 696e 7428 696e          print(in
-00002cd0: 7650 7278 7929 0d0a 2020 2020 2020 2020  vPrxy)..        
-00002ce0: 2020 2020 7261 6973 650d 0a20 2020 2020      raise..     
-00002cf0: 2020 2065 7863 6570 7420 7265 7175 6573     except reques
-00002d00: 7473 2e65 7863 6570 7469 6f6e 732e 496e  ts.exceptions.In
-00002d10: 7661 6c69 6455 524c 2061 7320 696e 7675  validURL as invu
-00002d20: 726c 3a0d 0a20 2020 2020 2020 2020 2020  rl:..           
-00002d30: 2070 7269 6e74 2869 6e76 7572 6c29 0d0a   print(invurl)..
-00002d40: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00002d50: 650d 0a20 2020 2020 2020 2065 7863 6570  e..        excep
-00002d60: 7420 7265 7175 6573 7473 2e65 7863 6570  t requests.excep
-00002d70: 7469 6f6e 732e 496e 7661 6c69 6448 6561  tions.InvalidHea
-00002d80: 6465 7220 6173 2069 6e76 6864 723a 0d0a  der as invhdr:..
-00002d90: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00002da0: 7428 696e 7668 6472 290d 0a20 2020 2020  t(invhdr)..     
-00002db0: 2020 2020 2020 2072 6169 7365 0d0a 2020         raise..  
-00002dc0: 2020 2020 2020 6578 6365 7074 2072 6571        except req
-00002dd0: 7565 7374 732e 6578 6365 7074 696f 6e73  uests.exceptions
-00002de0: 2e49 6e76 616c 6964 5363 6865 6d61 2061  .InvalidSchema a
-00002df0: 7320 696e 7673 6368 6d61 3a0d 0a20 2020  s invschma:..   
-00002e00: 2020 2020 2020 2020 2070 7269 6e74 2869           print(i
-00002e10: 6e73 6368 6d61 290d 0a20 2020 2020 2020  nschma)..       
-00002e20: 2020 2020 2072 6169 7365 0d0a 2020 2020       raise..    
-00002e30: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-00002e40: 7469 6f6e 2061 7320 6f74 6865 7265 7870  tion as otherexp
-00002e50: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00002e60: 7269 6e74 286f 7468 6572 6578 7029 0d0a  rint(otherexp)..
-00002e70: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00002e80: 650d 0a0d 0a20 2020 2020 2020 200d 0a20  e....        .. 
-00002e90: 2020 2064 6566 205f 6765 745f 6a73 6f6e     def _get_json
-00002ea0: 5f52 6573 706f 6e73 6528 7365 6c66 2c20  _Response(self, 
-00002eb0: 7265 7155 726c 2c20 7261 775f 7265 7175  reqUrl, raw_requ
-00002ec0: 6573 7429 3a0d 0a20 2020 2020 2020 2074  est):..        t
-00002ed0: 7279 3a0d 0a20 2020 2020 2020 2020 2068  ry:..          h
-00002ee0: 7474 7052 6573 706f 6e73 6520 3d20 7365  ttpResponse = se
-00002ef0: 6c66 2e5f 6765 745f 5265 7370 6f6e 7365  lf._get_Response
-00002f00: 2872 6571 5572 6c2c 2072 6177 5f72 6571  (reqUrl, raw_req
-00002f10: 7565 7374 290d 0a20 2020 2020 2020 2020  uest)..         
-00002f20: 2069 6620 6874 7470 5265 7370 6f6e 7365   if httpResponse
-00002f30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00002f40: 206a 736f 6e5f 5265 7370 6f6e 7365 3d64   json_Response=d
-00002f50: 6963 7428 6874 7470 5265 7370 6f6e 7365  ict(httpResponse
-00002f60: 2e6a 736f 6e28 2929 2069 6620 6874 7470  .json()) if http
-00002f70: 5265 7370 6f6e 7365 2e73 7461 7475 735f  Response.status_
-00002f80: 636f 6465 3d3d 3230 3020 656c 7365 204e  code==200 else N
-00002f90: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
-00002fa0: 2020 2072 6574 7572 6e20 6a73 6f6e 5f52     return json_R
-00002fb0: 6573 706f 6e73 650d 0a20 2020 2020 2020  esponse..       
-00002fc0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00002fd0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00002fe0: 6f6e 650d 0a20 2020 2020 2020 2065 7863  one..        exc
-00002ff0: 6570 7420 6a73 6f6e 2e4a 534f 4e44 6563  ept json.JSONDec
-00003000: 6f64 6545 7272 6f72 2061 7320 6a64 6563  odeError as jdec
-00003010: 6f64 6565 7272 3a0d 0a20 2020 2020 2020  odeerr:..       
-00003020: 2020 2020 2070 7269 6e74 2822 5f67 6574       print("_get
-00003030: 5f6a 736f 6e5f 5265 7370 6f6e 7365 203a  _json_Response :
-00003040: 204a 534f 4e20 6465 636f 6465 7220 4578   JSON decoder Ex
-00003050: 6365 7074 696f 6e20 4f63 6375 7265 643a  ception Occured:
-00003060: 2022 202b 206a 6465 636f 6465 6572 7229   " + jdecodeerr)
-00003070: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00003080: 7475 726e 204e 6f6e 650d 0a20 2020 2020  turn None..     
-00003090: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-000030a0: 696f 6e20 6173 2065 7870 3a0d 0a20 2020  ion as exp:..   
-000030b0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-000030c0: 5f67 6574 5f6a 736f 6e5f 5265 7370 6f6e  _get_json_Respon
-000030d0: 7365 203a 2045 7863 6570 7469 6f6e 204f  se : Exception O
-000030e0: 6363 7572 6564 3a20 2229 0d0a 2020 2020  ccured: ")..    
-000030f0: 2020 2020 2020 2020 7072 696e 7428 6578          print(ex
-00003100: 7029 0d0a 2020 2020 2020 2020 2020 2020  p)..            
-00003110: 7265 7475 726e 204e 6f6e 650d 0a20 2020  return None..   
-00003120: 200d 0a20 2020 2064 6566 205f 6765 745f   ..    def _get_
-00003130: 746f 6b65 6e28 7365 6c66 2c20 6973 5072  token(self, isPr
-00003140: 6f78 793d 4661 6c73 6529 3a0d 0a20 2020  oxy=False):..   
-00003150: 2020 2020 2074 6f6b 656e 5f75 726c 203d       token_url =
-00003160: 2073 656c 662e 7572 6c20 2b20 2247 6574   self.url + "Get
-00003170: 546f 6b65 6e22 0d0a 2020 2020 2020 2020  Token"..        
-00003180: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00003190: 2020 7072 6f70 7469 6573 203d 205b 5d0d    propties = [].
-000031a0: 0a20 2020 2020 2020 2020 2020 2070 726f  .            pro
-000031b0: 7074 6965 732e 6170 7065 6e64 2850 726f  pties.append(Pro
-000031c0: 7065 7274 6965 7328 225f 5f41 7070 4964  perties("__AppId
-000031d0: 222c 2073 656c 662e 6170 7049 4429 290d  ", self.appID)).
-000031e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000031f0: 7365 6c66 2e64 6174 6153 6f75 7263 653a  self.dataSource:
-00003200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003210: 2020 7072 6f70 7469 6573 2e61 7070 656e    propties.appen
-00003220: 6428 5072 6f70 6572 7469 6573 2822 536f  d(Properties("So
-00003230: 7572 6365 222c 2073 656c 662e 6461 7461  urce", self.data
-00003240: 536f 7572 6365 2929 0d0a 2020 2020 2020  Source))..      
-00003250: 2020 2020 2020 746f 6b65 6e52 6571 203d        tokenReq =
-00003260: 2054 6f6b 656e 5265 7175 6573 7428 7365   TokenRequest(se
-00003270: 6c66 2e75 7365 726e 616d 652c 2073 656c  lf.username, sel
-00003280: 662e 7061 7373 776f 7264 2c20 7072 6f70  f.password, prop
-00003290: 7469 6573 290d 0a20 2020 2020 2020 2020  ties)..         
-000032a0: 2020 2072 6177 5f74 6f6b 656e 5265 7120     raw_tokenReq 
-000032b0: 3d20 746f 6b65 6e52 6571 2e67 6574 5f54  = tokenReq.get_T
-000032c0: 6f6b 656e 5265 7175 6573 7428 290d 0a20  okenRequest().. 
-000032d0: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
-000032e0: 2020 2020 2020 2020 2023 4c6f 6164 2077           #Load w
-000032f0: 696e 646f 7773 2063 6572 7469 6669 6361  indows certifica
-00003300: 7465 7320 746f 2061 206c 6f63 616c 2066  tes to a local f
-00003310: 696c 650d 0a20 2020 2020 2020 2020 2020  ile..           
-00003320: 2070 6620 3d20 706c 6174 666f 726d 2e70   pf = platform.p
-00003330: 6c61 7466 6f72 6d28 290d 0a20 2020 2020  latform()..     
-00003340: 2020 2020 2020 2069 6620 7066 2e75 7070         if pf.upp
-00003350: 6572 2829 2e73 7461 7274 7377 6974 6828  er().startswith(
-00003360: 2757 494e 444f 5753 2729 3a0d 0a20 2020  'WINDOWS'):..   
-00003370: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00003380: 662e 5f6c 6f61 6457 696e 4365 7274 7328  f._loadWinCerts(
-00003390: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-000033a0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000033b0: 2020 2020 2020 7365 6c66 2e63 6572 7466        self.certf
-000033c0: 696c 6520 3d20 7265 7175 6573 7473 2e63  ile = requests.c
-000033d0: 6572 7473 2e77 6865 7265 2829 0d0a 0d0a  erts.where()....
-000033e0: 2020 2020 2020 2020 2020 2020 2350 6f73              #Pos
-000033f0: 7420 7468 6520 746f 6b65 6e20 7265 7175  t the token requ
-00003400: 6573 7420 746f 2067 6574 2072 6573 706f  est to get respo
-00003410: 6e73 6520 696e 206a 736f 6e20 666f 726d  nse in json form
-00003420: 6174 0d0a 2020 2020 2020 2020 2020 2020  at..            
-00003430: 6a73 6f6e 5f52 6573 706f 6e73 6520 3d20  json_Response = 
-00003440: 7365 6c66 2e5f 6765 745f 6a73 6f6e 5f52  self._get_json_R
-00003450: 6573 706f 6e73 6528 746f 6b65 6e5f 7572  esponse(token_ur
-00003460: 6c2c 2072 6177 5f74 6f6b 656e 5265 7129  l, raw_tokenReq)
-00003470: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00003480: 7475 726e 206a 736f 6e5f 5265 7370 6f6e  turn json_Respon
-00003490: 7365 0d0a 2020 2020 2020 2020 6578 6365  se..        exce
-000034a0: 7074 2045 7863 6570 7469 6f6e 3a0d 0a20  pt Exception:.. 
-000034b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000034c0: 2822 5f67 6574 5f74 6f6b 656e 203a 2045  ("_get_token : E
-000034d0: 7863 6570 7469 6f6e 204f 6363 7572 6564  xception Occured
-000034e0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-000034f0: 7072 696e 7428 7472 6163 6562 6163 6b2e  print(traceback.
-00003500: 7379 732e 6578 635f 696e 666f 2829 290d  sys.exc_info()).
-00003510: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00003520: 6e74 2874 7261 6365 6261 636b 2e70 7269  nt(traceback.pri
-00003530: 6e74 5f65 7863 286c 696d 6974 3d32 2929  nt_exc(limit=2))
-00003540: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00003550: 7475 726e 204e 6f6e 650d 0a20 2020 200d  turn None..    .
-00003560: 0a20 2020 2064 6566 205f 6a73 6f6e 5f52  .    def _json_R
-00003570: 6571 7565 7374 2873 656c 662c 2072 6177  equest(self, raw
-00003580: 5f74 6578 7429 3a0d 0a20 2020 2020 2020  _text):..       
-00003590: 2023 636f 6e76 6572 7420 7468 6520 6469   #convert the di
-000035a0: 6374 696f 6e61 7279 2028 7261 7720 7465  ctionary (raw te
-000035b0: 7874 2920 746f 206a 736f 6e20 7465 7874  xt) to json text
-000035c0: 2066 6972 7374 0d0a 2020 2020 2020 2020   first..        
-000035d0: 6a73 6f6e 5465 7874 203d 206a 736f 6e2e  jsonText = json.
-000035e0: 6475 6d70 7328 7261 775f 7465 7874 290d  dumps(raw_text).
-000035f0: 0a20 2020 2020 2020 2062 7974 6554 656d  .        byteTem
-00003600: 7020 3d20 6279 7465 7328 6a73 6f6e 5465  p = bytes(jsonTe
-00003610: 7874 2c27 7574 662d 3827 290d 0a20 2020  xt,'utf-8')..   
-00003620: 2020 2020 2062 7974 6554 656d 7020 3d20       byteTemp = 
-00003630: 6a73 6f6e 5465 7874 2e65 6e63 6f64 6528  jsonText.encode(
-00003640: 2775 7466 2d38 2729 0d0a 2020 2020 2020  'utf-8')..      
-00003650: 2020 2363 6f6e 7665 7274 2074 6865 206a    #convert the j
-00003660: 736f 6e20 5465 7874 2074 6f20 6a73 6f6e  son Text to json
-00003670: 2066 6f72 6d61 7474 6564 2052 6571 7565   formatted Reque
-00003680: 7374 0d0a 2020 2020 2020 2020 6a73 6f6e  st..        json
-00003690: 5265 7175 6573 7420 3d20 6a73 6f6e 2e6c  Request = json.l
-000036a0: 6f61 6473 2862 7974 6554 656d 7029 0d0a  oads(byteTemp)..
-000036b0: 2020 2020 2020 2020 7265 7475 726e 206a          return j
-000036c0: 736f 6e52 6571 7565 7374 0d0a 0d0a 2020  sonRequest....  
-000036d0: 2020 6465 6620 5f67 6574 5f44 6174 6528    def _get_Date(
-000036e0: 7365 6c66 2c20 6a73 6f6e 4461 7465 293a  self, jsonDate):
-000036f0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00003700: 2020 2020 2020 2020 2020 2020 236d 6174              #mat
-00003710: 6368 203d 2072 652e 6d61 7463 6828 225e  ch = re.match("^
-00003720: 2f44 6174 655b 285d 5b30 2d39 5d7b 3133  /Date[(][0-9]{13
-00003730: 7d5b 2b5d 5b30 2d39 5d7b 347d 5b29 5d2f  }[+][0-9]{4}[)]/
-00003740: 222c 206a 736f 6e44 6174 6529 0d0a 2020  ", jsonDate)..  
-00003750: 2020 2020 2020 2020 2020 6d61 7463 6820            match 
-00003760: 3d20 7265 2e6d 6174 6368 2872 225e 282f  = re.match(r"^(/
-00003770: 4461 7465 5c28 2928 2d3f 5c64 2a29 285b  Date\()(-?\d*)([
-00003780: 2b2d 5d29 282e 2e29 282e 2e29 285c 292f  +-])(..)(..)(\)/
-00003790: 2922 2c20 6a73 6f6e 4461 7465 290d 0a20  )", jsonDate).. 
-000037a0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-000037b0: 7463 683a 0d0a 2020 2020 2020 2020 2020  tch:..          
-000037c0: 2020 2020 2020 2364 203d 2072 652e 7365        #d = re.se
-000037d0: 6172 6368 2827 5b30 2d39 5d7b 3133 7d27  arch('[0-9]{13}'
-000037e0: 2c20 6a73 6f6e 4461 7465 290d 0a20 2020  , jsonDate)..   
-000037f0: 2020 2020 2020 2020 2020 2020 2064 203d               d =
-00003800: 2066 6c6f 6174 286d 6174 6368 2e67 726f   float(match.gro
-00003810: 7570 2832 2929 0d0a 2020 2020 2020 2020  up(2))..        
-00003820: 2020 2020 2020 2020 6e64 6174 6520 3d20          ndate = 
-00003830: 6461 7465 7469 6d65 2831 3937 302c 312c  datetime(1970,1,
-00003840: 3129 202b 2074 696d 6564 656c 7461 2873  1) + timedelta(s
-00003850: 6563 6f6e 6473 3d66 6c6f 6174 2864 292f  econds=float(d)/
-00003860: 3130 3030 290d 0a20 2020 2020 2020 2020  1000)..         
-00003870: 2020 2020 2020 2075 7463 6461 7465 203d         utcdate =
-00003880: 2070 7974 7a2e 5554 432e 6672 6f6d 7574   pytz.UTC.fromut
-00003890: 6328 6e64 6174 6529 2e73 7472 6674 696d  c(ndate).strftim
-000038a0: 6528 2725 592d 256d 2d25 6427 290d 0a20  e('%Y-%m-%d').. 
-000038b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000038c0: 6574 7572 6e20 7574 6364 6174 650d 0a20  eturn utcdate.. 
-000038d0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000038e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000038f0: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
-00003900: 6e28 2249 6e76 616c 6964 204a 534f 4e20  n("Invalid JSON 
-00003910: 4461 7465 2229 0d0a 2020 2020 2020 2020  Date")..        
-00003920: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00003930: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00003940: 7269 6e74 2822 5f67 6574 5f74 6f6b 656e  rint("_get_token
-00003950: 203a 2045 7863 6570 7469 6f6e 204f 6363   : Exception Occ
-00003960: 7572 6564 2229 0d0a 2020 2020 2020 2020  ured")..        
-00003970: 2020 2020 7072 696e 7428 7472 6163 6562      print(traceb
-00003980: 6163 6b2e 7379 732e 6578 635f 696e 666f  ack.sys.exc_info
-00003990: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
-000039a0: 2070 7269 6e74 2874 7261 6365 6261 636b   print(traceback
-000039b0: 2e70 7269 6e74 5f65 7863 286c 696d 6974  .print_exc(limit
-000039c0: 3d32 2929 0d0a 2020 2020 2020 2020 2020  =2))..          
-000039d0: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
-000039e0: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
-000039f0: 2020 2020 2020 2020 200d 0a20 2020 200d           ..    .
-00003a00: 0a20 2020 2064 6566 205f 6765 745f 4461  .    def _get_Da
-00003a10: 7461 7479 7065 5661 6c75 6573 2873 656c  tatypeValues(sel
-00003a20: 662c 206a 736f 6e52 6573 7029 3a0d 0a20  f, jsonResp):.. 
-00003a30: 2020 2020 2020 2064 6620 3d20 7064 2e44         df = pd.D
-00003a40: 6174 6146 7261 6d65 2829 0d0a 2020 2020  ataFrame()..    
-00003a50: 2020 2020 6d75 6c74 6949 6e64 6578 203d      multiIndex =
-00003a60: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00003a70: 7661 6c44 6963 7420 3d20 7b22 496e 7374  valDict = {"Inst
-00003a80: 7275 6d65 6e74 223a 5b5d 2c22 4461 7461  rument":[],"Data
-00003a90: 7479 7065 223a 5b5d 2c22 5661 6c75 6522  type":[],"Value"
-00003aa0: 3a5b 5d2c 2243 7572 7265 6e63 7922 3a5b  :[],"Currency":[
-00003ab0: 5d7d 0d0a 2020 2020 2020 2020 2370 7269  ]}..        #pri
-00003ac0: 6e74 2028 6a73 6f6e 5265 7370 290d 0a20  nt (jsonResp).. 
-00003ad0: 2020 2020 2020 2066 6f72 2069 7465 6d20         for item 
-00003ae0: 696e 206a 736f 6e52 6573 705b 2744 6174  in jsonResp['Dat
-00003af0: 6154 7970 6556 616c 7565 7327 5d3a 200d  aTypeValues']: .
-00003b00: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-00003b10: 6174 7970 6520 3d20 6974 656d 5b27 4461  atype = item['Da
-00003b20: 7461 5479 7065 275d 0d0a 2020 2020 2020  taType']..      
-00003b30: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00003b40: 2020 2020 666f 7220 6920 696e 2069 7465      for i in ite
-00003b50: 6d5b 2753 796d 626f 6c56 616c 7565 7327  m['SymbolValues'
-00003b60: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00003b70: 2020 2069 6e73 7472 756d 656e 7420 3d20     instrument = 
-00003b80: 695b 2753 796d 626f 6c27 5d0d 0a20 2020  i['Symbol']..   
-00003b90: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00003ba0: 656e 6379 203d 204e 6f6e 650d 0a20 2020  ency = None..   
-00003bb0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-00003bc0: 4375 7272 656e 6379 2720 696e 2069 3a0d  Currency' in i:.
-00003bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003be0: 2020 2020 6375 7272 656e 6379 203d 2069      currency = i
-00003bf0: 5b27 4375 7272 656e 6379 275d 2069 6620  ['Currency'] if 
-00003c00: 695b 2743 7572 7265 6e63 7927 5d20 656c  i['Currency'] el
-00003c10: 7365 2027 4e41 270d 0a0d 0a20 2020 2020  se 'NA'....     
-00003c20: 2020 2020 2020 2020 2020 7661 6c44 6963            valDic
-00003c30: 745b 2244 6174 6174 7970 6522 5d2e 6170  t["Datatype"].ap
-00003c40: 7065 6e64 2864 6174 6174 7970 6529 0d0a  pend(datatype)..
-00003c50: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00003c60: 616c 4469 6374 5b22 496e 7374 7275 6d65  alDict["Instrume
-00003c70: 6e74 225d 2e61 7070 656e 6428 696e 7374  nt"].append(inst
-00003c80: 7275 6d65 6e74 290d 0a20 2020 2020 2020  rument)..       
-00003c90: 2020 2020 2020 2020 6966 2063 7572 7265          if curre
-00003ca0: 6e63 793a 0d0a 2020 2020 2020 2020 2020  ncy:..          
-00003cb0: 2020 2020 2020 2020 2076 616c 4469 6374           valDict
-00003cc0: 5b27 4375 7272 656e 6379 275d 2e61 7070  ['Currency'].app
-00003cd0: 656e 6428 6375 7272 656e 6379 290d 0a20  end(currency).. 
-00003ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003cf0: 2020 636f 6c4e 616d 6573 203d 2028 696e    colNames = (in
-00003d00: 7374 7275 6d65 6e74 2c20 6461 7461 7479  strument, dataty
-00003d10: 7065 2c20 6375 7272 656e 6379 290d 0a20  pe, currency).. 
-00003d20: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00003d30: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00003d40: 2020 2020 2020 2020 636f 6c4e 616d 6573          colNames
-00003d50: 203d 2028 696e 7374 7275 6d65 6e74 2c20   = (instrument, 
-00003d60: 6461 7461 7479 7065 290d 0a20 2020 2020  datatype)..     
-00003d70: 2020 2020 2020 2020 2020 7661 6c75 6573            values
-00003d80: 203d 2069 5b27 5661 6c75 6527 5d0d 0a20   = i['Value'].. 
-00003d90: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00003da0: 6c54 7970 6520 3d20 695b 2754 7970 6527  lType = i['Type'
-00003db0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00003dc0: 2020 6466 5b63 6f6c 4e61 6d65 735d 203d    df[colNames] =
-00003dd0: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-00003de0: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00003df0: 2020 2020 2020 2023 4861 6e64 6c69 6e67         #Handling
-00003e00: 2061 6c6c 2070 6f73 7369 626c 6520 7479   all possible ty
-00003e10: 7065 7320 6f66 2064 6174 6120 6173 2070  pes of data as p
-00003e20: 6572 2044 5353 796d 626f 6c52 6573 706f  er DSSymbolRespo
-00003e30: 6e73 6556 616c 7565 5479 7065 0d0a 2020  nseValueType..  
-00003e40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00003e50: 7661 6c54 7970 6520 696e 205b 372c 2038  valType in [7, 8
-00003e60: 2c20 3130 2c20 3131 2c20 3132 2c20 3133  , 10, 11, 12, 13
-00003e70: 2c20 3134 2c20 3135 2c20 3136 5d3a 0d0a  , 14, 15, 16]:..
-00003e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e90: 2020 2023 5468 6573 6520 7661 6c75 6520     #These value 
-00003ea0: 7479 7065 7320 7265 7475 726e 2061 6e20  types return an 
-00003eb0: 6172 7261 790d 0a20 2020 2020 2020 2020  array..         
-00003ec0: 2020 2020 2020 2020 2020 2354 6865 2061            #The a
-00003ed0: 7272 6179 2063 616e 2062 6520 6f66 2064  rray can be of d
-00003ee0: 6f75 626c 652c 2069 6e74 2c20 7374 7269  ouble, int, stri
-00003ef0: 6e67 206f 7220 4f62 6a65 6374 0d0a 2020  ng or Object..  
-00003f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f10: 2072 6f77 436f 756e 7420 3d20 6466 2e73   rowCount = df.s
-00003f20: 6861 7065 5b30 5d0d 0a20 2020 2020 2020  hape[0]..       
-00003f30: 2020 2020 2020 2020 2020 2020 7661 6c4c              valL
-00003f40: 656e 203d 206c 656e 2876 616c 7565 7329  en = len(values)
-00003f50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003f60: 2020 2020 2023 4966 206e 6f20 6f66 2056       #If no of V
-00003f70: 616c 7565 7320 6973 203c 2072 6f77 636f  alues is < rowco
-00003f80: 756e 742c 2061 7070 656e 6420 4e6f 6e65  unt, append None
-00003f90: 2074 6f20 7661 6c75 6573 0d0a 2020 2020   to values..    
-00003fa0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00003fb0: 6620 726f 7743 6f75 6e74 203e 2076 616c  f rowCount > val
-00003fc0: 4c65 6e3a 0d0a 2020 2020 2020 2020 2020  Len:..          
-00003fd0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00003fe0: 2069 2069 6e20 7261 6e67 6528 726f 7743   i in range(rowC
-00003ff0: 6f75 6e74 202d 2076 616c 4c65 6e29 3a0d  ount - valLen):.
-00004000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004010: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00004020: 7565 732e 6170 7065 6e64 284e 6f6e 6529  ues.append(None)
-00004030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004040: 2020 2020 2343 6865 636b 2069 6620 7468      #Check if th
-00004050: 6520 6172 7261 7920 6f66 204f 626a 6563  e array of Objec
-00004060: 7420 6973 204a 534f 4e20 6461 7465 7320  t is JSON dates 
-00004070: 616e 6420 636f 6e76 6572 740d 0a20 2020  and convert..   
-00004080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004090: 666f 7220 7820 696e 2072 616e 6765 2830  for x in range(0
-000040a0: 2c20 7661 6c4c 656e 293a 0d0a 2020 2020  , valLen):..    
-000040b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040c0: 2020 2076 616c 7565 735b 785d 203d 2073     values[x] = s
-000040d0: 656c 662e 5f67 6574 5f44 6174 6528 7661  elf._get_Date(va
-000040e0: 6c75 6573 5b78 5d29 2069 6620 7374 7228  lues[x]) if str(
-000040f0: 7661 6c75 6573 5b78 5d29 2e66 696e 6428  values[x]).find(
-00004100: 272f 4461 7465 2827 2920 213d 202d 3120  '/Date(') != -1 
-00004110: 656c 7365 2076 616c 7565 735b 785d 200d  else values[x] .
-00004120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004130: 2020 2020 2343 6865 636b 2066 6f72 206e      #Check for n
-00004140: 756d 6265 7220 6f66 2076 616c 7565 7320  umber of values 
-00004150: 696e 2074 6865 2061 7272 6179 2e20 4966  in the array. If
-00004160: 206f 6e6c 7920 6f6e 6520 7661 6c75 652c   only one value,
-00004170: 2070 7574 2069 6e20 7661 6c44 6963 740d   put in valDict.
-00004180: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004190: 2020 2020 6966 206c 656e 2876 616c 7565      if len(value
-000041a0: 7329 203e 2031 3a0d 0a20 2020 2020 2020  s) > 1:..       
-000041b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041c0: 6d75 6c74 6949 6e64 6578 203d 2054 7275  multiIndex = Tru
-000041d0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-000041e0: 2020 2020 2020 2020 2020 6466 5b63 6f6c            df[col
-000041f0: 4e61 6d65 735d 203d 2076 616c 7565 730d  Names] = values.
-00004200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004210: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00004220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004230: 2020 6d75 6c74 6949 6e64 6578 203d 2046    multiIndex = F
-00004240: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00004250: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00004260: 4469 6374 5b22 5661 6c75 6522 5d2e 6170  Dict["Value"].ap
-00004270: 7065 6e64 2876 616c 7565 735b 305d 2920  pend(values[0]) 
-00004280: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
-00004290: 2020 2065 6c69 6620 7661 6c54 7970 6520     elif valType 
-000042a0: 696e 205b 312c 2032 2c20 332c 2035 2c20  in [1, 2, 3, 5, 
-000042b0: 365d 3a0d 0a20 2020 2020 2020 2020 2020  6]:..           
-000042c0: 2020 2020 2020 2020 2354 6865 7365 2076          #These v
-000042d0: 616c 7565 2074 7970 6573 2072 6574 7572  alue types retur
-000042e0: 6e20 7369 6e67 6c65 2076 616c 7565 0d0a  n single value..
-000042f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004300: 2020 2076 616c 4469 6374 5b22 5661 6c75     valDict["Valu
-00004310: 6522 5d2e 6170 7065 6e64 2876 616c 7565  e"].append(value
-00004320: 7329 0d0a 2020 2020 2020 2020 2020 2020  s)..            
-00004330: 2020 2020 2020 206d 756c 7469 496e 6465         multiInde
-00004340: 7820 3d20 4661 6c73 650d 0a20 2020 2020  x = False..     
-00004350: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00004360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004370: 2020 2020 6966 2076 616c 5479 7065 203d      if valType =
-00004380: 3d20 343a 0d0a 2020 2020 2020 2020 2020  = 4:..          
-00004390: 2020 2020 2020 2020 2020 2020 2023 7661               #va
-000043a0: 6c75 6520 7479 7065 2034 2072 6574 7572  lue type 4 retur
-000043b0: 6e20 7369 6e67 6c65 204a 534f 4e20 6461  n single JSON da
-000043c0: 7465 2076 616c 7565 2c20 7768 6963 6820  te value, which 
-000043d0: 6e65 6564 7320 636f 6e76 6572 7369 6f6e  needs conversion
-000043e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000043f0: 2020 2020 2020 2020 2076 616c 7565 7320           values 
-00004400: 3d20 7365 6c66 2e5f 6765 745f 4461 7465  = self._get_Date
-00004410: 2876 616c 7565 7329 2069 6620 7374 7228  (values) if str(
-00004420: 7661 6c75 6573 292e 6669 6e64 2827 2f44  values).find('/D
-00004430: 6174 6528 2729 2021 3d20 2d31 2065 6c73  ate(') != -1 els
-00004440: 6520 7661 6c75 6573 0d0a 2020 2020 2020  e values..      
-00004450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004460: 2076 616c 4469 6374 5b22 5661 6c75 6522   valDict["Value"
-00004470: 5d2e 6170 7065 6e64 2876 616c 7565 7329  ].append(values)
-00004480: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004490: 2020 2020 2020 2020 206d 756c 7469 496e           multiIn
-000044a0: 6465 7820 3d20 4661 6c73 650d 0a20 2020  dex = False..   
-000044b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000044c0: 656c 6966 2076 616c 5479 7065 203d 3d20  elif valType == 
-000044d0: 393a 0d0a 2020 2020 2020 2020 2020 2020  9:..            
-000044e0: 2020 2020 2020 2020 2020 2023 7661 6c75             #valu
-000044f0: 6520 7479 7065 2039 2072 6574 7572 6e20  e type 9 return 
-00004500: 6172 7261 7920 6f66 204a 534f 4e20 6461  array of JSON da
-00004510: 7465 2076 616c 7565 732c 206e 6565 6473  te values, needs
-00004520: 2063 6f6e 7665 7273 696f 6e0d 0a20 2020   conversion..   
-00004530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004540: 2020 2020 6461 7465 5f61 7272 6179 203d      date_array =
-00004550: 205b 5d0d 0a20 2020 2020 2020 2020 2020   []..           
-00004560: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00004570: 656e 2876 616c 7565 7329 203e 2031 3a0d  en(values) > 1:.
-00004580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004590: 2020 2020 2020 2020 2020 206d 756c 7469             multi
-000045a0: 496e 6465 7820 3d20 5472 7565 0d0a 2020  Index = True..  
+00000380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000390: 2d2d 0d0a 636c 6173 7320 4461 7461 436c  --..class DataCl
+000003a0: 6965 6e74 3a0d 0a20 2020 2022 2222 4461  ient:..    """Da
+000003b0: 7461 436c 6965 6e74 2068 656c 7073 2074  taClient helps t
+000003c0: 6f20 7265 7472 6965 7665 2064 6174 6120  o retrieve data 
+000003d0: 6672 6f6d 2044 5357 5320 7765 6220 7265  from DSWS web re
+000003e0: 7374 2073 6572 7669 6365 2222 220d 0a20  st service""".. 
+000003f0: 2020 200d 0a23 2d2d 2d2d 2d2d 2d2d 436f     ..#--------Co
+00000400: 6e73 7472 7563 746f 7220 2d2d 2d2d 2d2d  nstructor ------
+00000410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00000420: 2d2d 2d2d 2d20 200d 0a20 2020 2064 6566  -----  ..    def
+00000430: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+00000440: 636f 6e66 6967 203d 204e 6f6e 652c 2075  config = None, u
+00000450: 7365 726e 616d 6520 3d20 4e6f 6e65 2c20  sername = None, 
+00000460: 7061 7373 776f 7264 203d 204e 6f6e 652c  password = None,
+00000470: 2070 726f 7869 6573 203d 204e 6f6e 652c   proxies = None,
+00000480: 2073 736c 5665 7269 6679 203d 204e 6f6e   sslVerify = Non
+00000490: 652c 2073 736c 4365 7274 203d 204e 6f6e  e, sslCert = Non
+000004a0: 6529 3a0d 0a20 2020 2020 2020 2022 2222  e):..        """
+000004b0: 0d0a 2020 2020 2020 2020 436f 6e73 7472  ..        Constr
+000004c0: 7563 746f 723a 2075 7365 7220 6465 7461  uctor: user deta
+000004d0: 696c 7320 6361 6e20 6265 2073 7570 706c  ils can be suppl
+000004e0: 6965 6420 6672 6f6d 2061 2063 6f6e 6669  ied from a confi
+000004f0: 6720 6669 6c65 206f 7220 7061 7373 6564  g file or passed
+00000500: 2064 6972 6563 746c 7920 6173 2070 6172   directly as par
+00000510: 616d 6574 6572 7320 696e 2074 6865 2063  ameters in the c
+00000520: 6f6e 7374 7275 6374 6f72 206f 6620 7468  onstructor of th
+00000530: 6520 6465 7269 7665 6420 7573 6572 206f  e derived user o
+00000540: 626a 6563 7420 7479 7065 2063 6c61 7373  bject type class
+00000550: 2e0d 0a0d 0a20 2020 2020 2020 2031 2920  .....        1) 
+00000560: 5573 696e 6720 696e 6920 6669 6c65 2028  Using ini file (
+00000570: 652e 672e 2063 6f6e 6669 672e 696e 6929  e.g. config.ini)
+00000580: 2077 6974 6820 666f 726d 6174 0d0a 0d0a   with format....
+00000590: 2020 2020 2020 2020 5b63 7265 6465 6e74          [credent
+000005a0: 6961 6c73 5d0d 0a20 2020 2020 2020 2075  ials]..        u
+000005b0: 7365 726e 616d 653d 596f 7572 4944 0d0a  sername=YourID..
+000005c0: 2020 2020 2020 2020 7061 7373 776f 7264          password
+000005d0: 3d59 6f75 7250 7764 0d0a 0d0a 2020 2020  =YourPwd....    
+000005e0: 2020 2020 5b70 726f 7869 6573 5d0d 0a20      [proxies].. 
+000005f0: 2020 2020 2020 2023 206f 6620 7468 6520         # of the 
+00000600: 666f 726d 3a20 7b20 2768 7474 7027 203a  form: { 'http' :
+00000610: 2070 726f 7879 4874 7470 4164 6472 6573   proxyHttpAddres
+00000620: 732c 2020 2768 7474 7073 2720 3a20 7072  s,  'https' : pr
+00000630: 6f78 7948 7474 7073 4164 6472 6573 7320  oxyHttpsAddress 
+00000640: 7d20 5365 6520 6874 7470 733a 2f2f 646f  } See https://do
+00000650: 6373 2e70 7974 686f 6e2d 7265 7175 6573  cs.python-reques
+00000660: 7473 2e6f 7267 2f65 6e2f 6c61 7465 7374  ts.org/en/latest
+00000670: 2f75 7365 722f 6164 7661 6e63 6564 2f0d  /user/advanced/.
+00000680: 0a20 2020 2020 2020 2070 726f 7869 6573  .        proxies
+00000690: 3d50 726f 7879 4465 7461 696c 7320 2020  =ProxyDetails   
+000006a0: 0d0a 0d0a 2020 2020 2020 2020 5b63 6572  ....        [cer
+000006b0: 745d 0d0a 2020 2020 2020 2020 2320 6f70  t]..        # op
+000006c0: 7469 6f6e 2074 6f20 7375 7070 6c79 2061  tion to supply a
+000006d0: 2073 7065 6369 6669 6320 7079 7468 6f6e   specific python
+000006e0: 2072 6571 7565 7374 7320 7665 7269 6679   requests verify
+000006f0: 206f 7074 696f 6e2e 2053 6565 2068 7474   option. See htt
+00000700: 7073 3a2f 2f64 6f63 732e 7079 7468 6f6e  ps://docs.python
+00000710: 2d72 6571 7565 7374 732e 6f72 672f 656e  -requests.org/en
+00000720: 2f6c 6174 6573 742f 7573 6572 2f61 6476  /latest/user/adv
+00000730: 616e 6365 642f 0d0a 2020 2020 2020 2020  anced/..        
+00000740: 7373 6c56 6572 6966 793d 596f 7572 4365  sslVerify=YourCe
+00000750: 7274 5061 7468 0d0a 0d0a 0d0a 2020 2020  rtPath......    
+00000760: 2020 2020 2320 6669 7273 7420 6c6f 676f      # first logo
+00000770: 6e20 7769 7468 2079 6f75 7220 6372 6564  n with your cred
+00000780: 656e 7469 616c 732e 2043 7265 6174 696e  entials. Creatin
+00000790: 6720 6120 4461 7461 436c 6965 6e74 2069  g a DataClient i
+000007a0: 6e73 7461 6e63 6520 2864 6572 6976 6564  nstance (derived
+000007b0: 2066 726f 6d20 4453 436f 6e6e 6563 7429   from DSConnect)
+000007c0: 2077 6974 6820 796f 7572 2063 7265 6465   with your crede
+000007d0: 6e74 6961 6c73 2061 7574 6f6d 6174 6963  ntials automatic
+000007e0: 616c 6c79 206c 6f67 7320 6f6e 2066 6f72  ally logs on for
+000007f0: 2079 6f75 200d 0a20 2020 2020 2020 2064   you ..        d
+00000800: 6174 6143 6c69 656e 7420 3d20 4461 7461  ataClient = Data
+00000810: 436c 6965 6e74 2827 636f 6e66 6967 2e69  Client('config.i
+00000820: 6e69 2729 0d0a 0d0a 2020 2020 2020 2020  ni')....        
+00000830: 3229 2042 7970 6173 7369 6e67 2061 2063  2) Bypassing a c
+00000840: 6f6e 6669 6720 6669 6c65 2061 6e64 2075  onfig file and u
+00000850: 7369 6e67 2079 6f75 7220 6372 6564 656e  sing your creden
+00000860: 7469 616c 7320 6469 7265 6374 6c79 3a0d  tials directly:.
+00000870: 0a0d 0a20 2020 2020 2020 2064 6174 6143  ...        dataC
+00000880: 6c69 656e 7420 3d20 4461 7461 436c 6965  lient = DataClie
+00000890: 6e74 284e 6f6e 652c 2027 596f 7572 4964  nt(None, 'YourId
+000008a0: 272c 2027 596f 7572 5077 6427 290d 0a20  ', 'YourPwd').. 
+000008b0: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
+000008c0: 2020 2020 2020 2320 5072 6f70 6572 7469        # Properti
+000008d0: 6573 0d0a 2020 2020 2020 2020 7365 6c66  es..        self
+000008e0: 2e75 726c 203d 2022 6874 7470 733a 2f2f  .url = "https://
+000008f0: 7072 6f64 7563 742e 6461 7461 7374 7265  product.datastre
+00000900: 616d 2e63 6f6d 2220 2320 5761 726e 696e  am.com" # Warnin
+00000910: 673a 204f 6e6c 7920 6f76 6572 7269 6465  g: Only override
+00000920: 2074 6865 2075 726c 2066 6f72 2074 6865   the url for the
+00000930: 2041 5049 2073 6572 7669 6365 2069 6620   API service if 
+00000940: 6469 7265 6374 6564 2074 6f20 6279 204c  directed to by L
+00000950: 5345 472e 0d0a 2020 2020 2020 2020 7365  SEG...        se
+00000960: 6c66 2e75 7365 726e 616d 6520 3d20 4e6f  lf.username = No
+00000970: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
+00000980: 2e70 6173 7377 6f72 6420 3d20 4e6f 6e65  .password = None
+00000990: 0d0a 2020 2020 2020 2020 7365 6c66 2e74  ..        self.t
+000009a0: 6f6b 656e 203d 204e 6f6e 6520 2320 7768  oken = None # wh
+000009b0: 656e 2079 6f75 206c 6f67 6f6e 2079 6f75  en you logon you
+000009c0: 7220 746f 6b65 6e20 666f 7220 7375 6273  r token for subs
+000009d0: 6571 7565 6e74 2071 7565 7269 6573 2069  equent queries i
+000009e0: 7320 7374 6f72 6564 2068 6572 650d 0a20  s stored here.. 
+000009f0: 2020 2020 2020 2073 656c 662e 746f 6b65         self.toke
+00000a00: 6e45 7870 6972 7920 3d20 4e6f 6e65 2023  nExpiry = None #
+00000a10: 2074 6f6b 656e 7320 6172 6520 7479 7069   tokens are typi
+00000a20: 6361 6c6c 7920 7661 6c69 6420 666f 7220  cally valid for 
+00000a30: 3234 2068 6f75 7273 2e20 5468 6520 636c  24 hours. The cl
+00000a40: 6965 6e74 2077 696c 6c20 6175 746f 6d61  ient will automa
+00000a50: 7469 6361 6c6c 7920 7265 6e65 7720 7468  tically renew th
+00000a60: 6520 746f 6b65 6e20 6966 2079 6f75 206d  e token if you m
+00000a70: 616b 6520 7265 7175 6573 7420 7769 7468  ake request with
+00000a80: 696e 2031 3520 6d69 6e75 7465 7320 6f66  in 15 minutes of
+00000a90: 2065 7870 6972 790d 0a20 2020 2020 2020   expiry..       
+00000aa0: 2073 656c 662e 6e61 7669 6761 746f 7253   self.navigatorS
+00000ab0: 6572 6965 7355 726c 203d 204e 6f6e 6520  eriesUrl = None 
+00000ac0: 2320 5468 6520 7572 6c20 746f 2062 726f  # The url to bro
+00000ad0: 7773 6520 616e 6420 7365 6172 6368 2044  wse and search D
+00000ae0: 6174 6173 7472 6561 6d20 4e61 7669 6761  atastream Naviga
+00000af0: 746f 7220 666f 7220 7370 6563 6966 6963  tor for specific
+00000b00: 2069 6e73 7472 756d 656e 7473 0d0a 2020   instruments..  
+00000b10: 2020 2020 2020 7365 6c66 2e6e 6176 6967        self.navig
+00000b20: 6174 6f72 4461 7461 7479 7065 7355 726c  atorDatatypesUrl
+00000b30: 203d 204e 6f6e 6520 2320 5468 6520 7572   = None # The ur
+00000b40: 6c20 746f 2062 726f 7773 6520 616e 6420  l to browse and 
+00000b50: 7365 6172 6368 2044 6174 6173 7472 6561  search Datastrea
+00000b60: 6d20 4e61 7669 6761 746f 7220 666f 7220  m Navigator for 
+00000b70: 7370 6563 6966 6963 2064 6174 6174 7970  specific datatyp
+00000b80: 6573 0d0a 2020 2020 2020 2020 7365 6c66  es..        self
+00000b90: 2e5f 7072 6f78 6965 7320 3d20 4e6f 6e65  ._proxies = None
+00000ba0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00000bb0: 7373 6c43 6572 7420 3d20 4e6f 6e65 0d0a  sslCert = None..
+00000bc0: 2020 2020 2020 2020 7365 6c66 2e5f 6365          self._ce
+00000bd0: 7274 6669 6c65 7320 3d20 4e6f 6e65 0d0a  rtfiles = None..
+00000be0: 2020 2020 2020 2020 2320 736f 6d65 2072          # some r
+00000bf0: 6573 7472 6963 7465 6420 7365 7474 696e  estricted settin
+00000c00: 6773 2074 6861 7420 616c 6c6f 7720 7573  gs that allow us
+00000c10: 2074 6f20 7472 6163 6b20 7665 7273 696f   to track versio
+00000c20: 6e20 7573 6167 6520 6f6e 206f 7572 2073  n usage on our s
+00000c30: 6572 7665 7273 2e0d 0a20 2020 2020 2020  ervers...       
+00000c40: 2073 656c 662e 5f74 696d 656f 7574 203d   self._timeout =
+00000c50: 2033 3030 0d0a 2020 2020 2020 2020 7365   300..        se
+00000c60: 6c66 2e5f 7265 7153 6573 7369 6f6e 203d  lf._reqSession =
+00000c70: 2072 6571 7565 7374 732e 5365 7373 696f   requests.Sessio
+00000c80: 6e28 290d 0a20 2020 2020 2020 2073 656c  n()..        sel
+00000c90: 662e 5f72 6571 5365 7373 696f 6e2e 6865  f._reqSession.he
+00000ca0: 6164 6572 735b 2755 7365 722d 4167 656e  aders['User-Agen
+00000cb0: 7427 5d20 3d20 7365 6c66 2e5f 7265 7153  t'] = self._reqS
+00000cc0: 6573 7369 6f6e 2e68 6561 6465 7273 5b27  ession.headers['
+00000cd0: 5573 6572 2d41 6765 6e74 275d 202b 2044  User-Agent'] + D
+00000ce0: 5350 6163 6b61 6765 496e 666f 2e55 7365  SPackageInfo.Use
+00000cf0: 7241 6765 6e74 0d0a 0d0a 2020 2020 2020  rAgent....      
+00000d00: 2020 6966 2028 636f 6e66 6967 293a 0d0a    if (config):..
+00000d10: 2020 2020 2020 2020 2020 2020 7061 7273              pars
+00000d20: 6572 203d 2063 6f6e 6669 6770 6172 7365  er = configparse
+00000d30: 722e 436f 6e66 6967 5061 7273 6572 2829  r.ConfigParser()
+00000d40: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+00000d50: 7273 6572 2e72 6561 6428 636f 6e66 6967  rser.read(config
+00000d60: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00000d70: 2023 2057 6172 6e69 6e67 3a20 4f6e 6c79   # Warning: Only
+00000d80: 206f 7665 7272 6964 6520 7468 6520 7572   override the ur
+00000d90: 6c20 666f 7220 7468 6520 4150 4920 7365  l for the API se
+00000da0: 7276 6963 6520 6966 2064 6972 6563 7465  rvice if directe
+00000db0: 6420 746f 2062 7920 4c53 4547 2e0d 0a20  d to by LSEG... 
+00000dc0: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
+00000dd0: 7273 6572 2e68 6173 5f6f 7074 696f 6e28  rser.has_option(
+00000de0: 2775 726c 272c 2027 7061 7468 2729 3a0d  'url', 'path'):.
+00000df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000e00: 2073 656c 662e 7572 6c20 3d20 7365 6c66   self.url = self
+00000e10: 2e75 726c 2069 6620 7061 7273 6572 2e67  .url if parser.g
+00000e20: 6574 2827 7572 6c27 2c20 2770 6174 6827  et('url', 'path'
+00000e30: 292e 7374 7269 7028 2920 3d3d 2027 2720  ).strip() == '' 
+00000e40: 656c 7365 2070 6172 7365 722e 6765 7428  else parser.get(
+00000e50: 2775 726c 272c 2027 7061 7468 2729 2e73  'url', 'path').s
+00000e60: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+00000e70: 2020 2020 2020 2020 7365 6c66 2e75 726c          self.url
+00000e80: 203d 2073 656c 662e 7572 6c2e 6c6f 7765   = self.url.lowe
+00000e90: 7228 290d 0a20 2020 2020 2020 2020 2020  r()..           
+00000ea0: 2020 2020 2069 6620 7365 6c66 2e75 726c       if self.url
+00000eb0: 3a20 2023 2077 6520 6f6e 6c79 2073 7570  :  # we only sup
+00000ec0: 706f 7274 2068 7474 7073 206f 6e20 7468  port https on th
+00000ed0: 6520 4150 490d 0a20 2020 2020 2020 2020  e API..         
+00000ee0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00000ef0: 2e6d 6174 6368 2822 5e68 7474 703a 222c  .match("^http:",
+00000f00: 2073 656c 662e 7572 6c29 3a0d 0a20 2020   self.url):..   
+00000f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000f20: 2020 2020 2073 656c 662e 7572 6c20 3d20       self.url = 
+00000f30: 7365 6c66 2e75 726c 2e72 6570 6c61 6365  self.url.replace
+00000f40: 2827 6874 7470 3a27 2c20 2768 7474 7073  ('http:', 'https
+00000f50: 3a27 2c20 3129 0d0a 2020 2020 2020 2020  :', 1)..        
+00000f60: 2020 2020 0d0a 2020 2020 2020 2020 2020      ..          
+00000f70: 2020 2320 796f 7520 6361 6e20 6f76 6572    # you can over
+00000f80: 7269 6465 2074 6865 2077 6562 2071 7565  ride the web que
+00000f90: 7279 2074 696d 656f 7574 2076 616c 7565  ry timeout value
+00000fa0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00000fb0: 2070 6172 7365 722e 6861 735f 6f70 7469   parser.has_opti
+00000fc0: 6f6e 2827 6170 7027 2c20 2774 696d 656f  on('app', 'timeo
+00000fd0: 7574 2729 3a0d 0a20 2020 2020 2020 2020  ut'):..         
+00000fe0: 2020 2020 2020 2073 656c 662e 5f74 696d         self._tim
+00000ff0: 656f 7574 203d 2033 3030 2069 6620 7061  eout = 300 if pa
+00001000: 7273 6572 2e67 6574 2827 6170 7027 2c20  rser.get('app', 
+00001010: 2774 696d 656f 7574 2729 2e73 7472 6970  'timeout').strip
+00001020: 2829 203d 3d20 2727 2065 6c73 6520 696e  () == '' else in
+00001030: 7428 7061 7273 6572 2e67 6574 2827 6170  t(parser.get('ap
+00001040: 7027 2c20 2774 696d 656f 7574 2729 2e73  p', 'timeout').s
+00001050: 7472 6970 2829 290d 0a0d 0a20 2020 2020  trip())....     
+00001060: 2020 2020 2020 2023 2059 6f75 2063 616e         # You can
+00001070: 206f 7074 696f 6e61 6c6c 7920 7072 6f76   optionally prov
+00001080: 6964 6520 7468 6520 4461 7461 7374 7265  ide the Datastre
+00001090: 616d 2063 7265 6465 6e74 6961 6c73 2066  am credentials f
+000010a0: 726f 6d20 796f 7572 2063 6f6e 6669 6720  rom your config 
+000010b0: 6669 6c65 2c20 6f72 206f 7074 696f 6e61  file, or optiona
+000010c0: 6c6c 7920 6f76 6572 7269 6465 2066 726f  lly override fro
+000010d0: 6d20 7468 6520 636f 6e73 7472 7563 746f  m the constructo
+000010e0: 720d 0a20 2020 2020 2020 2020 2020 2069  r..            i
+000010f0: 6620 7061 7273 6572 2e68 6173 5f6f 7074  f parser.has_opt
+00001100: 696f 6e28 2763 7265 6465 6e74 6961 6c73  ion('credentials
+00001110: 272c 2027 7573 6572 6e61 6d65 2729 3a0d  ', 'username'):.
+00001120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001130: 2073 656c 662e 7573 6572 6e61 6d65 203d   self.username =
+00001140: 204e 6f6e 6520 6966 2070 6172 7365 722e   None if parser.
+00001150: 6765 7428 2763 7265 6465 6e74 6961 6c73  get('credentials
+00001160: 272c 2027 7573 6572 6e61 6d65 2729 2e73  ', 'username').s
+00001170: 7472 6970 2829 203d 3d20 2727 2065 6c73  trip() == '' els
+00001180: 6520 7061 7273 6572 2e67 6574 2827 6372  e parser.get('cr
+00001190: 6564 656e 7469 616c 7327 2c20 2775 7365  edentials', 'use
+000011a0: 726e 616d 6527 292e 7374 7269 7028 290d  rname').strip().
+000011b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000011c0: 7061 7273 6572 2e68 6173 5f6f 7074 696f  parser.has_optio
+000011d0: 6e28 2763 7265 6465 6e74 6961 6c73 272c  n('credentials',
+000011e0: 2027 7061 7373 776f 7264 2729 3a0d 0a20   'password'):.. 
+000011f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00001200: 656c 662e 7061 7373 776f 7264 203d 204e  elf.password = N
+00001210: 6f6e 6520 6966 2070 6172 7365 722e 6765  one if parser.ge
+00001220: 7428 2763 7265 6465 6e74 6961 6c73 272c  t('credentials',
+00001230: 2027 7061 7373 776f 7264 2729 2e73 7472   'password').str
+00001240: 6970 2829 203d 3d20 2727 2065 6c73 6520  ip() == '' else 
+00001250: 7061 7273 6572 2e67 6574 2827 6372 6564  parser.get('cred
+00001260: 656e 7469 616c 7327 2c20 2770 6173 7377  entials', 'passw
+00001270: 6f72 6427 292e 7374 7269 7028 290d 0a0d  ord').strip()...
+00001280: 0a20 2020 2020 2020 2020 2020 2023 204f  .            # O
+00001290: 7074 696f 6e61 6c6c 7920 7072 6f76 6964  ptionally provid
+000012a0: 6520 7468 6520 7072 6f78 6965 7320 6465  e the proxies de
+000012b0: 7461 696c 7320 6672 6f6d 2074 6865 2063  tails from the c
+000012c0: 6f6e 6669 6720 6669 6c65 2061 6c73 6f0d  onfig file also.
+000012d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000012e0: 7061 7273 6572 2e68 6173 5f6f 7074 696f  parser.has_optio
+000012f0: 6e28 2770 726f 7869 6573 272c 2027 7072  n('proxies', 'pr
+00001300: 6f78 6965 7327 293a 0d0a 2020 2020 2020  oxies'):..      
+00001310: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+00001320: 5072 6f78 6965 7320 3d20 4e6f 6e65 2069  Proxies = None i
+00001330: 6620 7061 7273 6572 2e67 6574 2827 7072  f parser.get('pr
+00001340: 6f78 6965 7327 2c27 7072 6f78 6965 7327  oxies','proxies'
+00001350: 292e 7374 7269 7028 2920 3d3d 2027 2720  ).strip() == '' 
+00001360: 656c 7365 2070 6172 7365 722e 6765 7428  else parser.get(
+00001370: 2770 726f 7869 6573 272c 2027 7072 6f78  'proxies', 'prox
+00001380: 6965 7327 292e 7374 7269 7028 290d 0a20  ies').strip().. 
+00001390: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000013a0: 6620 636f 6e66 6967 5072 6f78 6965 733a  f configProxies:
+000013b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000013c0: 2020 2020 2020 7365 6c66 2e5f 7072 6f78        self._prox
+000013d0: 6965 7320 3d20 6173 742e 6c69 7465 7261  ies = ast.litera
+000013e0: 6c5f 6576 616c 2863 6f6e 6669 6750 726f  l_eval(configPro
+000013f0: 7869 6573 290d 0a0d 0a20 2020 2020 2020  xies)....       
+00001400: 2020 2020 2023 204f 7074 696f 6e61 6c6c       # Optionall
+00001410: 7920 7370 6563 6966 7920 6120 7370 6563  y specify a spec
+00001420: 6966 6963 2073 6572 7665 7220 4341 2066  ific server CA f
+00001430: 696c 6520 6f72 2070 6174 6820 6672 6f6d  ile or path from
+00001440: 2074 6865 2063 6f6e 6669 670d 0a20 2020   the config..   
+00001450: 2020 2020 2020 2020 2069 6620 7061 7273           if pars
+00001460: 6572 2e68 6173 5f6f 7074 696f 6e28 2763  er.has_option('c
+00001470: 6572 7427 2c20 2773 736c 5665 7269 6679  ert', 'sslVerify
+00001480: 2729 3a0d 0a20 2020 2020 2020 2020 2020  '):..           
+00001490: 2020 2020 2063 6f6e 6669 6743 6572 7420       configCert 
+000014a0: 3d20 4e6f 6e65 2069 6620 7061 7273 6572  = None if parser
+000014b0: 2e67 6574 2827 6365 7274 272c 2773 736c  .get('cert','ssl
+000014c0: 5665 7269 6679 2729 2e73 7472 6970 2829  Verify').strip()
+000014d0: 203d 3d20 2727 2065 6c73 6520 7061 7273   == '' else pars
+000014e0: 6572 2e67 6574 2827 6365 7274 272c 2027  er.get('cert', '
+000014f0: 7373 6c56 6572 6966 7927 292e 7374 7269  sslVerify').stri
+00001500: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+00001510: 2020 2020 2069 6620 636f 6e66 6967 4365       if configCe
+00001520: 7274 3a0d 0a20 2020 2020 2020 2020 2020  rt:..           
+00001530: 2020 2020 2020 2020 2073 656c 662e 5f63           self._c
+00001540: 6572 7466 696c 6573 203d 2063 6f6e 6669  ertfiles = confi
+00001550: 6743 6572 740d 0a0d 0a0d 0a20 2020 2020  gCert......     
+00001560: 2020 2023 2073 6574 2074 6865 2066 756c     # set the ful
+00001570: 6c20 7265 6665 7265 6e63 6520 746f 2074  l reference to t
+00001580: 6865 2041 5049 2073 6572 7669 6365 2066  he API service f
+00001590: 726f 6d20 7468 6520 7375 7070 6c69 6564  rom the supplied
+000015a0: 2075 726c 0d0a 2020 2020 2020 2020 7365   url..        se
+000015b0: 6c66 2e75 726c 203d 2073 656c 662e 7572  lf.url = self.ur
+000015c0: 6c20 2b27 2f44 5357 5343 6c69 656e 742f  l +'/DSWSClient/
+000015d0: 5631 2f44 5353 6572 7669 6365 2e73 7663  V1/DSService.svc
+000015e0: 2f72 6573 742f 270d 0a0d 0a20 2020 2020  /rest/'....     
+000015f0: 2020 2023 2059 6f75 2063 616e 2061 6c73     # You can als
+00001600: 6f20 6f76 6572 7269 6465 2061 6e79 2063  o override any c
+00001610: 6f6e 6669 6720 6279 2073 7065 6369 6679  onfig by specify
+00001620: 696e 6720 796f 7572 2075 7365 7220 6372  ing your user cr
+00001630: 6564 656e 7469 616c 732c 2070 726f 7879  edentials, proxy
+00001640: 206f 7220 7373 6c20 6365 7274 6966 6963   or ssl certific
+00001650: 6174 6520 6173 2070 6172 616d 6574 6572  ate as parameter
+00001660: 7320 696e 2074 6865 2063 6f6e 7374 7275  s in the constru
+00001670: 6374 6f72 0d0a 0d0a 2020 2020 2020 2020  ctor....        
+00001680: 2320 7072 6f78 7920 696e 7075 7420 6d75  # proxy input mu
+00001690: 7374 2062 6520 6f66 2074 6865 2066 6f72  st be of the for
+000016a0: 6d3a 0d0a 2020 2020 2020 2020 2320 7072  m:..        # pr
+000016b0: 6f78 6965 7320 3d20 7b20 2768 7474 7027  oxies = { 'http'
+000016c0: 203a 2070 726f 7879 4874 7470 4164 6472   : proxyHttpAddr
+000016d0: 6573 732c 2020 2768 7474 7073 2720 3a20  ess,  'https' : 
+000016e0: 7072 6f78 7948 7474 7073 4164 6472 6573  proxyHttpsAddres
+000016f0: 7320 7d20 2320 7365 6520 6874 7470 733a  s } # see https:
+00001700: 2f2f 646f 6373 2e70 7974 686f 6e2d 7265  //docs.python-re
+00001710: 7175 6573 7473 2e6f 7267 2f65 6e2f 6c61  quests.org/en/la
+00001720: 7465 7374 2f75 7365 722f 6164 7661 6e63  test/user/advanc
+00001730: 6564 2f0d 0a20 2020 2020 2020 2069 6620  ed/..        if 
+00001740: 7072 6f78 6965 733a 0d0a 2020 2020 2020  proxies:..      
+00001750: 2020 2020 2020 7365 6c66 2e5f 7072 6f78        self._prox
+00001760: 6965 7320 3d20 7072 6f78 6965 730d 0a0d  ies = proxies...
+00001770: 0a20 2020 2020 2020 2069 6620 7373 6c43  .        if sslC
+00001780: 6572 743a 2023 206f 7074 696f 6e20 746f  ert: # option to
+00001790: 2073 7065 6369 6679 2073 7065 6369 6669   specify specifi
+000017a0: 6320 636c 6965 6e74 2073 736c 2063 6572  c client ssl cer
+000017b0: 7469 6669 6361 7465 2066 696c 6520 696e  tificate file in
+000017c0: 2063 6f6e 7374 7275 6374 6f72 0d0a 2020   constructor..  
+000017d0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000017e0: 7373 6c43 6572 7420 3d20 7373 6c43 6572  sslCert = sslCer
+000017f0: 740d 0a0d 0a20 2020 2020 2020 2069 6620  t....        if 
+00001800: 7373 6c56 6572 6966 793a 2023 206f 7074  sslVerify: # opt
+00001810: 696f 6e20 746f 2073 7065 6369 6679 2073  ion to specify s
+00001820: 7065 6369 6669 6320 7365 7276 6572 2072  pecific server r
+00001830: 6f6f 7420 4341 2066 696c 6520 696e 2063  oot CA file in c
+00001840: 6f6e 7374 7275 6374 6f72 0d0a 2020 2020  onstructor..    
+00001850: 2020 2020 2020 2020 7365 6c66 2e5f 6365          self._ce
+00001860: 7274 6669 6c65 7320 3d20 7373 6c56 6572  rtfiles = sslVer
+00001870: 6966 790d 0a0d 0a20 2020 2020 2020 2069  ify....        i
+00001880: 6620 7365 6c66 2e5f 6365 7274 6669 6c65  f self._certfile
+00001890: 7320 3d3d 204e 6f6e 653a 2023 2067 6574  s == None: # get
+000018a0: 2064 6566 6175 6c74 2043 4120 6669 6c65   default CA file
+000018b0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000018c0: 4c6f 6164 2077 696e 646f 7773 2063 6572  Load windows cer
+000018d0: 7469 6669 6361 7465 7320 746f 2061 206c  tificates to a l
+000018e0: 6f63 616c 2066 696c 6520 666f 7220 5769  ocal file for Wi
+000018f0: 6e64 6f77 7320 706c 6174 666f 726d 0d0a  ndows platform..
+00001900: 2020 2020 2020 2020 2020 2020 7066 203d              pf =
+00001910: 2070 6c61 7466 6f72 6d2e 706c 6174 666f   platform.platfo
+00001920: 726d 2829 0d0a 2020 2020 2020 2020 2020  rm()..          
+00001930: 2020 6966 2070 662e 7570 7065 7228 292e    if pf.upper().
+00001940: 7374 6172 7473 7769 7468 2827 5749 4e44  startswith('WIND
+00001950: 4f57 5327 293a 0d0a 2020 2020 2020 2020  OWS'):..        
+00001960: 2020 2020 2020 2020 2320 5573 696e 6720          # Using 
+00001970: 5353 4c20 696e 7374 6561 6420 6f66 2057  SSL instead of W
+00001980: 696e 4365 7274 5374 6f72 6520 7061 636b  inCertStore pack
+00001990: 6167 6520 6173 2069 7420 6973 2064 6570  age as it is dep
+000019a0: 7269 6361 7465 642e 0d0a 2020 2020 2020  ricated...      
+000019b0: 2020 2020 2020 2020 2020 2320 5353 4c20            # SSL 
+000019c0: 6361 6e20 6265 2075 7365 6420 6f6e 204c  can be used on L
+000019d0: 696e 7578 2061 6e64 2057 696e 646f 7773  inux and Windows
+000019e0: 2075 6e6c 696b 6520 7468 6520 7769 6e63   unlike the winc
+000019f0: 6572 7473 746f 7265 2077 6869 6368 2077  ertstore which w
+00001a00: 6f72 6b65 6420 6f6e 2057 696e 2050 6c61  orked on Win Pla
+00001a10: 7466 6f72 6d20 6f6e 6c79 0d0a 2020 2020  tform only..    
+00001a20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00001a30: 2e5f 6365 7274 6669 6c65 7320 3d20 2274  ._certfiles = "t
+00001a40: 656d 7043 6572 7446 696c 652e 7065 6d22  empCertFile.pem"
+00001a50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001a60: 2020 696d 706f 7274 2073 736c 0d0a 2020    import ssl..  
+00001a70: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00001a80: 7468 206f 7065 6e28 7365 6c66 2e5f 6365  th open(self._ce
+00001a90: 7274 6669 6c65 732c 2022 772b 222c 2920  rtfiles, "w+",) 
+00001aa0: 6173 2066 696c 655f 6f62 6a3a 0d0a 2020  as file_obj:..  
+00001ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ac0: 2020 666f 7220 7374 6f72 6520 696e 205b    for store in [
+00001ad0: 2243 4122 2c20 2252 4f4f 5422 2c20 224d  "CA", "ROOT", "M
+00001ae0: 5922 5d3a 0d0a 2020 2020 2020 2020 2020  Y"]:..          
+00001af0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00001b00: 7220 6365 7274 2c20 656e 636f 6469 6e67  r cert, encoding
+00001b10: 2c20 7472 7573 7420 696e 2073 736c 2e65  , trust in ssl.e
+00001b20: 6e75 6d5f 6365 7274 6966 6963 6174 6573  num_certificates
+00001b30: 2873 746f 7265 293a 0d0a 2020 2020 2020  (store):..      
+00001b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b50: 2020 2020 2020 6365 7274 6966 6963 6174        certificat
+00001b60: 6520 3d20 7373 6c2e 4445 525f 6365 7274  e = ssl.DER_cert
+00001b70: 5f74 6f5f 5045 4d5f 6365 7274 2863 6572  _to_PEM_cert(cer
+00001b80: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
+00001b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ba0: 6669 6c65 5f6f 626a 2e77 7269 7465 2863  file_obj.write(c
+00001bb0: 6572 7469 6669 6361 7465 290d 0a20 2020  ertificate)..   
+00001bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001bd0: 2066 696c 655f 6f62 6a2e 636c 6f73 6528   file_obj.close(
+00001be0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00001bf0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00001c00: 2020 2020 2020 7365 6c66 2e5f 6365 7274        self._cert
+00001c10: 6669 6c65 7320 3d20 7265 7175 6573 7473  files = requests
+00001c20: 2e63 6572 7473 2e77 6865 7265 2829 0d0a  .certs.where()..
+00001c30: 0d0a 0d0a 2020 2020 2020 2020 2320 616e  ....        # an
+00001c40: 7920 7573 6572 2063 7265 6465 6e74 6961  y user credentia
+00001c50: 6c73 206c 6f61 6465 6420 6672 6f6d 2074  ls loaded from t
+00001c60: 6865 2063 6f6e 6669 6720 6669 6c65 2063  he config file c
+00001c70: 616e 2062 6520 6f76 6572 2d72 6964 6465  an be over-ridde
+00001c80: 6e20 6672 6f6d 2063 7265 6465 6e74 6961  n from credentia
+00001c90: 6c73 2073 7570 706c 6965 6420 6173 2063  ls supplied as c
+00001ca0: 6f6e 7374 7275 6374 6f72 2070 6172 616d  onstructor param
+00001cb0: 6574 6572 730d 0a20 2020 2020 2020 2069  eters..        i
+00001cc0: 6620 7573 6572 6e61 6d65 3a0d 0a20 2020  f username:..   
+00001cd0: 2020 2020 2020 2020 2073 656c 662e 7573           self.us
+00001ce0: 6572 6e61 6d65 203d 2075 7365 726e 616d  ername = usernam
+00001cf0: 650d 0a20 2020 2020 2020 2069 6620 7061  e..        if pa
+00001d00: 7373 776f 7264 3a0d 0a20 2020 2020 2020  ssword:..       
+00001d10: 2020 2020 2073 656c 662e 7061 7373 776f       self.passwo
+00001d20: 7264 203d 2070 6173 7377 6f72 640d 0a0d  rd = password...
+00001d30: 0a20 2020 2020 2020 2023 2077 6974 6820  .        # with 
+00001d40: 7468 6520 6769 7665 6e20 7573 6572 2063  the given user c
+00001d50: 7265 6465 6e74 6961 6c73 2c20 7765 2074  redentials, we t
+00001d60: 7279 2061 6e64 206c 6f67 6f6e 2074 6f20  ry and logon to 
+00001d70: 7468 6520 4150 4920 7365 7276 6963 6520  the API service 
+00001d80: 746f 2072 6574 7269 6576 6520 6120 746f  to retrieve a to
+00001d90: 6b65 6e20 666f 7220 7573 6520 7769 7468  ken for use with
+00001da0: 2061 6c6c 2073 7562 7365 7175 656e 7420   all subsequent 
+00001db0: 7175 6572 6965 730d 0a20 2020 2020 2020  queries..       
+00001dc0: 2023 204d 7573 7420 6265 2073 6f6d 6520   # Must be some 
+00001dd0: 6372 6564 656e 7469 616c 7320 7375 7070  credentials supp
+00001de0: 6c69 6564 2061 6e64 206e 6f74 2074 6865  lied and not the
+00001df0: 2073 7475 6220 6372 6564 656e 7469 616c   stub credential
+00001e00: 730d 0a20 2020 2020 2020 2069 6620 6973  s..        if is
+00001e10: 696e 7374 616e 6365 2873 656c 662e 7573  instance(self.us
+00001e20: 6572 6e61 6d65 2c20 7374 7229 2061 6e64  ername, str) and
+00001e30: 206c 656e 2873 656c 662e 7573 6572 6e61   len(self.userna
+00001e40: 6d65 2920 3e20 3020 616e 6420 7365 6c66  me) > 0 and self
+00001e50: 2e75 7365 726e 616d 6520 213d 2027 596f  .username != 'Yo
+00001e60: 7572 4944 2720 616e 6420 6973 696e 7374  urID' and isinst
+00001e70: 616e 6365 2873 656c 662e 7061 7373 776f  ance(self.passwo
+00001e80: 7264 2c20 7374 7229 2061 6e64 206c 656e  rd, str) and len
+00001e90: 2873 656c 662e 7061 7373 776f 7264 2920  (self.password) 
+00001ea0: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
+00001eb0: 2020 7365 6c66 2e5f 6765 745f 746f 6b65    self._get_toke
+00001ec0: 6e28 290d 0a20 2020 2020 2020 2065 6c73  n()..        els
+00001ed0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00001ee0: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
+00001ef0: 2259 6f75 206d 7573 7420 7375 7070 6c79  "You must supply
+00001f00: 2073 6f6d 6520 7573 6572 2063 7265 6465   some user crede
+00001f10: 6e74 6961 6c73 2e22 290d 0a0d 0a23 2d2d  ntials.")....#--
+00001f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f50: 2d2d 2d2d 2d20 200d 0a23 2d2d 2d2d 2d2d  -----  ..#------
+00001f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00001f90: 2d20 0d0a 2020 2020 6465 6620 706f 7374  - ..    def post
+00001fa0: 5f75 7365 725f 7265 7175 6573 7428 7365  _user_request(se
+00001fb0: 6c66 2c20 7469 636b 6572 732c 2066 6965  lf, tickers, fie
+00001fc0: 6c64 733d 4e6f 6e65 2c20 7374 6172 743d  lds=None, start=
+00001fd0: 2727 2c20 656e 643d 2727 2c20 6672 6571  '', end='', freq
+00001fe0: 3d27 272c 206b 696e 643d 312c 2072 6574  ='', kind=1, ret
+00001ff0: 4e61 6d65 3d46 616c 7365 293a 0d0a 2020  Name=False):..  
+00002000: 2020 2020 2020 2222 2220 5468 6973 2066        """ This f
+00002010: 756e 6374 696f 6e20 6865 6c70 7320 746f  unction helps to
+00002020: 2066 6f72 6d20 7265 7175 6573 7473 2066   form requests f
+00002030: 6f72 2067 6574 5f62 756e 646c 655f 6461  or get_bundle_da
+00002040: 7461 2e20 0d0a 2020 2020 2020 2020 2020  ta. ..          
+00002050: 2020 4561 6368 2072 6571 7565 7374 2069    Each request i
+00002060: 7320 636f 6e76 6572 7465 6420 746f 204a  s converted to J
+00002070: 534f 4e20 666f 726d 6174 2e0d 0a20 2020  SON format...   
+00002080: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+00002090: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+000020a0: 2020 2020 2020 2020 2020 2020 2074 6963               tic
+000020b0: 6b65 7273 3a20 7374 7269 6e67 2c20 4461  kers: string, Da
+000020c0: 7461 7970 6573 200d 0a20 2020 2020 2020  taypes ..       
+000020d0: 2020 2020 2020 2020 6669 656c 6473 3a20          fields: 
+000020e0: 4c69 7374 2c20 6465 6661 756c 7420 4e6f  List, default No
+000020f0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+00002100: 2020 2073 7461 7274 3a20 7374 7269 6e67     start: string
+00002110: 2c20 6465 6661 756c 7420 2727 0d0a 2020  , default ''..  
+00002120: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+00002130: 203a 2073 7472 696e 672c 2064 6566 6175   : string, defau
+00002140: 6c74 2027 270d 0a20 2020 2020 2020 2020  lt ''..         
+00002150: 2020 2020 2020 6672 6571 203a 2073 7472        freq : str
+00002160: 696e 672c 2064 6566 6175 6c74 2027 272c  ing, default '',
+00002170: 2042 7920 6465 6166 756c 7420 4453 5753   By deafult DSWS
+00002180: 2074 7265 6174 7320 6173 2044 6169 6c79   treats as Daily
+00002190: 2066 7265 710d 0a20 2020 2020 2020 2020   freq..         
+000021a0: 2020 2020 2020 6b69 6e64 3a20 696e 742c        kind: int,
+000021b0: 2064 6566 6175 6c74 2031 2c20 696e 6469   default 1, indi
+000021c0: 6361 7465 7320 5469 6d65 7365 7269 6573  cates Timeseries
+000021d0: 2061 7320 6f75 7470 7574 0d0a 0d0a 2020   as output....  
+000021e0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+000021f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002200: 2020 2020 4469 6374 696f 6e61 7279 2222      Dictionary""
+00002210: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00002220: 200d 0a20 2020 2020 2020 2069 6620 6669   ..        if fi
+00002230: 656c 6473 203d 3d20 4e6f 6e65 3a0d 0a20  elds == None:.. 
+00002240: 2020 2020 2020 2020 2020 2066 6965 6c64             field
+00002250: 733d 5b5d 0d0a 2020 2020 2020 2020 0d0a  s=[]..        ..
+00002260: 2020 2020 2020 2020 696e 6465 7820 3d20          index = 
+00002270: 7469 636b 6572 732e 7266 696e 6428 277c  tickers.rfind('|
+00002280: 2729 0d0a 2020 2020 2020 2020 7072 6f70  ')..        prop
+00002290: 4c69 7374 203d 205b 5d0d 0a20 2020 2020  List = []..     
+000022a0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+000022b0: 2020 2020 2069 6620 696e 6465 7820 3d3d       if index ==
+000022c0: 202d 313a 0d0a 2020 2020 2020 2020 2020   -1:..          
+000022d0: 2020 2020 2020 696e 7374 7275 6d65 6e74        instrument
+000022e0: 203d 2049 6e73 7472 756d 656e 7428 7469   = Instrument(ti
+000022f0: 636b 6572 732c 204e 6f6e 6529 0d0a 2020  ckers, None)..  
+00002300: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00002310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002320: 2023 4765 7420 616c 6c20 7468 6520 7072   #Get all the pr
+00002330: 6f70 6572 7469 6573 206f 6620 7468 6520  operties of the 
+00002340: 696e 7374 7275 6d65 6e74 0d0a 2020 2020  instrument..    
+00002350: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00002360: 7072 6f70 7320 3d20 5b5d 0d0a 2020 2020  props = []..    
+00002370: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00002380: 6963 6b65 7273 5b69 6e64 6578 2b31 3a5d  ickers[index+1:]
+00002390: 2e72 6669 6e64 2827 2c27 2920 213d 202d  .rfind(',') != -
+000023a0: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
+000023b0: 2020 2020 2020 2020 7072 6f70 4c69 7374          propList
+000023c0: 203d 2074 6963 6b65 7273 5b69 6e64 6578   = tickers[index
+000023d0: 2b31 3a5d 2e73 706c 6974 2827 2c27 290d  +1:].split(',').
+000023e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000023f0: 2020 2020 2066 6f72 2065 6163 6850 726f       for eachPro
+00002400: 7020 696e 2070 726f 704c 6973 743a 0d0a  p in propList:..
+00002410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002420: 2020 2020 2020 2020 696e 7374 7072 6f70          instprop
+00002430: 732e 6170 7065 6e64 2850 726f 7065 7274  s.append(Propert
+00002440: 6965 7328 6561 6368 5072 6f70 2c20 5472  ies(eachProp, Tr
+00002450: 7565 2929 0d0a 2020 2020 2020 2020 2020  ue))..          
+00002460: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00002470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002480: 2070 726f 704c 6973 742e 6170 7065 6e64   propList.append
+00002490: 2874 6963 6b65 7273 5b69 6e64 6578 2b31  (tickers[index+1
+000024a0: 3a5d 290d 0a20 2020 2020 2020 2020 2020  :])..           
+000024b0: 2020 2020 2020 2020 2069 6e73 7470 726f           instpro
+000024c0: 7073 2e61 7070 656e 6428 5072 6f70 6572  ps.append(Proper
+000024d0: 7469 6573 2874 6963 6b65 7273 5b69 6e64  ties(tickers[ind
+000024e0: 6578 2b31 3a5d 2c20 5472 7565 2929 0d0a  ex+1:], True))..
+000024f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002500: 2020 696e 7374 7275 6d65 6e74 203d 2049    instrument = I
+00002510: 6e73 7472 756d 656e 7428 7469 636b 6572  nstrument(ticker
+00002520: 735b 303a 696e 6465 785d 2c20 696e 7374  s[0:index], inst
+00002530: 7072 6f70 7329 0d0a 2020 2020 2020 2020  props)..        
+00002540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002550: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+00002560: 7479 7065 733d 5b5d 0d0a 2020 2020 2020  types=[]..      
+00002570: 2020 2020 2020 6966 2027 4e27 2069 6e20        if 'N' in 
+00002580: 7072 6f70 4c69 7374 3a0d 0a20 2020 2020  propList:..     
+00002590: 2020 2020 2020 2020 2020 2070 726f 7020             prop 
+000025a0: 3d20 5b7b 274b 6579 273a 2752 6574 7572  = [{'Key':'Retur
+000025b0: 6e4e 616d 6527 2c20 2756 616c 7565 273a  nName', 'Value':
+000025c0: 5472 7565 7d5d 200d 0a20 2020 2020 2020  True}] ..       
+000025d0: 2020 2020 2020 2020 2072 6574 4e61 6d65           retName
+000025e0: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+000025f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00002600: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
+00002610: 203d 204e 6f6e 650d 0a0d 0a20 2020 2020   = None....     
+00002620: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+00002630: 2020 2020 2069 6620 6c65 6e28 6669 656c       if len(fiel
+00002640: 6473 2920 3e20 303a 0d0a 2020 2020 2020  ds) > 0:..      
+00002650: 2020 2020 2020 2020 2020 666f 7220 6561            for ea
+00002660: 6368 4474 7970 6520 696e 2066 6965 6c64  chDtype in field
+00002670: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00002680: 2020 2020 2020 2020 6461 7479 7065 732e          datypes.
+00002690: 6170 7065 6e64 2844 6174 6154 7970 6528  append(DataType(
+000026a0: 6561 6368 4474 7970 652c 2070 726f 7029  eachDtype, prop)
+000026b0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+000026c0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+000026d0: 2020 2020 2020 6461 7479 7065 732e 6170        datypes.ap
+000026e0: 7065 6e64 2844 6174 6154 7970 6528 6669  pend(DataType(fi
+000026f0: 656c 6473 2c20 7072 6f70 2929 0d0a 2020  elds, prop))..  
+00002700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002710: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
+00002720: 2020 2020 6461 7465 203d 2044 6174 6528      date = Date(
+00002730: 7374 6172 742c 2066 7265 712c 2065 6e64  start, freq, end
+00002740: 2c20 6b69 6e64 290d 0a20 2020 2020 2020  , kind)..       
+00002750: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00002760: 2249 6e73 7472 756d 656e 7422 3a69 6e73  "Instrument":ins
+00002770: 7472 756d 656e 742c 2244 6174 6154 7970  trument,"DataTyp
+00002780: 6573 223a 6461 7479 7065 732c 2244 6174  es":datypes,"Dat
+00002790: 6522 3a64 6174 657d 0d0a 2020 2020 2020  e":date}..      
+000027a0: 2020 2020 2020 7265 7475 726e 2072 6571        return req
+000027b0: 7565 7374 2c20 7265 744e 616d 650d 0a20  uest, retName.. 
+000027c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000027d0: 6365 7074 696f 6e20 6173 2065 7870 3a0d  ception as exp:.
+000027e0: 0a20 2020 2020 2020 2020 2020 2044 5355  .            DSU
+000027f0: 7365 724f 626a 6563 744c 6f67 4675 6e63  serObjectLogFunc
+00002800: 732e 4c6f 6745 7863 6570 7469 6f6e 2827  s.LogException('
+00002810: 4461 7461 7374 7265 616d 5079 272c 2027  DatastreamPy', '
+00002820: 4453 5265 7370 6f6e 7365 2e70 6f73 745f  DSResponse.post_
+00002830: 7573 6572 5f72 6571 7565 7374 272c 2027  user_request', '
+00002840: 4578 6365 7074 696f 6e20 6f63 6375 7265  Exception occure
+00002850: 643a 272c 2065 7870 290d 0a20 2020 2020  d:', exp)..     
+00002860: 2020 2020 2020 2072 6169 7365 2065 7870         raise exp
+00002870: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
+00002880: 2020 2020 6465 6620 6765 745f 6461 7461      def get_data
+00002890: 2873 656c 662c 2074 6963 6b65 7273 2c20  (self, tickers, 
+000028a0: 6669 656c 6473 3d4e 6f6e 652c 2073 7461  fields=None, sta
+000028b0: 7274 3d27 272c 2065 6e64 3d27 272c 2066  rt='', end='', f
+000028c0: 7265 713d 2727 2c20 6b69 6e64 3d31 293a  req='', kind=1):
+000028d0: 0d0a 2020 2020 2020 2020 2222 2254 6869  ..        """Thi
+000028e0: 7320 4675 6e63 7469 6f6e 2070 726f 6365  s Function proce
+000028f0: 7373 6573 2061 2073 696e 676c 6520 4a53  sses a single JS
+00002900: 4f4e 2066 6f72 6d61 7420 7265 7175 6573  ON format reques
+00002910: 7420 746f 2070 726f 7669 6465 0d0a 2020  t to provide..  
+00002920: 2020 2020 2020 2020 2064 6174 6120 7265           data re
+00002930: 7370 6f6e 7365 2066 726f 6d20 4453 5753  sponse from DSWS
+00002940: 2077 6562 2069 6e20 7468 6520 666f 726d   web in the form
+00002950: 206f 6620 7079 7468 6f6e 2044 6174 6166   of python Dataf
+00002960: 7261 6d65 0d0a 2020 2020 2020 2020 2020  rame..          
+00002970: 200d 0a20 2020 2020 2020 2020 2020 4172   ..           Ar
+00002980: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00002990: 2020 2020 7469 636b 6572 733a 2073 7472      tickers: str
+000029a0: 696e 672c 2044 6174 6179 7065 7320 0d0a  ing, Dataypes ..
+000029b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000029c0: 6965 6c64 733a 204c 6973 742c 2064 6566  ields: List, def
+000029d0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
+000029e0: 2020 2020 2020 2020 2020 7374 6172 743a            start:
+000029f0: 2073 7472 696e 672c 2064 6566 6175 6c74   string, default
+00002a00: 2027 270d 0a20 2020 2020 2020 2020 2020   ''..           
+00002a10: 2020 2020 656e 6420 3a20 7374 7269 6e67      end : string
+00002a20: 2c20 6465 6661 756c 7420 2727 0d0a 2020  , default ''..  
+00002a30: 2020 2020 2020 2020 2020 2020 2066 7265               fre
+00002a40: 7120 3a20 7374 7269 6e67 2c20 6465 6661  q : string, defa
+00002a50: 756c 7420 2727 2c20 4279 2064 6561 6675  ult '', By deafu
+00002a60: 6c74 2044 5357 5320 7472 6561 7473 2061  lt DSWS treats a
+00002a70: 7320 4461 696c 7920 6672 6571 0d0a 2020  s Daily freq..  
+00002a80: 2020 2020 2020 2020 2020 2020 206b 696e               kin
+00002a90: 643a 2069 6e74 2c20 6465 6661 756c 7420  d: int, default 
+00002aa0: 312c 2069 6e64 6963 6174 6573 2054 696d  1, indicates Tim
+00002ab0: 6573 6572 6965 7320 6173 206f 7574 7075  eseries as outpu
+00002ac0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00002ad0: 2020 7265 744e 616d 653a 2062 6f6f 6c2c    retName: bool,
+00002ae0: 2064 6566 6175 6c74 2046 616c 7365 2c20   default False, 
+00002af0: 746f 2062 6520 7365 7420 746f 2054 7275  to be set to Tru
+00002b00: 6520 6966 2074 6865 2049 6e73 7472 756d  e if the Instrum
+00002b10: 656e 740d 0a20 2020 2020 2020 2020 2020  ent..           
+00002b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b30: 6e61 6d65 7320 616e 6420 4461 7461 7479  names and Dataty
+00002b40: 7065 206e 616d 6573 2061 7265 2074 6f20  pe names are to 
+00002b50: 6265 2072 6574 7572 6e65 640d 0a0d 0a20  be returned.... 
+00002b60: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
+00002b70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00002b80: 2020 2020 2044 6174 6146 7261 6d65 2e22       DataFrame."
+00002b90: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+00002ba0: 2020 2020 200d 0a0d 0a20 2020 2020 2020       ....       
+00002bb0: 2067 6574 4461 7461 5f75 726c 203d 2073   getData_url = s
+00002bc0: 656c 662e 7572 6c20 2b20 2247 6574 4461  elf.url + "GetDa
+00002bd0: 7461 220d 0a20 2020 2020 2020 2072 6177  ta"..        raw
+00002be0: 5f64 6174 6152 6571 7565 7374 203d 2022  _dataRequest = "
+00002bf0: 220d 0a20 2020 2020 2020 206a 736f 6e5f  "..        json_
+00002c00: 6461 7461 5265 7175 6573 7420 3d20 2222  dataRequest = ""
+00002c10: 0d0a 2020 2020 2020 2020 6a73 6f6e 5f52  ..        json_R
+00002c20: 6573 706f 6e73 6520 3d20 2222 0d0a 2020  esponse = ""..  
+00002c30: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
+00002c40: 6966 2066 6965 6c64 7320 3d3d 204e 6f6e  if fields == Non
+00002c50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00002c60: 6669 656c 6473 203d 205b 5d0d 0a20 2020  fields = []..   
+00002c70: 2020 2020 200d 0a20 2020 2020 2020 2074       ..        t
+00002c80: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00002c90: 2072 6574 4e61 6d65 203d 2046 616c 7365   retName = False
+00002ca0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00002cb0: 712c 2072 6574 4e61 6d65 203d 2073 656c  q, retName = sel
+00002cc0: 662e 706f 7374 5f75 7365 725f 7265 7175  f.post_user_requ
+00002cd0: 6573 7428 7469 636b 6572 732c 2066 6965  est(tickers, fie
+00002ce0: 6c64 732c 2073 7461 7274 2c20 656e 642c  lds, start, end,
+00002cf0: 2066 7265 712c 206b 696e 642c 2072 6574   freq, kind, ret
+00002d00: 4e61 6d65 290d 0a20 2020 2020 2020 2020  Name)..         
+00002d10: 2020 2064 6174 6172 6571 7565 7374 203d     datarequest =
+00002d20: 2044 6174 6152 6571 7565 7374 2829 0d0a   DataRequest()..
+00002d30: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00002d40: 2e43 6865 636b 5f54 6f6b 656e 2829 2023  .Check_Token() #
+00002d50: 2063 6865 636b 2061 6e64 2072 656e 6577   check and renew
+00002d60: 2074 6f6b 656e 2069 6620 7769 7468 696e   token if within
+00002d70: 2031 3520 6d69 6e75 7465 7320 6f66 2065   15 minutes of e
+00002d80: 7870 6972 790d 0a20 2020 2020 2020 2020  xpiry..         
+00002d90: 2020 2072 6177 5f64 6174 6152 6571 7565     raw_dataReque
+00002da0: 7374 203d 2064 6174 6172 6571 7565 7374  st = datarequest
+00002db0: 2e67 6574 5f52 6571 7565 7374 2872 6571  .get_Request(req
+00002dc0: 2c20 7365 6c66 2e74 6f6b 656e 290d 0a20  , self.token).. 
+00002dd0: 2020 2020 2020 2020 2020 2020 2020 0d0a                ..
+00002de0: 2020 2020 2020 2020 2020 2020 6966 2028              if (
+00002df0: 7261 775f 6461 7461 5265 7175 6573 7420  raw_dataRequest 
+00002e00: 213d 2022 2229 3a0d 0a20 2020 2020 2020  != ""):..       
+00002e10: 2020 2020 2020 2020 206a 736f 6e5f 5265           json_Re
+00002e20: 7370 6f6e 7365 203d 2073 656c 662e 5f67  sponse = self._g
+00002e30: 6574 5f6a 736f 6e5f 5265 7370 6f6e 7365  et_json_Response
+00002e40: 2867 6574 4461 7461 5f75 726c 2c20 7261  (getData_url, ra
+00002e50: 775f 6461 7461 5265 7175 6573 7429 0d0a  w_dataRequest)..
+00002e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002e80: 2020 2366 6f72 6d61 7420 7468 6520 4a53    #format the JS
+00002e90: 4f4e 2072 6573 706f 6e73 6520 696e 746f  ON response into
+00002ea0: 2072 6561 6461 626c 6520 7461 626c 650d   readable table.
+00002eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002ec0: 2069 6620 2744 6174 6152 6573 706f 6e73   if 'DataRespons
+00002ed0: 6527 2069 6e20 6a73 6f6e 5f52 6573 706f  e' in json_Respo
+00002ee0: 6e73 653a 0d0a 2020 2020 2020 2020 2020  nse:..          
+00002ef0: 2020 2020 2020 2020 2020 6966 2072 6574            if ret
+00002f00: 4e61 6d65 3a0d 0a20 2020 2020 2020 2020  Name:..         
+00002f10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00002f20: 656c 662e 5f67 6574 5f6d 6574 6164 6174  elf._get_metadat
+00002f30: 6128 6a73 6f6e 5f52 6573 706f 6e73 655b  a(json_Response[
+00002f40: 2744 6174 6152 6573 706f 6e73 6527 5d29  'DataResponse'])
+00002f50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002f60: 2020 2020 2020 7265 7370 6f6e 7365 5f64        response_d
+00002f70: 6174 6166 7261 6d65 203d 2073 656c 662e  ataframe = self.
+00002f80: 5f66 6f72 6d61 745f 5265 7370 6f6e 7365  _format_Response
+00002f90: 286a 736f 6e5f 5265 7370 6f6e 7365 5b27  (json_Response['
+00002fa0: 4461 7461 5265 7370 6f6e 7365 275d 290d  DataResponse']).
+00002fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002fc0: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
+00002fd0: 6f6e 7365 5f64 6174 6166 7261 6d65 0d0a  onse_dataframe..
+00002fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ff0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00003000: 2020 2020 2020 2020 2020 2069 6620 274d             if 'M
+00003010: 6573 7361 6765 2720 696e 206a 736f 6e5f  essage' in json_
+00003020: 5265 7370 6f6e 7365 3a0d 0a20 2020 2020  Response:..     
+00003030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003040: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00003050: 6f6e 286a 736f 6e5f 5265 7370 6f6e 7365  on(json_Response
+00003060: 5b27 4d65 7373 6167 6527 5d29 0d0a 2020  ['Message'])..  
+00003070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003080: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
+00003090: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000030a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000030b0: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
+000030c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000030d0: 6365 7074 696f 6e20 6173 2065 7870 3a0d  ception as exp:.
+000030e0: 0a20 2020 2020 2020 2020 2020 2044 5355  .            DSU
+000030f0: 7365 724f 626a 6563 744c 6f67 4675 6e63  serObjectLogFunc
+00003100: 732e 4c6f 6745 7863 6570 7469 6f6e 2827  s.LogException('
+00003110: 4461 7461 7374 7265 616d 5079 272c 2027  DatastreamPy', '
+00003120: 4453 5265 7370 6f6e 7365 2e67 6574 5f64  DSResponse.get_d
+00003130: 6174 6127 2c20 2745 7863 6570 7469 6f6e  ata', 'Exception
+00003140: 206f 6363 7572 6564 3a27 2c20 6578 7029   occured:', exp)
+00003150: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00003160: 6973 6520 6578 700d 0a20 2020 200d 0a20  ise exp..    .. 
+00003170: 2020 2064 6566 2067 6574 5f62 756e 646c     def get_bundl
+00003180: 655f 6461 7461 2873 656c 662c 2062 756e  e_data(self, bun
+00003190: 646c 6552 6571 7565 7374 3d4e 6f6e 652c  dleRequest=None,
+000031a0: 2072 6574 4e61 6d65 3d46 616c 7365 293a   retName=False):
+000031b0: 0d0a 2020 2020 2020 2020 2222 2254 6869  ..        """Thi
+000031c0: 7320 4675 6e63 7469 6f6e 2070 726f 6365  s Function proce
+000031d0: 7373 6573 2061 206d 756c 7469 706c 6520  sses a multiple 
+000031e0: 4a53 4f4e 2066 6f72 6d61 7420 6461 7461  JSON format data
+000031f0: 2072 6571 7565 7374 7320 746f 2070 726f   requests to pro
+00003200: 7669 6465 0d0a 2020 2020 2020 2020 2020  vide..          
+00003210: 2064 6174 6120 7265 7370 6f6e 7365 2066   data response f
+00003220: 726f 6d20 4453 5753 2077 6562 2069 6e20  rom DSWS web in 
+00003230: 7468 6520 666f 726d 206f 6620 7079 7468  the form of pyth
+00003240: 6f6e 2044 6174 6166 7261 6d65 2e0d 0a20  on Dataframe... 
+00003250: 2020 2020 2020 2020 2020 5573 6520 706f            Use po
+00003260: 7374 5f75 7365 725f 7265 7175 6573 7420  st_user_request 
+00003270: 746f 2066 6f72 6d20 6561 6368 204a 534f  to form each JSO
+00003280: 4e20 6461 7461 2072 6571 7565 7374 2061  N data request a
+00003290: 6e64 2061 7070 656e 6420 746f 2061 204c  nd append to a L
+000032a0: 6973 740d 0a20 2020 2020 2020 2020 2020  ist..           
+000032b0: 746f 2070 6173 7320 7468 6520 6275 6e64  to pass the bund
+000032c0: 6c65 5265 7175 7365 742e 0d0a 2020 2020  leRequset...    
+000032d0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+000032e0: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
+000032f0: 2020 2020 2020 2020 2020 2062 756e 646c             bundl
+00003300: 6552 6571 7565 7374 3a20 4c69 7374 2c20  eRequest: List, 
+00003310: 6578 7065 6374 7320 6c69 7374 206f 6620  expects list of 
+00003320: 4461 7461 7265 7175 6573 7473 200d 0a20  Datarequests .. 
+00003330: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00003340: 744e 616d 653a 2062 6f6f 6c2c 2064 6566  tName: bool, def
+00003350: 6175 6c74 2046 616c 7365 2c20 746f 2062  ault False, to b
+00003360: 6520 7365 7420 746f 2054 7275 6520 6966  e set to True if
+00003370: 2074 6865 2049 6e73 7472 756d 656e 740d   the Instrument.
+00003380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003390: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+000033a0: 7320 616e 6420 4461 7461 7479 7065 206e  s and Datatype n
+000033b0: 616d 6573 2061 7265 2074 6f20 6265 2072  ames are to be r
+000033c0: 6574 7572 6e65 640d 0a0d 0a20 2020 2020  eturned....     
+000033d0: 2020 2020 2020 2052 6574 7572 6e73 3a0d         Returns:.
+000033e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000033f0: 2020 2044 6174 6146 7261 6d65 2e22 2222     DataFrame."""
+00003400: 0d0a 0d0a 2020 2020 2020 2020 6765 7444  ....        getD
+00003410: 6174 6142 756e 646c 655f 7572 6c20 3d20  ataBundle_url = 
+00003420: 7365 6c66 2e75 726c 202b 2022 4765 7444  self.url + "GetD
+00003430: 6174 6142 756e 646c 6522 0d0a 2020 2020  ataBundle"..    
+00003440: 2020 2020 7261 775f 6461 7461 5265 7175      raw_dataRequ
+00003450: 6573 7420 3d20 2222 0d0a 2020 2020 2020  est = ""..      
+00003460: 2020 6a73 6f6e 5f64 6174 6152 6571 7565    json_dataReque
+00003470: 7374 203d 2022 220d 0a20 2020 2020 2020  st = ""..       
+00003480: 206a 736f 6e5f 5265 7370 6f6e 7365 203d   json_Response =
+00003490: 2022 220d 0a20 2020 2020 2020 0d0a 2020   ""..       ..  
+000034a0: 2020 2020 2020 6966 2062 756e 646c 6552        if bundleR
+000034b0: 6571 7565 7374 203d 3d20 4e6f 6e65 3a0d  equest == None:.
+000034c0: 0a20 2020 2020 2020 2020 2020 2062 756e  .            bun
+000034d0: 646c 6552 6571 7565 7374 203d 205b 5d0d  dleRequest = [].
+000034e0: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
+000034f0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00003500: 2020 2020 2064 6174 6172 6571 7565 7374       datarequest
+00003510: 203d 2044 6174 6152 6571 7565 7374 2829   = DataRequest()
+00003520: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00003530: 6c66 2e43 6865 636b 5f54 6f6b 656e 2829  lf.Check_Token()
+00003540: 2023 2063 6865 636b 2061 6e64 2072 656e   # check and ren
+00003550: 6577 2074 6f6b 656e 2069 6620 7769 7468  ew token if with
+00003560: 696e 2031 3520 6d69 6e75 7465 7320 6f66  in 15 minutes of
+00003570: 2065 7870 6972 790d 0a20 2020 2020 2020   expiry..       
+00003580: 2020 2020 2072 6177 5f64 6174 6152 6571       raw_dataReq
+00003590: 7565 7374 203d 2064 6174 6172 6571 7565  uest = datareque
+000035a0: 7374 2e67 6574 5f62 756e 646c 655f 5265  st.get_bundle_Re
+000035b0: 7175 6573 7428 6275 6e64 6c65 5265 7175  quest(bundleRequ
+000035c0: 6573 742c 2073 656c 662e 746f 6b65 6e29  est, self.token)
+000035d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000035e0: 6966 2028 7261 775f 6461 7461 5265 7175  if (raw_dataRequ
+000035f0: 6573 7420 213d 2022 2229 3a0d 0a20 2020  est != ""):..   
+00003600: 2020 2020 2020 2020 2020 2020 2020 6a73                js
+00003610: 6f6e 5f52 6573 706f 6e73 6520 3d20 7365  on_Response = se
+00003620: 6c66 2e5f 6765 745f 6a73 6f6e 5f52 6573  lf._get_json_Res
+00003630: 706f 6e73 6528 6765 7444 6174 6142 756e  ponse(getDataBun
+00003640: 646c 655f 7572 6c2c 2072 6177 5f64 6174  dle_url, raw_dat
+00003650: 6152 6571 7565 7374 290d 0a20 2020 2020  aRequest)..     
+00003660: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+00003670: 4461 7461 5265 7370 6f6e 7365 7327 2069  DataResponses' i
+00003680: 6e20 6a73 6f6e 5f52 6573 706f 6e73 653a  n json_Response:
+00003690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000036a0: 2020 2020 2020 2069 6620 7265 744e 616d         if retNam
+000036b0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000036c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000036d0: 662e 5f67 6574 5f6d 6574 6164 6174 615f  f._get_metadata_
+000036e0: 6275 6e64 6c65 286a 736f 6e5f 5265 7370  bundle(json_Resp
+000036f0: 6f6e 7365 5b27 4461 7461 5265 7370 6f6e  onse['DataRespon
+00003700: 7365 7327 5d29 0d0a 2020 2020 2020 2020  ses'])..        
+00003710: 2020 2020 2020 2020 2020 2020 2072 6573               res
+00003720: 706f 6e73 655f 6461 7461 6672 616d 6520  ponse_dataframe 
+00003730: 3d20 7365 6c66 2e5f 666f 726d 6174 5f62  = self._format_b
+00003740: 756e 646c 655f 7265 7370 6f6e 7365 286a  undle_response(j
+00003750: 736f 6e5f 5265 7370 6f6e 7365 290d 0a20  son_Response).. 
+00003760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003770: 2020 2020 7265 7475 726e 2072 6573 706f      return respo
+00003780: 6e73 655f 6461 7461 6672 616d 650d 0a20  nse_dataframe.. 
+00003790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037a0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000037b0: 2020 2020 2020 2020 2020 2069 6620 274d             if 'M
+000037c0: 6573 7361 6765 2720 696e 206a 736f 6e5f  essage' in json_
+000037d0: 5265 7370 6f6e 7365 3a0d 0a20 2020 2020  Response:..     
+000037e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037f0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00003800: 6f6e 286a 736f 6e5f 5265 7370 6f6e 7365  on(json_Response
+00003810: 5b27 4d65 7373 6167 6527 5d29 0d0a 2020  ['Message'])..  
+00003820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003830: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
+00003840: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00003850: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003860: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
+00003870: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00003880: 6365 7074 696f 6e20 6173 2065 7870 3a0d  ception as exp:.
+00003890: 0a20 2020 2020 2020 2020 2020 2044 5355  .            DSU
+000038a0: 7365 724f 626a 6563 744c 6f67 4675 6e63  serObjectLogFunc
+000038b0: 732e 4c6f 6745 7863 6570 7469 6f6e 2827  s.LogException('
+000038c0: 4461 7461 7374 7265 616d 5079 272c 2027  DatastreamPy', '
+000038d0: 4453 5265 7370 6f6e 7365 2e67 6574 5f62  DSResponse.get_b
+000038e0: 756e 646c 655f 6461 7461 272c 2027 4578  undle_data', 'Ex
+000038f0: 6365 7074 696f 6e20 6f63 6375 7265 643a  ception occured:
+00003900: 272c 2065 7870 290d 0a20 2020 2020 2020  ', exp)..       
+00003910: 2020 2020 2072 6169 7365 2065 7870 0d0a       raise exp..
+00003920: 2020 2020 0d0a 232d 2d2d 2d2d 2d2d 2d2d      ..#---------
+00003930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 200d  -------------- .
+00003960: 0a23 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .#--------------
+00003970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003990: 2d2d 2d2d 2d2d 2d2d 2d20 2020 2020 2020  ---------       
+000039a0: 2020 2020 2020 0d0a 232d 2d2d 2d2d 2d2d        ..#-------
+000039b0: 4865 6c70 6572 2046 756e 6374 696f 6e73  Helper Functions
+000039c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039f0: 2d2d 2d0d 0a20 2020 2064 6566 205f 6765  ---..    def _ge
+00003a00: 745f 5265 7370 6f6e 7365 2873 656c 662c  t_Response(self,
+00003a10: 2072 6571 5572 6c2c 2072 6177 5f72 6571   reqUrl, raw_req
+00003a20: 7565 7374 293a 0d0a 2020 2020 2020 2020  uest):..        
+00003a30: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00003a40: 2020 2363 6f6e 7665 7274 2072 6177 2072    #convert raw r
+00003a50: 6571 7565 7374 2074 6f20 6a73 6f6e 2066  equest to json f
+00003a60: 6f72 6d61 7420 6265 666f 7265 2070 6f73  ormat before pos
+00003a70: 740d 0a20 2020 2020 2020 2020 2020 206a  t..            j
+00003a80: 736f 6e52 6571 7565 7374 203d 2073 656c  sonRequest = sel
+00003a90: 662e 5f6a 736f 6e5f 5265 7175 6573 7428  f._json_Request(
+00003aa0: 7261 775f 7265 7175 6573 7429 0d0a 2020  raw_request)..  
+00003ab0: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
+00003ac0: 2020 2020 2020 2020 6874 7470 5f52 6573          http_Res
+00003ad0: 706f 6e73 6520 3d20 7365 6c66 2e5f 7265  ponse = self._re
+00003ae0: 7153 6573 7369 6f6e 2e70 6f73 7428 7265  qSession.post(re
+00003af0: 7155 726c 2c20 6a73 6f6e 3d6a 736f 6e52  qUrl, json=jsonR
+00003b00: 6571 7565 7374 2c20 2070 726f 7869 6573  equest,  proxies
+00003b10: 3d73 656c 662e 5f70 726f 7869 6573 2c20  =self._proxies, 
+00003b20: 7665 7269 6679 203d 2073 656c 662e 5f63  verify = self._c
+00003b30: 6572 7466 696c 6573 2c20 6365 7274 203d  ertfiles, cert =
+00003b40: 2073 656c 662e 5f73 736c 4365 7274 2c20   self._sslCert, 
+00003b50: 7469 6d65 6f75 743d 2073 656c 662e 5f74  timeout= self._t
+00003b60: 696d 656f 7574 290d 0a20 2020 2020 2020  imeout)..       
+00003b70: 2020 2020 2072 6574 7572 6e20 6874 7470       return http
+00003b80: 5f52 6573 706f 6e73 650d 0a20 2020 2020  _Response..     
+00003b90: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00003ba0: 696f 6e20 6173 2065 7870 3a0d 0a20 2020  ion as exp:..   
+00003bb0: 2020 2020 2020 2020 2044 5355 7365 724f           DSUserO
+00003bc0: 626a 6563 744c 6f67 4675 6e63 732e 4c6f  bjectLogFuncs.Lo
+00003bd0: 6745 7863 6570 7469 6f6e 2827 4461 7461  gException('Data
+00003be0: 7374 7265 616d 5079 272c 2027 4453 5265  streamPy', 'DSRe
+00003bf0: 7370 6f6e 7365 2e67 6574 5f52 6573 706f  sponse.get_Respo
+00003c00: 6e73 6527 2c20 2745 7863 6570 7469 6f6e  nse', 'Exception
+00003c10: 206f 6363 7572 6564 3a27 2c20 6578 7029   occured:', exp)
+00003c20: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00003c30: 6973 6520 6578 700d 0a0d 0a20 2020 2020  ise exp....     
+00003c40: 2020 200d 0a20 2020 2064 6566 205f 6765     ..    def _ge
+00003c50: 745f 6a73 6f6e 5f52 6573 706f 6e73 6528  t_json_Response(
+00003c60: 7365 6c66 2c20 7265 7155 726c 2c20 7261  self, reqUrl, ra
+00003c70: 775f 7265 7175 6573 7429 3a0d 0a20 2020  w_request):..   
+00003c80: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00003c90: 2020 2020 2068 7474 7052 6573 706f 6e73       httpRespons
+00003ca0: 6520 3d20 7365 6c66 2e5f 6765 745f 5265  e = self._get_Re
+00003cb0: 7370 6f6e 7365 2872 6571 5572 6c2c 2072  sponse(reqUrl, r
+00003cc0: 6177 5f72 6571 7565 7374 290d 0a20 2020  aw_request)..   
+00003cd0: 2020 2020 2020 2023 2063 6865 636b 2074         # check t
+00003ce0: 6865 2072 6573 706f 6e73 650d 0a20 2020  he response..   
+00003cf0: 2020 2020 2020 2069 6620 6874 7470 5265         if httpRe
+00003d00: 7370 6f6e 7365 2e6f 6b3a 0d0a 2020 2020  sponse.ok:..    
+00003d10: 2020 2020 2020 2020 2020 6a73 6f6e 5f52            json_R
+00003d20: 6573 706f 6e73 6520 3d20 6469 6374 2868  esponse = dict(h
+00003d30: 7474 7052 6573 706f 6e73 652e 6a73 6f6e  ttpResponse.json
+00003d40: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+00003d50: 2020 2072 6574 7572 6e20 6a73 6f6e 5f52     return json_R
+00003d60: 6573 706f 6e73 650d 0a20 2020 2020 2020  esponse..       
+00003d70: 2020 2065 6c69 6620 6874 7470 5265 7370     elif httpResp
+00003d80: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00003d90: 203d 3d20 3430 3020 6f72 2068 7474 7052   == 400 or httpR
+00003da0: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
+00003db0: 6f64 6520 3d3d 2034 3033 3a0d 0a20 2020  ode == 403:..   
+00003dc0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+00003dd0: 6f73 7369 626c 6520 4453 4661 756c 7420  ossible DSFault 
+00003de0: 6578 6365 7074 696f 6e20 7265 7475 726e  exception return
+00003df0: 6564 2064 7565 2074 6f20 7065 726d 6973  ed due to permis
+00003e00: 7369 6f6e 732c 2065 7463 0d0a 2020 2020  sions, etc..    
+00003e10: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00003e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003e30: 2020 2020 2020 7472 794a 736f 6e20 3d20        tryJson = 
+00003e40: 6a73 6f6e 2e6c 6f61 6473 2868 7474 7052  json.loads(httpR
+00003e50: 6573 706f 6e73 652e 7465 7874 290d 0a20  esponse.text).. 
+00003e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e70: 2020 2069 6620 274d 6573 7361 6765 2720     if 'Message' 
+00003e80: 696e 2074 7279 4a73 6f6e 2e6b 6579 7328  in tryJson.keys(
+00003e90: 2920 616e 6420 2743 6f64 6527 2069 6e20  ) and 'Code' in 
+00003ea0: 7472 794a 736f 6e2e 6b65 7973 2829 3a0d  tryJson.keys():.
+00003eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003ec0: 2020 2020 2020 2020 2066 6175 6c74 4469           faultDi
+00003ed0: 6374 203d 2064 6963 7428 7472 794a 736f  ct = dict(tryJso
+00003ee0: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
+00003ef0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00003f00: 6520 4453 5573 6572 4f62 6a65 6374 4661  e DSUserObjectFa
+00003f10: 756c 7428 6661 756c 7444 6963 7429 0d0a  ult(faultDict)..
+00003f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f30: 6578 6365 7074 206a 736f 6e2e 4a53 4f4e  except json.JSON
+00003f40: 4465 636f 6465 4572 726f 7220 6173 206a  DecodeError as j
+00003f50: 6465 636f 6465 6572 723a 0d0a 2020 2020  decodeerr:..    
+00003f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f70: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
+00003f80: 2320 756e 6578 7065 6374 6564 2072 6573  # unexpected res
+00003f90: 706f 6e73 6520 736f 2072 6169 7365 2061  ponse so raise a
+00003fa0: 7320 616e 2065 7272 6f72 0d0a 2020 2020  s an error..    
+00003fb0: 2020 2020 2020 6874 7470 5265 7370 6f6e        httpRespon
+00003fc0: 7365 2e72 6169 7365 5f66 6f72 5f73 7461  se.raise_for_sta
+00003fd0: 7475 7328 290d 0a20 2020 2020 2020 2065  tus()..        e
+00003fe0: 7863 6570 7420 6a73 6f6e 2e4a 534f 4e44  xcept json.JSOND
+00003ff0: 6563 6f64 6545 7272 6f72 2061 7320 6a64  ecodeError as jd
+00004000: 6563 6f64 6565 7272 3a0d 0a20 2020 2020  ecodeerr:..     
+00004010: 2020 2020 2020 2044 5355 7365 724f 626a         DSUserObj
+00004020: 6563 744c 6f67 4675 6e63 732e 4c6f 6745  ectLogFuncs.LogE
+00004030: 7863 6570 7469 6f6e 2827 4461 7461 7374  xception('Datast
+00004040: 7265 616d 5079 272c 2027 4453 5265 7370  reamPy', 'DSResp
+00004050: 6f6e 7365 2e67 6574 5f6a 736f 6e5f 5265  onse.get_json_Re
+00004060: 7370 6f6e 7365 272c 2027 4a53 4f4e 2064  sponse', 'JSON d
+00004070: 6563 6f64 6572 2045 7863 6570 7469 6f6e  ecoder Exception
+00004080: 206f 6363 7572 6564 3a27 2c20 6a64 6563   occured:', jdec
+00004090: 6f64 6565 7272 290d 0a20 2020 2020 2020  odeerr)..       
+000040a0: 2020 2020 2072 6169 7365 0d0a 2020 2020       raise..    
+000040b0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000040c0: 7469 6f6e 2061 7320 6578 703a 0d0a 2020  tion as exp:..  
+000040d0: 2020 2020 2020 2020 2020 4453 5573 6572            DSUser
+000040e0: 4f62 6a65 6374 4c6f 6746 756e 6373 2e4c  ObjectLogFuncs.L
+000040f0: 6f67 4578 6365 7074 696f 6e28 2744 6174  ogException('Dat
+00004100: 6173 7472 6561 6d50 7927 2c20 2744 5352  astreamPy', 'DSR
+00004110: 6573 706f 6e73 652e 6765 745f 6a73 6f6e  esponse.get_json
+00004120: 5f52 6573 706f 6e73 6527 2c20 2745 7863  _Response', 'Exc
+00004130: 6570 7469 6f6e 206f 6363 7572 6564 3a27  eption occured:'
+00004140: 2c20 6578 7029 0d0a 2020 2020 2020 2020  , exp)..        
+00004150: 2020 2020 7261 6973 650d 0a20 2020 200d      raise..    .
+00004160: 0a20 2020 2064 6566 205f 6765 745f 746f  .    def _get_to
+00004170: 6b65 6e28 7365 6c66 2c20 6973 5072 6f78  ken(self, isProx
+00004180: 793d 4661 6c73 6529 3a0d 0a20 2020 2020  y=False):..     
+00004190: 2020 2074 6f6b 656e 5f75 726c 203d 2073     token_url = s
+000041a0: 656c 662e 7572 6c20 2b20 2247 6574 546f  elf.url + "GetTo
+000041b0: 6b65 6e22 0d0a 2020 2020 2020 2020 7472  ken"..        tr
+000041c0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+000041d0: 7072 6f70 7469 6573 203d 205b 5d0d 0a20  propties = [].. 
+000041e0: 2020 2020 2020 2020 2020 2070 726f 7074             propt
+000041f0: 6965 732e 6170 7065 6e64 2850 726f 7065  ies.append(Prope
+00004200: 7274 6965 7328 225f 5f41 7070 4964 222c  rties("__AppId",
+00004210: 2044 5350 6163 6b61 6765 496e 666f 2e61   DSPackageInfo.a
+00004220: 7070 4964 2929 0d0a 2020 2020 2020 2020  ppId))..        
+00004230: 2020 2020 7072 6f70 7469 6573 2e61 7070      propties.app
+00004240: 656e 6428 5072 6f70 6572 7469 6573 2822  end(Properties("
+00004250: 5265 7475 726e 4f70 7469 6f6e 7322 2c20  ReturnOptions", 
+00004260: 224e 6176 6967 6174 6f72 5365 7269 6573  "NavigatorSeries
+00004270: 2c4e 6176 6967 6174 6f72 4461 7461 7479  ,NavigatorDataty
+00004280: 7065 7322 2929 0d0a 0d0a 2020 2020 2020  pes"))....      
+00004290: 2020 2020 2020 746f 6b65 6e52 6571 203d        tokenReq =
+000042a0: 2054 6f6b 656e 5265 7175 6573 7428 7365   TokenRequest(se
+000042b0: 6c66 2e75 7365 726e 616d 652c 2073 656c  lf.username, sel
+000042c0: 662e 7061 7373 776f 7264 2c20 7072 6f70  f.password, prop
+000042d0: 7469 6573 290d 0a20 2020 2020 2020 2020  ties)..         
+000042e0: 2020 2072 6177 5f74 6f6b 656e 5265 7120     raw_tokenReq 
+000042f0: 3d20 746f 6b65 6e52 6571 2e67 6574 5f54  = tokenReq.get_T
+00004300: 6f6b 656e 5265 7175 6573 7428 290d 0a20  okenRequest().. 
+00004310: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
+00004320: 2020 2020 2020 2020 2023 506f 7374 2074           #Post t
+00004330: 6865 2074 6f6b 656e 2072 6571 7565 7374  he token request
+00004340: 2074 6f20 6765 7420 7265 7370 6f6e 7365   to get response
+00004350: 2069 6e20 6a73 6f6e 2066 6f72 6d61 740d   in json format.
+00004360: 0a20 2020 2020 2020 2020 2020 206a 736f  .            jso
+00004370: 6e5f 5265 7370 6f6e 7365 203d 2073 656c  n_Response = sel
+00004380: 662e 5f67 6574 5f6a 736f 6e5f 5265 7370  f._get_json_Resp
+00004390: 6f6e 7365 2874 6f6b 656e 5f75 726c 2c20  onse(token_url, 
+000043a0: 7261 775f 746f 6b65 6e52 6571 290d 0a20  raw_tokenReq).. 
+000043b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000043c0: 746f 6b65 6e45 7870 6972 7920 3d20 7365  tokenExpiry = se
+000043d0: 6c66 2e6a 736f 6e44 6174 6554 696d 655f  lf.jsonDateTime_
+000043e0: 746f 5f64 6174 6574 696d 6528 6a73 6f6e  to_datetime(json
+000043f0: 5f52 6573 706f 6e73 655b 2754 6f6b 656e  _Response['Token
+00004400: 4578 7069 7279 275d 290d 0a20 2020 2020  Expiry'])..     
+00004410: 2020 2020 2020 2073 656c 662e 746f 6b65         self.toke
+00004420: 6e20 3d20 6a73 6f6e 5f52 6573 706f 6e73  n = json_Respons
+00004430: 655b 2754 6f6b 656e 5661 6c75 6527 5d0d  e['TokenValue'].
+00004440: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00004450: 2043 6865 636b 2074 6865 2050 726f 7065   Check the Prope
+00004460: 7274 6965 7320 636f 6c6c 6563 7469 6f6e  rties collection
+00004470: 2066 6f72 2074 6865 2075 726c 7320 7468   for the urls th
+00004480: 6174 2073 7065 6369 6679 2077 6865 7265  at specify where
+00004490: 2074 6f20 6272 6f77 7365 2066 6f72 2044   to browse for D
+000044a0: 6174 6173 7472 6561 6d20 4e61 7669 6761  atastream Naviga
+000044b0: 746f 720d 0a20 2020 2020 2020 2020 2020  tor..           
+000044c0: 2069 6620 6a73 6f6e 5f52 6573 706f 6e73   if json_Respons
+000044d0: 655b 2750 726f 7065 7274 6965 7327 5d20  e['Properties'] 
+000044e0: 616e 6420 6c65 6e28 6a73 6f6e 5f52 6573  and len(json_Res
+000044f0: 706f 6e73 655b 2750 726f 7065 7274 6965  ponse['Propertie
+00004500: 7327 5d29 203e 2030 3a0d 0a20 2020 2020  s']) > 0:..     
+00004510: 2020 2020 2020 2020 2020 2066 6f72 2070             for p
+00004520: 726f 7020 696e 206a 736f 6e5f 5265 7370  rop in json_Resp
+00004530: 6f6e 7365 5b27 5072 6f70 6572 7469 6573  onse['Properties
+00004540: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+00004550: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00004560: 7374 616e 6365 2870 726f 705b 274b 6579  stance(prop['Key
+00004570: 275d 2c20 7374 7229 2061 6e64 2070 726f  '], str) and pro
+00004580: 705b 274b 6579 275d 2e6c 6f77 6572 2829  p['Key'].lower()
+00004590: 203d 3d20 276e 6176 6967 6174 6f72 7365   == 'navigatorse
+000045a0: 7269 6573 273a 0d0a 2020 2020 2020 2020  ries':..        
 000045b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045c0: 2020 2020 2020 2020 666f 7220 6561 6368          for each
-000045d0: 5661 6c20 696e 2076 616c 7565 733a 0d0a  Val in values:..
-000045e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045f0: 2020 2020 2020 2020 2020 2020 2020 6461                da
-00004600: 7465 5f61 7272 6179 2e61 7070 656e 6428  te_array.append(
-00004610: 7365 6c66 2e5f 6765 745f 4461 7465 2865  self._get_Date(e
-00004620: 6163 6856 616c 2929 2069 6620 7374 7228  achVal)) if str(
-00004630: 6561 6368 5661 6c29 2e66 696e 6428 272f  eachVal).find('/
-00004640: 4461 7465 2827 2920 213d 202d 3120 656c  Date(') != -1 el
-00004650: 7365 2065 6163 6856 616c 200d 0a20 2020  se eachVal ..   
-00004660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004670: 2020 2020 2020 2064 665b 636f 6c4e 616d         df[colNam
-00004680: 6573 5d20 3d20 6461 7465 5f61 7272 6179  es] = date_array
-00004690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000046a0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-000046b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046c0: 2020 2020 2020 2020 2020 6d75 6c74 6949            multiI
-000046d0: 6e64 6578 203d 2046 616c 7365 0d0a 2020  ndex = False..  
-000046e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046f0: 2020 2020 2020 2020 6461 7465 5f61 7272          date_arr
-00004700: 6179 2e61 7070 656e 6428 7365 6c66 2e5f  ay.append(self._
-00004710: 6765 745f 4461 7465 2876 616c 7565 735b  get_Date(values[
-00004720: 305d 2929 2069 6620 7374 7228 7661 6c75  0])) if str(valu
-00004730: 6573 5b30 5d29 2e66 696e 6428 272f 4461  es[0]).find('/Da
-00004740: 7465 2827 2920 213d 202d 3120 656c 7365  te(') != -1 else
-00004750: 2076 616c 7565 735b 305d 0d0a 2020 2020   values[0]..    
-00004760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004770: 2020 2020 2020 7661 6c44 6963 745b 2256        valDict["V
-00004780: 616c 7565 225d 2e61 7070 656e 6428 6461  alue"].append(da
-00004790: 7465 5f61 7272 6179 5b30 5d29 0d0a 2020  te_array[0])..  
-000047a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047b0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000047c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000047d0: 6620 7661 6c54 7970 6520 3d3d 2030 3a0d  f valType == 0:.
-000047e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000047f0: 2020 2020 2020 2020 2020 2020 2345 7272              #Err
-00004800: 6f72 2052 6574 7572 6e65 640d 0a20 2020  or Returned..   
-00004810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004820: 2020 2020 2020 2020 2331 322f 3132 2f32          #12/12/2
-00004830: 3031 3920 2d20 4572 726f 7220 7265 7475  019 - Error retu
-00004840: 726e 6564 2063 616e 2062 6520 6172 7261  rned can be arra
-00004850: 7920 6f72 2061 2073 696e 676c 6520 0d0a  y or a single ..
-00004860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004870: 2020 2020 2020 2020 2020 2023 6d75 6c74             #mult
-00004880: 6949 6e64 6578 203d 2046 616c 7365 0d0a  iIndex = False..
-00004890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048a0: 2020 2020 2020 2020 2020 2076 616c 4469             valDi
-000048b0: 6374 5b22 5661 6c75 6522 5d2e 6170 7065  ct["Value"].appe
-000048c0: 6e64 2876 616c 7565 7329 0d0a 2020 2020  nd(values)..    
-000048d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048e0: 2020 2020 2020 2064 665b 636f 6c4e 616d         df[colNam
-000048f0: 6573 5d20 3d20 7661 6c75 6573 0d0a 2020  es] = values..  
-00004900: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00004910: 6d75 6c74 6949 6e64 6578 3a0d 0a20 2020  multiIndex:..   
-00004920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004930: 6966 2063 7572 7265 6e63 793a 0d0a 2020  if currency:..  
-00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004950: 2020 2020 2020 6466 2e63 6f6c 756d 6e73        df.columns
-00004960: 203d 2070 642e 4d75 6c74 6949 6e64 6578   = pd.MultiIndex
-00004970: 2e66 726f 6d5f 7475 706c 6573 2864 662e  .from_tuples(df.
-00004980: 636f 6c75 6d6e 732c 206e 616d 6573 3d5b  columns, names=[
-00004990: 2749 6e73 7472 756d 656e 7427 2c27 4669  'Instrument','Fi
-000049a0: 656c 6427 2c27 4375 7272 656e 6379 275d  eld','Currency']
-000049b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000049c0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000049d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049e0: 2020 2020 2064 662e 636f 6c75 6d6e 7320       df.columns 
-000049f0: 3d20 7064 2e4d 756c 7469 496e 6465 782e  = pd.MultiIndex.
-00004a00: 6672 6f6d 5f74 7570 6c65 7328 6466 2e63  from_tuples(df.c
-00004a10: 6f6c 756d 6e73 2c20 6e61 6d65 733d 5b27  olumns, names=['
-00004a20: 496e 7374 7275 6d65 6e74 272c 2746 6965  Instrument','Fie
-00004a30: 6c64 275d 290d 0a20 2020 2020 2020 2020  ld'])..         
-00004a40: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-00004a50: 2020 2020 6966 206e 6f74 206d 756c 7469      if not multi
-00004a60: 496e 6465 783a 0d0a 2020 2020 2020 2020  Index:..        
-00004a70: 2020 2020 696e 6465 784c 656e 203d 2072      indexLen = r
-00004a80: 616e 6765 286c 656e 2876 616c 4469 6374  ange(len(valDict
-00004a90: 5b27 496e 7374 7275 6d65 6e74 275d 2929  ['Instrument']))
-00004aa0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00004ab0: 2076 616c 4469 6374 5b27 4375 7272 656e   valDict['Curren
-00004ac0: 6379 275d 3a0d 0a20 2020 2020 2020 2020  cy']:..         
-00004ad0: 2020 2020 2020 206e 6577 6466 203d 2070         newdf = p
-00004ae0: 642e 4461 7461 4672 616d 6528 6461 7461  d.DataFrame(data
-00004af0: 3d76 616c 4469 6374 2c63 6f6c 756d 6e73  =valDict,columns
-00004b00: 3d5b 2249 6e73 7472 756d 656e 7422 2c20  =["Instrument", 
-00004b10: 2244 6174 6174 7970 6522 2c20 2256 616c  "Datatype", "Val
-00004b20: 7565 222c 2022 4375 7272 656e 6379 225d  ue", "Currency"]
-00004b30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00004b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b50: 2020 2020 696e 6465 783d 696e 6465 784c      index=indexL
-00004b60: 656e 290d 0a20 2020 2020 2020 2020 2020  en)..           
-00004b70: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00004b80: 2020 2020 2020 2020 6e65 7764 6620 3d20          newdf = 
-00004b90: 7064 2e44 6174 6146 7261 6d65 2864 6174  pd.DataFrame(dat
-00004ba0: 613d 7661 6c44 6963 742c 636f 6c75 6d6e  a=valDict,column
-00004bb0: 733d 5b22 496e 7374 7275 6d65 6e74 222c  s=["Instrument",
-00004bc0: 2022 4461 7461 7479 7065 222c 2022 5661   "Datatype", "Va
-00004bd0: 6c75 6522 5d2c 0d0a 2020 2020 2020 2020  lue"],..        
-00004be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004bf0: 2020 2020 2020 2020 2069 6e64 6578 3d69           index=i
-00004c00: 6e64 6578 4c65 6e29 0d0a 2020 2020 2020  ndexLen)..      
-00004c10: 2020 2020 2020 7265 7475 726e 206e 6577        return new
-00004c20: 6466 0d0a 2020 2020 2020 2020 7265 7475  df..        retu
-00004c30: 726e 2064 6620 0d0a 2020 2020 2020 2020  rn df ..        
-00004c40: 2020 2020 0d0a 2020 2020 6465 6620 5f66      ..    def _f
-00004c50: 6f72 6d61 745f 5265 7370 6f6e 7365 2873  ormat_Response(s
-00004c60: 656c 662c 2072 6573 706f 6e73 655f 6a73  elf, response_js
-00004c70: 6f6e 293a 0d0a 2020 2020 2020 2020 2320  on):..        # 
-00004c80: 4966 2064 6174 6573 2069 7320 6e6f 7420  If dates is not 
-00004c90: 6176 6169 6c61 626c 652c 2074 6865 2072  available, the r
-00004ca0: 6571 7565 7374 2069 7320 6e6f 7420 636f  equest is not co
-00004cb0: 6e73 7472 7563 7465 6420 636f 7272 6563  nstructed correc
-00004cc0: 746c 790d 0a20 2020 2020 2020 2072 6573  tly..        res
-00004cd0: 706f 6e73 655f 6a73 6f6e 203d 2064 6963  ponse_json = dic
-00004ce0: 7428 7265 7370 6f6e 7365 5f6a 736f 6e29  t(response_json)
-00004cf0: 0d0a 2020 2020 2020 2020 6966 2027 4461  ..        if 'Da
-00004d00: 7465 7327 2069 6e20 7265 7370 6f6e 7365  tes' in response
-00004d10: 5f6a 736f 6e3a 0d0a 2020 2020 2020 2020  _json:..        
-00004d20: 2020 2020 6461 7465 735f 636f 6e76 6572      dates_conver
-00004d30: 7465 6420 3d20 5b5d 0d0a 2020 2020 2020  ted = []..      
-00004d40: 2020 2020 2020 6966 2072 6573 706f 6e73        if respons
-00004d50: 655f 6a73 6f6e 5b27 4461 7465 7327 5d20  e_json['Dates'] 
-00004d60: 213d 204e 6f6e 653a 0d0a 2020 2020 2020  != None:..      
-00004d70: 2020 2020 2020 2020 2020 6461 7465 7320            dates 
-00004d80: 3d20 7265 7370 6f6e 7365 5f6a 736f 6e5b  = response_json[
-00004d90: 2744 6174 6573 275d 0d0a 2020 2020 2020  'Dates']..      
-00004da0: 2020 2020 2020 2020 2020 666f 7220 6420            for d 
-00004db0: 696e 2064 6174 6573 3a0d 0a20 2020 2020  in dates:..     
-00004dc0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00004dd0: 6174 6573 5f63 6f6e 7665 7274 6564 2e61  ates_converted.a
-00004de0: 7070 656e 6428 7365 6c66 2e5f 6765 745f  ppend(self._get_
-00004df0: 4461 7465 2864 2929 0d0a 2020 2020 2020  Date(d))..      
-00004e00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00004e10: 2020 2020 2072 6574 7572 6e20 2745 7272       return 'Err
-00004e20: 6f72 202d 2070 6c65 6173 6520 6368 6563  or - please chec
-00004e30: 6b20 696e 7374 7275 6d65 6e74 7320 616e  k instruments an
-00004e40: 6420 7061 7261 6d65 7465 7273 2028 7469  d parameters (ti
-00004e50: 6d65 2073 6572 6965 7320 6f72 2073 7461  me series or sta
-00004e60: 7469 6329 270d 0a20 2020 2020 2020 200d  tic)'..        .
-00004e70: 0a20 2020 2020 2020 2023 204c 6f6f 7020  .        # Loop 
-00004e80: 7468 726f 7567 6820 7468 6520 7661 6c75  through the valu
-00004e90: 6573 2069 6e20 7468 6520 7265 7370 6f6e  es in the respon
-00004ea0: 7365 0d0a 2020 2020 2020 2020 6461 7461  se..        data
-00004eb0: 6672 616d 6520 3d20 7365 6c66 2e5f 6765  frame = self._ge
-00004ec0: 745f 4461 7461 7479 7065 5661 6c75 6573  t_DatatypeValues
-00004ed0: 2872 6573 706f 6e73 655f 6a73 6f6e 290d  (response_json).
-00004ee0: 0a20 2020 2020 2020 2069 6620 286c 656e  .        if (len
-00004ef0: 2864 6174 6573 5f63 6f6e 7665 7274 6564  (dates_converted
-00004f00: 2920 3d3d 206c 656e 2864 6174 6166 7261  ) == len(datafra
-00004f10: 6d65 2e69 6e64 6578 2929 3a0d 0a20 2020  me.index)):..   
-00004f20: 2020 2020 2020 2020 2069 6620 286c 656e           if (len
-00004f30: 2864 6174 6573 5f63 6f6e 7665 7274 6564  (dates_converted
-00004f40: 2920 3e20 3129 3a0d 0a20 2020 2020 2020  ) > 1):..       
-00004f50: 2020 2020 2020 2020 2023 6461 7461 6672           #datafr
-00004f60: 616d 652e 696e 7365 7274 286c 6f63 203d  ame.insert(loc =
-00004f70: 2030 2c20 636f 6c75 6d6e 203d 2027 4461   0, column = 'Da
-00004f80: 7465 7327 2c20 7661 6c75 6520 3d20 6461  tes', value = da
-00004f90: 7465 735f 636f 6e76 6572 7465 6429 0d0a  tes_converted)..
-00004fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004fb0: 6461 7461 6672 616d 652e 696e 6465 7820  dataframe.index 
-00004fc0: 3d20 6461 7465 735f 636f 6e76 6572 7465  = dates_converte
-00004fd0: 640d 0a20 2020 2020 2020 2020 2020 2020  d..             
-00004fe0: 2020 2064 6174 6166 7261 6d65 2e69 6e64     dataframe.ind
-00004ff0: 6578 2e6e 616d 6520 3d20 2744 6174 6573  ex.name = 'Dates
-00005000: 270d 0a20 2020 2020 2020 2065 6c69 6620  '..        elif 
-00005010: 286c 656e 2864 6174 6573 5f63 6f6e 7665  (len(dates_conve
-00005020: 7274 6564 2920 3d3d 2031 293a 0d0a 2020  rted) == 1):..  
-00005030: 2020 2020 2020 2020 2020 6461 7461 6672            datafr
-00005040: 616d 655b 2744 6174 6573 275d 203d 2064  ame['Dates'] = d
-00005050: 6174 6573 5f63 6f6e 7665 7274 6564 5b30  ates_converted[0
-00005060: 5d0d 0a20 2020 2020 2020 200d 0a20 2020  ]..        ..   
-00005070: 2020 2020 2072 6574 7572 6e20 6461 7461       return data
-00005080: 6672 616d 650d 0a0d 0a20 2020 2064 6566  frame....    def
-00005090: 205f 666f 726d 6174 5f62 756e 646c 655f   _format_bundle_
-000050a0: 7265 7370 6f6e 7365 2873 656c 662c 7265  response(self,re
-000050b0: 7370 6f6e 7365 5f6a 736f 6e29 3a0d 0a20  sponse_json):.. 
-000050c0: 2020 2020 2020 666f 726d 6174 7465 6452        formattedR
-000050d0: 6573 7020 3d20 5b5d 0d0a 2020 2020 2020  esp = []..      
-000050e0: 2066 6f72 2065 6163 6844 6174 6152 6573   for eachDataRes
-000050f0: 706f 6e73 6520 696e 2072 6573 706f 6e73  ponse in respons
-00005100: 655f 6a73 6f6e 5b27 4461 7461 5265 7370  e_json['DataResp
-00005110: 6f6e 7365 7327 5d3a 0d0a 2020 2020 2020  onses']:..      
-00005120: 2020 2020 2064 6620 3d20 7365 6c66 2e5f       df = self._
-00005130: 666f 726d 6174 5f52 6573 706f 6e73 6528  format_Response(
-00005140: 6561 6368 4461 7461 5265 7370 6f6e 7365  eachDataResponse
-00005150: 290d 0a20 2020 2020 2020 2020 2020 666f  )..           fo
-00005160: 726d 6174 7465 6452 6573 702e 6170 7065  rmattedResp.appe
-00005170: 6e64 2864 6629 2020 2020 2020 0d0a 2020  nd(df)      ..  
-00005180: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
-00005190: 2020 7265 7475 726e 2066 6f72 6d61 7474    return formatt
-000051a0: 6564 5265 7370 0d0a 2020 200d 0a20 2020  edResp..   ..   
-000051b0: 2064 6566 205f 6c6f 6164 5769 6e43 6572   def _loadWinCer
-000051c0: 7473 2873 656c 6629 3a0d 0a20 2020 2020  ts(self):..     
-000051d0: 2020 2069 6d70 6f72 7420 7769 6e63 6572     import wincer
-000051e0: 7473 746f 7265 0d0a 2020 2020 2020 2020  tstore..        
-000051f0: 6366 696c 6520 3d20 7769 6e63 6572 7473  cfile = wincerts
-00005200: 746f 7265 2e43 6572 7446 696c 6528 290d  tore.CertFile().
-00005210: 0a20 2020 2020 2020 2063 6669 6c65 2e61  .        cfile.a
-00005220: 6464 7374 6f72 6528 2743 4127 290d 0a20  ddstore('CA').. 
-00005230: 2020 2020 2020 2063 6669 6c65 2e61 6464         cfile.add
-00005240: 7374 6f72 6528 2752 4f4f 5427 290d 0a20  store('ROOT').. 
-00005250: 2020 2020 2020 2063 6669 6c65 2e61 6464         cfile.add
-00005260: 7374 6f72 6528 274d 5927 290d 0a20 2020  store('MY')..   
-00005270: 2020 2020 2073 656c 662e 6365 7274 6669       self.certfi
-00005280: 6c65 203d 2063 6669 6c65 2e6e 616d 650d  le = cfile.name.
-00005290: 0a20 2020 2020 2020 2061 7465 7869 742e  .        atexit.
-000052a0: 7265 6769 7374 6572 2863 6669 6c65 2e63  register(cfile.c
-000052b0: 6c6f 7365 290d 0a20 2020 2020 2020 2023  lose)..        #
-000052c0: 7072 696e 7428 7365 6c66 2e63 6572 7466  print(self.certf
-000052d0: 696c 652e 6e61 6d65 290d 0a20 2020 2020  ile.name)..     
-000052e0: 2020 200d 0a20 2020 2064 6566 205f 6765     ..    def _ge
-000052f0: 745f 6d65 7461 6461 7461 2873 656c 662c  t_metadata(self,
-00005300: 206a 736f 6e52 6573 7029 3a0d 0a20 2020   jsonResp):..   
-00005310: 2020 2020 206e 616d 6573 203d 207b 7d0d       names = {}.
-00005320: 0a20 2020 2020 2020 2069 6620 6a73 6f6e  .        if json
-00005330: 5265 7370 5b27 5379 6d62 6f6c 4e61 6d65  Resp['SymbolName
-00005340: 7327 5d3a 0d0a 2020 2020 2020 2020 2020  s']:..          
-00005350: 2020 666f 7220 6920 696e 206a 736f 6e52    for i in jsonR
-00005360: 6573 705b 2753 796d 626f 6c4e 616d 6573  esp['SymbolNames
-00005370: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
-00005380: 2020 2020 206e 616d 6573 2e75 7064 6174       names.updat
-00005390: 6528 7b69 5b27 4b65 7927 5d3a 2069 5b27  e({i['Key']: i['
-000053a0: 5661 6c75 6527 5d7d 290d 0a20 2020 2020  Value']})..     
-000053b0: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
-000053c0: 2020 2020 2069 6620 6a73 6f6e 5265 7370       if jsonResp
-000053d0: 5b27 4461 7461 5479 7065 4e61 6d65 7327  ['DataTypeNames'
-000053e0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-000053f0: 666f 7220 6920 696e 206a 736f 6e52 6573  for i in jsonRes
-00005400: 705b 2744 6174 6154 7970 654e 616d 6573  p['DataTypeNames
-00005410: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
-00005420: 2020 2020 206e 616d 6573 2e75 7064 6174       names.updat
-00005430: 6528 7b69 5b27 4b65 7927 5d3a 2069 5b27  e({i['Key']: i['
-00005440: 5661 6c75 6527 5d7d 290d 0a20 2020 2020  Value']})..     
-00005450: 2020 200d 0a20 2020 2020 2020 2070 7269     ..        pri
-00005460: 6e74 286e 616d 6573 290d 0a20 2020 2020  nt(names)..     
-00005470: 2020 200d 0a20 2020 2064 6566 205f 6765     ..    def _ge
-00005480: 745f 6d65 7461 6461 7461 5f62 756e 646c  t_metadata_bundl
-00005490: 6528 7365 6c66 2c20 6a73 6f6e 5265 7370  e(self, jsonResp
-000054a0: 293a 0d0a 2020 2020 2020 2020 666f 7220  ):..        for 
-000054b0: 6561 6368 4461 7461 5265 7370 6f6e 7365  eachDataResponse
-000054c0: 2069 6e20 6a73 6f6e 5265 7370 3a0d 0a20   in jsonResp:.. 
-000054d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000054e0: 5f67 6574 5f6d 6574 6164 6174 6128 6561  _get_metadata(ea
-000054f0: 6368 4461 7461 5265 7370 6f6e 7365 290d  chDataResponse).
-00005500: 0a23 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .#--------------
-00005510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005540: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005550: 2d2d 2d2d 2d2d 2d0d 0a0d 0a              -------....
+000045c0: 7365 6c66 2e6e 6176 6967 6174 6f72 5365  self.navigatorSe
+000045d0: 7269 6573 5572 6c20 3d20 7072 6f70 5b27  riesUrl = prop['
+000045e0: 5661 6c75 6527 5d20 2320 5468 6520 7572  Value'] # The ur
+000045f0: 6c20 746f 2062 726f 7773 6520 616e 6420  l to browse and 
+00004600: 7365 6172 6368 2044 6174 6173 7472 6561  search Datastrea
+00004610: 6d20 4e61 7669 6761 746f 7220 666f 7220  m Navigator for 
+00004620: 7370 6563 6966 6963 2069 6e73 7472 756d  specific instrum
+00004630: 656e 7473 0d0a 2020 2020 2020 2020 2020  ents..          
+00004640: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+00004650: 7369 6e73 7461 6e63 6528 7072 6f70 5b27  sinstance(prop['
+00004660: 4b65 7927 5d2c 2073 7472 2920 616e 6420  Key'], str) and 
+00004670: 7072 6f70 5b27 4b65 7927 5d2e 6c6f 7765  prop['Key'].lowe
+00004680: 7228 2920 3d3d 2027 6e61 7669 6761 746f  r() == 'navigato
+00004690: 7264 6174 6174 7970 6573 273a 0d0a 2020  rdatatypes':..  
+000046a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046b0: 2020 2020 2020 7365 6c66 2e6e 6176 6967        self.navig
+000046c0: 6174 6f72 4461 7461 7479 7065 7355 726c  atorDatatypesUrl
+000046d0: 203d 2070 726f 705b 2756 616c 7565 275d   = prop['Value']
+000046e0: 2023 2054 6865 2075 726c 2074 6f20 6272   # The url to br
+000046f0: 6f77 7365 2061 6e64 2073 6561 7263 6820  owse and search 
+00004700: 4461 7461 7374 7265 616d 204e 6176 6967  Datastream Navig
+00004710: 6174 6f72 2066 6f72 2073 7065 6369 6669  ator for specifi
+00004720: 6320 6461 7461 7479 7065 730d 0a20 2020  c datatypes..   
+00004730: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+00004740: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00004750: 696f 6e20 6173 2065 7870 3a0d 0a20 2020  ion as exp:..   
+00004760: 2020 2020 2020 2020 2044 5355 7365 724f           DSUserO
+00004770: 626a 6563 744c 6f67 4675 6e63 732e 4c6f  bjectLogFuncs.Lo
+00004780: 6745 7863 6570 7469 6f6e 2827 4461 7461  gException('Data
+00004790: 7374 7265 616d 5079 272c 2027 4453 5265  streamPy', 'DSRe
+000047a0: 7370 6f6e 7365 2e67 6574 5f74 6f6b 656e  sponse.get_token
+000047b0: 272c 2027 4578 6365 7074 696f 6e20 6f63  ', 'Exception oc
+000047c0: 6375 7265 643a 272c 2065 7870 290d 0a20  cured:', exp).. 
+000047d0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000047e0: 2065 7870 0d0a 0d0a 2020 2020 6465 6620   exp....    def 
+000047f0: 4973 5661 6c69 6428 7365 6c66 293a 0d0a  IsValid(self):..
+00004800: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00004810: 7369 6e73 7461 6e63 6528 7365 6c66 2e74  sinstance(self.t
+00004820: 6f6b 656e 2c20 7374 7229 2061 6e64 206c  oken, str) and l
+00004830: 656e 2873 656c 662e 746f 6b65 6e29 203e  en(self.token) >
+00004840: 2030 2061 6e64 2069 7369 6e73 7461 6e63   0 and isinstanc
+00004850: 6528 7365 6c66 2e74 6f6b 656e 4578 7069  e(self.tokenExpi
+00004860: 7279 2c20 6461 7465 7469 6d65 290d 0a0d  ry, datetime)...
+00004870: 0a20 2020 2064 6566 2043 6865 636b 5f54  .    def Check_T
+00004880: 6f6b 656e 2873 656c 6629 3a0d 0a20 2020  oken(self):..   
+00004890: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+000048a0: 2e49 7356 616c 6964 2829 3a0d 0a20 2020  .IsValid():..   
+000048b0: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
+000048c0: 7863 6570 7469 6f6e 2822 596f 7520 6172  xception("You ar
+000048d0: 6520 6e6f 7420 6c6f 6767 6564 206f 6e2e  e not logged on.
+000048e0: 2050 6c65 6173 6520 7265 6372 6561 7465   Please recreate
+000048f0: 2074 6869 7320 636c 6965 6e74 206f 626a   this client obj
+00004900: 6563 7420 7375 7070 6c79 696e 6720 7661  ect supplying va
+00004910: 6c69 6420 7573 6572 2063 7265 6465 6e74  lid user credent
+00004920: 6961 6c73 2e22 290d 0a20 2020 2020 2020  ials.")..       
+00004930: 2023 2041 2066 756e 6374 696f 6e20 6361   # A function ca
+00004940: 6c6c 6564 2062 6566 6f72 6520 6576 6572  lled before ever
+00004950: 7920 7175 6572 7920 746f 2063 6865 636b  y query to check
+00004960: 2061 6e64 2072 656e 6577 2074 6865 2074   and renew the t
+00004970: 6f6b 656e 2069 6620 7769 7468 696e 2031  oken if within 1
+00004980: 3520 6d69 6e75 7465 7320 6f66 2065 7870  5 minutes of exp
+00004990: 6972 7920 7469 6d65 206f 7220 6c61 7465  iry time or late
+000049a0: 720d 0a20 2020 2020 2020 2074 696d 6552  r..        timeR
+000049b0: 656e 6577 203d 2064 6174 6574 696d 652e  enew = datetime.
+000049c0: 7574 636e 6f77 2829 202b 2074 696d 6564  utcnow() + timed
+000049d0: 656c 7461 286d 696e 7574 6573 203d 2031  elta(minutes = 1
+000049e0: 3529 2023 2063 7572 696f 7573 6c79 2075  5) # curiously u
+000049f0: 7463 6e6f 7728 2920 6d65 7468 6f64 2064  tcnow() method d
+00004a00: 6f65 736e 2774 2073 6574 2074 6865 2074  oesn't set the t
+00004a10: 696d 6520 7a6f 6e65 2074 6f20 7574 632e  ime zone to utc.
+00004a20: 2057 6520 6e65 6564 2074 6f20 646f 2073   We need to do s
+00004a30: 6f20 746f 2063 6f6d 7061 7265 2077 6974  o to compare wit
+00004a40: 6820 746f 6b65 6e2e 0d0a 2020 2020 2020  h token...      
+00004a50: 2020 7469 6d65 5265 6e65 7720 3d20 6461    timeRenew = da
+00004a60: 7465 7469 6d65 2874 696d 6552 656e 6577  tetime(timeRenew
+00004a70: 2e79 6561 722c 2074 696d 6552 656e 6577  .year, timeRenew
+00004a80: 2e6d 6f6e 7468 2c20 7469 6d65 5265 6e65  .month, timeRene
+00004a90: 772e 6461 792c 2074 696d 6552 656e 6577  w.day, timeRenew
+00004aa0: 2e68 6f75 722c 2074 696d 6552 656e 6577  .hour, timeRenew
+00004ab0: 2e6d 696e 7574 652c 2074 696d 6552 656e  .minute, timeRen
+00004ac0: 6577 2e73 6563 6f6e 642c 2030 2c20 747a  ew.second, 0, tz
+00004ad0: 696e 666f 3d70 7974 7a2e 7574 6329 0d0a  info=pytz.utc)..
+00004ae0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00004af0: 746f 6b65 6e45 7870 6972 7920 3c3d 2074  tokenExpiry <= t
+00004b00: 696d 6552 656e 6577 203a 0d0a 2020 2020  imeRenew :..    
+00004b10: 2020 2020 2020 2020 7365 6c66 2e5f 6765          self._ge
+00004b20: 745f 746f 6b65 6e28 290d 0a0d 0a20 2020  t_token()....   
+00004b30: 200d 0a20 2020 2064 6566 205f 6a73 6f6e   ..    def _json
+00004b40: 5f52 6571 7565 7374 2873 656c 662c 2072  _Request(self, r
+00004b50: 6177 5f74 6578 7429 3a0d 0a20 2020 2020  aw_text):..     
+00004b60: 2020 2023 636f 6e76 6572 7420 7468 6520     #convert the 
+00004b70: 6469 6374 696f 6e61 7279 2028 7261 7720  dictionary (raw 
+00004b80: 7465 7874 2920 746f 206a 736f 6e20 7465  text) to json te
+00004b90: 7874 2066 6972 7374 0d0a 2020 2020 2020  xt first..      
+00004ba0: 2020 6a73 6f6e 5465 7874 203d 206a 736f    jsonText = jso
+00004bb0: 6e2e 6475 6d70 7328 7261 775f 7465 7874  n.dumps(raw_text
+00004bc0: 290d 0a20 2020 2020 2020 2062 7974 6554  )..        byteT
+00004bd0: 656d 7020 3d20 6279 7465 7328 6a73 6f6e  emp = bytes(json
+00004be0: 5465 7874 2c27 7574 662d 3827 290d 0a20  Text,'utf-8').. 
+00004bf0: 2020 2020 2020 2062 7974 6554 656d 7020         byteTemp 
+00004c00: 3d20 6a73 6f6e 5465 7874 2e65 6e63 6f64  = jsonText.encod
+00004c10: 6528 2775 7466 2d38 2729 0d0a 2020 2020  e('utf-8')..    
+00004c20: 2020 2020 2363 6f6e 7665 7274 2074 6865      #convert the
+00004c30: 206a 736f 6e20 5465 7874 2074 6f20 6a73   json Text to js
+00004c40: 6f6e 2066 6f72 6d61 7474 6564 2052 6571  on formatted Req
+00004c50: 7565 7374 0d0a 2020 2020 2020 2020 6a73  uest..        js
+00004c60: 6f6e 5265 7175 6573 7420 3d20 6a73 6f6e  onRequest = json
+00004c70: 2e6c 6f61 6473 2862 7974 6554 656d 7029  .loads(byteTemp)
+00004c80: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00004c90: 206a 736f 6e52 6571 7565 7374 0d0a 0d0a   jsonRequest....
+00004ca0: 2020 2020 6465 6620 6a73 6f6e 4461 7465      def jsonDate
+00004cb0: 5469 6d65 5f74 6f5f 6461 7465 7469 6d65  Time_to_datetime
+00004cc0: 2873 656c 662c 206a 736f 6e44 6174 6529  (self, jsonDate)
+00004cd0: 3a0d 0a20 2020 2020 2020 2023 2043 6f6e  :..        # Con
+00004ce0: 7665 7274 2061 204a 534f 4e20 2f44 6174  vert a JSON /Dat
+00004cf0: 6528 2920 7374 7269 6e67 2074 6f20 6120  e() string to a 
+00004d00: 6461 7465 7469 6d65 206f 626a 6563 740d  datetime object.
+00004d10: 0a20 2020 2020 2020 2069 6620 6a73 6f6e  .        if json
+00004d20: 4461 7465 2069 7320 4e6f 6e65 3a0d 0a20  Date is None:.. 
+00004d30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00004d40: 6e20 4e6f 6e65 0d0a 2020 2020 2020 2020  n None..        
+00004d50: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00004d60: 2020 6d61 7463 6820 3d20 7265 2e6d 6174    match = re.mat
+00004d70: 6368 2872 225e 282f 4461 7465 5c28 2928  ch(r"^(/Date\()(
+00004d80: 2d3f 5c64 2a29 285c 292f 2922 2c20 6a73  -?\d*)(\)/)", js
+00004d90: 6f6e 4461 7465 290d 0a20 2020 2020 2020  onDate)..       
+00004da0: 2020 2020 2069 6620 6d61 7463 6820 3d3d       if match ==
+00004db0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00004dc0: 2020 2020 2020 2020 6d61 7463 6820 3d20          match = 
+00004dd0: 7265 2e6d 6174 6368 2872 225e 282f 4461  re.match(r"^(/Da
+00004de0: 7465 5c28 2928 2d3f 5c64 2a29 285b 2b2d  te\()(-?\d*)([+-
+00004df0: 5d29 282e 2e29 282e 2e29 285c 292f 2922  ])(..)(..)(\)/)"
+00004e00: 2c20 6a73 6f6e 4461 7465 290d 0a20 2020  , jsonDate)..   
+00004e10: 2020 2020 2020 2020 2069 6620 6d61 7463           if matc
+00004e20: 683a 0d0a 2020 2020 2020 2020 2020 2020  h:..            
+00004e30: 2020 2020 7265 7475 726e 2064 6174 6574      return datet
+00004e40: 696d 6528 3139 3730 2c20 312c 2031 2c20  ime(1970, 1, 1, 
+00004e50: 747a 696e 666f 3d70 7974 7a2e 7574 6329  tzinfo=pytz.utc)
+00004e60: 202b 2074 696d 6564 656c 7461 2873 6563   + timedelta(sec
+00004e70: 6f6e 6473 3d66 6c6f 6174 286d 6174 6368  onds=float(match
+00004e80: 2e67 726f 7570 2832 2929 2f31 3030 3029  .group(2))/1000)
+00004e90: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00004ea0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00004eb0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00004ec0: 7469 6f6e 2822 496e 7661 6c69 6420 4a53  tion("Invalid JS
+00004ed0: 4f4e 2044 6174 653a 2022 202b 206a 736f  ON Date: " + jso
+00004ee0: 6e44 6174 6529 0d0a 2020 2020 2020 2020  nDate)..        
+00004ef0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00004f00: 2061 7320 6578 703a 0d0a 2020 2020 2020   as exp:..      
+00004f10: 2020 2020 2020 4453 5573 6572 4f62 6a65        DSUserObje
+00004f20: 6374 4c6f 6746 756e 6373 2e4c 6f67 4578  ctLogFuncs.LogEx
+00004f30: 6365 7074 696f 6e28 2744 6174 6173 7472  ception('Datastr
+00004f40: 6561 6d50 7927 2c20 2744 5352 6573 706f  eamPy', 'DSRespo
+00004f50: 6e73 652e 6a73 6f6e 4461 7465 5469 6d65  nse.jsonDateTime
+00004f60: 5f74 6f5f 6461 7465 7469 6d65 272c 2027  _to_datetime', '
+00004f70: 4578 6365 7074 696f 6e20 6f63 6375 7265  Exception occure
+00004f80: 643a 272c 2065 7870 290d 0a20 2020 2020  d:', exp)..     
+00004f90: 2020 2020 2020 2072 6169 7365 2065 7870         raise exp
+00004fa0: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
+00004fb0: 2020 2020 6465 6620 5f67 6574 5f44 6174      def _get_Dat
+00004fc0: 6528 7365 6c66 2c20 6a73 6f6e 4461 7465  e(self, jsonDate
+00004fd0: 293a 0d0a 2020 2020 2020 2020 7472 793a  ):..        try:
+00004fe0: 0d0a 2020 2020 2020 2020 2020 2020 236d  ..            #m
+00004ff0: 6174 6368 203d 2072 652e 6d61 7463 6828  atch = re.match(
+00005000: 225e 2f44 6174 655b 285d 5b30 2d39 5d7b  "^/Date[(][0-9]{
+00005010: 3133 7d5b 2b5d 5b30 2d39 5d7b 347d 5b29  13}[+][0-9]{4}[)
+00005020: 5d2f 222c 206a 736f 6e44 6174 6529 0d0a  ]/", jsonDate)..
+00005030: 2020 2020 2020 2020 2020 2020 6d61 7463              matc
+00005040: 6820 3d20 7265 2e6d 6174 6368 2872 225e  h = re.match(r"^
+00005050: 282f 4461 7465 5c28 2928 2d3f 5c64 2a29  (/Date\()(-?\d*)
+00005060: 285b 2b2d 5d29 282e 2e29 282e 2e29 285c  ([+-])(..)(..)(\
+00005070: 292f 2922 2c20 6a73 6f6e 4461 7465 290d  )/)", jsonDate).
+00005080: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00005090: 6d61 7463 683a 0d0a 2020 2020 2020 2020  match:..        
+000050a0: 2020 2020 2020 2020 2364 203d 2072 652e          #d = re.
+000050b0: 7365 6172 6368 2827 5b30 2d39 5d7b 3133  search('[0-9]{13
+000050c0: 7d27 2c20 6a73 6f6e 4461 7465 290d 0a20  }', jsonDate).. 
+000050d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+000050e0: 203d 2066 6c6f 6174 286d 6174 6368 2e67   = float(match.g
+000050f0: 726f 7570 2832 2929 0d0a 2020 2020 2020  roup(2))..      
+00005100: 2020 2020 2020 2020 2020 6e64 6174 6520            ndate 
+00005110: 3d20 6461 7465 7469 6d65 2831 3937 302c  = datetime(1970,
+00005120: 312c 3129 202b 2074 696d 6564 656c 7461  1,1) + timedelta
+00005130: 2873 6563 6f6e 6473 3d66 6c6f 6174 2864  (seconds=float(d
+00005140: 292f 3130 3030 290d 0a20 2020 2020 2020  )/1000)..       
+00005150: 2020 2020 2020 2020 2075 7463 6461 7465           utcdate
+00005160: 203d 2070 7974 7a2e 5554 432e 6672 6f6d   = pytz.UTC.from
+00005170: 7574 6328 6e64 6174 6529 2e73 7472 6674  utc(ndate).strft
+00005180: 696d 6528 2725 592d 256d 2d25 6427 290d  ime('%Y-%m-%d').
+00005190: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000051a0: 2072 6574 7572 6e20 7574 6364 6174 650d   return utcdate.
+000051b0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000051c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000051d0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+000051e0: 696f 6e28 2249 6e76 616c 6964 204a 534f  ion("Invalid JSO
+000051f0: 4e20 4461 7465 2229 0d0a 2020 2020 2020  N Date")..      
+00005200: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00005210: 6f6e 2061 7320 6578 703a 0d0a 2020 2020  on as exp:..    
+00005220: 2020 2020 2020 2020 4453 5573 6572 4f62          DSUserOb
+00005230: 6a65 6374 4c6f 6746 756e 6373 2e4c 6f67  jectLogFuncs.Log
+00005240: 4578 6365 7074 696f 6e28 2744 6174 6173  Exception('Datas
+00005250: 7472 6561 6d50 7927 2c20 2744 5352 6573  treamPy', 'DSRes
+00005260: 706f 6e73 652e 6765 745f 4461 7465 272c  ponse.get_Date',
+00005270: 2027 4578 6365 7074 696f 6e20 6f63 6375   'Exception occu
+00005280: 7265 643a 272c 2065 7870 290d 0a20 2020  red:', exp)..   
+00005290: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
+000052a0: 7870 0d0a 2020 2020 2020 2020 2020 2020  xp..            
+000052b0: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
+000052c0: 2020 2020 0d0a 2020 2020 6465 6620 5f67      ..    def _g
+000052d0: 6574 5f44 6174 6174 7970 6556 616c 7565  et_DatatypeValue
+000052e0: 7328 7365 6c66 2c20 6a73 6f6e 5265 7370  s(self, jsonResp
+000052f0: 293a 0d0a 2020 2020 2020 2020 6d75 6c74  ):..        mult
+00005300: 6949 6e64 6578 203d 2046 616c 7365 0d0a  iIndex = False..
+00005310: 2020 2020 2020 2020 6466 203d 2070 642e          df = pd.
+00005320: 4461 7461 4672 616d 6528 290d 0a20 2020  DataFrame()..   
+00005330: 2020 2020 2076 616c 4469 6374 203d 207b       valDict = {
+00005340: 2249 6e73 7472 756d 656e 7422 3a5b 5d2c  "Instrument":[],
+00005350: 2244 6174 6174 7970 6522 3a5b 5d2c 2256  "Datatype":[],"V
+00005360: 616c 7565 223a 5b5d 2c22 4375 7272 656e  alue":[],"Curren
+00005370: 6379 223a 5b5d 7d0d 0a0d 0a20 2020 2020  cy":[]}....     
+00005380: 2020 2066 6f72 2069 7465 6d20 696e 206a     for item in j
+00005390: 736f 6e52 6573 705b 2744 6174 6154 7970  sonResp['DataTyp
+000053a0: 6556 616c 7565 7327 5d3a 200d 0a20 2020  eValues']: ..   
+000053b0: 2020 2020 2020 2020 2064 6174 6174 7970           datatyp
+000053c0: 6520 3d20 6974 656d 5b27 4461 7461 5479  e = item['DataTy
+000053d0: 7065 275d 0d0a 2020 2020 2020 2020 2020  pe']..          
+000053e0: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
+000053f0: 666f 7220 6920 696e 2069 7465 6d5b 2753  for i in item['S
+00005400: 796d 626f 6c56 616c 7565 7327 5d3a 0d0a  ymbolValues']:..
+00005410: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00005420: 6e73 7472 756d 656e 7420 3d20 695b 2753  nstrument = i['S
+00005430: 796d 626f 6c27 5d0d 0a20 2020 2020 2020  ymbol']..       
+00005440: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+00005450: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+00005460: 2020 2020 2020 2020 6966 2027 4375 7272          if 'Curr
+00005470: 656e 6379 2720 696e 2069 3a0d 0a20 2020  ency' in i:..   
+00005480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005490: 6375 7272 656e 6379 203d 2069 5b27 4375  currency = i['Cu
+000054a0: 7272 656e 6379 275d 2069 6620 695b 2743  rrency'] if i['C
+000054b0: 7572 7265 6e63 7927 5d20 656c 7365 2027  urrency'] else '
+000054c0: 4e41 270d 0a0d 0a20 2020 2020 2020 2020  NA'....         
+000054d0: 2020 2020 2020 7661 6c44 6963 745b 2244        valDict["D
+000054e0: 6174 6174 7970 6522 5d2e 6170 7065 6e64  atatype"].append
+000054f0: 2864 6174 6174 7970 6529 0d0a 2020 2020  (datatype)..    
+00005500: 2020 2020 2020 2020 2020 2076 616c 4469             valDi
+00005510: 6374 5b22 496e 7374 7275 6d65 6e74 225d  ct["Instrument"]
+00005520: 2e61 7070 656e 6428 696e 7374 7275 6d65  .append(instrume
+00005530: 6e74 290d 0a20 2020 2020 2020 2020 2020  nt)..           
+00005540: 2020 2020 6966 2063 7572 7265 6e63 793a      if currency:
+00005550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005560: 2020 2020 2076 616c 4469 6374 5b27 4375       valDict['Cu
+00005570: 7272 656e 6379 275d 2e61 7070 656e 6428  rrency'].append(
+00005580: 6375 7272 656e 6379 290d 0a20 2020 2020  currency)..     
+00005590: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000055a0: 6c4e 616d 6573 203d 2028 696e 7374 7275  lNames = (instru
+000055b0: 6d65 6e74 2c20 6461 7461 7479 7065 2c20  ment, datatype, 
+000055c0: 6375 7272 656e 6379 290d 0a20 2020 2020  currency)..     
+000055d0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+000055e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000055f0: 2020 2020 636f 6c4e 616d 6573 203d 2028      colNames = (
+00005600: 696e 7374 7275 6d65 6e74 2c20 6461 7461  instrument, data
+00005610: 7479 7065 290d 0a0d 0a20 2020 2020 2020  type)....       
+00005620: 2020 2020 2020 2020 7661 6c75 6573 203d          values =
+00005630: 2069 5b27 5661 6c75 6527 5d0d 0a20 2020   i['Value']..   
+00005640: 2020 2020 2020 2020 2020 2020 7661 6c54              valT
+00005650: 7970 6520 3d20 695b 2754 7970 6527 5d0d  ype = i['Type'].
+00005660: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00005670: 2020 2348 616e 646c 696e 6720 616c 6c20    #Handling all 
+00005680: 706f 7373 6962 6c65 2074 7970 6573 206f  possible types o
+00005690: 6620 6461 7461 2061 7320 7065 7220 4453  f data as per DS
+000056a0: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
+000056b0: 6c75 6554 7970 650d 0a0d 0a20 2020 2020  lueType....     
+000056c0: 2020 2020 2020 2020 2020 2354 6865 7365            #These
+000056d0: 2076 616c 7565 2074 7970 6573 2072 6574   value types ret
+000056e0: 7572 6e20 616e 2061 7272 6179 0d0a 2020  urn an array..  
+000056f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00005700: 7661 6c54 7970 6520 696e 205b 4453 5379  valType in [DSSy
+00005710: 6d62 6f6c 5265 7370 6f6e 7365 5661 6c75  mbolResponseValu
+00005720: 6554 7970 652e 426f 6f6c 4172 7261 792c  eType.BoolArray,
+00005730: 200d 0a20 2020 2020 2020 2020 2020 2020   ..             
+00005740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005750: 2044 5353 796d 626f 6c52 6573 706f 6e73   DSSymbolRespons
+00005760: 6556 616c 7565 5479 7065 2e49 6e74 4172  eValueType.IntAr
+00005770: 7261 792c 200d 0a20 2020 2020 2020 2020  ray, ..         
+00005780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005790: 2020 2020 2044 5353 796d 626f 6c52 6573       DSSymbolRes
+000057a0: 706f 6e73 6556 616c 7565 5479 7065 2e44  ponseValueType.D
+000057b0: 6174 6554 696d 6541 7272 6179 2c0d 0a20  ateTimeArray,.. 
+000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057d0: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
+000057e0: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
+000057f0: 7565 5479 7065 2e44 6f75 626c 6541 7272  ueType.DoubleArr
+00005800: 6179 2c0d 0a20 2020 2020 2020 2020 2020  ay,..           
+00005810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005820: 2020 2044 5353 796d 626f 6c52 6573 706f     DSSymbolRespo
+00005830: 6e73 6556 616c 7565 5479 7065 2e53 7472  nseValueType.Str
+00005840: 696e 6741 7272 6179 2c0d 0a20 2020 2020  ingArray,..     
+00005850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005860: 2020 2020 2020 2020 2044 5353 796d 626f           DSSymbo
+00005870: 6c52 6573 706f 6e73 6556 616c 7565 5479  lResponseValueTy
+00005880: 7065 2e4f 626a 6563 7441 7272 6179 2c0d  pe.ObjectArray,.
+00005890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000058a0: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+000058b0: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
+000058c0: 616c 7565 5479 7065 2e4e 756c 6c61 626c  alueType.Nullabl
+000058d0: 6542 6f6f 6c41 7272 6179 2c0d 0a20 2020  eBoolArray,..   
+000058e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000058f0: 2020 2020 2020 2020 2020 2044 5353 796d             DSSym
+00005900: 626f 6c52 6573 706f 6e73 6556 616c 7565  bolResponseValue
+00005910: 5479 7065 2e4e 756c 6c61 626c 6549 6e74  Type.NullableInt
+00005920: 4172 7261 792c 0d0a 2020 2020 2020 2020  Array,..        
+00005930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005940: 2020 2020 2020 4453 5379 6d62 6f6c 5265        DSSymbolRe
+00005950: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+00005960: 4e75 6c6c 6162 6c65 4461 7465 5469 6d65  NullableDateTime
+00005970: 4172 7261 792c 0d0a 2020 2020 2020 2020  Array,..        
+00005980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005990: 2020 2020 2020 4453 5379 6d62 6f6c 5265        DSSymbolRe
+000059a0: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+000059b0: 4e75 6c6c 6162 6c65 446f 7562 6c65 4172  NullableDoubleAr
+000059c0: 7261 795d 3a0d 0a20 2020 2020 2020 2020  ray]:..         
+000059d0: 2020 2020 2020 2020 2020 2023 5468 6520             #The 
+000059e0: 6172 7261 7920 6361 6e20 6265 206f 6620  array can be of 
+000059f0: 626f 6f6c 2c20 646f 7562 6c65 2c20 696e  bool, double, in
+00005a00: 742c 2073 7472 696e 672c 2064 6174 6573  t, string, dates
+00005a10: 206f 7220 4f62 6a65 6374 0d0a 0d0a 2020   or Object....  
+00005a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a30: 2020 2343 6865 636b 2069 6620 7468 6520    #Check if the 
+00005a40: 6172 7261 7920 6f66 2068 6173 204a 534f  array of has JSO
+00005a50: 4e20 6461 7465 2073 7472 696e 6720 616e  N date string an
+00005a60: 6420 636f 6e76 6572 7420 6561 6368 2074  d convert each t
+00005a70: 6f20 4461 7465 7469 6d65 0d0a 2020 2020  o Datetime..    
+00005a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a90: 7465 6d70 203d 205b 7365 6c66 2e5f 6765  temp = [self._ge
+00005aa0: 745f 4461 7465 2878 2920 6966 2069 7369  t_Date(x) if isi
+00005ab0: 6e73 7461 6e63 6528 782c 2073 7472 2920  nstance(x, str) 
+00005ac0: 616e 6420 782e 7374 6172 7473 7769 7468  and x.startswith
+00005ad0: 2827 2f44 6174 6528 2729 2065 6c73 6520  ('/Date(') else 
+00005ae0: 7820 666f 7220 7820 696e 2076 616c 7565  x for x in value
+00005af0: 735d 0d0a 2020 2020 2020 2020 2020 2020  s]..            
+00005b00: 2020 2020 2020 2020 6466 5b63 6f6c 4e61          df[colNa
+00005b10: 6d65 735d 203d 2074 656d 700d 0a20 2020  mes] = temp..   
+00005b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b30: 200d 0a20 2020 2020 2020 2020 2020 2020   ..             
+00005b40: 2020 2020 2020 2069 6620 6c65 6e28 7661         if len(va
+00005b50: 6c75 6573 2920 3e20 313a 0d0a 2020 2020  lues) > 1:..    
+00005b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b70: 2020 2020 6d75 6c74 6949 6e64 6578 203d      multiIndex =
+00005b80: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
+00005b90: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00005ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005bb0: 2020 2020 2020 2020 2020 6d75 6c74 6949            multiI
+00005bc0: 6e64 6578 203d 2046 616c 7365 0d0a 2020  ndex = False..  
+00005bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005be0: 2020 2020 2020 7661 6c44 6963 745b 2256        valDict["V
+00005bf0: 616c 7565 225d 2e61 7070 656e 6428 7661  alue"].append(va
+00005c00: 6c75 6573 5b30 5d29 2020 0d0a 0d0a 2020  lues[0])  ....  
+00005c10: 2020 2020 2020 2020 2020 2020 2023 5468               #Th
+00005c20: 6573 6520 7661 6c75 6520 7479 7065 7320  ese value types 
+00005c30: 7265 7475 726e 2073 696e 676c 6520 7661  return single va
+00005c40: 6c75 650d 0a20 2020 2020 2020 2020 2020  lue..           
+00005c50: 2020 2020 656c 6966 2076 616c 5479 7065      elif valType
+00005c60: 2069 6e20 5b44 5353 796d 626f 6c52 6573   in [DSSymbolRes
+00005c70: 706f 6e73 6556 616c 7565 5479 7065 2e45  ponseValueType.E
+00005c80: 6d70 7479 2c0d 0a20 2020 2020 2020 2020  mpty,..         
+00005c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ca0: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
+00005cb0: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
+00005cc0: 2e42 6f6f 6c2c 0d0a 2020 2020 2020 2020  .Bool,..        
+00005cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ce0: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
+00005cf0: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
+00005d00: 652e 496e 742c 0d0a 2020 2020 2020 2020  e.Int,..        
+00005d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d20: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
+00005d30: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
+00005d40: 652e 4461 7465 5469 6d65 2c0d 0a20 2020  e.DateTime,..   
+00005d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d60: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
+00005d70: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
+00005d80: 7565 5479 7065 2e44 6f75 626c 652c 0d0a  ueType.Double,..
+00005d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005db0: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
+00005dc0: 5661 6c75 6554 7970 652e 5374 7269 6e67  ValueType.String
+00005dd0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00005de0: 2020 2020 2020 2074 656d 7020 3d20 7365         temp = se
+00005df0: 6c66 2e5f 6765 745f 4461 7465 2876 616c  lf._get_Date(val
+00005e00: 7565 7329 2069 6620 6973 696e 7374 616e  ues) if isinstan
+00005e10: 6365 2876 616c 7565 732c 2073 7472 2920  ce(values, str) 
+00005e20: 616e 6420 7661 6c75 6573 2e73 7461 7274  and values.start
+00005e30: 7377 6974 6828 272f 4461 7465 2827 2920  swith('/Date(') 
+00005e40: 656c 7365 2076 616c 7565 7320 0d0a 2020  else values ..  
+00005e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005e60: 2076 616c 4469 6374 5b22 5661 6c75 6522   valDict["Value"
+00005e70: 5d2e 6170 7065 6e64 2874 656d 7029 0d0a  ].append(temp)..
+00005e80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00005e90: 6c69 6620 7661 6c54 7970 6520 3d3d 2044  lif valType == D
+00005ea0: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
+00005eb0: 616c 7565 5479 7065 2e45 7272 6f72 3a0d  alueType.Error:.
+00005ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005ed0: 2020 2020 2020 2345 7272 6f72 2052 6574        #Error Ret
+00005ee0: 7572 6e65 640d 0a20 2020 2020 2020 2020  urned..         
+00005ef0: 2020 2020 2020 2020 2020 2020 7661 6c44              valD
+00005f00: 6963 745b 2256 616c 7565 225d 2e61 7070  ict["Value"].app
+00005f10: 656e 6428 7661 6c75 6573 290d 0a0d 0a20  end(values).... 
+00005f20: 2020 2020 2020 2069 6620 6d75 6c74 6949         if multiI
+00005f30: 6e64 6578 3a0d 0a20 2020 2020 2020 2020  ndex:..         
+00005f40: 2020 2069 6620 6375 7272 656e 6379 3a0d     if currency:.
+00005f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005f60: 2020 6466 2e63 6f6c 756d 6e73 203d 2070    df.columns = p
+00005f70: 642e 4d75 6c74 6949 6e64 6578 2e66 726f  d.MultiIndex.fro
+00005f80: 6d5f 7475 706c 6573 2864 662e 636f 6c75  m_tuples(df.colu
+00005f90: 6d6e 732c 206e 616d 6573 3d5b 2749 6e73  mns, names=['Ins
+00005fa0: 7472 756d 656e 7427 2c27 4669 656c 6427  trument','Field'
+00005fb0: 2c27 4375 7272 656e 6379 275d 290d 0a20  ,'Currency']).. 
+00005fc0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00005fd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005fe0: 2020 2064 662e 636f 6c75 6d6e 7320 3d20     df.columns = 
+00005ff0: 7064 2e4d 756c 7469 496e 6465 782e 6672  pd.MultiIndex.fr
+00006000: 6f6d 5f74 7570 6c65 7328 6466 2e63 6f6c  om_tuples(df.col
+00006010: 756d 6e73 2c20 6e61 6d65 733d 5b27 496e  umns, names=['In
+00006020: 7374 7275 6d65 6e74 272c 2746 6965 6c64  strument','Field
+00006030: 275d 290d 0a20 2020 2020 2020 2020 2020  '])..           
+00006040: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00006050: 2020 6966 206e 6f74 206d 756c 7469 496e    if not multiIn
+00006060: 6465 783a 0d0a 2020 2020 2020 2020 2020  dex:..          
+00006070: 2020 696e 6465 784c 656e 203d 2072 616e    indexLen = ran
+00006080: 6765 286c 656e 2876 616c 4469 6374 5b27  ge(len(valDict['
+00006090: 496e 7374 7275 6d65 6e74 275d 2929 0d0a  Instrument']))..
+000060a0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+000060b0: 616c 4469 6374 5b27 4375 7272 656e 6379  alDict['Currency
+000060c0: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+000060d0: 2020 2020 206e 6577 6466 203d 2070 642e       newdf = pd.
+000060e0: 4461 7461 4672 616d 6528 6461 7461 3d76  DataFrame(data=v
+000060f0: 616c 4469 6374 2c63 6f6c 756d 6e73 3d5b  alDict,columns=[
+00006100: 2249 6e73 7472 756d 656e 7422 2c20 2244  "Instrument", "D
+00006110: 6174 6174 7970 6522 2c20 2256 616c 7565  atatype", "Value
+00006120: 222c 2022 4375 7272 656e 6379 225d 2c0d  ", "Currency"],.
+00006130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006150: 2020 696e 6465 783d 696e 6465 784c 656e    index=indexLen
+00006160: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00006170: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00006180: 2020 2020 2020 6e65 7764 6620 3d20 7064        newdf = pd
+00006190: 2e44 6174 6146 7261 6d65 2864 6174 613d  .DataFrame(data=
+000061a0: 7661 6c44 6963 742c 636f 6c75 6d6e 733d  valDict,columns=
+000061b0: 5b22 496e 7374 7275 6d65 6e74 222c 2022  ["Instrument", "
+000061c0: 4461 7461 7479 7065 222c 2022 5661 6c75  Datatype", "Valu
+000061d0: 6522 5d2c 0d0a 2020 2020 2020 2020 2020  e"],..          
+000061e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000061f0: 2020 2020 2020 2069 6e64 6578 3d69 6e64         index=ind
+00006200: 6578 4c65 6e29 0d0a 2020 2020 2020 2020  exLen)..        
+00006210: 2020 2020 7265 7475 726e 206e 6577 6466      return newdf
+00006220: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00006230: 2064 6620 0d0a 2020 2020 2020 2020 2020   df ..          
+00006240: 2020 0d0a 2020 2020 6465 6620 5f66 6f72    ..    def _for
+00006250: 6d61 745f 5265 7370 6f6e 7365 2873 656c  mat_Response(sel
+00006260: 662c 2072 6573 706f 6e73 655f 6a73 6f6e  f, response_json
+00006270: 293a 0d0a 2020 2020 2020 2020 2320 4966  ):..        # If
+00006280: 2064 6174 6573 2069 7320 6e6f 7420 6176   dates is not av
+00006290: 6169 6c61 626c 652c 2074 6865 2072 6571  ailable, the req
+000062a0: 7565 7374 2069 7320 6e6f 7420 636f 6e73  uest is not cons
+000062b0: 7472 7563 7465 6420 636f 7272 6563 746c  tructed correctl
+000062c0: 790d 0a20 2020 2020 2020 2072 6573 706f  y..        respo
+000062d0: 6e73 655f 6a73 6f6e 203d 2064 6963 7428  nse_json = dict(
+000062e0: 7265 7370 6f6e 7365 5f6a 736f 6e29 0d0a  response_json)..
+000062f0: 2020 2020 2020 2020 6966 2027 4461 7465          if 'Date
+00006300: 7327 2069 6e20 7265 7370 6f6e 7365 5f6a  s' in response_j
+00006310: 736f 6e3a 0d0a 2020 2020 2020 2020 2020  son:..          
+00006320: 2020 6461 7465 735f 636f 6e76 6572 7465    dates_converte
+00006330: 6420 3d20 5b5d 0d0a 2020 2020 2020 2020  d = []..        
+00006340: 2020 2020 6966 2072 6573 706f 6e73 655f      if response_
+00006350: 6a73 6f6e 5b27 4461 7465 7327 5d20 213d  json['Dates'] !=
+00006360: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00006370: 2020 2020 2020 2020 6461 7465 7320 3d20          dates = 
+00006380: 7265 7370 6f6e 7365 5f6a 736f 6e5b 2744  response_json['D
+00006390: 6174 6573 275d 0d0a 2020 2020 2020 2020  ates']..        
+000063a0: 2020 2020 2020 2020 666f 7220 6420 696e          for d in
+000063b0: 2064 6174 6573 3a0d 0a20 2020 2020 2020   dates:..       
+000063c0: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+000063d0: 6573 5f63 6f6e 7665 7274 6564 2e61 7070  es_converted.app
+000063e0: 656e 6428 7365 6c66 2e5f 6765 745f 4461  end(self._get_Da
+000063f0: 7465 2864 2929 0d0a 2020 2020 2020 2020  te(d))..        
+00006400: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00006410: 2020 2072 6574 7572 6e20 2745 7272 6f72     return 'Error
+00006420: 202d 2070 6c65 6173 6520 6368 6563 6b20   - please check 
+00006430: 696e 7374 7275 6d65 6e74 7320 616e 6420  instruments and 
+00006440: 7061 7261 6d65 7465 7273 2028 7469 6d65  parameters (time
+00006450: 2073 6572 6965 7320 6f72 2073 7461 7469   series or stati
+00006460: 6329 270d 0a20 2020 2020 2020 200d 0a20  c)'..        .. 
+00006470: 2020 2020 2020 2023 204c 6f6f 7020 7468         # Loop th
+00006480: 726f 7567 6820 7468 6520 7661 6c75 6573  rough the values
+00006490: 2069 6e20 7468 6520 7265 7370 6f6e 7365   in the response
+000064a0: 0d0a 2020 2020 2020 2020 6461 7461 6672  ..        datafr
+000064b0: 616d 6520 3d20 7365 6c66 2e5f 6765 745f  ame = self._get_
+000064c0: 4461 7461 7479 7065 5661 6c75 6573 2872  DatatypeValues(r
+000064d0: 6573 706f 6e73 655f 6a73 6f6e 290d 0a20  esponse_json).. 
+000064e0: 2020 2020 2020 2069 6620 286c 656e 2864         if (len(d
+000064f0: 6174 6573 5f63 6f6e 7665 7274 6564 2920  ates_converted) 
+00006500: 3d3d 206c 656e 2864 6174 6166 7261 6d65  == len(dataframe
+00006510: 2e69 6e64 6578 2929 3a0d 0a20 2020 2020  .index)):..     
+00006520: 2020 2020 2020 2069 6620 286c 656e 2864         if (len(d
+00006530: 6174 6573 5f63 6f6e 7665 7274 6564 2920  ates_converted) 
+00006540: 3e20 3129 3a0d 0a20 2020 2020 2020 2020  > 1):..         
+00006550: 2020 2020 2020 2023 6461 7461 6672 616d         #datafram
+00006560: 652e 696e 7365 7274 286c 6f63 203d 2030  e.insert(loc = 0
+00006570: 2c20 636f 6c75 6d6e 203d 2027 4461 7465  , column = 'Date
+00006580: 7327 2c20 7661 6c75 6520 3d20 6461 7465  s', value = date
+00006590: 735f 636f 6e76 6572 7465 6429 0d0a 2020  s_converted)..  
+000065a0: 2020 2020 2020 2020 2020 2020 2020 6461                da
+000065b0: 7461 6672 616d 652e 696e 6465 7820 3d20  taframe.index = 
+000065c0: 6461 7465 735f 636f 6e76 6572 7465 640d  dates_converted.
+000065d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000065e0: 2064 6174 6166 7261 6d65 2e69 6e64 6578   dataframe.index
+000065f0: 2e6e 616d 6520 3d20 2744 6174 6573 270d  .name = 'Dates'.
+00006600: 0a20 2020 2020 2020 2065 6c69 6620 286c  .        elif (l
+00006610: 656e 2864 6174 6573 5f63 6f6e 7665 7274  en(dates_convert
+00006620: 6564 2920 3d3d 2031 293a 0d0a 2020 2020  ed) == 1):..    
+00006630: 2020 2020 2020 2020 6461 7461 6672 616d          datafram
+00006640: 655b 2744 6174 6573 275d 203d 2064 6174  e['Dates'] = dat
+00006650: 6573 5f63 6f6e 7665 7274 6564 5b30 5d0d  es_converted[0].
+00006660: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
+00006670: 2020 2072 6574 7572 6e20 6461 7461 6672     return datafr
+00006680: 616d 650d 0a0d 0a20 2020 2064 6566 205f  ame....    def _
+00006690: 666f 726d 6174 5f62 756e 646c 655f 7265  format_bundle_re
+000066a0: 7370 6f6e 7365 2873 656c 662c 7265 7370  sponse(self,resp
+000066b0: 6f6e 7365 5f6a 736f 6e29 3a0d 0a20 2020  onse_json):..   
+000066c0: 2020 2020 2066 6f72 6d61 7474 6564 5265       formattedRe
+000066d0: 7370 203d 205b 5d0d 0a20 2020 2020 2020  sp = []..       
+000066e0: 2066 6f72 2065 6163 6844 6174 6152 6573   for eachDataRes
+000066f0: 706f 6e73 6520 696e 2072 6573 706f 6e73  ponse in respons
+00006700: 655f 6a73 6f6e 5b27 4461 7461 5265 7370  e_json['DataResp
+00006710: 6f6e 7365 7327 5d3a 0d0a 2020 2020 2020  onses']:..      
+00006720: 2020 2020 2020 6466 203d 2073 656c 662e        df = self.
+00006730: 5f66 6f72 6d61 745f 5265 7370 6f6e 7365  _format_Response
+00006740: 2865 6163 6844 6174 6152 6573 706f 6e73  (eachDataRespons
+00006750: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00006760: 666f 726d 6174 7465 6452 6573 702e 6170  formattedResp.ap
+00006770: 7065 6e64 2864 6629 2020 2020 2020 0d0a  pend(df)      ..
+00006780: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
+00006790: 2020 2020 2072 6574 7572 6e20 666f 726d       return form
+000067a0: 6174 7465 6452 6573 700d 0a20 2020 0d0a  attedResp..   ..
+000067b0: 2020 2020 2020 200d 0a20 2020 2064 6566         ..    def
+000067c0: 205f 6765 745f 6d65 7461 6461 7461 2873   _get_metadata(s
+000067d0: 656c 662c 206a 736f 6e52 6573 7029 3a0d  elf, jsonResp):.
+000067e0: 0a20 2020 2020 2020 206e 616d 6573 203d  .        names =
+000067f0: 207b 7d0d 0a20 2020 2020 2020 2069 6620   {}..        if 
+00006800: 6a73 6f6e 5265 7370 5b27 5379 6d62 6f6c  jsonResp['Symbol
+00006810: 4e61 6d65 7327 5d3a 0d0a 2020 2020 2020  Names']:..      
+00006820: 2020 2020 2020 666f 7220 6920 696e 206a        for i in j
+00006830: 736f 6e52 6573 705b 2753 796d 626f 6c4e  sonResp['SymbolN
+00006840: 616d 6573 275d 3a0d 0a20 2020 2020 2020  ames']:..       
+00006850: 2020 2020 2020 2020 206e 616d 6573 2e75           names.u
+00006860: 7064 6174 6528 7b69 5b27 4b65 7927 5d3a  pdate({i['Key']:
+00006870: 2069 5b27 5661 6c75 6527 5d7d 290d 0a20   i['Value']}).. 
+00006880: 2020 2020 2020 2020 2020 2020 2020 200d                 .
+00006890: 0a20 2020 2020 2020 2069 6620 6a73 6f6e  .        if json
+000068a0: 5265 7370 5b27 4461 7461 5479 7065 4e61  Resp['DataTypeNa
+000068b0: 6d65 7327 5d3a 0d0a 2020 2020 2020 2020  mes']:..        
+000068c0: 2020 2020 666f 7220 6920 696e 206a 736f      for i in jso
+000068d0: 6e52 6573 705b 2744 6174 6154 7970 654e  nResp['DataTypeN
+000068e0: 616d 6573 275d 3a0d 0a20 2020 2020 2020  ames']:..       
+000068f0: 2020 2020 2020 2020 206e 616d 6573 2e75           names.u
+00006900: 7064 6174 6528 7b69 5b27 4b65 7927 5d3a  pdate({i['Key']:
+00006910: 2069 5b27 5661 6c75 6527 5d7d 290d 0a20   i['Value']}).. 
+00006920: 2020 2020 2020 200d 0a0d 0a20 2020 2064         ....    d
+00006930: 6566 205f 6765 745f 6d65 7461 6461 7461  ef _get_metadata
+00006940: 5f62 756e 646c 6528 7365 6c66 2c20 6a73  _bundle(self, js
+00006950: 6f6e 5265 7370 293a 0d0a 2020 2020 2020  onResp):..      
+00006960: 2020 666f 7220 6561 6368 4461 7461 5265    for eachDataRe
+00006970: 7370 6f6e 7365 2069 6e20 6a73 6f6e 5265  sponse in jsonRe
+00006980: 7370 3a0d 0a20 2020 2020 2020 2020 2020  sp:..           
+00006990: 2073 656c 662e 5f67 6574 5f6d 6574 6164   self._get_metad
+000069a0: 6174 6128 6561 6368 4461 7461 5265 7370  ata(eachDataResp
+000069b0: 6f6e 7365 290d 0a23 2d2d 2d2d 2d2d 2d2d  onse)..#--------
+000069c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000069d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000069e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000069f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006a00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d  -------------...
+00006a10: 0a                                       .
```

## DatastreamPy/__init__.py

```diff
@@ -1,4 +1,19 @@
-from .DS_Response import Datastream
+from datetime import datetime, timedelta, date
+
+#DatastreamUCS
+from .DS_Response import DataClient
+
+# User Created Items base objects
+from .DSUserDataObjectBase import DSUserObjectFault, DSUserObjectLogLevel, DSUserObjectTypes, DSUserObjectResponseStatus, DSUserObjectFrequency
+from .DSUserDataObjectBase import DSUserObjectShareTypes, DSUserObjectAccessRights, DSUserObjectGetAllResponse, DSUserObjectResponse, DSUserObjectLogFuncs
+
+# User Created Timeseries specific
+from .DatastreamUserCreated_TimeSeries import TimeseriesClient, DSTimeSeriesFrequencyConversion, DSTimeSeriesDateAlignment, DSTimeSeriesCarryIndicator
+from .DatastreamUserCreated_TimeSeries import DSTimeSeriesDataInput, DSTimeSeriesDateRange, DSTimeSeriesDateInfo, DSTimeSeriesRequestObject, DSTimeSeriesDateRangeResponse, DSTimeSeriesResponseObject
+
+#Economic Filters
+from .DatastreamEconomicFilters import EconomicFilters, DSEconomicsFilter, DSFilterUpdateActions
+from .DatastreamEconomicFilters import DSFilterResponseStatus, DSFilterGetAllAction
```

