# Comparing `tmp/autots-0.6.8.tar.gz` & `tmp/autots-0.6.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "autots-0.6.8.tar", last modified: Thu Jan 18 15:09:44 2024, max compression
+gzip compressed data, was "autots-0.6.9.tar", last modified: Mon Jan 22 13:41:31 2024, max compression
```

## Comparing `autots-0.6.8.tar` & `autots-0.6.9.tar`

### file list

```diff
@@ -1,92 +1,92 @@
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.874011 autots-0.6.8/
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.872590 autots-0.6.8/AutoTS.egg-info/
--rw-rw-rw-   0        0        0     9962 2024-01-18 15:09:44.000000 autots-0.6.8/AutoTS.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0     2223 2024-01-18 15:09:44.000000 autots-0.6.8/AutoTS.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2024-01-18 15:09:44.000000 autots-0.6.8/AutoTS.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0      237 2024-01-18 15:09:44.000000 autots-0.6.8/AutoTS.egg-info/requires.txt
--rw-rw-rw-   0        0        0       51 2024-01-18 15:09:44.000000 autots-0.6.8/AutoTS.egg-info/top_level.txt
--rw-rw-rw-   0        0        0     1090 2022-11-23 22:39:41.000000 autots-0.6.8/LICENSE
--rw-rw-rw-   0        0        0       61 2023-04-03 03:08:26.000000 autots-0.6.8/MANIFEST.in
--rw-rw-rw-   0        0        0     9962 2024-01-18 15:09:44.874011 autots-0.6.8/PKG-INFO
--rw-rw-rw-   0        0        0     8406 2023-12-21 17:24:56.000000 autots-0.6.8/README.md
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.563066 autots-0.6.8/autots/
--rw-rw-rw-   0        0        0     1425 2024-01-16 16:18:20.000000 autots-0.6.8/autots/__init__.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.579130 autots-0.6.8/autots/datasets/
--rw-rw-rw-   0        0        0      535 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/__init__.py
--rw-rw-rw-   0        0        0    34739 2024-01-03 05:21:17.000000 autots-0.6.8/autots/datasets/_base.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.595838 autots-0.6.8/autots/datasets/data/
--rw-rw-rw-   0        0        0     4527 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/data/covid_daily.zip
--rw-rw-rw-   0        0        0    81380 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/data/eia_weekly.zip
--rw-rw-rw-   0        0        0    27440 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/data/fred_monthly.zip
--rw-rw-rw-   0        0        0     5553 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/data/fred_yearly.zip
--rw-rw-rw-   0        0        0   149549 2023-07-19 04:50:46.000000 autots-0.6.8/autots/datasets/data/holidays.zip
--rw-rw-rw-   0        0        0   158529 2022-11-23 22:39:41.000000 autots-0.6.8/autots/datasets/data/traffic_hourly.zip
--rw-rw-rw-   0        0        0     3377 2023-04-10 03:29:38.000000 autots-0.6.8/autots/datasets/fred.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.626372 autots-0.6.8/autots/evaluator/
--rw-rw-rw-   0        0        0       28 2022-11-23 22:39:41.000000 autots-0.6.8/autots/evaluator/__init__.py
--rw-rw-rw-   0        0        0    17508 2024-01-03 05:21:16.000000 autots-0.6.8/autots/evaluator/anomaly_detector.py
--rw-rw-rw-   0        0        0   123587 2024-01-18 05:37:06.000000 autots-0.6.8/autots/evaluator/auto_model.py
--rw-rw-rw-   0        0        0   193185 2024-01-18 05:37:06.000000 autots-0.6.8/autots/evaluator/auto_ts.py
--rw-rw-rw-   0        0        0    24446 2022-11-23 22:39:41.000000 autots-0.6.8/autots/evaluator/benchmark.py
--rw-rw-rw-   0        0        0    33046 2023-11-15 16:53:37.000000 autots-0.6.8/autots/evaluator/event_forecasting.py
--rw-rw-rw-   0        0        0    29181 2023-12-22 17:06:05.000000 autots-0.6.8/autots/evaluator/metrics.py
--rw-rw-rw-   0        0        0     6605 2023-08-30 08:41:02.000000 autots-0.6.8/autots/evaluator/validation.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.730096 autots-0.6.8/autots/models/
--rw-rw-rw-   0        0        0       24 2022-11-23 22:39:41.000000 autots-0.6.8/autots/models/__init__.py
--rw-rw-rw-   0        0        0    14112 2023-01-16 02:41:20.000000 autots-0.6.8/autots/models/arch.py
--rw-rw-rw-   0        0        0    35658 2024-01-11 14:53:25.000000 autots-0.6.8/autots/models/base.py
--rw-rw-rw-   0        0        0   125080 2023-12-19 04:29:33.000000 autots-0.6.8/autots/models/basics.py
--rw-rw-rw-   0        0        0   128789 2023-12-22 22:04:08.000000 autots-0.6.8/autots/models/cassandra.py
--rw-rw-rw-   0        0        0    16519 2023-08-30 08:41:02.000000 autots-0.6.8/autots/models/dnn.py
--rw-rw-rw-   0        0        0    72395 2023-12-19 04:29:33.000000 autots-0.6.8/autots/models/ensemble.py
--rw-rw-rw-   0        0        0    31088 2023-12-11 18:27:47.000000 autots-0.6.8/autots/models/gluonts.py
--rw-rw-rw-   0        0        0    10745 2023-04-10 03:29:38.000000 autots-0.6.8/autots/models/greykite.py
--rw-rw-rw-   0        0        0    33937 2024-01-06 00:00:54.000000 autots-0.6.8/autots/models/matrix_var.py
--rw-rw-rw-   0        0        0    19900 2023-04-10 03:29:38.000000 autots-0.6.8/autots/models/mlensemble.py
--rw-rw-rw-   0        0        0    10117 2024-01-18 02:28:02.000000 autots-0.6.8/autots/models/model_list.py
--rw-rw-rw-   0        0        0    15941 2023-12-20 18:39:55.000000 autots-0.6.8/autots/models/neural_forecast.py
--rw-rw-rw-   0        0        0    33915 2023-09-16 08:50:45.000000 autots-0.6.8/autots/models/prophet.py
--rw-rw-rw-   0        0        0    22283 2023-12-11 18:27:54.000000 autots-0.6.8/autots/models/pytorch.py
--rw-rw-rw-   0        0        0   161789 2024-01-18 05:37:06.000000 autots-0.6.8/autots/models/sklearn.py
--rw-rw-rw-   0        0        0    93964 2024-01-11 14:53:20.000000 autots-0.6.8/autots/models/statsmodels.py
--rw-rw-rw-   0        0        0    21794 2022-11-23 22:39:41.000000 autots-0.6.8/autots/models/tfp.py
--rw-rw-rw-   0        0        0    41636 2023-11-28 14:08:06.000000 autots-0.6.8/autots/models/tide.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.737209 autots-0.6.8/autots/templates/
--rw-rw-rw-   0        0        0       27 2022-11-23 22:39:41.000000 autots-0.6.8/autots/templates/__init__.py
--rw-rw-rw-   0        0        0    49661 2023-12-19 04:29:31.000000 autots-0.6.8/autots/templates/general.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.801783 autots-0.6.8/autots/tools/
--rw-rw-rw-   0        0        0       96 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/__init__.py
--rw-rw-rw-   0        0        0    46835 2023-12-01 19:22:48.000000 autots-0.6.8/autots/tools/anomaly_utils.py
--rw-rw-rw-   0        0        0     9168 2023-04-08 14:59:14.000000 autots-0.6.8/autots/tools/calendar.py
--rw-rw-rw-   0        0        0     7163 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/cointegration.py
--rw-rw-rw-   0        0        0     2560 2023-11-15 04:05:07.000000 autots-0.6.8/autots/tools/cpu_count.py
--rw-rw-rw-   0        0        0    56854 2024-01-18 05:37:05.000000 autots-0.6.8/autots/tools/fast_kalman.py
--rw-rw-rw-   0        0        0     7382 2023-11-03 14:35:29.000000 autots-0.6.8/autots/tools/fft.py
--rw-rw-rw-   0        0        0     5872 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/hierarchial.py
--rw-rw-rw-   0        0        0     5983 2023-05-23 03:16:38.000000 autots-0.6.8/autots/tools/holiday.py
--rw-rw-rw-   0        0        0    17133 2023-11-19 16:00:14.000000 autots-0.6.8/autots/tools/impute.py
--rw-rw-rw-   0        0        0     5188 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/lunar.py
--rw-rw-rw-   0        0        0     4362 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/percentile.py
--rw-rw-rw-   0        0        0     7747 2023-12-19 04:29:31.000000 autots-0.6.8/autots/tools/probabilistic.py
--rw-rw-rw-   0        0        0     1001 2022-11-23 22:39:41.000000 autots-0.6.8/autots/tools/profile.py
--rw-rw-rw-   0        0        0    15867 2023-12-11 02:19:58.000000 autots-0.6.8/autots/tools/regressor.py
--rw-rw-rw-   0        0        0    25196 2023-12-20 18:39:55.000000 autots-0.6.8/autots/tools/seasonal.py
--rw-rw-rw-   0        0        0    20211 2023-12-11 18:43:11.000000 autots-0.6.8/autots/tools/shaping.py
--rw-rw-rw-   0        0        0    19147 2023-04-08 14:59:28.000000 autots-0.6.8/autots/tools/thresholding.py
--rw-rw-rw-   0        0        0   203044 2024-01-18 14:18:28.000000 autots-0.6.8/autots/tools/transform.py
--rw-rw-rw-   0        0        0    23442 2023-11-28 14:08:06.000000 autots-0.6.8/autots/tools/window_functions.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.816387 autots-0.6.8/docs/
--rw-rw-rw-   0        0        0     2748 2024-01-16 16:18:26.000000 autots-0.6.8/docs/conf.py
--rw-rw-rw-   0        0        0     1194 2024-01-16 16:18:36.000000 autots-0.6.8/pyproject.toml
--rw-rw-rw-   0        0        0       42 2024-01-18 15:09:44.874011 autots-0.6.8/setup.cfg
--rw-rw-rw-   0        0        0     1273 2024-01-16 16:18:30.000000 autots-0.6.8/setup.py
-drwxrwxrwx   0        0        0        0 2024-01-18 15:09:44.864917 autots-0.6.8/tests/
--rw-rw-rw-   0        0        0     4896 2024-01-18 01:15:28.000000 autots-0.6.8/tests/test_anomalies.py
--rw-rw-rw-   0        0        0    42194 2024-01-18 01:19:51.000000 autots-0.6.8/tests/test_autots.py
--rw-rw-rw-   0        0        0     6882 2023-05-17 21:08:23.000000 autots-0.6.8/tests/test_calendar_holiday.py
--rw-rw-rw-   0        0        0    14153 2023-12-22 21:44:18.000000 autots-0.6.8/tests/test_cassandra.py
--rw-rw-rw-   0        0        0     3685 2024-01-17 14:57:04.000000 autots-0.6.8/tests/test_event_forecasting.py
--rw-rw-rw-   0        0        0     1512 2022-11-23 22:39:41.000000 autots-0.6.8/tests/test_impute.py
--rw-rw-rw-   0        0        0     5562 2023-12-29 02:27:26.000000 autots-0.6.8/tests/test_metrics.py
--rw-rw-rw-   0        0        0     1514 2022-11-23 22:39:41.000000 autots-0.6.8/tests/test_percentile.py
--rw-rw-rw-   0        0        0     1836 2022-11-23 22:39:41.000000 autots-0.6.8/tests/test_regressor.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.546548 autots-0.6.9/
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.530953 autots-0.6.9/AutoTS.egg-info/
+-rw-rw-rw-   0        0        0     9962 2024-01-22 13:41:31.000000 autots-0.6.9/AutoTS.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     2223 2024-01-22 13:41:31.000000 autots-0.6.9/AutoTS.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2024-01-22 13:41:31.000000 autots-0.6.9/AutoTS.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0      237 2024-01-22 13:41:31.000000 autots-0.6.9/AutoTS.egg-info/requires.txt
+-rw-rw-rw-   0        0        0       51 2024-01-22 13:41:31.000000 autots-0.6.9/AutoTS.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0     1090 2024-01-18 15:13:37.000000 autots-0.6.9/LICENSE
+-rw-rw-rw-   0        0        0       61 2023-04-03 03:08:26.000000 autots-0.6.9/MANIFEST.in
+-rw-rw-rw-   0        0        0     9962 2024-01-22 13:41:31.546548 autots-0.6.9/PKG-INFO
+-rw-rw-rw-   0        0        0     8406 2023-12-21 17:24:56.000000 autots-0.6.9/README.md
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.074893 autots-0.6.9/autots/
+-rw-rw-rw-   0        0        0     1425 2024-01-22 05:47:12.000000 autots-0.6.9/autots/__init__.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.097085 autots-0.6.9/autots/datasets/
+-rw-rw-rw-   0        0        0      535 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/__init__.py
+-rw-rw-rw-   0        0        0    34739 2024-01-03 05:21:17.000000 autots-0.6.9/autots/datasets/_base.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.138419 autots-0.6.9/autots/datasets/data/
+-rw-rw-rw-   0        0        0     4527 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/data/covid_daily.zip
+-rw-rw-rw-   0        0        0    81380 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/data/eia_weekly.zip
+-rw-rw-rw-   0        0        0    27440 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/data/fred_monthly.zip
+-rw-rw-rw-   0        0        0     5553 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/data/fred_yearly.zip
+-rw-rw-rw-   0        0        0   149549 2023-07-19 04:50:46.000000 autots-0.6.9/autots/datasets/data/holidays.zip
+-rw-rw-rw-   0        0        0   158529 2022-11-23 22:39:41.000000 autots-0.6.9/autots/datasets/data/traffic_hourly.zip
+-rw-rw-rw-   0        0        0     3377 2023-04-10 03:29:38.000000 autots-0.6.9/autots/datasets/fred.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.185987 autots-0.6.9/autots/evaluator/
+-rw-rw-rw-   0        0        0       28 2022-11-23 22:39:41.000000 autots-0.6.9/autots/evaluator/__init__.py
+-rw-rw-rw-   0        0        0    17627 2024-01-22 05:41:16.000000 autots-0.6.9/autots/evaluator/anomaly_detector.py
+-rw-rw-rw-   0        0        0   120411 2024-01-21 17:34:36.000000 autots-0.6.9/autots/evaluator/auto_model.py
+-rw-rw-rw-   0        0        0   193626 2024-01-22 05:42:11.000000 autots-0.6.9/autots/evaluator/auto_ts.py
+-rw-rw-rw-   0        0        0    24446 2022-11-23 22:39:41.000000 autots-0.6.9/autots/evaluator/benchmark.py
+-rw-rw-rw-   0        0        0    33046 2023-11-15 16:53:37.000000 autots-0.6.9/autots/evaluator/event_forecasting.py
+-rw-rw-rw-   0        0        0    29251 2024-01-20 02:49:56.000000 autots-0.6.9/autots/evaluator/metrics.py
+-rw-rw-rw-   0        0        0     6605 2023-08-30 08:41:02.000000 autots-0.6.9/autots/evaluator/validation.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.311640 autots-0.6.9/autots/models/
+-rw-rw-rw-   0        0        0       24 2022-11-23 22:39:41.000000 autots-0.6.9/autots/models/__init__.py
+-rw-rw-rw-   0        0        0    14112 2023-01-16 02:41:20.000000 autots-0.6.9/autots/models/arch.py
+-rw-rw-rw-   0        0        0    35658 2024-01-11 14:53:25.000000 autots-0.6.9/autots/models/base.py
+-rw-rw-rw-   0        0        0   125080 2023-12-19 04:29:33.000000 autots-0.6.9/autots/models/basics.py
+-rw-rw-rw-   0        0        0   128787 2024-01-20 02:41:10.000000 autots-0.6.9/autots/models/cassandra.py
+-rw-rw-rw-   0        0        0    16519 2023-08-30 08:41:02.000000 autots-0.6.9/autots/models/dnn.py
+-rw-rw-rw-   0        0        0    72892 2024-01-22 05:42:11.000000 autots-0.6.9/autots/models/ensemble.py
+-rw-rw-rw-   0        0        0    31088 2023-12-11 18:27:47.000000 autots-0.6.9/autots/models/gluonts.py
+-rw-rw-rw-   0        0        0    10745 2023-04-10 03:29:38.000000 autots-0.6.9/autots/models/greykite.py
+-rw-rw-rw-   0        0        0    33937 2024-01-06 00:00:54.000000 autots-0.6.9/autots/models/matrix_var.py
+-rw-rw-rw-   0        0        0    19900 2023-04-10 03:29:38.000000 autots-0.6.9/autots/models/mlensemble.py
+-rw-rw-rw-   0        0        0    10117 2024-01-18 02:28:02.000000 autots-0.6.9/autots/models/model_list.py
+-rw-rw-rw-   0        0        0    16607 2024-01-22 05:42:10.000000 autots-0.6.9/autots/models/neural_forecast.py
+-rw-rw-rw-   0        0        0    33915 2023-09-16 08:50:45.000000 autots-0.6.9/autots/models/prophet.py
+-rw-rw-rw-   0        0        0    22283 2023-12-11 18:27:54.000000 autots-0.6.9/autots/models/pytorch.py
+-rw-rw-rw-   0        0        0   165327 2024-01-22 05:42:12.000000 autots-0.6.9/autots/models/sklearn.py
+-rw-rw-rw-   0        0        0    93964 2024-01-11 14:53:20.000000 autots-0.6.9/autots/models/statsmodels.py
+-rw-rw-rw-   0        0        0    21794 2022-11-23 22:39:41.000000 autots-0.6.9/autots/models/tfp.py
+-rw-rw-rw-   0        0        0    41636 2023-11-28 14:08:06.000000 autots-0.6.9/autots/models/tide.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.327707 autots-0.6.9/autots/templates/
+-rw-rw-rw-   0        0        0       27 2022-11-23 22:39:41.000000 autots-0.6.9/autots/templates/__init__.py
+-rw-rw-rw-   0        0        0    49661 2023-12-19 04:29:31.000000 autots-0.6.9/autots/templates/general.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.468340 autots-0.6.9/autots/tools/
+-rw-rw-rw-   0        0        0       96 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/__init__.py
+-rw-rw-rw-   0        0        0    46835 2023-12-01 19:22:48.000000 autots-0.6.9/autots/tools/anomaly_utils.py
+-rw-rw-rw-   0        0        0     9168 2023-04-08 14:59:14.000000 autots-0.6.9/autots/tools/calendar.py
+-rw-rw-rw-   0        0        0     7163 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/cointegration.py
+-rw-rw-rw-   0        0        0     2560 2023-11-15 04:05:07.000000 autots-0.6.9/autots/tools/cpu_count.py
+-rw-rw-rw-   0        0        0    56854 2024-01-18 05:37:05.000000 autots-0.6.9/autots/tools/fast_kalman.py
+-rw-rw-rw-   0        0        0     7382 2023-11-03 14:35:29.000000 autots-0.6.9/autots/tools/fft.py
+-rw-rw-rw-   0        0        0     5872 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/hierarchial.py
+-rw-rw-rw-   0        0        0     5983 2023-05-23 03:16:38.000000 autots-0.6.9/autots/tools/holiday.py
+-rw-rw-rw-   0        0        0    17133 2023-11-19 16:00:14.000000 autots-0.6.9/autots/tools/impute.py
+-rw-rw-rw-   0        0        0     5188 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/lunar.py
+-rw-rw-rw-   0        0        0     4362 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/percentile.py
+-rw-rw-rw-   0        0        0     7747 2023-12-19 04:29:31.000000 autots-0.6.9/autots/tools/probabilistic.py
+-rw-rw-rw-   0        0        0     1001 2022-11-23 22:39:41.000000 autots-0.6.9/autots/tools/profile.py
+-rw-rw-rw-   0        0        0    15867 2023-12-11 02:19:58.000000 autots-0.6.9/autots/tools/regressor.py
+-rw-rw-rw-   0        0        0    25196 2023-12-20 18:39:55.000000 autots-0.6.9/autots/tools/seasonal.py
+-rw-rw-rw-   0        0        0    20211 2023-12-11 18:43:11.000000 autots-0.6.9/autots/tools/shaping.py
+-rw-rw-rw-   0        0        0    19147 2023-04-08 14:59:28.000000 autots-0.6.9/autots/tools/thresholding.py
+-rw-rw-rw-   0        0        0   203093 2024-01-18 22:55:42.000000 autots-0.6.9/autots/tools/transform.py
+-rw-rw-rw-   0        0        0    23442 2023-11-28 14:08:06.000000 autots-0.6.9/autots/tools/window_functions.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.484052 autots-0.6.9/docs/
+-rw-rw-rw-   0        0        0     2748 2024-01-22 05:47:18.000000 autots-0.6.9/docs/conf.py
+-rw-rw-rw-   0        0        0     1194 2024-01-22 05:47:27.000000 autots-0.6.9/pyproject.toml
+-rw-rw-rw-   0        0        0       42 2024-01-22 13:41:31.546548 autots-0.6.9/setup.cfg
+-rw-rw-rw-   0        0        0     1273 2024-01-22 05:47:23.000000 autots-0.6.9/setup.py
+drwxrwxrwx   0        0        0        0 2024-01-22 13:41:31.530953 autots-0.6.9/tests/
+-rw-rw-rw-   0        0        0     4896 2024-01-18 01:15:28.000000 autots-0.6.9/tests/test_anomalies.py
+-rw-rw-rw-   0        0        0    42194 2024-01-18 01:19:51.000000 autots-0.6.9/tests/test_autots.py
+-rw-rw-rw-   0        0        0     6882 2023-05-17 21:08:23.000000 autots-0.6.9/tests/test_calendar_holiday.py
+-rw-rw-rw-   0        0        0    14153 2023-12-22 21:44:18.000000 autots-0.6.9/tests/test_cassandra.py
+-rw-rw-rw-   0        0        0     3685 2024-01-17 14:57:04.000000 autots-0.6.9/tests/test_event_forecasting.py
+-rw-rw-rw-   0        0        0     1512 2022-11-23 22:39:41.000000 autots-0.6.9/tests/test_impute.py
+-rw-rw-rw-   0        0        0     5562 2023-12-29 02:27:26.000000 autots-0.6.9/tests/test_metrics.py
+-rw-rw-rw-   0        0        0     1514 2022-11-23 22:39:41.000000 autots-0.6.9/tests/test_percentile.py
+-rw-rw-rw-   0        0        0     1836 2022-11-23 22:39:41.000000 autots-0.6.9/tests/test_regressor.py
```

### Comparing `autots-0.6.8/AutoTS.egg-info/PKG-INFO` & `autots-0.6.9/AutoTS.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: autots
-Version: 0.6.8
+Version: 0.6.9
 Summary: Automated Time Series Forecasting
 Home-page: https://github.com/winedarksea/AutoTS
 Author: Colin Catlin
 Author-email: Colin Catlin <colin.catlin@gmail.com>
 License: MIT License
 Project-URL: Homepage, https://github.com/winedarksea/AutoTS
 Project-URL: Bug Tracker, https://github.com/winedarksea/AutoTS/issues
```

### Comparing `autots-0.6.8/AutoTS.egg-info/SOURCES.txt` & `autots-0.6.9/AutoTS.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/LICENSE` & `autots-0.6.9/LICENSE`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 MIT License
 
-Copyright (c) 2022 Colin Catlin
+Copyright (c) 2024 Colin Catlin
 
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:
```

### Comparing `autots-0.6.8/PKG-INFO` & `autots-0.6.9/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: autots
-Version: 0.6.8
+Version: 0.6.9
 Summary: Automated Time Series Forecasting
 Home-page: https://github.com/winedarksea/AutoTS
 Author: Colin Catlin
 Author-email: Colin Catlin <colin.catlin@gmail.com>
 License: MIT License
 Project-URL: Homepage, https://github.com/winedarksea/AutoTS
 Project-URL: Bug Tracker, https://github.com/winedarksea/AutoTS/issues
```

### Comparing `autots-0.6.8/README.md` & `autots-0.6.9/README.md`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/__init__.py` & `autots-0.6.9/autots/__init__.py`

 * *Files 1% similar despite different names*

```diff
@@ -22,15 +22,15 @@
 from autots.tools.shaping import long_to_wide, infer_frequency
 from autots.tools.regressor import create_lagged_regressor, create_regressor
 from autots.evaluator.auto_model import model_forecast
 from autots.evaluator.anomaly_detector import AnomalyDetector, HolidayDetector
 from autots.models.cassandra import Cassandra
 
 
-__version__ = '0.6.8'
+__version__ = '0.6.9'
 
 TransformTS = GeneralTransformer
 
 __all__ = [
     'load_daily',
     'load_monthly',
     'load_yearly',
```

### Comparing `autots-0.6.8/autots/datasets/__init__.py` & `autots-0.6.9/autots/datasets/__init__.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/_base.py` & `autots-0.6.9/autots/datasets/_base.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/covid_daily.zip` & `autots-0.6.9/autots/datasets/data/covid_daily.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/eia_weekly.zip` & `autots-0.6.9/autots/datasets/data/eia_weekly.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/fred_monthly.zip` & `autots-0.6.9/autots/datasets/data/fred_monthly.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/fred_yearly.zip` & `autots-0.6.9/autots/datasets/data/fred_yearly.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/holidays.zip` & `autots-0.6.9/autots/datasets/data/holidays.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/data/traffic_hourly.zip` & `autots-0.6.9/autots/datasets/data/traffic_hourly.zip`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/datasets/fred.py` & `autots-0.6.9/autots/datasets/fred.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/evaluator/anomaly_detector.py` & `autots-0.6.9/autots/evaluator/anomaly_detector.py`

 * *Files 2% similar despite different names*

```diff
@@ -87,15 +87,16 @@
         """
         self.df = df.copy()
         self.df_anomaly = df.copy()
         if self.transform_dict is not None:
             model = GeneralTransformer(
                 verbose=2, **self.transform_dict
             )  # DATEPART, LOG, SMOOTHING, DIFF, CLIP OUTLIERS with high z score
-            self.df_anomaly = model.fit_transform(self.df_anomaly)
+            # the post selecting by columns is for CenterSplit and any similar renames or expansions
+            self.df_anomaly = model.fit_transform(self.df_anomaly)[self.df.columns]
 
         if self.forecast_params is not None:
             backcast = back_forecast(
                 self.df_anomaly,
                 n_splits=self.method_params.get("n_splits", "auto"),
                 forecast_length=self.method_params.get("forecast_length", 4),
                 frequency="infer",
```

### Comparing `autots-0.6.8/autots/evaluator/auto_model.py` & `autots-0.6.9/autots/evaluator/auto_model.py`

 * *Files 8% similar despite different names*

```diff
@@ -978,14 +978,15 @@
         per_series_oda=None,
         per_series_mqae=None,
         per_series_dwae=None,
         per_series_ewmae=None,
         per_series_uwmse=None,
         per_series_smoothness=None,
         per_series_mate=None,
+        per_series_matse=None,
         per_series_wasserstein=None,
         per_series_dwd=None,
         model_count: int = 0,
     ):
         self.model_results = model_results
         self.model_count = model_count
         self.per_series_metrics = per_series_metrics
@@ -1001,14 +1002,15 @@
         self.per_series_oda = per_series_oda
         self.per_series_mqae = per_series_mqae
         self.per_series_dwae = per_series_dwae
         self.per_series_ewmae = per_series_ewmae
         self.per_series_uwmse = per_series_uwmse
         self.per_series_smoothness = per_series_smoothness
         self.per_series_mate = per_series_mate
+        self.per_series_matse = per_series_matse
         self.per_series_wasserstein = per_series_wasserstein
         self.per_series_dwd = per_series_dwd
         self.full_mae_ids = []
         self.full_mae_errors = []
         self.full_pl_errors = []
         self.squared_errors = []
 
@@ -1079,14 +1081,17 @@
             [self.per_series_smoothness, another_eval.per_series_smoothness],
             axis=0,
             sort=False,
         )
         self.per_series_mate = pd.concat(
             [self.per_series_mate, another_eval.per_series_mate], axis=0, sort=False
         )
+        self.per_series_matse = pd.concat(
+            [self.per_series_matse, another_eval.per_series_matse], axis=0, sort=False
+        )
         self.per_series_wasserstein = pd.concat(
             [self.per_series_wasserstein, another_eval.per_series_wasserstein],
             axis=0,
             sort=False,
         )
         self.per_series_dwd = pd.concat(
             [self.per_series_dwd, another_eval.per_series_dwd],
@@ -1663,65 +1668,14 @@
 
             ps_metric = model_error.per_series_metrics
             ps_metric.index.name = "autots_eval_metric"
             ps_metric = ps_metric.reset_index(drop=False)
             ps_metric.index = [model_id] * ps_metric.shape[0]
             ps_metric.index.name = "ID"
             template_result.per_series_metrics.append(ps_metric)
-
-            """
-            template_result.per_series_mae.append(
-                _ps_metric(ps_metric, 'mae', model_id)
-            )
-            template_result.per_series_made.append(
-                _ps_metric(ps_metric, 'made', model_id)
-            )
-            template_result.per_series_contour.append(
-                _ps_metric(ps_metric, 'contour', model_id)
-            )
-            template_result.per_series_rmse.append(
-                _ps_metric(ps_metric, 'rmse', model_id)
-            )
-            template_result.per_series_spl.append(
-                _ps_metric(ps_metric, 'spl', model_id)
-            )
-            template_result.per_series_mle.append(
-                _ps_metric(ps_metric, 'mle', model_id)
-            )
-            template_result.per_series_imle.append(
-                _ps_metric(ps_metric, 'imle', model_id)
-            )
-            template_result.per_series_maxe.append(
-                _ps_metric(ps_metric, 'maxe', model_id)
-            )
-            template_result.per_series_oda.append(
-                _ps_metric(ps_metric, 'oda', model_id)
-            )
-            template_result.per_series_mqae.append(
-                _ps_metric(ps_metric, 'mqae', model_id)
-            )
-            template_result.per_series_dwae.append(
-                _ps_metric(ps_metric, 'dwae', model_id)
-            )
-            template_result.per_series_ewmae.append(
-                _ps_metric(ps_metric, 'ewmae', model_id)
-            )
-            template_result.per_series_uwmse.append(
-                _ps_metric(ps_metric, 'uwmse', model_id)
-            )
-            template_result.per_series_smoothness.append(
-                _ps_metric(ps_metric, 'smoothness', model_id)
-            )
-            template_result.per_series_mate.append(
-                _ps_metric(ps_metric, 'mate', model_id)
-            )
-            template_result.per_series_wasserstein.append(
-                _ps_metric(ps_metric, 'wasserstein', model_id)
-            )
-            """
             if 'distance' in ensemble:
                 cur_smape = model_error.per_timestamp.loc['weighted_smape']
                 cur_smape = pd.DataFrame(cur_smape).transpose()
                 cur_smape.index = [model_id]
                 template_result.per_timestamp_smape = pd.concat(
                     [template_result.per_timestamp_smape, cur_smape], axis=0
                 )
@@ -1860,70 +1814,23 @@
         )
         template_result.per_series_smoothness = ps[
             ps['autots_eval_metric'] == 'smoothness'
         ].drop(columns='autots_eval_metric')
         template_result.per_series_mate = ps[ps['autots_eval_metric'] == 'mate'].drop(
             columns='autots_eval_metric'
         )
+        template_result.per_series_matse = ps[ps['autots_eval_metric'] == 'matse'].drop(
+            columns='autots_eval_metric'
+        )
         template_result.per_series_wasserstein = ps[
             ps['autots_eval_metric'] == 'wasserstein'
         ].drop(columns='autots_eval_metric')
         template_result.per_series_dwd = ps[ps['autots_eval_metric'] == 'dwd'].drop(
             columns='autots_eval_metric'
         )
-        """
-        template_result.per_series_mae = pd.concat(
-            template_result.per_series_mae, axis=0
-        )
-        template_result.per_series_made = pd.concat(
-            template_result.per_series_made, axis=0
-        )
-        template_result.per_series_contour = pd.concat(
-            template_result.per_series_contour, axis=0
-        )
-        template_result.per_series_rmse = pd.concat(
-            template_result.per_series_rmse, axis=0
-        )
-        template_result.per_series_spl = pd.concat(
-            template_result.per_series_spl, axis=0
-        )
-        template_result.per_series_mle = pd.concat(
-            template_result.per_series_mle, axis=0
-        )
-        template_result.per_series_imle = pd.concat(
-            template_result.per_series_imle, axis=0
-        )
-        template_result.per_series_maxe = pd.concat(
-            template_result.per_series_maxe, axis=0
-        )
-        template_result.per_series_oda = pd.concat(
-            template_result.per_series_oda, axis=0
-        )
-        template_result.per_series_mqae = pd.concat(
-            template_result.per_series_mqae, axis=0
-        )
-        template_result.per_series_dwae = pd.concat(
-            template_result.per_series_dwae, axis=0
-        )
-        template_result.per_series_ewmae = pd.concat(
-            template_result.per_series_ewmae, axis=0
-        )
-        template_result.per_series_uwmse = pd.concat(
-            template_result.per_series_uwmse, axis=0
-        )
-        template_result.per_series_smoothness = pd.concat(
-            template_result.per_series_smoothness, axis=0
-        )
-        template_result.per_series_mate = pd.concat(
-            template_result.per_series_mate, axis=0
-        )
-        template_result.per_series_wasserstein = pd.concat(
-            template_result.per_series_wasserstein, axis=0
-        )
-        """
     else:
         template_result.per_series_metrics = pd.DataFrame()
         template_result.per_series_mae = pd.DataFrame()
         template_result.per_series_made = pd.DataFrame()
         template_result.per_series_contour = pd.DataFrame()
         template_result.per_series_rmse = pd.DataFrame()
         template_result.per_series_spl = pd.DataFrame()
@@ -1933,14 +1840,15 @@
         template_result.per_series_oda = pd.DataFrame()
         template_result.per_series_mqae = pd.DataFrame()
         template_result.per_series_dwae = pd.DataFrame()
         template_result.per_series_ewmae = pd.DataFrame()
         template_result.per_series_uwmse = pd.DataFrame()
         template_result.per_series_smoothness = pd.DataFrame()
         template_result.per_series_mate = pd.DataFrame()
+        template_result.per_series_matse = pd.DataFrame()
         template_result.per_series_wasserstein = pd.DataFrame()
         template_result.per_series_dwd = pd.DataFrame()
         if verbose > 0 and not template.empty:
             print(f"Generation {current_generation} had all new models fail")
     return template_result
 
 
@@ -2727,14 +2635,15 @@
     oda_weighting = metric_weighting.get('oda_weighting', 0)
     mqae_weighting = metric_weighting.get('mqae_weighting', 0)
     dwae_weighting = metric_weighting.get('dwae_weighting', 0)
     ewmae_weighting = metric_weighting.get('ewmae_weighting', 0)
     uwmse_weighting = metric_weighting.get('uwmse_weighting', 0)
     smoothness_weighting = metric_weighting.get('smoothness_weighting', 0)
     mate_weighting = metric_weighting.get('mate_weighting', 0)
+    matse_weighting = metric_weighting.get('matse_weighting', 0)
     wasserstein_weighting = metric_weighting.get('wasserstein_weighting', 0)
     dwd_weighting = metric_weighting.get('dwd_weighting', 0)
 
     # there are problems when very small ~e-20 type number are in play
     mae_scaler = results_object.per_series_mae[
         results_object.per_series_mae != 0
     ].round(0)
@@ -2819,14 +2728,22 @@
         mate_scaler = (
             results_object.per_series_mate[results_object.per_series_mate != 0]
             .min()
             .fillna(1)
         )
         mate_score = results_object.per_series_mate / mate_scaler
         overall_score = overall_score + (mate_score * mate_weighting)
+    if matse_weighting != 0:
+        matse_scaler = (
+            results_object.per_series_matse[results_object.per_series_matse != 0]
+            .min()
+            .fillna(1)
+        )
+        matse_score = results_object.per_series_matse / matse_scaler
+        overall_score = overall_score + (matse_score * matse_weighting)
     if wasserstein_weighting != 0:
         wasserstein_scaler = (
             results_object.per_series_wasserstein[
                 results_object.per_series_wasserstein != 0
             ]
             .min()
             .fillna(1)
```

### Comparing `autots-0.6.8/autots/evaluator/auto_ts.py` & `autots-0.6.9/autots/evaluator/auto_ts.py`

 * *Files 0% similar despite different names*

```diff
@@ -1389,15 +1389,15 @@
             ]
             validation_template = pd.concat(
                 [validation_template, per_series_val], axis=0
             )
             validation_template = validation_template.drop_duplicates(
                 subset=['Model', 'ModelParameters', 'TransformationParameters']
             )
-        self.validation_template = validation_template[self.template_cols]
+        self.validation_template = validation_template[self.template_cols_id]
         if self.validate_import is not None:
             self.validation_template = pd.concat(
                 [self.validation_template, self.validate_import]
             ).drop_duplicates(
                 subset=['Model', 'ModelParameters', 'TransformationParameters']
             )
 
@@ -1809,40 +1809,47 @@
     def validation_agg(self):
         self.validation_results = copy.copy(self.initial_results)
         self.validation_results = validation_aggregation(
             self.validation_results, df_train=self.df_wide_numeric
         )
         return self
 
-    def _set_best_model(self, metric_weighting=None, allow_horizontal=True):
+    def _set_best_model(self, metric_weighting=None, allow_horizontal=True, n=1):
+        """Sets best model based on validation results.
+
+        Args:
+            metric_weighting (dict): if not None, overrides input metric weighting this this metric weighting
+            allow_horizontal (bool): if False, force no horizontal, if True, allows if ensemble param and runs occurred
+            n (int): default 1 means chose best model, 2 = use 2nd best, and so on
+        """
         if metric_weighting is None:
             metric_weighting = self.metric_weighting
         hens_model_results = self.initial_results.model_results[
             self.initial_results.model_results['Ensemble'] == 2
         ].copy()
         # remove failures
         hens_model_results = hens_model_results[
             hens_model_results['Exceptions'].isnull()
         ]
         requested_H_ens = (self.h_ens_used or self.mosaic_used) and allow_horizontal
         # here I'm assuming that if some horizontal models ran, we are going to use those
         # horizontal ensembles can't be compared directly to others because they don't get run through all validations
         # they are built themselves from cross validation so a full rerun of validations is unnecessary
         self.best_model_non_horizontal = self._best_non_horizontal(
-            metric_weighting=metric_weighting
+            metric_weighting=metric_weighting, n=n
         )
         if not hens_model_results.empty and requested_H_ens:
             hens_model_results.loc['Score'] = generate_score(
                 hens_model_results,
                 metric_weighting=metric_weighting,
                 prediction_interval=self.prediction_interval,
             )
             self.best_model = hens_model_results.sort_values(
                 by="Score", ascending=True, na_position='last'
-            ).head(1)[self.template_cols_id]
+            ).iloc[(n - 1) : n][self.template_cols_id]
             self.ensemble_check = 1
         # print a warning if requested but unable to produce a horz ensemble
         elif requested_H_ens:
             if self.verbose >= 0:
                 print("Horizontal ensemble failed. Using best non-horizontal.")
                 time.sleep(3)  # give it a chance to be seen
             self.best_model = self.best_model_non_horizontal
@@ -1855,15 +1862,15 @@
             self.best_model = self.best_model_non_horizontal
         else:
             self.best_model = self.best_model_non_horizontal
         # give a more convenient dict option
         self.parse_best_model()
         return self
 
-    def _best_non_horizontal(self, metric_weighting=None, series=None):
+    def _best_non_horizontal(self, metric_weighting=None, series=None, n=1):
         if self.validation_results is None:
             if not self.initial_results.model_results.empty:
                 self = self.validation_agg()
             else:
                 raise ValueError(
                     "validation results are None, cannot choose best model without fit"
                 )
@@ -1904,15 +1911,15 @@
             )
             try:
                 best_model = (
                     eligible_models.sort_values(
                         by="Score", ascending=True, na_position='last'
                     )
                     .drop_duplicates(subset=self.template_cols)
-                    .head(1)[self.template_cols_id]
+                    .iloc[(n - 1) : n][self.template_cols_id]
                 )
             except IndexError:
                 raise ValueError(
                     """No models available from validation.
     Try increasing models_to_validate, max_per_model_class
     or otherwise increase models available."""
                 )
```

### Comparing `autots-0.6.8/autots/evaluator/benchmark.py` & `autots-0.6.9/autots/evaluator/benchmark.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/evaluator/event_forecasting.py` & `autots-0.6.9/autots/evaluator/event_forecasting.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/evaluator/metrics.py` & `autots-0.6.9/autots/evaluator/metrics.py`

 * *Files 1% similar despite different names*

```diff
@@ -678,15 +678,17 @@
 
     # mean absolute temporal error, sum of error across time for one series
     if nan_flag:
         mate = np.abs(np.nansum(full_errors, axis=0))
     else:
         mate = np.abs(np.sum(full_errors, axis=0))
     # possibly temporary
-    matse = mate / np.sum(A, axis=0)
+    matse_scale = np.sum(A, axis=0)
+    matse_scale[matse_scale == 0] = 1
+    matse = mate / matse_scale
 
     direc_sign = np.sign(F - last_of_array) == np.sign(A - last_of_array)
     weights = np.geomspace(1, 10, full_mae_errors.shape[0])[:, np.newaxis]
     # calculate 'u' shaped weighting for uwmae
     u_weights = np.ones_like(weights)
     frac_shape = F.shape[0] * 0.1
     first_weight = 5 if frac_shape < 5 else frac_shape
```

### Comparing `autots-0.6.8/autots/evaluator/validation.py` & `autots-0.6.9/autots/evaluator/validation.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/arch.py` & `autots-0.6.9/autots/models/arch.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/base.py` & `autots-0.6.9/autots/models/base.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/basics.py` & `autots-0.6.9/autots/models/basics.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/cassandra.py` & `autots-0.6.9/autots/models/cassandra.py`

 * *Files 1% similar despite different names*

```diff
@@ -3284,4767 +3284,4767 @@
 0000cd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cd40: 2073 656c 662e 636f 6d70 6f6e 656e 7473   self.components
 0000cd50: 5b3a 2c20 636f 6d70 2c20 3a5d 2c0d 0a20  [:, comp, :],.. 
 0000cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000cd70: 2020 2020 2020 2069 6e64 6578 3d74 5f69         index=t_i
 0000cd80: 6e64 782c 0d0a 2020 2020 2020 2020 2020  ndx,..          
 0000cd90: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0000cda0: 6c75 6d6e 733d 7365 6c66 2e63 6f6c 756d  lumns=self.colum
-0000cdb0: 6e5f 6e61 6d65 732c 0d0a 2020 2020 2020  n_names,..      
-0000cdc0: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-0000cdd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000cde0: 2020 2020 2020 636f 6d70 6f6e 656e 7473        components
-0000cdf0: 3d54 7275 652c 0d0a 2020 2020 2020 2020  =True,..        
-0000ce00: 2020 2020 2020 2020 2020 2020 626f 756e              boun
-0000ce10: 6473 3d54 7275 652c 0d0a 2020 2020 2020  ds=True,..      
-0000ce20: 2020 2020 2020 2020 2020 2920 2023 2062            )  # b
-0000ce30: 6f75 6e64 733d 5472 7565 2074 6f20 616c  ounds=True to al
-0000ce40: 6967 6e20 6265 7474 6572 0d0a 2020 2020  ign better..    
-0000ce50: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000ce60: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000ce70: 6f6d 705f 6466 203d 2070 642e 4461 7461  omp_df = pd.Data
-0000ce80: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
-0000ce90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000cea0: 2e63 6f6d 706f 6e65 6e74 735b 3a2c 2063  .components[:, c
-0000ceb0: 6f6d 702c 203a 5d2c 0d0a 2020 2020 2020  omp, :],..      
-0000cec0: 2020 2020 2020 2020 2020 2020 2020 696e                in
-0000ced0: 6465 783d 745f 696e 6478 2c0d 0a20 2020  dex=t_indx,..   
-0000cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cef0: 2063 6f6c 756d 6e73 3d73 656c 662e 636f   columns=self.co
-0000cf00: 6c75 6d6e 5f6e 616d 6573 2c0d 0a20 2020  lumn_names,..   
-0000cf10: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0000cf20: 2020 2020 2020 2020 2020 2020 2320 636f              # co
-0000cf30: 6c75 6d6e 206e 616d 6520 6e65 6564 7320  lumn name needs 
-0000cf40: 746f 2062 6520 756e 6c69 6b65 6c79 2074  to be unlikely t
-0000cf50: 6f20 6f63 6375 7220 696e 2061 6e20 6163  o occur in an ac
-0000cf60: 7475 616c 2064 6174 6173 6574 0d0a 2020  tual dataset..  
-0000cf70: 2020 2020 2020 2020 2020 636f 6d70 5f64            comp_d
-0000cf80: 665b 2763 736d 6f64 5f63 6f6d 706f 6e65  f['csmod_compone
-0000cf90: 6e74 275d 203d 2063 6f6c 5f67 726f 7570  nt'] = col_group
-0000cfa0: 5b73 656c 662e 636f 6d70 6f6e 656e 745f  [self.component_
-0000cfb0: 696e 6478 5b63 6f6d 705d 5d0d 0a20 2020  indx[comp]]..   
-0000cfc0: 2020 2020 2020 2020 2063 6f6d 705f 6c69           comp_li
-0000cfd0: 7374 2e61 7070 656e 6428 636f 6d70 5f64  st.append(comp_d
-0000cfe0: 6629 0d0a 2020 2020 2020 2020 7265 7475  f)..        retu
-0000cff0: 726e 2070 642e 7069 766f 7428 7064 2e63  rn pd.pivot(pd.c
-0000d000: 6f6e 6361 7428 636f 6d70 5f6c 6973 742c  oncat(comp_list,
-0000d010: 2061 7869 733d 3029 2c20 636f 6c75 6d6e   axis=0), column
-0000d020: 733d 2763 736d 6f64 5f63 6f6d 706f 6e65  s='csmod_compone
-0000d030: 6e74 2729 0d0a 0d0a 2020 2020 6465 6620  nt')....    def 
-0000d040: 5f70 7265 6469 6374 5f73 7465 7028 0d0a  _predict_step(..
-0000d050: 2020 2020 2020 2020 7365 6c66 2c0d 0a20          self,.. 
-0000d060: 2020 2020 2020 2064 6174 6573 2c0d 0a20         dates,.. 
-0000d070: 2020 2020 2020 2074 7265 6e64 5f63 6f6d         trend_com
-0000d080: 706f 6e65 6e74 2c0d 0a20 2020 2020 2020  ponent,..       
-0000d090: 2068 6973 746f 7279 5f64 662c 0d0a 2020   history_df,..  
-0000d0a0: 2020 2020 2020 6675 7475 7265 5f72 6567        future_reg
-0000d0b0: 7265 7373 6f72 2c0d 0a20 2020 2020 2020  ressor,..       
-0000d0c0: 2066 6c61 675f 7265 6772 6573 736f 7273   flag_regressors
-0000d0d0: 2c0d 0a20 2020 2020 2020 2069 6d70 6163  ,..        impac
-0000d0e0: 7473 2c0d 0a20 2020 2020 2020 2072 6567  ts,..        reg
-0000d0f0: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
-0000d100: 732c 0d0a 2020 2020 293a 0d0a 2020 2020  s,..    ):..    
-0000d110: 2020 2020 2320 4e6f 7465 2074 6869 7320      # Note this 
-0000d120: 6973 2073 6361 6c65 6420 616e 6420 646f  is scaled and do
-0000d130: 6573 6e27 7420 6163 636f 756e 7420 666f  esn't account fo
-0000d140: 7220 696d 7061 6374 730d 0a20 2020 2020  r impacts..     
-0000d150: 2020 206c 696e 6561 725f 7072 6564 203d     linear_pred =
-0000d160: 2073 656c 662e 5f70 7265 6469 6374 5f6c   self._predict_l
-0000d170: 696e 6561 7228 0d0a 2020 2020 2020 2020  inear(..        
-0000d180: 2020 2020 6461 7465 732c 0d0a 2020 2020      dates,..    
-0000d190: 2020 2020 2020 2020 6869 7374 6f72 795f          history_
-0000d1a0: 6466 3d68 6973 746f 7279 5f64 662c 0d0a  df=history_df,..
-0000d1b0: 2020 2020 2020 2020 2020 2020 6675 7475              futu
-0000d1c0: 7265 5f72 6567 7265 7373 6f72 3d66 7574  re_regressor=fut
-0000d1d0: 7572 655f 7265 6772 6573 736f 722c 0d0a  ure_regressor,..
-0000d1e0: 2020 2020 2020 2020 2020 2020 666c 6167              flag
-0000d1f0: 5f72 6567 7265 7373 6f72 733d 666c 6167  _regressors=flag
-0000d200: 5f72 6567 7265 7373 6f72 732c 0d0a 2020  _regressors,..  
-0000d210: 2020 2020 2020 2020 2020 696d 7061 6374            impact
-0000d220: 733d 696d 7061 6374 732c 0d0a 2020 2020  s=impacts,..    
-0000d230: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
-0000d240: 725f 7065 725f 7365 7269 6573 3d72 6567  r_per_series=reg
-0000d250: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
-0000d260: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000d270: 7265 7475 726e 5f63 6f6d 706f 6e65 6e74  return_component
-0000d280: 733d 5472 7565 2c0d 0a20 2020 2020 2020  s=True,..       
-0000d290: 2029 0d0a 2020 2020 2020 2020 2320 4144   )..        # AD
-0000d2a0: 4420 5052 4550 524f 4345 5353 494e 4720  D PREPROCESSING 
-0000d2b0: 4245 464f 5245 2054 5245 4e44 2028 4649  BEFORE TREND (FI
-0000d2c0: 5420 582c 2052 4556 4552 5345 206f 6e20  T X, REVERSE on 
-0000d2d0: 5052 4544 4943 542c 2054 4845 4e20 5452  PREDICT, THEN TR
-0000d2e0: 454e 4429 0d0a 2020 2020 2020 2020 7a65  END)..        ze
-0000d2f0: 726f 735f 6466 203d 2070 642e 4461 7461  ros_df = pd.Data
-0000d300: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
-0000d310: 2020 2020 302e 302c 0d0a 2020 2020 2020      0.0,..      
-0000d320: 2020 2020 2020 696e 6465 783d 7472 656e        index=tren
-0000d330: 645f 636f 6d70 6f6e 656e 742e 666f 7265  d_component.fore
-0000d340: 6361 7374 2e69 6e64 6578 2c0d 0a20 2020  cast.index,..   
-0000d350: 2020 2020 2020 2020 2063 6f6c 756d 6e73           columns
-0000d360: 3d74 7265 6e64 5f63 6f6d 706f 6e65 6e74  =trend_component
-0000d370: 2e66 6f72 6563 6173 742e 636f 6c75 6d6e  .forecast.column
-0000d380: 732c 0d0a 2020 2020 2020 2020 290d 0a20  s,..        ).. 
-0000d390: 2020 2020 2020 2075 7070 6572 5f61 646a         upper_adj
-0000d3a0: 7573 7420 3d20 287a 6572 6f73 5f64 6620  ust = (zeros_df 
-0000d3b0: 2b20 7365 6c66 2e72 6573 6964 7561 6c5f  + self.residual_
-0000d3c0: 756e 6365 7274 6169 6e74 795f 7570 7065  uncertainty_uppe
-0000d3d0: 7229 202b 2028 0d0a 2020 2020 2020 2020  r) + (..        
-0000d3e0: 2020 2020 7365 6c66 2e72 6573 6964 7561      self.residua
-0000d3f0: 6c5f 756e 6365 7274 6169 6e74 795f 7570  l_uncertainty_up
-0000d400: 7065 725f 7374 6420 2a20 7365 6c66 2e69  per_std * self.i
-0000d410: 6e74 5f73 7464 5f64 6576 0d0a 2020 2020  nt_std_dev..    
-0000d420: 2020 2020 290d 0a20 2020 2020 2020 206c      )..        l
-0000d430: 6f77 6572 5f61 646a 7573 7420 3d20 287a  ower_adjust = (z
-0000d440: 6572 6f73 5f64 6620 2b20 7365 6c66 2e72  eros_df + self.r
-0000d450: 6573 6964 7561 6c5f 756e 6365 7274 6169  esidual_uncertai
-0000d460: 6e74 795f 6c6f 7765 7229 202b 2028 0d0a  nty_lower) + (..
-0000d470: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000d480: 2e72 6573 6964 7561 6c5f 756e 6365 7274  .residual_uncert
-0000d490: 6169 6e74 795f 6c6f 7765 725f 7374 6420  ainty_lower_std 
-0000d4a0: 2a20 7365 6c66 2e69 6e74 5f73 7464 5f64  * self.int_std_d
-0000d4b0: 6576 0d0a 2020 2020 2020 2020 290d 0a20  ev..        ).. 
-0000d4c0: 2020 2020 2020 2023 2061 6464 2061 2067         # add a g
-0000d4d0: 7261 6475 616c 2069 6e63 7265 6173 6520  radual increase 
-0000d4e0: 746f 2066 756c 6c20 756e 6365 7274 6169  to full uncertai
-0000d4f0: 6e74 790d 0a20 2020 2020 2020 2069 6620  nty..        if 
-0000d500: 6c69 6e65 6172 5f70 7265 642e 7368 6170  linear_pred.shap
-0000d510: 655b 305d 203e 2034 3a0d 0a20 2020 2020  e[0] > 4:..     
-0000d520: 2020 2020 2020 2066 6972 7374 5f61 646a         first_adj
-0000d530: 7573 7420 3d20 7a65 726f 735f 6466 202b  ust = zeros_df +
-0000d540: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-0000d550: 6669 7273 745f 6164 6a75 7374 2e69 6c6f  first_adjust.ilo
-0000d560: 635b 305d 203d 2030 2e35 0d0a 2020 2020  c[0] = 0.5..    
-0000d570: 2020 2020 2020 2020 6669 7273 745f 6164          first_ad
-0000d580: 6a75 7374 2e69 6c6f 635b 315d 203d 2030  just.iloc[1] = 0
-0000d590: 2e37 0d0a 2020 2020 2020 2020 2020 2020  .7..            
-0000d5a0: 7570 7065 725f 6164 6a75 7374 203d 2075  upper_adjust = u
-0000d5b0: 7070 6572 5f61 646a 7573 7420 2a20 6669  pper_adjust * fi
-0000d5c0: 7273 745f 6164 6a75 7374 0d0a 2020 2020  rst_adjust..    
-0000d5d0: 2020 2020 2020 2020 6c6f 7765 725f 6164          lower_ad
-0000d5e0: 6a75 7374 203d 206c 6f77 6572 5f61 646a  just = lower_adj
-0000d5f0: 7573 7420 2a20 6669 7273 745f 6164 6a75  ust * first_adju
-0000d600: 7374 0d0a 2020 2020 2020 2020 7570 7065  st..        uppe
-0000d610: 7220 3d20 280d 0a20 2020 2020 2020 2020  r = (..         
-0000d620: 2020 2074 7265 6e64 5f63 6f6d 706f 6e65     trend_compone
-0000d630: 6e74 2e75 7070 6572 5f66 6f72 6563 6173  nt.upper_forecas
-0000d640: 742e 7265 696e 6465 7828 6461 7465 7329  t.reindex(dates)
-0000d650: 202b 206c 696e 6561 725f 7072 6564 202b   + linear_pred +
-0000d660: 2075 7070 6572 5f61 646a 7573 740d 0a20   upper_adjust.. 
-0000d670: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0000d680: 2020 6c6f 7765 7220 3d20 280d 0a20 2020    lower = (..   
-0000d690: 2020 2020 2020 2020 2074 7265 6e64 5f63           trend_c
-0000d6a0: 6f6d 706f 6e65 6e74 2e6c 6f77 6572 5f66  omponent.lower_f
-0000d6b0: 6f72 6563 6173 742e 7265 696e 6465 7828  orecast.reindex(
-0000d6c0: 6461 7465 7329 202b 206c 696e 6561 725f  dates) + linear_
-0000d6d0: 7072 6564 202d 206c 6f77 6572 5f61 646a  pred - lower_adj
-0000d6e0: 7573 740d 0a20 2020 2020 2020 2029 0d0a  ust..        )..
-0000d6f0: 0d0a 2020 2020 2020 2020 6466 5f66 6f72  ..        df_for
-0000d700: 6563 6173 7420 3d20 5072 6564 6963 7469  ecast = Predicti
-0000d710: 6f6e 4f62 6a65 6374 280d 0a20 2020 2020  onObject(..     
-0000d720: 2020 2020 2020 206d 6f64 656c 5f6e 616d         model_nam
-0000d730: 653d 7365 6c66 2e6e 616d 652c 0d0a 2020  e=self.name,..  
-0000d740: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-0000d750: 7374 5f6c 656e 6774 683d 6c65 6e28 6461  st_length=len(da
-0000d760: 7465 7329 2c0d 0a20 2020 2020 2020 2020  tes),..         
-0000d770: 2020 2066 6f72 6563 6173 745f 696e 6465     forecast_inde
-0000d780: 783d 6461 7465 732c 0d0a 2020 2020 2020  x=dates,..      
-0000d790: 2020 2020 2020 666f 7265 6361 7374 5f63        forecast_c
-0000d7a0: 6f6c 756d 6e73 3d74 7265 6e64 5f63 6f6d  olumns=trend_com
-0000d7b0: 706f 6e65 6e74 2e66 6f72 6563 6173 742e  ponent.forecast.
-0000d7c0: 636f 6c75 6d6e 732c 0d0a 2020 2020 2020  columns,..      
-0000d7d0: 2020 2020 2020 6c6f 7765 725f 666f 7265        lower_fore
-0000d7e0: 6361 7374 3d6c 6f77 6572 2c0d 0a20 2020  cast=lower,..   
-0000d7f0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
-0000d800: 743d 7472 656e 645f 636f 6d70 6f6e 656e  t=trend_componen
-0000d810: 742e 666f 7265 6361 7374 2e72 6569 6e64  t.forecast.reind
-0000d820: 6578 2864 6174 6573 2920 2b20 6c69 6e65  ex(dates) + line
-0000d830: 6172 5f70 7265 642c 0d0a 2020 2020 2020  ar_pred,..      
-0000d840: 2020 2020 2020 7570 7065 725f 666f 7265        upper_fore
-0000d850: 6361 7374 3d75 7070 6572 2c0d 0a20 2020  cast=upper,..   
-0000d860: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-0000d870: 696f 6e5f 696e 7465 7276 616c 3d73 656c  ion_interval=sel
-0000d880: 662e 7072 6564 6963 7469 6f6e 5f69 6e74  f.prediction_int
-0000d890: 6572 7661 6c2c 0d0a 2020 2020 2020 2020  erval,..        
-0000d8a0: 2020 2020 6669 745f 7275 6e74 696d 653d      fit_runtime=
-0000d8b0: 7365 6c66 2e66 6974 5f72 756e 7469 6d65  self.fit_runtime
-0000d8c0: 2c0d 0a20 2020 2020 2020 2020 2020 206d  ,..            m
-0000d8d0: 6f64 656c 5f70 6172 616d 6574 6572 733d  odel_parameters=
-0000d8e0: 7365 6c66 2e67 6574 5f70 6172 616d 7328  self.get_params(
-0000d8f0: 292c 0d0a 2020 2020 2020 2020 290d 0a20  ),..        ).. 
-0000d900: 2020 2020 2020 2072 6574 7572 6e20 6466         return df
-0000d910: 5f66 6f72 6563 6173 740d 0a0d 0a20 2020  _forecast....   
-0000d920: 2064 6566 2066 6974 5f64 6174 6128 0d0a   def fit_data(..
-0000d930: 2020 2020 2020 2020 7365 6c66 2c0d 0a20          self,.. 
-0000d940: 2020 2020 2020 2064 662c 0d0a 2020 2020         df,..    
-0000d950: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
-0000d960: 6774 683d 4e6f 6e65 2c0d 0a20 2020 2020  gth=None,..     
-0000d970: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
-0000d980: 736f 723d 4e6f 6e65 2c0d 0a20 2020 2020  sor=None,..     
-0000d990: 2020 2072 6567 7265 7373 6f72 5f70 6572     regressor_per
-0000d9a0: 5f73 6572 6965 733d 4e6f 6e65 2c0d 0a20  _series=None,.. 
-0000d9b0: 2020 2020 2020 2066 6c61 675f 7265 6772         flag_regr
-0000d9c0: 6573 736f 7273 3d4e 6f6e 652c 0d0a 2020  essors=None,..  
-0000d9d0: 2020 2020 2020 6675 7475 7265 5f69 6d70        future_imp
-0000d9e0: 6163 7473 3d4e 6f6e 652c 0d0a 2020 2020  acts=None,..    
-0000d9f0: 2020 2020 7265 6772 6573 736f 725f 666f      regressor_fo
-0000da00: 7265 6361 7374 5f6d 6f64 656c 3d4e 6f6e  recast_model=Non
-0000da10: 652c 0d0a 2020 2020 2020 2020 7265 6772  e,..        regr
-0000da20: 6573 736f 725f 666f 7265 6361 7374 5f6d  essor_forecast_m
-0000da30: 6f64 656c 5f70 6172 616d 733d 4e6f 6e65  odel_params=None
-0000da40: 2c0d 0a20 2020 2020 2020 2072 6567 7265  ,..        regre
-0000da50: 7373 6f72 5f66 6f72 6563 6173 745f 7472  ssor_forecast_tr
-0000da60: 616e 7366 6f72 6d61 7469 6f6e 733d 4e6f  ansformations=No
-0000da70: 6e65 2c0d 0a20 2020 2020 2020 2069 6e63  ne,..        inc
-0000da80: 6c75 6465 5f68 6973 746f 7279 3d46 616c  lude_history=Fal
-0000da90: 7365 2c0d 0a20 2020 2020 2020 2070 6173  se,..        pas
-0000daa0: 745f 696d 7061 6374 733d 4e6f 6e65 2c0d  t_impacts=None,.
-0000dab0: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
-0000dac0: 2073 656c 662e 6466 203d 2073 656c 662e   self.df = self.
-0000dad0: 7072 6570 726f 6365 7373 6572 2e74 7261  preprocesser.tra
-0000dae0: 6e73 666f 726d 2873 656c 662e 6466 290d  nsform(self.df).
-0000daf0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000db00: 2e70 6173 745f 696d 7061 6374 735f 696e  .past_impacts_in
-0000db10: 7465 7276 656e 7469 6f6e 203d 3d20 2272  tervention == "r
-0000db20: 656d 6f76 6522 3a0d 0a20 2020 2020 2020  emove":..       
-0000db30: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0000db40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000db50: 6466 203d 2073 656c 662e 6466 202f 2028  df = self.df / (
-0000db60: 3120 2b20 7061 7374 5f69 6d70 6163 7473  1 + past_impacts
-0000db70: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-0000db80: 7863 6570 7420 5479 7065 4572 726f 723a  xcept TypeError:
-0000db90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000dba0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-0000dbb0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-0000dbc0: 2020 2020 2020 2020 2022 6966 2075 7369           "if usi
-0000dbd0: 6e67 2070 6173 7420 696d 7061 6374 2077  ng past impact w
-0000dbe0: 6974 6820 6466 2075 7064 6174 6573 2c20  ith df updates, 
-0000dbf0: 6d75 7374 2070 6173 7320 7061 7374 5f69  must pass past_i
-0000dc00: 6d70 6163 7473 2074 6f20 2e66 6974 5f64  mpacts to .fit_d
-0000dc10: 6174 6120 6f72 202e 7072 6564 6963 7422  ata or .predict"
-0000dc20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000dc30: 2020 290d 0a20 2020 2020 2020 2073 656c    )..        sel
-0000dc40: 662e 6466 203d 2073 656c 662e 7363 616c  f.df = self.scal
-0000dc50: 655f 6461 7461 2864 6629 0d0a 2020 2020  e_data(df)..    
-0000dc60: 2020 2020 280d 0a20 2020 2020 2020 2020      (..         
-0000dc70: 2020 2073 656c 662e 7265 6772 5f70 735f     self.regr_ps_
-0000dc80: 666f 7265 2c0d 0a20 2020 2020 2020 2020  fore,..         
-0000dc90: 2020 2073 656c 662e 7573 655f 696d 7061     self.use_impa
-0000dca0: 6374 732c 0d0a 2020 2020 2020 2020 2020  cts,..          
-0000dcb0: 2020 7365 6c66 2e66 756c 6c5f 7265 6772    self.full_regr
-0000dcc0: 2c0d 0a20 2020 2020 2020 2020 2020 2073  ,..            s
-0000dcd0: 656c 662e 616c 6c5f 666c 6167 732c 0d0a  elf.all_flags,..
-0000dce0: 2020 2020 2020 2020 2920 3d20 7365 6c66          ) = self
-0000dcf0: 2e5f 7072 6f63 6573 735f 7265 6772 6573  ._process_regres
-0000dd00: 736f 7273 280d 0a20 2020 2020 2020 2020  sors(..         
-0000dd10: 2020 2064 663d 7365 6c66 2e64 662c 0d0a     df=self.df,..
-0000dd20: 2020 2020 2020 2020 2020 2020 666f 7265              fore
-0000dd30: 6361 7374 5f6c 656e 6774 683d 666f 7265  cast_length=fore
-0000dd40: 6361 7374 5f6c 656e 6774 682c 0d0a 2020  cast_length,..  
-0000dd50: 2020 2020 2020 2020 2020 6675 7475 7265            future
-0000dd60: 5f72 6567 7265 7373 6f72 3d66 7574 7572  _regressor=futur
-0000dd70: 655f 7265 6772 6573 736f 722c 0d0a 2020  e_regressor,..  
-0000dd80: 2020 2020 2020 2020 2020 7265 6772 6573            regres
-0000dd90: 736f 725f 7065 725f 7365 7269 6573 3d72  sor_per_series=r
-0000dda0: 6567 7265 7373 6f72 5f70 6572 5f73 6572  egressor_per_ser
-0000ddb0: 6965 732c 0d0a 2020 2020 2020 2020 2020  ies,..          
-0000ddc0: 2020 666c 6167 5f72 6567 7265 7373 6f72    flag_regressor
-0000ddd0: 733d 666c 6167 5f72 6567 7265 7373 6f72  s=flag_regressor
-0000dde0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000ddf0: 6675 7475 7265 5f69 6d70 6163 7473 3d66  future_impacts=f
-0000de00: 7574 7572 655f 696d 7061 6374 732c 0d0a  uture_impacts,..
-0000de10: 2020 2020 2020 2020 2020 2020 7265 6772              regr
-0000de20: 6573 736f 725f 666f 7265 6361 7374 5f6d  essor_forecast_m
-0000de30: 6f64 656c 3d72 6567 7265 7373 6f72 5f66  odel=regressor_f
-0000de40: 6f72 6563 6173 745f 6d6f 6465 6c2c 0d0a  orecast_model,..
-0000de50: 2020 2020 2020 2020 2020 2020 7265 6772              regr
-0000de60: 6573 736f 725f 666f 7265 6361 7374 5f6d  essor_forecast_m
-0000de70: 6f64 656c 5f70 6172 616d 733d 7265 6772  odel_params=regr
-0000de80: 6573 736f 725f 666f 7265 6361 7374 5f6d  essor_forecast_m
-0000de90: 6f64 656c 5f70 6172 616d 732c 0d0a 2020  odel_params,..  
-0000dea0: 2020 2020 2020 2020 2020 7265 6772 6573            regres
-0000deb0: 736f 725f 666f 7265 6361 7374 5f74 7261  sor_forecast_tra
-0000dec0: 6e73 666f 726d 6174 696f 6e73 3d72 6567  nsformations=reg
-0000ded0: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
-0000dee0: 7472 616e 7366 6f72 6d61 7469 6f6e 732c  transformations,
-0000def0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-0000df00: 636c 7564 655f 6869 7374 6f72 793d 696e  clude_history=in
-0000df10: 636c 7564 655f 6869 7374 6f72 792c 0d0a  clude_history,..
-0000df20: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0000df30: 2020 2073 656c 662e 7472 656e 645f 7472     self.trend_tr
-0000df40: 6169 6e20 3d20 7365 6c66 2e64 6620 2d20  ain = self.df - 
-0000df50: 7365 6c66 2e5f 7072 6564 6963 745f 6c69  self._predict_li
-0000df60: 6e65 6172 280d 0a20 2020 2020 2020 2020  near(..         
-0000df70: 2020 2064 6174 6573 3d64 662e 696e 6465     dates=df.inde
-0000df80: 782c 0d0a 2020 2020 2020 2020 2020 2020  x,..            
-0000df90: 6869 7374 6f72 795f 6466 3d73 656c 662e  history_df=self.
-0000dfa0: 6466 2c0d 0a20 2020 2020 2020 2020 2020  df,..           
-0000dfb0: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
-0000dfc0: 723d 7365 6c66 2e66 756c 6c5f 7265 6772  r=self.full_regr
-0000dfd0: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
-0000dfe0: 6c61 675f 7265 6772 6573 736f 7273 3d73  lag_regressors=s
-0000dff0: 656c 662e 616c 6c5f 666c 6167 732c 0d0a  elf.all_flags,..
-0000e000: 2020 2020 2020 2020 2020 2020 696d 7061              impa
-0000e010: 6374 733d 7365 6c66 2e75 7365 5f69 6d70  cts=self.use_imp
-0000e020: 6163 7473 2c0d 0a20 2020 2020 2020 2020  acts,..         
-0000e030: 2020 2072 6567 7265 7373 6f72 5f70 6572     regressor_per
-0000e040: 5f73 6572 6965 733d 7365 6c66 2e72 6567  _series=self.reg
-0000e050: 725f 7073 5f66 6f72 652c 0d0a 2020 2020  r_ps_fore,..    
-0000e060: 2020 2020 290d 0a20 2020 2020 2020 2069      )..        i
-0000e070: 6620 7365 6c66 2e74 7265 6e64 5f77 696e  f self.trend_win
-0000e080: 646f 7720 6973 206e 6f74 204e 6f6e 653a  dow is not None:
-0000e090: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000e0a0: 6c66 2e74 7265 6e64 5f74 7261 696e 2c20  lf.trend_train, 
-0000e0b0: 736c 6f70 652c 2069 6e74 6572 6365 7074  slope, intercept
-0000e0c0: 203d 2073 656c 662e 726f 6c6c 696e 675f   = self.rolling_
-0000e0d0: 7472 656e 6428 0d0a 2020 2020 2020 2020  trend(..        
-0000e0e0: 2020 2020 2020 2020 7365 6c66 2e74 7265          self.tre
-0000e0f0: 6e64 5f74 7261 696e 2c20 6e70 2e61 7272  nd_train, np.arr
-0000e100: 6179 2873 656c 662e 6372 6561 7465 5f74  ay(self.create_t
-0000e110: 2864 662e 696e 6465 7829 290d 0a20 2020  (df.index))..   
-0000e120: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-0000e130: 2020 2020 2020 2020 7365 6c66 2e74 7265          self.tre
-0000e140: 6e64 5f74 7261 696e 203d 2070 642e 4461  nd_train = pd.Da
-0000e150: 7461 4672 616d 6528 0d0a 2020 2020 2020  taFrame(..      
-0000e160: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000e170: 7265 6e64 5f74 7261 696e 2c20 696e 6465  rend_train, inde
-0000e180: 783d 6466 2e69 6e64 6578 2c20 636f 6c75  x=df.index, colu
-0000e190: 6d6e 733d 6466 2e63 6f6c 756d 6e73 0d0a  mns=df.columns..
-0000e1a0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0000e1b0: 0a20 2020 2064 6566 205f 7072 6f63 6573  .    def _proces
-0000e1c0: 735f 7265 6772 6573 736f 7273 280d 0a20  s_regressors(.. 
-0000e1d0: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
-0000e1e0: 2020 2020 2020 6466 3d4e 6f6e 652c 0d0a        df=None,..
-0000e1f0: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-0000e200: 5f6c 656e 6774 683d 4e6f 6e65 2c0d 0a20  _length=None,.. 
-0000e210: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
-0000e220: 6772 6573 736f 723d 4e6f 6e65 2c0d 0a20  gressor=None,.. 
-0000e230: 2020 2020 2020 2072 6567 7265 7373 6f72         regressor
-0000e240: 5f70 6572 5f73 6572 6965 733d 4e6f 6e65  _per_series=None
-0000e250: 2c0d 0a20 2020 2020 2020 2066 6c61 675f  ,..        flag_
-0000e260: 7265 6772 6573 736f 7273 3d4e 6f6e 652c  regressors=None,
-0000e270: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
-0000e280: 5f69 6d70 6163 7473 3d4e 6f6e 652c 0d0a  _impacts=None,..
-0000e290: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
-0000e2a0: 725f 666f 7265 6361 7374 5f6d 6f64 656c  r_forecast_model
-0000e2b0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-0000e2c0: 7265 6772 6573 736f 725f 666f 7265 6361  regressor_foreca
-0000e2d0: 7374 5f6d 6f64 656c 5f70 6172 616d 733d  st_model_params=
-0000e2e0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2072  None,..        r
-0000e2f0: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
-0000e300: 745f 7472 616e 7366 6f72 6d61 7469 6f6e  t_transformation
-0000e310: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
-0000e320: 2069 6e63 6c75 6465 5f68 6973 746f 7279   include_history
-0000e330: 3d54 7275 652c 0d0a 2020 2020 293a 0d0a  =True,..    ):..
-0000e340: 2020 2020 2020 2020 2320 6966 2066 7574          # if fut
-0000e350: 7572 6520 7265 6772 6573 736f 7273 2061  ure regressors a
-0000e360: 7265 204e 6f6e 6520 2826 2055 5345 4429  re None (& USED)
-0000e370: 2c20 6275 7420 7765 7265 2070 726f 7669  , but were provi
-0000e380: 6465 6420 666f 7220 6869 7374 6f72 792c  ded for history,
-0000e390: 2069 6e73 7465 6164 2075 7365 2066 6f72   instead use for
-0000e3a0: 6563 6173 7473 206f 6620 7468 6573 6520  ecasts of these 
-0000e3b0: 6665 6174 7572 6573 2028 7761 726e 290d  features (warn).
-0000e3c0: 0a20 2020 2020 2020 2066 756c 6c5f 7265  .        full_re
-0000e3d0: 6772 203d 204e 6f6e 650d 0a20 2020 2020  gr = None..     
-0000e3e0: 2020 2069 6620 280d 0a20 2020 2020 2020     if (..       
-0000e3f0: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
-0000e400: 6573 736f 7220 6973 204e 6f6e 650d 0a20  essor is None.. 
-0000e410: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
-0000e420: 656c 662e 6675 7475 7265 5f72 6567 7265  elf.future_regre
-0000e430: 7373 6f72 5f74 7261 696e 2069 7320 6e6f  ssor_train is no
-0000e440: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-0000e450: 2020 2020 616e 6420 666f 7265 6361 7374      and forecast
-0000e460: 5f6c 656e 6774 6820 6973 206e 6f74 204e  _length is not N
-0000e470: 6f6e 650d 0a20 2020 2020 2020 2029 3a0d  one..        ):.
-0000e480: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e490: 7365 6c66 2e76 6572 626f 7365 203e 2030  self.verbose > 0
-0000e4a0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000e4b0: 2020 2070 7269 6e74 280d 0a20 2020 2020     print(..     
-0000e4c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000e4d0: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
-0000e4e0: 206e 6f74 2070 726f 7669 6465 6420 746f   not provided to
-0000e4f0: 2043 6173 7361 6e64 7261 2c20 7573 696e   Cassandra, usin
-0000e500: 6720 666f 7265 6361 7374 7320 6f66 2068  g forecasts of h
-0000e510: 6973 746f 7269 6361 6c22 0d0a 2020 2020  istorical"..    
-0000e520: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0000e530: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-0000e540: 655f 7265 6772 6573 736f 7220 3d20 6d6f  e_regressor = mo
-0000e550: 6465 6c5f 666f 7265 6361 7374 280d 0a20  del_forecast(.. 
-0000e560: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000e570: 6f64 656c 5f6e 616d 653d 7365 6c66 2e74  odel_name=self.t
-0000e580: 7265 6e64 5f6d 6f64 656c 5b27 4d6f 6465  rend_model['Mode
-0000e590: 6c27 5d0d 0a20 2020 2020 2020 2020 2020  l']..           
-0000e5a0: 2020 2020 2069 6620 7265 6772 6573 736f       if regresso
-0000e5b0: 725f 666f 7265 6361 7374 5f6d 6f64 656c  r_forecast_model
-0000e5c0: 2069 7320 4e6f 6e65 0d0a 2020 2020 2020   is None..      
-0000e5d0: 2020 2020 2020 2020 2020 656c 7365 2072            else r
-0000e5e0: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
-0000e5f0: 745f 6d6f 6465 6c2c 0d0a 2020 2020 2020  t_model,..      
-0000e600: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-0000e610: 7061 7261 6d5f 6469 6374 3d73 656c 662e  param_dict=self.
-0000e620: 7472 656e 645f 6d6f 6465 6c5b 274d 6f64  trend_model['Mod
-0000e630: 656c 5061 7261 6d65 7465 7273 275d 0d0a  elParameters']..
-0000e640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e650: 6966 2072 6567 7265 7373 6f72 5f66 6f72  if regressor_for
-0000e660: 6563 6173 745f 6d6f 6465 6c5f 7061 7261  ecast_model_para
-0000e670: 6d73 2069 7320 4e6f 6e65 0d0a 2020 2020  ms is None..    
-0000e680: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0000e690: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
-0000e6a0: 6173 745f 6d6f 6465 6c5f 7061 7261 6d73  ast_model_params
-0000e6b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000e6c0: 2020 206d 6f64 656c 5f74 7261 6e73 666f     model_transfo
-0000e6d0: 726d 5f64 6963 743d 7365 6c66 2e70 7265  rm_dict=self.pre
-0000e6e0: 7072 6f63 6573 7369 6e67 5f74 7261 6e73  processing_trans
-0000e6f0: 666f 726d 6174 696f 6e0d 0a20 2020 2020  formation..     
-0000e700: 2020 2020 2020 2020 2020 2069 6620 7265             if re
-0000e710: 6772 6573 736f 725f 666f 7265 6361 7374  gressor_forecast
-0000e720: 5f74 7261 6e73 666f 726d 6174 696f 6e73  _transformations
-0000e730: 2069 7320 4e6f 6e65 0d0a 2020 2020 2020   is None..      
-0000e740: 2020 2020 2020 2020 2020 656c 7365 2072            else r
-0000e750: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
-0000e760: 745f 7472 616e 7366 6f72 6d61 7469 6f6e  t_transformation
-0000e770: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000e780: 2020 2020 6466 5f74 7261 696e 3d73 656c      df_train=sel
-0000e790: 662e 6675 7475 7265 5f72 6567 7265 7373  f.future_regress
-0000e7a0: 6f72 5f74 7261 696e 2c0d 0a20 2020 2020  or_train,..     
-0000e7b0: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
-0000e7c0: 6173 745f 6c65 6e67 7468 3d66 6f72 6563  ast_length=forec
-0000e7d0: 6173 745f 6c65 6e67 7468 2c0d 0a20 2020  ast_length,..   
-0000e7e0: 2020 2020 2020 2020 2020 2020 2066 7265               fre
-0000e7f0: 7175 656e 6379 3d73 656c 662e 6672 6571  quency=self.freq
-0000e800: 7565 6e63 792c 0d0a 2020 2020 2020 2020  uency,..        
-0000e810: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-0000e820: 6f6e 5f69 6e74 6572 7661 6c3d 7365 6c66  on_interval=self
-0000e830: 2e70 7265 6469 6374 696f 6e5f 696e 7465  .prediction_inte
-0000e840: 7276 616c 2c0d 0a20 2020 2020 2020 2020  rval,..         
-0000e850: 2020 2020 2020 2066 6169 6c5f 6f6e 5f66         fail_on_f
-0000e860: 6f72 6563 6173 745f 6e61 6e3d 4661 6c73  orecast_nan=Fals
-0000e870: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0000e880: 2020 2020 7261 6e64 6f6d 5f73 6565 643d      random_seed=
-0000e890: 7365 6c66 2e72 616e 646f 6d5f 7365 6564  self.random_seed
-0000e8a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000e8b0: 2020 2076 6572 626f 7365 3d73 656c 662e     verbose=self.
-0000e8c0: 7665 7262 6f73 652c 0d0a 2020 2020 2020  verbose,..      
-0000e8d0: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
-0000e8e0: 3d73 656c 662e 6e5f 6a6f 6273 2c0d 0a20  =self.n_jobs,.. 
-0000e8f0: 2020 2020 2020 2020 2020 2029 2e66 6f72             ).for
-0000e900: 6563 6173 740d 0a20 2020 2020 2020 2020  ecast..         
-0000e910: 2020 2066 756c 6c5f 7265 6772 203d 2070     full_regr = p
-0000e920: 642e 636f 6e63 6174 285b 7365 6c66 2e66  d.concat([self.f
-0000e930: 7574 7572 655f 7265 6772 6573 736f 725f  uture_regressor_
-0000e940: 7472 6169 6e2c 2066 7574 7572 655f 7265  train, future_re
-0000e950: 6772 6573 736f 725d 290d 0a20 2020 2020  gressor])..     
-0000e960: 2020 2069 6620 666f 7265 6361 7374 5f6c     if forecast_l
-0000e970: 656e 6774 6820 6973 204e 6f6e 653a 0d0a  ength is None:..
-0000e980: 2020 2020 2020 2020 2020 2020 6578 7065              expe
-0000e990: 6374 6564 5f66 6f72 655f 6c65 6e20 3d20  cted_fore_len = 
-0000e9a0: 6c65 6e28 6466 290d 0a20 2020 2020 2020  len(df)..       
-0000e9b0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0000e9c0: 2020 2020 6578 7065 6374 6564 5f66 6f72      expected_for
-0000e9d0: 655f 6c65 6e20 3d20 280d 0a20 2020 2020  e_len = (..     
-0000e9e0: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
-0000e9f0: 6173 745f 6c65 6e67 7468 202b 206c 656e  ast_length + len
-0000ea00: 2864 6629 2069 6620 696e 636c 7564 655f  (df) if include_
-0000ea10: 6869 7374 6f72 7920 656c 7365 2066 6f72  history else for
-0000ea20: 6563 6173 745f 6c65 6e67 7468 0d0a 2020  ecast_length..  
-0000ea30: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0000ea40: 2020 2020 2069 6620 6675 7475 7265 5f72       if future_r
-0000ea50: 6567 7265 7373 6f72 2069 7320 6e6f 7420  egressor is not 
-0000ea60: 4e6f 6e65 2061 6e64 2073 656c 662e 7265  None and self.re
-0000ea70: 6772 6573 736f 7273 5f75 7365 643a 0d0a  gressors_used:..
-0000ea80: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0000ea90: 656e 2866 7574 7572 655f 7265 6772 6573  en(future_regres
-0000eaa0: 736f 7229 203d 3d20 6578 7065 6374 6564  sor) == expected
-0000eab0: 5f66 6f72 655f 6c65 6e3a 0d0a 2020 2020  _fore_len:..    
-0000eac0: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-0000ead0: 5f72 6567 7220 3d20 7365 6c66 2e72 6567  _regr = self.reg
-0000eae0: 7265 7373 6f72 5f74 7261 6e73 666f 726d  ressor_transform
-0000eaf0: 6572 2e74 7261 6e73 666f 726d 280d 0a20  er.transform(.. 
+0000cda0: 6c75 6d6e 733d 7365 6c66 2e64 662e 636f  lumns=self.df.co
+0000cdb0: 6c75 6d6e 732c 0d0a 2020 2020 2020 2020  lumns,..        
+0000cdc0: 2020 2020 2020 2020 2020 2020 292c 0d0a              ),..
+0000cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cde0: 2020 2020 636f 6d70 6f6e 656e 7473 3d54      components=T
+0000cdf0: 7275 652c 0d0a 2020 2020 2020 2020 2020  rue,..          
+0000ce00: 2020 2020 2020 2020 2020 626f 756e 6473            bounds
+0000ce10: 3d54 7275 652c 0d0a 2020 2020 2020 2020  =True,..        
+0000ce20: 2020 2020 2020 2020 2920 2023 2062 6f75          )  # bou
+0000ce30: 6e64 733d 5472 7565 2074 6f20 616c 6967  nds=True to alig
+0000ce40: 6e20 6265 7474 6572 0d0a 2020 2020 2020  n better..      
+0000ce50: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0000ce60: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+0000ce70: 705f 6466 203d 2070 642e 4461 7461 4672  p_df = pd.DataFr
+0000ce80: 616d 6528 0d0a 2020 2020 2020 2020 2020  ame(..          
+0000ce90: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0000cea0: 6f6d 706f 6e65 6e74 735b 3a2c 2063 6f6d  omponents[:, com
+0000ceb0: 702c 203a 5d2c 0d0a 2020 2020 2020 2020  p, :],..        
+0000cec0: 2020 2020 2020 2020 2020 2020 696e 6465              inde
+0000ced0: 783d 745f 696e 6478 2c0d 0a20 2020 2020  x=t_indx,..     
+0000cee0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000cef0: 6f6c 756d 6e73 3d73 656c 662e 636f 6c75  olumns=self.colu
+0000cf00: 6d6e 5f6e 616d 6573 2c0d 0a20 2020 2020  mn_names,..     
+0000cf10: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0000cf20: 2020 2020 2020 2020 2020 2320 636f 6c75            # colu
+0000cf30: 6d6e 206e 616d 6520 6e65 6564 7320 746f  mn name needs to
+0000cf40: 2062 6520 756e 6c69 6b65 6c79 2074 6f20   be unlikely to 
+0000cf50: 6f63 6375 7220 696e 2061 6e20 6163 7475  occur in an actu
+0000cf60: 616c 2064 6174 6173 6574 0d0a 2020 2020  al dataset..    
+0000cf70: 2020 2020 2020 2020 636f 6d70 5f64 665b          comp_df[
+0000cf80: 2763 736d 6f64 5f63 6f6d 706f 6e65 6e74  'csmod_component
+0000cf90: 275d 203d 2063 6f6c 5f67 726f 7570 5b73  '] = col_group[s
+0000cfa0: 656c 662e 636f 6d70 6f6e 656e 745f 696e  elf.component_in
+0000cfb0: 6478 5b63 6f6d 705d 5d0d 0a20 2020 2020  dx[comp]]..     
+0000cfc0: 2020 2020 2020 2063 6f6d 705f 6c69 7374         comp_list
+0000cfd0: 2e61 7070 656e 6428 636f 6d70 5f64 6629  .append(comp_df)
+0000cfe0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0000cff0: 2070 642e 7069 766f 7428 7064 2e63 6f6e   pd.pivot(pd.con
+0000d000: 6361 7428 636f 6d70 5f6c 6973 742c 2061  cat(comp_list, a
+0000d010: 7869 733d 3029 2c20 636f 6c75 6d6e 733d  xis=0), columns=
+0000d020: 2763 736d 6f64 5f63 6f6d 706f 6e65 6e74  'csmod_component
+0000d030: 2729 0d0a 0d0a 2020 2020 6465 6620 5f70  ')....    def _p
+0000d040: 7265 6469 6374 5f73 7465 7028 0d0a 2020  redict_step(..  
+0000d050: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+0000d060: 2020 2020 2064 6174 6573 2c0d 0a20 2020       dates,..   
+0000d070: 2020 2020 2074 7265 6e64 5f63 6f6d 706f       trend_compo
+0000d080: 6e65 6e74 2c0d 0a20 2020 2020 2020 2068  nent,..        h
+0000d090: 6973 746f 7279 5f64 662c 0d0a 2020 2020  istory_df,..    
+0000d0a0: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
+0000d0b0: 7373 6f72 2c0d 0a20 2020 2020 2020 2066  ssor,..        f
+0000d0c0: 6c61 675f 7265 6772 6573 736f 7273 2c0d  lag_regressors,.
+0000d0d0: 0a20 2020 2020 2020 2069 6d70 6163 7473  .        impacts
+0000d0e0: 2c0d 0a20 2020 2020 2020 2072 6567 7265  ,..        regre
+0000d0f0: 7373 6f72 5f70 6572 5f73 6572 6965 732c  ssor_per_series,
+0000d100: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+0000d110: 2020 2320 4e6f 7465 2074 6869 7320 6973    # Note this is
+0000d120: 2073 6361 6c65 6420 616e 6420 646f 6573   scaled and does
+0000d130: 6e27 7420 6163 636f 756e 7420 666f 7220  n't account for 
+0000d140: 696d 7061 6374 730d 0a20 2020 2020 2020  impacts..       
+0000d150: 206c 696e 6561 725f 7072 6564 203d 2073   linear_pred = s
+0000d160: 656c 662e 5f70 7265 6469 6374 5f6c 696e  elf._predict_lin
+0000d170: 6561 7228 0d0a 2020 2020 2020 2020 2020  ear(..          
+0000d180: 2020 6461 7465 732c 0d0a 2020 2020 2020    dates,..      
+0000d190: 2020 2020 2020 6869 7374 6f72 795f 6466        history_df
+0000d1a0: 3d68 6973 746f 7279 5f64 662c 0d0a 2020  =history_df,..  
+0000d1b0: 2020 2020 2020 2020 2020 6675 7475 7265            future
+0000d1c0: 5f72 6567 7265 7373 6f72 3d66 7574 7572  _regressor=futur
+0000d1d0: 655f 7265 6772 6573 736f 722c 0d0a 2020  e_regressor,..  
+0000d1e0: 2020 2020 2020 2020 2020 666c 6167 5f72            flag_r
+0000d1f0: 6567 7265 7373 6f72 733d 666c 6167 5f72  egressors=flag_r
+0000d200: 6567 7265 7373 6f72 732c 0d0a 2020 2020  egressors,..    
+0000d210: 2020 2020 2020 2020 696d 7061 6374 733d          impacts=
+0000d220: 696d 7061 6374 732c 0d0a 2020 2020 2020  impacts,..      
+0000d230: 2020 2020 2020 7265 6772 6573 736f 725f        regressor_
+0000d240: 7065 725f 7365 7269 6573 3d72 6567 7265  per_series=regre
+0000d250: 7373 6f72 5f70 6572 5f73 6572 6965 732c  ssor_per_series,
+0000d260: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000d270: 7475 726e 5f63 6f6d 706f 6e65 6e74 733d  turn_components=
+0000d280: 5472 7565 2c0d 0a20 2020 2020 2020 2029  True,..        )
+0000d290: 0d0a 2020 2020 2020 2020 2320 4144 4420  ..        # ADD 
+0000d2a0: 5052 4550 524f 4345 5353 494e 4720 4245  PREPROCESSING BE
+0000d2b0: 464f 5245 2054 5245 4e44 2028 4649 5420  FORE TREND (FIT 
+0000d2c0: 582c 2052 4556 4552 5345 206f 6e20 5052  X, REVERSE on PR
+0000d2d0: 4544 4943 542c 2054 4845 4e20 5452 454e  EDICT, THEN TREN
+0000d2e0: 4429 0d0a 2020 2020 2020 2020 7a65 726f  D)..        zero
+0000d2f0: 735f 6466 203d 2070 642e 4461 7461 4672  s_df = pd.DataFr
+0000d300: 616d 6528 0d0a 2020 2020 2020 2020 2020  ame(..          
+0000d310: 2020 302e 302c 0d0a 2020 2020 2020 2020    0.0,..        
+0000d320: 2020 2020 696e 6465 783d 7472 656e 645f      index=trend_
+0000d330: 636f 6d70 6f6e 656e 742e 666f 7265 6361  component.foreca
+0000d340: 7374 2e69 6e64 6578 2c0d 0a20 2020 2020  st.index,..     
+0000d350: 2020 2020 2020 2063 6f6c 756d 6e73 3d74         columns=t
+0000d360: 7265 6e64 5f63 6f6d 706f 6e65 6e74 2e66  rend_component.f
+0000d370: 6f72 6563 6173 742e 636f 6c75 6d6e 732c  orecast.columns,
+0000d380: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+0000d390: 2020 2020 2075 7070 6572 5f61 646a 7573       upper_adjus
+0000d3a0: 7420 3d20 287a 6572 6f73 5f64 6620 2b20  t = (zeros_df + 
+0000d3b0: 7365 6c66 2e72 6573 6964 7561 6c5f 756e  self.residual_un
+0000d3c0: 6365 7274 6169 6e74 795f 7570 7065 7229  certainty_upper)
+0000d3d0: 202b 2028 0d0a 2020 2020 2020 2020 2020   + (..          
+0000d3e0: 2020 7365 6c66 2e72 6573 6964 7561 6c5f    self.residual_
+0000d3f0: 756e 6365 7274 6169 6e74 795f 7570 7065  uncertainty_uppe
+0000d400: 725f 7374 6420 2a20 7365 6c66 2e69 6e74  r_std * self.int
+0000d410: 5f73 7464 5f64 6576 0d0a 2020 2020 2020  _std_dev..      
+0000d420: 2020 290d 0a20 2020 2020 2020 206c 6f77    )..        low
+0000d430: 6572 5f61 646a 7573 7420 3d20 287a 6572  er_adjust = (zer
+0000d440: 6f73 5f64 6620 2b20 7365 6c66 2e72 6573  os_df + self.res
+0000d450: 6964 7561 6c5f 756e 6365 7274 6169 6e74  idual_uncertaint
+0000d460: 795f 6c6f 7765 7229 202b 2028 0d0a 2020  y_lower) + (..  
+0000d470: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+0000d480: 6573 6964 7561 6c5f 756e 6365 7274 6169  esidual_uncertai
+0000d490: 6e74 795f 6c6f 7765 725f 7374 6420 2a20  nty_lower_std * 
+0000d4a0: 7365 6c66 2e69 6e74 5f73 7464 5f64 6576  self.int_std_dev
+0000d4b0: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+0000d4c0: 2020 2020 2023 2061 6464 2061 2067 7261       # add a gra
+0000d4d0: 6475 616c 2069 6e63 7265 6173 6520 746f  dual increase to
+0000d4e0: 2066 756c 6c20 756e 6365 7274 6169 6e74   full uncertaint
+0000d4f0: 790d 0a20 2020 2020 2020 2069 6620 6c69  y..        if li
+0000d500: 6e65 6172 5f70 7265 642e 7368 6170 655b  near_pred.shape[
+0000d510: 305d 203e 2034 3a0d 0a20 2020 2020 2020  0] > 4:..       
+0000d520: 2020 2020 2066 6972 7374 5f61 646a 7573       first_adjus
+0000d530: 7420 3d20 7a65 726f 735f 6466 202b 2031  t = zeros_df + 1
+0000d540: 0d0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
+0000d550: 7273 745f 6164 6a75 7374 2e69 6c6f 635b  rst_adjust.iloc[
+0000d560: 305d 203d 2030 2e35 0d0a 2020 2020 2020  0] = 0.5..      
+0000d570: 2020 2020 2020 6669 7273 745f 6164 6a75        first_adju
+0000d580: 7374 2e69 6c6f 635b 315d 203d 2030 2e37  st.iloc[1] = 0.7
+0000d590: 0d0a 2020 2020 2020 2020 2020 2020 7570  ..            up
+0000d5a0: 7065 725f 6164 6a75 7374 203d 2075 7070  per_adjust = upp
+0000d5b0: 6572 5f61 646a 7573 7420 2a20 6669 7273  er_adjust * firs
+0000d5c0: 745f 6164 6a75 7374 0d0a 2020 2020 2020  t_adjust..      
+0000d5d0: 2020 2020 2020 6c6f 7765 725f 6164 6a75        lower_adju
+0000d5e0: 7374 203d 206c 6f77 6572 5f61 646a 7573  st = lower_adjus
+0000d5f0: 7420 2a20 6669 7273 745f 6164 6a75 7374  t * first_adjust
+0000d600: 0d0a 2020 2020 2020 2020 7570 7065 7220  ..        upper 
+0000d610: 3d20 280d 0a20 2020 2020 2020 2020 2020  = (..           
+0000d620: 2074 7265 6e64 5f63 6f6d 706f 6e65 6e74   trend_component
+0000d630: 2e75 7070 6572 5f66 6f72 6563 6173 742e  .upper_forecast.
+0000d640: 7265 696e 6465 7828 6461 7465 7329 202b  reindex(dates) +
+0000d650: 206c 696e 6561 725f 7072 6564 202b 2075   linear_pred + u
+0000d660: 7070 6572 5f61 646a 7573 740d 0a20 2020  pper_adjust..   
+0000d670: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000d680: 6c6f 7765 7220 3d20 280d 0a20 2020 2020  lower = (..     
+0000d690: 2020 2020 2020 2074 7265 6e64 5f63 6f6d         trend_com
+0000d6a0: 706f 6e65 6e74 2e6c 6f77 6572 5f66 6f72  ponent.lower_for
+0000d6b0: 6563 6173 742e 7265 696e 6465 7828 6461  ecast.reindex(da
+0000d6c0: 7465 7329 202b 206c 696e 6561 725f 7072  tes) + linear_pr
+0000d6d0: 6564 202d 206c 6f77 6572 5f61 646a 7573  ed - lower_adjus
+0000d6e0: 740d 0a20 2020 2020 2020 2029 0d0a 0d0a  t..        )....
+0000d6f0: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
+0000d700: 6173 7420 3d20 5072 6564 6963 7469 6f6e  ast = Prediction
+0000d710: 4f62 6a65 6374 280d 0a20 2020 2020 2020  Object(..       
+0000d720: 2020 2020 206d 6f64 656c 5f6e 616d 653d       model_name=
+0000d730: 7365 6c66 2e6e 616d 652c 0d0a 2020 2020  self.name,..    
+0000d740: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
+0000d750: 5f6c 656e 6774 683d 6c65 6e28 6461 7465  _length=len(date
+0000d760: 7329 2c0d 0a20 2020 2020 2020 2020 2020  s),..           
+0000d770: 2066 6f72 6563 6173 745f 696e 6465 783d   forecast_index=
+0000d780: 6461 7465 732c 0d0a 2020 2020 2020 2020  dates,..        
+0000d790: 2020 2020 666f 7265 6361 7374 5f63 6f6c      forecast_col
+0000d7a0: 756d 6e73 3d74 7265 6e64 5f63 6f6d 706f  umns=trend_compo
+0000d7b0: 6e65 6e74 2e66 6f72 6563 6173 742e 636f  nent.forecast.co
+0000d7c0: 6c75 6d6e 732c 0d0a 2020 2020 2020 2020  lumns,..        
+0000d7d0: 2020 2020 6c6f 7765 725f 666f 7265 6361      lower_foreca
+0000d7e0: 7374 3d6c 6f77 6572 2c0d 0a20 2020 2020  st=lower,..     
+0000d7f0: 2020 2020 2020 2066 6f72 6563 6173 743d         forecast=
+0000d800: 7472 656e 645f 636f 6d70 6f6e 656e 742e  trend_component.
+0000d810: 666f 7265 6361 7374 2e72 6569 6e64 6578  forecast.reindex
+0000d820: 2864 6174 6573 2920 2b20 6c69 6e65 6172  (dates) + linear
+0000d830: 5f70 7265 642c 0d0a 2020 2020 2020 2020  _pred,..        
+0000d840: 2020 2020 7570 7065 725f 666f 7265 6361      upper_foreca
+0000d850: 7374 3d75 7070 6572 2c0d 0a20 2020 2020  st=upper,..     
+0000d860: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+0000d870: 6e5f 696e 7465 7276 616c 3d73 656c 662e  n_interval=self.
+0000d880: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
+0000d890: 7661 6c2c 0d0a 2020 2020 2020 2020 2020  val,..          
+0000d8a0: 2020 6669 745f 7275 6e74 696d 653d 7365    fit_runtime=se
+0000d8b0: 6c66 2e66 6974 5f72 756e 7469 6d65 2c0d  lf.fit_runtime,.
+0000d8c0: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
+0000d8d0: 656c 5f70 6172 616d 6574 6572 733d 7365  el_parameters=se
+0000d8e0: 6c66 2e67 6574 5f70 6172 616d 7328 292c  lf.get_params(),
+0000d8f0: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+0000d900: 2020 2020 2072 6574 7572 6e20 6466 5f66       return df_f
+0000d910: 6f72 6563 6173 740d 0a0d 0a20 2020 2064  orecast....    d
+0000d920: 6566 2066 6974 5f64 6174 6128 0d0a 2020  ef fit_data(..  
+0000d930: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+0000d940: 2020 2020 2064 662c 0d0a 2020 2020 2020       df,..      
+0000d950: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
+0000d960: 683d 4e6f 6e65 2c0d 0a20 2020 2020 2020  h=None,..       
+0000d970: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+0000d980: 723d 4e6f 6e65 2c0d 0a20 2020 2020 2020  r=None,..       
+0000d990: 2072 6567 7265 7373 6f72 5f70 6572 5f73   regressor_per_s
+0000d9a0: 6572 6965 733d 4e6f 6e65 2c0d 0a20 2020  eries=None,..   
+0000d9b0: 2020 2020 2066 6c61 675f 7265 6772 6573       flag_regres
+0000d9c0: 736f 7273 3d4e 6f6e 652c 0d0a 2020 2020  sors=None,..    
+0000d9d0: 2020 2020 6675 7475 7265 5f69 6d70 6163      future_impac
+0000d9e0: 7473 3d4e 6f6e 652c 0d0a 2020 2020 2020  ts=None,..      
+0000d9f0: 2020 7265 6772 6573 736f 725f 666f 7265    regressor_fore
+0000da00: 6361 7374 5f6d 6f64 656c 3d4e 6f6e 652c  cast_model=None,
+0000da10: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
+0000da20: 736f 725f 666f 7265 6361 7374 5f6d 6f64  sor_forecast_mod
+0000da30: 656c 5f70 6172 616d 733d 4e6f 6e65 2c0d  el_params=None,.
+0000da40: 0a20 2020 2020 2020 2072 6567 7265 7373  .        regress
+0000da50: 6f72 5f66 6f72 6563 6173 745f 7472 616e  or_forecast_tran
+0000da60: 7366 6f72 6d61 7469 6f6e 733d 4e6f 6e65  sformations=None
+0000da70: 2c0d 0a20 2020 2020 2020 2069 6e63 6c75  ,..        inclu
+0000da80: 6465 5f68 6973 746f 7279 3d46 616c 7365  de_history=False
+0000da90: 2c0d 0a20 2020 2020 2020 2070 6173 745f  ,..        past_
+0000daa0: 696d 7061 6374 733d 4e6f 6e65 2c0d 0a20  impacts=None,.. 
+0000dab0: 2020 2029 3a0d 0a20 2020 2020 2020 2073     ):..        s
+0000dac0: 656c 662e 6466 203d 2073 656c 662e 7072  elf.df = self.pr
+0000dad0: 6570 726f 6365 7373 6572 2e74 7261 6e73  eprocesser.trans
+0000dae0: 666f 726d 2873 656c 662e 6466 290d 0a20  form(self.df).. 
+0000daf0: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
+0000db00: 6173 745f 696d 7061 6374 735f 696e 7465  ast_impacts_inte
+0000db10: 7276 656e 7469 6f6e 203d 3d20 2272 656d  rvention == "rem
+0000db20: 6f76 6522 3a0d 0a20 2020 2020 2020 2020  ove":..         
+0000db30: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0000db40: 2020 2020 2020 2020 2073 656c 662e 6466           self.df
+0000db50: 203d 2073 656c 662e 6466 202f 2028 3120   = self.df / (1 
+0000db60: 2b20 7061 7374 5f69 6d70 6163 7473 290d  + past_impacts).
+0000db70: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+0000db80: 6570 7420 5479 7065 4572 726f 723a 0d0a  ept TypeError:..
+0000db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dba0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+0000dbb0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0000dbc0: 2020 2020 2020 2022 6966 2075 7369 6e67         "if using
+0000dbd0: 2070 6173 7420 696d 7061 6374 2077 6974   past impact wit
+0000dbe0: 6820 6466 2075 7064 6174 6573 2c20 6d75  h df updates, mu
+0000dbf0: 7374 2070 6173 7320 7061 7374 5f69 6d70  st pass past_imp
+0000dc00: 6163 7473 2074 6f20 2e66 6974 5f64 6174  acts to .fit_dat
+0000dc10: 6120 6f72 202e 7072 6564 6963 7422 0d0a  a or .predict"..
+0000dc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000dc40: 6466 203d 2073 656c 662e 7363 616c 655f  df = self.scale_
+0000dc50: 6461 7461 2864 6629 0d0a 2020 2020 2020  data(df)..      
+0000dc60: 2020 280d 0a20 2020 2020 2020 2020 2020    (..           
+0000dc70: 2073 656c 662e 7265 6772 5f70 735f 666f   self.regr_ps_fo
+0000dc80: 7265 2c0d 0a20 2020 2020 2020 2020 2020  re,..           
+0000dc90: 2073 656c 662e 7573 655f 696d 7061 6374   self.use_impact
+0000dca0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0000dcb0: 7365 6c66 2e66 756c 6c5f 7265 6772 2c0d  self.full_regr,.
+0000dcc0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000dcd0: 662e 616c 6c5f 666c 6167 732c 0d0a 2020  f.all_flags,..  
+0000dce0: 2020 2020 2020 2920 3d20 7365 6c66 2e5f        ) = self._
+0000dcf0: 7072 6f63 6573 735f 7265 6772 6573 736f  process_regresso
+0000dd00: 7273 280d 0a20 2020 2020 2020 2020 2020  rs(..           
+0000dd10: 2064 663d 7365 6c66 2e64 662c 0d0a 2020   df=self.df,..  
+0000dd20: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+0000dd30: 7374 5f6c 656e 6774 683d 666f 7265 6361  st_length=foreca
+0000dd40: 7374 5f6c 656e 6774 682c 0d0a 2020 2020  st_length,..    
+0000dd50: 2020 2020 2020 2020 6675 7475 7265 5f72          future_r
+0000dd60: 6567 7265 7373 6f72 3d66 7574 7572 655f  egressor=future_
+0000dd70: 7265 6772 6573 736f 722c 0d0a 2020 2020  regressor,..    
+0000dd80: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
+0000dd90: 725f 7065 725f 7365 7269 6573 3d72 6567  r_per_series=reg
+0000dda0: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
+0000ddb0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0000ddc0: 666c 6167 5f72 6567 7265 7373 6f72 733d  flag_regressors=
+0000ddd0: 666c 6167 5f72 6567 7265 7373 6f72 732c  flag_regressors,
+0000dde0: 0d0a 2020 2020 2020 2020 2020 2020 6675  ..            fu
+0000ddf0: 7475 7265 5f69 6d70 6163 7473 3d66 7574  ture_impacts=fut
+0000de00: 7572 655f 696d 7061 6374 732c 0d0a 2020  ure_impacts,..  
+0000de10: 2020 2020 2020 2020 2020 7265 6772 6573            regres
+0000de20: 736f 725f 666f 7265 6361 7374 5f6d 6f64  sor_forecast_mod
+0000de30: 656c 3d72 6567 7265 7373 6f72 5f66 6f72  el=regressor_for
+0000de40: 6563 6173 745f 6d6f 6465 6c2c 0d0a 2020  ecast_model,..  
+0000de50: 2020 2020 2020 2020 2020 7265 6772 6573            regres
+0000de60: 736f 725f 666f 7265 6361 7374 5f6d 6f64  sor_forecast_mod
+0000de70: 656c 5f70 6172 616d 733d 7265 6772 6573  el_params=regres
+0000de80: 736f 725f 666f 7265 6361 7374 5f6d 6f64  sor_forecast_mod
+0000de90: 656c 5f70 6172 616d 732c 0d0a 2020 2020  el_params,..    
+0000dea0: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
+0000deb0: 725f 666f 7265 6361 7374 5f74 7261 6e73  r_forecast_trans
+0000dec0: 666f 726d 6174 696f 6e73 3d72 6567 7265  formations=regre
+0000ded0: 7373 6f72 5f66 6f72 6563 6173 745f 7472  ssor_forecast_tr
+0000dee0: 616e 7366 6f72 6d61 7469 6f6e 732c 0d0a  ansformations,..
+0000def0: 2020 2020 2020 2020 2020 2020 696e 636c              incl
+0000df00: 7564 655f 6869 7374 6f72 793d 696e 636c  ude_history=incl
+0000df10: 7564 655f 6869 7374 6f72 792c 0d0a 2020  ude_history,..  
+0000df20: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0000df30: 2073 656c 662e 7472 656e 645f 7472 6169   self.trend_trai
+0000df40: 6e20 3d20 7365 6c66 2e64 6620 2d20 7365  n = self.df - se
+0000df50: 6c66 2e5f 7072 6564 6963 745f 6c69 6e65  lf._predict_line
+0000df60: 6172 280d 0a20 2020 2020 2020 2020 2020  ar(..           
+0000df70: 2064 6174 6573 3d64 662e 696e 6465 782c   dates=df.index,
+0000df80: 0d0a 2020 2020 2020 2020 2020 2020 6869  ..            hi
+0000df90: 7374 6f72 795f 6466 3d73 656c 662e 6466  story_df=self.df
+0000dfa0: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
+0000dfb0: 7574 7572 655f 7265 6772 6573 736f 723d  uture_regressor=
+0000dfc0: 7365 6c66 2e66 756c 6c5f 7265 6772 2c0d  self.full_regr,.
+0000dfd0: 0a20 2020 2020 2020 2020 2020 2066 6c61  .            fla
+0000dfe0: 675f 7265 6772 6573 736f 7273 3d73 656c  g_regressors=sel
+0000dff0: 662e 616c 6c5f 666c 6167 732c 0d0a 2020  f.all_flags,..  
+0000e000: 2020 2020 2020 2020 2020 696d 7061 6374            impact
+0000e010: 733d 7365 6c66 2e75 7365 5f69 6d70 6163  s=self.use_impac
+0000e020: 7473 2c0d 0a20 2020 2020 2020 2020 2020  ts,..           
+0000e030: 2072 6567 7265 7373 6f72 5f70 6572 5f73   regressor_per_s
+0000e040: 6572 6965 733d 7365 6c66 2e72 6567 725f  eries=self.regr_
+0000e050: 7073 5f66 6f72 652c 0d0a 2020 2020 2020  ps_fore,..      
+0000e060: 2020 290d 0a20 2020 2020 2020 2069 6620    )..        if 
+0000e070: 7365 6c66 2e74 7265 6e64 5f77 696e 646f  self.trend_windo
+0000e080: 7720 6973 206e 6f74 204e 6f6e 653a 0d0a  w is not None:..
+0000e090: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e0a0: 2e74 7265 6e64 5f74 7261 696e 2c20 736c  .trend_train, sl
+0000e0b0: 6f70 652c 2069 6e74 6572 6365 7074 203d  ope, intercept =
+0000e0c0: 2073 656c 662e 726f 6c6c 696e 675f 7472   self.rolling_tr
+0000e0d0: 656e 6428 0d0a 2020 2020 2020 2020 2020  end(..          
+0000e0e0: 2020 2020 2020 7365 6c66 2e74 7265 6e64        self.trend
+0000e0f0: 5f74 7261 696e 2c20 6e70 2e61 7272 6179  _train, np.array
+0000e100: 2873 656c 662e 6372 6561 7465 5f74 2864  (self.create_t(d
+0000e110: 662e 696e 6465 7829 290d 0a20 2020 2020  f.index))..     
+0000e120: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0000e130: 2020 2020 2020 7365 6c66 2e74 7265 6e64        self.trend
+0000e140: 5f74 7261 696e 203d 2070 642e 4461 7461  _train = pd.Data
+0000e150: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
+0000e160: 2020 2020 2020 2020 7365 6c66 2e74 7265          self.tre
+0000e170: 6e64 5f74 7261 696e 2c20 696e 6465 783d  nd_train, index=
+0000e180: 6466 2e69 6e64 6578 2c20 636f 6c75 6d6e  df.index, column
+0000e190: 733d 6466 2e63 6f6c 756d 6e73 0d0a 2020  s=df.columns..  
+0000e1a0: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+0000e1b0: 2020 2064 6566 205f 7072 6f63 6573 735f     def _process_
+0000e1c0: 7265 6772 6573 736f 7273 280d 0a20 2020  regressors(..   
+0000e1d0: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
+0000e1e0: 2020 2020 6466 3d4e 6f6e 652c 0d0a 2020      df=None,..  
+0000e1f0: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
+0000e200: 656e 6774 683d 4e6f 6e65 2c0d 0a20 2020  ength=None,..   
+0000e210: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
+0000e220: 6573 736f 723d 4e6f 6e65 2c0d 0a20 2020  essor=None,..   
+0000e230: 2020 2020 2072 6567 7265 7373 6f72 5f70       regressor_p
+0000e240: 6572 5f73 6572 6965 733d 4e6f 6e65 2c0d  er_series=None,.
+0000e250: 0a20 2020 2020 2020 2066 6c61 675f 7265  .        flag_re
+0000e260: 6772 6573 736f 7273 3d4e 6f6e 652c 0d0a  gressors=None,..
+0000e270: 2020 2020 2020 2020 6675 7475 7265 5f69          future_i
+0000e280: 6d70 6163 7473 3d4e 6f6e 652c 0d0a 2020  mpacts=None,..  
+0000e290: 2020 2020 2020 7265 6772 6573 736f 725f        regressor_
+0000e2a0: 666f 7265 6361 7374 5f6d 6f64 656c 3d4e  forecast_model=N
+0000e2b0: 6f6e 652c 0d0a 2020 2020 2020 2020 7265  one,..        re
+0000e2c0: 6772 6573 736f 725f 666f 7265 6361 7374  gressor_forecast
+0000e2d0: 5f6d 6f64 656c 5f70 6172 616d 733d 4e6f  _model_params=No
+0000e2e0: 6e65 2c0d 0a20 2020 2020 2020 2072 6567  ne,..        reg
+0000e2f0: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
+0000e300: 7472 616e 7366 6f72 6d61 7469 6f6e 733d  transformations=
+0000e310: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2069  None,..        i
+0000e320: 6e63 6c75 6465 5f68 6973 746f 7279 3d54  nclude_history=T
+0000e330: 7275 652c 0d0a 2020 2020 293a 0d0a 2020  rue,..    ):..  
+0000e340: 2020 2020 2020 2320 6966 2066 7574 7572        # if futur
+0000e350: 6520 7265 6772 6573 736f 7273 2061 7265  e regressors are
+0000e360: 204e 6f6e 6520 2826 2055 5345 4429 2c20   None (& USED), 
+0000e370: 6275 7420 7765 7265 2070 726f 7669 6465  but were provide
+0000e380: 6420 666f 7220 6869 7374 6f72 792c 2069  d for history, i
+0000e390: 6e73 7465 6164 2075 7365 2066 6f72 6563  nstead use forec
+0000e3a0: 6173 7473 206f 6620 7468 6573 6520 6665  asts of these fe
+0000e3b0: 6174 7572 6573 2028 7761 726e 290d 0a20  atures (warn).. 
+0000e3c0: 2020 2020 2020 2066 756c 6c5f 7265 6772         full_regr
+0000e3d0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+0000e3e0: 2069 6620 280d 0a20 2020 2020 2020 2020   if (..         
+0000e3f0: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
+0000e400: 736f 7220 6973 204e 6f6e 650d 0a20 2020  sor is None..   
+0000e410: 2020 2020 2020 2020 2061 6e64 2073 656c           and sel
+0000e420: 662e 6675 7475 7265 5f72 6567 7265 7373  f.future_regress
+0000e430: 6f72 5f74 7261 696e 2069 7320 6e6f 7420  or_train is not 
+0000e440: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+0000e450: 2020 616e 6420 666f 7265 6361 7374 5f6c    and forecast_l
+0000e460: 656e 6774 6820 6973 206e 6f74 204e 6f6e  ength is not Non
+0000e470: 650d 0a20 2020 2020 2020 2029 3a0d 0a20  e..        ):.. 
+0000e480: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0000e490: 6c66 2e76 6572 626f 7365 203e 2030 3a0d  lf.verbose > 0:.
+0000e4a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e4b0: 2070 7269 6e74 280d 0a20 2020 2020 2020   print(..       
+0000e4c0: 2020 2020 2020 2020 2020 2020 2022 6675               "fu
+0000e4d0: 7475 7265 5f72 6567 7265 7373 6f72 206e  ture_regressor n
+0000e4e0: 6f74 2070 726f 7669 6465 6420 746f 2043  ot provided to C
+0000e4f0: 6173 7361 6e64 7261 2c20 7573 696e 6720  assandra, using 
+0000e500: 666f 7265 6361 7374 7320 6f66 2068 6973  forecasts of his
+0000e510: 746f 7269 6361 6c22 0d0a 2020 2020 2020  torical"..      
+0000e520: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+0000e530: 2020 2020 2020 2020 2066 7574 7572 655f           future_
+0000e540: 7265 6772 6573 736f 7220 3d20 6d6f 6465  regressor = mode
+0000e550: 6c5f 666f 7265 6361 7374 280d 0a20 2020  l_forecast(..   
+0000e560: 2020 2020 2020 2020 2020 2020 206d 6f64               mod
+0000e570: 656c 5f6e 616d 653d 7365 6c66 2e74 7265  el_name=self.tre
+0000e580: 6e64 5f6d 6f64 656c 5b27 4d6f 6465 6c27  nd_model['Model'
+0000e590: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0000e5a0: 2020 2069 6620 7265 6772 6573 736f 725f     if regressor_
+0000e5b0: 666f 7265 6361 7374 5f6d 6f64 656c 2069  forecast_model i
+0000e5c0: 7320 4e6f 6e65 0d0a 2020 2020 2020 2020  s None..        
+0000e5d0: 2020 2020 2020 2020 656c 7365 2072 6567          else reg
+0000e5e0: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
+0000e5f0: 6d6f 6465 6c2c 0d0a 2020 2020 2020 2020  model,..        
+0000e600: 2020 2020 2020 2020 6d6f 6465 6c5f 7061          model_pa
+0000e610: 7261 6d5f 6469 6374 3d73 656c 662e 7472  ram_dict=self.tr
+0000e620: 656e 645f 6d6f 6465 6c5b 274d 6f64 656c  end_model['Model
+0000e630: 5061 7261 6d65 7465 7273 275d 0d0a 2020  Parameters']..  
+0000e640: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000e650: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
+0000e660: 6173 745f 6d6f 6465 6c5f 7061 7261 6d73  ast_model_params
+0000e670: 2069 7320 4e6f 6e65 0d0a 2020 2020 2020   is None..      
+0000e680: 2020 2020 2020 2020 2020 656c 7365 2072            else r
+0000e690: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
+0000e6a0: 745f 6d6f 6465 6c5f 7061 7261 6d73 2c0d  t_model_params,.
+0000e6b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e6c0: 206d 6f64 656c 5f74 7261 6e73 666f 726d   model_transform
+0000e6d0: 5f64 6963 743d 7365 6c66 2e70 7265 7072  _dict=self.prepr
+0000e6e0: 6f63 6573 7369 6e67 5f74 7261 6e73 666f  ocessing_transfo
+0000e6f0: 726d 6174 696f 6e0d 0a20 2020 2020 2020  rmation..       
+0000e700: 2020 2020 2020 2020 2069 6620 7265 6772           if regr
+0000e710: 6573 736f 725f 666f 7265 6361 7374 5f74  essor_forecast_t
+0000e720: 7261 6e73 666f 726d 6174 696f 6e73 2069  ransformations i
+0000e730: 7320 4e6f 6e65 0d0a 2020 2020 2020 2020  s None..        
+0000e740: 2020 2020 2020 2020 656c 7365 2072 6567          else reg
+0000e750: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
+0000e760: 7472 616e 7366 6f72 6d61 7469 6f6e 732c  transformations,
+0000e770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e780: 2020 6466 5f74 7261 696e 3d73 656c 662e    df_train=self.
+0000e790: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
+0000e7a0: 5f74 7261 696e 2c0d 0a20 2020 2020 2020  _train,..       
+0000e7b0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+0000e7c0: 745f 6c65 6e67 7468 3d66 6f72 6563 6173  t_length=forecas
+0000e7d0: 745f 6c65 6e67 7468 2c0d 0a20 2020 2020  t_length,..     
+0000e7e0: 2020 2020 2020 2020 2020 2066 7265 7175             frequ
+0000e7f0: 656e 6379 3d73 656c 662e 6672 6571 7565  ency=self.freque
+0000e800: 6e63 792c 0d0a 2020 2020 2020 2020 2020  ncy,..          
+0000e810: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
+0000e820: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
+0000e830: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+0000e840: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
+0000e850: 2020 2020 2066 6169 6c5f 6f6e 5f66 6f72       fail_on_for
+0000e860: 6563 6173 745f 6e61 6e3d 4661 6c73 652c  ecast_nan=False,
+0000e870: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e880: 2020 7261 6e64 6f6d 5f73 6565 643d 7365    random_seed=se
+0000e890: 6c66 2e72 616e 646f 6d5f 7365 6564 2c0d  lf.random_seed,.
+0000e8a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e8b0: 2076 6572 626f 7365 3d73 656c 662e 7665   verbose=self.ve
+0000e8c0: 7262 6f73 652c 0d0a 2020 2020 2020 2020  rbose,..        
+0000e8d0: 2020 2020 2020 2020 6e5f 6a6f 6273 3d73          n_jobs=s
+0000e8e0: 656c 662e 6e5f 6a6f 6273 2c0d 0a20 2020  elf.n_jobs,..   
+0000e8f0: 2020 2020 2020 2020 2029 2e66 6f72 6563           ).forec
+0000e900: 6173 740d 0a20 2020 2020 2020 2020 2020  ast..           
+0000e910: 2066 756c 6c5f 7265 6772 203d 2070 642e   full_regr = pd.
+0000e920: 636f 6e63 6174 285b 7365 6c66 2e66 7574  concat([self.fut
+0000e930: 7572 655f 7265 6772 6573 736f 725f 7472  ure_regressor_tr
+0000e940: 6169 6e2c 2066 7574 7572 655f 7265 6772  ain, future_regr
+0000e950: 6573 736f 725d 290d 0a20 2020 2020 2020  essor])..       
+0000e960: 2069 6620 666f 7265 6361 7374 5f6c 656e   if forecast_len
+0000e970: 6774 6820 6973 204e 6f6e 653a 0d0a 2020  gth is None:..  
+0000e980: 2020 2020 2020 2020 2020 6578 7065 6374            expect
+0000e990: 6564 5f66 6f72 655f 6c65 6e20 3d20 6c65  ed_fore_len = le
+0000e9a0: 6e28 6466 290d 0a20 2020 2020 2020 2065  n(df)..        e
+0000e9b0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000e9c0: 2020 6578 7065 6374 6564 5f66 6f72 655f    expected_fore_
+0000e9d0: 6c65 6e20 3d20 280d 0a20 2020 2020 2020  len = (..       
+0000e9e0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+0000e9f0: 745f 6c65 6e67 7468 202b 206c 656e 2864  t_length + len(d
+0000ea00: 6629 2069 6620 696e 636c 7564 655f 6869  f) if include_hi
+0000ea10: 7374 6f72 7920 656c 7365 2066 6f72 6563  story else forec
+0000ea20: 6173 745f 6c65 6e67 7468 0d0a 2020 2020  ast_length..    
+0000ea30: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+0000ea40: 2020 2069 6620 6675 7475 7265 5f72 6567     if future_reg
+0000ea50: 7265 7373 6f72 2069 7320 6e6f 7420 4e6f  ressor is not No
+0000ea60: 6e65 2061 6e64 2073 656c 662e 7265 6772  ne and self.regr
+0000ea70: 6573 736f 7273 5f75 7365 643a 0d0a 2020  essors_used:..  
+0000ea80: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0000ea90: 2866 7574 7572 655f 7265 6772 6573 736f  (future_regresso
+0000eaa0: 7229 203d 3d20 6578 7065 6374 6564 5f66  r) == expected_f
+0000eab0: 6f72 655f 6c65 6e3a 0d0a 2020 2020 2020  ore_len:..      
+0000eac0: 2020 2020 2020 2020 2020 6675 6c6c 5f72            full_r
+0000ead0: 6567 7220 3d20 7365 6c66 2e72 6567 7265  egr = self.regre
+0000eae0: 7373 6f72 5f74 7261 6e73 666f 726d 6572  ssor_transformer
+0000eaf0: 2e74 7261 6e73 666f 726d 280d 0a20 2020  .transform(..   
 0000eb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eb10: 2020 2063 6c65 616e 5f72 6567 7265 7373     clean_regress
-0000eb20: 6f72 2866 7574 7572 655f 7265 6772 6573  or(future_regres
-0000eb30: 736f 7229 0d0a 2020 2020 2020 2020 2020  sor)..          
-0000eb40: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0000eb50: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0000eb60: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-0000eb70: 5f72 6567 7220 3d20 7064 2e63 6f6e 6361  _regr = pd.conca
-0000eb80: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-0000eb90: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+0000eb10: 2063 6c65 616e 5f72 6567 7265 7373 6f72   clean_regressor
+0000eb20: 2866 7574 7572 655f 7265 6772 6573 736f  (future_regresso
+0000eb30: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
+0000eb40: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+0000eb50: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000eb60: 2020 2020 2020 2020 2020 6675 6c6c 5f72            full_r
+0000eb70: 6567 7220 3d20 7064 2e63 6f6e 6361 7428  egr = pd.concat(
+0000eb80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000eb90: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
 0000eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ebb0: 2020 2073 656c 662e 6675 7475 7265 5f72     self.future_r
-0000ebc0: 6567 7265 7373 6f72 5f74 7261 696e 2c0d  egressor_train,.
-0000ebd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ebe0: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
-0000ebf0: 6772 6573 736f 725f 7472 616e 7366 6f72  gressor_transfor
-0000ec00: 6d65 722e 7472 616e 7366 6f72 6d28 0d0a  mer.transform(..
+0000ebb0: 2073 656c 662e 6675 7475 7265 5f72 6567   self.future_reg
+0000ebc0: 7265 7373 6f72 5f74 7261 696e 2c0d 0a20  ressor_train,.. 
+0000ebd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ebe0: 2020 2020 2020 2073 656c 662e 7265 6772         self.regr
+0000ebf0: 6573 736f 725f 7472 616e 7366 6f72 6d65  essor_transforme
+0000ec00: 722e 7472 616e 7366 6f72 6d28 0d0a 2020  r.transform(..  
 0000ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec20: 2020 2020 2020 2020 2020 2020 636c 6561              clea
-0000ec30: 6e5f 7265 6772 6573 736f 7228 0d0a 2020  n_regressor(..  
+0000ec20: 2020 2020 2020 2020 2020 636c 6561 6e5f            clean_
+0000ec30: 7265 6772 6573 736f 7228 0d0a 2020 2020  regressor(..    
 0000ec40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec50: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-0000ec60: 7475 7265 5f72 6567 7265 7373 6f72 2e6c  ture_regressor.l
-0000ec70: 6f63 5b0d 0a20 2020 2020 2020 2020 2020  oc[..           
+0000ec50: 2020 2020 2020 2020 2020 2020 6675 7475              futu
+0000ec60: 7265 5f72 6567 7265 7373 6f72 2e6c 6f63  re_regressor.loc
+0000ec70: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
 0000ec80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec90: 2020 2020 2020 2020 2066 7574 7572 655f           future_
-0000eca0: 7265 6772 6573 736f 722e 696e 6465 782e  regressor.index.
-0000ecb0: 6469 6666 6572 656e 6365 280d 0a20 2020  difference(..   
+0000ec90: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+0000eca0: 6772 6573 736f 722e 696e 6465 782e 6469  gressor.index.di
+0000ecb0: 6666 6572 656e 6365 280d 0a20 2020 2020  fference(..     
 0000ecc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ecd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ece0: 2020 2020 2073 656c 662e 6675 7475 7265       self.future
-0000ecf0: 5f72 6567 7265 7373 6f72 5f74 7261 696e  _regressor_train
-0000ed00: 2e69 6e64 6578 0d0a 2020 2020 2020 2020  .index..        
+0000ece0: 2020 2073 656c 662e 6675 7475 7265 5f72     self.future_r
+0000ecf0: 6567 7265 7373 6f72 5f74 7261 696e 2e69  egressor_train.i
+0000ed00: 6e64 6578 0d0a 2020 2020 2020 2020 2020  ndex..          
 0000ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed20: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0000ed20: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
 0000ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ed40: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-0000ed50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ed60: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-0000ed70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ed80: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
-0000ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eda0: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0000edb0: 2020 2020 290d 0a20 2020 2020 2020 2069      )..        i
-0000edc0: 6620 280d 0a20 2020 2020 2020 2020 2020  f (..           
-0000edd0: 2066 6c61 675f 7265 6772 6573 736f 7273   flag_regressors
-0000ede0: 2069 7320 6e6f 7420 4e6f 6e65 0d0a 2020   is not None..  
-0000edf0: 2020 2020 2020 2020 2020 616e 6420 666f            and fo
-0000ee00: 7265 6361 7374 5f6c 656e 6774 6820 6973  recast_length is
-0000ee10: 206e 6f74 204e 6f6e 650d 0a20 2020 2020   not None..     
-0000ee20: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
-0000ee30: 7265 6772 6573 736f 7273 5f75 7365 640d  regressors_used.
-0000ee40: 0a20 2020 2020 2020 2029 3a0d 0a20 2020  .        ):..   
-0000ee50: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-0000ee60: 666c 6167 5f72 6567 7265 7373 6f72 7329  flag_regressors)
-0000ee70: 203d 3d20 6578 7065 6374 6564 5f66 6f72   == expected_for
-0000ee80: 655f 6c65 6e3a 0d0a 2020 2020 2020 2020  e_len:..        
-0000ee90: 2020 2020 2020 2020 616c 6c5f 666c 6167          all_flag
-0000eea0: 7320 3d20 636c 6561 6e5f 7265 6772 6573  s = clean_regres
-0000eeb0: 736f 7228 666c 6167 5f72 6567 7265 7373  sor(flag_regress
-0000eec0: 6f72 732c 2070 7265 6669 783d 2272 6567  ors, prefix="reg
-0000eed0: 7266 6c61 6773 5f22 290d 0a20 2020 2020  rflags_")..     
-0000eee0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0000eef0: 2020 2020 2020 2020 2020 2020 2020 616c                al
-0000ef00: 6c5f 666c 6167 7320 3d20 7064 2e63 6f6e  l_flags = pd.con
-0000ef10: 6361 7428 0d0a 2020 2020 2020 2020 2020  cat(..          
-0000ef20: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
+0000ed40: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
+0000ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ed60: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0000ed70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ed80: 2020 2020 2020 2029 2c0d 0a20 2020 2020         ),..     
+0000ed90: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+0000eda0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000edb0: 2020 290d 0a20 2020 2020 2020 2069 6620    )..        if 
+0000edc0: 280d 0a20 2020 2020 2020 2020 2020 2066  (..            f
+0000edd0: 6c61 675f 7265 6772 6573 736f 7273 2069  lag_regressors i
+0000ede0: 7320 6e6f 7420 4e6f 6e65 0d0a 2020 2020  s not None..    
+0000edf0: 2020 2020 2020 2020 616e 6420 666f 7265          and fore
+0000ee00: 6361 7374 5f6c 656e 6774 6820 6973 206e  cast_length is n
+0000ee10: 6f74 204e 6f6e 650d 0a20 2020 2020 2020  ot None..       
+0000ee20: 2020 2020 2061 6e64 2073 656c 662e 7265       and self.re
+0000ee30: 6772 6573 736f 7273 5f75 7365 640d 0a20  gressors_used.. 
+0000ee40: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
+0000ee50: 2020 2020 2020 2069 6620 6c65 6e28 666c         if len(fl
+0000ee60: 6167 5f72 6567 7265 7373 6f72 7329 203d  ag_regressors) =
+0000ee70: 3d20 6578 7065 6374 6564 5f66 6f72 655f  = expected_fore_
+0000ee80: 6c65 6e3a 0d0a 2020 2020 2020 2020 2020  len:..          
+0000ee90: 2020 2020 2020 616c 6c5f 666c 6167 7320        all_flags 
+0000eea0: 3d20 636c 6561 6e5f 7265 6772 6573 736f  = clean_regresso
+0000eeb0: 7228 666c 6167 5f72 6567 7265 7373 6f72  r(flag_regressor
+0000eec0: 732c 2070 7265 6669 783d 2272 6567 7266  s, prefix="regrf
+0000eed0: 6c61 6773 5f22 290d 0a20 2020 2020 2020  lags_")..       
+0000eee0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0000eef0: 2020 2020 2020 2020 2020 2020 616c 6c5f              all_
+0000ef00: 666c 6167 7320 3d20 7064 2e63 6f6e 6361  flags = pd.conca
+0000ef10: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+0000ef20: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
 0000ef30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ef40: 2020 2020 2073 656c 662e 666c 6167 5f72       self.flag_r
-0000ef50: 6567 7265 7373 6f72 5f74 7261 696e 2c0d  egressor_train,.
-0000ef60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ef70: 2020 2020 2020 2020 2063 6c65 616e 5f72           clean_r
-0000ef80: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+0000ef40: 2020 2073 656c 662e 666c 6167 5f72 6567     self.flag_reg
+0000ef50: 7265 7373 6f72 5f74 7261 696e 2c0d 0a20  ressor_train,.. 
+0000ef60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ef70: 2020 2020 2020 2063 6c65 616e 5f72 6567         clean_reg
+0000ef80: 7265 7373 6f72 280d 0a20 2020 2020 2020  ressor(..       
 0000ef90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000efa0: 2020 2020 2020 2066 6c61 675f 7265 6772         flag_regr
-0000efb0: 6573 736f 7273 2e6c 6f63 5b0d 0a20 2020  essors.loc[..   
+0000efa0: 2020 2020 2066 6c61 675f 7265 6772 6573       flag_regres
+0000efb0: 736f 7273 2e6c 6f63 5b0d 0a20 2020 2020  sors.loc[..     
 0000efc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000efd0: 2020 2020 2020 2020 2020 2020 2066 6c61               fla
-0000efe0: 675f 7265 6772 6573 736f 7273 2e69 6e64  g_regressors.ind
-0000eff0: 6578 2e64 6966 6665 7265 6e63 6528 0d0a  ex.difference(..
+0000efd0: 2020 2020 2020 2020 2020 2066 6c61 675f             flag_
+0000efe0: 7265 6772 6573 736f 7273 2e69 6e64 6578  regressors.index
+0000eff0: 2e64 6966 6665 7265 6e63 6528 0d0a 2020  .difference(..  
 0000f000: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000f010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f020: 2020 2020 7365 6c66 2e66 6c61 675f 7265      self.flag_re
-0000f030: 6772 6573 736f 725f 7472 6169 6e2e 696e  gressor_train.in
-0000f040: 6465 780d 0a20 2020 2020 2020 2020 2020  dex..           
+0000f020: 2020 7365 6c66 2e66 6c61 675f 7265 6772    self.flag_regr
+0000f030: 6573 736f 725f 7472 6169 6e2e 696e 6465  essor_train.inde
+0000f040: 780d 0a20 2020 2020 2020 2020 2020 2020  x..             
 0000f050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f060: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000f060: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
 0000f070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f080: 2020 2020 5d2c 0d0a 2020 2020 2020 2020      ],..        
+0000f080: 2020 5d2c 0d0a 2020 2020 2020 2020 2020    ],..          
 0000f090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f0a0: 2020 2020 7072 6566 6978 3d22 7265 6772      prefix="regr
-0000f0b0: 666c 6167 735f 222c 0d0a 2020 2020 2020  flags_",..      
+0000f0a0: 2020 7072 6566 6978 3d22 7265 6772 666c    prefix="regrfl
+0000f0b0: 6167 735f 222c 0d0a 2020 2020 2020 2020  ags_",..        
 0000f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f0d0: 2020 292c 0d0a 2020 2020 2020 2020 2020    ),..          
-0000f0e0: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
-0000f0f0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0000f100: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000f110: 2020 2020 2020 2020 2020 2069 6620 280d             if (.
-0000f120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f130: 2073 656c 662e 666c 6167 5f72 6567 7265   self.flag_regre
-0000f140: 7373 6f72 5f74 7261 696e 2069 7320 6e6f  ssor_train is no
-0000f150: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
-0000f160: 2020 2020 2020 2020 616e 6420 666f 7265          and fore
-0000f170: 6361 7374 5f6c 656e 6774 6820 6973 206e  cast_length is n
-0000f180: 6f74 204e 6f6e 650d 0a20 2020 2020 2020  ot None..       
-0000f190: 2020 2020 2020 2020 2061 6e64 2073 656c           and sel
-0000f1a0: 662e 7265 6772 6573 736f 7273 5f75 7365  f.regressors_use
-0000f1b0: 640d 0a20 2020 2020 2020 2020 2020 2029  d..            )
-0000f1c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000f1d0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-0000f1e0: 726f 7228 2266 6c61 675f 7265 6772 6573  ror("flag_regres
-0000f1f0: 736f 7273 2073 7570 706c 6965 6420 696e  sors supplied in
-0000f200: 2074 7261 696e 696e 6720 6275 7420 6e6f   training but no
-0000f210: 7420 7072 6564 6963 7422 290d 0a20 2020  t predict")..   
-0000f220: 2020 2020 2020 2020 2061 6c6c 5f66 6c61           all_fla
-0000f230: 6773 203d 2073 656c 662e 666c 6167 5f72  gs = self.flag_r
-0000f240: 6567 7265 7373 6f72 5f74 7261 696e 0d0a  egressor_train..
-0000f250: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-0000f260: 655f 696d 7061 6374 7320 6973 206e 6f74  e_impacts is not
-0000f270: 204e 6f6e 6520 616e 6420 666f 7265 6361   None and foreca
-0000f280: 7374 5f6c 656e 6774 6820 6973 206e 6f74  st_length is not
-0000f290: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0000f2a0: 2020 2020 6966 206c 656e 2866 7574 7572      if len(futur
-0000f2b0: 655f 696d 7061 6374 7329 203d 3d20 6578  e_impacts) == ex
-0000f2c0: 7065 6374 6564 5f66 6f72 655f 6c65 6e3a  pected_fore_len:
-0000f2d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f2e0: 2020 696d 7061 6374 7320 3d20 6675 7475    impacts = futu
-0000f2f0: 7265 5f69 6d70 6163 7473 0d0a 2020 2020  re_impacts..    
-0000f300: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0000f310: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000f320: 6d70 6163 7473 203d 2070 642e 636f 6e63  mpacts = pd.conc
-0000f330: 6174 285b 7365 6c66 2e70 6173 745f 696d  at([self.past_im
-0000f340: 7061 6374 732c 2066 7574 7572 655f 696d  pacts, future_im
-0000f350: 7061 6374 735d 290d 0a20 2020 2020 2020  pacts])..       
-0000f360: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-0000f370: 2020 2020 696d 7061 6374 7320 3d20 7365      impacts = se
-0000f380: 6c66 2e70 6173 745f 696d 7061 6374 730d  lf.past_impacts.
-0000f390: 0a20 2020 2020 2020 2023 2049 2064 6f6e  .        # I don
-0000f3a0: 2774 2074 6869 6e6b 2074 6865 7265 2069  't think there i
-0000f3b0: 7320 6120 6d6f 7265 2065 6666 6963 6965  s a more efficie
-0000f3c0: 6e74 2077 6179 2074 6f20 636f 6d62 696e  nt way to combin
-0000f3d0: 6520 7468 6573 6520 6469 6374 7320 6f66  e these dicts of
-0000f3e0: 2064 6174 6166 7261 6d65 730d 0a20 2020   dataframes..   
-0000f3f0: 2020 2020 2069 6620 7265 6772 6573 736f       if regresso
-0000f400: 725f 7065 725f 7365 7269 6573 2069 7320  r_per_series is 
-0000f410: 6e6f 7420 4e6f 6e65 2061 6e64 2073 656c  not None and sel
-0000f420: 662e 7265 6772 6573 736f 7273 5f75 7365  f.regressors_use
-0000f430: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
-0000f440: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-0000f450: 6528 7265 6772 6573 736f 725f 7065 725f  e(regressor_per_
-0000f460: 7365 7269 6573 2c20 6469 6374 293a 0d0a  series, dict):..
-0000f470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f480: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-0000f490: 2822 7265 6772 6573 736f 725f 7065 725f  ("regressor_per_
-0000f4a0: 7365 7269 6573 206d 7573 7420 6265 2064  series must be d
-0000f4b0: 6963 7422 290d 0a20 2020 2020 2020 2020  ict")..         
-0000f4c0: 2020 2072 6567 725f 7073 5f66 6f72 6520     regr_ps_fore 
-0000f4d0: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
-0000f4e0: 2020 666f 7220 6b65 792c 2076 616c 7565    for key, value
-0000f4f0: 2069 6e20 7365 6c66 2e72 6567 725f 7065   in self.regr_pe
-0000f500: 725f 7365 7269 6573 5f74 722e 6974 656d  r_series_tr.item
-0000f510: 7328 293a 0d0a 2020 2020 2020 2020 2020  s():..          
-0000f520: 2020 2020 2020 6966 206c 656e 2872 6567        if len(reg
-0000f530: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
-0000f540: 735b 6b65 795d 2920 3d3d 2065 7870 6563  s[key]) == expec
-0000f550: 7465 645f 666f 7265 5f6c 656e 3a0d 0a20  ted_fore_len:.. 
+0000f0d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0000f0e0: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
+0000f0f0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0000f100: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0000f110: 2020 2020 2020 2020 2069 6620 280d 0a20           if (.. 
+0000f120: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000f130: 656c 662e 666c 6167 5f72 6567 7265 7373  elf.flag_regress
+0000f140: 6f72 5f74 7261 696e 2069 7320 6e6f 7420  or_train is not 
+0000f150: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+0000f160: 2020 2020 2020 616e 6420 666f 7265 6361        and foreca
+0000f170: 7374 5f6c 656e 6774 6820 6973 206e 6f74  st_length is not
+0000f180: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
+0000f190: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
+0000f1a0: 7265 6772 6573 736f 7273 5f75 7365 640d  regressors_used.
+0000f1b0: 0a20 2020 2020 2020 2020 2020 2029 3a0d  .            ):.
+0000f1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f1d0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+0000f1e0: 7228 2266 6c61 675f 7265 6772 6573 736f  r("flag_regresso
+0000f1f0: 7273 2073 7570 706c 6965 6420 696e 2074  rs supplied in t
+0000f200: 7261 696e 696e 6720 6275 7420 6e6f 7420  raining but not 
+0000f210: 7072 6564 6963 7422 290d 0a20 2020 2020  predict")..     
+0000f220: 2020 2020 2020 2061 6c6c 5f66 6c61 6773         all_flags
+0000f230: 203d 2073 656c 662e 666c 6167 5f72 6567   = self.flag_reg
+0000f240: 7265 7373 6f72 5f74 7261 696e 0d0a 2020  ressor_train..  
+0000f250: 2020 2020 2020 6966 2066 7574 7572 655f        if future_
+0000f260: 696d 7061 6374 7320 6973 206e 6f74 204e  impacts is not N
+0000f270: 6f6e 6520 616e 6420 666f 7265 6361 7374  one and forecast
+0000f280: 5f6c 656e 6774 6820 6973 206e 6f74 204e  _length is not N
+0000f290: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+0000f2a0: 2020 6966 206c 656e 2866 7574 7572 655f    if len(future_
+0000f2b0: 696d 7061 6374 7329 203d 3d20 6578 7065  impacts) == expe
+0000f2c0: 6374 6564 5f66 6f72 655f 6c65 6e3a 0d0a  cted_fore_len:..
+0000f2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f2e0: 696d 7061 6374 7320 3d20 6675 7475 7265  impacts = future
+0000f2f0: 5f69 6d70 6163 7473 0d0a 2020 2020 2020  _impacts..      
+0000f300: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0000f310: 2020 2020 2020 2020 2020 2020 2069 6d70               imp
+0000f320: 6163 7473 203d 2070 642e 636f 6e63 6174  acts = pd.concat
+0000f330: 285b 7365 6c66 2e70 6173 745f 696d 7061  ([self.past_impa
+0000f340: 6374 732c 2066 7574 7572 655f 696d 7061  cts, future_impa
+0000f350: 6374 735d 290d 0a20 2020 2020 2020 2065  cts])..        e
+0000f360: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+0000f370: 2020 696d 7061 6374 7320 3d20 7365 6c66    impacts = self
+0000f380: 2e70 6173 745f 696d 7061 6374 730d 0a20  .past_impacts.. 
+0000f390: 2020 2020 2020 2023 2049 2064 6f6e 2774         # I don't
+0000f3a0: 2074 6869 6e6b 2074 6865 7265 2069 7320   think there is 
+0000f3b0: 6120 6d6f 7265 2065 6666 6963 6965 6e74  a more efficient
+0000f3c0: 2077 6179 2074 6f20 636f 6d62 696e 6520   way to combine 
+0000f3d0: 7468 6573 6520 6469 6374 7320 6f66 2064  these dicts of d
+0000f3e0: 6174 6166 7261 6d65 730d 0a20 2020 2020  ataframes..     
+0000f3f0: 2020 2069 6620 7265 6772 6573 736f 725f     if regressor_
+0000f400: 7065 725f 7365 7269 6573 2069 7320 6e6f  per_series is no
+0000f410: 7420 4e6f 6e65 2061 6e64 2073 656c 662e  t None and self.
+0000f420: 7265 6772 6573 736f 7273 5f75 7365 643a  regressors_used:
+0000f430: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000f440: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0000f450: 7265 6772 6573 736f 725f 7065 725f 7365  regressor_per_se
+0000f460: 7269 6573 2c20 6469 6374 293a 0d0a 2020  ries, dict):..  
+0000f470: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+0000f480: 6973 6520 5661 6c75 6545 7272 6f72 2822  ise ValueError("
+0000f490: 7265 6772 6573 736f 725f 7065 725f 7365  regressor_per_se
+0000f4a0: 7269 6573 206d 7573 7420 6265 2064 6963  ries must be dic
+0000f4b0: 7422 290d 0a20 2020 2020 2020 2020 2020  t")..           
+0000f4c0: 2072 6567 725f 7073 5f66 6f72 6520 3d20   regr_ps_fore = 
+0000f4d0: 7b7d 0d0a 2020 2020 2020 2020 2020 2020  {}..            
+0000f4e0: 666f 7220 6b65 792c 2076 616c 7565 2069  for key, value i
+0000f4f0: 6e20 7365 6c66 2e72 6567 725f 7065 725f  n self.regr_per_
+0000f500: 7365 7269 6573 5f74 722e 6974 656d 7328  series_tr.items(
+0000f510: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000f520: 2020 2020 6966 206c 656e 2872 6567 7265      if len(regre
+0000f530: 7373 6f72 5f70 6572 5f73 6572 6965 735b  ssor_per_series[
+0000f540: 6b65 795d 2920 3d3d 2065 7870 6563 7465  key]) == expecte
+0000f550: 645f 666f 7265 5f6c 656e 3a0d 0a20 2020  d_fore_len:..   
 0000f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f570: 2020 2072 6567 725f 7073 5f66 6f72 655b     regr_ps_fore[
-0000f580: 6b65 795d 203d 2072 6567 7265 7373 6f72  key] = regressor
-0000f590: 5f70 6572 5f73 6572 6965 735b 6b65 795d  _per_series[key]
-0000f5a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000f5b0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0000f5c0: 2020 2020 2020 2020 2020 2020 2072 6567               reg
-0000f5d0: 725f 7073 5f66 6f72 655b 6b65 795d 203d  r_ps_fore[key] =
-0000f5e0: 2070 642e 636f 6e63 6174 280d 0a20 2020   pd.concat(..   
+0000f570: 2072 6567 725f 7073 5f66 6f72 655b 6b65   regr_ps_fore[ke
+0000f580: 795d 203d 2072 6567 7265 7373 6f72 5f70  y] = regressor_p
+0000f590: 6572 5f73 6572 6965 735b 6b65 795d 0d0a  er_series[key]..
+0000f5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f5b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000f5c0: 2020 2020 2020 2020 2020 2072 6567 725f             regr_
+0000f5d0: 7073 5f66 6f72 655b 6b65 795d 203d 2070  ps_fore[key] = p
+0000f5e0: 642e 636f 6e63 6174 280d 0a20 2020 2020  d.concat(..     
 0000f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f600: 2020 2020 205b 7365 6c66 2e72 6567 725f       [self.regr_
-0000f610: 7065 725f 7365 7269 6573 5f74 725b 6b65  per_series_tr[ke
-0000f620: 795d 2c20 7265 6772 6573 736f 725f 7065  y], regressor_pe
-0000f630: 725f 7365 7269 6573 5b6b 6579 5d5d 0d0a  r_series[key]]..
+0000f600: 2020 205b 7365 6c66 2e72 6567 725f 7065     [self.regr_pe
+0000f610: 725f 7365 7269 6573 5f74 725b 6b65 795d  r_series_tr[key]
+0000f620: 2c20 7265 6772 6573 736f 725f 7065 725f  , regressor_per_
+0000f630: 7365 7269 6573 5b6b 6579 5d5d 0d0a 2020  series[key]]..  
 0000f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f650: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0000f660: 2020 2020 2020 2020 2020 2072 6567 725f             regr_
-0000f670: 7073 5f66 6f72 655b 6b65 795d 203d 2072  ps_fore[key] = r
-0000f680: 6567 725f 7073 5f66 6f72 655b 6b65 795d  egr_ps_fore[key]
-0000f690: 2e69 6c6f 635b 0d0a 2020 2020 2020 2020  .iloc[..        
-0000f6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f6b0: 7e72 6567 725f 7073 5f66 6f72 655b 6b65  ~regr_ps_fore[ke
-0000f6c0: 795d 2e69 6e64 6578 2e64 7570 6c69 6361  y].index.duplica
-0000f6d0: 7465 6428 290d 0a20 2020 2020 2020 2020  ted()..         
-0000f6e0: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
-0000f6f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000f700: 6c66 2e72 6567 725f 7073 203d 2072 6567  lf.regr_ps = reg
-0000f710: 725f 7073 5f66 6f72 650d 0a20 2020 2020  r_ps_fore..     
-0000f720: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0000f730: 2020 2020 2020 7265 6772 5f70 735f 666f        regr_ps_fo
-0000f740: 7265 203d 2073 656c 662e 7265 6772 5f70  re = self.regr_p
-0000f750: 6572 5f73 6572 6965 735f 7472 0d0a 2020  er_series_tr..  
-0000f760: 2020 2020 2020 7265 7475 726e 2072 6567        return reg
-0000f770: 725f 7073 5f66 6f72 652c 2069 6d70 6163  r_ps_fore, impac
-0000f780: 7473 2c20 6675 6c6c 5f72 6567 722c 2061  ts, full_regr, a
-0000f790: 6c6c 5f66 6c61 6773 0d0a 0d0a 2020 2020  ll_flags....    
-0000f7a0: 6465 6620 7072 6564 6963 7428 0d0a 2020  def predict(..  
-0000f7b0: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
-0000f7c0: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
-0000f7d0: 6e67 7468 3d4e 6f6e 652c 0d0a 2020 2020  ngth=None,..    
-0000f7e0: 2020 2020 696e 636c 7564 655f 6869 7374      include_hist
-0000f7f0: 6f72 793d 4661 6c73 652c 0d0a 2020 2020  ory=False,..    
-0000f800: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
-0000f810: 7373 6f72 3d4e 6f6e 652c 0d0a 2020 2020  ssor=None,..    
-0000f820: 2020 2020 7265 6772 6573 736f 725f 7065      regressor_pe
-0000f830: 725f 7365 7269 6573 3d4e 6f6e 652c 0d0a  r_series=None,..
-0000f840: 2020 2020 2020 2020 666c 6167 5f72 6567          flag_reg
-0000f850: 7265 7373 6f72 733d 4e6f 6e65 2c0d 0a20  ressors=None,.. 
-0000f860: 2020 2020 2020 2066 7574 7572 655f 696d         future_im
-0000f870: 7061 6374 733d 4e6f 6e65 2c0d 0a20 2020  pacts=None,..   
-0000f880: 2020 2020 206e 6577 5f64 663d 4e6f 6e65       new_df=None
-0000f890: 2c0d 0a20 2020 2020 2020 2072 6567 7265  ,..        regre
-0000f8a0: 7373 6f72 5f66 6f72 6563 6173 745f 6d6f  ssor_forecast_mo
-0000f8b0: 6465 6c3d 4e6f 6e65 2c0d 0a20 2020 2020  del=None,..     
-0000f8c0: 2020 2072 6567 7265 7373 6f72 5f66 6f72     regressor_for
-0000f8d0: 6563 6173 745f 6d6f 6465 6c5f 7061 7261  ecast_model_para
-0000f8e0: 6d73 3d4e 6f6e 652c 0d0a 2020 2020 2020  ms=None,..      
-0000f8f0: 2020 7265 6772 6573 736f 725f 666f 7265    regressor_fore
-0000f900: 6361 7374 5f74 7261 6e73 666f 726d 6174  cast_transformat
-0000f910: 696f 6e73 3d4e 6f6e 652c 0d0a 2020 2020  ions=None,..    
-0000f920: 2020 2020 696e 636c 7564 655f 6f72 6761      include_orga
-0000f930: 6e69 633d 4661 6c73 652c 0d0a 2020 2020  nic=False,..    
-0000f940: 2020 2020 6466 3d4e 6f6e 652c 2020 2320      df=None,  # 
-0000f950: 746f 2062 6520 636f 6d70 6174 6961 626c  to be compatiabl
-0000f960: 6520 7769 7468 206f 7468 6572 732c 2069  e with others, i
-0000f970: 6465 6e74 6963 616c 2074 6f20 6e65 775f  dentical to new_
-0000f980: 6466 0d0a 2020 2020 2020 2020 7061 7374  df..        past
-0000f990: 5f69 6d70 6163 7473 3d4e 6f6e 652c 2020  _impacts=None,  
-0000f9a0: 2320 6f6e 6c79 2069 6620 6e65 775f 6466  # only if new_df
-0000f9b0: 2070 726f 7669 6465 640d 0a20 2020 2029   provided..    )
-0000f9c0: 3a0d 0a20 2020 2020 2020 2022 2222 4765  :..        """Ge
-0000f9d0: 6e65 7261 7465 2061 2066 6f72 6563 6173  nerate a forecas
-0000f9e0: 742e 0d0a 0d0a 2020 2020 2020 2020 6675  t.....        fu
-0000f9f0: 7475 7265 5f72 6567 7265 7373 6f72 2061  ture_regressor a
-0000fa00: 6e64 2072 6567 7265 7373 6f72 5f70 6572  nd regressor_per
-0000fa10: 5f73 6572 6965 7320 7368 6f75 6c64 206f  _series should o
-0000fa20: 6e6c 7920 696e 636c 7564 6520 6e65 7720  nly include new 
-0000fa30: 6675 7475 7265 2076 616c 7565 732c 2068  future values, h
-0000fa40: 6973 746f 7279 2069 7320 616c 7265 6164  istory is alread
-0000fa50: 7920 7374 6f72 6564 0d0a 2020 2020 2020  y stored..      
-0000fa60: 2020 7468 6579 2073 686f 756c 6420 6d61    they should ma
-0000fa70: 7463 6820 6f6e 2066 6f72 6563 6173 745f  tch on forecast_
-0000fa80: 6c65 6e67 7468 2061 6e64 2069 6e64 6578  length and index
-0000fa90: 206f 6620 666f 7265 6361 7374 730d 0a0d   of forecasts...
-0000faa0: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
-0000fab0: 2020 2020 2020 2020 2020 2020 666f 7265              fore
-0000fac0: 6361 7374 5f6c 656e 6774 6820 2869 6e74  cast_length (int
-0000fad0: 293a 2073 7465 7073 2061 6865 6164 2074  ): steps ahead t
-0000fae0: 6f20 7072 6564 6963 742c 206f 7220 4e6f  o predict, or No
-0000faf0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-0000fb00: 696e 636c 7564 655f 6869 7374 6f72 7920  include_history 
-0000fb10: 2862 6f6f 6c29 3a20 696e 636c 7564 6520  (bool): include 
-0000fb20: 7061 7374 2070 7265 6469 6374 696f 6e73  past predictions
-0000fb30: 2069 6620 5472 7565 0d0a 2020 2020 2020   if True..      
-0000fb40: 2020 2020 2020 616c 6c20 7468 6520 7361        all the sa
-0000fb50: 6d65 2072 6567 7265 7373 6f72 2061 7267  me regressor arg
-0000fb60: 7320 6173 202e 6669 742c 2062 7574 2066  s as .fit, but f
-0000fb70: 7574 7572 6520 666f 7265 6361 7374 2076  uture forecast v
-0000fb80: 6572 7369 6f6e 7320 6865 7265 0d0a 2020  ersions here..  
-0000fb90: 2020 2020 2020 2020 2020 6675 7475 7265            future
-0000fba0: 5f69 6d70 6163 7473 2028 7064 2e44 6174  _impacts (pd.Dat
-0000fbb0: 6146 7261 6d65 293a 206c 696b 6520 7061  aFrame): like pa
-0000fbc0: 7374 2069 6d70 6163 7473 2062 7574 2066  st impacts but f
-0000fbd0: 6f72 2074 6865 2066 6f72 6563 6173 7420  or the forecast 
-0000fbe0: 6168 6561 640d 0a20 2020 2020 2020 2020  ahead..         
-0000fbf0: 2020 206e 6577 5f64 6620 2870 642e 4461     new_df (pd.Da
-0000fc00: 7461 4672 616d 6529 3a20 6f72 2064 662c  taFrame): or df,
-0000fc10: 2065 7175 6976 616c 656e 7420 746f 2066   equivalent to f
-0000fc20: 6974 5f64 6174 6120 7570 6461 7465 0d0a  it_data update..
-0000fc30: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000fc40: 2020 2020 2073 656c 662e 666f 7265 6361       self.foreca
-0000fc50: 7374 5f6c 656e 6774 6820 3d20 666f 7265  st_length = fore
-0000fc60: 6361 7374 5f6c 656e 6774 680d 0a20 2020  cast_length..   
-0000fc70: 2020 2020 2070 7265 6469 6374 5374 6172       predictStar
-0000fc80: 7454 696d 6520 3d20 7365 6c66 2e74 696d  tTime = self.tim
-0000fc90: 6528 290d 0a20 2020 2020 2020 2069 6620  e()..        if 
-0000fca0: 7365 6c66 2e74 7265 6e64 5f74 7261 696e  self.trend_train
-0000fcb0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0000fcc0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000fcd0: 7565 4572 726f 7228 2243 6173 7361 6e64  ueError("Cassand
-0000fce0: 7261 206d 7573 7420 6669 7273 7420 6265  ra must first be
-0000fcf0: 202e 6669 7428 2920 7375 6363 6573 7366   .fit() successf
-0000fd00: 756c 6c79 2e22 290d 0a0d 0a20 2020 2020  ully.")....     
-0000fd10: 2020 2023 2073 6361 6c65 206e 6577 5f64     # scale new_d
-0000fd20: 6620 6966 2067 6976 656e 0d0a 2020 2020  f if given..    
-0000fd30: 2020 2020 6966 2064 6620 6973 206e 6f74      if df is not
-0000fd40: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0000fd50: 2020 2020 6e65 775f 6466 203d 2064 660d      new_df = df.
-0000fd60: 0a20 2020 2020 2020 2069 6620 6e65 775f  .        if new_
-0000fd70: 6466 2069 7320 6e6f 7420 4e6f 6e65 3a0d  df is not None:.
-0000fd80: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000fd90: 662e 6669 745f 6461 7461 280d 0a20 2020  f.fit_data(..   
-0000fda0: 2020 2020 2020 2020 2020 2020 2064 663d               df=
-0000fdb0: 6e65 775f 6466 2c0d 0a20 2020 2020 2020  new_df,..       
-0000fdc0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
-0000fdd0: 745f 6c65 6e67 7468 3d66 6f72 6563 6173  t_length=forecas
-0000fde0: 745f 6c65 6e67 7468 2c0d 0a20 2020 2020  t_length,..     
-0000fdf0: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-0000fe00: 655f 7265 6772 6573 736f 723d 6675 7475  e_regressor=futu
-0000fe10: 7265 5f72 6567 7265 7373 6f72 2c0d 0a20  re_regressor,.. 
-0000fe20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000fe30: 6567 7265 7373 6f72 5f70 6572 5f73 6572  egressor_per_ser
-0000fe40: 6965 733d 7265 6772 6573 736f 725f 7065  ies=regressor_pe
-0000fe50: 725f 7365 7269 6573 2c0d 0a20 2020 2020  r_series,..     
-0000fe60: 2020 2020 2020 2020 2020 2066 6c61 675f             flag_
-0000fe70: 7265 6772 6573 736f 7273 3d66 6c61 675f  regressors=flag_
-0000fe80: 7265 6772 6573 736f 7273 2c0d 0a20 2020  regressors,..   
-0000fe90: 2020 2020 2020 2020 2020 2020 2066 7574               fut
-0000fea0: 7572 655f 696d 7061 6374 733d 6675 7475  ure_impacts=futu
-0000feb0: 7265 5f69 6d70 6163 7473 2c0d 0a20 2020  re_impacts,..   
-0000fec0: 2020 2020 2020 2020 2020 2020 2072 6567               reg
-0000fed0: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
-0000fee0: 6d6f 6465 6c3d 7265 6772 6573 736f 725f  model=regressor_
-0000fef0: 666f 7265 6361 7374 5f6d 6f64 656c 2c0d  forecast_model,.
-0000ff00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ff10: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
-0000ff20: 6173 745f 6d6f 6465 6c5f 7061 7261 6d73  ast_model_params
-0000ff30: 3d72 6567 7265 7373 6f72 5f66 6f72 6563  =regressor_forec
-0000ff40: 6173 745f 6d6f 6465 6c5f 7061 7261 6d73  ast_model_params
-0000ff50: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000ff60: 2020 2072 6567 7265 7373 6f72 5f66 6f72     regressor_for
-0000ff70: 6563 6173 745f 7472 616e 7366 6f72 6d61  ecast_transforma
-0000ff80: 7469 6f6e 733d 7265 6772 6573 736f 725f  tions=regressor_
-0000ff90: 666f 7265 6361 7374 5f74 7261 6e73 666f  forecast_transfo
-0000ffa0: 726d 6174 696f 6e73 2c0d 0a20 2020 2020  rmations,..     
-0000ffb0: 2020 2020 2020 2020 2020 2069 6e63 6c75             inclu
-0000ffc0: 6465 5f68 6973 746f 7279 3d69 6e63 6c75  de_history=inclu
-0000ffd0: 6465 5f68 6973 746f 7279 2c0d 0a20 2020  de_history,..   
-0000ffe0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0000fff0: 745f 696d 7061 6374 733d 7061 7374 5f69  t_impacts=past_i
-00010000: 6d70 6163 7473 2c0d 0a20 2020 2020 2020  mpacts,..       
-00010010: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00010020: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00010030: 2020 2028 0d0a 2020 2020 2020 2020 2020     (..          
-00010040: 2020 2020 2020 7365 6c66 2e72 6567 725f        self.regr_
-00010050: 7073 5f66 6f72 652c 0d0a 2020 2020 2020  ps_fore,..      
-00010060: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-00010070: 7365 5f69 6d70 6163 7473 2c0d 0a20 2020  se_impacts,..   
-00010080: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00010090: 662e 6675 6c6c 5f72 6567 722c 0d0a 2020  f.full_regr,..  
-000100a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000100b0: 6c66 2e61 6c6c 5f66 6c61 6773 2c0d 0a20  lf.all_flags,.. 
-000100c0: 2020 2020 2020 2020 2020 2029 203d 2073             ) = s
-000100d0: 656c 662e 5f70 726f 6365 7373 5f72 6567  elf._process_reg
-000100e0: 7265 7373 6f72 7328 0d0a 2020 2020 2020  ressors(..      
-000100f0: 2020 2020 2020 2020 2020 6466 3d73 656c            df=sel
-00010100: 662e 6466 2c0d 0a20 2020 2020 2020 2020  f.df,..         
-00010110: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
-00010120: 6c65 6e67 7468 3d66 6f72 6563 6173 745f  length=forecast_
-00010130: 6c65 6e67 7468 2c0d 0a20 2020 2020 2020  length,..       
-00010140: 2020 2020 2020 2020 2066 7574 7572 655f           future_
-00010150: 7265 6772 6573 736f 723d 6675 7475 7265  regressor=future
-00010160: 5f72 6567 7265 7373 6f72 2c0d 0a20 2020  _regressor,..   
-00010170: 2020 2020 2020 2020 2020 2020 2072 6567               reg
-00010180: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
-00010190: 733d 7265 6772 6573 736f 725f 7065 725f  s=regressor_per_
-000101a0: 7365 7269 6573 2c0d 0a20 2020 2020 2020  series,..       
-000101b0: 2020 2020 2020 2020 2066 6c61 675f 7265           flag_re
-000101c0: 6772 6573 736f 7273 3d66 6c61 675f 7265  gressors=flag_re
-000101d0: 6772 6573 736f 7273 2c0d 0a20 2020 2020  gressors,..     
-000101e0: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-000101f0: 655f 696d 7061 6374 733d 6675 7475 7265  e_impacts=future
-00010200: 5f69 6d70 6163 7473 2c0d 0a20 2020 2020  _impacts,..     
-00010210: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-00010220: 7373 6f72 5f66 6f72 6563 6173 745f 6d6f  ssor_forecast_mo
-00010230: 6465 6c3d 7265 6772 6573 736f 725f 666f  del=regressor_fo
-00010240: 7265 6361 7374 5f6d 6f64 656c 2c0d 0a20  recast_model,.. 
-00010250: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00010260: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
-00010270: 745f 6d6f 6465 6c5f 7061 7261 6d73 3d72  t_model_params=r
-00010280: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
-00010290: 745f 6d6f 6465 6c5f 7061 7261 6d73 2c0d  t_model_params,.
-000102a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000102b0: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
-000102c0: 6173 745f 7472 616e 7366 6f72 6d61 7469  ast_transformati
-000102d0: 6f6e 733d 7265 6772 6573 736f 725f 666f  ons=regressor_fo
-000102e0: 7265 6361 7374 5f74 7261 6e73 666f 726d  recast_transform
-000102f0: 6174 696f 6e73 2c0d 0a20 2020 2020 2020  ations,..       
-00010300: 2020 2020 2020 2020 2069 6e63 6c75 6465           include
-00010310: 5f68 6973 746f 7279 3d69 6e63 6c75 6465  _history=include
-00010320: 5f68 6973 746f 7279 2c0d 0a20 2020 2020  _history,..     
-00010330: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00010340: 2020 6466 203d 2073 656c 662e 6466 2e63    df = self.df.c
-00010350: 6f70 7928 290d 0a0d 0a20 2020 2020 2020  opy()....       
-00010360: 2023 2067 656e 6572 6174 6520 7472 656e   # generate tren
-00010370: 640d 0a20 2020 2020 2020 2023 204d 4159  d..        # MAY
-00010380: 2057 414e 5420 544f 2050 4153 5320 6675   WANT TO PASS fu
-00010390: 7475 7265 5f72 6567 7265 7373 6f72 2048  ture_regressor H
-000103a0: 4552 450d 0a20 2020 2020 2020 2072 6573  ERE..        res
-000103b0: 6964 203d 204e 6f6e 650d 0a20 2020 2020  id = None..     
-000103c0: 2020 2069 6620 666f 7265 6361 7374 5f6c     if forecast_l
-000103d0: 656e 6774 6820 6973 206e 6f74 204e 6f6e  ength is not Non
-000103e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000103f0: 2320 6372 6561 7465 206e 6577 2072 6f6c  # create new rol
-00010400: 6c69 6e67 2072 6573 6964 7561 6c20 6966  ling residual if
-00010410: 206e 6577 2064 6174 6120 7072 6f76 6964   new data provid
-00010420: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
-00010430: 6466 5f74 7261 696e 203d 2073 656c 662e  df_train = self.
-00010440: 7472 656e 645f 7472 6169 6e0d 0a20 2020  trend_train..   
-00010450: 2020 2020 2020 2020 2023 2063 6f6d 6269           # combi
-00010460: 6e65 2072 6567 7265 7373 6f72 2074 7970  ne regressor typ
-00010470: 6573 2064 6570 656e 6469 6e67 206f 6e20  es depending on 
-00010480: 7768 6174 2069 7320 6769 7665 6e0d 0a20  what is given.. 
-00010490: 2020 2020 2020 2020 2020 2069 6620 280d             if (.
-000104a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000104b0: 2073 656c 662e 6675 7475 7265 5f72 6567   self.future_reg
-000104c0: 7265 7373 6f72 5f74 7261 696e 2069 7320  ressor_train is 
-000104d0: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-000104e0: 2020 2020 2020 616e 6420 7365 6c66 2e66        and self.f
-000104f0: 6c61 675f 7265 6772 6573 736f 725f 7472  lag_regressor_tr
-00010500: 6169 6e20 6973 206e 6f74 204e 6f6e 650d  ain is not None.
-00010510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010520: 2061 6e64 2073 656c 662e 7265 6772 6573   and self.regres
-00010530: 736f 7273 5f75 7365 640d 0a20 2020 2020  sors_used..     
-00010540: 2020 2020 2020 2029 3a0d 0a20 2020 2020         ):..     
-00010550: 2020 2020 2020 2020 2020 2063 6f6d 705f             comp_
-00010560: 7265 6772 5f74 7261 696e 203d 2073 656c  regr_train = sel
-00010570: 662e 666c 6167 5f72 6567 7265 7373 6f72  f.flag_regressor
-00010580: 5f74 7261 696e 2e72 6569 6e64 6578 280d  _train.reindex(.
-00010590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000105a0: 2020 2020 2069 6e64 6578 3d64 665f 7472       index=df_tr
-000105b0: 6169 6e2e 696e 6465 780d 0a20 2020 2020  ain.index..     
-000105c0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-000105d0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000105e0: 6d70 5f72 6567 7220 3d20 7365 6c66 2e61  mp_regr = self.a
-000105f0: 6c6c 5f66 6c61 6773 2e74 6169 6c28 666f  ll_flags.tail(fo
-00010600: 7265 6361 7374 5f6c 656e 6774 6829 0d0a  recast_length)..
-00010610: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00010620: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
-00010630: 2020 2020 7365 6c66 2e66 7574 7572 655f      self.future_
-00010640: 7265 6772 6573 736f 725f 7472 6169 6e20  regressor_train 
-00010650: 6973 206e 6f74 204e 6f6e 650d 0a20 2020  is not None..   
-00010660: 2020 2020 2020 2020 2020 2020 2061 6e64               and
-00010670: 2073 656c 662e 666c 6167 5f72 6567 7265   self.flag_regre
-00010680: 7373 6f72 5f74 7261 696e 2069 7320 4e6f  ssor_train is No
-00010690: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
-000106a0: 2020 2020 616e 6420 7365 6c66 2e72 6567      and self.reg
-000106b0: 7265 7373 6f72 735f 7573 6564 0d0a 2020  ressors_used..  
-000106c0: 2020 2020 2020 2020 2020 293a 0d0a 2020            ):..  
-000106d0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000106e0: 6d70 5f72 6567 725f 7472 6169 6e20 3d20  mp_regr_train = 
-000106f0: 7365 6c66 2e66 7574 7572 655f 7265 6772  self.future_regr
-00010700: 6573 736f 725f 7472 6169 6e2e 7265 696e  essor_train.rein
-00010710: 6465 7828 0d0a 2020 2020 2020 2020 2020  dex(..          
-00010720: 2020 2020 2020 2020 2020 696e 6465 783d            index=
-00010730: 6466 5f74 7261 696e 2e69 6e64 6578 0d0a  df_train.index..
-00010740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010750: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00010760: 2020 2063 6f6d 705f 7265 6772 203d 2073     comp_regr = s
-00010770: 656c 662e 6675 6c6c 5f72 6567 722e 7461  elf.full_regr.ta
-00010780: 696c 2866 6f72 6563 6173 745f 6c65 6e67  il(forecast_leng
-00010790: 7468 290d 0a20 2020 2020 2020 2020 2020  th)..           
-000107a0: 2065 6c69 6620 280d 0a20 2020 2020 2020   elif (..       
-000107b0: 2020 2020 2020 2020 2073 656c 662e 6675           self.fu
-000107c0: 7475 7265 5f72 6567 7265 7373 6f72 5f74  ture_regressor_t
-000107d0: 7261 696e 2069 7320 6e6f 7420 4e6f 6e65  rain is not None
-000107e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000107f0: 2020 616e 6420 7365 6c66 2e66 6c61 675f    and self.flag_
-00010800: 7265 6772 6573 736f 725f 7472 6169 6e20  regressor_train 
-00010810: 6973 206e 6f74 204e 6f6e 650d 0a20 2020  is not None..   
-00010820: 2020 2020 2020 2020 2020 2020 2061 6e64               and
-00010830: 2073 656c 662e 7265 6772 6573 736f 7273   self.regressors
-00010840: 5f75 7365 640d 0a20 2020 2020 2020 2020  _used..         
-00010850: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-00010860: 2020 2020 2020 2063 6f6d 705f 7265 6772         comp_regr
-00010870: 5f74 7261 696e 203d 2070 642e 636f 6e63  _train = pd.conc
-00010880: 6174 280d 0a20 2020 2020 2020 2020 2020  at(..           
-00010890: 2020 2020 2020 2020 205b 7365 6c66 2e66           [self.f
-000108a0: 7574 7572 655f 7265 6772 6573 736f 725f  uture_regressor_
-000108b0: 7472 6169 6e2c 2073 656c 662e 666c 6167  train, self.flag
-000108c0: 5f72 6567 7265 7373 6f72 5f74 7261 696e  _regressor_train
-000108d0: 5d2c 2061 7869 733d 310d 0a20 2020 2020  ], axis=1..     
-000108e0: 2020 2020 2020 2020 2020 2029 2e72 6569             ).rei
-000108f0: 6e64 6578 2869 6e64 6578 3d64 665f 7472  ndex(index=df_tr
-00010900: 6169 6e2e 696e 6465 7829 0d0a 2020 2020  ain.index)..    
-00010910: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
-00010920: 5f72 6567 7220 3d20 7064 2e63 6f6e 6361  _regr = pd.conca
-00010930: 7428 5b73 656c 662e 6675 6c6c 5f72 6567  t([self.full_reg
-00010940: 722c 2073 656c 662e 616c 6c5f 666c 6167  r, self.all_flag
-00010950: 735d 2c20 6178 6973 3d31 292e 7461 696c  s], axis=1).tail
-00010960: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00010970: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
-00010980: 6c65 6e67 7468 0d0a 2020 2020 2020 2020  length..        
-00010990: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-000109a0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000109b0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000109c0: 6d70 5f72 6567 725f 7472 6169 6e20 3d20  mp_regr_train = 
-000109d0: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-000109e0: 2020 2020 2020 636f 6d70 5f72 6567 7220        comp_regr 
-000109f0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
-00010a00: 2020 2020 2020 7472 656e 645f 666f 7265        trend_fore
-00010a10: 6361 7374 203d 206d 6f64 656c 5f66 6f72  cast = model_for
-00010a20: 6563 6173 7428 0d0a 2020 2020 2020 2020  ecast(..        
-00010a30: 2020 2020 2020 2020 6d6f 6465 6c5f 6e61          model_na
-00010a40: 6d65 3d73 656c 662e 7472 656e 645f 6d6f  me=self.trend_mo
-00010a50: 6465 6c5b 274d 6f64 656c 275d 2c0d 0a20  del['Model'],.. 
-00010a60: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00010a70: 6f64 656c 5f70 6172 616d 5f64 6963 743d  odel_param_dict=
-00010a80: 7365 6c66 2e74 7265 6e64 5f6d 6f64 656c  self.trend_model
-00010a90: 5b27 4d6f 6465 6c50 6172 616d 6574 6572  ['ModelParameter
-00010aa0: 7327 5d2c 0d0a 2020 2020 2020 2020 2020  s'],..          
-00010ab0: 2020 2020 2020 6d6f 6465 6c5f 7472 616e        model_tran
-00010ac0: 7366 6f72 6d5f 6469 6374 3d73 656c 662e  sform_dict=self.
-00010ad0: 7472 656e 645f 7472 616e 7366 6f72 6d61  trend_transforma
-00010ae0: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
-00010af0: 2020 2020 2020 2064 665f 7472 6169 6e3d         df_train=
-00010b00: 6466 5f74 7261 696e 2c0d 0a20 2020 2020  df_train,..     
-00010b10: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
-00010b20: 6173 745f 6c65 6e67 7468 3d66 6f72 6563  ast_length=forec
-00010b30: 6173 745f 6c65 6e67 7468 2c0d 0a20 2020  ast_length,..   
-00010b40: 2020 2020 2020 2020 2020 2020 2066 7265               fre
-00010b50: 7175 656e 6379 3d73 656c 662e 6672 6571  quency=self.freq
-00010b60: 7565 6e63 792c 0d0a 2020 2020 2020 2020  uency,..        
-00010b70: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-00010b80: 6f6e 5f69 6e74 6572 7661 6c3d 7365 6c66  on_interval=self
-00010b90: 2e70 7265 6469 6374 696f 6e5f 696e 7465  .prediction_inte
-00010ba0: 7276 616c 2c0d 0a20 2020 2020 2020 2020  rval,..         
-00010bb0: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
-00010bc0: 6772 6573 736f 725f 7472 6169 6e3d 636f  gressor_train=co
-00010bd0: 6d70 5f72 6567 725f 7472 6169 6e2c 0d0a  mp_regr_train,..
-00010be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010bf0: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
-00010c00: 5f66 6f72 6563 6173 743d 636f 6d70 5f72  _forecast=comp_r
-00010c10: 6567 722c 0d0a 2020 2020 2020 2020 2020  egr,..          
-00010c20: 2020 2020 2020 6661 696c 5f6f 6e5f 666f        fail_on_fo
-00010c30: 7265 6361 7374 5f6e 616e 3d54 7275 652c  recast_nan=True,
-00010c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010c50: 2020 7261 6e64 6f6d 5f73 6565 643d 7365    random_seed=se
-00010c60: 6c66 2e72 616e 646f 6d5f 7365 6564 2c0d  lf.random_seed,.
-00010c70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010c80: 2076 6572 626f 7365 3d73 656c 662e 7665   verbose=self.ve
-00010c90: 7262 6f73 652c 0d0a 2020 2020 2020 2020  rbose,..        
-00010ca0: 2020 2020 2020 2020 6e5f 6a6f 6273 3d73          n_jobs=s
-00010cb0: 656c 662e 6e5f 6a6f 6273 2c0d 0a20 2020  elf.n_jobs,..   
-00010cc0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00010cd0: 2020 2020 2020 2020 2320 7068 6920 6973          # phi is
-00010ce0: 206f 6e20 6675 7475 7265 2070 7265 6469   on future predi
-00010cf0: 6374 2073 7465 7020 6f6e 6c79 0d0a 2020  ct step only..  
-00010d00: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00010d10: 662e 7472 656e 645f 7068 6920 6973 206e  f.trend_phi is n
-00010d20: 6f74 204e 6f6e 6520 616e 6420 7365 6c66  ot None and self
-00010d30: 2e74 7265 6e64 5f70 6869 2021 3d20 313a  .trend_phi != 1:
-00010d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010d50: 2020 7465 6d70 203d 2074 7265 6e64 5f66    temp = trend_f
-00010d60: 6f72 6563 6173 742e 666f 7265 6361 7374  orecast.forecast
-00010d70: 2e6d 756c 280d 0a20 2020 2020 2020 2020  .mul(..         
-00010d80: 2020 2020 2020 2020 2020 2070 642e 5365             pd.Se
-00010d90: 7269 6573 280d 0a20 2020 2020 2020 2020  ries(..         
-00010da0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00010db0: 7365 6c66 2e74 7265 6e64 5f70 6869 5d20  self.trend_phi] 
-00010dc0: 2a20 7472 656e 645f 666f 7265 6361 7374  * trend_forecast
-00010dd0: 2e66 6f72 6563 6173 742e 7368 6170 655b  .forecast.shape[
-00010de0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-00010df0: 2020 2020 2020 2020 2020 2020 2069 6e64               ind
-00010e00: 6578 3d74 7265 6e64 5f66 6f72 6563 6173  ex=trend_forecas
-00010e10: 742e 666f 7265 6361 7374 2e69 6e64 6578  t.forecast.index
-00010e20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00010e30: 2020 2020 2020 2029 2e70 6f77 2872 616e         ).pow(ran
-00010e40: 6765 2874 7265 6e64 5f66 6f72 6563 6173  ge(trend_forecas
-00010e50: 742e 666f 7265 6361 7374 2e73 6861 7065  t.forecast.shape
-00010e60: 5b30 5d29 292c 0d0a 2020 2020 2020 2020  [0])),..        
-00010e70: 2020 2020 2020 2020 2020 2020 6178 6973              axis
-00010e80: 3d30 2c0d 0a20 2020 2020 2020 2020 2020  =0,..           
-00010e90: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00010ea0: 2020 2020 2020 2020 2320 6164 6a75 7374          # adjust
-00010eb0: 2061 6c6c 2062 7920 7361 6d65 206d 6172   all by same mar
-00010ec0: 6769 6e0d 0a20 2020 2020 2020 2020 2020  gin..           
-00010ed0: 2020 2020 2074 7265 6e64 5f66 6f72 6563       trend_forec
-00010ee0: 6173 742e 666f 7265 6361 7374 203d 2074  ast.forecast = t
-00010ef0: 7265 6e64 5f66 6f72 6563 6173 742e 666f  rend_forecast.fo
-00010f00: 7265 6361 7374 202b 2074 656d 700d 0a20  recast + temp.. 
-00010f10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00010f20: 7265 6e64 5f66 6f72 6563 6173 742e 7570  rend_forecast.up
-00010f30: 7065 725f 666f 7265 6361 7374 203d 2074  per_forecast = t
-00010f40: 7265 6e64 5f66 6f72 6563 6173 742e 7570  rend_forecast.up
-00010f50: 7065 725f 666f 7265 6361 7374 202b 2074  per_forecast + t
-00010f60: 656d 700d 0a20 2020 2020 2020 2020 2020  emp..           
-00010f70: 2020 2020 2074 7265 6e64 5f66 6f72 6563       trend_forec
-00010f80: 6173 742e 6c6f 7765 725f 666f 7265 6361  ast.lower_foreca
-00010f90: 7374 203d 2074 7265 6e64 5f66 6f72 6563  st = trend_forec
-00010fa0: 6173 742e 6c6f 7765 725f 666f 7265 6361  ast.lower_foreca
-00010fb0: 7374 202b 2074 656d 700d 0a20 2020 2020  st + temp..     
-00010fc0: 2020 2020 2020 2069 6620 696e 636c 7564         if includ
-00010fd0: 655f 6869 7374 6f72 793a 0d0a 2020 2020  e_history:..    
-00010fe0: 2020 2020 2020 2020 2020 2020 7472 656e              tren
-00010ff0: 645f 666f 7265 6361 7374 2e66 6f72 6563  d_forecast.forec
-00011000: 6173 7420 3d20 7064 2e63 6f6e 6361 7428  ast = pd.concat(
-00011010: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011020: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
-00011030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011040: 2073 656c 662e 7472 656e 645f 7472 6169   self.trend_trai
-00011050: 6e20 6966 2072 6573 6964 2069 7320 4e6f  n if resid is No
-00011060: 6e65 2065 6c73 6520 7265 7369 642c 0d0a  ne else resid,..
+0000f650: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0000f660: 2020 2020 2020 2020 2072 6567 725f 7073           regr_ps
+0000f670: 5f66 6f72 655b 6b65 795d 203d 2072 6567  _fore[key] = reg
+0000f680: 725f 7073 5f66 6f72 655b 6b65 795d 2e69  r_ps_fore[key].i
+0000f690: 6c6f 635b 0d0a 2020 2020 2020 2020 2020  loc[..          
+0000f6a0: 2020 2020 2020 2020 2020 2020 2020 7e72                ~r
+0000f6b0: 6567 725f 7073 5f66 6f72 655b 6b65 795d  egr_ps_fore[key]
+0000f6c0: 2e69 6e64 6578 2e64 7570 6c69 6361 7465  .index.duplicate
+0000f6d0: 6428 290d 0a20 2020 2020 2020 2020 2020  d()..           
+0000f6e0: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
+0000f6f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f700: 2e72 6567 725f 7073 203d 2072 6567 725f  .regr_ps = regr_
+0000f710: 7073 5f66 6f72 650d 0a20 2020 2020 2020  ps_fore..       
+0000f720: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0000f730: 2020 2020 7265 6772 5f70 735f 666f 7265      regr_ps_fore
+0000f740: 203d 2073 656c 662e 7265 6772 5f70 6572   = self.regr_per
+0000f750: 5f73 6572 6965 735f 7472 0d0a 2020 2020  _series_tr..    
+0000f760: 2020 2020 7265 7475 726e 2072 6567 725f      return regr_
+0000f770: 7073 5f66 6f72 652c 2069 6d70 6163 7473  ps_fore, impacts
+0000f780: 2c20 6675 6c6c 5f72 6567 722c 2061 6c6c  , full_regr, all
+0000f790: 5f66 6c61 6773 0d0a 0d0a 2020 2020 6465  _flags....    de
+0000f7a0: 6620 7072 6564 6963 7428 0d0a 2020 2020  f predict(..    
+0000f7b0: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
+0000f7c0: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
+0000f7d0: 7468 3d4e 6f6e 652c 0d0a 2020 2020 2020  th=None,..      
+0000f7e0: 2020 696e 636c 7564 655f 6869 7374 6f72    include_histor
+0000f7f0: 793d 4661 6c73 652c 0d0a 2020 2020 2020  y=False,..      
+0000f800: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
+0000f810: 6f72 3d4e 6f6e 652c 0d0a 2020 2020 2020  or=None,..      
+0000f820: 2020 7265 6772 6573 736f 725f 7065 725f    regressor_per_
+0000f830: 7365 7269 6573 3d4e 6f6e 652c 0d0a 2020  series=None,..  
+0000f840: 2020 2020 2020 666c 6167 5f72 6567 7265        flag_regre
+0000f850: 7373 6f72 733d 4e6f 6e65 2c0d 0a20 2020  ssors=None,..   
+0000f860: 2020 2020 2066 7574 7572 655f 696d 7061       future_impa
+0000f870: 6374 733d 4e6f 6e65 2c0d 0a20 2020 2020  cts=None,..     
+0000f880: 2020 206e 6577 5f64 663d 4e6f 6e65 2c0d     new_df=None,.
+0000f890: 0a20 2020 2020 2020 2072 6567 7265 7373  .        regress
+0000f8a0: 6f72 5f66 6f72 6563 6173 745f 6d6f 6465  or_forecast_mode
+0000f8b0: 6c3d 4e6f 6e65 2c0d 0a20 2020 2020 2020  l=None,..       
+0000f8c0: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
+0000f8d0: 6173 745f 6d6f 6465 6c5f 7061 7261 6d73  ast_model_params
+0000f8e0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
+0000f8f0: 7265 6772 6573 736f 725f 666f 7265 6361  regressor_foreca
+0000f900: 7374 5f74 7261 6e73 666f 726d 6174 696f  st_transformatio
+0000f910: 6e73 3d4e 6f6e 652c 0d0a 2020 2020 2020  ns=None,..      
+0000f920: 2020 696e 636c 7564 655f 6f72 6761 6e69    include_organi
+0000f930: 633d 4661 6c73 652c 0d0a 2020 2020 2020  c=False,..      
+0000f940: 2020 6466 3d4e 6f6e 652c 2020 2320 746f    df=None,  # to
+0000f950: 2062 6520 636f 6d70 6174 6961 626c 6520   be compatiable 
+0000f960: 7769 7468 206f 7468 6572 732c 2069 6465  with others, ide
+0000f970: 6e74 6963 616c 2074 6f20 6e65 775f 6466  ntical to new_df
+0000f980: 0d0a 2020 2020 2020 2020 7061 7374 5f69  ..        past_i
+0000f990: 6d70 6163 7473 3d4e 6f6e 652c 2020 2320  mpacts=None,  # 
+0000f9a0: 6f6e 6c79 2069 6620 6e65 775f 6466 2070  only if new_df p
+0000f9b0: 726f 7669 6465 640d 0a20 2020 2029 3a0d  rovided..    ):.
+0000f9c0: 0a20 2020 2020 2020 2022 2222 4765 6e65  .        """Gene
+0000f9d0: 7261 7465 2061 2066 6f72 6563 6173 742e  rate a forecast.
+0000f9e0: 0d0a 0d0a 2020 2020 2020 2020 6675 7475  ....        futu
+0000f9f0: 7265 5f72 6567 7265 7373 6f72 2061 6e64  re_regressor and
+0000fa00: 2072 6567 7265 7373 6f72 5f70 6572 5f73   regressor_per_s
+0000fa10: 6572 6965 7320 7368 6f75 6c64 206f 6e6c  eries should onl
+0000fa20: 7920 696e 636c 7564 6520 6e65 7720 6675  y include new fu
+0000fa30: 7475 7265 2076 616c 7565 732c 2068 6973  ture values, his
+0000fa40: 746f 7279 2069 7320 616c 7265 6164 7920  tory is already 
+0000fa50: 7374 6f72 6564 0d0a 2020 2020 2020 2020  stored..        
+0000fa60: 7468 6579 2073 686f 756c 6420 6d61 7463  they should matc
+0000fa70: 6820 6f6e 2066 6f72 6563 6173 745f 6c65  h on forecast_le
+0000fa80: 6e67 7468 2061 6e64 2069 6e64 6578 206f  ngth and index o
+0000fa90: 6620 666f 7265 6361 7374 730d 0a0d 0a20  f forecasts.... 
+0000faa0: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
+0000fab0: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+0000fac0: 7374 5f6c 656e 6774 6820 2869 6e74 293a  st_length (int):
+0000fad0: 2073 7465 7073 2061 6865 6164 2074 6f20   steps ahead to 
+0000fae0: 7072 6564 6963 742c 206f 7220 4e6f 6e65  predict, or None
+0000faf0: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+0000fb00: 636c 7564 655f 6869 7374 6f72 7920 2862  clude_history (b
+0000fb10: 6f6f 6c29 3a20 696e 636c 7564 6520 7061  ool): include pa
+0000fb20: 7374 2070 7265 6469 6374 696f 6e73 2069  st predictions i
+0000fb30: 6620 5472 7565 0d0a 2020 2020 2020 2020  f True..        
+0000fb40: 2020 2020 616c 6c20 7468 6520 7361 6d65      all the same
+0000fb50: 2072 6567 7265 7373 6f72 2061 7267 7320   regressor args 
+0000fb60: 6173 202e 6669 742c 2062 7574 2066 7574  as .fit, but fut
+0000fb70: 7572 6520 666f 7265 6361 7374 2076 6572  ure forecast ver
+0000fb80: 7369 6f6e 7320 6865 7265 0d0a 2020 2020  sions here..    
+0000fb90: 2020 2020 2020 2020 6675 7475 7265 5f69          future_i
+0000fba0: 6d70 6163 7473 2028 7064 2e44 6174 6146  mpacts (pd.DataF
+0000fbb0: 7261 6d65 293a 206c 696b 6520 7061 7374  rame): like past
+0000fbc0: 2069 6d70 6163 7473 2062 7574 2066 6f72   impacts but for
+0000fbd0: 2074 6865 2066 6f72 6563 6173 7420 6168   the forecast ah
+0000fbe0: 6561 640d 0a20 2020 2020 2020 2020 2020  ead..           
+0000fbf0: 206e 6577 5f64 6620 2870 642e 4461 7461   new_df (pd.Data
+0000fc00: 4672 616d 6529 3a20 6f72 2064 662c 2065  Frame): or df, e
+0000fc10: 7175 6976 616c 656e 7420 746f 2066 6974  quivalent to fit
+0000fc20: 5f64 6174 6120 7570 6461 7465 0d0a 2020  _data update..  
+0000fc30: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+0000fc40: 2020 2073 656c 662e 666f 7265 6361 7374     self.forecast
+0000fc50: 5f6c 656e 6774 6820 3d20 666f 7265 6361  _length = foreca
+0000fc60: 7374 5f6c 656e 6774 680d 0a20 2020 2020  st_length..     
+0000fc70: 2020 2070 7265 6469 6374 5374 6172 7454     predictStartT
+0000fc80: 696d 6520 3d20 7365 6c66 2e74 696d 6528  ime = self.time(
+0000fc90: 290d 0a20 2020 2020 2020 2069 6620 7365  )..        if se
+0000fca0: 6c66 2e74 7265 6e64 5f74 7261 696e 2069  lf.trend_train i
+0000fcb0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+0000fcc0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+0000fcd0: 4572 726f 7228 2243 6173 7361 6e64 7261  Error("Cassandra
+0000fce0: 206d 7573 7420 6669 7273 7420 6265 202e   must first be .
+0000fcf0: 6669 7428 2920 7375 6363 6573 7366 756c  fit() successful
+0000fd00: 6c79 2e22 290d 0a0d 0a20 2020 2020 2020  ly.")....       
+0000fd10: 2023 2073 6361 6c65 206e 6577 5f64 6620   # scale new_df 
+0000fd20: 6966 2067 6976 656e 0d0a 2020 2020 2020  if given..      
+0000fd30: 2020 6966 2064 6620 6973 206e 6f74 204e    if df is not N
+0000fd40: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+0000fd50: 2020 6e65 775f 6466 203d 2064 660d 0a20    new_df = df.. 
+0000fd60: 2020 2020 2020 2069 6620 6e65 775f 6466         if new_df
+0000fd70: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0000fd80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000fd90: 6669 745f 6461 7461 280d 0a20 2020 2020  fit_data(..     
+0000fda0: 2020 2020 2020 2020 2020 2064 663d 6e65             df=ne
+0000fdb0: 775f 6466 2c0d 0a20 2020 2020 2020 2020  w_df,..         
+0000fdc0: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
+0000fdd0: 6c65 6e67 7468 3d66 6f72 6563 6173 745f  length=forecast_
+0000fde0: 6c65 6e67 7468 2c0d 0a20 2020 2020 2020  length,..       
+0000fdf0: 2020 2020 2020 2020 2066 7574 7572 655f           future_
+0000fe00: 7265 6772 6573 736f 723d 6675 7475 7265  regressor=future
+0000fe10: 5f72 6567 7265 7373 6f72 2c0d 0a20 2020  _regressor,..   
+0000fe20: 2020 2020 2020 2020 2020 2020 2072 6567               reg
+0000fe30: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
+0000fe40: 733d 7265 6772 6573 736f 725f 7065 725f  s=regressor_per_
+0000fe50: 7365 7269 6573 2c0d 0a20 2020 2020 2020  series,..       
+0000fe60: 2020 2020 2020 2020 2066 6c61 675f 7265           flag_re
+0000fe70: 6772 6573 736f 7273 3d66 6c61 675f 7265  gressors=flag_re
+0000fe80: 6772 6573 736f 7273 2c0d 0a20 2020 2020  gressors,..     
+0000fe90: 2020 2020 2020 2020 2020 2066 7574 7572             futur
+0000fea0: 655f 696d 7061 6374 733d 6675 7475 7265  e_impacts=future
+0000feb0: 5f69 6d70 6163 7473 2c0d 0a20 2020 2020  _impacts,..     
+0000fec0: 2020 2020 2020 2020 2020 2072 6567 7265             regre
+0000fed0: 7373 6f72 5f66 6f72 6563 6173 745f 6d6f  ssor_forecast_mo
+0000fee0: 6465 6c3d 7265 6772 6573 736f 725f 666f  del=regressor_fo
+0000fef0: 7265 6361 7374 5f6d 6f64 656c 2c0d 0a20  recast_model,.. 
+0000ff00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000ff10: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
+0000ff20: 745f 6d6f 6465 6c5f 7061 7261 6d73 3d72  t_model_params=r
+0000ff30: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
+0000ff40: 745f 6d6f 6465 6c5f 7061 7261 6d73 2c0d  t_model_params,.
+0000ff50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ff60: 2072 6567 7265 7373 6f72 5f66 6f72 6563   regressor_forec
+0000ff70: 6173 745f 7472 616e 7366 6f72 6d61 7469  ast_transformati
+0000ff80: 6f6e 733d 7265 6772 6573 736f 725f 666f  ons=regressor_fo
+0000ff90: 7265 6361 7374 5f74 7261 6e73 666f 726d  recast_transform
+0000ffa0: 6174 696f 6e73 2c0d 0a20 2020 2020 2020  ations,..       
+0000ffb0: 2020 2020 2020 2020 2069 6e63 6c75 6465           include
+0000ffc0: 5f68 6973 746f 7279 3d69 6e63 6c75 6465  _history=include
+0000ffd0: 5f68 6973 746f 7279 2c0d 0a20 2020 2020  _history,..     
+0000ffe0: 2020 2020 2020 2020 2020 2070 6173 745f             past_
+0000fff0: 696d 7061 6374 733d 7061 7374 5f69 6d70  impacts=past_imp
+00010000: 6163 7473 2c0d 0a20 2020 2020 2020 2020  acts,..         
+00010010: 2020 2029 0d0a 2020 2020 2020 2020 656c     )..        el
+00010020: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00010030: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+00010040: 2020 2020 7365 6c66 2e72 6567 725f 7073      self.regr_ps
+00010050: 5f66 6f72 652c 0d0a 2020 2020 2020 2020  _fore,..        
+00010060: 2020 2020 2020 2020 7365 6c66 2e75 7365          self.use
+00010070: 5f69 6d70 6163 7473 2c0d 0a20 2020 2020  _impacts,..     
+00010080: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00010090: 6675 6c6c 5f72 6567 722c 0d0a 2020 2020  full_regr,..    
+000100a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000100b0: 2e61 6c6c 5f66 6c61 6773 2c0d 0a20 2020  .all_flags,..   
+000100c0: 2020 2020 2020 2020 2029 203d 2073 656c           ) = sel
+000100d0: 662e 5f70 726f 6365 7373 5f72 6567 7265  f._process_regre
+000100e0: 7373 6f72 7328 0d0a 2020 2020 2020 2020  ssors(..        
+000100f0: 2020 2020 2020 2020 6466 3d73 656c 662e          df=self.
+00010100: 6466 2c0d 0a20 2020 2020 2020 2020 2020  df,..           
+00010110: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+00010120: 6e67 7468 3d66 6f72 6563 6173 745f 6c65  ngth=forecast_le
+00010130: 6e67 7468 2c0d 0a20 2020 2020 2020 2020  ngth,..         
+00010140: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+00010150: 6772 6573 736f 723d 6675 7475 7265 5f72  gressor=future_r
+00010160: 6567 7265 7373 6f72 2c0d 0a20 2020 2020  egressor,..     
+00010170: 2020 2020 2020 2020 2020 2072 6567 7265             regre
+00010180: 7373 6f72 5f70 6572 5f73 6572 6965 733d  ssor_per_series=
+00010190: 7265 6772 6573 736f 725f 7065 725f 7365  regressor_per_se
+000101a0: 7269 6573 2c0d 0a20 2020 2020 2020 2020  ries,..         
+000101b0: 2020 2020 2020 2066 6c61 675f 7265 6772         flag_regr
+000101c0: 6573 736f 7273 3d66 6c61 675f 7265 6772  essors=flag_regr
+000101d0: 6573 736f 7273 2c0d 0a20 2020 2020 2020  essors,..       
+000101e0: 2020 2020 2020 2020 2066 7574 7572 655f           future_
+000101f0: 696d 7061 6374 733d 6675 7475 7265 5f69  impacts=future_i
+00010200: 6d70 6163 7473 2c0d 0a20 2020 2020 2020  mpacts,..       
+00010210: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+00010220: 6f72 5f66 6f72 6563 6173 745f 6d6f 6465  or_forecast_mode
+00010230: 6c3d 7265 6772 6573 736f 725f 666f 7265  l=regressor_fore
+00010240: 6361 7374 5f6d 6f64 656c 2c0d 0a20 2020  cast_model,..   
+00010250: 2020 2020 2020 2020 2020 2020 2072 6567               reg
+00010260: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
+00010270: 6d6f 6465 6c5f 7061 7261 6d73 3d72 6567  model_params=reg
+00010280: 7265 7373 6f72 5f66 6f72 6563 6173 745f  ressor_forecast_
+00010290: 6d6f 6465 6c5f 7061 7261 6d73 2c0d 0a20  model_params,.. 
+000102a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000102b0: 6567 7265 7373 6f72 5f66 6f72 6563 6173  egressor_forecas
+000102c0: 745f 7472 616e 7366 6f72 6d61 7469 6f6e  t_transformation
+000102d0: 733d 7265 6772 6573 736f 725f 666f 7265  s=regressor_fore
+000102e0: 6361 7374 5f74 7261 6e73 666f 726d 6174  cast_transformat
+000102f0: 696f 6e73 2c0d 0a20 2020 2020 2020 2020  ions,..         
+00010300: 2020 2020 2020 2069 6e63 6c75 6465 5f68         include_h
+00010310: 6973 746f 7279 3d69 6e63 6c75 6465 5f68  istory=include_h
+00010320: 6973 746f 7279 2c0d 0a20 2020 2020 2020  istory,..       
+00010330: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00010340: 6466 203d 2073 656c 662e 6466 2e63 6f70  df = self.df.cop
+00010350: 7928 290d 0a0d 0a20 2020 2020 2020 2023  y()....        #
+00010360: 2067 656e 6572 6174 6520 7472 656e 640d   generate trend.
+00010370: 0a20 2020 2020 2020 2023 204d 4159 2057  .        # MAY W
+00010380: 414e 5420 544f 2050 4153 5320 6675 7475  ANT TO PASS futu
+00010390: 7265 5f72 6567 7265 7373 6f72 2048 4552  re_regressor HER
+000103a0: 450d 0a20 2020 2020 2020 2072 6573 6964  E..        resid
+000103b0: 203d 204e 6f6e 650d 0a20 2020 2020 2020   = None..       
+000103c0: 2069 6620 666f 7265 6361 7374 5f6c 656e   if forecast_len
+000103d0: 6774 6820 6973 206e 6f74 204e 6f6e 653a  gth is not None:
+000103e0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000103f0: 6372 6561 7465 206e 6577 2072 6f6c 6c69  create new rolli
+00010400: 6e67 2072 6573 6964 7561 6c20 6966 206e  ng residual if n
+00010410: 6577 2064 6174 6120 7072 6f76 6964 6564  ew data provided
+00010420: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00010430: 5f74 7261 696e 203d 2073 656c 662e 7472  _train = self.tr
+00010440: 656e 645f 7472 6169 6e0d 0a20 2020 2020  end_train..     
+00010450: 2020 2020 2020 2023 2063 6f6d 6269 6e65         # combine
+00010460: 2072 6567 7265 7373 6f72 2074 7970 6573   regressor types
+00010470: 2064 6570 656e 6469 6e67 206f 6e20 7768   depending on wh
+00010480: 6174 2069 7320 6769 7665 6e0d 0a20 2020  at is given..   
+00010490: 2020 2020 2020 2020 2069 6620 280d 0a20           if (.. 
+000104a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000104b0: 656c 662e 6675 7475 7265 5f72 6567 7265  elf.future_regre
+000104c0: 7373 6f72 5f74 7261 696e 2069 7320 4e6f  ssor_train is No
+000104d0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+000104e0: 2020 2020 616e 6420 7365 6c66 2e66 6c61      and self.fla
+000104f0: 675f 7265 6772 6573 736f 725f 7472 6169  g_regressor_trai
+00010500: 6e20 6973 206e 6f74 204e 6f6e 650d 0a20  n is not None.. 
+00010510: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00010520: 6e64 2073 656c 662e 7265 6772 6573 736f  nd self.regresso
+00010530: 7273 5f75 7365 640d 0a20 2020 2020 2020  rs_used..       
+00010540: 2020 2020 2029 3a0d 0a20 2020 2020 2020       ):..       
+00010550: 2020 2020 2020 2020 2063 6f6d 705f 7265           comp_re
+00010560: 6772 5f74 7261 696e 203d 2073 656c 662e  gr_train = self.
+00010570: 666c 6167 5f72 6567 7265 7373 6f72 5f74  flag_regressor_t
+00010580: 7261 696e 2e72 6569 6e64 6578 280d 0a20  rain.reindex(.. 
+00010590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000105a0: 2020 2069 6e64 6578 3d64 665f 7472 6169     index=df_trai
+000105b0: 6e2e 696e 6465 780d 0a20 2020 2020 2020  n.index..       
+000105c0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+000105d0: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+000105e0: 5f72 6567 7220 3d20 7365 6c66 2e61 6c6c  _regr = self.all
+000105f0: 5f66 6c61 6773 2e74 6169 6c28 666f 7265  _flags.tail(fore
+00010600: 6361 7374 5f6c 656e 6774 6829 0d0a 2020  cast_length)..  
+00010610: 2020 2020 2020 2020 2020 656c 6966 2028            elif (
+00010620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010630: 2020 7365 6c66 2e66 7574 7572 655f 7265    self.future_re
+00010640: 6772 6573 736f 725f 7472 6169 6e20 6973  gressor_train is
+00010650: 206e 6f74 204e 6f6e 650d 0a20 2020 2020   not None..     
+00010660: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+00010670: 656c 662e 666c 6167 5f72 6567 7265 7373  elf.flag_regress
+00010680: 6f72 5f74 7261 696e 2069 7320 4e6f 6e65  or_train is None
+00010690: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000106a0: 2020 616e 6420 7365 6c66 2e72 6567 7265    and self.regre
+000106b0: 7373 6f72 735f 7573 6564 0d0a 2020 2020  ssors_used..    
+000106c0: 2020 2020 2020 2020 293a 0d0a 2020 2020          ):..    
+000106d0: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+000106e0: 5f72 6567 725f 7472 6169 6e20 3d20 7365  _regr_train = se
+000106f0: 6c66 2e66 7574 7572 655f 7265 6772 6573  lf.future_regres
+00010700: 736f 725f 7472 6169 6e2e 7265 696e 6465  sor_train.reinde
+00010710: 7828 0d0a 2020 2020 2020 2020 2020 2020  x(..            
+00010720: 2020 2020 2020 2020 696e 6465 783d 6466          index=df
+00010730: 5f74 7261 696e 2e69 6e64 6578 0d0a 2020  _train.index..  
+00010740: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00010750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010760: 2063 6f6d 705f 7265 6772 203d 2073 656c   comp_regr = sel
+00010770: 662e 6675 6c6c 5f72 6567 722e 7461 696c  f.full_regr.tail
+00010780: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
+00010790: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+000107a0: 6c69 6620 280d 0a20 2020 2020 2020 2020  lif (..         
+000107b0: 2020 2020 2020 2073 656c 662e 6675 7475         self.futu
+000107c0: 7265 5f72 6567 7265 7373 6f72 5f74 7261  re_regressor_tra
+000107d0: 696e 2069 7320 6e6f 7420 4e6f 6e65 0d0a  in is not None..
+000107e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000107f0: 616e 6420 7365 6c66 2e66 6c61 675f 7265  and self.flag_re
+00010800: 6772 6573 736f 725f 7472 6169 6e20 6973  gressor_train is
+00010810: 206e 6f74 204e 6f6e 650d 0a20 2020 2020   not None..     
+00010820: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+00010830: 656c 662e 7265 6772 6573 736f 7273 5f75  elf.regressors_u
+00010840: 7365 640d 0a20 2020 2020 2020 2020 2020  sed..           
+00010850: 2029 3a0d 0a20 2020 2020 2020 2020 2020   ):..           
+00010860: 2020 2020 2063 6f6d 705f 7265 6772 5f74       comp_regr_t
+00010870: 7261 696e 203d 2070 642e 636f 6e63 6174  rain = pd.concat
+00010880: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00010890: 2020 2020 2020 205b 7365 6c66 2e66 7574         [self.fut
+000108a0: 7572 655f 7265 6772 6573 736f 725f 7472  ure_regressor_tr
+000108b0: 6169 6e2c 2073 656c 662e 666c 6167 5f72  ain, self.flag_r
+000108c0: 6567 7265 7373 6f72 5f74 7261 696e 5d2c  egressor_train],
+000108d0: 2061 7869 733d 310d 0a20 2020 2020 2020   axis=1..       
+000108e0: 2020 2020 2020 2020 2029 2e72 6569 6e64           ).reind
+000108f0: 6578 2869 6e64 6578 3d64 665f 7472 6169  ex(index=df_trai
+00010900: 6e2e 696e 6465 7829 0d0a 2020 2020 2020  n.index)..      
+00010910: 2020 2020 2020 2020 2020 636f 6d70 5f72            comp_r
+00010920: 6567 7220 3d20 7064 2e63 6f6e 6361 7428  egr = pd.concat(
+00010930: 5b73 656c 662e 6675 6c6c 5f72 6567 722c  [self.full_regr,
+00010940: 2073 656c 662e 616c 6c5f 666c 6167 735d   self.all_flags]
+00010950: 2c20 6178 6973 3d31 292e 7461 696c 280d  , axis=1).tail(.
+00010960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010970: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+00010980: 6e67 7468 0d0a 2020 2020 2020 2020 2020  ngth..          
+00010990: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000109a0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+000109b0: 2020 2020 2020 2020 2020 2020 636f 6d70              comp
+000109c0: 5f72 6567 725f 7472 6169 6e20 3d20 4e6f  _regr_train = No
+000109d0: 6e65 0d0a 2020 2020 2020 2020 2020 2020  ne..            
+000109e0: 2020 2020 636f 6d70 5f72 6567 7220 3d20      comp_regr = 
+000109f0: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00010a00: 2020 2020 7472 656e 645f 666f 7265 6361      trend_foreca
+00010a10: 7374 203d 206d 6f64 656c 5f66 6f72 6563  st = model_forec
+00010a20: 6173 7428 0d0a 2020 2020 2020 2020 2020  ast(..          
+00010a30: 2020 2020 2020 6d6f 6465 6c5f 6e61 6d65        model_name
+00010a40: 3d73 656c 662e 7472 656e 645f 6d6f 6465  =self.trend_mode
+00010a50: 6c5b 274d 6f64 656c 275d 2c0d 0a20 2020  l['Model'],..   
+00010a60: 2020 2020 2020 2020 2020 2020 206d 6f64               mod
+00010a70: 656c 5f70 6172 616d 5f64 6963 743d 7365  el_param_dict=se
+00010a80: 6c66 2e74 7265 6e64 5f6d 6f64 656c 5b27  lf.trend_model['
+00010a90: 4d6f 6465 6c50 6172 616d 6574 6572 7327  ModelParameters'
+00010aa0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00010ab0: 2020 2020 6d6f 6465 6c5f 7472 616e 7366      model_transf
+00010ac0: 6f72 6d5f 6469 6374 3d73 656c 662e 7472  orm_dict=self.tr
+00010ad0: 656e 645f 7472 616e 7366 6f72 6d61 7469  end_transformati
+00010ae0: 6f6e 2c0d 0a20 2020 2020 2020 2020 2020  on,..           
+00010af0: 2020 2020 2064 665f 7472 6169 6e3d 6466       df_train=df
+00010b00: 5f74 7261 696e 2c0d 0a20 2020 2020 2020  _train,..       
+00010b10: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+00010b20: 745f 6c65 6e67 7468 3d66 6f72 6563 6173  t_length=forecas
+00010b30: 745f 6c65 6e67 7468 2c0d 0a20 2020 2020  t_length,..     
+00010b40: 2020 2020 2020 2020 2020 2066 7265 7175             frequ
+00010b50: 656e 6379 3d73 656c 662e 6672 6571 7565  ency=self.freque
+00010b60: 6e63 792c 0d0a 2020 2020 2020 2020 2020  ncy,..          
+00010b70: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
+00010b80: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
+00010b90: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+00010ba0: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
+00010bb0: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
+00010bc0: 6573 736f 725f 7472 6169 6e3d 636f 6d70  essor_train=comp
+00010bd0: 5f72 6567 725f 7472 6169 6e2c 0d0a 2020  _regr_train,..  
+00010be0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
+00010bf0: 7475 7265 5f72 6567 7265 7373 6f72 5f66  ture_regressor_f
+00010c00: 6f72 6563 6173 743d 636f 6d70 5f72 6567  orecast=comp_reg
+00010c10: 722c 0d0a 2020 2020 2020 2020 2020 2020  r,..            
+00010c20: 2020 2020 6661 696c 5f6f 6e5f 666f 7265      fail_on_fore
+00010c30: 6361 7374 5f6e 616e 3d54 7275 652c 0d0a  cast_nan=True,..
+00010c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010c50: 7261 6e64 6f6d 5f73 6565 643d 7365 6c66  random_seed=self
+00010c60: 2e72 616e 646f 6d5f 7365 6564 2c0d 0a20  .random_seed,.. 
+00010c70: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00010c80: 6572 626f 7365 3d73 656c 662e 7665 7262  erbose=self.verb
+00010c90: 6f73 652c 0d0a 2020 2020 2020 2020 2020  ose,..          
+00010ca0: 2020 2020 2020 6e5f 6a6f 6273 3d73 656c        n_jobs=sel
+00010cb0: 662e 6e5f 6a6f 6273 2c0d 0a20 2020 2020  f.n_jobs,..     
+00010cc0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00010cd0: 2020 2020 2020 2320 7068 6920 6973 206f        # phi is o
+00010ce0: 6e20 6675 7475 7265 2070 7265 6469 6374  n future predict
+00010cf0: 2073 7465 7020 6f6e 6c79 0d0a 2020 2020   step only..    
+00010d00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00010d10: 7472 656e 645f 7068 6920 6973 206e 6f74  trend_phi is not
+00010d20: 204e 6f6e 6520 616e 6420 7365 6c66 2e74   None and self.t
+00010d30: 7265 6e64 5f70 6869 2021 3d20 313a 0d0a  rend_phi != 1:..
+00010d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d50: 7465 6d70 203d 2074 7265 6e64 5f66 6f72  temp = trend_for
+00010d60: 6563 6173 742e 666f 7265 6361 7374 2e6d  ecast.forecast.m
+00010d70: 756c 280d 0a20 2020 2020 2020 2020 2020  ul(..           
+00010d80: 2020 2020 2020 2020 2070 642e 5365 7269           pd.Seri
+00010d90: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+00010da0: 2020 2020 2020 2020 2020 2020 205b 7365               [se
+00010db0: 6c66 2e74 7265 6e64 5f70 6869 5d20 2a20  lf.trend_phi] * 
+00010dc0: 7472 656e 645f 666f 7265 6361 7374 2e66  trend_forecast.f
+00010dd0: 6f72 6563 6173 742e 7368 6170 655b 305d  orecast.shape[0]
+00010de0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00010df0: 2020 2020 2020 2020 2020 2069 6e64 6578             index
+00010e00: 3d74 7265 6e64 5f66 6f72 6563 6173 742e  =trend_forecast.
+00010e10: 666f 7265 6361 7374 2e69 6e64 6578 2c0d  forecast.index,.
+00010e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010e30: 2020 2020 2029 2e70 6f77 2872 616e 6765       ).pow(range
+00010e40: 2874 7265 6e64 5f66 6f72 6563 6173 742e  (trend_forecast.
+00010e50: 666f 7265 6361 7374 2e73 6861 7065 5b30  forecast.shape[0
+00010e60: 5d29 292c 0d0a 2020 2020 2020 2020 2020  ])),..          
+00010e70: 2020 2020 2020 2020 2020 6178 6973 3d30            axis=0
+00010e80: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00010e90: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00010ea0: 2020 2020 2020 2320 6164 6a75 7374 2061        # adjust a
+00010eb0: 6c6c 2062 7920 7361 6d65 206d 6172 6769  ll by same margi
+00010ec0: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
+00010ed0: 2020 2074 7265 6e64 5f66 6f72 6563 6173     trend_forecas
+00010ee0: 742e 666f 7265 6361 7374 203d 2074 7265  t.forecast = tre
+00010ef0: 6e64 5f66 6f72 6563 6173 742e 666f 7265  nd_forecast.fore
+00010f00: 6361 7374 202b 2074 656d 700d 0a20 2020  cast + temp..   
+00010f10: 2020 2020 2020 2020 2020 2020 2074 7265               tre
+00010f20: 6e64 5f66 6f72 6563 6173 742e 7570 7065  nd_forecast.uppe
+00010f30: 725f 666f 7265 6361 7374 203d 2074 7265  r_forecast = tre
+00010f40: 6e64 5f66 6f72 6563 6173 742e 7570 7065  nd_forecast.uppe
+00010f50: 725f 666f 7265 6361 7374 202b 2074 656d  r_forecast + tem
+00010f60: 700d 0a20 2020 2020 2020 2020 2020 2020  p..             
+00010f70: 2020 2074 7265 6e64 5f66 6f72 6563 6173     trend_forecas
+00010f80: 742e 6c6f 7765 725f 666f 7265 6361 7374  t.lower_forecast
+00010f90: 203d 2074 7265 6e64 5f66 6f72 6563 6173   = trend_forecas
+00010fa0: 742e 6c6f 7765 725f 666f 7265 6361 7374  t.lower_forecast
+00010fb0: 202b 2074 656d 700d 0a20 2020 2020 2020   + temp..       
+00010fc0: 2020 2020 2069 6620 696e 636c 7564 655f       if include_
+00010fd0: 6869 7374 6f72 793a 0d0a 2020 2020 2020  history:..      
+00010fe0: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
+00010ff0: 666f 7265 6361 7374 2e66 6f72 6563 6173  forecast.forecas
+00011000: 7420 3d20 7064 2e63 6f6e 6361 7428 0d0a  t = pd.concat(..
+00011010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011020: 2020 2020 5b0d 0a20 2020 2020 2020 2020      [..         
+00011030: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00011040: 656c 662e 7472 656e 645f 7472 6169 6e20  elf.trend_train 
+00011050: 6966 2072 6573 6964 2069 7320 4e6f 6e65  if resid is None
+00011060: 2065 6c73 6520 7265 7369 642c 0d0a 2020   else resid,..  
 00011070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011080: 2020 2020 2020 2020 7472 656e 645f 666f          trend_fo
-00011090: 7265 6361 7374 2e66 6f72 6563 6173 742c  recast.forecast,
-000110a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000110b0: 2020 2020 2020 5d0d 0a20 2020 2020 2020        ]..       
-000110c0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-000110d0: 2020 2020 2020 2020 2020 2020 7472 656e              tren
-000110e0: 645f 666f 7265 6361 7374 2e6c 6f77 6572  d_forecast.lower
-000110f0: 5f66 6f72 6563 6173 7420 3d20 7064 2e63  _forecast = pd.c
-00011100: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
-00011110: 2020 2020 2020 2020 2020 2020 5b0d 0a20              [.. 
+00011080: 2020 2020 2020 7472 656e 645f 666f 7265        trend_fore
+00011090: 6361 7374 2e66 6f72 6563 6173 742c 0d0a  cast.forecast,..
+000110a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000110b0: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+000110c0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+000110d0: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
+000110e0: 666f 7265 6361 7374 2e6c 6f77 6572 5f66  forecast.lower_f
+000110f0: 6f72 6563 6173 7420 3d20 7064 2e63 6f6e  orecast = pd.con
+00011100: 6361 7428 0d0a 2020 2020 2020 2020 2020  cat(..          
+00011110: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
 00011120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011130: 2020 2020 2020 2073 656c 662e 7472 656e         self.tren
-00011140: 645f 7472 6169 6e20 6966 2072 6573 6964  d_train if resid
-00011150: 2069 7320 4e6f 6e65 2065 6c73 6520 7265   is None else re
-00011160: 7369 642c 0d0a 2020 2020 2020 2020 2020  sid,..          
-00011170: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00011180: 656e 645f 666f 7265 6361 7374 2e6c 6f77  end_forecast.low
-00011190: 6572 5f66 6f72 6563 6173 742c 0d0a 2020  er_forecast,..  
+00011130: 2020 2020 2073 656c 662e 7472 656e 645f       self.trend_
+00011140: 7472 6169 6e20 6966 2072 6573 6964 2069  train if resid i
+00011150: 7320 4e6f 6e65 2065 6c73 6520 7265 7369  s None else resi
+00011160: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
+00011170: 2020 2020 2020 2020 2020 2020 7472 656e              tren
+00011180: 645f 666f 7265 6361 7374 2e6c 6f77 6572  d_forecast.lower
+00011190: 5f66 6f72 6563 6173 742c 0d0a 2020 2020  _forecast,..    
 000111a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111b0: 2020 5d0d 0a20 2020 2020 2020 2020 2020    ]..           
-000111c0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-000111d0: 2020 2020 2020 2020 7472 656e 645f 666f          trend_fo
-000111e0: 7265 6361 7374 2e75 7070 6572 5f66 6f72  recast.upper_for
-000111f0: 6563 6173 7420 3d20 7064 2e63 6f6e 6361  ecast = pd.conca
-00011200: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-00011210: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+000111b0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+000111c0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+000111d0: 2020 2020 2020 7472 656e 645f 666f 7265        trend_fore
+000111e0: 6361 7374 2e75 7070 6572 5f66 6f72 6563  cast.upper_forec
+000111f0: 6173 7420 3d20 7064 2e63 6f6e 6361 7428  ast = pd.concat(
+00011200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011210: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
 00011220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011230: 2020 2073 656c 662e 7472 656e 645f 7472     self.trend_tr
-00011240: 6169 6e20 6966 2072 6573 6964 2069 7320  ain if resid is 
-00011250: 4e6f 6e65 2065 6c73 6520 7265 7369 642c  None else resid,
-00011260: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011270: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
-00011280: 666f 7265 6361 7374 2e75 7070 6572 5f66  forecast.upper_f
-00011290: 6f72 6563 6173 742c 0d0a 2020 2020 2020  orecast,..      
-000112a0: 2020 2020 2020 2020 2020 2020 2020 5d0d                ].
-000112b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000112c0: 2029 0d0a 2020 2020 2020 2020 656c 7365   )..        else
-000112d0: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
-000112e0: 7265 6e64 5f66 6f72 6563 6173 7420 3d20  rend_forecast = 
-000112f0: 5072 6564 6963 7469 6f6e 4f62 6a65 6374  PredictionObject
-00011300: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00011310: 2020 2066 6f72 6563 6173 743d 7365 6c66     forecast=self
-00011320: 2e74 7265 6e64 5f74 7261 696e 2c0d 0a20  .trend_train,.. 
-00011330: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00011340: 6f77 6572 5f66 6f72 6563 6173 743d 7365  ower_forecast=se
-00011350: 6c66 2e74 7265 6e64 5f74 7261 696e 2c0d  lf.trend_train,.
-00011360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011370: 2075 7070 6572 5f66 6f72 6563 6173 743d   upper_forecast=
-00011380: 7365 6c66 2e74 7265 6e64 5f74 7261 696e  self.trend_train
-00011390: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-000113a0: 0d0a 0d0a 2020 2020 2020 2020 2320 6172  ....        # ar
-000113b0: 5f6c 6167 732c 206d 756c 7469 7661 7269  _lags, multivari
-000113c0: 6174 6520 6665 6174 7572 6573 2072 6571  ate features req
-000113d0: 7569 7265 2031 2073 7465 7020 6c6f 6f70  uire 1 step loop
-000113e0: 0d0a 2020 2020 2020 2020 6966 2066 6f72  ..        if for
-000113f0: 6563 6173 745f 6c65 6e67 7468 2069 7320  ecast_length is 
-00011400: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00011410: 2020 2064 665f 666f 7265 6361 7374 203d     df_forecast =
-00011420: 2073 656c 662e 5f70 7265 6469 6374 5f73   self._predict_s
-00011430: 7465 7028 0d0a 2020 2020 2020 2020 2020  tep(..          
-00011440: 2020 2020 2020 6461 7465 733d 6466 2e69        dates=df.i
-00011450: 6e64 6578 2c0d 0a20 2020 2020 2020 2020  ndex,..         
-00011460: 2020 2020 2020 2074 7265 6e64 5f63 6f6d         trend_com
-00011470: 706f 6e65 6e74 3d74 7265 6e64 5f66 6f72  ponent=trend_for
-00011480: 6563 6173 742c 0d0a 2020 2020 2020 2020  ecast,..        
-00011490: 2020 2020 2020 2020 6869 7374 6f72 795f          history_
-000114a0: 6466 3d64 662c 0d0a 2020 2020 2020 2020  df=df,..        
-000114b0: 2020 2020 2020 2020 6675 7475 7265 5f72          future_r
-000114c0: 6567 7265 7373 6f72 3d73 656c 662e 6675  egressor=self.fu
-000114d0: 6c6c 5f72 6567 722c 0d0a 2020 2020 2020  ll_regr,..      
-000114e0: 2020 2020 2020 2020 2020 666c 6167 5f72            flag_r
-000114f0: 6567 7265 7373 6f72 733d 7365 6c66 2e61  egressors=self.a
-00011500: 6c6c 5f66 6c61 6773 2c0d 0a20 2020 2020  ll_flags,..     
-00011510: 2020 2020 2020 2020 2020 2069 6d70 6163             impac
-00011520: 7473 3d73 656c 662e 7573 655f 696d 7061  ts=self.use_impa
-00011530: 6374 732c 0d0a 2020 2020 2020 2020 2020  cts,..          
-00011540: 2020 2020 2020 7265 6772 6573 736f 725f        regressor_
-00011550: 7065 725f 7365 7269 6573 3d73 656c 662e  per_series=self.
-00011560: 7265 6772 5f70 735f 666f 7265 2c0d 0a20  regr_ps_fore,.. 
-00011570: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00011580: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-00011590: 7072 6564 6963 745f 6c6f 6f70 5f72 6571  predict_loop_req
-000115a0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
-000115b0: 6f72 2073 7465 7020 696e 2072 616e 6765  or step in range
-000115c0: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
-000115d0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000115e0: 2020 2020 666f 7265 6361 7374 5f69 6e64      forecast_ind
-000115f0: 6578 203d 2064 662e 696e 6465 782e 756e  ex = df.index.un
-00011600: 696f 6e28 0d0a 2020 2020 2020 2020 2020  ion(..          
-00011610: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00011620: 7265 6174 655f 666f 7265 6361 7374 5f69  reate_forecast_i
-00011630: 6e64 6578 2831 2c20 6c61 7374 5f64 6174  ndex(1, last_dat
-00011640: 653d 6466 2e69 6e64 6578 5b2d 315d 290d  e=df.index[-1]).
-00011650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011660: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00011670: 2020 2020 6466 5f66 6f72 6563 6173 7420      df_forecast 
-00011680: 3d20 7365 6c66 2e5f 7072 6564 6963 745f  = self._predict_
-00011690: 7374 6570 280d 0a20 2020 2020 2020 2020  step(..         
-000116a0: 2020 2020 2020 2020 2020 2064 6174 6573             dates
-000116b0: 3d66 6f72 6563 6173 745f 696e 6465 782c  =forecast_index,
-000116c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000116d0: 2020 2020 2020 7472 656e 645f 636f 6d70        trend_comp
-000116e0: 6f6e 656e 743d 7472 656e 645f 666f 7265  onent=trend_fore
-000116f0: 6361 7374 2c0d 0a20 2020 2020 2020 2020  cast,..         
-00011700: 2020 2020 2020 2020 2020 2068 6973 746f             histo
-00011710: 7279 5f64 663d 6466 2c0d 0a20 2020 2020  ry_df=df,..     
-00011720: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011730: 7574 7572 655f 7265 6772 6573 736f 723d  uture_regressor=
-00011740: 7365 6c66 2e66 756c 6c5f 7265 6772 2c0d  self.full_regr,.
-00011750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011760: 2020 2020 2066 6c61 675f 7265 6772 6573       flag_regres
-00011770: 736f 7273 3d73 656c 662e 616c 6c5f 666c  sors=self.all_fl
-00011780: 6167 732c 0d0a 2020 2020 2020 2020 2020  ags,..          
-00011790: 2020 2020 2020 2020 2020 696d 7061 6374            impact
-000117a0: 733d 7365 6c66 2e75 7365 5f69 6d70 6163  s=self.use_impac
-000117b0: 7473 2c0d 0a20 2020 2020 2020 2020 2020  ts,..           
-000117c0: 2020 2020 2020 2020 2072 6567 7265 7373           regress
-000117d0: 6f72 5f70 6572 5f73 6572 6965 733d 7365  or_per_series=se
-000117e0: 6c66 2e72 6567 725f 7073 5f66 6f72 652c  lf.regr_ps_fore,
-000117f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011800: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00011810: 2020 2020 2064 6620 3d20 7064 2e63 6f6e       df = pd.con
-00011820: 6361 7428 5b64 662c 2064 665f 666f 7265  cat([df, df_fore
-00011830: 6361 7374 2e66 6f72 6563 6173 742e 696c  cast.forecast.il
-00011840: 6f63 5b2d 313a 5d5d 290d 0a20 2020 2020  oc[-1:]])..     
-00011850: 2020 2020 2020 2069 6620 6e6f 7420 696e         if not in
-00011860: 636c 7564 655f 6869 7374 6f72 793a 0d0a  clude_history:..
-00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011880: 6466 5f66 6f72 6563 6173 742e 666f 7265  df_forecast.fore
-00011890: 6361 7374 203d 2064 665f 666f 7265 6361  cast = df_foreca
-000118a0: 7374 2e66 6f72 6563 6173 742e 7461 696c  st.forecast.tail
-000118b0: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
-000118c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000118d0: 2020 2064 665f 666f 7265 6361 7374 2e6c     df_forecast.l
-000118e0: 6f77 6572 5f66 6f72 6563 6173 7420 3d20  ower_forecast = 
-000118f0: 6466 5f66 6f72 6563 6173 742e 6c6f 7765  df_forecast.lowe
-00011900: 725f 666f 7265 6361 7374 2e74 6169 6c28  r_forecast.tail(
-00011910: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011920: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
-00011930: 656e 6774 680d 0a20 2020 2020 2020 2020  ength..         
-00011940: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00011950: 2020 2020 2020 2020 2020 6466 5f66 6f72            df_for
-00011960: 6563 6173 742e 7570 7065 725f 666f 7265  ecast.upper_fore
-00011970: 6361 7374 203d 2064 665f 666f 7265 6361  cast = df_foreca
-00011980: 7374 2e75 7070 6572 5f66 6f72 6563 6173  st.upper_forecas
-00011990: 742e 7461 696c 280d 0a20 2020 2020 2020  t.tail(..       
-000119a0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000119b0: 6563 6173 745f 6c65 6e67 7468 0d0a 2020  ecast_length..  
-000119c0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-000119d0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-000119e0: 2020 2020 2020 2020 2020 2020 666f 7265              fore
-000119f0: 6361 7374 5f69 6e64 6578 203d 2073 656c  cast_index = sel
-00011a00: 662e 6372 6561 7465 5f66 6f72 6563 6173  f.create_forecas
-00011a10: 745f 696e 6465 7828 0d0a 2020 2020 2020  t_index(..      
-00011a20: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-00011a30: 7374 5f6c 656e 6774 682c 206c 6173 745f  st_length, last_
-00011a40: 6461 7465 3d64 662e 696e 6465 785b 2d31  date=df.index[-1
-00011a50: 5d0d 0a20 2020 2020 2020 2020 2020 2029  ]..            )
-00011a60: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00011a70: 2069 6e63 6c75 6465 5f68 6973 746f 7279   include_history
-00011a80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00011a90: 2020 2066 6f72 6563 6173 745f 696e 6465     forecast_inde
-00011aa0: 7820 3d20 6466 2e69 6e64 6578 2e75 6e69  x = df.index.uni
-00011ab0: 6f6e 2866 6f72 6563 6173 745f 696e 6465  on(forecast_inde
-00011ac0: 7829 0d0a 2020 2020 2020 2020 2020 2020  x)..            
-00011ad0: 6466 5f66 6f72 6563 6173 7420 3d20 7365  df_forecast = se
-00011ae0: 6c66 2e5f 7072 6564 6963 745f 7374 6570  lf._predict_step
-00011af0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00011b00: 2020 2064 6174 6573 3d66 6f72 6563 6173     dates=forecas
-00011b10: 745f 696e 6465 782c 0d0a 2020 2020 2020  t_index,..      
-00011b20: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
-00011b30: 636f 6d70 6f6e 656e 743d 7472 656e 645f  component=trend_
-00011b40: 666f 7265 6361 7374 2c0d 0a20 2020 2020  forecast,..     
-00011b50: 2020 2020 2020 2020 2020 2068 6973 746f             histo
-00011b60: 7279 5f64 663d 6466 2c0d 0a20 2020 2020  ry_df=df,..     
-00011b70: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-00011b80: 655f 7265 6772 6573 736f 723d 7365 6c66  e_regressor=self
-00011b90: 2e66 756c 6c5f 7265 6772 2c0d 0a20 2020  .full_regr,..   
-00011ba0: 2020 2020 2020 2020 2020 2020 2066 6c61               fla
-00011bb0: 675f 7265 6772 6573 736f 7273 3d73 656c  g_regressors=sel
-00011bc0: 662e 616c 6c5f 666c 6167 732c 0d0a 2020  f.all_flags,..  
-00011bd0: 2020 2020 2020 2020 2020 2020 2020 696d                im
-00011be0: 7061 6374 733d 7365 6c66 2e75 7365 5f69  pacts=self.use_i
-00011bf0: 6d70 6163 7473 2c0d 0a20 2020 2020 2020  mpacts,..       
-00011c00: 2020 2020 2020 2020 2072 6567 7265 7373           regress
-00011c10: 6f72 5f70 6572 5f73 6572 6965 733d 7365  or_per_series=se
-00011c20: 6c66 2e72 6567 725f 7073 5f66 6f72 652c  lf.regr_ps_fore,
-00011c30: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00011c40: 0a0d 0a20 2020 2020 2020 2023 2073 6176  ...        # sav
-00011c50: 6520 6675 7475 7265 2069 6e64 6578 2062  e future index b
-00011c60: 6566 6f72 6520 696e 636c 7564 655f 6869  efore include_hi
-00011c70: 7374 6f72 7920 6973 2061 6464 6564 0d0a  story is added..
-00011c80: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-00011c90: 655f 696d 7061 6374 7320 6973 206e 6f74  e_impacts is not
-00011ca0: 204e 6f6e 6520 616e 6420 666f 7265 6361   None and foreca
-00011cb0: 7374 5f6c 656e 6774 6820 6973 206e 6f74  st_length is not
-00011cc0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00011cd0: 2020 2020 6675 7475 7265 5f69 6d70 6163      future_impac
-00011ce0: 7473 203d 2066 7574 7572 655f 696d 7061  ts = future_impa
-00011cf0: 6374 732e 7265 696e 6465 7828 0d0a 2020  cts.reindex(..  
-00011d00: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00011d10: 6c75 6d6e 733d 6466 5f66 6f72 6563 6173  lumns=df_forecas
-00011d20: 742e 666f 7265 6361 7374 2e63 6f6c 756d  t.forecast.colum
-00011d30: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
-00011d40: 2020 2020 2069 6e64 6578 3d66 6f72 6563       index=forec
-00011d50: 6173 745f 696e 6465 782c 0d0a 2020 2020  ast_index,..    
-00011d60: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
-00011d70: 5f76 616c 7565 3d30 2c0d 0a20 2020 2020  _value=0,..     
-00011d80: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00011d90: 2020 2320 756e 646f 2070 7265 7072 6f63    # undo preproc
-00011da0: 6573 7369 6e67 2061 6e64 2073 6361 6c69  essing and scali
-00011db0: 6e67 0d0a 2020 2020 2020 2020 2320 6163  ng..        # ac
-00011dc0: 636f 756e 7420 666f 7220 736f 6d65 2074  count for some t
-00011dd0: 7261 6e73 666f 726d 6572 7320 7265 7175  ransformers requ
-00011de0: 6972 696e 6720 6469 6666 6572 656e 7420  iring different 
-00011df0: 6d65 7468 6f64 7320 6f6e 206f 7269 6769  methods on origi
-00011e00: 6e61 6c20 6461 7461 2061 6e64 2066 6f72  nal data and for
-00011e10: 6563 6173 740d 0a20 2020 2020 2020 2069  ecast..        i
-00011e20: 6620 666f 7265 6361 7374 5f6c 656e 6774  f forecast_lengt
-00011e30: 6820 6973 204e 6f6e 653a 0d0a 2020 2020  h is None:..    
-00011e40: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
-00011e50: 6173 742e 666f 7265 6361 7374 203d 2073  ast.forecast = s
-00011e60: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
-00011e70: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
-00011e80: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
-00011e90: 742e 666f 7265 6361 7374 2c20 7472 616e  t.forecast, tran
-00011ea0: 735f 6d65 7468 6f64 3d27 6f72 6967 696e  s_method='origin
-00011eb0: 616c 270d 0a20 2020 2020 2020 2020 2020  al'..           
-00011ec0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00011ed0: 6466 5f66 6f72 6563 6173 742e 6c6f 7765  df_forecast.lowe
-00011ee0: 725f 666f 7265 6361 7374 203d 2073 656c  r_forecast = sel
-00011ef0: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
-00011f00: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00011f10: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
-00011f20: 6c6f 7765 725f 666f 7265 6361 7374 2c20  lower_forecast, 
-00011f30: 7472 616e 735f 6d65 7468 6f64 3d27 6f72  trans_method='or
-00011f40: 6967 696e 616c 270d 0a20 2020 2020 2020  iginal'..       
-00011f50: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00011f60: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
-00011f70: 7570 7065 725f 666f 7265 6361 7374 203d  upper_forecast =
-00011f80: 2073 656c 662e 746f 5f6f 7269 6769 6e5f   self.to_origin_
-00011f90: 7370 6163 6528 0d0a 2020 2020 2020 2020  space(..        
-00011fa0: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
-00011fb0: 6173 742e 7570 7065 725f 666f 7265 6361  ast.upper_foreca
-00011fc0: 7374 2c20 7472 616e 735f 6d65 7468 6f64  st, trans_method
-00011fd0: 3d27 6f72 6967 696e 616c 270d 0a20 2020  ='original'..   
-00011fe0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00011ff0: 2020 2020 2020 2020 7365 6c66 2e70 7265          self.pre
-00012000: 6469 6374 6564 5f74 7265 6e64 203d 2073  dicted_trend = s
-00012010: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
-00012020: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
-00012030: 2020 2020 2020 7472 656e 645f 666f 7265        trend_fore
-00012040: 6361 7374 2e66 6f72 6563 6173 742c 2074  cast.forecast, t
-00012050: 7261 6e73 5f6d 6574 686f 643d 276f 7269  rans_method='ori
-00012060: 6769 6e61 6c27 0d0a 2020 2020 2020 2020  ginal'..        
-00012070: 2020 2020 290d 0a20 2020 2020 2020 2065      )..        e
-00012080: 6c69 6620 6e6f 7420 696e 636c 7564 655f  lif not include_
-00012090: 6869 7374 6f72 793a 0d0a 2020 2020 2020  history:..      
-000120a0: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
-000120b0: 742e 666f 7265 6361 7374 203d 2073 656c  t.forecast = sel
-000120c0: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
-000120d0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-000120e0: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
-000120f0: 666f 7265 6361 7374 2c20 7472 616e 735f  forecast, trans_
-00012100: 6d65 7468 6f64 3d27 666f 7265 6361 7374  method='forecast
-00012110: 270d 0a20 2020 2020 2020 2020 2020 2029  '..            )
-00012120: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00012130: 5f66 6f72 6563 6173 742e 6c6f 7765 725f  _forecast.lower_
-00012140: 666f 7265 6361 7374 203d 2073 656c 662e  forecast = self.
-00012150: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
-00012160: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012170: 2020 6466 5f66 6f72 6563 6173 742e 6c6f    df_forecast.lo
-00012180: 7765 725f 666f 7265 6361 7374 2c20 7472  wer_forecast, tr
-00012190: 616e 735f 6d65 7468 6f64 3d27 666f 7265  ans_method='fore
-000121a0: 6361 7374 270d 0a20 2020 2020 2020 2020  cast'..         
-000121b0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000121c0: 2020 6466 5f66 6f72 6563 6173 742e 7570    df_forecast.up
-000121d0: 7065 725f 666f 7265 6361 7374 203d 2073  per_forecast = s
-000121e0: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
-000121f0: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
-00012200: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
-00012210: 742e 7570 7065 725f 666f 7265 6361 7374  t.upper_forecast
-00012220: 2c20 7472 616e 735f 6d65 7468 6f64 3d27  , trans_method='
-00012230: 666f 7265 6361 7374 270d 0a20 2020 2020  forecast'..     
-00012240: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00012250: 2020 2020 2020 7365 6c66 2e70 7265 6469        self.predi
-00012260: 6374 6564 5f74 7265 6e64 203d 2073 656c  cted_trend = sel
-00012270: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
-00012280: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00012290: 2020 2020 7472 656e 645f 666f 7265 6361      trend_foreca
-000122a0: 7374 2e66 6f72 6563 6173 742c 2074 7261  st.forecast, tra
-000122b0: 6e73 5f6d 6574 686f 643d 2766 6f72 6563  ns_method='forec
-000122c0: 6173 7427 0d0a 2020 2020 2020 2020 2020  ast'..          
-000122d0: 2020 290d 0a20 2020 2020 2020 2065 6c73    )..        els
-000122e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000122f0: 6864 6e20 3d20 6c65 6e28 6466 5f66 6f72  hdn = len(df_for
-00012300: 6563 6173 742e 666f 7265 6361 7374 2920  ecast.forecast) 
-00012310: 2d20 666f 7265 6361 7374 5f6c 656e 6774  - forecast_lengt
-00012320: 680d 0a20 2020 2020 2020 2020 2020 2064  h..            d
-00012330: 665f 666f 7265 6361 7374 2e66 6f72 6563  f_forecast.forec
-00012340: 6173 7420 3d20 7064 2e63 6f6e 6361 7428  ast = pd.concat(
-00012350: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012360: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
-00012370: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
-00012380: 5f6f 7269 6769 6e5f 7370 6163 6528 0d0a  _origin_space(..
+00011230: 2073 656c 662e 7472 656e 645f 7472 6169   self.trend_trai
+00011240: 6e20 6966 2072 6573 6964 2069 7320 4e6f  n if resid is No
+00011250: 6e65 2065 6c73 6520 7265 7369 642c 0d0a  ne else resid,..
+00011260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011270: 2020 2020 2020 2020 7472 656e 645f 666f          trend_fo
+00011280: 7265 6361 7374 2e75 7070 6572 5f66 6f72  recast.upper_for
+00011290: 6563 6173 742c 0d0a 2020 2020 2020 2020  ecast,..        
+000112a0: 2020 2020 2020 2020 2020 2020 5d0d 0a20              ].. 
+000112b0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000112c0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+000112d0: 0a20 2020 2020 2020 2020 2020 2074 7265  .            tre
+000112e0: 6e64 5f66 6f72 6563 6173 7420 3d20 5072  nd_forecast = Pr
+000112f0: 6564 6963 7469 6f6e 4f62 6a65 6374 280d  edictionObject(.
+00011300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011310: 2066 6f72 6563 6173 743d 7365 6c66 2e74   forecast=self.t
+00011320: 7265 6e64 5f74 7261 696e 2c0d 0a20 2020  rend_train,..   
+00011330: 2020 2020 2020 2020 2020 2020 206c 6f77               low
+00011340: 6572 5f66 6f72 6563 6173 743d 7365 6c66  er_forecast=self
+00011350: 2e74 7265 6e64 5f74 7261 696e 2c0d 0a20  .trend_train,.. 
+00011360: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00011370: 7070 6572 5f66 6f72 6563 6173 743d 7365  pper_forecast=se
+00011380: 6c66 2e74 7265 6e64 5f74 7261 696e 2c0d  lf.trend_train,.
+00011390: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000113a0: 0d0a 2020 2020 2020 2020 2320 6172 5f6c  ..        # ar_l
+000113b0: 6167 732c 206d 756c 7469 7661 7269 6174  ags, multivariat
+000113c0: 6520 6665 6174 7572 6573 2072 6571 7569  e features requi
+000113d0: 7265 2031 2073 7465 7020 6c6f 6f70 0d0a  re 1 step loop..
+000113e0: 2020 2020 2020 2020 6966 2066 6f72 6563          if forec
+000113f0: 6173 745f 6c65 6e67 7468 2069 7320 4e6f  ast_length is No
+00011400: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00011410: 2064 665f 666f 7265 6361 7374 203d 2073   df_forecast = s
+00011420: 656c 662e 5f70 7265 6469 6374 5f73 7465  elf._predict_ste
+00011430: 7028 0d0a 2020 2020 2020 2020 2020 2020  p(..            
+00011440: 2020 2020 6461 7465 733d 6466 2e69 6e64      dates=df.ind
+00011450: 6578 2c0d 0a20 2020 2020 2020 2020 2020  ex,..           
+00011460: 2020 2020 2074 7265 6e64 5f63 6f6d 706f       trend_compo
+00011470: 6e65 6e74 3d74 7265 6e64 5f66 6f72 6563  nent=trend_forec
+00011480: 6173 742c 0d0a 2020 2020 2020 2020 2020  ast,..          
+00011490: 2020 2020 2020 6869 7374 6f72 795f 6466        history_df
+000114a0: 3d64 662c 0d0a 2020 2020 2020 2020 2020  =df,..          
+000114b0: 2020 2020 2020 6675 7475 7265 5f72 6567        future_reg
+000114c0: 7265 7373 6f72 3d73 656c 662e 6675 6c6c  ressor=self.full
+000114d0: 5f72 6567 722c 0d0a 2020 2020 2020 2020  _regr,..        
+000114e0: 2020 2020 2020 2020 666c 6167 5f72 6567          flag_reg
+000114f0: 7265 7373 6f72 733d 7365 6c66 2e61 6c6c  ressors=self.all
+00011500: 5f66 6c61 6773 2c0d 0a20 2020 2020 2020  _flags,..       
+00011510: 2020 2020 2020 2020 2069 6d70 6163 7473           impacts
+00011520: 3d73 656c 662e 7573 655f 696d 7061 6374  =self.use_impact
+00011530: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+00011540: 2020 2020 7265 6772 6573 736f 725f 7065      regressor_pe
+00011550: 725f 7365 7269 6573 3d73 656c 662e 7265  r_series=self.re
+00011560: 6772 5f70 735f 666f 7265 2c0d 0a20 2020  gr_ps_fore,..   
+00011570: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00011580: 2020 2020 656c 6966 2073 656c 662e 7072      elif self.pr
+00011590: 6564 6963 745f 6c6f 6f70 5f72 6571 3a0d  edict_loop_req:.
+000115a0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000115b0: 2073 7465 7020 696e 2072 616e 6765 2866   step in range(f
+000115c0: 6f72 6563 6173 745f 6c65 6e67 7468 293a  orecast_length):
+000115d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000115e0: 2020 666f 7265 6361 7374 5f69 6e64 6578    forecast_index
+000115f0: 203d 2064 662e 696e 6465 782e 756e 696f   = df.index.unio
+00011600: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
+00011610: 2020 2020 2020 2020 7365 6c66 2e63 7265          self.cre
+00011620: 6174 655f 666f 7265 6361 7374 5f69 6e64  ate_forecast_ind
+00011630: 6578 2831 2c20 6c61 7374 5f64 6174 653d  ex(1, last_date=
+00011640: 6466 2e69 6e64 6578 5b2d 315d 290d 0a20  df.index[-1]).. 
+00011650: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00011660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011670: 2020 6466 5f66 6f72 6563 6173 7420 3d20    df_forecast = 
+00011680: 7365 6c66 2e5f 7072 6564 6963 745f 7374  self._predict_st
+00011690: 6570 280d 0a20 2020 2020 2020 2020 2020  ep(..           
+000116a0: 2020 2020 2020 2020 2064 6174 6573 3d66           dates=f
+000116b0: 6f72 6563 6173 745f 696e 6465 782c 0d0a  orecast_index,..
+000116c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116d0: 2020 2020 7472 656e 645f 636f 6d70 6f6e      trend_compon
+000116e0: 656e 743d 7472 656e 645f 666f 7265 6361  ent=trend_foreca
+000116f0: 7374 2c0d 0a20 2020 2020 2020 2020 2020  st,..           
+00011700: 2020 2020 2020 2020 2068 6973 746f 7279           history
+00011710: 5f64 663d 6466 2c0d 0a20 2020 2020 2020  _df=df,..       
+00011720: 2020 2020 2020 2020 2020 2020 2066 7574               fut
+00011730: 7572 655f 7265 6772 6573 736f 723d 7365  ure_regressor=se
+00011740: 6c66 2e66 756c 6c5f 7265 6772 2c0d 0a20  lf.full_regr,.. 
+00011750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011760: 2020 2066 6c61 675f 7265 6772 6573 736f     flag_regresso
+00011770: 7273 3d73 656c 662e 616c 6c5f 666c 6167  rs=self.all_flag
+00011780: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+00011790: 2020 2020 2020 2020 696d 7061 6374 733d          impacts=
+000117a0: 7365 6c66 2e75 7365 5f69 6d70 6163 7473  self.use_impacts
+000117b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000117c0: 2020 2020 2020 2072 6567 7265 7373 6f72         regressor
+000117d0: 5f70 6572 5f73 6572 6965 733d 7365 6c66  _per_series=self
+000117e0: 2e72 6567 725f 7073 5f66 6f72 652c 0d0a  .regr_ps_fore,..
+000117f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011800: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00011810: 2020 2064 6620 3d20 7064 2e63 6f6e 6361     df = pd.conca
+00011820: 7428 5b64 662c 2064 665f 666f 7265 6361  t([df, df_foreca
+00011830: 7374 2e66 6f72 6563 6173 742e 696c 6f63  st.forecast.iloc
+00011840: 5b2d 313a 5d5d 290d 0a20 2020 2020 2020  [-1:]])..       
+00011850: 2020 2020 2069 6620 6e6f 7420 696e 636c       if not incl
+00011860: 7564 655f 6869 7374 6f72 793a 0d0a 2020  ude_history:..  
+00011870: 2020 2020 2020 2020 2020 2020 2020 6466                df
+00011880: 5f66 6f72 6563 6173 742e 666f 7265 6361  _forecast.foreca
+00011890: 7374 203d 2064 665f 666f 7265 6361 7374  st = df_forecast
+000118a0: 2e66 6f72 6563 6173 742e 7461 696c 2866  .forecast.tail(f
+000118b0: 6f72 6563 6173 745f 6c65 6e67 7468 290d  orecast_length).
+000118c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000118d0: 2064 665f 666f 7265 6361 7374 2e6c 6f77   df_forecast.low
+000118e0: 6572 5f66 6f72 6563 6173 7420 3d20 6466  er_forecast = df
+000118f0: 5f66 6f72 6563 6173 742e 6c6f 7765 725f  _forecast.lower_
+00011900: 666f 7265 6361 7374 2e74 6169 6c28 0d0a  forecast.tail(..
+00011910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011920: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
+00011930: 6774 680d 0a20 2020 2020 2020 2020 2020  gth..           
+00011940: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00011950: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
+00011960: 6173 742e 7570 7065 725f 666f 7265 6361  ast.upper_foreca
+00011970: 7374 203d 2064 665f 666f 7265 6361 7374  st = df_forecast
+00011980: 2e75 7070 6572 5f66 6f72 6563 6173 742e  .upper_forecast.
+00011990: 7461 696c 280d 0a20 2020 2020 2020 2020  tail(..         
+000119a0: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
+000119b0: 6173 745f 6c65 6e67 7468 0d0a 2020 2020  ast_length..    
+000119c0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+000119d0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000119e0: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+000119f0: 7374 5f69 6e64 6578 203d 2073 656c 662e  st_index = self.
+00011a00: 6372 6561 7465 5f66 6f72 6563 6173 745f  create_forecast_
+00011a10: 696e 6465 7828 0d0a 2020 2020 2020 2020  index(..        
+00011a20: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
+00011a30: 5f6c 656e 6774 682c 206c 6173 745f 6461  _length, last_da
+00011a40: 7465 3d64 662e 696e 6465 785b 2d31 5d0d  te=df.index[-1].
+00011a50: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00011a60: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00011a70: 6e63 6c75 6465 5f68 6973 746f 7279 3a0d  nclude_history:.
+00011a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011a90: 2066 6f72 6563 6173 745f 696e 6465 7820   forecast_index 
+00011aa0: 3d20 6466 2e69 6e64 6578 2e75 6e69 6f6e  = df.index.union
+00011ab0: 2866 6f72 6563 6173 745f 696e 6465 7829  (forecast_index)
+00011ac0: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00011ad0: 5f66 6f72 6563 6173 7420 3d20 7365 6c66  _forecast = self
+00011ae0: 2e5f 7072 6564 6963 745f 7374 6570 280d  ._predict_step(.
+00011af0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011b00: 2064 6174 6573 3d66 6f72 6563 6173 745f   dates=forecast_
+00011b10: 696e 6465 782c 0d0a 2020 2020 2020 2020  index,..        
+00011b20: 2020 2020 2020 2020 7472 656e 645f 636f          trend_co
+00011b30: 6d70 6f6e 656e 743d 7472 656e 645f 666f  mponent=trend_fo
+00011b40: 7265 6361 7374 2c0d 0a20 2020 2020 2020  recast,..       
+00011b50: 2020 2020 2020 2020 2068 6973 746f 7279           history
+00011b60: 5f64 663d 6466 2c0d 0a20 2020 2020 2020  _df=df,..       
+00011b70: 2020 2020 2020 2020 2066 7574 7572 655f           future_
+00011b80: 7265 6772 6573 736f 723d 7365 6c66 2e66  regressor=self.f
+00011b90: 756c 6c5f 7265 6772 2c0d 0a20 2020 2020  ull_regr,..     
+00011ba0: 2020 2020 2020 2020 2020 2066 6c61 675f             flag_
+00011bb0: 7265 6772 6573 736f 7273 3d73 656c 662e  regressors=self.
+00011bc0: 616c 6c5f 666c 6167 732c 0d0a 2020 2020  all_flags,..    
+00011bd0: 2020 2020 2020 2020 2020 2020 696d 7061              impa
+00011be0: 6374 733d 7365 6c66 2e75 7365 5f69 6d70  cts=self.use_imp
+00011bf0: 6163 7473 2c0d 0a20 2020 2020 2020 2020  acts,..         
+00011c00: 2020 2020 2020 2072 6567 7265 7373 6f72         regressor
+00011c10: 5f70 6572 5f73 6572 6965 733d 7365 6c66  _per_series=self
+00011c20: 2e72 6567 725f 7073 5f66 6f72 652c 0d0a  .regr_ps_fore,..
+00011c30: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00011c40: 0a20 2020 2020 2020 2023 2073 6176 6520  .        # save 
+00011c50: 6675 7475 7265 2069 6e64 6578 2062 6566  future index bef
+00011c60: 6f72 6520 696e 636c 7564 655f 6869 7374  ore include_hist
+00011c70: 6f72 7920 6973 2061 6464 6564 0d0a 2020  ory is added..  
+00011c80: 2020 2020 2020 6966 2066 7574 7572 655f        if future_
+00011c90: 696d 7061 6374 7320 6973 206e 6f74 204e  impacts is not N
+00011ca0: 6f6e 6520 616e 6420 666f 7265 6361 7374  one and forecast
+00011cb0: 5f6c 656e 6774 6820 6973 206e 6f74 204e  _length is not N
+00011cc0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00011cd0: 2020 6675 7475 7265 5f69 6d70 6163 7473    future_impacts
+00011ce0: 203d 2066 7574 7572 655f 696d 7061 6374   = future_impact
+00011cf0: 732e 7265 696e 6465 7828 0d0a 2020 2020  s.reindex(..    
+00011d00: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+00011d10: 6d6e 733d 6466 5f66 6f72 6563 6173 742e  mns=df_forecast.
+00011d20: 666f 7265 6361 7374 2e63 6f6c 756d 6e73  forecast.columns
+00011d30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011d40: 2020 2069 6e64 6578 3d66 6f72 6563 6173     index=forecas
+00011d50: 745f 696e 6465 782c 0d0a 2020 2020 2020  t_index,..      
+00011d60: 2020 2020 2020 2020 2020 6669 6c6c 5f76            fill_v
+00011d70: 616c 7565 3d30 2c0d 0a20 2020 2020 2020  alue=0,..       
+00011d80: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00011d90: 2320 756e 646f 2070 7265 7072 6f63 6573  # undo preproces
+00011da0: 7369 6e67 2061 6e64 2073 6361 6c69 6e67  sing and scaling
+00011db0: 0d0a 2020 2020 2020 2020 2320 6163 636f  ..        # acco
+00011dc0: 756e 7420 666f 7220 736f 6d65 2074 7261  unt for some tra
+00011dd0: 6e73 666f 726d 6572 7320 7265 7175 6972  nsformers requir
+00011de0: 696e 6720 6469 6666 6572 656e 7420 6d65  ing different me
+00011df0: 7468 6f64 7320 6f6e 206f 7269 6769 6e61  thods on origina
+00011e00: 6c20 6461 7461 2061 6e64 2066 6f72 6563  l data and forec
+00011e10: 6173 740d 0a20 2020 2020 2020 2069 6620  ast..        if 
+00011e20: 666f 7265 6361 7374 5f6c 656e 6774 6820  forecast_length 
+00011e30: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+00011e40: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
+00011e50: 742e 666f 7265 6361 7374 203d 2073 656c  t.forecast = sel
+00011e60: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
+00011e70: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00011e80: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
+00011e90: 666f 7265 6361 7374 2c20 7472 616e 735f  forecast, trans_
+00011ea0: 6d65 7468 6f64 3d27 6f72 6967 696e 616c  method='original
+00011eb0: 270d 0a20 2020 2020 2020 2020 2020 2029  '..            )
+00011ec0: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00011ed0: 5f66 6f72 6563 6173 742e 6c6f 7765 725f  _forecast.lower_
+00011ee0: 666f 7265 6361 7374 203d 2073 656c 662e  forecast = self.
+00011ef0: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
+00011f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011f10: 2020 6466 5f66 6f72 6563 6173 742e 6c6f    df_forecast.lo
+00011f20: 7765 725f 666f 7265 6361 7374 2c20 7472  wer_forecast, tr
+00011f30: 616e 735f 6d65 7468 6f64 3d27 6f72 6967  ans_method='orig
+00011f40: 696e 616c 270d 0a20 2020 2020 2020 2020  inal'..         
+00011f50: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00011f60: 2020 6466 5f66 6f72 6563 6173 742e 7570    df_forecast.up
+00011f70: 7065 725f 666f 7265 6361 7374 203d 2073  per_forecast = s
+00011f80: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
+00011f90: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
+00011fa0: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
+00011fb0: 742e 7570 7065 725f 666f 7265 6361 7374  t.upper_forecast
+00011fc0: 2c20 7472 616e 735f 6d65 7468 6f64 3d27  , trans_method='
+00011fd0: 6f72 6967 696e 616c 270d 0a20 2020 2020  original'..     
+00011fe0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00011ff0: 2020 2020 2020 7365 6c66 2e70 7265 6469        self.predi
+00012000: 6374 6564 5f74 7265 6e64 203d 2073 656c  cted_trend = sel
+00012010: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
+00012020: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00012030: 2020 2020 7472 656e 645f 666f 7265 6361      trend_foreca
+00012040: 7374 2e66 6f72 6563 6173 742c 2074 7261  st.forecast, tra
+00012050: 6e73 5f6d 6574 686f 643d 276f 7269 6769  ns_method='origi
+00012060: 6e61 6c27 0d0a 2020 2020 2020 2020 2020  nal'..          
+00012070: 2020 290d 0a20 2020 2020 2020 2065 6c69    )..        eli
+00012080: 6620 6e6f 7420 696e 636c 7564 655f 6869  f not include_hi
+00012090: 7374 6f72 793a 0d0a 2020 2020 2020 2020  story:..        
+000120a0: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
+000120b0: 666f 7265 6361 7374 203d 2073 656c 662e  forecast = self.
+000120c0: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
+000120d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000120e0: 2020 6466 5f66 6f72 6563 6173 742e 666f    df_forecast.fo
+000120f0: 7265 6361 7374 2c20 7472 616e 735f 6d65  recast, trans_me
+00012100: 7468 6f64 3d27 666f 7265 6361 7374 270d  thod='forecast'.
+00012110: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00012120: 2020 2020 2020 2020 2020 2020 6466 5f66              df_f
+00012130: 6f72 6563 6173 742e 6c6f 7765 725f 666f  orecast.lower_fo
+00012140: 7265 6361 7374 203d 2073 656c 662e 746f  recast = self.to
+00012150: 5f6f 7269 6769 6e5f 7370 6163 6528 0d0a  _origin_space(..
+00012160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012170: 6466 5f66 6f72 6563 6173 742e 6c6f 7765  df_forecast.lowe
+00012180: 725f 666f 7265 6361 7374 2c20 7472 616e  r_forecast, tran
+00012190: 735f 6d65 7468 6f64 3d27 666f 7265 6361  s_method='foreca
+000121a0: 7374 270d 0a20 2020 2020 2020 2020 2020  st'..           
+000121b0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+000121c0: 6466 5f66 6f72 6563 6173 742e 7570 7065  df_forecast.uppe
+000121d0: 725f 666f 7265 6361 7374 203d 2073 656c  r_forecast = sel
+000121e0: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
+000121f0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00012200: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
+00012210: 7570 7065 725f 666f 7265 6361 7374 2c20  upper_forecast, 
+00012220: 7472 616e 735f 6d65 7468 6f64 3d27 666f  trans_method='fo
+00012230: 7265 6361 7374 270d 0a20 2020 2020 2020  recast'..       
+00012240: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00012250: 2020 2020 7365 6c66 2e70 7265 6469 6374      self.predict
+00012260: 6564 5f74 7265 6e64 203d 2073 656c 662e  ed_trend = self.
+00012270: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
+00012280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012290: 2020 7472 656e 645f 666f 7265 6361 7374    trend_forecast
+000122a0: 2e66 6f72 6563 6173 742c 2074 7261 6e73  .forecast, trans
+000122b0: 5f6d 6574 686f 643d 2766 6f72 6563 6173  _method='forecas
+000122c0: 7427 0d0a 2020 2020 2020 2020 2020 2020  t'..            
+000122d0: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
+000122e0: 0d0a 2020 2020 2020 2020 2020 2020 6864  ..            hd
+000122f0: 6e20 3d20 6c65 6e28 6466 5f66 6f72 6563  n = len(df_forec
+00012300: 6173 742e 666f 7265 6361 7374 2920 2d20  ast.forecast) - 
+00012310: 666f 7265 6361 7374 5f6c 656e 6774 680d  forecast_length.
+00012320: 0a20 2020 2020 2020 2020 2020 2064 665f  .            df_
+00012330: 666f 7265 6361 7374 2e66 6f72 6563 6173  forecast.forecas
+00012340: 7420 3d20 7064 2e63 6f6e 6361 7428 0d0a  t = pd.concat(..
+00012350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012360: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00012370: 2020 2020 2020 2073 656c 662e 746f 5f6f         self.to_o
+00012380: 7269 6769 6e5f 7370 6163 6528 0d0a 2020  rigin_space(..  
 00012390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000123a0: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
-000123b0: 6173 742e 666f 7265 6361 7374 2e68 6561  ast.forecast.hea
-000123c0: 6428 6864 6e29 2c20 7472 616e 735f 6d65  d(hdn), trans_me
-000123d0: 7468 6f64 3d27 6f72 6967 696e 616c 270d  thod='original'.
-000123e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000123f0: 2020 2020 2029 2c0d 0a20 2020 2020 2020       ),..       
-00012400: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00012410: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
-00012420: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00012430: 2020 2020 2020 2020 2020 2020 6466 5f66              df_f
-00012440: 6f72 6563 6173 742e 666f 7265 6361 7374  orecast.forecast
-00012450: 2e74 6169 6c28 666f 7265 6361 7374 5f6c  .tail(forecast_l
-00012460: 656e 6774 6829 2c0d 0a20 2020 2020 2020  ength),..       
-00012470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012480: 2074 7261 6e73 5f6d 6574 686f 643d 2766   trans_method='f
-00012490: 6f72 6563 6173 7427 2c0d 0a20 2020 2020  orecast',..     
-000124a0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000124b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000124c0: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
-000124d0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-000124e0: 2064 665f 666f 7265 6361 7374 2e6c 6f77   df_forecast.low
-000124f0: 6572 5f66 6f72 6563 6173 7420 3d20 7064  er_forecast = pd
-00012500: 2e63 6f6e 6361 7428 0d0a 2020 2020 2020  .concat(..      
-00012510: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
-00012520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012530: 2073 656c 662e 746f 5f6f 7269 6769 6e5f   self.to_origin_
-00012540: 7370 6163 6528 0d0a 2020 2020 2020 2020  space(..        
-00012550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012560: 6466 5f66 6f72 6563 6173 742e 6c6f 7765  df_forecast.lowe
-00012570: 725f 666f 7265 6361 7374 2e68 6561 6428  r_forecast.head(
-00012580: 6864 6e29 2c0d 0a20 2020 2020 2020 2020  hdn),..         
-00012590: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000125a0: 7261 6e73 5f6d 6574 686f 643d 276f 7269  rans_method='ori
-000125b0: 6769 6e61 6c27 2c0d 0a20 2020 2020 2020  ginal',..       
-000125c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125d0: 2062 6f75 6e64 733d 5472 7565 2c0d 0a20   bounds=True,.. 
+000123a0: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
+000123b0: 742e 666f 7265 6361 7374 2e68 6561 6428  t.forecast.head(
+000123c0: 6864 6e29 2c20 7472 616e 735f 6d65 7468  hdn), trans_meth
+000123d0: 6f64 3d27 6f72 6967 696e 616c 270d 0a20  od='original'.. 
+000123e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123f0: 2020 2029 2c0d 0a20 2020 2020 2020 2020     ),..         
+00012400: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00012410: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
+00012420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012430: 2020 2020 2020 2020 2020 6466 5f66 6f72            df_for
+00012440: 6563 6173 742e 666f 7265 6361 7374 2e74  ecast.forecast.t
+00012450: 6169 6c28 666f 7265 6361 7374 5f6c 656e  ail(forecast_len
+00012460: 6774 6829 2c0d 0a20 2020 2020 2020 2020  gth),..         
+00012470: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00012480: 7261 6e73 5f6d 6574 686f 643d 2766 6f72  rans_method='for
+00012490: 6563 6173 7427 2c0d 0a20 2020 2020 2020  ecast',..       
+000124a0: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
+000124b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000124c0: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
+000124d0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+000124e0: 665f 666f 7265 6361 7374 2e6c 6f77 6572  f_forecast.lower
+000124f0: 5f66 6f72 6563 6173 7420 3d20 7064 2e63  _forecast = pd.c
+00012500: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
+00012510: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+00012520: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00012530: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
+00012540: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
+00012550: 2020 2020 2020 2020 2020 2020 2020 6466                df
+00012560: 5f66 6f72 6563 6173 742e 6c6f 7765 725f  _forecast.lower_
+00012570: 666f 7265 6361 7374 2e68 6561 6428 6864  forecast.head(hd
+00012580: 6e29 2c0d 0a20 2020 2020 2020 2020 2020  n),..           
+00012590: 2020 2020 2020 2020 2020 2020 2074 7261               tra
+000125a0: 6e73 5f6d 6574 686f 643d 276f 7269 6769  ns_method='origi
+000125b0: 6e61 6c27 2c0d 0a20 2020 2020 2020 2020  nal',..         
+000125c0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000125d0: 6f75 6e64 733d 5472 7565 2c0d 0a20 2020  ounds=True,..   
 000125e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125f0: 2020 2029 2c0d 0a20 2020 2020 2020 2020     ),..         
-00012600: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012610: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
-00012620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012630: 2020 2020 2020 2020 2020 6466 5f66 6f72            df_for
-00012640: 6563 6173 742e 6c6f 7765 725f 666f 7265  ecast.lower_fore
-00012650: 6361 7374 2e74 6169 6c28 666f 7265 6361  cast.tail(foreca
-00012660: 7374 5f6c 656e 6774 6829 2c0d 0a20 2020  st_length),..   
+000125f0: 2029 2c0d 0a20 2020 2020 2020 2020 2020   ),..           
+00012600: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
+00012610: 5f6f 7269 6769 6e5f 7370 6163 6528 0d0a  _origin_space(..
+00012620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012630: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
+00012640: 6173 742e 6c6f 7765 725f 666f 7265 6361  ast.lower_foreca
+00012650: 7374 2e74 6169 6c28 666f 7265 6361 7374  st.tail(forecast
+00012660: 5f6c 656e 6774 6829 2c0d 0a20 2020 2020  _length),..     
 00012670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012680: 2020 2020 2074 7261 6e73 5f6d 6574 686f       trans_metho
-00012690: 643d 2766 6f72 6563 6173 7427 2c0d 0a20  d='forecast',.. 
+00012680: 2020 2074 7261 6e73 5f6d 6574 686f 643d     trans_method=
+00012690: 2766 6f72 6563 6173 7427 2c0d 0a20 2020  'forecast',..   
 000126a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000126b0: 2020 2020 2020 2062 6f75 6e64 733d 5472         bounds=Tr
-000126c0: 7565 2c0d 0a20 2020 2020 2020 2020 2020  ue,..           
-000126d0: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
-000126e0: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
-000126f0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00012700: 2020 2020 2020 2020 2020 2064 665f 666f             df_fo
-00012710: 7265 6361 7374 2e75 7070 6572 5f66 6f72  recast.upper_for
-00012720: 6563 6173 7420 3d20 7064 2e63 6f6e 6361  ecast = pd.conca
-00012730: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
-00012740: 2020 2020 5b0d 0a20 2020 2020 2020 2020      [..         
-00012750: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012760: 746f 5f6f 7269 6769 6e5f 7370 6163 6528  to_origin_space(
-00012770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012780: 2020 2020 2020 2020 2020 6466 5f66 6f72            df_for
-00012790: 6563 6173 742e 7570 7065 725f 666f 7265  ecast.upper_fore
-000127a0: 6361 7374 2e68 6561 6428 6864 6e29 2c0d  cast.head(hdn),.
-000127b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000127c0: 2020 2020 2020 2020 2074 7261 6e73 5f6d           trans_m
-000127d0: 6574 686f 643d 276f 7269 6769 6e61 6c27  ethod='original'
-000127e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000127f0: 2020 2020 2020 2020 2020 2062 6f75 6e64             bound
-00012800: 733d 5472 7565 2c0d 0a20 2020 2020 2020  s=True,..       
-00012810: 2020 2020 2020 2020 2020 2020 2029 2c0d               ),.
-00012820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012830: 2020 2020 2073 656c 662e 746f 5f6f 7269       self.to_ori
-00012840: 6769 6e5f 7370 6163 6528 0d0a 2020 2020  gin_space(..    
+000126b0: 2020 2020 2062 6f75 6e64 733d 5472 7565       bounds=True
+000126c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000126d0: 2020 2020 2020 2029 2c0d 0a20 2020 2020         ),..     
+000126e0: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
+000126f0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00012700: 2020 2020 2020 2020 2064 665f 666f 7265           df_fore
+00012710: 6361 7374 2e75 7070 6572 5f66 6f72 6563  cast.upper_forec
+00012720: 6173 7420 3d20 7064 2e63 6f6e 6361 7428  ast = pd.concat(
+00012730: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012740: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
+00012750: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
+00012760: 5f6f 7269 6769 6e5f 7370 6163 6528 0d0a  _origin_space(..
+00012770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012780: 2020 2020 2020 2020 6466 5f66 6f72 6563          df_forec
+00012790: 6173 742e 7570 7065 725f 666f 7265 6361  ast.upper_foreca
+000127a0: 7374 2e68 6561 6428 6864 6e29 2c0d 0a20  st.head(hdn),.. 
+000127b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000127c0: 2020 2020 2020 2074 7261 6e73 5f6d 6574         trans_met
+000127d0: 686f 643d 276f 7269 6769 6e61 6c27 2c0d  hod='original',.
+000127e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000127f0: 2020 2020 2020 2020 2062 6f75 6e64 733d           bounds=
+00012800: 5472 7565 2c0d 0a20 2020 2020 2020 2020  True,..         
+00012810: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
+00012820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012830: 2020 2073 656c 662e 746f 5f6f 7269 6769     self.to_origi
+00012840: 6e5f 7370 6163 6528 0d0a 2020 2020 2020  n_space(..      
 00012850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012860: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
-00012870: 7570 7065 725f 666f 7265 6361 7374 2e74  upper_forecast.t
-00012880: 6169 6c28 666f 7265 6361 7374 5f6c 656e  ail(forecast_len
-00012890: 6774 6829 2c0d 0a20 2020 2020 2020 2020  gth),..         
-000128a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000128b0: 7261 6e73 5f6d 6574 686f 643d 2766 6f72  rans_method='for
-000128c0: 6563 6173 7427 2c0d 0a20 2020 2020 2020  ecast',..       
-000128d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128e0: 2062 6f75 6e64 733d 5472 7565 2c0d 0a20   bounds=True,.. 
+00012860: 2020 6466 5f66 6f72 6563 6173 742e 7570    df_forecast.up
+00012870: 7065 725f 666f 7265 6361 7374 2e74 6169  per_forecast.tai
+00012880: 6c28 666f 7265 6361 7374 5f6c 656e 6774  l(forecast_lengt
+00012890: 6829 2c0d 0a20 2020 2020 2020 2020 2020  h),..           
+000128a0: 2020 2020 2020 2020 2020 2020 2074 7261               tra
+000128b0: 6e73 5f6d 6574 686f 643d 2766 6f72 6563  ns_method='forec
+000128c0: 6173 7427 2c0d 0a20 2020 2020 2020 2020  ast',..         
+000128d0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+000128e0: 6f75 6e64 733d 5472 7565 2c0d 0a20 2020  ounds=True,..   
 000128f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012900: 2020 2029 2c0d 0a20 2020 2020 2020 2020     ),..         
-00012910: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
-00012920: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00012930: 2020 2020 2073 656c 662e 7072 6564 6963       self.predic
-00012940: 7465 645f 7472 656e 6420 3d20 7064 2e63  ted_trend = pd.c
-00012950: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
-00012960: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
-00012970: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00012980: 656c 662e 746f 5f6f 7269 6769 6e5f 7370  elf.to_origin_sp
-00012990: 6163 6528 0d0a 2020 2020 2020 2020 2020  ace(..          
-000129a0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-000129b0: 656e 645f 666f 7265 6361 7374 2e66 6f72  end_forecast.for
-000129c0: 6563 6173 742e 6865 6164 2868 646e 292c  ecast.head(hdn),
-000129d0: 2074 7261 6e73 5f6d 6574 686f 643d 276f   trans_method='o
-000129e0: 7269 6769 6e61 6c27 0d0a 2020 2020 2020  riginal'..      
-000129f0: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-00012a00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012a10: 2020 2020 2020 7365 6c66 2e74 6f5f 6f72        self.to_or
-00012a20: 6967 696e 5f73 7061 6365 280d 0a20 2020  igin_space(..   
+00012900: 2029 2c0d 0a20 2020 2020 2020 2020 2020   ),..           
+00012910: 2020 2020 205d 0d0a 2020 2020 2020 2020       ]..        
+00012920: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00012930: 2020 2073 656c 662e 7072 6564 6963 7465     self.predicte
+00012940: 645f 7472 656e 6420 3d20 7064 2e63 6f6e  d_trend = pd.con
+00012950: 6361 7428 0d0a 2020 2020 2020 2020 2020  cat(..          
+00012960: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
+00012970: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00012980: 662e 746f 5f6f 7269 6769 6e5f 7370 6163  f.to_origin_spac
+00012990: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+000129a0: 2020 2020 2020 2020 2020 2020 7472 656e              tren
+000129b0: 645f 666f 7265 6361 7374 2e66 6f72 6563  d_forecast.forec
+000129c0: 6173 742e 6865 6164 2868 646e 292c 2074  ast.head(hdn), t
+000129d0: 7261 6e73 5f6d 6574 686f 643d 276f 7269  rans_method='ori
+000129e0: 6769 6e61 6c27 0d0a 2020 2020 2020 2020  ginal'..        
+000129f0: 2020 2020 2020 2020 2020 2020 292c 0d0a              ),..
+00012a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a10: 2020 2020 7365 6c66 2e74 6f5f 6f72 6967      self.to_orig
+00012a20: 696e 5f73 7061 6365 280d 0a20 2020 2020  in_space(..     
 00012a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012a40: 2020 2020 2074 7265 6e64 5f66 6f72 6563       trend_forec
-00012a50: 6173 742e 666f 7265 6361 7374 2e74 6169  ast.forecast.tai
-00012a60: 6c28 666f 7265 6361 7374 5f6c 656e 6774  l(forecast_lengt
-00012a70: 6829 2c0d 0a20 2020 2020 2020 2020 2020  h),..           
-00012a80: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-00012a90: 6e73 5f6d 6574 686f 643d 2766 6f72 6563  ns_method='forec
-00012aa0: 6173 7427 2c0d 0a20 2020 2020 2020 2020  ast',..         
-00012ab0: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
-00012ac0: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00012ad0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00012ae0: 0a0d 0a20 2020 2020 2020 2023 2075 7064  ...        # upd
-00012af0: 6174 6520 7472 656e 6420 616e 616c 7973  ate trend analys
-00012b00: 6973 2062 6173 6564 206f 6e20 7472 656e  is based on tren
-00012b10: 6420 666f 7265 6361 7374 2061 7320 7765  d forecast as we
-00012b20: 6c6c 0d0a 2020 2020 2020 2020 6966 2066  ll..        if f
-00012b30: 6f72 6563 6173 745f 6c65 6e67 7468 2069  orecast_length i
-00012b40: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2069  s not None and i
-00012b50: 6e63 6c75 6465 5f68 6973 746f 7279 3a0d  nclude_history:.
-00012b60: 0a20 2020 2020 2020 2020 2020 2074 7265  .            tre
-00012b70: 6e64 5f70 6f73 7465 7269 6f72 2c20 7365  nd_posterior, se
-00012b80: 6c66 2e73 6c6f 7065 2c20 696e 7465 7263  lf.slope, interc
-00012b90: 6570 7420 3d20 7365 6c66 2e72 6f6c 6c69  ept = self.rolli
-00012ba0: 6e67 5f74 7265 6e64 280d 0a20 2020 2020  ng_trend(..     
-00012bb0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012bc0: 7072 6564 6963 7465 645f 7472 656e 642c  predicted_trend,
-00012bd0: 206e 702e 6172 7261 7928 7365 6c66 2e74   np.array(self.t
-00012be0: 5f70 7265 6469 6374 290d 0a20 2020 2020  _predict)..     
-00012bf0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00012c00: 2020 2020 2020 280d 0a20 2020 2020 2020        (..       
-00012c10: 2020 2020 2020 2020 2073 656c 662e 7a65           self.ze
-00012c20: 726f 5f63 726f 7373 696e 6773 2c0d 0a20  ro_crossings,.. 
-00012c30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00012c40: 656c 662e 6368 616e 6765 706f 696e 7473  elf.changepoints
-00012c50: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00012c60: 2020 2073 656c 662e 736c 6f70 655f 7369     self.slope_si
-00012c70: 676e 2c0d 0a20 2020 2020 2020 2020 2020  gn,..           
-00012c80: 2020 2020 2073 656c 662e 6163 6365 6c2c       self.accel,
-00012c90: 0d0a 2020 2020 2020 2020 2020 2020 2920  ..            ) 
-00012ca0: 3d20 7365 6c66 2e61 6e61 6c79 7a65 5f74  = self.analyze_t
-00012cb0: 7265 6e64 2873 656c 662e 736c 6f70 652c  rend(self.slope,
-00012cc0: 2069 6e64 6578 3d73 656c 662e 7072 6564   index=self.pred
-00012cd0: 6963 7465 645f 7472 656e 642e 696e 6465  icted_trend.inde
-00012ce0: 7829 0d0a 0d0a 2020 2020 2020 2020 2320  x)....        # 
-00012cf0: 646f 6e27 7420 666f 7267 6574 2074 6f20  don't forget to 
-00012d00: 6164 6420 696e 2070 6173 745f 696d 7061  add in past_impa
-00012d10: 6374 7320 2875 7365 2066 7574 7572 6520  cts (use future 
-00012d20: 696d 7061 6374 7320 6167 6169 6e3f 2920  impacts again?) 
-00012d30: 4146 5445 5220 756e 7363 616c 696e 670d  AFTER unscaling.
-00012d40: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00012d50: 2e70 6173 745f 696d 7061 6374 735f 696e  .past_impacts_in
-00012d60: 7465 7276 656e 7469 6f6e 2021 3d20 2272  tervention != "r
-00012d70: 6567 7265 7373 6f72 223a 0d0a 2020 2020  egressor":..    
-00012d80: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-00012d90: 655f 696d 7061 6374 7320 6973 206e 6f74  e_impacts is not
-00012da0: 204e 6f6e 6520 616e 6420 7365 6c66 2e70   None and self.p
-00012db0: 6173 745f 696d 7061 6374 7320 6973 204e  ast_impacts is N
-00012dc0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00012dd0: 2020 2020 2020 7061 7374 5f69 6d70 6163        past_impac
-00012de0: 7473 203d 2070 642e 4461 7461 4672 616d  ts = pd.DataFram
-00012df0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-00012e00: 2020 2020 2020 2020 302c 2069 6e64 6578          0, index
-00012e10: 3d73 656c 662e 6466 2e69 6e64 6578 2c20  =self.df.index, 
-00012e20: 636f 6c75 6d6e 733d 7365 6c66 2e64 662e  columns=self.df.
-00012e30: 636f 6c75 6d6e 730d 0a20 2020 2020 2020  columns..       
-00012e40: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00012e50: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00012e60: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00012e70: 6173 745f 696d 7061 6374 7320 3d20 7365  ast_impacts = se
-00012e80: 6c66 2e70 6173 745f 696d 7061 6374 730d  lf.past_impacts.
-00012e90: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-00012ea0: 6f6c 6c20 666f 7277 6172 6420 7461 696c  oll forward tail
-00012eb0: 206f 6620 7061 7374 2069 6d70 6163 7473   of past impacts
-00012ec0: 2c20 6173 7375 6d69 6e67 2069 7420 636f  , assuming it co
-00012ed0: 6e74 696e 7565 730d 0a20 2020 2020 2020  ntinues..       
-00012ee0: 2020 2020 2069 6620 7365 6c66 2e70 6173       if self.pas
-00012ef0: 745f 696d 7061 6374 7320 6973 206e 6f74  t_impacts is not
-00012f00: 204e 6f6e 6520 616e 6420 666f 7265 6361   None and foreca
-00012f10: 7374 5f6c 656e 6774 6820 6973 206e 6f74  st_length is not
-00012f20: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00012f30: 2020 2020 2020 2020 6675 7475 7265 5f69          future_i
-00012f40: 6d70 7473 203d 2070 642e 4461 7461 4672  mpts = pd.DataFr
-00012f50: 616d 6528 0d0a 2020 2020 2020 2020 2020  ame(..          
-00012f60: 2020 2020 2020 2020 2020 6e70 2e72 6570            np.rep
-00012f70: 6561 7428 0d0a 2020 2020 2020 2020 2020  eat(..          
-00012f80: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00012f90: 6c66 2e70 6173 745f 696d 7061 6374 732e  lf.past_impacts.
-00012fa0: 696c 6f63 5b2d 313a 5d2e 746f 5f6e 756d  iloc[-1:].to_num
-00012fb0: 7079 2829 2c20 666f 7265 6361 7374 5f6c  py(), forecast_l
-00012fc0: 656e 6774 682c 2061 7869 733d 300d 0a20  ength, axis=0.. 
+00012a40: 2020 2074 7265 6e64 5f66 6f72 6563 6173     trend_forecas
+00012a50: 742e 666f 7265 6361 7374 2e74 6169 6c28  t.forecast.tail(
+00012a60: 666f 7265 6361 7374 5f6c 656e 6774 6829  forecast_length)
+00012a70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00012a80: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+00012a90: 5f6d 6574 686f 643d 2766 6f72 6563 6173  _method='forecas
+00012aa0: 7427 2c0d 0a20 2020 2020 2020 2020 2020  t',..           
+00012ab0: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
+00012ac0: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
+00012ad0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
+00012ae0: 0a20 2020 2020 2020 2023 2075 7064 6174  .        # updat
+00012af0: 6520 7472 656e 6420 616e 616c 7973 6973  e trend analysis
+00012b00: 2062 6173 6564 206f 6e20 7472 656e 6420   based on trend 
+00012b10: 666f 7265 6361 7374 2061 7320 7765 6c6c  forecast as well
+00012b20: 0d0a 2020 2020 2020 2020 6966 2066 6f72  ..        if for
+00012b30: 6563 6173 745f 6c65 6e67 7468 2069 7320  ecast_length is 
+00012b40: 6e6f 7420 4e6f 6e65 2061 6e64 2069 6e63  not None and inc
+00012b50: 6c75 6465 5f68 6973 746f 7279 3a0d 0a20  lude_history:.. 
+00012b60: 2020 2020 2020 2020 2020 2074 7265 6e64             trend
+00012b70: 5f70 6f73 7465 7269 6f72 2c20 7365 6c66  _posterior, self
+00012b80: 2e73 6c6f 7065 2c20 696e 7465 7263 6570  .slope, intercep
+00012b90: 7420 3d20 7365 6c66 2e72 6f6c 6c69 6e67  t = self.rolling
+00012ba0: 5f74 7265 6e64 280d 0a20 2020 2020 2020  _trend(..       
+00012bb0: 2020 2020 2020 2020 2073 656c 662e 7072           self.pr
+00012bc0: 6564 6963 7465 645f 7472 656e 642c 206e  edicted_trend, n
+00012bd0: 702e 6172 7261 7928 7365 6c66 2e74 5f70  p.array(self.t_p
+00012be0: 7265 6469 6374 290d 0a20 2020 2020 2020  redict)..       
+00012bf0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00012c00: 2020 2020 280d 0a20 2020 2020 2020 2020      (..         
+00012c10: 2020 2020 2020 2073 656c 662e 7a65 726f         self.zero
+00012c20: 5f63 726f 7373 696e 6773 2c0d 0a20 2020  _crossings,..   
+00012c30: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00012c40: 662e 6368 616e 6765 706f 696e 7473 2c0d  f.changepoints,.
+00012c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012c60: 2073 656c 662e 736c 6f70 655f 7369 676e   self.slope_sign
+00012c70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00012c80: 2020 2073 656c 662e 6163 6365 6c2c 0d0a     self.accel,..
+00012c90: 2020 2020 2020 2020 2020 2020 2920 3d20              ) = 
+00012ca0: 7365 6c66 2e61 6e61 6c79 7a65 5f74 7265  self.analyze_tre
+00012cb0: 6e64 2873 656c 662e 736c 6f70 652c 2069  nd(self.slope, i
+00012cc0: 6e64 6578 3d73 656c 662e 7072 6564 6963  ndex=self.predic
+00012cd0: 7465 645f 7472 656e 642e 696e 6465 7829  ted_trend.index)
+00012ce0: 0d0a 0d0a 2020 2020 2020 2020 2320 646f  ....        # do
+00012cf0: 6e27 7420 666f 7267 6574 2074 6f20 6164  n't forget to ad
+00012d00: 6420 696e 2070 6173 745f 696d 7061 6374  d in past_impact
+00012d10: 7320 2875 7365 2066 7574 7572 6520 696d  s (use future im
+00012d20: 7061 6374 7320 6167 6169 6e3f 2920 4146  pacts again?) AF
+00012d30: 5445 5220 756e 7363 616c 696e 670d 0a20  TER unscaling.. 
+00012d40: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
+00012d50: 6173 745f 696d 7061 6374 735f 696e 7465  ast_impacts_inte
+00012d60: 7276 656e 7469 6f6e 2021 3d20 2272 6567  rvention != "reg
+00012d70: 7265 7373 6f72 223a 0d0a 2020 2020 2020  ressor":..      
+00012d80: 2020 2020 2020 6966 2066 7574 7572 655f        if future_
+00012d90: 696d 7061 6374 7320 6973 206e 6f74 204e  impacts is not N
+00012da0: 6f6e 6520 616e 6420 7365 6c66 2e70 6173  one and self.pas
+00012db0: 745f 696d 7061 6374 7320 6973 204e 6f6e  t_impacts is Non
+00012dc0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00012dd0: 2020 2020 7061 7374 5f69 6d70 6163 7473      past_impacts
+00012de0: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
+00012df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012e00: 2020 2020 2020 302c 2069 6e64 6578 3d73        0, index=s
+00012e10: 656c 662e 6466 2e69 6e64 6578 2c20 636f  elf.df.index, co
+00012e20: 6c75 6d6e 733d 7365 6c66 2e64 662e 636f  lumns=self.df.co
+00012e30: 6c75 6d6e 730d 0a20 2020 2020 2020 2020  lumns..         
+00012e40: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00012e50: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00012e60: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+00012e70: 745f 696d 7061 6374 7320 3d20 7365 6c66  t_impacts = self
+00012e80: 2e70 6173 745f 696d 7061 6374 730d 0a20  .past_impacts.. 
+00012e90: 2020 2020 2020 2020 2020 2023 2072 6f6c             # rol
+00012ea0: 6c20 666f 7277 6172 6420 7461 696c 206f  l forward tail o
+00012eb0: 6620 7061 7374 2069 6d70 6163 7473 2c20  f past impacts, 
+00012ec0: 6173 7375 6d69 6e67 2069 7420 636f 6e74  assuming it cont
+00012ed0: 696e 7565 730d 0a20 2020 2020 2020 2020  inues..         
+00012ee0: 2020 2069 6620 7365 6c66 2e70 6173 745f     if self.past_
+00012ef0: 696d 7061 6374 7320 6973 206e 6f74 204e  impacts is not N
+00012f00: 6f6e 6520 616e 6420 666f 7265 6361 7374  one and forecast
+00012f10: 5f6c 656e 6774 6820 6973 206e 6f74 204e  _length is not N
+00012f20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00012f30: 2020 2020 2020 6675 7475 7265 5f69 6d70        future_imp
+00012f40: 7473 203d 2070 642e 4461 7461 4672 616d  ts = pd.DataFram
+00012f50: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00012f60: 2020 2020 2020 2020 6e70 2e72 6570 6561          np.repea
+00012f70: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+00012f80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00012f90: 2e70 6173 745f 696d 7061 6374 732e 696c  .past_impacts.il
+00012fa0: 6f63 5b2d 313a 5d2e 746f 5f6e 756d 7079  oc[-1:].to_numpy
+00012fb0: 2829 2c20 666f 7265 6361 7374 5f6c 656e  (), forecast_len
+00012fc0: 6774 682c 2061 7869 733d 300d 0a20 2020  gth, axis=0..   
 00012fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012fe0: 2020 2029 2c0d 0a20 2020 2020 2020 2020     ),..         
-00012ff0: 2020 2020 2020 2020 2020 2069 6e64 6578             index
-00013000: 3d64 665f 666f 7265 6361 7374 2e66 6f72  =df_forecast.for
-00013010: 6563 6173 742e 696e 6465 785b 2d66 6f72  ecast.index[-for
-00013020: 6563 6173 745f 6c65 6e67 7468 3a5d 2c0d  ecast_length:],.
-00013030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013040: 2020 2020 2063 6f6c 756d 6e73 3d73 656c       columns=sel
-00013050: 662e 7061 7374 5f69 6d70 6163 7473 2e63  f.past_impacts.c
-00013060: 6f6c 756d 6e73 2c0d 0a20 2020 2020 2020  olumns,..       
-00013070: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00013080: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-00013090: 7574 7572 655f 696d 7061 6374 7320 6973  uture_impacts is
-000130a0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-000130b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000130c0: 6675 7475 7265 5f69 6d70 7473 203d 2028  future_impts = (
-000130d0: 2831 202b 2066 7574 7572 655f 696d 7074  (1 + future_impt
-000130e0: 7329 202a 2028 3120 2b20 6675 7475 7265  s) * (1 + future
-000130f0: 5f69 6d70 6163 7473 2929 202d 2031 0d0a  _impacts)) - 1..
-00013100: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00013110: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00013120: 2020 2066 7574 7572 655f 696d 7074 7320     future_impts 
-00013130: 3d20 7064 2e44 6174 6146 7261 6d65 2829  = pd.DataFrame()
-00013140: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00013150: 2073 656c 662e 7061 7374 5f69 6d70 6163   self.past_impac
-00013160: 7473 2069 7320 6e6f 7420 4e6f 6e65 206f  ts is not None o
-00013170: 7220 6675 7475 7265 5f69 6d70 6163 7473  r future_impacts
-00013180: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00013190: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000131a0: 6d70 7473 203d 2031 202b 2028 0d0a 2020  mpts = 1 + (..  
+00012fe0: 2029 2c0d 0a20 2020 2020 2020 2020 2020   ),..           
+00012ff0: 2020 2020 2020 2020 2069 6e64 6578 3d64           index=d
+00013000: 665f 666f 7265 6361 7374 2e66 6f72 6563  f_forecast.forec
+00013010: 6173 742e 696e 6465 785b 2d66 6f72 6563  ast.index[-forec
+00013020: 6173 745f 6c65 6e67 7468 3a5d 2c0d 0a20  ast_length:],.. 
+00013030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013040: 2020 2063 6f6c 756d 6e73 3d73 656c 662e     columns=self.
+00013050: 7061 7374 5f69 6d70 6163 7473 2e63 6f6c  past_impacts.col
+00013060: 756d 6e73 2c0d 0a20 2020 2020 2020 2020  umns,..         
+00013070: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00013080: 2020 2020 2020 2020 2020 6966 2066 7574            if fut
+00013090: 7572 655f 696d 7061 6374 7320 6973 206e  ure_impacts is n
+000130a0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000130b0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
+000130c0: 7475 7265 5f69 6d70 7473 203d 2028 2831  ture_impts = ((1
+000130d0: 202b 2066 7574 7572 655f 696d 7074 7329   + future_impts)
+000130e0: 202a 2028 3120 2b20 6675 7475 7265 5f69   * (1 + future_i
+000130f0: 6d70 6163 7473 2929 202d 2031 0d0a 2020  mpacts)) - 1..  
+00013100: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00013110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013120: 2066 7574 7572 655f 696d 7074 7320 3d20   future_impts = 
+00013130: 7064 2e44 6174 6146 7261 6d65 2829 0d0a  pd.DataFrame()..
+00013140: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00013150: 656c 662e 7061 7374 5f69 6d70 6163 7473  elf.past_impacts
+00013160: 2069 7320 6e6f 7420 4e6f 6e65 206f 7220   is not None or 
+00013170: 6675 7475 7265 5f69 6d70 6163 7473 2069  future_impacts i
+00013180: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00013190: 2020 2020 2020 2020 2020 2020 2069 6d70               imp
+000131a0: 7473 203d 2031 202b 2028 0d0a 2020 2020  ts = 1 + (..    
 000131b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000131c0: 2020 7064 2e63 6f6e 6361 7428 0d0a 2020    pd.concat(..  
+000131c0: 7064 2e63 6f6e 6361 7428 0d0a 2020 2020  pd.concat(..    
 000131d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000131e0: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
+000131e0: 2020 2020 5b0d 0a20 2020 2020 2020 2020      [..         
 000131f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013200: 2020 2020 2070 6173 745f 696d 7061 6374       past_impact
-00013210: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00013220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013230: 6675 7475 7265 5f69 6d70 7473 5b7e 6675  future_impts[~fu
-00013240: 7475 7265 5f69 6d70 7473 2e69 6e64 6578  ture_impts.index
-00013250: 2e69 7369 6e28 7061 7374 5f69 6d70 6163  .isin(past_impac
-00013260: 7473 2e69 6e64 6578 295d 2c0d 0a20 2020  ts.index)],..   
+00013200: 2020 2070 6173 745f 696d 7061 6374 732c     past_impacts,
+00013210: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013220: 2020 2020 2020 2020 2020 2020 2020 6675                fu
+00013230: 7475 7265 5f69 6d70 7473 5b7e 6675 7475  ture_impts[~futu
+00013240: 7265 5f69 6d70 7473 2e69 6e64 6578 2e69  re_impts.index.i
+00013250: 7369 6e28 7061 7374 5f69 6d70 6163 7473  sin(past_impacts
+00013260: 2e69 6e64 6578 295d 2c0d 0a20 2020 2020  .index)],..     
 00013270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013280: 2020 2020 205d 2c0d 0a20 2020 2020 2020       ],..       
-00013290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000132a0: 2061 7869 733d 302c 0d0a 2020 2020 2020   axis=0,..      
-000132b0: 2020 2020 2020 2020 2020 2020 2020 292e                ).
-000132c0: 7265 696e 6465 7828 0d0a 2020 2020 2020  reindex(..      
+00013280: 2020 205d 2c0d 0a20 2020 2020 2020 2020     ],..         
+00013290: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000132a0: 7869 733d 302c 0d0a 2020 2020 2020 2020  xis=0,..        
+000132b0: 2020 2020 2020 2020 2020 2020 292e 7265              ).re
+000132c0: 696e 6465 7828 0d0a 2020 2020 2020 2020  index(..        
 000132d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000132e0: 2020 696e 6465 783d 6466 5f66 6f72 6563    index=df_forec
-000132f0: 6173 742e 666f 7265 6361 7374 2e69 6e64  ast.forecast.ind
-00013300: 6578 2c0d 0a20 2020 2020 2020 2020 2020  ex,..           
-00013310: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00013320: 756d 6e73 3d64 665f 666f 7265 6361 7374  umns=df_forecast
-00013330: 2e66 6f72 6563 6173 742e 636f 6c75 6d6e  .forecast.column
-00013340: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00013350: 2020 2020 2020 2020 2020 2020 6669 6c6c              fill
-00013360: 5f76 616c 7565 3d30 2c0d 0a20 2020 2020  _value=0,..     
-00013370: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00013380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013390: 2020 2920 2023 206d 696e 7573 206f 7220    )  # minus or 
-000133a0: 706c 7573 0d0a 2020 2020 2020 2020 2020  plus..          
-000133b0: 2020 2020 2020 7365 6c66 2e69 6d70 6163        self.impac
-000133c0: 7473 203d 2069 6d70 7473 0d0a 2020 2020  ts = impts..    
-000133d0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000133e0: 6e63 6c75 6465 5f6f 7267 616e 6963 3a0d  nclude_organic:.
-000133f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013400: 2020 2020 2064 665f 666f 7265 6361 7374       df_forecast
-00013410: 2e6f 7267 616e 6963 5f66 6f72 6563 6173  .organic_forecas
-00013420: 7420 3d20 6466 5f66 6f72 6563 6173 742e  t = df_forecast.
-00013430: 666f 7265 6361 7374 2e63 6f70 7928 290d  forecast.copy().
-00013440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013450: 2064 665f 666f 7265 6361 7374 2e66 6f72   df_forecast.for
-00013460: 6563 6173 7420 3d20 6466 5f66 6f72 6563  ecast = df_forec
-00013470: 6173 742e 666f 7265 6361 7374 202a 2069  ast.forecast * i
-00013480: 6d70 7473 0d0a 2020 2020 2020 2020 2020  mpts..          
-00013490: 2020 2020 2020 6466 5f66 6f72 6563 6173        df_forecas
-000134a0: 742e 6c6f 7765 725f 666f 7265 6361 7374  t.lower_forecast
-000134b0: 203d 2064 665f 666f 7265 6361 7374 2e6c   = df_forecast.l
-000134c0: 6f77 6572 5f66 6f72 6563 6173 7420 2a20  ower_forecast * 
-000134d0: 696d 7074 730d 0a20 2020 2020 2020 2020  impts..         
-000134e0: 2020 2020 2020 2064 665f 666f 7265 6361         df_foreca
-000134f0: 7374 2e75 7070 6572 5f66 6f72 6563 6173  st.upper_forecas
-00013500: 7420 3d20 6466 5f66 6f72 6563 6173 742e  t = df_forecast.
-00013510: 7570 7065 725f 666f 7265 6361 7374 202a  upper_forecast *
-00013520: 2069 6d70 7473 0d0a 0d0a 2020 2020 2020   impts....      
-00013530: 2020 6966 2073 656c 662e 636f 6e73 7472    if self.constr
-00013540: 6169 6e74 2069 7320 6e6f 7420 4e6f 6e65  aint is not None
-00013550: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-00013560: 6620 6973 696e 7374 616e 6365 2873 656c  f isinstance(sel
-00013570: 662e 636f 6e73 7472 6169 6e74 2c20 6469  f.constraint, di
-00013580: 6374 293a 0d0a 2020 2020 2020 2020 2020  ct):..          
-00013590: 2020 2020 2020 636f 6e73 7472 6169 6e74        constraint
-000135a0: 5f6d 6574 686f 6420 3d20 7365 6c66 2e63  _method = self.c
-000135b0: 6f6e 7374 7261 696e 742e 6765 7428 2263  onstraint.get("c
-000135c0: 6f6e 7374 7261 696e 745f 6d65 7468 6f64  onstraint_method
-000135d0: 222c 2022 7175 616e 7469 6c65 2229 0d0a  ", "quantile")..
-000135e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000135f0: 636f 6e73 7472 6169 6e74 5f72 6567 756c  constraint_regul
-00013600: 6172 697a 6174 696f 6e20 3d20 7365 6c66  arization = self
-00013610: 2e63 6f6e 7374 7261 696e 742e 6765 7428  .constraint.get(
-00013620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013630: 2020 2020 2020 2263 6f6e 7374 7261 696e        "constrain
-00013640: 745f 7265 6775 6c61 7269 7a61 7469 6f6e  t_regularization
-00013650: 222c 2031 0d0a 2020 2020 2020 2020 2020  ", 1..          
-00013660: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00013670: 2020 2020 2020 2020 206c 6f77 6572 5f63           lower_c
-00013680: 6f6e 7374 7261 696e 7420 3d20 7365 6c66  onstraint = self
-00013690: 2e63 6f6e 7374 7261 696e 742e 6765 7428  .constraint.get(
-000136a0: 226c 6f77 6572 5f63 6f6e 7374 7261 696e  "lower_constrain
-000136b0: 7422 2c20 3029 0d0a 2020 2020 2020 2020  t", 0)..        
-000136c0: 2020 2020 2020 2020 7570 7065 725f 636f          upper_co
-000136d0: 6e73 7472 6169 6e74 203d 2073 656c 662e  nstraint = self.
-000136e0: 636f 6e73 7472 6169 6e74 2e67 6574 2822  constraint.get("
-000136f0: 7570 7065 725f 636f 6e73 7472 6169 6e74  upper_constraint
-00013700: 222c 2031 290d 0a20 2020 2020 2020 2020  ", 1)..         
-00013710: 2020 2020 2020 2062 6f75 6e64 7320 3d20         bounds = 
-00013720: 7365 6c66 2e63 6f6e 7374 7261 696e 742e  self.constraint.
-00013730: 6765 7428 2262 6f75 6e64 7322 2c20 4661  get("bounds", Fa
-00013740: 6c73 6529 0d0a 2020 2020 2020 2020 2020  lse)..          
-00013750: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00013760: 2020 2020 2020 2020 2063 6f6e 7374 7261           constra
-00013770: 696e 745f 6d65 7468 6f64 203d 2022 7374  int_method = "st
-00013780: 6465 765f 6d69 6e22 0d0a 2020 2020 2020  dev_min"..      
-00013790: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
-000137a0: 636f 6e73 7472 6169 6e74 203d 2066 6c6f  constraint = flo
-000137b0: 6174 2873 656c 662e 636f 6e73 7472 6169  at(self.constrai
-000137c0: 6e74 290d 0a20 2020 2020 2020 2020 2020  nt)..           
-000137d0: 2020 2020 2075 7070 6572 5f63 6f6e 7374       upper_const
-000137e0: 7261 696e 7420 3d20 666c 6f61 7428 7365  raint = float(se
-000137f0: 6c66 2e63 6f6e 7374 7261 696e 7429 0d0a  lf.constraint)..
-00013800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013810: 636f 6e73 7472 6169 6e74 5f72 6567 756c  constraint_regul
-00013820: 6172 697a 6174 696f 6e20 3d20 310d 0a20  arization = 1.. 
-00013830: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00013840: 6f75 6e64 7320 3d20 4661 6c73 650d 0a20  ounds = False.. 
-00013850: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00013860: 6c66 2e76 6572 626f 7365 203e 3d20 333a  lf.verbose >= 3:
-00013870: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013880: 2020 7072 696e 7428 0d0a 2020 2020 2020    print(..      
-00013890: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-000138a0: 5573 696e 6720 636f 6e73 7472 6169 6e74  Using constraint
-000138b0: 2077 6974 6820 6d65 7468 6f64 3a20 7b63   with method: {c
-000138c0: 6f6e 7374 7261 696e 745f 6d65 7468 6f64  onstraint_method
-000138d0: 7d2c 207b 636f 6e73 7472 6169 6e74 5f72  }, {constraint_r
-000138e0: 6567 756c 6172 697a 6174 696f 6e7d 2c20  egularization}, 
-000138f0: 7b6c 6f77 6572 5f63 6f6e 7374 7261 696e  {lower_constrain
-00013900: 747d 2c20 7b75 7070 6572 5f63 6f6e 7374  t}, {upper_const
-00013910: 7261 696e 747d 2c20 7b62 6f75 6e64 737d  raint}, {bounds}
-00013920: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-00013930: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
-00013940: 2020 2020 6466 5f66 6f72 6563 6173 7420      df_forecast 
-00013950: 3d20 6466 5f66 6f72 6563 6173 742e 6170  = df_forecast.ap
-00013960: 706c 795f 636f 6e73 7472 6169 6e74 7328  ply_constraints(
-00013970: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013980: 2020 636f 6e73 7472 6169 6e74 5f6d 6574    constraint_met
-00013990: 686f 642c 0d0a 2020 2020 2020 2020 2020  hod,..          
-000139a0: 2020 2020 2020 636f 6e73 7472 6169 6e74        constraint
-000139b0: 5f72 6567 756c 6172 697a 6174 696f 6e2c  _regularization,
-000139c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000139d0: 2020 7570 7065 725f 636f 6e73 7472 6169    upper_constrai
-000139e0: 6e74 2c0d 0a20 2020 2020 2020 2020 2020  nt,..           
-000139f0: 2020 2020 206c 6f77 6572 5f63 6f6e 7374       lower_const
-00013a00: 7261 696e 742c 0d0a 2020 2020 2020 2020  raint,..        
-00013a10: 2020 2020 2020 2020 626f 756e 6473 2c0d          bounds,.
-00013a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013a30: 2073 656c 662e 6466 5f6f 7269 6769 6e61   self.df_origina
-00013a40: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-00013a50: 290d 0a20 2020 2020 2020 2023 2052 4554  )..        # RET
-00013a60: 5552 4e20 434f 4d50 4f4e 454e 5453 2028  URN COMPONENTS (
-00013a70: 6c6f 6e67 2073 7479 6c65 2920 6f70 7469  long style) opti
-00013a80: 6f6e 0d0a 2020 2020 2020 2020 6466 5f66  on..        df_f
-00013a90: 6f72 6563 6173 742e 7072 6564 6963 745f  orecast.predict_
-00013aa0: 7275 6e74 696d 6520 3d20 7365 6c66 2e74  runtime = self.t
-00013ab0: 696d 6528 2920 2d20 7072 6564 6963 7453  ime() - predictS
-00013ac0: 7461 7274 5469 6d65 0d0a 2020 2020 2020  tartTime..      
-00013ad0: 2020 7265 7475 726e 2064 665f 666f 7265    return df_fore
-00013ae0: 6361 7374 0d0a 0d0a 2020 2020 6465 6620  cast....    def 
-00013af0: 6175 746f 5f66 6974 2873 656c 662c 2064  auto_fit(self, d
-00013b00: 662c 2076 616c 6964 6174 696f 6e5f 6d65  f, validation_me
-00013b10: 7468 6f64 293a 2020 2320 616c 736f 2061  thod):  # also a
-00013b20: 6464 2072 6567 7265 7373 6f72 2069 6e70  dd regressor inp
-00013b30: 7574 0d0a 2020 2020 2020 2020 2320 6f70  ut..        # op
-00013b40: 7469 6f6e 2074 6f20 636f 6d70 6c65 7465  tion to complete
-00013b50: 6c79 2073 6b69 7020 736f 6d65 2074 6869  ly skip some thi
-00013b60: 6e67 7320 2861 6e6f 6d61 6c69 6573 2c20  ngs (anomalies, 
-00013b70: 686f 6c69 6461 7920 6465 7465 6374 6f72  holiday detector
-00013b80: 2c20 6172 206c 6167 7329 0d0a 2020 2020  , ar lags)..    
-00013b90: 2020 2020 2320 7275 6e20 6372 6f73 7320      # run cross 
-00013ba0: 7661 6c69 6461 7469 6f6e 2074 6f20 6368  validation to ch
-00013bb0: 6f6f 7365 0d0a 2020 2020 2020 2020 2320  oose..        # 
-00013bc0: 7265 7475 726e 206d 6574 7269 6373 206f  return metrics o
-00013bd0: 6620 6265 7374 206d 6f64 656c 2c20 7365  f best model, se
-00013be0: 7420 6261 7365 2070 6172 616d 730d 0a20  t base params.. 
-00013bf0: 2020 2020 2020 2073 656c 662e 7374 6172         self.star
-00013c00: 7469 6e67 5f70 6172 616d 7320 3d20 7365  ting_params = se
-00013c10: 6c66 2e67 6574 5f70 6172 616d 7328 290d  lf.get_params().
-00013c20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013c30: 4e6f 7449 6d70 6c65 6d65 6e74 6564 0d0a  NotImplemented..
-00013c40: 0d0a 2020 2020 6465 6620 6e65 7874 5f66  ..    def next_f
-00013c50: 6974 2873 656c 6629 3a0d 0a20 2020 2020  it(self):..     
-00013c60: 2020 2023 206f 7074 696f 6e20 746f 2070     # option to p
-00013c70: 7269 6e74 2061 2067 7261 7068 206f 6620  rint a graph of 
-00013c80: 6561 6368 2077 6869 6c65 2067 6f69 6e67  each while going
-00013c90: 2028 7275 6e20 6167 6169 6e20 756e 7469   (run again unti
-00013ca0: 6c20 796f 7520 7365 6520 6f6e 6520 796f  l you see one yo
-00013cb0: 7520 6c69 6b65 290d 0a20 2020 2020 2020  u like)..       
-00013cc0: 2023 2061 7070 656e 6420 746f 2061 6e20   # append to an 
-00013cd0: 696e 7465 726e 616c 2072 6563 6f72 642c  internal record,
-00013ce0: 2070 7269 6e74 206e 6577 2070 6172 616d   print new param
-00013cf0: 730d 0a20 2020 2020 2020 2023 2070 6c6f  s..        # plo
-00013d00: 743a 2033 2073 7461 636b 6564 2c20 696e  t: 3 stacked, in
-00013d10: 2073 616d 706c 652c 2074 6865 6e20 6561   sample, then ea
-00013d20: 6368 2076 616c 6964 6174 696f 6e0d 0a20  ch validation.. 
-00013d30: 2020 2020 2020 2023 206d 6179 6265 2075         # maybe u
-00013d40: 7365 2067 656e 6574 6963 206f 7074 696d  se genetic optim
-00013d50: 697a 6174 696f 6e20 6966 2074 6869 7320  ization if this 
-00013d60: 7573 6564 2061 6674 6572 2061 7574 6f5f  used after auto_
-00013d70: 6669 740d 0a20 2020 2020 2020 2072 6574  fit..        ret
-00013d80: 7572 6e20 4e6f 7449 6d70 6c65 6d65 6e74  urn NotImplement
-00013d90: 6564 0d0a 0d0a 2020 2020 6465 6620 6372  ed....    def cr
-00013da0: 6f73 735f 7661 6c69 6461 7465 2873 656c  oss_validate(sel
-00013db0: 662c 2064 662c 2076 616c 6964 6174 696f  f, df, validatio
-00013dc0: 6e5f 6d65 7468 6f64 293a 0d0a 2020 2020  n_method):..    
-00013dd0: 2020 2020 2320 7275 6e20 6f6e 6520 6d6f      # run one mo
-00013de0: 6465 6c20 616e 6420 7265 7475 726e 2073  del and return s
-00013df0: 636f 7265 730d 0a20 2020 2020 2020 2072  cores..        r
-00013e00: 6574 7572 6e20 4e6f 7449 6d70 6c65 6d65  eturn NotImpleme
-00013e10: 6e74 6564 0d0a 0d0a 2020 2020 6465 6620  nted....    def 
-00013e20: 7472 6561 746d 656e 745f 6361 7573 616c  treatment_causal
-00013e30: 5f69 6d70 6163 7428 0d0a 2020 2020 2020  _impact(..      
-00013e40: 2020 7365 6c66 2c20 6466 2c20 696e 7465    self, df, inte
-00013e50: 7276 656e 7469 6f6e 5f64 6174 6573 0d0a  rvention_dates..
-00013e60: 2020 2020 293a 2020 2320 616c 736f 2061      ):  # also a
-00013e70: 6464 2072 6567 7265 7373 6f72 2069 6e70  dd regressor inp
-00013e80: 7574 0d0a 2020 2020 2020 2020 2320 7265  ut..        # re
-00013e90: 6772 6573 736f 7273 2069 6d70 6f72 7461  gressors importa
-00013ea0: 6e74 2c20 6573 7469 6d61 7469 6f6e 2062  nt, estimation b
-00013eb0: 7920 6c69 6e65 6172 2066 6c61 6720 2872  y linear flag (r
-00013ec0: 6574 7572 6e20 7374 6174 7329 206f 7220  eturn stats) or 
-00013ed0: 6279 2025 2076 7320 666f 7265 6361 7374  by % vs forecast
-00013ee0: 2066 726f 6d20 6375 746f 6666 0d0a 2020   from cutoff..  
-00013ef0: 2020 2020 2020 2320 7374 6172 7420 616e        # start an
-00013f00: 6420 656e 6420 6461 7465 732c 206d 756c  d end dates, mul
-00013f10: 7469 706c 6520 7472 6561 746d 656e 7473  tiple treatments
-00013f20: 2c20 7661 7279 2062 7920 7365 7269 6573  , vary by series
-00013f30: 0d0a 2020 2020 2020 2020 2320 6f72 206d  ..        # or m
-00013f40: 6179 6265 2069 6e73 7465 6164 2c20 6a75  aybe instead, ju
-00013f50: 7374 2072 6574 7572 6e20 7468 6520 7374  st return the st
-00013f60: 6174 7320 666f 7220 616c 6c20 696e 7075  ats for all inpu
-00013f70: 7420 7265 6772 6573 736f 7273 0d0a 2020  t regressors..  
-00013f80: 2020 2020 2020 2320 7374 696c 6c20 776f        # still wo
-00013f90: 726b 696e 6720 6f6e 2074 6869 732c 2070  rking on this, p
-00013fa0: 6f73 7369 626c 7920 6a75 7374 2068 7474  ossibly just htt
-00013fb0: 7073 3a2f 2f6d 6174 682e 7374 6163 6b65  ps://math.stacke
-00013fc0: 7863 6861 6e67 652e 636f 6d2f 7175 6573  xchange.com/ques
-00013fd0: 7469 6f6e 732f 3231 3132 3535 332f 7374  tions/2112553/st
-00013fe0: 6174 6973 7469 6361 6c2d 7369 676e 6966  atistical-signif
-00013ff0: 6963 616e 6365 2d6f 662d 6c69 6e65 6172  icance-of-linear
-00014000: 2d6c 6561 7374 2d73 7175 6172 6573 0d0a  -least-squares..
-00014010: 2020 2020 2020 2020 2320 616e 6420 6f74          # and ot
-00014020: 6865 7220 6665 6174 7572 6573 2061 6c61  her features ala
-00014030: 2053 7461 7473 6d6f 6465 6c73 204f 4c53   Statsmodels OLS
-00014040: 2c20 5661 7228 ceb2 5e29 3dcf 8332 2858  , Var(..^)=..2(X
-00014050: e280 b258 29e2 8892 3120 7768 6572 6520  ...X)...1 where 
-00014060: cf83 323e 3020 6973 2074 6865 2063 6f6d  ..2>0 is the com
-00014070: 6d6f 6e20 7661 7269 616e 6365 206f 6620  mon variance of 
-00014080: 6561 6368 2065 6c65 6d65 6e74 206f 6620  each element of 
-00014090: 7468 6520 6572 726f 7220 7665 6374 6f72  the error vector
-000140a0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000140b0: 204e 6f74 496d 706c 656d 656e 7465 640d   NotImplemented.
-000140c0: 0a0d 0a20 2020 2064 6566 2070 7265 6469  ...    def predi
-000140d0: 6374 5f6e 6577 5f70 726f 6475 6374 2873  ct_new_product(s
-000140e0: 656c 6629 3a0d 0a20 2020 2020 2020 2023  elf):..        #
-000140f0: 2062 6f72 726f 7720 7468 6520 6c69 6e65   borrow the line
-00014100: 6172 2063 6f6d 706f 6e65 6e74 7320 6672  ar components fr
-00014110: 6f6d 2061 2072 656c 6174 6564 2070 726f  om a related pro
-00014120: 6475 6374 2028 6f72 2061 7667 2f6d 6f64  duct (or avg/mod
-00014130: 6520 6966 206e 6f74 2067 6976 656e 290d  e if not given).
-00014140: 0a20 2020 2020 2020 2023 2068 6176 6520  .        # have 
-00014150: 7468 6520 7472 656e 6420 7374 6172 7420  the trend start 
-00014160: 6174 207a 6572 6f20 7468 656e 2075 702c  at zero then up,
-00014170: 206c 696b 6520 7265 7665 7273 6520 7068   like reverse ph
-00014180: 690d 0a20 2020 2020 2020 2023 2070 6f73  i..        # pos
-00014190: 7369 626c 7920 626f 7272 6f77 2077 6172  sibly borrow war
-000141a0: 6d75 7020 6672 6f6d 2061 6e79 2073 6572  mup from any ser
-000141b0: 6965 7320 7468 6174 2068 6176 6520 6120  ies that have a 
-000141c0: 6c6f 6769 7374 6963 2d6c 696b 6520 7472  logistic-like tr
-000141d0: 656e 640d 0a20 2020 2020 2020 2023 2063  end..        # c
-000141e0: 6c75 7374 6572 2061 6e64 2063 686f 6f73  luster and choos
-000141f0: 6520 7468 6520 6269 6767 6573 7420 636c  e the biggest cl
-00014200: 7573 7465 7220 2861 7320 6176 6720 7661  uster (as avg va
-00014210: 6c75 6520 6e61 6976 6520 6d65 7468 6f64  lue naive method
-00014220: 2c20 6d61 7962 6520 726f 756e 6420 6f72  , maybe round or
-00014230: 2066 696c 7465 7220 6669 7273 7429 0d0a   filter first)..
-00014240: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00014250: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
-00014260: 0a20 2020 2064 6566 2066 6561 7475 7265  .    def feature
-00014270: 5f69 6d70 6f72 7461 6e63 6528 7365 6c66  _importance(self
-00014280: 293a 0d0a 2020 2020 2020 2020 2320 7261  ):..        # ra
-00014290: 6e6b 2063 6f65 6666 6963 6965 6e74 7320  nk coefficients 
-000142a0: 6279 2069 6d70 6f72 7461 6e63 650d 0a20  by importance.. 
-000142b0: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-000142c0: 7449 6d70 6c65 6d65 6e74 6564 0d0a 0d0a  tImplemented....
-000142d0: 2020 2020 6465 6620 636f 6d70 6172 655f      def compare_
-000142e0: 6163 7475 616c 5f63 6f6d 706f 6e65 6e74  actual_component
-000142f0: 7328 7365 6c66 293a 0d0a 2020 2020 2020  s(self):..      
-00014300: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
-00014310: 656d 656e 7465 640d 0a0d 0a20 2020 2064  emented....    d
-00014320: 6566 2067 6574 5f6e 6577 5f70 6172 616d  ef get_new_param
-00014330: 7328 7365 6c66 2c20 6d65 7468 6f64 3d27  s(self, method='
-00014340: 6661 7374 2729 3a0d 0a20 2020 2020 2020  fast'):..       
-00014350: 2023 2068 6176 6520 6661 7374 206f 7074   # have fast opt
-00014360: 696f 6e20 7468 6174 2061 766f 6964 7320  ion that avoids 
-00014370: 616e 7920 6f66 2074 6865 206c 6f6f 7020  any of the loop 
-00014380: 6170 7072 6f61 6368 6573 0d0a 2020 2020  approaches..    
-00014390: 2020 2020 7363 616c 696e 6720 3d20 7261      scaling = ra
-000143a0: 6e64 6f6d 2e63 686f 6963 6573 285b 2742  ndom.choices(['B
-000143b0: 6173 6553 6361 6c65 7227 2c20 276f 7468  aseScaler', 'oth
-000143c0: 6572 275d 2c20 5b30 2e38 2c20 302e 325d  er'], [0.8, 0.2]
-000143d0: 295b 305d 0d0a 2020 2020 2020 2020 6966  )[0]..        if
-000143e0: 2073 6361 6c69 6e67 203d 3d20 226f 7468   scaling == "oth
-000143f0: 6572 223a 0d0a 2020 2020 2020 2020 2020  er":..          
-00014400: 2020 7363 616c 696e 6720 3d20 5261 6e64    scaling = Rand
-00014410: 6f6d 5472 616e 7366 6f72 6d28 0d0a 2020  omTransform(..  
-00014420: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00014430: 616e 7366 6f72 6d65 725f 6c69 7374 3d73  ansformer_list=s
-00014440: 6361 6c65 7273 2c0d 0a20 2020 2020 2020  calers,..       
-00014450: 2020 2020 2020 2020 2074 7261 6e73 666f           transfo
-00014460: 726d 6572 5f6d 6178 5f64 6570 7468 3d31  rmer_max_depth=1
-00014470: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00014480: 2020 2061 6c6c 6f77 5f6e 6f6e 653d 4661     allow_none=Fa
-00014490: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
-000144a0: 2020 2020 2020 6e6f 5f6e 616e 5f66 696c        no_nan_fil
-000144b0: 6c3d 5472 7565 2c0d 0a20 2020 2020 2020  l=True,..       
-000144c0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-000144d0: 686f 6c69 6461 795f 7061 7261 6d73 203d  holiday_params =
-000144e0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-000144f0: 5b4e 6f6e 652c 2027 616e 7927 5d2c 205b  [None, 'any'], [
-00014500: 302e 352c 2030 2e35 5d29 5b30 5d0d 0a20  0.5, 0.5])[0].. 
-00014510: 2020 2020 2020 2023 2068 6f6c 6964 6179         # holiday
-00014520: 5f69 6e74 6572 7665 6e74 696f 6e20 3d20  _intervention = 
-00014530: 4e6f 6e65 0d0a 2020 2020 2020 2020 6966  None..        if
-00014540: 2068 6f6c 6964 6179 5f70 6172 616d 7320   holiday_params 
-00014550: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00014560: 2020 2020 2020 2020 2020 2320 686f 6c69            # holi
-00014570: 6461 795f 696e 7465 7276 656e 7469 6f6e  day_intervention
-00014580: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
-00014590: 285b 2763 7265 6174 655f 6665 6174 7572  (['create_featur
-000145a0: 6527 2c20 2775 7365 5f69 6d70 6163 7427  e', 'use_impact'
-000145b0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-000145c0: 686f 6c69 6461 795f 7061 7261 6d73 203d  holiday_params =
-000145d0: 2048 6f6c 6964 6179 5472 616e 7366 6f72   HolidayTransfor
-000145e0: 6d65 722e 6765 745f 6e65 775f 7061 7261  mer.get_new_para
-000145f0: 6d73 286d 6574 686f 643d 6d65 7468 6f64  ms(method=method
-00014600: 290d 0a20 2020 2020 2020 2020 2020 2068  )..            h
-00014610: 6f6c 6964 6179 5f70 6172 616d 735b 2769  oliday_params['i
-00014620: 6d70 6163 7427 5d20 3d20 4e6f 6e65 0d0a  mpact'] = None..
-00014630: 2020 2020 2020 2020 2020 2020 686f 6c69              holi
-00014640: 6461 795f 7061 7261 6d73 5b27 7265 6772  day_params['regr
-00014650: 6573 7369 6f6e 5f70 6172 616d 7327 5d20  ession_params'] 
-00014660: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00014670: 2020 2020 686f 6c69 6461 795f 7061 7261      holiday_para
-00014680: 6d73 5b27 7265 6d6f 7665 5f65 7863 6573  ms['remove_exces
-00014690: 735f 616e 6f6d 616c 6965 7327 5d20 3d20  s_anomalies'] = 
-000146a0: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-000146b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000146c0: 205b 5472 7565 2c20 4661 6c73 655d 2c20   [True, False], 
-000146d0: 5b30 2e30 352c 2030 2e39 355d 0d0a 2020  [0.05, 0.95]..  
-000146e0: 2020 2020 2020 2020 2020 295b 305d 0d0a            )[0]..
-000146f0: 2020 2020 2020 2020 2020 2020 686f 6c69              holi
-00014700: 6461 795f 7061 7261 6d73 5b27 6f75 7470  day_params['outp
-00014710: 7574 275d 203d 2072 616e 646f 6d2e 6368  ut'] = random.ch
-00014720: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-00014730: 2020 2020 2020 2020 5b27 6d75 6c74 6976          ['multiv
-00014740: 6172 6961 7465 272c 2027 756e 6976 6172  ariate', 'univar
-00014750: 6961 7465 275d 2c20 5b30 2e39 2c20 302e  iate'], [0.9, 0.
-00014760: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
-00014770: 295b 305d 0d0a 2020 2020 2020 2020 616e  )[0]..        an
-00014780: 6f6d 616c 795f 696e 7465 7276 656e 7469  omaly_interventi
-00014790: 6f6e 203d 2072 616e 646f 6d2e 6368 6f69  on = random.choi
-000147a0: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-000147b0: 2020 5b4e 6f6e 652c 2027 7265 6d6f 7665    [None, 'remove
-000147c0: 272c 2027 6465 7465 6374 5f6f 6e6c 7927  ', 'detect_only'
-000147d0: 2c20 276d 6f64 656c 275d 2c20 5b30 2e39  , 'model'], [0.9
-000147e0: 2c20 302e 332c 2030 2e30 322c 2030 2e30  , 0.3, 0.02, 0.0
-000147f0: 355d 0d0a 2020 2020 2020 2020 295b 305d  5]..        )[0]
-00014800: 0d0a 2020 2020 2020 2020 6966 2061 6e6f  ..        if ano
-00014810: 6d61 6c79 5f69 6e74 6572 7665 6e74 696f  maly_interventio
-00014820: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
-00014830: 2020 2020 2020 2020 2020 2020 616e 6f6d              anom
-00014840: 616c 795f 6465 7465 6374 6f72 5f70 6172  aly_detector_par
-00014850: 616d 7320 3d20 416e 6f6d 616c 7952 656d  ams = AnomalyRem
-00014860: 6f76 616c 2e67 6574 5f6e 6577 5f70 6172  oval.get_new_par
-00014870: 616d 7328 6d65 7468 6f64 3d6d 6574 686f  ams(method=metho
-00014880: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
-00014890: 6966 2061 6e6f 6d61 6c79 5f69 6e74 6572  if anomaly_inter
-000148a0: 7665 6e74 696f 6e20 3d3d 2022 6d6f 6465  vention == "mode
-000148b0: 6c22 3a0d 0a20 2020 2020 2020 2020 2020  l":..           
-000148c0: 2020 2020 206d 6f64 656c 5f6c 6973 742c       model_list,
-000148d0: 206d 6f64 656c 5f70 726f 6220 3d20 6d6f   model_prob = mo
-000148e0: 6465 6c5f 6c69 7374 5f74 6f5f 6469 6374  del_list_to_dict
-000148f0: 2822 7363 616c 6162 6c65 2229 0d0a 2020  ("scalable")..  
-00014900: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00014910: 6f6d 616c 795f 696e 7465 7276 656e 7469  omaly_interventi
-00014920: 6f6e 203d 2028 0d0a 2020 2020 2020 2020  on = (..        
-00014930: 2020 2020 2020 2020 2020 2020 6765 6e65              gene
-00014940: 7261 6c5f 7465 6d70 6c61 7465 5b67 656e  ral_template[gen
-00014950: 6572 616c 5f74 656d 706c 6174 655b 274d  eral_template['M
-00014960: 6f64 656c 275d 2e69 7369 6e28 6d6f 6465  odel'].isin(mode
-00014970: 6c5f 6c69 7374 295d 0d0a 2020 2020 2020  l_list)]..      
-00014980: 2020 2020 2020 2020 2020 2020 2020 2e73                .s
-00014990: 616d 706c 6528 3129 0d0a 2020 2020 2020  ample(1)..      
-000149a0: 2020 2020 2020 2020 2020 2020 2020 2e74                .t
-000149b0: 6f5f 6469 6374 2822 7265 636f 7264 7322  o_dict("records"
-000149c0: 295b 305d 0d0a 2020 2020 2020 2020 2020  )[0]..          
-000149d0: 2020 2020 2020 2920 2023 2070 6c61 6365        )  # place
-000149e0: 686f 6c64 6572 2c20 7072 6f62 6162 6c79  holder, probably
-000149f0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00014a00: 0a20 2020 2020 2020 2020 2020 2061 6e6f  .            ano
-00014a10: 6d61 6c79 5f64 6574 6563 746f 725f 7061  maly_detector_pa
-00014a20: 7261 6d73 203d 204e 6f6e 650d 0a0d 0a20  rams = None.... 
-00014a30: 2020 2020 2020 2023 2072 616e 646f 6d20         # random 
-00014a40: 6f72 2070 7265 7465 7374 6564 2064 6566  or pretested def
-00014a50: 6175 6c74 730d 0a20 2020 2020 2020 2069  aults..        i
-00014a60: 6620 6d65 7468 6f64 2069 6e20 5b27 6465  f method in ['de
-00014a70: 6570 272c 2027 616c 6c27 5d3a 0d0a 2020  ep', 'all']:..  
-00014a80: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
-00014a90: 6261 7365 203d 2027 6465 6570 270d 0a20  base = 'deep'.. 
-00014aa0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00014ab0: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
-00014ac0: 6261 7365 203d 2072 616e 646f 6d2e 6368  base = random.ch
-00014ad0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-00014ae0: 2020 2020 2020 2020 5b27 7062 3127 2c20          ['pb1', 
-00014af0: 2770 6232 272c 2027 7062 3327 2c20 2772  'pb2', 'pb3', 'r
-00014b00: 616e 646f 6d27 5d2c 205b 302e 312c 2030  andom'], [0.1, 0
-00014b10: 2e31 2c20 302e 302c 2030 2e38 5d0d 0a20  .1, 0.0, 0.8].. 
-00014b20: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
-00014b30: 0a20 2020 2020 2020 2069 6620 7472 656e  .        if tren
-00014b40: 645f 6261 7365 203d 3d20 2272 616e 646f  d_base == "rando
-00014b50: 6d22 3a0d 0a20 2020 2020 2020 2020 2020  m":..           
-00014b60: 206d 6f64 656c 5f73 7472 203d 2072 616e   model_str = ran
-00014b70: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00014b80: 2020 2020 2020 2020 2020 2020 2020 5b0d                [.
-00014b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014ba0: 2020 2020 2027 4176 6572 6167 6556 616c       'AverageVal
-00014bb0: 7565 4e61 6976 6527 2c0d 0a20 2020 2020  ueNaive',..     
-00014bc0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00014bd0: 4d65 7472 6963 4d6f 7469 6627 2c0d 0a20  MetricMotif',.. 
+000132e0: 696e 6465 783d 6466 5f66 6f72 6563 6173  index=df_forecas
+000132f0: 742e 666f 7265 6361 7374 2e69 6e64 6578  t.forecast.index
+00013300: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00013310: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+00013320: 6e73 3d64 665f 666f 7265 6361 7374 2e66  ns=df_forecast.f
+00013330: 6f72 6563 6173 742e 636f 6c75 6d6e 732c  orecast.columns,
+00013340: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013350: 2020 2020 2020 2020 2020 6669 6c6c 5f76            fill_v
+00013360: 616c 7565 3d30 2c0d 0a20 2020 2020 2020  alue=0,..       
+00013370: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+00013380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013390: 2920 2023 206d 696e 7573 206f 7220 706c  )  # minus or pl
+000133a0: 7573 0d0a 2020 2020 2020 2020 2020 2020  us..            
+000133b0: 2020 2020 7365 6c66 2e69 6d70 6163 7473      self.impacts
+000133c0: 203d 2069 6d70 7473 0d0a 2020 2020 2020   = impts..      
+000133d0: 2020 2020 2020 2020 2020 6966 2069 6e63            if inc
+000133e0: 6c75 6465 5f6f 7267 616e 6963 3a0d 0a20  lude_organic:.. 
+000133f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013400: 2020 2064 665f 666f 7265 6361 7374 2e6f     df_forecast.o
+00013410: 7267 616e 6963 5f66 6f72 6563 6173 7420  rganic_forecast 
+00013420: 3d20 6466 5f66 6f72 6563 6173 742e 666f  = df_forecast.fo
+00013430: 7265 6361 7374 2e63 6f70 7928 290d 0a20  recast.copy().. 
+00013440: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00013450: 665f 666f 7265 6361 7374 2e66 6f72 6563  f_forecast.forec
+00013460: 6173 7420 3d20 6466 5f66 6f72 6563 6173  ast = df_forecas
+00013470: 742e 666f 7265 6361 7374 202a 2069 6d70  t.forecast * imp
+00013480: 7473 0d0a 2020 2020 2020 2020 2020 2020  ts..            
+00013490: 2020 2020 6466 5f66 6f72 6563 6173 742e      df_forecast.
+000134a0: 6c6f 7765 725f 666f 7265 6361 7374 203d  lower_forecast =
+000134b0: 2064 665f 666f 7265 6361 7374 2e6c 6f77   df_forecast.low
+000134c0: 6572 5f66 6f72 6563 6173 7420 2a20 696d  er_forecast * im
+000134d0: 7074 730d 0a20 2020 2020 2020 2020 2020  pts..           
+000134e0: 2020 2020 2064 665f 666f 7265 6361 7374       df_forecast
+000134f0: 2e75 7070 6572 5f66 6f72 6563 6173 7420  .upper_forecast 
+00013500: 3d20 6466 5f66 6f72 6563 6173 742e 7570  = df_forecast.up
+00013510: 7065 725f 666f 7265 6361 7374 202a 2069  per_forecast * i
+00013520: 6d70 7473 0d0a 0d0a 2020 2020 2020 2020  mpts....        
+00013530: 6966 2073 656c 662e 636f 6e73 7472 6169  if self.constrai
+00013540: 6e74 2069 7320 6e6f 7420 4e6f 6e65 3a0d  nt is not None:.
+00013550: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00013560: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
+00013570: 636f 6e73 7472 6169 6e74 2c20 6469 6374  constraint, dict
+00013580: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00013590: 2020 2020 636f 6e73 7472 6169 6e74 5f6d      constraint_m
+000135a0: 6574 686f 6420 3d20 7365 6c66 2e63 6f6e  ethod = self.con
+000135b0: 7374 7261 696e 742e 6765 7428 2263 6f6e  straint.get("con
+000135c0: 7374 7261 696e 745f 6d65 7468 6f64 222c  straint_method",
+000135d0: 2022 7175 616e 7469 6c65 2229 0d0a 2020   "quantile")..  
+000135e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000135f0: 6e73 7472 6169 6e74 5f72 6567 756c 6172  nstraint_regular
+00013600: 697a 6174 696f 6e20 3d20 7365 6c66 2e63  ization = self.c
+00013610: 6f6e 7374 7261 696e 742e 6765 7428 0d0a  onstraint.get(..
+00013620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013630: 2020 2020 2263 6f6e 7374 7261 696e 745f      "constraint_
+00013640: 7265 6775 6c61 7269 7a61 7469 6f6e 222c  regularization",
+00013650: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+00013660: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00013670: 2020 2020 2020 206c 6f77 6572 5f63 6f6e         lower_con
+00013680: 7374 7261 696e 7420 3d20 7365 6c66 2e63  straint = self.c
+00013690: 6f6e 7374 7261 696e 742e 6765 7428 226c  onstraint.get("l
+000136a0: 6f77 6572 5f63 6f6e 7374 7261 696e 7422  ower_constraint"
+000136b0: 2c20 3029 0d0a 2020 2020 2020 2020 2020  , 0)..          
+000136c0: 2020 2020 2020 7570 7065 725f 636f 6e73        upper_cons
+000136d0: 7472 6169 6e74 203d 2073 656c 662e 636f  traint = self.co
+000136e0: 6e73 7472 6169 6e74 2e67 6574 2822 7570  nstraint.get("up
+000136f0: 7065 725f 636f 6e73 7472 6169 6e74 222c  per_constraint",
+00013700: 2031 290d 0a20 2020 2020 2020 2020 2020   1)..           
+00013710: 2020 2020 2062 6f75 6e64 7320 3d20 7365       bounds = se
+00013720: 6c66 2e63 6f6e 7374 7261 696e 742e 6765  lf.constraint.ge
+00013730: 7428 2262 6f75 6e64 7322 2c20 4661 6c73  t("bounds", Fals
+00013740: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00013750: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00013760: 2020 2020 2020 2063 6f6e 7374 7261 696e         constrain
+00013770: 745f 6d65 7468 6f64 203d 2022 7374 6465  t_method = "stde
+00013780: 765f 6d69 6e22 0d0a 2020 2020 2020 2020  v_min"..        
+00013790: 2020 2020 2020 2020 6c6f 7765 725f 636f          lower_co
+000137a0: 6e73 7472 6169 6e74 203d 2066 6c6f 6174  nstraint = float
+000137b0: 2873 656c 662e 636f 6e73 7472 6169 6e74  (self.constraint
+000137c0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000137d0: 2020 2075 7070 6572 5f63 6f6e 7374 7261     upper_constra
+000137e0: 696e 7420 3d20 666c 6f61 7428 7365 6c66  int = float(self
+000137f0: 2e63 6f6e 7374 7261 696e 7429 0d0a 2020  .constraint)..  
+00013800: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00013810: 6e73 7472 6169 6e74 5f72 6567 756c 6172  nstraint_regular
+00013820: 697a 6174 696f 6e20 3d20 310d 0a20 2020  ization = 1..   
+00013830: 2020 2020 2020 2020 2020 2020 2062 6f75               bou
+00013840: 6e64 7320 3d20 4661 6c73 650d 0a20 2020  nds = False..   
+00013850: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00013860: 2e76 6572 626f 7365 203e 3d20 333a 0d0a  .verbose >= 3:..
+00013870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013880: 7072 696e 7428 0d0a 2020 2020 2020 2020  print(..        
+00013890: 2020 2020 2020 2020 2020 2020 6622 5573              f"Us
+000138a0: 696e 6720 636f 6e73 7472 6169 6e74 2077  ing constraint w
+000138b0: 6974 6820 6d65 7468 6f64 3a20 7b63 6f6e  ith method: {con
+000138c0: 7374 7261 696e 745f 6d65 7468 6f64 7d2c  straint_method},
+000138d0: 207b 636f 6e73 7472 6169 6e74 5f72 6567   {constraint_reg
+000138e0: 756c 6172 697a 6174 696f 6e7d 2c20 7b6c  ularization}, {l
+000138f0: 6f77 6572 5f63 6f6e 7374 7261 696e 747d  ower_constraint}
+00013900: 2c20 7b75 7070 6572 5f63 6f6e 7374 7261  , {upper_constra
+00013910: 696e 747d 2c20 7b62 6f75 6e64 737d 220d  int}, {bounds}".
+00013920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013930: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
+00013940: 2020 6466 5f66 6f72 6563 6173 7420 3d20    df_forecast = 
+00013950: 6466 5f66 6f72 6563 6173 742e 6170 706c  df_forecast.appl
+00013960: 795f 636f 6e73 7472 6169 6e74 7328 0d0a  y_constraints(..
+00013970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013980: 636f 6e73 7472 6169 6e74 5f6d 6574 686f  constraint_metho
+00013990: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
+000139a0: 2020 2020 636f 6e73 7472 6169 6e74 5f72      constraint_r
+000139b0: 6567 756c 6172 697a 6174 696f 6e2c 0d0a  egularization,..
+000139c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000139d0: 7570 7065 725f 636f 6e73 7472 6169 6e74  upper_constraint
+000139e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000139f0: 2020 206c 6f77 6572 5f63 6f6e 7374 7261     lower_constra
+00013a00: 696e 742c 0d0a 2020 2020 2020 2020 2020  int,..          
+00013a10: 2020 2020 2020 626f 756e 6473 2c0d 0a20        bounds,.. 
+00013a20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00013a30: 656c 662e 6466 5f6f 7269 6769 6e61 6c2c  elf.df_original,
+00013a40: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00013a50: 0a20 2020 2020 2020 2023 2052 4554 5552  .        # RETUR
+00013a60: 4e20 434f 4d50 4f4e 454e 5453 2028 6c6f  N COMPONENTS (lo
+00013a70: 6e67 2073 7479 6c65 2920 6f70 7469 6f6e  ng style) option
+00013a80: 0d0a 2020 2020 2020 2020 6466 5f66 6f72  ..        df_for
+00013a90: 6563 6173 742e 7072 6564 6963 745f 7275  ecast.predict_ru
+00013aa0: 6e74 696d 6520 3d20 7365 6c66 2e74 696d  ntime = self.tim
+00013ab0: 6528 2920 2d20 7072 6564 6963 7453 7461  e() - predictSta
+00013ac0: 7274 5469 6d65 0d0a 2020 2020 2020 2020  rtTime..        
+00013ad0: 7265 7475 726e 2064 665f 666f 7265 6361  return df_foreca
+00013ae0: 7374 0d0a 0d0a 2020 2020 6465 6620 6175  st....    def au
+00013af0: 746f 5f66 6974 2873 656c 662c 2064 662c  to_fit(self, df,
+00013b00: 2076 616c 6964 6174 696f 6e5f 6d65 7468   validation_meth
+00013b10: 6f64 293a 2020 2320 616c 736f 2061 6464  od):  # also add
+00013b20: 2072 6567 7265 7373 6f72 2069 6e70 7574   regressor input
+00013b30: 0d0a 2020 2020 2020 2020 2320 6f70 7469  ..        # opti
+00013b40: 6f6e 2074 6f20 636f 6d70 6c65 7465 6c79  on to completely
+00013b50: 2073 6b69 7020 736f 6d65 2074 6869 6e67   skip some thing
+00013b60: 7320 2861 6e6f 6d61 6c69 6573 2c20 686f  s (anomalies, ho
+00013b70: 6c69 6461 7920 6465 7465 6374 6f72 2c20  liday detector, 
+00013b80: 6172 206c 6167 7329 0d0a 2020 2020 2020  ar lags)..      
+00013b90: 2020 2320 7275 6e20 6372 6f73 7320 7661    # run cross va
+00013ba0: 6c69 6461 7469 6f6e 2074 6f20 6368 6f6f  lidation to choo
+00013bb0: 7365 0d0a 2020 2020 2020 2020 2320 7265  se..        # re
+00013bc0: 7475 726e 206d 6574 7269 6373 206f 6620  turn metrics of 
+00013bd0: 6265 7374 206d 6f64 656c 2c20 7365 7420  best model, set 
+00013be0: 6261 7365 2070 6172 616d 730d 0a20 2020  base params..   
+00013bf0: 2020 2020 2073 656c 662e 7374 6172 7469       self.starti
+00013c00: 6e67 5f70 6172 616d 7320 3d20 7365 6c66  ng_params = self
+00013c10: 2e67 6574 5f70 6172 616d 7328 290d 0a20  .get_params().. 
+00013c20: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00013c30: 7449 6d70 6c65 6d65 6e74 6564 0d0a 0d0a  tImplemented....
+00013c40: 2020 2020 6465 6620 6e65 7874 5f66 6974      def next_fit
+00013c50: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00013c60: 2023 206f 7074 696f 6e20 746f 2070 7269   # option to pri
+00013c70: 6e74 2061 2067 7261 7068 206f 6620 6561  nt a graph of ea
+00013c80: 6368 2077 6869 6c65 2067 6f69 6e67 2028  ch while going (
+00013c90: 7275 6e20 6167 6169 6e20 756e 7469 6c20  run again until 
+00013ca0: 796f 7520 7365 6520 6f6e 6520 796f 7520  you see one you 
+00013cb0: 6c69 6b65 290d 0a20 2020 2020 2020 2023  like)..        #
+00013cc0: 2061 7070 656e 6420 746f 2061 6e20 696e   append to an in
+00013cd0: 7465 726e 616c 2072 6563 6f72 642c 2070  ternal record, p
+00013ce0: 7269 6e74 206e 6577 2070 6172 616d 730d  rint new params.
+00013cf0: 0a20 2020 2020 2020 2023 2070 6c6f 743a  .        # plot:
+00013d00: 2033 2073 7461 636b 6564 2c20 696e 2073   3 stacked, in s
+00013d10: 616d 706c 652c 2074 6865 6e20 6561 6368  ample, then each
+00013d20: 2076 616c 6964 6174 696f 6e0d 0a20 2020   validation..   
+00013d30: 2020 2020 2023 206d 6179 6265 2075 7365       # maybe use
+00013d40: 2067 656e 6574 6963 206f 7074 696d 697a   genetic optimiz
+00013d50: 6174 696f 6e20 6966 2074 6869 7320 7573  ation if this us
+00013d60: 6564 2061 6674 6572 2061 7574 6f5f 6669  ed after auto_fi
+00013d70: 740d 0a20 2020 2020 2020 2072 6574 7572  t..        retur
+00013d80: 6e20 4e6f 7449 6d70 6c65 6d65 6e74 6564  n NotImplemented
+00013d90: 0d0a 0d0a 2020 2020 6465 6620 6372 6f73  ....    def cros
+00013da0: 735f 7661 6c69 6461 7465 2873 656c 662c  s_validate(self,
+00013db0: 2064 662c 2076 616c 6964 6174 696f 6e5f   df, validation_
+00013dc0: 6d65 7468 6f64 293a 0d0a 2020 2020 2020  method):..      
+00013dd0: 2020 2320 7275 6e20 6f6e 6520 6d6f 6465    # run one mode
+00013de0: 6c20 616e 6420 7265 7475 726e 2073 636f  l and return sco
+00013df0: 7265 730d 0a20 2020 2020 2020 2072 6574  res..        ret
+00013e00: 7572 6e20 4e6f 7449 6d70 6c65 6d65 6e74  urn NotImplement
+00013e10: 6564 0d0a 0d0a 2020 2020 6465 6620 7472  ed....    def tr
+00013e20: 6561 746d 656e 745f 6361 7573 616c 5f69  eatment_causal_i
+00013e30: 6d70 6163 7428 0d0a 2020 2020 2020 2020  mpact(..        
+00013e40: 7365 6c66 2c20 6466 2c20 696e 7465 7276  self, df, interv
+00013e50: 656e 7469 6f6e 5f64 6174 6573 0d0a 2020  ention_dates..  
+00013e60: 2020 293a 2020 2320 616c 736f 2061 6464    ):  # also add
+00013e70: 2072 6567 7265 7373 6f72 2069 6e70 7574   regressor input
+00013e80: 0d0a 2020 2020 2020 2020 2320 7265 6772  ..        # regr
+00013e90: 6573 736f 7273 2069 6d70 6f72 7461 6e74  essors important
+00013ea0: 2c20 6573 7469 6d61 7469 6f6e 2062 7920  , estimation by 
+00013eb0: 6c69 6e65 6172 2066 6c61 6720 2872 6574  linear flag (ret
+00013ec0: 7572 6e20 7374 6174 7329 206f 7220 6279  urn stats) or by
+00013ed0: 2025 2076 7320 666f 7265 6361 7374 2066   % vs forecast f
+00013ee0: 726f 6d20 6375 746f 6666 0d0a 2020 2020  rom cutoff..    
+00013ef0: 2020 2020 2320 7374 6172 7420 616e 6420      # start and 
+00013f00: 656e 6420 6461 7465 732c 206d 756c 7469  end dates, multi
+00013f10: 706c 6520 7472 6561 746d 656e 7473 2c20  ple treatments, 
+00013f20: 7661 7279 2062 7920 7365 7269 6573 0d0a  vary by series..
+00013f30: 2020 2020 2020 2020 2320 6f72 206d 6179          # or may
+00013f40: 6265 2069 6e73 7465 6164 2c20 6a75 7374  be instead, just
+00013f50: 2072 6574 7572 6e20 7468 6520 7374 6174   return the stat
+00013f60: 7320 666f 7220 616c 6c20 696e 7075 7420  s for all input 
+00013f70: 7265 6772 6573 736f 7273 0d0a 2020 2020  regressors..    
+00013f80: 2020 2020 2320 7374 696c 6c20 776f 726b      # still work
+00013f90: 696e 6720 6f6e 2074 6869 732c 2070 6f73  ing on this, pos
+00013fa0: 7369 626c 7920 6a75 7374 2068 7474 7073  sibly just https
+00013fb0: 3a2f 2f6d 6174 682e 7374 6163 6b65 7863  ://math.stackexc
+00013fc0: 6861 6e67 652e 636f 6d2f 7175 6573 7469  hange.com/questi
+00013fd0: 6f6e 732f 3231 3132 3535 332f 7374 6174  ons/2112553/stat
+00013fe0: 6973 7469 6361 6c2d 7369 676e 6966 6963  istical-signific
+00013ff0: 616e 6365 2d6f 662d 6c69 6e65 6172 2d6c  ance-of-linear-l
+00014000: 6561 7374 2d73 7175 6172 6573 0d0a 2020  east-squares..  
+00014010: 2020 2020 2020 2320 616e 6420 6f74 6865        # and othe
+00014020: 7220 6665 6174 7572 6573 2061 6c61 2053  r features ala S
+00014030: 7461 7473 6d6f 6465 6c73 204f 4c53 2c20  tatsmodels OLS, 
+00014040: 5661 7228 ceb2 5e29 3dcf 8332 2858 e280  Var(..^)=..2(X..
+00014050: b258 29e2 8892 3120 7768 6572 6520 cf83  .X)...1 where ..
+00014060: 323e 3020 6973 2074 6865 2063 6f6d 6d6f  2>0 is the commo
+00014070: 6e20 7661 7269 616e 6365 206f 6620 6561  n variance of ea
+00014080: 6368 2065 6c65 6d65 6e74 206f 6620 7468  ch element of th
+00014090: 6520 6572 726f 7220 7665 6374 6f72 0d0a  e error vector..
+000140a0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+000140b0: 6f74 496d 706c 656d 656e 7465 640d 0a0d  otImplemented...
+000140c0: 0a20 2020 2064 6566 2070 7265 6469 6374  .    def predict
+000140d0: 5f6e 6577 5f70 726f 6475 6374 2873 656c  _new_product(sel
+000140e0: 6629 3a0d 0a20 2020 2020 2020 2023 2062  f):..        # b
+000140f0: 6f72 726f 7720 7468 6520 6c69 6e65 6172  orrow the linear
+00014100: 2063 6f6d 706f 6e65 6e74 7320 6672 6f6d   components from
+00014110: 2061 2072 656c 6174 6564 2070 726f 6475   a related produ
+00014120: 6374 2028 6f72 2061 7667 2f6d 6f64 6520  ct (or avg/mode 
+00014130: 6966 206e 6f74 2067 6976 656e 290d 0a20  if not given).. 
+00014140: 2020 2020 2020 2023 2068 6176 6520 7468         # have th
+00014150: 6520 7472 656e 6420 7374 6172 7420 6174  e trend start at
+00014160: 207a 6572 6f20 7468 656e 2075 702c 206c   zero then up, l
+00014170: 696b 6520 7265 7665 7273 6520 7068 690d  ike reverse phi.
+00014180: 0a20 2020 2020 2020 2023 2070 6f73 7369  .        # possi
+00014190: 626c 7920 626f 7272 6f77 2077 6172 6d75  bly borrow warmu
+000141a0: 7020 6672 6f6d 2061 6e79 2073 6572 6965  p from any serie
+000141b0: 7320 7468 6174 2068 6176 6520 6120 6c6f  s that have a lo
+000141c0: 6769 7374 6963 2d6c 696b 6520 7472 656e  gistic-like tren
+000141d0: 640d 0a20 2020 2020 2020 2023 2063 6c75  d..        # clu
+000141e0: 7374 6572 2061 6e64 2063 686f 6f73 6520  ster and choose 
+000141f0: 7468 6520 6269 6767 6573 7420 636c 7573  the biggest clus
+00014200: 7465 7220 2861 7320 6176 6720 7661 6c75  ter (as avg valu
+00014210: 6520 6e61 6976 6520 6d65 7468 6f64 2c20  e naive method, 
+00014220: 6d61 7962 6520 726f 756e 6420 6f72 2066  maybe round or f
+00014230: 696c 7465 7220 6669 7273 7429 0d0a 2020  ilter first)..  
+00014240: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
+00014250: 496d 706c 656d 656e 7465 640d 0a0d 0a20  Implemented.... 
+00014260: 2020 2064 6566 2066 6561 7475 7265 5f69     def feature_i
+00014270: 6d70 6f72 7461 6e63 6528 7365 6c66 293a  mportance(self):
+00014280: 0d0a 2020 2020 2020 2020 2320 7261 6e6b  ..        # rank
+00014290: 2063 6f65 6666 6963 6965 6e74 7320 6279   coefficients by
+000142a0: 2069 6d70 6f72 7461 6e63 650d 0a20 2020   importance..   
+000142b0: 2020 2020 2072 6574 7572 6e20 4e6f 7449       return NotI
+000142c0: 6d70 6c65 6d65 6e74 6564 0d0a 0d0a 2020  mplemented....  
+000142d0: 2020 6465 6620 636f 6d70 6172 655f 6163    def compare_ac
+000142e0: 7475 616c 5f63 6f6d 706f 6e65 6e74 7328  tual_components(
+000142f0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00014300: 7265 7475 726e 204e 6f74 496d 706c 656d  return NotImplem
+00014310: 656e 7465 640d 0a0d 0a20 2020 2064 6566  ented....    def
+00014320: 2067 6574 5f6e 6577 5f70 6172 616d 7328   get_new_params(
+00014330: 7365 6c66 2c20 6d65 7468 6f64 3d27 6661  self, method='fa
+00014340: 7374 2729 3a0d 0a20 2020 2020 2020 2023  st'):..        #
+00014350: 2068 6176 6520 6661 7374 206f 7074 696f   have fast optio
+00014360: 6e20 7468 6174 2061 766f 6964 7320 616e  n that avoids an
+00014370: 7920 6f66 2074 6865 206c 6f6f 7020 6170  y of the loop ap
+00014380: 7072 6f61 6368 6573 0d0a 2020 2020 2020  proaches..      
+00014390: 2020 7363 616c 696e 6720 3d20 7261 6e64    scaling = rand
+000143a0: 6f6d 2e63 686f 6963 6573 285b 2742 6173  om.choices(['Bas
+000143b0: 6553 6361 6c65 7227 2c20 276f 7468 6572  eScaler', 'other
+000143c0: 275d 2c20 5b30 2e38 2c20 302e 325d 295b  '], [0.8, 0.2])[
+000143d0: 305d 0d0a 2020 2020 2020 2020 6966 2073  0]..        if s
+000143e0: 6361 6c69 6e67 203d 3d20 226f 7468 6572  caling == "other
+000143f0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00014400: 7363 616c 696e 6720 3d20 5261 6e64 6f6d  scaling = Random
+00014410: 5472 616e 7366 6f72 6d28 0d0a 2020 2020  Transform(..    
+00014420: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+00014430: 7366 6f72 6d65 725f 6c69 7374 3d73 6361  sformer_list=sca
+00014440: 6c65 7273 2c0d 0a20 2020 2020 2020 2020  lers,..         
+00014450: 2020 2020 2020 2074 7261 6e73 666f 726d         transform
+00014460: 6572 5f6d 6178 5f64 6570 7468 3d31 2c0d  er_max_depth=1,.
+00014470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014480: 2061 6c6c 6f77 5f6e 6f6e 653d 4661 6c73   allow_none=Fals
+00014490: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+000144a0: 2020 2020 6e6f 5f6e 616e 5f66 696c 6c3d      no_nan_fill=
+000144b0: 5472 7565 2c0d 0a20 2020 2020 2020 2020  True,..         
+000144c0: 2020 2029 0d0a 2020 2020 2020 2020 686f     )..        ho
+000144d0: 6c69 6461 795f 7061 7261 6d73 203d 2072  liday_params = r
+000144e0: 616e 646f 6d2e 6368 6f69 6365 7328 5b4e  andom.choices([N
+000144f0: 6f6e 652c 2027 616e 7927 5d2c 205b 302e  one, 'any'], [0.
+00014500: 352c 2030 2e35 5d29 5b30 5d0d 0a20 2020  5, 0.5])[0]..   
+00014510: 2020 2020 2023 2068 6f6c 6964 6179 5f69       # holiday_i
+00014520: 6e74 6572 7665 6e74 696f 6e20 3d20 4e6f  ntervention = No
+00014530: 6e65 0d0a 2020 2020 2020 2020 6966 2068  ne..        if h
+00014540: 6f6c 6964 6179 5f70 6172 616d 7320 6973  oliday_params is
+00014550: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00014560: 2020 2020 2020 2020 2320 686f 6c69 6461          # holida
+00014570: 795f 696e 7465 7276 656e 7469 6f6e 203d  y_intervention =
+00014580: 2072 616e 646f 6d2e 6368 6f69 6365 285b   random.choice([
+00014590: 2763 7265 6174 655f 6665 6174 7572 6527  'create_feature'
+000145a0: 2c20 2775 7365 5f69 6d70 6163 7427 5d29  , 'use_impact'])
+000145b0: 0d0a 2020 2020 2020 2020 2020 2020 686f  ..            ho
+000145c0: 6c69 6461 795f 7061 7261 6d73 203d 2048  liday_params = H
+000145d0: 6f6c 6964 6179 5472 616e 7366 6f72 6d65  olidayTransforme
+000145e0: 722e 6765 745f 6e65 775f 7061 7261 6d73  r.get_new_params
+000145f0: 286d 6574 686f 643d 6d65 7468 6f64 290d  (method=method).
+00014600: 0a20 2020 2020 2020 2020 2020 2068 6f6c  .            hol
+00014610: 6964 6179 5f70 6172 616d 735b 2769 6d70  iday_params['imp
+00014620: 6163 7427 5d20 3d20 4e6f 6e65 0d0a 2020  act'] = None..  
+00014630: 2020 2020 2020 2020 2020 686f 6c69 6461            holida
+00014640: 795f 7061 7261 6d73 5b27 7265 6772 6573  y_params['regres
+00014650: 7369 6f6e 5f70 6172 616d 7327 5d20 3d20  sion_params'] = 
+00014660: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+00014670: 2020 686f 6c69 6461 795f 7061 7261 6d73    holiday_params
+00014680: 5b27 7265 6d6f 7665 5f65 7863 6573 735f  ['remove_excess_
+00014690: 616e 6f6d 616c 6965 7327 5d20 3d20 7261  anomalies'] = ra
+000146a0: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+000146b0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+000146c0: 5472 7565 2c20 4661 6c73 655d 2c20 5b30  True, False], [0
+000146d0: 2e30 352c 2030 2e39 355d 0d0a 2020 2020  .05, 0.95]..    
+000146e0: 2020 2020 2020 2020 295b 305d 0d0a 2020          )[0]..  
+000146f0: 2020 2020 2020 2020 2020 686f 6c69 6461            holida
+00014700: 795f 7061 7261 6d73 5b27 6f75 7470 7574  y_params['output
+00014710: 275d 203d 2072 616e 646f 6d2e 6368 6f69  '] = random.choi
+00014720: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+00014730: 2020 2020 2020 5b27 6d75 6c74 6976 6172        ['multivar
+00014740: 6961 7465 272c 2027 756e 6976 6172 6961  iate', 'univaria
+00014750: 7465 275d 2c20 5b30 2e39 2c20 302e 315d  te'], [0.9, 0.1]
+00014760: 0d0a 2020 2020 2020 2020 2020 2020 295b  ..            )[
+00014770: 305d 0d0a 2020 2020 2020 2020 616e 6f6d  0]..        anom
+00014780: 616c 795f 696e 7465 7276 656e 7469 6f6e  aly_intervention
+00014790: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+000147a0: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+000147b0: 5b4e 6f6e 652c 2027 7265 6d6f 7665 272c  [None, 'remove',
+000147c0: 2027 6465 7465 6374 5f6f 6e6c 7927 2c20   'detect_only', 
+000147d0: 276d 6f64 656c 275d 2c20 5b30 2e39 2c20  'model'], [0.9, 
+000147e0: 302e 332c 2030 2e30 322c 2030 2e30 355d  0.3, 0.02, 0.05]
+000147f0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+00014800: 2020 2020 2020 2020 6966 2061 6e6f 6d61          if anoma
+00014810: 6c79 5f69 6e74 6572 7665 6e74 696f 6e20  ly_intervention 
+00014820: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00014830: 2020 2020 2020 2020 2020 616e 6f6d 616c            anomal
+00014840: 795f 6465 7465 6374 6f72 5f70 6172 616d  y_detector_param
+00014850: 7320 3d20 416e 6f6d 616c 7952 656d 6f76  s = AnomalyRemov
+00014860: 616c 2e67 6574 5f6e 6577 5f70 6172 616d  al.get_new_param
+00014870: 7328 6d65 7468 6f64 3d6d 6574 686f 6429  s(method=method)
+00014880: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00014890: 2061 6e6f 6d61 6c79 5f69 6e74 6572 7665   anomaly_interve
+000148a0: 6e74 696f 6e20 3d3d 2022 6d6f 6465 6c22  ntion == "model"
+000148b0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000148c0: 2020 206d 6f64 656c 5f6c 6973 742c 206d     model_list, m
+000148d0: 6f64 656c 5f70 726f 6220 3d20 6d6f 6465  odel_prob = mode
+000148e0: 6c5f 6c69 7374 5f74 6f5f 6469 6374 2822  l_list_to_dict("
+000148f0: 7363 616c 6162 6c65 2229 0d0a 2020 2020  scalable")..    
+00014900: 2020 2020 2020 2020 2020 2020 616e 6f6d              anom
+00014910: 616c 795f 696e 7465 7276 656e 7469 6f6e  aly_intervention
+00014920: 203d 2028 0d0a 2020 2020 2020 2020 2020   = (..          
+00014930: 2020 2020 2020 2020 2020 6765 6e65 7261            genera
+00014940: 6c5f 7465 6d70 6c61 7465 5b67 656e 6572  l_template[gener
+00014950: 616c 5f74 656d 706c 6174 655b 274d 6f64  al_template['Mod
+00014960: 656c 275d 2e69 7369 6e28 6d6f 6465 6c5f  el'].isin(model_
+00014970: 6c69 7374 295d 0d0a 2020 2020 2020 2020  list)]..        
+00014980: 2020 2020 2020 2020 2020 2020 2e73 616d              .sam
+00014990: 706c 6528 3129 0d0a 2020 2020 2020 2020  ple(1)..        
+000149a0: 2020 2020 2020 2020 2020 2020 2e74 6f5f              .to_
+000149b0: 6469 6374 2822 7265 636f 7264 7322 295b  dict("records")[
+000149c0: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
+000149d0: 2020 2020 2920 2023 2070 6c61 6365 686f      )  # placeho
+000149e0: 6c64 6572 2c20 7072 6f62 6162 6c79 0d0a  lder, probably..
+000149f0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00014a00: 2020 2020 2020 2020 2020 2061 6e6f 6d61             anoma
+00014a10: 6c79 5f64 6574 6563 746f 725f 7061 7261  ly_detector_para
+00014a20: 6d73 203d 204e 6f6e 650d 0a0d 0a20 2020  ms = None....   
+00014a30: 2020 2020 2023 2072 616e 646f 6d20 6f72       # random or
+00014a40: 2070 7265 7465 7374 6564 2064 6566 6175   pretested defau
+00014a50: 6c74 730d 0a20 2020 2020 2020 2069 6620  lts..        if 
+00014a60: 6d65 7468 6f64 2069 6e20 5b27 6465 6570  method in ['deep
+00014a70: 272c 2027 616c 6c27 5d3a 0d0a 2020 2020  ', 'all']:..    
+00014a80: 2020 2020 2020 2020 7472 656e 645f 6261          trend_ba
+00014a90: 7365 203d 2027 6465 6570 270d 0a20 2020  se = 'deep'..   
+00014aa0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00014ab0: 2020 2020 2020 2020 7472 656e 645f 6261          trend_ba
+00014ac0: 7365 203d 2072 616e 646f 6d2e 6368 6f69  se = random.choi
+00014ad0: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+00014ae0: 2020 2020 2020 5b27 7062 3127 2c20 2770        ['pb1', 'p
+00014af0: 6232 272c 2027 7062 3327 2c20 2772 616e  b2', 'pb3', 'ran
+00014b00: 646f 6d27 5d2c 205b 302e 312c 2030 2e31  dom'], [0.1, 0.1
+00014b10: 2c20 302e 302c 2030 2e38 5d0d 0a20 2020  , 0.0, 0.8]..   
+00014b20: 2020 2020 2020 2020 2029 5b30 5d0d 0a20           )[0].. 
+00014b30: 2020 2020 2020 2069 6620 7472 656e 645f         if trend_
+00014b40: 6261 7365 203d 3d20 2272 616e 646f 6d22  base == "random"
+00014b50: 3a0d 0a20 2020 2020 2020 2020 2020 206d  :..            m
+00014b60: 6f64 656c 5f73 7472 203d 2072 616e 646f  odel_str = rando
+00014b70: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00014b80: 2020 2020 2020 2020 2020 2020 5b0d 0a20              [.. 
+00014b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ba0: 2020 2027 4176 6572 6167 6556 616c 7565     'AverageValue
+00014bb0: 4e61 6976 6527 2c0d 0a20 2020 2020 2020  Naive',..       
+00014bc0: 2020 2020 2020 2020 2020 2020 2027 4d65               'Me
+00014bd0: 7472 6963 4d6f 7469 6627 2c0d 0a20 2020  tricMotif',..   
 00014be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014bf0: 2020 2022 4c61 7374 5661 6c75 654e 6169     "LastValueNai
-00014c00: 7665 222c 0d0a 2020 2020 2020 2020 2020  ve",..          
-00014c10: 2020 2020 2020 2020 2020 2753 6561 736f            'Seaso
-00014c20: 6e61 6c69 7479 4d6f 7469 6627 2c0d 0a20  nalityMotif',.. 
+00014bf0: 2022 4c61 7374 5661 6c75 654e 6169 7665   "LastValueNaive
+00014c00: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00014c10: 2020 2020 2020 2020 2753 6561 736f 6e61          'Seasona
+00014c20: 6c69 7479 4d6f 7469 6627 2c0d 0a20 2020  lityMotif',..   
 00014c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c40: 2020 2027 5769 6e64 6f77 5265 6772 6573     'WindowRegres
-00014c50: 7369 6f6e 272c 0d0a 2020 2020 2020 2020  sion',..        
-00014c60: 2020 2020 2020 2020 2020 2020 2753 6563              'Sec
-00014c70: 7469 6f6e 616c 4d6f 7469 6627 2c0d 0a20  tionalMotif',.. 
+00014c40: 2027 5769 6e64 6f77 5265 6772 6573 7369   'WindowRegressi
+00014c50: 6f6e 272c 0d0a 2020 2020 2020 2020 2020  on',..          
+00014c60: 2020 2020 2020 2020 2020 2753 6563 7469            'Secti
+00014c70: 6f6e 616c 4d6f 7469 6627 2c0d 0a20 2020  onalMotif',..   
 00014c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c90: 2020 2027 4152 444c 272c 0d0a 2020 2020     'ARDL',..    
-00014ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014cb0: 2756 4152 272c 0d0a 2020 2020 2020 2020  'VAR',..        
-00014cc0: 2020 2020 2020 2020 2020 2020 2755 6e69              'Uni
-00014cd0: 7661 7269 6174 654d 6f74 6966 272c 0d0a  variateMotif',..
+00014c90: 2027 4152 444c 272c 0d0a 2020 2020 2020   'ARDL',..      
+00014ca0: 2020 2020 2020 2020 2020 2020 2020 2756                'V
+00014cb0: 4152 272c 0d0a 2020 2020 2020 2020 2020  AR',..          
+00014cc0: 2020 2020 2020 2020 2020 2755 6e69 7661            'Univa
+00014cd0: 7269 6174 654d 6f74 6966 272c 0d0a 2020  riateMotif',..  
 00014ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014cf0: 2020 2020 2320 2755 6e6f 6273 6572 7665      # 'Unobserve
-00014d00: 6443 6f6d 706f 6e65 6e74 7327 2c0d 0a20  dComponents',.. 
+00014cf0: 2020 2320 2755 6e6f 6273 6572 7665 6443    # 'UnobservedC
+00014d00: 6f6d 706f 6e65 6e74 7327 2c0d 0a20 2020  omponents',..   
 00014d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d20: 2020 2023 2022 4b61 6c6d 616e 5374 6174     # "KalmanStat
-00014d30: 6553 7061 6365 222c 0d0a 2020 2020 2020  eSpace",..      
-00014d40: 2020 2020 2020 2020 2020 2020 2020 2752                'R
-00014d50: 5256 4152 272c 0d0a 2020 2020 2020 2020  RVAR',..        
-00014d60: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
-00014d70: 2020 2020 2020 2020 2020 2020 5b30 2e30              [0.0
-00014d80: 352c 2030 2e30 352c 2030 2e32 2c20 302e  5, 0.05, 0.2, 0.
-00014d90: 3035 2c20 302e 3035 2c20 302e 3035 2c20  05, 0.05, 0.05, 
-00014da0: 302e 3135 2c20 302e 3035 2c20 302e 3035  0.15, 0.05, 0.05
-00014db0: 2c20 302e 3035 5d2c 0d0a 2020 2020 2020  , 0.05],..      
-00014dc0: 2020 2020 2020 2020 2020 6b3d 312c 0d0a            k=1,..
-00014dd0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
-00014de0: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-00014df0: 656e 645f 6d6f 6465 6c20 3d20 7b27 4d6f  end_model = {'Mo
-00014e00: 6465 6c27 3a20 6d6f 6465 6c5f 7374 727d  del': model_str}
-00014e10: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00014e20: 206d 6f64 656c 5f73 7472 2069 6e20 5b27   model_str in ['
-00014e30: 5769 6e64 6f77 5265 6772 6573 7369 6f6e  WindowRegression
-00014e40: 272c 2027 4d75 6c74 6976 6172 6961 7465  ', 'Multivariate
-00014e50: 5265 6772 6573 7369 6f6e 275d 3a0d 0a20  Regression']:.. 
-00014e60: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00014e70: 6574 686f 6420 3d20 226e 6f5f 6770 7522  ethod = "no_gpu"
-00014e80: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-00014e90: 656e 645f 6d6f 6465 6c5b 274d 6f64 656c  end_model['Model
-00014ea0: 5061 7261 6d65 7465 7273 275d 203d 204d  Parameters'] = M
-00014eb0: 6f64 656c 4d6f 6e73 7465 7228 6d6f 6465  odelMonster(mode
-00014ec0: 6c5f 7374 7229 2e67 6574 5f6e 6577 5f70  l_str).get_new_p
-00014ed0: 6172 616d 7328 0d0a 2020 2020 2020 2020  arams(..        
-00014ee0: 2020 2020 2020 2020 6d65 7468 6f64 3d6d          method=m
-00014ef0: 6574 686f 640d 0a20 2020 2020 2020 2020  ethod..         
-00014f00: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-00014f10: 2020 7472 656e 645f 7472 616e 7366 6f72    trend_transfor
-00014f20: 6d61 7469 6f6e 203d 2052 616e 646f 6d54  mation = RandomT
-00014f30: 7261 6e73 666f 726d 280d 0a20 2020 2020  ransform(..     
-00014f40: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-00014f50: 666f 726d 6572 5f6c 6973 743d 2273 6361  former_list="sca
-00014f60: 6c61 626c 6522 2c0d 0a20 2020 2020 2020  lable",..       
-00014f70: 2020 2020 2020 2020 2074 7261 6e73 666f           transfo
-00014f80: 726d 6572 5f6d 6178 5f64 6570 7468 3d33  rmer_max_depth=3
-00014f90: 2c20 2023 2070 726f 6261 626c 7920 7761  ,  # probably wa
-00014fa0: 6e74 2073 6f6d 6520 6d6f 7265 2075 7361  nt some more usa
-00014fb0: 626c 6520 6465 6661 756c 7473 2066 6972  ble defaults fir
-00014fc0: 7374 2061 7320 6d61 6e79 2072 616e 646f  st as many rando
-00014fd0: 6d20 6172 6520 7365 6e73 656c 6573 730d  m are senseless.
-00014fe0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00014ff0: 2020 2020 2020 2020 656c 6966 2074 7265          elif tre
-00015000: 6e64 5f62 6173 6520 3d3d 2027 7062 3127  nd_base == 'pb1'
-00015010: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
-00015020: 7265 6e64 5f6d 6f64 656c 203d 207b 274d  rend_model = {'M
-00015030: 6f64 656c 273a 2027 4152 444c 277d 0d0a  odel': 'ARDL'}..
-00015040: 2020 2020 2020 2020 2020 2020 7472 656e              tren
-00015050: 645f 6d6f 6465 6c5b 274d 6f64 656c 5061  d_model['ModelPa
-00015060: 7261 6d65 7465 7273 275d 203d 207b 0d0a  rameters'] = {..
-00015070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015080: 226c 6167 7322 3a20 312c 0d0a 2020 2020  "lags": 1,..    
-00015090: 2020 2020 2020 2020 2020 2020 2274 7265              "tre
-000150a0: 6e64 223a 2022 6e22 2c0d 0a20 2020 2020  nd": "n",..     
-000150b0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-000150c0: 7222 3a20 302c 0d0a 2020 2020 2020 2020  r": 0,..        
-000150d0: 2020 2020 2020 2020 2263 6175 7361 6c22          "causal"
-000150e0: 3a20 4661 6c73 652c 0d0a 2020 2020 2020  : False,..      
-000150f0: 2020 2020 2020 2020 2020 2272 6567 7265            "regre
-00015100: 7373 696f 6e5f 7479 7065 223a 2022 7369  ssion_type": "si
-00015110: 6d70 6c65 222c 0d0a 2020 2020 2020 2020  mple",..        
-00015120: 2020 2020 7d0d 0a20 2020 2020 2020 2020      }..         
-00015130: 2020 2074 7265 6e64 5f74 7261 6e73 666f     trend_transfo
-00015140: 726d 6174 696f 6e20 3d20 7b0d 0a20 2020  rmation = {..   
-00015150: 2020 2020 2020 2020 2020 2020 2022 6669               "fi
-00015160: 6c6c 6e61 223a 2022 6e65 6172 6573 7422  llna": "nearest"
-00015170: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00015180: 2020 2022 7472 616e 7366 6f72 6d61 7469     "transformati
-00015190: 6f6e 7322 3a20 7b22 3022 3a20 2253 7461  ons": {"0": "Sta
-000151a0: 6e64 6172 6453 6361 6c65 7222 2c20 2231  ndardScaler", "1
-000151b0: 223a 2022 416e 6f6d 616c 7952 656d 6f76  ": "AnomalyRemov
-000151c0: 616c 227d 2c0d 0a20 2020 2020 2020 2020  al"},..         
-000151d0: 2020 2020 2020 2022 7472 616e 7366 6f72         "transfor
-000151e0: 6d61 7469 6f6e 5f70 6172 616d 7322 3a20  mation_params": 
-000151f0: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
-00015200: 2020 2020 2020 2022 3022 3a20 7b7d 2c0d         "0": {},.
-00015210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015220: 2020 2020 2022 3122 3a20 7b0d 0a20 2020       "1": {..   
+00014d20: 2023 2022 4b61 6c6d 616e 5374 6174 6553   # "KalmanStateS
+00014d30: 7061 6365 222c 0d0a 2020 2020 2020 2020  pace",..        
+00014d40: 2020 2020 2020 2020 2020 2020 2752 5256              'RRV
+00014d50: 4152 272c 0d0a 2020 2020 2020 2020 2020  AR',..          
+00014d60: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
+00014d70: 2020 2020 2020 2020 2020 5b30 2e30 352c            [0.05,
+00014d80: 2030 2e30 352c 2030 2e32 2c20 302e 3035   0.05, 0.2, 0.05
+00014d90: 2c20 302e 3035 2c20 302e 3035 2c20 302e  , 0.05, 0.05, 0.
+00014da0: 3135 2c20 302e 3035 2c20 302e 3035 2c20  15, 0.05, 0.05, 
+00014db0: 302e 3035 5d2c 0d0a 2020 2020 2020 2020  0.05],..        
+00014dc0: 2020 2020 2020 2020 6b3d 312c 0d0a 2020          k=1,..  
+00014dd0: 2020 2020 2020 2020 2020 295b 305d 0d0a            )[0]..
+00014de0: 2020 2020 2020 2020 2020 2020 7472 656e              tren
+00014df0: 645f 6d6f 6465 6c20 3d20 7b27 4d6f 6465  d_model = {'Mode
+00014e00: 6c27 3a20 6d6f 6465 6c5f 7374 727d 0d0a  l': model_str}..
+00014e10: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00014e20: 6f64 656c 5f73 7472 2069 6e20 5b27 5769  odel_str in ['Wi
+00014e30: 6e64 6f77 5265 6772 6573 7369 6f6e 272c  ndowRegression',
+00014e40: 2027 4d75 6c74 6976 6172 6961 7465 5265   'MultivariateRe
+00014e50: 6772 6573 7369 6f6e 275d 3a0d 0a20 2020  gression']:..   
+00014e60: 2020 2020 2020 2020 2020 2020 206d 6574               met
+00014e70: 686f 6420 3d20 226e 6f5f 6770 7522 0d0a  hod = "no_gpu"..
+00014e80: 2020 2020 2020 2020 2020 2020 7472 656e              tren
+00014e90: 645f 6d6f 6465 6c5b 274d 6f64 656c 5061  d_model['ModelPa
+00014ea0: 7261 6d65 7465 7273 275d 203d 204d 6f64  rameters'] = Mod
+00014eb0: 656c 4d6f 6e73 7465 7228 6d6f 6465 6c5f  elMonster(model_
+00014ec0: 7374 7229 2e67 6574 5f6e 6577 5f70 6172  str).get_new_par
+00014ed0: 616d 7328 0d0a 2020 2020 2020 2020 2020  ams(..          
+00014ee0: 2020 2020 2020 6d65 7468 6f64 3d6d 6574        method=met
+00014ef0: 686f 640d 0a20 2020 2020 2020 2020 2020  hod..           
+00014f00: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00014f10: 7472 656e 645f 7472 616e 7366 6f72 6d61  trend_transforma
+00014f20: 7469 6f6e 203d 2052 616e 646f 6d54 7261  tion = RandomTra
+00014f30: 6e73 666f 726d 280d 0a20 2020 2020 2020  nsform(..       
+00014f40: 2020 2020 2020 2020 2074 7261 6e73 666f           transfo
+00014f50: 726d 6572 5f6c 6973 743d 2273 6361 6c61  rmer_list="scala
+00014f60: 626c 6522 2c0d 0a20 2020 2020 2020 2020  ble",..         
+00014f70: 2020 2020 2020 2074 7261 6e73 666f 726d         transform
+00014f80: 6572 5f6d 6178 5f64 6570 7468 3d33 2c20  er_max_depth=3, 
+00014f90: 2023 2070 726f 6261 626c 7920 7761 6e74   # probably want
+00014fa0: 2073 6f6d 6520 6d6f 7265 2075 7361 626c   some more usabl
+00014fb0: 6520 6465 6661 756c 7473 2066 6972 7374  e defaults first
+00014fc0: 2061 7320 6d61 6e79 2072 616e 646f 6d20   as many random 
+00014fd0: 6172 6520 7365 6e73 656c 6573 730d 0a20  are senseless.. 
+00014fe0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00014ff0: 2020 2020 2020 656c 6966 2074 7265 6e64        elif trend
+00015000: 5f62 6173 6520 3d3d 2027 7062 3127 3a0d  _base == 'pb1':.
+00015010: 0a20 2020 2020 2020 2020 2020 2074 7265  .            tre
+00015020: 6e64 5f6d 6f64 656c 203d 207b 274d 6f64  nd_model = {'Mod
+00015030: 656c 273a 2027 4152 444c 277d 0d0a 2020  el': 'ARDL'}..  
+00015040: 2020 2020 2020 2020 2020 7472 656e 645f            trend_
+00015050: 6d6f 6465 6c5b 274d 6f64 656c 5061 7261  model['ModelPara
+00015060: 6d65 7465 7273 275d 203d 207b 0d0a 2020  meters'] = {..  
+00015070: 2020 2020 2020 2020 2020 2020 2020 226c                "l
+00015080: 6167 7322 3a20 312c 0d0a 2020 2020 2020  ags": 1,..      
+00015090: 2020 2020 2020 2020 2020 2274 7265 6e64            "trend
+000150a0: 223a 2022 6e22 2c0d 0a20 2020 2020 2020  ": "n",..       
+000150b0: 2020 2020 2020 2020 2022 6f72 6465 7222           "order"
+000150c0: 3a20 302c 0d0a 2020 2020 2020 2020 2020  : 0,..          
+000150d0: 2020 2020 2020 2263 6175 7361 6c22 3a20        "causal": 
+000150e0: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
+000150f0: 2020 2020 2020 2020 2272 6567 7265 7373          "regress
+00015100: 696f 6e5f 7479 7065 223a 2022 7369 6d70  ion_type": "simp
+00015110: 6c65 222c 0d0a 2020 2020 2020 2020 2020  le",..          
+00015120: 2020 7d0d 0a20 2020 2020 2020 2020 2020    }..           
+00015130: 2074 7265 6e64 5f74 7261 6e73 666f 726d   trend_transform
+00015140: 6174 696f 6e20 3d20 7b0d 0a20 2020 2020  ation = {..     
+00015150: 2020 2020 2020 2020 2020 2022 6669 6c6c             "fill
+00015160: 6e61 223a 2022 6e65 6172 6573 7422 2c0d  na": "nearest",.
+00015170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015180: 2022 7472 616e 7366 6f72 6d61 7469 6f6e   "transformation
+00015190: 7322 3a20 7b22 3022 3a20 2253 7461 6e64  s": {"0": "Stand
+000151a0: 6172 6453 6361 6c65 7222 2c20 2231 223a  ardScaler", "1":
+000151b0: 2022 416e 6f6d 616c 7952 656d 6f76 616c   "AnomalyRemoval
+000151c0: 227d 2c0d 0a20 2020 2020 2020 2020 2020  "},..           
+000151d0: 2020 2020 2022 7472 616e 7366 6f72 6d61       "transforma
+000151e0: 7469 6f6e 5f70 6172 616d 7322 3a20 7b0d  tion_params": {.
+000151f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015200: 2020 2020 2022 3022 3a20 7b7d 2c0d 0a20       "0": {},.. 
+00015210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015220: 2020 2022 3122 3a20 7b0d 0a20 2020 2020     "1": {..     
 00015230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015240: 2020 2020 2022 6d65 7468 6f64 223a 2022       "method": "
-00015250: 4951 5222 2c0d 0a20 2020 2020 2020 2020  IQR",..         
-00015260: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015270: 7472 616e 7366 6f72 6d5f 6469 6374 223a  transform_dict":
-00015280: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00015290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000152a0: 2266 696c 6c6e 6122 3a20 4e6f 6e65 2c0d  "fillna": None,.
-000152b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000152c0: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
-000152d0: 616e 7366 6f72 6d61 7469 6f6e 7322 3a20  ansformations": 
-000152e0: 7b22 3022 3a20 2243 6c69 704f 7574 6c69  {"0": "ClipOutli
-000152f0: 6572 7322 7d2c 0d0a 2020 2020 2020 2020  ers"},..        
+00015240: 2020 2022 6d65 7468 6f64 223a 2022 4951     "method": "IQ
+00015250: 5222 2c0d 0a20 2020 2020 2020 2020 2020  R",..           
+00015260: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+00015270: 616e 7366 6f72 6d5f 6469 6374 223a 207b  ansform_dict": {
+00015280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015290: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+000152a0: 696c 6c6e 6122 3a20 4e6f 6e65 2c0d 0a20  illna": None,.. 
+000152b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000152c0: 2020 2020 2020 2020 2020 2022 7472 616e             "tran
+000152d0: 7366 6f72 6d61 7469 6f6e 7322 3a20 7b22  sformations": {"
+000152e0: 3022 3a20 2243 6c69 704f 7574 6c69 6572  0": "ClipOutlier
+000152f0: 7322 7d2c 0d0a 2020 2020 2020 2020 2020  s"},..          
 00015300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015310: 2020 2020 2274 7261 6e73 666f 726d 6174      "transformat
-00015320: 696f 6e5f 7061 7261 6d73 223a 207b 0d0a  ion_params": {..
+00015310: 2020 2274 7261 6e73 666f 726d 6174 696f    "transformatio
+00015320: 6e5f 7061 7261 6d73 223a 207b 0d0a 2020  n_params": {..  
 00015330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015350: 2230 223a 207b 226d 6574 686f 6422 3a20  "0": {"method": 
-00015360: 2263 6c69 7022 2c20 2273 7464 5f74 6872  "clip", "std_thr
-00015370: 6573 686f 6c64 223a 2036 7d0d 0a20 2020  eshold": 6}..   
+00015340: 2020 2020 2020 2020 2020 2020 2020 2230                "0
+00015350: 223a 207b 226d 6574 686f 6422 3a20 2263  ": {"method": "c
+00015360: 6c69 7022 2c20 2273 7464 5f74 6872 6573  lip", "std_thres
+00015370: 686f 6c64 223a 2036 7d0d 0a20 2020 2020  hold": 6}..     
 00015380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015390: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+00015390: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
 000153a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153b0: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-000153c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153d0: 2022 6d65 7468 6f64 5f70 6172 616d 7322   "method_params"
-000153e0: 3a20 7b0d 0a20 2020 2020 2020 2020 2020  : {..           
-000153f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015400: 2022 6971 725f 7468 7265 7368 6f6c 6422   "iqr_threshold"
-00015410: 3a20 322e 352c 0d0a 2020 2020 2020 2020  : 2.5,..        
+000153b0: 2020 207d 2c0d 0a20 2020 2020 2020 2020     },..         
+000153c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000153d0: 6d65 7468 6f64 5f70 6172 616d 7322 3a20  method_params": 
+000153e0: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+000153f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00015400: 6971 725f 7468 7265 7368 6f6c 6422 3a20  iqr_threshold": 
+00015410: 322e 352c 0d0a 2020 2020 2020 2020 2020  2.5,..          
 00015420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015430: 2020 2020 2269 7172 5f71 7561 6e74 696c      "iqr_quantil
-00015440: 6573 223a 205b 302e 3235 2c20 302e 3735  es": [0.25, 0.75
-00015450: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00015460: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
+00015430: 2020 2269 7172 5f71 7561 6e74 696c 6573    "iqr_quantiles
+00015440: 223a 205b 302e 3235 2c20 302e 3735 5d2c  ": [0.25, 0.75],
+00015450: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015460: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
 00015470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015480: 2020 2020 2020 2020 2266 696c 6c6e 6122          "fillna"
-00015490: 3a20 2266 6669 6c6c 222c 0d0a 2020 2020  : "ffill",..    
-000154a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154b0: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-000154c0: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-000154d0: 2020 2020 7d0d 0a20 2020 2020 2020 2065      }..        e
-000154e0: 6c69 6620 7472 656e 645f 6261 7365 203d  lif trend_base =
-000154f0: 3d20 2770 6232 273a 0d0a 2020 2020 2020  = 'pb2':..      
-00015500: 2020 2020 2020 2320 5245 504c 4143 4520        # REPLACE 
-00015510: 5448 4953 2057 4954 484f 5554 2045 5854  THIS WITHOUT EXT
-00015520: 5241 2054 5245 4553 0d0a 2020 2020 2020  RA TREES..      
-00015530: 2020 2020 2020 7472 656e 645f 6d6f 6465        trend_mode
-00015540: 6c20 3d20 7b27 4d6f 6465 6c27 3a20 2757  l = {'Model': 'W
-00015550: 696e 646f 7752 6567 7265 7373 696f 6e27  indowRegression'
-00015560: 7d0d 0a20 2020 2020 2020 2020 2020 2074  }..            t
-00015570: 7265 6e64 5f6d 6f64 656c 5b27 4d6f 6465  rend_model['Mode
-00015580: 6c50 6172 616d 6574 6572 7327 5d20 3d20  lParameters'] = 
-00015590: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
-000155a0: 2020 2022 7769 6e64 6f77 5f73 697a 6522     "window_size"
-000155b0: 3a20 3132 2c0d 0a20 2020 2020 2020 2020  : 12,..         
-000155c0: 2020 2020 2020 2022 696e 7075 745f 6469         "input_di
-000155d0: 6d22 3a20 2275 6e69 7661 7269 6174 6522  m": "univariate"
-000155e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000155f0: 2020 2022 6f75 7470 7574 5f64 696d 223a     "output_dim":
-00015600: 2022 3173 7465 7022 2c0d 0a20 2020 2020   "1step",..     
-00015610: 2020 2020 2020 2020 2020 2022 6e6f 726d             "norm
-00015620: 616c 697a 655f 7769 6e64 6f77 223a 2046  alize_window": F
-00015630: 616c 7365 2c0d 0a20 2020 2020 2020 2020  alse,..         
-00015640: 2020 2020 2020 2022 6d61 785f 7769 6e64         "max_wind
-00015650: 6f77 7322 3a20 3830 3030 2c0d 0a20 2020  ows": 8000,..   
-00015660: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-00015670: 6772 6573 7369 6f6e 5f74 7970 6522 3a20  gression_type": 
-00015680: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
-00015690: 2020 2020 2020 2022 7265 6772 6573 7369         "regressi
-000156a0: 6f6e 5f6d 6f64 656c 223a 207b 0d0a 2020  on_model": {..  
+00015480: 2020 2020 2020 2266 696c 6c6e 6122 3a20        "fillna": 
+00015490: 2266 6669 6c6c 222c 0d0a 2020 2020 2020  "ffill",..      
+000154a0: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+000154b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000154c0: 2020 7d2c 0d0a 2020 2020 2020 2020 2020    },..          
+000154d0: 2020 7d0d 0a20 2020 2020 2020 2065 6c69    }..        eli
+000154e0: 6620 7472 656e 645f 6261 7365 203d 3d20  f trend_base == 
+000154f0: 2770 6232 273a 0d0a 2020 2020 2020 2020  'pb2':..        
+00015500: 2020 2020 2320 5245 504c 4143 4520 5448      # REPLACE TH
+00015510: 4953 2057 4954 484f 5554 2045 5854 5241  IS WITHOUT EXTRA
+00015520: 2054 5245 4553 0d0a 2020 2020 2020 2020   TREES..        
+00015530: 2020 2020 7472 656e 645f 6d6f 6465 6c20      trend_model 
+00015540: 3d20 7b27 4d6f 6465 6c27 3a20 2757 696e  = {'Model': 'Win
+00015550: 646f 7752 6567 7265 7373 696f 6e27 7d0d  dowRegression'}.
+00015560: 0a20 2020 2020 2020 2020 2020 2074 7265  .            tre
+00015570: 6e64 5f6d 6f64 656c 5b27 4d6f 6465 6c50  nd_model['ModelP
+00015580: 6172 616d 6574 6572 7327 5d20 3d20 7b0d  arameters'] = {.
+00015590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000155a0: 2022 7769 6e64 6f77 5f73 697a 6522 3a20   "window_size": 
+000155b0: 3132 2c0d 0a20 2020 2020 2020 2020 2020  12,..           
+000155c0: 2020 2020 2022 696e 7075 745f 6469 6d22       "input_dim"
+000155d0: 3a20 2275 6e69 7661 7269 6174 6522 2c0d  : "univariate",.
+000155e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000155f0: 2022 6f75 7470 7574 5f64 696d 223a 2022   "output_dim": "
+00015600: 3173 7465 7022 2c0d 0a20 2020 2020 2020  1step",..       
+00015610: 2020 2020 2020 2020 2022 6e6f 726d 616c           "normal
+00015620: 697a 655f 7769 6e64 6f77 223a 2046 616c  ize_window": Fal
+00015630: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+00015640: 2020 2020 2022 6d61 785f 7769 6e64 6f77       "max_window
+00015650: 7322 3a20 3830 3030 2c0d 0a20 2020 2020  s": 8000,..     
+00015660: 2020 2020 2020 2020 2020 2022 7265 6772             "regr
+00015670: 6573 7369 6f6e 5f74 7970 6522 3a20 4e6f  ession_type": No
+00015680: 6e65 2c0d 0a20 2020 2020 2020 2020 2020  ne,..           
+00015690: 2020 2020 2022 7265 6772 6573 7369 6f6e       "regression
+000156a0: 5f6d 6f64 656c 223a 207b 0d0a 2020 2020  _model": {..    
 000156b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156c0: 2020 226d 6f64 656c 223a 2022 4578 7472    "model": "Extr
-000156d0: 6154 7265 6573 222c 0d0a 2020 2020 2020  aTrees",..      
-000156e0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-000156f0: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
-00015700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015710: 2020 2020 2020 2020 2022 6e5f 6573 7469           "n_esti
-00015720: 6d61 746f 7273 223a 2031 3030 2c0d 0a20  mators": 100,.. 
+000156c0: 226d 6f64 656c 223a 2022 4578 7472 6154  "model": "ExtraT
+000156d0: 7265 6573 222c 0d0a 2020 2020 2020 2020  rees",..        
+000156e0: 2020 2020 2020 2020 2020 2020 226d 6f64              "mod
+000156f0: 656c 5f70 6172 616d 7322 3a20 7b0d 0a20  el_params": {.. 
+00015700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015710: 2020 2020 2020 2022 6e5f 6573 7469 6d61         "n_estima
+00015720: 746f 7273 223a 2031 3030 2c0d 0a20 2020  tors": 100,..   
 00015730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015740: 2020 2020 2020 2022 6d69 6e5f 7361 6d70         "min_samp
-00015750: 6c65 735f 6c65 6166 223a 2031 2c0d 0a20  les_leaf": 1,.. 
+00015740: 2020 2020 2022 6d69 6e5f 7361 6d70 6c65       "min_sample
+00015750: 735f 6c65 6166 223a 2031 2c0d 0a20 2020  s_leaf": 1,..   
 00015760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015770: 2020 2020 2020 2022 6d61 785f 6465 7074         "max_dept
-00015780: 6822 3a20 3230 2c0d 0a20 2020 2020 2020  h": 20,..       
-00015790: 2020 2020 2020 2020 2020 2020 207d 2c0d               },.
-000157a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000157b0: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
-000157c0: 207d 0d0a 2020 2020 2020 2020 2020 2020   }..            
-000157d0: 7472 656e 645f 7472 616e 7366 6f72 6d61  trend_transforma
-000157e0: 7469 6f6e 203d 207b 0d0a 2020 2020 2020  tion = {..      
-000157f0: 2020 2020 2020 2020 2020 2266 696c 6c6e            "filln
-00015800: 6122 3a20 2266 6669 6c6c 222c 0d0a 2020  a": "ffill",..  
-00015810: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00015820: 7261 6e73 666f 726d 6174 696f 6e73 223a  ransformations":
-00015830: 207b 2230 223a 2022 416e 6f6d 616c 7952   {"0": "AnomalyR
-00015840: 656d 6f76 616c 222c 2022 3122 3a20 2252  emoval", "1": "R
-00015850: 6f62 7573 7453 6361 6c65 7222 7d2c 0d0a  obustScaler"},..
-00015860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015870: 2274 7261 6e73 666f 726d 6174 696f 6e5f  "transformation_
-00015880: 7061 7261 6d73 223a 207b 0d0a 2020 2020  params": {..    
-00015890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158a0: 2230 223a 207b 0d0a 2020 2020 2020 2020  "0": {..        
-000158b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158c0: 226d 6574 686f 6422 3a20 2249 5152 222c  "method": "IQR",
-000158d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000158e0: 2020 2020 2020 2020 2020 2274 7261 6e73            "trans
-000158f0: 666f 726d 5f64 6963 7422 3a20 7b0d 0a20  form_dict": {.. 
+00015770: 2020 2020 2022 6d61 785f 6465 7074 6822       "max_depth"
+00015780: 3a20 3230 2c0d 0a20 2020 2020 2020 2020  : 20,..         
+00015790: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
+000157a0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+000157b0: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
+000157c0: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
+000157d0: 656e 645f 7472 616e 7366 6f72 6d61 7469  end_transformati
+000157e0: 6f6e 203d 207b 0d0a 2020 2020 2020 2020  on = {..        
+000157f0: 2020 2020 2020 2020 2266 696c 6c6e 6122          "fillna"
+00015800: 3a20 2266 6669 6c6c 222c 0d0a 2020 2020  : "ffill",..    
+00015810: 2020 2020 2020 2020 2020 2020 2274 7261              "tra
+00015820: 6e73 666f 726d 6174 696f 6e73 223a 207b  nsformations": {
+00015830: 2230 223a 2022 416e 6f6d 616c 7952 656d  "0": "AnomalyRem
+00015840: 6f76 616c 222c 2022 3122 3a20 2252 6f62  oval", "1": "Rob
+00015850: 7573 7453 6361 6c65 7222 7d2c 0d0a 2020  ustScaler"},..  
+00015860: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00015870: 7261 6e73 666f 726d 6174 696f 6e5f 7061  ransformation_pa
+00015880: 7261 6d73 223a 207b 0d0a 2020 2020 2020  rams": {..      
+00015890: 2020 2020 2020 2020 2020 2020 2020 2230                "0
+000158a0: 223a 207b 0d0a 2020 2020 2020 2020 2020  ": {..          
+000158b0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+000158c0: 6574 686f 6422 3a20 2249 5152 222c 0d0a  ethod": "IQR",..
+000158d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000158e0: 2020 2020 2020 2020 2274 7261 6e73 666f          "transfo
+000158f0: 726d 5f64 6963 7422 3a20 7b0d 0a20 2020  rm_dict": {..   
 00015900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015910: 2020 2020 2020 2020 2020 2022 6669 6c6c             "fill
-00015920: 6e61 223a 204e 6f6e 652c 0d0a 2020 2020  na": None,..    
+00015910: 2020 2020 2020 2020 2022 6669 6c6c 6e61           "fillna
+00015920: 223a 204e 6f6e 652c 0d0a 2020 2020 2020  ": None,..      
 00015930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015940: 2020 2020 2020 2020 2274 7261 6e73 666f          "transfo
-00015950: 726d 6174 696f 6e73 223a 207b 2230 223a  rmations": {"0":
-00015960: 2022 436c 6970 4f75 746c 6965 7273 227d   "ClipOutliers"}
-00015970: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00015980: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015990: 7472 616e 7366 6f72 6d61 7469 6f6e 5f70  transformation_p
-000159a0: 6172 616d 7322 3a20 7b0d 0a20 2020 2020  arams": {..     
+00015940: 2020 2020 2020 2274 7261 6e73 666f 726d        "transform
+00015950: 6174 696f 6e73 223a 207b 2230 223a 2022  ations": {"0": "
+00015960: 436c 6970 4f75 746c 6965 7273 227d 2c0d  ClipOutliers"},.
+00015970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015980: 2020 2020 2020 2020 2020 2020 2022 7472               "tr
+00015990: 616e 7366 6f72 6d61 7469 6f6e 5f70 6172  ansformation_par
+000159a0: 616d 7322 3a20 7b0d 0a20 2020 2020 2020  ams": {..       
 000159b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000159c0: 2020 2020 2020 2020 2020 2022 3022 3a20             "0": 
-000159d0: 7b22 6d65 7468 6f64 223a 2022 636c 6970  {"method": "clip
-000159e0: 222c 2022 7374 645f 7468 7265 7368 6f6c  ", "std_threshol
-000159f0: 6422 3a20 367d 0d0a 2020 2020 2020 2020  d": 6}..        
+000159c0: 2020 2020 2020 2020 2022 3022 3a20 7b22           "0": {"
+000159d0: 6d65 7468 6f64 223a 2022 636c 6970 222c  method": "clip",
+000159e0: 2022 7374 645f 7468 7265 7368 6f6c 6422   "std_threshold"
+000159f0: 3a20 367d 0d0a 2020 2020 2020 2020 2020  : 6}..          
 00015a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a10: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-00015a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a30: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-00015a40: 2020 2020 2020 2020 2020 2020 226d 6574              "met
-00015a50: 686f 645f 7061 7261 6d73 223a 207b 0d0a  hod_params": {..
+00015a10: 2020 7d2c 0d0a 2020 2020 2020 2020 2020    },..          
+00015a20: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+00015a30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015a40: 2020 2020 2020 2020 2020 226d 6574 686f            "metho
+00015a50: 645f 7061 7261 6d73 223a 207b 0d0a 2020  d_params": {..  
 00015a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a70: 2020 2020 2020 2020 2020 2020 2269 7172              "iqr
-00015a80: 5f74 6872 6573 686f 6c64 223a 2032 2e35  _threshold": 2.5
-00015a90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00015aa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015ab0: 6971 725f 7175 616e 7469 6c65 7322 3a20  iqr_quantiles": 
-00015ac0: 5b30 2e32 352c 2030 2e37 355d 2c0d 0a20  [0.25, 0.75],.. 
+00015a70: 2020 2020 2020 2020 2020 2269 7172 5f74            "iqr_t
+00015a80: 6872 6573 686f 6c64 223a 2032 2e35 2c0d  hreshold": 2.5,.
+00015a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015aa0: 2020 2020 2020 2020 2020 2020 2022 6971               "iq
+00015ab0: 725f 7175 616e 7469 6c65 7322 3a20 5b30  r_quantiles": [0
+00015ac0: 2e32 352c 2030 2e37 355d 2c0d 0a20 2020  .25, 0.75],..   
 00015ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ae0: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
+00015ae0: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
 00015af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015b00: 2020 2022 6669 6c6c 6e61 223a 2022 6666     "fillna": "ff
-00015b10: 696c 6c22 2c0d 0a20 2020 2020 2020 2020  ill",..         
-00015b20: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
+00015b00: 2022 6669 6c6c 6e61 223a 2022 6666 696c   "fillna": "ffil
+00015b10: 6c22 2c0d 0a20 2020 2020 2020 2020 2020  l",..           
+00015b20: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
 00015b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015b40: 2020 2022 3122 3a20 7b7d 2c0d 0a20 2020     "1": {},..   
-00015b50: 2020 2020 2020 2020 2020 2020 207d 2c0d               },.
-00015b60: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
-00015b70: 2020 2020 2020 2020 656c 6966 2074 7265          elif tre
-00015b80: 6e64 5f62 6173 6520 3d3d 2022 6465 6570  nd_base == "deep
-00015b90: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-00015ba0: 6d6f 6465 6c5f 6c69 7374 203d 2022 616c  model_list = "al
-00015bb0: 6c5f 7072 6167 6d61 7469 6322 0d0a 2020  l_pragmatic"..  
-00015bc0: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-00015bd0: 6c69 7374 2c20 6d6f 6465 6c5f 7072 6f62  list, model_prob
-00015be0: 203d 206d 6f64 656c 5f6c 6973 745f 746f   = model_list_to
-00015bf0: 5f64 6963 7428 6d6f 6465 6c5f 6c69 7374  _dict(model_list
-00015c00: 290d 0a20 2020 2020 2020 2020 2020 206d  )..            m
-00015c10: 6f64 656c 5f73 7472 203d 2072 616e 646f  odel_str = rando
-00015c20: 6d2e 6368 6f69 6365 7328 6d6f 6465 6c5f  m.choices(model_
-00015c30: 6c69 7374 2c20 6d6f 6465 6c5f 7072 6f62  list, model_prob
-00015c40: 2c20 6b3d 3129 5b30 5d0d 0a20 2020 2020  , k=1)[0]..     
-00015c50: 2020 2020 2020 2074 7265 6e64 5f6d 6f64         trend_mod
-00015c60: 656c 203d 207b 274d 6f64 656c 273a 206d  el = {'Model': m
-00015c70: 6f64 656c 5f73 7472 7d0d 0a20 2020 2020  odel_str}..     
-00015c80: 2020 2020 2020 2074 7265 6e64 5f6d 6f64         trend_mod
-00015c90: 656c 5b27 4d6f 6465 6c50 6172 616d 6574  el['ModelParamet
-00015ca0: 6572 7327 5d20 3d20 4d6f 6465 6c4d 6f6e  ers'] = ModelMon
-00015cb0: 7374 6572 286d 6f64 656c 5f73 7472 292e  ster(model_str).
-00015cc0: 6765 745f 6e65 775f 7061 7261 6d73 280d  get_new_params(.
-00015cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015ce0: 206d 6574 686f 643d 6d65 7468 6f64 0d0a   method=method..
-00015cf0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00015d00: 2020 2020 2020 2020 2020 2074 7265 6e64             trend
-00015d10: 5f74 7261 6e73 666f 726d 6174 696f 6e20  _transformation 
-00015d20: 3d20 5261 6e64 6f6d 5472 616e 7366 6f72  = RandomTransfor
-00015d30: 6d28 0d0a 2020 2020 2020 2020 2020 2020  m(..            
-00015d40: 2020 2020 7472 616e 7366 6f72 6d65 725f      transformer_
-00015d50: 6c69 7374 3d22 616c 6c22 2c0d 0a20 2020  list="all",..   
-00015d60: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-00015d70: 6e73 666f 726d 6572 5f6d 6178 5f64 6570  nsformer_max_dep
-00015d80: 7468 3d33 2c20 2023 2070 726f 6261 626c  th=3,  # probabl
-00015d90: 7920 7761 6e74 2073 6f6d 6520 6d6f 7265  y want some more
-00015da0: 2075 7361 626c 6520 6465 6661 756c 7473   usable defaults
-00015db0: 2066 6972 7374 2061 7320 6d61 6e79 2072   first as many r
-00015dc0: 616e 646f 6d20 6172 6520 7365 6e73 656c  andom are sensel
-00015dd0: 6573 730d 0a20 2020 2020 2020 2020 2020  ess..           
-00015de0: 2029 0d0a 0d0a 2020 2020 2020 2020 7472   )....        tr
-00015df0: 656e 645f 616e 6f6d 616c 795f 696e 7465  end_anomaly_inte
-00015e00: 7276 656e 7469 6f6e 203d 2072 616e 646f  rvention = rando
-00015e10: 6d2e 6368 6f69 6365 7328 5b4e 6f6e 652c  m.choices([None,
-00015e20: 2027 6465 7465 6374 5f6f 6e6c 7927 5d2c   'detect_only'],
-00015e30: 205b 302e 352c 2030 2e35 5d29 5b0d 0a20   [0.5, 0.5])[.. 
-00015e40: 2020 2020 2020 2020 2020 2030 0d0a 2020             0..  
-00015e50: 2020 2020 2020 5d0d 0a20 2020 2020 2020        ]..       
-00015e60: 2069 6620 7472 656e 645f 616e 6f6d 616c   if trend_anomal
-00015e70: 795f 696e 7465 7276 656e 7469 6f6e 2069  y_intervention i
-00015e80: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00015e90: 2020 2020 2020 2020 2074 7265 6e64 5f61           trend_a
-00015ea0: 6e6f 6d61 6c79 5f64 6574 6563 746f 725f  nomaly_detector_
-00015eb0: 7061 7261 6d73 203d 2041 6e6f 6d61 6c79  params = Anomaly
-00015ec0: 5265 6d6f 7661 6c2e 6765 745f 6e65 775f  Removal.get_new_
-00015ed0: 7061 7261 6d73 286d 6574 686f 643d 6d65  params(method=me
-00015ee0: 7468 6f64 290d 0a20 2020 2020 2020 2065  thod)..        e
-00015ef0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00015f00: 2020 7472 656e 645f 616e 6f6d 616c 795f    trend_anomaly_
-00015f10: 6465 7465 6374 6f72 5f70 6172 616d 7320  detector_params 
-00015f20: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00015f30: 6966 206d 6574 686f 6420 696e 205b 2764  if method in ['d
-00015f40: 6565 7027 2c20 2761 6c6c 5f6c 696e 6561  eep', 'all_linea
-00015f50: 7227 5d3a 0d0a 2020 2020 2020 2020 2020  r']:..          
-00015f60: 2020 6c69 6e65 6172 5f6d 6f64 656c 203d    linear_model =
-00015f70: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00015f80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015f90: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
-00015fa0: 2020 2020 2020 2020 2027 6c73 7473 7127           'lstsq'
-00015fb0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00015fc0: 2020 2020 2020 2027 6c69 6e61 6c67 5f73         'linalg_s
-00015fd0: 6f6c 7665 272c 0d0a 2020 2020 2020 2020  olve',..        
-00015fe0: 2020 2020 2020 2020 2020 2020 276c 315f              'l1_
-00015ff0: 6e6f 726d 272c 0d0a 2020 2020 2020 2020  norm',..        
-00016000: 2020 2020 2020 2020 2020 2020 2764 7761              'dwa
-00016010: 655f 6e6f 726d 272c 0d0a 2020 2020 2020  e_norm',..      
-00016020: 2020 2020 2020 2020 2020 2020 2020 2771                'q
-00016030: 7561 6e74 696c 655f 6e6f 726d 272c 0d0a  uantile_norm',..
+00015b40: 2022 3122 3a20 7b7d 2c0d 0a20 2020 2020   "1": {},..     
+00015b50: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
+00015b60: 2020 2020 2020 2020 2020 207d 0d0a 2020             }..  
+00015b70: 2020 2020 2020 656c 6966 2074 7265 6e64        elif trend
+00015b80: 5f62 6173 6520 3d3d 2022 6465 6570 223a  _base == "deep":
+00015b90: 0d0a 2020 2020 2020 2020 2020 2020 6d6f  ..            mo
+00015ba0: 6465 6c5f 6c69 7374 203d 2022 616c 6c5f  del_list = "all_
+00015bb0: 7072 6167 6d61 7469 6322 0d0a 2020 2020  pragmatic"..    
+00015bc0: 2020 2020 2020 2020 6d6f 6465 6c5f 6c69          model_li
+00015bd0: 7374 2c20 6d6f 6465 6c5f 7072 6f62 203d  st, model_prob =
+00015be0: 206d 6f64 656c 5f6c 6973 745f 746f 5f64   model_list_to_d
+00015bf0: 6963 7428 6d6f 6465 6c5f 6c69 7374 290d  ict(model_list).
+00015c00: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
+00015c10: 656c 5f73 7472 203d 2072 616e 646f 6d2e  el_str = random.
+00015c20: 6368 6f69 6365 7328 6d6f 6465 6c5f 6c69  choices(model_li
+00015c30: 7374 2c20 6d6f 6465 6c5f 7072 6f62 2c20  st, model_prob, 
+00015c40: 6b3d 3129 5b30 5d0d 0a20 2020 2020 2020  k=1)[0]..       
+00015c50: 2020 2020 2074 7265 6e64 5f6d 6f64 656c       trend_model
+00015c60: 203d 207b 274d 6f64 656c 273a 206d 6f64   = {'Model': mod
+00015c70: 656c 5f73 7472 7d0d 0a20 2020 2020 2020  el_str}..       
+00015c80: 2020 2020 2074 7265 6e64 5f6d 6f64 656c       trend_model
+00015c90: 5b27 4d6f 6465 6c50 6172 616d 6574 6572  ['ModelParameter
+00015ca0: 7327 5d20 3d20 4d6f 6465 6c4d 6f6e 7374  s'] = ModelMonst
+00015cb0: 6572 286d 6f64 656c 5f73 7472 292e 6765  er(model_str).ge
+00015cc0: 745f 6e65 775f 7061 7261 6d73 280d 0a20  t_new_params(.. 
+00015cd0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00015ce0: 6574 686f 643d 6d65 7468 6f64 0d0a 2020  ethod=method..  
+00015cf0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+00015d00: 2020 2020 2020 2020 2074 7265 6e64 5f74           trend_t
+00015d10: 7261 6e73 666f 726d 6174 696f 6e20 3d20  ransformation = 
+00015d20: 5261 6e64 6f6d 5472 616e 7366 6f72 6d28  RandomTransform(
+00015d30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015d40: 2020 7472 616e 7366 6f72 6d65 725f 6c69    transformer_li
+00015d50: 7374 3d22 616c 6c22 2c0d 0a20 2020 2020  st="all",..     
+00015d60: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+00015d70: 666f 726d 6572 5f6d 6178 5f64 6570 7468  former_max_depth
+00015d80: 3d33 2c20 2023 2070 726f 6261 626c 7920  =3,  # probably 
+00015d90: 7761 6e74 2073 6f6d 6520 6d6f 7265 2075  want some more u
+00015da0: 7361 626c 6520 6465 6661 756c 7473 2066  sable defaults f
+00015db0: 6972 7374 2061 7320 6d61 6e79 2072 616e  irst as many ran
+00015dc0: 646f 6d20 6172 6520 7365 6e73 656c 6573  dom are senseles
+00015dd0: 730d 0a20 2020 2020 2020 2020 2020 2029  s..            )
+00015de0: 0d0a 0d0a 2020 2020 2020 2020 7472 656e  ....        tren
+00015df0: 645f 616e 6f6d 616c 795f 696e 7465 7276  d_anomaly_interv
+00015e00: 656e 7469 6f6e 203d 2072 616e 646f 6d2e  ention = random.
+00015e10: 6368 6f69 6365 7328 5b4e 6f6e 652c 2027  choices([None, '
+00015e20: 6465 7465 6374 5f6f 6e6c 7927 5d2c 205b  detect_only'], [
+00015e30: 302e 352c 2030 2e35 5d29 5b0d 0a20 2020  0.5, 0.5])[..   
+00015e40: 2020 2020 2020 2020 2030 0d0a 2020 2020           0..    
+00015e50: 2020 2020 5d0d 0a20 2020 2020 2020 2069      ]..        i
+00015e60: 6620 7472 656e 645f 616e 6f6d 616c 795f  f trend_anomaly_
+00015e70: 696e 7465 7276 656e 7469 6f6e 2069 7320  intervention is 
+00015e80: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00015e90: 2020 2020 2020 2074 7265 6e64 5f61 6e6f         trend_ano
+00015ea0: 6d61 6c79 5f64 6574 6563 746f 725f 7061  maly_detector_pa
+00015eb0: 7261 6d73 203d 2041 6e6f 6d61 6c79 5265  rams = AnomalyRe
+00015ec0: 6d6f 7661 6c2e 6765 745f 6e65 775f 7061  moval.get_new_pa
+00015ed0: 7261 6d73 286d 6574 686f 643d 6d65 7468  rams(method=meth
+00015ee0: 6f64 290d 0a20 2020 2020 2020 2065 6c73  od)..        els
+00015ef0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00015f00: 7472 656e 645f 616e 6f6d 616c 795f 6465  trend_anomaly_de
+00015f10: 7465 6374 6f72 5f70 6172 616d 7320 3d20  tector_params = 
+00015f20: 4e6f 6e65 0d0a 2020 2020 2020 2020 6966  None..        if
+00015f30: 206d 6574 686f 6420 696e 205b 2764 6565   method in ['dee
+00015f40: 7027 2c20 2761 6c6c 5f6c 696e 6561 7227  p', 'all_linear'
+00015f50: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00015f60: 6c69 6e65 6172 5f6d 6f64 656c 203d 2072  linear_model = r
+00015f70: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+00015f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f90: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00015fa0: 2020 2020 2020 2027 6c73 7473 7127 2c0d         'lstsq',.
+00015fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015fc0: 2020 2020 2027 6c69 6e61 6c67 5f73 6f6c       'linalg_sol
+00015fd0: 7665 272c 0d0a 2020 2020 2020 2020 2020  ve',..          
+00015fe0: 2020 2020 2020 2020 2020 276c 315f 6e6f            'l1_no
+00015ff0: 726d 272c 0d0a 2020 2020 2020 2020 2020  rm',..          
+00016000: 2020 2020 2020 2020 2020 2764 7761 655f            'dwae_
+00016010: 6e6f 726d 272c 0d0a 2020 2020 2020 2020  norm',..        
+00016020: 2020 2020 2020 2020 2020 2020 2771 7561              'qua
+00016030: 6e74 696c 655f 6e6f 726d 272c 0d0a 2020  ntile_norm',..  
 00016040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016050: 2020 2020 276c 315f 706f 7369 7469 7665      'l1_positive
-00016060: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00016070: 2020 2020 2020 2020 2762 6179 6573 6961          'bayesia
-00016080: 6e5f 6c69 6e65 6172 272c 0d0a 2020 2020  n_linear',..    
-00016090: 2020 2020 2020 2020 2020 2020 5d2c 2020              ],  
-000160a0: 2320 7468 6520 6d69 6e69 6d69 7a65 2062  # the minimize b
-000160b0: 6173 6564 206e 6f72 6d73 2067 6574 2073  ased norms get s
-000160c0: 6c6f 7720 616e 6420 6d65 6d6f 7279 2068  low and memory h
-000160d0: 756e 6772 7920 6174 2073 6361 6c65 0d0a  ungry at scale..
-000160e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000160f0: 5b30 2e39 2c20 302e 322c 2030 2e30 312c  [0.9, 0.2, 0.01,
-00016100: 2030 2e30 312c 2030 2e30 3035 2c20 302e   0.01, 0.005, 0.
-00016110: 3031 2c20 302e 3035 5d2c 0d0a 2020 2020  01, 0.05],..    
-00016120: 2020 2020 2020 2020 295b 305d 0d0a 2020          )[0]..  
-00016130: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00016140: 2020 2020 2020 2020 206c 696e 6561 725f           linear_
-00016150: 6d6f 6465 6c20 3d20 7261 6e64 6f6d 2e63  model = random.c
-00016160: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-00016170: 2020 2020 2020 2020 205b 0d0a 2020 2020           [..    
-00016180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016190: 276c 7374 7371 272c 0d0a 2020 2020 2020  'lstsq',..      
-000161a0: 2020 2020 2020 2020 2020 2020 2020 276c                'l
-000161b0: 696e 616c 675f 736f 6c76 6527 2c0d 0a20  inalg_solve',.. 
+00016050: 2020 276c 315f 706f 7369 7469 7665 272c    'l1_positive',
+00016060: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016070: 2020 2020 2020 2762 6179 6573 6961 6e5f        'bayesian_
+00016080: 6c69 6e65 6172 272c 0d0a 2020 2020 2020  linear',..      
+00016090: 2020 2020 2020 2020 2020 5d2c 2020 2320            ],  # 
+000160a0: 7468 6520 6d69 6e69 6d69 7a65 2062 6173  the minimize bas
+000160b0: 6564 206e 6f72 6d73 2067 6574 2073 6c6f  ed norms get slo
+000160c0: 7720 616e 6420 6d65 6d6f 7279 2068 756e  w and memory hun
+000160d0: 6772 7920 6174 2073 6361 6c65 0d0a 2020  gry at scale..  
+000160e0: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
+000160f0: 2e39 2c20 302e 322c 2030 2e30 312c 2030  .9, 0.2, 0.01, 0
+00016100: 2e30 312c 2030 2e30 3035 2c20 302e 3031  .01, 0.005, 0.01
+00016110: 2c20 302e 3035 5d2c 0d0a 2020 2020 2020  , 0.05],..      
+00016120: 2020 2020 2020 295b 305d 0d0a 2020 2020        )[0]..    
+00016130: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00016140: 2020 2020 2020 206c 696e 6561 725f 6d6f         linear_mo
+00016150: 6465 6c20 3d20 7261 6e64 6f6d 2e63 686f  del = random.cho
+00016160: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+00016170: 2020 2020 2020 205b 0d0a 2020 2020 2020         [..      
+00016180: 2020 2020 2020 2020 2020 2020 2020 276c                'l
+00016190: 7374 7371 272c 0d0a 2020 2020 2020 2020  stsq',..        
+000161a0: 2020 2020 2020 2020 2020 2020 276c 696e              'lin
+000161b0: 616c 675f 736f 6c76 6527 2c0d 0a20 2020  alg_solve',..   
 000161c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161d0: 2020 2027 6261 7965 7369 616e 5f6c 696e     'bayesian_lin
-000161e0: 6561 7227 2c0d 0a20 2020 2020 2020 2020  ear',..         
-000161f0: 2020 2020 2020 205d 2c0d 0a20 2020 2020         ],..     
-00016200: 2020 2020 2020 2020 2020 205b 302e 382c             [0.8,
-00016210: 2030 2e31 352c 2030 2e30 355d 2c0d 0a20   0.15, 0.05],.. 
-00016220: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
-00016230: 0a20 2020 2020 2020 2072 6563 656e 6379  .        recency
-00016240: 5f77 6569 6768 7469 6e67 203d 2072 616e  _weighting = ran
-00016250: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00016260: 2020 2020 2020 2020 2020 5b4e 6f6e 652c            [None,
-00016270: 2030 2e30 352c 2030 2e31 2c20 302e 3235   0.05, 0.1, 0.25
-00016280: 2c20 302e 355d 2c20 5b30 2e37 2c20 302e  , 0.5], [0.7, 0.
-00016290: 312c 2030 2e31 2c20 302e 312c 2030 2e30  1, 0.1, 0.1, 0.0
-000162a0: 355d 0d0a 2020 2020 2020 2020 295b 305d  5]..        )[0]
-000162b0: 0d0a 2020 2020 2020 2020 6966 206c 696e  ..        if lin
-000162c0: 6561 725f 6d6f 6465 6c20 696e 205b 276c  ear_model in ['l
-000162d0: 7374 7371 275d 3a0d 0a20 2020 2020 2020  stsq']:..       
-000162e0: 2020 2020 206c 696e 6561 725f 6d6f 6465       linear_mode
-000162f0: 6c20 3d20 7b0d 0a20 2020 2020 2020 2020  l = {..         
-00016300: 2020 2020 2020 2027 6d6f 6465 6c27 3a20         'model': 
-00016310: 6c69 6e65 6172 5f6d 6f64 656c 2c0d 0a20  linear_model,.. 
-00016320: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00016330: 6c61 6d62 6461 273a 2072 616e 646f 6d2e  lambda': random.
-00016340: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
-00016350: 2020 2020 2020 2020 2020 2020 2020 5b4e                [N
-00016360: 6f6e 652c 2030 2e31 2c20 312c 2031 302c  one, 0.1, 1, 10,
-00016370: 2031 3030 5d2c 205b 302e 372c 2030 2e31   100], [0.7, 0.1
-00016380: 2c20 302e 312c 2030 2e31 2c20 302e 3035  , 0.1, 0.1, 0.05
-00016390: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-000163a0: 2020 2029 5b30 5d2c 0d0a 2020 2020 2020     )[0],..      
-000163b0: 2020 2020 2020 2020 2020 2772 6563 656e            'recen
-000163c0: 6379 5f77 6569 6768 7469 6e67 273a 2072  cy_weighting': r
-000163d0: 6563 656e 6379 5f77 6569 6768 7469 6e67  ecency_weighting
-000163e0: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-000163f0: 0d0a 2020 2020 2020 2020 6966 206c 696e  ..        if lin
-00016400: 6561 725f 6d6f 6465 6c20 696e 205b 276c  ear_model in ['l
-00016410: 696e 616c 675f 736f 6c76 6527 5d3a 0d0a  inalg_solve']:..
-00016420: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-00016430: 6172 5f6d 6f64 656c 203d 207b 0d0a 2020  ar_model = {..  
-00016440: 2020 2020 2020 2020 2020 2020 2020 276d                'm
-00016450: 6f64 656c 273a 206c 696e 6561 725f 6d6f  odel': linear_mo
-00016460: 6465 6c2c 0d0a 2020 2020 2020 2020 2020  del,..          
-00016470: 2020 2020 2020 276c 616d 6264 6127 3a20        'lambda': 
-00016480: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
-00016490: 302c 2030 2e31 2c20 312c 2031 305d 2c20  0, 0.1, 1, 10], 
-000164a0: 5b30 2e34 2c20 302e 322c 2030 2e32 2c20  [0.4, 0.2, 0.2, 
-000164b0: 302e 325d 295b 305d 2c0d 0a20 2020 2020  0.2])[0],..     
-000164c0: 2020 2020 2020 2020 2020 2027 7265 6365             'rece
-000164d0: 6e63 795f 7765 6967 6874 696e 6727 3a20  ncy_weighting': 
-000164e0: 7265 6365 6e63 795f 7765 6967 6874 696e  recency_weightin
-000164f0: 672c 0d0a 2020 2020 2020 2020 2020 2020  g,..            
-00016500: 7d0d 0a20 2020 2020 2020 2065 6c69 6620  }..        elif 
-00016510: 6c69 6e65 6172 5f6d 6f64 656c 2069 6e20  linear_model in 
-00016520: 5b27 6c31 5f6e 6f72 6d27 2c20 2764 7761  ['l1_norm', 'dwa
-00016530: 655f 6e6f 726d 272c 2027 7175 616e 7469  e_norm', 'quanti
-00016540: 6c65 5f6e 6f72 6d27 2c20 276c 315f 706f  le_norm', 'l1_po
-00016550: 7369 7469 7665 275d 3a0d 0a20 2020 2020  sitive']:..     
-00016560: 2020 2020 2020 206c 696e 6561 725f 6d6f         linear_mo
-00016570: 6465 6c20 3d20 7b0d 0a20 2020 2020 2020  del = {..       
-00016580: 2020 2020 2020 2020 2027 6d6f 6465 6c27           'model'
-00016590: 3a20 6c69 6e65 6172 5f6d 6f64 656c 2c0d  : linear_model,.
-000165a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000165b0: 2027 7265 6365 6e63 795f 7765 6967 6874   'recency_weight
-000165c0: 696e 6727 3a20 7265 6365 6e63 795f 7765  ing': recency_we
-000165d0: 6967 6874 696e 672c 0d0a 2020 2020 2020  ighting,..      
-000165e0: 2020 2020 2020 2020 2020 276d 6178 6974            'maxit
-000165f0: 6572 273a 2072 616e 646f 6d2e 6368 6f69  er': random.choi
-00016600: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-00016610: 2020 2020 2020 2020 2020 5b32 3530 2c20            [250, 
-00016620: 3530 3030 2c20 3135 3030 302c 2032 3530  5000, 15000, 250
-00016630: 3030 5d2c 205b 302e 322c 2030 2e36 2c20  00], [0.2, 0.6, 
-00016640: 302e 312c 2030 2e31 5d0d 0a20 2020 2020  0.1, 0.1]..     
-00016650: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-00016660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016670: 2020 276d 6574 686f 6427 3a20 7261 6e64    'method': rand
-00016680: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
-00016690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166a0: 205b 4e6f 6e65 2c20 274c 2d42 4647 532d   [None, 'L-BFGS-
-000166b0: 4227 2c20 274e 656c 6465 722d 4d65 6164  B', 'Nelder-Mead
-000166c0: 272c 2027 544e 4327 2c20 2750 6f77 656c  ', 'TNC', 'Powel
-000166d0: 6c27 5d2c 0d0a 2020 2020 2020 2020 2020  l'],..          
-000166e0: 2020 2020 2020 2020 2020 5b30 2e39 352c            [0.95,
-000166f0: 2030 2e30 322c 2030 2e30 322c 2030 2e30   0.02, 0.02, 0.0
-00016700: 322c 2030 2e30 325d 2c0d 0a20 2020 2020  2, 0.02],..     
-00016710: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-00016720: 0d0a 2020 2020 2020 2020 2020 2020 7d0d  ..            }.
-00016730: 0a20 2020 2020 2020 2065 6c69 6620 6c69  .        elif li
-00016740: 6e65 6172 5f6d 6f64 656c 203d 3d20 2262  near_model == "b
-00016750: 6179 6573 6961 6e5f 6c69 6e65 6172 223a  ayesian_linear":
-00016760: 0d0a 2020 2020 2020 2020 2020 2020 6c69  ..            li
-00016770: 6e65 6172 5f6d 6f64 656c 203d 207b 0d0a  near_model = {..
-00016780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016790: 276d 6f64 656c 273a 2022 6261 7965 7369  'model': "bayesi
-000167a0: 616e 5f6c 696e 6561 7222 2c0d 0a20 2020  an_linear",..   
-000167b0: 2020 2020 2020 2020 2020 2020 2027 616c               'al
-000167c0: 7068 6127 3a20 7261 6e64 6f6d 2e63 686f  pha': random.cho
-000167d0: 6963 6573 285b 312e 302c 2030 2e31 2c20  ices([1.0, 0.1, 
-000167e0: 3130 5d2c 205b 302e 382c 2030 2e31 2c20  10], [0.8, 0.1, 
-000167f0: 302e 315d 295b 305d 2c0d 0a20 2020 2020  0.1])[0],..     
-00016800: 2020 2020 2020 2020 2020 2027 6761 7573             'gaus
-00016810: 7369 616e 5f70 7269 6f72 5f6d 6561 6e27  sian_prior_mean'
-00016820: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-00016830: 285b 302c 2030 2e31 2c20 315d 2c20 5b30  ([0, 0.1, 1], [0
-00016840: 2e38 2c20 302e 3038 2c20 302e 3032 5d29  .8, 0.08, 0.02])
-00016850: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-00016860: 2020 2020 2020 2030 0d0a 2020 2020 2020         0..      
-00016870: 2020 2020 2020 2020 2020 5d2c 0d0a 2020            ],..  
-00016880: 2020 2020 2020 2020 2020 2020 2020 2777                'w
-00016890: 6973 6861 7274 5f70 7269 6f72 5f73 6361  ishart_prior_sca
-000168a0: 6c65 273a 2072 616e 646f 6d2e 6368 6f69  le': random.choi
-000168b0: 6365 7328 5b31 2e30 2c20 302e 312c 2031  ces([1.0, 0.1, 1
-000168c0: 305d 2c20 5b30 2e38 2c20 302e 312c 2030  0], [0.8, 0.1, 0
-000168d0: 2e31 5d29 5b0d 0a20 2020 2020 2020 2020  .1])[..         
-000168e0: 2020 2020 2020 2020 2020 2030 0d0a 2020             0..  
-000168f0: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
-00016900: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016910: 2020 2777 6973 6861 7274 5f64 6f66 5f65    'wishart_dof_e
-00016920: 7863 6573 7327 3a20 7261 6e64 6f6d 2e63  xcess': random.c
-00016930: 686f 6963 6573 285b 302c 2031 2c20 355d  hoices([0, 1, 5]
-00016940: 2c20 5b30 2e39 2c20 302e 3035 2c20 302e  , [0.9, 0.05, 0.
-00016950: 3035 5d29 5b30 5d2c 0d0a 2020 2020 2020  05])[0],..      
-00016960: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-00016970: 2069 6620 6d65 7468 6f64 203d 3d20 2272   if method == "r
-00016980: 6567 7265 7373 6f72 223a 0d0a 2020 2020  egressor":..    
-00016990: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
-000169a0: 7273 5f75 7365 6420 3d20 5472 7565 0d0a  rs_used = True..
-000169b0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000169c0: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-000169d0: 7373 6f72 735f 7573 6564 203d 2072 616e  ssors_used = ran
-000169e0: 646f 6d2e 6368 6f69 6365 7328 5b54 7275  dom.choices([Tru
-000169f0: 652c 2046 616c 7365 5d2c 205b 302e 352c  e, False], [0.5,
-00016a00: 2030 2e35 5d29 5b30 5d0d 0a20 2020 2020   0.5])[0]..     
-00016a10: 2020 2061 725f 6c61 6773 203d 2072 616e     ar_lags = ran
-00016a20: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00016a30: 2020 2020 2020 2020 2020 5b4e 6f6e 652c            [None,
-00016a40: 205b 315d 2c20 5b31 2c20 375d 2c20 5b37   [1], [1, 7], [7
-00016a50: 5d2c 205b 7365 6173 6f6e 616c 5f69 6e74  ], [seasonal_int
-00016a60: 2873 6d61 6c6c 3d54 7275 6529 5d5d 2c0d  (small=True)]],.
-00016a70: 0a20 2020 2020 2020 2020 2020 205b 302e  .            [0.
-00016a80: 392c 2030 2e30 3235 2c20 302e 3032 352c  9, 0.025, 0.025,
-00016a90: 2030 2e30 352c 2030 2e30 355d 2c0d 0a20   0.05, 0.05],.. 
-00016aa0: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
-00016ab0: 2020 2020 2061 725f 696e 7465 7261 6374       ar_interact
-00016ac0: 696f 6e5f 7365 6173 6f6e 616c 6974 7920  ion_seasonality 
-00016ad0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
-00016ae0: 6966 2061 725f 6c61 6773 2069 7320 6e6f  if ar_lags is no
-00016af0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00016b00: 2020 2020 2061 725f 696e 7465 7261 6374       ar_interact
-00016b10: 696f 6e5f 7365 6173 6f6e 616c 6974 7920  ion_seasonality 
-00016b20: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-00016b30: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00016b40: 2020 205b 4e6f 6e65 2c20 372c 2027 6461     [None, 7, 'da
-00016b50: 796f 6677 6565 6b27 2c20 2763 6f6d 6d6f  yofweek', 'commo
-00016b60: 6e5f 666f 7572 6965 7227 5d2c 205b 302e  n_fourier'], [0.
-00016b70: 342c 2030 2e32 2c20 302e 322c 2030 2e32  4, 0.2, 0.2, 0.2
-00016b80: 5d0d 0a20 2020 2020 2020 2020 2020 2029  ]..            )
-00016b90: 5b30 5d0d 0a20 2020 2020 2020 2073 6561  [0]..        sea
-00016ba0: 736f 6e61 6c69 7469 6573 203d 2072 616e  sonalities = ran
-00016bb0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00016bc0: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
-00016bd0: 2020 2020 2020 2020 2020 2020 205b 372c               [7,
-00016be0: 2033 3635 2e32 355d 2c0d 0a20 2020 2020   365.25],..     
-00016bf0: 2020 2020 2020 2020 2020 205b 2264 6179             ["day
-00016c00: 6f66 7765 656b 222c 2033 3635 2e32 355d  ofweek", 365.25]
-00016c10: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00016c20: 2020 205b 226d 6f6e 7468 222c 2022 6461     ["month", "da
-00016c30: 796f 6677 6565 6b22 2c20 2277 6565 6b64  yofweek", "weekd
-00016c40: 6179 6f66 6d6f 6e74 6822 5d2c 0d0a 2020  ayofmonth"],..  
-00016c50: 2020 2020 2020 2020 2020 2020 2020 5b27                ['
-00016c60: 7765 656b 6461 796f 666d 6f6e 7468 272c  weekdayofmonth',
-00016c70: 2027 636f 6d6d 6f6e 5f66 6f75 7269 6572   'common_fourier
-00016c80: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
-00016c90: 2020 2020 205b 2273 696d 706c 655f 6269       ["simple_bi
-00016ca0: 6e61 7269 7a65 6422 5d2c 0d0a 2020 2020  narized"],..    
-00016cb0: 2020 2020 2020 2020 2020 2020 226f 7468              "oth
-00016cc0: 6572 222c 0d0a 2020 2020 2020 2020 2020  er",..          
-00016cd0: 2020 5d2c 0d0a 2020 2020 2020 2020 2020    ],..          
-00016ce0: 2020 5b30 2e31 2c20 302e 312c 2030 2e31    [0.1, 0.1, 0.1
-00016cf0: 2c20 302e 3035 2c20 302e 312c 2030 2e31  , 0.05, 0.1, 0.1
-00016d00: 5d2c 0d0a 2020 2020 2020 2020 295b 305d  ],..        )[0]
-00016d10: 0d0a 2020 2020 2020 2020 6966 2073 6561  ..        if sea
-00016d20: 736f 6e61 6c69 7469 6573 203d 3d20 226f  sonalities == "o
-00016d30: 7468 6572 223a 0d0a 2020 2020 2020 2020  ther":..        
-00016d40: 2020 2020 7072 6564 6566 696e 6564 203d      predefined =
-00016d50: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00016d60: 5b54 7275 652c 2046 616c 7365 5d2c 205b  [True, False], [
-00016d70: 302e 352c 2030 2e35 5d29 5b30 5d0d 0a20  0.5, 0.5])[0].. 
-00016d80: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
-00016d90: 6564 6566 696e 6564 3a0d 0a20 2020 2020  edefined:..     
-00016da0: 2020 2020 2020 2020 2020 2073 6561 736f             seaso
-00016db0: 6e61 6c69 7469 6573 203d 205b 7261 6e64  nalities = [rand
-00016dc0: 6f6d 2e63 686f 6963 6528 6461 7465 5f70  om.choice(date_p
-00016dd0: 6172 745f 6d65 7468 6f64 7329 5d0d 0a20  art_methods)].. 
-00016de0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00016df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016e00: 2020 636f 6d70 5f6f 7074 7320 3d20 6461    comp_opts = da
-00016e10: 7465 7061 7274 5f63 6f6d 706f 6e65 6e74  tepart_component
-00016e20: 7320 2b20 5b37 2c20 3336 352e 3235 2c20  s + [7, 365.25, 
-00016e30: 3132 5d0d 0a20 2020 2020 2020 2020 2020  12]..           
-00016e40: 2020 2020 2073 6561 736f 6e61 6c69 7469       seasonaliti
-00016e50: 6573 203d 2072 616e 646f 6d2e 6368 6f69  es = random.choi
-00016e60: 6365 7328 636f 6d70 5f6f 7074 732c 206b  ces(comp_opts, k
-00016e70: 3d32 290d 0a20 2020 2020 2020 2072 6574  =2)..        ret
-00016e80: 7572 6e20 7b0d 0a20 2020 2020 2020 2020  urn {..         
-00016e90: 2020 2022 7072 6570 726f 6365 7373 696e     "preprocessin
-00016ea0: 675f 7472 616e 7366 6f72 6d61 7469 6f6e  g_transformation
-00016eb0: 223a 2052 616e 646f 6d54 7261 6e73 666f  ": RandomTransfo
-00016ec0: 726d 280d 0a20 2020 2020 2020 2020 2020  rm(..           
-00016ed0: 2020 2020 2074 7261 6e73 666f 726d 6572       transformer
-00016ee0: 5f6c 6973 743d 7375 7065 7266 6173 745f  _list=superfast_
-00016ef0: 7472 616e 7366 6f72 6d65 725f 6469 6374  transformer_dict
-00016f00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00016f10: 2020 2074 7261 6e73 666f 726d 6572 5f6d     transformer_m
-00016f20: 6178 5f64 6570 7468 3d32 2c0d 0a20 2020  ax_depth=2,..   
-00016f30: 2020 2020 2020 2020 2020 2020 2061 6c6c               all
-00016f40: 6f77 5f6e 6f6e 653d 5472 7565 2c0d 0a20  ow_none=True,.. 
-00016f50: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
-00016f60: 2020 2020 2020 2020 2020 2022 7363 616c             "scal
-00016f70: 696e 6722 3a20 7363 616c 696e 672c 0d0a  ing": scaling,..
-00016f80: 2020 2020 2020 2020 2020 2020 2320 2270              # "p
-00016f90: 6173 745f 696d 7061 6374 735f 696e 7465  ast_impacts_inte
-00016fa0: 7276 656e 7469 6f6e 223a 2073 656c 662e  rvention": self.
-00016fb0: 7061 7374 5f69 6d70 6163 7473 5f69 6e74  past_impacts_int
-00016fc0: 6572 7665 6e74 696f 6e2c 0d0a 2020 2020  ervention,..    
-00016fd0: 2020 2020 2020 2020 2273 6561 736f 6e61          "seasona
-00016fe0: 6c69 7469 6573 223a 2073 6561 736f 6e61  lities": seasona
-00016ff0: 6c69 7469 6573 2c0d 0a20 2020 2020 2020  lities,..       
-00017000: 2020 2020 2022 6172 5f6c 6167 7322 3a20       "ar_lags": 
-00017010: 6172 5f6c 6167 732c 0d0a 2020 2020 2020  ar_lags,..      
-00017020: 2020 2020 2020 2261 725f 696e 7465 7261        "ar_intera
-00017030: 6374 696f 6e5f 7365 6173 6f6e 616c 6974  ction_seasonalit
-00017040: 7922 3a20 6172 5f69 6e74 6572 6163 7469  y": ar_interacti
-00017050: 6f6e 5f73 6561 736f 6e61 6c69 7479 2c0d  on_seasonality,.
-00017060: 0a20 2020 2020 2020 2020 2020 2022 616e  .            "an
-00017070: 6f6d 616c 795f 6465 7465 6374 6f72 5f70  omaly_detector_p
-00017080: 6172 616d 7322 3a20 616e 6f6d 616c 795f  arams": anomaly_
-00017090: 6465 7465 6374 6f72 5f70 6172 616d 732c  detector_params,
-000170a0: 0d0a 2020 2020 2020 2020 2020 2020 2261  ..            "a
-000170b0: 6e6f 6d61 6c79 5f69 6e74 6572 7665 6e74  nomaly_intervent
-000170c0: 696f 6e22 3a20 616e 6f6d 616c 795f 696e  ion": anomaly_in
-000170d0: 7465 7276 656e 7469 6f6e 2c0d 0a20 2020  tervention,..   
-000170e0: 2020 2020 2020 2020 2022 686f 6c69 6461           "holida
-000170f0: 795f 6465 7465 6374 6f72 5f70 6172 616d  y_detector_param
-00017100: 7322 3a20 686f 6c69 6461 795f 7061 7261  s": holiday_para
-00017110: 6d73 2c0d 0a20 2020 2020 2020 2020 2020  ms,..           
-00017120: 2023 2022 686f 6c69 6461 795f 636f 756e   # "holiday_coun
-00017130: 7472 6965 7322 3a20 7365 6c66 2e68 6f6c  tries": self.hol
-00017140: 6964 6179 5f63 6f75 6e74 7269 6573 2c0d  iday_countries,.
-00017150: 0a20 2020 2020 2020 2020 2020 2022 686f  .            "ho
-00017160: 6c69 6461 795f 636f 756e 7472 6965 735f  liday_countries_
-00017170: 7573 6564 223a 2072 616e 646f 6d2e 6368  used": random.ch
-00017180: 6f69 6365 7328 5b54 7275 652c 2046 616c  oices([True, Fal
-00017190: 7365 5d2c 205b 302e 352c 2030 2e35 5d29  se], [0.5, 0.5])
-000171a0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-000171b0: 2020 226d 756c 7469 7661 7269 6174 655f    "multivariate_
-000171c0: 6665 6174 7572 6522 3a20 7261 6e64 6f6d  feature": random
-000171d0: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
-000171e0: 2020 2020 2020 2020 2020 205b 4e6f 6e65             [None
-000171f0: 2c20 2266 6561 7475 7265 5f61 6767 6c6f  , "feature_agglo
-00017200: 6d65 7261 7469 6f6e 222c 2027 6772 6f75  meration", 'grou
-00017210: 705f 6176 6572 6167 6527 2c20 276f 7363  p_average', 'osc
-00017220: 696c 6c61 746f 7227 5d2c 0d0a 2020 2020  illator'],..    
-00017230: 2020 2020 2020 2020 2020 2020 5b30 2e39              [0.9
-00017240: 2c20 302e 312c 2030 2e31 2c20 302e 305d  , 0.1, 0.1, 0.0]
-00017250: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-00017260: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-00017270: 2020 226d 756c 7469 7661 7269 6174 655f    "multivariate_
-00017280: 7472 616e 7366 6f72 6d61 7469 6f6e 223a  transformation":
-00017290: 2052 616e 646f 6d54 7261 6e73 666f 726d   RandomTransform
-000172a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000172b0: 2020 2074 7261 6e73 666f 726d 6572 5f6c     transformer_l
-000172c0: 6973 743d 2266 6173 7422 2c0d 0a20 2020  ist="fast",..   
-000172d0: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-000172e0: 6e73 666f 726d 6572 5f6d 6178 5f64 6570  nsformer_max_dep
-000172f0: 7468 3d33 2c20 2023 2070 726f 6261 626c  th=3,  # probabl
-00017300: 7920 7761 6e74 2073 6f6d 6520 6d6f 7265  y want some more
-00017310: 2075 7361 626c 6520 6465 6661 756c 7473   usable defaults
-00017320: 2066 6972 7374 2061 7320 6d61 6e79 2072   first as many r
-00017330: 616e 646f 6d20 6172 6520 7365 6e73 656c  andom are sensel
-00017340: 6573 730d 0a20 2020 2020 2020 2020 2020  ess..           
-00017350: 2029 2c0d 0a20 2020 2020 2020 2020 2020   ),..           
-00017360: 2022 7265 6772 6573 736f 725f 7472 616e   "regressor_tran
-00017370: 7366 6f72 6d61 7469 6f6e 223a 2052 616e  sformation": Ran
-00017380: 646f 6d54 7261 6e73 666f 726d 280d 0a20  domTransform(.. 
-00017390: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000173a0: 7261 6e73 666f 726d 6572 5f6c 6973 743d  ransformer_list=
-000173b0: 7b2a 2a73 6361 6c65 7273 2c20 2a2a 6465  {**scalers, **de
-000173c0: 636f 6d70 6f73 6974 696f 6e73 7d2c 0d0a  compositions},..
-000173d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000173e0: 7472 616e 7366 6f72 6d65 725f 6d61 785f  transformer_max_
-000173f0: 6465 7074 683d 312c 0d0a 2020 2020 2020  depth=1,..      
-00017400: 2020 2020 2020 2020 2020 616c 6c6f 775f            allow_
-00017410: 6e6f 6e65 3d46 616c 7365 2c0d 0a20 2020  none=False,..   
-00017420: 2020 2020 2020 2020 2020 2020 206e 6f5f               no_
-00017430: 6e61 6e5f 6669 6c6c 3d46 616c 7365 2c20  nan_fill=False, 
-00017440: 2023 2070 726f 6261 626c 7920 7761 6e74   # probably want
-00017450: 2073 6f6d 6520 6d6f 7265 2075 7361 626c   some more usabl
-00017460: 6520 6465 6661 756c 7473 2066 6972 7374  e defaults first
-00017470: 2061 7320 6d61 6e79 2072 616e 646f 6d20   as many random 
-00017480: 6172 6520 7365 6e73 656c 6573 730d 0a20  are senseless.. 
-00017490: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
-000174a0: 2020 2020 2020 2020 2020 2022 7265 6772             "regr
-000174b0: 6573 736f 7273 5f75 7365 6422 3a20 7265  essors_used": re
-000174c0: 6772 6573 736f 7273 5f75 7365 642c 0d0a  gressors_used,..
-000174d0: 2020 2020 2020 2020 2020 2020 226c 696e              "lin
-000174e0: 6561 725f 6d6f 6465 6c22 3a20 6c69 6e65  ear_model": line
-000174f0: 6172 5f6d 6f64 656c 2c0d 0a20 2020 2020  ar_model,..     
-00017500: 2020 2020 2020 2022 7261 6e64 6f6d 7761         "randomwa
-00017510: 6c6b 5f6e 223a 2072 616e 646f 6d2e 6368  lk_n": random.ch
-00017520: 6f69 6365 7328 5b4e 6f6e 652c 2031 305d  oices([None, 10]
-00017530: 2c20 5b30 2e35 2c20 302e 355d 295b 305d  , [0.5, 0.5])[0]
-00017540: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00017550: 7472 656e 645f 7769 6e64 6f77 223a 2072  trend_window": r
-00017560: 616e 646f 6d2e 6368 6f69 6365 7328 5b33  andom.choices([3
-00017570: 2c20 3135 2c20 3930 2c20 3336 355d 2c20  , 15, 90, 365], 
-00017580: 5b30 2e32 2c20 302e 322c 2030 2e32 2c20  [0.2, 0.2, 0.2, 
-00017590: 302e 325d 295b 305d 2c0d 0a20 2020 2020  0.2])[0],..     
-000175a0: 2020 2020 2020 2022 7472 656e 645f 7374         "trend_st
-000175b0: 616e 6469 6e22 3a20 7261 6e64 6f6d 2e63  andin": random.c
-000175c0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-000175d0: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
-000175e0: 2772 616e 646f 6d5f 6e6f 726d 616c 272c  'random_normal',
-000175f0: 2027 726f 6c6c 696e 675f 7472 656e 6427   'rolling_trend'
-00017600: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00017610: 2020 2020 5b30 2e37 2c20 302e 332c 2030      [0.7, 0.3, 0
-00017620: 2e31 5d2c 0d0a 2020 2020 2020 2020 2020  .1],..          
-00017630: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
-00017640: 2020 2020 2022 7472 656e 645f 616e 6f6d       "trend_anom
-00017650: 616c 795f 6465 7465 6374 6f72 5f70 6172  aly_detector_par
-00017660: 616d 7322 3a20 7472 656e 645f 616e 6f6d  ams": trend_anom
-00017670: 616c 795f 6465 7465 6374 6f72 5f70 6172  aly_detector_par
-00017680: 616d 732c 0d0a 2020 2020 2020 2020 2020  ams,..          
-00017690: 2020 2320 2274 7265 6e64 5f61 6e6f 6d61    # "trend_anoma
-000176a0: 6c79 5f69 6e74 6572 7665 6e74 696f 6e22  ly_intervention"
-000176b0: 3a20 7472 656e 645f 616e 6f6d 616c 795f  : trend_anomaly_
-000176c0: 696e 7465 7276 656e 7469 6f6e 2c0d 0a20  intervention,.. 
-000176d0: 2020 2020 2020 2020 2020 2022 7472 656e             "tren
-000176e0: 645f 7472 616e 7366 6f72 6d61 7469 6f6e  d_transformation
-000176f0: 223a 2074 7265 6e64 5f74 7261 6e73 666f  ": trend_transfo
-00017700: 726d 6174 696f 6e2c 0d0a 2020 2020 2020  rmation,..      
-00017710: 2020 2020 2020 2274 7265 6e64 5f6d 6f64        "trend_mod
-00017720: 656c 223a 2074 7265 6e64 5f6d 6f64 656c  el": trend_model
-00017730: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00017740: 7472 656e 645f 7068 6922 3a20 7261 6e64  trend_phi": rand
-00017750: 6f6d 2e63 686f 6963 6573 285b 4e6f 6e65  om.choices([None
-00017760: 2c20 302e 3938 5d2c 205b 302e 392c 2030  , 0.98], [0.9, 0
-00017770: 2e31 5d29 5b30 5d2c 0d0a 2020 2020 2020  .1])[0],..      
-00017780: 2020 7d0d 0a0d 0a20 2020 2064 6566 2067    }....    def g
-00017790: 6574 5f70 6172 616d 7328 7365 6c66 293a  et_params(self):
-000177a0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000177b0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-000177c0: 2270 7265 7072 6f63 6573 7369 6e67 5f74  "preprocessing_t
-000177d0: 7261 6e73 666f 726d 6174 696f 6e22 3a20  ransformation": 
-000177e0: 7365 6c66 2e70 7265 7072 6f63 6573 7369  self.preprocessi
-000177f0: 6e67 5f74 7261 6e73 666f 726d 6174 696f  ng_transformatio
-00017800: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-00017810: 2273 6361 6c69 6e67 223a 2073 656c 662e  "scaling": self.
-00017820: 7363 616c 696e 672c 0d0a 2020 2020 2020  scaling,..      
-00017830: 2020 2020 2020 2270 6173 745f 696d 7061        "past_impa
-00017840: 6374 735f 696e 7465 7276 656e 7469 6f6e  cts_intervention
-00017850: 223a 2073 656c 662e 7061 7374 5f69 6d70  ": self.past_imp
-00017860: 6163 7473 5f69 6e74 6572 7665 6e74 696f  acts_interventio
-00017870: 6e2c 2020 2320 6e6f 7420 696e 206e 6577  n,  # not in new
-00017880: 0d0a 2020 2020 2020 2020 2020 2020 2273  ..            "s
-00017890: 6561 736f 6e61 6c69 7469 6573 223a 2073  easonalities": s
-000178a0: 656c 662e 7365 6173 6f6e 616c 6974 6965  elf.seasonalitie
-000178b0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-000178c0: 2261 725f 6c61 6773 223a 2073 656c 662e  "ar_lags": self.
-000178d0: 6172 5f6c 6167 732c 0d0a 2020 2020 2020  ar_lags,..      
-000178e0: 2020 2020 2020 2261 725f 696e 7465 7261        "ar_intera
-000178f0: 6374 696f 6e5f 7365 6173 6f6e 616c 6974  ction_seasonalit
-00017900: 7922 3a20 7365 6c66 2e61 725f 696e 7465  y": self.ar_inte
-00017910: 7261 6374 696f 6e5f 7365 6173 6f6e 616c  raction_seasonal
-00017920: 6974 790d 0a20 2020 2020 2020 2020 2020  ity..           
-00017930: 2069 6620 7365 6c66 2e61 725f 6c61 6773   if self.ar_lags
-00017940: 2069 7320 6e6f 7420 4e6f 6e65 0d0a 2020   is not None..  
-00017950: 2020 2020 2020 2020 2020 656c 7365 204e            else N
-00017960: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
-00017970: 2020 2261 6e6f 6d61 6c79 5f64 6574 6563    "anomaly_detec
-00017980: 746f 725f 7061 7261 6d73 223a 2073 656c  tor_params": sel
-00017990: 662e 616e 6f6d 616c 795f 6465 7465 6374  f.anomaly_detect
-000179a0: 6f72 5f70 6172 616d 732c 0d0a 2020 2020  or_params,..    
-000179b0: 2020 2020 2020 2020 2261 6e6f 6d61 6c79          "anomaly
-000179c0: 5f69 6e74 6572 7665 6e74 696f 6e22 3a20  _intervention": 
-000179d0: 7365 6c66 2e61 6e6f 6d61 6c79 5f69 6e74  self.anomaly_int
-000179e0: 6572 7665 6e74 696f 6e2c 0d0a 2020 2020  ervention,..    
-000179f0: 2020 2020 2020 2020 2268 6f6c 6964 6179          "holiday
-00017a00: 5f64 6574 6563 746f 725f 7061 7261 6d73  _detector_params
-00017a10: 223a 2073 656c 662e 686f 6c69 6461 795f  ": self.holiday_
-00017a20: 6465 7465 6374 6f72 5f70 6172 616d 732c  detector_params,
-00017a30: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00017a40: 2268 6f6c 6964 6179 5f69 6e74 6572 7665  "holiday_interve
-00017a50: 6e74 696f 6e22 3a20 7365 6c66 2e68 6f6c  ntion": self.hol
-00017a60: 6964 6179 5f69 6e74 6572 7665 6e74 696f  iday_interventio
-00017a70: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-00017a80: 2320 2268 6f6c 6964 6179 5f63 6f75 6e74  # "holiday_count
-00017a90: 7269 6573 223a 2073 656c 662e 686f 6c69  ries": self.holi
-00017aa0: 6461 795f 636f 756e 7472 6965 732c 0d0a  day_countries,..
-00017ab0: 2020 2020 2020 2020 2020 2020 2268 6f6c              "hol
-00017ac0: 6964 6179 5f63 6f75 6e74 7269 6573 5f75  iday_countries_u
-00017ad0: 7365 6422 3a20 7365 6c66 2e68 6f6c 6964  sed": self.holid
-00017ae0: 6179 5f63 6f75 6e74 7269 6573 5f75 7365  ay_countries_use
-00017af0: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
-00017b00: 226d 756c 7469 7661 7269 6174 655f 6665  "multivariate_fe
-00017b10: 6174 7572 6522 3a20 7365 6c66 2e6d 756c  ature": self.mul
-00017b20: 7469 7661 7269 6174 655f 6665 6174 7572  tivariate_featur
-00017b30: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00017b40: 226d 756c 7469 7661 7269 6174 655f 7472  "multivariate_tr
-00017b50: 616e 7366 6f72 6d61 7469 6f6e 223a 2073  ansformation": s
-00017b60: 656c 662e 6d75 6c74 6976 6172 6961 7465  elf.multivariate
-00017b70: 5f74 7261 6e73 666f 726d 6174 696f 6e0d  _transformation.
-00017b80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00017b90: 7365 6c66 2e6d 756c 7469 7661 7269 6174  self.multivariat
-00017ba0: 655f 6665 6174 7572 6520 6973 206e 6f74  e_feature is not
-00017bb0: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-00017bc0: 2020 2065 6c73 6520 4e6f 6e65 2c0d 0a20     else None,.. 
-00017bd0: 2020 2020 2020 2020 2020 2022 7265 6772             "regr
-00017be0: 6573 736f 725f 7472 616e 7366 6f72 6d61  essor_transforma
-00017bf0: 7469 6f6e 223a 2073 656c 662e 7265 6772  tion": self.regr
-00017c00: 6573 736f 725f 7472 616e 7366 6f72 6d61  essor_transforma
-00017c10: 7469 6f6e 0d0a 2020 2020 2020 2020 2020  tion..          
-00017c20: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
-00017c30: 736f 7273 5f75 7365 640d 0a20 2020 2020  sors_used..     
-00017c40: 2020 2020 2020 2065 6c73 6520 4e6f 6e65         else None
-00017c50: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00017c60: 7265 6772 6573 736f 7273 5f75 7365 6422  regressors_used"
-00017c70: 3a20 7365 6c66 2e72 6567 7265 7373 6f72  : self.regressor
-00017c80: 735f 7573 6564 2c0d 0a20 2020 2020 2020  s_used,..       
-00017c90: 2020 2020 2022 6c69 6e65 6172 5f6d 6f64       "linear_mod
-00017ca0: 656c 223a 2073 656c 662e 6c69 6e65 6172  el": self.linear
-00017cb0: 5f6d 6f64 656c 2c0d 0a20 2020 2020 2020  _model,..       
-00017cc0: 2020 2020 2022 7261 6e64 6f6d 7761 6c6b       "randomwalk
-00017cd0: 5f6e 223a 2073 656c 662e 7261 6e64 6f6d  _n": self.random
-00017ce0: 7761 6c6b 5f6e 2c0d 0a20 2020 2020 2020  walk_n,..       
-00017cf0: 2020 2020 2022 7472 656e 645f 7769 6e64       "trend_wind
-00017d00: 6f77 223a 2073 656c 662e 7472 656e 645f  ow": self.trend_
-00017d10: 7769 6e64 6f77 2c0d 0a20 2020 2020 2020  window,..       
-00017d20: 2020 2020 2022 7472 656e 645f 7374 616e       "trend_stan
-00017d30: 6469 6e22 3a20 7365 6c66 2e74 7265 6e64  din": self.trend
-00017d40: 5f73 7461 6e64 696e 2c0d 0a20 2020 2020  _standin,..     
-00017d50: 2020 2020 2020 2022 7472 656e 645f 616e         "trend_an
-00017d60: 6f6d 616c 795f 6465 7465 6374 6f72 5f70  omaly_detector_p
-00017d70: 6172 616d 7322 3a20 7365 6c66 2e74 7265  arams": self.tre
-00017d80: 6e64 5f61 6e6f 6d61 6c79 5f64 6574 6563  nd_anomaly_detec
-00017d90: 746f 725f 7061 7261 6d73 2c0d 0a20 2020  tor_params,..   
-00017da0: 2020 2020 2020 2020 2023 2022 7472 656e           # "tren
-00017db0: 645f 616e 6f6d 616c 795f 696e 7465 7276  d_anomaly_interv
-00017dc0: 656e 7469 6f6e 223a 2073 656c 662e 7472  ention": self.tr
-00017dd0: 656e 645f 616e 6f6d 616c 795f 696e 7465  end_anomaly_inte
-00017de0: 7276 656e 7469 6f6e 2c0d 0a20 2020 2020  rvention,..     
-00017df0: 2020 2020 2020 2022 7472 656e 645f 7472         "trend_tr
-00017e00: 616e 7366 6f72 6d61 7469 6f6e 223a 2073  ansformation": s
-00017e10: 656c 662e 7472 656e 645f 7472 616e 7366  elf.trend_transf
-00017e20: 6f72 6d61 7469 6f6e 2c0d 0a20 2020 2020  ormation,..     
-00017e30: 2020 2020 2020 2022 7472 656e 645f 6d6f         "trend_mo
-00017e40: 6465 6c22 3a20 7365 6c66 2e74 7265 6e64  del": self.trend
-00017e50: 5f6d 6f64 656c 2c0d 0a20 2020 2020 2020  _model,..       
-00017e60: 2020 2020 2022 7472 656e 645f 7068 6922       "trend_phi"
-00017e70: 3a20 7365 6c66 2e74 7265 6e64 5f70 6869  : self.trend_phi
-00017e80: 2c0d 0a20 2020 2020 2020 2020 2020 2023  ,..            #
-00017e90: 2022 636f 6e73 7472 6169 6e74 223a 2073   "constraint": s
-00017ea0: 656c 662e 636f 6e73 7472 6169 6e74 2c0d  elf.constraint,.
-00017eb0: 0a20 2020 2020 2020 207d 0d0a 0d0a 2020  .        }....  
-00017ec0: 2020 6465 6620 706c 6f74 5f63 6f6d 706f    def plot_compo
-00017ed0: 6e65 6e74 7328 0d0a 2020 2020 2020 2020  nents(..        
-00017ee0: 7365 6c66 2c0d 0a20 2020 2020 2020 2070  self,..        p
-00017ef0: 7265 6469 6374 696f 6e3d 4e6f 6e65 2c0d  rediction=None,.
-00017f00: 0a20 2020 2020 2020 2073 6572 6965 733d  .        series=
-00017f10: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2066  None,..        f
-00017f20: 6967 7369 7a65 3d28 3136 2c20 3929 2c0d  igsize=(16, 9),.
-00017f30: 0a20 2020 2020 2020 2074 6f5f 6f72 6967  .        to_orig
-00017f40: 696e 5f73 7061 6365 3d54 7275 652c 0d0a  in_space=True,..
-00017f50: 2020 2020 2020 2020 7469 746c 653d 4e6f          title=No
-00017f60: 6e65 2c0d 0a20 2020 2020 2020 2073 7461  ne,..        sta
-00017f70: 7274 5f64 6174 653d 4e6f 6e65 2c0d 0a20  rt_date=None,.. 
-00017f80: 2020 2029 3a0d 0a20 2020 2020 2020 2069     ):..        i
-00017f90: 6620 7365 7269 6573 2069 7320 4e6f 6e65  f series is None
-00017fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00017fb0: 6572 6965 7320 3d20 7261 6e64 6f6d 2e63  eries = random.c
-00017fc0: 686f 6963 6528 7365 6c66 2e63 6f6c 756d  hoice(self.colum
-00017fd0: 6e5f 6e61 6d65 7329 0d0a 2020 2020 2020  n_names)..      
-00017fe0: 2020 6966 2074 6974 6c65 2069 7320 4e6f    if title is No
-00017ff0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00018000: 2074 6974 6c65 203d 2066 224d 6f64 656c   title = f"Model
-00018010: 2043 6f6d 706f 6e65 6e74 7320 666f 7220   Components for 
-00018020: 7b73 6572 6965 737d 220d 0a20 2020 2020  {series}"..     
-00018030: 2020 2070 6c6f 745f 6c69 7374 203d 205b     plot_list = [
-00018040: 5d0d 0a20 2020 2020 2020 2069 6620 7072  ]..        if pr
-00018050: 6564 6963 7469 6f6e 2069 7320 6e6f 7420  ediction is not 
-00018060: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00018070: 2020 2070 6c6f 745f 6c69 7374 2e61 7070     plot_list.app
-00018080: 656e 6428 7072 6564 6963 7469 6f6e 2e66  end(prediction.f
-00018090: 6f72 6563 6173 745b 7365 7269 6573 5d2e  orecast[series].
-000180a0: 7265 6e61 6d65 2822 666f 7265 6361 7374  rename("forecast
-000180b0: 2229 290d 0a20 2020 2020 2020 2020 2020  "))..           
-000180c0: 2070 6c74 5f69 6478 203d 2070 7265 6469   plt_idx = predi
-000180d0: 6374 696f 6e2e 666f 7265 6361 7374 2e69  ction.forecast.i
-000180e0: 6e64 6578 0d0a 2020 2020 2020 2020 656c  ndex..        el
-000180f0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00018100: 2070 6c74 5f69 6478 203d 204e 6f6e 650d   plt_idx = None.
-00018110: 0a20 2020 2020 2020 2070 6c6f 745f 6c69  .        plot_li
-00018120: 7374 2e61 7070 656e 6428 7365 6c66 2e70  st.append(self.p
-00018130: 7265 6469 6374 6564 5f74 7265 6e64 5b73  redicted_trend[s
-00018140: 6572 6965 735d 2e72 656e 616d 6528 2274  eries].rename("t
-00018150: 7265 6e64 2229 290d 0a20 2020 2020 2020  rend"))..       
-00018160: 2069 6620 7365 6c66 2e69 6d70 6163 7473   if self.impacts
-00018170: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00018180: 2020 2020 2020 2020 2020 2070 6c6f 745f             plot_
-00018190: 6c69 7374 2e61 7070 656e 6428 2873 656c  list.append((sel
-000181a0: 662e 696d 7061 6374 735b 7365 7269 6573  f.impacts[series
-000181b0: 5d2e 7265 6e61 6d65 2822 696d 7061 6374  ].rename("impact
-000181c0: 2025 2229 202d 2031 2e30 2920 2a20 3130   %") - 1.0) * 10
-000181d0: 3029 0d0a 2020 2020 2020 2020 6966 2070  0)..        if p
-000181e0: 6c74 5f69 6478 2069 7320 4e6f 6e65 3a0d  lt_idx is None:.
-000181f0: 0a20 2020 2020 2020 2020 2020 2070 6c6f  .            plo
-00018200: 745f 6c69 7374 2e61 7070 656e 6428 0d0a  t_list.append(..
-00018210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018220: 7365 6c66 2e70 726f 6365 7373 5f63 6f6d  self.process_com
-00018230: 706f 6e65 6e74 7328 746f 5f6f 7269 6769  ponents(to_origi
-00018240: 6e5f 7370 6163 653d 746f 5f6f 7269 6769  n_space=to_origi
-00018250: 6e5f 7370 6163 6529 5b73 6572 6965 735d  n_space)[series]
-00018260: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00018270: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00018280: 2020 2020 2020 2020 2020 2020 706c 6f74              plot
-00018290: 5f6c 6973 742e 6170 7065 6e64 280d 0a20  _list.append(.. 
-000182a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000182b0: 656c 662e 7072 6f63 6573 735f 636f 6d70  elf.process_comp
-000182c0: 6f6e 656e 7473 2874 6f5f 6f72 6967 696e  onents(to_origin
-000182d0: 5f73 7061 6365 3d74 6f5f 6f72 6967 696e  _space=to_origin
-000182e0: 5f73 7061 6365 295b 7365 7269 6573 5d2e  _space)[series].
-000182f0: 6c6f 635b 0d0a 2020 2020 2020 2020 2020  loc[..          
-00018300: 2020 2020 2020 2020 2020 706c 745f 6964            plt_id
-00018310: 780d 0a20 2020 2020 2020 2020 2020 2020  x..             
-00018320: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
-00018330: 2020 290d 0a20 2020 2020 2020 2070 6c6f    )..        plo
-00018340: 745f 6466 203d 2070 642e 636f 6e63 6174  t_df = pd.concat
-00018350: 2870 6c6f 745f 6c69 7374 2c20 6178 6973  (plot_list, axis
-00018360: 3d31 290d 0a20 2020 2020 2020 2069 6620  =1)..        if 
-00018370: 7374 6172 745f 6461 7465 2069 7320 6e6f  start_date is no
-00018380: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-00018390: 2020 2020 2069 6620 7374 6172 745f 6461       if start_da
-000183a0: 7465 203d 3d20 2261 7574 6f22 3a0d 0a20  te == "auto":.. 
-000183b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000183c0: 6c6f 745f 6466 203d 2070 6c6f 745f 6466  lot_df = plot_df
-000183d0: 2e69 6c6f 635b 2d28 7072 6564 6963 7469  .iloc[-(predicti
-000183e0: 6f6e 2e66 6f72 6563 6173 745f 6c65 6e67  on.forecast_leng
-000183f0: 7468 202a 2033 2920 3a5d 0d0a 2020 2020  th * 3) :]..    
-00018400: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00018410: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00018420: 6c6f 745f 6466 203d 2070 6c6f 745f 6466  lot_df = plot_df
-00018430: 5b70 6c6f 745f 6466 2e69 6e64 6578 203e  [plot_df.index >
-00018440: 3d20 7374 6172 745f 6461 7465 5d0d 0a20  = start_date].. 
-00018450: 2020 2020 2020 2072 6574 7572 6e20 706c         return pl
-00018460: 6f74 5f64 662e 706c 6f74 2873 7562 706c  ot_df.plot(subpl
-00018470: 6f74 733d 5472 7565 2c20 6669 6773 697a  ots=True, figsiz
-00018480: 653d 6669 6773 697a 652c 2074 6974 6c65  e=figsize, title
-00018490: 3d74 6974 6c65 290d 0a0d 0a20 2020 2064  =title)....    d
-000184a0: 6566 2072 6574 7572 6e5f 636f 6d70 6f6e  ef return_compon
-000184b0: 656e 7473 2873 656c 662c 2074 6f5f 6f72  ents(self, to_or
-000184c0: 6967 696e 5f73 7061 6365 3d54 7275 652c  igin_space=True,
-000184d0: 2069 6e63 6c75 6465 5f69 6d70 6163 7473   include_impacts
-000184e0: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-000184f0: 2020 2222 2252 6574 7572 6e20 6164 6469    """Return addi
-00018500: 7469 7665 2065 6c65 6d65 6e74 7320 6f66  tive elements of
-00018510: 2066 6f72 6563 6173 742c 206c 696e 6561   forecast, linea
-00018520: 7220 616e 6420 7472 656e 642e 2049 6620  r and trend. If 
-00018530: 696d 7061 6374 7320 696e 636c 7564 6564  impacts included
-00018540: 2c20 6974 2069 7320 6120 6d75 6c74 6970  , it is a multip
-00018550: 6c69 6361 7469 7665 2074 6572 6d2e 0d0a  licative term...
-00018560: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
-00018570: 0a20 2020 2020 2020 2020 2020 2074 6f5f  .            to_
-00018580: 6f72 6967 696e 5f73 7061 6365 2028 626f  origin_space (bo
-00018590: 6f6c 2920 6966 2046 616c 7365 2c20 7769  ol) if False, wi
-000185a0: 6c6c 206e 6f74 2072 6576 6572 7365 2074  ll not reverse t
-000185b0: 7261 6e73 666f 726d 206c 696e 6561 7220  ransform linear 
-000185c0: 636f 6d70 6f6e 656e 7473 0d0a 2020 2020  components..    
-000185d0: 2020 2020 2020 2020 696e 636c 7564 655f          include_
-000185e0: 696d 7061 6374 7320 2862 6f6f 6c29 2069  impacts (bool) i
-000185f0: 6620 5472 7565 2c20 696d 7061 6374 7320  f True, impacts 
-00018600: 6172 6520 696e 636c 7564 6564 2069 6e20  are included in 
-00018610: 7468 6520 7265 7475 726e 6564 2064 6174  the returned dat
-00018620: 6166 7261 6d65 0d0a 2020 2020 2020 2020  aframe..        
-00018630: 2222 220d 0a20 2020 2020 2020 2070 6c6f  """..        plo
-00018640: 745f 6c69 7374 203d 205b 5d0d 0a20 2020  t_list = []..   
-00018650: 2020 2020 2070 6c6f 745f 6c69 7374 2e61       plot_list.a
-00018660: 7070 656e 6428 7365 6c66 2e70 726f 6365  ppend(self.proce
-00018670: 7373 5f63 6f6d 706f 6e65 6e74 7328 746f  ss_components(to
-00018680: 5f6f 7269 6769 6e5f 7370 6163 653d 746f  _origin_space=to
-00018690: 5f6f 7269 6769 6e5f 7370 6163 6529 290d  _origin_space)).
-000186a0: 0a20 2020 2020 2020 2074 7265 6e64 203d  .        trend =
-000186b0: 2073 656c 662e 7072 6564 6963 7465 645f   self.predicted_
-000186c0: 7472 656e 642e 636f 7079 2829 0d0a 2020  trend.copy()..  
-000186d0: 2020 2020 2020 7472 656e 642e 636f 6c75        trend.colu
-000186e0: 6d6e 7320 3d20 7064 2e4d 756c 7469 496e  mns = pd.MultiIn
-000186f0: 6465 782e 6672 6f6d 5f61 7272 6179 7328  dex.from_arrays(
-00018700: 0d0a 2020 2020 2020 2020 2020 2020 5b74  ..            [t
-00018710: 7265 6e64 2e63 6f6c 756d 6e73 2c20 5b27  rend.columns, ['
-00018720: 7472 656e 6427 5d20 2a20 6c65 6e28 7472  trend'] * len(tr
-00018730: 656e 642e 636f 6c75 6d6e 7329 5d0d 0a20  end.columns)].. 
-00018740: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00018750: 2020 706c 6f74 5f6c 6973 742e 6170 7065    plot_list.appe
-00018760: 6e64 2874 7265 6e64 290d 0a20 2020 2020  nd(trend)..     
-00018770: 2020 2069 6620 7365 6c66 2e69 6d70 6163     if self.impac
-00018780: 7473 2069 7320 6e6f 7420 4e6f 6e65 2061  ts is not None a
-00018790: 6e64 2069 6e63 6c75 6465 5f69 6d70 6163  nd include_impac
-000187a0: 7473 3a0d 0a20 2020 2020 2020 2020 2020  ts:..           
-000187b0: 2069 6d70 6163 7473 203d 2073 656c 662e   impacts = self.
-000187c0: 696d 7061 6374 732e 636f 7079 2829 0d0a  impacts.copy()..
-000187d0: 2020 2020 2020 2020 2020 2020 696d 7061              impa
-000187e0: 6374 732e 636f 6c75 6d6e 7320 3d20 7064  cts.columns = pd
-000187f0: 2e4d 756c 7469 496e 6465 782e 6672 6f6d  .MultiIndex.from
-00018800: 5f61 7272 6179 7328 0d0a 2020 2020 2020  _arrays(..      
-00018810: 2020 2020 2020 2020 2020 5b69 6d70 6163            [impac
-00018820: 7473 2e63 6f6c 756d 6e73 2c20 5b27 696d  ts.columns, ['im
-00018830: 7061 6374 7327 5d20 2a20 6c65 6e28 696d  pacts'] * len(im
-00018840: 7061 6374 732e 636f 6c75 6d6e 7329 5d0d  pacts.columns)].
-00018850: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00018860: 2020 2020 2020 2020 2020 2020 706c 6f74              plot
-00018870: 5f6c 6973 742e 6170 7065 6e64 2869 6d70  _list.append(imp
-00018880: 6163 7473 290d 0a20 2020 2020 2020 2072  acts)..        r
-00018890: 6574 7572 6e20 7064 2e63 6f6e 6361 7428  eturn pd.concat(
-000188a0: 706c 6f74 5f6c 6973 742c 2061 7869 733d  plot_list, axis=
-000188b0: 3129 0d0a 0d0a 2020 2020 6465 6620 706c  1)....    def pl
-000188c0: 6f74 5f74 7265 6e64 280d 0a20 2020 2020  ot_trend(..     
-000188d0: 2020 2073 656c 662c 0d0a 2020 2020 2020     self,..      
-000188e0: 2020 7365 7269 6573 3d4e 6f6e 652c 0d0a    series=None,..
-000188f0: 2020 2020 2020 2020 766c 696e 653d 4e6f          vline=No
-00018900: 6e65 2c0d 0a20 2020 2020 2020 2063 6f6c  ne,..        col
-00018910: 6f72 733d 5b22 2364 3466 3734 6622 2c20  ors=["#d4f74f", 
-00018920: 2223 3832 6162 3561 222c 2022 2366 6636  "#82ab5a", "#ff6
-00018930: 6330 3522 2c20 2223 6331 3236 3030 225d  c05", "#c12600"]
-00018940: 2c0d 0a20 2020 2020 2020 2074 6974 6c65  ,..        title
-00018950: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-00018960: 7374 6172 745f 6461 7465 3d4e 6f6e 652c  start_date=None,
-00018970: 0d0a 2020 2020 2020 2020 2a2a 6b77 6172  ..        **kwar
-00018980: 6773 2c0d 0a20 2020 2029 3a0d 0a20 2020  gs,..    ):..   
-00018990: 2020 2020 2023 2059 4d41 5820 6672 6f6d       # YMAX from
-000189a0: 2050 4c4f 5420 4f4e 4c59 0d0a 2020 2020   PLOT ONLY..    
-000189b0: 2020 2020 6966 2073 6572 6965 7320 6973      if series is
-000189c0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-000189d0: 2020 2020 7365 7269 6573 203d 2072 616e      series = ran
-000189e0: 646f 6d2e 6368 6f69 6365 2873 656c 662e  dom.choice(self.
-000189f0: 636f 6c75 6d6e 5f6e 616d 6573 290d 0a20  column_names).. 
-00018a00: 2020 2020 2020 2069 6620 7469 746c 6520         if title 
-00018a10: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00018a20: 2020 2020 2020 7469 746c 6520 3d20 6622        title = f"
-00018a30: 5472 656e 6420 4272 6561 6b64 6f77 6e20  Trend Breakdown 
-00018a40: 666f 7220 7b73 6572 6965 737d 220d 0a20  for {series}".. 
-00018a50: 2020 2020 2020 2070 5f69 6e64 7820 3d20         p_indx = 
-00018a60: 7365 6c66 2e63 6f6c 756d 6e5f 6e61 6d65  self.column_name
-00018a70: 732e 6765 745f 6c6f 6328 7365 7269 6573  s.get_loc(series
-00018a80: 290d 0a20 2020 2020 2020 2063 7572 5f74  )..        cur_t
-00018a90: 7265 6e64 203d 2073 656c 662e 7072 6564  rend = self.pred
-00018aa0: 6963 7465 645f 7472 656e 645b 7365 7269  icted_trend[seri
-00018ab0: 6573 5d2e 636f 7079 2829 0d0a 2020 2020  es].copy()..    
-00018ac0: 2020 2020 746c 7320 3d20 6c65 6e28 6375      tls = len(cu
-00018ad0: 725f 7472 656e 6429 0d0a 2020 2020 2020  r_trend)..      
-00018ae0: 2020 706c 6f74 5f64 6620 3d20 7064 2e44    plot_df = pd.D
-00018af0: 6174 6146 7261 6d65 280d 0a20 2020 2020  ataFrame(..     
-00018b00: 2020 2020 2020 207b 0d0a 2020 2020 2020         {..      
-00018b10: 2020 2020 2020 2020 2020 2764 6563 6c69            'decli
-00018b20: 6e65 5f61 6363 656c 6572 6174 696e 6727  ne_accelerating'
-00018b30: 3a20 6375 725f 7472 656e 645b 0d0a 2020  : cur_trend[..  
+000161d0: 2027 6261 7965 7369 616e 5f6c 696e 6561   'bayesian_linea
+000161e0: 7227 2c0d 0a20 2020 2020 2020 2020 2020  r',..           
+000161f0: 2020 2020 205d 2c0d 0a20 2020 2020 2020       ],..       
+00016200: 2020 2020 2020 2020 205b 302e 382c 2030           [0.8, 0
+00016210: 2e31 352c 2030 2e30 355d 2c0d 0a20 2020  .15, 0.05],..   
+00016220: 2020 2020 2020 2020 2029 5b30 5d0d 0a20           )[0].. 
+00016230: 2020 2020 2020 2072 6563 656e 6379 5f77         recency_w
+00016240: 6569 6768 7469 6e67 203d 2072 616e 646f  eighting = rando
+00016250: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00016260: 2020 2020 2020 2020 5b4e 6f6e 652c 2030          [None, 0
+00016270: 2e30 352c 2030 2e31 2c20 302e 3235 2c20  .05, 0.1, 0.25, 
+00016280: 302e 355d 2c20 5b30 2e37 2c20 302e 312c  0.5], [0.7, 0.1,
+00016290: 2030 2e31 2c20 302e 312c 2030 2e30 355d   0.1, 0.1, 0.05]
+000162a0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+000162b0: 2020 2020 2020 2020 6966 206c 696e 6561          if linea
+000162c0: 725f 6d6f 6465 6c20 696e 205b 276c 7374  r_model in ['lst
+000162d0: 7371 275d 3a0d 0a20 2020 2020 2020 2020  sq']:..         
+000162e0: 2020 206c 696e 6561 725f 6d6f 6465 6c20     linear_model 
+000162f0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+00016300: 2020 2020 2027 6d6f 6465 6c27 3a20 6c69       'model': li
+00016310: 6e65 6172 5f6d 6f64 656c 2c0d 0a20 2020  near_model,..   
+00016320: 2020 2020 2020 2020 2020 2020 2027 6c61               'la
+00016330: 6d62 6461 273a 2072 616e 646f 6d2e 6368  mbda': random.ch
+00016340: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+00016350: 2020 2020 2020 2020 2020 2020 5b4e 6f6e              [Non
+00016360: 652c 2030 2e31 2c20 312c 2031 302c 2031  e, 0.1, 1, 10, 1
+00016370: 3030 5d2c 205b 302e 372c 2030 2e31 2c20  00], [0.7, 0.1, 
+00016380: 302e 312c 2030 2e31 2c20 302e 3035 5d0d  0.1, 0.1, 0.05].
+00016390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000163a0: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
+000163b0: 2020 2020 2020 2020 2772 6563 656e 6379          'recency
+000163c0: 5f77 6569 6768 7469 6e67 273a 2072 6563  _weighting': rec
+000163d0: 656e 6379 5f77 6569 6768 7469 6e67 2c0d  ency_weighting,.
+000163e0: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
+000163f0: 2020 2020 2020 2020 6966 206c 696e 6561          if linea
+00016400: 725f 6d6f 6465 6c20 696e 205b 276c 696e  r_model in ['lin
+00016410: 616c 675f 736f 6c76 6527 5d3a 0d0a 2020  alg_solve']:..  
+00016420: 2020 2020 2020 2020 2020 6c69 6e65 6172            linear
+00016430: 5f6d 6f64 656c 203d 207b 0d0a 2020 2020  _model = {..    
+00016440: 2020 2020 2020 2020 2020 2020 276d 6f64              'mod
+00016450: 656c 273a 206c 696e 6561 725f 6d6f 6465  el': linear_mode
+00016460: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
+00016470: 2020 2020 276c 616d 6264 6127 3a20 7261      'lambda': ra
+00016480: 6e64 6f6d 2e63 686f 6963 6573 285b 302c  ndom.choices([0,
+00016490: 2030 2e31 2c20 312c 2031 305d 2c20 5b30   0.1, 1, 10], [0
+000164a0: 2e34 2c20 302e 322c 2030 2e32 2c20 302e  .4, 0.2, 0.2, 0.
+000164b0: 325d 295b 305d 2c0d 0a20 2020 2020 2020  2])[0],..       
+000164c0: 2020 2020 2020 2020 2027 7265 6365 6e63           'recenc
+000164d0: 795f 7765 6967 6874 696e 6727 3a20 7265  y_weighting': re
+000164e0: 6365 6e63 795f 7765 6967 6874 696e 672c  cency_weighting,
+000164f0: 0d0a 2020 2020 2020 2020 2020 2020 7d0d  ..            }.
+00016500: 0a20 2020 2020 2020 2065 6c69 6620 6c69  .        elif li
+00016510: 6e65 6172 5f6d 6f64 656c 2069 6e20 5b27  near_model in ['
+00016520: 6c31 5f6e 6f72 6d27 2c20 2764 7761 655f  l1_norm', 'dwae_
+00016530: 6e6f 726d 272c 2027 7175 616e 7469 6c65  norm', 'quantile
+00016540: 5f6e 6f72 6d27 2c20 276c 315f 706f 7369  _norm', 'l1_posi
+00016550: 7469 7665 275d 3a0d 0a20 2020 2020 2020  tive']:..       
+00016560: 2020 2020 206c 696e 6561 725f 6d6f 6465       linear_mode
+00016570: 6c20 3d20 7b0d 0a20 2020 2020 2020 2020  l = {..         
+00016580: 2020 2020 2020 2027 6d6f 6465 6c27 3a20         'model': 
+00016590: 6c69 6e65 6172 5f6d 6f64 656c 2c0d 0a20  linear_model,.. 
+000165a0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000165b0: 7265 6365 6e63 795f 7765 6967 6874 696e  recency_weightin
+000165c0: 6727 3a20 7265 6365 6e63 795f 7765 6967  g': recency_weig
+000165d0: 6874 696e 672c 0d0a 2020 2020 2020 2020  hting,..        
+000165e0: 2020 2020 2020 2020 276d 6178 6974 6572          'maxiter
+000165f0: 273a 2072 616e 646f 6d2e 6368 6f69 6365  ': random.choice
+00016600: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+00016610: 2020 2020 2020 2020 5b32 3530 2c20 3530          [250, 50
+00016620: 3030 2c20 3135 3030 302c 2032 3530 3030  00, 15000, 25000
+00016630: 5d2c 205b 302e 322c 2030 2e36 2c20 302e  ], [0.2, 0.6, 0.
+00016640: 312c 2030 2e31 5d0d 0a20 2020 2020 2020  1, 0.1]..       
+00016650: 2020 2020 2020 2020 2029 5b30 5d2c 0d0a           )[0],..
+00016660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016670: 276d 6574 686f 6427 3a20 7261 6e64 6f6d  'method': random
+00016680: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
+00016690: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+000166a0: 4e6f 6e65 2c20 274c 2d42 4647 532d 4227  None, 'L-BFGS-B'
+000166b0: 2c20 274e 656c 6465 722d 4d65 6164 272c  , 'Nelder-Mead',
+000166c0: 2027 544e 4327 2c20 2750 6f77 656c 6c27   'TNC', 'Powell'
+000166d0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+000166e0: 2020 2020 2020 2020 5b30 2e39 352c 2030          [0.95, 0
+000166f0: 2e30 322c 2030 2e30 322c 2030 2e30 322c  .02, 0.02, 0.02,
+00016700: 2030 2e30 325d 2c0d 0a20 2020 2020 2020   0.02],..       
+00016710: 2020 2020 2020 2020 2029 5b30 5d2c 0d0a           )[0],..
+00016720: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
+00016730: 2020 2020 2020 2065 6c69 6620 6c69 6e65         elif line
+00016740: 6172 5f6d 6f64 656c 203d 3d20 2262 6179  ar_model == "bay
+00016750: 6573 6961 6e5f 6c69 6e65 6172 223a 0d0a  esian_linear":..
+00016760: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00016770: 6172 5f6d 6f64 656c 203d 207b 0d0a 2020  ar_model = {..  
+00016780: 2020 2020 2020 2020 2020 2020 2020 276d                'm
+00016790: 6f64 656c 273a 2022 6261 7965 7369 616e  odel': "bayesian
+000167a0: 5f6c 696e 6561 7222 2c0d 0a20 2020 2020  _linear",..     
+000167b0: 2020 2020 2020 2020 2020 2027 616c 7068             'alph
+000167c0: 6127 3a20 7261 6e64 6f6d 2e63 686f 6963  a': random.choic
+000167d0: 6573 285b 312e 302c 2030 2e31 2c20 3130  es([1.0, 0.1, 10
+000167e0: 5d2c 205b 302e 382c 2030 2e31 2c20 302e  ], [0.8, 0.1, 0.
+000167f0: 315d 295b 305d 2c0d 0a20 2020 2020 2020  1])[0],..       
+00016800: 2020 2020 2020 2020 2027 6761 7573 7369           'gaussi
+00016810: 616e 5f70 7269 6f72 5f6d 6561 6e27 3a20  an_prior_mean': 
+00016820: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
+00016830: 302c 2030 2e31 2c20 315d 2c20 5b30 2e38  0, 0.1, 1], [0.8
+00016840: 2c20 302e 3038 2c20 302e 3032 5d29 5b0d  , 0.08, 0.02])[.
+00016850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016860: 2020 2020 2030 0d0a 2020 2020 2020 2020       0..        
+00016870: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
+00016880: 2020 2020 2020 2020 2020 2020 2777 6973              'wis
+00016890: 6861 7274 5f70 7269 6f72 5f73 6361 6c65  hart_prior_scale
+000168a0: 273a 2072 616e 646f 6d2e 6368 6f69 6365  ': random.choice
+000168b0: 7328 5b31 2e30 2c20 302e 312c 2031 305d  s([1.0, 0.1, 10]
+000168c0: 2c20 5b30 2e38 2c20 302e 312c 2030 2e31  , [0.8, 0.1, 0.1
+000168d0: 5d29 5b0d 0a20 2020 2020 2020 2020 2020  ])[..           
+000168e0: 2020 2020 2020 2020 2030 0d0a 2020 2020           0..    
+000168f0: 2020 2020 2020 2020 2020 2020 5d2c 0d0a              ],..
+00016900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016910: 2777 6973 6861 7274 5f64 6f66 5f65 7863  'wishart_dof_exc
+00016920: 6573 7327 3a20 7261 6e64 6f6d 2e63 686f  ess': random.cho
+00016930: 6963 6573 285b 302c 2031 2c20 355d 2c20  ices([0, 1, 5], 
+00016940: 5b30 2e39 2c20 302e 3035 2c20 302e 3035  [0.9, 0.05, 0.05
+00016950: 5d29 5b30 5d2c 0d0a 2020 2020 2020 2020  ])[0],..        
+00016960: 2020 2020 7d0d 0a20 2020 2020 2020 2069      }..        i
+00016970: 6620 6d65 7468 6f64 203d 3d20 2272 6567  f method == "reg
+00016980: 7265 7373 6f72 223a 0d0a 2020 2020 2020  ressor":..      
+00016990: 2020 2020 2020 7265 6772 6573 736f 7273        regressors
+000169a0: 5f75 7365 6420 3d20 5472 7565 0d0a 2020  _used = True..  
+000169b0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000169c0: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+000169d0: 6f72 735f 7573 6564 203d 2072 616e 646f  ors_used = rando
+000169e0: 6d2e 6368 6f69 6365 7328 5b54 7275 652c  m.choices([True,
+000169f0: 2046 616c 7365 5d2c 205b 302e 352c 2030   False], [0.5, 0
+00016a00: 2e35 5d29 5b30 5d0d 0a20 2020 2020 2020  .5])[0]..       
+00016a10: 2061 725f 6c61 6773 203d 2072 616e 646f   ar_lags = rando
+00016a20: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00016a30: 2020 2020 2020 2020 5b4e 6f6e 652c 205b          [None, [
+00016a40: 315d 2c20 5b31 2c20 375d 2c20 5b37 5d2c  1], [1, 7], [7],
+00016a50: 205b 7365 6173 6f6e 616c 5f69 6e74 2873   [seasonal_int(s
+00016a60: 6d61 6c6c 3d54 7275 6529 5d5d 2c0d 0a20  mall=True)]],.. 
+00016a70: 2020 2020 2020 2020 2020 205b 302e 392c             [0.9,
+00016a80: 2030 2e30 3235 2c20 302e 3032 352c 2030   0.025, 0.025, 0
+00016a90: 2e30 352c 2030 2e30 355d 2c0d 0a20 2020  .05, 0.05],..   
+00016aa0: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
+00016ab0: 2020 2061 725f 696e 7465 7261 6374 696f     ar_interactio
+00016ac0: 6e5f 7365 6173 6f6e 616c 6974 7920 3d20  n_seasonality = 
+00016ad0: 4e6f 6e65 0d0a 2020 2020 2020 2020 6966  None..        if
+00016ae0: 2061 725f 6c61 6773 2069 7320 6e6f 7420   ar_lags is not 
+00016af0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00016b00: 2020 2061 725f 696e 7465 7261 6374 696f     ar_interactio
+00016b10: 6e5f 7365 6173 6f6e 616c 6974 7920 3d20  n_seasonality = 
+00016b20: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
+00016b30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016b40: 205b 4e6f 6e65 2c20 372c 2027 6461 796f   [None, 7, 'dayo
+00016b50: 6677 6565 6b27 2c20 2763 6f6d 6d6f 6e5f  fweek', 'common_
+00016b60: 666f 7572 6965 7227 5d2c 205b 302e 342c  fourier'], [0.4,
+00016b70: 2030 2e32 2c20 302e 322c 2030 2e32 5d0d   0.2, 0.2, 0.2].
+00016b80: 0a20 2020 2020 2020 2020 2020 2029 5b30  .            )[0
+00016b90: 5d0d 0a20 2020 2020 2020 2073 6561 736f  ]..        seaso
+00016ba0: 6e61 6c69 7469 6573 203d 2072 616e 646f  nalities = rando
+00016bb0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00016bc0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+00016bd0: 2020 2020 2020 2020 2020 205b 372c 2033             [7, 3
+00016be0: 3635 2e32 355d 2c0d 0a20 2020 2020 2020  65.25],..       
+00016bf0: 2020 2020 2020 2020 205b 2264 6179 6f66           ["dayof
+00016c00: 7765 656b 222c 2033 3635 2e32 355d 2c0d  week", 365.25],.
+00016c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016c20: 205b 226d 6f6e 7468 222c 2022 6461 796f   ["month", "dayo
+00016c30: 6677 6565 6b22 2c20 2277 6565 6b64 6179  fweek", "weekday
+00016c40: 6f66 6d6f 6e74 6822 5d2c 0d0a 2020 2020  ofmonth"],..    
+00016c50: 2020 2020 2020 2020 2020 2020 5b27 7765              ['we
+00016c60: 656b 6461 796f 666d 6f6e 7468 272c 2027  ekdayofmonth', '
+00016c70: 636f 6d6d 6f6e 5f66 6f75 7269 6572 275d  common_fourier']
+00016c80: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00016c90: 2020 205b 2273 696d 706c 655f 6269 6e61     ["simple_bina
+00016ca0: 7269 7a65 6422 5d2c 0d0a 2020 2020 2020  rized"],..      
+00016cb0: 2020 2020 2020 2020 2020 226f 7468 6572            "other
+00016cc0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00016cd0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00016ce0: 5b30 2e31 2c20 302e 312c 2030 2e31 2c20  [0.1, 0.1, 0.1, 
+00016cf0: 302e 3035 2c20 302e 312c 2030 2e31 5d2c  0.05, 0.1, 0.1],
+00016d00: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+00016d10: 2020 2020 2020 2020 6966 2073 6561 736f          if seaso
+00016d20: 6e61 6c69 7469 6573 203d 3d20 226f 7468  nalities == "oth
+00016d30: 6572 223a 0d0a 2020 2020 2020 2020 2020  er":..          
+00016d40: 2020 7072 6564 6566 696e 6564 203d 2072    predefined = r
+00016d50: 616e 646f 6d2e 6368 6f69 6365 7328 5b54  andom.choices([T
+00016d60: 7275 652c 2046 616c 7365 5d2c 205b 302e  rue, False], [0.
+00016d70: 352c 2030 2e35 5d29 5b30 5d0d 0a20 2020  5, 0.5])[0]..   
+00016d80: 2020 2020 2020 2020 2069 6620 7072 6564           if pred
+00016d90: 6566 696e 6564 3a0d 0a20 2020 2020 2020  efined:..       
+00016da0: 2020 2020 2020 2020 2073 6561 736f 6e61           seasona
+00016db0: 6c69 7469 6573 203d 205b 7261 6e64 6f6d  lities = [random
+00016dc0: 2e63 686f 6963 6528 6461 7465 5f70 6172  .choice(date_par
+00016dd0: 745f 6d65 7468 6f64 7329 5d0d 0a20 2020  t_methods)]..   
+00016de0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00016df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016e00: 636f 6d70 5f6f 7074 7320 3d20 6461 7465  comp_opts = date
+00016e10: 7061 7274 5f63 6f6d 706f 6e65 6e74 7320  part_components 
+00016e20: 2b20 5b37 2c20 3336 352e 3235 2c20 3132  + [7, 365.25, 12
+00016e30: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00016e40: 2020 2073 6561 736f 6e61 6c69 7469 6573     seasonalities
+00016e50: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+00016e60: 7328 636f 6d70 5f6f 7074 732c 206b 3d32  s(comp_opts, k=2
+00016e70: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00016e80: 6e20 7b0d 0a20 2020 2020 2020 2020 2020  n {..           
+00016e90: 2022 7072 6570 726f 6365 7373 696e 675f   "preprocessing_
+00016ea0: 7472 616e 7366 6f72 6d61 7469 6f6e 223a  transformation":
+00016eb0: 2052 616e 646f 6d54 7261 6e73 666f 726d   RandomTransform
+00016ec0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00016ed0: 2020 2074 7261 6e73 666f 726d 6572 5f6c     transformer_l
+00016ee0: 6973 743d 7375 7065 7266 6173 745f 7472  ist=superfast_tr
+00016ef0: 616e 7366 6f72 6d65 725f 6469 6374 2c0d  ansformer_dict,.
+00016f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016f10: 2074 7261 6e73 666f 726d 6572 5f6d 6178   transformer_max
+00016f20: 5f64 6570 7468 3d32 2c0d 0a20 2020 2020  _depth=2,..     
+00016f30: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
+00016f40: 5f6e 6f6e 653d 5472 7565 2c0d 0a20 2020  _none=True,..   
+00016f50: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
+00016f60: 2020 2020 2020 2020 2022 7363 616c 696e           "scalin
+00016f70: 6722 3a20 7363 616c 696e 672c 0d0a 2020  g": scaling,..  
+00016f80: 2020 2020 2020 2020 2020 2320 2270 6173            # "pas
+00016f90: 745f 696d 7061 6374 735f 696e 7465 7276  t_impacts_interv
+00016fa0: 656e 7469 6f6e 223a 2073 656c 662e 7061  ention": self.pa
+00016fb0: 7374 5f69 6d70 6163 7473 5f69 6e74 6572  st_impacts_inter
+00016fc0: 7665 6e74 696f 6e2c 0d0a 2020 2020 2020  vention,..      
+00016fd0: 2020 2020 2020 2273 6561 736f 6e61 6c69        "seasonali
+00016fe0: 7469 6573 223a 2073 6561 736f 6e61 6c69  ties": seasonali
+00016ff0: 7469 6573 2c0d 0a20 2020 2020 2020 2020  ties,..         
+00017000: 2020 2022 6172 5f6c 6167 7322 3a20 6172     "ar_lags": ar
+00017010: 5f6c 6167 732c 0d0a 2020 2020 2020 2020  _lags,..        
+00017020: 2020 2020 2261 725f 696e 7465 7261 6374      "ar_interact
+00017030: 696f 6e5f 7365 6173 6f6e 616c 6974 7922  ion_seasonality"
+00017040: 3a20 6172 5f69 6e74 6572 6163 7469 6f6e  : ar_interaction
+00017050: 5f73 6561 736f 6e61 6c69 7479 2c0d 0a20  _seasonality,.. 
+00017060: 2020 2020 2020 2020 2020 2022 616e 6f6d             "anom
+00017070: 616c 795f 6465 7465 6374 6f72 5f70 6172  aly_detector_par
+00017080: 616d 7322 3a20 616e 6f6d 616c 795f 6465  ams": anomaly_de
+00017090: 7465 6374 6f72 5f70 6172 616d 732c 0d0a  tector_params,..
+000170a0: 2020 2020 2020 2020 2020 2020 2261 6e6f              "ano
+000170b0: 6d61 6c79 5f69 6e74 6572 7665 6e74 696f  maly_interventio
+000170c0: 6e22 3a20 616e 6f6d 616c 795f 696e 7465  n": anomaly_inte
+000170d0: 7276 656e 7469 6f6e 2c0d 0a20 2020 2020  rvention,..     
+000170e0: 2020 2020 2020 2022 686f 6c69 6461 795f         "holiday_
+000170f0: 6465 7465 6374 6f72 5f70 6172 616d 7322  detector_params"
+00017100: 3a20 686f 6c69 6461 795f 7061 7261 6d73  : holiday_params
+00017110: 2c0d 0a20 2020 2020 2020 2020 2020 2023  ,..            #
+00017120: 2022 686f 6c69 6461 795f 636f 756e 7472   "holiday_countr
+00017130: 6965 7322 3a20 7365 6c66 2e68 6f6c 6964  ies": self.holid
+00017140: 6179 5f63 6f75 6e74 7269 6573 2c0d 0a20  ay_countries,.. 
+00017150: 2020 2020 2020 2020 2020 2022 686f 6c69             "holi
+00017160: 6461 795f 636f 756e 7472 6965 735f 7573  day_countries_us
+00017170: 6564 223a 2072 616e 646f 6d2e 6368 6f69  ed": random.choi
+00017180: 6365 7328 5b54 7275 652c 2046 616c 7365  ces([True, False
+00017190: 5d2c 205b 302e 352c 2030 2e35 5d29 5b30  ], [0.5, 0.5])[0
+000171a0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+000171b0: 226d 756c 7469 7661 7269 6174 655f 6665  "multivariate_fe
+000171c0: 6174 7572 6522 3a20 7261 6e64 6f6d 2e63  ature": random.c
+000171d0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+000171e0: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
+000171f0: 2266 6561 7475 7265 5f61 6767 6c6f 6d65  "feature_agglome
+00017200: 7261 7469 6f6e 222c 2027 6772 6f75 705f  ration", 'group_
+00017210: 6176 6572 6167 6527 2c20 276f 7363 696c  average', 'oscil
+00017220: 6c61 746f 7227 5d2c 0d0a 2020 2020 2020  lator'],..      
+00017230: 2020 2020 2020 2020 2020 5b30 2e39 2c20            [0.9, 
+00017240: 302e 312c 2030 2e31 2c20 302e 305d 2c0d  0.1, 0.1, 0.0],.
+00017250: 0a20 2020 2020 2020 2020 2020 2029 5b30  .            )[0
+00017260: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00017270: 226d 756c 7469 7661 7269 6174 655f 7472  "multivariate_tr
+00017280: 616e 7366 6f72 6d61 7469 6f6e 223a 2052  ansformation": R
+00017290: 616e 646f 6d54 7261 6e73 666f 726d 280d  andomTransform(.
+000172a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000172b0: 2074 7261 6e73 666f 726d 6572 5f6c 6973   transformer_lis
+000172c0: 743d 2266 6173 7422 2c0d 0a20 2020 2020  t="fast",..     
+000172d0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+000172e0: 666f 726d 6572 5f6d 6178 5f64 6570 7468  former_max_depth
+000172f0: 3d33 2c20 2023 2070 726f 6261 626c 7920  =3,  # probably 
+00017300: 7761 6e74 2073 6f6d 6520 6d6f 7265 2075  want some more u
+00017310: 7361 626c 6520 6465 6661 756c 7473 2066  sable defaults f
+00017320: 6972 7374 2061 7320 6d61 6e79 2072 616e  irst as many ran
+00017330: 646f 6d20 6172 6520 7365 6e73 656c 6573  dom are senseles
+00017340: 730d 0a20 2020 2020 2020 2020 2020 2029  s..            )
+00017350: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+00017360: 7265 6772 6573 736f 725f 7472 616e 7366  regressor_transf
+00017370: 6f72 6d61 7469 6f6e 223a 2052 616e 646f  ormation": Rando
+00017380: 6d54 7261 6e73 666f 726d 280d 0a20 2020  mTransform(..   
+00017390: 2020 2020 2020 2020 2020 2020 2074 7261               tra
+000173a0: 6e73 666f 726d 6572 5f6c 6973 743d 7b2a  nsformer_list={*
+000173b0: 2a73 6361 6c65 7273 2c20 2a2a 6465 636f  *scalers, **deco
+000173c0: 6d70 6f73 6974 696f 6e73 7d2c 0d0a 2020  mpositions},..  
+000173d0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+000173e0: 616e 7366 6f72 6d65 725f 6d61 785f 6465  ansformer_max_de
+000173f0: 7074 683d 312c 0d0a 2020 2020 2020 2020  pth=1,..        
+00017400: 2020 2020 2020 2020 616c 6c6f 775f 6e6f          allow_no
+00017410: 6e65 3d46 616c 7365 2c0d 0a20 2020 2020  ne=False,..     
+00017420: 2020 2020 2020 2020 2020 206e 6f5f 6e61             no_na
+00017430: 6e5f 6669 6c6c 3d46 616c 7365 2c20 2023  n_fill=False,  #
+00017440: 2070 726f 6261 626c 7920 7761 6e74 2073   probably want s
+00017450: 6f6d 6520 6d6f 7265 2075 7361 626c 6520  ome more usable 
+00017460: 6465 6661 756c 7473 2066 6972 7374 2061  defaults first a
+00017470: 7320 6d61 6e79 2072 616e 646f 6d20 6172  s many random ar
+00017480: 6520 7365 6e73 656c 6573 730d 0a20 2020  e senseless..   
+00017490: 2020 2020 2020 2020 2029 2c0d 0a20 2020           ),..   
+000174a0: 2020 2020 2020 2020 2022 7265 6772 6573           "regres
+000174b0: 736f 7273 5f75 7365 6422 3a20 7265 6772  sors_used": regr
+000174c0: 6573 736f 7273 5f75 7365 642c 0d0a 2020  essors_used,..  
+000174d0: 2020 2020 2020 2020 2020 226c 696e 6561            "linea
+000174e0: 725f 6d6f 6465 6c22 3a20 6c69 6e65 6172  r_model": linear
+000174f0: 5f6d 6f64 656c 2c0d 0a20 2020 2020 2020  _model,..       
+00017500: 2020 2020 2022 7261 6e64 6f6d 7761 6c6b       "randomwalk
+00017510: 5f6e 223a 2072 616e 646f 6d2e 6368 6f69  _n": random.choi
+00017520: 6365 7328 5b4e 6f6e 652c 2031 305d 2c20  ces([None, 10], 
+00017530: 5b30 2e35 2c20 302e 355d 295b 305d 2c0d  [0.5, 0.5])[0],.
+00017540: 0a20 2020 2020 2020 2020 2020 2022 7472  .            "tr
+00017550: 656e 645f 7769 6e64 6f77 223a 2072 616e  end_window": ran
+00017560: 646f 6d2e 6368 6f69 6365 7328 5b33 2c20  dom.choices([3, 
+00017570: 3135 2c20 3930 2c20 3336 355d 2c20 5b30  15, 90, 365], [0
+00017580: 2e32 2c20 302e 322c 2030 2e32 2c20 302e  .2, 0.2, 0.2, 0.
+00017590: 325d 295b 305d 2c0d 0a20 2020 2020 2020  2])[0],..       
+000175a0: 2020 2020 2022 7472 656e 645f 7374 616e       "trend_stan
+000175b0: 6469 6e22 3a20 7261 6e64 6f6d 2e63 686f  din": random.cho
+000175c0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+000175d0: 2020 2020 2020 205b 4e6f 6e65 2c20 2772         [None, 'r
+000175e0: 616e 646f 6d5f 6e6f 726d 616c 272c 2027  andom_normal', '
+000175f0: 726f 6c6c 696e 675f 7472 656e 6427 5d2c  rolling_trend'],
+00017600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017610: 2020 5b30 2e37 2c20 302e 332c 2030 2e31    [0.7, 0.3, 0.1
+00017620: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00017630: 295b 305d 2c0d 0a20 2020 2020 2020 2020  )[0],..         
+00017640: 2020 2022 7472 656e 645f 616e 6f6d 616c     "trend_anomal
+00017650: 795f 6465 7465 6374 6f72 5f70 6172 616d  y_detector_param
+00017660: 7322 3a20 7472 656e 645f 616e 6f6d 616c  s": trend_anomal
+00017670: 795f 6465 7465 6374 6f72 5f70 6172 616d  y_detector_param
+00017680: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+00017690: 2320 2274 7265 6e64 5f61 6e6f 6d61 6c79  # "trend_anomaly
+000176a0: 5f69 6e74 6572 7665 6e74 696f 6e22 3a20  _intervention": 
+000176b0: 7472 656e 645f 616e 6f6d 616c 795f 696e  trend_anomaly_in
+000176c0: 7465 7276 656e 7469 6f6e 2c0d 0a20 2020  tervention,..   
+000176d0: 2020 2020 2020 2020 2022 7472 656e 645f           "trend_
+000176e0: 7472 616e 7366 6f72 6d61 7469 6f6e 223a  transformation":
+000176f0: 2074 7265 6e64 5f74 7261 6e73 666f 726d   trend_transform
+00017700: 6174 696f 6e2c 0d0a 2020 2020 2020 2020  ation,..        
+00017710: 2020 2020 2274 7265 6e64 5f6d 6f64 656c      "trend_model
+00017720: 223a 2074 7265 6e64 5f6d 6f64 656c 2c0d  ": trend_model,.
+00017730: 0a20 2020 2020 2020 2020 2020 2022 7472  .            "tr
+00017740: 656e 645f 7068 6922 3a20 7261 6e64 6f6d  end_phi": random
+00017750: 2e63 686f 6963 6573 285b 4e6f 6e65 2c20  .choices([None, 
+00017760: 302e 3938 5d2c 205b 302e 392c 2030 2e31  0.98], [0.9, 0.1
+00017770: 5d29 5b30 5d2c 0d0a 2020 2020 2020 2020  ])[0],..        
+00017780: 7d0d 0a0d 0a20 2020 2064 6566 2067 6574  }....    def get
+00017790: 5f70 6172 616d 7328 7365 6c66 293a 0d0a  _params(self):..
+000177a0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+000177b0: 0d0a 2020 2020 2020 2020 2020 2020 2270  ..            "p
+000177c0: 7265 7072 6f63 6573 7369 6e67 5f74 7261  reprocessing_tra
+000177d0: 6e73 666f 726d 6174 696f 6e22 3a20 7365  nsformation": se
+000177e0: 6c66 2e70 7265 7072 6f63 6573 7369 6e67  lf.preprocessing
+000177f0: 5f74 7261 6e73 666f 726d 6174 696f 6e2c  _transformation,
+00017800: 0d0a 2020 2020 2020 2020 2020 2020 2273  ..            "s
+00017810: 6361 6c69 6e67 223a 2073 656c 662e 7363  caling": self.sc
+00017820: 616c 696e 672c 0d0a 2020 2020 2020 2020  aling,..        
+00017830: 2020 2020 2270 6173 745f 696d 7061 6374      "past_impact
+00017840: 735f 696e 7465 7276 656e 7469 6f6e 223a  s_intervention":
+00017850: 2073 656c 662e 7061 7374 5f69 6d70 6163   self.past_impac
+00017860: 7473 5f69 6e74 6572 7665 6e74 696f 6e2c  ts_intervention,
+00017870: 2020 2320 6e6f 7420 696e 206e 6577 0d0a    # not in new..
+00017880: 2020 2020 2020 2020 2020 2020 2273 6561              "sea
+00017890: 736f 6e61 6c69 7469 6573 223a 2073 656c  sonalities": sel
+000178a0: 662e 7365 6173 6f6e 616c 6974 6965 732c  f.seasonalities,
+000178b0: 0d0a 2020 2020 2020 2020 2020 2020 2261  ..            "a
+000178c0: 725f 6c61 6773 223a 2073 656c 662e 6172  r_lags": self.ar
+000178d0: 5f6c 6167 732c 0d0a 2020 2020 2020 2020  _lags,..        
+000178e0: 2020 2020 2261 725f 696e 7465 7261 6374      "ar_interact
+000178f0: 696f 6e5f 7365 6173 6f6e 616c 6974 7922  ion_seasonality"
+00017900: 3a20 7365 6c66 2e61 725f 696e 7465 7261  : self.ar_intera
+00017910: 6374 696f 6e5f 7365 6173 6f6e 616c 6974  ction_seasonalit
+00017920: 790d 0a20 2020 2020 2020 2020 2020 2069  y..            i
+00017930: 6620 7365 6c66 2e61 725f 6c61 6773 2069  f self.ar_lags i
+00017940: 7320 6e6f 7420 4e6f 6e65 0d0a 2020 2020  s not None..    
+00017950: 2020 2020 2020 2020 656c 7365 204e 6f6e          else Non
+00017960: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00017970: 2261 6e6f 6d61 6c79 5f64 6574 6563 746f  "anomaly_detecto
+00017980: 725f 7061 7261 6d73 223a 2073 656c 662e  r_params": self.
+00017990: 616e 6f6d 616c 795f 6465 7465 6374 6f72  anomaly_detector
+000179a0: 5f70 6172 616d 732c 0d0a 2020 2020 2020  _params,..      
+000179b0: 2020 2020 2020 2261 6e6f 6d61 6c79 5f69        "anomaly_i
+000179c0: 6e74 6572 7665 6e74 696f 6e22 3a20 7365  ntervention": se
+000179d0: 6c66 2e61 6e6f 6d61 6c79 5f69 6e74 6572  lf.anomaly_inter
+000179e0: 7665 6e74 696f 6e2c 0d0a 2020 2020 2020  vention,..      
+000179f0: 2020 2020 2020 2268 6f6c 6964 6179 5f64        "holiday_d
+00017a00: 6574 6563 746f 725f 7061 7261 6d73 223a  etector_params":
+00017a10: 2073 656c 662e 686f 6c69 6461 795f 6465   self.holiday_de
+00017a20: 7465 6374 6f72 5f70 6172 616d 732c 0d0a  tector_params,..
+00017a30: 2020 2020 2020 2020 2020 2020 2320 2268              # "h
+00017a40: 6f6c 6964 6179 5f69 6e74 6572 7665 6e74  oliday_intervent
+00017a50: 696f 6e22 3a20 7365 6c66 2e68 6f6c 6964  ion": self.holid
+00017a60: 6179 5f69 6e74 6572 7665 6e74 696f 6e2c  ay_intervention,
+00017a70: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00017a80: 2268 6f6c 6964 6179 5f63 6f75 6e74 7269  "holiday_countri
+00017a90: 6573 223a 2073 656c 662e 686f 6c69 6461  es": self.holida
+00017aa0: 795f 636f 756e 7472 6965 732c 0d0a 2020  y_countries,..  
+00017ab0: 2020 2020 2020 2020 2020 2268 6f6c 6964            "holid
+00017ac0: 6179 5f63 6f75 6e74 7269 6573 5f75 7365  ay_countries_use
+00017ad0: 6422 3a20 7365 6c66 2e68 6f6c 6964 6179  d": self.holiday
+00017ae0: 5f63 6f75 6e74 7269 6573 5f75 7365 642c  _countries_used,
+00017af0: 0d0a 2020 2020 2020 2020 2020 2020 226d  ..            "m
+00017b00: 756c 7469 7661 7269 6174 655f 6665 6174  ultivariate_feat
+00017b10: 7572 6522 3a20 7365 6c66 2e6d 756c 7469  ure": self.multi
+00017b20: 7661 7269 6174 655f 6665 6174 7572 652c  variate_feature,
+00017b30: 0d0a 2020 2020 2020 2020 2020 2020 226d  ..            "m
+00017b40: 756c 7469 7661 7269 6174 655f 7472 616e  ultivariate_tran
+00017b50: 7366 6f72 6d61 7469 6f6e 223a 2073 656c  sformation": sel
+00017b60: 662e 6d75 6c74 6976 6172 6961 7465 5f74  f.multivariate_t
+00017b70: 7261 6e73 666f 726d 6174 696f 6e0d 0a20  ransformation.. 
+00017b80: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00017b90: 6c66 2e6d 756c 7469 7661 7269 6174 655f  lf.multivariate_
+00017ba0: 6665 6174 7572 6520 6973 206e 6f74 204e  feature is not N
+00017bb0: 6f6e 650d 0a20 2020 2020 2020 2020 2020  one..           
+00017bc0: 2065 6c73 6520 4e6f 6e65 2c0d 0a20 2020   else None,..   
+00017bd0: 2020 2020 2020 2020 2022 7265 6772 6573           "regres
+00017be0: 736f 725f 7472 616e 7366 6f72 6d61 7469  sor_transformati
+00017bf0: 6f6e 223a 2073 656c 662e 7265 6772 6573  on": self.regres
+00017c00: 736f 725f 7472 616e 7366 6f72 6d61 7469  sor_transformati
+00017c10: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+00017c20: 6966 2073 656c 662e 7265 6772 6573 736f  if self.regresso
+00017c30: 7273 5f75 7365 640d 0a20 2020 2020 2020  rs_used..       
+00017c40: 2020 2020 2065 6c73 6520 4e6f 6e65 2c0d       else None,.
+00017c50: 0a20 2020 2020 2020 2020 2020 2022 7265  .            "re
+00017c60: 6772 6573 736f 7273 5f75 7365 6422 3a20  gressors_used": 
+00017c70: 7365 6c66 2e72 6567 7265 7373 6f72 735f  self.regressors_
+00017c80: 7573 6564 2c0d 0a20 2020 2020 2020 2020  used,..         
+00017c90: 2020 2022 6c69 6e65 6172 5f6d 6f64 656c     "linear_model
+00017ca0: 223a 2073 656c 662e 6c69 6e65 6172 5f6d  ": self.linear_m
+00017cb0: 6f64 656c 2c0d 0a20 2020 2020 2020 2020  odel,..         
+00017cc0: 2020 2022 7261 6e64 6f6d 7761 6c6b 5f6e     "randomwalk_n
+00017cd0: 223a 2073 656c 662e 7261 6e64 6f6d 7761  ": self.randomwa
+00017ce0: 6c6b 5f6e 2c0d 0a20 2020 2020 2020 2020  lk_n,..         
+00017cf0: 2020 2022 7472 656e 645f 7769 6e64 6f77     "trend_window
+00017d00: 223a 2073 656c 662e 7472 656e 645f 7769  ": self.trend_wi
+00017d10: 6e64 6f77 2c0d 0a20 2020 2020 2020 2020  ndow,..         
+00017d20: 2020 2022 7472 656e 645f 7374 616e 6469     "trend_standi
+00017d30: 6e22 3a20 7365 6c66 2e74 7265 6e64 5f73  n": self.trend_s
+00017d40: 7461 6e64 696e 2c0d 0a20 2020 2020 2020  tandin,..       
+00017d50: 2020 2020 2022 7472 656e 645f 616e 6f6d       "trend_anom
+00017d60: 616c 795f 6465 7465 6374 6f72 5f70 6172  aly_detector_par
+00017d70: 616d 7322 3a20 7365 6c66 2e74 7265 6e64  ams": self.trend
+00017d80: 5f61 6e6f 6d61 6c79 5f64 6574 6563 746f  _anomaly_detecto
+00017d90: 725f 7061 7261 6d73 2c0d 0a20 2020 2020  r_params,..     
+00017da0: 2020 2020 2020 2023 2022 7472 656e 645f         # "trend_
+00017db0: 616e 6f6d 616c 795f 696e 7465 7276 656e  anomaly_interven
+00017dc0: 7469 6f6e 223a 2073 656c 662e 7472 656e  tion": self.tren
+00017dd0: 645f 616e 6f6d 616c 795f 696e 7465 7276  d_anomaly_interv
+00017de0: 656e 7469 6f6e 2c0d 0a20 2020 2020 2020  ention,..       
+00017df0: 2020 2020 2022 7472 656e 645f 7472 616e       "trend_tran
+00017e00: 7366 6f72 6d61 7469 6f6e 223a 2073 656c  sformation": sel
+00017e10: 662e 7472 656e 645f 7472 616e 7366 6f72  f.trend_transfor
+00017e20: 6d61 7469 6f6e 2c0d 0a20 2020 2020 2020  mation,..       
+00017e30: 2020 2020 2022 7472 656e 645f 6d6f 6465       "trend_mode
+00017e40: 6c22 3a20 7365 6c66 2e74 7265 6e64 5f6d  l": self.trend_m
+00017e50: 6f64 656c 2c0d 0a20 2020 2020 2020 2020  odel,..         
+00017e60: 2020 2022 7472 656e 645f 7068 6922 3a20     "trend_phi": 
+00017e70: 7365 6c66 2e74 7265 6e64 5f70 6869 2c0d  self.trend_phi,.
+00017e80: 0a20 2020 2020 2020 2020 2020 2023 2022  .            # "
+00017e90: 636f 6e73 7472 6169 6e74 223a 2073 656c  constraint": sel
+00017ea0: 662e 636f 6e73 7472 6169 6e74 2c0d 0a20  f.constraint,.. 
+00017eb0: 2020 2020 2020 207d 0d0a 0d0a 2020 2020         }....    
+00017ec0: 6465 6620 706c 6f74 5f63 6f6d 706f 6e65  def plot_compone
+00017ed0: 6e74 7328 0d0a 2020 2020 2020 2020 7365  nts(..        se
+00017ee0: 6c66 2c0d 0a20 2020 2020 2020 2070 7265  lf,..        pre
+00017ef0: 6469 6374 696f 6e3d 4e6f 6e65 2c0d 0a20  diction=None,.. 
+00017f00: 2020 2020 2020 2073 6572 6965 733d 4e6f         series=No
+00017f10: 6e65 2c0d 0a20 2020 2020 2020 2066 6967  ne,..        fig
+00017f20: 7369 7a65 3d28 3136 2c20 3929 2c0d 0a20  size=(16, 9),.. 
+00017f30: 2020 2020 2020 2074 6f5f 6f72 6967 696e         to_origin
+00017f40: 5f73 7061 6365 3d54 7275 652c 0d0a 2020  _space=True,..  
+00017f50: 2020 2020 2020 7469 746c 653d 4e6f 6e65        title=None
+00017f60: 2c0d 0a20 2020 2020 2020 2073 7461 7274  ,..        start
+00017f70: 5f64 6174 653d 4e6f 6e65 2c0d 0a20 2020  _date=None,..   
+00017f80: 2029 3a0d 0a20 2020 2020 2020 2069 6620   ):..        if 
+00017f90: 7365 7269 6573 2069 7320 4e6f 6e65 3a0d  series is None:.
+00017fa0: 0a20 2020 2020 2020 2020 2020 2073 6572  .            ser
+00017fb0: 6965 7320 3d20 7261 6e64 6f6d 2e63 686f  ies = random.cho
+00017fc0: 6963 6528 7365 6c66 2e63 6f6c 756d 6e5f  ice(self.column_
+00017fd0: 6e61 6d65 7329 0d0a 2020 2020 2020 2020  names)..        
+00017fe0: 6966 2074 6974 6c65 2069 7320 4e6f 6e65  if title is None
+00017ff0: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
+00018000: 6974 6c65 203d 2066 224d 6f64 656c 2043  itle = f"Model C
+00018010: 6f6d 706f 6e65 6e74 7320 666f 7220 7b73  omponents for {s
+00018020: 6572 6965 737d 220d 0a20 2020 2020 2020  eries}"..       
+00018030: 2070 6c6f 745f 6c69 7374 203d 205b 5d0d   plot_list = [].
+00018040: 0a20 2020 2020 2020 2069 6620 7072 6564  .        if pred
+00018050: 6963 7469 6f6e 2069 7320 6e6f 7420 4e6f  iction is not No
+00018060: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00018070: 2070 6c6f 745f 6c69 7374 2e61 7070 656e   plot_list.appen
+00018080: 6428 7072 6564 6963 7469 6f6e 2e66 6f72  d(prediction.for
+00018090: 6563 6173 745b 7365 7269 6573 5d2e 7265  ecast[series].re
+000180a0: 6e61 6d65 2822 666f 7265 6361 7374 2229  name("forecast")
+000180b0: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
+000180c0: 6c74 5f69 6478 203d 2070 7265 6469 6374  lt_idx = predict
+000180d0: 696f 6e2e 666f 7265 6361 7374 2e69 6e64  ion.forecast.ind
+000180e0: 6578 0d0a 2020 2020 2020 2020 656c 7365  ex..        else
+000180f0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00018100: 6c74 5f69 6478 203d 204e 6f6e 650d 0a20  lt_idx = None.. 
+00018110: 2020 2020 2020 2070 6c6f 745f 6c69 7374         plot_list
+00018120: 2e61 7070 656e 6428 7365 6c66 2e70 7265  .append(self.pre
+00018130: 6469 6374 6564 5f74 7265 6e64 5b73 6572  dicted_trend[ser
+00018140: 6965 735d 2e72 656e 616d 6528 2274 7265  ies].rename("tre
+00018150: 6e64 2229 290d 0a20 2020 2020 2020 2069  nd"))..        i
+00018160: 6620 7365 6c66 2e69 6d70 6163 7473 2069  f self.impacts i
+00018170: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00018180: 2020 2020 2020 2020 2070 6c6f 745f 6c69           plot_li
+00018190: 7374 2e61 7070 656e 6428 2873 656c 662e  st.append((self.
+000181a0: 696d 7061 6374 735b 7365 7269 6573 5d2e  impacts[series].
+000181b0: 7265 6e61 6d65 2822 696d 7061 6374 2025  rename("impact %
+000181c0: 2229 202d 2031 2e30 2920 2a20 3130 3029  ") - 1.0) * 100)
+000181d0: 0d0a 2020 2020 2020 2020 6966 2070 6c74  ..        if plt
+000181e0: 5f69 6478 2069 7320 4e6f 6e65 3a0d 0a20  _idx is None:.. 
+000181f0: 2020 2020 2020 2020 2020 2070 6c6f 745f             plot_
+00018200: 6c69 7374 2e61 7070 656e 6428 0d0a 2020  list.append(..  
+00018210: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00018220: 6c66 2e70 726f 6365 7373 5f63 6f6d 706f  lf.process_compo
+00018230: 6e65 6e74 7328 746f 5f6f 7269 6769 6e5f  nents(to_origin_
+00018240: 7370 6163 653d 746f 5f6f 7269 6769 6e5f  space=to_origin_
+00018250: 7370 6163 6529 5b73 6572 6965 735d 0d0a  space)[series]..
+00018260: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00018270: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00018280: 2020 2020 2020 2020 2020 706c 6f74 5f6c            plot_l
+00018290: 6973 742e 6170 7065 6e64 280d 0a20 2020  ist.append(..   
+000182a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000182b0: 662e 7072 6f63 6573 735f 636f 6d70 6f6e  f.process_compon
+000182c0: 656e 7473 2874 6f5f 6f72 6967 696e 5f73  ents(to_origin_s
+000182d0: 7061 6365 3d74 6f5f 6f72 6967 696e 5f73  pace=to_origin_s
+000182e0: 7061 6365 295b 7365 7269 6573 5d2e 6c6f  pace)[series].lo
+000182f0: 635b 0d0a 2020 2020 2020 2020 2020 2020  c[..            
+00018300: 2020 2020 2020 2020 706c 745f 6964 780d          plt_idx.
+00018310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018320: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
+00018330: 290d 0a20 2020 2020 2020 2070 6c6f 745f  )..        plot_
+00018340: 6466 203d 2070 642e 636f 6e63 6174 2870  df = pd.concat(p
+00018350: 6c6f 745f 6c69 7374 2c20 6178 6973 3d31  lot_list, axis=1
+00018360: 290d 0a20 2020 2020 2020 2069 6620 7374  )..        if st
+00018370: 6172 745f 6461 7465 2069 7320 6e6f 7420  art_date is not 
+00018380: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00018390: 2020 2069 6620 7374 6172 745f 6461 7465     if start_date
+000183a0: 203d 3d20 2261 7574 6f22 3a0d 0a20 2020   == "auto":..   
+000183b0: 2020 2020 2020 2020 2020 2020 2070 6c6f               plo
+000183c0: 745f 6466 203d 2070 6c6f 745f 6466 2e69  t_df = plot_df.i
+000183d0: 6c6f 635b 2d28 7072 6564 6963 7469 6f6e  loc[-(prediction
+000183e0: 2e66 6f72 6563 6173 745f 6c65 6e67 7468  .forecast_length
+000183f0: 202a 2033 2920 3a5d 0d0a 2020 2020 2020   * 3) :]..      
+00018400: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00018410: 2020 2020 2020 2020 2020 2020 2070 6c6f               plo
+00018420: 745f 6466 203d 2070 6c6f 745f 6466 5b70  t_df = plot_df[p
+00018430: 6c6f 745f 6466 2e69 6e64 6578 203e 3d20  lot_df.index >= 
+00018440: 7374 6172 745f 6461 7465 5d0d 0a20 2020  start_date]..   
+00018450: 2020 2020 2072 6574 7572 6e20 706c 6f74       return plot
+00018460: 5f64 662e 706c 6f74 2873 7562 706c 6f74  _df.plot(subplot
+00018470: 733d 5472 7565 2c20 6669 6773 697a 653d  s=True, figsize=
+00018480: 6669 6773 697a 652c 2074 6974 6c65 3d74  figsize, title=t
+00018490: 6974 6c65 290d 0a0d 0a20 2020 2064 6566  itle)....    def
+000184a0: 2072 6574 7572 6e5f 636f 6d70 6f6e 656e   return_componen
+000184b0: 7473 2873 656c 662c 2074 6f5f 6f72 6967  ts(self, to_orig
+000184c0: 696e 5f73 7061 6365 3d54 7275 652c 2069  in_space=True, i
+000184d0: 6e63 6c75 6465 5f69 6d70 6163 7473 3d46  nclude_impacts=F
+000184e0: 616c 7365 293a 0d0a 2020 2020 2020 2020  alse):..        
+000184f0: 2222 2252 6574 7572 6e20 6164 6469 7469  """Return additi
+00018500: 7665 2065 6c65 6d65 6e74 7320 6f66 2066  ve elements of f
+00018510: 6f72 6563 6173 742c 206c 696e 6561 7220  orecast, linear 
+00018520: 616e 6420 7472 656e 642e 2049 6620 696d  and trend. If im
+00018530: 7061 6374 7320 696e 636c 7564 6564 2c20  pacts included, 
+00018540: 6974 2069 7320 6120 6d75 6c74 6970 6c69  it is a multipli
+00018550: 6361 7469 7665 2074 6572 6d2e 0d0a 0d0a  cative term.....
+00018560: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
+00018570: 2020 2020 2020 2020 2020 2074 6f5f 6f72             to_or
+00018580: 6967 696e 5f73 7061 6365 2028 626f 6f6c  igin_space (bool
+00018590: 2920 6966 2046 616c 7365 2c20 7769 6c6c  ) if False, will
+000185a0: 206e 6f74 2072 6576 6572 7365 2074 7261   not reverse tra
+000185b0: 6e73 666f 726d 206c 696e 6561 7220 636f  nsform linear co
+000185c0: 6d70 6f6e 656e 7473 0d0a 2020 2020 2020  mponents..      
+000185d0: 2020 2020 2020 696e 636c 7564 655f 696d        include_im
+000185e0: 7061 6374 7320 2862 6f6f 6c29 2069 6620  pacts (bool) if 
+000185f0: 5472 7565 2c20 696d 7061 6374 7320 6172  True, impacts ar
+00018600: 6520 696e 636c 7564 6564 2069 6e20 7468  e included in th
+00018610: 6520 7265 7475 726e 6564 2064 6174 6166  e returned dataf
+00018620: 7261 6d65 0d0a 2020 2020 2020 2020 2222  rame..        ""
+00018630: 220d 0a20 2020 2020 2020 2070 6c6f 745f  "..        plot_
+00018640: 6c69 7374 203d 205b 5d0d 0a20 2020 2020  list = []..     
+00018650: 2020 2070 6c6f 745f 6c69 7374 2e61 7070     plot_list.app
+00018660: 656e 6428 7365 6c66 2e70 726f 6365 7373  end(self.process
+00018670: 5f63 6f6d 706f 6e65 6e74 7328 746f 5f6f  _components(to_o
+00018680: 7269 6769 6e5f 7370 6163 653d 746f 5f6f  rigin_space=to_o
+00018690: 7269 6769 6e5f 7370 6163 6529 290d 0a20  rigin_space)).. 
+000186a0: 2020 2020 2020 2074 7265 6e64 203d 2073         trend = s
+000186b0: 656c 662e 7072 6564 6963 7465 645f 7472  elf.predicted_tr
+000186c0: 656e 642e 636f 7079 2829 0d0a 2020 2020  end.copy()..    
+000186d0: 2020 2020 7472 656e 642e 636f 6c75 6d6e      trend.column
+000186e0: 7320 3d20 7064 2e4d 756c 7469 496e 6465  s = pd.MultiInde
+000186f0: 782e 6672 6f6d 5f61 7272 6179 7328 0d0a  x.from_arrays(..
+00018700: 2020 2020 2020 2020 2020 2020 5b74 7265              [tre
+00018710: 6e64 2e63 6f6c 756d 6e73 2c20 5b27 7472  nd.columns, ['tr
+00018720: 656e 6427 5d20 2a20 6c65 6e28 7472 656e  end'] * len(tren
+00018730: 642e 636f 6c75 6d6e 7329 5d0d 0a20 2020  d.columns)]..   
+00018740: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00018750: 706c 6f74 5f6c 6973 742e 6170 7065 6e64  plot_list.append
+00018760: 2874 7265 6e64 290d 0a20 2020 2020 2020  (trend)..       
+00018770: 2069 6620 7365 6c66 2e69 6d70 6163 7473   if self.impacts
+00018780: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00018790: 2069 6e63 6c75 6465 5f69 6d70 6163 7473   include_impacts
+000187a0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+000187b0: 6d70 6163 7473 203d 2073 656c 662e 696d  mpacts = self.im
+000187c0: 7061 6374 732e 636f 7079 2829 0d0a 2020  pacts.copy()..  
+000187d0: 2020 2020 2020 2020 2020 696d 7061 6374            impact
+000187e0: 732e 636f 6c75 6d6e 7320 3d20 7064 2e4d  s.columns = pd.M
+000187f0: 756c 7469 496e 6465 782e 6672 6f6d 5f61  ultiIndex.from_a
+00018800: 7272 6179 7328 0d0a 2020 2020 2020 2020  rrays(..        
+00018810: 2020 2020 2020 2020 5b69 6d70 6163 7473          [impacts
+00018820: 2e63 6f6c 756d 6e73 2c20 5b27 696d 7061  .columns, ['impa
+00018830: 6374 7327 5d20 2a20 6c65 6e28 696d 7061  cts'] * len(impa
+00018840: 6374 732e 636f 6c75 6d6e 7329 5d0d 0a20  cts.columns)].. 
+00018850: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00018860: 2020 2020 2020 2020 2020 706c 6f74 5f6c            plot_l
+00018870: 6973 742e 6170 7065 6e64 2869 6d70 6163  ist.append(impac
+00018880: 7473 290d 0a20 2020 2020 2020 2072 6574  ts)..        ret
+00018890: 7572 6e20 7064 2e63 6f6e 6361 7428 706c  urn pd.concat(pl
+000188a0: 6f74 5f6c 6973 742c 2061 7869 733d 3129  ot_list, axis=1)
+000188b0: 0d0a 0d0a 2020 2020 6465 6620 706c 6f74  ....    def plot
+000188c0: 5f74 7265 6e64 280d 0a20 2020 2020 2020  _trend(..       
+000188d0: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
+000188e0: 7365 7269 6573 3d4e 6f6e 652c 0d0a 2020  series=None,..  
+000188f0: 2020 2020 2020 766c 696e 653d 4e6f 6e65        vline=None
+00018900: 2c0d 0a20 2020 2020 2020 2063 6f6c 6f72  ,..        color
+00018910: 733d 5b22 2364 3466 3734 6622 2c20 2223  s=["#d4f74f", "#
+00018920: 3832 6162 3561 222c 2022 2366 6636 6330  82ab5a", "#ff6c0
+00018930: 3522 2c20 2223 6331 3236 3030 225d 2c0d  5", "#c12600"],.
+00018940: 0a20 2020 2020 2020 2074 6974 6c65 3d4e  .        title=N
+00018950: 6f6e 652c 0d0a 2020 2020 2020 2020 7374  one,..        st
+00018960: 6172 745f 6461 7465 3d4e 6f6e 652c 0d0a  art_date=None,..
+00018970: 2020 2020 2020 2020 2a2a 6b77 6172 6773          **kwargs
+00018980: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
+00018990: 2020 2023 2059 4d41 5820 6672 6f6d 2050     # YMAX from P
+000189a0: 4c4f 5420 4f4e 4c59 0d0a 2020 2020 2020  LOT ONLY..      
+000189b0: 2020 6966 2073 6572 6965 7320 6973 204e    if series is N
+000189c0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+000189d0: 2020 7365 7269 6573 203d 2072 616e 646f    series = rando
+000189e0: 6d2e 6368 6f69 6365 2873 656c 662e 636f  m.choice(self.co
+000189f0: 6c75 6d6e 5f6e 616d 6573 290d 0a20 2020  lumn_names)..   
+00018a00: 2020 2020 2069 6620 7469 746c 6520 6973       if title is
+00018a10: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00018a20: 2020 2020 7469 746c 6520 3d20 6622 5472      title = f"Tr
+00018a30: 656e 6420 4272 6561 6b64 6f77 6e20 666f  end Breakdown fo
+00018a40: 7220 7b73 6572 6965 737d 220d 0a20 2020  r {series}"..   
+00018a50: 2020 2020 2070 5f69 6e64 7820 3d20 7365       p_indx = se
+00018a60: 6c66 2e63 6f6c 756d 6e5f 6e61 6d65 732e  lf.column_names.
+00018a70: 6765 745f 6c6f 6328 7365 7269 6573 290d  get_loc(series).
+00018a80: 0a20 2020 2020 2020 2063 7572 5f74 7265  .        cur_tre
+00018a90: 6e64 203d 2073 656c 662e 7072 6564 6963  nd = self.predic
+00018aa0: 7465 645f 7472 656e 645b 7365 7269 6573  ted_trend[series
+00018ab0: 5d2e 636f 7079 2829 0d0a 2020 2020 2020  ].copy()..      
+00018ac0: 2020 746c 7320 3d20 6c65 6e28 6375 725f    tls = len(cur_
+00018ad0: 7472 656e 6429 0d0a 2020 2020 2020 2020  trend)..        
+00018ae0: 706c 6f74 5f64 6620 3d20 7064 2e44 6174  plot_df = pd.Dat
+00018af0: 6146 7261 6d65 280d 0a20 2020 2020 2020  aFrame(..       
+00018b00: 2020 2020 207b 0d0a 2020 2020 2020 2020       {..        
+00018b10: 2020 2020 2020 2020 2764 6563 6c69 6e65          'decline
+00018b20: 5f61 6363 656c 6572 6174 696e 6727 3a20  _accelerating': 
+00018b30: 6375 725f 7472 656e 645b 0d0a 2020 2020  cur_trend[..    
 00018b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b50: 2020 280d 0a20 2020 2020 2020 2020 2020    (..           
-00018b60: 2020 2020 2020 2020 2020 2020 206e 702e               np.
-00018b70: 6873 7461 636b 2828 6e70 2e73 6967 6e62  hstack((np.signb
-00018b80: 6974 2873 656c 662e 6163 6365 6c5b 3a2c  it(self.accel[:,
-00018b90: 2070 5f69 6e64 785d 292c 2046 616c 7365   p_indx]), False
-00018ba0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-00018bb0: 2020 2020 2020 2020 2020 2020 2620 7365              & se
-00018bc0: 6c66 2e73 6c6f 7065 5f73 6967 6e5b 3a2c  lf.slope_sign[:,
-00018bd0: 2070 5f69 6e64 785d 0d0a 2020 2020 2020   p_indx]..      
-00018be0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-00018bf0: 2d74 6c73 3a5d 0d0a 2020 2020 2020 2020  -tls:]..        
-00018c00: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
-00018c10: 2020 2020 2020 2020 2020 2020 2764 6563              'dec
-00018c20: 6c69 6e65 5f64 6563 656c 6572 6174 696e  line_deceleratin
-00018c30: 6727 3a20 6375 725f 7472 656e 645b 0d0a  g': cur_trend[..
+00018b50: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00018b60: 2020 2020 2020 2020 2020 206e 702e 6873             np.hs
+00018b70: 7461 636b 2828 6e70 2e73 6967 6e62 6974  tack((np.signbit
+00018b80: 2873 656c 662e 6163 6365 6c5b 3a2c 2070  (self.accel[:, p
+00018b90: 5f69 6e64 785d 292c 2046 616c 7365 2929  _indx]), False))
+00018ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018bb0: 2020 2020 2020 2020 2020 2620 7365 6c66            & self
+00018bc0: 2e73 6c6f 7065 5f73 6967 6e5b 3a2c 2070  .slope_sign[:, p
+00018bd0: 5f69 6e64 785d 0d0a 2020 2020 2020 2020  _indx]..        
+00018be0: 2020 2020 2020 2020 2020 2020 295b 2d74              )[-t
+00018bf0: 6c73 3a5d 0d0a 2020 2020 2020 2020 2020  ls:]..          
+00018c00: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
+00018c10: 2020 2020 2020 2020 2020 2764 6563 6c69            'decli
+00018c20: 6e65 5f64 6563 656c 6572 6174 696e 6727  ne_decelerating'
+00018c30: 3a20 6375 725f 7472 656e 645b 0d0a 2020  : cur_trend[..  
 00018c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018c50: 2020 2020 280d 0a20 2020 2020 2020 2020      (..         
-00018c60: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-00018c70: 7e6e 702e 6873 7461 636b 2828 6e70 2e73  ~np.hstack((np.s
-00018c80: 6967 6e62 6974 2873 656c 662e 6163 6365  ignbit(self.acce
-00018c90: 6c5b 3a2c 2070 5f69 6e64 785d 292c 2046  l[:, p_indx]), F
-00018ca0: 616c 7365 2929 290d 0a20 2020 2020 2020  alse)))..       
-00018cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cc0: 2026 2073 656c 662e 736c 6f70 655f 7369   & self.slope_si
-00018cd0: 676e 5b3a 2c20 705f 696e 6478 5d0d 0a20  gn[:, p_indx].. 
+00018c50: 2020 280d 0a20 2020 2020 2020 2020 2020    (..           
+00018c60: 2020 2020 2020 2020 2020 2020 2028 7e6e               (~n
+00018c70: 702e 6873 7461 636b 2828 6e70 2e73 6967  p.hstack((np.sig
+00018c80: 6e62 6974 2873 656c 662e 6163 6365 6c5b  nbit(self.accel[
+00018c90: 3a2c 2070 5f69 6e64 785d 292c 2046 616c  :, p_indx]), Fal
+00018ca0: 7365 2929 290d 0a20 2020 2020 2020 2020  se)))..         
+00018cb0: 2020 2020 2020 2020 2020 2020 2020 2026                 &
+00018cc0: 2073 656c 662e 736c 6f70 655f 7369 676e   self.slope_sign
+00018cd0: 5b3a 2c20 705f 696e 6478 5d0d 0a20 2020  [:, p_indx]..   
 00018ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cf0: 2020 2029 5b2d 746c 733a 5d0d 0a20 2020     )[-tls:]..   
-00018d00: 2020 2020 2020 2020 2020 2020 205d 2c0d               ],.
-00018d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018d20: 2027 6772 6f77 7468 5f64 6563 656c 6572   'growth_deceler
-00018d30: 6174 696e 6727 3a20 6375 725f 7472 656e  ating': cur_tren
-00018d40: 645b 0d0a 2020 2020 2020 2020 2020 2020  d[..            
-00018d50: 2020 2020 2020 2020 280d 0a20 2020 2020          (..     
+00018cf0: 2029 5b2d 746c 733a 5d0d 0a20 2020 2020   )[-tls:]..     
+00018d00: 2020 2020 2020 2020 2020 205d 2c0d 0a20             ],.. 
+00018d10: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00018d20: 6772 6f77 7468 5f64 6563 656c 6572 6174  growth_decelerat
+00018d30: 696e 6727 3a20 6375 725f 7472 656e 645b  ing': cur_trend[
+00018d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018d50: 2020 2020 2020 280d 0a20 2020 2020 2020        (..       
 00018d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d70: 2020 206e 702e 6873 7461 636b 2828 6e70     np.hstack((np
-00018d80: 2e73 6967 6e62 6974 2873 656c 662e 6163  .signbit(self.ac
-00018d90: 6365 6c5b 3a2c 2070 5f69 6e64 785d 292c  cel[:, p_indx]),
-00018da0: 2046 616c 7365 2929 0d0a 2020 2020 2020   False))..      
+00018d70: 206e 702e 6873 7461 636b 2828 6e70 2e73   np.hstack((np.s
+00018d80: 6967 6e62 6974 2873 656c 662e 6163 6365  ignbit(self.acce
+00018d90: 6c5b 3a2c 2070 5f69 6e64 785d 292c 2046  l[:, p_indx]), F
+00018da0: 616c 7365 2929 0d0a 2020 2020 2020 2020  alse))..        
 00018db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018dc0: 2020 2620 287e 7365 6c66 2e73 6c6f 7065    & (~self.slope
-00018dd0: 5f73 6967 6e5b 3a2c 2070 5f69 6e64 785d  _sign[:, p_indx]
-00018de0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00018df0: 2020 2020 2020 2029 5b2d 746c 733a 5d0d         )[-tls:].
-00018e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018e10: 205d 2c0d 0a20 2020 2020 2020 2020 2020   ],..           
-00018e20: 2020 2020 2027 6772 6f77 7468 5f61 6363       'growth_acc
-00018e30: 656c 6572 6174 696e 6727 3a20 6375 725f  elerating': cur_
-00018e40: 7472 656e 645b 0d0a 2020 2020 2020 2020  trend[..        
-00018e50: 2020 2020 2020 2020 2020 2020 280d 0a20              (.. 
+00018dc0: 2620 287e 7365 6c66 2e73 6c6f 7065 5f73  & (~self.slope_s
+00018dd0: 6967 6e5b 3a2c 2070 5f69 6e64 785d 290d  ign[:, p_indx]).
+00018de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018df0: 2020 2020 2029 5b2d 746c 733a 5d0d 0a20       )[-tls:].. 
+00018e00: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00018e10: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00018e20: 2020 2027 6772 6f77 7468 5f61 6363 656c     'growth_accel
+00018e30: 6572 6174 696e 6727 3a20 6375 725f 7472  erating': cur_tr
+00018e40: 656e 645b 0d0a 2020 2020 2020 2020 2020  end[..          
+00018e50: 2020 2020 2020 2020 2020 280d 0a20 2020            (..   
 00018e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e70: 2020 2020 2020 2028 7e6e 702e 6873 7461         (~np.hsta
-00018e80: 636b 2828 6e70 2e73 6967 6e62 6974 2873  ck((np.signbit(s
-00018e90: 656c 662e 6163 6365 6c5b 3a2c 2070 5f69  elf.accel[:, p_i
-00018ea0: 6e64 785d 292c 2046 616c 7365 2929 290d  ndx]), False))).
-00018eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018ec0: 2020 2020 2020 2020 2026 2028 7e73 656c           & (~sel
-00018ed0: 662e 736c 6f70 655f 7369 676e 5b3a 2c20  f.slope_sign[:, 
-00018ee0: 705f 696e 6478 5d29 0d0a 2020 2020 2020  p_indx])..      
-00018ef0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-00018f00: 2d74 6c73 3a5d 0d0a 2020 2020 2020 2020  -tls:]..        
-00018f10: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
-00018f20: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
-00018f30: 2020 2020 2020 2020 696e 6465 783d 6375          index=cu
-00018f40: 725f 7472 656e 642e 696e 6465 782c 0d0a  r_trend.index,..
-00018f50: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00018f60: 2020 2069 6620 7374 6172 745f 6461 7465     if start_date
-00018f70: 203d 3d20 2261 7574 6f22 3a0d 0a20 2020   == "auto":..   
-00018f80: 2020 2020 2020 2020 2073 6c78 203d 2073           slx = s
-00018f90: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
-00018fa0: 6774 6820 2a20 330d 0a20 2020 2020 2020  gth * 3..       
-00018fb0: 2020 2020 2069 6620 736c 7820 3e20 6c65       if slx > le
-00018fc0: 6e28 706c 6f74 5f64 662e 696e 6465 7829  n(plot_df.index)
-00018fd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00018fe0: 2020 2073 6c78 203d 2030 0d0a 2020 2020     slx = 0..    
-00018ff0: 2020 2020 2020 2020 7374 6172 745f 6461          start_da
-00019000: 7465 203d 2070 6c6f 745f 6466 2e69 6e64  te = plot_df.ind
-00019010: 6578 5b2d 736c 785d 0d0a 2020 2020 2020  ex[-slx]..      
-00019020: 2020 6966 2073 7461 7274 5f64 6174 6520    if start_date 
-00019030: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00019040: 2020 2020 2020 2020 2020 706c 6f74 5f64            plot_d
-00019050: 6620 3d20 706c 6f74 5f64 665b 706c 6f74  f = plot_df[plot
-00019060: 5f64 662e 696e 6465 7820 3e3d 2073 7461  _df.index >= sta
-00019070: 7274 5f64 6174 655d 0d0a 2020 2020 2020  rt_date]..      
-00019080: 2020 6178 203d 2070 6c6f 745f 6466 2e70    ax = plot_df.p
-00019090: 6c6f 7428 7469 746c 653d 7469 746c 652c  lot(title=title,
-000190a0: 2063 6f6c 6f72 3d63 6f6c 6f72 732c 202a   color=colors, *
-000190b0: 2a6b 7761 7267 7329 0d0a 2020 2020 2020  *kwargs)..      
-000190c0: 2020 6861 6e64 6c65 732c 206c 6162 656c    handles, label
-000190d0: 7320 3d20 6178 2e67 6574 5f6c 6567 656e  s = ax.get_legen
-000190e0: 645f 6861 6e64 6c65 735f 6c61 6265 6c73  d_handles_labels
-000190f0: 2829 0d0a 2020 2020 2020 2020 2320 6178  ()..        # ax
-00019100: 2e73 6361 7474 6572 2863 7572 5f74 7265  .scatter(cur_tre
-00019110: 6e64 2e69 6e64 6578 5b73 656c 662e 6368  nd.index[self.ch
-00019120: 616e 6765 706f 696e 7473 5b3a 2c20 705f  angepoints[:, p_
-00019130: 696e 6478 5d5d 2c20 6375 725f 7472 656e  indx]], cur_tren
-00019140: 645b 7365 6c66 2e63 6861 6e67 6570 6f69  d[self.changepoi
-00019150: 6e74 735b 3a2c 2070 5f69 6e64 785d 5d2c  nts[:, p_indx]],
-00019160: 2063 3d27 2366 6463 6330 3927 2c20 733d   c='#fdcc09', s=
-00019170: 342e 3029 0d0a 2020 2020 2020 2020 2320  4.0)..        # 
-00019180: 6178 2e73 6361 7474 6572 2863 7572 5f74  ax.scatter(cur_t
-00019190: 7265 6e64 2e69 6e64 6578 5b73 656c 662e  rend.index[self.
-000191a0: 7a65 726f 5f63 726f 7373 696e 6773 5b3a  zero_crossings[:
-000191b0: 2c20 705f 696e 6478 5d5d 2c20 6375 725f  , p_indx]], cur_
-000191c0: 7472 656e 645b 7365 6c66 2e7a 6572 6f5f  trend[self.zero_
-000191d0: 6372 6f73 7369 6e67 735b 3a2c 2070 5f69  crossings[:, p_i
-000191e0: 6e64 785d 5d2c 2063 3d27 2335 3132 6637  ndx]], c='#512f7
-000191f0: 3427 2c20 733d 342e 3029 0d0a 2020 2020  4', s=4.0)..    
-00019200: 2020 2020 6966 2073 656c 662e 7472 656e      if self.tren
-00019210: 645f 616e 6f6d 616c 795f 6465 7465 6374  d_anomaly_detect
-00019220: 6f72 2069 7320 6e6f 7420 4e6f 6e65 3a0d  or is not None:.
-00019230: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00019240: 7365 6c66 2e74 7265 6e64 5f61 6e6f 6d61  self.trend_anoma
-00019250: 6c79 5f64 6574 6563 746f 722e 6f75 7470  ly_detector.outp
-00019260: 7574 203d 3d20 2275 6e69 7661 7269 6174  ut == "univariat
-00019270: 6522 3a0d 0a20 2020 2020 2020 2020 2020  e":..           
-00019280: 2020 2020 2069 5f61 6e6f 6d20 3d20 7365       i_anom = se
-00019290: 6c66 2e74 7265 6e64 5f61 6e6f 6d61 6c79  lf.trend_anomaly
-000192a0: 5f64 6574 6563 746f 722e 616e 6f6d 616c  _detector.anomal
-000192b0: 6965 732e 696e 6465 785b 0d0a 2020 2020  ies.index[..    
-000192c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192d0: 7365 6c66 2e61 6e6f 6d61 6c79 5f64 6574  self.anomaly_det
-000192e0: 6563 746f 722e 616e 6f6d 616c 6965 732e  ector.anomalies.
-000192f0: 696c 6f63 5b3a 2c20 305d 203d 3d20 2d31  iloc[:, 0] == -1
-00019300: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019310: 2020 5d0d 0a20 2020 2020 2020 2020 2020    ]..           
-00019320: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00019330: 2020 2020 2020 2020 7365 7269 6573 5f61          series_a
-00019340: 6e6f 6d20 3d20 7365 6c66 2e74 7265 6e64  nom = self.trend
-00019350: 5f61 6e6f 6d61 6c79 5f64 6574 6563 746f  _anomaly_detecto
-00019360: 722e 616e 6f6d 616c 6965 735b 7365 7269  r.anomalies[seri
-00019370: 6573 5d0d 0a20 2020 2020 2020 2020 2020  es]..           
-00019380: 2020 2020 2069 5f61 6e6f 6d20 3d20 7365       i_anom = se
-00019390: 7269 6573 5f61 6e6f 6d5b 7365 7269 6573  ries_anom[series
-000193a0: 5f61 6e6f 6d20 3d3d 202d 315d 2e69 6e64  _anom == -1].ind
-000193b0: 6578 0d0a 2020 2020 2020 2020 2020 2020  ex..            
-000193c0: 6966 2073 7461 7274 5f64 6174 6520 6973  if start_date is
-000193d0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-000193e0: 2020 2020 2020 2020 2020 2020 695f 616e              i_an
-000193f0: 6f6d 203d 2069 5f61 6e6f 6d5b 695f 616e  om = i_anom[i_an
-00019400: 6f6d 203e 3d20 7374 6172 745f 6461 7465  om >= start_date
-00019410: 5d0d 0a20 2020 2020 2020 2020 2020 2069  ]..            i
-00019420: 5f61 6e6f 6d20 3d20 695f 616e 6f6d 5b69  _anom = i_anom[i
-00019430: 5f61 6e6f 6d20 3e3d 2063 7572 5f74 7265  _anom >= cur_tre
-00019440: 6e64 2e69 6e64 6578 5b30 5d5d 0d0a 2020  nd.index[0]]..  
-00019450: 2020 2020 2020 2020 2020 2320 6f6e 6c79            # only
-00019460: 2070 6c6f 7420 6966 2073 6f6d 6520 616e   plot if some an
-00019470: 6f6d 616c 6965 732c 2061 6e64 206e 6f74  omalies, and not
-00019480: 2077 6179 2074 6f6f 206d 616e 7920 616e   way too many an
-00019490: 6f6d 616c 6965 730d 0a20 2020 2020 2020  omalies..       
-000194a0: 2020 2020 2069 6620 6c65 6e28 695f 616e       if len(i_an
-000194b0: 6f6d 2920 3e20 3020 616e 6420 6c65 6e28  om) > 0 and len(
-000194c0: 695f 616e 6f6d 2920 3c20 6c65 6e28 706c  i_anom) < len(pl
-000194d0: 6f74 5f64 6629 202a 2030 2e35 3a0d 0a20  ot_df) * 0.5:.. 
-000194e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000194f0: 6361 7431 203d 2061 782e 7363 6174 7465  cat1 = ax.scatte
-00019500: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00019510: 2020 2020 2020 2020 695f 616e 6f6d 2e74          i_anom.t
-00019520: 6f6c 6973 7428 292c 2063 7572 5f74 7265  olist(), cur_tre
-00019530: 6e64 2e6c 6f63 5b69 5f61 6e6f 6d5d 2c20  nd.loc[i_anom], 
-00019540: 633d 2272 6564 222c 2073 3d31 362e 300d  c="red", s=16.0.
-00019550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019560: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00019570: 2020 2020 6861 6e64 6c65 7320 2b3d 205b      handles += [
-00019580: 7363 6174 315d 0d0a 2020 2020 2020 2020  scat1]..        
-00019590: 2020 2020 2020 2020 6c61 6265 6c73 202b          labels +
-000195a0: 3d20 5b27 7472 656e 6420 616e 6f6d 616c  = ['trend anomal
-000195b0: 6965 7327 5d0d 0a20 2020 2020 2020 2069  ies']..        i
-000195c0: 6620 766c 696e 6520 6973 206e 6f74 204e  f vline is not N
-000195d0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-000195e0: 2020 6178 2e76 6c69 6e65 7328 0d0a 2020    ax.vlines(..  
-000195f0: 2020 2020 2020 2020 2020 2020 2020 783d                x=
-00019600: 766c 696e 652c 0d0a 2020 2020 2020 2020  vline,..        
-00019610: 2020 2020 2020 2020 6c73 3d27 2d2d 272c          ls='--',
-00019620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019630: 2020 6c77 3d31 2c0d 0a20 2020 2020 2020    lw=1,..       
-00019640: 2020 2020 2020 2020 2063 6f6c 6f72 733d           colors=
-00019650: 2764 6172 6b72 6564 272c 0d0a 2020 2020  'darkred',..    
-00019660: 2020 2020 2020 2020 2020 2020 796d 696e              ymin
-00019670: 3d63 7572 5f74 7265 6e64 5b63 7572 5f74  =cur_trend[cur_t
-00019680: 7265 6e64 2e69 6e64 6578 203e 3d20 7374  rend.index >= st
-00019690: 6172 745f 6461 7465 5d2e 6d69 6e28 292c  art_date].min(),
-000196a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000196b0: 2020 796d 6178 3d63 7572 5f74 7265 6e64    ymax=cur_trend
-000196c0: 5b63 7572 5f74 7265 6e64 2e69 6e64 6578  [cur_trend.index
-000196d0: 203e 3d20 7374 6172 745f 6461 7465 5d2e   >= start_date].
-000196e0: 6d61 7828 292c 0d0a 2020 2020 2020 2020  max(),..        
-000196f0: 2020 2020 290d 0a20 2020 2020 2020 2061      )..        a
-00019700: 782e 6c65 6765 6e64 2868 616e 646c 6573  x.legend(handles
-00019710: 2c20 6c61 6265 6c73 290d 0a20 2020 2020  , labels)..     
-00019720: 2020 2072 6574 7572 6e20 6178 0d0a 0d0a     return ax....
-00019730: 2020 2020 6465 6620 706c 6f74 5f66 6f72      def plot_for
-00019740: 6563 6173 7428 0d0a 2020 2020 2020 2020  ecast(..        
-00019750: 7365 6c66 2c0d 0a20 2020 2020 2020 2070  self,..        p
-00019760: 7265 6469 6374 696f 6e2c 0d0a 2020 2020  rediction,..    
-00019770: 2020 2020 6163 7475 616c 733d 4e6f 6e65      actuals=None
-00019780: 2c0d 0a20 2020 2020 2020 2073 6572 6965  ,..        serie
-00019790: 733d 4e6f 6e65 2c0d 0a20 2020 2020 2020  s=None,..       
-000197a0: 2073 7461 7274 5f64 6174 653d 4e6f 6e65   start_date=None
-000197b0: 2c0d 0a20 2020 2020 2020 2061 6e6f 6d61  ,..        anoma
-000197c0: 6c79 5f63 6f6c 6f72 3d22 6461 726b 736c  ly_color="darksl
-000197d0: 6174 6562 6c75 6522 2c0d 0a20 2020 2020  ateblue",..     
-000197e0: 2020 2068 6f6c 6964 6179 5f63 6f6c 6f72     holiday_color
-000197f0: 3d22 6461 726b 6772 6565 6e22 2c0d 0a20  ="darkgreen",.. 
-00019800: 2020 2020 2020 2074 7265 6e64 5f61 6e6f         trend_ano
-00019810: 6d61 6c79 5f63 6f6c 6f72 3d27 736c 6174  maly_color='slat
-00019820: 6567 7261 7927 2c0d 0a20 2020 2020 2020  egray',..       
-00019830: 2070 6f69 6e74 5f73 697a 653d 3132 2e30   point_size=12.0
-00019840: 2c0d 0a20 2020 2029 3a0d 0a20 2020 2020  ,..    ):..     
-00019850: 2020 2022 2222 506c 6f74 2061 2066 6f72     """Plot a for
-00019860: 6563 6173 7420 7469 6d65 2073 6572 6965  ecast time serie
-00019870: 732e 0d0a 0d0a 2020 2020 2020 2020 4172  s.....        Ar
-00019880: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-00019890: 2070 7265 6469 6374 696f 6e20 286d 6f64   prediction (mod
-000198a0: 656c 2070 7265 6469 6374 696f 6e20 6f62  el prediction ob
-000198b0: 6a65 6374 2c20 7265 7175 6972 6564 290d  ject, required).
-000198c0: 0a20 2020 2020 2020 2020 2020 2061 6374  .            act
-000198d0: 7561 6c73 2028 7064 2e44 6174 6146 7261  uals (pd.DataFra
-000198e0: 6d65 293a 2077 6964 6520 7374 796c 6520  me): wide style 
-000198f0: 6466 2c20 6f66 206b 6e6f 7720 6461 7461  df, of know data
-00019900: 2069 6620 6176 6169 6c61 626c 650d 0a20   if available.. 
-00019910: 2020 2020 2020 2020 2020 2073 6572 6965             serie
-00019920: 7320 2873 7472 293a 206e 616d 6520 6f66  s (str): name of
-00019930: 2074 696d 6520 7365 7269 6573 2063 6f6c   time series col
-00019940: 756d 6e20 746f 2070 6c6f 740d 0a20 2020  umn to plot..   
-00019950: 2020 2020 2020 2020 2073 7461 7274 5f64           start_d
-00019960: 6174 6520 2873 7472 206f 7220 5469 6d65  ate (str or Time
-00019970: 7374 616d 7029 3a20 706f 696e 7420 6174  stamp): point at
-00019980: 2077 6869 6368 2074 6f20 6265 6769 6e20   which to begin 
-00019990: 5820 6178 6973 0d0a 2020 2020 2020 2020  X axis..        
-000199a0: 2020 2020 616e 6f6d 616c 795f 636f 6c6f      anomaly_colo
-000199b0: 7220 2873 7472 293a 206e 616d 6520 6f66  r (str): name of
-000199c0: 2061 6e6f 6d61 6c79 2070 6f69 6e74 2063   anomaly point c
-000199d0: 6f6c 6f72 0d0a 2020 2020 2020 2020 2020  olor..          
-000199e0: 2020 686f 6c69 6461 795f 636f 6c6f 7220    holiday_color 
-000199f0: 2873 7472 293a 206e 616d 6520 6f66 2068  (str): name of h
-00019a00: 6f6c 6964 6179 2070 6f69 6e74 2063 6f6c  oliday point col
-00019a10: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
-00019a20: 7472 656e 645f 616e 6f6d 616c 795f 636f  trend_anomaly_co
-00019a30: 6c6f 7220 2873 7472 293a 206e 616d 6520  lor (str): name 
-00019a40: 6f66 2074 7265 6e64 2061 6e6f 6d61 6c79  of trend anomaly
-00019a50: 2070 6f69 6e74 2063 6f6c 6f72 0d0a 2020   point color..  
-00019a60: 2020 2020 2020 2020 2020 706f 696e 745f            point_
-00019a70: 7369 7a65 2028 7374 7229 3a20 706f 696e  size (str): poin
-00019a80: 7420 7369 7a65 2066 6f72 2061 6c6c 2061  t size for all a
-00019a90: 6e6f 6d61 6c69 6573 0d0a 2020 2020 2020  nomalies..      
-00019aa0: 2020 2222 220d 0a20 2020 2020 2020 2069    """..        i
-00019ab0: 6620 7365 7269 6573 2069 7320 4e6f 6e65  f series is None
-00019ac0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00019ad0: 6572 6965 7320 3d20 7261 6e64 6f6d 2e63  eries = random.c
-00019ae0: 686f 6963 6528 7365 6c66 2e63 6f6c 756d  hoice(self.colum
-00019af0: 6e5f 6e61 6d65 7329 0d0a 2020 2020 2020  n_names)..      
-00019b00: 2020 6966 2061 6374 7561 6c73 2069 7320    if actuals is 
-00019b10: 4e6f 6e65 206f 7220 6e6f 7420 6973 696e  None or not isin
-00019b20: 7374 616e 6365 280d 0a20 2020 2020 2020  stance(..       
-00019b30: 2020 2020 2061 6374 7561 6c73 2c20 2870       actuals, (p
-00019b40: 642e 4461 7461 4672 616d 652c 206e 702e  d.DataFrame, np.
-00019b50: 6172 7261 792c 2070 642e 5365 7269 6573  array, pd.Series
-00019b60: 290d 0a20 2020 2020 2020 2029 3a0d 0a20  )..        ):.. 
-00019b70: 2020 2020 2020 2020 2020 2061 6374 7561             actua
-00019b80: 6c73 5f75 7365 6420 3d20 7072 6564 6963  ls_used = predic
-00019b90: 7469 6f6e 2e66 6f72 6563 6173 740d 0a20  tion.forecast.. 
-00019ba0: 2020 2020 2020 2020 2020 2061 6374 7561             actua
-00019bb0: 6c73 5f66 6c61 6720 3d20 4661 6c73 650d  ls_flag = False.
-00019bc0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00019bd0: 2020 2020 2020 2020 2020 2020 6163 7475              actu
-00019be0: 616c 735f 666c 6167 203d 2054 7275 650d  als_flag = True.
-00019bf0: 0a20 2020 2020 2020 2020 2020 2061 6374  .            act
-00019c00: 7561 6c73 5f75 7365 6420 3d20 6163 7475  uals_used = actu
-00019c10: 616c 732e 7265 696e 6465 7828 7072 6564  als.reindex(pred
-00019c20: 6963 7469 6f6e 2e66 6f72 6563 6173 742e  iction.forecast.
-00019c30: 696e 6465 7829 0d0a 2020 2020 2020 2020  index)..        
-00019c40: 766c 696e 6520 3d20 280d 0a20 2020 2020  vline = (..     
-00019c50: 2020 2020 2020 204e 6f6e 650d 0a20 2020         None..   
-00019c60: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00019c70: 2e66 6f72 6563 6173 745f 6c65 6e67 7468  .forecast_length
-00019c80: 2069 7320 4e6f 6e65 0d0a 2020 2020 2020   is None..      
-00019c90: 2020 2020 2020 656c 7365 2070 7265 6469        else predi
-00019ca0: 6374 696f 6e2e 666f 7265 6361 7374 2e69  ction.forecast.i
-00019cb0: 6e64 6578 5b2d 7365 6c66 2e66 6f72 6563  ndex[-self.forec
-00019cc0: 6173 745f 6c65 6e67 7468 5d0d 0a20 2020  ast_length]..   
-00019cd0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00019ce0: 6966 2073 7461 7274 5f64 6174 6520 3d3d  if start_date ==
-00019cf0: 2022 6175 746f 223a 0d0a 2020 2020 2020   "auto":..      
-00019d00: 2020 2020 2020 6966 2061 6374 7561 6c73        if actuals
-00019d10: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00019d20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00019d30: 6c78 203d 202d 7365 6c66 2e66 6f72 6563  lx = -self.forec
-00019d40: 6173 745f 6c65 6e67 7468 202a 2033 0d0a  ast_length * 3..
-00019d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019d60: 6966 2061 6273 2873 6c78 2920 3e20 6163  if abs(slx) > ac
-00019d70: 7475 616c 732e 7368 6170 655b 305d 3a0d  tuals.shape[0]:.
-00019d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019d90: 2020 2020 2073 6c78 203d 2030 0d0a 2020       slx = 0..  
-00019da0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00019db0: 6172 745f 6461 7465 203d 2061 6374 7561  art_date = actua
-00019dc0: 6c73 2e69 6e64 6578 5b73 6c78 5d0d 0a20  ls.index[slx].. 
-00019dd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00019de0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019df0: 2020 7374 6172 745f 6461 7465 203d 2070    start_date = p
-00019e00: 7265 6469 6374 696f 6e2e 666f 7265 6361  rediction.foreca
-00019e10: 7374 2e69 6e64 6578 5b30 5d0d 0a20 2020  st.index[0]..   
-00019e20: 2020 2020 2061 7820 3d20 7072 6564 6963       ax = predic
-00019e30: 7469 6f6e 2e70 6c6f 7428 0d0a 2020 2020  tion.plot(..    
-00019e40: 2020 2020 2020 2020 6163 7475 616c 735f          actuals_
-00019e50: 7573 6564 2e6c 6f63 5b70 7265 6469 6374  used.loc[predict
-00019e60: 696f 6e2e 666f 7265 6361 7374 2e69 6e64  ion.forecast.ind
-00019e70: 6578 5d0d 0a20 2020 2020 2020 2020 2020  ex]..           
-00019e80: 2069 6620 6163 7475 616c 735f 666c 6167   if actuals_flag
-00019e90: 2069 7320 6e6f 7420 4e6f 6e65 0d0a 2020   is not None..  
-00019ea0: 2020 2020 2020 2020 2020 656c 7365 204e            else N
-00019eb0: 6f6e 652c 0d0a 2020 2020 2020 2020 2020  one,..          
-00019ec0: 2020 7365 7269 6573 3d73 6572 6965 732c    series=series,
-00019ed0: 0d0a 2020 2020 2020 2020 2020 2020 766c  ..            vl
-00019ee0: 696e 653d 766c 696e 652c 0d0a 2020 2020  ine=vline,..    
-00019ef0: 2020 2020 2020 2020 7374 6172 745f 6461          start_da
-00019f00: 7465 3d73 7461 7274 5f64 6174 652c 0d0a  te=start_date,..
-00019f10: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00019f20: 2020 2068 616e 646c 6573 2c20 6c61 6265     handles, labe
-00019f30: 6c73 203d 2061 782e 6765 745f 6c65 6765  ls = ax.get_lege
-00019f40: 6e64 5f68 616e 646c 6573 5f6c 6162 656c  nd_handles_label
-00019f50: 7328 290d 0a20 2020 2020 2020 2069 6620  s()..        if 
-00019f60: 7365 6c66 2e61 6e6f 6d61 6c79 5f64 6574  self.anomaly_det
-00019f70: 6563 746f 723a 0d0a 2020 2020 2020 2020  ector:..        
-00019f80: 2020 2020 6966 2073 656c 662e 616e 6f6d      if self.anom
-00019f90: 616c 795f 6465 7465 6374 6f72 2e6f 7574  aly_detector.out
-00019fa0: 7075 7420 3d3d 2022 756e 6976 6172 6961  put == "univaria
-00019fb0: 7465 223a 0d0a 2020 2020 2020 2020 2020  te":..          
-00019fc0: 2020 2020 2020 695f 616e 6f6d 203d 2073        i_anom = s
-00019fd0: 656c 662e 616e 6f6d 616c 795f 6465 7465  elf.anomaly_dete
-00019fe0: 6374 6f72 2e61 6e6f 6d61 6c69 6573 2e69  ctor.anomalies.i
-00019ff0: 6e64 6578 5b0d 0a20 2020 2020 2020 2020  ndex[..         
-0001a000: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001a010: 616e 6f6d 616c 795f 6465 7465 6374 6f72  anomaly_detector
-0001a020: 2e61 6e6f 6d61 6c69 6573 2e69 6c6f 635b  .anomalies.iloc[
-0001a030: 3a2c 2030 5d20 3d3d 202d 310d 0a20 2020  :, 0] == -1..   
-0001a040: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
-0001a050: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001a060: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001a070: 2020 2073 6572 6965 735f 616e 6f6d 203d     series_anom =
-0001a080: 2073 656c 662e 616e 6f6d 616c 795f 6465   self.anomaly_de
-0001a090: 7465 6374 6f72 2e61 6e6f 6d61 6c69 6573  tector.anomalies
-0001a0a0: 5b73 6572 6965 735d 0d0a 2020 2020 2020  [series]..      
-0001a0b0: 2020 2020 2020 2020 2020 695f 616e 6f6d            i_anom
-0001a0c0: 203d 2073 6572 6965 735f 616e 6f6d 5b73   = series_anom[s
-0001a0d0: 6572 6965 735f 616e 6f6d 203d 3d20 2d31  eries_anom == -1
-0001a0e0: 5d2e 696e 6465 780d 0a20 2020 2020 2020  ].index..       
-0001a0f0: 2020 2020 2069 6620 7374 6172 745f 6461       if start_da
-0001a100: 7465 2069 7320 6e6f 7420 4e6f 6e65 3a0d  te is not None:.
-0001a110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a120: 2069 5f61 6e6f 6d20 3d20 695f 616e 6f6d   i_anom = i_anom
-0001a130: 5b69 5f61 6e6f 6d20 3e3d 2073 7461 7274  [i_anom >= start
-0001a140: 5f64 6174 655d 0d0a 2020 2020 2020 2020  _date]..        
-0001a150: 2020 2020 6966 2061 6374 7561 6c73 5f66      if actuals_f
-0001a160: 6c61 673a 0d0a 2020 2020 2020 2020 2020  lag:..          
-0001a170: 2020 2020 2020 695f 616e 6f6d 203d 2069        i_anom = i
-0001a180: 5f61 6e6f 6d5b 695f 616e 6f6d 203e 3d20  _anom[i_anom >= 
-0001a190: 6163 7475 616c 732e 696e 6465 785b 305d  actuals.index[0]
-0001a1a0: 5d0d 0a20 2020 2020 2020 2020 2020 2069  ]..            i
-0001a1b0: 6620 6c65 6e28 695f 616e 6f6d 2920 3e20  f len(i_anom) > 
-0001a1c0: 3020 616e 6420 280d 0a20 2020 2020 2020  0 and (..       
-0001a1d0: 2020 2020 2020 2020 206e 6f74 2061 6374           not act
-0001a1e0: 7561 6c73 5f66 6c61 6720 6f72 206c 656e  uals_flag or len
-0001a1f0: 2869 5f61 6e6f 6d29 203c 206c 656e 2861  (i_anom) < len(a
-0001a200: 6374 7561 6c73 2920 2a20 302e 350d 0a20  ctuals) * 0.5.. 
-0001a210: 2020 2020 2020 2020 2020 2029 3a0d 0a20             ):.. 
-0001a220: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001a230: 6361 7431 203d 2061 782e 7363 6174 7465  cat1 = ax.scatte
-0001a240: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-0001a250: 2020 2020 2020 2020 695f 616e 6f6d 2e74          i_anom.t
-0001a260: 6f6c 6973 7428 292c 0d0a 2020 2020 2020  olist(),..      
-0001a270: 2020 2020 2020 2020 2020 2020 2020 6163                ac
-0001a280: 7475 616c 735f 7573 6564 2e72 6569 6e64  tuals_used.reind
-0001a290: 6578 2869 5f61 6e6f 6d29 5b73 6572 6965  ex(i_anom)[serie
-0001a2a0: 735d 2c0d 0a20 2020 2020 2020 2020 2020  s],..           
-0001a2b0: 2020 2020 2020 2020 2063 3d61 6e6f 6d61           c=anoma
-0001a2c0: 6c79 5f63 6f6c 6f72 2c0d 0a20 2020 2020  ly_color,..     
-0001a2d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001a2e0: 3d70 6f69 6e74 5f73 697a 652c 0d0a 2020  =point_size,..  
-0001a2f0: 2020 2020 2020 2020 2020 2020 2020 290d                ).
-0001a300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a310: 2068 616e 646c 6573 202b 3d20 5b73 6361   handles += [sca
-0001a320: 7431 5d0d 0a20 2020 2020 2020 2020 2020  t1]..           
-0001a330: 2020 2020 206c 6162 656c 7320 2b3d 205b       labels += [
-0001a340: 2261 6e6f 6d61 6c69 6573 225d 0d0a 2020  "anomalies"]..  
-0001a350: 2020 2020 2020 6966 2073 656c 662e 686f        if self.ho
-0001a360: 6c69 6461 795f 6465 7465 6374 6f72 3a0d  liday_detector:.
-0001a370: 0a20 2020 2020 2020 2020 2020 2069 5f61  .            i_a
-0001a380: 6e6f 6d20 3d20 7365 6c66 2e68 6f6c 6964  nom = self.holid
-0001a390: 6179 5f64 6574 6563 746f 722e 6461 7465  ay_detector.date
-0001a3a0: 735f 746f 5f68 6f6c 6964 6179 7328 0d0a  s_to_holidays(..
-0001a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a3c0: 7365 6c66 2e64 662e 696e 6465 782c 2073  self.df.index, s
-0001a3d0: 7479 6c65 3d22 7365 7269 6573 5f66 6c61  tyle="series_fla
-0001a3e0: 6722 0d0a 2020 2020 2020 2020 2020 2020  g"..            
-0001a3f0: 295b 7365 7269 6573 5d0d 0a20 2020 2020  )[series]..     
-0001a400: 2020 2020 2020 2069 5f61 6e6f 6d20 3d20         i_anom = 
-0001a410: 695f 616e 6f6d 2e69 6e64 6578 5b69 5f61  i_anom.index[i_a
-0001a420: 6e6f 6d20 3d3d 2031 5d0d 0a20 2020 2020  nom == 1]..     
-0001a430: 2020 2020 2020 2069 6620 6163 7475 616c         if actual
-0001a440: 735f 666c 6167 3a0d 0a20 2020 2020 2020  s_flag:..       
-0001a450: 2020 2020 2020 2020 2069 5f61 6e6f 6d20           i_anom 
-0001a460: 3d20 695f 616e 6f6d 5b69 5f61 6e6f 6d20  = i_anom[i_anom 
-0001a470: 3e3d 2061 6374 7561 6c73 2e69 6e64 6578  >= actuals.index
-0001a480: 5b30 5d5d 0d0a 2020 2020 2020 2020 2020  [0]]..          
-0001a490: 2020 6966 206c 656e 2869 5f61 6e6f 6d29    if len(i_anom)
-0001a4a0: 203e 2030 2061 6e64 2028 0d0a 2020 2020   > 0 and (..    
-0001a4b0: 2020 2020 2020 2020 2020 2020 6e6f 7420              not 
-0001a4c0: 6163 7475 616c 735f 666c 6167 206f 7220  actuals_flag or 
-0001a4d0: 6c65 6e28 695f 616e 6f6d 2920 3c20 6c65  len(i_anom) < le
-0001a4e0: 6e28 6163 7475 616c 7329 202a 2030 2e35  n(actuals) * 0.5
-0001a4f0: 0d0a 2020 2020 2020 2020 2020 2020 293a  ..            ):
-0001a500: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a510: 2020 7363 6174 3220 3d20 6178 2e73 6361    scat2 = ax.sca
-0001a520: 7474 6572 280d 0a20 2020 2020 2020 2020  tter(..         
-0001a530: 2020 2020 2020 2020 2020 2069 5f61 6e6f             i_ano
-0001a540: 6d2e 746f 6c69 7374 2829 2c0d 0a20 2020  m.tolist(),..   
-0001a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a560: 2061 6374 7561 6c73 5f75 7365 642e 7265   actuals_used.re
-0001a570: 696e 6465 7828 695f 616e 6f6d 295b 7365  index(i_anom)[se
-0001a580: 7269 6573 5d2c 0d0a 2020 2020 2020 2020  ries],..        
-0001a590: 2020 2020 2020 2020 2020 2020 633d 686f              c=ho
-0001a5a0: 6c69 6461 795f 636f 6c6f 722c 0d0a 2020  liday_color,..  
+00018e70: 2020 2020 2028 7e6e 702e 6873 7461 636b       (~np.hstack
+00018e80: 2828 6e70 2e73 6967 6e62 6974 2873 656c  ((np.signbit(sel
+00018e90: 662e 6163 6365 6c5b 3a2c 2070 5f69 6e64  f.accel[:, p_ind
+00018ea0: 785d 292c 2046 616c 7365 2929 290d 0a20  x]), False))).. 
+00018eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ec0: 2020 2020 2020 2026 2028 7e73 656c 662e         & (~self.
+00018ed0: 736c 6f70 655f 7369 676e 5b3a 2c20 705f  slope_sign[:, p_
+00018ee0: 696e 6478 5d29 0d0a 2020 2020 2020 2020  indx])..        
+00018ef0: 2020 2020 2020 2020 2020 2020 295b 2d74              )[-t
+00018f00: 6c73 3a5d 0d0a 2020 2020 2020 2020 2020  ls:]..          
+00018f10: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
+00018f20: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+00018f30: 2020 2020 2020 696e 6465 783d 6375 725f        index=cur_
+00018f40: 7472 656e 642e 696e 6465 782c 0d0a 2020  trend.index,..  
+00018f50: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00018f60: 2069 6620 7374 6172 745f 6461 7465 203d   if start_date =
+00018f70: 3d20 2261 7574 6f22 3a0d 0a20 2020 2020  = "auto":..     
+00018f80: 2020 2020 2020 2073 6c78 203d 2073 656c         slx = sel
+00018f90: 662e 666f 7265 6361 7374 5f6c 656e 6774  f.forecast_lengt
+00018fa0: 6820 2a20 330d 0a20 2020 2020 2020 2020  h * 3..         
+00018fb0: 2020 2069 6620 736c 7820 3e20 6c65 6e28     if slx > len(
+00018fc0: 706c 6f74 5f64 662e 696e 6465 7829 3a0d  plot_df.index):.
+00018fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018fe0: 2073 6c78 203d 2030 0d0a 2020 2020 2020   slx = 0..      
+00018ff0: 2020 2020 2020 7374 6172 745f 6461 7465        start_date
+00019000: 203d 2070 6c6f 745f 6466 2e69 6e64 6578   = plot_df.index
+00019010: 5b2d 736c 785d 0d0a 2020 2020 2020 2020  [-slx]..        
+00019020: 6966 2073 7461 7274 5f64 6174 6520 6973  if start_date is
+00019030: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00019040: 2020 2020 2020 2020 706c 6f74 5f64 6620          plot_df 
+00019050: 3d20 706c 6f74 5f64 665b 706c 6f74 5f64  = plot_df[plot_d
+00019060: 662e 696e 6465 7820 3e3d 2073 7461 7274  f.index >= start
+00019070: 5f64 6174 655d 0d0a 2020 2020 2020 2020  _date]..        
+00019080: 6178 203d 2070 6c6f 745f 6466 2e70 6c6f  ax = plot_df.plo
+00019090: 7428 7469 746c 653d 7469 746c 652c 2063  t(title=title, c
+000190a0: 6f6c 6f72 3d63 6f6c 6f72 732c 202a 2a6b  olor=colors, **k
+000190b0: 7761 7267 7329 0d0a 2020 2020 2020 2020  wargs)..        
+000190c0: 6861 6e64 6c65 732c 206c 6162 656c 7320  handles, labels 
+000190d0: 3d20 6178 2e67 6574 5f6c 6567 656e 645f  = ax.get_legend_
+000190e0: 6861 6e64 6c65 735f 6c61 6265 6c73 2829  handles_labels()
+000190f0: 0d0a 2020 2020 2020 2020 2320 6178 2e73  ..        # ax.s
+00019100: 6361 7474 6572 2863 7572 5f74 7265 6e64  catter(cur_trend
+00019110: 2e69 6e64 6578 5b73 656c 662e 6368 616e  .index[self.chan
+00019120: 6765 706f 696e 7473 5b3a 2c20 705f 696e  gepoints[:, p_in
+00019130: 6478 5d5d 2c20 6375 725f 7472 656e 645b  dx]], cur_trend[
+00019140: 7365 6c66 2e63 6861 6e67 6570 6f69 6e74  self.changepoint
+00019150: 735b 3a2c 2070 5f69 6e64 785d 5d2c 2063  s[:, p_indx]], c
+00019160: 3d27 2366 6463 6330 3927 2c20 733d 342e  ='#fdcc09', s=4.
+00019170: 3029 0d0a 2020 2020 2020 2020 2320 6178  0)..        # ax
+00019180: 2e73 6361 7474 6572 2863 7572 5f74 7265  .scatter(cur_tre
+00019190: 6e64 2e69 6e64 6578 5b73 656c 662e 7a65  nd.index[self.ze
+000191a0: 726f 5f63 726f 7373 696e 6773 5b3a 2c20  ro_crossings[:, 
+000191b0: 705f 696e 6478 5d5d 2c20 6375 725f 7472  p_indx]], cur_tr
+000191c0: 656e 645b 7365 6c66 2e7a 6572 6f5f 6372  end[self.zero_cr
+000191d0: 6f73 7369 6e67 735b 3a2c 2070 5f69 6e64  ossings[:, p_ind
+000191e0: 785d 5d2c 2063 3d27 2335 3132 6637 3427  x]], c='#512f74'
+000191f0: 2c20 733d 342e 3029 0d0a 2020 2020 2020  , s=4.0)..      
+00019200: 2020 6966 2073 656c 662e 7472 656e 645f    if self.trend_
+00019210: 616e 6f6d 616c 795f 6465 7465 6374 6f72  anomaly_detector
+00019220: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00019230: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00019240: 6c66 2e74 7265 6e64 5f61 6e6f 6d61 6c79  lf.trend_anomaly
+00019250: 5f64 6574 6563 746f 722e 6f75 7470 7574  _detector.output
+00019260: 203d 3d20 2275 6e69 7661 7269 6174 6522   == "univariate"
+00019270: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00019280: 2020 2069 5f61 6e6f 6d20 3d20 7365 6c66     i_anom = self
+00019290: 2e74 7265 6e64 5f61 6e6f 6d61 6c79 5f64  .trend_anomaly_d
+000192a0: 6574 6563 746f 722e 616e 6f6d 616c 6965  etector.anomalie
+000192b0: 732e 696e 6465 785b 0d0a 2020 2020 2020  s.index[..      
+000192c0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000192d0: 6c66 2e61 6e6f 6d61 6c79 5f64 6574 6563  lf.anomaly_detec
+000192e0: 746f 722e 616e 6f6d 616c 6965 732e 696c  tor.anomalies.il
+000192f0: 6f63 5b3a 2c20 305d 203d 3d20 2d31 0d0a  oc[:, 0] == -1..
+00019300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019310: 5d0d 0a20 2020 2020 2020 2020 2020 2065  ]..            e
+00019320: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00019330: 2020 2020 2020 7365 7269 6573 5f61 6e6f        series_ano
+00019340: 6d20 3d20 7365 6c66 2e74 7265 6e64 5f61  m = self.trend_a
+00019350: 6e6f 6d61 6c79 5f64 6574 6563 746f 722e  nomaly_detector.
+00019360: 616e 6f6d 616c 6965 735b 7365 7269 6573  anomalies[series
+00019370: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00019380: 2020 2069 5f61 6e6f 6d20 3d20 7365 7269     i_anom = seri
+00019390: 6573 5f61 6e6f 6d5b 7365 7269 6573 5f61  es_anom[series_a
+000193a0: 6e6f 6d20 3d3d 202d 315d 2e69 6e64 6578  nom == -1].index
+000193b0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000193c0: 2073 7461 7274 5f64 6174 6520 6973 206e   start_date is n
+000193d0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+000193e0: 2020 2020 2020 2020 2020 695f 616e 6f6d            i_anom
+000193f0: 203d 2069 5f61 6e6f 6d5b 695f 616e 6f6d   = i_anom[i_anom
+00019400: 203e 3d20 7374 6172 745f 6461 7465 5d0d   >= start_date].
+00019410: 0a20 2020 2020 2020 2020 2020 2069 5f61  .            i_a
+00019420: 6e6f 6d20 3d20 695f 616e 6f6d 5b69 5f61  nom = i_anom[i_a
+00019430: 6e6f 6d20 3e3d 2063 7572 5f74 7265 6e64  nom >= cur_trend
+00019440: 2e69 6e64 6578 5b30 5d5d 0d0a 2020 2020  .index[0]]..    
+00019450: 2020 2020 2020 2020 2320 6f6e 6c79 2070          # only p
+00019460: 6c6f 7420 6966 2073 6f6d 6520 616e 6f6d  lot if some anom
+00019470: 616c 6965 732c 2061 6e64 206e 6f74 2077  alies, and not w
+00019480: 6179 2074 6f6f 206d 616e 7920 616e 6f6d  ay too many anom
+00019490: 616c 6965 730d 0a20 2020 2020 2020 2020  alies..         
+000194a0: 2020 2069 6620 6c65 6e28 695f 616e 6f6d     if len(i_anom
+000194b0: 2920 3e20 3020 616e 6420 6c65 6e28 695f  ) > 0 and len(i_
+000194c0: 616e 6f6d 2920 3c20 6c65 6e28 706c 6f74  anom) < len(plot
+000194d0: 5f64 6629 202a 2030 2e35 3a0d 0a20 2020  _df) * 0.5:..   
+000194e0: 2020 2020 2020 2020 2020 2020 2073 6361               sca
+000194f0: 7431 203d 2061 782e 7363 6174 7465 7228  t1 = ax.scatter(
+00019500: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019510: 2020 2020 2020 695f 616e 6f6d 2e74 6f6c        i_anom.tol
+00019520: 6973 7428 292c 2063 7572 5f74 7265 6e64  ist(), cur_trend
+00019530: 2e6c 6f63 5b69 5f61 6e6f 6d5d 2c20 633d  .loc[i_anom], c=
+00019540: 2272 6564 222c 2073 3d31 362e 300d 0a20  "red", s=16.0.. 
+00019550: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00019560: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019570: 2020 6861 6e64 6c65 7320 2b3d 205b 7363    handles += [sc
+00019580: 6174 315d 0d0a 2020 2020 2020 2020 2020  at1]..          
+00019590: 2020 2020 2020 6c61 6265 6c73 202b 3d20        labels += 
+000195a0: 5b27 7472 656e 6420 616e 6f6d 616c 6965  ['trend anomalie
+000195b0: 7327 5d0d 0a20 2020 2020 2020 2069 6620  s']..        if 
+000195c0: 766c 696e 6520 6973 206e 6f74 204e 6f6e  vline is not Non
+000195d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000195e0: 6178 2e76 6c69 6e65 7328 0d0a 2020 2020  ax.vlines(..    
+000195f0: 2020 2020 2020 2020 2020 2020 783d 766c              x=vl
+00019600: 696e 652c 0d0a 2020 2020 2020 2020 2020  ine,..          
+00019610: 2020 2020 2020 6c73 3d27 2d2d 272c 0d0a        ls='--',..
+00019620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019630: 6c77 3d31 2c0d 0a20 2020 2020 2020 2020  lw=1,..         
+00019640: 2020 2020 2020 2063 6f6c 6f72 733d 2764         colors='d
+00019650: 6172 6b72 6564 272c 0d0a 2020 2020 2020  arkred',..      
+00019660: 2020 2020 2020 2020 2020 796d 696e 3d63            ymin=c
+00019670: 7572 5f74 7265 6e64 5b63 7572 5f74 7265  ur_trend[cur_tre
+00019680: 6e64 2e69 6e64 6578 203e 3d20 7374 6172  nd.index >= star
+00019690: 745f 6461 7465 5d2e 6d69 6e28 292c 0d0a  t_date].min(),..
+000196a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196b0: 796d 6178 3d63 7572 5f74 7265 6e64 5b63  ymax=cur_trend[c
+000196c0: 7572 5f74 7265 6e64 2e69 6e64 6578 203e  ur_trend.index >
+000196d0: 3d20 7374 6172 745f 6461 7465 5d2e 6d61  = start_date].ma
+000196e0: 7828 292c 0d0a 2020 2020 2020 2020 2020  x(),..          
+000196f0: 2020 290d 0a20 2020 2020 2020 2061 782e    )..        ax.
+00019700: 6c65 6765 6e64 2868 616e 646c 6573 2c20  legend(handles, 
+00019710: 6c61 6265 6c73 290d 0a20 2020 2020 2020  labels)..       
+00019720: 2072 6574 7572 6e20 6178 0d0a 0d0a 2020   return ax....  
+00019730: 2020 6465 6620 706c 6f74 5f66 6f72 6563    def plot_forec
+00019740: 6173 7428 0d0a 2020 2020 2020 2020 7365  ast(..        se
+00019750: 6c66 2c0d 0a20 2020 2020 2020 2070 7265  lf,..        pre
+00019760: 6469 6374 696f 6e2c 0d0a 2020 2020 2020  diction,..      
+00019770: 2020 6163 7475 616c 733d 4e6f 6e65 2c0d    actuals=None,.
+00019780: 0a20 2020 2020 2020 2073 6572 6965 733d  .        series=
+00019790: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2073  None,..        s
+000197a0: 7461 7274 5f64 6174 653d 4e6f 6e65 2c0d  tart_date=None,.
+000197b0: 0a20 2020 2020 2020 2061 6e6f 6d61 6c79  .        anomaly
+000197c0: 5f63 6f6c 6f72 3d22 6461 726b 736c 6174  _color="darkslat
+000197d0: 6562 6c75 6522 2c0d 0a20 2020 2020 2020  eblue",..       
+000197e0: 2068 6f6c 6964 6179 5f63 6f6c 6f72 3d22   holiday_color="
+000197f0: 6461 726b 6772 6565 6e22 2c0d 0a20 2020  darkgreen",..   
+00019800: 2020 2020 2074 7265 6e64 5f61 6e6f 6d61       trend_anoma
+00019810: 6c79 5f63 6f6c 6f72 3d27 736c 6174 6567  ly_color='slateg
+00019820: 7261 7927 2c0d 0a20 2020 2020 2020 2070  ray',..        p
+00019830: 6f69 6e74 5f73 697a 653d 3132 2e30 2c0d  oint_size=12.0,.
+00019840: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+00019850: 2022 2222 506c 6f74 2061 2066 6f72 6563   """Plot a forec
+00019860: 6173 7420 7469 6d65 2073 6572 6965 732e  ast time series.
+00019870: 0d0a 0d0a 2020 2020 2020 2020 4172 6773  ....        Args
+00019880: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00019890: 7265 6469 6374 696f 6e20 286d 6f64 656c  rediction (model
+000198a0: 2070 7265 6469 6374 696f 6e20 6f62 6a65   prediction obje
+000198b0: 6374 2c20 7265 7175 6972 6564 290d 0a20  ct, required).. 
+000198c0: 2020 2020 2020 2020 2020 2061 6374 7561             actua
+000198d0: 6c73 2028 7064 2e44 6174 6146 7261 6d65  ls (pd.DataFrame
+000198e0: 293a 2077 6964 6520 7374 796c 6520 6466  ): wide style df
+000198f0: 2c20 6f66 206b 6e6f 7720 6461 7461 2069  , of know data i
+00019900: 6620 6176 6169 6c61 626c 650d 0a20 2020  f available..   
+00019910: 2020 2020 2020 2020 2073 6572 6965 7320           series 
+00019920: 2873 7472 293a 206e 616d 6520 6f66 2074  (str): name of t
+00019930: 696d 6520 7365 7269 6573 2063 6f6c 756d  ime series colum
+00019940: 6e20 746f 2070 6c6f 740d 0a20 2020 2020  n to plot..     
+00019950: 2020 2020 2020 2073 7461 7274 5f64 6174         start_dat
+00019960: 6520 2873 7472 206f 7220 5469 6d65 7374  e (str or Timest
+00019970: 616d 7029 3a20 706f 696e 7420 6174 2077  amp): point at w
+00019980: 6869 6368 2074 6f20 6265 6769 6e20 5820  hich to begin X 
+00019990: 6178 6973 0d0a 2020 2020 2020 2020 2020  axis..          
+000199a0: 2020 616e 6f6d 616c 795f 636f 6c6f 7220    anomaly_color 
+000199b0: 2873 7472 293a 206e 616d 6520 6f66 2061  (str): name of a
+000199c0: 6e6f 6d61 6c79 2070 6f69 6e74 2063 6f6c  nomaly point col
+000199d0: 6f72 0d0a 2020 2020 2020 2020 2020 2020  or..            
+000199e0: 686f 6c69 6461 795f 636f 6c6f 7220 2873  holiday_color (s
+000199f0: 7472 293a 206e 616d 6520 6f66 2068 6f6c  tr): name of hol
+00019a00: 6964 6179 2070 6f69 6e74 2063 6f6c 6f72  iday point color
+00019a10: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
+00019a20: 656e 645f 616e 6f6d 616c 795f 636f 6c6f  end_anomaly_colo
+00019a30: 7220 2873 7472 293a 206e 616d 6520 6f66  r (str): name of
+00019a40: 2074 7265 6e64 2061 6e6f 6d61 6c79 2070   trend anomaly p
+00019a50: 6f69 6e74 2063 6f6c 6f72 0d0a 2020 2020  oint color..    
+00019a60: 2020 2020 2020 2020 706f 696e 745f 7369          point_si
+00019a70: 7a65 2028 7374 7229 3a20 706f 696e 7420  ze (str): point 
+00019a80: 7369 7a65 2066 6f72 2061 6c6c 2061 6e6f  size for all ano
+00019a90: 6d61 6c69 6573 0d0a 2020 2020 2020 2020  malies..        
+00019aa0: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+00019ab0: 7365 7269 6573 2069 7320 4e6f 6e65 3a0d  series is None:.
+00019ac0: 0a20 2020 2020 2020 2020 2020 2073 6572  .            ser
+00019ad0: 6965 7320 3d20 7261 6e64 6f6d 2e63 686f  ies = random.cho
+00019ae0: 6963 6528 7365 6c66 2e63 6f6c 756d 6e5f  ice(self.column_
+00019af0: 6e61 6d65 7329 0d0a 2020 2020 2020 2020  names)..        
+00019b00: 6966 2061 6374 7561 6c73 2069 7320 4e6f  if actuals is No
+00019b10: 6e65 206f 7220 6e6f 7420 6973 696e 7374  ne or not isinst
+00019b20: 616e 6365 280d 0a20 2020 2020 2020 2020  ance(..         
+00019b30: 2020 2061 6374 7561 6c73 2c20 2870 642e     actuals, (pd.
+00019b40: 4461 7461 4672 616d 652c 206e 702e 6172  DataFrame, np.ar
+00019b50: 7261 792c 2070 642e 5365 7269 6573 290d  ray, pd.Series).
+00019b60: 0a20 2020 2020 2020 2029 3a0d 0a20 2020  .        ):..   
+00019b70: 2020 2020 2020 2020 2061 6374 7561 6c73           actuals
+00019b80: 5f75 7365 6420 3d20 7072 6564 6963 7469  _used = predicti
+00019b90: 6f6e 2e66 6f72 6563 6173 740d 0a20 2020  on.forecast..   
+00019ba0: 2020 2020 2020 2020 2061 6374 7561 6c73           actuals
+00019bb0: 5f66 6c61 6720 3d20 4661 6c73 650d 0a20  _flag = False.. 
+00019bc0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00019bd0: 2020 2020 2020 2020 2020 6163 7475 616c            actual
+00019be0: 735f 666c 6167 203d 2054 7275 650d 0a20  s_flag = True.. 
+00019bf0: 2020 2020 2020 2020 2020 2061 6374 7561             actua
+00019c00: 6c73 5f75 7365 6420 3d20 6163 7475 616c  ls_used = actual
+00019c10: 732e 7265 696e 6465 7828 7072 6564 6963  s.reindex(predic
+00019c20: 7469 6f6e 2e66 6f72 6563 6173 742e 696e  tion.forecast.in
+00019c30: 6465 7829 0d0a 2020 2020 2020 2020 766c  dex)..        vl
+00019c40: 696e 6520 3d20 280d 0a20 2020 2020 2020  ine = (..       
+00019c50: 2020 2020 204e 6f6e 650d 0a20 2020 2020       None..     
+00019c60: 2020 2020 2020 2069 6620 7365 6c66 2e66         if self.f
+00019c70: 6f72 6563 6173 745f 6c65 6e67 7468 2069  orecast_length i
+00019c80: 7320 4e6f 6e65 0d0a 2020 2020 2020 2020  s None..        
+00019c90: 2020 2020 656c 7365 2070 7265 6469 6374      else predict
+00019ca0: 696f 6e2e 666f 7265 6361 7374 2e69 6e64  ion.forecast.ind
+00019cb0: 6578 5b2d 7365 6c66 2e66 6f72 6563 6173  ex[-self.forecas
+00019cc0: 745f 6c65 6e67 7468 5d0d 0a20 2020 2020  t_length]..     
+00019cd0: 2020 2029 0d0a 2020 2020 2020 2020 6966     )..        if
+00019ce0: 2073 7461 7274 5f64 6174 6520 3d3d 2022   start_date == "
+00019cf0: 6175 746f 223a 0d0a 2020 2020 2020 2020  auto":..        
+00019d00: 2020 2020 6966 2061 6374 7561 6c73 2069      if actuals i
+00019d10: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00019d20: 2020 2020 2020 2020 2020 2020 2073 6c78               slx
+00019d30: 203d 202d 7365 6c66 2e66 6f72 6563 6173   = -self.forecas
+00019d40: 745f 6c65 6e67 7468 202a 2033 0d0a 2020  t_length * 3..  
+00019d50: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00019d60: 2061 6273 2873 6c78 2920 3e20 6163 7475   abs(slx) > actu
+00019d70: 616c 732e 7368 6170 655b 305d 3a0d 0a20  als.shape[0]:.. 
+00019d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d90: 2020 2073 6c78 203d 2030 0d0a 2020 2020     slx = 0..    
+00019da0: 2020 2020 2020 2020 2020 2020 7374 6172              star
+00019db0: 745f 6461 7465 203d 2061 6374 7561 6c73  t_date = actuals
+00019dc0: 2e69 6e64 6578 5b73 6c78 5d0d 0a20 2020  .index[slx]..   
+00019dd0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00019de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019df0: 7374 6172 745f 6461 7465 203d 2070 7265  start_date = pre
+00019e00: 6469 6374 696f 6e2e 666f 7265 6361 7374  diction.forecast
+00019e10: 2e69 6e64 6578 5b30 5d0d 0a20 2020 2020  .index[0]..     
+00019e20: 2020 2061 7820 3d20 7072 6564 6963 7469     ax = predicti
+00019e30: 6f6e 2e70 6c6f 7428 0d0a 2020 2020 2020  on.plot(..      
+00019e40: 2020 2020 2020 6163 7475 616c 735f 7573        actuals_us
+00019e50: 6564 2e6c 6f63 5b70 7265 6469 6374 696f  ed.loc[predictio
+00019e60: 6e2e 666f 7265 6361 7374 2e69 6e64 6578  n.forecast.index
+00019e70: 5d0d 0a20 2020 2020 2020 2020 2020 2069  ]..            i
+00019e80: 6620 6163 7475 616c 735f 666c 6167 2069  f actuals_flag i
+00019e90: 7320 6e6f 7420 4e6f 6e65 0d0a 2020 2020  s not None..    
+00019ea0: 2020 2020 2020 2020 656c 7365 204e 6f6e          else Non
+00019eb0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00019ec0: 7365 7269 6573 3d73 6572 6965 732c 0d0a  series=series,..
+00019ed0: 2020 2020 2020 2020 2020 2020 766c 696e              vlin
+00019ee0: 653d 766c 696e 652c 0d0a 2020 2020 2020  e=vline,..      
+00019ef0: 2020 2020 2020 7374 6172 745f 6461 7465        start_date
+00019f00: 3d73 7461 7274 5f64 6174 652c 0d0a 2020  =start_date,..  
+00019f10: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00019f20: 2068 616e 646c 6573 2c20 6c61 6265 6c73   handles, labels
+00019f30: 203d 2061 782e 6765 745f 6c65 6765 6e64   = ax.get_legend
+00019f40: 5f68 616e 646c 6573 5f6c 6162 656c 7328  _handles_labels(
+00019f50: 290d 0a20 2020 2020 2020 2069 6620 7365  )..        if se
+00019f60: 6c66 2e61 6e6f 6d61 6c79 5f64 6574 6563  lf.anomaly_detec
+00019f70: 746f 723a 0d0a 2020 2020 2020 2020 2020  tor:..          
+00019f80: 2020 6966 2073 656c 662e 616e 6f6d 616c    if self.anomal
+00019f90: 795f 6465 7465 6374 6f72 2e6f 7574 7075  y_detector.outpu
+00019fa0: 7420 3d3d 2022 756e 6976 6172 6961 7465  t == "univariate
+00019fb0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00019fc0: 2020 2020 695f 616e 6f6d 203d 2073 656c      i_anom = sel
+00019fd0: 662e 616e 6f6d 616c 795f 6465 7465 6374  f.anomaly_detect
+00019fe0: 6f72 2e61 6e6f 6d61 6c69 6573 2e69 6e64  or.anomalies.ind
+00019ff0: 6578 5b0d 0a20 2020 2020 2020 2020 2020  ex[..           
+0001a000: 2020 2020 2020 2020 2073 656c 662e 616e           self.an
+0001a010: 6f6d 616c 795f 6465 7465 6374 6f72 2e61  omaly_detector.a
+0001a020: 6e6f 6d61 6c69 6573 2e69 6c6f 635b 3a2c  nomalies.iloc[:,
+0001a030: 2030 5d20 3d3d 202d 310d 0a20 2020 2020   0] == -1..     
+0001a040: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
+0001a050: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0001a060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a070: 2073 6572 6965 735f 616e 6f6d 203d 2073   series_anom = s
+0001a080: 656c 662e 616e 6f6d 616c 795f 6465 7465  elf.anomaly_dete
+0001a090: 6374 6f72 2e61 6e6f 6d61 6c69 6573 5b73  ctor.anomalies[s
+0001a0a0: 6572 6965 735d 0d0a 2020 2020 2020 2020  eries]..        
+0001a0b0: 2020 2020 2020 2020 695f 616e 6f6d 203d          i_anom =
+0001a0c0: 2073 6572 6965 735f 616e 6f6d 5b73 6572   series_anom[ser
+0001a0d0: 6965 735f 616e 6f6d 203d 3d20 2d31 5d2e  ies_anom == -1].
+0001a0e0: 696e 6465 780d 0a20 2020 2020 2020 2020  index..         
+0001a0f0: 2020 2069 6620 7374 6172 745f 6461 7465     if start_date
+0001a100: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0001a110: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001a120: 5f61 6e6f 6d20 3d20 695f 616e 6f6d 5b69  _anom = i_anom[i
+0001a130: 5f61 6e6f 6d20 3e3d 2073 7461 7274 5f64  _anom >= start_d
+0001a140: 6174 655d 0d0a 2020 2020 2020 2020 2020  ate]..          
+0001a150: 2020 6966 2061 6374 7561 6c73 5f66 6c61    if actuals_fla
+0001a160: 673a 0d0a 2020 2020 2020 2020 2020 2020  g:..            
+0001a170: 2020 2020 695f 616e 6f6d 203d 2069 5f61      i_anom = i_a
+0001a180: 6e6f 6d5b 695f 616e 6f6d 203e 3d20 6163  nom[i_anom >= ac
+0001a190: 7475 616c 732e 696e 6465 785b 305d 5d0d  tuals.index[0]].
+0001a1a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001a1b0: 6c65 6e28 695f 616e 6f6d 2920 3e20 3020  len(i_anom) > 0 
+0001a1c0: 616e 6420 280d 0a20 2020 2020 2020 2020  and (..         
+0001a1d0: 2020 2020 2020 206e 6f74 2061 6374 7561         not actua
+0001a1e0: 6c73 5f66 6c61 6720 6f72 206c 656e 2869  ls_flag or len(i
+0001a1f0: 5f61 6e6f 6d29 203c 206c 656e 2861 6374  _anom) < len(act
+0001a200: 7561 6c73 2920 2a20 302e 350d 0a20 2020  uals) * 0.5..   
+0001a210: 2020 2020 2020 2020 2029 3a0d 0a20 2020           ):..   
+0001a220: 2020 2020 2020 2020 2020 2020 2073 6361               sca
+0001a230: 7431 203d 2061 782e 7363 6174 7465 7228  t1 = ax.scatter(
+0001a240: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a250: 2020 2020 2020 695f 616e 6f6d 2e74 6f6c        i_anom.tol
+0001a260: 6973 7428 292c 0d0a 2020 2020 2020 2020  ist(),..        
+0001a270: 2020 2020 2020 2020 2020 2020 6163 7475              actu
+0001a280: 616c 735f 7573 6564 2e72 6569 6e64 6578  als_used.reindex
+0001a290: 2869 5f61 6e6f 6d29 5b73 6572 6965 735d  (i_anom)[series]
+0001a2a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a2b0: 2020 2020 2020 2063 3d61 6e6f 6d61 6c79         c=anomaly
+0001a2c0: 5f63 6f6c 6f72 2c0d 0a20 2020 2020 2020  _color,..       
+0001a2d0: 2020 2020 2020 2020 2020 2020 2073 3d70               s=p
+0001a2e0: 6f69 6e74 5f73 697a 652c 0d0a 2020 2020  oint_size,..    
+0001a2f0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+0001a300: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+0001a310: 616e 646c 6573 202b 3d20 5b73 6361 7431  andles += [scat1
+0001a320: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0001a330: 2020 206c 6162 656c 7320 2b3d 205b 2261     labels += ["a
+0001a340: 6e6f 6d61 6c69 6573 225d 0d0a 2020 2020  nomalies"]..    
+0001a350: 2020 2020 6966 2073 656c 662e 686f 6c69      if self.holi
+0001a360: 6461 795f 6465 7465 6374 6f72 3a0d 0a20  day_detector:.. 
+0001a370: 2020 2020 2020 2020 2020 2069 5f61 6e6f             i_ano
+0001a380: 6d20 3d20 7365 6c66 2e68 6f6c 6964 6179  m = self.holiday
+0001a390: 5f64 6574 6563 746f 722e 6461 7465 735f  _detector.dates_
+0001a3a0: 746f 5f68 6f6c 6964 6179 7328 0d0a 2020  to_holidays(..  
+0001a3b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0001a3c0: 6c66 2e64 662e 696e 6465 782c 2073 7479  lf.df.index, sty
+0001a3d0: 6c65 3d22 7365 7269 6573 5f66 6c61 6722  le="series_flag"
+0001a3e0: 0d0a 2020 2020 2020 2020 2020 2020 295b  ..            )[
+0001a3f0: 7365 7269 6573 5d0d 0a20 2020 2020 2020  series]..       
+0001a400: 2020 2020 2069 5f61 6e6f 6d20 3d20 695f       i_anom = i_
+0001a410: 616e 6f6d 2e69 6e64 6578 5b69 5f61 6e6f  anom.index[i_ano
+0001a420: 6d20 3d3d 2031 5d0d 0a20 2020 2020 2020  m == 1]..       
+0001a430: 2020 2020 2069 6620 6163 7475 616c 735f       if actuals_
+0001a440: 666c 6167 3a0d 0a20 2020 2020 2020 2020  flag:..         
+0001a450: 2020 2020 2020 2069 5f61 6e6f 6d20 3d20         i_anom = 
+0001a460: 695f 616e 6f6d 5b69 5f61 6e6f 6d20 3e3d  i_anom[i_anom >=
+0001a470: 2061 6374 7561 6c73 2e69 6e64 6578 5b30   actuals.index[0
+0001a480: 5d5d 0d0a 2020 2020 2020 2020 2020 2020  ]]..            
+0001a490: 6966 206c 656e 2869 5f61 6e6f 6d29 203e  if len(i_anom) >
+0001a4a0: 2030 2061 6e64 2028 0d0a 2020 2020 2020   0 and (..      
+0001a4b0: 2020 2020 2020 2020 2020 6e6f 7420 6163            not ac
+0001a4c0: 7475 616c 735f 666c 6167 206f 7220 6c65  tuals_flag or le
+0001a4d0: 6e28 695f 616e 6f6d 2920 3c20 6c65 6e28  n(i_anom) < len(
+0001a4e0: 6163 7475 616c 7329 202a 2030 2e35 0d0a  actuals) * 0.5..
+0001a4f0: 2020 2020 2020 2020 2020 2020 293a 0d0a              ):..
+0001a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a510: 7363 6174 3220 3d20 6178 2e73 6361 7474  scat2 = ax.scatt
+0001a520: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+0001a530: 2020 2020 2020 2020 2069 5f61 6e6f 6d2e           i_anom.
+0001a540: 746f 6c69 7374 2829 2c0d 0a20 2020 2020  tolist(),..     
+0001a550: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001a560: 6374 7561 6c73 5f75 7365 642e 7265 696e  ctuals_used.rein
+0001a570: 6465 7828 695f 616e 6f6d 295b 7365 7269  dex(i_anom)[seri
+0001a580: 6573 5d2c 0d0a 2020 2020 2020 2020 2020  es],..          
+0001a590: 2020 2020 2020 2020 2020 633d 686f 6c69            c=holi
+0001a5a0: 6461 795f 636f 6c6f 722c 0d0a 2020 2020  day_color,..    
 0001a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5c0: 2020 733d 706f 696e 745f 7369 7a65 2c0d    s=point_size,.
-0001a5d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a5e0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-0001a5f0: 2020 2020 6861 6e64 6c65 7320 2b3d 205b      handles += [
-0001a600: 7363 6174 325d 0d0a 2020 2020 2020 2020  scat2]..        
-0001a610: 2020 2020 2020 2020 6c61 6265 6c73 202b          labels +
-0001a620: 3d20 5b22 6465 7465 6374 6564 2068 6f6c  = ["detected hol
-0001a630: 6964 6179 7322 5d0d 0a20 2020 2020 2020  idays"]..       
-0001a640: 2069 6620 7365 6c66 2e74 7265 6e64 5f61   if self.trend_a
-0001a650: 6e6f 6d61 6c79 5f64 6574 6563 746f 7220  nomaly_detector 
-0001a660: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001a670: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001a680: 662e 7472 656e 645f 616e 6f6d 616c 795f  f.trend_anomaly_
-0001a690: 6465 7465 6374 6f72 2e6f 7574 7075 7420  detector.output 
-0001a6a0: 3d3d 2022 756e 6976 6172 6961 7465 223a  == "univariate":
-0001a6b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a6c0: 2020 695f 616e 6f6d 203d 2073 656c 662e    i_anom = self.
-0001a6d0: 7472 656e 645f 616e 6f6d 616c 795f 6465  trend_anomaly_de
-0001a6e0: 7465 6374 6f72 2e61 6e6f 6d61 6c69 6573  tector.anomalies
-0001a6f0: 2e69 6e64 6578 5b0d 0a20 2020 2020 2020  .index[..       
-0001a700: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001a710: 662e 616e 6f6d 616c 795f 6465 7465 6374  f.anomaly_detect
-0001a720: 6f72 2e61 6e6f 6d61 6c69 6573 2e69 6c6f  or.anomalies.ilo
-0001a730: 635b 3a2c 2030 5d20 3d3d 202d 310d 0a20  c[:, 0] == -1.. 
-0001a740: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-0001a750: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-0001a760: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0001a770: 2020 2020 2073 6572 6965 735f 616e 6f6d       series_anom
-0001a780: 203d 2073 656c 662e 7472 656e 645f 616e   = self.trend_an
-0001a790: 6f6d 616c 795f 6465 7465 6374 6f72 2e61  omaly_detector.a
-0001a7a0: 6e6f 6d61 6c69 6573 5b73 6572 6965 735d  nomalies[series]
-0001a7b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a7c0: 2020 695f 616e 6f6d 203d 2073 6572 6965    i_anom = serie
-0001a7d0: 735f 616e 6f6d 5b73 6572 6965 735f 616e  s_anom[series_an
-0001a7e0: 6f6d 203d 3d20 2d31 5d2e 696e 6465 780d  om == -1].index.
-0001a7f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001a800: 7374 6172 745f 6461 7465 2069 7320 6e6f  start_date is no
-0001a810: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
-0001a820: 2020 2020 2020 2020 2069 5f61 6e6f 6d20           i_anom 
-0001a830: 3d20 695f 616e 6f6d 5b69 5f61 6e6f 6d20  = i_anom[i_anom 
-0001a840: 3e3d 2073 7461 7274 5f64 6174 655d 0d0a  >= start_date]..
-0001a850: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0001a860: 6374 7561 6c73 5f66 6c61 673a 0d0a 2020  ctuals_flag:..  
-0001a870: 2020 2020 2020 2020 2020 2020 2020 695f                i_
-0001a880: 616e 6f6d 203d 2069 5f61 6e6f 6d5b 695f  anom = i_anom[i_
-0001a890: 616e 6f6d 203e 3d20 6163 7475 616c 732e  anom >= actuals.
-0001a8a0: 696e 6465 785b 305d 5d0d 0a20 2020 2020  index[0]]..     
-0001a8b0: 2020 2020 2020 2069 6620 6c65 6e28 695f         if len(i_
-0001a8c0: 616e 6f6d 2920 3e20 3020 616e 6420 280d  anom) > 0 and (.
-0001a8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a8e0: 206e 6f74 2061 6374 7561 6c73 5f66 6c61   not actuals_fla
-0001a8f0: 6720 6f72 206c 656e 2869 5f61 6e6f 6d29  g or len(i_anom)
-0001a900: 203c 206c 656e 2861 6374 7561 6c73 2920   < len(actuals) 
-0001a910: 2a20 302e 350d 0a20 2020 2020 2020 2020  * 0.5..         
-0001a920: 2020 2029 3a0d 0a20 2020 2020 2020 2020     ):..         
-0001a930: 2020 2020 2020 2073 6361 7433 203d 2061         scat3 = a
-0001a940: 782e 7363 6174 7465 7228 0d0a 2020 2020  x.scatter(..    
-0001a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a960: 695f 616e 6f6d 2e74 6f6c 6973 7428 292c  i_anom.tolist(),
-0001a970: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a980: 2020 2020 2020 6163 7475 616c 735f 7573        actuals_us
-0001a990: 6564 2e72 6569 6e64 6578 2869 5f61 6e6f  ed.reindex(i_ano
-0001a9a0: 6d29 5b73 6572 6965 735d 2c0d 0a20 2020  m)[series],..   
-0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9c0: 2063 3d74 7265 6e64 5f61 6e6f 6d61 6c79   c=trend_anomaly
-0001a9d0: 5f63 6f6c 6f72 2c0d 0a20 2020 2020 2020  _color,..       
-0001a9e0: 2020 2020 2020 2020 2020 2020 2073 3d70               s=p
-0001a9f0: 6f69 6e74 5f73 697a 652c 0d0a 2020 2020  oint_size,..    
-0001aa00: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0001aa10: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0001aa20: 616e 646c 6573 202b 3d20 5b73 6361 7433  andles += [scat3
-0001aa30: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0001aa40: 2020 206c 6162 656c 7320 2b3d 205b 2274     labels += ["t
-0001aa50: 7265 6e64 2061 6e6f 6d61 6c69 6573 225d  rend anomalies"]
-0001aa60: 0d0a 2020 2020 2020 2020 6178 2e6c 6567  ..        ax.leg
-0001aa70: 656e 6428 6861 6e64 6c65 732c 206c 6162  end(handles, lab
-0001aa80: 656c 7329 0d0a 2020 2020 2020 2020 7265  els)..        re
-0001aa90: 7475 726e 2061 780d 0a0d 0a20 2020 2064  turn ax....    d
-0001aaa0: 6566 2070 6c6f 745f 7468 696e 6773 2829  ef plot_things()
-0001aab0: 3a20 2023 2070 6c61 6365 686f 6c64 6572  :  # placeholder
-0001aac0: 2066 6f72 206c 6174 6572 2070 6c6f 7474   for later plott
-0001aad0: 696e 6720 6675 6e63 7469 6f6e 730d 0a20  ing functions.. 
-0001aae0: 2020 2020 2020 2023 2070 6c6f 7420 636f         # plot co
-0001aaf0: 6d70 6f6e 656e 7473 0d0a 2020 2020 2020  mponents..      
-0001ab00: 2020 2320 706c 6f74 2074 7261 6e73 666f    # plot transfo
-0001ab10: 726d 6564 2064 6620 6966 2070 7265 7072  rmed df if prepr
-0001ab20: 6f63 6573 7320 6f72 2061 6e6f 6d61 6c79  ocess or anomaly
-0001ab30: 2072 656d 6f76 616c 0d0a 2020 2020 2020   removal..      
-0001ab40: 2020 2320 706c 6f74 2070 6173 7420 696d    # plot past im
-0001ab50: 7061 6374 730d 0a20 2020 2020 2020 2023  pacts..        #
-0001ab60: 2070 6c6f 7420 2520 636f 6e74 7269 6275   plot % contribu
-0001ab70: 7469 6f6e 206f 6620 636f 6d70 6f6e 656e  tion of componen
-0001ab80: 7473 0d0a 2020 2020 2020 2020 2320 706c  ts..        # pl
-0001ab90: 6f74 2065 7661 6c20 2873 686f 7720 6163  ot eval (show ac
-0001aba0: 7475 616c 732c 2061 6c6f 6e67 7369 6465  tuals, alongside
-0001abb0: 2066 756c 6c20 616e 6420 636f 6d70 6f6e   full and compon
-0001abc0: 656e 7473 2074 6f20 6469 6167 6e6f 7365  ents to diagnose
-0001abd0: 290d 0a20 2020 2020 2020 2023 2070 6c6f  )..        # plo
-0001abe0: 7420 7265 7369 6475 616c 2064 6973 7472  t residual distr
-0001abf0: 6962 7574 696f 6e2f 5041 4346 0d0a 2020  ibution/PACF..  
-0001ac00: 2020 2020 2020 2320 706c 6f74 2069 6e66        # plot inf
-0001ac10: 6c65 6374 696f 6e20 706f 696e 7473 2028  lection points (
-0001ac20: 6669 6c74 6572 696e 6720 6f72 2073 6d6f  filtering or smo
-0001ac30: 6f74 6869 6e67 2066 6972 7374 290d 0a20  othing first).. 
-0001ac40: 2020 2020 2020 2023 2070 6c6f 7420 6869         # plot hi
-0001ac50: 6768 6573 7420 6572 726f 7220 7365 7269  ghest error seri
-0001ac60: 6573 2c20 706c 6f74 2068 6967 6865 7374  es, plot highest
-0001ac70: 2f6c 6f77 6573 7420 6772 6f77 7468 0d0a  /lowest growth..
-0001ac80: 2020 2020 2020 2020 2320 7472 656e 643a          # trend:
-0001ac90: 206f 6e65 2063 6f6c 6f72 2066 6f72 2067   one color for g
-0001aca0: 726f 7774 682c 2061 6e6f 7468 6572 2066  rowth, another f
-0001acb0: 6f72 2064 6563 6c69 6e65 2028 6461 726b  or decline (dark
-0001acc0: 6572 2061 7320 6163 6365 6c65 7261 7469  er as accelerati
-0001acd0: 6e67 2c20 6c69 6768 6572 2061 7320 736c  ng, ligher as sl
-0001ace0: 6f77 696e 6729 0d0a 2020 2020 2020 2020  owing)..        
-0001acf0: 7265 7475 726e 204e 6f74 496d 706c 656d  return NotImplem
-0001ad00: 656e 7465 640d 0a0d 0a0d 0a64 6566 2063  ented......def c
-0001ad10: 6c65 616e 5f72 6567 7265 7373 6f72 2869  lean_regressor(i
-0001ad20: 6e5f 642c 2070 7265 6669 783d 2272 6567  n_d, prefix="reg
-0001ad30: 725f 2229 3a0d 0a20 2020 2069 6620 6e6f  r_"):..    if no
-0001ad40: 7420 6973 696e 7374 616e 6365 2869 6e5f  t isinstance(in_
-0001ad50: 642c 2070 642e 4461 7461 4672 616d 6529  d, pd.DataFrame)
-0001ad60: 3a0d 0a20 2020 2020 2020 2064 6620 3d20  :..        df = 
-0001ad70: 7064 2e44 6174 6146 7261 6d65 2869 6e5f  pd.DataFrame(in_
-0001ad80: 6429 0d0a 2020 2020 656c 7365 3a0d 0a20  d)..    else:.. 
-0001ad90: 2020 2020 2020 2064 6620 3d20 696e 5f64         df = in_d
-0001ada0: 2e63 6f70 7928 290d 0a20 2020 2064 662e  .copy()..    df.
-0001adb0: 636f 6c75 6d6e 7320 3d20 5b70 7265 6669  columns = [prefi
-0001adc0: 7820 2b20 636f 6c20 666f 7220 636f 6c20  x + col for col 
-0001add0: 696e 2064 662e 636f 6c75 6d6e 735d 0d0a  in df.columns]..
-0001ade0: 2020 2020 7265 7475 726e 2064 660d 0a0d      return df...
-0001adf0: 0a0d 0a64 6566 2063 7265 6174 655f 7428  ...def create_t(
-0001ae00: 6473 293a 0d0a 2020 2020 7265 7475 726e  ds):..    return
-0001ae10: 2028 6473 202d 2064 732e 6d69 6e28 2929   (ds - ds.min())
-0001ae20: 202f 2028 6473 2e6d 6178 2829 202d 2064   / (ds.max() - d
-0001ae30: 732e 6d69 6e28 2929 0d0a 0d0a 0d0a 2323  s.min())......##
+0001a5c0: 733d 706f 696e 745f 7369 7a65 2c0d 0a20  s=point_size,.. 
+0001a5d0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0001a5e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a5f0: 2020 6861 6e64 6c65 7320 2b3d 205b 7363    handles += [sc
+0001a600: 6174 325d 0d0a 2020 2020 2020 2020 2020  at2]..          
+0001a610: 2020 2020 2020 6c61 6265 6c73 202b 3d20        labels += 
+0001a620: 5b22 6465 7465 6374 6564 2068 6f6c 6964  ["detected holid
+0001a630: 6179 7322 5d0d 0a20 2020 2020 2020 2069  ays"]..        i
+0001a640: 6620 7365 6c66 2e74 7265 6e64 5f61 6e6f  f self.trend_ano
+0001a650: 6d61 6c79 5f64 6574 6563 746f 7220 6973  maly_detector is
+0001a660: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+0001a670: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0001a680: 7472 656e 645f 616e 6f6d 616c 795f 6465  trend_anomaly_de
+0001a690: 7465 6374 6f72 2e6f 7574 7075 7420 3d3d  tector.output ==
+0001a6a0: 2022 756e 6976 6172 6961 7465 223a 0d0a   "univariate":..
+0001a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a6c0: 695f 616e 6f6d 203d 2073 656c 662e 7472  i_anom = self.tr
+0001a6d0: 656e 645f 616e 6f6d 616c 795f 6465 7465  end_anomaly_dete
+0001a6e0: 6374 6f72 2e61 6e6f 6d61 6c69 6573 2e69  ctor.anomalies.i
+0001a6f0: 6e64 6578 5b0d 0a20 2020 2020 2020 2020  ndex[..         
+0001a700: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001a710: 616e 6f6d 616c 795f 6465 7465 6374 6f72  anomaly_detector
+0001a720: 2e61 6e6f 6d61 6c69 6573 2e69 6c6f 635b  .anomalies.iloc[
+0001a730: 3a2c 2030 5d20 3d3d 202d 310d 0a20 2020  :, 0] == -1..   
+0001a740: 2020 2020 2020 2020 2020 2020 205d 0d0a               ]..
+0001a750: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001a760: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001a770: 2020 2073 6572 6965 735f 616e 6f6d 203d     series_anom =
+0001a780: 2073 656c 662e 7472 656e 645f 616e 6f6d   self.trend_anom
+0001a790: 616c 795f 6465 7465 6374 6f72 2e61 6e6f  aly_detector.ano
+0001a7a0: 6d61 6c69 6573 5b73 6572 6965 735d 0d0a  malies[series]..
+0001a7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7c0: 695f 616e 6f6d 203d 2073 6572 6965 735f  i_anom = series_
+0001a7d0: 616e 6f6d 5b73 6572 6965 735f 616e 6f6d  anom[series_anom
+0001a7e0: 203d 3d20 2d31 5d2e 696e 6465 780d 0a20   == -1].index.. 
+0001a7f0: 2020 2020 2020 2020 2020 2069 6620 7374             if st
+0001a800: 6172 745f 6461 7465 2069 7320 6e6f 7420  art_date is not 
+0001a810: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0001a820: 2020 2020 2020 2069 5f61 6e6f 6d20 3d20         i_anom = 
+0001a830: 695f 616e 6f6d 5b69 5f61 6e6f 6d20 3e3d  i_anom[i_anom >=
+0001a840: 2073 7461 7274 5f64 6174 655d 0d0a 2020   start_date]..  
+0001a850: 2020 2020 2020 2020 2020 6966 2061 6374            if act
+0001a860: 7561 6c73 5f66 6c61 673a 0d0a 2020 2020  uals_flag:..    
+0001a870: 2020 2020 2020 2020 2020 2020 695f 616e              i_an
+0001a880: 6f6d 203d 2069 5f61 6e6f 6d5b 695f 616e  om = i_anom[i_an
+0001a890: 6f6d 203e 3d20 6163 7475 616c 732e 696e  om >= actuals.in
+0001a8a0: 6465 785b 305d 5d0d 0a20 2020 2020 2020  dex[0]]..       
+0001a8b0: 2020 2020 2069 6620 6c65 6e28 695f 616e       if len(i_an
+0001a8c0: 6f6d 2920 3e20 3020 616e 6420 280d 0a20  om) > 0 and (.. 
+0001a8d0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001a8e0: 6f74 2061 6374 7561 6c73 5f66 6c61 6720  ot actuals_flag 
+0001a8f0: 6f72 206c 656e 2869 5f61 6e6f 6d29 203c  or len(i_anom) <
+0001a900: 206c 656e 2861 6374 7561 6c73 2920 2a20   len(actuals) * 
+0001a910: 302e 350d 0a20 2020 2020 2020 2020 2020  0.5..           
+0001a920: 2029 3a0d 0a20 2020 2020 2020 2020 2020   ):..           
+0001a930: 2020 2020 2073 6361 7433 203d 2061 782e       scat3 = ax.
+0001a940: 7363 6174 7465 7228 0d0a 2020 2020 2020  scatter(..      
+0001a950: 2020 2020 2020 2020 2020 2020 2020 695f                i_
+0001a960: 616e 6f6d 2e74 6f6c 6973 7428 292c 0d0a  anom.tolist(),..
+0001a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a980: 2020 2020 6163 7475 616c 735f 7573 6564      actuals_used
+0001a990: 2e72 6569 6e64 6578 2869 5f61 6e6f 6d29  .reindex(i_anom)
+0001a9a0: 5b73 6572 6965 735d 2c0d 0a20 2020 2020  [series],..     
+0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001a9c0: 3d74 7265 6e64 5f61 6e6f 6d61 6c79 5f63  =trend_anomaly_c
+0001a9d0: 6f6c 6f72 2c0d 0a20 2020 2020 2020 2020  olor,..         
+0001a9e0: 2020 2020 2020 2020 2020 2073 3d70 6f69             s=poi
+0001a9f0: 6e74 5f73 697a 652c 0d0a 2020 2020 2020  nt_size,..      
+0001aa00: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+0001aa10: 2020 2020 2020 2020 2020 2020 2068 616e               han
+0001aa20: 646c 6573 202b 3d20 5b73 6361 7433 5d0d  dles += [scat3].
+0001aa30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aa40: 206c 6162 656c 7320 2b3d 205b 2274 7265   labels += ["tre
+0001aa50: 6e64 2061 6e6f 6d61 6c69 6573 225d 0d0a  nd anomalies"]..
+0001aa60: 2020 2020 2020 2020 6178 2e6c 6567 656e          ax.legen
+0001aa70: 6428 6861 6e64 6c65 732c 206c 6162 656c  d(handles, label
+0001aa80: 7329 0d0a 2020 2020 2020 2020 7265 7475  s)..        retu
+0001aa90: 726e 2061 780d 0a0d 0a20 2020 2064 6566  rn ax....    def
+0001aaa0: 2070 6c6f 745f 7468 696e 6773 2829 3a20   plot_things(): 
+0001aab0: 2023 2070 6c61 6365 686f 6c64 6572 2066   # placeholder f
+0001aac0: 6f72 206c 6174 6572 2070 6c6f 7474 696e  or later plottin
+0001aad0: 6720 6675 6e63 7469 6f6e 730d 0a20 2020  g functions..   
+0001aae0: 2020 2020 2023 2070 6c6f 7420 636f 6d70       # plot comp
+0001aaf0: 6f6e 656e 7473 0d0a 2020 2020 2020 2020  onents..        
+0001ab00: 2320 706c 6f74 2074 7261 6e73 666f 726d  # plot transform
+0001ab10: 6564 2064 6620 6966 2070 7265 7072 6f63  ed df if preproc
+0001ab20: 6573 7320 6f72 2061 6e6f 6d61 6c79 2072  ess or anomaly r
+0001ab30: 656d 6f76 616c 0d0a 2020 2020 2020 2020  emoval..        
+0001ab40: 2320 706c 6f74 2070 6173 7420 696d 7061  # plot past impa
+0001ab50: 6374 730d 0a20 2020 2020 2020 2023 2070  cts..        # p
+0001ab60: 6c6f 7420 2520 636f 6e74 7269 6275 7469  lot % contributi
+0001ab70: 6f6e 206f 6620 636f 6d70 6f6e 656e 7473  on of components
+0001ab80: 0d0a 2020 2020 2020 2020 2320 706c 6f74  ..        # plot
+0001ab90: 2065 7661 6c20 2873 686f 7720 6163 7475   eval (show actu
+0001aba0: 616c 732c 2061 6c6f 6e67 7369 6465 2066  als, alongside f
+0001abb0: 756c 6c20 616e 6420 636f 6d70 6f6e 656e  ull and componen
+0001abc0: 7473 2074 6f20 6469 6167 6e6f 7365 290d  ts to diagnose).
+0001abd0: 0a20 2020 2020 2020 2023 2070 6c6f 7420  .        # plot 
+0001abe0: 7265 7369 6475 616c 2064 6973 7472 6962  residual distrib
+0001abf0: 7574 696f 6e2f 5041 4346 0d0a 2020 2020  ution/PACF..    
+0001ac00: 2020 2020 2320 706c 6f74 2069 6e66 6c65      # plot infle
+0001ac10: 6374 696f 6e20 706f 696e 7473 2028 6669  ction points (fi
+0001ac20: 6c74 6572 696e 6720 6f72 2073 6d6f 6f74  ltering or smoot
+0001ac30: 6869 6e67 2066 6972 7374 290d 0a20 2020  hing first)..   
+0001ac40: 2020 2020 2023 2070 6c6f 7420 6869 6768       # plot high
+0001ac50: 6573 7420 6572 726f 7220 7365 7269 6573  est error series
+0001ac60: 2c20 706c 6f74 2068 6967 6865 7374 2f6c  , plot highest/l
+0001ac70: 6f77 6573 7420 6772 6f77 7468 0d0a 2020  owest growth..  
+0001ac80: 2020 2020 2020 2320 7472 656e 643a 206f        # trend: o
+0001ac90: 6e65 2063 6f6c 6f72 2066 6f72 2067 726f  ne color for gro
+0001aca0: 7774 682c 2061 6e6f 7468 6572 2066 6f72  wth, another for
+0001acb0: 2064 6563 6c69 6e65 2028 6461 726b 6572   decline (darker
+0001acc0: 2061 7320 6163 6365 6c65 7261 7469 6e67   as accelerating
+0001acd0: 2c20 6c69 6768 6572 2061 7320 736c 6f77  , ligher as slow
+0001ace0: 696e 6729 0d0a 2020 2020 2020 2020 7265  ing)..        re
+0001acf0: 7475 726e 204e 6f74 496d 706c 656d 656e  turn NotImplemen
+0001ad00: 7465 640d 0a0d 0a0d 0a64 6566 2063 6c65  ted......def cle
+0001ad10: 616e 5f72 6567 7265 7373 6f72 2869 6e5f  an_regressor(in_
+0001ad20: 642c 2070 7265 6669 783d 2272 6567 725f  d, prefix="regr_
+0001ad30: 2229 3a0d 0a20 2020 2069 6620 6e6f 7420  "):..    if not 
+0001ad40: 6973 696e 7374 616e 6365 2869 6e5f 642c  isinstance(in_d,
+0001ad50: 2070 642e 4461 7461 4672 616d 6529 3a0d   pd.DataFrame):.
+0001ad60: 0a20 2020 2020 2020 2064 6620 3d20 7064  .        df = pd
+0001ad70: 2e44 6174 6146 7261 6d65 2869 6e5f 6429  .DataFrame(in_d)
+0001ad80: 0d0a 2020 2020 656c 7365 3a0d 0a20 2020  ..    else:..   
+0001ad90: 2020 2020 2064 6620 3d20 696e 5f64 2e63       df = in_d.c
+0001ada0: 6f70 7928 290d 0a20 2020 2064 662e 636f  opy()..    df.co
+0001adb0: 6c75 6d6e 7320 3d20 5b70 7265 6669 7820  lumns = [prefix 
+0001adc0: 2b20 636f 6c20 666f 7220 636f 6c20 696e  + col for col in
+0001add0: 2064 662e 636f 6c75 6d6e 735d 0d0a 2020   df.columns]..  
+0001ade0: 2020 7265 7475 726e 2064 660d 0a0d 0a0d    return df.....
+0001adf0: 0a64 6566 2063 7265 6174 655f 7428 6473  .def create_t(ds
+0001ae00: 293a 0d0a 2020 2020 7265 7475 726e 2028  ):..    return (
+0001ae10: 6473 202d 2064 732e 6d69 6e28 2929 202f  ds - ds.min()) /
+0001ae20: 2028 6473 2e6d 6178 2829 202d 2064 732e   (ds.max() - ds.
+0001ae30: 6d69 6e28 2929 0d0a 0d0a 0d0a 2323 2323  min())......####
 0001ae40: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 0001ae50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-0001ae60: 2323 230d 0a23 204a 5553 5420 4c45 4153  ###..# JUST LEAS
-0001ae70: 5420 5351 5541 5245 5320 554e 4956 4152  T SQUARES UNIVAR
-0001ae80: 4941 5445 0d0a 2320 6874 7470 733a 2f2f  IATE..# https://
-0001ae90: 7374 6163 6b6f 7665 7266 6c6f 772e 636f  stackoverflow.co
-0001aea0: 6d2f 7175 6573 7469 6f6e 732f 3137 3637  m/questions/1767
-0001aeb0: 3931 3430 2f6d 756c 7469 706c 652d 6c69  9140/multiple-li
-0001aec0: 6e65 6172 2d72 6567 7265 7373 696f 6e2d  near-regression-
-0001aed0: 7769 7468 2d70 7974 686f 6e0d 0a0d 0a0d  with-python.....
-0001aee0: 0a64 6566 206c 7374 7371 5f73 6f6c 7665  .def lstsq_solve
-0001aef0: 2858 2c20 792c 206c 616d 623d 312c 2069  (X, y, lamb=1, i
-0001af00: 6465 6e74 6974 795f 6d61 7472 6978 3d4e  dentity_matrix=N
-0001af10: 6f6e 6529 3a0d 0a20 2020 2069 6620 6964  one):..    if id
-0001af20: 656e 7469 7479 5f6d 6174 7269 7820 6973  entity_matrix is
-0001af30: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001af40: 6964 656e 7469 7479 5f6d 6174 7269 7820  identity_matrix 
-0001af50: 3d20 6e70 2e7a 6572 6f73 2828 582e 7368  = np.zeros((X.sh
-0001af60: 6170 655b 315d 2c20 582e 7368 6170 655b  ape[1], X.shape[
-0001af70: 315d 2929 0d0a 2020 2020 2020 2020 6e70  1]))..        np
-0001af80: 2e66 696c 6c5f 6469 6167 6f6e 616c 2869  .fill_diagonal(i
-0001af90: 6465 6e74 6974 795f 6d61 7472 6978 2c20  dentity_matrix, 
-0001afa0: 3129 0d0a 2020 2020 2020 2020 6964 656e  1)..        iden
-0001afb0: 7469 7479 5f6d 6174 7269 785b 302c 2030  tity_matrix[0, 0
-0001afc0: 5d20 3d20 300d 0a20 2020 2069 6620 6c61  ] = 0..    if la
-0001afd0: 6d62 2069 7320 4e6f 6e65 3a0d 0a20 2020  mb is None:..   
-0001afe0: 2020 2020 206c 616d 6220 3d20 312e 300d       lamb = 1.0.
-0001aff0: 0a20 2020 2058 7458 5f6c 616d 6220 3d20  .    XtX_lamb = 
-0001b000: 582e 542e 646f 7428 5829 202b 206c 616d  X.T.dot(X) + lam
-0001b010: 6220 2a20 6964 656e 7469 7479 5f6d 6174  b * identity_mat
-0001b020: 7269 780d 0a20 2020 2058 7459 203d 2058  rix..    XtY = X
-0001b030: 2e54 2e64 6f74 2879 290d 0a20 2020 2072  .T.dot(y)..    r
-0001b040: 6574 7572 6e20 6e70 2e6c 696e 616c 672e  eturn np.linalg.
-0001b050: 736f 6c76 6528 5874 585f 6c61 6d62 2c20  solve(XtX_lamb, 
-0001b060: 5874 5929 0d0a 0d0a 0d0a 6465 6620 636f  XtY)......def co
-0001b070: 7374 5f66 756e 6374 696f 6e5f 6c31 2870  st_function_l1(p
-0001b080: 6172 616d 732c 2058 2c20 7929 3a0d 0a20  arams, X, y):.. 
-0001b090: 2020 2072 6574 7572 6e20 6e70 2e73 756d     return np.sum
-0001b0a0: 286e 702e 6162 7328 7920 2d20 6e70 2e64  (np.abs(y - np.d
-0001b0b0: 6f74 2858 2c20 7061 7261 6d73 2e72 6573  ot(X, params.res
-0001b0c0: 6861 7065 2858 2e73 6861 7065 5b31 5d2c  hape(X.shape[1],
-0001b0d0: 2079 2e73 6861 7065 5b31 5d29 2929 290d   y.shape[1])))).
-0001b0e0: 0a0d 0a0d 0a64 6566 2063 6f73 745f 6675  .....def cost_fu
-0001b0f0: 6e63 7469 6f6e 5f6c 315f 706f 7369 7469  nction_l1_positi
-0001b100: 7665 2870 6172 616d 732c 2058 2c20 7929  ve(params, X, y)
-0001b110: 3a0d 0a20 2020 2072 6574 7572 6e20 6e70  :..    return np
-0001b120: 2e73 756d 280d 0a20 2020 2020 2020 206e  .sum(..        n
-0001b130: 702e 6162 7328 0d0a 2020 2020 2020 2020  p.abs(..        
-0001b140: 2020 2020 790d 0a20 2020 2020 2020 2020      y..         
-0001b150: 2020 202d 206e 702e 646f 7428 582c 206e     - np.dot(X, n
-0001b160: 702e 7768 6572 6528 7061 7261 6d73 203c  p.where(params <
-0001b170: 2030 2c20 302c 2070 6172 616d 7329 2e72   0, 0, params).r
-0001b180: 6573 6861 7065 2858 2e73 6861 7065 5b31  eshape(X.shape[1
-0001b190: 5d2c 2079 2e73 6861 7065 5b31 5d29 290d  ], y.shape[1])).
-0001b1a0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-0001b1b0: 290d 0a0d 0a0d 0a23 2061 6374 7561 6c6c  )......# actuall
-0001b1c0: 7920 7468 6973 2069 7320 6d6f 7265 206c  y this is more l
-0001b1d0: 696b 6520 4d41 4445 0d0a 6465 6620 636f  ike MADE..def co
-0001b1e0: 7374 5f66 756e 6374 696f 6e5f 6477 6165  st_function_dwae
-0001b1f0: 2870 6172 616d 732c 2058 2c20 7929 3a0d  (params, X, y):.
-0001b200: 0a20 2020 2041 203d 2079 0d0a 2020 2020  .    A = y..    
-0001b210: 4620 3d20 6e70 2e64 6f74 2858 2c20 7061  F = np.dot(X, pa
-0001b220: 7261 6d73 2e72 6573 6861 7065 2858 2e73  rams.reshape(X.s
-0001b230: 6861 7065 5b31 5d2c 2079 2e73 6861 7065  hape[1], y.shape
-0001b240: 5b31 5d29 290d 0a20 2020 206c 6173 745f  [1]))..    last_
-0001b250: 6f66 5f61 7272 6179 203d 2079 5b5b 305d  of_array = y[[0]
-0001b260: 202b 206c 6973 7428 7261 6e67 6528 6c65   + list(range(le
-0001b270: 6e28 7929 202d 2031 2929 5d0d 0a20 2020  n(y) - 1))]..   
-0001b280: 2072 6574 7572 6e20 6e70 2e73 756d 280d   return np.sum(.
-0001b290: 0a20 2020 2020 2020 206e 702e 6e61 6e6d  .        np.nanm
-0001b2a0: 6561 6e28 0d0a 2020 2020 2020 2020 2020  ean(..          
-0001b2b0: 2020 6e70 2e77 6865 7265 280d 0a20 2020    np.where(..   
-0001b2c0: 2020 2020 2020 2020 2020 2020 206e 702e               np.
-0001b2d0: 7369 676e 2846 202d 206c 6173 745f 6f66  sign(F - last_of
-0001b2e0: 5f61 7272 6179 2920 3d3d 206e 702e 7369  _array) == np.si
-0001b2f0: 676e 2841 202d 206c 6173 745f 6f66 5f61  gn(A - last_of_a
-0001b300: 7272 6179 292c 0d0a 2020 2020 2020 2020  rray),..        
-0001b310: 2020 2020 2020 2020 6e70 2e61 6273 2841          np.abs(A
-0001b320: 202d 2046 292c 0d0a 2020 2020 2020 2020   - F),..        
-0001b330: 2020 2020 2020 2020 286e 702e 6162 7328          (np.abs(
-0001b340: 4120 2d20 4629 202b 2031 2920 2a2a 2032  A - F) + 1) ** 2
-0001b350: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-0001b360: 2c0d 0a20 2020 2020 2020 2020 2020 2061  ,..            a
-0001b370: 7869 733d 302c 0d0a 2020 2020 2020 2020  xis=0,..        
-0001b380: 290d 0a20 2020 2029 0d0a 0d0a 0d0a 6465  )..    )......de
-0001b390: 6620 636f 7374 5f66 756e 6374 696f 6e5f  f cost_function_
-0001b3a0: 7175 616e 7469 6c65 2870 6172 616d 732c  quantile(params,
-0001b3b0: 2058 2c20 792c 2071 3d30 2e39 293a 0d0a   X, y, q=0.9):..
-0001b3c0: 2020 2020 6375 7420 3d20 696e 7428 792e      cut = int(y.
-0001b3d0: 7368 6170 655b 305d 202a 2071 290d 0a20  shape[0] * q).. 
-0001b3e0: 2020 2072 6574 7572 6e20 6e70 2e73 756d     return np.sum
-0001b3f0: 280d 0a20 2020 2020 2020 206e 702e 7061  (..        np.pa
-0001b400: 7274 6974 696f 6e28 0d0a 2020 2020 2020  rtition(..      
-0001b410: 2020 2020 2020 6e70 2e61 6273 2879 202d        np.abs(y -
-0001b420: 206e 702e 646f 7428 582c 2070 6172 616d   np.dot(X, param
-0001b430: 732e 7265 7368 6170 6528 582e 7368 6170  s.reshape(X.shap
-0001b440: 655b 315d 2c20 792e 7368 6170 655b 315d  e[1], y.shape[1]
-0001b450: 2929 292c 2063 7574 2c20 6178 6973 3d30  ))), cut, axis=0
-0001b460: 0d0a 2020 2020 2020 2020 295b 303a 6375  ..        )[0:cu
-0001b470: 745d 0d0a 2020 2020 290d 0a0d 0a0d 0a64  t]..    )......d
-0001b480: 6566 2063 6f73 745f 6675 6e63 7469 6f6e  ef cost_function
-0001b490: 5f6c 3228 7061 7261 6d73 2c20 582c 2079  _l2(params, X, y
-0001b4a0: 293a 0d0a 2020 2020 7265 7475 726e 206e  ):..    return n
-0001b4b0: 702e 6c69 6e61 6c67 2e6e 6f72 6d28 7920  p.linalg.norm(y 
-0001b4c0: 2d20 6e70 2e64 6f74 2858 2c20 7061 7261  - np.dot(X, para
-0001b4d0: 6d73 2e72 6573 6861 7065 2858 2e73 6861  ms.reshape(X.sha
-0001b4e0: 7065 5b31 5d2c 2079 2e73 6861 7065 5b31  pe[1], y.shape[1
-0001b4f0: 5d29 2929 0d0a 0d0a 0d0a 2320 636f 756c  ])))......# coul
-0001b500: 6420 646f 2070 6172 7469 616c 2070 6f6f  d do partial poo
-0001b510: 6c69 6e67 2062 7920 6d69 6e69 6d69 7a69  ling by minimizi
-0001b520: 6e67 2061 2066 756e 6374 696f 6e20 7468  ng a function th
-0001b530: 6174 206d 6978 6573 2073 6861 7265 6420  at mixes shared 
-0001b540: 616e 6420 756e 7368 6172 6564 2063 6f65  and unshared coe
-0001b550: 6666 6963 6965 6e74 7320 286d 756c 7469  fficients (multi
-0001b560: 706c 6963 6174 6976 6529 0d0a 6465 6620  plicative)..def 
-0001b570: 6c73 7473 715f 6d69 6e69 6d69 7a65 2858  lstsq_minimize(X
-0001b580: 2c20 792c 206d 6178 6974 6572 3d31 3530  , y, maxiter=150
-0001b590: 3030 2c20 636f 7374 5f66 756e 6374 696f  00, cost_functio
-0001b5a0: 6e3d 226c 3122 2c20 6d65 7468 6f64 3d4e  n="l1", method=N
-0001b5b0: 6f6e 6529 3a0d 0a20 2020 2022 2222 416e  one):..    """An
-0001b5c0: 7920 636f 7374 2066 756e 6374 696f 6e20  y cost function 
-0001b5d0: 7665 7273 696f 6e20 6f66 206c 696e 2072  version of lin r
-0001b5e0: 6567 2e22 2222 0d0a 2020 2020 2320 7374  eg."""..    # st
-0001b5f0: 6172 7420 7769 7468 206c 7374 7371 2066  art with lstsq f
-0001b600: 6974 2061 7320 6573 7469 6d61 7465 6420  it as estimated 
-0001b610: 706f 696e 740d 0a20 2020 2078 3020 3d20  point..    x0 = 
-0001b620: 6c73 7473 715f 736f 6c76 6528 582c 2079  lstsq_solve(X, y
-0001b630: 292e 666c 6174 7465 6e28 290d 0a20 2020  ).flatten()..   
-0001b640: 2023 2061 7373 756d 696e 6720 7363 616c   # assuming scal
-0001b650: 6564 2c20 7468 6573 6520 7368 6f75 6c64  ed, these should
-0001b660: 2062 6520 7265 6173 6f6e 6162 6c65 2062   be reasonable b
-0001b670: 6f75 6e64 730d 0a20 2020 2062 6f75 6e64  ounds..    bound
-0001b680: 7320 3d20 5b28 2d31 302c 2031 3029 2066  s = [(-10, 10) f
-0001b690: 6f72 2078 2069 6e20 7830 5d0d 0a20 2020  or x in x0]..   
-0001b6a0: 2069 6620 636f 7374 5f66 756e 6374 696f   if cost_functio
-0001b6b0: 6e20 3d3d 2022 6477 6165 223a 0d0a 2020  n == "dwae":..  
-0001b6c0: 2020 2020 2020 626f 756e 6473 203d 205b        bounds = [
-0001b6d0: 282d 302e 352c 2031 3029 2066 6f72 2078  (-0.5, 10) for x
-0001b6e0: 2069 6e20 7830 5d0d 0a20 2020 2020 2020   in x0]..       
-0001b6f0: 2063 6f73 745f 6675 6e63 203d 2063 6f73   cost_func = cos
-0001b700: 745f 6675 6e63 7469 6f6e 5f64 7761 650d  t_function_dwae.
-0001b710: 0a20 2020 2065 6c69 6620 636f 7374 5f66  .    elif cost_f
-0001b720: 756e 6374 696f 6e20 3d3d 2022 7175 616e  unction == "quan
-0001b730: 7469 6c65 223a 0d0a 2020 2020 2020 2020  tile":..        
-0001b740: 636f 7374 5f66 756e 6320 3d20 636f 7374  cost_func = cost
-0001b750: 5f66 756e 6374 696f 6e5f 7175 616e 7469  _function_quanti
-0001b760: 6c65 0d0a 2020 2020 656c 6966 2063 6f73  le..    elif cos
-0001b770: 745f 6675 6e63 7469 6f6e 203d 3d20 226c  t_function == "l
-0001b780: 315f 706f 7369 7469 7665 223a 0d0a 2020  1_positive":..  
-0001b790: 2020 2020 2020 626f 756e 6473 203d 205b        bounds = [
-0001b7a0: 2830 2c20 3130 2920 666f 7220 7820 696e  (0, 10) for x in
-0001b7b0: 2078 305d 0d0a 2020 2020 2020 2020 636f   x0]..        co
-0001b7c0: 7374 5f66 756e 6320 3d20 636f 7374 5f66  st_func = cost_f
-0001b7d0: 756e 6374 696f 6e5f 6c31 0d0a 2020 2020  unction_l1..    
-0001b7e0: 656c 7365 3a0d 0a20 2020 2020 2020 2063  else:..        c
-0001b7f0: 6f73 745f 6675 6e63 203d 2063 6f73 745f  ost_func = cost_
-0001b800: 6675 6e63 7469 6f6e 5f6c 310d 0a20 2020  function_l1..   
-0001b810: 2072 6574 7572 6e20 6d69 6e69 6d69 7a65   return minimize
-0001b820: 280d 0a20 2020 2020 2020 2063 6f73 745f  (..        cost_
-0001b830: 6675 6e63 2c0d 0a20 2020 2020 2020 2078  func,..        x
-0001b840: 302c 0d0a 2020 2020 2020 2020 6172 6773  0,..        args
-0001b850: 3d28 582c 2079 292c 0d0a 2020 2020 2020  =(X, y),..      
-0001b860: 2020 626f 756e 6473 3d62 6f75 6e64 732c    bounds=bounds,
-0001b870: 0d0a 2020 2020 2020 2020 6d65 7468 6f64  ..        method
-0001b880: 3d6d 6574 686f 642c 0d0a 2020 2020 2020  =method,..      
-0001b890: 2020 6f70 7469 6f6e 733d 7b27 6d61 7869    options={'maxi
-0001b8a0: 7465 7227 3a20 6d61 7869 7465 727d 2c0d  ter': maxiter},.
-0001b8b0: 0a20 2020 2029 2e78 2e72 6573 6861 7065  .    ).x.reshape
-0001b8c0: 2858 2e73 6861 7065 5b31 5d2c 2079 2e73  (X.shape[1], y.s
-0001b8d0: 6861 7065 5b31 5d29 0d0a 0d0a 0d0a 6465  hape[1])......de
-0001b8e0: 6620 6669 745f 6c69 6e65 6172 5f6d 6f64  f fit_linear_mod
-0001b8f0: 656c 2878 2c20 792c 2070 6172 616d 733d  el(x, y, params=
-0001b900: 4e6f 6e65 293a 0d0a 2020 2020 6966 2070  None):..    if p
-0001b910: 6172 616d 7320 6973 204e 6f6e 653a 0d0a  arams is None:..
-0001b920: 2020 2020 2020 2020 7061 7261 6d73 203d          params =
-0001b930: 207b 7d0d 0a20 2020 206d 6f64 656c 5f74   {}..    model_t
-0001b940: 7970 6520 3d20 7061 7261 6d73 2e67 6574  ype = params.get
-0001b950: 2822 6d6f 6465 6c22 2c20 226c 7374 7371  ("model", "lstsq
-0001b960: 2229 0d0a 2020 2020 6c61 6d62 6420 3d20  ")..    lambd = 
-0001b970: 7061 7261 6d73 2e67 6574 2822 6c61 6d62  params.get("lamb
-0001b980: 6461 222c 204e 6f6e 6529 0d0a 2020 2020  da", None)..    
-0001b990: 7265 6320 3d20 7061 7261 6d73 2e67 6574  rec = params.get
-0001b9a0: 2822 7265 6365 6e63 795f 7765 6967 6874  ("recency_weight
-0001b9b0: 696e 6722 2c20 4e6f 6e65 290d 0a20 2020  ing", None)..   
-0001b9c0: 2069 6620 6c61 6d62 6420 6973 206e 6f74   if lambd is not
-0001b9d0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001b9e0: 6964 5f6d 6174 203d 206e 702e 7a65 726f  id_mat = np.zero
-0001b9f0: 7328 2878 2e73 6861 7065 5b31 5d2c 2078  s((x.shape[1], x
-0001ba00: 2e73 6861 7065 5b31 5d29 290d 0a20 2020  .shape[1]))..   
-0001ba10: 2020 2020 206e 702e 6669 6c6c 5f64 6961       np.fill_dia
-0001ba20: 676f 6e61 6c28 6964 5f6d 6174 2c20 3129  gonal(id_mat, 1)
-0001ba30: 0d0a 2020 2020 2020 2020 6964 5f6d 6174  ..        id_mat
-0001ba40: 5b30 2c20 305d 203d 2030 0d0a 2020 2020  [0, 0] = 0..    
-0001ba50: 656c 7365 3a0d 0a20 2020 2020 2020 2069  else:..        i
-0001ba60: 645f 6d61 7420 3d20 4e6f 6e65 0d0a 2020  d_mat = None..  
-0001ba70: 2020 6966 2072 6563 2069 7320 6e6f 7420    if rec is not 
-0001ba80: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2077  None:..        w
-0001ba90: 6569 6768 7473 203d 2028 6e70 2e61 7261  eights = (np.ara
-0001baa0: 6e67 6528 6c65 6e28 7829 2920 2b20 3129  nge(len(x)) + 1)
-0001bab0: 202a 2a20 7265 6320 2023 2030 2e30 3520   ** rec  # 0.05 
-0001bac0: 2d20 302e 3235 0d0a 2020 2020 2020 2020  - 0.25..        
-0001bad0: 7820 3d20 7820 2a20 7765 6967 6874 735b  x = x * weights[
-0001bae0: 2e2e 2e2c 204e 6f6e 655d 0d0a 2020 2020  ..., None]..    
-0001baf0: 2020 2020 7920 3d20 6e70 2e61 7361 7272      y = np.asarr
-0001bb00: 6179 2879 2920 2a20 7765 6967 6874 735b  ay(y) * weights[
-0001bb10: 2e2e 2e2c 204e 6f6e 655d 0d0a 2020 2020  ..., None]..    
-0001bb20: 6966 206d 6f64 656c 5f74 7970 6520 3d3d  if model_type ==
-0001bb30: 2022 6c73 7473 7122 3a0d 0a20 2020 2020   "lstsq":..     
-0001bb40: 2020 2069 6620 6c61 6d62 6420 6973 206e     if lambd is n
-0001bb50: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-0001bb60: 2020 2020 2020 7265 7475 726e 206e 702e        return np.
-0001bb70: 6c69 6e61 6c67 2e6c 7374 7371 2878 2e54  linalg.lstsq(x.T
-0001bb80: 2e64 6f74 2878 2920 2b20 6c61 6d62 6420  .dot(x) + lambd 
-0001bb90: 2a20 6964 5f6d 6174 2c20 782e 542e 646f  * id_mat, x.T.do
-0001bba0: 7428 7929 2c20 7263 6f6e 643d 4e6f 6e65  t(y), rcond=None
-0001bbb0: 295b 0d0a 2020 2020 2020 2020 2020 2020  )[..            
-0001bbc0: 2020 2020 300d 0a20 2020 2020 2020 2020      0..         
-0001bbd0: 2020 205d 0d0a 2020 2020 2020 2020 656c     ]..        el
-0001bbe0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-0001bbf0: 2072 6574 7572 6e20 6e70 2e6c 696e 616c   return np.linal
-0001bc00: 672e 6c73 7473 7128 782c 2079 2c20 7263  g.lstsq(x, y, rc
-0001bc10: 6f6e 643d 4e6f 6e65 295b 305d 0d0a 2020  ond=None)[0]..  
-0001bc20: 2020 656c 6966 206d 6f64 656c 5f74 7970    elif model_typ
-0001bc30: 6520 3d3d 2022 6c69 6e61 6c67 5f73 6f6c  e == "linalg_sol
-0001bc40: 7665 223a 0d0a 2020 2020 2020 2020 7265  ve":..        re
-0001bc50: 7475 726e 206c 7374 7371 5f73 6f6c 7665  turn lstsq_solve
-0001bc60: 2878 2c20 792c 206c 616d 623d 6c61 6d62  (x, y, lamb=lamb
-0001bc70: 642c 2069 6465 6e74 6974 795f 6d61 7472  d, identity_matr
-0001bc80: 6978 3d69 645f 6d61 7429 0d0a 2020 2020  ix=id_mat)..    
-0001bc90: 656c 6966 206d 6f64 656c 5f74 7970 6520  elif model_type 
-0001bca0: 3d3d 2022 6c31 5f6e 6f72 6d22 3a0d 0a20  == "l1_norm":.. 
-0001bcb0: 2020 2020 2020 2072 6574 7572 6e20 6c73         return ls
-0001bcc0: 7473 715f 6d69 6e69 6d69 7a65 280d 0a20  tsq_minimize(.. 
-0001bcd0: 2020 2020 2020 2020 2020 206e 702e 6173             np.as
-0001bce0: 6172 7261 7928 7829 2c0d 0a20 2020 2020  array(x),..     
-0001bcf0: 2020 2020 2020 206e 702e 6173 6172 7261         np.asarra
-0001bd00: 7928 7929 2c0d 0a20 2020 2020 2020 2020  y(y),..         
-0001bd10: 2020 206d 6178 6974 6572 3d70 6172 616d     maxiter=param
-0001bd20: 732e 6765 7428 226d 6178 6974 6572 222c  s.get("maxiter",
-0001bd30: 2031 3530 3030 292c 0d0a 2020 2020 2020   15000),..      
-0001bd40: 2020 2020 2020 6d65 7468 6f64 3d70 6172        method=par
-0001bd50: 616d 732e 6765 7428 226d 6574 686f 6422  ams.get("method"
-0001bd60: 2c20 4e6f 6e65 292c 0d0a 2020 2020 2020  , None),..      
-0001bd70: 2020 2020 2020 636f 7374 5f66 756e 6374        cost_funct
-0001bd80: 696f 6e3d 226c 3122 2c0d 0a20 2020 2020  ion="l1",..     
-0001bd90: 2020 2029 0d0a 2020 2020 656c 6966 206d     )..    elif m
-0001bda0: 6f64 656c 5f74 7970 6520 3d3d 2022 7175  odel_type == "qu
-0001bdb0: 616e 7469 6c65 5f6e 6f72 6d22 3a0d 0a20  antile_norm":.. 
-0001bdc0: 2020 2020 2020 2072 6574 7572 6e20 6c73         return ls
-0001bdd0: 7473 715f 6d69 6e69 6d69 7a65 280d 0a20  tsq_minimize(.. 
-0001bde0: 2020 2020 2020 2020 2020 206e 702e 6173             np.as
-0001bdf0: 6172 7261 7928 7829 2c0d 0a20 2020 2020  array(x),..     
-0001be00: 2020 2020 2020 206e 702e 6173 6172 7261         np.asarra
-0001be10: 7928 7929 2c0d 0a20 2020 2020 2020 2020  y(y),..         
-0001be20: 2020 206d 6178 6974 6572 3d70 6172 616d     maxiter=param
-0001be30: 732e 6765 7428 226d 6178 6974 6572 222c  s.get("maxiter",
-0001be40: 2031 3530 3030 292c 0d0a 2020 2020 2020   15000),..      
-0001be50: 2020 2020 2020 6d65 7468 6f64 3d70 6172        method=par
-0001be60: 616d 732e 6765 7428 226d 6574 686f 6422  ams.get("method"
-0001be70: 2c20 4e6f 6e65 292c 0d0a 2020 2020 2020  , None),..      
-0001be80: 2020 2020 2020 636f 7374 5f66 756e 6374        cost_funct
-0001be90: 696f 6e3d 2271 7561 6e74 696c 6522 2c0d  ion="quantile",.
-0001bea0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-0001beb0: 656c 6966 206d 6f64 656c 5f74 7970 6520  elif model_type 
-0001bec0: 3d3d 2022 6477 6165 5f6e 6f72 6d22 3a0d  == "dwae_norm":.
-0001bed0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001bee0: 6c73 7473 715f 6d69 6e69 6d69 7a65 280d  lstsq_minimize(.
-0001bef0: 0a20 2020 2020 2020 2020 2020 206e 702e  .            np.
-0001bf00: 6173 6172 7261 7928 7829 2c0d 0a20 2020  asarray(x),..   
-0001bf10: 2020 2020 2020 2020 206e 702e 6173 6172           np.asar
-0001bf20: 7261 7928 7929 2c0d 0a20 2020 2020 2020  ray(y),..       
-0001bf30: 2020 2020 206d 6178 6974 6572 3d70 6172       maxiter=par
-0001bf40: 616d 732e 6765 7428 226d 6178 6974 6572  ams.get("maxiter
-0001bf50: 222c 2031 3530 3030 292c 0d0a 2020 2020  ", 15000),..    
-0001bf60: 2020 2020 2020 2020 6d65 7468 6f64 3d70          method=p
-0001bf70: 6172 616d 732e 6765 7428 226d 6574 686f  arams.get("metho
-0001bf80: 6422 2c20 4e6f 6e65 292c 0d0a 2020 2020  d", None),..    
-0001bf90: 2020 2020 2020 2020 636f 7374 5f66 756e          cost_fun
-0001bfa0: 6374 696f 6e3d 2264 7761 6522 2c0d 0a20  ction="dwae",.. 
-0001bfb0: 2020 2020 2020 2029 0d0a 2020 2020 656c         )..    el
-0001bfc0: 6966 206d 6f64 656c 5f74 7970 6520 3d3d  if model_type ==
-0001bfd0: 2022 6c31 5f70 6f73 6974 6976 6522 3a0d   "l1_positive":.
-0001bfe0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001bff0: 6c73 7473 715f 6d69 6e69 6d69 7a65 280d  lstsq_minimize(.
-0001c000: 0a20 2020 2020 2020 2020 2020 206e 702e  .            np.
-0001c010: 6173 6172 7261 7928 7829 2c0d 0a20 2020  asarray(x),..   
-0001c020: 2020 2020 2020 2020 206e 702e 6173 6172           np.asar
-0001c030: 7261 7928 7929 2c0d 0a20 2020 2020 2020  ray(y),..       
-0001c040: 2020 2020 206d 6178 6974 6572 3d70 6172       maxiter=par
-0001c050: 616d 732e 6765 7428 226d 6178 6974 6572  ams.get("maxiter
-0001c060: 222c 2031 3530 3030 292c 0d0a 2020 2020  ", 15000),..    
-0001c070: 2020 2020 2020 2020 6d65 7468 6f64 3d70          method=p
-0001c080: 6172 616d 732e 6765 7428 226d 6574 686f  arams.get("metho
-0001c090: 6422 2c20 4e6f 6e65 292c 0d0a 2020 2020  d", None),..    
-0001c0a0: 2020 2020 2020 2020 636f 7374 5f66 756e          cost_fun
-0001c0b0: 6374 696f 6e3d 226c 315f 706f 7369 7469  ction="l1_positi
-0001c0c0: 7665 222c 0d0a 2020 2020 2020 2020 290d  ve",..        ).
-0001c0d0: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
-0001c0e0: 7479 7065 203d 3d20 2262 6179 6573 6961  type == "bayesia
-0001c0f0: 6e5f 6c69 6e65 6172 223a 0d0a 2020 2020  n_linear":..    
-0001c100: 2020 2020 2320 7468 6973 2063 6f75 6c64      # this could
-0001c110: 2073 7570 706f 7274 2062 6574 7465 7220   support better 
-0001c120: 7072 6f62 6162 696c 6973 7469 6320 626f  probabilistic bo
-0001c130: 756e 6473 2062 7574 2074 6861 7420 6973  unds but that is
-0001c140: 206e 6f74 2079 6574 2064 6f6e 650d 0a20   not yet done.. 
-0001c150: 2020 2020 2020 206d 6f64 656c 203d 2042         model = B
-0001c160: 6179 6573 6961 6e4d 756c 7469 4f75 7470  ayesianMultiOutp
-0001c170: 7574 5265 6772 6573 7369 6f6e 280d 0a20  utRegression(.. 
-0001c180: 2020 2020 2020 2020 2020 2061 6c70 6861             alpha
-0001c190: 3d70 6172 616d 732e 6765 7428 2261 6c70  =params.get("alp
-0001c1a0: 6861 222c 2031 292c 0d0a 2020 2020 2020  ha", 1),..      
-0001c1b0: 2020 2020 2020 6761 7573 7369 616e 5f70        gaussian_p
-0001c1c0: 7269 6f72 5f6d 6561 6e3d 7061 7261 6d73  rior_mean=params
-0001c1d0: 2e67 6574 2822 6761 7573 7369 616e 5f70  .get("gaussian_p
-0001c1e0: 7269 6f72 5f6d 6561 6e22 2c20 3029 2c0d  rior_mean", 0),.
-0001c1f0: 0a20 2020 2020 2020 2020 2020 2077 6973  .            wis
-0001c200: 6861 7274 5f70 7269 6f72 5f73 6361 6c65  hart_prior_scale
-0001c210: 3d70 6172 616d 732e 6765 7428 2277 6973  =params.get("wis
-0001c220: 6861 7274 5f70 7269 6f72 5f73 6361 6c65  hart_prior_scale
-0001c230: 222c 2031 292c 0d0a 2020 2020 2020 2020  ", 1),..        
-0001c240: 2020 2020 7769 7368 6172 745f 646f 665f      wishart_dof_
-0001c250: 6578 6365 7373 3d70 6172 616d 732e 6765  excess=params.ge
-0001c260: 7428 2277 6973 6861 7274 5f64 6f66 5f65  t("wishart_dof_e
-0001c270: 7863 6573 7322 2c20 3029 2c0d 0a20 2020  xcess", 0),..   
-0001c280: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-0001c290: 6d6f 6465 6c2e 6669 7428 583d 6e70 2e61  model.fit(X=np.a
-0001c2a0: 7361 7272 6179 2878 292c 2059 3d6e 702e  sarray(x), Y=np.
-0001c2b0: 6173 6172 7261 7928 7929 290d 0a20 2020  asarray(y))..   
-0001c2c0: 2020 2020 2072 6574 7572 6e20 6d6f 6465       return mode
-0001c2d0: 6c2e 7061 7261 6d73 0d0a 2020 2020 656c  l.params..    el
-0001c2e0: 7365 3a0d 0a20 2020 2020 2020 2072 6169  se:..        rai
-0001c2f0: 7365 2056 616c 7565 4572 726f 7228 226c  se ValueError("l
-0001c300: 696e 6561 7220 6d6f 6465 6c20 6e6f 7420  inear model not 
-0001c310: 7265 636f 676e 697a 6564 2229 0d0a 0d0a  recognized")....
-0001c320: 0d0a 636c 6173 7320 4261 7965 7369 616e  ..class Bayesian
-0001c330: 4d75 6c74 694f 7574 7075 7452 6567 7265  MultiOutputRegre
-0001c340: 7373 696f 6e3a 0d0a 2020 2020 2222 2242  ssion:..    """B
-0001c350: 6179 6573 6961 6e20 4c69 6e65 6172 2052  ayesian Linear R
-0001c360: 6567 7265 7373 696f 6e2c 2063 6f6e 6a75  egression, conju
-0001c370: 6761 7465 2070 7269 6f72 2075 7064 6174  gate prior updat
-0001c380: 652e 0d0a 0d0a 2020 2020 4172 6773 3a0d  e.....    Args:.
-0001c390: 0a20 2020 2020 2020 2067 6175 7373 6961  .        gaussia
-0001c3a0: 6e5f 7072 696f 725f 6d65 616e 2028 666c  n_prior_mean (fl
-0001c3b0: 6f61 7429 3a20 6d65 616e 206f 6620 7072  oat): mean of pr
-0001c3c0: 696f 722c 2061 2073 6d61 6c6c 2070 6f73  ior, a small pos
-0001c3d0: 6974 6976 6520 7661 6c75 6520 6361 6e20  itive value can 
-0001c3e0: 656e 636f 7572 6167 6520 706f 7369 7469  encourage positi
-0001c3f0: 7665 2063 6f65 6673 2077 6869 6368 206d  ve coefs which m
-0001c400: 616b 6520 6265 7474 6572 2063 6f6d 706f  ake better compo
-0001c410: 6e65 6e74 2070 6c6f 7473 0d0a 2020 2020  nent plots..    
-0001c420: 2020 2020 616c 7068 6120 2866 6c6f 6174      alpha (float
-0001c430: 293a 2070 7269 6f72 2073 6361 6c65 206f  ): prior scale o
-0001c440: 6620 6761 7573 7369 616e 2063 6f76 6172  f gaussian covar
-0001c450: 6961 6e63 652c 2065 6666 6563 7469 7665  iance, effective
-0001c460: 6c79 2061 2072 6567 756c 6172 697a 6174  ly a regularizat
-0001c470: 696f 6e20 7465 726d 0d0a 2020 2020 2020  ion term..      
-0001c480: 2020 7769 7368 6172 745f 646f 665f 6578    wishart_dof_ex
-0001c490: 6365 7373 2028 696e 7429 3a20 4c61 7267  cess (int): Larg
-0001c4a0: 6572 2076 616c 7565 7320 6d61 6b65 2074  er values make t
-0001c4b0: 6865 2070 7269 6f72 206d 6f72 6520 7065  he prior more pe
-0001c4c0: 616b 6564 2061 726f 756e 6420 7468 6520  aked around the 
-0001c4d0: 7363 616c 6520 6d61 7472 6978 2e0d 0a20  scale matrix... 
-0001c4e0: 2020 2020 2020 2077 6973 6861 7274 5f70         wishart_p
-0001c4f0: 7269 6f72 5f73 6361 6c65 2028 666c 6f61  rior_scale (floa
-0001c500: 7429 3a20 4120 6c61 7267 6572 2076 616c  t): A larger val
-0001c510: 7565 206d 6561 6e73 2061 2073 6d61 6c6c  ue means a small
-0001c520: 6572 2070 7269 6f72 2076 6172 6961 6e63  er prior varianc
-0001c530: 6520 6f6e 2074 6865 206e 6f69 7365 2063  e on the noise c
-0001c540: 6f76 6172 6961 6e63 652c 2077 6869 6c65  ovariance, while
-0001c550: 2061 2073 6d61 6c6c 6572 2076 616c 7565   a smaller value
-0001c560: 206d 6561 6e73 206d 6f72 6520 7072 696f   means more prio
-0001c570: 7220 756e 6365 7274 6169 6e74 7920 6162  r uncertainty ab
-0001c580: 6f75 7420 6974 2e0d 0a20 2020 2022 2222  out it...    """
-0001c590: 0d0a 0d0a 2020 2020 6465 6620 5f5f 696e  ....    def __in
-0001c5a0: 6974 5f5f 280d 0a20 2020 2020 2020 2073  it__(..        s
-0001c5b0: 656c 662c 0d0a 2020 2020 2020 2020 6761  elf,..        ga
-0001c5c0: 7573 7369 616e 5f70 7269 6f72 5f6d 6561  ussian_prior_mea
-0001c5d0: 6e3d 302c 0d0a 2020 2020 2020 2020 616c  n=0,..        al
-0001c5e0: 7068 613d 312e 302c 0d0a 2020 2020 2020  pha=1.0,..      
-0001c5f0: 2020 7769 7368 6172 745f 7072 696f 725f    wishart_prior_
-0001c600: 7363 616c 653d 312e 302c 0d0a 2020 2020  scale=1.0,..    
-0001c610: 2020 2020 7769 7368 6172 745f 646f 665f      wishart_dof_
-0001c620: 6578 6365 7373 3d30 2c0d 0a20 2020 2029  excess=0,..    )
-0001c630: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
-0001c640: 6761 7573 7369 616e 5f70 7269 6f72 5f6d  gaussian_prior_m
-0001c650: 6561 6e20 3d20 6761 7573 7369 616e 5f70  ean = gaussian_p
-0001c660: 7269 6f72 5f6d 6561 6e0d 0a20 2020 2020  rior_mean..     
-0001c670: 2020 2073 656c 662e 616c 7068 6120 3d20     self.alpha = 
-0001c680: 616c 7068 610d 0a20 2020 2020 2020 2073  alpha..        s
-0001c690: 656c 662e 7769 7368 6172 745f 7072 696f  elf.wishart_prio
-0001c6a0: 725f 7363 616c 6520 3d20 7769 7368 6172  r_scale = wishar
-0001c6b0: 745f 7072 696f 725f 7363 616c 650d 0a20  t_prior_scale.. 
-0001c6c0: 2020 2020 2020 2073 656c 662e 7769 7368         self.wish
-0001c6d0: 6172 745f 646f 665f 6578 6365 7373 203d  art_dof_excess =
-0001c6e0: 2077 6973 6861 7274 5f64 6f66 5f65 7863   wishart_dof_exc
-0001c6f0: 6573 730d 0a0d 0a20 2020 2064 6566 2066  ess....    def f
-0001c700: 6974 2873 656c 662c 2058 2c20 5929 3a0d  it(self, X, Y):.
-0001c710: 0a20 2020 2020 2020 206e 5f73 616d 706c  .        n_sampl
-0001c720: 6573 2c20 6e5f 6665 6174 7572 6573 203d  es, n_features =
-0001c730: 2058 2e73 6861 7065 0d0a 2020 2020 2020   X.shape..      
-0001c740: 2020 6e5f 6f75 7470 7574 7320 3d20 592e    n_outputs = Y.
-0001c750: 7368 6170 655b 315d 0d0a 0d0a 2020 2020  shape[1]....    
-0001c760: 2020 2020 2320 5072 696f 7220 666f 7220      # Prior for 
-0001c770: 7468 6520 7265 6772 6573 7369 6f6e 2063  the regression c
-0001c780: 6f65 6666 6963 6965 6e74 733a 2047 6175  oefficients: Gau
-0001c790: 7373 6961 6e0d 0a20 2020 2020 2020 2023  ssian..        #
-0001c7a0: 2046 6f72 2052 6964 6765 2072 6567 756c   For Ridge regul
-0001c7b0: 6172 697a 6174 696f 6e3a 2053 6574 2074  arization: Set t
-0001c7c0: 6865 2064 6961 676f 6e61 6c20 656c 656d  he diagonal elem
-0001c7d0: 656e 7473 2074 6f20 616c 7068 610d 0a20  ents to alpha.. 
-0001c7e0: 2020 2020 2020 2073 656c 662e 6d5f 3020         self.m_0 
-0001c7f0: 3d20 280d 0a20 2020 2020 2020 2020 2020  = (..           
-0001c800: 206e 702e 7a65 726f 7328 286e 5f66 6561   np.zeros((n_fea
-0001c810: 7475 7265 732c 206e 5f6f 7574 7075 7473  tures, n_outputs
-0001c820: 2929 202b 2073 656c 662e 6761 7573 7369  )) + self.gaussi
-0001c830: 616e 5f70 7269 6f72 5f6d 6561 6e0d 0a20  an_prior_mean.. 
-0001c840: 2020 2020 2020 2029 2020 2320 5072 696f         )  # Prio
-0001c850: 7220 6d65 616e 0d0a 2020 2020 2020 2020  r mean..        
-0001c860: 7365 6c66 2e53 5f30 203d 2073 656c 662e  self.S_0 = self.
-0001c870: 616c 7068 6120 2a20 6e70 2e65 7965 286e  alpha * np.eye(n
-0001c880: 5f66 6561 7475 7265 7329 2020 2320 5072  _features)  # Pr
-0001c890: 696f 7220 636f 7661 7269 616e 6365 0d0a  ior covariance..
-0001c8a0: 0d0a 2020 2020 2020 2020 2320 5072 696f  ..        # Prio
-0001c8b0: 7220 666f 7220 7468 6520 7072 6563 6973  r for the precis
-0001c8c0: 696f 6e20 6d61 7472 6978 2028 696e 7665  ion matrix (inve
-0001c8d0: 7273 6520 636f 7661 7269 616e 6365 293a  rse covariance):
-0001c8e0: 2057 6973 6861 7274 0d0a 2020 2020 2020   Wishart..      
-0001c8f0: 2020 7365 6c66 2e6e 755f 3020 3d20 6e5f    self.nu_0 = n_
-0001c900: 6665 6174 7572 6573 202b 2073 656c 662e  features + self.
-0001c910: 7769 7368 6172 745f 646f 665f 6578 6365  wishart_dof_exce
-0001c920: 7373 2020 2320 4465 6772 6565 7320 6f66  ss  # Degrees of
-0001c930: 2066 7265 6564 6f6d 0d0a 2020 2020 2020   freedom..      
-0001c940: 2020 7365 6c66 2e57 5f30 5f69 6e76 203d    self.W_0_inv =
-0001c950: 2073 656c 662e 7769 7368 6172 745f 7072   self.wishart_pr
-0001c960: 696f 725f 7363 616c 6520 2a20 6e70 2e65  ior_scale * np.e
-0001c970: 7965 280d 0a20 2020 2020 2020 2020 2020  ye(..           
-0001c980: 206e 5f6f 7574 7075 7473 0d0a 2020 2020   n_outputs..    
-0001c990: 2020 2020 2920 2023 2053 6361 6c65 206d      )  # Scale m
-0001c9a0: 6174 7269 7820 2869 6e76 6572 7365 290d  atrix (inverse).
-0001c9b0: 0a0d 0a20 2020 2020 2020 2023 2050 6f73  ...        # Pos
-0001c9c0: 7465 7269 6f72 2066 6f72 2074 6865 2072  terior for the r
-0001c9d0: 6567 7265 7373 696f 6e20 636f 6566 6669  egression coeffi
-0001c9e0: 6369 656e 7473 0d0a 2020 2020 2020 2020  cients..        
-0001c9f0: 535f 305f 696e 7620 3d20 6e70 2e6c 696e  S_0_inv = np.lin
-0001ca00: 616c 672e 696e 7628 7365 6c66 2e53 5f30  alg.inv(self.S_0
-0001ca10: 290d 0a20 2020 2020 2020 2053 5f6e 5f69  )..        S_n_i
-0001ca20: 6e76 203d 2053 5f30 5f69 6e76 202b 2058  nv = S_0_inv + X
-0001ca30: 2e54 2040 2058 0d0a 2020 2020 2020 2020  .T @ X..        
-0001ca40: 535f 6e20 3d20 6e70 2e6c 696e 616c 672e  S_n = np.linalg.
-0001ca50: 696e 7628 535f 6e5f 696e 7629 0d0a 2020  inv(S_n_inv)..  
-0001ca60: 2020 2020 2020 6d5f 6e20 3d20 535f 6e20        m_n = S_n 
-0001ca70: 4020 2853 5f30 5f69 6e76 2040 2073 656c  @ (S_0_inv @ sel
-0001ca80: 662e 6d5f 3020 2b20 582e 5420 4020 5929  f.m_0 + X.T @ Y)
-0001ca90: 0d0a 0d0a 2020 2020 2020 2020 2320 506f  ....        # Po
-0001caa0: 7374 6572 696f 7220 666f 7220 7468 6520  sterior for the 
-0001cab0: 7072 6563 6973 696f 6e20 6d61 7472 6978  precision matrix
-0001cac0: 0d0a 2020 2020 2020 2020 6e75 5f6e 203d  ..        nu_n =
-0001cad0: 2073 656c 662e 6e75 5f30 202b 206e 5f73   self.nu_0 + n_s
-0001cae0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
-0001caf0: 575f 6e5f 696e 7620 3d20 280d 0a20 2020  W_n_inv = (..   
-0001cb00: 2020 2020 2020 2020 2073 656c 662e 575f           self.W_
-0001cb10: 305f 696e 760d 0a20 2020 2020 2020 2020  0_inv..         
-0001cb20: 2020 202b 2059 2e54 2040 2059 0d0a 2020     + Y.T @ Y..  
-0001cb30: 2020 2020 2020 2020 2020 2b20 7365 6c66            + self
-0001cb40: 2e6d 5f30 2e54 2040 2053 5f30 5f69 6e76  .m_0.T @ S_0_inv
-0001cb50: 2040 2073 656c 662e 6d5f 300d 0a20 2020   @ self.m_0..   
-0001cb60: 2020 2020 2020 2020 202d 206d 5f6e 2e54           - m_n.T
-0001cb70: 2040 2053 5f6e 5f69 6e76 2040 206d 5f6e   @ S_n_inv @ m_n
-0001cb80: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-0001cb90: 2020 2020 2020 2073 656c 662e 6d5f 6e20         self.m_n 
-0001cba0: 3d20 7365 6c66 2e70 6172 616d 7320 3d20  = self.params = 
-0001cbb0: 6d5f 6e0d 0a20 2020 2020 2020 2073 656c  m_n..        sel
-0001cbc0: 662e 535f 6e20 3d20 535f 6e0d 0a20 2020  f.S_n = S_n..   
-0001cbd0: 2020 2020 2073 656c 662e 6e75 5f6e 203d       self.nu_n =
-0001cbe0: 206e 755f 6e0d 0a20 2020 2020 2020 2073   nu_n..        s
-0001cbf0: 656c 662e 575f 6e5f 696e 7620 3d20 575f  elf.W_n_inv = W_
-0001cc00: 6e5f 696e 760d 0a0d 0a20 2020 2064 6566  n_inv....    def
-0001cc10: 2070 7265 6469 6374 2873 656c 662c 2058   predict(self, X
-0001cc20: 2c20 7265 7475 726e 5f73 7464 3d46 616c  , return_std=Fal
-0001cc30: 7365 293a 0d0a 2020 2020 2020 2020 595f  se):..        Y_
-0001cc40: 7072 6564 203d 2058 2040 2073 656c 662e  pred = X @ self.
-0001cc50: 6d5f 6e0d 0a20 2020 2020 2020 2069 6620  m_n..        if 
-0001cc60: 7265 7475 726e 5f73 7464 3a0d 0a20 2020  return_std:..   
-0001cc70: 2020 2020 2020 2020 2023 2041 7665 7261           # Avera
-0001cc80: 6765 2070 7265 6469 6374 6976 6520 7661  ge predictive va
-0001cc90: 7269 616e 6365 2066 6f72 2065 6163 6820  riance for each 
-0001cca0: 6f75 7470 7574 2064 696d 656e 7369 6f6e  output dimension
-0001ccb0: 0d0a 2020 2020 2020 2020 2020 2020 595f  ..            Y_
-0001ccc0: 7661 7220 3d20 280d 0a20 2020 2020 2020  var = (..       
-0001ccd0: 2020 2020 2020 2020 206e 702e 6569 6e73           np.eins
-0001cce0: 756d 2827 696a 2c6a 6b2c 696b 2d3e 6927  um('ij,jk,ik->i'
-0001ccf0: 2c20 582c 2073 656c 662e 535f 6e2c 2058  , X, self.S_n, X
-0001cd00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001cd10: 2020 202b 206e 702e 7472 6163 6528 6e70     + np.trace(np
-0001cd20: 2e6c 696e 616c 672e 696e 7628 7365 6c66  .linalg.inv(self
-0001cd30: 2e6e 755f 6e20 2a20 7365 6c66 2e57 5f6e  .nu_n * self.W_n
-0001cd40: 5f69 6e76 2929 0d0a 2020 2020 2020 2020  _inv))..        
-0001cd50: 2020 2020 2020 2020 2f20 7365 6c66 2e57          / self.W
-0001cd60: 5f6e 5f69 6e76 2e73 6861 7065 5b30 5d0d  _n_inv.shape[0].
-0001cd70: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0001cd80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001cd90: 726e 2059 5f70 7265 642c 206e 702e 7371  rn Y_pred, np.sq
-0001cda0: 7274 2859 5f76 6172 290d 0a20 2020 2020  rt(Y_var)..     
-0001cdb0: 2020 2072 6574 7572 6e20 595f 7072 6564     return Y_pred
-0001cdc0: 0d0a 0d0a 2020 2020 6465 6620 7361 6d70  ....    def samp
-0001cdd0: 6c65 5f70 6f73 7465 7269 6f72 2873 656c  le_posterior(sel
-0001cde0: 662c 206e 5f73 616d 706c 6573 3d31 293a  f, n_samples=1):
-0001cdf0: 0d0a 2020 2020 2020 2020 2320 6672 6f6d  ..        # from
-0001ce00: 2073 6369 7079 2e73 7461 7473 2069 6d70   scipy.stats imp
-0001ce10: 6f72 7420 7769 7368 6172 740d 0a20 2020  ort wishart..   
-0001ce20: 2020 2020 2023 2053 616d 706c 6520 6672       # Sample fr
-0001ce30: 6f6d 2074 6865 2070 6f73 7465 7269 6f72  om the posterior
-0001ce40: 2064 6973 7472 6962 7574 696f 6e20 6f66   distribution of
-0001ce50: 2074 6865 2063 6f65 6666 6963 6965 6e74   the coefficient
-0001ce60: 730d 0a20 2020 2020 2020 2023 2062 6574  s..        # bet
-0001ce70: 615f 7361 6d70 6c65 7320 3d20 6e70 2e72  a_samples = np.r
-0001ce80: 616e 646f 6d2e 6d75 6c74 6976 6172 6961  andom.multivaria
-0001ce90: 7465 5f6e 6f72 6d61 6c28 7365 6c66 2e6d  te_normal(self.m
-0001cea0: 5f6e 2e72 6176 656c 2829 2c20 7365 6c66  _n.ravel(), self
-0001ceb0: 2e53 5f6e 2c20 7369 7a65 3d6e 5f73 616d  .S_n, size=n_sam
-0001cec0: 706c 6573 290d 0a20 2020 2020 2020 2023  ples)..        #
-0001ced0: 2053 616d 706c 6520 6672 6f6d 2074 6865   Sample from the
-0001cee0: 2070 6f73 7465 7269 6f72 2064 6973 7472   posterior distr
-0001cef0: 6962 7574 696f 6e20 6f66 2074 6865 2070  ibution of the p
-0001cf00: 7265 6369 7369 6f6e 206d 6174 7269 780d  recision matrix.
-0001cf10: 0a20 2020 2020 2020 2023 2070 7265 6369  .        # preci
-0001cf20: 7369 6f6e 5f73 616d 706c 6573 203d 2077  sion_samples = w
-0001cf30: 6973 6861 7274 2864 663d 7365 6c66 2e6e  ishart(df=self.n
-0001cf40: 755f 6e2c 2073 6361 6c65 3d6e 702e 6c69  u_n, scale=np.li
-0001cf50: 6e61 6c67 2e69 6e76 2873 656c 662e 575f  nalg.inv(self.W_
-0001cf60: 6e5f 696e 7629 292e 7276 7328 6e5f 7361  n_inv)).rvs(n_sa
-0001cf70: 6d70 6c65 7329 0d0a 2020 2020 2020 2020  mples)..        
-0001cf80: 2320 7265 7475 726e 2062 6574 615f 7361  # return beta_sa
-0001cf90: 6d70 6c65 732c 2070 7265 6369 7369 6f6e  mples, precision
-0001cfa0: 5f73 616d 706c 6573 0d0a 0d0a 2020 2020  _samples....    
-0001cfb0: 2020 2020 7361 6d70 6c65 645f 7765 6967      sampled_weig
-0001cfc0: 6874 7320 3d20 6e70 2e7a 6572 6f73 2828  hts = np.zeros((
-0001cfd0: 6e5f 7361 6d70 6c65 732c 2073 656c 662e  n_samples, self.
-0001cfe0: 6d5f 6e2e 7368 6170 655b 305d 2c20 7365  m_n.shape[0], se
-0001cff0: 6c66 2e6d 5f6e 2e73 6861 7065 5b31 5d29  lf.m_n.shape[1])
-0001d000: 290d 0a20 2020 2020 2020 2066 6f72 2069  )..        for i
-0001d010: 2069 6e20 7261 6e67 6528 7365 6c66 2e6d   in range(self.m
-0001d020: 5f6e 2e73 6861 7065 5b31 5d29 3a0d 0a20  _n.shape[1]):.. 
-0001d030: 2020 2020 2020 2020 2020 2073 616d 706c             sampl
-0001d040: 6564 5f77 6569 6768 7473 5b3a 2c20 3a2c  ed_weights[:, :,
-0001d050: 2069 5d20 3d20 6e70 2e72 616e 646f 6d2e   i] = np.random.
-0001d060: 6d75 6c74 6976 6172 6961 7465 5f6e 6f72  multivariate_nor
-0001d070: 6d61 6c28 0d0a 2020 2020 2020 2020 2020  mal(..          
-0001d080: 2020 2020 2020 7365 6c66 2e6d 5f6e 5b3a        self.m_n[:
-0001d090: 2c20 695d 2c20 7365 6c66 2e53 5f6e 2c20  , i], self.S_n, 
-0001d0a0: 6e5f 7361 6d70 6c65 730d 0a20 2020 2020  n_samples..     
-0001d0b0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0001d0c0: 2020 7265 7475 726e 2073 616d 706c 6564    return sampled
-0001d0d0: 5f77 6569 6768 7473 0d0a 0d0a 0d0a 2320  _weights......# 
-0001d0e0: 5365 6173 6f6e 616c 6974 6965 730d 0a23  Seasonalities..#
-0001d0f0: 2069 6e74 6572 6163 7469 6f6e 2065 6666   interaction eff
-0001d100: 6563 7420 6f6e 6c79 206f 6e20 6669 7273  ect only on firs
-0001d110: 7420 7477 6f20 7365 6173 6f6e 616c 6974  t two seasonalit
-0001d120: 6965 7320 6966 206f 7264 6572 206d 6174  ies if order mat
-0001d130: 6368 6573 0d0a 0d0a 2320 4361 7465 676f  ches....# Catego
-0001d140: 7269 6361 6c20 4665 6174 7572 6573 0d0a  rical Features..
-0001d150: 2320 286d 756c 7469 7661 7269 6174 6520  # (multivariate 
-0001d160: 7375 6d6d 6172 6965 7320 6279 2067 726f  summaries by gro
-0001d170: 7570 290d 0a0d 0a23 2070 6173 7420 696d  up)....# past im
-0001d180: 7061 6374 7320 286f 7074 696f 6e20 746f  pacts (option to
-0001d190: 206e 6f74 2065 6e66 6f72 6365 2c20 6f6e   not enforce, on
-0001d1a0: 6c79 2073 686f 7729 0d0a 0d0a 2320 7768  ly show)....# wh
-0001d1b0: 6174 2069 7320 7374 696c 6c20 6e65 6564  at is still need
-0001d1c0: 6564 3a0d 0a23 2062 6179 6573 6961 6e20  ed:..# bayesian 
-0001d1d0: 6c69 6e65 6172 206d 6f64 656c 206f 7074  linear model opt
-0001d1e0: 696f 6e73 0d0a 2320 6d6f 7265 206d 756c  ions..# more mul
-0001d1f0: 7469 7661 7269 6174 6520 7375 6d6d 6172  tivariate summar
-0001d200: 6965 730d 0a23 2061 6464 2061 6e6f 6d61  ies..# add anoma
-0001d210: 6c79 2063 6c61 7373 6966 6965 7220 746f  ly classifier to
-0001d220: 2066 6f72 6563 6173 740d 0a23 2072 6566   forecast..# ref
-0001d230: 696e 6520 7472 616e 7366 6f72 6d61 7469  ine transformati
-0001d240: 6f6e 7320 616e 6420 6d6f 6465 6c73 2067  ons and models g
-0001d250: 656e 6572 6174 6564 2062 7920 6765 745f  enerated by get_
-0001d260: 6e65 775f 7061 7261 6d73 0d0a 2320 7265  new_params..# re
-0001d270: 7765 6967 6874 2073 6f20 6c6f 6f70 2069  weight so loop i
-0001d280: 7320 6e6f 7420 7265 7175 6972 6564 2073  s not required s
-0001d290: 6f20 6f66 7465 6e0d 0a23 2074 6573 7420  o often..# test 
-0001d2a0: 616e 6420 6275 6720 6669 7820 6576 6572  and bug fix ever
-0001d2b0: 7974 6869 6e67 0d0a 2320 6c31 5f6e 6f72  ything..# l1_nor
-0001d2c0: 6d20 6973 6e27 7420 776f 726b 696e 670d  m isn't working.
-0001d2d0: 0a23 2075 6e69 7474 6573 7473 0d0a 0d0a  .# unittests....
-0001d2e0: 2320 636f 756c 6420 646f 2070 6172 7469  # could do parti
-0001d2f0: 616c 2070 6f6f 6c69 6e67 2062 7920 6d69  al pooling by mi
-0001d300: 6e69 6d69 7a69 6e67 2061 2066 756e 6374  nimizing a funct
-0001d310: 696f 6e20 7468 6174 206d 6978 6573 2073  ion that mixes s
-0001d320: 6861 7265 6420 616e 6420 756e 7368 6172  hared and unshar
-0001d330: 6564 2063 6f65 6666 6963 6965 6e74 7320  ed coefficients 
-0001d340: 286d 756c 7469 706c 6963 6174 6976 6529  (multiplicative)
-0001d350: 0d0a 0d0a 2320 7365 6172 6368 2073 7061  ....# search spa
-0001d360: 6365 3a0d 0a23 2066 6173 7420 6f6e 206c  ce:..# fast on l
-0001d370: 7374 7371 7320 6d6f 6465 6c0d 0a23 2066  stsqs model..# f
-0001d380: 756c 6c20 7365 6172 6368 206f 6620 7072  ull search of pr
-0001d390: 6564 6566 696e 6564 206f 7074 696f 6e73  edefined options
-0001d3a0: 0d0a 2320 7363 6970 7920 6d69 6e69 6d69  ..# scipy minimi
-0001d3b0: 7a65 2066 6f72 2063 6f6e 7469 6e75 6f75  ze for continuou
-0001d3c0: 7320 7061 7261 6d73 2c20 6f72 206d 6179  s params, or may
-0001d3d0: 6265 2069 6e74 2870 6172 616d 2920 666f  be int(param) fo
-0001d3e0: 7220 6469 7363 7265 7465 2074 6f6f 0d0a  r discrete too..
-0001d3f0: 2320 6d69 6e69 6d69 7a65 2077 6f72 6b69  # minimize worki
-0001d400: 6e67 2066 6f72 2072 6f6c 6c69 6e67 2077  ng for rolling w
-0001d410: 696e 646f 7720 7369 7a65 2062 7574 206e  indow size but n
-0001d420: 6f74 2066 6f72 2073 6561 736f 6e61 6c69  ot for seasonali
-0001d430: 7479 2028 6163 7475 616c 6c79 2070 726f  ty (actually pro
-0001d440: 6261 626c 7920 7769 6e64 6f77 2069 7320  bably window is 
-0001d450: 6f76 6572 6669 7429 0d0a 2320 646f 2069  overfit)..# do i
-0001d460: 7420 7374 6570 7769 7365 3a0d 0a23 2066  t stepwise:..# f
-0001d470: 6972 7374 2066 6974 2073 6561 736f 6e61  irst fit seasona
-0001d480: 6c69 7479 2028 7769 7468 2066 6c61 6720  lity (with flag 
-0001d490: 7265 6772 6573 736f 7273 2062 7574 206e  regressors but n
-0001d4a0: 6f74 206f 7468 6572 7329 0d0a 2320 7365  ot others)..# se
-0001d4b0: 636f 6e64 6c79 2073 6361 6c65 7273 2061  condly scalers a
-0001d4c0: 6e64 2070 7265 7072 6f63 6573 7369 6e67  nd preprocessing
-0001d4d0: 2041 4e44 2061 6e6f 6d61 6c79 2064 6574   AND anomaly det
-0001d4e0: 6563 7469 6f6e 2041 4e44 2068 6f6c 6964  ection AND holid
-0001d4f0: 6179 2064 6574 6563 7469 6f6e 0d0a 2320  ay detection..# 
-0001d500: 706f 7373 6962 6c79 2061 6464 2033 7264  possibly add 3rd
-0001d510: 2073 6561 736f 6e61 6c69 7479 2061 6674   seasonality aft
-0001d520: 6572 2070 7265 7072 6f63 6573 7369 6e67  er preprocessing
-0001d530: 0d0a 2320 7468 6972 646c 7920 726f 6c6c  ..# thirdly roll
-0001d540: 696e 6720 7769 6e64 6f77 2073 697a 6520  ing window size 
-0001d550: 2869 6e63 6c75 6465 2072 6f6c 6c69 6e67  (include rolling
-0001d560: 2077 696e 646f 7720 696e 2069 6e69 7469   window in initi
-0001d570: 616c 2058 2061 6674 6572 2074 6869 7329  al X after this)
-0001d580: 0d0a 2320 7468 656e 2074 6573 7420 7573  ..# then test us
-0001d590: 6572 2072 6567 7265 7373 6f72 2061 6e64  er regressor and
-0001d5a0: 2070 7265 7072 6f63 6573 7369 6e67 0d0a   preprocessing..
-0001d5b0: 2320 7468 656e 2074 6573 7420 4152 206c  # then test AR l
-0001d5c0: 6167 7320 2864 6f6e 2774 2075 7365 2069  ags (don't use i
-0001d5d0: 6620 2520 6761 696e 2069 7320 3c20 7820  f % gain is < x 
-0001d5e0: 2529 0d0a 2320 6f72 206d 6179 6265 2075  %)..# or maybe u
-0001d5f0: 7365 2061 2072 756e 7469 6d65 2077 6569  se a runtime wei
-0001d600: 6768 7469 6e67 0d0a 2320 7468 656e 206d  ghting..# then m
-0001d610: 756c 7469 7661 7269 6174 6520 7375 6d6d  ultivariate summ
-0001d620: 6172 6965 730d 0a23 2046 494e 414c 4c59  aries..# FINALLY
-0001d630: 2063 6f76 6172 6961 7465 206c 6167 7320   covariate lags 
-0001d640: 2866 6561 7475 7265 2073 656c 6563 7469  (feature selecti
-0001d650: 6f6e 2064 6566 696e 6974 656c 7920 6e65  on definitely ne
-0001d660: 6564 6564 290d 0a0d 0a0d 0a69 6620 4661  eded)......if Fa
-0001d670: 6c73 653a 0d0a 2020 2020 2320 7465 7374  lse:..    # test
-0001d680: 2068 6f6c 6964 6179 2063 6f75 6e74 7269   holiday countri
-0001d690: 6573 2c20 7265 6772 6573 736f 7273 2c20  es, regressors, 
-0001d6a0: 696d 7061 6374 730d 0a20 2020 2066 726f  impacts..    fro
-0001d6b0: 6d20 6175 746f 7473 2069 6d70 6f72 7420  m autots import 
-0001d6c0: 6c6f 6164 5f64 6169 6c79 0d0a 2020 2020  load_daily..    
-0001d6d0: 696d 706f 7274 206d 6174 706c 6f74 6c69  import matplotli
-0001d6e0: 622e 7079 706c 6f74 2061 7320 706c 740d  b.pyplot as plt.
-0001d6f0: 0a0d 0a20 2020 2063 6174 6567 6f72 6963  ...    categoric
-0001d700: 616c 5f67 726f 7570 7320 3d20 7b0d 0a20  al_groups = {.. 
-0001d710: 2020 2020 2020 2022 7769 6b69 5f55 6e69         "wiki_Uni
-0001d720: 7465 645f 5374 6174 6573 223a 2027 636f  ted_States": 'co
-0001d730: 756e 7472 7927 2c0d 0a20 2020 2020 2020  untry',..       
-0001d740: 2022 7769 6b69 5f47 6572 6d61 6e79 223a   "wiki_Germany":
-0001d750: 2027 636f 756e 7472 7927 2c0d 0a20 2020   'country',..   
-0001d760: 2020 2020 2022 7769 6b69 5f4a 6573 7573       "wiki_Jesus
-0001d770: 223a 2027 686f 6c69 6461 7927 2c0d 0a20  ": 'holiday',.. 
-0001d780: 2020 2020 2020 2022 7769 6b69 5f4d 6963         "wiki_Mic
-0001d790: 6861 656c 5f4a 6163 6b73 6f6e 223a 2027  hael_Jackson": '
-0001d7a0: 7065 7273 6f6e 272c 0d0a 2020 2020 2020  person',..      
-0001d7b0: 2020 2277 696b 695f 4561 7374 6572 223a    "wiki_Easter":
-0001d7c0: 2027 686f 6c69 6461 7927 2c0d 0a20 2020   'holiday',..   
-0001d7d0: 2020 2020 2022 7769 6b69 5f43 6872 6973       "wiki_Chris
-0001d7e0: 746d 6173 223a 2027 686f 6c69 6461 7927  tmas": 'holiday'
-0001d7f0: 2c0d 0a20 2020 2020 2020 2022 7769 6b69  ,..        "wiki
-0001d800: 5f43 6869 6e65 7365 5f4e 6577 5f59 6561  _Chinese_New_Yea
-0001d810: 7222 3a20 2768 6f6c 6964 6179 272c 0d0a  r": 'holiday',..
-0001d820: 2020 2020 2020 2020 2277 696b 695f 5468          "wiki_Th
-0001d830: 616e 6b73 6769 7669 6e67 223a 2027 686f  anksgiving": 'ho
-0001d840: 6c69 6461 7927 2c0d 0a20 2020 2020 2020  liday',..       
-0001d850: 2022 7769 6b69 5f45 6c69 7a61 6265 7468   "wiki_Elizabeth
-0001d860: 5f49 4922 3a20 2770 6572 736f 6e27 2c0d  _II": 'person',.
-0001d870: 0a20 2020 2020 2020 2022 7769 6b69 5f57  .        "wiki_W
-0001d880: 696c 6c69 616d 5f53 6861 6b65 7370 6561  illiam_Shakespea
-0001d890: 7265 223a 2027 7065 7273 6f6e 272c 0d0a  re": 'person',..
-0001d8a0: 2020 2020 2020 2020 2277 696b 695f 4765          "wiki_Ge
-0001d8b0: 6f72 6765 5f57 6173 6869 6e67 746f 6e22  orge_Washington"
-0001d8c0: 3a20 2770 6572 736f 6e27 2c0d 0a20 2020  : 'person',..   
-0001d8d0: 2020 2020 2022 7769 6b69 5f43 6c65 6f70       "wiki_Cleop
-0001d8e0: 6174 7261 223a 2027 7065 7273 6f6e 272c  atra": 'person',
-0001d8f0: 0d0a 2020 2020 7d0d 0a20 2020 2068 6f6c  ..    }..    hol
-0001d900: 6964 6179 5f63 6f75 6e74 7269 6573 203d  iday_countries =
-0001d910: 207b 0d0a 2020 2020 2020 2020 2777 696b   {..        'wik
-0001d920: 695f 456c 697a 6162 6574 685f 4949 273a  i_Elizabeth_II':
-0001d930: 2027 756b 272c 0d0a 2020 2020 2020 2020   'uk',..        
-0001d940: 2777 696b 695f 556e 6974 6564 5f53 7461  'wiki_United_Sta
-0001d950: 7465 7327 3a20 2775 7327 2c0d 0a20 2020  tes': 'us',..   
-0001d960: 2020 2020 2027 7769 6b69 5f47 6572 6d61       'wiki_Germa
-0001d970: 6e79 273a 2027 6465 272c 0d0a 2020 2020  ny': 'de',..    
-0001d980: 7d0d 0a20 2020 2064 665f 6461 696c 7920  }..    df_daily 
-0001d990: 3d20 6c6f 6164 5f64 6169 6c79 286c 6f6e  = load_daily(lon
-0001d9a0: 673d 4661 6c73 6529 0d0a 2020 2020 2320  g=False)..    # 
-0001d9b0: 6164 6420 6e61 6e0d 0a20 2020 2064 665f  add nan..    df_
-0001d9c0: 6461 696c 792e 696c 6f63 5b31 3030 2c20  daily.iloc[100, 
-0001d9d0: 3a5d 203d 206e 702e 6e61 6e0d 0a20 2020  :] = np.nan..   
-0001d9e0: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
-0001d9f0: 203d 2031 3830 0d0a 2020 2020 696e 636c   = 180..    incl
-0001da00: 7564 655f 6869 7374 6f72 7920 3d20 5472  ude_history = Tr
-0001da10: 7565 0d0a 2020 2020 6466 5f74 7261 696e  ue..    df_train
-0001da20: 203d 2064 665f 6461 696c 795b 3a2d 666f   = df_daily[:-fo
-0001da30: 7265 6361 7374 5f6c 656e 6774 685d 2e69  recast_length].i
-0001da40: 6c6f 635b 3a2c 2031 3a5d 0d0a 2020 2020  loc[:, 1:]..    
-0001da50: 6466 5f74 6573 7420 3d20 6466 5f64 6169  df_test = df_dai
-0001da60: 6c79 5b2d 666f 7265 6361 7374 5f6c 656e  ly[-forecast_len
-0001da70: 6774 683a 5d2e 696c 6f63 5b3a 2c20 313a  gth:].iloc[:, 1:
-0001da80: 5d0d 0a20 2020 2066 616b 655f 7265 6772  ]..    fake_regr
-0001da90: 203d 2064 665f 6461 696c 795b 3a2d 666f   = df_daily[:-fo
-0001daa0: 7265 6361 7374 5f6c 656e 6774 685d 2e69  recast_length].i
-0001dab0: 6c6f 635b 3a2c 2030 3a31 5d0d 0a20 2020  loc[:, 0:1]..   
-0001dac0: 2066 616b 655f 7265 6772 5f66 6373 7420   fake_regr_fcst 
-0001dad0: 3d20 280d 0a20 2020 2020 2020 2064 665f  = (..        df_
-0001dae0: 6461 696c 792e 696c 6f63 5b3a 2c20 303a  daily.iloc[:, 0:
-0001daf0: 315d 0d0a 2020 2020 2020 2020 6966 2069  1]..        if i
-0001db00: 6e63 6c75 6465 5f68 6973 746f 7279 0d0a  nclude_history..
-0001db10: 2020 2020 2020 2020 656c 7365 2064 665f          else df_
-0001db20: 6461 696c 795b 2d66 6f72 6563 6173 745f  daily[-forecast_
-0001db30: 6c65 6e67 7468 3a5d 2e69 6c6f 635b 3a2c  length:].iloc[:,
-0001db40: 2030 3a31 5d0d 0a20 2020 2029 0d0a 2020   0:1]..    )..  
-0001db50: 2020 666c 6167 5f72 6567 7265 7373 6f72    flag_regressor
-0001db60: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
-0001db70: 312c 2069 6e64 6578 3d66 616b 655f 7265  1, index=fake_re
-0001db80: 6772 2e69 6e64 6578 2c20 636f 6c75 6d6e  gr.index, column
-0001db90: 733d 5b22 666c 6167 5f74 6573 7422 5d29  s=["flag_test"])
-0001dba0: 0d0a 2020 2020 666c 6167 5f72 6567 7265  ..    flag_regre
-0001dbb0: 7373 6f72 5f66 6373 7420 3d20 7064 2e44  ssor_fcst = pd.D
-0001dbc0: 6174 6146 7261 6d65 280d 0a20 2020 2020  ataFrame(..     
-0001dbd0: 2020 2031 2c20 696e 6465 783d 6661 6b65     1, index=fake
-0001dbe0: 5f72 6567 725f 6663 7374 2e69 6e64 6578  _regr_fcst.index
-0001dbf0: 2c20 636f 6c75 6d6e 733d 5b22 666c 6167  , columns=["flag
-0001dc00: 5f74 6573 7422 5d0d 0a20 2020 2029 0d0a  _test"]..    )..
-0001dc10: 2020 2020 7265 6772 5f70 6572 5f73 6572      regr_per_ser
-0001dc20: 6965 7320 3d20 7b0d 0a20 2020 2020 2020  ies = {..       
-0001dc30: 2073 7472 2864 665f 7472 6169 6e2e 636f   str(df_train.co
-0001dc40: 6c75 6d6e 735b 305d 293a 2070 642e 4461  lumns[0]): pd.Da
-0001dc50: 7461 4672 616d 6528 0d0a 2020 2020 2020  taFrame(..      
-0001dc60: 2020 2020 2020 6e70 2e72 616e 646f 6d2e        np.random.
-0001dc70: 6e6f 726d 616c 2873 697a 653d 286c 656e  normal(size=(len
-0001dc80: 2864 665f 7472 6169 6e29 2c20 3129 292c  (df_train), 1)),
-0001dc90: 2069 6e64 6578 3d64 665f 7472 6169 6e2e   index=df_train.
-0001dca0: 696e 6465 780d 0a20 2020 2020 2020 2029  index..        )
-0001dcb0: 0d0a 2020 2020 7d0d 0a20 2020 2072 6567  ..    }..    reg
-0001dcc0: 725f 7065 725f 7365 7269 6573 5f66 6373  r_per_series_fcs
-0001dcd0: 7420 3d20 7b0d 0a20 2020 2020 2020 2073  t = {..        s
-0001dce0: 7472 2864 665f 7472 6169 6e2e 636f 6c75  tr(df_train.colu
-0001dcf0: 6d6e 735b 305d 293a 2070 642e 4461 7461  mns[0]): pd.Data
-0001dd00: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
-0001dd10: 2020 2020 6e70 2e72 616e 646f 6d2e 6e6f      np.random.no
-0001dd20: 726d 616c 2873 697a 653d 2866 6f72 6563  rmal(size=(forec
-0001dd30: 6173 745f 6c65 6e67 7468 2c20 3129 292c  ast_length, 1)),
-0001dd40: 2069 6e64 6578 3d64 665f 7465 7374 2e69   index=df_test.i
-0001dd50: 6e64 6578 0d0a 2020 2020 2020 2020 290d  ndex..        ).
-0001dd60: 0a20 2020 207d 0d0a 2020 2020 636f 6e73  .    }..    cons
-0001dd70: 7472 6169 6e74 203d 207b 0d0a 2020 2020  traint = {..    
-0001dd80: 2020 2020 2763 6f6e 7374 7261 696e 745f      'constraint_
-0001dd90: 6d65 7468 6f64 273a 2027 7175 616e 7469  method': 'quanti
-0001dda0: 6c65 272c 0d0a 2020 2020 2020 2020 276c  le',..        'l
-0001ddb0: 6f77 6572 5f63 6f6e 7374 7261 696e 7427  ower_constraint'
-0001ddc0: 3a20 302c 0d0a 2020 2020 2020 2020 2775  : 0,..        'u
-0001ddd0: 7070 6572 5f63 6f6e 7374 7261 696e 7427  pper_constraint'
-0001dde0: 3a20 4e6f 6e65 2c0d 0a20 2020 2020 2020  : None,..       
-0001ddf0: 2022 626f 756e 6473 223a 2054 7275 652c   "bounds": True,
-0001de00: 0d0a 2020 2020 7d0d 0a20 2020 2070 6173  ..    }..    pas
-0001de10: 745f 696d 7061 6374 7320 3d20 7064 2e44  t_impacts = pd.D
-0001de20: 6174 6146 7261 6d65 2830 2c20 696e 6465  ataFrame(0, inde
-0001de30: 783d 6466 5f74 7261 696e 2e69 6e64 6578  x=df_train.index
-0001de40: 2c20 636f 6c75 6d6e 733d 6466 5f74 7261  , columns=df_tra
-0001de50: 696e 2e63 6f6c 756d 6e73 290d 0a20 2020  in.columns)..   
-0001de60: 2070 6173 745f 696d 7061 6374 732e 696c   past_impacts.il
-0001de70: 6f63 5b2d 3130 3a2c 2030 5d20 3d20 6e70  oc[-10:, 0] = np
-0001de80: 2e67 656f 6d73 7061 6365 2831 2c20 3130  .geomspace(1, 10
-0001de90: 295b 303a 3130 5d20 2f20 3130 300d 0a20  )[0:10] / 100.. 
-0001dea0: 2020 2070 6173 745f 696d 7061 6374 732e     past_impacts.
-0001deb0: 696c 6f63 5b2d 3330 3a2c 202d 315d 203d  iloc[-30:, -1] =
-0001dec0: 206e 702e 6c69 6e73 7061 6365 2831 2c20   np.linspace(1, 
-0001ded0: 3130 295b 303a 3330 5d20 2f20 2d31 3030  10)[0:30] / -100
-0001dee0: 0d0a 2020 2020 7061 7374 5f69 6d70 6163  ..    past_impac
-0001def0: 7473 5f66 756c 6c20 3d20 7064 2e44 6174  ts_full = pd.Dat
-0001df00: 6146 7261 6d65 2830 2c20 696e 6465 783d  aFrame(0, index=
-0001df10: 6466 5f64 6169 6c79 2e69 6e64 6578 2c20  df_daily.index, 
-0001df20: 636f 6c75 6d6e 733d 6466 5f64 6169 6c79  columns=df_daily
-0001df30: 2e63 6f6c 756d 6e73 290d 0a20 2020 2066  .columns)..    f
-0001df40: 7574 7572 655f 696d 7061 6374 7320 3d20  uture_impacts = 
-0001df50: 7064 2e44 6174 6146 7261 6d65 2830 2c20  pd.DataFrame(0, 
-0001df60: 696e 6465 783d 6466 5f74 6573 742e 696e  index=df_test.in
-0001df70: 6465 782c 2063 6f6c 756d 6e73 3d64 665f  dex, columns=df_
-0001df80: 7465 7374 2e63 6f6c 756d 6e73 290d 0a20  test.columns).. 
-0001df90: 2020 2066 7574 7572 655f 696d 7061 6374     future_impact
-0001dfa0: 732e 696c 6f63 5b30 3a31 302c 2030 5d20  s.iloc[0:10, 0] 
-0001dfb0: 3d20 286e 702e 6c69 6e73 7061 6365 2831  = (np.linspace(1
-0001dfc0: 2c20 3130 295b 303a 3130 5d20 2b20 3130  , 10)[0:10] + 10
-0001dfd0: 2920 2f20 3130 300d 0a0d 0a20 2020 2063  ) / 100....    c
-0001dfe0: 5f70 6172 616d 7320 3d20 4361 7373 616e  _params = Cassan
-0001dff0: 6472 6128 292e 6765 745f 6e65 775f 7061  dra().get_new_pa
-0001e000: 7261 6d73 2829 0d0a 2020 2020 635f 7061  rams()..    c_pa
-0001e010: 7261 6d73 5b27 7265 6772 6573 736f 7273  rams['regressors
-0001e020: 5f75 7365 6427 5d20 3d20 4661 6c73 650d  _used'] = False.
-0001e030: 0a0d 0a20 2020 206d 6f64 203d 2043 6173  ...    mod = Cas
-0001e040: 7361 6e64 7261 280d 0a20 2020 2020 2020  sandra(..       
-0001e050: 206e 5f6a 6f62 733d 312c 0d0a 2020 2020   n_jobs=1,..    
-0001e060: 2020 2020 2a2a 635f 7061 7261 6d73 2c0d      **c_params,.
-0001e070: 0a20 2020 2020 2020 2063 6f6e 7374 7261  .        constra
-0001e080: 696e 743d 636f 6e73 7472 6169 6e74 2c0d  int=constraint,.
-0001e090: 0a20 2020 2020 2020 2068 6f6c 6964 6179  .        holiday
-0001e0a0: 5f63 6f75 6e74 7269 6573 3d68 6f6c 6964  _countries=holid
-0001e0b0: 6179 5f63 6f75 6e74 7269 6573 2c0d 0a20  ay_countries,.. 
-0001e0c0: 2020 2020 2020 206d 6178 5f6d 756c 7469         max_multi
-0001e0d0: 636f 6c69 6e65 6172 6974 793d 302e 3030  colinearity=0.00
-0001e0e0: 3031 2c0d 0a20 2020 2029 0d0a 2020 2020  01,..    )..    
-0001e0f0: 6d6f 642e 6669 7428 0d0a 2020 2020 2020  mod.fit(..      
-0001e100: 2020 6466 5f74 7261 696e 2c0d 0a20 2020    df_train,..   
-0001e110: 2020 2020 2063 6174 6567 6f72 6963 616c       categorical
-0001e120: 5f67 726f 7570 733d 6361 7465 676f 7269  _groups=categori
-0001e130: 6361 6c5f 6772 6f75 7073 2c0d 0a20 2020  cal_groups,..   
-0001e140: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
-0001e150: 6573 736f 723d 6661 6b65 5f72 6567 722c  essor=fake_regr,
-0001e160: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
-0001e170: 736f 725f 7065 725f 7365 7269 6573 3d72  sor_per_series=r
-0001e180: 6567 725f 7065 725f 7365 7269 6573 2c0d  egr_per_series,.
-0001e190: 0a20 2020 2020 2020 2023 2070 6173 745f  .        # past_
-0001e1a0: 696d 7061 6374 733d 7061 7374 5f69 6d70  impacts=past_imp
-0001e1b0: 6163 7473 2c0d 0a20 2020 2020 2020 2066  acts,..        f
-0001e1c0: 6c61 675f 7265 6772 6573 736f 7273 3d66  lag_regressors=f
-0001e1d0: 6c61 675f 7265 6772 6573 736f 722c 0d0a  lag_regressor,..
-0001e1e0: 2020 2020 290d 0a20 2020 2070 7265 6420      )..    pred 
-0001e1f0: 3d20 6d6f 642e 7072 6564 6963 7428 0d0a  = mod.predict(..
-0001e200: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-0001e210: 5f6c 656e 6774 683d 666f 7265 6361 7374  _length=forecast
-0001e220: 5f6c 656e 6774 682c 0d0a 2020 2020 2020  _length,..      
-0001e230: 2020 696e 636c 7564 655f 6869 7374 6f72    include_histor
-0001e240: 793d 696e 636c 7564 655f 6869 7374 6f72  y=include_histor
-0001e250: 792c 0d0a 2020 2020 2020 2020 6675 7475  y,..        futu
-0001e260: 7265 5f72 6567 7265 7373 6f72 3d66 616b  re_regressor=fak
-0001e270: 655f 7265 6772 5f66 6373 742c 0d0a 2020  e_regr_fcst,..  
-0001e280: 2020 2020 2020 7265 6772 6573 736f 725f        regressor_
-0001e290: 7065 725f 7365 7269 6573 3d72 6567 725f  per_series=regr_
-0001e2a0: 7065 725f 7365 7269 6573 5f66 6373 742c  per_series_fcst,
-0001e2b0: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
-0001e2c0: 5f69 6d70 6163 7473 3d66 7574 7572 655f  _impacts=future_
-0001e2d0: 696d 7061 6374 732c 0d0a 2020 2020 2020  impacts,..      
-0001e2e0: 2020 666c 6167 5f72 6567 7265 7373 6f72    flag_regressor
-0001e2f0: 733d 666c 6167 5f72 6567 7265 7373 6f72  s=flag_regressor
-0001e300: 5f66 6373 742c 0d0a 2020 2020 2020 2020  _fcst,..        
-0001e310: 696e 636c 7564 655f 6f72 6761 6e69 633d  include_organic=
-0001e320: 5472 7565 2c0d 0a20 2020 2029 0d0a 2020  True,..    )..  
-0001e330: 2020 7265 7375 6c74 203d 2070 7265 642e    result = pred.
-0001e340: 666f 7265 6361 7374 0d0a 2020 2020 7365  forecast..    se
-0001e350: 7269 6573 203d 2072 616e 646f 6d2e 6368  ries = random.ch
-0001e360: 6f69 6365 286d 6f64 2e63 6f6c 756d 6e5f  oice(mod.column_
-0001e370: 6e61 6d65 7329 0d0a 2020 2020 2320 7365  names)..    # se
-0001e380: 7269 6573 203d 2022 7769 6b69 5f50 6572  ries = "wiki_Per
-0001e390: 696f 6469 635f 7461 626c 6522 0d0a 2020  iodic_table"..  
-0001e3a0: 2020 7365 7269 6573 203d 2027 7769 6b69    series = 'wiki
-0001e3b0: 5f61 6c6c 270d 0a20 2020 206d 6f64 2e72  _all'..    mod.r
-0001e3c0: 6567 7265 7373 6f72 735f 7573 6564 0d0a  egressors_used..
-0001e3d0: 2020 2020 6d6f 642e 686f 6c69 6461 795f      mod.holiday_
-0001e3e0: 636f 756e 7472 6965 735f 7573 6564 0d0a  countries_used..
-0001e3f0: 2020 2020 7769 7468 2070 6c74 2e73 7479      with plt.sty
-0001e400: 6c65 2e63 6f6e 7465 7874 2822 7365 6162  le.context("seab
-0001e410: 6f72 6e2d 7768 6974 6522 293a 0d0a 2020  orn-white"):..  
-0001e420: 2020 2020 2020 7374 6172 745f 6461 7465        start_date
-0001e430: 203d 2022 6175 746f 220d 0a20 2020 2020   = "auto"..     
-0001e440: 2020 206d 6f64 2e70 6c6f 745f 666f 7265     mod.plot_fore
-0001e450: 6361 7374 280d 0a20 2020 2020 2020 2020  cast(..         
-0001e460: 2020 2070 7265 642c 0d0a 2020 2020 2020     pred,..      
-0001e470: 2020 2020 2020 6163 7475 616c 733d 6466        actuals=df
-0001e480: 5f64 6169 6c79 2069 6620 696e 636c 7564  _daily if includ
-0001e490: 655f 6869 7374 6f72 7920 656c 7365 2064  e_history else d
-0001e4a0: 665f 7465 7374 2c0d 0a20 2020 2020 2020  f_test,..       
-0001e4b0: 2020 2020 2073 6572 6965 733d 7365 7269       series=seri
-0001e4c0: 6573 2c0d 0a20 2020 2020 2020 2020 2020  es,..           
-0001e4d0: 2073 7461 7274 5f64 6174 653d 7374 6172   start_date=star
-0001e4e0: 745f 6461 7465 2c0d 0a20 2020 2020 2020  t_date,..       
-0001e4f0: 2029 0d0a 0d0a 2020 2020 2020 2020 2320   )....        # 
-0001e500: 706c 742e 7368 6f77 2829 0d0a 2020 2020  plt.show()..    
-0001e510: 2020 2020 2320 706c 742e 7361 7665 6669      # plt.savefi
-0001e520: 6728 2243 6173 7361 6e64 7261 5f66 6f72  g("Cassandra_for
-0001e530: 6563 6173 742e 706e 6722 2c20 6470 693d  ecast.png", dpi=
-0001e540: 3330 3029 0d0a 2020 2020 2020 2020 2320  300)..        # 
-0001e550: 6d6f 642e 706c 6f74 5f63 6f6d 706f 6e65  mod.plot_compone
-0001e560: 6e74 7328 7072 6564 2c20 7365 7269 6573  nts(pred, series
-0001e570: 3d73 6572 6965 732c 2074 6f5f 6f72 6967  =series, to_orig
-0001e580: 696e 5f73 7061 6365 3d46 616c 7365 290d  in_space=False).
-0001e590: 0a20 2020 2020 2020 2023 2070 6c74 2e73  .        # plt.s
-0001e5a0: 686f 7728 290d 0a20 2020 2020 2020 206d  how()..        m
-0001e5b0: 6f64 2e70 6c6f 745f 636f 6d70 6f6e 656e  od.plot_componen
-0001e5c0: 7473 280d 0a20 2020 2020 2020 2020 2020  ts(..           
-0001e5d0: 2070 7265 642c 2073 6572 6965 733d 7365   pred, series=se
-0001e5e0: 7269 6573 2c20 746f 5f6f 7269 6769 6e5f  ries, to_origin_
-0001e5f0: 7370 6163 653d 5472 7565 2c20 7374 6172  space=True, star
-0001e600: 745f 6461 7465 3d73 7461 7274 5f64 6174  t_date=start_dat
-0001e610: 650d 0a20 2020 2020 2020 2029 0d0a 2020  e..        )..  
-0001e620: 2020 2020 2020 2320 706c 742e 7361 7665        # plt.save
-0001e630: 6669 6728 2243 6173 7361 6e64 7261 5f63  fig("Cassandra_c
-0001e640: 6f6d 706f 6e65 6e74 7333 2e70 6e67 222c  omponents3.png",
-0001e650: 2064 7069 3d33 3030 2c20 6262 6f78 5f69   dpi=300, bbox_i
-0001e660: 6e63 6865 733d 2274 6967 6874 2229 0d0a  nches="tight")..
-0001e670: 2020 2020 2020 2020 706c 742e 7368 6f77          plt.show
-0001e680: 2829 0d0a 2020 2020 2020 2020 6d6f 642e  ()..        mod.
-0001e690: 706c 6f74 5f74 7265 6e64 280d 0a20 2020  plot_trend(..   
-0001e6a0: 2020 2020 2020 2020 2073 6572 6965 733d           series=
-0001e6b0: 7365 7269 6573 2c20 766c 696e 653d 7265  series, vline=re
-0001e6c0: 7375 6c74 2e69 6e64 6578 5b2d 666f 7265  sult.index[-fore
-0001e6d0: 6361 7374 5f6c 656e 6774 685d 2c20 7374  cast_length], st
-0001e6e0: 6172 745f 6461 7465 3d73 7461 7274 5f64  art_date=start_d
-0001e6f0: 6174 650d 0a20 2020 2020 2020 2029 0d0a  ate..        )..
-0001e700: 2020 2020 2020 2020 2320 706c 742e 7361          # plt.sa
-0001e710: 7665 6669 6728 2243 6173 7361 6e64 7261  vefig("Cassandra
-0001e720: 5f74 7265 6e64 2e70 6e67 222c 2064 7069  _trend.png", dpi
-0001e730: 3d33 3030 2c20 6262 6f78 5f69 6e63 6865  =300, bbox_inche
-0001e740: 733d 2274 6967 6874 2229 0d0a 2020 2020  s="tight")..    
-0001e750: 7072 6564 2e65 7661 6c75 6174 6528 0d0a  pred.evaluate(..
-0001e760: 2020 2020 2020 2020 6466 5f64 6169 6c79          df_daily
-0001e770: 2e72 6569 6e64 6578 2872 6573 756c 742e  .reindex(result.
-0001e780: 696e 6465 7829 5b64 665f 7472 6169 6e2e  index)[df_train.
-0001e790: 636f 6c75 6d6e 735d 0d0a 2020 2020 2020  columns]..      
-0001e7a0: 2020 6966 2069 6e63 6c75 6465 5f68 6973    if include_his
-0001e7b0: 746f 7279 0d0a 2020 2020 2020 2020 656c  tory..        el
-0001e7c0: 7365 2064 665f 7465 7374 5b64 665f 7472  se df_test[df_tr
-0001e7d0: 6169 6e2e 636f 6c75 6d6e 735d 0d0a 2020  ain.columns]..  
-0001e7e0: 2020 290d 0a20 2020 2070 7269 6e74 2870    )..    print(p
-0001e7f0: 7265 642e 6176 675f 6d65 7472 6963 732e  red.avg_metrics.
-0001e800: 726f 756e 6428 3129 290d 0a0d 0a20 2020  round(1))....   
-0001e810: 2023 2069 6620 6e6f 7420 6d6f 642e 7265   # if not mod.re
-0001e820: 6772 6573 736f 7273 5f75 7365 643a 0d0a  gressors_used:..
-0001e830: 2020 2020 6461 7465 7320 3d20 6466 5f64      dates = df_d
-0001e840: 6169 6c79 2e69 6e64 6578 2e75 6e69 6f6e  aily.index.union
-0001e850: 280d 0a20 2020 2020 2020 206d 6f64 2e63  (..        mod.c
-0001e860: 7265 6174 655f 666f 7265 6361 7374 5f69  reate_forecast_i
-0001e870: 6e64 6578 2866 6f72 6563 6173 745f 6c65  ndex(forecast_le
-0001e880: 6e67 7468 2c20 6c61 7374 5f64 6174 653d  ngth, last_date=
-0001e890: 6466 5f64 6169 6c79 2e69 6e64 6578 5b2d  df_daily.index[-
-0001e8a0: 315d 290d 0a20 2020 2029 0d0a 2020 2020  1])..    )..    
-0001e8b0: 7265 6772 5f70 7320 3d20 7b0d 0a20 2020  regr_ps = {..   
-0001e8c0: 2020 2020 2027 7769 6b69 5f47 6572 6d61       'wiki_Germa
-0001e8d0: 6e79 273a 2072 6567 725f 7065 725f 7365  ny': regr_per_se
-0001e8e0: 7269 6573 5f66 6373 745b 2777 696b 695f  ries_fcst['wiki_
-0001e8f0: 4765 726d 616e 7927 5d2e 7265 696e 6465  Germany'].reinde
-0001e900: 7828 0d0a 2020 2020 2020 2020 2020 2020  x(..            
-0001e910: 6461 7465 732c 2066 696c 6c5f 7661 6c75  dates, fill_valu
-0001e920: 653d 300d 0a20 2020 2020 2020 2029 0d0a  e=0..        )..
-0001e930: 2020 2020 7d0d 0a20 2020 2023 204e 4f54      }..    # NOT
-0001e940: 2050 4153 5349 4e47 2050 524f 5045 5220   PASSING PROPER 
-0001e950: 5245 4752 4553 534f 5253 2048 4552 4520  REGRESSORS HERE 
-0001e960: 287a 6572 6f20 6669 6c6c 2920 534f 204d  (zero fill) SO M
-0001e970: 4159 204c 4f4f 4b20 4f46 4620 4946 2052  AY LOOK OFF IF R
-0001e980: 4547 5245 5353 4f52 535f 5553 4544 0d0a  EGRESSORS_USED..
-0001e990: 2020 2020 7072 6564 3220 3d20 6d6f 642e      pred2 = mod.
-0001e9a0: 7072 6564 6963 7428 0d0a 2020 2020 2020  predict(..      
-0001e9b0: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
-0001e9c0: 683d 666f 7265 6361 7374 5f6c 656e 6774  h=forecast_lengt
-0001e9d0: 682c 0d0a 2020 2020 2020 2020 696e 636c  h,..        incl
-0001e9e0: 7564 655f 6869 7374 6f72 793d 5472 7565  ude_history=True
-0001e9f0: 2c0d 0a20 2020 2020 2020 206e 6577 5f64  ,..        new_d
-0001ea00: 663d 6466 5f64 6169 6c79 5b64 665f 7472  f=df_daily[df_tr
-0001ea10: 6169 6e2e 636f 6c75 6d6e 735d 2c0d 0a20  ain.columns],.. 
-0001ea20: 2020 2020 2020 2066 6c61 675f 7265 6772         flag_regr
-0001ea30: 6573 736f 7273 3d66 6c61 675f 7265 6772  essors=flag_regr
-0001ea40: 6573 736f 725f 6663 7374 2e72 6569 6e64  essor_fcst.reind
-0001ea50: 6578 2864 6174 6573 2c20 6669 6c6c 5f76  ex(dates, fill_v
-0001ea60: 616c 7565 3d30 292c 0d0a 2020 2020 2020  alue=0),..      
-0001ea70: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-0001ea80: 6f72 3d66 616b 655f 7265 6772 5f66 6373  or=fake_regr_fcs
-0001ea90: 742e 7265 696e 6465 7828 6461 7465 732c  t.reindex(dates,
-0001eaa0: 2066 696c 6c5f 7661 6c75 653d 3029 2c0d   fill_value=0),.
-0001eab0: 0a20 2020 2020 2020 2072 6567 7265 7373  .        regress
-0001eac0: 6f72 5f70 6572 5f73 6572 6965 733d 7265  or_per_series=re
-0001ead0: 6772 5f70 732c 0d0a 2020 2020 2020 2020  gr_ps,..        
-0001eae0: 7061 7374 5f69 6d70 6163 7473 3d70 6173  past_impacts=pas
-0001eaf0: 745f 696d 7061 6374 735f 6675 6c6c 5b64  t_impacts_full[d
-0001eb00: 665f 7472 6169 6e2e 636f 6c75 6d6e 735d  f_train.columns]
-0001eb10: 2c0d 0a20 2020 2029 0d0a 2020 2020 6d6f  ,..    )..    mo
-0001eb20: 642e 706c 6f74 5f66 6f72 6563 6173 7428  d.plot_forecast(
-0001eb30: 7072 6564 322c 2061 6374 7561 6c73 3d64  pred2, actuals=d
-0001eb40: 665f 6461 696c 792c 2073 6572 6965 733d  f_daily, series=
-0001eb50: 7365 7269 6573 2c20 7374 6172 745f 6461  series, start_da
-0001eb60: 7465 3d73 7461 7274 5f64 6174 6529 0d0a  te=start_date)..
-0001eb70: 2020 2020 6d6f 642e 7265 7475 726e 5f63      mod.return_c
-0001eb80: 6f6d 706f 6e65 6e74 7328 290d 0a20 2020  omponents()..   
-0001eb90: 2023 2061 6e64 2074 7279 2072 6574 7261   # and try retra
-0001eba0: 696e 696e 6720 6261 636b 2077 6974 6820  ining back with 
-0001ebb0: 7368 6f72 7465 7220 6461 7461 7365 7420  shorter dataset 
-0001ebc0: 616e 6420 7365 6520 6966 2069 7420 6d61  and see if it ma
-0001ebd0: 7463 6865 7320 7072 696f 720d 0a20 2020  tches prior..   
-0001ebe0: 206d 6f64 2e66 6974 5f64 6174 6128 6466   mod.fit_data(df
-0001ebf0: 5f74 7261 696e 2c20 7061 7374 5f69 6d70  _train, past_imp
-0001ec00: 6163 7473 3d70 6173 745f 696d 7061 6374  acts=past_impact
-0001ec10: 735b 6466 5f74 7261 696e 2e63 6f6c 756d  s[df_train.colum
-0001ec20: 6e73 5d29 0d0a 2020 2020 7072 6564 3320  ns])..    pred3 
-0001ec30: 3d20 6d6f 642e 7072 6564 6963 7428 0d0a  = mod.predict(..
-0001ec40: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-0001ec50: 5f6c 656e 6774 683d 666f 7265 6361 7374  _length=forecast
-0001ec60: 5f6c 656e 6774 682c 0d0a 2020 2020 2020  _length,..      
-0001ec70: 2020 696e 636c 7564 655f 6869 7374 6f72    include_histor
-0001ec80: 793d 5472 7565 2c0d 0a20 2020 2020 2020  y=True,..       
-0001ec90: 2066 6c61 675f 7265 6772 6573 736f 7273   flag_regressors
-0001eca0: 3d66 6c61 675f 7265 6772 6573 736f 725f  =flag_regressor_
-0001ecb0: 6663 7374 2e72 6569 6e64 6578 2864 665f  fcst.reindex(df_
-0001ecc0: 6461 696c 792e 696e 6465 782c 2066 696c  daily.index, fil
-0001ecd0: 6c5f 7661 6c75 653d 3029 2c0d 0a20 2020  l_value=0),..   
-0001ece0: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
-0001ecf0: 6573 736f 723d 6661 6b65 5f72 6567 725f  essor=fake_regr_
-0001ed00: 6663 7374 2e72 6569 6e64 6578 2864 665f  fcst.reindex(df_
-0001ed10: 6461 696c 792e 696e 6465 782c 2066 696c  daily.index, fil
-0001ed20: 6c5f 7661 6c75 653d 3029 2c0d 0a20 2020  l_value=0),..   
-0001ed30: 2020 2020 2072 6567 7265 7373 6f72 5f70       regressor_p
-0001ed40: 6572 5f73 6572 6965 733d 7265 6772 5f70  er_series=regr_p
-0001ed50: 732c 0d0a 2020 2020 2020 2020 6675 7475  s,..        futu
-0001ed60: 7265 5f69 6d70 6163 7473 3d66 7574 7572  re_impacts=futur
-0001ed70: 655f 696d 7061 6374 732c 0d0a 2020 2020  e_impacts,..    
-0001ed80: 290d 0a20 2020 206d 6f64 2e70 6c6f 745f  )..    mod.plot_
-0001ed90: 666f 7265 6361 7374 280d 0a20 2020 2020  forecast(..     
-0001eda0: 2020 2070 7265 6433 2c0d 0a20 2020 2020     pred3,..     
-0001edb0: 2020 2061 6374 7561 6c73 3d64 665f 6461     actuals=df_da
-0001edc0: 696c 7920 6966 2069 6e63 6c75 6465 5f68  ily if include_h
-0001edd0: 6973 746f 7279 2065 6c73 6520 6466 5f74  istory else df_t
-0001ede0: 6573 742c 0d0a 2020 2020 2020 2020 7365  est,..        se
-0001edf0: 7269 6573 3d73 6572 6965 732c 0d0a 2020  ries=series,..  
-0001ee00: 2020 2020 2020 7374 6172 745f 6461 7465        start_date
-0001ee10: 3d73 7461 7274 5f64 6174 652c 0d0a 2020  =start_date,..  
-0001ee20: 2020 290d 0a0d 0a20 2020 2070 7269 6e74    )....    print
-0001ee30: 2863 5f70 6172 616d 735b 2774 7265 6e64  (c_params['trend
-0001ee40: 5f6d 6f64 656c 275d 290d 0a0d 0a23 204b  _model'])....# K
-0001ee50: 6e6f 776e 2061 6e64 2050 6f73 7369 626c  nown and Possibl
-0001ee60: 6520 4953 5355 4553 3a0d 0a23 204d 756c  e ISSUES:..# Mul
-0001ee70: 7469 7661 7269 6174 6520 6665 6174 7572  tivariate featur
-0001ee80: 6520 776f 726b 696e 6720 6f72 206e 6f74  e working or not
-0001ee90: 3f0d 0a23 206d 756c 7469 706c 6963 6174  ?..# multiplicat
-0001eea0: 6976 6520 7365 6173 6f6e 616c 6974 790d  ive seasonality.
-0001eeb0: 0a0d 0a0d 0a23 2041 7574 6f6d 6174 696f  .....# Automatio
-0001eec0: 6e0d 0a23 2061 6c6c 6f77 2073 6f6d 6520  n..# allow some 
-0001eed0: 636f 6e66 6967 2069 6e70 7574 732c 206f  config inputs, o
-0001eee0: 7220 6175 746f 6d61 7465 6420 6669 740d  r automated fit.
-0001eef0: 0a23 206f 7574 7075 7420 746f 2074 6162  .# output to tab
-0001ef00: 6c65 0d0a 2320 636f 6d70 6172 6520 636f  le..# compare co
-0001ef10: 6566 6669 6369 656e 7473 2063 6861 6e67  efficients chang
-0001ef20: 6520 6f76 6572 2074 696d 652c 2061 6363  e over time, acc
-0001ef30: 7572 6163 7920 6f76 6572 2074 696d 650d  uracy over time.
-0001ef40: 0a23 2063 6f6d 7061 7269 6e67 2064 6966  .# comparing dif
-0001ef50: 6665 7265 6e74 2073 6f75 7263 6573 3f20  ferent sources? 
-0001ef60: 616e 642f 6f72 2061 6c6c 6f77 696e 6720  and/or allowing 
-0001ef70: 6f6e 6520 666f 7265 6361 7374 2074 6f20  one forecast to 
-0001ef80: 6265 2075 7365 6420 6173 2061 2072 6567  be used as a reg
-0001ef90: 7265 7373 6f72 2066 6f72 2061 6e6f 7468  ressor for anoth
-0001efa0: 6572 0d0a 2320 776f 756c 6420 616c 6c6f  er..# would allo
-0001efb0: 7720 666f 7220 6561 726c 6965 7220 6465  w for earlier de
-0001efc0: 7465 6374 696f 6e20 6f66 2062 726f 6b65  tection of broke
-0001efd0: 6e20 636f 6e6e 6563 7469 6f6e 730d 0a0d  n connections...
-0001efe0: 0a22 2222 0d0a 6178 203d 2070 7265 642e  ."""..ax = pred.
-0001eff0: 706c 6f74 2864 665f 6461 696c 7920 6966  plot(df_daily if
-0001f000: 2069 6e63 6c75 6465 5f68 6973 746f 7279   include_history
-0001f010: 2065 6c73 6520 6466 5f74 6573 742c 2073   else df_test, s
-0001f020: 6572 6965 733d 7365 7269 6573 2c20 766c  eries=series, vl
-0001f030: 696e 653d 6466 5f74 6573 742e 696e 6465  ine=df_test.inde
-0001f040: 785b 305d 2c20 7374 6172 745f 6461 7465  x[0], start_date
-0001f050: 3d73 7461 7274 5f64 6174 6529 0d0a 6861  =start_date)..ha
-0001f060: 6e64 6c65 732c 206c 6162 656c 7320 3d20  ndles, labels = 
-0001f070: 6178 2e67 6574 5f6c 6567 656e 645f 6861  ax.get_legend_ha
-0001f080: 6e64 6c65 735f 6c61 6265 6c73 2829 0d0a  ndles_labels()..
-0001f090: 6966 206d 6f64 2e61 6e6f 6d61 6c79 5f64  if mod.anomaly_d
-0001f0a0: 6574 6563 746f 723a 0d0a 2020 2020 6966  etector:..    if
-0001f0b0: 206d 6f64 2e61 6e6f 6d61 6c79 5f64 6574   mod.anomaly_det
-0001f0c0: 6563 746f 722e 6f75 7470 7574 203d 3d20  ector.output == 
-0001f0d0: 2275 6e69 7661 7269 6174 6522 3a0d 0a20  "univariate":.. 
-0001f0e0: 2020 2020 2020 2069 5f61 6e6f 6d20 3d20         i_anom = 
-0001f0f0: 6d6f 642e 616e 6f6d 616c 795f 6465 7465  mod.anomaly_dete
-0001f100: 6374 6f72 2e61 6e6f 6d61 6c69 6573 2e69  ctor.anomalies.i
-0001f110: 6e64 6578 5b6d 6f64 2e61 6e6f 6d61 6c79  ndex[mod.anomaly
-0001f120: 5f64 6574 6563 746f 722e 616e 6f6d 616c  _detector.anomal
-0001f130: 6965 732e 696c 6f63 5b3a 2c20 305d 203d  ies.iloc[:, 0] =
-0001f140: 3d20 2d31 5d0d 0a20 2020 2065 6c73 653a  = -1]..    else:
-0001f150: 0d0a 2020 2020 2020 2020 7365 7269 6573  ..        series
-0001f160: 5f61 6e6f 6d20 3d20 6d6f 642e 616e 6f6d  _anom = mod.anom
-0001f170: 616c 795f 6465 7465 6374 6f72 2e61 6e6f  aly_detector.ano
-0001f180: 6d61 6c69 6573 5b73 6572 6965 735d 0d0a  malies[series]..
-0001f190: 2020 2020 2020 2020 695f 616e 6f6d 203d          i_anom =
-0001f1a0: 2073 6572 6965 735f 616e 6f6d 5b73 6572   series_anom[ser
-0001f1b0: 6965 735f 616e 6f6d 203d 3d20 2d31 5d2e  ies_anom == -1].
-0001f1c0: 696e 6465 780d 0a20 2020 2020 2020 2069  index..        i
-0001f1d0: 5f61 6e6f 6d20 3d20 695f 616e 6f6d 5b69  _anom = i_anom[i
-0001f1e0: 5f61 6e6f 6d20 3e3d 2073 7461 7274 5f64  _anom >= start_d
-0001f1f0: 6174 655d 0d0a 2020 2020 6966 206c 656e  ate]..    if len
-0001f200: 2869 5f61 6e6f 6d29 203e 2030 2061 6e64  (i_anom) > 0 and
-0001f210: 206c 656e 2869 5f61 6e6f 6d29 203c 206c   len(i_anom) < l
-0001f220: 656e 2864 665f 6461 696c 7929 202a 2030  en(df_daily) * 0
-0001f230: 2e35 3a0d 0a20 2020 2020 2020 2073 6361  .5:..        sca
-0001f240: 7431 203d 2061 782e 7363 6174 7465 7228  t1 = ax.scatter(
-0001f250: 695f 616e 6f6d 2e74 6f6c 6973 7428 292c  i_anom.tolist(),
-0001f260: 2064 665f 6461 696c 792e 6c6f 635b 695f   df_daily.loc[i_
-0001f270: 616e 6f6d 2c20 3a5d 5b73 6572 6965 735d  anom, :][series]
-0001f280: 2c20 633d 2264 6172 6b73 6c61 7465 626c  , c="darkslatebl
-0001f290: 7565 222c 2073 3d31 322e 3029 0d0a 2020  ue", s=12.0)..  
-0001f2a0: 2020 2020 2020 6861 6e64 6c65 7320 2b3d        handles +=
-0001f2b0: 205b 7363 6174 315d 0d0a 2020 2020 2020   [scat1]..      
-0001f2c0: 2020 6c61 6265 6c73 202b 3d20 5b22 616e    labels += ["an
-0001f2d0: 6f6d 616c 6965 7322 5d0d 0a69 6620 6d6f  omalies"]..if mo
-0001f2e0: 642e 686f 6c69 6461 795f 6465 7465 6374  d.holiday_detect
-0001f2f0: 6f72 3a0d 0a20 2020 2069 5f61 6e6f 6d20  or:..    i_anom 
-0001f300: 3d20 6d6f 642e 686f 6c69 6461 795f 6465  = mod.holiday_de
-0001f310: 7465 6374 6f72 2e64 6174 6573 5f74 6f5f  tector.dates_to_
-0001f320: 686f 6c69 6461 7973 286d 6f64 2e64 662e  holidays(mod.df.
-0001f330: 696e 6465 782c 2073 7479 6c65 3d22 7365  index, style="se
-0001f340: 7269 6573 5f66 6c61 6722 295b 7365 7269  ries_flag")[seri
-0001f350: 6573 5d0d 0a20 2020 2069 5f61 6e6f 6d20  es]..    i_anom 
-0001f360: 3d20 695f 616e 6f6d 2e69 6e64 6578 5b69  = i_anom.index[i
-0001f370: 5f61 6e6f 6d20 3d3d 2031 5d0d 0a20 2020  _anom == 1]..   
-0001f380: 2069 6620 6c65 6e28 695f 616e 6f6d 2920   if len(i_anom) 
-0001f390: 3e20 3020 616e 6420 6c65 6e28 695f 616e  > 0 and len(i_an
-0001f3a0: 6f6d 2920 3c20 6c65 6e28 6466 5f64 6169  om) < len(df_dai
-0001f3b0: 6c79 2920 2a20 302e 353a 0d0a 2020 2020  ly) * 0.5:..    
-0001f3c0: 2020 2020 7363 6174 3220 3d20 6178 2e73      scat2 = ax.s
-0001f3d0: 6361 7474 6572 2869 5f61 6e6f 6d2e 746f  catter(i_anom.to
-0001f3e0: 6c69 7374 2829 2c20 6466 5f64 6169 6c79  list(), df_daily
-0001f3f0: 2e6c 6f63 5b69 5f61 6e6f 6d2c 203a 5d5b  .loc[i_anom, :][
-0001f400: 7365 7269 6573 5d2c 2063 3d22 6461 726b  series], c="dark
-0001f410: 6772 6565 6e22 2c20 733d 3132 2e30 290d  green", s=12.0).
-0001f420: 0a20 2020 2020 2020 2068 616e 646c 6573  .        handles
-0001f430: 202b 3d20 5b73 6361 7432 5d0d 0a20 2020   += [scat2]..   
-0001f440: 2020 2020 206c 6162 656c 7320 2b3d 205b       labels += [
-0001f450: 2264 6574 6563 7465 6420 686f 6c69 6461  "detected holida
-0001f460: 7973 225d 0d0a 6966 206d 6f64 2e74 7265  ys"]..if mod.tre
-0001f470: 6e64 5f61 6e6f 6d61 6c79 5f64 6574 6563  nd_anomaly_detec
-0001f480: 746f 7220 6973 206e 6f74 204e 6f6e 653a  tor is not None:
-0001f490: 0d0a 2020 2020 6966 206d 6f64 2e74 7265  ..    if mod.tre
-0001f4a0: 6e64 5f61 6e6f 6d61 6c79 5f64 6574 6563  nd_anomaly_detec
-0001f4b0: 746f 722e 6f75 7470 7574 203d 3d20 2275  tor.output == "u
-0001f4c0: 6e69 7661 7269 6174 6522 3a0d 0a20 2020  nivariate":..   
-0001f4d0: 2020 2020 2069 5f61 6e6f 6d20 3d20 6d6f       i_anom = mo
-0001f4e0: 642e 7472 656e 645f 616e 6f6d 616c 795f  d.trend_anomaly_
-0001f4f0: 6465 7465 6374 6f72 2e61 6e6f 6d61 6c69  detector.anomali
-0001f500: 6573 2e69 6e64 6578 5b6d 6f64 2e61 6e6f  es.index[mod.ano
-0001f510: 6d61 6c79 5f64 6574 6563 746f 722e 616e  maly_detector.an
-0001f520: 6f6d 616c 6965 732e 696c 6f63 5b3a 2c20  omalies.iloc[:, 
-0001f530: 305d 203d 3d20 2d31 5d0d 0a20 2020 2065  0] == -1]..    e
-0001f540: 6c73 653a 0d0a 2020 2020 2020 2020 7365  lse:..        se
-0001f550: 7269 6573 5f61 6e6f 6d20 3d20 6d6f 642e  ries_anom = mod.
-0001f560: 7472 656e 645f 616e 6f6d 616c 795f 6465  trend_anomaly_de
-0001f570: 7465 6374 6f72 2e61 6e6f 6d61 6c69 6573  tector.anomalies
-0001f580: 5b73 6572 6965 735d 0d0a 2020 2020 2020  [series]..      
-0001f590: 2020 695f 616e 6f6d 203d 2073 6572 6965    i_anom = serie
-0001f5a0: 735f 616e 6f6d 5b73 6572 6965 735f 616e  s_anom[series_an
-0001f5b0: 6f6d 203d 3d20 2d31 5d2e 696e 6465 780d  om == -1].index.
-0001f5c0: 0a20 2020 2069 6620 7374 6172 745f 6461  .    if start_da
-0001f5d0: 7465 2069 7320 6e6f 7420 4e6f 6e65 3a0d  te is not None:.
-0001f5e0: 0a20 2020 2020 2020 2069 5f61 6e6f 6d20  .        i_anom 
-0001f5f0: 3d20 695f 616e 6f6d 5b69 5f61 6e6f 6d20  = i_anom[i_anom 
-0001f600: 3e3d 2073 7461 7274 5f64 6174 655d 0d0a  >= start_date]..
-0001f610: 2020 2020 6966 206c 656e 2869 5f61 6e6f      if len(i_ano
-0001f620: 6d29 203e 2030 2061 6e64 206c 656e 2869  m) > 0 and len(i
-0001f630: 5f61 6e6f 6d29 203c 206c 656e 2864 665f  _anom) < len(df_
-0001f640: 6461 696c 7929 202a 2030 2e35 3a0d 0a20  daily) * 0.5:.. 
-0001f650: 2020 2020 2020 2073 6361 7433 203d 2061         scat3 = a
-0001f660: 782e 7363 6174 7465 7228 695f 616e 6f6d  x.scatter(i_anom
-0001f670: 2e74 6f6c 6973 7428 292c 2064 665f 6461  .tolist(), df_da
-0001f680: 696c 792e 6c6f 635b 695f 616e 6f6d 5d5b  ily.loc[i_anom][
-0001f690: 7365 7269 6573 5d2c 2063 3d22 736c 6174  series], c="slat
-0001f6a0: 6567 7261 7922 2c20 733d 3132 2e30 290d  egray", s=12.0).
-0001f6b0: 0a20 2020 2020 2020 2068 616e 646c 6573  .        handles
-0001f6c0: 202b 3d20 5b73 6361 7433 5d0d 0a20 2020   += [scat3]..   
-0001f6d0: 2020 2020 206c 6162 656c 7320 2b3d 205b       labels += [
-0001f6e0: 2274 7265 6e64 2061 6e6f 6d61 6c69 6573  "trend anomalies
-0001f6f0: 225d 0d0a 6178 2e6c 6567 656e 6428 6861  "]..ax.legend(ha
-0001f700: 6e64 6c65 732c 206c 6162 656c 7329 0d0a  ndles, labels)..
-0001f710: 2222 220d 0a                             """..
+0001ae60: 230d 0a23 204a 5553 5420 4c45 4153 5420  #..# JUST LEAST 
+0001ae70: 5351 5541 5245 5320 554e 4956 4152 4941  SQUARES UNIVARIA
+0001ae80: 5445 0d0a 2320 6874 7470 733a 2f2f 7374  TE..# https://st
+0001ae90: 6163 6b6f 7665 7266 6c6f 772e 636f 6d2f  ackoverflow.com/
+0001aea0: 7175 6573 7469 6f6e 732f 3137 3637 3931  questions/176791
+0001aeb0: 3430 2f6d 756c 7469 706c 652d 6c69 6e65  40/multiple-line
+0001aec0: 6172 2d72 6567 7265 7373 696f 6e2d 7769  ar-regression-wi
+0001aed0: 7468 2d70 7974 686f 6e0d 0a0d 0a0d 0a64  th-python......d
+0001aee0: 6566 206c 7374 7371 5f73 6f6c 7665 2858  ef lstsq_solve(X
+0001aef0: 2c20 792c 206c 616d 623d 312c 2069 6465  , y, lamb=1, ide
+0001af00: 6e74 6974 795f 6d61 7472 6978 3d4e 6f6e  ntity_matrix=Non
+0001af10: 6529 3a0d 0a20 2020 2069 6620 6964 656e  e):..    if iden
+0001af20: 7469 7479 5f6d 6174 7269 7820 6973 204e  tity_matrix is N
+0001af30: 6f6e 653a 0d0a 2020 2020 2020 2020 6964  one:..        id
+0001af40: 656e 7469 7479 5f6d 6174 7269 7820 3d20  entity_matrix = 
+0001af50: 6e70 2e7a 6572 6f73 2828 582e 7368 6170  np.zeros((X.shap
+0001af60: 655b 315d 2c20 582e 7368 6170 655b 315d  e[1], X.shape[1]
+0001af70: 2929 0d0a 2020 2020 2020 2020 6e70 2e66  ))..        np.f
+0001af80: 696c 6c5f 6469 6167 6f6e 616c 2869 6465  ill_diagonal(ide
+0001af90: 6e74 6974 795f 6d61 7472 6978 2c20 3129  ntity_matrix, 1)
+0001afa0: 0d0a 2020 2020 2020 2020 6964 656e 7469  ..        identi
+0001afb0: 7479 5f6d 6174 7269 785b 302c 2030 5d20  ty_matrix[0, 0] 
+0001afc0: 3d20 300d 0a20 2020 2069 6620 6c61 6d62  = 0..    if lamb
+0001afd0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+0001afe0: 2020 206c 616d 6220 3d20 312e 300d 0a20     lamb = 1.0.. 
+0001aff0: 2020 2058 7458 5f6c 616d 6220 3d20 582e     XtX_lamb = X.
+0001b000: 542e 646f 7428 5829 202b 206c 616d 6220  T.dot(X) + lamb 
+0001b010: 2a20 6964 656e 7469 7479 5f6d 6174 7269  * identity_matri
+0001b020: 780d 0a20 2020 2058 7459 203d 2058 2e54  x..    XtY = X.T
+0001b030: 2e64 6f74 2879 290d 0a20 2020 2072 6574  .dot(y)..    ret
+0001b040: 7572 6e20 6e70 2e6c 696e 616c 672e 736f  urn np.linalg.so
+0001b050: 6c76 6528 5874 585f 6c61 6d62 2c20 5874  lve(XtX_lamb, Xt
+0001b060: 5929 0d0a 0d0a 0d0a 6465 6620 636f 7374  Y)......def cost
+0001b070: 5f66 756e 6374 696f 6e5f 6c31 2870 6172  _function_l1(par
+0001b080: 616d 732c 2058 2c20 7929 3a0d 0a20 2020  ams, X, y):..   
+0001b090: 2072 6574 7572 6e20 6e70 2e73 756d 286e   return np.sum(n
+0001b0a0: 702e 6162 7328 7920 2d20 6e70 2e64 6f74  p.abs(y - np.dot
+0001b0b0: 2858 2c20 7061 7261 6d73 2e72 6573 6861  (X, params.resha
+0001b0c0: 7065 2858 2e73 6861 7065 5b31 5d2c 2079  pe(X.shape[1], y
+0001b0d0: 2e73 6861 7065 5b31 5d29 2929 290d 0a0d  .shape[1]))))...
+0001b0e0: 0a0d 0a64 6566 2063 6f73 745f 6675 6e63  ...def cost_func
+0001b0f0: 7469 6f6e 5f6c 315f 706f 7369 7469 7665  tion_l1_positive
+0001b100: 2870 6172 616d 732c 2058 2c20 7929 3a0d  (params, X, y):.
+0001b110: 0a20 2020 2072 6574 7572 6e20 6e70 2e73  .    return np.s
+0001b120: 756d 280d 0a20 2020 2020 2020 206e 702e  um(..        np.
+0001b130: 6162 7328 0d0a 2020 2020 2020 2020 2020  abs(..          
+0001b140: 2020 790d 0a20 2020 2020 2020 2020 2020    y..           
+0001b150: 202d 206e 702e 646f 7428 582c 206e 702e   - np.dot(X, np.
+0001b160: 7768 6572 6528 7061 7261 6d73 203c 2030  where(params < 0
+0001b170: 2c20 302c 2070 6172 616d 7329 2e72 6573  , 0, params).res
+0001b180: 6861 7065 2858 2e73 6861 7065 5b31 5d2c  hape(X.shape[1],
+0001b190: 2079 2e73 6861 7065 5b31 5d29 290d 0a20   y.shape[1])).. 
+0001b1a0: 2020 2020 2020 2029 0d0a 2020 2020 290d         )..    ).
+0001b1b0: 0a0d 0a0d 0a23 2061 6374 7561 6c6c 7920  .....# actually 
+0001b1c0: 7468 6973 2069 7320 6d6f 7265 206c 696b  this is more lik
+0001b1d0: 6520 4d41 4445 0d0a 6465 6620 636f 7374  e MADE..def cost
+0001b1e0: 5f66 756e 6374 696f 6e5f 6477 6165 2870  _function_dwae(p
+0001b1f0: 6172 616d 732c 2058 2c20 7929 3a0d 0a20  arams, X, y):.. 
+0001b200: 2020 2041 203d 2079 0d0a 2020 2020 4620     A = y..    F 
+0001b210: 3d20 6e70 2e64 6f74 2858 2c20 7061 7261  = np.dot(X, para
+0001b220: 6d73 2e72 6573 6861 7065 2858 2e73 6861  ms.reshape(X.sha
+0001b230: 7065 5b31 5d2c 2079 2e73 6861 7065 5b31  pe[1], y.shape[1
+0001b240: 5d29 290d 0a20 2020 206c 6173 745f 6f66  ]))..    last_of
+0001b250: 5f61 7272 6179 203d 2079 5b5b 305d 202b  _array = y[[0] +
+0001b260: 206c 6973 7428 7261 6e67 6528 6c65 6e28   list(range(len(
+0001b270: 7929 202d 2031 2929 5d0d 0a20 2020 2072  y) - 1))]..    r
+0001b280: 6574 7572 6e20 6e70 2e73 756d 280d 0a20  eturn np.sum(.. 
+0001b290: 2020 2020 2020 206e 702e 6e61 6e6d 6561         np.nanmea
+0001b2a0: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
+0001b2b0: 6e70 2e77 6865 7265 280d 0a20 2020 2020  np.where(..     
+0001b2c0: 2020 2020 2020 2020 2020 206e 702e 7369             np.si
+0001b2d0: 676e 2846 202d 206c 6173 745f 6f66 5f61  gn(F - last_of_a
+0001b2e0: 7272 6179 2920 3d3d 206e 702e 7369 676e  rray) == np.sign
+0001b2f0: 2841 202d 206c 6173 745f 6f66 5f61 7272  (A - last_of_arr
+0001b300: 6179 292c 0d0a 2020 2020 2020 2020 2020  ay),..          
+0001b310: 2020 2020 2020 6e70 2e61 6273 2841 202d        np.abs(A -
+0001b320: 2046 292c 0d0a 2020 2020 2020 2020 2020   F),..          
+0001b330: 2020 2020 2020 286e 702e 6162 7328 4120        (np.abs(A 
+0001b340: 2d20 4629 202b 2031 2920 2a2a 2032 2c0d  - F) + 1) ** 2,.
+0001b350: 0a20 2020 2020 2020 2020 2020 2029 2c0d  .            ),.
+0001b360: 0a20 2020 2020 2020 2020 2020 2061 7869  .            axi
+0001b370: 733d 302c 0d0a 2020 2020 2020 2020 290d  s=0,..        ).
+0001b380: 0a20 2020 2029 0d0a 0d0a 0d0a 6465 6620  .    )......def 
+0001b390: 636f 7374 5f66 756e 6374 696f 6e5f 7175  cost_function_qu
+0001b3a0: 616e 7469 6c65 2870 6172 616d 732c 2058  antile(params, X
+0001b3b0: 2c20 792c 2071 3d30 2e39 293a 0d0a 2020  , y, q=0.9):..  
+0001b3c0: 2020 6375 7420 3d20 696e 7428 792e 7368    cut = int(y.sh
+0001b3d0: 6170 655b 305d 202a 2071 290d 0a20 2020  ape[0] * q)..   
+0001b3e0: 2072 6574 7572 6e20 6e70 2e73 756d 280d   return np.sum(.
+0001b3f0: 0a20 2020 2020 2020 206e 702e 7061 7274  .        np.part
+0001b400: 6974 696f 6e28 0d0a 2020 2020 2020 2020  ition(..        
+0001b410: 2020 2020 6e70 2e61 6273 2879 202d 206e      np.abs(y - n
+0001b420: 702e 646f 7428 582c 2070 6172 616d 732e  p.dot(X, params.
+0001b430: 7265 7368 6170 6528 582e 7368 6170 655b  reshape(X.shape[
+0001b440: 315d 2c20 792e 7368 6170 655b 315d 2929  1], y.shape[1]))
+0001b450: 292c 2063 7574 2c20 6178 6973 3d30 0d0a  ), cut, axis=0..
+0001b460: 2020 2020 2020 2020 295b 303a 6375 745d          )[0:cut]
+0001b470: 0d0a 2020 2020 290d 0a0d 0a0d 0a64 6566  ..    )......def
+0001b480: 2063 6f73 745f 6675 6e63 7469 6f6e 5f6c   cost_function_l
+0001b490: 3228 7061 7261 6d73 2c20 582c 2079 293a  2(params, X, y):
+0001b4a0: 0d0a 2020 2020 7265 7475 726e 206e 702e  ..    return np.
+0001b4b0: 6c69 6e61 6c67 2e6e 6f72 6d28 7920 2d20  linalg.norm(y - 
+0001b4c0: 6e70 2e64 6f74 2858 2c20 7061 7261 6d73  np.dot(X, params
+0001b4d0: 2e72 6573 6861 7065 2858 2e73 6861 7065  .reshape(X.shape
+0001b4e0: 5b31 5d2c 2079 2e73 6861 7065 5b31 5d29  [1], y.shape[1])
+0001b4f0: 2929 0d0a 0d0a 0d0a 2320 636f 756c 6420  ))......# could 
+0001b500: 646f 2070 6172 7469 616c 2070 6f6f 6c69  do partial pooli
+0001b510: 6e67 2062 7920 6d69 6e69 6d69 7a69 6e67  ng by minimizing
+0001b520: 2061 2066 756e 6374 696f 6e20 7468 6174   a function that
+0001b530: 206d 6978 6573 2073 6861 7265 6420 616e   mixes shared an
+0001b540: 6420 756e 7368 6172 6564 2063 6f65 6666  d unshared coeff
+0001b550: 6963 6965 6e74 7320 286d 756c 7469 706c  icients (multipl
+0001b560: 6963 6174 6976 6529 0d0a 6465 6620 6c73  icative)..def ls
+0001b570: 7473 715f 6d69 6e69 6d69 7a65 2858 2c20  tsq_minimize(X, 
+0001b580: 792c 206d 6178 6974 6572 3d31 3530 3030  y, maxiter=15000
+0001b590: 2c20 636f 7374 5f66 756e 6374 696f 6e3d  , cost_function=
+0001b5a0: 226c 3122 2c20 6d65 7468 6f64 3d4e 6f6e  "l1", method=Non
+0001b5b0: 6529 3a0d 0a20 2020 2022 2222 416e 7920  e):..    """Any 
+0001b5c0: 636f 7374 2066 756e 6374 696f 6e20 7665  cost function ve
+0001b5d0: 7273 696f 6e20 6f66 206c 696e 2072 6567  rsion of lin reg
+0001b5e0: 2e22 2222 0d0a 2020 2020 2320 7374 6172  ."""..    # star
+0001b5f0: 7420 7769 7468 206c 7374 7371 2066 6974  t with lstsq fit
+0001b600: 2061 7320 6573 7469 6d61 7465 6420 706f   as estimated po
+0001b610: 696e 740d 0a20 2020 2078 3020 3d20 6c73  int..    x0 = ls
+0001b620: 7473 715f 736f 6c76 6528 582c 2079 292e  tsq_solve(X, y).
+0001b630: 666c 6174 7465 6e28 290d 0a20 2020 2023  flatten()..    #
+0001b640: 2061 7373 756d 696e 6720 7363 616c 6564   assuming scaled
+0001b650: 2c20 7468 6573 6520 7368 6f75 6c64 2062  , these should b
+0001b660: 6520 7265 6173 6f6e 6162 6c65 2062 6f75  e reasonable bou
+0001b670: 6e64 730d 0a20 2020 2062 6f75 6e64 7320  nds..    bounds 
+0001b680: 3d20 5b28 2d31 302c 2031 3029 2066 6f72  = [(-10, 10) for
+0001b690: 2078 2069 6e20 7830 5d0d 0a20 2020 2069   x in x0]..    i
+0001b6a0: 6620 636f 7374 5f66 756e 6374 696f 6e20  f cost_function 
+0001b6b0: 3d3d 2022 6477 6165 223a 0d0a 2020 2020  == "dwae":..    
+0001b6c0: 2020 2020 626f 756e 6473 203d 205b 282d      bounds = [(-
+0001b6d0: 302e 352c 2031 3029 2066 6f72 2078 2069  0.5, 10) for x i
+0001b6e0: 6e20 7830 5d0d 0a20 2020 2020 2020 2063  n x0]..        c
+0001b6f0: 6f73 745f 6675 6e63 203d 2063 6f73 745f  ost_func = cost_
+0001b700: 6675 6e63 7469 6f6e 5f64 7761 650d 0a20  function_dwae.. 
+0001b710: 2020 2065 6c69 6620 636f 7374 5f66 756e     elif cost_fun
+0001b720: 6374 696f 6e20 3d3d 2022 7175 616e 7469  ction == "quanti
+0001b730: 6c65 223a 0d0a 2020 2020 2020 2020 636f  le":..        co
+0001b740: 7374 5f66 756e 6320 3d20 636f 7374 5f66  st_func = cost_f
+0001b750: 756e 6374 696f 6e5f 7175 616e 7469 6c65  unction_quantile
+0001b760: 0d0a 2020 2020 656c 6966 2063 6f73 745f  ..    elif cost_
+0001b770: 6675 6e63 7469 6f6e 203d 3d20 226c 315f  function == "l1_
+0001b780: 706f 7369 7469 7665 223a 0d0a 2020 2020  positive":..    
+0001b790: 2020 2020 626f 756e 6473 203d 205b 2830      bounds = [(0
+0001b7a0: 2c20 3134 2920 666f 7220 7820 696e 2078  , 14) for x in x
+0001b7b0: 305d 0d0a 2020 2020 2020 2020 636f 7374  0]..        cost
+0001b7c0: 5f66 756e 6320 3d20 636f 7374 5f66 756e  _func = cost_fun
+0001b7d0: 6374 696f 6e5f 6c31 0d0a 2020 2020 656c  ction_l1..    el
+0001b7e0: 7365 3a0d 0a20 2020 2020 2020 2063 6f73  se:..        cos
+0001b7f0: 745f 6675 6e63 203d 2063 6f73 745f 6675  t_func = cost_fu
+0001b800: 6e63 7469 6f6e 5f6c 310d 0a20 2020 2072  nction_l1..    r
+0001b810: 6574 7572 6e20 6d69 6e69 6d69 7a65 280d  eturn minimize(.
+0001b820: 0a20 2020 2020 2020 2063 6f73 745f 6675  .        cost_fu
+0001b830: 6e63 2c0d 0a20 2020 2020 2020 2078 302c  nc,..        x0,
+0001b840: 0d0a 2020 2020 2020 2020 6172 6773 3d28  ..        args=(
+0001b850: 582c 2079 292c 0d0a 2020 2020 2020 2020  X, y),..        
+0001b860: 626f 756e 6473 3d62 6f75 6e64 732c 0d0a  bounds=bounds,..
+0001b870: 2020 2020 2020 2020 6d65 7468 6f64 3d6d          method=m
+0001b880: 6574 686f 642c 0d0a 2020 2020 2020 2020  ethod,..        
+0001b890: 6f70 7469 6f6e 733d 7b27 6d61 7869 7465  options={'maxite
+0001b8a0: 7227 3a20 6d61 7869 7465 727d 2c0d 0a20  r': maxiter},.. 
+0001b8b0: 2020 2029 2e78 2e72 6573 6861 7065 2858     ).x.reshape(X
+0001b8c0: 2e73 6861 7065 5b31 5d2c 2079 2e73 6861  .shape[1], y.sha
+0001b8d0: 7065 5b31 5d29 0d0a 0d0a 0d0a 6465 6620  pe[1])......def 
+0001b8e0: 6669 745f 6c69 6e65 6172 5f6d 6f64 656c  fit_linear_model
+0001b8f0: 2878 2c20 792c 2070 6172 616d 733d 4e6f  (x, y, params=No
+0001b900: 6e65 293a 0d0a 2020 2020 6966 2070 6172  ne):..    if par
+0001b910: 616d 7320 6973 204e 6f6e 653a 0d0a 2020  ams is None:..  
+0001b920: 2020 2020 2020 7061 7261 6d73 203d 207b        params = {
+0001b930: 7d0d 0a20 2020 206d 6f64 656c 5f74 7970  }..    model_typ
+0001b940: 6520 3d20 7061 7261 6d73 2e67 6574 2822  e = params.get("
+0001b950: 6d6f 6465 6c22 2c20 226c 7374 7371 2229  model", "lstsq")
+0001b960: 0d0a 2020 2020 6c61 6d62 6420 3d20 7061  ..    lambd = pa
+0001b970: 7261 6d73 2e67 6574 2822 6c61 6d62 6461  rams.get("lambda
+0001b980: 222c 204e 6f6e 6529 0d0a 2020 2020 7265  ", None)..    re
+0001b990: 6320 3d20 7061 7261 6d73 2e67 6574 2822  c = params.get("
+0001b9a0: 7265 6365 6e63 795f 7765 6967 6874 696e  recency_weightin
+0001b9b0: 6722 2c20 4e6f 6e65 290d 0a20 2020 2069  g", None)..    i
+0001b9c0: 6620 6c61 6d62 6420 6973 206e 6f74 204e  f lambd is not N
+0001b9d0: 6f6e 653a 0d0a 2020 2020 2020 2020 6964  one:..        id
+0001b9e0: 5f6d 6174 203d 206e 702e 7a65 726f 7328  _mat = np.zeros(
+0001b9f0: 2878 2e73 6861 7065 5b31 5d2c 2078 2e73  (x.shape[1], x.s
+0001ba00: 6861 7065 5b31 5d29 290d 0a20 2020 2020  hape[1]))..     
+0001ba10: 2020 206e 702e 6669 6c6c 5f64 6961 676f     np.fill_diago
+0001ba20: 6e61 6c28 6964 5f6d 6174 2c20 3129 0d0a  nal(id_mat, 1)..
+0001ba30: 2020 2020 2020 2020 6964 5f6d 6174 5b30          id_mat[0
+0001ba40: 2c20 305d 203d 2030 0d0a 2020 2020 656c  , 0] = 0..    el
+0001ba50: 7365 3a0d 0a20 2020 2020 2020 2069 645f  se:..        id_
+0001ba60: 6d61 7420 3d20 4e6f 6e65 0d0a 2020 2020  mat = None..    
+0001ba70: 6966 2072 6563 2069 7320 6e6f 7420 4e6f  if rec is not No
+0001ba80: 6e65 3a0d 0a20 2020 2020 2020 2077 6569  ne:..        wei
+0001ba90: 6768 7473 203d 2028 6e70 2e61 7261 6e67  ghts = (np.arang
+0001baa0: 6528 6c65 6e28 7829 2920 2b20 3129 202a  e(len(x)) + 1) *
+0001bab0: 2a20 7265 6320 2023 2030 2e30 3520 2d20  * rec  # 0.05 - 
+0001bac0: 302e 3235 0d0a 2020 2020 2020 2020 7820  0.25..        x 
+0001bad0: 3d20 7820 2a20 7765 6967 6874 735b 2e2e  = x * weights[..
+0001bae0: 2e2c 204e 6f6e 655d 0d0a 2020 2020 2020  ., None]..      
+0001baf0: 2020 7920 3d20 6e70 2e61 7361 7272 6179    y = np.asarray
+0001bb00: 2879 2920 2a20 7765 6967 6874 735b 2e2e  (y) * weights[..
+0001bb10: 2e2c 204e 6f6e 655d 0d0a 2020 2020 6966  ., None]..    if
+0001bb20: 206d 6f64 656c 5f74 7970 6520 3d3d 2022   model_type == "
+0001bb30: 6c73 7473 7122 3a0d 0a20 2020 2020 2020  lstsq":..       
+0001bb40: 2069 6620 6c61 6d62 6420 6973 206e 6f74   if lambd is not
+0001bb50: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001bb60: 2020 2020 7265 7475 726e 206e 702e 6c69      return np.li
+0001bb70: 6e61 6c67 2e6c 7374 7371 2878 2e54 2e64  nalg.lstsq(x.T.d
+0001bb80: 6f74 2878 2920 2b20 6c61 6d62 6420 2a20  ot(x) + lambd * 
+0001bb90: 6964 5f6d 6174 2c20 782e 542e 646f 7428  id_mat, x.T.dot(
+0001bba0: 7929 2c20 7263 6f6e 643d 4e6f 6e65 295b  y), rcond=None)[
+0001bbb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bbc0: 2020 300d 0a20 2020 2020 2020 2020 2020    0..           
+0001bbd0: 205d 0d0a 2020 2020 2020 2020 656c 7365   ]..        else
+0001bbe0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0001bbf0: 6574 7572 6e20 6e70 2e6c 696e 616c 672e  eturn np.linalg.
+0001bc00: 6c73 7473 7128 782c 2079 2c20 7263 6f6e  lstsq(x, y, rcon
+0001bc10: 643d 4e6f 6e65 295b 305d 0d0a 2020 2020  d=None)[0]..    
+0001bc20: 656c 6966 206d 6f64 656c 5f74 7970 6520  elif model_type 
+0001bc30: 3d3d 2022 6c69 6e61 6c67 5f73 6f6c 7665  == "linalg_solve
+0001bc40: 223a 0d0a 2020 2020 2020 2020 7265 7475  ":..        retu
+0001bc50: 726e 206c 7374 7371 5f73 6f6c 7665 2878  rn lstsq_solve(x
+0001bc60: 2c20 792c 206c 616d 623d 6c61 6d62 642c  , y, lamb=lambd,
+0001bc70: 2069 6465 6e74 6974 795f 6d61 7472 6978   identity_matrix
+0001bc80: 3d69 645f 6d61 7429 0d0a 2020 2020 656c  =id_mat)..    el
+0001bc90: 6966 206d 6f64 656c 5f74 7970 6520 3d3d  if model_type ==
+0001bca0: 2022 6c31 5f6e 6f72 6d22 3a0d 0a20 2020   "l1_norm":..   
+0001bcb0: 2020 2020 2072 6574 7572 6e20 6c73 7473       return lsts
+0001bcc0: 715f 6d69 6e69 6d69 7a65 280d 0a20 2020  q_minimize(..   
+0001bcd0: 2020 2020 2020 2020 206e 702e 6173 6172           np.asar
+0001bce0: 7261 7928 7829 2c0d 0a20 2020 2020 2020  ray(x),..       
+0001bcf0: 2020 2020 206e 702e 6173 6172 7261 7928       np.asarray(
+0001bd00: 7929 2c0d 0a20 2020 2020 2020 2020 2020  y),..           
+0001bd10: 206d 6178 6974 6572 3d70 6172 616d 732e   maxiter=params.
+0001bd20: 6765 7428 226d 6178 6974 6572 222c 2031  get("maxiter", 1
+0001bd30: 3530 3030 292c 0d0a 2020 2020 2020 2020  5000),..        
+0001bd40: 2020 2020 6d65 7468 6f64 3d70 6172 616d      method=param
+0001bd50: 732e 6765 7428 226d 6574 686f 6422 2c20  s.get("method", 
+0001bd60: 4e6f 6e65 292c 0d0a 2020 2020 2020 2020  None),..        
+0001bd70: 2020 2020 636f 7374 5f66 756e 6374 696f      cost_functio
+0001bd80: 6e3d 226c 3122 2c0d 0a20 2020 2020 2020  n="l1",..       
+0001bd90: 2029 0d0a 2020 2020 656c 6966 206d 6f64   )..    elif mod
+0001bda0: 656c 5f74 7970 6520 3d3d 2022 7175 616e  el_type == "quan
+0001bdb0: 7469 6c65 5f6e 6f72 6d22 3a0d 0a20 2020  tile_norm":..   
+0001bdc0: 2020 2020 2072 6574 7572 6e20 6c73 7473       return lsts
+0001bdd0: 715f 6d69 6e69 6d69 7a65 280d 0a20 2020  q_minimize(..   
+0001bde0: 2020 2020 2020 2020 206e 702e 6173 6172           np.asar
+0001bdf0: 7261 7928 7829 2c0d 0a20 2020 2020 2020  ray(x),..       
+0001be00: 2020 2020 206e 702e 6173 6172 7261 7928       np.asarray(
+0001be10: 7929 2c0d 0a20 2020 2020 2020 2020 2020  y),..           
+0001be20: 206d 6178 6974 6572 3d70 6172 616d 732e   maxiter=params.
+0001be30: 6765 7428 226d 6178 6974 6572 222c 2031  get("maxiter", 1
+0001be40: 3530 3030 292c 0d0a 2020 2020 2020 2020  5000),..        
+0001be50: 2020 2020 6d65 7468 6f64 3d70 6172 616d      method=param
+0001be60: 732e 6765 7428 226d 6574 686f 6422 2c20  s.get("method", 
+0001be70: 4e6f 6e65 292c 0d0a 2020 2020 2020 2020  None),..        
+0001be80: 2020 2020 636f 7374 5f66 756e 6374 696f      cost_functio
+0001be90: 6e3d 2271 7561 6e74 696c 6522 2c0d 0a20  n="quantile",.. 
+0001bea0: 2020 2020 2020 2029 0d0a 2020 2020 656c         )..    el
+0001beb0: 6966 206d 6f64 656c 5f74 7970 6520 3d3d  if model_type ==
+0001bec0: 2022 6477 6165 5f6e 6f72 6d22 3a0d 0a20   "dwae_norm":.. 
+0001bed0: 2020 2020 2020 2072 6574 7572 6e20 6c73         return ls
+0001bee0: 7473 715f 6d69 6e69 6d69 7a65 280d 0a20  tsq_minimize(.. 
+0001bef0: 2020 2020 2020 2020 2020 206e 702e 6173             np.as
+0001bf00: 6172 7261 7928 7829 2c0d 0a20 2020 2020  array(x),..     
+0001bf10: 2020 2020 2020 206e 702e 6173 6172 7261         np.asarra
+0001bf20: 7928 7929 2c0d 0a20 2020 2020 2020 2020  y(y),..         
+0001bf30: 2020 206d 6178 6974 6572 3d70 6172 616d     maxiter=param
+0001bf40: 732e 6765 7428 226d 6178 6974 6572 222c  s.get("maxiter",
+0001bf50: 2031 3530 3030 292c 0d0a 2020 2020 2020   15000),..      
+0001bf60: 2020 2020 2020 6d65 7468 6f64 3d70 6172        method=par
+0001bf70: 616d 732e 6765 7428 226d 6574 686f 6422  ams.get("method"
+0001bf80: 2c20 4e6f 6e65 292c 0d0a 2020 2020 2020  , None),..      
+0001bf90: 2020 2020 2020 636f 7374 5f66 756e 6374        cost_funct
+0001bfa0: 696f 6e3d 2264 7761 6522 2c0d 0a20 2020  ion="dwae",..   
+0001bfb0: 2020 2020 2029 0d0a 2020 2020 656c 6966       )..    elif
+0001bfc0: 206d 6f64 656c 5f74 7970 6520 3d3d 2022   model_type == "
+0001bfd0: 6c31 5f70 6f73 6974 6976 6522 3a0d 0a20  l1_positive":.. 
+0001bfe0: 2020 2020 2020 2072 6574 7572 6e20 6c73         return ls
+0001bff0: 7473 715f 6d69 6e69 6d69 7a65 280d 0a20  tsq_minimize(.. 
+0001c000: 2020 2020 2020 2020 2020 206e 702e 6173             np.as
+0001c010: 6172 7261 7928 7829 2c0d 0a20 2020 2020  array(x),..     
+0001c020: 2020 2020 2020 206e 702e 6173 6172 7261         np.asarra
+0001c030: 7928 7929 2c0d 0a20 2020 2020 2020 2020  y(y),..         
+0001c040: 2020 206d 6178 6974 6572 3d70 6172 616d     maxiter=param
+0001c050: 732e 6765 7428 226d 6178 6974 6572 222c  s.get("maxiter",
+0001c060: 2031 3530 3030 292c 0d0a 2020 2020 2020   15000),..      
+0001c070: 2020 2020 2020 6d65 7468 6f64 3d70 6172        method=par
+0001c080: 616d 732e 6765 7428 226d 6574 686f 6422  ams.get("method"
+0001c090: 2c20 4e6f 6e65 292c 0d0a 2020 2020 2020  , None),..      
+0001c0a0: 2020 2020 2020 636f 7374 5f66 756e 6374        cost_funct
+0001c0b0: 696f 6e3d 226c 315f 706f 7369 7469 7665  ion="l1_positive
+0001c0c0: 222c 0d0a 2020 2020 2020 2020 290d 0a20  ",..        ).. 
+0001c0d0: 2020 2065 6c69 6620 6d6f 6465 6c5f 7479     elif model_ty
+0001c0e0: 7065 203d 3d20 2262 6179 6573 6961 6e5f  pe == "bayesian_
+0001c0f0: 6c69 6e65 6172 223a 0d0a 2020 2020 2020  linear":..      
+0001c100: 2020 2320 7468 6973 2063 6f75 6c64 2073    # this could s
+0001c110: 7570 706f 7274 2062 6574 7465 7220 7072  upport better pr
+0001c120: 6f62 6162 696c 6973 7469 6320 626f 756e  obabilistic boun
+0001c130: 6473 2062 7574 2074 6861 7420 6973 206e  ds but that is n
+0001c140: 6f74 2079 6574 2064 6f6e 650d 0a20 2020  ot yet done..   
+0001c150: 2020 2020 206d 6f64 656c 203d 2042 6179       model = Bay
+0001c160: 6573 6961 6e4d 756c 7469 4f75 7470 7574  esianMultiOutput
+0001c170: 5265 6772 6573 7369 6f6e 280d 0a20 2020  Regression(..   
+0001c180: 2020 2020 2020 2020 2061 6c70 6861 3d70           alpha=p
+0001c190: 6172 616d 732e 6765 7428 2261 6c70 6861  arams.get("alpha
+0001c1a0: 222c 2031 292c 0d0a 2020 2020 2020 2020  ", 1),..        
+0001c1b0: 2020 2020 6761 7573 7369 616e 5f70 7269      gaussian_pri
+0001c1c0: 6f72 5f6d 6561 6e3d 7061 7261 6d73 2e67  or_mean=params.g
+0001c1d0: 6574 2822 6761 7573 7369 616e 5f70 7269  et("gaussian_pri
+0001c1e0: 6f72 5f6d 6561 6e22 2c20 3029 2c0d 0a20  or_mean", 0),.. 
+0001c1f0: 2020 2020 2020 2020 2020 2077 6973 6861             wisha
+0001c200: 7274 5f70 7269 6f72 5f73 6361 6c65 3d70  rt_prior_scale=p
+0001c210: 6172 616d 732e 6765 7428 2277 6973 6861  arams.get("wisha
+0001c220: 7274 5f70 7269 6f72 5f73 6361 6c65 222c  rt_prior_scale",
+0001c230: 2031 292c 0d0a 2020 2020 2020 2020 2020   1),..          
+0001c240: 2020 7769 7368 6172 745f 646f 665f 6578    wishart_dof_ex
+0001c250: 6365 7373 3d70 6172 616d 732e 6765 7428  cess=params.get(
+0001c260: 2277 6973 6861 7274 5f64 6f66 5f65 7863  "wishart_dof_exc
+0001c270: 6573 7322 2c20 3029 2c0d 0a20 2020 2020  ess", 0),..     
+0001c280: 2020 2029 0d0a 2020 2020 2020 2020 6d6f     )..        mo
+0001c290: 6465 6c2e 6669 7428 583d 6e70 2e61 7361  del.fit(X=np.asa
+0001c2a0: 7272 6179 2878 292c 2059 3d6e 702e 6173  rray(x), Y=np.as
+0001c2b0: 6172 7261 7928 7929 290d 0a20 2020 2020  array(y))..     
+0001c2c0: 2020 2072 6574 7572 6e20 6d6f 6465 6c2e     return model.
+0001c2d0: 7061 7261 6d73 0d0a 2020 2020 656c 7365  params..    else
+0001c2e0: 3a0d 0a20 2020 2020 2020 2072 6169 7365  :..        raise
+0001c2f0: 2056 616c 7565 4572 726f 7228 226c 696e   ValueError("lin
+0001c300: 6561 7220 6d6f 6465 6c20 6e6f 7420 7265  ear model not re
+0001c310: 636f 676e 697a 6564 2229 0d0a 0d0a 0d0a  cognized")......
+0001c320: 636c 6173 7320 4261 7965 7369 616e 4d75  class BayesianMu
+0001c330: 6c74 694f 7574 7075 7452 6567 7265 7373  ltiOutputRegress
+0001c340: 696f 6e3a 0d0a 2020 2020 2222 2242 6179  ion:..    """Bay
+0001c350: 6573 6961 6e20 4c69 6e65 6172 2052 6567  esian Linear Reg
+0001c360: 7265 7373 696f 6e2c 2063 6f6e 6a75 6761  ression, conjuga
+0001c370: 7465 2070 7269 6f72 2075 7064 6174 652e  te prior update.
+0001c380: 0d0a 0d0a 2020 2020 4172 6773 3a0d 0a20  ....    Args:.. 
+0001c390: 2020 2020 2020 2067 6175 7373 6961 6e5f         gaussian_
+0001c3a0: 7072 696f 725f 6d65 616e 2028 666c 6f61  prior_mean (floa
+0001c3b0: 7429 3a20 6d65 616e 206f 6620 7072 696f  t): mean of prio
+0001c3c0: 722c 2061 2073 6d61 6c6c 2070 6f73 6974  r, a small posit
+0001c3d0: 6976 6520 7661 6c75 6520 6361 6e20 656e  ive value can en
+0001c3e0: 636f 7572 6167 6520 706f 7369 7469 7665  courage positive
+0001c3f0: 2063 6f65 6673 2077 6869 6368 206d 616b   coefs which mak
+0001c400: 6520 6265 7474 6572 2063 6f6d 706f 6e65  e better compone
+0001c410: 6e74 2070 6c6f 7473 0d0a 2020 2020 2020  nt plots..      
+0001c420: 2020 616c 7068 6120 2866 6c6f 6174 293a    alpha (float):
+0001c430: 2070 7269 6f72 2073 6361 6c65 206f 6620   prior scale of 
+0001c440: 6761 7573 7369 616e 2063 6f76 6172 6961  gaussian covaria
+0001c450: 6e63 652c 2065 6666 6563 7469 7665 6c79  nce, effectively
+0001c460: 2061 2072 6567 756c 6172 697a 6174 696f   a regularizatio
+0001c470: 6e20 7465 726d 0d0a 2020 2020 2020 2020  n term..        
+0001c480: 7769 7368 6172 745f 646f 665f 6578 6365  wishart_dof_exce
+0001c490: 7373 2028 696e 7429 3a20 4c61 7267 6572  ss (int): Larger
+0001c4a0: 2076 616c 7565 7320 6d61 6b65 2074 6865   values make the
+0001c4b0: 2070 7269 6f72 206d 6f72 6520 7065 616b   prior more peak
+0001c4c0: 6564 2061 726f 756e 6420 7468 6520 7363  ed around the sc
+0001c4d0: 616c 6520 6d61 7472 6978 2e0d 0a20 2020  ale matrix...   
+0001c4e0: 2020 2020 2077 6973 6861 7274 5f70 7269       wishart_pri
+0001c4f0: 6f72 5f73 6361 6c65 2028 666c 6f61 7429  or_scale (float)
+0001c500: 3a20 4120 6c61 7267 6572 2076 616c 7565  : A larger value
+0001c510: 206d 6561 6e73 2061 2073 6d61 6c6c 6572   means a smaller
+0001c520: 2070 7269 6f72 2076 6172 6961 6e63 6520   prior variance 
+0001c530: 6f6e 2074 6865 206e 6f69 7365 2063 6f76  on the noise cov
+0001c540: 6172 6961 6e63 652c 2077 6869 6c65 2061  ariance, while a
+0001c550: 2073 6d61 6c6c 6572 2076 616c 7565 206d   smaller value m
+0001c560: 6561 6e73 206d 6f72 6520 7072 696f 7220  eans more prior 
+0001c570: 756e 6365 7274 6169 6e74 7920 6162 6f75  uncertainty abou
+0001c580: 7420 6974 2e0d 0a20 2020 2022 2222 0d0a  t it...    """..
+0001c590: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0001c5a0: 5f5f 280d 0a20 2020 2020 2020 2073 656c  __(..        sel
+0001c5b0: 662c 0d0a 2020 2020 2020 2020 6761 7573  f,..        gaus
+0001c5c0: 7369 616e 5f70 7269 6f72 5f6d 6561 6e3d  sian_prior_mean=
+0001c5d0: 302c 0d0a 2020 2020 2020 2020 616c 7068  0,..        alph
+0001c5e0: 613d 312e 302c 0d0a 2020 2020 2020 2020  a=1.0,..        
+0001c5f0: 7769 7368 6172 745f 7072 696f 725f 7363  wishart_prior_sc
+0001c600: 616c 653d 312e 302c 0d0a 2020 2020 2020  ale=1.0,..      
+0001c610: 2020 7769 7368 6172 745f 646f 665f 6578    wishart_dof_ex
+0001c620: 6365 7373 3d30 2c0d 0a20 2020 2029 3a0d  cess=0,..    ):.
+0001c630: 0a20 2020 2020 2020 2073 656c 662e 6761  .        self.ga
+0001c640: 7573 7369 616e 5f70 7269 6f72 5f6d 6561  ussian_prior_mea
+0001c650: 6e20 3d20 6761 7573 7369 616e 5f70 7269  n = gaussian_pri
+0001c660: 6f72 5f6d 6561 6e0d 0a20 2020 2020 2020  or_mean..       
+0001c670: 2073 656c 662e 616c 7068 6120 3d20 616c   self.alpha = al
+0001c680: 7068 610d 0a20 2020 2020 2020 2073 656c  pha..        sel
+0001c690: 662e 7769 7368 6172 745f 7072 696f 725f  f.wishart_prior_
+0001c6a0: 7363 616c 6520 3d20 7769 7368 6172 745f  scale = wishart_
+0001c6b0: 7072 696f 725f 7363 616c 650d 0a20 2020  prior_scale..   
+0001c6c0: 2020 2020 2073 656c 662e 7769 7368 6172       self.wishar
+0001c6d0: 745f 646f 665f 6578 6365 7373 203d 2077  t_dof_excess = w
+0001c6e0: 6973 6861 7274 5f64 6f66 5f65 7863 6573  ishart_dof_exces
+0001c6f0: 730d 0a0d 0a20 2020 2064 6566 2066 6974  s....    def fit
+0001c700: 2873 656c 662c 2058 2c20 5929 3a0d 0a20  (self, X, Y):.. 
+0001c710: 2020 2020 2020 206e 5f73 616d 706c 6573         n_samples
+0001c720: 2c20 6e5f 6665 6174 7572 6573 203d 2058  , n_features = X
+0001c730: 2e73 6861 7065 0d0a 2020 2020 2020 2020  .shape..        
+0001c740: 6e5f 6f75 7470 7574 7320 3d20 592e 7368  n_outputs = Y.sh
+0001c750: 6170 655b 315d 0d0a 0d0a 2020 2020 2020  ape[1]....      
+0001c760: 2020 2320 5072 696f 7220 666f 7220 7468    # Prior for th
+0001c770: 6520 7265 6772 6573 7369 6f6e 2063 6f65  e regression coe
+0001c780: 6666 6963 6965 6e74 733a 2047 6175 7373  fficients: Gauss
+0001c790: 6961 6e0d 0a20 2020 2020 2020 2023 2046  ian..        # F
+0001c7a0: 6f72 2052 6964 6765 2072 6567 756c 6172  or Ridge regular
+0001c7b0: 697a 6174 696f 6e3a 2053 6574 2074 6865  ization: Set the
+0001c7c0: 2064 6961 676f 6e61 6c20 656c 656d 656e   diagonal elemen
+0001c7d0: 7473 2074 6f20 616c 7068 610d 0a20 2020  ts to alpha..   
+0001c7e0: 2020 2020 2073 656c 662e 6d5f 3020 3d20       self.m_0 = 
+0001c7f0: 280d 0a20 2020 2020 2020 2020 2020 206e  (..            n
+0001c800: 702e 7a65 726f 7328 286e 5f66 6561 7475  p.zeros((n_featu
+0001c810: 7265 732c 206e 5f6f 7574 7075 7473 2929  res, n_outputs))
+0001c820: 202b 2073 656c 662e 6761 7573 7369 616e   + self.gaussian
+0001c830: 5f70 7269 6f72 5f6d 6561 6e0d 0a20 2020  _prior_mean..   
+0001c840: 2020 2020 2029 2020 2320 5072 696f 7220       )  # Prior 
+0001c850: 6d65 616e 0d0a 2020 2020 2020 2020 7365  mean..        se
+0001c860: 6c66 2e53 5f30 203d 2073 656c 662e 616c  lf.S_0 = self.al
+0001c870: 7068 6120 2a20 6e70 2e65 7965 286e 5f66  pha * np.eye(n_f
+0001c880: 6561 7475 7265 7329 2020 2320 5072 696f  eatures)  # Prio
+0001c890: 7220 636f 7661 7269 616e 6365 0d0a 0d0a  r covariance....
+0001c8a0: 2020 2020 2020 2020 2320 5072 696f 7220          # Prior 
+0001c8b0: 666f 7220 7468 6520 7072 6563 6973 696f  for the precisio
+0001c8c0: 6e20 6d61 7472 6978 2028 696e 7665 7273  n matrix (invers
+0001c8d0: 6520 636f 7661 7269 616e 6365 293a 2057  e covariance): W
+0001c8e0: 6973 6861 7274 0d0a 2020 2020 2020 2020  ishart..        
+0001c8f0: 7365 6c66 2e6e 755f 3020 3d20 6e5f 6665  self.nu_0 = n_fe
+0001c900: 6174 7572 6573 202b 2073 656c 662e 7769  atures + self.wi
+0001c910: 7368 6172 745f 646f 665f 6578 6365 7373  shart_dof_excess
+0001c920: 2020 2320 4465 6772 6565 7320 6f66 2066    # Degrees of f
+0001c930: 7265 6564 6f6d 0d0a 2020 2020 2020 2020  reedom..        
+0001c940: 7365 6c66 2e57 5f30 5f69 6e76 203d 2073  self.W_0_inv = s
+0001c950: 656c 662e 7769 7368 6172 745f 7072 696f  elf.wishart_prio
+0001c960: 725f 7363 616c 6520 2a20 6e70 2e65 7965  r_scale * np.eye
+0001c970: 280d 0a20 2020 2020 2020 2020 2020 206e  (..            n
+0001c980: 5f6f 7574 7075 7473 0d0a 2020 2020 2020  _outputs..      
+0001c990: 2020 2920 2023 2053 6361 6c65 206d 6174    )  # Scale mat
+0001c9a0: 7269 7820 2869 6e76 6572 7365 290d 0a0d  rix (inverse)...
+0001c9b0: 0a20 2020 2020 2020 2023 2050 6f73 7465  .        # Poste
+0001c9c0: 7269 6f72 2066 6f72 2074 6865 2072 6567  rior for the reg
+0001c9d0: 7265 7373 696f 6e20 636f 6566 6669 6369  ression coeffici
+0001c9e0: 656e 7473 0d0a 2020 2020 2020 2020 535f  ents..        S_
+0001c9f0: 305f 696e 7620 3d20 6e70 2e6c 696e 616c  0_inv = np.linal
+0001ca00: 672e 696e 7628 7365 6c66 2e53 5f30 290d  g.inv(self.S_0).
+0001ca10: 0a20 2020 2020 2020 2053 5f6e 5f69 6e76  .        S_n_inv
+0001ca20: 203d 2053 5f30 5f69 6e76 202b 2058 2e54   = S_0_inv + X.T
+0001ca30: 2040 2058 0d0a 2020 2020 2020 2020 535f   @ X..        S_
+0001ca40: 6e20 3d20 6e70 2e6c 696e 616c 672e 696e  n = np.linalg.in
+0001ca50: 7628 535f 6e5f 696e 7629 0d0a 2020 2020  v(S_n_inv)..    
+0001ca60: 2020 2020 6d5f 6e20 3d20 535f 6e20 4020      m_n = S_n @ 
+0001ca70: 2853 5f30 5f69 6e76 2040 2073 656c 662e  (S_0_inv @ self.
+0001ca80: 6d5f 3020 2b20 582e 5420 4020 5929 0d0a  m_0 + X.T @ Y)..
+0001ca90: 0d0a 2020 2020 2020 2020 2320 506f 7374  ..        # Post
+0001caa0: 6572 696f 7220 666f 7220 7468 6520 7072  erior for the pr
+0001cab0: 6563 6973 696f 6e20 6d61 7472 6978 0d0a  ecision matrix..
+0001cac0: 2020 2020 2020 2020 6e75 5f6e 203d 2073          nu_n = s
+0001cad0: 656c 662e 6e75 5f30 202b 206e 5f73 616d  elf.nu_0 + n_sam
+0001cae0: 706c 6573 0d0a 2020 2020 2020 2020 575f  ples..        W_
+0001caf0: 6e5f 696e 7620 3d20 280d 0a20 2020 2020  n_inv = (..     
+0001cb00: 2020 2020 2020 2073 656c 662e 575f 305f         self.W_0_
+0001cb10: 696e 760d 0a20 2020 2020 2020 2020 2020  inv..           
+0001cb20: 202b 2059 2e54 2040 2059 0d0a 2020 2020   + Y.T @ Y..    
+0001cb30: 2020 2020 2020 2020 2b20 7365 6c66 2e6d          + self.m
+0001cb40: 5f30 2e54 2040 2053 5f30 5f69 6e76 2040  _0.T @ S_0_inv @
+0001cb50: 2073 656c 662e 6d5f 300d 0a20 2020 2020   self.m_0..     
+0001cb60: 2020 2020 2020 202d 206d 5f6e 2e54 2040         - m_n.T @
+0001cb70: 2053 5f6e 5f69 6e76 2040 206d 5f6e 0d0a   S_n_inv @ m_n..
+0001cb80: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+0001cb90: 2020 2020 2073 656c 662e 6d5f 6e20 3d20       self.m_n = 
+0001cba0: 7365 6c66 2e70 6172 616d 7320 3d20 6d5f  self.params = m_
+0001cbb0: 6e0d 0a20 2020 2020 2020 2073 656c 662e  n..        self.
+0001cbc0: 535f 6e20 3d20 535f 6e0d 0a20 2020 2020  S_n = S_n..     
+0001cbd0: 2020 2073 656c 662e 6e75 5f6e 203d 206e     self.nu_n = n
+0001cbe0: 755f 6e0d 0a20 2020 2020 2020 2073 656c  u_n..        sel
+0001cbf0: 662e 575f 6e5f 696e 7620 3d20 575f 6e5f  f.W_n_inv = W_n_
+0001cc00: 696e 760d 0a0d 0a20 2020 2064 6566 2070  inv....    def p
+0001cc10: 7265 6469 6374 2873 656c 662c 2058 2c20  redict(self, X, 
+0001cc20: 7265 7475 726e 5f73 7464 3d46 616c 7365  return_std=False
+0001cc30: 293a 0d0a 2020 2020 2020 2020 595f 7072  ):..        Y_pr
+0001cc40: 6564 203d 2058 2040 2073 656c 662e 6d5f  ed = X @ self.m_
+0001cc50: 6e0d 0a20 2020 2020 2020 2069 6620 7265  n..        if re
+0001cc60: 7475 726e 5f73 7464 3a0d 0a20 2020 2020  turn_std:..     
+0001cc70: 2020 2020 2020 2023 2041 7665 7261 6765         # Average
+0001cc80: 2070 7265 6469 6374 6976 6520 7661 7269   predictive vari
+0001cc90: 616e 6365 2066 6f72 2065 6163 6820 6f75  ance for each ou
+0001cca0: 7470 7574 2064 696d 656e 7369 6f6e 0d0a  tput dimension..
+0001ccb0: 2020 2020 2020 2020 2020 2020 595f 7661              Y_va
+0001ccc0: 7220 3d20 280d 0a20 2020 2020 2020 2020  r = (..         
+0001ccd0: 2020 2020 2020 206e 702e 6569 6e73 756d         np.einsum
+0001cce0: 2827 696a 2c6a 6b2c 696b 2d3e 6927 2c20  ('ij,jk,ik->i', 
+0001ccf0: 582c 2073 656c 662e 535f 6e2c 2058 290d  X, self.S_n, X).
+0001cd00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cd10: 202b 206e 702e 7472 6163 6528 6e70 2e6c   + np.trace(np.l
+0001cd20: 696e 616c 672e 696e 7628 7365 6c66 2e6e  inalg.inv(self.n
+0001cd30: 755f 6e20 2a20 7365 6c66 2e57 5f6e 5f69  u_n * self.W_n_i
+0001cd40: 6e76 2929 0d0a 2020 2020 2020 2020 2020  nv))..          
+0001cd50: 2020 2020 2020 2f20 7365 6c66 2e57 5f6e        / self.W_n
+0001cd60: 5f69 6e76 2e73 6861 7065 5b30 5d0d 0a20  _inv.shape[0].. 
+0001cd70: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+0001cd80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001cd90: 2059 5f70 7265 642c 206e 702e 7371 7274   Y_pred, np.sqrt
+0001cda0: 2859 5f76 6172 290d 0a20 2020 2020 2020  (Y_var)..       
+0001cdb0: 2072 6574 7572 6e20 595f 7072 6564 0d0a   return Y_pred..
+0001cdc0: 0d0a 2020 2020 6465 6620 7361 6d70 6c65  ..    def sample
+0001cdd0: 5f70 6f73 7465 7269 6f72 2873 656c 662c  _posterior(self,
+0001cde0: 206e 5f73 616d 706c 6573 3d31 293a 0d0a   n_samples=1):..
+0001cdf0: 2020 2020 2020 2020 2320 6672 6f6d 2073          # from s
+0001ce00: 6369 7079 2e73 7461 7473 2069 6d70 6f72  cipy.stats impor
+0001ce10: 7420 7769 7368 6172 740d 0a20 2020 2020  t wishart..     
+0001ce20: 2020 2023 2053 616d 706c 6520 6672 6f6d     # Sample from
+0001ce30: 2074 6865 2070 6f73 7465 7269 6f72 2064   the posterior d
+0001ce40: 6973 7472 6962 7574 696f 6e20 6f66 2074  istribution of t
+0001ce50: 6865 2063 6f65 6666 6963 6965 6e74 730d  he coefficients.
+0001ce60: 0a20 2020 2020 2020 2023 2062 6574 615f  .        # beta_
+0001ce70: 7361 6d70 6c65 7320 3d20 6e70 2e72 616e  samples = np.ran
+0001ce80: 646f 6d2e 6d75 6c74 6976 6172 6961 7465  dom.multivariate
+0001ce90: 5f6e 6f72 6d61 6c28 7365 6c66 2e6d 5f6e  _normal(self.m_n
+0001cea0: 2e72 6176 656c 2829 2c20 7365 6c66 2e53  .ravel(), self.S
+0001ceb0: 5f6e 2c20 7369 7a65 3d6e 5f73 616d 706c  _n, size=n_sampl
+0001cec0: 6573 290d 0a20 2020 2020 2020 2023 2053  es)..        # S
+0001ced0: 616d 706c 6520 6672 6f6d 2074 6865 2070  ample from the p
+0001cee0: 6f73 7465 7269 6f72 2064 6973 7472 6962  osterior distrib
+0001cef0: 7574 696f 6e20 6f66 2074 6865 2070 7265  ution of the pre
+0001cf00: 6369 7369 6f6e 206d 6174 7269 780d 0a20  cision matrix.. 
+0001cf10: 2020 2020 2020 2023 2070 7265 6369 7369         # precisi
+0001cf20: 6f6e 5f73 616d 706c 6573 203d 2077 6973  on_samples = wis
+0001cf30: 6861 7274 2864 663d 7365 6c66 2e6e 755f  hart(df=self.nu_
+0001cf40: 6e2c 2073 6361 6c65 3d6e 702e 6c69 6e61  n, scale=np.lina
+0001cf50: 6c67 2e69 6e76 2873 656c 662e 575f 6e5f  lg.inv(self.W_n_
+0001cf60: 696e 7629 292e 7276 7328 6e5f 7361 6d70  inv)).rvs(n_samp
+0001cf70: 6c65 7329 0d0a 2020 2020 2020 2020 2320  les)..        # 
+0001cf80: 7265 7475 726e 2062 6574 615f 7361 6d70  return beta_samp
+0001cf90: 6c65 732c 2070 7265 6369 7369 6f6e 5f73  les, precision_s
+0001cfa0: 616d 706c 6573 0d0a 0d0a 2020 2020 2020  amples....      
+0001cfb0: 2020 7361 6d70 6c65 645f 7765 6967 6874    sampled_weight
+0001cfc0: 7320 3d20 6e70 2e7a 6572 6f73 2828 6e5f  s = np.zeros((n_
+0001cfd0: 7361 6d70 6c65 732c 2073 656c 662e 6d5f  samples, self.m_
+0001cfe0: 6e2e 7368 6170 655b 305d 2c20 7365 6c66  n.shape[0], self
+0001cff0: 2e6d 5f6e 2e73 6861 7065 5b31 5d29 290d  .m_n.shape[1])).
+0001d000: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+0001d010: 6e20 7261 6e67 6528 7365 6c66 2e6d 5f6e  n range(self.m_n
+0001d020: 2e73 6861 7065 5b31 5d29 3a0d 0a20 2020  .shape[1]):..   
+0001d030: 2020 2020 2020 2020 2073 616d 706c 6564           sampled
+0001d040: 5f77 6569 6768 7473 5b3a 2c20 3a2c 2069  _weights[:, :, i
+0001d050: 5d20 3d20 6e70 2e72 616e 646f 6d2e 6d75  ] = np.random.mu
+0001d060: 6c74 6976 6172 6961 7465 5f6e 6f72 6d61  ltivariate_norma
+0001d070: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+0001d080: 2020 2020 7365 6c66 2e6d 5f6e 5b3a 2c20      self.m_n[:, 
+0001d090: 695d 2c20 7365 6c66 2e53 5f6e 2c20 6e5f  i], self.S_n, n_
+0001d0a0: 7361 6d70 6c65 730d 0a20 2020 2020 2020  samples..       
+0001d0b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0001d0c0: 7265 7475 726e 2073 616d 706c 6564 5f77  return sampled_w
+0001d0d0: 6569 6768 7473 0d0a 0d0a 0d0a 2320 5365  eights......# Se
+0001d0e0: 6173 6f6e 616c 6974 6965 730d 0a23 2069  asonalities..# i
+0001d0f0: 6e74 6572 6163 7469 6f6e 2065 6666 6563  nteraction effec
+0001d100: 7420 6f6e 6c79 206f 6e20 6669 7273 7420  t only on first 
+0001d110: 7477 6f20 7365 6173 6f6e 616c 6974 6965  two seasonalitie
+0001d120: 7320 6966 206f 7264 6572 206d 6174 6368  s if order match
+0001d130: 6573 0d0a 0d0a 2320 4361 7465 676f 7269  es....# Categori
+0001d140: 6361 6c20 4665 6174 7572 6573 0d0a 2320  cal Features..# 
+0001d150: 286d 756c 7469 7661 7269 6174 6520 7375  (multivariate su
+0001d160: 6d6d 6172 6965 7320 6279 2067 726f 7570  mmaries by group
+0001d170: 290d 0a0d 0a23 2070 6173 7420 696d 7061  )....# past impa
+0001d180: 6374 7320 286f 7074 696f 6e20 746f 206e  cts (option to n
+0001d190: 6f74 2065 6e66 6f72 6365 2c20 6f6e 6c79  ot enforce, only
+0001d1a0: 2073 686f 7729 0d0a 0d0a 2320 7768 6174   show)....# what
+0001d1b0: 2069 7320 7374 696c 6c20 6e65 6564 6564   is still needed
+0001d1c0: 3a0d 0a23 2062 6179 6573 6961 6e20 6c69  :..# bayesian li
+0001d1d0: 6e65 6172 206d 6f64 656c 206f 7074 696f  near model optio
+0001d1e0: 6e73 0d0a 2320 6d6f 7265 206d 756c 7469  ns..# more multi
+0001d1f0: 7661 7269 6174 6520 7375 6d6d 6172 6965  variate summarie
+0001d200: 730d 0a23 2061 6464 2061 6e6f 6d61 6c79  s..# add anomaly
+0001d210: 2063 6c61 7373 6966 6965 7220 746f 2066   classifier to f
+0001d220: 6f72 6563 6173 740d 0a23 2072 6566 696e  orecast..# refin
+0001d230: 6520 7472 616e 7366 6f72 6d61 7469 6f6e  e transformation
+0001d240: 7320 616e 6420 6d6f 6465 6c73 2067 656e  s and models gen
+0001d250: 6572 6174 6564 2062 7920 6765 745f 6e65  erated by get_ne
+0001d260: 775f 7061 7261 6d73 0d0a 2320 7265 7765  w_params..# rewe
+0001d270: 6967 6874 2073 6f20 6c6f 6f70 2069 7320  ight so loop is 
+0001d280: 6e6f 7420 7265 7175 6972 6564 2073 6f20  not required so 
+0001d290: 6f66 7465 6e0d 0a23 2074 6573 7420 616e  often..# test an
+0001d2a0: 6420 6275 6720 6669 7820 6576 6572 7974  d bug fix everyt
+0001d2b0: 6869 6e67 0d0a 2320 6c31 5f6e 6f72 6d20  hing..# l1_norm 
+0001d2c0: 6973 6e27 7420 776f 726b 696e 670d 0a23  isn't working..#
+0001d2d0: 2075 6e69 7474 6573 7473 0d0a 0d0a 2320   unittests....# 
+0001d2e0: 636f 756c 6420 646f 2070 6172 7469 616c  could do partial
+0001d2f0: 2070 6f6f 6c69 6e67 2062 7920 6d69 6e69   pooling by mini
+0001d300: 6d69 7a69 6e67 2061 2066 756e 6374 696f  mizing a functio
+0001d310: 6e20 7468 6174 206d 6978 6573 2073 6861  n that mixes sha
+0001d320: 7265 6420 616e 6420 756e 7368 6172 6564  red and unshared
+0001d330: 2063 6f65 6666 6963 6965 6e74 7320 286d   coefficients (m
+0001d340: 756c 7469 706c 6963 6174 6976 6529 0d0a  ultiplicative)..
+0001d350: 0d0a 2320 7365 6172 6368 2073 7061 6365  ..# search space
+0001d360: 3a0d 0a23 2066 6173 7420 6f6e 206c 7374  :..# fast on lst
+0001d370: 7371 7320 6d6f 6465 6c0d 0a23 2066 756c  sqs model..# ful
+0001d380: 6c20 7365 6172 6368 206f 6620 7072 6564  l search of pred
+0001d390: 6566 696e 6564 206f 7074 696f 6e73 0d0a  efined options..
+0001d3a0: 2320 7363 6970 7920 6d69 6e69 6d69 7a65  # scipy minimize
+0001d3b0: 2066 6f72 2063 6f6e 7469 6e75 6f75 7320   for continuous 
+0001d3c0: 7061 7261 6d73 2c20 6f72 206d 6179 6265  params, or maybe
+0001d3d0: 2069 6e74 2870 6172 616d 2920 666f 7220   int(param) for 
+0001d3e0: 6469 7363 7265 7465 2074 6f6f 0d0a 2320  discrete too..# 
+0001d3f0: 6d69 6e69 6d69 7a65 2077 6f72 6b69 6e67  minimize working
+0001d400: 2066 6f72 2072 6f6c 6c69 6e67 2077 696e   for rolling win
+0001d410: 646f 7720 7369 7a65 2062 7574 206e 6f74  dow size but not
+0001d420: 2066 6f72 2073 6561 736f 6e61 6c69 7479   for seasonality
+0001d430: 2028 6163 7475 616c 6c79 2070 726f 6261   (actually proba
+0001d440: 626c 7920 7769 6e64 6f77 2069 7320 6f76  bly window is ov
+0001d450: 6572 6669 7429 0d0a 2320 646f 2069 7420  erfit)..# do it 
+0001d460: 7374 6570 7769 7365 3a0d 0a23 2066 6972  stepwise:..# fir
+0001d470: 7374 2066 6974 2073 6561 736f 6e61 6c69  st fit seasonali
+0001d480: 7479 2028 7769 7468 2066 6c61 6720 7265  ty (with flag re
+0001d490: 6772 6573 736f 7273 2062 7574 206e 6f74  gressors but not
+0001d4a0: 206f 7468 6572 7329 0d0a 2320 7365 636f   others)..# seco
+0001d4b0: 6e64 6c79 2073 6361 6c65 7273 2061 6e64  ndly scalers and
+0001d4c0: 2070 7265 7072 6f63 6573 7369 6e67 2041   preprocessing A
+0001d4d0: 4e44 2061 6e6f 6d61 6c79 2064 6574 6563  ND anomaly detec
+0001d4e0: 7469 6f6e 2041 4e44 2068 6f6c 6964 6179  tion AND holiday
+0001d4f0: 2064 6574 6563 7469 6f6e 0d0a 2320 706f   detection..# po
+0001d500: 7373 6962 6c79 2061 6464 2033 7264 2073  ssibly add 3rd s
+0001d510: 6561 736f 6e61 6c69 7479 2061 6674 6572  easonality after
+0001d520: 2070 7265 7072 6f63 6573 7369 6e67 0d0a   preprocessing..
+0001d530: 2320 7468 6972 646c 7920 726f 6c6c 696e  # thirdly rollin
+0001d540: 6720 7769 6e64 6f77 2073 697a 6520 2869  g window size (i
+0001d550: 6e63 6c75 6465 2072 6f6c 6c69 6e67 2077  nclude rolling w
+0001d560: 696e 646f 7720 696e 2069 6e69 7469 616c  indow in initial
+0001d570: 2058 2061 6674 6572 2074 6869 7329 0d0a   X after this)..
+0001d580: 2320 7468 656e 2074 6573 7420 7573 6572  # then test user
+0001d590: 2072 6567 7265 7373 6f72 2061 6e64 2070   regressor and p
+0001d5a0: 7265 7072 6f63 6573 7369 6e67 0d0a 2320  reprocessing..# 
+0001d5b0: 7468 656e 2074 6573 7420 4152 206c 6167  then test AR lag
+0001d5c0: 7320 2864 6f6e 2774 2075 7365 2069 6620  s (don't use if 
+0001d5d0: 2520 6761 696e 2069 7320 3c20 7820 2529  % gain is < x %)
+0001d5e0: 0d0a 2320 6f72 206d 6179 6265 2075 7365  ..# or maybe use
+0001d5f0: 2061 2072 756e 7469 6d65 2077 6569 6768   a runtime weigh
+0001d600: 7469 6e67 0d0a 2320 7468 656e 206d 756c  ting..# then mul
+0001d610: 7469 7661 7269 6174 6520 7375 6d6d 6172  tivariate summar
+0001d620: 6965 730d 0a23 2046 494e 414c 4c59 2063  ies..# FINALLY c
+0001d630: 6f76 6172 6961 7465 206c 6167 7320 2866  ovariate lags (f
+0001d640: 6561 7475 7265 2073 656c 6563 7469 6f6e  eature selection
+0001d650: 2064 6566 696e 6974 656c 7920 6e65 6564   definitely need
+0001d660: 6564 290d 0a0d 0a0d 0a69 6620 4661 6c73  ed)......if Fals
+0001d670: 653a 0d0a 2020 2020 2320 7465 7374 2068  e:..    # test h
+0001d680: 6f6c 6964 6179 2063 6f75 6e74 7269 6573  oliday countries
+0001d690: 2c20 7265 6772 6573 736f 7273 2c20 696d  , regressors, im
+0001d6a0: 7061 6374 730d 0a20 2020 2066 726f 6d20  pacts..    from 
+0001d6b0: 6175 746f 7473 2069 6d70 6f72 7420 6c6f  autots import lo
+0001d6c0: 6164 5f64 6169 6c79 0d0a 2020 2020 696d  ad_daily..    im
+0001d6d0: 706f 7274 206d 6174 706c 6f74 6c69 622e  port matplotlib.
+0001d6e0: 7079 706c 6f74 2061 7320 706c 740d 0a0d  pyplot as plt...
+0001d6f0: 0a20 2020 2063 6174 6567 6f72 6963 616c  .    categorical
+0001d700: 5f67 726f 7570 7320 3d20 7b0d 0a20 2020  _groups = {..   
+0001d710: 2020 2020 2022 7769 6b69 5f55 6e69 7465       "wiki_Unite
+0001d720: 645f 5374 6174 6573 223a 2027 636f 756e  d_States": 'coun
+0001d730: 7472 7927 2c0d 0a20 2020 2020 2020 2022  try',..        "
+0001d740: 7769 6b69 5f47 6572 6d61 6e79 223a 2027  wiki_Germany": '
+0001d750: 636f 756e 7472 7927 2c0d 0a20 2020 2020  country',..     
+0001d760: 2020 2022 7769 6b69 5f4a 6573 7573 223a     "wiki_Jesus":
+0001d770: 2027 686f 6c69 6461 7927 2c0d 0a20 2020   'holiday',..   
+0001d780: 2020 2020 2022 7769 6b69 5f4d 6963 6861       "wiki_Micha
+0001d790: 656c 5f4a 6163 6b73 6f6e 223a 2027 7065  el_Jackson": 'pe
+0001d7a0: 7273 6f6e 272c 0d0a 2020 2020 2020 2020  rson',..        
+0001d7b0: 2277 696b 695f 4561 7374 6572 223a 2027  "wiki_Easter": '
+0001d7c0: 686f 6c69 6461 7927 2c0d 0a20 2020 2020  holiday',..     
+0001d7d0: 2020 2022 7769 6b69 5f43 6872 6973 746d     "wiki_Christm
+0001d7e0: 6173 223a 2027 686f 6c69 6461 7927 2c0d  as": 'holiday',.
+0001d7f0: 0a20 2020 2020 2020 2022 7769 6b69 5f43  .        "wiki_C
+0001d800: 6869 6e65 7365 5f4e 6577 5f59 6561 7222  hinese_New_Year"
+0001d810: 3a20 2768 6f6c 6964 6179 272c 0d0a 2020  : 'holiday',..  
+0001d820: 2020 2020 2020 2277 696b 695f 5468 616e        "wiki_Than
+0001d830: 6b73 6769 7669 6e67 223a 2027 686f 6c69  ksgiving": 'holi
+0001d840: 6461 7927 2c0d 0a20 2020 2020 2020 2022  day',..        "
+0001d850: 7769 6b69 5f45 6c69 7a61 6265 7468 5f49  wiki_Elizabeth_I
+0001d860: 4922 3a20 2770 6572 736f 6e27 2c0d 0a20  I": 'person',.. 
+0001d870: 2020 2020 2020 2022 7769 6b69 5f57 696c         "wiki_Wil
+0001d880: 6c69 616d 5f53 6861 6b65 7370 6561 7265  liam_Shakespeare
+0001d890: 223a 2027 7065 7273 6f6e 272c 0d0a 2020  ": 'person',..  
+0001d8a0: 2020 2020 2020 2277 696b 695f 4765 6f72        "wiki_Geor
+0001d8b0: 6765 5f57 6173 6869 6e67 746f 6e22 3a20  ge_Washington": 
+0001d8c0: 2770 6572 736f 6e27 2c0d 0a20 2020 2020  'person',..     
+0001d8d0: 2020 2022 7769 6b69 5f43 6c65 6f70 6174     "wiki_Cleopat
+0001d8e0: 7261 223a 2027 7065 7273 6f6e 272c 0d0a  ra": 'person',..
+0001d8f0: 2020 2020 7d0d 0a20 2020 2068 6f6c 6964      }..    holid
+0001d900: 6179 5f63 6f75 6e74 7269 6573 203d 207b  ay_countries = {
+0001d910: 0d0a 2020 2020 2020 2020 2777 696b 695f  ..        'wiki_
+0001d920: 456c 697a 6162 6574 685f 4949 273a 2027  Elizabeth_II': '
+0001d930: 756b 272c 0d0a 2020 2020 2020 2020 2777  uk',..        'w
+0001d940: 696b 695f 556e 6974 6564 5f53 7461 7465  iki_United_State
+0001d950: 7327 3a20 2775 7327 2c0d 0a20 2020 2020  s': 'us',..     
+0001d960: 2020 2027 7769 6b69 5f47 6572 6d61 6e79     'wiki_Germany
+0001d970: 273a 2027 6465 272c 0d0a 2020 2020 7d0d  ': 'de',..    }.
+0001d980: 0a20 2020 2064 665f 6461 696c 7920 3d20  .    df_daily = 
+0001d990: 6c6f 6164 5f64 6169 6c79 286c 6f6e 673d  load_daily(long=
+0001d9a0: 4661 6c73 6529 0d0a 2020 2020 2320 6164  False)..    # ad
+0001d9b0: 6420 6e61 6e0d 0a20 2020 2064 665f 6461  d nan..    df_da
+0001d9c0: 696c 792e 696c 6f63 5b31 3030 2c20 3a5d  ily.iloc[100, :]
+0001d9d0: 203d 206e 702e 6e61 6e0d 0a20 2020 2066   = np.nan..    f
+0001d9e0: 6f72 6563 6173 745f 6c65 6e67 7468 203d  orecast_length =
+0001d9f0: 2031 3830 0d0a 2020 2020 696e 636c 7564   180..    includ
+0001da00: 655f 6869 7374 6f72 7920 3d20 5472 7565  e_history = True
+0001da10: 0d0a 2020 2020 6466 5f74 7261 696e 203d  ..    df_train =
+0001da20: 2064 665f 6461 696c 795b 3a2d 666f 7265   df_daily[:-fore
+0001da30: 6361 7374 5f6c 656e 6774 685d 2e69 6c6f  cast_length].ilo
+0001da40: 635b 3a2c 2031 3a5d 0d0a 2020 2020 6466  c[:, 1:]..    df
+0001da50: 5f74 6573 7420 3d20 6466 5f64 6169 6c79  _test = df_daily
+0001da60: 5b2d 666f 7265 6361 7374 5f6c 656e 6774  [-forecast_lengt
+0001da70: 683a 5d2e 696c 6f63 5b3a 2c20 313a 5d0d  h:].iloc[:, 1:].
+0001da80: 0a20 2020 2066 616b 655f 7265 6772 203d  .    fake_regr =
+0001da90: 2064 665f 6461 696c 795b 3a2d 666f 7265   df_daily[:-fore
+0001daa0: 6361 7374 5f6c 656e 6774 685d 2e69 6c6f  cast_length].ilo
+0001dab0: 635b 3a2c 2030 3a31 5d0d 0a20 2020 2066  c[:, 0:1]..    f
+0001dac0: 616b 655f 7265 6772 5f66 6373 7420 3d20  ake_regr_fcst = 
+0001dad0: 280d 0a20 2020 2020 2020 2064 665f 6461  (..        df_da
+0001dae0: 696c 792e 696c 6f63 5b3a 2c20 303a 315d  ily.iloc[:, 0:1]
+0001daf0: 0d0a 2020 2020 2020 2020 6966 2069 6e63  ..        if inc
+0001db00: 6c75 6465 5f68 6973 746f 7279 0d0a 2020  lude_history..  
+0001db10: 2020 2020 2020 656c 7365 2064 665f 6461        else df_da
+0001db20: 696c 795b 2d66 6f72 6563 6173 745f 6c65  ily[-forecast_le
+0001db30: 6e67 7468 3a5d 2e69 6c6f 635b 3a2c 2030  ngth:].iloc[:, 0
+0001db40: 3a31 5d0d 0a20 2020 2029 0d0a 2020 2020  :1]..    )..    
+0001db50: 666c 6167 5f72 6567 7265 7373 6f72 203d  flag_regressor =
+0001db60: 2070 642e 4461 7461 4672 616d 6528 312c   pd.DataFrame(1,
+0001db70: 2069 6e64 6578 3d66 616b 655f 7265 6772   index=fake_regr
+0001db80: 2e69 6e64 6578 2c20 636f 6c75 6d6e 733d  .index, columns=
+0001db90: 5b22 666c 6167 5f74 6573 7422 5d29 0d0a  ["flag_test"])..
+0001dba0: 2020 2020 666c 6167 5f72 6567 7265 7373      flag_regress
+0001dbb0: 6f72 5f66 6373 7420 3d20 7064 2e44 6174  or_fcst = pd.Dat
+0001dbc0: 6146 7261 6d65 280d 0a20 2020 2020 2020  aFrame(..       
+0001dbd0: 2031 2c20 696e 6465 783d 6661 6b65 5f72   1, index=fake_r
+0001dbe0: 6567 725f 6663 7374 2e69 6e64 6578 2c20  egr_fcst.index, 
+0001dbf0: 636f 6c75 6d6e 733d 5b22 666c 6167 5f74  columns=["flag_t
+0001dc00: 6573 7422 5d0d 0a20 2020 2029 0d0a 2020  est"]..    )..  
+0001dc10: 2020 7265 6772 5f70 6572 5f73 6572 6965    regr_per_serie
+0001dc20: 7320 3d20 7b0d 0a20 2020 2020 2020 2073  s = {..        s
+0001dc30: 7472 2864 665f 7472 6169 6e2e 636f 6c75  tr(df_train.colu
+0001dc40: 6d6e 735b 305d 293a 2070 642e 4461 7461  mns[0]): pd.Data
+0001dc50: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
+0001dc60: 2020 2020 6e70 2e72 616e 646f 6d2e 6e6f      np.random.no
+0001dc70: 726d 616c 2873 697a 653d 286c 656e 2864  rmal(size=(len(d
+0001dc80: 665f 7472 6169 6e29 2c20 3129 292c 2069  f_train), 1)), i
+0001dc90: 6e64 6578 3d64 665f 7472 6169 6e2e 696e  ndex=df_train.in
+0001dca0: 6465 780d 0a20 2020 2020 2020 2029 0d0a  dex..        )..
+0001dcb0: 2020 2020 7d0d 0a20 2020 2072 6567 725f      }..    regr_
+0001dcc0: 7065 725f 7365 7269 6573 5f66 6373 7420  per_series_fcst 
+0001dcd0: 3d20 7b0d 0a20 2020 2020 2020 2073 7472  = {..        str
+0001dce0: 2864 665f 7472 6169 6e2e 636f 6c75 6d6e  (df_train.column
+0001dcf0: 735b 305d 293a 2070 642e 4461 7461 4672  s[0]): pd.DataFr
+0001dd00: 616d 6528 0d0a 2020 2020 2020 2020 2020  ame(..          
+0001dd10: 2020 6e70 2e72 616e 646f 6d2e 6e6f 726d    np.random.norm
+0001dd20: 616c 2873 697a 653d 2866 6f72 6563 6173  al(size=(forecas
+0001dd30: 745f 6c65 6e67 7468 2c20 3129 292c 2069  t_length, 1)), i
+0001dd40: 6e64 6578 3d64 665f 7465 7374 2e69 6e64  ndex=df_test.ind
+0001dd50: 6578 0d0a 2020 2020 2020 2020 290d 0a20  ex..        ).. 
+0001dd60: 2020 207d 0d0a 2020 2020 636f 6e73 7472     }..    constr
+0001dd70: 6169 6e74 203d 207b 0d0a 2020 2020 2020  aint = {..      
+0001dd80: 2020 2763 6f6e 7374 7261 696e 745f 6d65    'constraint_me
+0001dd90: 7468 6f64 273a 2027 7175 616e 7469 6c65  thod': 'quantile
+0001dda0: 272c 0d0a 2020 2020 2020 2020 276c 6f77  ',..        'low
+0001ddb0: 6572 5f63 6f6e 7374 7261 696e 7427 3a20  er_constraint': 
+0001ddc0: 302c 0d0a 2020 2020 2020 2020 2775 7070  0,..        'upp
+0001ddd0: 6572 5f63 6f6e 7374 7261 696e 7427 3a20  er_constraint': 
+0001dde0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2022  None,..        "
+0001ddf0: 626f 756e 6473 223a 2054 7275 652c 0d0a  bounds": True,..
+0001de00: 2020 2020 7d0d 0a20 2020 2070 6173 745f      }..    past_
+0001de10: 696d 7061 6374 7320 3d20 7064 2e44 6174  impacts = pd.Dat
+0001de20: 6146 7261 6d65 2830 2c20 696e 6465 783d  aFrame(0, index=
+0001de30: 6466 5f74 7261 696e 2e69 6e64 6578 2c20  df_train.index, 
+0001de40: 636f 6c75 6d6e 733d 6466 5f74 7261 696e  columns=df_train
+0001de50: 2e63 6f6c 756d 6e73 290d 0a20 2020 2070  .columns)..    p
+0001de60: 6173 745f 696d 7061 6374 732e 696c 6f63  ast_impacts.iloc
+0001de70: 5b2d 3130 3a2c 2030 5d20 3d20 6e70 2e67  [-10:, 0] = np.g
+0001de80: 656f 6d73 7061 6365 2831 2c20 3130 295b  eomspace(1, 10)[
+0001de90: 303a 3130 5d20 2f20 3130 300d 0a20 2020  0:10] / 100..   
+0001dea0: 2070 6173 745f 696d 7061 6374 732e 696c   past_impacts.il
+0001deb0: 6f63 5b2d 3330 3a2c 202d 315d 203d 206e  oc[-30:, -1] = n
+0001dec0: 702e 6c69 6e73 7061 6365 2831 2c20 3130  p.linspace(1, 10
+0001ded0: 295b 303a 3330 5d20 2f20 2d31 3030 0d0a  )[0:30] / -100..
+0001dee0: 2020 2020 7061 7374 5f69 6d70 6163 7473      past_impacts
+0001def0: 5f66 756c 6c20 3d20 7064 2e44 6174 6146  _full = pd.DataF
+0001df00: 7261 6d65 2830 2c20 696e 6465 783d 6466  rame(0, index=df
+0001df10: 5f64 6169 6c79 2e69 6e64 6578 2c20 636f  _daily.index, co
+0001df20: 6c75 6d6e 733d 6466 5f64 6169 6c79 2e63  lumns=df_daily.c
+0001df30: 6f6c 756d 6e73 290d 0a20 2020 2066 7574  olumns)..    fut
+0001df40: 7572 655f 696d 7061 6374 7320 3d20 7064  ure_impacts = pd
+0001df50: 2e44 6174 6146 7261 6d65 2830 2c20 696e  .DataFrame(0, in
+0001df60: 6465 783d 6466 5f74 6573 742e 696e 6465  dex=df_test.inde
+0001df70: 782c 2063 6f6c 756d 6e73 3d64 665f 7465  x, columns=df_te
+0001df80: 7374 2e63 6f6c 756d 6e73 290d 0a20 2020  st.columns)..   
+0001df90: 2066 7574 7572 655f 696d 7061 6374 732e   future_impacts.
+0001dfa0: 696c 6f63 5b30 3a31 302c 2030 5d20 3d20  iloc[0:10, 0] = 
+0001dfb0: 286e 702e 6c69 6e73 7061 6365 2831 2c20  (np.linspace(1, 
+0001dfc0: 3130 295b 303a 3130 5d20 2b20 3130 2920  10)[0:10] + 10) 
+0001dfd0: 2f20 3130 300d 0a0d 0a20 2020 2063 5f70  / 100....    c_p
+0001dfe0: 6172 616d 7320 3d20 4361 7373 616e 6472  arams = Cassandr
+0001dff0: 6128 292e 6765 745f 6e65 775f 7061 7261  a().get_new_para
+0001e000: 6d73 2829 0d0a 2020 2020 635f 7061 7261  ms()..    c_para
+0001e010: 6d73 5b27 7265 6772 6573 736f 7273 5f75  ms['regressors_u
+0001e020: 7365 6427 5d20 3d20 4661 6c73 650d 0a0d  sed'] = False...
+0001e030: 0a20 2020 206d 6f64 203d 2043 6173 7361  .    mod = Cassa
+0001e040: 6e64 7261 280d 0a20 2020 2020 2020 206e  ndra(..        n
+0001e050: 5f6a 6f62 733d 312c 0d0a 2020 2020 2020  _jobs=1,..      
+0001e060: 2020 2a2a 635f 7061 7261 6d73 2c0d 0a20    **c_params,.. 
+0001e070: 2020 2020 2020 2063 6f6e 7374 7261 696e         constrain
+0001e080: 743d 636f 6e73 7472 6169 6e74 2c0d 0a20  t=constraint,.. 
+0001e090: 2020 2020 2020 2068 6f6c 6964 6179 5f63         holiday_c
+0001e0a0: 6f75 6e74 7269 6573 3d68 6f6c 6964 6179  ountries=holiday
+0001e0b0: 5f63 6f75 6e74 7269 6573 2c0d 0a20 2020  _countries,..   
+0001e0c0: 2020 2020 206d 6178 5f6d 756c 7469 636f       max_multico
+0001e0d0: 6c69 6e65 6172 6974 793d 302e 3030 3031  linearity=0.0001
+0001e0e0: 2c0d 0a20 2020 2029 0d0a 2020 2020 6d6f  ,..    )..    mo
+0001e0f0: 642e 6669 7428 0d0a 2020 2020 2020 2020  d.fit(..        
+0001e100: 6466 5f74 7261 696e 2c0d 0a20 2020 2020  df_train,..     
+0001e110: 2020 2063 6174 6567 6f72 6963 616c 5f67     categorical_g
+0001e120: 726f 7570 733d 6361 7465 676f 7269 6361  roups=categorica
+0001e130: 6c5f 6772 6f75 7073 2c0d 0a20 2020 2020  l_groups,..     
+0001e140: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
+0001e150: 736f 723d 6661 6b65 5f72 6567 722c 0d0a  sor=fake_regr,..
+0001e160: 2020 2020 2020 2020 7265 6772 6573 736f          regresso
+0001e170: 725f 7065 725f 7365 7269 6573 3d72 6567  r_per_series=reg
+0001e180: 725f 7065 725f 7365 7269 6573 2c0d 0a20  r_per_series,.. 
+0001e190: 2020 2020 2020 2023 2070 6173 745f 696d         # past_im
+0001e1a0: 7061 6374 733d 7061 7374 5f69 6d70 6163  pacts=past_impac
+0001e1b0: 7473 2c0d 0a20 2020 2020 2020 2066 6c61  ts,..        fla
+0001e1c0: 675f 7265 6772 6573 736f 7273 3d66 6c61  g_regressors=fla
+0001e1d0: 675f 7265 6772 6573 736f 722c 0d0a 2020  g_regressor,..  
+0001e1e0: 2020 290d 0a20 2020 2070 7265 6420 3d20    )..    pred = 
+0001e1f0: 6d6f 642e 7072 6564 6963 7428 0d0a 2020  mod.predict(..  
+0001e200: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
+0001e210: 656e 6774 683d 666f 7265 6361 7374 5f6c  ength=forecast_l
+0001e220: 656e 6774 682c 0d0a 2020 2020 2020 2020  ength,..        
+0001e230: 696e 636c 7564 655f 6869 7374 6f72 793d  include_history=
+0001e240: 696e 636c 7564 655f 6869 7374 6f72 792c  include_history,
+0001e250: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
+0001e260: 5f72 6567 7265 7373 6f72 3d66 616b 655f  _regressor=fake_
+0001e270: 7265 6772 5f66 6373 742c 0d0a 2020 2020  regr_fcst,..    
+0001e280: 2020 2020 7265 6772 6573 736f 725f 7065      regressor_pe
+0001e290: 725f 7365 7269 6573 3d72 6567 725f 7065  r_series=regr_pe
+0001e2a0: 725f 7365 7269 6573 5f66 6373 742c 0d0a  r_series_fcst,..
+0001e2b0: 2020 2020 2020 2020 6675 7475 7265 5f69          future_i
+0001e2c0: 6d70 6163 7473 3d66 7574 7572 655f 696d  mpacts=future_im
+0001e2d0: 7061 6374 732c 0d0a 2020 2020 2020 2020  pacts,..        
+0001e2e0: 666c 6167 5f72 6567 7265 7373 6f72 733d  flag_regressors=
+0001e2f0: 666c 6167 5f72 6567 7265 7373 6f72 5f66  flag_regressor_f
+0001e300: 6373 742c 0d0a 2020 2020 2020 2020 696e  cst,..        in
+0001e310: 636c 7564 655f 6f72 6761 6e69 633d 5472  clude_organic=Tr
+0001e320: 7565 2c0d 0a20 2020 2029 0d0a 2020 2020  ue,..    )..    
+0001e330: 7265 7375 6c74 203d 2070 7265 642e 666f  result = pred.fo
+0001e340: 7265 6361 7374 0d0a 2020 2020 7365 7269  recast..    seri
+0001e350: 6573 203d 2072 616e 646f 6d2e 6368 6f69  es = random.choi
+0001e360: 6365 286d 6f64 2e63 6f6c 756d 6e5f 6e61  ce(mod.column_na
+0001e370: 6d65 7329 0d0a 2020 2020 2320 7365 7269  mes)..    # seri
+0001e380: 6573 203d 2022 7769 6b69 5f50 6572 696f  es = "wiki_Perio
+0001e390: 6469 635f 7461 626c 6522 0d0a 2020 2020  dic_table"..    
+0001e3a0: 7365 7269 6573 203d 2027 7769 6b69 5f61  series = 'wiki_a
+0001e3b0: 6c6c 270d 0a20 2020 206d 6f64 2e72 6567  ll'..    mod.reg
+0001e3c0: 7265 7373 6f72 735f 7573 6564 0d0a 2020  ressors_used..  
+0001e3d0: 2020 6d6f 642e 686f 6c69 6461 795f 636f    mod.holiday_co
+0001e3e0: 756e 7472 6965 735f 7573 6564 0d0a 2020  untries_used..  
+0001e3f0: 2020 7769 7468 2070 6c74 2e73 7479 6c65    with plt.style
+0001e400: 2e63 6f6e 7465 7874 2822 7365 6162 6f72  .context("seabor
+0001e410: 6e2d 7768 6974 6522 293a 0d0a 2020 2020  n-white"):..    
+0001e420: 2020 2020 7374 6172 745f 6461 7465 203d      start_date =
+0001e430: 2022 6175 746f 220d 0a20 2020 2020 2020   "auto"..       
+0001e440: 206d 6f64 2e70 6c6f 745f 666f 7265 6361   mod.plot_foreca
+0001e450: 7374 280d 0a20 2020 2020 2020 2020 2020  st(..           
+0001e460: 2070 7265 642c 0d0a 2020 2020 2020 2020   pred,..        
+0001e470: 2020 2020 6163 7475 616c 733d 6466 5f64      actuals=df_d
+0001e480: 6169 6c79 2069 6620 696e 636c 7564 655f  aily if include_
+0001e490: 6869 7374 6f72 7920 656c 7365 2064 665f  history else df_
+0001e4a0: 7465 7374 2c0d 0a20 2020 2020 2020 2020  test,..         
+0001e4b0: 2020 2073 6572 6965 733d 7365 7269 6573     series=series
+0001e4c0: 2c0d 0a20 2020 2020 2020 2020 2020 2073  ,..            s
+0001e4d0: 7461 7274 5f64 6174 653d 7374 6172 745f  tart_date=start_
+0001e4e0: 6461 7465 2c0d 0a20 2020 2020 2020 2029  date,..        )
+0001e4f0: 0d0a 0d0a 2020 2020 2020 2020 2320 706c  ....        # pl
+0001e500: 742e 7368 6f77 2829 0d0a 2020 2020 2020  t.show()..      
+0001e510: 2020 2320 706c 742e 7361 7665 6669 6728    # plt.savefig(
+0001e520: 2243 6173 7361 6e64 7261 5f66 6f72 6563  "Cassandra_forec
+0001e530: 6173 742e 706e 6722 2c20 6470 693d 3330  ast.png", dpi=30
+0001e540: 3029 0d0a 2020 2020 2020 2020 2320 6d6f  0)..        # mo
+0001e550: 642e 706c 6f74 5f63 6f6d 706f 6e65 6e74  d.plot_component
+0001e560: 7328 7072 6564 2c20 7365 7269 6573 3d73  s(pred, series=s
+0001e570: 6572 6965 732c 2074 6f5f 6f72 6967 696e  eries, to_origin
+0001e580: 5f73 7061 6365 3d46 616c 7365 290d 0a20  _space=False).. 
+0001e590: 2020 2020 2020 2023 2070 6c74 2e73 686f         # plt.sho
+0001e5a0: 7728 290d 0a20 2020 2020 2020 206d 6f64  w()..        mod
+0001e5b0: 2e70 6c6f 745f 636f 6d70 6f6e 656e 7473  .plot_components
+0001e5c0: 280d 0a20 2020 2020 2020 2020 2020 2070  (..            p
+0001e5d0: 7265 642c 2073 6572 6965 733d 7365 7269  red, series=seri
+0001e5e0: 6573 2c20 746f 5f6f 7269 6769 6e5f 7370  es, to_origin_sp
+0001e5f0: 6163 653d 5472 7565 2c20 7374 6172 745f  ace=True, start_
+0001e600: 6461 7465 3d73 7461 7274 5f64 6174 650d  date=start_date.
+0001e610: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
+0001e620: 2020 2020 2320 706c 742e 7361 7665 6669      # plt.savefi
+0001e630: 6728 2243 6173 7361 6e64 7261 5f63 6f6d  g("Cassandra_com
+0001e640: 706f 6e65 6e74 7333 2e70 6e67 222c 2064  ponents3.png", d
+0001e650: 7069 3d33 3030 2c20 6262 6f78 5f69 6e63  pi=300, bbox_inc
+0001e660: 6865 733d 2274 6967 6874 2229 0d0a 2020  hes="tight")..  
+0001e670: 2020 2020 2020 706c 742e 7368 6f77 2829        plt.show()
+0001e680: 0d0a 2020 2020 2020 2020 6d6f 642e 706c  ..        mod.pl
+0001e690: 6f74 5f74 7265 6e64 280d 0a20 2020 2020  ot_trend(..     
+0001e6a0: 2020 2020 2020 2073 6572 6965 733d 7365         series=se
+0001e6b0: 7269 6573 2c20 766c 696e 653d 7265 7375  ries, vline=resu
+0001e6c0: 6c74 2e69 6e64 6578 5b2d 666f 7265 6361  lt.index[-foreca
+0001e6d0: 7374 5f6c 656e 6774 685d 2c20 7374 6172  st_length], star
+0001e6e0: 745f 6461 7465 3d73 7461 7274 5f64 6174  t_date=start_dat
+0001e6f0: 650d 0a20 2020 2020 2020 2029 0d0a 2020  e..        )..  
+0001e700: 2020 2020 2020 2320 706c 742e 7361 7665        # plt.save
+0001e710: 6669 6728 2243 6173 7361 6e64 7261 5f74  fig("Cassandra_t
+0001e720: 7265 6e64 2e70 6e67 222c 2064 7069 3d33  rend.png", dpi=3
+0001e730: 3030 2c20 6262 6f78 5f69 6e63 6865 733d  00, bbox_inches=
+0001e740: 2274 6967 6874 2229 0d0a 2020 2020 7072  "tight")..    pr
+0001e750: 6564 2e65 7661 6c75 6174 6528 0d0a 2020  ed.evaluate(..  
+0001e760: 2020 2020 2020 6466 5f64 6169 6c79 2e72        df_daily.r
+0001e770: 6569 6e64 6578 2872 6573 756c 742e 696e  eindex(result.in
+0001e780: 6465 7829 5b64 665f 7472 6169 6e2e 636f  dex)[df_train.co
+0001e790: 6c75 6d6e 735d 0d0a 2020 2020 2020 2020  lumns]..        
+0001e7a0: 6966 2069 6e63 6c75 6465 5f68 6973 746f  if include_histo
+0001e7b0: 7279 0d0a 2020 2020 2020 2020 656c 7365  ry..        else
+0001e7c0: 2064 665f 7465 7374 5b64 665f 7472 6169   df_test[df_trai
+0001e7d0: 6e2e 636f 6c75 6d6e 735d 0d0a 2020 2020  n.columns]..    
+0001e7e0: 290d 0a20 2020 2070 7269 6e74 2870 7265  )..    print(pre
+0001e7f0: 642e 6176 675f 6d65 7472 6963 732e 726f  d.avg_metrics.ro
+0001e800: 756e 6428 3129 290d 0a0d 0a20 2020 2023  und(1))....    #
+0001e810: 2069 6620 6e6f 7420 6d6f 642e 7265 6772   if not mod.regr
+0001e820: 6573 736f 7273 5f75 7365 643a 0d0a 2020  essors_used:..  
+0001e830: 2020 6461 7465 7320 3d20 6466 5f64 6169    dates = df_dai
+0001e840: 6c79 2e69 6e64 6578 2e75 6e69 6f6e 280d  ly.index.union(.
+0001e850: 0a20 2020 2020 2020 206d 6f64 2e63 7265  .        mod.cre
+0001e860: 6174 655f 666f 7265 6361 7374 5f69 6e64  ate_forecast_ind
+0001e870: 6578 2866 6f72 6563 6173 745f 6c65 6e67  ex(forecast_leng
+0001e880: 7468 2c20 6c61 7374 5f64 6174 653d 6466  th, last_date=df
+0001e890: 5f64 6169 6c79 2e69 6e64 6578 5b2d 315d  _daily.index[-1]
+0001e8a0: 290d 0a20 2020 2029 0d0a 2020 2020 7265  )..    )..    re
+0001e8b0: 6772 5f70 7320 3d20 7b0d 0a20 2020 2020  gr_ps = {..     
+0001e8c0: 2020 2027 7769 6b69 5f47 6572 6d61 6e79     'wiki_Germany
+0001e8d0: 273a 2072 6567 725f 7065 725f 7365 7269  ': regr_per_seri
+0001e8e0: 6573 5f66 6373 745b 2777 696b 695f 4765  es_fcst['wiki_Ge
+0001e8f0: 726d 616e 7927 5d2e 7265 696e 6465 7828  rmany'].reindex(
+0001e900: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+0001e910: 7465 732c 2066 696c 6c5f 7661 6c75 653d  tes, fill_value=
+0001e920: 300d 0a20 2020 2020 2020 2029 0d0a 2020  0..        )..  
+0001e930: 2020 7d0d 0a20 2020 2023 204e 4f54 2050    }..    # NOT P
+0001e940: 4153 5349 4e47 2050 524f 5045 5220 5245  ASSING PROPER RE
+0001e950: 4752 4553 534f 5253 2048 4552 4520 287a  GRESSORS HERE (z
+0001e960: 6572 6f20 6669 6c6c 2920 534f 204d 4159  ero fill) SO MAY
+0001e970: 204c 4f4f 4b20 4f46 4620 4946 2052 4547   LOOK OFF IF REG
+0001e980: 5245 5353 4f52 535f 5553 4544 0d0a 2020  RESSORS_USED..  
+0001e990: 2020 7072 6564 3220 3d20 6d6f 642e 7072    pred2 = mod.pr
+0001e9a0: 6564 6963 7428 0d0a 2020 2020 2020 2020  edict(..        
+0001e9b0: 666f 7265 6361 7374 5f6c 656e 6774 683d  forecast_length=
+0001e9c0: 666f 7265 6361 7374 5f6c 656e 6774 682c  forecast_length,
+0001e9d0: 0d0a 2020 2020 2020 2020 696e 636c 7564  ..        includ
+0001e9e0: 655f 6869 7374 6f72 793d 5472 7565 2c0d  e_history=True,.
+0001e9f0: 0a20 2020 2020 2020 206e 6577 5f64 663d  .        new_df=
+0001ea00: 6466 5f64 6169 6c79 5b64 665f 7472 6169  df_daily[df_trai
+0001ea10: 6e2e 636f 6c75 6d6e 735d 2c0d 0a20 2020  n.columns],..   
+0001ea20: 2020 2020 2066 6c61 675f 7265 6772 6573       flag_regres
+0001ea30: 736f 7273 3d66 6c61 675f 7265 6772 6573  sors=flag_regres
+0001ea40: 736f 725f 6663 7374 2e72 6569 6e64 6578  sor_fcst.reindex
+0001ea50: 2864 6174 6573 2c20 6669 6c6c 5f76 616c  (dates, fill_val
+0001ea60: 7565 3d30 292c 0d0a 2020 2020 2020 2020  ue=0),..        
+0001ea70: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
+0001ea80: 3d66 616b 655f 7265 6772 5f66 6373 742e  =fake_regr_fcst.
+0001ea90: 7265 696e 6465 7828 6461 7465 732c 2066  reindex(dates, f
+0001eaa0: 696c 6c5f 7661 6c75 653d 3029 2c0d 0a20  ill_value=0),.. 
+0001eab0: 2020 2020 2020 2072 6567 7265 7373 6f72         regressor
+0001eac0: 5f70 6572 5f73 6572 6965 733d 7265 6772  _per_series=regr
+0001ead0: 5f70 732c 0d0a 2020 2020 2020 2020 7061  _ps,..        pa
+0001eae0: 7374 5f69 6d70 6163 7473 3d70 6173 745f  st_impacts=past_
+0001eaf0: 696d 7061 6374 735f 6675 6c6c 5b64 665f  impacts_full[df_
+0001eb00: 7472 6169 6e2e 636f 6c75 6d6e 735d 2c0d  train.columns],.
+0001eb10: 0a20 2020 2029 0d0a 2020 2020 6d6f 642e  .    )..    mod.
+0001eb20: 706c 6f74 5f66 6f72 6563 6173 7428 7072  plot_forecast(pr
+0001eb30: 6564 322c 2061 6374 7561 6c73 3d64 665f  ed2, actuals=df_
+0001eb40: 6461 696c 792c 2073 6572 6965 733d 7365  daily, series=se
+0001eb50: 7269 6573 2c20 7374 6172 745f 6461 7465  ries, start_date
+0001eb60: 3d73 7461 7274 5f64 6174 6529 0d0a 2020  =start_date)..  
+0001eb70: 2020 6d6f 642e 7265 7475 726e 5f63 6f6d    mod.return_com
+0001eb80: 706f 6e65 6e74 7328 290d 0a20 2020 2023  ponents()..    #
+0001eb90: 2061 6e64 2074 7279 2072 6574 7261 696e   and try retrain
+0001eba0: 696e 6720 6261 636b 2077 6974 6820 7368  ing back with sh
+0001ebb0: 6f72 7465 7220 6461 7461 7365 7420 616e  orter dataset an
+0001ebc0: 6420 7365 6520 6966 2069 7420 6d61 7463  d see if it matc
+0001ebd0: 6865 7320 7072 696f 720d 0a20 2020 206d  hes prior..    m
+0001ebe0: 6f64 2e66 6974 5f64 6174 6128 6466 5f74  od.fit_data(df_t
+0001ebf0: 7261 696e 2c20 7061 7374 5f69 6d70 6163  rain, past_impac
+0001ec00: 7473 3d70 6173 745f 696d 7061 6374 735b  ts=past_impacts[
+0001ec10: 6466 5f74 7261 696e 2e63 6f6c 756d 6e73  df_train.columns
+0001ec20: 5d29 0d0a 2020 2020 7072 6564 3320 3d20  ])..    pred3 = 
+0001ec30: 6d6f 642e 7072 6564 6963 7428 0d0a 2020  mod.predict(..  
+0001ec40: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
+0001ec50: 656e 6774 683d 666f 7265 6361 7374 5f6c  ength=forecast_l
+0001ec60: 656e 6774 682c 0d0a 2020 2020 2020 2020  ength,..        
+0001ec70: 696e 636c 7564 655f 6869 7374 6f72 793d  include_history=
+0001ec80: 5472 7565 2c0d 0a20 2020 2020 2020 2066  True,..        f
+0001ec90: 6c61 675f 7265 6772 6573 736f 7273 3d66  lag_regressors=f
+0001eca0: 6c61 675f 7265 6772 6573 736f 725f 6663  lag_regressor_fc
+0001ecb0: 7374 2e72 6569 6e64 6578 2864 665f 6461  st.reindex(df_da
+0001ecc0: 696c 792e 696e 6465 782c 2066 696c 6c5f  ily.index, fill_
+0001ecd0: 7661 6c75 653d 3029 2c0d 0a20 2020 2020  value=0),..     
+0001ece0: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
+0001ecf0: 736f 723d 6661 6b65 5f72 6567 725f 6663  sor=fake_regr_fc
+0001ed00: 7374 2e72 6569 6e64 6578 2864 665f 6461  st.reindex(df_da
+0001ed10: 696c 792e 696e 6465 782c 2066 696c 6c5f  ily.index, fill_
+0001ed20: 7661 6c75 653d 3029 2c0d 0a20 2020 2020  value=0),..     
+0001ed30: 2020 2072 6567 7265 7373 6f72 5f70 6572     regressor_per
+0001ed40: 5f73 6572 6965 733d 7265 6772 5f70 732c  _series=regr_ps,
+0001ed50: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
+0001ed60: 5f69 6d70 6163 7473 3d66 7574 7572 655f  _impacts=future_
+0001ed70: 696d 7061 6374 732c 0d0a 2020 2020 290d  impacts,..    ).
+0001ed80: 0a20 2020 206d 6f64 2e70 6c6f 745f 666f  .    mod.plot_fo
+0001ed90: 7265 6361 7374 280d 0a20 2020 2020 2020  recast(..       
+0001eda0: 2070 7265 6433 2c0d 0a20 2020 2020 2020   pred3,..       
+0001edb0: 2061 6374 7561 6c73 3d64 665f 6461 696c   actuals=df_dail
+0001edc0: 7920 6966 2069 6e63 6c75 6465 5f68 6973  y if include_his
+0001edd0: 746f 7279 2065 6c73 6520 6466 5f74 6573  tory else df_tes
+0001ede0: 742c 0d0a 2020 2020 2020 2020 7365 7269  t,..        seri
+0001edf0: 6573 3d73 6572 6965 732c 0d0a 2020 2020  es=series,..    
+0001ee00: 2020 2020 7374 6172 745f 6461 7465 3d73      start_date=s
+0001ee10: 7461 7274 5f64 6174 652c 0d0a 2020 2020  tart_date,..    
+0001ee20: 290d 0a0d 0a20 2020 2070 7269 6e74 2863  )....    print(c
+0001ee30: 5f70 6172 616d 735b 2774 7265 6e64 5f6d  _params['trend_m
+0001ee40: 6f64 656c 275d 290d 0a0d 0a23 204b 6e6f  odel'])....# Kno
+0001ee50: 776e 2061 6e64 2050 6f73 7369 626c 6520  wn and Possible 
+0001ee60: 4953 5355 4553 3a0d 0a23 204d 756c 7469  ISSUES:..# Multi
+0001ee70: 7661 7269 6174 6520 6665 6174 7572 6520  variate feature 
+0001ee80: 776f 726b 696e 6720 6f72 206e 6f74 3f0d  working or not?.
+0001ee90: 0a23 206d 756c 7469 706c 6963 6174 6976  .# multiplicativ
+0001eea0: 6520 7365 6173 6f6e 616c 6974 790d 0a0d  e seasonality...
+0001eeb0: 0a0d 0a23 2041 7574 6f6d 6174 696f 6e0d  ...# Automation.
+0001eec0: 0a23 2061 6c6c 6f77 2073 6f6d 6520 636f  .# allow some co
+0001eed0: 6e66 6967 2069 6e70 7574 732c 206f 7220  nfig inputs, or 
+0001eee0: 6175 746f 6d61 7465 6420 6669 740d 0a23  automated fit..#
+0001eef0: 206f 7574 7075 7420 746f 2074 6162 6c65   output to table
+0001ef00: 0d0a 2320 636f 6d70 6172 6520 636f 6566  ..# compare coef
+0001ef10: 6669 6369 656e 7473 2063 6861 6e67 6520  ficients change 
+0001ef20: 6f76 6572 2074 696d 652c 2061 6363 7572  over time, accur
+0001ef30: 6163 7920 6f76 6572 2074 696d 650d 0a23  acy over time..#
+0001ef40: 2063 6f6d 7061 7269 6e67 2064 6966 6665   comparing diffe
+0001ef50: 7265 6e74 2073 6f75 7263 6573 3f20 616e  rent sources? an
+0001ef60: 642f 6f72 2061 6c6c 6f77 696e 6720 6f6e  d/or allowing on
+0001ef70: 6520 666f 7265 6361 7374 2074 6f20 6265  e forecast to be
+0001ef80: 2075 7365 6420 6173 2061 2072 6567 7265   used as a regre
+0001ef90: 7373 6f72 2066 6f72 2061 6e6f 7468 6572  ssor for another
+0001efa0: 0d0a 2320 776f 756c 6420 616c 6c6f 7720  ..# would allow 
+0001efb0: 666f 7220 6561 726c 6965 7220 6465 7465  for earlier dete
+0001efc0: 6374 696f 6e20 6f66 2062 726f 6b65 6e20  ction of broken 
+0001efd0: 636f 6e6e 6563 7469 6f6e 730d 0a0d 0a22  connections...."
+0001efe0: 2222 0d0a 6178 203d 2070 7265 642e 706c  ""..ax = pred.pl
+0001eff0: 6f74 2864 665f 6461 696c 7920 6966 2069  ot(df_daily if i
+0001f000: 6e63 6c75 6465 5f68 6973 746f 7279 2065  nclude_history e
+0001f010: 6c73 6520 6466 5f74 6573 742c 2073 6572  lse df_test, ser
+0001f020: 6965 733d 7365 7269 6573 2c20 766c 696e  ies=series, vlin
+0001f030: 653d 6466 5f74 6573 742e 696e 6465 785b  e=df_test.index[
+0001f040: 305d 2c20 7374 6172 745f 6461 7465 3d73  0], start_date=s
+0001f050: 7461 7274 5f64 6174 6529 0d0a 6861 6e64  tart_date)..hand
+0001f060: 6c65 732c 206c 6162 656c 7320 3d20 6178  les, labels = ax
+0001f070: 2e67 6574 5f6c 6567 656e 645f 6861 6e64  .get_legend_hand
+0001f080: 6c65 735f 6c61 6265 6c73 2829 0d0a 6966  les_labels()..if
+0001f090: 206d 6f64 2e61 6e6f 6d61 6c79 5f64 6574   mod.anomaly_det
+0001f0a0: 6563 746f 723a 0d0a 2020 2020 6966 206d  ector:..    if m
+0001f0b0: 6f64 2e61 6e6f 6d61 6c79 5f64 6574 6563  od.anomaly_detec
+0001f0c0: 746f 722e 6f75 7470 7574 203d 3d20 2275  tor.output == "u
+0001f0d0: 6e69 7661 7269 6174 6522 3a0d 0a20 2020  nivariate":..   
+0001f0e0: 2020 2020 2069 5f61 6e6f 6d20 3d20 6d6f       i_anom = mo
+0001f0f0: 642e 616e 6f6d 616c 795f 6465 7465 6374  d.anomaly_detect
+0001f100: 6f72 2e61 6e6f 6d61 6c69 6573 2e69 6e64  or.anomalies.ind
+0001f110: 6578 5b6d 6f64 2e61 6e6f 6d61 6c79 5f64  ex[mod.anomaly_d
+0001f120: 6574 6563 746f 722e 616e 6f6d 616c 6965  etector.anomalie
+0001f130: 732e 696c 6f63 5b3a 2c20 305d 203d 3d20  s.iloc[:, 0] == 
+0001f140: 2d31 5d0d 0a20 2020 2065 6c73 653a 0d0a  -1]..    else:..
+0001f150: 2020 2020 2020 2020 7365 7269 6573 5f61          series_a
+0001f160: 6e6f 6d20 3d20 6d6f 642e 616e 6f6d 616c  nom = mod.anomal
+0001f170: 795f 6465 7465 6374 6f72 2e61 6e6f 6d61  y_detector.anoma
+0001f180: 6c69 6573 5b73 6572 6965 735d 0d0a 2020  lies[series]..  
+0001f190: 2020 2020 2020 695f 616e 6f6d 203d 2073        i_anom = s
+0001f1a0: 6572 6965 735f 616e 6f6d 5b73 6572 6965  eries_anom[serie
+0001f1b0: 735f 616e 6f6d 203d 3d20 2d31 5d2e 696e  s_anom == -1].in
+0001f1c0: 6465 780d 0a20 2020 2020 2020 2069 5f61  dex..        i_a
+0001f1d0: 6e6f 6d20 3d20 695f 616e 6f6d 5b69 5f61  nom = i_anom[i_a
+0001f1e0: 6e6f 6d20 3e3d 2073 7461 7274 5f64 6174  nom >= start_dat
+0001f1f0: 655d 0d0a 2020 2020 6966 206c 656e 2869  e]..    if len(i
+0001f200: 5f61 6e6f 6d29 203e 2030 2061 6e64 206c  _anom) > 0 and l
+0001f210: 656e 2869 5f61 6e6f 6d29 203c 206c 656e  en(i_anom) < len
+0001f220: 2864 665f 6461 696c 7929 202a 2030 2e35  (df_daily) * 0.5
+0001f230: 3a0d 0a20 2020 2020 2020 2073 6361 7431  :..        scat1
+0001f240: 203d 2061 782e 7363 6174 7465 7228 695f   = ax.scatter(i_
+0001f250: 616e 6f6d 2e74 6f6c 6973 7428 292c 2064  anom.tolist(), d
+0001f260: 665f 6461 696c 792e 6c6f 635b 695f 616e  f_daily.loc[i_an
+0001f270: 6f6d 2c20 3a5d 5b73 6572 6965 735d 2c20  om, :][series], 
+0001f280: 633d 2264 6172 6b73 6c61 7465 626c 7565  c="darkslateblue
+0001f290: 222c 2073 3d31 322e 3029 0d0a 2020 2020  ", s=12.0)..    
+0001f2a0: 2020 2020 6861 6e64 6c65 7320 2b3d 205b      handles += [
+0001f2b0: 7363 6174 315d 0d0a 2020 2020 2020 2020  scat1]..        
+0001f2c0: 6c61 6265 6c73 202b 3d20 5b22 616e 6f6d  labels += ["anom
+0001f2d0: 616c 6965 7322 5d0d 0a69 6620 6d6f 642e  alies"]..if mod.
+0001f2e0: 686f 6c69 6461 795f 6465 7465 6374 6f72  holiday_detector
+0001f2f0: 3a0d 0a20 2020 2069 5f61 6e6f 6d20 3d20  :..    i_anom = 
+0001f300: 6d6f 642e 686f 6c69 6461 795f 6465 7465  mod.holiday_dete
+0001f310: 6374 6f72 2e64 6174 6573 5f74 6f5f 686f  ctor.dates_to_ho
+0001f320: 6c69 6461 7973 286d 6f64 2e64 662e 696e  lidays(mod.df.in
+0001f330: 6465 782c 2073 7479 6c65 3d22 7365 7269  dex, style="seri
+0001f340: 6573 5f66 6c61 6722 295b 7365 7269 6573  es_flag")[series
+0001f350: 5d0d 0a20 2020 2069 5f61 6e6f 6d20 3d20  ]..    i_anom = 
+0001f360: 695f 616e 6f6d 2e69 6e64 6578 5b69 5f61  i_anom.index[i_a
+0001f370: 6e6f 6d20 3d3d 2031 5d0d 0a20 2020 2069  nom == 1]..    i
+0001f380: 6620 6c65 6e28 695f 616e 6f6d 2920 3e20  f len(i_anom) > 
+0001f390: 3020 616e 6420 6c65 6e28 695f 616e 6f6d  0 and len(i_anom
+0001f3a0: 2920 3c20 6c65 6e28 6466 5f64 6169 6c79  ) < len(df_daily
+0001f3b0: 2920 2a20 302e 353a 0d0a 2020 2020 2020  ) * 0.5:..      
+0001f3c0: 2020 7363 6174 3220 3d20 6178 2e73 6361    scat2 = ax.sca
+0001f3d0: 7474 6572 2869 5f61 6e6f 6d2e 746f 6c69  tter(i_anom.toli
+0001f3e0: 7374 2829 2c20 6466 5f64 6169 6c79 2e6c  st(), df_daily.l
+0001f3f0: 6f63 5b69 5f61 6e6f 6d2c 203a 5d5b 7365  oc[i_anom, :][se
+0001f400: 7269 6573 5d2c 2063 3d22 6461 726b 6772  ries], c="darkgr
+0001f410: 6565 6e22 2c20 733d 3132 2e30 290d 0a20  een", s=12.0).. 
+0001f420: 2020 2020 2020 2068 616e 646c 6573 202b         handles +
+0001f430: 3d20 5b73 6361 7432 5d0d 0a20 2020 2020  = [scat2]..     
+0001f440: 2020 206c 6162 656c 7320 2b3d 205b 2264     labels += ["d
+0001f450: 6574 6563 7465 6420 686f 6c69 6461 7973  etected holidays
+0001f460: 225d 0d0a 6966 206d 6f64 2e74 7265 6e64  "]..if mod.trend
+0001f470: 5f61 6e6f 6d61 6c79 5f64 6574 6563 746f  _anomaly_detecto
+0001f480: 7220 6973 206e 6f74 204e 6f6e 653a 0d0a  r is not None:..
+0001f490: 2020 2020 6966 206d 6f64 2e74 7265 6e64      if mod.trend
+0001f4a0: 5f61 6e6f 6d61 6c79 5f64 6574 6563 746f  _anomaly_detecto
+0001f4b0: 722e 6f75 7470 7574 203d 3d20 2275 6e69  r.output == "uni
+0001f4c0: 7661 7269 6174 6522 3a0d 0a20 2020 2020  variate":..     
+0001f4d0: 2020 2069 5f61 6e6f 6d20 3d20 6d6f 642e     i_anom = mod.
+0001f4e0: 7472 656e 645f 616e 6f6d 616c 795f 6465  trend_anomaly_de
+0001f4f0: 7465 6374 6f72 2e61 6e6f 6d61 6c69 6573  tector.anomalies
+0001f500: 2e69 6e64 6578 5b6d 6f64 2e61 6e6f 6d61  .index[mod.anoma
+0001f510: 6c79 5f64 6574 6563 746f 722e 616e 6f6d  ly_detector.anom
+0001f520: 616c 6965 732e 696c 6f63 5b3a 2c20 305d  alies.iloc[:, 0]
+0001f530: 203d 3d20 2d31 5d0d 0a20 2020 2065 6c73   == -1]..    els
+0001f540: 653a 0d0a 2020 2020 2020 2020 7365 7269  e:..        seri
+0001f550: 6573 5f61 6e6f 6d20 3d20 6d6f 642e 7472  es_anom = mod.tr
+0001f560: 656e 645f 616e 6f6d 616c 795f 6465 7465  end_anomaly_dete
+0001f570: 6374 6f72 2e61 6e6f 6d61 6c69 6573 5b73  ctor.anomalies[s
+0001f580: 6572 6965 735d 0d0a 2020 2020 2020 2020  eries]..        
+0001f590: 695f 616e 6f6d 203d 2073 6572 6965 735f  i_anom = series_
+0001f5a0: 616e 6f6d 5b73 6572 6965 735f 616e 6f6d  anom[series_anom
+0001f5b0: 203d 3d20 2d31 5d2e 696e 6465 780d 0a20   == -1].index.. 
+0001f5c0: 2020 2069 6620 7374 6172 745f 6461 7465     if start_date
+0001f5d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+0001f5e0: 2020 2020 2020 2069 5f61 6e6f 6d20 3d20         i_anom = 
+0001f5f0: 695f 616e 6f6d 5b69 5f61 6e6f 6d20 3e3d  i_anom[i_anom >=
+0001f600: 2073 7461 7274 5f64 6174 655d 0d0a 2020   start_date]..  
+0001f610: 2020 6966 206c 656e 2869 5f61 6e6f 6d29    if len(i_anom)
+0001f620: 203e 2030 2061 6e64 206c 656e 2869 5f61   > 0 and len(i_a
+0001f630: 6e6f 6d29 203c 206c 656e 2864 665f 6461  nom) < len(df_da
+0001f640: 696c 7929 202a 2030 2e35 3a0d 0a20 2020  ily) * 0.5:..   
+0001f650: 2020 2020 2073 6361 7433 203d 2061 782e       scat3 = ax.
+0001f660: 7363 6174 7465 7228 695f 616e 6f6d 2e74  scatter(i_anom.t
+0001f670: 6f6c 6973 7428 292c 2064 665f 6461 696c  olist(), df_dail
+0001f680: 792e 6c6f 635b 695f 616e 6f6d 5d5b 7365  y.loc[i_anom][se
+0001f690: 7269 6573 5d2c 2063 3d22 736c 6174 6567  ries], c="slateg
+0001f6a0: 7261 7922 2c20 733d 3132 2e30 290d 0a20  ray", s=12.0).. 
+0001f6b0: 2020 2020 2020 2068 616e 646c 6573 202b         handles +
+0001f6c0: 3d20 5b73 6361 7433 5d0d 0a20 2020 2020  = [scat3]..     
+0001f6d0: 2020 206c 6162 656c 7320 2b3d 205b 2274     labels += ["t
+0001f6e0: 7265 6e64 2061 6e6f 6d61 6c69 6573 225d  rend anomalies"]
+0001f6f0: 0d0a 6178 2e6c 6567 656e 6428 6861 6e64  ..ax.legend(hand
+0001f700: 6c65 732c 206c 6162 656c 7329 0d0a 2222  les, labels)..""
+0001f710: 220d 0a                                  "..
```

### Comparing `autots-0.6.8/autots/models/dnn.py` & `autots-0.6.9/autots/models/dnn.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/ensemble.py` & `autots-0.6.9/autots/models/ensemble.py`

 * *Files 0% similar despite different names*

```diff
@@ -396,14 +396,16 @@
     Returns:
         dict.
 
     """
     if classifier_params is None:
         # found using FLAML
         classifier_params = {"model": 'KNN', "model_params": {'n_neighbors': 5}}
+        # newer, but don't like as much
+        # RandomForest {'n_estimators': 69, 'max_features': 0.5418860350847585, 'max_leaves': 439, 'criterion': 'gini'}
 
     # known = {'EXUSEU': 'xx1', 'MCOILWTICO': 'xx2', 'CSUSHPISA': 'xx3'}
     Xt, Y, Xf = horizontal_xy(df_train, known)
 
     clf = retrieve_classifier(
         regression_model=classifier_params,
         verbose=0,
@@ -469,14 +471,24 @@
             "model_params": {
                 'n_estimators': 169,
                 'max_features': 0.25736,
                 'max_leaf_nodes': 126,
                 'criterion': 'gini',
             },
         }
+        # slightly newer, on a mosaic-weighted-0-40
+        classifier_params = {
+            "model": 'ExtraTrees',
+            "model_params": {
+                'n_estimators': 62,
+                'max_features': 0.181116,
+                'max_leaves': 261,
+                'criterion': 'entropy',
+            },
+        }
 
     X, Xf, Y, to_predict = mosaic_xy(df_train, known)
 
     clf = retrieve_classifier(
         regression_model=classifier_params,
         verbose=0,
         verbose_bool=False,
```

### Comparing `autots-0.6.8/autots/models/gluonts.py` & `autots-0.6.9/autots/models/gluonts.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/greykite.py` & `autots-0.6.9/autots/models/greykite.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/matrix_var.py` & `autots-0.6.9/autots/models/matrix_var.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/mlensemble.py` & `autots-0.6.9/autots/models/mlensemble.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/model_list.py` & `autots-0.6.9/autots/models/model_list.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/neural_forecast.py` & `autots-0.6.9/autots/models/neural_forecast.py`

 * *Files 11% similar despite different names*

```diff
@@ -64,27 +64,32 @@
         self.learning_rate = learning_rate
         self.early_stop_patience_steps = early_stop_patience_steps
         self.activation = activation
         self.scaler_type = scaler_type
         self.model_args = model_args
         self.forecast_length = forecast_length
         self.df_train = None
+        self.static_regressor = None
 
-    def fit(self, df, future_regressor=None):
+    def fit(self, df, future_regressor=None, static_regressor=None):
         """Train algorithm given data supplied.
 
         Args:
             df (pandas.DataFrame): Datetime Indexed
         """
         self.basic_profile(df)
-        if self.regression_type in ["User", "user"]:
+        static_cols = None
+        if self.regression_type in ["User", "user", True]:
             if future_regressor is None:
                 raise ValueError(
                     "regression_type='User' but no future_regressor passed"
                 )
+            self.static_regressor = static_regressor
+            if isinstance(self.static_regressor, pd.DataFrame):
+                static_cols = static_regressor.columns.tolist()
 
         from neuralforecast import NeuralForecast
         from neuralforecast.losses.pytorch import (
             SMAPE,
             MQLoss,
             DistributionLoss,
             MAE,
@@ -177,16 +182,17 @@
             'scaler_type': self.scaler_type,
             # trying to suppress the stupid file logging lightning does
             "logger": False,
             "log_every_n_steps": 0,
         }
         models = self.model
         model_args = self.model_args
-        if self.regression_type in ['User', 'user']:
+        if self.regression_type in ['User', 'user', True]:
             self.base_args["futr_exog_list"] = future_regressor.columns.tolist()
+            self.base_args['stat_exog_list'] = static_cols
 
         if isinstance(models, list):
             # User inputs classes directly
             pass
         elif models == 'LSTM':
             models = [LSTM(**{**self.base_args, **model_args})]
         elif models == "NHITS":
@@ -207,28 +213,35 @@
             raise ValueError(f"models not recognized: {models}")
 
         # model params
         # requires pandas >= 1.5
         silly_format = df.reset_index(names='ds').melt(
             id_vars='ds', value_name='y', var_name='unique_id'
         )
-        if self.regression_type in ['User', 'user']:
+        if self.regression_type in ['User', 'user', True]:
             silly_format = silly_format.merge(
                 future_regressor, left_on='ds', right_index=True
             )
         self.nf = NeuralForecast(models=models, freq=freq)
-        self.nf.fit(df=silly_format)
+        if self.static_regressor is None:
+            self.nf.fit(df=silly_format)
+        else:
+            another_silly_format = self.static_regressor
+            another_silly_format.index.name = "unique_id"
+            self.nf.fit(
+                df=silly_format, static_df=another_silly_format.reset_index(drop=False)
+            )
         self.fit_runtime = datetime.datetime.now() - self.startTime
         return self
 
     def predict(
         self, forecast_length=None, future_regressor=None, just_point_forecast=False
     ):
         predictStartTime = datetime.datetime.now()
-        if self.regression_type in ['User', 'user']:
+        if self.regression_type in ['User', 'user', True]:
             index = self.create_forecast_index(forecast_length=self.forecast_length)
             futr_df = pd.concat(
                 [
                     pd.Series(col, index=index, name='unique_id')
                     for col in self.column_names
                 ]
             )
```

### Comparing `autots-0.6.8/autots/models/prophet.py` & `autots-0.6.9/autots/models/prophet.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/pytorch.py` & `autots-0.6.9/autots/models/pytorch.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/sklearn.py` & `autots-0.6.9/autots/models/sklearn.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,10112 +1,10333 @@
 00000000: 2222 220d 0a53 6b6c 6561 726e 2064 6570  """..Sklearn dep
 00000010: 656e 6465 6e74 206d 6f64 656c 730d 0a0d  endent models...
 00000020: 0a44 6563 6973 696f 6e20 5472 6565 2c20  .Decision Tree, 
 00000030: 456c 6173 7469 6320 4e65 742c 2020 5261  Elastic Net,  Ra
 00000040: 6e64 6f6d 2046 6f72 6573 742c 204d 4c50  ndom Forest, MLP
 00000050: 5265 6772 6573 736f 722c 204b 4e4e 2c20  Regressor, KNN, 
 00000060: 4164 6162 6f6f 7374 0d0a 2222 220d 0a69  Adaboost.."""..i
-00000070: 6d70 6f72 7420 6461 7465 7469 6d65 0d0a  mport datetime..
-00000080: 696d 706f 7274 2072 616e 646f 6d0d 0a69  import random..i
-00000090: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
-000000a0: 700d 0a69 6d70 6f72 7420 7061 6e64 6173  p..import pandas
-000000b0: 2061 7320 7064 0d0a 0d0a 2320 6265 6361   as pd....# beca
-000000c0: 7573 6520 7468 6973 2061 7474 656d 7074  use this attempt
-000000d0: 7320 746f 206d 616b 6520 736b 6c65 6172  s to make sklear
-000000e0: 6e20 6f70 7469 6f6e 616c 2066 6f72 206f  n optional for o
-000000f0: 7665 7261 6c6c 2075 7361 6765 0d0a 7472  verall usage..tr
-00000100: 793a 0d0a 2020 2020 6672 6f6d 2073 6b6c  y:..    from skl
-00000110: 6561 726e 2069 6d70 6f72 7420 636f 6e66  earn import conf
-00000120: 6967 5f63 6f6e 7465 7874 0d0a 2020 2020  ig_context..    
-00000130: 6672 6f6d 2073 6b6c 6561 726e 2e6d 756c  from sklearn.mul
-00000140: 7469 6f75 7470 7574 2069 6d70 6f72 7420  tioutput import 
-00000150: 4d75 6c74 694f 7574 7075 7452 6567 7265  MultiOutputRegre
-00000160: 7373 6f72 2c20 5265 6772 6573 736f 7243  ssor, RegressorC
-00000170: 6861 696e 0d0a 6578 6365 7074 2045 7863  hain..except Exc
-00000180: 6570 7469 6f6e 3a0d 0a20 2020 2070 6173  eption:..    pas
-00000190: 730d 0a66 726f 6d20 6175 746f 7473 2e6d  s..from autots.m
-000001a0: 6f64 656c 732e 6261 7365 2069 6d70 6f72  odels.base impor
-000001b0: 7420 4d6f 6465 6c4f 626a 6563 742c 2050  t ModelObject, P
-000001c0: 7265 6469 6374 696f 6e4f 626a 6563 740d  redictionObject.
-000001d0: 0a66 726f 6d20 6175 746f 7473 2e74 6f6f  .from autots.too
-000001e0: 6c73 2e70 726f 6261 6269 6c69 7374 6963  ls.probabilistic
-000001f0: 2069 6d70 6f72 7420 506f 696e 745f 746f   import Point_to
-00000200: 5f50 726f 6261 6269 6c69 7479 0d0a 6672  _Probability..fr
-00000210: 6f6d 2061 7574 6f74 732e 746f 6f6c 732e  om autots.tools.
-00000220: 7365 6173 6f6e 616c 2069 6d70 6f72 7420  seasonal import 
-00000230: 6461 7465 5f70 6172 742c 2073 6561 736f  date_part, seaso
-00000240: 6e61 6c5f 696e 740d 0a66 726f 6d20 6175  nal_int..from au
-00000250: 746f 7473 2e74 6f6f 6c73 2e77 696e 646f  tots.tools.windo
-00000260: 775f 6675 6e63 7469 6f6e 7320 696d 706f  w_functions impo
-00000270: 7274 2077 696e 646f 775f 6d61 6b65 722c  rt window_maker,
-00000280: 206c 6173 745f 7769 6e64 6f77 2c20 736c   last_window, sl
-00000290: 6964 696e 675f 7769 6e64 6f77 5f76 6965  iding_window_vie
-000002a0: 770d 0a66 726f 6d20 6175 746f 7473 2e74  w..from autots.t
-000002b0: 6f6f 6c73 2e63 6f69 6e74 6567 7261 7469  ools.cointegrati
-000002c0: 6f6e 2069 6d70 6f72 7420 636f 696e 745f  on import coint_
-000002d0: 6a6f 6861 6e73 656e 2c20 6274 6364 5f64  johansen, btcd_d
-000002e0: 6563 6f6d 706f 7365 0d0a 6672 6f6d 2061  ecompose..from a
-000002f0: 7574 6f74 732e 746f 6f6c 732e 686f 6c69  utots.tools.holi
-00000300: 6461 7920 696d 706f 7274 2068 6f6c 6964  day import holid
-00000310: 6179 5f66 6c61 670d 0a66 726f 6d20 6175  ay_flag..from au
-00000320: 746f 7473 2e74 6f6f 6c73 2e73 6861 7069  tots.tools.shapi
-00000330: 6e67 2069 6d70 6f72 7420 696e 6665 725f  ng import infer_
-00000340: 6672 6571 7565 6e63 790d 0a0d 0a23 2073  frequency....# s
-00000350: 6369 7079 2069 7320 7465 6368 6e69 6361  cipy is technica
-00000360: 6c6c 7920 6f70 7469 6f6e 616c 2062 7574  lly optional but
-00000370: 206d 6f73 7420 6c69 6b65 6c79 2069 7320   most likely is 
-00000380: 7072 6573 656e 740d 0a74 7279 3a0d 0a20  present..try:.. 
-00000390: 2020 2066 726f 6d20 7363 6970 792e 7374     from scipy.st
-000003a0: 6174 7320 696d 706f 7274 206e 6f72 6d0d  ats import norm.
-000003b0: 0a65 7863 6570 7420 4578 6365 7074 696f  .except Exceptio
-000003c0: 6e3a 0d0a 0d0a 2020 2020 636c 6173 7320  n:....    class 
-000003d0: 6e6f 726d 286f 626a 6563 7429 3a0d 0a20  norm(object):.. 
-000003e0: 2020 2020 2020 2040 7374 6174 6963 6d65         @staticme
-000003f0: 7468 6f64 0d0a 2020 2020 2020 2020 6465  thod..        de
-00000400: 6620 7070 6628 7829 3a0d 0a20 2020 2020  f ppf(x):..     
-00000410: 2020 2020 2020 2072 6574 7572 6e20 312e         return 1.
-00000420: 3935 3939 3633 3938 3435 340d 0a0d 0a20  95996398454.... 
-00000430: 2020 2020 2020 2023 206e 6f72 6d2e 7070         # norm.pp
-00000440: 6628 2831 202b 2030 2e39 3529 202f 2032  f((1 + 0.95) / 2
-00000450: 290d 0a0d 0a0d 0a64 6566 2072 6f6c 6c69  )......def rolli
-00000460: 6e67 5f78 5f72 6567 7265 7373 6f72 280d  ng_x_regressor(.
-00000470: 0a20 2020 2064 662c 0d0a 2020 2020 6d65  .    df,..    me
-00000480: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-00000490: 6473 3a20 696e 7420 3d20 3330 2c0d 0a20  ds: int = 30,.. 
-000004a0: 2020 206d 6163 645f 7065 7269 6f64 733a     macd_periods:
-000004b0: 2069 6e74 203d 204e 6f6e 652c 0d0a 2020   int = None,..  
-000004c0: 2020 7374 645f 726f 6c6c 696e 675f 7065    std_rolling_pe
-000004d0: 7269 6f64 733a 2069 6e74 203d 2037 2c0d  riods: int = 7,.
-000004e0: 0a20 2020 206d 6178 5f72 6f6c 6c69 6e67  .    max_rolling
-000004f0: 5f70 6572 696f 6473 3a20 696e 7420 3d20  _periods: int = 
-00000500: 4e6f 6e65 2c0d 0a20 2020 206d 696e 5f72  None,..    min_r
-00000510: 6f6c 6c69 6e67 5f70 6572 696f 6473 3a20  olling_periods: 
-00000520: 696e 7420 3d20 4e6f 6e65 2c0d 0a20 2020  int = None,..   
-00000530: 2071 7561 6e74 696c 6539 305f 726f 6c6c   quantile90_roll
-00000540: 696e 675f 7065 7269 6f64 733a 2069 6e74  ing_periods: int
-00000550: 203d 204e 6f6e 652c 0d0a 2020 2020 7175   = None,..    qu
-00000560: 616e 7469 6c65 3130 5f72 6f6c 6c69 6e67  antile10_rolling
-00000570: 5f70 6572 696f 6473 3a20 696e 7420 3d20  _periods: int = 
-00000580: 4e6f 6e65 2c0d 0a20 2020 2065 776d 5f61  None,..    ewm_a
-00000590: 6c70 6861 3a20 666c 6f61 7420 3d20 302e  lpha: float = 0.
-000005a0: 352c 0d0a 2020 2020 6577 6d5f 7661 725f  5,..    ewm_var_
-000005b0: 616c 7068 613a 2066 6c6f 6174 203d 204e  alpha: float = N
-000005c0: 6f6e 652c 0d0a 2020 2020 6164 6469 7469  one,..    additi
-000005d0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-000005e0: 3a20 696e 7420 3d20 372c 0d0a 2020 2020  : int = 7,..    
-000005f0: 6162 735f 656e 6572 6779 3a20 626f 6f6c  abs_energy: bool
-00000600: 203d 2046 616c 7365 2c0d 0a20 2020 2072   = False,..    r
-00000610: 6f6c 6c69 6e67 5f61 7574 6f63 6f72 725f  olling_autocorr_
-00000620: 7065 7269 6f64 733a 2069 6e74 203d 204e  periods: int = N
-00000630: 6f6e 652c 0d0a 2020 2020 6e6f 6e7a 6572  one,..    nonzer
-00000640: 6f5f 6c61 7374 5f6e 3a20 696e 7420 3d20  o_last_n: int = 
-00000650: 4e6f 6e65 2c0d 0a20 2020 2061 6464 5f64  None,..    add_d
-00000660: 6174 655f 7061 7274 3a20 7374 7220 3d20  ate_part: str = 
-00000670: 4e6f 6e65 2c0d 0a20 2020 2068 6f6c 6964  None,..    holid
-00000680: 6179 3a20 626f 6f6c 203d 2046 616c 7365  ay: bool = False
-00000690: 2c0d 0a20 2020 2068 6f6c 6964 6179 5f63  ,..    holiday_c
-000006a0: 6f75 6e74 7279 3a20 7374 7220 3d20 2755  ountry: str = 'U
-000006b0: 5327 2c0d 0a20 2020 2070 6f6c 796e 6f6d  S',..    polynom
-000006c0: 6961 6c5f 6465 6772 6565 3a20 696e 7420  ial_degree: int 
-000006d0: 3d20 4e6f 6e65 2c0d 0a20 2020 2077 696e  = None,..    win
-000006e0: 646f 773a 2069 6e74 203d 204e 6f6e 652c  dow: int = None,
-000006f0: 0d0a 2020 2020 636f 696e 7465 6772 6174  ..    cointegrat
-00000700: 696f 6e3a 2073 7472 203d 204e 6f6e 652c  ion: str = None,
-00000710: 0d0a 2020 2020 636f 696e 7465 6772 6174  ..    cointegrat
-00000720: 696f 6e5f 6c61 673a 2069 6e74 203d 2031  ion_lag: int = 1
-00000730: 2c0d 0a29 3a0d 0a20 2020 2022 2222 0d0a  ,..):..    """..
-00000740: 2020 2020 4765 6e65 7261 7465 206d 6f72      Generate mor
-00000750: 6520 6665 6174 7572 6573 2066 726f 6d20  e features from 
-00000760: 696e 6974 6961 6c20 7469 6d65 2073 6572  initial time ser
-00000770: 6965 732e 0d0a 0d0a 2020 2020 6d61 6364  ies.....    macd
-00000780: 5f70 6572 696f 6473 2069 676e 6f72 6564  _periods ignored
-00000790: 2069 6620 6d65 616e 5f72 6f6c 6c69 6e67   if mean_rolling
-000007a0: 2069 7320 4e6f 6e65 2e0d 0a0d 0a20 2020   is None.....   
-000007b0: 2052 6574 7572 6e73 2061 2064 6174 6166   Returns a dataf
-000007c0: 7261 6d65 206f 6620 7374 6174 6973 7469  rame of statisti
-000007d0: 6361 6c20 6665 6174 7572 6573 2e20 5769  cal features. Wi
-000007e0: 6c6c 206e 6565 6420 746f 2062 6520 7368  ll need to be sh
-000007f0: 6966 7465 6420 6279 2031 206f 7220 6d6f  ifted by 1 or mo
-00000800: 7265 2074 6f20 6d61 7463 6820 5920 666f  re to match Y fo
-00000810: 7220 666f 7265 6361 7374 2e0d 0a20 2020  r forecast...   
-00000820: 2073 6f20 666f 7220 7468 6520 696e 6465   so for the inde
-00000830: 7820 6461 7465 206f 6620 7468 6520 6f75  x date of the ou
-00000840: 7470 7574 2068 6572 652c 2074 6869 7320  tput here, this 
-00000850: 7265 7072 6573 656e 7473 2074 6865 2074  represents the t
-00000860: 696d 6520 6f66 2074 6865 2070 7265 6469  ime of the predi
-00000870: 6374 696f 6e20 6265 696e 6720 6d61 6465  ction being made
-00000880: 2c20 4e4f 5420 7468 6520 7461 7267 6574  , NOT the target
-00000890: 2064 6174 6574 696d 652e 0d0a 2020 2020   datetime...    
-000008a0: 7468 6520 6461 7465 7061 7274 2063 6f6d  the datepart com
-000008b0: 706f 6e65 6e74 7320 7368 6f75 6c64 2074  ponents should t
-000008c0: 6865 6e20 7265 7072 6573 656e 7420 7468  hen represent th
-000008d0: 6520 4e45 5854 2070 6572 696f 6420 6168  e NEXT period ah
-000008e0: 6561 642c 2077 6869 6368 2041 5245 2074  ead, which ARE t
-000008f0: 6865 2074 6172 6765 7420 6461 7465 7469  he target dateti
-00000900: 6d65 0d0a 2020 2020 2222 220d 0a20 2020  me..    """..   
-00000910: 2023 206d 616b 696e 6720 7468 6973 2061   # making this a
-00000920: 6c6c 206f 7220 7061 7274 6961 6c6c 7920  ll or partially 
-00000930: 4e75 6d70 7920 2869 6620 706f 7373 6962  Numpy (if possib
-00000940: 6c65 2920 776f 756c 6420 7072 6f62 6162  le) would probab
-00000950: 6c79 2062 6520 6661 7374 6572 0d0a 2020  ly be faster..  
-00000960: 2020 6c6f 6361 6c5f 6466 203d 2064 662e    local_df = df.
-00000970: 636f 7079 2829 0d0a 2020 2020 696e 6665  copy()..    infe
-00000980: 7272 6564 5f66 7265 7120 3d20 696e 6665  rred_freq = infe
-00000990: 725f 6672 6571 7565 6e63 7928 6c6f 6361  r_frequency(loca
-000009a0: 6c5f 6466 2e69 6e64 6578 290d 0a20 2020  l_df.index)..   
-000009b0: 206c 6f63 616c 5f64 662e 636f 6c75 6d6e   local_df.column
-000009c0: 7320 3d20 5b73 7472 2878 2920 666f 7220  s = [str(x) for 
-000009d0: 7820 696e 2072 616e 6765 286c 656e 2864  x in range(len(d
-000009e0: 662e 636f 6c75 6d6e 7329 295d 0d0a 2020  f.columns))]..  
-000009f0: 2020 5820 3d20 5b6c 6f63 616c 5f64 662e    X = [local_df.
-00000a00: 7265 6e61 6d65 2863 6f6c 756d 6e73 3d6c  rename(columns=l
-00000a10: 616d 6264 6120 783a 2022 6c61 7374 7661  ambda x: "lastva
-00000a20: 6c75 655f 2220 2b20 7829 5d0d 0a20 2020  lue_" + x)]..   
-00000a30: 2069 6620 7374 7228 6d65 616e 5f72 6f6c   if str(mean_rol
-00000a40: 6c69 6e67 5f70 6572 696f 6473 292e 6973  ling_periods).is
-00000a50: 6469 6769 7428 293a 0d0a 2020 2020 2020  digit():..      
-00000a60: 2020 7465 6d70 203d 206c 6f63 616c 5f64    temp = local_d
-00000a70: 662e 726f 6c6c 696e 6728 696e 7428 6d65  f.rolling(int(me
-00000a80: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-00000a90: 6473 292c 206d 696e 5f70 6572 696f 6473  ds), min_periods
-00000aa0: 3d31 292e 6d65 6469 616e 2829 0d0a 2020  =1).median()..  
-00000ab0: 2020 2020 2020 582e 6170 7065 6e64 2874        X.append(t
-00000ac0: 656d 7029 0d0a 2020 2020 2020 2020 6966  emp)..        if
-00000ad0: 2073 7472 286d 6163 645f 7065 7269 6f64   str(macd_period
-00000ae0: 7329 2e69 7364 6967 6974 2829 3a0d 0a20  s).isdigit():.. 
-00000af0: 2020 2020 2020 2020 2020 2074 656d 7020             temp 
-00000b00: 3d20 6c6f 6361 6c5f 6466 2e72 6f6c 6c69  = local_df.rolli
-00000b10: 6e67 2869 6e74 286d 6163 645f 7065 7269  ng(int(macd_peri
-00000b20: 6f64 7329 2c20 6d69 6e5f 7065 7269 6f64  ods), min_period
-00000b30: 733d 3129 2e6d 6564 6961 6e28 2920 2d20  s=1).median() - 
-00000b40: 7465 6d70 0d0a 2020 2020 2020 2020 2020  temp..          
-00000b50: 2020 582e 6170 7065 6e64 2874 656d 7029    X.append(temp)
-00000b60: 0d0a 2020 2020 6966 2073 7472 2873 7464  ..    if str(std
-00000b70: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-00000b80: 292e 6973 6469 6769 7428 293a 0d0a 2020  ).isdigit():..  
-00000b90: 2020 2020 2020 582e 6170 7065 6e64 286c        X.append(l
-00000ba0: 6f63 616c 5f64 662e 726f 6c6c 696e 6728  ocal_df.rolling(
-00000bb0: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
-00000bc0: 6f64 732c 206d 696e 5f70 6572 696f 6473  ods, min_periods
-00000bd0: 3d31 292e 7374 6428 2929 0d0a 2020 2020  =1).std())..    
-00000be0: 6966 2073 7472 286d 6178 5f72 6f6c 6c69  if str(max_rolli
-00000bf0: 6e67 5f70 6572 696f 6473 292e 6973 6469  ng_periods).isdi
-00000c00: 6769 7428 293a 0d0a 2020 2020 2020 2020  git():..        
-00000c10: 582e 6170 7065 6e64 286c 6f63 616c 5f64  X.append(local_d
-00000c20: 662e 726f 6c6c 696e 6728 6d61 785f 726f  f.rolling(max_ro
-00000c30: 6c6c 696e 675f 7065 7269 6f64 732c 206d  lling_periods, m
-00000c40: 696e 5f70 6572 696f 6473 3d31 292e 6d61  in_periods=1).ma
-00000c50: 7828 2929 0d0a 2020 2020 6966 2073 7472  x())..    if str
-00000c60: 286d 696e 5f72 6f6c 6c69 6e67 5f70 6572  (min_rolling_per
-00000c70: 696f 6473 292e 6973 6469 6769 7428 293a  iods).isdigit():
-00000c80: 0d0a 2020 2020 2020 2020 582e 6170 7065  ..        X.appe
-00000c90: 6e64 286c 6f63 616c 5f64 662e 726f 6c6c  nd(local_df.roll
-00000ca0: 696e 6728 6d69 6e5f 726f 6c6c 696e 675f  ing(min_rolling_
-00000cb0: 7065 7269 6f64 732c 206d 696e 5f70 6572  periods, min_per
-00000cc0: 696f 6473 3d31 292e 6d69 6e28 2929 0d0a  iods=1).min())..
-00000cd0: 2020 2020 6966 2073 7472 2871 7561 6e74      if str(quant
-00000ce0: 696c 6539 305f 726f 6c6c 696e 675f 7065  ile90_rolling_pe
-00000cf0: 7269 6f64 7329 2e69 7364 6967 6974 2829  riods).isdigit()
-00000d00: 3a0d 0a20 2020 2020 2020 2058 2e61 7070  :..        X.app
-00000d10: 656e 6428 0d0a 2020 2020 2020 2020 2020  end(..          
-00000d20: 2020 6c6f 6361 6c5f 6466 2e72 6f6c 6c69    local_df.rolli
-00000d30: 6e67 2871 7561 6e74 696c 6539 305f 726f  ng(quantile90_ro
-00000d40: 6c6c 696e 675f 7065 7269 6f64 732c 206d  lling_periods, m
-00000d50: 696e 5f70 6572 696f 6473 3d31 292e 7175  in_periods=1).qu
-00000d60: 616e 7469 6c65 2830 2e39 290d 0a20 2020  antile(0.9)..   
-00000d70: 2020 2020 2029 0d0a 2020 2020 6966 2073       )..    if s
-00000d80: 7472 2871 7561 6e74 696c 6531 305f 726f  tr(quantile10_ro
-00000d90: 6c6c 696e 675f 7065 7269 6f64 7329 2e69  lling_periods).i
-00000da0: 7364 6967 6974 2829 3a0d 0a20 2020 2020  sdigit():..     
-00000db0: 2020 2058 2e61 7070 656e 6428 0d0a 2020     X.append(..  
-00000dc0: 2020 2020 2020 2020 2020 6c6f 6361 6c5f            local_
-00000dd0: 6466 2e72 6f6c 6c69 6e67 2871 7561 6e74  df.rolling(quant
-00000de0: 696c 6531 305f 726f 6c6c 696e 675f 7065  ile10_rolling_pe
-00000df0: 7269 6f64 732c 206d 696e 5f70 6572 696f  riods, min_perio
-00000e00: 6473 3d31 292e 7175 616e 7469 6c65 2830  ds=1).quantile(0
-00000e10: 2e31 290d 0a20 2020 2020 2020 2029 0d0a  .1)..        )..
-00000e20: 2020 2020 6966 2073 7472 2865 776d 5f61      if str(ewm_a
-00000e30: 6c70 6861 292e 7265 706c 6163 6528 272e  lpha).replace('.
-00000e40: 272c 2027 2729 2e69 7364 6967 6974 2829  ', '').isdigit()
-00000e50: 3a0d 0a20 2020 2020 2020 2058 2e61 7070  :..        X.app
-00000e60: 656e 6428 6c6f 6361 6c5f 6466 2e65 776d  end(local_df.ewm
-00000e70: 2861 6c70 6861 3d65 776d 5f61 6c70 6861  (alpha=ewm_alpha
-00000e80: 2c20 6967 6e6f 7265 5f6e 613d 5472 7565  , ignore_na=True
-00000e90: 2c20 6d69 6e5f 7065 7269 6f64 733d 3129  , min_periods=1)
-00000ea0: 2e6d 6561 6e28 2929 0d0a 2020 2020 6966  .mean())..    if
-00000eb0: 2073 7472 2865 776d 5f76 6172 5f61 6c70   str(ewm_var_alp
-00000ec0: 6861 292e 7265 706c 6163 6528 272e 272c  ha).replace('.',
-00000ed0: 2027 2729 2e69 7364 6967 6974 2829 3a0d   '').isdigit():.
-00000ee0: 0a20 2020 2020 2020 2058 2e61 7070 656e  .        X.appen
-00000ef0: 6428 6c6f 6361 6c5f 6466 2e65 776d 2861  d(local_df.ewm(a
-00000f00: 6c70 6861 3d65 776d 5f76 6172 5f61 6c70  lpha=ewm_var_alp
-00000f10: 6861 2c20 6967 6e6f 7265 5f6e 613d 5472  ha, ignore_na=Tr
-00000f20: 7565 2c20 6d69 6e5f 7065 7269 6f64 733d  ue, min_periods=
-00000f30: 3129 2e76 6172 2829 290d 0a20 2020 2069  1).var())..    i
-00000f40: 6620 7374 7228 6164 6469 7469 6f6e 616c  f str(additional
-00000f50: 5f6c 6167 5f70 6572 696f 6473 292e 6973  _lag_periods).is
-00000f60: 6469 6769 7428 293a 0d0a 2020 2020 2020  digit():..      
-00000f70: 2020 582e 6170 7065 6e64 286c 6f63 616c    X.append(local
-00000f80: 5f64 662e 7368 6966 7428 6164 6469 7469  _df.shift(additi
-00000f90: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-00000fa0: 2929 0d0a 2020 2020 6966 206e 6f6e 7a65  ))..    if nonze
-00000fb0: 726f 5f6c 6173 745f 6e20 6973 206e 6f74  ro_last_n is not
-00000fc0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00000fd0: 6675 6c6c 5f69 6e64 6578 203d 206c 6f63  full_index = loc
-00000fe0: 616c 5f64 662e 696e 6465 782e 756e 696f  al_df.index.unio
-00000ff0: 6e28 0d0a 2020 2020 2020 2020 2020 2020  n(..            
-00001000: 6c6f 6361 6c5f 6466 2e69 6e64 6578 2e73  local_df.index.s
-00001010: 6869 6674 282d 6e6f 6e7a 6572 6f5f 6c61  hift(-nonzero_la
-00001020: 7374 5f6e 2c20 6672 6571 3d69 6e66 6572  st_n, freq=infer
-00001030: 7265 645f 6672 6571 290d 0a20 2020 2020  red_freq)..     
-00001040: 2020 2029 0d0a 2020 2020 2020 2020 582e     )..        X.
-00001050: 6170 7065 6e64 280d 0a20 2020 2020 2020  append(..       
-00001060: 2020 2020 2028 6c6f 6361 6c5f 6466 2e72       (local_df.r
-00001070: 6569 6e64 6578 2866 756c 6c5f 696e 6465  eindex(full_inde
-00001080: 7829 2e62 6669 6c6c 2829 2021 3d20 3029  x).bfill() != 0)
-00001090: 0d0a 2020 2020 2020 2020 2020 2020 2e72  ..            .r
-000010a0: 6f6c 6c69 6e67 286e 6f6e 7a65 726f 5f6c  olling(nonzero_l
-000010b0: 6173 745f 6e2c 206d 696e 5f70 6572 696f  ast_n, min_perio
-000010c0: 6473 3d31 290d 0a20 2020 2020 2020 2020  ds=1)..         
-000010d0: 2020 202e 7375 6d28 290d 0a20 2020 2020     .sum()..     
-000010e0: 2020 2020 2020 202e 7265 696e 6465 7828         .reindex(
-000010f0: 6c6f 6361 6c5f 6466 2e69 6e64 6578 290d  local_df.index).
-00001100: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-00001110: 6966 2063 6f69 6e74 6567 7261 7469 6f6e  if cointegration
-00001120: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00001130: 2020 2020 2020 2069 6620 7374 7228 636f         if str(co
-00001140: 696e 7465 6772 6174 696f 6e29 2e6c 6f77  integration).low
-00001150: 6572 2829 203d 3d20 2262 7463 6422 3a0d  er() == "btcd":.
-00001160: 0a20 2020 2020 2020 2020 2020 2058 2e61  .            X.a
-00001170: 7070 656e 6428 0d0a 2020 2020 2020 2020  ppend(..        
-00001180: 2020 2020 2020 2020 7064 2e44 6174 6146          pd.DataF
-00001190: 7261 6d65 280d 0a20 2020 2020 2020 2020  rame(..         
-000011a0: 2020 2020 2020 2020 2020 206e 702e 6d61             np.ma
-000011b0: 746d 756c 280d 0a20 2020 2020 2020 2020  tmul(..         
-000011c0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-000011d0: 7463 645f 6465 636f 6d70 6f73 6528 0d0a  tcd_decompose(..
-000011e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011f0: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
-00001200: 6c5f 6466 2e76 616c 7565 732c 0d0a 2020  l_df.values,..  
-00001210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001220: 2020 2020 2020 2020 2020 7265 7472 6965            retrie
-00001230: 7665 5f72 6567 7265 7373 6f72 280d 0a20  ve_regressor(.. 
-00001240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001250: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00001260: 6567 7265 7373 696f 6e5f 6d6f 6465 6c3d  egression_model=
-00001270: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
-00001280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001290: 2020 2020 2020 2022 6d6f 6465 6c22 3a20         "model": 
-000012a0: 274c 696e 6561 7252 6567 7265 7373 696f  'LinearRegressio
-000012b0: 6e27 2c0d 0a20 2020 2020 2020 2020 2020  n',..           
-000012c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000012d0: 2020 2020 2020 2020 2022 6d6f 6465 6c5f           "model_
-000012e0: 7061 7261 6d73 223a 207b 7d2c 0d0a 2020  params": {},..  
-000012f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001300: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
-00001310: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001330: 2020 7665 7262 6f73 653d 302c 0d0a 2020    verbose=0,..  
-00001340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001350: 2020 2020 2020 2020 2020 2020 2020 7665                ve
-00001360: 7262 6f73 655f 626f 6f6c 3d46 616c 7365  rbose_bool=False
-00001370: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00001380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001390: 2020 2072 616e 646f 6d5f 7365 6564 3d32     random_seed=2
-000013a0: 3032 302c 0d0a 2020 2020 2020 2020 2020  020,..          
+00000070: 6d70 6f72 7420 6861 7368 6c69 620d 0a69  mport hashlib..i
+00000080: 6d70 6f72 7420 6461 7465 7469 6d65 0d0a  mport datetime..
+00000090: 696d 706f 7274 2072 616e 646f 6d0d 0a69  import random..i
+000000a0: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
+000000b0: 700d 0a69 6d70 6f72 7420 7061 6e64 6173  p..import pandas
+000000c0: 2061 7320 7064 0d0a 0d0a 2320 6265 6361   as pd....# beca
+000000d0: 7573 6520 7468 6973 2061 7474 656d 7074  use this attempt
+000000e0: 7320 746f 206d 616b 6520 736b 6c65 6172  s to make sklear
+000000f0: 6e20 6f70 7469 6f6e 616c 2066 6f72 206f  n optional for o
+00000100: 7665 7261 6c6c 2075 7361 6765 0d0a 7472  verall usage..tr
+00000110: 793a 0d0a 2020 2020 6672 6f6d 2073 6b6c  y:..    from skl
+00000120: 6561 726e 2069 6d70 6f72 7420 636f 6e66  earn import conf
+00000130: 6967 5f63 6f6e 7465 7874 0d0a 2020 2020  ig_context..    
+00000140: 6672 6f6d 2073 6b6c 6561 726e 2e6d 756c  from sklearn.mul
+00000150: 7469 6f75 7470 7574 2069 6d70 6f72 7420  tioutput import 
+00000160: 4d75 6c74 694f 7574 7075 7452 6567 7265  MultiOutputRegre
+00000170: 7373 6f72 2c20 5265 6772 6573 736f 7243  ssor, RegressorC
+00000180: 6861 696e 0d0a 6578 6365 7074 2045 7863  hain..except Exc
+00000190: 6570 7469 6f6e 3a0d 0a20 2020 2070 6173  eption:..    pas
+000001a0: 730d 0a66 726f 6d20 6175 746f 7473 2e6d  s..from autots.m
+000001b0: 6f64 656c 732e 6261 7365 2069 6d70 6f72  odels.base impor
+000001c0: 7420 4d6f 6465 6c4f 626a 6563 742c 2050  t ModelObject, P
+000001d0: 7265 6469 6374 696f 6e4f 626a 6563 740d  redictionObject.
+000001e0: 0a66 726f 6d20 6175 746f 7473 2e74 6f6f  .from autots.too
+000001f0: 6c73 2e70 726f 6261 6269 6c69 7374 6963  ls.probabilistic
+00000200: 2069 6d70 6f72 7420 506f 696e 745f 746f   import Point_to
+00000210: 5f50 726f 6261 6269 6c69 7479 0d0a 6672  _Probability..fr
+00000220: 6f6d 2061 7574 6f74 732e 746f 6f6c 732e  om autots.tools.
+00000230: 7365 6173 6f6e 616c 2069 6d70 6f72 7420  seasonal import 
+00000240: 6461 7465 5f70 6172 742c 2073 6561 736f  date_part, seaso
+00000250: 6e61 6c5f 696e 740d 0a66 726f 6d20 6175  nal_int..from au
+00000260: 746f 7473 2e74 6f6f 6c73 2e77 696e 646f  tots.tools.windo
+00000270: 775f 6675 6e63 7469 6f6e 7320 696d 706f  w_functions impo
+00000280: 7274 2077 696e 646f 775f 6d61 6b65 722c  rt window_maker,
+00000290: 206c 6173 745f 7769 6e64 6f77 2c20 736c   last_window, sl
+000002a0: 6964 696e 675f 7769 6e64 6f77 5f76 6965  iding_window_vie
+000002b0: 770d 0a66 726f 6d20 6175 746f 7473 2e74  w..from autots.t
+000002c0: 6f6f 6c73 2e63 6f69 6e74 6567 7261 7469  ools.cointegrati
+000002d0: 6f6e 2069 6d70 6f72 7420 636f 696e 745f  on import coint_
+000002e0: 6a6f 6861 6e73 656e 2c20 6274 6364 5f64  johansen, btcd_d
+000002f0: 6563 6f6d 706f 7365 0d0a 6672 6f6d 2061  ecompose..from a
+00000300: 7574 6f74 732e 746f 6f6c 732e 686f 6c69  utots.tools.holi
+00000310: 6461 7920 696d 706f 7274 2068 6f6c 6964  day import holid
+00000320: 6179 5f66 6c61 670d 0a66 726f 6d20 6175  ay_flag..from au
+00000330: 746f 7473 2e74 6f6f 6c73 2e73 6861 7069  tots.tools.shapi
+00000340: 6e67 2069 6d70 6f72 7420 696e 6665 725f  ng import infer_
+00000350: 6672 6571 7565 6e63 790d 0a0d 0a23 2073  frequency....# s
+00000360: 6369 7079 2069 7320 7465 6368 6e69 6361  cipy is technica
+00000370: 6c6c 7920 6f70 7469 6f6e 616c 2062 7574  lly optional but
+00000380: 206d 6f73 7420 6c69 6b65 6c79 2069 7320   most likely is 
+00000390: 7072 6573 656e 740d 0a74 7279 3a0d 0a20  present..try:.. 
+000003a0: 2020 2066 726f 6d20 7363 6970 792e 7374     from scipy.st
+000003b0: 6174 7320 696d 706f 7274 206e 6f72 6d0d  ats import norm.
+000003c0: 0a65 7863 6570 7420 4578 6365 7074 696f  .except Exceptio
+000003d0: 6e3a 0d0a 0d0a 2020 2020 636c 6173 7320  n:....    class 
+000003e0: 6e6f 726d 286f 626a 6563 7429 3a0d 0a20  norm(object):.. 
+000003f0: 2020 2020 2020 2040 7374 6174 6963 6d65         @staticme
+00000400: 7468 6f64 0d0a 2020 2020 2020 2020 6465  thod..        de
+00000410: 6620 7070 6628 7829 3a0d 0a20 2020 2020  f ppf(x):..     
+00000420: 2020 2020 2020 2072 6574 7572 6e20 312e         return 1.
+00000430: 3935 3939 3633 3938 3435 340d 0a0d 0a20  95996398454.... 
+00000440: 2020 2020 2020 2023 206e 6f72 6d2e 7070         # norm.pp
+00000450: 6628 2831 202b 2030 2e39 3529 202f 2032  f((1 + 0.95) / 2
+00000460: 290d 0a0d 0a0d 0a64 6566 2072 6f6c 6c69  )......def rolli
+00000470: 6e67 5f78 5f72 6567 7265 7373 6f72 280d  ng_x_regressor(.
+00000480: 0a20 2020 2064 662c 0d0a 2020 2020 6d65  .    df,..    me
+00000490: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
+000004a0: 6473 3a20 696e 7420 3d20 3330 2c0d 0a20  ds: int = 30,.. 
+000004b0: 2020 206d 6163 645f 7065 7269 6f64 733a     macd_periods:
+000004c0: 2069 6e74 203d 204e 6f6e 652c 0d0a 2020   int = None,..  
+000004d0: 2020 7374 645f 726f 6c6c 696e 675f 7065    std_rolling_pe
+000004e0: 7269 6f64 733a 2069 6e74 203d 2037 2c0d  riods: int = 7,.
+000004f0: 0a20 2020 206d 6178 5f72 6f6c 6c69 6e67  .    max_rolling
+00000500: 5f70 6572 696f 6473 3a20 696e 7420 3d20  _periods: int = 
+00000510: 4e6f 6e65 2c0d 0a20 2020 206d 696e 5f72  None,..    min_r
+00000520: 6f6c 6c69 6e67 5f70 6572 696f 6473 3a20  olling_periods: 
+00000530: 696e 7420 3d20 4e6f 6e65 2c0d 0a20 2020  int = None,..   
+00000540: 2071 7561 6e74 696c 6539 305f 726f 6c6c   quantile90_roll
+00000550: 696e 675f 7065 7269 6f64 733a 2069 6e74  ing_periods: int
+00000560: 203d 204e 6f6e 652c 0d0a 2020 2020 7175   = None,..    qu
+00000570: 616e 7469 6c65 3130 5f72 6f6c 6c69 6e67  antile10_rolling
+00000580: 5f70 6572 696f 6473 3a20 696e 7420 3d20  _periods: int = 
+00000590: 4e6f 6e65 2c0d 0a20 2020 2065 776d 5f61  None,..    ewm_a
+000005a0: 6c70 6861 3a20 666c 6f61 7420 3d20 302e  lpha: float = 0.
+000005b0: 352c 0d0a 2020 2020 6577 6d5f 7661 725f  5,..    ewm_var_
+000005c0: 616c 7068 613a 2066 6c6f 6174 203d 204e  alpha: float = N
+000005d0: 6f6e 652c 0d0a 2020 2020 6164 6469 7469  one,..    additi
+000005e0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
+000005f0: 3a20 696e 7420 3d20 372c 0d0a 2020 2020  : int = 7,..    
+00000600: 6162 735f 656e 6572 6779 3a20 626f 6f6c  abs_energy: bool
+00000610: 203d 2046 616c 7365 2c0d 0a20 2020 2072   = False,..    r
+00000620: 6f6c 6c69 6e67 5f61 7574 6f63 6f72 725f  olling_autocorr_
+00000630: 7065 7269 6f64 733a 2069 6e74 203d 204e  periods: int = N
+00000640: 6f6e 652c 0d0a 2020 2020 6e6f 6e7a 6572  one,..    nonzer
+00000650: 6f5f 6c61 7374 5f6e 3a20 696e 7420 3d20  o_last_n: int = 
+00000660: 4e6f 6e65 2c0d 0a20 2020 2061 6464 5f64  None,..    add_d
+00000670: 6174 655f 7061 7274 3a20 7374 7220 3d20  ate_part: str = 
+00000680: 4e6f 6e65 2c0d 0a20 2020 2068 6f6c 6964  None,..    holid
+00000690: 6179 3a20 626f 6f6c 203d 2046 616c 7365  ay: bool = False
+000006a0: 2c0d 0a20 2020 2068 6f6c 6964 6179 5f63  ,..    holiday_c
+000006b0: 6f75 6e74 7279 3a20 7374 7220 3d20 2755  ountry: str = 'U
+000006c0: 5327 2c0d 0a20 2020 2070 6f6c 796e 6f6d  S',..    polynom
+000006d0: 6961 6c5f 6465 6772 6565 3a20 696e 7420  ial_degree: int 
+000006e0: 3d20 4e6f 6e65 2c0d 0a20 2020 2077 696e  = None,..    win
+000006f0: 646f 773a 2069 6e74 203d 204e 6f6e 652c  dow: int = None,
+00000700: 0d0a 2020 2020 636f 696e 7465 6772 6174  ..    cointegrat
+00000710: 696f 6e3a 2073 7472 203d 204e 6f6e 652c  ion: str = None,
+00000720: 0d0a 2020 2020 636f 696e 7465 6772 6174  ..    cointegrat
+00000730: 696f 6e5f 6c61 673a 2069 6e74 203d 2031  ion_lag: int = 1
+00000740: 2c0d 0a29 3a0d 0a20 2020 2022 2222 0d0a  ,..):..    """..
+00000750: 2020 2020 4765 6e65 7261 7465 206d 6f72      Generate mor
+00000760: 6520 6665 6174 7572 6573 2066 726f 6d20  e features from 
+00000770: 696e 6974 6961 6c20 7469 6d65 2073 6572  initial time ser
+00000780: 6965 732e 0d0a 0d0a 2020 2020 6d61 6364  ies.....    macd
+00000790: 5f70 6572 696f 6473 2069 676e 6f72 6564  _periods ignored
+000007a0: 2069 6620 6d65 616e 5f72 6f6c 6c69 6e67   if mean_rolling
+000007b0: 2069 7320 4e6f 6e65 2e0d 0a0d 0a20 2020   is None.....   
+000007c0: 2052 6574 7572 6e73 2061 2064 6174 6166   Returns a dataf
+000007d0: 7261 6d65 206f 6620 7374 6174 6973 7469  rame of statisti
+000007e0: 6361 6c20 6665 6174 7572 6573 2e20 5769  cal features. Wi
+000007f0: 6c6c 206e 6565 6420 746f 2062 6520 7368  ll need to be sh
+00000800: 6966 7465 6420 6279 2031 206f 7220 6d6f  ifted by 1 or mo
+00000810: 7265 2074 6f20 6d61 7463 6820 5920 666f  re to match Y fo
+00000820: 7220 666f 7265 6361 7374 2e0d 0a20 2020  r forecast...   
+00000830: 2073 6f20 666f 7220 7468 6520 696e 6465   so for the inde
+00000840: 7820 6461 7465 206f 6620 7468 6520 6f75  x date of the ou
+00000850: 7470 7574 2068 6572 652c 2074 6869 7320  tput here, this 
+00000860: 7265 7072 6573 656e 7473 2074 6865 2074  represents the t
+00000870: 696d 6520 6f66 2074 6865 2070 7265 6469  ime of the predi
+00000880: 6374 696f 6e20 6265 696e 6720 6d61 6465  ction being made
+00000890: 2c20 4e4f 5420 7468 6520 7461 7267 6574  , NOT the target
+000008a0: 2064 6174 6574 696d 652e 0d0a 2020 2020   datetime...    
+000008b0: 7468 6520 6461 7465 7061 7274 2063 6f6d  the datepart com
+000008c0: 706f 6e65 6e74 7320 7368 6f75 6c64 2074  ponents should t
+000008d0: 6865 6e20 7265 7072 6573 656e 7420 7468  hen represent th
+000008e0: 6520 4e45 5854 2070 6572 696f 6420 6168  e NEXT period ah
+000008f0: 6561 642c 2077 6869 6368 2041 5245 2074  ead, which ARE t
+00000900: 6865 2074 6172 6765 7420 6461 7465 7469  he target dateti
+00000910: 6d65 0d0a 2020 2020 2222 220d 0a20 2020  me..    """..   
+00000920: 2023 206d 616b 696e 6720 7468 6973 2061   # making this a
+00000930: 6c6c 206f 7220 7061 7274 6961 6c6c 7920  ll or partially 
+00000940: 4e75 6d70 7920 2869 6620 706f 7373 6962  Numpy (if possib
+00000950: 6c65 2920 776f 756c 6420 7072 6f62 6162  le) would probab
+00000960: 6c79 2062 6520 6661 7374 6572 0d0a 2020  ly be faster..  
+00000970: 2020 6c6f 6361 6c5f 6466 203d 2064 662e    local_df = df.
+00000980: 636f 7079 2829 0d0a 2020 2020 696e 6665  copy()..    infe
+00000990: 7272 6564 5f66 7265 7120 3d20 696e 6665  rred_freq = infe
+000009a0: 725f 6672 6571 7565 6e63 7928 6c6f 6361  r_frequency(loca
+000009b0: 6c5f 6466 2e69 6e64 6578 290d 0a20 2020  l_df.index)..   
+000009c0: 206c 6f63 616c 5f64 662e 636f 6c75 6d6e   local_df.column
+000009d0: 7320 3d20 5b73 7472 2878 2920 666f 7220  s = [str(x) for 
+000009e0: 7820 696e 2072 616e 6765 286c 656e 2864  x in range(len(d
+000009f0: 662e 636f 6c75 6d6e 7329 295d 0d0a 2020  f.columns))]..  
+00000a00: 2020 5820 3d20 5b6c 6f63 616c 5f64 662e    X = [local_df.
+00000a10: 7265 6e61 6d65 2863 6f6c 756d 6e73 3d6c  rename(columns=l
+00000a20: 616d 6264 6120 783a 2022 6c61 7374 7661  ambda x: "lastva
+00000a30: 6c75 655f 2220 2b20 7829 5d0d 0a20 2020  lue_" + x)]..   
+00000a40: 2069 6620 7374 7228 6d65 616e 5f72 6f6c   if str(mean_rol
+00000a50: 6c69 6e67 5f70 6572 696f 6473 292e 6973  ling_periods).is
+00000a60: 6469 6769 7428 293a 0d0a 2020 2020 2020  digit():..      
+00000a70: 2020 7465 6d70 203d 206c 6f63 616c 5f64    temp = local_d
+00000a80: 662e 726f 6c6c 696e 6728 696e 7428 6d65  f.rolling(int(me
+00000a90: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
+00000aa0: 6473 292c 206d 696e 5f70 6572 696f 6473  ds), min_periods
+00000ab0: 3d31 292e 6d65 6469 616e 2829 0d0a 2020  =1).median()..  
+00000ac0: 2020 2020 2020 2320 7465 6d70 2e63 6f6c        # temp.col
+00000ad0: 756d 6e73 203d 205b 2772 6f6c 6c69 6e67  umns = ['rolling
+00000ae0: 6d65 616e 2720 666f 7220 636f 6c20 696e  mean' for col in
+00000af0: 2074 656d 702e 636f 6c75 6d6e 735d 0d0a   temp.columns]..
+00000b00: 2020 2020 2020 2020 582e 6170 7065 6e64          X.append
+00000b10: 2874 656d 7029 0d0a 2020 2020 2020 2020  (temp)..        
+00000b20: 6966 2073 7472 286d 6163 645f 7065 7269  if str(macd_peri
+00000b30: 6f64 7329 2e69 7364 6967 6974 2829 3a0d  ods).isdigit():.
+00000b40: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00000b50: 7020 3d20 6c6f 6361 6c5f 6466 2e72 6f6c  p = local_df.rol
+00000b60: 6c69 6e67 2869 6e74 286d 6163 645f 7065  ling(int(macd_pe
+00000b70: 7269 6f64 7329 2c20 6d69 6e5f 7065 7269  riods), min_peri
+00000b80: 6f64 733d 3129 2e6d 6564 6961 6e28 2920  ods=1).median() 
+00000b90: 2d20 7465 6d70 0d0a 2020 2020 2020 2020  - temp..        
+00000ba0: 2020 2020 7465 6d70 2e63 6f6c 756d 6e73      temp.columns
+00000bb0: 203d 205b 276d 6163 6427 2066 6f72 2063   = ['macd' for c
+00000bc0: 6f6c 2069 6e20 7465 6d70 2e63 6f6c 756d  ol in temp.colum
+00000bd0: 6e73 5d0d 0a20 2020 2020 2020 2020 2020  ns]..           
+00000be0: 2058 2e61 7070 656e 6428 7465 6d70 290d   X.append(temp).
+00000bf0: 0a20 2020 2069 6620 7374 7228 7374 645f  .    if str(std_
+00000c00: 726f 6c6c 696e 675f 7065 7269 6f64 7329  rolling_periods)
+00000c10: 2e69 7364 6967 6974 2829 3a0d 0a20 2020  .isdigit():..   
+00000c20: 2020 2020 2058 2e61 7070 656e 6428 6c6f       X.append(lo
+00000c30: 6361 6c5f 6466 2e72 6f6c 6c69 6e67 2873  cal_df.rolling(s
+00000c40: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
+00000c50: 6473 2c20 6d69 6e5f 7065 7269 6f64 733d  ds, min_periods=
+00000c60: 3129 2e73 7464 2829 290d 0a20 2020 2069  1).std())..    i
+00000c70: 6620 7374 7228 6d61 785f 726f 6c6c 696e  f str(max_rollin
+00000c80: 675f 7065 7269 6f64 7329 2e69 7364 6967  g_periods).isdig
+00000c90: 6974 2829 3a0d 0a20 2020 2020 2020 2058  it():..        X
+00000ca0: 2e61 7070 656e 6428 6c6f 6361 6c5f 6466  .append(local_df
+00000cb0: 2e72 6f6c 6c69 6e67 286d 6178 5f72 6f6c  .rolling(max_rol
+00000cc0: 6c69 6e67 5f70 6572 696f 6473 2c20 6d69  ling_periods, mi
+00000cd0: 6e5f 7065 7269 6f64 733d 3129 2e6d 6178  n_periods=1).max
+00000ce0: 2829 290d 0a20 2020 2069 6620 7374 7228  ())..    if str(
+00000cf0: 6d69 6e5f 726f 6c6c 696e 675f 7065 7269  min_rolling_peri
+00000d00: 6f64 7329 2e69 7364 6967 6974 2829 3a0d  ods).isdigit():.
+00000d10: 0a20 2020 2020 2020 2058 2e61 7070 656e  .        X.appen
+00000d20: 6428 6c6f 6361 6c5f 6466 2e72 6f6c 6c69  d(local_df.rolli
+00000d30: 6e67 286d 696e 5f72 6f6c 6c69 6e67 5f70  ng(min_rolling_p
+00000d40: 6572 696f 6473 2c20 6d69 6e5f 7065 7269  eriods, min_peri
+00000d50: 6f64 733d 3129 2e6d 696e 2829 290d 0a20  ods=1).min()).. 
+00000d60: 2020 2069 6620 7374 7228 7175 616e 7469     if str(quanti
+00000d70: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+00000d80: 696f 6473 292e 6973 6469 6769 7428 293a  iods).isdigit():
+00000d90: 0d0a 2020 2020 2020 2020 582e 6170 7065  ..        X.appe
+00000da0: 6e64 280d 0a20 2020 2020 2020 2020 2020  nd(..           
+00000db0: 206c 6f63 616c 5f64 662e 726f 6c6c 696e   local_df.rollin
+00000dc0: 6728 7175 616e 7469 6c65 3930 5f72 6f6c  g(quantile90_rol
+00000dd0: 6c69 6e67 5f70 6572 696f 6473 2c20 6d69  ling_periods, mi
+00000de0: 6e5f 7065 7269 6f64 733d 3129 2e71 7561  n_periods=1).qua
+00000df0: 6e74 696c 6528 302e 3929 0d0a 2020 2020  ntile(0.9)..    
+00000e00: 2020 2020 290d 0a20 2020 2069 6620 7374      )..    if st
+00000e10: 7228 7175 616e 7469 6c65 3130 5f72 6f6c  r(quantile10_rol
+00000e20: 6c69 6e67 5f70 6572 696f 6473 292e 6973  ling_periods).is
+00000e30: 6469 6769 7428 293a 0d0a 2020 2020 2020  digit():..      
+00000e40: 2020 582e 6170 7065 6e64 280d 0a20 2020    X.append(..   
+00000e50: 2020 2020 2020 2020 206c 6f63 616c 5f64           local_d
+00000e60: 662e 726f 6c6c 696e 6728 7175 616e 7469  f.rolling(quanti
+00000e70: 6c65 3130 5f72 6f6c 6c69 6e67 5f70 6572  le10_rolling_per
+00000e80: 696f 6473 2c20 6d69 6e5f 7065 7269 6f64  iods, min_period
+00000e90: 733d 3129 2e71 7561 6e74 696c 6528 302e  s=1).quantile(0.
+00000ea0: 3129 0d0a 2020 2020 2020 2020 290d 0a20  1)..        ).. 
+00000eb0: 2020 2069 6620 7374 7228 6577 6d5f 616c     if str(ewm_al
+00000ec0: 7068 6129 2e72 6570 6c61 6365 2827 2e27  pha).replace('.'
+00000ed0: 2c20 2727 292e 6973 6469 6769 7428 293a  , '').isdigit():
+00000ee0: 0d0a 2020 2020 2020 2020 6577 6d5f 6466  ..        ewm_df
+00000ef0: 203d 206c 6f63 616c 5f64 662e 6577 6d28   = local_df.ewm(
+00000f00: 616c 7068 613d 6577 6d5f 616c 7068 612c  alpha=ewm_alpha,
+00000f10: 2069 676e 6f72 655f 6e61 3d54 7275 652c   ignore_na=True,
+00000f20: 206d 696e 5f70 6572 696f 6473 3d31 292e   min_periods=1).
+00000f30: 6d65 616e 2829 0d0a 2020 2020 2020 2020  mean()..        
+00000f40: 6577 6d5f 6466 2e63 6f6c 756d 6e73 203d  ewm_df.columns =
+00000f50: 205b 2265 776d 5f61 6c70 6861 2220 666f   ["ewm_alpha" fo
+00000f60: 7220 636f 6c20 696e 206c 6f63 616c 5f64  r col in local_d
+00000f70: 662e 636f 6c75 6d6e 735d 0d0a 2020 2020  f.columns]..    
+00000f80: 2020 2020 582e 6170 7065 6e64 2865 776d      X.append(ewm
+00000f90: 5f64 6629 0d0a 2020 2020 6966 2073 7472  _df)..    if str
+00000fa0: 2865 776d 5f76 6172 5f61 6c70 6861 292e  (ewm_var_alpha).
+00000fb0: 7265 706c 6163 6528 272e 272c 2027 2729  replace('.', '')
+00000fc0: 2e69 7364 6967 6974 2829 3a0d 0a20 2020  .isdigit():..   
+00000fd0: 2020 2020 2058 2e61 7070 656e 6428 6c6f       X.append(lo
+00000fe0: 6361 6c5f 6466 2e65 776d 2861 6c70 6861  cal_df.ewm(alpha
+00000ff0: 3d65 776d 5f76 6172 5f61 6c70 6861 2c20  =ewm_var_alpha, 
+00001000: 6967 6e6f 7265 5f6e 613d 5472 7565 2c20  ignore_na=True, 
+00001010: 6d69 6e5f 7065 7269 6f64 733d 3129 2e76  min_periods=1).v
+00001020: 6172 2829 290d 0a20 2020 2069 6620 7374  ar())..    if st
+00001030: 7228 6164 6469 7469 6f6e 616c 5f6c 6167  r(additional_lag
+00001040: 5f70 6572 696f 6473 292e 6973 6469 6769  _periods).isdigi
+00001050: 7428 293a 0d0a 2020 2020 2020 2020 582e  t():..        X.
+00001060: 6170 7065 6e64 286c 6f63 616c 5f64 662e  append(local_df.
+00001070: 7368 6966 7428 6164 6469 7469 6f6e 616c  shift(additional
+00001080: 5f6c 6167 5f70 6572 696f 6473 2929 0d0a  _lag_periods))..
+00001090: 2020 2020 6966 206e 6f6e 7a65 726f 5f6c      if nonzero_l
+000010a0: 6173 745f 6e20 6973 206e 6f74 204e 6f6e  ast_n is not Non
+000010b0: 653a 0d0a 2020 2020 2020 2020 6675 6c6c  e:..        full
+000010c0: 5f69 6e64 6578 203d 206c 6f63 616c 5f64  _index = local_d
+000010d0: 662e 696e 6465 782e 756e 696f 6e28 0d0a  f.index.union(..
+000010e0: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
+000010f0: 6c5f 6466 2e69 6e64 6578 2e73 6869 6674  l_df.index.shift
+00001100: 282d 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e  (-nonzero_last_n
+00001110: 2c20 6672 6571 3d69 6e66 6572 7265 645f  , freq=inferred_
+00001120: 6672 6571 290d 0a20 2020 2020 2020 2029  freq)..        )
+00001130: 0d0a 2020 2020 2020 2020 582e 6170 7065  ..        X.appe
+00001140: 6e64 280d 0a20 2020 2020 2020 2020 2020  nd(..           
+00001150: 2028 6c6f 6361 6c5f 6466 2e72 6569 6e64   (local_df.reind
+00001160: 6578 2866 756c 6c5f 696e 6465 7829 2e62  ex(full_index).b
+00001170: 6669 6c6c 2829 2021 3d20 3029 0d0a 2020  fill() != 0)..  
+00001180: 2020 2020 2020 2020 2020 2e72 6f6c 6c69            .rolli
+00001190: 6e67 286e 6f6e 7a65 726f 5f6c 6173 745f  ng(nonzero_last_
+000011a0: 6e2c 206d 696e 5f70 6572 696f 6473 3d31  n, min_periods=1
+000011b0: 290d 0a20 2020 2020 2020 2020 2020 202e  )..            .
+000011c0: 7375 6d28 290d 0a20 2020 2020 2020 2020  sum()..         
+000011d0: 2020 202e 7265 696e 6465 7828 6c6f 6361     .reindex(loca
+000011e0: 6c5f 6466 2e69 6e64 6578 290d 0a20 2020  l_df.index)..   
+000011f0: 2020 2020 2029 0d0a 2020 2020 6966 2063       )..    if c
+00001200: 6f69 6e74 6567 7261 7469 6f6e 2069 7320  ointegration is 
+00001210: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+00001220: 2020 2069 6620 7374 7228 636f 696e 7465     if str(cointe
+00001230: 6772 6174 696f 6e29 2e6c 6f77 6572 2829  gration).lower()
+00001240: 203d 3d20 2262 7463 6422 3a0d 0a20 2020   == "btcd":..   
+00001250: 2020 2020 2020 2020 2058 2e61 7070 656e           X.appen
+00001260: 6428 0d0a 2020 2020 2020 2020 2020 2020  d(..            
+00001270: 2020 2020 7064 2e44 6174 6146 7261 6d65      pd.DataFrame
+00001280: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00001290: 2020 2020 2020 206e 702e 6d61 746d 756c         np.matmul
+000012a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000012b0: 2020 2020 2020 2020 2020 2062 7463 645f             btcd_
+000012c0: 6465 636f 6d70 6f73 6528 0d0a 2020 2020  decompose(..    
+000012d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000012e0: 2020 2020 2020 2020 6c6f 6361 6c5f 6466          local_df
+000012f0: 2e76 616c 7565 732c 0d0a 2020 2020 2020  .values,..      
+00001300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001310: 2020 2020 2020 7265 7472 6965 7665 5f72        retrieve_r
+00001320: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+00001330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001340: 2020 2020 2020 2020 2020 2072 6567 7265             regre
+00001350: 7373 696f 6e5f 6d6f 6465 6c3d 7b0d 0a20  ssion_model={.. 
+00001360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001380: 2020 2022 6d6f 6465 6c22 3a20 274c 696e     "model": 'Lin
+00001390: 6561 7252 6567 7265 7373 696f 6e27 2c0d  earRegression',.
+000013a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000013b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000013c0: 2020 2020 2020 6d75 6c74 696f 7574 7075        multioutpu
-000013d0: 743d 4661 6c73 652c 0d0a 2020 2020 2020  t=False,..      
+000013c0: 2020 2020 2022 6d6f 6465 6c5f 7061 7261       "model_para
+000013d0: 6d73 223a 207b 7d2c 0d0a 2020 2020 2020  ms": {},..      
 000013e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000013f0: 2020 2020 2020 292c 0d0a 2020 2020 2020        ),..      
+000013f0: 2020 2020 2020 2020 2020 7d2c 0d0a 2020            },..  
 00001400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001410: 2020 2020 2020 6d61 785f 6c61 673d 636f        max_lag=co
-00001420: 696e 7465 6772 6174 696f 6e5f 6c61 672c  integration_lag,
-00001430: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001440: 2020 2020 2020 2020 2020 292c 0d0a 2020            ),..  
-00001450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001460: 2020 2020 2020 286c 6f63 616c 5f64 662e        (local_df.
-00001470: 7661 6c75 6573 292e 542c 0d0a 2020 2020  values).T,..    
-00001480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001490: 292e 542c 0d0a 2020 2020 2020 2020 2020  ).T,..          
-000014a0: 2020 2020 2020 2020 2020 696e 6465 783d            index=
-000014b0: 6c6f 6361 6c5f 6466 2e69 6e64 6578 2c0d  local_df.index,.
-000014c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000014d0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-000014e0: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-000014f0: 0d0a 2020 2020 2020 2020 2020 2020 582e  ..            X.
-00001500: 6170 7065 6e64 280d 0a20 2020 2020 2020  append(..       
-00001510: 2020 2020 2020 2020 2070 642e 4461 7461           pd.Data
-00001520: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
-00001530: 2020 2020 2020 2020 2020 2020 6e70 2e6d              np.m
-00001540: 6174 6d75 6c28 0d0a 2020 2020 2020 2020  atmul(..        
-00001550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001560: 636f 696e 745f 6a6f 6861 6e73 656e 286c  coint_johansen(l
-00001570: 6f63 616c 5f64 662e 7661 6c75 6573 2c20  ocal_df.values, 
-00001580: 6b5f 6172 5f64 6966 663d 636f 696e 7465  k_ar_diff=cointe
-00001590: 6772 6174 696f 6e5f 6c61 6729 2c0d 0a20  gration_lag),.. 
-000015a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000015b0: 2020 2020 2020 2028 6c6f 6361 6c5f 6466         (local_df
-000015c0: 2e76 616c 7565 7329 2e54 2c0d 0a20 2020  .values).T,..   
-000015d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000015e0: 2029 2e54 2c0d 0a20 2020 2020 2020 2020   ).T,..         
-000015f0: 2020 2020 2020 2020 2020 2069 6e64 6578             index
-00001600: 3d6c 6f63 616c 5f64 662e 696e 6465 782c  =local_df.index,
-00001610: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001620: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00001630: 2029 0d0a 2020 2020 6966 2061 6273 5f65   )..    if abs_e
-00001640: 6e65 7267 793a 0d0a 2020 2020 2020 2020  nergy:..        
-00001650: 582e 6170 7065 6e64 286c 6f63 616c 5f64  X.append(local_d
-00001660: 662e 706f 7728 6f74 6865 723d 285b 325d  f.pow(other=([2]
-00001670: 202a 206c 656e 286c 6f63 616c 5f64 662e   * len(local_df.
-00001680: 636f 6c75 6d6e 7329 2929 2e63 756d 7375  columns))).cumsu
-00001690: 6d28 2929 0d0a 2020 2020 6966 2073 7472  m())..    if str
-000016a0: 2872 6f6c 6c69 6e67 5f61 7574 6f63 6f72  (rolling_autocor
-000016b0: 725f 7065 7269 6f64 7329 2e69 7364 6967  r_periods).isdig
-000016c0: 6974 2829 3a0d 0a20 2020 2020 2020 2074  it():..        t
-000016d0: 656d 7020 3d20 6c6f 6361 6c5f 6466 2e72  emp = local_df.r
-000016e0: 6f6c 6c69 6e67 2872 6f6c 6c69 6e67 5f61  olling(rolling_a
-000016f0: 7574 6f63 6f72 725f 7065 7269 6f64 7329  utocorr_periods)
-00001700: 2e61 7070 6c79 280d 0a20 2020 2020 2020  .apply(..       
-00001710: 2020 2020 206c 616d 6264 6120 783a 2078       lambda x: x
-00001720: 2e61 7574 6f63 6f72 7228 292c 2072 6177  .autocorr(), raw
-00001730: 3d46 616c 7365 0d0a 2020 2020 2020 2020  =False..        
-00001740: 290d 0a20 2020 2020 2020 2058 2e61 7070  )..        X.app
-00001750: 656e 6428 7465 6d70 290d 0a20 2020 2023  end(temp)..    #
-00001760: 2075 6e6c 696b 6520 7468 6520 6f74 6865   unlike the othe
-00001770: 7273 2c20 7468 6973 2070 756c 6c73 2074  rs, this pulls t
-00001780: 6865 2065 6e74 6972 6520 7769 6e64 6f77  he entire window
-00001790: 2c20 6e6f 7420 6a75 7374 206f 6e65 206c  , not just one l
-000017a0: 6167 0d0a 2020 2020 6966 2073 7472 2877  ag..    if str(w
-000017b0: 696e 646f 7729 2e69 7364 6967 6974 2829  indow).isdigit()
-000017c0: 3a0d 0a20 2020 2020 2020 2023 2077 6520  :..        # we 
-000017d0: 616c 7265 6164 7920 6861 7665 206c 6167  already have lag
-000017e0: 2031 2075 7369 6e67 2074 6869 730d 0a20   1 using this.. 
-000017f0: 2020 2020 2020 2066 6f72 2063 7572 725f         for curr_
-00001800: 7368 6966 7420 696e 2072 616e 6765 2831  shift in range(1
-00001810: 2c20 7769 6e64 6f77 293a 0d0a 2020 2020  , window):..    
-00001820: 2020 2020 2020 2020 582e 6170 7065 6e64          X.append
-00001830: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00001840: 2020 206c 6f63 616c 5f64 662e 7368 6966     local_df.shif
-00001850: 7428 6375 7272 5f73 6869 6674 292e 7265  t(curr_shift).re
-00001860: 6e61 6d65 280d 0a20 2020 2020 2020 2020  name(..         
-00001870: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00001880: 6e73 3d6c 616d 6264 6120 783a 2022 7769  ns=lambda x: "wi
-00001890: 6e64 6f77 5f22 202b 2073 7472 2863 7572  ndow_" + str(cur
-000018a0: 725f 7368 6966 7429 202b 2022 5f22 202b  r_shift) + "_" +
-000018b0: 2078 0d0a 2020 2020 2020 2020 2020 2020   x..            
-000018c0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-000018d0: 2020 2029 2020 2320 6261 636b 6669 6c6c     )  # backfill
-000018e0: 2073 686f 756c 6420 6669 6c6c 206c 6173   should fill las
-000018f0: 7420 7661 6c75 6573 2073 6166 656c 790d  t values safely.
-00001900: 0a0d 0a20 2020 2069 6620 6164 645f 6461  ...    if add_da
-00001910: 7465 5f70 6172 7420 6e6f 7420 696e 205b  te_part not in [
-00001920: 4e6f 6e65 2c20 224e 6f6e 6522 2c20 226e  None, "None", "n
-00001930: 6f6e 6522 5d3a 0d0a 2020 2020 2020 2020  one"]:..        
-00001940: 6168 6561 645f 696e 6465 7820 3d20 6c6f  ahead_index = lo
-00001950: 6361 6c5f 6466 2e69 6e64 6578 2e73 6869  cal_df.index.shi
-00001960: 6674 2831 2c20 6672 6571 3d69 6e66 6572  ft(1, freq=infer
-00001970: 7265 645f 6672 6571 290d 0a20 2020 2020  red_freq)..     
-00001980: 2020 2064 6174 655f 7061 7274 5f64 6620     date_part_df 
-00001990: 3d20 6461 7465 5f70 6172 7428 6168 6561  = date_part(ahea
-000019a0: 645f 696e 6465 782c 206d 6574 686f 643d  d_index, method=
-000019b0: 6164 645f 6461 7465 5f70 6172 7429 0d0a  add_date_part)..
-000019c0: 2020 2020 2020 2020 6461 7465 5f70 6172          date_par
-000019d0: 745f 6466 2e69 6e64 6578 203d 206c 6f63  t_df.index = loc
-000019e0: 616c 5f64 662e 696e 6465 780d 0a20 2020  al_df.index..   
-000019f0: 2020 2020 2058 2e61 7070 656e 6428 6461       X.append(da
-00001a00: 7465 5f70 6172 745f 6466 290d 0a20 2020  te_part_df)..   
-00001a10: 2058 203d 2070 642e 636f 6e63 6174 2858   X = pd.concat(X
-00001a20: 2c20 6178 6973 3d31 290d 0a0d 0a20 2020  , axis=1)....   
-00001a30: 2069 6620 686f 6c69 6461 793a 0d0a 2020   if holiday:..  
-00001a40: 2020 2020 2020 6168 6561 645f 696e 6465        ahead_inde
-00001a50: 7820 3d20 6c6f 6361 6c5f 6466 2e69 6e64  x = local_df.ind
-00001a60: 6578 2e73 6869 6674 2831 2c20 6672 6571  ex.shift(1, freq
-00001a70: 3d69 6e66 6572 7265 645f 6672 6571 290d  =inferred_freq).
-00001a80: 0a20 2020 2020 2020 2061 6865 6164 5f32  .        ahead_2
-00001a90: 5f69 6e64 6578 203d 206c 6f63 616c 5f64  _index = local_d
-00001aa0: 662e 696e 6465 782e 7368 6966 7428 322c  f.index.shift(2,
-00001ab0: 2066 7265 713d 696e 6665 7272 6564 5f66   freq=inferred_f
-00001ac0: 7265 7129 0d0a 2020 2020 2020 2020 6675  req)..        fu
-00001ad0: 6c6c 5f69 6e64 6578 203d 2061 6865 6164  ll_index = ahead
-00001ae0: 5f69 6e64 6578 2e75 6e69 6f6e 2861 6865  _index.union(ahe
-00001af0: 6164 5f32 5f69 6e64 6578 290d 0a20 2020  ad_2_index)..   
-00001b00: 2020 2020 2068 6c64 666c 6167 203d 2068       hldflag = h
-00001b10: 6f6c 6964 6179 5f66 6c61 6728 6675 6c6c  oliday_flag(full
-00001b20: 5f69 6e64 6578 2c20 636f 756e 7472 793d  _index, country=
-00001b30: 686f 6c69 6461 795f 636f 756e 7472 7929  holiday_country)
-00001b40: 0d0a 2020 2020 2020 2020 585b 2768 6f6c  ..        X['hol
-00001b50: 6964 6179 5f66 6c61 675f 275d 203d 2068  iday_flag_'] = h
-00001b60: 6c64 666c 6167 2e72 6569 6e64 6578 2861  ldflag.reindex(a
-00001b70: 6865 6164 5f69 6e64 6578 292e 746f 5f6e  head_index).to_n
-00001b80: 756d 7079 2829 0d0a 2020 2020 2020 2020  umpy()..        
-00001b90: 585b 2768 6f6c 6964 6179 5f66 6c61 675f  X['holiday_flag_
-00001ba0: 6675 7475 7265 5f27 5d20 3d20 686c 6466  future_'] = hldf
-00001bb0: 6c61 672e 7265 696e 6465 7828 6168 6561  lag.reindex(ahea
-00001bc0: 645f 325f 696e 6465 7829 2e74 6f5f 6e75  d_2_index).to_nu
-00001bd0: 6d70 7928 290d 0a0d 0a20 2020 2023 2058  mpy()....    # X
-00001be0: 203d 2058 2e72 6570 6c61 6365 285b 6e70   = X.replace([np
-00001bf0: 2e69 6e66 2c20 2d6e 702e 696e 665d 2c20  .inf, -np.inf], 
-00001c00: 6e70 2e6e 616e 290d 0a20 2020 2058 203d  np.nan)..    X =
-00001c10: 2058 2e62 6669 6c6c 2829 0d0a 0d0a 2020   X.bfill()....  
-00001c20: 2020 6966 2073 7472 2870 6f6c 796e 6f6d    if str(polynom
-00001c30: 6961 6c5f 6465 6772 6565 292e 6973 6469  ial_degree).isdi
-00001c40: 6769 7428 293a 0d0a 2020 2020 2020 2020  git():..        
-00001c50: 706f 6c79 6e6f 6d69 616c 5f64 6567 7265  polynomial_degre
-00001c60: 6520 3d20 6162 7328 696e 7428 706f 6c79  e = abs(int(poly
-00001c70: 6e6f 6d69 616c 5f64 6567 7265 6529 290d  nomial_degree)).
-00001c80: 0a20 2020 2020 2020 2066 726f 6d20 736b  .        from sk
-00001c90: 6c65 6172 6e2e 7072 6570 726f 6365 7373  learn.preprocess
-00001ca0: 696e 6720 696d 706f 7274 2050 6f6c 796e  ing import Polyn
-00001cb0: 6f6d 6961 6c46 6561 7475 7265 730d 0a0d  omialFeatures...
-00001cc0: 0a20 2020 2020 2020 2070 6f6c 7920 3d20  .        poly = 
-00001cd0: 506f 6c79 6e6f 6d69 616c 4665 6174 7572  PolynomialFeatur
-00001ce0: 6573 2870 6f6c 796e 6f6d 6961 6c5f 6465  es(polynomial_de
-00001cf0: 6772 6565 290d 0a20 2020 2020 2020 2058  gree)..        X
-00001d00: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
-00001d10: 706f 6c79 2e66 6974 5f74 7261 6e73 666f  poly.fit_transfo
-00001d20: 726d 2858 2929 0d0a 0d0a 2020 2020 2320  rm(X))....    # 
-00001d30: 7265 6e61 6d65 2074 6f20 7265 6d6f 7665  rename to remove
-00001d40: 2064 7570 6c69 6361 7465 7320 6275 7420   duplicates but 
-00001d50: 7374 696c 6c20 6b65 6570 206e 616d 6573  still keep names
-00001d60: 2069 6620 7072 6573 656e 740d 0a20 2020   if present..   
-00001d70: 2058 2e63 6f6c 756d 6e73 203d 205b 0d0a   X.columns = [..
-00001d80: 2020 2020 2020 2020 6d20 2b20 225f 2220          m + "_" 
-00001d90: 2b20 7374 7228 6e29 0d0a 2020 2020 2020  + str(n)..      
-00001da0: 2020 666f 7220 6d2c 206e 2069 6e20 7a69    for m, n in zi
-00001db0: 7028 5b73 7472 2878 2920 666f 7220 7820  p([str(x) for x 
-00001dc0: 696e 2072 616e 6765 286c 656e 2858 2e63  in range(len(X.c
-00001dd0: 6f6c 756d 6e73 2929 5d2c 2058 2e63 6f6c  olumns))], X.col
-00001de0: 756d 6e73 2e74 6f6c 6973 7428 2929 0d0a  umns.tolist())..
-00001df0: 2020 2020 5d0d 0a0d 0a20 2020 2072 6574      ]....    ret
-00001e00: 7572 6e20 580d 0a0d 0a0d 0a64 6566 2072  urn X......def r
-00001e10: 6f6c 6c69 6e67 5f78 5f72 6567 7265 7373  olling_x_regress
-00001e20: 6f72 5f72 6567 7265 7373 6f72 280d 0a20  or_regressor(.. 
-00001e30: 2020 2064 662c 0d0a 2020 2020 6d65 616e     df,..    mean
-00001e40: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-00001e50: 3a20 696e 7420 3d20 3330 2c0d 0a20 2020  : int = 30,..   
-00001e60: 206d 6163 645f 7065 7269 6f64 733a 2069   macd_periods: i
-00001e70: 6e74 203d 204e 6f6e 652c 0d0a 2020 2020  nt = None,..    
-00001e80: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
-00001e90: 6f64 733a 2069 6e74 203d 2037 2c0d 0a20  ods: int = 7,.. 
-00001ea0: 2020 206d 6178 5f72 6f6c 6c69 6e67 5f70     max_rolling_p
-00001eb0: 6572 696f 6473 3a20 696e 7420 3d20 4e6f  eriods: int = No
-00001ec0: 6e65 2c0d 0a20 2020 206d 696e 5f72 6f6c  ne,..    min_rol
-00001ed0: 6c69 6e67 5f70 6572 696f 6473 3a20 696e  ling_periods: in
-00001ee0: 7420 3d20 4e6f 6e65 2c0d 0a20 2020 2071  t = None,..    q
-00001ef0: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
-00001f00: 675f 7065 7269 6f64 733a 2069 6e74 203d  g_periods: int =
-00001f10: 204e 6f6e 652c 0d0a 2020 2020 7175 616e   None,..    quan
-00001f20: 7469 6c65 3130 5f72 6f6c 6c69 6e67 5f70  tile10_rolling_p
-00001f30: 6572 696f 6473 3a20 696e 7420 3d20 4e6f  eriods: int = No
-00001f40: 6e65 2c0d 0a20 2020 2065 776d 5f61 6c70  ne,..    ewm_alp
-00001f50: 6861 3a20 666c 6f61 7420 3d20 302e 352c  ha: float = 0.5,
-00001f60: 0d0a 2020 2020 6577 6d5f 7661 725f 616c  ..    ewm_var_al
-00001f70: 7068 613a 2066 6c6f 6174 203d 204e 6f6e  pha: float = Non
-00001f80: 652c 0d0a 2020 2020 6164 6469 7469 6f6e  e,..    addition
-00001f90: 616c 5f6c 6167 5f70 6572 696f 6473 3a20  al_lag_periods: 
-00001fa0: 696e 7420 3d20 372c 0d0a 2020 2020 6162  int = 7,..    ab
-00001fb0: 735f 656e 6572 6779 3a20 626f 6f6c 203d  s_energy: bool =
-00001fc0: 2046 616c 7365 2c0d 0a20 2020 2072 6f6c   False,..    rol
-00001fd0: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
-00001fe0: 7269 6f64 733a 2069 6e74 203d 204e 6f6e  riods: int = Non
-00001ff0: 652c 0d0a 2020 2020 6e6f 6e7a 6572 6f5f  e,..    nonzero_
-00002000: 6c61 7374 5f6e 3a20 696e 7420 3d20 4e6f  last_n: int = No
-00002010: 6e65 2c0d 0a20 2020 2061 6464 5f64 6174  ne,..    add_dat
-00002020: 655f 7061 7274 3a20 7374 7220 3d20 4e6f  e_part: str = No
-00002030: 6e65 2c0d 0a20 2020 2068 6f6c 6964 6179  ne,..    holiday
-00002040: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
-00002050: 0a20 2020 2068 6f6c 6964 6179 5f63 6f75  .    holiday_cou
-00002060: 6e74 7279 3a20 7374 7220 3d20 2755 5327  ntry: str = 'US'
-00002070: 2c0d 0a20 2020 2070 6f6c 796e 6f6d 6961  ,..    polynomia
-00002080: 6c5f 6465 6772 6565 3a20 696e 7420 3d20  l_degree: int = 
-00002090: 4e6f 6e65 2c0d 0a20 2020 2077 696e 646f  None,..    windo
-000020a0: 773a 2069 6e74 203d 204e 6f6e 652c 0d0a  w: int = None,..
-000020b0: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
-000020c0: 7373 6f72 3d4e 6f6e 652c 0d0a 2020 2020  ssor=None,..    
-000020d0: 636f 696e 7465 6772 6174 696f 6e3a 2073  cointegration: s
-000020e0: 7472 203d 204e 6f6e 652c 0d0a 2020 2020  tr = None,..    
-000020f0: 636f 696e 7465 6772 6174 696f 6e5f 6c61  cointegration_la
-00002100: 673a 2069 6e74 203d 2031 2c0d 0a29 3a0d  g: int = 1,..):.
-00002110: 0a20 2020 2022 2222 4164 6473 2069 6e20  .    """Adds in 
-00002120: 7468 6520 6675 7475 7265 5f72 6567 7265  the future_regre
-00002130: 7373 6f72 2e22 2222 0d0a 2020 2020 5820  ssor."""..    X 
-00002140: 3d20 726f 6c6c 696e 675f 785f 7265 6772  = rolling_x_regr
-00002150: 6573 736f 7228 0d0a 2020 2020 2020 2020  essor(..        
-00002160: 6466 2c0d 0a20 2020 2020 2020 206d 6561  df,..        mea
-00002170: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
-00002180: 733d 6d65 616e 5f72 6f6c 6c69 6e67 5f70  s=mean_rolling_p
-00002190: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-000021a0: 206d 6163 645f 7065 7269 6f64 733d 6d61   macd_periods=ma
-000021b0: 6364 5f70 6572 696f 6473 2c0d 0a20 2020  cd_periods,..   
-000021c0: 2020 2020 2073 7464 5f72 6f6c 6c69 6e67       std_rolling
-000021d0: 5f70 6572 696f 6473 3d73 7464 5f72 6f6c  _periods=std_rol
-000021e0: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
-000021f0: 2020 2020 2020 206d 6178 5f72 6f6c 6c69         max_rolli
-00002200: 6e67 5f70 6572 696f 6473 3d6d 6178 5f72  ng_periods=max_r
-00002210: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
-00002220: 0a20 2020 2020 2020 206d 696e 5f72 6f6c  .        min_rol
-00002230: 6c69 6e67 5f70 6572 696f 6473 3d6d 696e  ling_periods=min
-00002240: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-00002250: 2c0d 0a20 2020 2020 2020 2065 776d 5f76  ,..        ewm_v
-00002260: 6172 5f61 6c70 6861 3d65 776d 5f76 6172  ar_alpha=ewm_var
-00002270: 5f61 6c70 6861 2c0d 0a20 2020 2020 2020  _alpha,..       
-00002280: 2071 7561 6e74 696c 6539 305f 726f 6c6c   quantile90_roll
-00002290: 696e 675f 7065 7269 6f64 733d 7175 616e  ing_periods=quan
-000022a0: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
-000022b0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-000022c0: 2071 7561 6e74 696c 6531 305f 726f 6c6c   quantile10_roll
-000022d0: 696e 675f 7065 7269 6f64 733d 7175 616e  ing_periods=quan
-000022e0: 7469 6c65 3130 5f72 6f6c 6c69 6e67 5f70  tile10_rolling_p
-000022f0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-00002300: 2061 6464 6974 696f 6e61 6c5f 6c61 675f   additional_lag_
-00002310: 7065 7269 6f64 733d 6164 6469 7469 6f6e  periods=addition
-00002320: 616c 5f6c 6167 5f70 6572 696f 6473 2c0d  al_lag_periods,.
-00002330: 0a20 2020 2020 2020 2065 776d 5f61 6c70  .        ewm_alp
-00002340: 6861 3d65 776d 5f61 6c70 6861 2c0d 0a20  ha=ewm_alpha,.. 
-00002350: 2020 2020 2020 2061 6273 5f65 6e65 7267         abs_energ
-00002360: 793d 6162 735f 656e 6572 6779 2c0d 0a20  y=abs_energy,.. 
-00002370: 2020 2020 2020 2072 6f6c 6c69 6e67 5f61         rolling_a
-00002380: 7574 6f63 6f72 725f 7065 7269 6f64 733d  utocorr_periods=
-00002390: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
-000023a0: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-000023b0: 2020 206e 6f6e 7a65 726f 5f6c 6173 745f     nonzero_last_
-000023c0: 6e3d 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e  n=nonzero_last_n
-000023d0: 2c0d 0a20 2020 2020 2020 2061 6464 5f64  ,..        add_d
-000023e0: 6174 655f 7061 7274 3d61 6464 5f64 6174  ate_part=add_dat
-000023f0: 655f 7061 7274 2c0d 0a20 2020 2020 2020  e_part,..       
-00002400: 2068 6f6c 6964 6179 3d68 6f6c 6964 6179   holiday=holiday
-00002410: 2c0d 0a20 2020 2020 2020 2068 6f6c 6964  ,..        holid
-00002420: 6179 5f63 6f75 6e74 7279 3d68 6f6c 6964  ay_country=holid
-00002430: 6179 5f63 6f75 6e74 7279 2c0d 0a20 2020  ay_country,..   
-00002440: 2020 2020 2070 6f6c 796e 6f6d 6961 6c5f       polynomial_
-00002450: 6465 6772 6565 3d70 6f6c 796e 6f6d 6961  degree=polynomia
-00002460: 6c5f 6465 6772 6565 2c0d 0a20 2020 2020  l_degree,..     
-00002470: 2020 2077 696e 646f 773d 7769 6e64 6f77     window=window
-00002480: 2c0d 0a20 2020 2020 2020 2063 6f69 6e74  ,..        coint
-00002490: 6567 7261 7469 6f6e 3d63 6f69 6e74 6567  egration=cointeg
-000024a0: 7261 7469 6f6e 2c0d 0a20 2020 2020 2020  ration,..       
-000024b0: 2063 6f69 6e74 6567 7261 7469 6f6e 5f6c   cointegration_l
-000024c0: 6167 3d63 6f69 6e74 6567 7261 7469 6f6e  ag=cointegration
-000024d0: 5f6c 6167 2c0d 0a20 2020 2029 0d0a 2020  _lag,..    )..  
-000024e0: 2020 6966 2066 7574 7572 655f 7265 6772    if future_regr
-000024f0: 6573 736f 7220 6973 206e 6f74 204e 6f6e  essor is not Non
-00002500: 653a 0d0a 2020 2020 2020 2020 5820 3d20  e:..        X = 
-00002510: 7064 2e63 6f6e 6361 7428 5b58 2c20 6675  pd.concat([X, fu
-00002520: 7475 7265 5f72 6567 7265 7373 6f72 5d2c  ture_regressor],
-00002530: 2061 7869 733d 3129 0d0a 2020 2020 7265   axis=1)..    re
-00002540: 7475 726e 2058 0d0a 0d0a 0d0a 6465 6620  turn X......def 
-00002550: 7265 7472 6965 7665 5f72 6567 7265 7373  retrieve_regress
-00002560: 6f72 280d 0a20 2020 2072 6567 7265 7373  or(..    regress
-00002570: 696f 6e5f 6d6f 6465 6c3a 2064 6963 7420  ion_model: dict 
-00002580: 3d20 7b0d 0a20 2020 2020 2020 2022 6d6f  = {..        "mo
-00002590: 6465 6c22 3a20 2752 616e 646f 6d46 6f72  del": 'RandomFor
-000025a0: 6573 7427 2c0d 0a20 2020 2020 2020 2022  est',..        "
-000025b0: 6d6f 6465 6c5f 7061 7261 6d73 223a 207b  model_params": {
-000025c0: 0d0a 2020 2020 2020 2020 2020 2020 276e  ..            'n
-000025d0: 5f65 7374 696d 6174 6f72 7327 3a20 3330  _estimators': 30
-000025e0: 302c 0d0a 2020 2020 2020 2020 2020 2020  0,..            
-000025f0: 276d 696e 5f73 616d 706c 6573 5f6c 6561  'min_samples_lea
-00002600: 6627 3a20 312c 0d0a 2020 2020 2020 2020  f': 1,..        
-00002610: 2020 2020 2762 6f6f 7473 7472 6170 273a      'bootstrap':
-00002620: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
-00002630: 207d 2c0d 0a20 2020 207d 2c0d 0a20 2020   },..    },..   
-00002640: 2076 6572 626f 7365 3a20 696e 7420 3d20   verbose: int = 
-00002650: 302c 0d0a 2020 2020 7665 7262 6f73 655f  0,..    verbose_
-00002660: 626f 6f6c 3a20 626f 6f6c 203d 2046 616c  bool: bool = Fal
-00002670: 7365 2c0d 0a20 2020 2072 616e 646f 6d5f  se,..    random_
-00002680: 7365 6564 3a20 696e 7420 3d20 3230 3230  seed: int = 2020
-00002690: 2c0d 0a20 2020 206e 5f6a 6f62 733a 2069  ,..    n_jobs: i
-000026a0: 6e74 203d 2031 2c0d 0a20 2020 206d 756c  nt = 1,..    mul
-000026b0: 7469 6f75 7470 7574 3a20 626f 6f6c 203d  tioutput: bool =
-000026c0: 2054 7275 652c 0d0a 293a 0d0a 2020 2020   True,..):..    
-000026d0: 2222 2243 6f6e 7665 7274 2061 206d 6f64  """Convert a mod
-000026e0: 656c 2070 6172 616d 2064 6963 7420 746f  el param dict to
-000026f0: 206d 6f64 656c 206f 626a 6563 7420 666f   model object fo
-00002700: 7220 7265 6772 6573 7369 6f6e 2066 7261  r regression fra
-00002710: 6d65 776f 726b 732e 2222 220d 0a20 2020  meworks."""..   
-00002720: 206d 6f64 656c 5f63 6c61 7373 203d 2072   model_class = r
-00002730: 6567 7265 7373 696f 6e5f 6d6f 6465 6c5b  egression_model[
-00002740: 276d 6f64 656c 275d 0d0a 2020 2020 6d6f  'model']..    mo
-00002750: 6465 6c5f 7061 7261 6d5f 6469 6374 203d  del_param_dict =
-00002760: 2072 6567 7265 7373 696f 6e5f 6d6f 6465   regression_mode
-00002770: 6c2e 6765 7428 226d 6f64 656c 5f70 6172  l.get("model_par
-00002780: 616d 7322 2c20 7b7d 290d 0a20 2020 2069  ams", {})..    i
-00002790: 6620 6d6f 6465 6c5f 636c 6173 7320 3d3d  f model_class ==
-000027a0: 2027 456c 6173 7469 634e 6574 273a 0d0a   'ElasticNet':..
-000027b0: 2020 2020 2020 2020 6966 206d 756c 7469          if multi
-000027c0: 6f75 7470 7574 3a0d 0a20 2020 2020 2020  output:..       
-000027d0: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
-000027e0: 6e2e 6c69 6e65 6172 5f6d 6f64 656c 2069  n.linear_model i
-000027f0: 6d70 6f72 7420 4d75 6c74 6954 6173 6b45  mport MultiTaskE
-00002800: 6c61 7374 6963 4e65 740d 0a0d 0a20 2020  lasticNet....   
-00002810: 2020 2020 2020 2020 2072 6567 7220 3d20           regr = 
-00002820: 4d75 6c74 6954 6173 6b45 6c61 7374 6963  MultiTaskElastic
-00002830: 4e65 7428 0d0a 2020 2020 2020 2020 2020  Net(..          
-00002840: 2020 2020 2020 616c 7068 613d 312e 302c        alpha=1.0,
-00002850: 2072 616e 646f 6d5f 7374 6174 653d 7261   random_state=ra
-00002860: 6e64 6f6d 5f73 6565 642c 202a 2a6d 6f64  ndom_seed, **mod
-00002870: 656c 5f70 6172 616d 5f64 6963 740d 0a20  el_param_dict.. 
-00002880: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00002890: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000028a0: 2020 2020 2020 2020 2066 726f 6d20 736b           from sk
-000028b0: 6c65 6172 6e2e 6c69 6e65 6172 5f6d 6f64  learn.linear_mod
-000028c0: 656c 2069 6d70 6f72 7420 456c 6173 7469  el import Elasti
-000028d0: 634e 6574 0d0a 0d0a 2020 2020 2020 2020  cNet....        
-000028e0: 2020 2020 7265 6772 203d 2045 6c61 7374      regr = Elast
-000028f0: 6963 4e65 7428 616c 7068 613d 312e 302c  icNet(alpha=1.0,
-00002900: 2072 616e 646f 6d5f 7374 6174 653d 7261   random_state=ra
-00002910: 6e64 6f6d 5f73 6565 642c 202a 2a6d 6f64  ndom_seed, **mod
-00002920: 656c 5f70 6172 616d 5f64 6963 7429 0d0a  el_param_dict)..
-00002930: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00002940: 6567 720d 0a20 2020 2065 6c69 6620 6d6f  egr..    elif mo
-00002950: 6465 6c5f 636c 6173 7320 3d3d 2027 4465  del_class == 'De
-00002960: 6369 7369 6f6e 5472 6565 273a 0d0a 2020  cisionTree':..  
-00002970: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
-00002980: 726e 2e74 7265 6520 696d 706f 7274 2044  rn.tree import D
-00002990: 6563 6973 696f 6e54 7265 6552 6567 7265  ecisionTreeRegre
-000029a0: 7373 6f72 0d0a 0d0a 2020 2020 2020 2020  ssor....        
-000029b0: 7265 6772 203d 2044 6563 6973 696f 6e54  regr = DecisionT
-000029c0: 7265 6552 6567 7265 7373 6f72 2872 616e  reeRegressor(ran
-000029d0: 646f 6d5f 7374 6174 653d 7261 6e64 6f6d  dom_state=random
-000029e0: 5f73 6565 642c 202a 2a6d 6f64 656c 5f70  _seed, **model_p
-000029f0: 6172 616d 5f64 6963 7429 0d0a 2020 2020  aram_dict)..    
-00002a00: 2020 2020 7265 7475 726e 2072 6567 720d      return regr.
-00002a10: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
-00002a20: 636c 6173 7320 3d3d 2027 4d4c 5027 3a0d  class == 'MLP':.
-00002a30: 0a20 2020 2020 2020 2066 726f 6d20 736b  .        from sk
-00002a40: 6c65 6172 6e2e 6e65 7572 616c 5f6e 6574  learn.neural_net
-00002a50: 776f 726b 2069 6d70 6f72 7420 4d4c 5052  work import MLPR
-00002a60: 6567 7265 7373 6f72 0d0a 0d0a 2020 2020  egressor....    
-00002a70: 2020 2020 7265 6772 203d 204d 4c50 5265      regr = MLPRe
-00002a80: 6772 6573 736f 7228 0d0a 2020 2020 2020  gressor(..      
-00002a90: 2020 2020 2020 7261 6e64 6f6d 5f73 7461        random_sta
-00002aa0: 7465 3d72 616e 646f 6d5f 7365 6564 2c20  te=random_seed, 
-00002ab0: 7665 7262 6f73 653d 7665 7262 6f73 655f  verbose=verbose_
-00002ac0: 626f 6f6c 2c20 2a2a 6d6f 6465 6c5f 7061  bool, **model_pa
-00002ad0: 7261 6d5f 6469 6374 0d0a 2020 2020 2020  ram_dict..      
-00002ae0: 2020 290d 0a20 2020 2020 2020 2072 6574    )..        ret
-00002af0: 7572 6e20 7265 6772 0d0a 2020 2020 656c  urn regr..    el
-00002b00: 6966 206d 6f64 656c 5f63 6c61 7373 203d  if model_class =
-00002b10: 3d20 274b 6572 6173 524e 4e27 3a0d 0a20  = 'KerasRNN':.. 
-00002b20: 2020 2020 2020 2066 726f 6d20 6175 746f         from auto
-00002b30: 7473 2e6d 6f64 656c 732e 646e 6e20 696d  ts.models.dnn im
-00002b40: 706f 7274 204b 6572 6173 524e 4e0d 0a0d  port KerasRNN...
-00002b50: 0a20 2020 2020 2020 2072 6567 7220 3d20  .        regr = 
-00002b60: 4b65 7261 7352 4e4e 2876 6572 626f 7365  KerasRNN(verbose
-00002b70: 3d76 6572 626f 7365 2c20 7261 6e64 6f6d  =verbose, random
-00002b80: 5f73 6565 643d 7261 6e64 6f6d 5f73 6565  _seed=random_see
-00002b90: 642c 202a 2a6d 6f64 656c 5f70 6172 616d  d, **model_param
-00002ba0: 5f64 6963 7429 0d0a 2020 2020 2020 2020  _dict)..        
-00002bb0: 7265 7475 726e 2072 6567 720d 0a20 2020  return regr..   
-00002bc0: 2065 6c69 6620 6d6f 6465 6c5f 636c 6173   elif model_clas
-00002bd0: 7320 3d3d 2027 5472 616e 7366 6f72 6d65  s == 'Transforme
-00002be0: 7227 3a0d 0a20 2020 2020 2020 2066 726f  r':..        fro
-00002bf0: 6d20 6175 746f 7473 2e6d 6f64 656c 732e  m autots.models.
-00002c00: 646e 6e20 696d 706f 7274 2054 7261 6e73  dnn import Trans
-00002c10: 666f 726d 6572 0d0a 0d0a 2020 2020 2020  former....      
-00002c20: 2020 7265 6772 203d 2054 7261 6e73 666f    regr = Transfo
-00002c30: 726d 6572 2876 6572 626f 7365 3d76 6572  rmer(verbose=ver
-00002c40: 626f 7365 2c20 7261 6e64 6f6d 5f73 6565  bose, random_see
-00002c50: 643d 7261 6e64 6f6d 5f73 6565 642c 202a  d=random_seed, *
-00002c60: 2a6d 6f64 656c 5f70 6172 616d 5f64 6963  *model_param_dic
-00002c70: 7429 0d0a 2020 2020 2020 2020 7265 7475  t)..        retu
-00002c80: 726e 2072 6567 720d 0a20 2020 2065 6c69  rn regr..    eli
-00002c90: 6620 6d6f 6465 6c5f 636c 6173 7320 3d3d  f model_class ==
-00002ca0: 2027 4b4e 4e27 3a0d 0a20 2020 2020 2020   'KNN':..       
-00002cb0: 2066 726f 6d20 736b 6c65 6172 6e2e 6e65   from sklearn.ne
-00002cc0: 6967 6862 6f72 7320 696d 706f 7274 204b  ighbors import K
-00002cd0: 4e65 6967 6862 6f72 7352 6567 7265 7373  NeighborsRegress
-00002ce0: 6f72 0d0a 0d0a 2020 2020 2020 2020 6966  or....        if
-00002cf0: 206d 756c 7469 6f75 7470 7574 3a0d 0a20   multioutput:.. 
-00002d00: 2020 2020 2020 2020 2020 2072 6567 7220             regr 
-00002d10: 3d20 4d75 6c74 694f 7574 7075 7452 6567  = MultiOutputReg
-00002d20: 7265 7373 6f72 280d 0a20 2020 2020 2020  ressor(..       
-00002d30: 2020 2020 2020 2020 204b 4e65 6967 6862           KNeighb
-00002d40: 6f72 7352 6567 7265 7373 6f72 282a 2a6d  orsRegressor(**m
-00002d50: 6f64 656c 5f70 6172 616d 5f64 6963 742c  odel_param_dict,
-00002d60: 206e 5f6a 6f62 733d 3129 2c0d 0a20 2020   n_jobs=1),..   
-00002d70: 2020 2020 2020 2020 2020 2020 206e 5f6a               n_j
-00002d80: 6f62 733d 6e5f 6a6f 6273 2c0d 0a20 2020  obs=n_jobs,..   
-00002d90: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00002da0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00002db0: 2020 2020 2020 2072 6567 7220 3d20 4b4e         regr = KN
-00002dc0: 6569 6768 626f 7273 5265 6772 6573 736f  eighborsRegresso
-00002dd0: 7228 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  r(**model_param_
-00002de0: 6469 6374 2c20 6e5f 6a6f 6273 3d6e 5f6a  dict, n_jobs=n_j
-00002df0: 6f62 7329 0d0a 2020 2020 2020 2020 7265  obs)..        re
-00002e00: 7475 726e 2072 6567 720d 0a20 2020 2065  turn regr..    e
-00002e10: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
-00002e20: 3d3d 2027 4869 7374 4772 6164 6965 6e74  == 'HistGradient
-00002e30: 426f 6f73 7427 3a0d 0a20 2020 2020 2020  Boost':..       
-00002e40: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00002e50: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
-00002e60: 6578 7065 7269 6d65 6e74 616c 2069 6d70  experimental imp
-00002e70: 6f72 7420 656e 6162 6c65 5f68 6973 745f  ort enable_hist_
-00002e80: 6772 6164 6965 6e74 5f62 6f6f 7374 696e  gradient_boostin
-00002e90: 6720 2023 206e 6f71 610d 0a20 2020 2020  g  # noqa..     
-00002ea0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00002eb0: 696f 6e3a 0d0a 2020 2020 2020 2020 2020  ion:..          
-00002ec0: 2020 7061 7373 0d0a 2020 2020 2020 2020    pass..        
-00002ed0: 6672 6f6d 2073 6b6c 6561 726e 2e65 6e73  from sklearn.ens
-00002ee0: 656d 626c 6520 696d 706f 7274 2048 6973  emble import His
-00002ef0: 7447 7261 6469 656e 7442 6f6f 7374 696e  tGradientBoostin
-00002f00: 6752 6567 7265 7373 6f72 0d0a 0d0a 2020  gRegressor....  
-00002f10: 2020 2020 2020 6966 206d 756c 7469 6f75        if multiou
-00002f20: 7470 7574 3a0d 0a20 2020 2020 2020 2020  tput:..         
-00002f30: 2020 2072 6567 7220 3d20 4d75 6c74 694f     regr = MultiO
-00002f40: 7574 7075 7452 6567 7265 7373 6f72 280d  utputRegressor(.
-00002f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002f60: 2048 6973 7447 7261 6469 656e 7442 6f6f   HistGradientBoo
-00002f70: 7374 696e 6752 6567 7265 7373 6f72 280d  stingRegressor(.
-00002f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002f90: 2020 2020 2076 6572 626f 7365 3d69 6e74       verbose=int
-00002fa0: 2876 6572 626f 7365 5f62 6f6f 6c29 2c0d  (verbose_bool),.
-00002fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002fc0: 2020 2020 2072 616e 646f 6d5f 7374 6174       random_stat
-00002fd0: 653d 7261 6e64 6f6d 5f73 6565 642c 0d0a  e=random_seed,..
-00002fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002ff0: 2020 2020 2a2a 6d6f 6465 6c5f 7061 7261      **model_para
-00003000: 6d5f 6469 6374 2c0d 0a20 2020 2020 2020  m_dict,..       
-00003010: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00003020: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00003030: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00003040: 2020 2020 2020 7265 6772 203d 2048 6973        regr = His
-00003050: 7447 7261 6469 656e 7442 6f6f 7374 696e  tGradientBoostin
-00003060: 6752 6567 7265 7373 6f72 280d 0a20 2020  gRegressor(..   
-00003070: 2020 2020 2020 2020 2020 2020 2076 6572               ver
-00003080: 626f 7365 3d69 6e74 2876 6572 626f 7365  bose=int(verbose
-00003090: 5f62 6f6f 6c29 2c0d 0a20 2020 2020 2020  _bool),..       
-000030a0: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
-000030b0: 7374 6174 653d 7261 6e64 6f6d 5f73 6565  state=random_see
-000030c0: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
-000030d0: 2020 2020 2a2a 6d6f 6465 6c5f 7061 7261      **model_para
-000030e0: 6d5f 6469 6374 2c0d 0a20 2020 2020 2020  m_dict,..       
-000030f0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00003100: 7265 7475 726e 2072 6567 720d 0a20 2020  return regr..   
-00003110: 2065 6c69 6620 6d6f 6465 6c5f 636c 6173   elif model_clas
-00003120: 7320 3d3d 2027 4c69 6768 7447 424d 273a  s == 'LightGBM':
-00003130: 0d0a 2020 2020 2020 2020 6672 6f6d 206c  ..        from l
-00003140: 6967 6874 6762 6d20 696d 706f 7274 204c  ightgbm import L
-00003150: 4742 4d52 6567 7265 7373 6f72 0d0a 0d0a  GBMRegressor....
-00003160: 2020 2020 2020 2020 6966 206d 756c 7469          if multi
-00003170: 6f75 7470 7574 3a0d 0a20 2020 2020 2020  output:..       
-00003180: 2020 2020 2072 6574 7572 6e20 4d75 6c74       return Mult
-00003190: 694f 7574 7075 7452 6567 7265 7373 6f72  iOutputRegressor
-000031a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000031b0: 2020 204c 4742 4d52 6567 7265 7373 6f72     LGBMRegressor
-000031c0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000031d0: 2020 2020 2020 2076 6572 626f 7365 3d2d         verbose=-
-000031e0: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-000031f0: 2020 2020 2020 2020 7261 6e64 6f6d 5f73          random_s
-00003200: 7461 7465 3d72 616e 646f 6d5f 7365 6564  tate=random_seed
-00003210: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003220: 2020 2020 2020 206e 5f6a 6f62 733d 312c         n_jobs=1,
-00003230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003240: 2020 2020 2020 2a2a 6d6f 6465 6c5f 7061        **model_pa
-00003250: 7261 6d5f 6469 6374 2c0d 0a20 2020 2020  ram_dict,..     
-00003260: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
-00003270: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00003280: 5f6a 6f62 733d 6e5f 6a6f 6273 2c0d 0a20  _jobs=n_jobs,.. 
-00003290: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-000032a0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000032b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000032c0: 4c47 424d 5265 6772 6573 736f 7228 0d0a  LGBMRegressor(..
-000032d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032e0: 7665 7262 6f73 653d 2d31 2c0d 0a20 2020  verbose=-1,..   
-000032f0: 2020 2020 2020 2020 2020 2020 2072 616e               ran
-00003300: 646f 6d5f 7374 6174 653d 7261 6e64 6f6d  dom_state=random
-00003310: 5f73 6565 642c 0d0a 2020 2020 2020 2020  _seed,..        
-00003320: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
-00003330: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
-00003340: 2020 2020 2020 2020 2a2a 6d6f 6465 6c5f          **model_
-00003350: 7061 7261 6d5f 6469 6374 2c0d 0a20 2020  param_dict,..   
-00003360: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00003370: 656c 6966 206d 6f64 656c 5f63 6c61 7373  elif model_class
-00003380: 203d 3d20 224c 6967 6874 4742 4d52 6567   == "LightGBMReg
-00003390: 7265 7373 6f72 4368 6169 6e22 3a0d 0a20  ressorChain":.. 
-000033a0: 2020 2020 2020 2066 726f 6d20 6c69 6768         from ligh
-000033b0: 7467 626d 2069 6d70 6f72 7420 4c47 424d  tgbm import LGBM
-000033c0: 5265 6772 6573 736f 720d 0a0d 0a20 2020  Regressor....   
-000033d0: 2020 2020 2072 6567 7220 3d20 4c47 424d       regr = LGBM
-000033e0: 5265 6772 6573 736f 7228 0d0a 2020 2020  Regressor(..    
-000033f0: 2020 2020 2020 2020 7665 7262 6f73 653d          verbose=
-00003400: 2d31 2c0d 0a20 2020 2020 2020 2020 2020  -1,..           
-00003410: 2072 616e 646f 6d5f 7374 6174 653d 7261   random_state=ra
-00003420: 6e64 6f6d 5f73 6565 642c 0d0a 2020 2020  ndom_seed,..    
-00003430: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
-00003440: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
-00003450: 2020 2020 2a2a 6d6f 6465 6c5f 7061 7261      **model_para
-00003460: 6d5f 6469 6374 2c0d 0a20 2020 2020 2020  m_dict,..       
-00003470: 2029 0d0a 2020 2020 2020 2020 6966 206d   )..        if m
-00003480: 756c 7469 6f75 7470 7574 3a0d 0a20 2020  ultioutput:..   
-00003490: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000034a0: 5265 6772 6573 736f 7243 6861 696e 2872  RegressorChain(r
-000034b0: 6567 7229 0d0a 2020 2020 2020 2020 656c  egr)..        el
-000034c0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-000034d0: 2072 6574 7572 6e20 7265 6772 0d0a 2020   return regr..  
-000034e0: 2020 656c 6966 206d 6f64 656c 5f63 6c61    elif model_cla
-000034f0: 7373 203d 3d20 2741 6461 626f 6f73 7427  ss == 'Adaboost'
-00003500: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-00003510: 736b 6c65 6172 6e2e 656e 7365 6d62 6c65  sklearn.ensemble
-00003520: 2069 6d70 6f72 7420 4164 6142 6f6f 7374   import AdaBoost
-00003530: 5265 6772 6573 736f 720d 0a0d 0a20 2020  Regressor....   
-00003540: 2020 2020 2069 6620 7265 6772 6573 7369       if regressi
-00003550: 6f6e 5f6d 6f64 656c 5b22 6d6f 6465 6c5f  on_model["model_
-00003560: 7061 7261 6d73 225d 5b27 6573 7469 6d61  params"]['estima
-00003570: 746f 7227 5d20 3d3d 2027 5356 5227 3a0d  tor'] == 'SVR':.
-00003580: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
-00003590: 6d20 736b 6c65 6172 6e2e 7376 6d20 696d  m sklearn.svm im
-000035a0: 706f 7274 204c 696e 6561 7253 5652 0d0a  port LinearSVR..
-000035b0: 0d0a 2020 2020 2020 2020 2020 2020 7376  ..            sv
-000035c0: 6320 3d20 4c69 6e65 6172 5356 5228 7665  c = LinearSVR(ve
-000035d0: 7262 6f73 653d 302c 2072 616e 646f 6d5f  rbose=0, random_
-000035e0: 7374 6174 653d 7261 6e64 6f6d 5f73 6565  state=random_see
-000035f0: 642c 206d 6178 5f69 7465 723d 3135 3030  d, max_iter=1500
-00003600: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00003610: 6567 7220 3d20 4164 6142 6f6f 7374 5265  egr = AdaBoostRe
-00003620: 6772 6573 736f 7228 0d0a 2020 2020 2020  gressor(..      
-00003630: 2020 2020 2020 2020 2020 6573 7469 6d61            estima
-00003640: 746f 723d 7376 632c 0d0a 2020 2020 2020  tor=svc,..      
-00003650: 2020 2020 2020 2020 2020 6e5f 6573 7469            n_esti
-00003660: 6d61 746f 7273 3d72 6567 7265 7373 696f  mators=regressio
-00003670: 6e5f 6d6f 6465 6c5b 226d 6f64 656c 5f70  n_model["model_p
-00003680: 6172 616d 7322 5d5b 276e 5f65 7374 696d  arams"]['n_estim
-00003690: 6174 6f72 7327 5d2c 0d0a 2020 2020 2020  ators'],..      
-000036a0: 2020 2020 2020 2020 2020 6c6f 7373 3d72            loss=r
-000036b0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c5b  egression_model[
-000036c0: 226d 6f64 656c 5f70 6172 616d 7322 5d5b  "model_params"][
-000036d0: 276c 6f73 7327 5d2c 0d0a 2020 2020 2020  'loss'],..      
-000036e0: 2020 2020 2020 2020 2020 6c65 6172 6e69            learni
-000036f0: 6e67 5f72 6174 653d 7265 6772 6573 7369  ng_rate=regressi
-00003700: 6f6e 5f6d 6f64 656c 5b22 6d6f 6465 6c5f  on_model["model_
-00003710: 7061 7261 6d73 225d 5b27 6c65 6172 6e69  params"]['learni
-00003720: 6e67 5f72 6174 6527 5d2c 0d0a 2020 2020  ng_rate'],..    
-00003730: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
-00003740: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
-00003750: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
-00003760: 2020 2029 0d0a 2020 2020 2020 2020 656c     )..        el
-00003770: 6966 2072 6567 7265 7373 696f 6e5f 6d6f  if regression_mo
-00003780: 6465 6c5b 226d 6f64 656c 5f70 6172 616d  del["model_param
-00003790: 7322 5d5b 2765 7374 696d 6174 6f72 275d  s"]['estimator']
-000037a0: 203d 3d20 274c 696e 5265 6727 3a0d 0a20   == 'LinReg':.. 
-000037b0: 2020 2020 2020 2020 2020 2066 726f 6d20             from 
-000037c0: 736b 6c65 6172 6e2e 6c69 6e65 6172 5f6d  sklearn.linear_m
-000037d0: 6f64 656c 2069 6d70 6f72 7420 4c69 6e65  odel import Line
-000037e0: 6172 5265 6772 6573 7369 6f6e 0d0a 0d0a  arRegression....
-000037f0: 2020 2020 2020 2020 2020 2020 6c69 6e72              linr
-00003800: 6567 203d 204c 696e 6561 7252 6567 7265  eg = LinearRegre
-00003810: 7373 696f 6e28 290d 0a20 2020 2020 2020  ssion()..       
-00003820: 2020 2020 2072 6567 7220 3d20 4164 6142       regr = AdaB
-00003830: 6f6f 7374 5265 6772 6573 736f 7228 0d0a  oostRegressor(..
-00003840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003850: 6573 7469 6d61 746f 723d 6c69 6e72 6567  estimator=linreg
-00003860: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003870: 2020 206e 5f65 7374 696d 6174 6f72 733d     n_estimators=
-00003880: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
-00003890: 5b22 6d6f 6465 6c5f 7061 7261 6d73 225d  ["model_params"]
-000038a0: 5b27 6e5f 6573 7469 6d61 746f 7273 275d  ['n_estimators']
-000038b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000038c0: 2020 206c 6f73 733d 7265 6772 6573 7369     loss=regressi
-000038d0: 6f6e 5f6d 6f64 656c 5b22 6d6f 6465 6c5f  on_model["model_
-000038e0: 7061 7261 6d73 225d 5b27 6c6f 7373 275d  params"]['loss']
-000038f0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003900: 2020 206c 6561 726e 696e 675f 7261 7465     learning_rate
-00003910: 3d72 6567 7265 7373 696f 6e5f 6d6f 6465  =regression_mode
-00003920: 6c5b 226d 6f64 656c 5f70 6172 616d 7322  l["model_params"
-00003930: 5d5b 276c 6561 726e 696e 675f 7261 7465  ]['learning_rate
-00003940: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
-00003950: 2020 2020 2072 616e 646f 6d5f 7374 6174       random_stat
-00003960: 653d 7261 6e64 6f6d 5f73 6565 642c 0d0a  e=random_seed,..
-00003970: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00003980: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00003990: 2020 2020 2020 2020 2020 7265 6772 203d            regr =
-000039a0: 2041 6461 426f 6f73 7452 6567 7265 7373   AdaBoostRegress
-000039b0: 6f72 2872 616e 646f 6d5f 7374 6174 653d  or(random_state=
-000039c0: 7261 6e64 6f6d 5f73 6565 642c 202a 2a6d  random_seed, **m
-000039d0: 6f64 656c 5f70 6172 616d 5f64 6963 7429  odel_param_dict)
-000039e0: 0d0a 2020 2020 2020 2020 6966 206d 756c  ..        if mul
-000039f0: 7469 6f75 7470 7574 3a0d 0a20 2020 2020  tioutput:..     
-00003a00: 2020 2020 2020 2072 6574 7572 6e20 4d75         return Mu
-00003a10: 6c74 694f 7574 7075 7452 6567 7265 7373  ltiOutputRegress
-00003a20: 6f72 2872 6567 722c 206e 5f6a 6f62 733d  or(regr, n_jobs=
-00003a30: 6e5f 6a6f 6273 290d 0a20 2020 2020 2020  n_jobs)..       
-00003a40: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00003a50: 2020 2020 7265 7475 726e 2072 6567 720d      return regr.
-00003a60: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
-00003a70: 636c 6173 7320 696e 205b 2778 6762 6f6f  class in ['xgboo
-00003a80: 7374 272c 2027 5847 4252 6567 7265 7373  st', 'XGBRegress
-00003a90: 6f72 275d 3a0d 0a20 2020 2020 2020 2069  or']:..        i
-00003aa0: 6d70 6f72 7420 7867 626f 6f73 7420 6173  mport xgboost as
-00003ab0: 2078 6762 0d0a 0d0a 2020 2020 2020 2020   xgb....        
-00003ac0: 736d 616c 6c65 725f 6e5f 6a6f 6273 203d  smaller_n_jobs =
-00003ad0: 2069 6e74 286e 5f6a 6f62 7320 2f20 3229   int(n_jobs / 2)
-00003ae0: 2069 6620 6e5f 6a6f 6273 203e 2033 2065   if n_jobs > 3 e
-00003af0: 6c73 6520 6e5f 6a6f 6273 0d0a 0d0a 2020  lse n_jobs....  
-00003b00: 2020 2020 2020 6966 2046 616c 7365 3a20        if False: 
-00003b10: 2023 2074 6869 7320 6973 206e 6f20 6c6f   # this is no lo
-00003b20: 6e67 6572 206e 6563 6573 7361 7279 2069  nger necessary i
-00003b30: 6e20 312e 3620 616e 6420 6265 796f 6e64  n 1.6 and beyond
-00003b40: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00003b50: 6772 203d 204d 756c 7469 4f75 7470 7574  gr = MultiOutput
-00003b60: 5265 6772 6573 736f 7228 0d0a 2020 2020  Regressor(..    
-00003b70: 2020 2020 2020 2020 2020 2020 7867 622e              xgb.
-00003b80: 5847 4252 6567 7265 7373 6f72 2876 6572  XGBRegressor(ver
-00003b90: 626f 7369 7479 3d30 2c20 2a2a 6d6f 6465  bosity=0, **mode
-00003ba0: 6c5f 7061 7261 6d5f 6469 6374 2c20 6e5f  l_param_dict, n_
-00003bb0: 6a6f 6273 3d31 292c 0d0a 2020 2020 2020  jobs=1),..      
-00003bc0: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
-00003bd0: 3d73 6d61 6c6c 6572 5f6e 5f6a 6f62 732c  =smaller_n_jobs,
-00003be0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-00003bf0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00003c00: 2020 2020 2020 2020 2020 2020 7265 6772              regr
-00003c10: 203d 2078 6762 2e58 4742 5265 6772 6573   = xgb.XGBRegres
-00003c20: 736f 7228 0d0a 2020 2020 2020 2020 2020  sor(..          
-00003c30: 2020 2020 2020 7665 7262 6f73 6974 793d        verbosity=
-00003c40: 302c 202a 2a6d 6f64 656c 5f70 6172 616d  0, **model_param
-00003c50: 5f64 6963 742c 206e 5f6a 6f62 733d 736d  _dict, n_jobs=sm
-00003c60: 616c 6c65 725f 6e5f 6a6f 6273 0d0a 2020  aller_n_jobs..  
-00003c70: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00003c80: 2020 2020 2072 6574 7572 6e20 7265 6772       return regr
-00003c90: 0d0a 2020 2020 656c 6966 206d 6f64 656c  ..    elif model
-00003ca0: 5f63 6c61 7373 203d 3d20 2753 564d 273a  _class == 'SVM':
-00003cb0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00003cc0: 6b6c 6561 726e 2e73 766d 2069 6d70 6f72  klearn.svm impor
-00003cd0: 7420 4c69 6e65 6172 5356 520d 0a0d 0a20  t LinearSVR.... 
-00003ce0: 2020 2020 2020 2069 6620 6d75 6c74 696f         if multio
-00003cf0: 7574 7075 743a 0d0a 2020 2020 2020 2020  utput:..        
-00003d00: 2020 2020 7265 6772 203d 204d 756c 7469      regr = Multi
-00003d10: 4f75 7470 7574 5265 6772 6573 736f 7228  OutputRegressor(
-00003d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003d30: 2020 4c69 6e65 6172 5356 5228 7665 7262    LinearSVR(verb
-00003d40: 6f73 653d 7665 7262 6f73 655f 626f 6f6c  ose=verbose_bool
-00003d50: 2c20 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  , **model_param_
-00003d60: 6469 6374 292c 0d0a 2020 2020 2020 2020  dict),..        
-00003d70: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
-00003d80: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
-00003d90: 2020 2020 290d 0a20 2020 2020 2020 2065      )..        e
-00003da0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00003db0: 2020 7265 6772 203d 204c 696e 6561 7253    regr = LinearS
-00003dc0: 5652 2876 6572 626f 7365 3d76 6572 626f  VR(verbose=verbo
-00003dd0: 7365 5f62 6f6f 6c2c 202a 2a6d 6f64 656c  se_bool, **model
-00003de0: 5f70 6172 616d 5f64 6963 7429 0d0a 2020  _param_dict)..  
-00003df0: 2020 2020 2020 7265 7475 726e 2072 6567        return reg
-00003e00: 720d 0a20 2020 2065 6c69 6620 6d6f 6465  r..    elif mode
-00003e10: 6c5f 636c 6173 7320 3d3d 2027 5269 6467  l_class == 'Ridg
-00003e20: 6527 3a0d 0a20 2020 2020 2020 2066 726f  e':..        fro
-00003e30: 6d20 736b 6c65 6172 6e2e 6c69 6e65 6172  m sklearn.linear
-00003e40: 5f6d 6f64 656c 2069 6d70 6f72 7420 5269  _model import Ri
-00003e50: 6467 650d 0a0d 0a20 2020 2020 2020 2072  dge....        r
-00003e60: 6574 7572 6e20 5269 6467 6528 7261 6e64  eturn Ridge(rand
-00003e70: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
-00003e80: 7365 6564 2c20 2a2a 6d6f 6465 6c5f 7061  seed, **model_pa
-00003e90: 7261 6d5f 6469 6374 290d 0a20 2020 2065  ram_dict)..    e
-00003ea0: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
-00003eb0: 3d3d 2022 4661 7374 5269 6467 6522 3a0d  == "FastRidge":.
-00003ec0: 0a20 2020 2020 2020 2066 726f 6d20 736b  .        from sk
-00003ed0: 6c65 6172 6e2e 6c69 6e65 6172 5f6d 6f64  learn.linear_mod
-00003ee0: 656c 2069 6d70 6f72 7420 5269 6467 650d  el import Ridge.
-00003ef0: 0a0d 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-00003f00: 6e20 5269 6467 6528 616c 7068 613d 3165  n Ridge(alpha=1e
-00003f10: 2d39 2c20 736f 6c76 6572 3d22 6368 6f6c  -9, solver="chol
-00003f20: 6573 6b79 222c 2066 6974 5f69 6e74 6572  esky", fit_inter
-00003f30: 6365 7074 3d46 616c 7365 2c20 636f 7079  cept=False, copy
-00003f40: 5f58 3d46 616c 7365 290d 0a20 2020 2065  _X=False)..    e
-00003f50: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
-00003f60: 3d3d 2027 4261 7965 7369 616e 5269 6467  == 'BayesianRidg
-00003f70: 6527 3a0d 0a20 2020 2020 2020 2066 726f  e':..        fro
-00003f80: 6d20 736b 6c65 6172 6e2e 6c69 6e65 6172  m sklearn.linear
-00003f90: 5f6d 6f64 656c 2069 6d70 6f72 7420 4261  _model import Ba
-00003fa0: 7965 7369 616e 5269 6467 650d 0a0d 0a20  yesianRidge.... 
-00003fb0: 2020 2020 2020 2072 6567 7220 3d20 4261         regr = Ba
-00003fc0: 7965 7369 616e 5269 6467 6528 2a2a 6d6f  yesianRidge(**mo
-00003fd0: 6465 6c5f 7061 7261 6d5f 6469 6374 290d  del_param_dict).
-00003fe0: 0a20 2020 2020 2020 2069 6620 6d75 6c74  .        if mult
-00003ff0: 696f 7574 7075 743a 0d0a 2020 2020 2020  ioutput:..      
-00004000: 2020 2020 2020 7265 7475 726e 2052 6567        return Reg
-00004010: 7265 7373 6f72 4368 6169 6e28 7265 6772  ressorChain(regr
-00004020: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-00004030: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00004040: 7475 726e 2072 6567 720d 0a20 2020 2065  turn regr..    e
-00004050: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
-00004060: 3d3d 2022 4578 7472 6154 7265 6573 223a  == "ExtraTrees":
-00004070: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00004080: 6b6c 6561 726e 2e65 6e73 656d 626c 6520  klearn.ensemble 
-00004090: 696d 706f 7274 2045 7874 7261 5472 6565  import ExtraTree
-000040a0: 7352 6567 7265 7373 6f72 0d0a 0d0a 2020  sRegressor....  
-000040b0: 2020 2020 2020 7265 7475 726e 2045 7874        return Ext
-000040c0: 7261 5472 6565 7352 6567 7265 7373 6f72  raTreesRegressor
-000040d0: 280d 0a20 2020 2020 2020 2020 2020 206e  (..            n
-000040e0: 5f6a 6f62 733d 6e5f 6a6f 6273 2c20 7261  _jobs=n_jobs, ra
-000040f0: 6e64 6f6d 5f73 7461 7465 3d72 616e 646f  ndom_state=rando
-00004100: 6d5f 7365 6564 2c20 2a2a 6d6f 6465 6c5f  m_seed, **model_
-00004110: 7061 7261 6d5f 6469 6374 0d0a 2020 2020  param_dict..    
-00004120: 2020 2020 290d 0a20 2020 2065 6c69 6620      )..    elif 
-00004130: 6d6f 6465 6c5f 636c 6173 7320 3d3d 2022  model_class == "
-00004140: 5261 6469 7573 4e65 6967 6862 6f72 7322  RadiusNeighbors"
-00004150: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-00004160: 736b 6c65 6172 6e2e 6e65 6967 6862 6f72  sklearn.neighbor
-00004170: 7320 696d 706f 7274 2052 6164 6975 734e  s import RadiusN
-00004180: 6569 6768 626f 7273 5265 6772 6573 736f  eighborsRegresso
-00004190: 720d 0a0d 0a20 2020 2020 2020 2072 6567  r....        reg
-000041a0: 7220 3d20 5261 6469 7573 4e65 6967 6862  r = RadiusNeighb
-000041b0: 6f72 7352 6567 7265 7373 6f72 286e 5f6a  orsRegressor(n_j
-000041c0: 6f62 733d 6e5f 6a6f 6273 2c20 2a2a 6d6f  obs=n_jobs, **mo
-000041d0: 6465 6c5f 7061 7261 6d5f 6469 6374 290d  del_param_dict).
-000041e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000041f0: 7265 6772 0d0a 2020 2020 656c 6966 206d  regr..    elif m
-00004200: 6f64 656c 5f63 6c61 7373 203d 3d20 2250  odel_class == "P
-00004210: 6f69 7373 6f6e 5265 6772 6573 7373 696f  oissonRegresssio
-00004220: 6e22 3a0d 0a20 2020 2020 2020 2066 726f  n":..        fro
-00004230: 6d20 736b 6c65 6172 6e2e 6c69 6e65 6172  m sklearn.linear
-00004240: 5f6d 6f64 656c 2069 6d70 6f72 7420 506f  _model import Po
-00004250: 6973 736f 6e52 6567 7265 7373 6f72 0d0a  issonRegressor..
-00004260: 0d0a 2020 2020 2020 2020 6966 206d 756c  ..        if mul
-00004270: 7469 6f75 7470 7574 3a0d 0a20 2020 2020  tioutput:..     
-00004280: 2020 2020 2020 2072 6567 7220 3d20 4d75         regr = Mu
-00004290: 6c74 694f 7574 7075 7452 6567 7265 7373  ltiOutputRegress
-000042a0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-000042b0: 2020 2020 2050 6f69 7373 6f6e 5265 6772       PoissonRegr
-000042c0: 6573 736f 7228 6669 745f 696e 7465 7263  essor(fit_interc
-000042d0: 6570 743d 5472 7565 2c20 6d61 785f 6974  ept=True, max_it
-000042e0: 6572 3d32 3030 2c20 2a2a 6d6f 6465 6c5f  er=200, **model_
-000042f0: 7061 7261 6d5f 6469 6374 292c 0d0a 2020  param_dict),..  
-00004300: 2020 2020 2020 2020 2020 2020 2020 6e5f                n_
-00004310: 6a6f 6273 3d6e 5f6a 6f62 732c 0d0a 2020  jobs=n_jobs,..  
-00004320: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00004330: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00004340: 2020 2020 2020 2020 7265 6772 203d 2050          regr = P
-00004350: 6f69 7373 6f6e 5265 6772 6573 736f 7228  oissonRegressor(
-00004360: 2a2a 6d6f 6465 6c5f 7061 7261 6d5f 6469  **model_param_di
-00004370: 6374 290d 0a20 2020 2020 2020 2072 6574  ct)..        ret
-00004380: 7572 6e20 7265 6772 0d0a 2020 2020 656c  urn regr..    el
-00004390: 6966 206d 6f64 656c 5f63 6c61 7373 203d  if model_class =
-000043a0: 3d20 2752 414e 5341 4327 3a0d 0a20 2020  = 'RANSAC':..   
-000043b0: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
-000043c0: 6e2e 6c69 6e65 6172 5f6d 6f64 656c 2069  n.linear_model i
-000043d0: 6d70 6f72 7420 5241 4e53 4143 5265 6772  mport RANSACRegr
-000043e0: 6573 736f 720d 0a0d 0a20 2020 2020 2020  essor....       
-000043f0: 2072 6574 7572 6e20 5241 4e53 4143 5265   return RANSACRe
-00004400: 6772 6573 736f 7228 7261 6e64 6f6d 5f73  gressor(random_s
-00004410: 7461 7465 3d72 616e 646f 6d5f 7365 6564  tate=random_seed
-00004420: 2c20 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  , **model_param_
-00004430: 6469 6374 290d 0a20 2020 2065 6c69 6620  dict)..    elif 
-00004440: 6d6f 6465 6c5f 636c 6173 7320 3d3d 2022  model_class == "
-00004450: 4c69 6e65 6172 5265 6772 6573 7369 6f6e  LinearRegression
-00004460: 223a 0d0a 2020 2020 2020 2020 6672 6f6d  ":..        from
-00004470: 2073 6b6c 6561 726e 2e6c 696e 6561 725f   sklearn.linear_
-00004480: 6d6f 6465 6c20 696d 706f 7274 204c 696e  model import Lin
-00004490: 6561 7252 6567 7265 7373 696f 6e0d 0a0d  earRegression...
-000044a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000044b0: 4c69 6e65 6172 5265 6772 6573 7369 6f6e  LinearRegression
-000044c0: 282a 2a6d 6f64 656c 5f70 6172 616d 5f64  (**model_param_d
-000044d0: 6963 7429 0d0a 2020 2020 656c 6966 206d  ict)..    elif m
-000044e0: 6f64 656c 5f63 6c61 7373 203d 3d20 2247  odel_class == "G
-000044f0: 6175 7373 6961 6e50 726f 6365 7373 5265  aussianProcessRe
-00004500: 6772 6573 736f 7222 3a0d 0a20 2020 2020  gressor":..     
-00004510: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
-00004520: 6761 7573 7369 616e 5f70 726f 6365 7373  gaussian_process
-00004530: 2069 6d70 6f72 7420 4761 7573 7369 616e   import Gaussian
-00004540: 5072 6f63 6573 7352 6567 7265 7373 6f72  ProcessRegressor
-00004550: 0d0a 0d0a 2020 2020 2020 2020 6b65 726e  ....        kern
-00004560: 656c 203d 206d 6f64 656c 5f70 6172 616d  el = model_param
-00004570: 5f64 6963 742e 706f 7028 226b 6572 6e65  _dict.pop("kerne
-00004580: 6c22 2c20 4e6f 6e65 290d 0a20 2020 2020  l", None)..     
-00004590: 2020 2069 6620 6b65 726e 656c 2069 7320     if kernel is 
-000045a0: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-000045b0: 2020 2020 2020 2069 6620 6b65 726e 656c         if kernel
-000045c0: 203d 3d20 2244 6f74 5768 6974 6522 3a0d   == "DotWhite":.
-000045d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000045e0: 2066 726f 6d20 736b 6c65 6172 6e2e 6761   from sklearn.ga
-000045f0: 7573 7369 616e 5f70 726f 6365 7373 2e6b  ussian_process.k
-00004600: 6572 6e65 6c73 2069 6d70 6f72 7420 446f  ernels import Do
-00004610: 7450 726f 6475 6374 2c20 5768 6974 654b  tProduct, WhiteK
-00004620: 6572 6e65 6c0d 0a0d 0a20 2020 2020 2020  ernel....       
-00004630: 2020 2020 2020 2020 206b 6572 6e65 6c20           kernel 
-00004640: 3d20 446f 7450 726f 6475 6374 2829 202b  = DotProduct() +
-00004650: 2057 6869 7465 4b65 726e 656c 2829 0d0a   WhiteKernel()..
-00004660: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00004670: 206b 6572 6e65 6c20 3d3d 2022 5768 6974   kernel == "Whit
-00004680: 6522 3a0d 0a20 2020 2020 2020 2020 2020  e":..           
-00004690: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
-000046a0: 6e2e 6761 7573 7369 616e 5f70 726f 6365  n.gaussian_proce
-000046b0: 7373 2e6b 6572 6e65 6c73 2069 6d70 6f72  ss.kernels impor
-000046c0: 7420 5768 6974 654b 6572 6e65 6c0d 0a0d  t WhiteKernel...
-000046d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000046e0: 206b 6572 6e65 6c20 3d20 5768 6974 654b   kernel = WhiteK
-000046f0: 6572 6e65 6c28 290d 0a20 2020 2020 2020  ernel()..       
-00004700: 2020 2020 2065 6c69 6620 6b65 726e 656c       elif kernel
-00004710: 203d 3d20 2245 7870 5369 6e65 5371 7561   == "ExpSineSqua
-00004720: 7265 6422 3a0d 0a20 2020 2020 2020 2020  red":..         
-00004730: 2020 2020 2020 2066 726f 6d20 736b 6c65         from skle
-00004740: 6172 6e2e 6761 7573 7369 616e 5f70 726f  arn.gaussian_pro
-00004750: 6365 7373 2e6b 6572 6e65 6c73 2069 6d70  cess.kernels imp
-00004760: 6f72 7420 4578 7053 696e 6553 7175 6172  ort ExpSineSquar
-00004770: 6564 0d0a 0d0a 2020 2020 2020 2020 2020  ed....          
-00004780: 2020 2020 2020 6b65 726e 656c 203d 2045        kernel = E
-00004790: 7870 5369 6e65 5371 7561 7265 6428 290d  xpSineSquared().
-000047a0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000047b0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000047c0: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
-000047d0: 2e67 6175 7373 6961 6e5f 7072 6f63 6573  .gaussian_proces
-000047e0: 732e 6b65 726e 656c 7320 696d 706f 7274  s.kernels import
-000047f0: 2052 4246 0d0a 0d0a 2020 2020 2020 2020   RBF....        
-00004800: 2020 2020 2020 2020 6b65 726e 656c 203d          kernel =
-00004810: 2052 4246 2829 0d0a 2020 2020 2020 2020   RBF()..        
-00004820: 7265 7475 726e 2047 6175 7373 6961 6e50  return GaussianP
-00004830: 726f 6365 7373 5265 6772 6573 736f 7228  rocessRegressor(
-00004840: 0d0a 2020 2020 2020 2020 2020 2020 6b65  ..            ke
-00004850: 726e 656c 3d6b 6572 6e65 6c2c 2072 616e  rnel=kernel, ran
-00004860: 646f 6d5f 7374 6174 653d 7261 6e64 6f6d  dom_state=random
-00004870: 5f73 6565 642c 202a 2a6d 6f64 656c 5f70  _seed, **model_p
-00004880: 6172 616d 5f64 6963 740d 0a20 2020 2020  aram_dict..     
-00004890: 2020 2029 0d0a 2020 2020 656c 6966 206d     )..    elif m
-000048a0: 6f64 656c 5f63 6c61 7373 2069 6e20 5b22  odel_class in ["
-000048b0: 4d75 6c74 696f 7574 7075 7447 5052 222c  MultioutputGPR",
-000048c0: 2022 5665 6374 6f72 697a 6564 4d75 6c74   "VectorizedMult
-000048d0: 694f 7574 7075 7447 5052 225d 3a0d 0a20  iOutputGPR"]:.. 
-000048e0: 2020 2020 2020 2072 6574 7572 6e20 5665         return Ve
-000048f0: 6374 6f72 697a 6564 4d75 6c74 694f 7574  ctorizedMultiOut
-00004900: 7075 7447 5052 282a 2a6d 6f64 656c 5f70  putGPR(**model_p
-00004910: 6172 616d 5f64 6963 7429 0d0a 2020 2020  aram_dict)..    
-00004920: 656c 7365 3a0d 0a20 2020 2020 2020 2072  else:..        r
-00004930: 6567 7265 7373 696f 6e5f 6d6f 6465 6c5b  egression_model[
-00004940: 276d 6f64 656c 275d 203d 2027 5261 6e64  'model'] = 'Rand
-00004950: 6f6d 466f 7265 7374 270d 0a20 2020 2020  omForest'..     
-00004960: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
-00004970: 656e 7365 6d62 6c65 2069 6d70 6f72 7420  ensemble import 
-00004980: 5261 6e64 6f6d 466f 7265 7374 5265 6772  RandomForestRegr
-00004990: 6573 736f 720d 0a0d 0a20 2020 2020 2020  essor....       
-000049a0: 2072 6567 7220 3d20 5261 6e64 6f6d 466f   regr = RandomFo
-000049b0: 7265 7374 5265 6772 6573 736f 7228 0d0a  restRegressor(..
-000049c0: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
-000049d0: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
-000049e0: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
-000049f0: 2020 2076 6572 626f 7365 3d76 6572 626f     verbose=verbo
-00004a00: 7365 5f62 6f6f 6c2c 0d0a 2020 2020 2020  se_bool,..      
-00004a10: 2020 2020 2020 6e5f 6a6f 6273 3d6e 5f6a        n_jobs=n_j
-00004a20: 6f62 732c 0d0a 2020 2020 2020 2020 2020  obs,..          
-00004a30: 2020 2a2a 6d6f 6465 6c5f 7061 7261 6d5f    **model_param_
-00004a40: 6469 6374 2c0d 0a20 2020 2020 2020 2029  dict,..        )
-00004a50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00004a60: 2072 6567 720d 0a0d 0a0d 0a64 6566 2072   regr......def r
-00004a70: 6574 7269 6576 655f 636c 6173 7369 6669  etrieve_classifi
-00004a80: 6572 280d 0a20 2020 2072 6567 7265 7373  er(..    regress
-00004a90: 696f 6e5f 6d6f 6465 6c3a 2064 6963 7420  ion_model: dict 
-00004aa0: 3d20 7b0d 0a20 2020 2020 2020 2022 6d6f  = {..        "mo
-00004ab0: 6465 6c22 3a20 2752 616e 646f 6d46 6f72  del": 'RandomFor
-00004ac0: 6573 7427 2c0d 0a20 2020 2020 2020 2022  est',..        "
-00004ad0: 6d6f 6465 6c5f 7061 7261 6d73 223a 207b  model_params": {
-00004ae0: 0d0a 2020 2020 2020 2020 2020 2020 276e  ..            'n
-00004af0: 5f65 7374 696d 6174 6f72 7327 3a20 3330  _estimators': 30
-00004b00: 302c 0d0a 2020 2020 2020 2020 2020 2020  0,..            
-00004b10: 276d 696e 5f73 616d 706c 6573 5f6c 6561  'min_samples_lea
-00004b20: 6627 3a20 312c 0d0a 2020 2020 2020 2020  f': 1,..        
-00004b30: 2020 2020 2762 6f6f 7473 7472 6170 273a      'bootstrap':
-00004b40: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
-00004b50: 207d 2c0d 0a20 2020 207d 2c0d 0a20 2020   },..    },..   
-00004b60: 2076 6572 626f 7365 3a20 696e 7420 3d20   verbose: int = 
-00004b70: 302c 0d0a 2020 2020 7665 7262 6f73 655f  0,..    verbose_
-00004b80: 626f 6f6c 3a20 626f 6f6c 203d 2046 616c  bool: bool = Fal
-00004b90: 7365 2c0d 0a20 2020 2072 616e 646f 6d5f  se,..    random_
-00004ba0: 7365 6564 3a20 696e 7420 3d20 3230 3230  seed: int = 2020
-00004bb0: 2c0d 0a20 2020 206e 5f6a 6f62 733a 2069  ,..    n_jobs: i
-00004bc0: 6e74 203d 2031 2c0d 0a20 2020 206d 756c  nt = 1,..    mul
-00004bd0: 7469 6f75 7470 7574 3a20 626f 6f6c 203d  tioutput: bool =
-00004be0: 2054 7275 652c 0d0a 293a 0d0a 2020 2020   True,..):..    
-00004bf0: 2222 2243 6f6e 7665 7274 2061 206d 6f64  """Convert a mod
-00004c00: 656c 2070 6172 616d 2064 6963 7420 746f  el param dict to
-00004c10: 206d 6f64 656c 206f 626a 6563 7420 666f   model object fo
-00004c20: 7220 7265 6772 6573 7369 6f6e 2066 7261  r regression fra
-00004c30: 6d65 776f 726b 732e 2222 220d 0a20 2020  meworks."""..   
-00004c40: 206d 6f64 656c 5f63 6c61 7373 203d 2072   model_class = r
-00004c50: 6567 7265 7373 696f 6e5f 6d6f 6465 6c2e  egression_model.
-00004c60: 6765 7428 276d 6f64 656c 272c 2027 5261  get('model', 'Ra
-00004c70: 6e64 6f6d 466f 7265 7374 2729 0d0a 2020  ndomForest')..  
-00004c80: 2020 6d6f 6465 6c5f 7061 7261 6d5f 6469    model_param_di
-00004c90: 6374 203d 2072 6567 7265 7373 696f 6e5f  ct = regression_
-00004ca0: 6d6f 6465 6c2e 6765 7428 226d 6f64 656c  model.get("model
-00004cb0: 5f70 6172 616d 7322 2c20 7b7d 290d 0a20  _params", {}).. 
-00004cc0: 2020 2069 6620 6d6f 6465 6c5f 636c 6173     if model_clas
-00004cd0: 7320 3d3d 2022 4578 7472 6154 7265 6573  s == "ExtraTrees
-00004ce0: 223a 0d0a 2020 2020 2020 2020 6672 6f6d  ":..        from
-00004cf0: 2073 6b6c 6561 726e 2e65 6e73 656d 626c   sklearn.ensembl
-00004d00: 6520 696d 706f 7274 2045 7874 7261 5472  e import ExtraTr
-00004d10: 6565 7343 6c61 7373 6966 6965 720d 0a0d  eesClassifier...
-00004d20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00004d30: 4578 7472 6154 7265 6573 436c 6173 7369  ExtraTreesClassi
-00004d40: 6669 6572 280d 0a20 2020 2020 2020 2020  fier(..         
-00004d50: 2020 206e 5f6a 6f62 733d 6e5f 6a6f 6273     n_jobs=n_jobs
-00004d60: 2c20 7261 6e64 6f6d 5f73 7461 7465 3d72  , random_state=r
-00004d70: 616e 646f 6d5f 7365 6564 2c20 2a2a 6d6f  andom_seed, **mo
-00004d80: 6465 6c5f 7061 7261 6d5f 6469 6374 0d0a  del_param_dict..
-00004d90: 2020 2020 2020 2020 290d 0a20 2020 2065          )..    e
-00004da0: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
-00004db0: 3d3d 2027 4465 6369 7369 6f6e 5472 6565  == 'DecisionTree
-00004dc0: 273a 0d0a 2020 2020 2020 2020 6672 6f6d  ':..        from
-00004dd0: 2073 6b6c 6561 726e 2e74 7265 6520 696d   sklearn.tree im
-00004de0: 706f 7274 2044 6563 6973 696f 6e54 7265  port DecisionTre
-00004df0: 6543 6c61 7373 6966 6965 720d 0a0d 0a20  eClassifier.... 
-00004e00: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
-00004e10: 6369 7369 6f6e 5472 6565 436c 6173 7369  cisionTreeClassi
-00004e20: 6669 6572 2872 616e 646f 6d5f 7374 6174  fier(random_stat
-00004e30: 653d 7261 6e64 6f6d 5f73 6565 642c 202a  e=random_seed, *
-00004e40: 2a6d 6f64 656c 5f70 6172 616d 5f64 6963  *model_param_dic
-00004e50: 7429 0d0a 2020 2020 656c 6966 206d 6f64  t)..    elif mod
-00004e60: 656c 5f63 6c61 7373 2069 6e20 5b27 7867  el_class in ['xg
-00004e70: 626f 6f73 7427 2c20 2758 4742 436c 6173  boost', 'XGBClas
-00004e80: 7369 6669 6572 275d 3a0d 0a20 2020 2020  sifier']:..     
-00004e90: 2020 2069 6d70 6f72 7420 7867 626f 6f73     import xgboos
-00004ea0: 7420 6173 2078 6762 0d0a 0d0a 2020 2020  t as xgb....    
-00004eb0: 2020 2020 7265 7475 726e 2078 6762 2e58      return xgb.X
-00004ec0: 4742 436c 6173 7369 6669 6572 2876 6572  GBClassifier(ver
-00004ed0: 626f 7369 7479 3d76 6572 626f 7365 2c20  bosity=verbose, 
-00004ee0: 2a2a 6d6f 6465 6c5f 7061 7261 6d5f 6469  **model_param_di
-00004ef0: 6374 2c20 6e5f 6a6f 6273 3d6e 5f6a 6f62  ct, n_jobs=n_job
-00004f00: 7329 0d0a 2020 2020 656c 6966 206d 6f64  s)..    elif mod
-00004f10: 656c 5f63 6c61 7373 203d 3d20 2252 616e  el_class == "Ran
-00004f20: 646f 6d46 6f72 6573 7422 3a0d 0a20 2020  domForest":..   
-00004f30: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
-00004f40: 6e2e 656e 7365 6d62 6c65 2069 6d70 6f72  n.ensemble impor
-00004f50: 7420 5261 6e64 6f6d 466f 7265 7374 436c  t RandomForestCl
-00004f60: 6173 7369 6669 6572 0d0a 0d0a 2020 2020  assifier....    
-00004f70: 2020 2020 7265 7475 726e 2052 616e 646f      return Rando
-00004f80: 6d46 6f72 6573 7443 6c61 7373 6966 6965  mForestClassifie
-00004f90: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00004fa0: 7261 6e64 6f6d 5f73 7461 7465 3d72 616e  random_state=ran
-00004fb0: 646f 6d5f 7365 6564 2c0d 0a20 2020 2020  dom_seed,..     
-00004fc0: 2020 2020 2020 2076 6572 626f 7365 3d76         verbose=v
-00004fd0: 6572 626f 7365 5f62 6f6f 6c2c 0d0a 2020  erbose_bool,..  
-00004fe0: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
-00004ff0: 3d6e 5f6a 6f62 732c 0d0a 2020 2020 2020  =n_jobs,..      
-00005000: 2020 2020 2020 2a2a 6d6f 6465 6c5f 7061        **model_pa
-00005010: 7261 6d5f 6469 6374 2c0d 0a20 2020 2020  ram_dict,..     
-00005020: 2020 2029 0d0a 2020 2020 656c 6966 206d     )..    elif m
-00005030: 6f64 656c 5f63 6c61 7373 203d 3d20 224b  odel_class == "K
-00005040: 4e4e 223a 0d0a 2020 2020 2020 2020 6672  NN":..        fr
-00005050: 6f6d 2073 6b6c 6561 726e 2e6e 6569 6768  om sklearn.neigh
-00005060: 626f 7273 2069 6d70 6f72 7420 4b4e 6569  bors import KNei
-00005070: 6768 626f 7273 436c 6173 7369 6669 6572  ghborsClassifier
-00005080: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-00005090: 726e 204b 4e65 6967 6862 6f72 7343 6c61  rn KNeighborsCla
-000050a0: 7373 6966 6965 7228 0d0a 2020 2020 2020  ssifier(..      
-000050b0: 2020 2020 2020 6e5f 6a6f 6273 3d6e 5f6a        n_jobs=n_j
-000050c0: 6f62 732c 0d0a 2020 2020 2020 2020 2020  obs,..          
-000050d0: 2020 2a2a 6d6f 6465 6c5f 7061 7261 6d5f    **model_param_
-000050e0: 6469 6374 2c0d 0a20 2020 2020 2020 2029  dict,..        )
-000050f0: 0d0a 2020 2020 656c 6966 206d 6f64 656c  ..    elif model
-00005100: 5f63 6c61 7373 203d 3d20 2253 4744 223a  _class == "SGD":
-00005110: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00005120: 6b6c 6561 726e 2e6c 696e 6561 725f 6d6f  klearn.linear_mo
-00005130: 6465 6c20 696d 706f 7274 2053 4744 436c  del import SGDCl
-00005140: 6173 7369 6669 6572 0d0a 2020 2020 2020  assifier..      
-00005150: 2020 6672 6f6d 2073 6b6c 6561 726e 2e6d    from sklearn.m
-00005160: 756c 7469 6f75 7470 7574 2069 6d70 6f72  ultioutput impor
-00005170: 7420 4d75 6c74 694f 7574 7075 7443 6c61  t MultiOutputCla
-00005180: 7373 6966 6965 720d 0a0d 0a20 2020 2020  ssifier....     
-00005190: 2020 2069 6620 6d75 6c74 696f 7574 7075     if multioutpu
-000051a0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-000051b0: 7265 7475 726e 204d 756c 7469 4f75 7470  return MultiOutp
-000051c0: 7574 436c 6173 7369 6669 6572 280d 0a20  utClassifier(.. 
-000051d0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
-000051e0: 4744 436c 6173 7369 6669 6572 280d 0a20  GDClassifier(.. 
-000051f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005200: 2020 2072 616e 646f 6d5f 7374 6174 653d     random_state=
-00005210: 7261 6e64 6f6d 5f73 6565 642c 0d0a 2020  random_seed,..  
-00005220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005230: 2020 7665 7262 6f73 653d 7665 7262 6f73    verbose=verbos
-00005240: 655f 626f 6f6c 2c0d 0a20 2020 2020 2020  e_bool,..       
-00005250: 2020 2020 2020 2020 2020 2020 206e 5f6a               n_j
-00005260: 6f62 733d 6e5f 6a6f 6273 2c0d 0a20 2020  obs=n_jobs,..   
-00005270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005280: 202a 2a6d 6f64 656c 5f70 6172 616d 5f64   **model_param_d
-00005290: 6963 742c 0d0a 2020 2020 2020 2020 2020  ict,..          
-000052a0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-000052b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-000052c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000052d0: 2020 2072 6574 7572 6e20 5347 4443 6c61     return SGDCla
-000052e0: 7373 6966 6965 7228 0d0a 2020 2020 2020  ssifier(..      
-000052f0: 2020 2020 2020 2020 2020 7261 6e64 6f6d            random
-00005300: 5f73 7461 7465 3d72 616e 646f 6d5f 7365  _state=random_se
-00005310: 6564 2c0d 0a20 2020 2020 2020 2020 2020  ed,..           
-00005320: 2020 2020 2076 6572 626f 7365 3d76 6572       verbose=ver
-00005330: 626f 7365 5f62 6f6f 6c2c 0d0a 2020 2020  bose_bool,..    
-00005340: 2020 2020 2020 2020 2020 2020 6e5f 6a6f              n_jo
-00005350: 6273 3d6e 5f6a 6f62 732c 0d0a 2020 2020  bs=n_jobs,..    
-00005360: 2020 2020 2020 2020 2020 2020 2a2a 6d6f              **mo
-00005370: 6465 6c5f 7061 7261 6d5f 6469 6374 2c0d  del_param_dict,.
-00005380: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00005390: 2020 2020 656c 6966 206d 6f64 656c 5f63      elif model_c
-000053a0: 6c61 7373 203d 3d20 2247 6175 7373 6961  lass == "Gaussia
-000053b0: 6e4e 4222 3a0d 0a20 2020 2020 2020 2066  nNB":..        f
-000053c0: 726f 6d20 736b 6c65 6172 6e2e 6e61 6976  rom sklearn.naiv
-000053d0: 655f 6261 7965 7320 696d 706f 7274 2047  e_bayes import G
-000053e0: 6175 7373 6961 6e4e 420d 0a0d 0a20 2020  aussianNB....   
-000053f0: 2020 2020 2069 6620 6d75 6c74 696f 7574       if multiout
-00005400: 7075 743a 0d0a 2020 2020 2020 2020 2020  put:..          
-00005410: 2020 7265 7475 726e 204d 756c 7469 4f75    return MultiOu
-00005420: 7470 7574 436c 6173 7369 6669 6572 2847  tputClassifier(G
-00005430: 6175 7373 6961 6e4e 4228 2a2a 6d6f 6465  aussianNB(**mode
-00005440: 6c5f 7061 7261 6d5f 6469 6374 2929 0d0a  l_param_dict))..
-00005450: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00005460: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00005470: 6e20 4761 7573 7369 616e 4e42 282a 2a6d  n GaussianNB(**m
-00005480: 6f64 656c 5f70 6172 616d 5f64 6963 7429  odel_param_dict)
-00005490: 0d0a 2020 2020 656c 7365 3a0d 0a20 2020  ..    else:..   
-000054a0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-000054b0: 4572 726f 7228 6622 636c 6173 7369 6669  Error(f"classifi
-000054c0: 6572 207b 6d6f 6465 6c5f 636c 6173 737d  er {model_class}
-000054d0: 206e 6f74 2061 2072 6563 6f67 6e69 7a65   not a recognize
-000054e0: 6420 6f70 7469 6f6e 2e22 290d 0a0d 0a0d  d option.").....
-000054f0: 0a23 206d 6f64 656c 7320 7468 6174 2063  .# models that c
-00005500: 616e 206d 6f72 6520 7175 6963 6b6c 7920  an more quickly 
-00005510: 6861 6e64 6c65 206d 616e 7920 582f 5920  handle many X/Y 
-00005520: 6f62 732c 2077 6974 6820 6d6f 6465 7374  obs, with modest
-00005530: 206e 756d 6265 7220 6f66 2066 6561 7475   number of featu
-00005540: 7265 730d 0a73 6b6c 6561 726e 5f6d 6f64  res..sklearn_mod
-00005550: 656c 5f64 6963 7420 3d20 7b0d 0a20 2020  el_dict = {..   
-00005560: 2023 2027 5261 6e64 6f6d 466f 7265 7374   # 'RandomForest
-00005570: 273a 2030 2e30 322c 2020 2320 6372 6173  ': 0.02,  # cras
-00005580: 6865 7320 736f 6d65 7469 6d65 7320 6174  hes sometimes at
-00005590: 2073 6361 6c65 2066 6f72 2075 6e63 6c65   scale for uncle
-000055a0: 6172 2072 6561 736f 6e73 0d0a 2020 2020  ar reasons..    
-000055b0: 2745 6c61 7374 6963 4e65 7427 3a20 302e  'ElasticNet': 0.
-000055c0: 3035 2c0d 0a20 2020 2027 4d4c 5027 3a20  05,..    'MLP': 
-000055d0: 302e 3035 2c0d 0a20 2020 2027 4465 6369  0.05,..    'Deci
-000055e0: 7369 6f6e 5472 6565 273a 2030 2e30 322c  sionTree': 0.02,
-000055f0: 0d0a 2020 2020 274b 4e4e 273a 2030 2e30  ..    'KNN': 0.0
-00005600: 352c 0d0a 2020 2020 2741 6461 626f 6f73  5,..    'Adaboos
-00005610: 7427 3a20 302e 3031 2c0d 0a20 2020 2027  t': 0.01,..    '
-00005620: 5356 4d27 3a20 302e 3035 2c20 2023 2077  SVM': 0.05,  # w
-00005630: 6173 2073 6c6f 772c 204c 696e 6561 7253  as slow, LinearS
-00005640: 5652 2073 6565 6d73 206d 7563 6820 6661  VR seems much fa
-00005650: 7374 6572 0d0a 2020 2020 2742 6179 6573  ster..    'Bayes
-00005660: 6961 6e52 6964 6765 273a 2030 2e30 352c  ianRidge': 0.05,
-00005670: 0d0a 2020 2020 2778 6762 6f6f 7374 273a  ..    'xgboost':
-00005680: 2030 2e30 352c 0d0a 2020 2020 274b 6572   0.05,..    'Ker
-00005690: 6173 524e 4e27 3a20 302e 3030 312c 2020  asRNN': 0.001,  
-000056a0: 2320 736c 6f77 2061 7420 7363 616c 650d  # slow at scale.
-000056b0: 0a20 2020 2027 5472 616e 7366 6f72 6d65  .    'Transforme
-000056c0: 7227 3a20 302e 3030 312c 0d0a 2020 2020  r': 0.001,..    
-000056d0: 2748 6973 7447 7261 6469 656e 7442 6f6f  'HistGradientBoo
-000056e0: 7374 273a 2030 2e30 332c 0d0a 2020 2020  st': 0.03,..    
-000056f0: 274c 6967 6874 4742 4d27 3a20 302e 312c  'LightGBM': 0.1,
-00005700: 0d0a 2020 2020 274c 6967 6874 4742 4d52  ..    'LightGBMR
-00005710: 6567 7265 7373 6f72 4368 6169 6e27 3a20  egressorChain': 
-00005720: 302e 3033 2c0d 0a20 2020 2027 4578 7472  0.03,..    'Extr
-00005730: 6154 7265 6573 273a 2030 2e30 312c 0d0a  aTrees': 0.01,..
-00005740: 2020 2020 2752 6164 6975 734e 6569 6768      'RadiusNeigh
-00005750: 626f 7273 273a 2030 2e30 322c 0d0a 2020  bors': 0.02,..  
-00005760: 2020 2750 6f69 7373 6f6e 5265 6772 6573    'PoissonRegres
-00005770: 7373 696f 6e27 3a20 302e 3033 2c0d 0a20  ssion': 0.03,.. 
-00005780: 2020 2027 5241 4e53 4143 273a 2030 2e30     'RANSAC': 0.0
-00005790: 352c 0d0a 2020 2020 2752 6964 6765 273a  5,..    'Ridge':
-000057a0: 2030 2e30 322c 0d0a 2020 2020 2747 6175   0.02,..    'Gau
-000057b0: 7373 6961 6e50 726f 6365 7373 5265 6772  ssianProcessRegr
-000057c0: 6573 736f 7227 3a20 302e 3030 3030 3030  essor': 0.000000
-000057d0: 3030 312c 2020 2320 736c 6f77 0d0a 2020  001,  # slow..  
-000057e0: 2020 2320 274d 756c 7469 6f75 7470 7574    # 'Multioutput
-000057f0: 4750 5227 3a20 302e 3030 3030 3030 312c  GPR': 0.0000001,
-00005800: 2020 2320 6d65 6d6f 7279 2069 6e74 656e    # memory inten
-00005810: 7369 7665 206b 6572 6e65 6c20 6b69 6c6c  sive kernel kill
-00005820: 696e 670d 0a7d 0d0a 6d75 6c74 6976 6172  ing..}..multivar
-00005830: 6961 7465 5f6d 6f64 656c 5f64 6963 7420  iate_model_dict 
-00005840: 3d20 7b0d 0a20 2020 2027 5261 6e64 6f6d  = {..    'Random
-00005850: 466f 7265 7374 273a 2030 2e30 322c 0d0a  Forest': 0.02,..
-00005860: 2020 2020 2320 2745 6c61 7374 6963 4e65      # 'ElasticNe
-00005870: 7427 3a20 302e 3035 2c0d 0a20 2020 2027  t': 0.05,..    '
-00005880: 4d4c 5027 3a20 302e 3033 2c0d 0a20 2020  MLP': 0.03,..   
-00005890: 2027 4465 6369 7369 6f6e 5472 6565 273a   'DecisionTree':
-000058a0: 2030 2e30 352c 0d0a 2020 2020 274b 4e4e   0.05,..    'KNN
-000058b0: 273a 2030 2e30 352c 0d0a 2020 2020 2741  ': 0.05,..    'A
-000058c0: 6461 626f 6f73 7427 3a20 302e 3033 2c0d  daboost': 0.03,.
-000058d0: 0a20 2020 2027 5356 4d27 3a20 302e 3035  .    'SVM': 0.05
-000058e0: 2c0d 0a20 2020 2023 2027 4261 7965 7369  ,..    # 'Bayesi
-000058f0: 616e 5269 6467 6527 3a20 302e 3035 2c0d  anRidge': 0.05,.
-00005900: 0a20 2020 2027 7867 626f 6f73 7427 3a20  .    'xgboost': 
-00005910: 302e 3039 2c0d 0a20 2020 2027 4b65 7261  0.09,..    'Kera
-00005920: 7352 4e4e 273a 2030 2e30 312c 0d0a 2020  sRNN': 0.01,..  
-00005930: 2020 2748 6973 7447 7261 6469 656e 7442    'HistGradientB
-00005940: 6f6f 7374 273a 2030 2e30 332c 0d0a 2020  oost': 0.03,..  
-00005950: 2020 274c 6967 6874 4742 4d27 3a20 302e    'LightGBM': 0.
-00005960: 3039 2c0d 0a20 2020 2027 4c69 6768 7447  09,..    'LightG
-00005970: 424d 5265 6772 6573 736f 7243 6861 696e  BMRegressorChain
-00005980: 273a 2030 2e30 332c 0d0a 2020 2020 2745  ': 0.03,..    'E
-00005990: 7874 7261 5472 6565 7327 3a20 302e 3035  xtraTrees': 0.05
-000059a0: 2c0d 0a20 2020 2027 5261 6469 7573 4e65  ,..    'RadiusNe
-000059b0: 6967 6862 6f72 7327 3a20 302e 3032 2c0d  ighbors': 0.02,.
-000059c0: 0a20 2020 2027 506f 6973 736f 6e52 6567  .    'PoissonReg
-000059d0: 7265 7373 7369 6f6e 273a 2030 2e30 332c  resssion': 0.03,
-000059e0: 0d0a 2020 2020 2752 414e 5341 4327 3a20  ..    'RANSAC': 
-000059f0: 302e 3035 2c0d 0a20 2020 2027 5269 6467  0.05,..    'Ridg
-00005a00: 6527 3a20 302e 3032 2c0d 0a7d 0d0a 2320  e': 0.02,..}..# 
-00005a10: 7468 6573 6520 7368 6f75 6c64 2074 7261  these should tra
-00005a20: 696e 2071 7569 636b 6c79 2077 6974 6820  in quickly with 
-00005a30: 6c6f 7720 6469 6d65 6e73 696f 6e61 6c20  low dimensional 
-00005a40: 582f 592c 2061 6e64 206e 6f74 206d 696e  X/Y, and not min
-00005a50: 6420 6265 696e 6720 7275 6e20 6d75 6c74  d being run mult
-00005a60: 6970 6c65 2069 6e20 7061 7261 6c6c 656c  iple in parallel
-00005a70: 0d0a 756e 6976 6172 6961 7465 5f6d 6f64  ..univariate_mod
-00005a80: 656c 5f64 6963 7420 3d20 7b0d 0a20 2020  el_dict = {..   
-00005a90: 2027 456c 6173 7469 634e 6574 273a 2030   'ElasticNet': 0
-00005aa0: 2e30 352c 0d0a 2020 2020 274d 4c50 273a  .05,..    'MLP':
-00005ab0: 2030 2e30 352c 0d0a 2020 2020 2744 6563   0.05,..    'Dec
-00005ac0: 6973 696f 6e54 7265 6527 3a20 302e 3035  isionTree': 0.05
-00005ad0: 2c0d 0a20 2020 2027 4b4e 4e27 3a20 302e  ,..    'KNN': 0.
-00005ae0: 3033 2c0d 0a20 2020 2027 4164 6162 6f6f  03,..    'Adaboo
-00005af0: 7374 273a 2030 2e30 352c 0d0a 2020 2020  st': 0.05,..    
-00005b00: 2753 564d 273a 2030 2e30 352c 0d0a 2020  'SVM': 0.05,..  
-00005b10: 2020 2742 6179 6573 6961 6e52 6964 6765    'BayesianRidge
-00005b20: 273a 2030 2e30 332c 0d0a 2020 2020 2748  ': 0.03,..    'H
-00005b30: 6973 7447 7261 6469 656e 7442 6f6f 7374  istGradientBoost
-00005b40: 273a 2030 2e30 322c 0d0a 2020 2020 274c  ': 0.02,..    'L
-00005b50: 6967 6874 4742 4d27 3a20 302e 3033 2c0d  ightGBM': 0.03,.
-00005b60: 0a20 2020 2027 4c69 6768 7447 424d 5265  .    'LightGBMRe
-00005b70: 6772 6573 736f 7243 6861 696e 273a 2030  gressorChain': 0
-00005b80: 2e30 312c 0d0a 2020 2020 2745 7874 7261  .01,..    'Extra
-00005b90: 5472 6565 7327 3a20 302e 3035 2c0d 0a20  Trees': 0.05,.. 
-00005ba0: 2020 2027 5261 6469 7573 4e65 6967 6862     'RadiusNeighb
-00005bb0: 6f72 7327 3a20 302e 3035 2c0d 0a20 2020  ors': 0.05,..   
-00005bc0: 2027 5241 4e53 4143 273a 2030 2e30 322c   'RANSAC': 0.02,
-00005bd0: 0d0a 7d0d 0a23 2066 6f72 2068 6967 6820  ..}..# for high 
-00005be0: 6469 6d65 6e73 696f 6e61 6c69 7479 2c20  dimensionality, 
-00005bf0: 6d61 6e79 2d66 6561 7475 7265 2058 2c20  many-feature X, 
-00005c00: 6d61 6e79 2d66 6561 7475 7265 2059 2c20  many-feature Y, 
-00005c10: 6275 7420 7769 7468 206d 6f64 6572 6174  but with moderat
-00005c20: 6520 6f62 7320 636f 756e 740d 0a72 6f6c  e obs count..rol
-00005c30: 6c69 6e67 5f72 6567 7265 7373 696f 6e5f  ling_regression_
-00005c40: 6469 6374 203d 207b 0d0a 2020 2020 2752  dict = {..    'R
-00005c50: 616e 646f 6d46 6f72 6573 7427 3a20 302e  andomForest': 0.
-00005c60: 3032 2c0d 0a20 2020 2027 456c 6173 7469  02,..    'Elasti
-00005c70: 634e 6574 273a 2030 2e30 352c 0d0a 2020  cNet': 0.05,..  
-00005c80: 2020 274d 4c50 273a 2030 2e30 352c 0d0a    'MLP': 0.05,..
-00005c90: 2020 2020 2744 6563 6973 696f 6e54 7265      'DecisionTre
-00005ca0: 6527 3a20 302e 3035 2c0d 0a20 2020 2027  e': 0.05,..    '
-00005cb0: 4b4e 4e27 3a20 302e 3035 2c0d 0a20 2020  KNN': 0.05,..   
-00005cc0: 2027 4164 6162 6f6f 7374 273a 2030 2e30   'Adaboost': 0.0
-00005cd0: 332c 0d0a 2020 2020 2753 564d 273a 2030  3,..    'SVM': 0
-00005ce0: 2e30 352c 0d0a 2020 2020 274b 6572 6173  .05,..    'Keras
-00005cf0: 524e 4e27 3a20 302e 3032 2c0d 0a20 2020  RNN': 0.02,..   
-00005d00: 2027 4c69 6768 7447 424d 273a 2030 2e30   'LightGBM': 0.0
-00005d10: 392c 0d0a 2020 2020 274c 6967 6874 4742  9,..    'LightGB
-00005d20: 4d52 6567 7265 7373 6f72 4368 6169 6e27  MRegressorChain'
-00005d30: 3a20 302e 3033 2c0d 0a20 2020 2027 4578  : 0.03,..    'Ex
-00005d40: 7472 6154 7265 6573 273a 2030 2e30 352c  traTrees': 0.05,
-00005d50: 0d0a 2020 2020 2752 6164 6975 734e 6569  ..    'RadiusNei
-00005d60: 6768 626f 7273 273a 2030 2e30 312c 0d0a  ghbors': 0.01,..
-00005d70: 2020 2020 2750 6f69 7373 6f6e 5265 6772      'PoissonRegr
-00005d80: 6573 7373 696f 6e27 3a20 302e 3033 2c0d  esssion': 0.03,.
-00005d90: 0a20 2020 2027 5241 4e53 4143 273a 2030  .    'RANSAC': 0
-00005da0: 2e30 352c 0d0a 2020 2020 2752 6964 6765  .05,..    'Ridge
-00005db0: 273a 2030 2e30 322c 0d0a 7d0d 0a23 206d  ': 0.02,..}..# m
-00005dc0: 6f64 656c 7320 7768 6572 6520 7765 2063  odels where we c
-00005dd0: 616e 2062 6520 7375 7265 2074 6865 206d  an be sure the m
-00005de0: 6f64 656c 2069 736e 2774 2073 6861 7269  odel isn't shari
-00005df0: 6e67 2069 6e66 6f72 6d61 7469 6f6e 2061  ng information a
-00005e00: 6372 6f73 7320 6d75 6c74 6970 6c65 2059  cross multiple Y
-00005e10: 2773 2e2e 2e0d 0a6e 6f5f 7368 6172 6564  's.....no_shared
-00005e20: 5f6d 6f64 656c 5f64 6963 7420 3d20 7b0d  _model_dict = {.
-00005e30: 0a20 2020 2027 4b4e 4e27 3a20 302e 312c  .    'KNN': 0.1,
-00005e40: 0d0a 2020 2020 2741 6461 626f 6f73 7427  ..    'Adaboost'
-00005e50: 3a20 302e 312c 0d0a 2020 2020 2753 564d  : 0.1,..    'SVM
-00005e60: 273a 2030 2e31 2c0d 0a20 2020 2027 7867  ': 0.1,..    'xg
-00005e70: 626f 6f73 7427 3a20 302e 312c 0d0a 2020  boost': 0.1,..  
-00005e80: 2020 274c 6967 6874 4742 4d27 3a20 302e    'LightGBM': 0.
-00005e90: 312c 0d0a 2020 2020 2748 6973 7447 7261  1,..    'HistGra
-00005ea0: 6469 656e 7442 6f6f 7374 273a 2030 2e31  dientBoost': 0.1
-00005eb0: 2c0d 0a20 2020 2027 506f 6973 736f 6e52  ,..    'PoissonR
-00005ec0: 6567 7265 7373 7369 6f6e 273a 2030 2e30  egresssion': 0.0
-00005ed0: 352c 0d0a 7d0d 0a23 2074 6865 7365 2061  5,..}..# these a
-00005ee0: 7265 206d 6f64 656c 7320 7468 6174 2061  re models that a
-00005ef0: 7265 2072 656c 6174 6976 656c 7920 6661  re relatively fa
-00005f00: 7374 2077 6974 6820 6c61 7267 6520 6d75  st with large mu
-00005f10: 6c74 696f 7574 7075 7420 592c 2073 6d61  ltioutput Y, sma
-00005f20: 6c6c 206e 206f 6273 0d0a 6461 7465 7061  ll n obs..datepa
-00005f30: 7274 5f6d 6f64 656c 5f64 6963 743a 2064  rt_model_dict: d
-00005f40: 6963 7420 3d20 7b0d 0a20 2020 2027 456c  ict = {..    'El
-00005f50: 6173 7469 634e 6574 273a 2030 2e31 2c0d  asticNet': 0.1,.
-00005f60: 0a20 2020 2027 4d4c 5027 3a20 302e 3035  .    'MLP': 0.05
-00005f70: 2c0d 0a20 2020 2027 4465 6369 7369 6f6e  ,..    'Decision
-00005f80: 5472 6565 273a 2030 2e30 322c 0d0a 2020  Tree': 0.02,..  
-00005f90: 2020 2741 6461 626f 6f73 7427 3a20 302e    'Adaboost': 0.
-00005fa0: 3035 2c0d 0a20 2020 2027 5356 4d27 3a20  05,..    'SVM': 
-00005fb0: 302e 3031 2c0d 0a20 2020 2027 4b65 7261  0.01,..    'Kera
-00005fc0: 7352 4e4e 273a 2030 2e30 322c 0d0a 2020  sRNN': 0.02,..  
-00005fd0: 2020 2754 7261 6e73 666f 726d 6572 273a    'Transformer':
-00005fe0: 2030 2e30 322c 2020 2320 736c 6f77 0d0a   0.02,  # slow..
-00005ff0: 2020 2020 2752 6164 6975 734e 6569 6768      'RadiusNeigh
-00006000: 626f 7273 273a 2030 2e31 2c0d 0a7d 0d0a  bors': 0.1,..}..
-00006010: 6461 7465 7061 7274 5f6d 6f64 656c 5f64  datepart_model_d
-00006020: 6963 745f 6465 6570 203d 207b 0d0a 2020  ict_deep = {..  
-00006030: 2020 2752 616e 646f 6d46 6f72 6573 7427    'RandomForest'
-00006040: 3a20 302e 3035 2c20 2023 2063 7261 7368  : 0.05,  # crash
-00006050: 6573 2073 6f6d 6574 696d 6573 2061 7420  es sometimes at 
-00006060: 7363 616c 6520 666f 7220 756e 636c 6561  scale for unclea
-00006070: 7220 7265 6173 6f6e 730d 0a20 2020 2027  r reasons..    '
-00006080: 456c 6173 7469 634e 6574 273a 2030 2e31  ElasticNet': 0.1
-00006090: 2c0d 0a20 2020 2027 7867 626f 6f73 7427  ,..    'xgboost'
-000060a0: 3a20 302e 3035 2c0d 0a20 2020 2027 4d4c  : 0.05,..    'ML
-000060b0: 5027 3a20 302e 3035 2c0d 0a20 2020 2027  P': 0.05,..    '
-000060c0: 4465 6369 7369 6f6e 5472 6565 273a 2030  DecisionTree': 0
-000060d0: 2e30 322c 0d0a 2020 2020 2741 6461 626f  .02,..    'Adabo
-000060e0: 6f73 7427 3a20 302e 3035 2c0d 0a20 2020  ost': 0.05,..   
-000060f0: 2027 5356 4d27 3a20 302e 3031 2c0d 0a20   'SVM': 0.01,.. 
-00006100: 2020 2027 4b65 7261 7352 4e4e 273a 2030     'KerasRNN': 0
-00006110: 2e30 322c 0d0a 2020 2020 2754 7261 6e73  .02,..    'Trans
-00006120: 666f 726d 6572 273a 2030 2e30 322c 2020  former': 0.02,  
-00006130: 2320 736c 6f77 0d0a 2020 2020 2745 7874  # slow..    'Ext
-00006140: 7261 5472 6565 7327 3a20 302e 3031 2c20  raTrees': 0.01, 
-00006150: 2023 2073 6f6d 6520 7061 7261 6d73 2063   # some params c
-00006160: 6175 7365 2052 414d 2063 7261 7368 3f0d  ause RAM crash?.
-00006170: 0a20 2020 2027 5261 6469 7573 4e65 6967  .    'RadiusNeig
-00006180: 6862 6f72 7327 3a20 302e 312c 0d0a 2020  hbors': 0.1,..  
-00006190: 2020 274d 756c 7469 6f75 7470 7574 4750    'MultioutputGP
-000061a0: 5227 3a20 302e 3030 312c 0d0a 7d0d 0a67  R': 0.001,..}..g
-000061b0: 7075 203d 205b 2754 7261 6e73 666f 726d  pu = ['Transform
-000061c0: 6572 272c 2027 4b65 7261 7352 4e4e 272c  er', 'KerasRNN',
-000061d0: 2027 4d4c 5027 5d20 2023 206f 7220 6d6f   'MLP']  # or mo
-000061e0: 7265 2061 6363 7572 6174 656c 792c 206e  re accurately, n
-000061f0: 6f20 646e 6e0d 0a67 7261 6469 656e 745f  o dnn..gradient_
-00006200: 626f 6f73 7469 6e67 203d 207b 0d0a 2020  boosting = {..  
-00006210: 2020 2778 6762 6f6f 7374 273a 2030 2e30    'xgboost': 0.0
-00006220: 392c 0d0a 2020 2020 2748 6973 7447 7261  9,..    'HistGra
-00006230: 6469 656e 7442 6f6f 7374 273a 2030 2e30  dientBoost': 0.0
-00006240: 332c 0d0a 2020 2020 274c 6967 6874 4742  3,..    'LightGB
-00006250: 4d27 3a20 302e 3039 2c0d 0a20 2020 2027  M': 0.09,..    '
-00006260: 4c69 6768 7447 424d 5265 6772 6573 736f  LightGBMRegresso
-00006270: 7243 6861 696e 273a 2030 2e30 332c 0d0a  rChain': 0.03,..
-00006280: 7d0d 0a23 2061 6c6c 2074 7265 6520 6261  }..# all tree ba
-00006290: 7365 6420 6d6f 6465 6c73 0d0a 7472 6565  sed models..tree
-000062a0: 5f64 6963 7420 3d20 7b0d 0a20 2020 2027  _dict = {..    '
-000062b0: 4465 6369 7369 6f6e 5472 6565 273a 2031  DecisionTree': 1
-000062c0: 2c0d 0a20 2020 2027 5261 6e64 6f6d 466f  ,..    'RandomFo
-000062d0: 7265 7374 273a 2031 2c0d 0a20 2020 2027  rest': 1,..    '
-000062e0: 4578 7472 6154 7265 6573 273a 2031 2c0d  ExtraTrees': 1,.
-000062f0: 0a20 2020 2027 4c69 6768 7447 424d 273a  .    'LightGBM':
-00006300: 2031 2c0d 0a20 2020 2027 4869 7374 4772   1,..    'HistGr
-00006310: 6164 6965 6e74 426f 6f73 7427 3a20 312c  adientBoost': 1,
-00006320: 0d0a 2020 2020 2778 6762 6f6f 7374 273a  ..    'xgboost':
-00006330: 2031 2c0d 0a20 2020 2027 5847 4252 6567   1,..    'XGBReg
-00006340: 7265 7373 6f72 273a 2031 2c0d 0a7d 0d0a  ressor': 1,..}..
-00006350: 2320 7072 652d 6f70 7469 6d69 7a65 6420  # pre-optimized 
-00006360: 6d6f 6465 6c20 7465 6d70 6c61 7465 730d  model templates.
-00006370: 0a78 6770 6172 616d 3320 3d20 7b0d 0a20  .xgparam3 = {.. 
-00006380: 2020 2022 6d6f 6465 6c22 3a20 2778 6762     "model": 'xgb
-00006390: 6f6f 7374 272c 0d0a 2020 2020 226d 6f64  oost',..    "mod
-000063a0: 656c 5f70 6172 616d 7322 3a20 7b0d 0a20  el_params": {.. 
-000063b0: 2020 2020 2020 2022 626f 6f73 7465 7222         "booster"
-000063c0: 3a20 2767 6274 7265 6527 2c0d 0a20 2020  : 'gbtree',..   
-000063d0: 2020 2020 2022 636f 6c73 616d 706c 655f       "colsample_
-000063e0: 6279 6c65 7665 6c22 3a20 302e 3534 2c0d  bylevel": 0.54,.
-000063f0: 0a20 2020 2020 2020 2022 6c65 6172 6e69  .        "learni
-00006400: 6e67 5f72 6174 6522 3a20 302e 3031 3235  ng_rate": 0.0125
-00006410: 2c0d 0a20 2020 2020 2020 2022 6d61 785f  ,..        "max_
-00006420: 6465 7074 6822 3a20 3131 2c0d 0a20 2020  depth": 11,..   
-00006430: 2020 2020 2022 6d69 6e5f 6368 696c 645f       "min_child_
-00006440: 7765 6967 6874 223a 2030 2e30 3132 3732  weight": 0.01272
-00006450: 3033 2c0d 0a20 2020 2020 2020 2022 6e5f  03,..        "n_
-00006460: 6573 7469 6d61 746f 7273 223a 2033 3139  estimators": 319
-00006470: 2c0d 0a20 2020 207d 2c0d 0a7d 0d0a 7867  ,..    },..}..xg
-00006480: 7061 7261 6d31 203d 207b 0d0a 2020 2020  param1 = {..    
-00006490: 226d 6f64 656c 223a 2027 7867 626f 6f73  "model": 'xgboos
-000064a0: 7427 2c0d 0a20 2020 2022 6d6f 6465 6c5f  t',..    "model_
-000064b0: 7061 7261 6d73 223a 207b 0d0a 2020 2020  params": {..    
-000064c0: 2020 2020 276e 5f65 7374 696d 6174 6f72      'n_estimator
-000064d0: 7327 3a20 372c 0d0a 2020 2020 2020 2020  s': 7,..        
-000064e0: 276d 6178 5f6c 6561 7665 7327 3a20 342c  'max_leaves': 4,
-000064f0: 0d0a 2020 2020 2020 2020 276d 696e 5f63  ..        'min_c
-00006500: 6869 6c64 5f77 6569 6768 7427 3a20 322e  hild_weight': 2.
-00006510: 352c 0d0a 2020 2020 2020 2020 276c 6561  5,..        'lea
-00006520: 726e 696e 675f 7261 7465 273a 2030 2e33  rning_rate': 0.3
-00006530: 352c 0d0a 2020 2020 2020 2020 2773 7562  5,..        'sub
-00006540: 7361 6d70 6c65 273a 2030 2e39 352c 0d0a  sample': 0.95,..
-00006550: 2020 2020 2020 2020 2763 6f6c 7361 6d70          'colsamp
-00006560: 6c65 5f62 796c 6576 656c 273a 2030 2e35  le_bylevel': 0.5
-00006570: 362c 0d0a 2020 2020 2020 2020 2763 6f6c  6,..        'col
-00006580: 7361 6d70 6c65 5f62 7974 7265 6527 3a20  sample_bytree': 
-00006590: 302e 3436 2c0d 0a20 2020 2020 2020 2027  0.46,..        '
-000065a0: 7265 675f 616c 7068 6127 3a20 302e 3030  reg_alpha': 0.00
-000065b0: 3136 2c0d 0a20 2020 2020 2020 2027 7265  16,..        're
-000065c0: 675f 6c61 6d62 6461 273a 2035 2e33 2c0d  g_lambda': 5.3,.
-000065d0: 0a20 2020 207d 2c0d 0a7d 0d0a 7867 7061  .    },..}..xgpa
-000065e0: 7261 6d32 203d 207b 0d0a 2020 2020 226d  ram2 = {..    "m
-000065f0: 6f64 656c 223a 2027 7867 626f 6f73 7427  odel": 'xgboost'
-00006600: 2c0d 0a20 2020 2022 6d6f 6465 6c5f 7061  ,..    "model_pa
-00006610: 7261 6d73 223a 207b 0d0a 2020 2020 2020  rams": {..      
-00006620: 2020 2262 6173 655f 7363 6f72 6522 3a20    "base_score": 
-00006630: 302e 352c 0d0a 2020 2020 2020 2020 2262  0.5,..        "b
-00006640: 6f6f 7374 6572 223a 2027 6762 7472 6565  ooster": 'gbtree
-00006650: 272c 0d0a 2020 2020 2020 2020 2263 6f6c  ',..        "col
-00006660: 7361 6d70 6c65 5f62 796c 6576 656c 223a  sample_bylevel":
-00006670: 2030 2e36 3932 2c0d 0a20 2020 2020 2020   0.692,..       
-00006680: 2022 6c65 6172 6e69 6e67 5f72 6174 6522   "learning_rate"
-00006690: 3a20 302e 3032 322c 0d0a 2020 2020 2020  : 0.022,..      
-000066a0: 2020 226d 6178 5f62 696e 223a 2032 3536    "max_bin": 256
-000066b0: 2c0d 0a20 2020 2020 2020 2022 6d61 785f  ,..        "max_
-000066c0: 6465 7074 6822 3a20 3134 2c0d 0a20 2020  depth": 14,..   
-000066d0: 2020 2020 2022 6d61 785f 6c65 6176 6573       "max_leaves
-000066e0: 223a 2030 2c0d 0a20 2020 2020 2020 2022  ": 0,..        "
-000066f0: 6d69 6e5f 6368 696c 645f 7765 6967 6874  min_child_weight
-00006700: 223a 2030 2e30 3234 2c0d 0a20 2020 2020  ": 0.024,..     
-00006710: 2020 2022 6e5f 6573 7469 6d61 746f 7273     "n_estimators
-00006720: 223a 2031 3632 2c0d 0a20 2020 207d 2c0d  ": 162,..    },.
-00006730: 0a7d 0d0a 6c69 6768 7467 626d 7031 203d  .}..lightgbmp1 =
-00006740: 207b 0d0a 2020 2020 226d 6f64 656c 223a   {..    "model":
-00006750: 2027 4c69 6768 7447 424d 272c 0d0a 2020   'LightGBM',..  
-00006760: 2020 226d 6f64 656c 5f70 6172 616d 7322    "model_params"
-00006770: 3a20 7b0d 0a20 2020 2020 2020 2022 636f  : {..        "co
-00006780: 6c73 616d 706c 655f 6279 7472 6565 223a  lsample_bytree":
-00006790: 2030 2e31 3634 352c 0d0a 2020 2020 2020   0.1645,..      
-000067a0: 2020 226c 6561 726e 696e 675f 7261 7465    "learning_rate
-000067b0: 223a 2030 2e30 3230 332c 0d0a 2020 2020  ": 0.0203,..    
-000067c0: 2020 2020 226d 6178 5f62 696e 223a 2031      "max_bin": 1
-000067d0: 3032 332c 0d0a 2020 2020 2020 2020 226d  023,..        "m
-000067e0: 696e 5f63 6869 6c64 5f73 616d 706c 6573  in_child_samples
-000067f0: 223a 2031 362c 0d0a 2020 2020 2020 2020  ": 16,..        
-00006800: 226e 5f65 7374 696d 6174 6f72 7322 3a20  "n_estimators": 
-00006810: 3137 3934 2c0d 0a20 2020 2020 2020 2022  1794,..        "
-00006820: 6e75 6d5f 6c65 6176 6573 223a 2031 352c  num_leaves": 15,
-00006830: 0d0a 2020 2020 2020 2020 2272 6567 5f61  ..        "reg_a
-00006840: 6c70 6861 223a 2030 2e30 3030 3938 2c0d  lpha": 0.00098,.
-00006850: 0a20 2020 2020 2020 2022 7265 675f 6c61  .        "reg_la
-00006860: 6d62 6461 223a 2030 2e36 3836 2c0d 0a20  mbda": 0.686,.. 
-00006870: 2020 207d 2c0d 0a7d 0d0a 6c69 6768 7467     },..}..lightg
-00006880: 626d 7032 203d 207b 0d0a 2020 2020 226d  bmp2 = {..    "m
-00006890: 6f64 656c 223a 2027 4c69 6768 7447 424d  odel": 'LightGBM
-000068a0: 272c 0d0a 2020 2020 226d 6f64 656c 5f70  ',..    "model_p
-000068b0: 6172 616d 7322 3a20 7b0d 0a20 2020 2020  arams": {..     
-000068c0: 2020 2022 636f 6c73 616d 706c 655f 6279     "colsample_by
-000068d0: 7472 6565 223a 2030 2e39 3437 2c0d 0a20  tree": 0.947,.. 
-000068e0: 2020 2020 2020 2022 6c65 6172 6e69 6e67         "learning
-000068f0: 5f72 6174 6522 3a20 302e 3730 3234 2c0d  _rate": 0.7024,.
-00006900: 0a20 2020 2020 2020 2022 6d61 785f 6269  .        "max_bi
-00006910: 6e22 3a20 3235 352c 0d0a 2020 2020 2020  n": 255,..      
-00006920: 2020 226d 696e 5f63 6869 6c64 5f73 616d    "min_child_sam
-00006930: 706c 6573 223a 2031 352c 0d0a 2020 2020  ples": 15,..    
-00006940: 2020 2020 226e 5f65 7374 696d 6174 6f72      "n_estimator
-00006950: 7322 3a20 352c 0d0a 2020 2020 2020 2020  s": 5,..        
-00006960: 226e 756d 5f6c 6561 7665 7322 3a20 3335  "num_leaves": 35
-00006970: 2c0d 0a20 2020 2020 2020 2022 7265 675f  ,..        "reg_
-00006980: 616c 7068 6122 3a20 302e 3030 3330 382c  alpha": 0.00308,
-00006990: 0d0a 2020 2020 2020 2020 2272 6567 5f6c  ..        "reg_l
-000069a0: 616d 6264 6122 3a20 352e 3138 322c 0d0a  ambda": 5.182,..
-000069b0: 2020 2020 7d2c 0d0a 7d0d 0a0d 0a0d 0a64      },..}......d
-000069c0: 6566 2067 656e 6572 6174 655f 636c 6173  ef generate_clas
-000069d0: 7369 6669 6572 5f70 6172 616d 7328 0d0a  sifier_params(..
-000069e0: 2020 2020 6d6f 6465 6c5f 6469 6374 3d4e      model_dict=N
-000069f0: 6f6e 652c 0d0a 2020 2020 6d65 7468 6f64  one,..    method
-00006a00: 3d22 6465 6661 756c 7422 2c0d 0a29 3a0d  ="default",..):.
-00006a10: 0a20 2020 2069 6620 6d6f 6465 6c5f 6469  .    if model_di
-00006a20: 6374 2069 7320 4e6f 6e65 3a0d 0a20 2020  ct is None:..   
-00006a30: 2020 2020 2069 6620 6d65 7468 6f64 203d       if method =
-00006a40: 3d20 2266 6173 7422 3a0d 0a20 2020 2020  = "fast":..     
-00006a50: 2020 2020 2020 206d 6f64 656c 5f64 6963         model_dic
-00006a60: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
-00006a70: 2020 2020 2020 2027 7867 626f 6f73 7427         'xgboost'
-00006a80: 3a20 312c 0d0a 2020 2020 2020 2020 2020  : 1,..          
-00006a90: 2020 2020 2020 2320 2745 7874 7261 5472        # 'ExtraTr
-00006aa0: 6565 7327 3a20 302e 322c 2020 2320 6372  ees': 0.2,  # cr
-00006ab0: 6173 6865 7320 736f 6d65 7469 6d65 730d  ashes sometimes.
-00006ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006ad0: 2023 2027 5261 6e64 6f6d 466f 7265 7374   # 'RandomForest
-00006ae0: 273a 2030 2e31 2c0d 0a20 2020 2020 2020  ': 0.1,..       
-00006af0: 2020 2020 2020 2020 2027 4b4e 4e27 3a20           'KNN': 
-00006b00: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00006b10: 2020 2020 2753 4744 273a 2030 2e31 2c0d      'SGD': 0.1,.
-00006b20: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
-00006b30: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00006b40: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-00006b50: 5f64 6963 7420 3d20 7b0d 0a20 2020 2020  _dict = {..     
-00006b60: 2020 2020 2020 2020 2020 2027 7867 626f             'xgbo
-00006b70: 6f73 7427 3a20 302e 352c 0d0a 2020 2020  ost': 0.5,..    
-00006b80: 2020 2020 2020 2020 2020 2020 2745 7874              'Ext
-00006b90: 7261 5472 6565 7327 3a20 302e 322c 0d0a  raTrees': 0.2,..
-00006ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006bb0: 2752 616e 646f 6d46 6f72 6573 7427 3a20  'RandomForest': 
-00006bc0: 302e 312c 0d0a 2020 2020 2020 2020 2020  0.1,..          
-00006bd0: 2020 2020 2020 274b 4e4e 273a 2031 2c0d        'KNN': 1,.
-00006be0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006bf0: 2027 5347 4427 3a20 302e 312c 0d0a 2020   'SGD': 0.1,..  
-00006c00: 2020 2020 2020 2020 2020 7d0d 0a20 2020            }..   
-00006c10: 2072 6567 725f 7061 7261 6d73 203d 2067   regr_params = g
-00006c20: 656e 6572 6174 655f 7265 6772 6573 736f  enerate_regresso
-00006c30: 725f 7061 7261 6d73 280d 0a20 2020 2020  r_params(..     
-00006c40: 2020 206d 6f64 656c 5f64 6963 743d 6d6f     model_dict=mo
-00006c50: 6465 6c5f 6469 6374 2c0d 0a20 2020 2020  del_dict,..     
-00006c60: 2020 206d 6574 686f 643d 6d65 7468 6f64     method=method
-00006c70: 2c0d 0a20 2020 2029 0d0a 2020 2020 6966  ,..    )..    if
-00006c80: 2072 6567 725f 7061 7261 6d73 5b22 6d6f   regr_params["mo
-00006c90: 6465 6c22 5d20 3d3d 2027 7867 626f 6f73  del"] == 'xgboos
-00006ca0: 7427 3a0d 0a20 2020 2020 2020 2069 6620  t':..        if 
-00006cb0: 226f 626a 6563 7469 7665 2220 696e 2072  "objective" in r
-00006cc0: 6567 725f 7061 7261 6d73 5b27 6d6f 6465  egr_params['mode
-00006cd0: 6c5f 7061 7261 6d73 275d 2e6b 6579 7328  l_params'].keys(
-00006ce0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00006cf0: 7265 6772 5f70 6172 616d 735b 276d 6f64  regr_params['mod
-00006d00: 656c 5f70 6172 616d 7327 5d2e 706f 7028  el_params'].pop(
-00006d10: 276f 626a 6563 7469 7665 272c 204e 6f6e  'objective', Non
-00006d20: 6529 0d0a 2020 2020 656c 6966 2072 6567  e)..    elif reg
-00006d30: 725f 7061 7261 6d73 5b22 6d6f 6465 6c22  r_params["model"
-00006d40: 5d20 3d3d 2027 4578 7472 6154 7265 6573  ] == 'ExtraTrees
-00006d50: 273a 0d0a 2020 2020 2020 2020 7265 6772  ':..        regr
-00006d60: 5f70 6172 616d 735b 276d 6f64 656c 5f70  _params['model_p
-00006d70: 6172 616d 7327 5d5b 2763 7269 7465 7269  arams']['criteri
-00006d80: 6f6e 275d 203d 2027 6769 6e69 270d 0a20  on'] = 'gini'.. 
-00006d90: 2020 2072 6574 7572 6e20 7265 6772 5f70     return regr_p
-00006da0: 6172 616d 730d 0a0d 0a0d 0a64 6566 2067  arams......def g
-00006db0: 656e 6572 6174 655f 7265 6772 6573 736f  enerate_regresso
-00006dc0: 725f 7061 7261 6d73 280d 0a20 2020 206d  r_params(..    m
-00006dd0: 6f64 656c 5f64 6963 743d 4e6f 6e65 2c0d  odel_dict=None,.
-00006de0: 0a20 2020 206d 6574 686f 643d 2264 6566  .    method="def
-00006df0: 6175 6c74 222c 0d0a 293a 0d0a 2020 2020  ault",..):..    
-00006e00: 2222 2247 656e 6572 6174 6520 6e65 7720  """Generate new 
-00006e10: 7061 7261 6d65 7465 7273 2066 6f72 2069  parameters for i
-00006e20: 6e70 7574 2074 6f20 7265 6772 6573 736f  nput to regresso
-00006e30: 722e 2222 220d 0a20 2020 2023 2066 6f72  r."""..    # for
-00006e40: 6365 206e 6575 7261 6c20 6e65 7477 6f72  ce neural networ
-00006e50: 6b73 2066 6f72 2074 6573 7469 6e67 2070  ks for testing p
-00006e60: 7572 706f 7365 730d 0a20 2020 2069 6620  urposes..    if 
-00006e70: 6d65 7468 6f64 2069 6e20 5b22 6465 6661  method in ["defa
-00006e80: 756c 7422 2c20 2772 616e 646f 6d27 2c20  ult", 'random', 
-00006e90: 2766 6173 7427 5d3a 0d0a 2020 2020 2020  'fast']:..      
-00006ea0: 2020 7061 7373 0d0a 2020 2020 656c 6966    pass..    elif
-00006eb0: 206d 6574 686f 6420 3d3d 2022 6e65 7572   method == "neur
-00006ec0: 616c 6e65 7473 223a 0d0a 2020 2020 2020  alnets":..      
-00006ed0: 2020 6d6f 6465 6c5f 6469 6374 203d 207b    model_dict = {
-00006ee0: 0d0a 2020 2020 2020 2020 2020 2020 274b  ..            'K
-00006ef0: 6572 6173 524e 4e27 3a20 302e 3035 2c0d  erasRNN': 0.05,.
-00006f00: 0a20 2020 2020 2020 2020 2020 2027 5472  .            'Tr
-00006f10: 616e 7366 6f72 6d65 7227 3a20 302e 3035  ansformer': 0.05
-00006f20: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00006f30: 4d4c 5027 3a20 302e 3035 2c0d 0a20 2020  MLP': 0.05,..   
-00006f40: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-00006f50: 6d65 7468 6f64 203d 2022 6465 6570 220d  method = "deep".
-00006f60: 0a20 2020 2065 6c69 6620 6d65 7468 6f64  .    elif method
-00006f70: 203d 3d20 2267 7261 6469 656e 745f 626f   == "gradient_bo
-00006f80: 6f73 7469 6e67 223a 0d0a 2020 2020 2020  osting":..      
-00006f90: 2020 6d6f 6465 6c5f 6469 6374 203d 2067    model_dict = g
-00006fa0: 7261 6469 656e 745f 626f 6f73 7469 6e67  radient_boosting
-00006fb0: 0d0a 2020 2020 2020 2020 6d65 7468 6f64  ..        method
-00006fc0: 203d 2022 6465 6661 756c 7422 0d0a 2020   = "default"..  
-00006fd0: 2020 656c 6966 206d 6574 686f 6420 3d3d    elif method ==
-00006fe0: 2022 7472 6565 7322 3a0d 0a20 2020 2020   "trees":..     
-00006ff0: 2020 206d 6f64 656c 5f64 6963 7420 3d20     model_dict = 
-00007000: 7472 6565 5f64 6963 740d 0a20 2020 2020  tree_dict..     
-00007010: 2020 206d 6574 686f 6420 3d20 2264 6566     method = "def
-00007020: 6175 6c74 220d 0a20 2020 2065 6c69 6620  ault"..    elif 
-00007030: 6d65 7468 6f64 2069 6e20 736b 6c65 6172  method in sklear
-00007040: 6e5f 6d6f 6465 6c5f 6469 6374 2e6b 6579  n_model_dict.key
-00007050: 7328 293a 0d0a 2020 2020 2020 2020 6d6f  s():..        mo
-00007060: 6465 6c5f 6469 6374 203d 207b 6d65 7468  del_dict = {meth
-00007070: 6f64 3a20 736b 6c65 6172 6e5f 6d6f 6465  od: sklearn_mode
-00007080: 6c5f 6469 6374 5b6d 6574 686f 645d 7d0d  l_dict[method]}.
-00007090: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
-000070a0: 6469 6374 2069 7320 4e6f 6e65 3a0d 0a20  dict is None:.. 
-000070b0: 2020 2020 2020 206d 6f64 656c 5f64 6963         model_dic
-000070c0: 7420 3d20 736b 6c65 6172 6e5f 6d6f 6465  t = sklearn_mode
-000070d0: 6c5f 6469 6374 0d0a 2020 2020 2320 7573  l_dict..    # us
-000070e0: 6564 2069 6e20 4361 7373 616e 6472 6120  ed in Cassandra 
-000070f0: 746f 2072 656d 6f76 6520 736c 6f77 6573  to remove slowes
-00007100: 7420 6d6f 6465 6c73 0d0a 2020 2020 6966  t models..    if
-00007110: 206d 6574 686f 6420 3d3d 2022 6e6f 5f67   method == "no_g
-00007120: 7075 223a 0d0a 2020 2020 2020 2020 6d6f  pu":..        mo
-00007130: 6465 6c5f 6469 6374 203d 207b 783a 2079  del_dict = {x: y
-00007140: 2066 6f72 2028 782c 2079 2920 696e 206d   for (x, y) in m
-00007150: 6f64 656c 5f64 6963 742e 6974 656d 7328  odel_dict.items(
-00007160: 2920 6966 2078 206e 6f74 2069 6e20 6770  ) if x not in gp
-00007170: 757d 0d0a 2020 2020 6d6f 6465 6c5f 6c69  u}..    model_li
-00007180: 7374 203d 206c 6973 7428 6d6f 6465 6c5f  st = list(model_
-00007190: 6469 6374 2e6b 6579 7328 2929 0d0a 2020  dict.keys())..  
-000071a0: 2020 6d6f 6465 6c20 3d20 7261 6e64 6f6d    model = random
-000071b0: 2e63 686f 6963 6573 286d 6f64 656c 5f6c  .choices(model_l
-000071c0: 6973 742c 206c 6973 7428 6d6f 6465 6c5f  ist, list(model_
-000071d0: 6469 6374 2e76 616c 7565 7328 2929 2c20  dict.values()), 
-000071e0: 6b3d 3129 5b30 5d0d 0a20 2020 2069 6620  k=1)[0]..    if 
-000071f0: 6d6f 6465 6c20 696e 205b 0d0a 2020 2020  model in [..    
-00007200: 2020 2020 2778 6762 6f6f 7374 272c 0d0a      'xgboost',..
-00007210: 2020 2020 2020 2020 2741 6461 626f 6f73          'Adaboos
-00007220: 7427 2c0d 0a20 2020 2020 2020 2027 4465  t',..        'De
-00007230: 6369 7369 6f6e 5472 6565 272c 0d0a 2020  cisionTree',..  
-00007240: 2020 2020 2020 274c 6967 6874 4742 4d27        'LightGBM'
-00007250: 2c0d 0a20 2020 2020 2020 2027 4c69 6768  ,..        'Ligh
-00007260: 7447 424d 5265 6772 6573 736f 7243 6861  tGBMRegressorCha
-00007270: 696e 272c 0d0a 2020 2020 2020 2020 274d  in',..        'M
-00007280: 4c50 272c 0d0a 2020 2020 2020 2020 274b  LP',..        'K
-00007290: 4e4e 272c 0d0a 2020 2020 2020 2020 274b  NN',..        'K
-000072a0: 6572 6173 524e 4e27 2c0d 0a20 2020 2020  erasRNN',..     
-000072b0: 2020 2027 5472 616e 7366 6f72 6d65 7227     'Transformer'
-000072c0: 2c0d 0a20 2020 2020 2020 2027 4869 7374  ,..        'Hist
-000072d0: 4772 6164 6965 6e74 426f 6f73 7427 2c0d  GradientBoost',.
-000072e0: 0a20 2020 2020 2020 2027 5261 6e64 6f6d  .        'Random
-000072f0: 466f 7265 7374 272c 0d0a 2020 2020 2020  Forest',..      
-00007300: 2020 2745 7874 7261 5472 6565 7327 2c0d    'ExtraTrees',.
-00007310: 0a20 2020 2020 2020 2027 5269 6467 6527  .        'Ridge'
-00007320: 2c0d 0a20 2020 2020 2020 2027 4761 7573  ,..        'Gaus
-00007330: 7369 616e 5072 6f63 6573 7352 6567 7265  sianProcessRegre
-00007340: 7373 6f72 272c 0d0a 2020 2020 2020 2020  ssor',..        
-00007350: 274d 756c 7469 6f75 7470 7574 4750 5227  'MultioutputGPR'
-00007360: 2c0d 0a20 2020 205d 3a0d 0a20 2020 2020  ,..    ]:..     
-00007370: 2020 2069 6620 6d6f 6465 6c20 3d3d 2027     if model == '
-00007380: 4164 6162 6f6f 7374 273a 0d0a 2020 2020  Adaboost':..    
-00007390: 2020 2020 2020 2020 7061 7261 6d5f 6469          param_di
-000073a0: 6374 203d 207b 0d0a 2020 2020 2020 2020  ct = {..        
-000073b0: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
-000073c0: 2027 4164 6162 6f6f 7374 272c 0d0a 2020   'Adaboost',..  
-000073d0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-000073e0: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
-000073f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007400: 2020 2020 2022 6e5f 6573 7469 6d61 746f       "n_estimato
-00007410: 7273 223a 2072 616e 646f 6d2e 6368 6f69  rs": random.choi
-00007420: 6365 7328 5b35 302c 2031 3030 2c20 3530  ces([50, 100, 50
-00007430: 305d 2c20 5b30 2e37 2c20 302e 322c 2030  0], [0.7, 0.2, 0
-00007440: 2e31 5d29 5b30 5d2c 0d0a 2020 2020 2020  .1])[0],..      
-00007450: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-00007460: 6f73 7322 3a20 7261 6e64 6f6d 2e63 686f  oss": random.cho
-00007470: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-00007480: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00007490: 276c 696e 6561 7227 2c20 2773 7175 6172  'linear', 'squar
-000074a0: 6527 2c20 2765 7870 6f6e 656e 7469 616c  e', 'exponential
-000074b0: 275d 2c20 5b30 2e38 2c20 302e 3031 2c20  '], [0.8, 0.01, 
-000074c0: 302e 315d 0d0a 2020 2020 2020 2020 2020  0.1]..          
-000074d0: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
-000074e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000074f0: 2020 2020 2022 6573 7469 6d61 746f 7222       "estimator"
-00007500: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-00007510: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00007520: 2020 2020 2020 2020 2020 205b 4e6f 6e65             [None
-00007530: 2c20 274c 696e 5265 6727 2c20 2753 5652  , 'LinReg', 'SVR
-00007540: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
-00007550: 2020 2020 2020 2020 2020 2020 205b 302e               [0.
-00007560: 382c 2030 2e31 2c20 302e 305d 2c20 2023  8, 0.1, 0.0],  #
-00007570: 2053 5652 2073 6c6f 7720 616e 6420 6372   SVR slow and cr
-00007580: 6173 6820 7072 6f6e 650d 0a20 2020 2020  ash prone..     
-00007590: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000075a0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-000075b0: 2020 2020 2020 2020 2020 226c 6561 726e            "learn
-000075c0: 696e 675f 7261 7465 223a 2072 616e 646f  ing_rate": rando
-000075d0: 6d2e 6368 6f69 6365 7328 5b31 2c20 302e  m.choices([1, 0.
-000075e0: 355d 2c20 5b30 2e39 2c20 302e 315d 295b  5], [0.9, 0.1])[
-000075f0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-00007600: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-00007610: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-00007620: 656c 6966 206d 6f64 656c 203d 3d20 2778  elif model == 'x
-00007630: 6762 6f6f 7374 273a 0d0a 2020 2020 2020  gboost':..      
-00007640: 2020 2020 2020 6272 616e 6368 203d 2072        branch = r
-00007650: 616e 646f 6d2e 6368 6f69 6365 7328 5b27  andom.choices(['
-00007660: 7031 272c 2027 7032 272c 2027 7033 272c  p1', 'p2', 'p3',
-00007670: 2027 7261 6e64 6f6d 275d 2c20 5b30 2e31   'random'], [0.1
-00007680: 2c20 302e 312c 2030 2e31 2c20 302e 375d  , 0.1, 0.1, 0.7]
-00007690: 295b 0d0a 2020 2020 2020 2020 2020 2020  )[..            
-000076a0: 2020 2020 300d 0a20 2020 2020 2020 2020      0..         
-000076b0: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
-000076c0: 2020 6966 2062 7261 6e63 6820 3d3d 2027    if branch == '
-000076d0: 7031 273a 0d0a 2020 2020 2020 2020 2020  p1':..          
-000076e0: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-000076f0: 203d 2078 6770 6172 616d 310d 0a20 2020   = xgparam1..   
-00007700: 2020 2020 2020 2020 2065 6c69 6620 6272           elif br
-00007710: 616e 6368 203d 3d20 2770 3227 3a0d 0a20  anch == 'p2':.. 
-00007720: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00007730: 6172 616d 5f64 6963 7420 3d20 7867 7061  aram_dict = xgpa
-00007740: 7261 6d32 0d0a 2020 2020 2020 2020 2020  ram2..          
-00007750: 2020 656c 6966 2062 7261 6e63 6820 3d3d    elif branch ==
-00007760: 2027 7033 273a 0d0a 2020 2020 2020 2020   'p3':..        
-00007770: 2020 2020 2020 2020 7061 7261 6d5f 6469          param_di
-00007780: 6374 203d 2078 6770 6172 616d 330d 0a20  ct = xgparam3.. 
-00007790: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000077a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000077b0: 2020 6f62 6a65 6374 6976 6520 3d20 7261    objective = ra
-000077c0: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
-000077d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077e0: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
-000077f0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
-00007800: 6f75 6e74 3a70 6f69 7373 6f6e 272c 0d0a  ount:poisson',..
-00007810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007820: 2020 2020 2020 2020 2772 6567 3a73 7175          'reg:squ
-00007830: 6172 6564 6572 726f 7227 2c0d 0a20 2020  arederror',..   
-00007840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007850: 2020 2020 2027 7265 673a 6761 6d6d 6127       'reg:gamma'
-00007860: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00007870: 2020 2020 2020 2020 2020 2027 7265 673a             'reg:
-00007880: 7073 6575 646f 6875 6265 7265 7272 6f72  pseudohubererror
-00007890: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-000078a0: 2020 2020 2020 2020 2020 2020 2772 6567              'reg
-000078b0: 3a71 7561 6e74 696c 6565 7272 6f72 272c  :quantileerror',
-000078c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000078d0: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
-000078e0: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
-000078f0: 2e31 2c20 302e 362c 2030 2e31 2c20 302e  .1, 0.6, 0.1, 0.
-00007900: 312c 2030 2e31 5d2c 0d0a 2020 2020 2020  1, 0.1],..      
-00007910: 2020 2020 2020 2020 2020 295b 305d 0d0a            )[0]..
-00007920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007930: 7061 7261 6d5f 6469 6374 203d 207b 0d0a  param_dict = {..
-00007940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007950: 2020 2020 226d 6f64 656c 223a 2027 7867      "model": 'xg
-00007960: 626f 6f73 7427 2c0d 0a20 2020 2020 2020  boost',..       
-00007970: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
-00007980: 6465 6c5f 7061 7261 6d73 223a 207b 0d0a  del_params": {..
-00007990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079a0: 2020 2020 2020 2020 2262 6f6f 7374 6572          "booster
-000079b0: 223a 2072 616e 646f 6d2e 6368 6f69 6365  ": random.choice
-000079c0: 7328 5b27 6762 7472 6565 272c 2027 6762  s(['gbtree', 'gb
-000079d0: 6c69 6e65 6172 275d 2c20 5b30 2e37 2c20  linear'], [0.7, 
-000079e0: 302e 335d 295b 0d0a 2020 2020 2020 2020  0.3])[..        
-000079f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a00: 2020 2020 300d 0a20 2020 2020 2020 2020      0..         
-00007a10: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
-00007a20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00007a30: 2020 2020 2020 2020 2020 2022 6f62 6a65             "obje
-00007a40: 6374 6976 6522 3a20 6f62 6a65 6374 6976  ctive": objectiv
-00007a50: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00007a60: 2020 2020 2020 2020 2020 2020 226d 6178              "max
-00007a70: 5f64 6570 7468 223a 2072 616e 646f 6d2e  _depth": random.
-00007a80: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
-00007a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007aa0: 2020 2020 2020 5b36 2c20 332c 2032 2c20        [6, 3, 2, 
-00007ab0: 385d 2c20 5b30 2e36 2c20 302e 342c 2030  8], [0.6, 0.4, 0
-00007ac0: 2e32 2c20 302e 3031 5d0d 0a20 2020 2020  .2, 0.01]..     
-00007ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007ae0: 2020 2029 5b30 5d2c 0d0a 2020 2020 2020     )[0],..      
-00007af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b00: 2020 2265 7461 223a 2072 616e 646f 6d2e    "eta": random.
-00007b10: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
-00007b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b30: 2020 2020 2020 5b31 2e30 2c20 302e 332c        [1.0, 0.3,
-00007b40: 2030 2e30 312c 2030 2e30 332c 2030 2e30   0.01, 0.03, 0.0
-00007b50: 352c 2030 2e30 3033 5d2c 0d0a 2020 2020  5, 0.003],..    
-00007b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b70: 2020 2020 2020 2020 5b30 2e30 352c 2030          [0.05, 0
-00007b80: 2e31 2c20 302e 312c 2030 2e31 2c20 302e  .1, 0.1, 0.1, 0.
-00007b90: 312c 2030 2e31 5d2c 0d0a 2020 2020 2020  1, 0.1],..      
+00001410: 2020 2020 2020 2020 2020 2020 2020 7665                ve
+00001420: 7262 6f73 653d 302c 0d0a 2020 2020 2020  rbose=0,..      
+00001430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001440: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
+00001450: 655f 626f 6f6c 3d46 616c 7365 2c0d 0a20  e_bool=False,.. 
+00001460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001470: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00001480: 616e 646f 6d5f 7365 6564 3d32 3032 302c  andom_seed=2020,
+00001490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000014a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014b0: 2020 6d75 6c74 696f 7574 7075 743d 4661    multioutput=Fa
+000014c0: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
+000014d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000014e0: 2020 292c 0d0a 2020 2020 2020 2020 2020    ),..          
+000014f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001500: 2020 6d61 785f 6c61 673d 636f 696e 7465    max_lag=cointe
+00001510: 6772 6174 696f 6e5f 6c61 672c 0d0a 2020  gration_lag,..  
+00001520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001530: 2020 2020 2020 292c 0d0a 2020 2020 2020        ),..      
+00001540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001550: 2020 286c 6f63 616c 5f64 662e 7661 6c75    (local_df.valu
+00001560: 6573 292e 542c 0d0a 2020 2020 2020 2020  es).T,..        
+00001570: 2020 2020 2020 2020 2020 2020 292e 542c              ).T,
+00001580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001590: 2020 2020 2020 696e 6465 783d 6c6f 6361        index=loca
+000015a0: 6c5f 6466 2e69 6e64 6578 2c0d 0a20 2020  l_df.index,..   
+000015b0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
+000015c0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+000015d0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000015e0: 2020 2020 2020 2020 2020 582e 6170 7065            X.appe
+000015f0: 6e64 280d 0a20 2020 2020 2020 2020 2020  nd(..           
+00001600: 2020 2020 2070 642e 4461 7461 4672 616d       pd.DataFram
+00001610: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+00001620: 2020 2020 2020 2020 6e70 2e6d 6174 6d75          np.matmu
+00001630: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+00001640: 2020 2020 2020 2020 2020 2020 636f 696e              coin
+00001650: 745f 6a6f 6861 6e73 656e 286c 6f63 616c  t_johansen(local
+00001660: 5f64 662e 7661 6c75 6573 2c20 6b5f 6172  _df.values, k_ar
+00001670: 5f64 6966 663d 636f 696e 7465 6772 6174  _diff=cointegrat
+00001680: 696f 6e5f 6c61 6729 2c0d 0a20 2020 2020  ion_lag),..     
+00001690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000016a0: 2020 2028 6c6f 6361 6c5f 6466 2e76 616c     (local_df.val
+000016b0: 7565 7329 2e54 2c0d 0a20 2020 2020 2020  ues).T,..       
+000016c0: 2020 2020 2020 2020 2020 2020 2029 2e54               ).T
+000016d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000016e0: 2020 2020 2020 2069 6e64 6578 3d6c 6f63         index=loc
+000016f0: 616c 5f64 662e 696e 6465 782c 0d0a 2020  al_df.index,..  
+00001700: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00001710: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00001720: 2020 2020 6966 2061 6273 5f65 6e65 7267      if abs_energ
+00001730: 793a 0d0a 2020 2020 2020 2020 582e 6170  y:..        X.ap
+00001740: 7065 6e64 286c 6f63 616c 5f64 662e 706f  pend(local_df.po
+00001750: 7728 6f74 6865 723d 285b 325d 202a 206c  w(other=([2] * l
+00001760: 656e 286c 6f63 616c 5f64 662e 636f 6c75  en(local_df.colu
+00001770: 6d6e 7329 2929 2e63 756d 7375 6d28 2929  mns))).cumsum())
+00001780: 0d0a 2020 2020 6966 2073 7472 2872 6f6c  ..    if str(rol
+00001790: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
+000017a0: 7269 6f64 7329 2e69 7364 6967 6974 2829  riods).isdigit()
+000017b0: 3a0d 0a20 2020 2020 2020 2074 656d 7020  :..        temp 
+000017c0: 3d20 6c6f 6361 6c5f 6466 2e72 6f6c 6c69  = local_df.rolli
+000017d0: 6e67 2872 6f6c 6c69 6e67 5f61 7574 6f63  ng(rolling_autoc
+000017e0: 6f72 725f 7065 7269 6f64 7329 2e61 7070  orr_periods).app
+000017f0: 6c79 280d 0a20 2020 2020 2020 2020 2020  ly(..           
+00001800: 206c 616d 6264 6120 783a 2078 2e61 7574   lambda x: x.aut
+00001810: 6f63 6f72 7228 292c 2072 6177 3d46 616c  ocorr(), raw=Fal
+00001820: 7365 0d0a 2020 2020 2020 2020 290d 0a20  se..        ).. 
+00001830: 2020 2020 2020 2074 656d 702e 636f 6c75         temp.colu
+00001840: 6d6e 7320 3d20 5b27 726f 6c6c 6175 746f  mns = ['rollauto
+00001850: 636f 7272 2720 666f 7220 636f 6c20 696e  corr' for col in
+00001860: 2074 656d 702e 636f 6c75 6d6e 735d 0d0a   temp.columns]..
+00001870: 2020 2020 2020 2020 582e 6170 7065 6e64          X.append
+00001880: 2874 656d 7029 0d0a 2020 2020 2320 756e  (temp)..    # un
+00001890: 6c69 6b65 2074 6865 206f 7468 6572 732c  like the others,
+000018a0: 2074 6869 7320 7075 6c6c 7320 7468 6520   this pulls the 
+000018b0: 656e 7469 7265 2077 696e 646f 772c 206e  entire window, n
+000018c0: 6f74 206a 7573 7420 6f6e 6520 6c61 670d  ot just one lag.
+000018d0: 0a20 2020 2069 6620 7374 7228 7769 6e64  .    if str(wind
+000018e0: 6f77 292e 6973 6469 6769 7428 293a 0d0a  ow).isdigit():..
+000018f0: 2020 2020 2020 2020 2320 7765 2061 6c72          # we alr
+00001900: 6561 6479 2068 6176 6520 6c61 6720 3120  eady have lag 1 
+00001910: 7573 696e 6720 7468 6973 0d0a 2020 2020  using this..    
+00001920: 2020 2020 666f 7220 6375 7272 5f73 6869      for curr_shi
+00001930: 6674 2069 6e20 7261 6e67 6528 312c 2077  ft in range(1, w
+00001940: 696e 646f 7729 3a0d 0a20 2020 2020 2020  indow):..       
+00001950: 2020 2020 2058 2e61 7070 656e 6428 0d0a       X.append(..
+00001960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001970: 6c6f 6361 6c5f 6466 2e73 6869 6674 2863  local_df.shift(c
+00001980: 7572 725f 7368 6966 7429 2e72 656e 616d  urr_shift).renam
+00001990: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+000019a0: 2020 2020 2020 2020 636f 6c75 6d6e 733d          columns=
+000019b0: 6c61 6d62 6461 2078 3a20 2277 696e 646f  lambda x: "windo
+000019c0: 775f 2220 2b20 7374 7228 6375 7272 5f73  w_" + str(curr_s
+000019d0: 6869 6674 2920 2b20 225f 2220 2b20 780d  hift) + "_" + x.
+000019e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000019f0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00001a00: 2920 2023 2062 6163 6b66 696c 6c20 7368  )  # backfill sh
+00001a10: 6f75 6c64 2066 696c 6c20 6c61 7374 2076  ould fill last v
+00001a20: 616c 7565 7320 7361 6665 6c79 0d0a 0d0a  alues safely....
+00001a30: 2020 2020 6966 2061 6464 5f64 6174 655f      if add_date_
+00001a40: 7061 7274 206e 6f74 2069 6e20 5b4e 6f6e  part not in [Non
+00001a50: 652c 2022 4e6f 6e65 222c 2022 6e6f 6e65  e, "None", "none
+00001a60: 225d 3a0d 0a20 2020 2020 2020 2061 6865  "]:..        ahe
+00001a70: 6164 5f69 6e64 6578 203d 206c 6f63 616c  ad_index = local
+00001a80: 5f64 662e 696e 6465 782e 7368 6966 7428  _df.index.shift(
+00001a90: 312c 2066 7265 713d 696e 6665 7272 6564  1, freq=inferred
+00001aa0: 5f66 7265 7129 0d0a 2020 2020 2020 2020  _freq)..        
+00001ab0: 6461 7465 5f70 6172 745f 6466 203d 2064  date_part_df = d
+00001ac0: 6174 655f 7061 7274 2861 6865 6164 5f69  ate_part(ahead_i
+00001ad0: 6e64 6578 2c20 6d65 7468 6f64 3d61 6464  ndex, method=add
+00001ae0: 5f64 6174 655f 7061 7274 290d 0a20 2020  _date_part)..   
+00001af0: 2020 2020 2064 6174 655f 7061 7274 5f64       date_part_d
+00001b00: 662e 696e 6465 7820 3d20 6c6f 6361 6c5f  f.index = local_
+00001b10: 6466 2e69 6e64 6578 0d0a 2020 2020 2020  df.index..      
+00001b20: 2020 582e 6170 7065 6e64 2864 6174 655f    X.append(date_
+00001b30: 7061 7274 5f64 6629 0d0a 2020 2020 5820  part_df)..    X 
+00001b40: 3d20 7064 2e63 6f6e 6361 7428 582c 2061  = pd.concat(X, a
+00001b50: 7869 733d 3129 0d0a 0d0a 2020 2020 6966  xis=1)....    if
+00001b60: 2068 6f6c 6964 6179 3a0d 0a20 2020 2020   holiday:..     
+00001b70: 2020 2061 6865 6164 5f69 6e64 6578 203d     ahead_index =
+00001b80: 206c 6f63 616c 5f64 662e 696e 6465 782e   local_df.index.
+00001b90: 7368 6966 7428 312c 2066 7265 713d 696e  shift(1, freq=in
+00001ba0: 6665 7272 6564 5f66 7265 7129 0d0a 2020  ferred_freq)..  
+00001bb0: 2020 2020 2020 6168 6561 645f 325f 696e        ahead_2_in
+00001bc0: 6465 7820 3d20 6c6f 6361 6c5f 6466 2e69  dex = local_df.i
+00001bd0: 6e64 6578 2e73 6869 6674 2832 2c20 6672  ndex.shift(2, fr
+00001be0: 6571 3d69 6e66 6572 7265 645f 6672 6571  eq=inferred_freq
+00001bf0: 290d 0a20 2020 2020 2020 2066 756c 6c5f  )..        full_
+00001c00: 696e 6465 7820 3d20 6168 6561 645f 696e  index = ahead_in
+00001c10: 6465 782e 756e 696f 6e28 6168 6561 645f  dex.union(ahead_
+00001c20: 325f 696e 6465 7829 0d0a 2020 2020 2020  2_index)..      
+00001c30: 2020 686c 6466 6c61 6720 3d20 686f 6c69    hldflag = holi
+00001c40: 6461 795f 666c 6167 2866 756c 6c5f 696e  day_flag(full_in
+00001c50: 6465 782c 2063 6f75 6e74 7279 3d68 6f6c  dex, country=hol
+00001c60: 6964 6179 5f63 6f75 6e74 7279 290d 0a20  iday_country).. 
+00001c70: 2020 2020 2020 2058 5b27 686f 6c69 6461         X['holida
+00001c80: 795f 666c 6167 5f27 5d20 3d20 686c 6466  y_flag_'] = hldf
+00001c90: 6c61 672e 7265 696e 6465 7828 6168 6561  lag.reindex(ahea
+00001ca0: 645f 696e 6465 7829 2e74 6f5f 6e75 6d70  d_index).to_nump
+00001cb0: 7928 290d 0a20 2020 2020 2020 2058 5b27  y()..        X['
+00001cc0: 686f 6c69 6461 795f 666c 6167 5f66 7574  holiday_flag_fut
+00001cd0: 7572 655f 275d 203d 2068 6c64 666c 6167  ure_'] = hldflag
+00001ce0: 2e72 6569 6e64 6578 2861 6865 6164 5f32  .reindex(ahead_2
+00001cf0: 5f69 6e64 6578 292e 746f 5f6e 756d 7079  _index).to_numpy
+00001d00: 2829 0d0a 0d0a 2020 2020 2320 5820 3d20  ()....    # X = 
+00001d10: 582e 7265 706c 6163 6528 5b6e 702e 696e  X.replace([np.in
+00001d20: 662c 202d 6e70 2e69 6e66 5d2c 206e 702e  f, -np.inf], np.
+00001d30: 6e61 6e29 0d0a 2020 2020 5820 3d20 582e  nan)..    X = X.
+00001d40: 6266 696c 6c28 290d 0a0d 0a20 2020 2069  bfill()....    i
+00001d50: 6620 7374 7228 706f 6c79 6e6f 6d69 616c  f str(polynomial
+00001d60: 5f64 6567 7265 6529 2e69 7364 6967 6974  _degree).isdigit
+00001d70: 2829 3a0d 0a20 2020 2020 2020 2070 6f6c  ():..        pol
+00001d80: 796e 6f6d 6961 6c5f 6465 6772 6565 203d  ynomial_degree =
+00001d90: 2061 6273 2869 6e74 2870 6f6c 796e 6f6d   abs(int(polynom
+00001da0: 6961 6c5f 6465 6772 6565 2929 0d0a 2020  ial_degree))..  
+00001db0: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
+00001dc0: 726e 2e70 7265 7072 6f63 6573 7369 6e67  rn.preprocessing
+00001dd0: 2069 6d70 6f72 7420 506f 6c79 6e6f 6d69   import Polynomi
+00001de0: 616c 4665 6174 7572 6573 0d0a 0d0a 2020  alFeatures....  
+00001df0: 2020 2020 2020 706f 6c79 203d 2050 6f6c        poly = Pol
+00001e00: 796e 6f6d 6961 6c46 6561 7475 7265 7328  ynomialFeatures(
+00001e10: 706f 6c79 6e6f 6d69 616c 5f64 6567 7265  polynomial_degre
+00001e20: 6529 0d0a 2020 2020 2020 2020 5820 3d20  e)..        X = 
+00001e30: 7064 2e44 6174 6146 7261 6d65 2870 6f6c  pd.DataFrame(pol
+00001e40: 792e 6669 745f 7472 616e 7366 6f72 6d28  y.fit_transform(
+00001e50: 5829 290d 0a0d 0a20 2020 2023 2072 656e  X))....    # ren
+00001e60: 616d 6520 746f 2072 656d 6f76 6520 6475  ame to remove du
+00001e70: 706c 6963 6174 6573 2062 7574 2073 7469  plicates but sti
+00001e80: 6c6c 206b 6565 7020 6e61 6d65 7320 6966  ll keep names if
+00001e90: 2070 7265 7365 6e74 0d0a 2020 2020 582e   present..    X.
+00001ea0: 636f 6c75 6d6e 7320 3d20 5b0d 0a20 2020  columns = [..   
+00001eb0: 2020 2020 206d 202b 2022 5f22 202b 2073       m + "_" + s
+00001ec0: 7472 286e 290d 0a20 2020 2020 2020 2066  tr(n)..        f
+00001ed0: 6f72 206d 2c20 6e20 696e 207a 6970 285b  or m, n in zip([
+00001ee0: 7374 7228 7829 2066 6f72 2078 2069 6e20  str(x) for x in 
+00001ef0: 7261 6e67 6528 6c65 6e28 582e 636f 6c75  range(len(X.colu
+00001f00: 6d6e 7329 295d 2c20 582e 636f 6c75 6d6e  mns))], X.column
+00001f10: 732e 746f 6c69 7374 2829 290d 0a20 2020  s.tolist())..   
+00001f20: 205d 0d0a 0d0a 2020 2020 7265 7475 726e   ]....    return
+00001f30: 2058 0d0a 0d0a 0d0a 6465 6620 726f 6c6c   X......def roll
+00001f40: 696e 675f 785f 7265 6772 6573 736f 725f  ing_x_regressor_
+00001f50: 7265 6772 6573 736f 7228 0d0a 2020 2020  regressor(..    
+00001f60: 6466 2c0d 0a20 2020 206d 6561 6e5f 726f  df,..    mean_ro
+00001f70: 6c6c 696e 675f 7065 7269 6f64 733a 2069  lling_periods: i
+00001f80: 6e74 203d 2033 302c 0d0a 2020 2020 6d61  nt = 30,..    ma
+00001f90: 6364 5f70 6572 696f 6473 3a20 696e 7420  cd_periods: int 
+00001fa0: 3d20 4e6f 6e65 2c0d 0a20 2020 2073 7464  = None,..    std
+00001fb0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+00001fc0: 3a20 696e 7420 3d20 372c 0d0a 2020 2020  : int = 7,..    
+00001fd0: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
+00001fe0: 6f64 733a 2069 6e74 203d 204e 6f6e 652c  ods: int = None,
+00001ff0: 0d0a 2020 2020 6d69 6e5f 726f 6c6c 696e  ..    min_rollin
+00002000: 675f 7065 7269 6f64 733a 2069 6e74 203d  g_periods: int =
+00002010: 204e 6f6e 652c 0d0a 2020 2020 7175 616e   None,..    quan
+00002020: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
+00002030: 6572 696f 6473 3a20 696e 7420 3d20 4e6f  eriods: int = No
+00002040: 6e65 2c0d 0a20 2020 2071 7561 6e74 696c  ne,..    quantil
+00002050: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
+00002060: 6f64 733a 2069 6e74 203d 204e 6f6e 652c  ods: int = None,
+00002070: 0d0a 2020 2020 6577 6d5f 616c 7068 613a  ..    ewm_alpha:
+00002080: 2066 6c6f 6174 203d 2030 2e35 2c0d 0a20   float = 0.5,.. 
+00002090: 2020 2065 776d 5f76 6172 5f61 6c70 6861     ewm_var_alpha
+000020a0: 3a20 666c 6f61 7420 3d20 4e6f 6e65 2c0d  : float = None,.
+000020b0: 0a20 2020 2061 6464 6974 696f 6e61 6c5f  .    additional_
+000020c0: 6c61 675f 7065 7269 6f64 733a 2069 6e74  lag_periods: int
+000020d0: 203d 2037 2c0d 0a20 2020 2061 6273 5f65   = 7,..    abs_e
+000020e0: 6e65 7267 793a 2062 6f6f 6c20 3d20 4661  nergy: bool = Fa
+000020f0: 6c73 652c 0d0a 2020 2020 726f 6c6c 696e  lse,..    rollin
+00002100: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+00002110: 6473 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ds: int = None,.
+00002120: 0a20 2020 206e 6f6e 7a65 726f 5f6c 6173  .    nonzero_las
+00002130: 745f 6e3a 2069 6e74 203d 204e 6f6e 652c  t_n: int = None,
+00002140: 0d0a 2020 2020 6164 645f 6461 7465 5f70  ..    add_date_p
+00002150: 6172 743a 2073 7472 203d 204e 6f6e 652c  art: str = None,
+00002160: 0d0a 2020 2020 686f 6c69 6461 793a 2062  ..    holiday: b
+00002170: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
+00002180: 2020 686f 6c69 6461 795f 636f 756e 7472    holiday_countr
+00002190: 793a 2073 7472 203d 2027 5553 272c 0d0a  y: str = 'US',..
+000021a0: 2020 2020 706f 6c79 6e6f 6d69 616c 5f64      polynomial_d
+000021b0: 6567 7265 653a 2069 6e74 203d 204e 6f6e  egree: int = Non
+000021c0: 652c 0d0a 2020 2020 7769 6e64 6f77 3a20  e,..    window: 
+000021d0: 696e 7420 3d20 4e6f 6e65 2c0d 0a20 2020  int = None,..   
+000021e0: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+000021f0: 723d 4e6f 6e65 2c0d 0a20 2020 2072 6567  r=None,..    reg
+00002200: 7265 7373 6f72 5f70 6572 5f73 6572 6965  ressor_per_serie
+00002210: 733d 4e6f 6e65 2c0d 0a20 2020 2073 7461  s=None,..    sta
+00002220: 7469 635f 7265 6772 6573 736f 723d 4e6f  tic_regressor=No
+00002230: 6e65 2c0d 0a20 2020 2063 6f69 6e74 6567  ne,..    cointeg
+00002240: 7261 7469 6f6e 3a20 7374 7220 3d20 4e6f  ration: str = No
+00002250: 6e65 2c0d 0a20 2020 2063 6f69 6e74 6567  ne,..    cointeg
+00002260: 7261 7469 6f6e 5f6c 6167 3a20 696e 7420  ration_lag: int 
+00002270: 3d20 312c 0d0a 2020 2020 7365 7269 6573  = 1,..    series
+00002280: 5f69 643d 4e6f 6e65 2c0d 0a29 3a0d 0a20  _id=None,..):.. 
+00002290: 2020 2022 2222 4164 6473 2069 6e20 7468     """Adds in th
+000022a0: 6520 6675 7475 7265 5f72 6567 7265 7373  e future_regress
+000022b0: 6f72 2e22 2222 0d0a 2020 2020 5820 3d20  or."""..    X = 
+000022c0: 726f 6c6c 696e 675f 785f 7265 6772 6573  rolling_x_regres
+000022d0: 736f 7228 0d0a 2020 2020 2020 2020 6466  sor(..        df
+000022e0: 2c0d 0a20 2020 2020 2020 206d 6561 6e5f  ,..        mean_
+000022f0: 726f 6c6c 696e 675f 7065 7269 6f64 733d  rolling_periods=
+00002300: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
+00002310: 696f 6473 2c0d 0a20 2020 2020 2020 206d  iods,..        m
+00002320: 6163 645f 7065 7269 6f64 733d 6d61 6364  acd_periods=macd
+00002330: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+00002340: 2020 2073 7464 5f72 6f6c 6c69 6e67 5f70     std_rolling_p
+00002350: 6572 696f 6473 3d73 7464 5f72 6f6c 6c69  eriods=std_rolli
+00002360: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+00002370: 2020 2020 206d 6178 5f72 6f6c 6c69 6e67       max_rolling
+00002380: 5f70 6572 696f 6473 3d6d 6178 5f72 6f6c  _periods=max_rol
+00002390: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+000023a0: 2020 2020 2020 206d 696e 5f72 6f6c 6c69         min_rolli
+000023b0: 6e67 5f70 6572 696f 6473 3d6d 696e 5f72  ng_periods=min_r
+000023c0: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
+000023d0: 0a20 2020 2020 2020 2065 776d 5f76 6172  .        ewm_var
+000023e0: 5f61 6c70 6861 3d65 776d 5f76 6172 5f61  _alpha=ewm_var_a
+000023f0: 6c70 6861 2c0d 0a20 2020 2020 2020 2071  lpha,..        q
+00002400: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
+00002410: 675f 7065 7269 6f64 733d 7175 616e 7469  g_periods=quanti
+00002420: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+00002430: 696f 6473 2c0d 0a20 2020 2020 2020 2071  iods,..        q
+00002440: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
+00002450: 675f 7065 7269 6f64 733d 7175 616e 7469  g_periods=quanti
+00002460: 6c65 3130 5f72 6f6c 6c69 6e67 5f70 6572  le10_rolling_per
+00002470: 696f 6473 2c0d 0a20 2020 2020 2020 2061  iods,..        a
+00002480: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
+00002490: 7269 6f64 733d 6164 6469 7469 6f6e 616c  riods=additional
+000024a0: 5f6c 6167 5f70 6572 696f 6473 2c0d 0a20  _lag_periods,.. 
+000024b0: 2020 2020 2020 2065 776d 5f61 6c70 6861         ewm_alpha
+000024c0: 3d65 776d 5f61 6c70 6861 2c0d 0a20 2020  =ewm_alpha,..   
+000024d0: 2020 2020 2061 6273 5f65 6e65 7267 793d       abs_energy=
+000024e0: 6162 735f 656e 6572 6779 2c0d 0a20 2020  abs_energy,..   
+000024f0: 2020 2020 2072 6f6c 6c69 6e67 5f61 7574       rolling_aut
+00002500: 6f63 6f72 725f 7065 7269 6f64 733d 726f  ocorr_periods=ro
+00002510: 6c6c 696e 675f 6175 746f 636f 7272 5f70  lling_autocorr_p
+00002520: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+00002530: 206e 6f6e 7a65 726f 5f6c 6173 745f 6e3d   nonzero_last_n=
+00002540: 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e 2c0d  nonzero_last_n,.
+00002550: 0a20 2020 2020 2020 2061 6464 5f64 6174  .        add_dat
+00002560: 655f 7061 7274 3d61 6464 5f64 6174 655f  e_part=add_date_
+00002570: 7061 7274 2c0d 0a20 2020 2020 2020 2068  part,..        h
+00002580: 6f6c 6964 6179 3d68 6f6c 6964 6179 2c0d  oliday=holiday,.
+00002590: 0a20 2020 2020 2020 2068 6f6c 6964 6179  .        holiday
+000025a0: 5f63 6f75 6e74 7279 3d68 6f6c 6964 6179  _country=holiday
+000025b0: 5f63 6f75 6e74 7279 2c0d 0a20 2020 2020  _country,..     
+000025c0: 2020 2070 6f6c 796e 6f6d 6961 6c5f 6465     polynomial_de
+000025d0: 6772 6565 3d70 6f6c 796e 6f6d 6961 6c5f  gree=polynomial_
+000025e0: 6465 6772 6565 2c0d 0a20 2020 2020 2020  degree,..       
+000025f0: 2077 696e 646f 773d 7769 6e64 6f77 2c0d   window=window,.
+00002600: 0a20 2020 2020 2020 2063 6f69 6e74 6567  .        cointeg
+00002610: 7261 7469 6f6e 3d63 6f69 6e74 6567 7261  ration=cointegra
+00002620: 7469 6f6e 2c0d 0a20 2020 2020 2020 2063  tion,..        c
+00002630: 6f69 6e74 6567 7261 7469 6f6e 5f6c 6167  ointegration_lag
+00002640: 3d63 6f69 6e74 6567 7261 7469 6f6e 5f6c  =cointegration_l
+00002650: 6167 2c0d 0a20 2020 2029 0d0a 2020 2020  ag,..    )..    
+00002660: 6966 2066 7574 7572 655f 7265 6772 6573  if future_regres
+00002670: 736f 7220 6973 206e 6f74 204e 6f6e 653a  sor is not None:
+00002680: 0d0a 2020 2020 2020 2020 5820 3d20 7064  ..        X = pd
+00002690: 2e63 6f6e 6361 7428 5b58 2c20 6675 7475  .concat([X, futu
+000026a0: 7265 5f72 6567 7265 7373 6f72 5d2c 2061  re_regressor], a
+000026b0: 7869 733d 3129 0d0a 2020 2020 6966 2072  xis=1)..    if r
+000026c0: 6567 7265 7373 6f72 5f70 6572 5f73 6572  egressor_per_ser
+000026d0: 6965 7320 6973 206e 6f74 204e 6f6e 653a  ies is not None:
+000026e0: 0d0a 2020 2020 2020 2020 5820 3d20 582e  ..        X = X.
+000026f0: 6d65 7267 6528 7265 6772 6573 736f 725f  merge(regressor_
+00002700: 7065 725f 7365 7269 6573 2c20 6c65 6674  per_series, left
+00002710: 5f69 6e64 6578 3d54 7275 652c 2072 6967  _index=True, rig
+00002720: 6874 5f69 6e64 6578 3d54 7275 652c 2068  ht_index=True, h
+00002730: 6f77 3d27 6c65 6674 2729 0d0a 2020 2020  ow='left')..    
+00002740: 6966 2073 7461 7469 635f 7265 6772 6573  if static_regres
+00002750: 736f 7220 6973 206e 6f74 204e 6f6e 653a  sor is not None:
+00002760: 0d0a 2020 2020 2020 2020 585b 2773 6572  ..        X['ser
+00002770: 6965 735f 6964 275d 203d 2064 662e 636f  ies_id'] = df.co
+00002780: 6c75 6d6e 735b 305d 0d0a 2020 2020 2020  lumns[0]..      
+00002790: 2020 5820 3d20 582e 6d65 7267 6528 7374    X = X.merge(st
+000027a0: 6174 6963 5f72 6567 7265 7373 6f72 2c20  atic_regressor, 
+000027b0: 6c65 6674 5f6f 6e3d 2273 6572 6965 735f  left_on="series_
+000027c0: 6964 222c 2072 6967 6874 5f69 6e64 6578  id", right_index
+000027d0: 3d54 7275 652c 2068 6f77 3d27 6c65 6674  =True, how='left
+000027e0: 2729 0d0a 2020 2020 2020 2020 5820 3d20  ')..        X = 
+000027f0: 582e 6472 6f70 2863 6f6c 756d 6e73 3d5b  X.drop(columns=[
+00002800: 2773 6572 6965 735f 6964 275d 290d 0a20  'series_id']).. 
+00002810: 2020 2069 6620 7365 7269 6573 5f69 6420     if series_id 
+00002820: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00002830: 2020 2020 2020 6861 7368 6564 203d 2028        hashed = (
+00002840: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00002850: 7428 6861 7368 6c69 622e 7368 6132 3536  t(hashlib.sha256
+00002860: 2873 7472 2873 6572 6965 735f 6964 292e  (str(series_id).
+00002870: 656e 636f 6465 2827 7574 662d 3827 2929  encode('utf-8'))
+00002880: 2e68 6578 6469 6765 7374 2829 2c20 3136  .hexdigest(), 16
+00002890: 290d 0a20 2020 2020 2020 2020 2020 2025  )..            %
+000028a0: 2031 302a 2a31 360d 0a20 2020 2020 2020   10**16..       
+000028b0: 2029 0d0a 2020 2020 2020 2020 585b 2773   )..        X['s
+000028c0: 6572 6965 735f 6964 275d 203d 2068 6173  eries_id'] = has
+000028d0: 6865 640d 0a20 2020 2072 6574 7572 6e20  hed..    return 
+000028e0: 580d 0a0d 0a0d 0a64 6566 2072 6574 7269  X......def retri
+000028f0: 6576 655f 7265 6772 6573 736f 7228 0d0a  eve_regressor(..
+00002900: 2020 2020 7265 6772 6573 7369 6f6e 5f6d      regression_m
+00002910: 6f64 656c 3a20 6469 6374 203d 207b 0d0a  odel: dict = {..
+00002920: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
+00002930: 2027 5261 6e64 6f6d 466f 7265 7374 272c   'RandomForest',
+00002940: 0d0a 2020 2020 2020 2020 226d 6f64 656c  ..        "model
+00002950: 5f70 6172 616d 7322 3a20 7b0d 0a20 2020  _params": {..   
+00002960: 2020 2020 2020 2020 2027 6e5f 6573 7469           'n_esti
+00002970: 6d61 746f 7273 273a 2033 3030 2c0d 0a20  mators': 300,.. 
+00002980: 2020 2020 2020 2020 2020 2027 6d69 6e5f             'min_
+00002990: 7361 6d70 6c65 735f 6c65 6166 273a 2031  samples_leaf': 1
+000029a0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+000029b0: 626f 6f74 7374 7261 7027 3a20 4661 6c73  bootstrap': Fals
+000029c0: 652c 0d0a 2020 2020 2020 2020 7d2c 0d0a  e,..        },..
+000029d0: 2020 2020 7d2c 0d0a 2020 2020 7665 7262      },..    verb
+000029e0: 6f73 653a 2069 6e74 203d 2030 2c0d 0a20  ose: int = 0,.. 
+000029f0: 2020 2076 6572 626f 7365 5f62 6f6f 6c3a     verbose_bool:
+00002a00: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00002a10: 2020 2020 7261 6e64 6f6d 5f73 6565 643a      random_seed:
+00002a20: 2069 6e74 203d 2032 3032 302c 0d0a 2020   int = 2020,..  
+00002a30: 2020 6e5f 6a6f 6273 3a20 696e 7420 3d20    n_jobs: int = 
+00002a40: 312c 0d0a 2020 2020 6d75 6c74 696f 7574  1,..    multiout
+00002a50: 7075 743a 2062 6f6f 6c20 3d20 5472 7565  put: bool = True
+00002a60: 2c0d 0a29 3a0d 0a20 2020 2022 2222 436f  ,..):..    """Co
+00002a70: 6e76 6572 7420 6120 6d6f 6465 6c20 7061  nvert a model pa
+00002a80: 7261 6d20 6469 6374 2074 6f20 6d6f 6465  ram dict to mode
+00002a90: 6c20 6f62 6a65 6374 2066 6f72 2072 6567  l object for reg
+00002aa0: 7265 7373 696f 6e20 6672 616d 6577 6f72  ression framewor
+00002ab0: 6b73 2e22 2222 0d0a 2020 2020 6d6f 6465  ks."""..    mode
+00002ac0: 6c5f 636c 6173 7320 3d20 7265 6772 6573  l_class = regres
+00002ad0: 7369 6f6e 5f6d 6f64 656c 5b27 6d6f 6465  sion_model['mode
+00002ae0: 6c27 5d0d 0a20 2020 206d 6f64 656c 5f70  l']..    model_p
+00002af0: 6172 616d 5f64 6963 7420 3d20 7265 6772  aram_dict = regr
+00002b00: 6573 7369 6f6e 5f6d 6f64 656c 2e67 6574  ession_model.get
+00002b10: 2822 6d6f 6465 6c5f 7061 7261 6d73 222c  ("model_params",
+00002b20: 207b 7d29 0d0a 2020 2020 6966 206d 6f64   {})..    if mod
+00002b30: 656c 5f63 6c61 7373 203d 3d20 2745 6c61  el_class == 'Ela
+00002b40: 7374 6963 4e65 7427 3a0d 0a20 2020 2020  sticNet':..     
+00002b50: 2020 2069 6620 6d75 6c74 696f 7574 7075     if multioutpu
+00002b60: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00002b70: 6672 6f6d 2073 6b6c 6561 726e 2e6c 696e  from sklearn.lin
+00002b80: 6561 725f 6d6f 6465 6c20 696d 706f 7274  ear_model import
+00002b90: 204d 756c 7469 5461 736b 456c 6173 7469   MultiTaskElasti
+00002ba0: 634e 6574 0d0a 0d0a 2020 2020 2020 2020  cNet....        
+00002bb0: 2020 2020 7265 6772 203d 204d 756c 7469      regr = Multi
+00002bc0: 5461 736b 456c 6173 7469 634e 6574 280d  TaskElasticNet(.
+00002bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002be0: 2061 6c70 6861 3d31 2e30 2c20 7261 6e64   alpha=1.0, rand
+00002bf0: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
+00002c00: 7365 6564 2c20 2a2a 6d6f 6465 6c5f 7061  seed, **model_pa
+00002c10: 7261 6d5f 6469 6374 0d0a 2020 2020 2020  ram_dict..      
+00002c20: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00002c30: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00002c40: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
+00002c50: 2e6c 696e 6561 725f 6d6f 6465 6c20 696d  .linear_model im
+00002c60: 706f 7274 2045 6c61 7374 6963 4e65 740d  port ElasticNet.
+00002c70: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
+00002c80: 6567 7220 3d20 456c 6173 7469 634e 6574  egr = ElasticNet
+00002c90: 2861 6c70 6861 3d31 2e30 2c20 7261 6e64  (alpha=1.0, rand
+00002ca0: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
+00002cb0: 7365 6564 2c20 2a2a 6d6f 6465 6c5f 7061  seed, **model_pa
+00002cc0: 7261 6d5f 6469 6374 290d 0a20 2020 2020  ram_dict)..     
+00002cd0: 2020 2072 6574 7572 6e20 7265 6772 0d0a     return regr..
+00002ce0: 2020 2020 656c 6966 206d 6f64 656c 5f63      elif model_c
+00002cf0: 6c61 7373 203d 3d20 2744 6563 6973 696f  lass == 'Decisio
+00002d00: 6e54 7265 6527 3a0d 0a20 2020 2020 2020  nTree':..       
+00002d10: 2066 726f 6d20 736b 6c65 6172 6e2e 7472   from sklearn.tr
+00002d20: 6565 2069 6d70 6f72 7420 4465 6369 7369  ee import Decisi
+00002d30: 6f6e 5472 6565 5265 6772 6573 736f 720d  onTreeRegressor.
+00002d40: 0a0d 0a20 2020 2020 2020 2072 6567 7220  ...        regr 
+00002d50: 3d20 4465 6369 7369 6f6e 5472 6565 5265  = DecisionTreeRe
+00002d60: 6772 6573 736f 7228 7261 6e64 6f6d 5f73  gressor(random_s
+00002d70: 7461 7465 3d72 616e 646f 6d5f 7365 6564  tate=random_seed
+00002d80: 2c20 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  , **model_param_
+00002d90: 6469 6374 290d 0a20 2020 2020 2020 2072  dict)..        r
+00002da0: 6574 7572 6e20 7265 6772 0d0a 2020 2020  eturn regr..    
+00002db0: 656c 6966 206d 6f64 656c 5f63 6c61 7373  elif model_class
+00002dc0: 203d 3d20 274d 4c50 273a 0d0a 2020 2020   == 'MLP':..    
+00002dd0: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
+00002de0: 2e6e 6575 7261 6c5f 6e65 7477 6f72 6b20  .neural_network 
+00002df0: 696d 706f 7274 204d 4c50 5265 6772 6573  import MLPRegres
+00002e00: 736f 720d 0a0d 0a20 2020 2020 2020 2072  sor....        r
+00002e10: 6567 7220 3d20 4d4c 5052 6567 7265 7373  egr = MLPRegress
+00002e20: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00002e30: 2072 616e 646f 6d5f 7374 6174 653d 7261   random_state=ra
+00002e40: 6e64 6f6d 5f73 6565 642c 2076 6572 626f  ndom_seed, verbo
+00002e50: 7365 3d76 6572 626f 7365 5f62 6f6f 6c2c  se=verbose_bool,
+00002e60: 202a 2a6d 6f64 656c 5f70 6172 616d 5f64   **model_param_d
+00002e70: 6963 740d 0a20 2020 2020 2020 2029 0d0a  ict..        )..
+00002e80: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00002e90: 6567 720d 0a20 2020 2065 6c69 6620 6d6f  egr..    elif mo
+00002ea0: 6465 6c5f 636c 6173 7320 3d3d 2027 4b65  del_class == 'Ke
+00002eb0: 7261 7352 4e4e 273a 0d0a 2020 2020 2020  rasRNN':..      
+00002ec0: 2020 6672 6f6d 2061 7574 6f74 732e 6d6f    from autots.mo
+00002ed0: 6465 6c73 2e64 6e6e 2069 6d70 6f72 7420  dels.dnn import 
+00002ee0: 4b65 7261 7352 4e4e 0d0a 0d0a 2020 2020  KerasRNN....    
+00002ef0: 2020 2020 7265 6772 203d 204b 6572 6173      regr = Keras
+00002f00: 524e 4e28 7665 7262 6f73 653d 7665 7262  RNN(verbose=verb
+00002f10: 6f73 652c 2072 616e 646f 6d5f 7365 6564  ose, random_seed
+00002f20: 3d72 616e 646f 6d5f 7365 6564 2c20 2a2a  =random_seed, **
+00002f30: 6d6f 6465 6c5f 7061 7261 6d5f 6469 6374  model_param_dict
+00002f40: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00002f50: 6e20 7265 6772 0d0a 2020 2020 656c 6966  n regr..    elif
+00002f60: 206d 6f64 656c 5f63 6c61 7373 203d 3d20   model_class == 
+00002f70: 2754 7261 6e73 666f 726d 6572 273a 0d0a  'Transformer':..
+00002f80: 2020 2020 2020 2020 6672 6f6d 2061 7574          from aut
+00002f90: 6f74 732e 6d6f 6465 6c73 2e64 6e6e 2069  ots.models.dnn i
+00002fa0: 6d70 6f72 7420 5472 616e 7366 6f72 6d65  mport Transforme
+00002fb0: 720d 0a0d 0a20 2020 2020 2020 2072 6567  r....        reg
+00002fc0: 7220 3d20 5472 616e 7366 6f72 6d65 7228  r = Transformer(
+00002fd0: 7665 7262 6f73 653d 7665 7262 6f73 652c  verbose=verbose,
+00002fe0: 2072 616e 646f 6d5f 7365 6564 3d72 616e   random_seed=ran
+00002ff0: 646f 6d5f 7365 6564 2c20 2a2a 6d6f 6465  dom_seed, **mode
+00003000: 6c5f 7061 7261 6d5f 6469 6374 290d 0a20  l_param_dict).. 
+00003010: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00003020: 6772 0d0a 2020 2020 656c 6966 206d 6f64  gr..    elif mod
+00003030: 656c 5f63 6c61 7373 203d 3d20 274b 4e4e  el_class == 'KNN
+00003040: 273a 0d0a 2020 2020 2020 2020 6672 6f6d  ':..        from
+00003050: 2073 6b6c 6561 726e 2e6e 6569 6768 626f   sklearn.neighbo
+00003060: 7273 2069 6d70 6f72 7420 4b4e 6569 6768  rs import KNeigh
+00003070: 626f 7273 5265 6772 6573 736f 720d 0a0d  borsRegressor...
+00003080: 0a20 2020 2020 2020 2069 6620 6d75 6c74  .        if mult
+00003090: 696f 7574 7075 743a 0d0a 2020 2020 2020  ioutput:..      
+000030a0: 2020 2020 2020 7265 6772 203d 204d 756c        regr = Mul
+000030b0: 7469 4f75 7470 7574 5265 6772 6573 736f  tiOutputRegresso
+000030c0: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+000030d0: 2020 2020 4b4e 6569 6768 626f 7273 5265      KNeighborsRe
+000030e0: 6772 6573 736f 7228 2a2a 6d6f 6465 6c5f  gressor(**model_
+000030f0: 7061 7261 6d5f 6469 6374 2c20 6e5f 6a6f  param_dict, n_jo
+00003100: 6273 3d31 292c 0d0a 2020 2020 2020 2020  bs=1),..        
+00003110: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
+00003120: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
+00003130: 2020 2020 290d 0a20 2020 2020 2020 2065      )..        e
+00003140: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00003150: 2020 7265 6772 203d 204b 4e65 6967 6862    regr = KNeighb
+00003160: 6f72 7352 6567 7265 7373 6f72 282a 2a6d  orsRegressor(**m
+00003170: 6f64 656c 5f70 6172 616d 5f64 6963 742c  odel_param_dict,
+00003180: 206e 5f6a 6f62 733d 6e5f 6a6f 6273 290d   n_jobs=n_jobs).
+00003190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000031a0: 7265 6772 0d0a 2020 2020 656c 6966 206d  regr..    elif m
+000031b0: 6f64 656c 5f63 6c61 7373 203d 3d20 2748  odel_class == 'H
+000031c0: 6973 7447 7261 6469 656e 7442 6f6f 7374  istGradientBoost
+000031d0: 273a 0d0a 2020 2020 2020 2020 7472 793a  ':..        try:
+000031e0: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
+000031f0: 6f6d 2073 6b6c 6561 726e 2e65 7870 6572  om sklearn.exper
+00003200: 696d 656e 7461 6c20 696d 706f 7274 2065  imental import e
+00003210: 6e61 626c 655f 6869 7374 5f67 7261 6469  nable_hist_gradi
+00003220: 656e 745f 626f 6f73 7469 6e67 2020 2320  ent_boosting  # 
+00003230: 6e6f 7161 0d0a 2020 2020 2020 2020 6578  noqa..        ex
+00003240: 6365 7074 2045 7863 6570 7469 6f6e 3a0d  cept Exception:.
+00003250: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
+00003260: 730d 0a20 2020 2020 2020 2066 726f 6d20  s..        from 
+00003270: 736b 6c65 6172 6e2e 656e 7365 6d62 6c65  sklearn.ensemble
+00003280: 2069 6d70 6f72 7420 4869 7374 4772 6164   import HistGrad
+00003290: 6965 6e74 426f 6f73 7469 6e67 5265 6772  ientBoostingRegr
+000032a0: 6573 736f 720d 0a0d 0a20 2020 2020 2020  essor....       
+000032b0: 2069 6620 6d75 6c74 696f 7574 7075 743a   if multioutput:
+000032c0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000032d0: 6772 203d 204d 756c 7469 4f75 7470 7574  gr = MultiOutput
+000032e0: 5265 6772 6573 736f 7228 0d0a 2020 2020  Regressor(..    
+000032f0: 2020 2020 2020 2020 2020 2020 4869 7374              Hist
+00003300: 4772 6164 6965 6e74 426f 6f73 7469 6e67  GradientBoosting
+00003310: 5265 6772 6573 736f 7228 0d0a 2020 2020  Regressor(..    
+00003320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003330: 7665 7262 6f73 653d 696e 7428 7665 7262  verbose=int(verb
+00003340: 6f73 655f 626f 6f6c 292c 0d0a 2020 2020  ose_bool),..    
+00003350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003360: 7261 6e64 6f6d 5f73 7461 7465 3d72 616e  random_state=ran
+00003370: 646f 6d5f 7365 6564 2c0d 0a20 2020 2020  dom_seed,..     
+00003380: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+00003390: 2a6d 6f64 656c 5f70 6172 616d 5f64 6963  *model_param_dic
+000033a0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+000033b0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+000033c0: 2020 2029 0d0a 2020 2020 2020 2020 656c     )..        el
+000033d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000033e0: 2072 6567 7220 3d20 4869 7374 4772 6164   regr = HistGrad
+000033f0: 6965 6e74 426f 6f73 7469 6e67 5265 6772  ientBoostingRegr
+00003400: 6573 736f 7228 0d0a 2020 2020 2020 2020  essor(..        
+00003410: 2020 2020 2020 2020 7665 7262 6f73 653d          verbose=
+00003420: 696e 7428 7665 7262 6f73 655f 626f 6f6c  int(verbose_bool
+00003430: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00003440: 2020 2020 7261 6e64 6f6d 5f73 7461 7465      random_state
+00003450: 3d72 616e 646f 6d5f 7365 6564 2c0d 0a20  =random_seed,.. 
+00003460: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+00003470: 2a6d 6f64 656c 5f70 6172 616d 5f64 6963  *model_param_dic
+00003480: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+00003490: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+000034a0: 6e20 7265 6772 0d0a 2020 2020 656c 6966  n regr..    elif
+000034b0: 206d 6f64 656c 5f63 6c61 7373 203d 3d20   model_class == 
+000034c0: 274c 6967 6874 4742 4d27 3a0d 0a20 2020  'LightGBM':..   
+000034d0: 2020 2020 2066 726f 6d20 6c69 6768 7467       from lightg
+000034e0: 626d 2069 6d70 6f72 7420 4c47 424d 5265  bm import LGBMRe
+000034f0: 6772 6573 736f 720d 0a0d 0a20 2020 2020  gressor....     
+00003500: 2020 2069 6620 6d75 6c74 696f 7574 7075     if multioutpu
+00003510: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00003520: 7265 7475 726e 204d 756c 7469 4f75 7470  return MultiOutp
+00003530: 7574 5265 6772 6573 736f 7228 0d0a 2020  utRegressor(..  
+00003540: 2020 2020 2020 2020 2020 2020 2020 4c47                LG
+00003550: 424d 5265 6772 6573 736f 7228 0d0a 2020  BMRegressor(..  
+00003560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003570: 2020 7665 7262 6f73 653d 2d31 2c0d 0a20    verbose=-1,.. 
+00003580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003590: 2020 2072 616e 646f 6d5f 7374 6174 653d     random_state=
+000035a0: 7261 6e64 6f6d 5f73 6565 642c 0d0a 2020  random_seed,..  
+000035b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000035c0: 2020 6e5f 6a6f 6273 3d31 2c0d 0a20 2020    n_jobs=1,..   
+000035d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000035e0: 202a 2a6d 6f64 656c 5f70 6172 616d 5f64   **model_param_d
+000035f0: 6963 742c 0d0a 2020 2020 2020 2020 2020  ict,..          
+00003600: 2020 2020 2020 292c 0d0a 2020 2020 2020        ),..      
+00003610: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
+00003620: 3d6e 5f6a 6f62 732c 0d0a 2020 2020 2020  =n_jobs,..      
+00003630: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00003640: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00003650: 2020 2020 7265 7475 726e 204c 4742 4d52      return LGBMR
+00003660: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+00003670: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
+00003680: 7365 3d2d 312c 0d0a 2020 2020 2020 2020  se=-1,..        
+00003690: 2020 2020 2020 2020 7261 6e64 6f6d 5f73          random_s
+000036a0: 7461 7465 3d72 616e 646f 6d5f 7365 6564  tate=random_seed
+000036b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000036c0: 2020 206e 5f6a 6f62 733d 6e5f 6a6f 6273     n_jobs=n_jobs
+000036d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000036e0: 2020 202a 2a6d 6f64 656c 5f70 6172 616d     **model_param
+000036f0: 5f64 6963 742c 0d0a 2020 2020 2020 2020  _dict,..        
+00003700: 2020 2020 290d 0a20 2020 2065 6c69 6620      )..    elif 
+00003710: 6d6f 6465 6c5f 636c 6173 7320 3d3d 2022  model_class == "
+00003720: 4c69 6768 7447 424d 5265 6772 6573 736f  LightGBMRegresso
+00003730: 7243 6861 696e 223a 0d0a 2020 2020 2020  rChain":..      
+00003740: 2020 6672 6f6d 206c 6967 6874 6762 6d20    from lightgbm 
+00003750: 696d 706f 7274 204c 4742 4d52 6567 7265  import LGBMRegre
+00003760: 7373 6f72 0d0a 0d0a 2020 2020 2020 2020  ssor....        
+00003770: 7265 6772 203d 204c 4742 4d52 6567 7265  regr = LGBMRegre
+00003780: 7373 6f72 280d 0a20 2020 2020 2020 2020  ssor(..         
+00003790: 2020 2076 6572 626f 7365 3d2d 312c 0d0a     verbose=-1,..
+000037a0: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
+000037b0: 6f6d 5f73 7461 7465 3d72 616e 646f 6d5f  om_state=random_
+000037c0: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
+000037d0: 2020 206e 5f6a 6f62 733d 6e5f 6a6f 6273     n_jobs=n_jobs
+000037e0: 2c0d 0a20 2020 2020 2020 2020 2020 202a  ,..            *
+000037f0: 2a6d 6f64 656c 5f70 6172 616d 5f64 6963  *model_param_dic
+00003800: 742c 0d0a 2020 2020 2020 2020 290d 0a20  t,..        ).. 
+00003810: 2020 2020 2020 2069 6620 6d75 6c74 696f         if multio
+00003820: 7574 7075 743a 0d0a 2020 2020 2020 2020  utput:..        
+00003830: 2020 2020 7265 7475 726e 2052 6567 7265      return Regre
+00003840: 7373 6f72 4368 6169 6e28 7265 6772 290d  ssorChain(regr).
+00003850: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00003860: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00003870: 726e 2072 6567 720d 0a20 2020 2065 6c69  rn regr..    eli
+00003880: 6620 6d6f 6465 6c5f 636c 6173 7320 3d3d  f model_class ==
+00003890: 2027 4164 6162 6f6f 7374 273a 0d0a 2020   'Adaboost':..  
+000038a0: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
+000038b0: 726e 2e65 6e73 656d 626c 6520 696d 706f  rn.ensemble impo
+000038c0: 7274 2041 6461 426f 6f73 7452 6567 7265  rt AdaBoostRegre
+000038d0: 7373 6f72 0d0a 0d0a 2020 2020 2020 2020  ssor....        
+000038e0: 6966 2072 6567 7265 7373 696f 6e5f 6d6f  if regression_mo
+000038f0: 6465 6c5b 226d 6f64 656c 5f70 6172 616d  del["model_param
+00003900: 7322 5d5b 2765 7374 696d 6174 6f72 275d  s"]['estimator']
+00003910: 203d 3d20 2753 5652 273a 0d0a 2020 2020   == 'SVR':..    
+00003920: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
+00003930: 6561 726e 2e73 766d 2069 6d70 6f72 7420  earn.svm import 
+00003940: 4c69 6e65 6172 5356 520d 0a0d 0a20 2020  LinearSVR....   
+00003950: 2020 2020 2020 2020 2073 7663 203d 204c           svc = L
+00003960: 696e 6561 7253 5652 2876 6572 626f 7365  inearSVR(verbose
+00003970: 3d30 2c20 7261 6e64 6f6d 5f73 7461 7465  =0, random_state
+00003980: 3d72 616e 646f 6d5f 7365 6564 2c20 6d61  =random_seed, ma
+00003990: 785f 6974 6572 3d31 3530 3029 0d0a 2020  x_iter=1500)..  
+000039a0: 2020 2020 2020 2020 2020 7265 6772 203d            regr =
+000039b0: 2041 6461 426f 6f73 7452 6567 7265 7373   AdaBoostRegress
+000039c0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+000039d0: 2020 2020 2065 7374 696d 6174 6f72 3d73       estimator=s
+000039e0: 7663 2c0d 0a20 2020 2020 2020 2020 2020  vc,..           
+000039f0: 2020 2020 206e 5f65 7374 696d 6174 6f72       n_estimator
+00003a00: 733d 7265 6772 6573 7369 6f6e 5f6d 6f64  s=regression_mod
+00003a10: 656c 5b22 6d6f 6465 6c5f 7061 7261 6d73  el["model_params
+00003a20: 225d 5b27 6e5f 6573 7469 6d61 746f 7273  "]['n_estimators
+00003a30: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
+00003a40: 2020 2020 206c 6f73 733d 7265 6772 6573       loss=regres
+00003a50: 7369 6f6e 5f6d 6f64 656c 5b22 6d6f 6465  sion_model["mode
+00003a60: 6c5f 7061 7261 6d73 225d 5b27 6c6f 7373  l_params"]['loss
+00003a70: 275d 2c0d 0a20 2020 2020 2020 2020 2020  '],..           
+00003a80: 2020 2020 206c 6561 726e 696e 675f 7261       learning_ra
+00003a90: 7465 3d72 6567 7265 7373 696f 6e5f 6d6f  te=regression_mo
+00003aa0: 6465 6c5b 226d 6f64 656c 5f70 6172 616d  del["model_param
+00003ab0: 7322 5d5b 276c 6561 726e 696e 675f 7261  s"]['learning_ra
+00003ac0: 7465 275d 2c0d 0a20 2020 2020 2020 2020  te'],..         
+00003ad0: 2020 2020 2020 2072 616e 646f 6d5f 7374         random_st
+00003ae0: 6174 653d 7261 6e64 6f6d 5f73 6565 642c  ate=random_seed,
+00003af0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00003b00: 0a20 2020 2020 2020 2065 6c69 6620 7265  .        elif re
+00003b10: 6772 6573 7369 6f6e 5f6d 6f64 656c 5b22  gression_model["
+00003b20: 6d6f 6465 6c5f 7061 7261 6d73 225d 5b27  model_params"]['
+00003b30: 6573 7469 6d61 746f 7227 5d20 3d3d 2027  estimator'] == '
+00003b40: 4c69 6e52 6567 273a 0d0a 2020 2020 2020  LinReg':..      
+00003b50: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
+00003b60: 726e 2e6c 696e 6561 725f 6d6f 6465 6c20  rn.linear_model 
+00003b70: 696d 706f 7274 204c 696e 6561 7252 6567  import LinearReg
+00003b80: 7265 7373 696f 6e0d 0a0d 0a20 2020 2020  ression....     
+00003b90: 2020 2020 2020 206c 696e 7265 6720 3d20         linreg = 
+00003ba0: 4c69 6e65 6172 5265 6772 6573 7369 6f6e  LinearRegression
+00003bb0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00003bc0: 7265 6772 203d 2041 6461 426f 6f73 7452  regr = AdaBoostR
+00003bd0: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+00003be0: 2020 2020 2020 2020 2020 2065 7374 696d             estim
+00003bf0: 6174 6f72 3d6c 696e 7265 672c 0d0a 2020  ator=linreg,..  
+00003c00: 2020 2020 2020 2020 2020 2020 2020 6e5f                n_
+00003c10: 6573 7469 6d61 746f 7273 3d72 6567 7265  estimators=regre
+00003c20: 7373 696f 6e5f 6d6f 6465 6c5b 226d 6f64  ssion_model["mod
+00003c30: 656c 5f70 6172 616d 7322 5d5b 276e 5f65  el_params"]['n_e
+00003c40: 7374 696d 6174 6f72 7327 5d2c 0d0a 2020  stimators'],..  
+00003c50: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+00003c60: 7373 3d72 6567 7265 7373 696f 6e5f 6d6f  ss=regression_mo
+00003c70: 6465 6c5b 226d 6f64 656c 5f70 6172 616d  del["model_param
+00003c80: 7322 5d5b 276c 6f73 7327 5d2c 0d0a 2020  s"]['loss'],..  
+00003c90: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+00003ca0: 6172 6e69 6e67 5f72 6174 653d 7265 6772  arning_rate=regr
+00003cb0: 6573 7369 6f6e 5f6d 6f64 656c 5b22 6d6f  ession_model["mo
+00003cc0: 6465 6c5f 7061 7261 6d73 225d 5b27 6c65  del_params"]['le
+00003cd0: 6172 6e69 6e67 5f72 6174 6527 5d2c 0d0a  arning_rate'],..
+00003ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003cf0: 7261 6e64 6f6d 5f73 7461 7465 3d72 616e  random_state=ran
+00003d00: 646f 6d5f 7365 6564 2c0d 0a20 2020 2020  dom_seed,..     
+00003d10: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00003d20: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00003d30: 2020 2020 2072 6567 7220 3d20 4164 6142       regr = AdaB
+00003d40: 6f6f 7374 5265 6772 6573 736f 7228 7261  oostRegressor(ra
+00003d50: 6e64 6f6d 5f73 7461 7465 3d72 616e 646f  ndom_state=rando
+00003d60: 6d5f 7365 6564 2c20 2a2a 6d6f 6465 6c5f  m_seed, **model_
+00003d70: 7061 7261 6d5f 6469 6374 290d 0a20 2020  param_dict)..   
+00003d80: 2020 2020 2069 6620 6d75 6c74 696f 7574       if multiout
+00003d90: 7075 743a 0d0a 2020 2020 2020 2020 2020  put:..          
+00003da0: 2020 7265 7475 726e 204d 756c 7469 4f75    return MultiOu
+00003db0: 7470 7574 5265 6772 6573 736f 7228 7265  tputRegressor(re
+00003dc0: 6772 2c20 6e5f 6a6f 6273 3d6e 5f6a 6f62  gr, n_jobs=n_job
+00003dd0: 7329 0d0a 2020 2020 2020 2020 656c 7365  s)..        else
+00003de0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00003df0: 6574 7572 6e20 7265 6772 0d0a 2020 2020  eturn regr..    
+00003e00: 656c 6966 206d 6f64 656c 5f63 6c61 7373  elif model_class
+00003e10: 2069 6e20 5b27 7867 626f 6f73 7427 2c20   in ['xgboost', 
+00003e20: 2758 4742 5265 6772 6573 736f 7227 5d3a  'XGBRegressor']:
+00003e30: 0d0a 2020 2020 2020 2020 696d 706f 7274  ..        import
+00003e40: 2078 6762 6f6f 7374 2061 7320 7867 620d   xgboost as xgb.
+00003e50: 0a0d 0a20 2020 2020 2020 2073 6d61 6c6c  ...        small
+00003e60: 6572 5f6e 5f6a 6f62 7320 3d20 696e 7428  er_n_jobs = int(
+00003e70: 6e5f 6a6f 6273 202f 2032 2920 6966 206e  n_jobs / 2) if n
+00003e80: 5f6a 6f62 7320 3e20 3320 656c 7365 206e  _jobs > 3 else n
+00003e90: 5f6a 6f62 730d 0a0d 0a20 2020 2020 2020  _jobs....       
+00003ea0: 2069 6620 4661 6c73 653a 2020 2320 7468   if False:  # th
+00003eb0: 6973 2069 7320 6e6f 206c 6f6e 6765 7220  is is no longer 
+00003ec0: 6e65 6365 7373 6172 7920 696e 2031 2e36  necessary in 1.6
+00003ed0: 2061 6e64 2062 6579 6f6e 640d 0a20 2020   and beyond..   
+00003ee0: 2020 2020 2020 2020 2072 6567 7220 3d20           regr = 
+00003ef0: 4d75 6c74 694f 7574 7075 7452 6567 7265  MultiOutputRegre
+00003f00: 7373 6f72 280d 0a20 2020 2020 2020 2020  ssor(..         
+00003f10: 2020 2020 2020 2078 6762 2e58 4742 5265         xgb.XGBRe
+00003f20: 6772 6573 736f 7228 7665 7262 6f73 6974  gressor(verbosit
+00003f30: 793d 302c 202a 2a6d 6f64 656c 5f70 6172  y=0, **model_par
+00003f40: 616d 5f64 6963 742c 206e 5f6a 6f62 733d  am_dict, n_jobs=
+00003f50: 3129 2c0d 0a20 2020 2020 2020 2020 2020  1),..           
+00003f60: 2020 2020 206e 5f6a 6f62 733d 736d 616c       n_jobs=smal
+00003f70: 6c65 725f 6e5f 6a6f 6273 2c0d 0a20 2020  ler_n_jobs,..   
+00003f80: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00003f90: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00003fa0: 2020 2020 2020 2072 6567 7220 3d20 7867         regr = xg
+00003fb0: 622e 5847 4252 6567 7265 7373 6f72 280d  b.XGBRegressor(.
+00003fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003fd0: 2076 6572 626f 7369 7479 3d30 2c20 2a2a   verbosity=0, **
+00003fe0: 6d6f 6465 6c5f 7061 7261 6d5f 6469 6374  model_param_dict
+00003ff0: 2c20 6e5f 6a6f 6273 3d73 6d61 6c6c 6572  , n_jobs=smaller
+00004000: 5f6e 5f6a 6f62 730d 0a20 2020 2020 2020  _n_jobs..       
+00004010: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00004020: 7265 7475 726e 2072 6567 720d 0a20 2020  return regr..   
+00004030: 2065 6c69 6620 6d6f 6465 6c5f 636c 6173   elif model_clas
+00004040: 7320 3d3d 2027 5356 4d27 3a0d 0a20 2020  s == 'SVM':..   
+00004050: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
+00004060: 6e2e 7376 6d20 696d 706f 7274 204c 696e  n.svm import Lin
+00004070: 6561 7253 5652 0d0a 0d0a 2020 2020 2020  earSVR....      
+00004080: 2020 6966 206d 756c 7469 6f75 7470 7574    if multioutput
+00004090: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+000040a0: 6567 7220 3d20 4d75 6c74 694f 7574 7075  egr = MultiOutpu
+000040b0: 7452 6567 7265 7373 6f72 280d 0a20 2020  tRegressor(..   
+000040c0: 2020 2020 2020 2020 2020 2020 204c 696e               Lin
+000040d0: 6561 7253 5652 2876 6572 626f 7365 3d76  earSVR(verbose=v
+000040e0: 6572 626f 7365 5f62 6f6f 6c2c 202a 2a6d  erbose_bool, **m
+000040f0: 6f64 656c 5f70 6172 616d 5f64 6963 7429  odel_param_dict)
+00004100: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00004110: 2020 206e 5f6a 6f62 733d 6e5f 6a6f 6273     n_jobs=n_jobs
+00004120: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+00004130: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00004140: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+00004150: 7220 3d20 4c69 6e65 6172 5356 5228 7665  r = LinearSVR(ve
+00004160: 7262 6f73 653d 7665 7262 6f73 655f 626f  rbose=verbose_bo
+00004170: 6f6c 2c20 2a2a 6d6f 6465 6c5f 7061 7261  ol, **model_para
+00004180: 6d5f 6469 6374 290d 0a20 2020 2020 2020  m_dict)..       
+00004190: 2072 6574 7572 6e20 7265 6772 0d0a 2020   return regr..  
+000041a0: 2020 656c 6966 206d 6f64 656c 5f63 6c61    elif model_cla
+000041b0: 7373 203d 3d20 2752 6964 6765 273a 0d0a  ss == 'Ridge':..
+000041c0: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
+000041d0: 6561 726e 2e6c 696e 6561 725f 6d6f 6465  earn.linear_mode
+000041e0: 6c20 696d 706f 7274 2052 6964 6765 0d0a  l import Ridge..
+000041f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00004200: 2052 6964 6765 2872 616e 646f 6d5f 7374   Ridge(random_st
+00004210: 6174 653d 7261 6e64 6f6d 5f73 6565 642c  ate=random_seed,
+00004220: 202a 2a6d 6f64 656c 5f70 6172 616d 5f64   **model_param_d
+00004230: 6963 7429 0d0a 2020 2020 656c 6966 206d  ict)..    elif m
+00004240: 6f64 656c 5f63 6c61 7373 203d 3d20 2246  odel_class == "F
+00004250: 6173 7452 6964 6765 223a 0d0a 2020 2020  astRidge":..    
+00004260: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
+00004270: 2e6c 696e 6561 725f 6d6f 6465 6c20 696d  .linear_model im
+00004280: 706f 7274 2052 6964 6765 0d0a 0d0a 2020  port Ridge....  
+00004290: 2020 2020 2020 7265 7475 726e 2052 6964        return Rid
+000042a0: 6765 2861 6c70 6861 3d31 652d 392c 2073  ge(alpha=1e-9, s
+000042b0: 6f6c 7665 723d 2263 686f 6c65 736b 7922  olver="cholesky"
+000042c0: 2c20 6669 745f 696e 7465 7263 6570 743d  , fit_intercept=
+000042d0: 4661 6c73 652c 2063 6f70 795f 583d 4661  False, copy_X=Fa
+000042e0: 6c73 6529 0d0a 2020 2020 656c 6966 206d  lse)..    elif m
+000042f0: 6f64 656c 5f63 6c61 7373 203d 3d20 2742  odel_class == 'B
+00004300: 6179 6573 6961 6e52 6964 6765 273a 0d0a  ayesianRidge':..
+00004310: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
+00004320: 6561 726e 2e6c 696e 6561 725f 6d6f 6465  earn.linear_mode
+00004330: 6c20 696d 706f 7274 2042 6179 6573 6961  l import Bayesia
+00004340: 6e52 6964 6765 0d0a 0d0a 2020 2020 2020  nRidge....      
+00004350: 2020 7265 6772 203d 2042 6179 6573 6961    regr = Bayesia
+00004360: 6e52 6964 6765 282a 2a6d 6f64 656c 5f70  nRidge(**model_p
+00004370: 6172 616d 5f64 6963 7429 0d0a 2020 2020  aram_dict)..    
+00004380: 2020 2020 6966 206d 756c 7469 6f75 7470      if multioutp
+00004390: 7574 3a0d 0a20 2020 2020 2020 2020 2020  ut:..           
+000043a0: 2072 6574 7572 6e20 5265 6772 6573 736f   return Regresso
+000043b0: 7243 6861 696e 2872 6567 7229 0d0a 2020  rChain(regr)..  
+000043c0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000043d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000043e0: 7265 6772 0d0a 2020 2020 656c 6966 206d  regr..    elif m
+000043f0: 6f64 656c 5f63 6c61 7373 203d 3d20 2245  odel_class == "E
+00004400: 7874 7261 5472 6565 7322 3a0d 0a20 2020  xtraTrees":..   
+00004410: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
+00004420: 6e2e 656e 7365 6d62 6c65 2069 6d70 6f72  n.ensemble impor
+00004430: 7420 4578 7472 6154 7265 6573 5265 6772  t ExtraTreesRegr
+00004440: 6573 736f 720d 0a0d 0a20 2020 2020 2020  essor....       
+00004450: 2072 6574 7572 6e20 4578 7472 6154 7265   return ExtraTre
+00004460: 6573 5265 6772 6573 736f 7228 0d0a 2020  esRegressor(..  
+00004470: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
+00004480: 3d6e 5f6a 6f62 732c 2072 616e 646f 6d5f  =n_jobs, random_
+00004490: 7374 6174 653d 7261 6e64 6f6d 5f73 6565  state=random_see
+000044a0: 642c 202a 2a6d 6f64 656c 5f70 6172 616d  d, **model_param
+000044b0: 5f64 6963 740d 0a20 2020 2020 2020 2029  _dict..        )
+000044c0: 0d0a 2020 2020 656c 6966 206d 6f64 656c  ..    elif model
+000044d0: 5f63 6c61 7373 203d 3d20 2252 6164 6975  _class == "Radiu
+000044e0: 734e 6569 6768 626f 7273 223a 0d0a 2020  sNeighbors":..  
+000044f0: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
+00004500: 726e 2e6e 6569 6768 626f 7273 2069 6d70  rn.neighbors imp
+00004510: 6f72 7420 5261 6469 7573 4e65 6967 6862  ort RadiusNeighb
+00004520: 6f72 7352 6567 7265 7373 6f72 0d0a 0d0a  orsRegressor....
+00004530: 2020 2020 2020 2020 7265 6772 203d 2052          regr = R
+00004540: 6164 6975 734e 6569 6768 626f 7273 5265  adiusNeighborsRe
+00004550: 6772 6573 736f 7228 6e5f 6a6f 6273 3d6e  gressor(n_jobs=n
+00004560: 5f6a 6f62 732c 202a 2a6d 6f64 656c 5f70  _jobs, **model_p
+00004570: 6172 616d 5f64 6963 7429 0d0a 2020 2020  aram_dict)..    
+00004580: 2020 2020 7265 7475 726e 2072 6567 720d      return regr.
+00004590: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
+000045a0: 636c 6173 7320 3d3d 2022 506f 6973 736f  class == "Poisso
+000045b0: 6e52 6567 7265 7373 7369 6f6e 223a 0d0a  nRegresssion":..
+000045c0: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
+000045d0: 6561 726e 2e6c 696e 6561 725f 6d6f 6465  earn.linear_mode
+000045e0: 6c20 696d 706f 7274 2050 6f69 7373 6f6e  l import Poisson
+000045f0: 5265 6772 6573 736f 720d 0a0d 0a20 2020  Regressor....   
+00004600: 2020 2020 2069 6620 6d75 6c74 696f 7574       if multiout
+00004610: 7075 743a 0d0a 2020 2020 2020 2020 2020  put:..          
+00004620: 2020 7265 6772 203d 204d 756c 7469 4f75    regr = MultiOu
+00004630: 7470 7574 5265 6772 6573 736f 7228 0d0a  tputRegressor(..
+00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004650: 506f 6973 736f 6e52 6567 7265 7373 6f72  PoissonRegressor
+00004660: 2866 6974 5f69 6e74 6572 6365 7074 3d54  (fit_intercept=T
+00004670: 7275 652c 206d 6178 5f69 7465 723d 3230  rue, max_iter=20
+00004680: 302c 202a 2a6d 6f64 656c 5f70 6172 616d  0, **model_param
+00004690: 5f64 6963 7429 2c0d 0a20 2020 2020 2020  _dict),..       
+000046a0: 2020 2020 2020 2020 206e 5f6a 6f62 733d           n_jobs=
+000046b0: 6e5f 6a6f 6273 2c0d 0a20 2020 2020 2020  n_jobs,..       
+000046c0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000046d0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000046e0: 2020 2072 6567 7220 3d20 506f 6973 736f     regr = Poisso
+000046f0: 6e52 6567 7265 7373 6f72 282a 2a6d 6f64  nRegressor(**mod
+00004700: 656c 5f70 6172 616d 5f64 6963 7429 0d0a  el_param_dict)..
+00004710: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00004720: 6567 720d 0a20 2020 2065 6c69 6620 6d6f  egr..    elif mo
+00004730: 6465 6c5f 636c 6173 7320 3d3d 2027 5241  del_class == 'RA
+00004740: 4e53 4143 273a 0d0a 2020 2020 2020 2020  NSAC':..        
+00004750: 6672 6f6d 2073 6b6c 6561 726e 2e6c 696e  from sklearn.lin
+00004760: 6561 725f 6d6f 6465 6c20 696d 706f 7274  ear_model import
+00004770: 2052 414e 5341 4352 6567 7265 7373 6f72   RANSACRegressor
+00004780: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
+00004790: 726e 2052 414e 5341 4352 6567 7265 7373  rn RANSACRegress
+000047a0: 6f72 2872 616e 646f 6d5f 7374 6174 653d  or(random_state=
+000047b0: 7261 6e64 6f6d 5f73 6565 642c 202a 2a6d  random_seed, **m
+000047c0: 6f64 656c 5f70 6172 616d 5f64 6963 7429  odel_param_dict)
+000047d0: 0d0a 2020 2020 656c 6966 206d 6f64 656c  ..    elif model
+000047e0: 5f63 6c61 7373 203d 3d20 224c 696e 6561  _class == "Linea
+000047f0: 7252 6567 7265 7373 696f 6e22 3a0d 0a20  rRegression":.. 
+00004800: 2020 2020 2020 2066 726f 6d20 736b 6c65         from skle
+00004810: 6172 6e2e 6c69 6e65 6172 5f6d 6f64 656c  arn.linear_model
+00004820: 2069 6d70 6f72 7420 4c69 6e65 6172 5265   import LinearRe
+00004830: 6772 6573 7369 6f6e 0d0a 0d0a 2020 2020  gression....    
+00004840: 2020 2020 7265 7475 726e 204c 696e 6561      return Linea
+00004850: 7252 6567 7265 7373 696f 6e28 2a2a 6d6f  rRegression(**mo
+00004860: 6465 6c5f 7061 7261 6d5f 6469 6374 290d  del_param_dict).
+00004870: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
+00004880: 636c 6173 7320 3d3d 2022 4761 7573 7369  class == "Gaussi
+00004890: 616e 5072 6f63 6573 7352 6567 7265 7373  anProcessRegress
+000048a0: 6f72 223a 0d0a 2020 2020 2020 2020 6672  or":..        fr
+000048b0: 6f6d 2073 6b6c 6561 726e 2e67 6175 7373  om sklearn.gauss
+000048c0: 6961 6e5f 7072 6f63 6573 7320 696d 706f  ian_process impo
+000048d0: 7274 2047 6175 7373 6961 6e50 726f 6365  rt GaussianProce
+000048e0: 7373 5265 6772 6573 736f 720d 0a0d 0a20  ssRegressor.... 
+000048f0: 2020 2020 2020 206b 6572 6e65 6c20 3d20         kernel = 
+00004900: 6d6f 6465 6c5f 7061 7261 6d5f 6469 6374  model_param_dict
+00004910: 2e70 6f70 2822 6b65 726e 656c 222c 204e  .pop("kernel", N
+00004920: 6f6e 6529 0d0a 2020 2020 2020 2020 6966  one)..        if
+00004930: 206b 6572 6e65 6c20 6973 206e 6f74 204e   kernel is not N
+00004940: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00004950: 2020 6966 206b 6572 6e65 6c20 3d3d 2022    if kernel == "
+00004960: 446f 7457 6869 7465 223a 0d0a 2020 2020  DotWhite":..    
+00004970: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00004980: 2073 6b6c 6561 726e 2e67 6175 7373 6961   sklearn.gaussia
+00004990: 6e5f 7072 6f63 6573 732e 6b65 726e 656c  n_process.kernel
+000049a0: 7320 696d 706f 7274 2044 6f74 5072 6f64  s import DotProd
+000049b0: 7563 742c 2057 6869 7465 4b65 726e 656c  uct, WhiteKernel
+000049c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000049d0: 2020 2020 6b65 726e 656c 203d 2044 6f74      kernel = Dot
+000049e0: 5072 6f64 7563 7428 2920 2b20 5768 6974  Product() + Whit
+000049f0: 654b 6572 6e65 6c28 290d 0a20 2020 2020  eKernel()..     
+00004a00: 2020 2020 2020 2065 6c69 6620 6b65 726e         elif kern
+00004a10: 656c 203d 3d20 2257 6869 7465 223a 0d0a  el == "White":..
+00004a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a30: 6672 6f6d 2073 6b6c 6561 726e 2e67 6175  from sklearn.gau
+00004a40: 7373 6961 6e5f 7072 6f63 6573 732e 6b65  ssian_process.ke
+00004a50: 726e 656c 7320 696d 706f 7274 2057 6869  rnels import Whi
+00004a60: 7465 4b65 726e 656c 0d0a 0d0a 2020 2020  teKernel....    
+00004a70: 2020 2020 2020 2020 2020 2020 6b65 726e              kern
+00004a80: 656c 203d 2057 6869 7465 4b65 726e 656c  el = WhiteKernel
+00004a90: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00004aa0: 656c 6966 206b 6572 6e65 6c20 3d3d 2022  elif kernel == "
+00004ab0: 4578 7053 696e 6553 7175 6172 6564 223a  ExpSineSquared":
+00004ac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004ad0: 2020 6672 6f6d 2073 6b6c 6561 726e 2e67    from sklearn.g
+00004ae0: 6175 7373 6961 6e5f 7072 6f63 6573 732e  aussian_process.
+00004af0: 6b65 726e 656c 7320 696d 706f 7274 2045  kernels import E
+00004b00: 7870 5369 6e65 5371 7561 7265 640d 0a0d  xpSineSquared...
+00004b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004b20: 206b 6572 6e65 6c20 3d20 4578 7053 696e   kernel = ExpSin
+00004b30: 6553 7175 6172 6564 2829 0d0a 2020 2020  eSquared()..    
+00004b40: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00004b50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00004b60: 726f 6d20 736b 6c65 6172 6e2e 6761 7573  rom sklearn.gaus
+00004b70: 7369 616e 5f70 726f 6365 7373 2e6b 6572  sian_process.ker
+00004b80: 6e65 6c73 2069 6d70 6f72 7420 5242 460d  nels import RBF.
+00004b90: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00004ba0: 2020 206b 6572 6e65 6c20 3d20 5242 4628     kernel = RBF(
+00004bb0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00004bc0: 6e20 4761 7573 7369 616e 5072 6f63 6573  n GaussianProces
+00004bd0: 7352 6567 7265 7373 6f72 280d 0a20 2020  sRegressor(..   
+00004be0: 2020 2020 2020 2020 206b 6572 6e65 6c3d           kernel=
+00004bf0: 6b65 726e 656c 2c20 7261 6e64 6f6d 5f73  kernel, random_s
+00004c00: 7461 7465 3d72 616e 646f 6d5f 7365 6564  tate=random_seed
+00004c10: 2c20 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  , **model_param_
+00004c20: 6469 6374 0d0a 2020 2020 2020 2020 290d  dict..        ).
+00004c30: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
+00004c40: 636c 6173 7320 696e 205b 224d 756c 7469  class in ["Multi
+00004c50: 6f75 7470 7574 4750 5222 2c20 2256 6563  outputGPR", "Vec
+00004c60: 746f 7269 7a65 644d 756c 7469 4f75 7470  torizedMultiOutp
+00004c70: 7574 4750 5222 5d3a 0d0a 2020 2020 2020  utGPR"]:..      
+00004c80: 2020 7265 7475 726e 2056 6563 746f 7269    return Vectori
+00004c90: 7a65 644d 756c 7469 4f75 7470 7574 4750  zedMultiOutputGP
+00004ca0: 5228 2a2a 6d6f 6465 6c5f 7061 7261 6d5f  R(**model_param_
+00004cb0: 6469 6374 290d 0a20 2020 2065 6c73 653a  dict)..    else:
+00004cc0: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
+00004cd0: 7369 6f6e 5f6d 6f64 656c 5b27 6d6f 6465  sion_model['mode
+00004ce0: 6c27 5d20 3d20 2752 616e 646f 6d46 6f72  l'] = 'RandomFor
+00004cf0: 6573 7427 0d0a 2020 2020 2020 2020 6672  est'..        fr
+00004d00: 6f6d 2073 6b6c 6561 726e 2e65 6e73 656d  om sklearn.ensem
+00004d10: 626c 6520 696d 706f 7274 2052 616e 646f  ble import Rando
+00004d20: 6d46 6f72 6573 7452 6567 7265 7373 6f72  mForestRegressor
+00004d30: 0d0a 0d0a 2020 2020 2020 2020 7265 6772  ....        regr
+00004d40: 203d 2052 616e 646f 6d46 6f72 6573 7452   = RandomForestR
+00004d50: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+00004d60: 2020 2020 2020 2072 616e 646f 6d5f 7374         random_st
+00004d70: 6174 653d 7261 6e64 6f6d 5f73 6565 642c  ate=random_seed,
+00004d80: 0d0a 2020 2020 2020 2020 2020 2020 7665  ..            ve
+00004d90: 7262 6f73 653d 7665 7262 6f73 655f 626f  rbose=verbose_bo
+00004da0: 6f6c 2c0d 0a20 2020 2020 2020 2020 2020  ol,..           
+00004db0: 206e 5f6a 6f62 733d 6e5f 6a6f 6273 2c0d   n_jobs=n_jobs,.
+00004dc0: 0a20 2020 2020 2020 2020 2020 202a 2a6d  .            **m
+00004dd0: 6f64 656c 5f70 6172 616d 5f64 6963 742c  odel_param_dict,
+00004de0: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+00004df0: 2020 2020 2072 6574 7572 6e20 7265 6772       return regr
+00004e00: 0d0a 0d0a 0d0a 6465 6620 7265 7472 6965  ......def retrie
+00004e10: 7665 5f63 6c61 7373 6966 6965 7228 0d0a  ve_classifier(..
+00004e20: 2020 2020 7265 6772 6573 7369 6f6e 5f6d      regression_m
+00004e30: 6f64 656c 3a20 6469 6374 203d 207b 0d0a  odel: dict = {..
+00004e40: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
+00004e50: 2027 5261 6e64 6f6d 466f 7265 7374 272c   'RandomForest',
+00004e60: 0d0a 2020 2020 2020 2020 226d 6f64 656c  ..        "model
+00004e70: 5f70 6172 616d 7322 3a20 7b0d 0a20 2020  _params": {..   
+00004e80: 2020 2020 2020 2020 2027 6e5f 6573 7469           'n_esti
+00004e90: 6d61 746f 7273 273a 2033 3030 2c0d 0a20  mators': 300,.. 
+00004ea0: 2020 2020 2020 2020 2020 2027 6d69 6e5f             'min_
+00004eb0: 7361 6d70 6c65 735f 6c65 6166 273a 2031  samples_leaf': 1
+00004ec0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00004ed0: 626f 6f74 7374 7261 7027 3a20 4661 6c73  bootstrap': Fals
+00004ee0: 652c 0d0a 2020 2020 2020 2020 7d2c 0d0a  e,..        },..
+00004ef0: 2020 2020 7d2c 0d0a 2020 2020 7665 7262      },..    verb
+00004f00: 6f73 653a 2069 6e74 203d 2030 2c0d 0a20  ose: int = 0,.. 
+00004f10: 2020 2076 6572 626f 7365 5f62 6f6f 6c3a     verbose_bool:
+00004f20: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00004f30: 2020 2020 7261 6e64 6f6d 5f73 6565 643a      random_seed:
+00004f40: 2069 6e74 203d 2032 3032 302c 0d0a 2020   int = 2020,..  
+00004f50: 2020 6e5f 6a6f 6273 3a20 696e 7420 3d20    n_jobs: int = 
+00004f60: 312c 0d0a 2020 2020 6d75 6c74 696f 7574  1,..    multiout
+00004f70: 7075 743a 2062 6f6f 6c20 3d20 5472 7565  put: bool = True
+00004f80: 2c0d 0a29 3a0d 0a20 2020 2022 2222 436f  ,..):..    """Co
+00004f90: 6e76 6572 7420 6120 6d6f 6465 6c20 7061  nvert a model pa
+00004fa0: 7261 6d20 6469 6374 2074 6f20 6d6f 6465  ram dict to mode
+00004fb0: 6c20 6f62 6a65 6374 2066 6f72 2072 6567  l object for reg
+00004fc0: 7265 7373 696f 6e20 6672 616d 6577 6f72  ression framewor
+00004fd0: 6b73 2e22 2222 0d0a 2020 2020 6d6f 6465  ks."""..    mode
+00004fe0: 6c5f 636c 6173 7320 3d20 7265 6772 6573  l_class = regres
+00004ff0: 7369 6f6e 5f6d 6f64 656c 2e67 6574 2827  sion_model.get('
+00005000: 6d6f 6465 6c27 2c20 2752 616e 646f 6d46  model', 'RandomF
+00005010: 6f72 6573 7427 290d 0a20 2020 206d 6f64  orest')..    mod
+00005020: 656c 5f70 6172 616d 5f64 6963 7420 3d20  el_param_dict = 
+00005030: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
+00005040: 2e67 6574 2822 6d6f 6465 6c5f 7061 7261  .get("model_para
+00005050: 6d73 222c 207b 7d29 0d0a 2020 2020 6966  ms", {})..    if
+00005060: 206d 6f64 656c 5f63 6c61 7373 203d 3d20   model_class == 
+00005070: 2245 7874 7261 5472 6565 7322 3a0d 0a20  "ExtraTrees":.. 
+00005080: 2020 2020 2020 2066 726f 6d20 736b 6c65         from skle
+00005090: 6172 6e2e 656e 7365 6d62 6c65 2069 6d70  arn.ensemble imp
+000050a0: 6f72 7420 4578 7472 6154 7265 6573 436c  ort ExtraTreesCl
+000050b0: 6173 7369 6669 6572 0d0a 0d0a 2020 2020  assifier....    
+000050c0: 2020 2020 7265 7475 726e 2045 7874 7261      return Extra
+000050d0: 5472 6565 7343 6c61 7373 6966 6965 7228  TreesClassifier(
+000050e0: 0d0a 2020 2020 2020 2020 2020 2020 6e5f  ..            n_
+000050f0: 6a6f 6273 3d6e 5f6a 6f62 732c 2072 616e  jobs=n_jobs, ran
+00005100: 646f 6d5f 7374 6174 653d 7261 6e64 6f6d  dom_state=random
+00005110: 5f73 6565 642c 202a 2a6d 6f64 656c 5f70  _seed, **model_p
+00005120: 6172 616d 5f64 6963 740d 0a20 2020 2020  aram_dict..     
+00005130: 2020 2029 0d0a 2020 2020 656c 6966 206d     )..    elif m
+00005140: 6f64 656c 5f63 6c61 7373 203d 3d20 2744  odel_class == 'D
+00005150: 6563 6973 696f 6e54 7265 6527 3a0d 0a20  ecisionTree':.. 
+00005160: 2020 2020 2020 2066 726f 6d20 736b 6c65         from skle
+00005170: 6172 6e2e 7472 6565 2069 6d70 6f72 7420  arn.tree import 
+00005180: 4465 6369 7369 6f6e 5472 6565 436c 6173  DecisionTreeClas
+00005190: 7369 6669 6572 0d0a 0d0a 2020 2020 2020  sifier....      
+000051a0: 2020 7265 7475 726e 2044 6563 6973 696f    return Decisio
+000051b0: 6e54 7265 6543 6c61 7373 6966 6965 7228  nTreeClassifier(
+000051c0: 7261 6e64 6f6d 5f73 7461 7465 3d72 616e  random_state=ran
+000051d0: 646f 6d5f 7365 6564 2c20 2a2a 6d6f 6465  dom_seed, **mode
+000051e0: 6c5f 7061 7261 6d5f 6469 6374 290d 0a20  l_param_dict).. 
+000051f0: 2020 2065 6c69 6620 6d6f 6465 6c5f 636c     elif model_cl
+00005200: 6173 7320 696e 205b 2778 6762 6f6f 7374  ass in ['xgboost
+00005210: 272c 2027 5847 4243 6c61 7373 6966 6965  ', 'XGBClassifie
+00005220: 7227 5d3a 0d0a 2020 2020 2020 2020 696d  r']:..        im
+00005230: 706f 7274 2078 6762 6f6f 7374 2061 7320  port xgboost as 
+00005240: 7867 620d 0a0d 0a20 2020 2020 2020 2072  xgb....        r
+00005250: 6574 7572 6e20 7867 622e 5847 4243 6c61  eturn xgb.XGBCla
+00005260: 7373 6966 6965 7228 7665 7262 6f73 6974  ssifier(verbosit
+00005270: 793d 7665 7262 6f73 652c 202a 2a6d 6f64  y=verbose, **mod
+00005280: 656c 5f70 6172 616d 5f64 6963 742c 206e  el_param_dict, n
+00005290: 5f6a 6f62 733d 6e5f 6a6f 6273 290d 0a20  _jobs=n_jobs).. 
+000052a0: 2020 2065 6c69 6620 6d6f 6465 6c5f 636c     elif model_cl
+000052b0: 6173 7320 3d3d 2022 5261 6e64 6f6d 466f  ass == "RandomFo
+000052c0: 7265 7374 223a 0d0a 2020 2020 2020 2020  rest":..        
+000052d0: 6672 6f6d 2073 6b6c 6561 726e 2e65 6e73  from sklearn.ens
+000052e0: 656d 626c 6520 696d 706f 7274 2052 616e  emble import Ran
+000052f0: 646f 6d46 6f72 6573 7443 6c61 7373 6966  domForestClassif
+00005300: 6965 720d 0a0d 0a20 2020 2020 2020 2072  ier....        r
+00005310: 6574 7572 6e20 5261 6e64 6f6d 466f 7265  eturn RandomFore
+00005320: 7374 436c 6173 7369 6669 6572 280d 0a20  stClassifier(.. 
+00005330: 2020 2020 2020 2020 2020 2072 616e 646f             rando
+00005340: 6d5f 7374 6174 653d 7261 6e64 6f6d 5f73  m_state=random_s
+00005350: 6565 642c 0d0a 2020 2020 2020 2020 2020  eed,..          
+00005360: 2020 7665 7262 6f73 653d 7665 7262 6f73    verbose=verbos
+00005370: 655f 626f 6f6c 2c0d 0a20 2020 2020 2020  e_bool,..       
+00005380: 2020 2020 206e 5f6a 6f62 733d 6e5f 6a6f       n_jobs=n_jo
+00005390: 6273 2c0d 0a20 2020 2020 2020 2020 2020  bs,..           
+000053a0: 202a 2a6d 6f64 656c 5f70 6172 616d 5f64   **model_param_d
+000053b0: 6963 742c 0d0a 2020 2020 2020 2020 290d  ict,..        ).
+000053c0: 0a20 2020 2065 6c69 6620 6d6f 6465 6c5f  .    elif model_
+000053d0: 636c 6173 7320 3d3d 2022 4b4e 4e22 3a0d  class == "KNN":.
+000053e0: 0a20 2020 2020 2020 2066 726f 6d20 736b  .        from sk
+000053f0: 6c65 6172 6e2e 6e65 6967 6862 6f72 7320  learn.neighbors 
+00005400: 696d 706f 7274 204b 4e65 6967 6862 6f72  import KNeighbor
+00005410: 7343 6c61 7373 6966 6965 720d 0a0d 0a20  sClassifier.... 
+00005420: 2020 2020 2020 2072 6574 7572 6e20 4b4e         return KN
+00005430: 6569 6768 626f 7273 436c 6173 7369 6669  eighborsClassifi
+00005440: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+00005450: 206e 5f6a 6f62 733d 6e5f 6a6f 6273 2c0d   n_jobs=n_jobs,.
+00005460: 0a20 2020 2020 2020 2020 2020 202a 2a6d  .            **m
+00005470: 6f64 656c 5f70 6172 616d 5f64 6963 742c  odel_param_dict,
+00005480: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
+00005490: 2065 6c69 6620 6d6f 6465 6c5f 636c 6173   elif model_clas
+000054a0: 7320 3d3d 2022 5347 4422 3a0d 0a20 2020  s == "SGD":..   
+000054b0: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
+000054c0: 6e2e 6c69 6e65 6172 5f6d 6f64 656c 2069  n.linear_model i
+000054d0: 6d70 6f72 7420 5347 4443 6c61 7373 6966  mport SGDClassif
+000054e0: 6965 720d 0a20 2020 2020 2020 2066 726f  ier..        fro
+000054f0: 6d20 736b 6c65 6172 6e2e 6d75 6c74 696f  m sklearn.multio
+00005500: 7574 7075 7420 696d 706f 7274 204d 756c  utput import Mul
+00005510: 7469 4f75 7470 7574 436c 6173 7369 6669  tiOutputClassifi
+00005520: 6572 0d0a 0d0a 2020 2020 2020 2020 6966  er....        if
+00005530: 206d 756c 7469 6f75 7470 7574 3a0d 0a20   multioutput:.. 
+00005540: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00005550: 6e20 4d75 6c74 694f 7574 7075 7443 6c61  n MultiOutputCla
+00005560: 7373 6966 6965 7228 0d0a 2020 2020 2020  ssifier(..      
+00005570: 2020 2020 2020 2020 2020 5347 4443 6c61            SGDCla
+00005580: 7373 6966 6965 7228 0d0a 2020 2020 2020  ssifier(..      
+00005590: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+000055a0: 6e64 6f6d 5f73 7461 7465 3d72 616e 646f  ndom_state=rando
+000055b0: 6d5f 7365 6564 2c0d 0a20 2020 2020 2020  m_seed,..       
+000055c0: 2020 2020 2020 2020 2020 2020 2076 6572               ver
+000055d0: 626f 7365 3d76 6572 626f 7365 5f62 6f6f  bose=verbose_boo
+000055e0: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
+000055f0: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
+00005600: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
+00005610: 2020 2020 2020 2020 2020 2020 2a2a 6d6f              **mo
+00005620: 6465 6c5f 7061 7261 6d5f 6469 6374 2c0d  del_param_dict,.
+00005630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005640: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+00005650: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
+00005660: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00005670: 7475 726e 2053 4744 436c 6173 7369 6669  turn SGDClassifi
+00005680: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+00005690: 2020 2020 2072 616e 646f 6d5f 7374 6174       random_stat
+000056a0: 653d 7261 6e64 6f6d 5f73 6565 642c 0d0a  e=random_seed,..
+000056b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056c0: 7665 7262 6f73 653d 7665 7262 6f73 655f  verbose=verbose_
+000056d0: 626f 6f6c 2c0d 0a20 2020 2020 2020 2020  bool,..         
+000056e0: 2020 2020 2020 206e 5f6a 6f62 733d 6e5f         n_jobs=n_
+000056f0: 6a6f 6273 2c0d 0a20 2020 2020 2020 2020  jobs,..         
+00005700: 2020 2020 2020 202a 2a6d 6f64 656c 5f70         **model_p
+00005710: 6172 616d 5f64 6963 742c 0d0a 2020 2020  aram_dict,..    
+00005720: 2020 2020 2020 2020 290d 0a20 2020 2065          )..    e
+00005730: 6c69 6620 6d6f 6465 6c5f 636c 6173 7320  lif model_class 
+00005740: 3d3d 2022 4761 7573 7369 616e 4e42 223a  == "GaussianNB":
+00005750: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00005760: 6b6c 6561 726e 2e6e 6169 7665 5f62 6179  klearn.naive_bay
+00005770: 6573 2069 6d70 6f72 7420 4761 7573 7369  es import Gaussi
+00005780: 616e 4e42 0d0a 0d0a 2020 2020 2020 2020  anNB....        
+00005790: 6966 206d 756c 7469 6f75 7470 7574 3a0d  if multioutput:.
+000057a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000057b0: 7572 6e20 4d75 6c74 694f 7574 7075 7443  urn MultiOutputC
+000057c0: 6c61 7373 6966 6965 7228 4761 7573 7369  lassifier(Gaussi
+000057d0: 616e 4e42 282a 2a6d 6f64 656c 5f70 6172  anNB(**model_par
+000057e0: 616d 5f64 6963 7429 290d 0a20 2020 2020  am_dict))..     
+000057f0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00005800: 2020 2020 2020 7265 7475 726e 2047 6175        return Gau
+00005810: 7373 6961 6e4e 4228 2a2a 6d6f 6465 6c5f  ssianNB(**model_
+00005820: 7061 7261 6d5f 6469 6374 290d 0a20 2020  param_dict)..   
+00005830: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00005840: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00005850: 2866 2263 6c61 7373 6966 6965 7220 7b6d  (f"classifier {m
+00005860: 6f64 656c 5f63 6c61 7373 7d20 6e6f 7420  odel_class} not 
+00005870: 6120 7265 636f 676e 697a 6564 206f 7074  a recognized opt
+00005880: 696f 6e2e 2229 0d0a 0d0a 0d0a 2320 6d6f  ion.")......# mo
+00005890: 6465 6c73 2074 6861 7420 6361 6e20 6d6f  dels that can mo
+000058a0: 7265 2071 7569 636b 6c79 2068 616e 646c  re quickly handl
+000058b0: 6520 6d61 6e79 2058 2f59 206f 6273 2c20  e many X/Y obs, 
+000058c0: 7769 7468 206d 6f64 6573 7420 6e75 6d62  with modest numb
+000058d0: 6572 206f 6620 6665 6174 7572 6573 0d0a  er of features..
+000058e0: 736b 6c65 6172 6e5f 6d6f 6465 6c5f 6469  sklearn_model_di
+000058f0: 6374 203d 207b 0d0a 2020 2020 2320 2752  ct = {..    # 'R
+00005900: 616e 646f 6d46 6f72 6573 7427 3a20 302e  andomForest': 0.
+00005910: 3032 2c20 2023 2063 7261 7368 6573 2073  02,  # crashes s
+00005920: 6f6d 6574 696d 6573 2061 7420 7363 616c  ometimes at scal
+00005930: 6520 666f 7220 756e 636c 6561 7220 7265  e for unclear re
+00005940: 6173 6f6e 730d 0a20 2020 2027 456c 6173  asons..    'Elas
+00005950: 7469 634e 6574 273a 2030 2e30 352c 0d0a  ticNet': 0.05,..
+00005960: 2020 2020 274d 4c50 273a 2030 2e30 352c      'MLP': 0.05,
+00005970: 0d0a 2020 2020 2744 6563 6973 696f 6e54  ..    'DecisionT
+00005980: 7265 6527 3a20 302e 3032 2c0d 0a20 2020  ree': 0.02,..   
+00005990: 2027 4b4e 4e27 3a20 302e 3035 2c0d 0a20   'KNN': 0.05,.. 
+000059a0: 2020 2027 4164 6162 6f6f 7374 273a 2030     'Adaboost': 0
+000059b0: 2e30 312c 0d0a 2020 2020 2753 564d 273a  .01,..    'SVM':
+000059c0: 2030 2e30 352c 2020 2320 7761 7320 736c   0.05,  # was sl
+000059d0: 6f77 2c20 4c69 6e65 6172 5356 5220 7365  ow, LinearSVR se
+000059e0: 656d 7320 6d75 6368 2066 6173 7465 720d  ems much faster.
+000059f0: 0a20 2020 2027 4261 7965 7369 616e 5269  .    'BayesianRi
+00005a00: 6467 6527 3a20 302e 3035 2c0d 0a20 2020  dge': 0.05,..   
+00005a10: 2027 7867 626f 6f73 7427 3a20 302e 3035   'xgboost': 0.05
+00005a20: 2c0d 0a20 2020 2027 4b65 7261 7352 4e4e  ,..    'KerasRNN
+00005a30: 273a 2030 2e30 3031 2c20 2023 2073 6c6f  ': 0.001,  # slo
+00005a40: 7720 6174 2073 6361 6c65 0d0a 2020 2020  w at scale..    
+00005a50: 2754 7261 6e73 666f 726d 6572 273a 2030  'Transformer': 0
+00005a60: 2e30 3031 2c0d 0a20 2020 2027 4869 7374  .001,..    'Hist
+00005a70: 4772 6164 6965 6e74 426f 6f73 7427 3a20  GradientBoost': 
+00005a80: 302e 3033 2c0d 0a20 2020 2027 4c69 6768  0.03,..    'Ligh
+00005a90: 7447 424d 273a 2030 2e31 2c0d 0a20 2020  tGBM': 0.1,..   
+00005aa0: 2027 4c69 6768 7447 424d 5265 6772 6573   'LightGBMRegres
+00005ab0: 736f 7243 6861 696e 273a 2030 2e30 332c  sorChain': 0.03,
+00005ac0: 0d0a 2020 2020 2745 7874 7261 5472 6565  ..    'ExtraTree
+00005ad0: 7327 3a20 302e 3031 2c0d 0a20 2020 2027  s': 0.01,..    '
+00005ae0: 5261 6469 7573 4e65 6967 6862 6f72 7327  RadiusNeighbors'
+00005af0: 3a20 302e 3032 2c0d 0a20 2020 2027 506f  : 0.02,..    'Po
+00005b00: 6973 736f 6e52 6567 7265 7373 7369 6f6e  issonRegresssion
+00005b10: 273a 2030 2e30 332c 0d0a 2020 2020 2752  ': 0.03,..    'R
+00005b20: 414e 5341 4327 3a20 302e 3035 2c0d 0a20  ANSAC': 0.05,.. 
+00005b30: 2020 2027 5269 6467 6527 3a20 302e 3032     'Ridge': 0.02
+00005b40: 2c0d 0a20 2020 2027 4761 7573 7369 616e  ,..    'Gaussian
+00005b50: 5072 6f63 6573 7352 6567 7265 7373 6f72  ProcessRegressor
+00005b60: 273a 2030 2e30 3030 3030 3030 3031 2c20  ': 0.000000001, 
+00005b70: 2023 2073 6c6f 770d 0a20 2020 2023 2027   # slow..    # '
+00005b80: 4d75 6c74 696f 7574 7075 7447 5052 273a  MultioutputGPR':
+00005b90: 2030 2e30 3030 3030 3031 2c20 2023 206d   0.0000001,  # m
+00005ba0: 656d 6f72 7920 696e 7465 6e73 6976 6520  emory intensive 
+00005bb0: 6b65 726e 656c 206b 696c 6c69 6e67 0d0a  kernel killing..
+00005bc0: 7d0d 0a6d 756c 7469 7661 7269 6174 655f  }..multivariate_
+00005bd0: 6d6f 6465 6c5f 6469 6374 203d 207b 0d0a  model_dict = {..
+00005be0: 2020 2020 2752 616e 646f 6d46 6f72 6573      'RandomFores
+00005bf0: 7427 3a20 302e 3032 2c0d 0a20 2020 2023  t': 0.02,..    #
+00005c00: 2027 456c 6173 7469 634e 6574 273a 2030   'ElasticNet': 0
+00005c10: 2e30 352c 0d0a 2020 2020 274d 4c50 273a  .05,..    'MLP':
+00005c20: 2030 2e30 332c 0d0a 2020 2020 2744 6563   0.03,..    'Dec
+00005c30: 6973 696f 6e54 7265 6527 3a20 302e 3035  isionTree': 0.05
+00005c40: 2c0d 0a20 2020 2027 4b4e 4e27 3a20 302e  ,..    'KNN': 0.
+00005c50: 3035 2c0d 0a20 2020 2027 4164 6162 6f6f  05,..    'Adaboo
+00005c60: 7374 273a 2030 2e30 332c 0d0a 2020 2020  st': 0.03,..    
+00005c70: 2753 564d 273a 2030 2e30 352c 0d0a 2020  'SVM': 0.05,..  
+00005c80: 2020 2320 2742 6179 6573 6961 6e52 6964    # 'BayesianRid
+00005c90: 6765 273a 2030 2e30 352c 0d0a 2020 2020  ge': 0.05,..    
+00005ca0: 2778 6762 6f6f 7374 273a 2030 2e30 392c  'xgboost': 0.09,
+00005cb0: 0d0a 2020 2020 274b 6572 6173 524e 4e27  ..    'KerasRNN'
+00005cc0: 3a20 302e 3031 2c0d 0a20 2020 2027 4869  : 0.01,..    'Hi
+00005cd0: 7374 4772 6164 6965 6e74 426f 6f73 7427  stGradientBoost'
+00005ce0: 3a20 302e 3033 2c0d 0a20 2020 2027 4c69  : 0.03,..    'Li
+00005cf0: 6768 7447 424d 273a 2030 2e30 392c 0d0a  ghtGBM': 0.09,..
+00005d00: 2020 2020 274c 6967 6874 4742 4d52 6567      'LightGBMReg
+00005d10: 7265 7373 6f72 4368 6169 6e27 3a20 302e  ressorChain': 0.
+00005d20: 3033 2c0d 0a20 2020 2027 4578 7472 6154  03,..    'ExtraT
+00005d30: 7265 6573 273a 2030 2e30 352c 0d0a 2020  rees': 0.05,..  
+00005d40: 2020 2752 6164 6975 734e 6569 6768 626f    'RadiusNeighbo
+00005d50: 7273 273a 2030 2e30 322c 0d0a 2020 2020  rs': 0.02,..    
+00005d60: 2750 6f69 7373 6f6e 5265 6772 6573 7373  'PoissonRegresss
+00005d70: 696f 6e27 3a20 302e 3033 2c0d 0a20 2020  ion': 0.03,..   
+00005d80: 2027 5241 4e53 4143 273a 2030 2e30 352c   'RANSAC': 0.05,
+00005d90: 0d0a 2020 2020 2752 6964 6765 273a 2030  ..    'Ridge': 0
+00005da0: 2e30 322c 0d0a 7d0d 0a23 2074 6865 7365  .02,..}..# these
+00005db0: 2073 686f 756c 6420 7472 6169 6e20 7175   should train qu
+00005dc0: 6963 6b6c 7920 7769 7468 206c 6f77 2064  ickly with low d
+00005dd0: 696d 656e 7369 6f6e 616c 2058 2f59 2c20  imensional X/Y, 
+00005de0: 616e 6420 6e6f 7420 6d69 6e64 2062 6569  and not mind bei
+00005df0: 6e67 2072 756e 206d 756c 7469 706c 6520  ng run multiple 
+00005e00: 696e 2070 6172 616c 6c65 6c0d 0a75 6e69  in parallel..uni
+00005e10: 7661 7269 6174 655f 6d6f 6465 6c5f 6469  variate_model_di
+00005e20: 6374 203d 207b 0d0a 2020 2020 2745 6c61  ct = {..    'Ela
+00005e30: 7374 6963 4e65 7427 3a20 302e 3035 2c0d  sticNet': 0.05,.
+00005e40: 0a20 2020 2027 4d4c 5027 3a20 302e 3035  .    'MLP': 0.05
+00005e50: 2c0d 0a20 2020 2027 4465 6369 7369 6f6e  ,..    'Decision
+00005e60: 5472 6565 273a 2030 2e30 352c 0d0a 2020  Tree': 0.05,..  
+00005e70: 2020 274b 4e4e 273a 2030 2e30 332c 0d0a    'KNN': 0.03,..
+00005e80: 2020 2020 2741 6461 626f 6f73 7427 3a20      'Adaboost': 
+00005e90: 302e 3035 2c0d 0a20 2020 2027 5356 4d27  0.05,..    'SVM'
+00005ea0: 3a20 302e 3035 2c0d 0a20 2020 2027 4261  : 0.05,..    'Ba
+00005eb0: 7965 7369 616e 5269 6467 6527 3a20 302e  yesianRidge': 0.
+00005ec0: 3033 2c0d 0a20 2020 2027 4869 7374 4772  03,..    'HistGr
+00005ed0: 6164 6965 6e74 426f 6f73 7427 3a20 302e  adientBoost': 0.
+00005ee0: 3032 2c0d 0a20 2020 2027 4c69 6768 7447  02,..    'LightG
+00005ef0: 424d 273a 2030 2e30 332c 0d0a 2020 2020  BM': 0.03,..    
+00005f00: 274c 6967 6874 4742 4d52 6567 7265 7373  'LightGBMRegress
+00005f10: 6f72 4368 6169 6e27 3a20 302e 3031 2c0d  orChain': 0.01,.
+00005f20: 0a20 2020 2027 4578 7472 6154 7265 6573  .    'ExtraTrees
+00005f30: 273a 2030 2e30 352c 0d0a 2020 2020 2752  ': 0.05,..    'R
+00005f40: 6164 6975 734e 6569 6768 626f 7273 273a  adiusNeighbors':
+00005f50: 2030 2e30 352c 0d0a 2020 2020 2752 414e   0.05,..    'RAN
+00005f60: 5341 4327 3a20 302e 3032 2c0d 0a7d 0d0a  SAC': 0.02,..}..
+00005f70: 2320 666f 7220 6869 6768 2064 696d 656e  # for high dimen
+00005f80: 7369 6f6e 616c 6974 792c 206d 616e 792d  sionality, many-
+00005f90: 6665 6174 7572 6520 582c 206d 616e 792d  feature X, many-
+00005fa0: 6665 6174 7572 6520 592c 2062 7574 2077  feature Y, but w
+00005fb0: 6974 6820 6d6f 6465 7261 7465 206f 6273  ith moderate obs
+00005fc0: 2063 6f75 6e74 0d0a 726f 6c6c 696e 675f   count..rolling_
+00005fd0: 7265 6772 6573 7369 6f6e 5f64 6963 7420  regression_dict 
+00005fe0: 3d20 7b0d 0a20 2020 2027 5261 6e64 6f6d  = {..    'Random
+00005ff0: 466f 7265 7374 273a 2030 2e30 322c 0d0a  Forest': 0.02,..
+00006000: 2020 2020 2745 6c61 7374 6963 4e65 7427      'ElasticNet'
+00006010: 3a20 302e 3035 2c0d 0a20 2020 2027 4d4c  : 0.05,..    'ML
+00006020: 5027 3a20 302e 3035 2c0d 0a20 2020 2027  P': 0.05,..    '
+00006030: 4465 6369 7369 6f6e 5472 6565 273a 2030  DecisionTree': 0
+00006040: 2e30 352c 0d0a 2020 2020 274b 4e4e 273a  .05,..    'KNN':
+00006050: 2030 2e30 352c 0d0a 2020 2020 2741 6461   0.05,..    'Ada
+00006060: 626f 6f73 7427 3a20 302e 3033 2c0d 0a20  boost': 0.03,.. 
+00006070: 2020 2027 5356 4d27 3a20 302e 3035 2c0d     'SVM': 0.05,.
+00006080: 0a20 2020 2027 4b65 7261 7352 4e4e 273a  .    'KerasRNN':
+00006090: 2030 2e30 322c 0d0a 2020 2020 274c 6967   0.02,..    'Lig
+000060a0: 6874 4742 4d27 3a20 302e 3039 2c0d 0a20  htGBM': 0.09,.. 
+000060b0: 2020 2027 4c69 6768 7447 424d 5265 6772     'LightGBMRegr
+000060c0: 6573 736f 7243 6861 696e 273a 2030 2e30  essorChain': 0.0
+000060d0: 332c 0d0a 2020 2020 2745 7874 7261 5472  3,..    'ExtraTr
+000060e0: 6565 7327 3a20 302e 3035 2c0d 0a20 2020  ees': 0.05,..   
+000060f0: 2027 5261 6469 7573 4e65 6967 6862 6f72   'RadiusNeighbor
+00006100: 7327 3a20 302e 3031 2c0d 0a20 2020 2027  s': 0.01,..    '
+00006110: 506f 6973 736f 6e52 6567 7265 7373 7369  PoissonRegresssi
+00006120: 6f6e 273a 2030 2e30 332c 0d0a 2020 2020  on': 0.03,..    
+00006130: 2752 414e 5341 4327 3a20 302e 3035 2c0d  'RANSAC': 0.05,.
+00006140: 0a20 2020 2027 5269 6467 6527 3a20 302e  .    'Ridge': 0.
+00006150: 3032 2c0d 0a7d 0d0a 2320 6d6f 6465 6c73  02,..}..# models
+00006160: 2077 6865 7265 2077 6520 6361 6e20 6265   where we can be
+00006170: 2073 7572 6520 7468 6520 6d6f 6465 6c20   sure the model 
+00006180: 6973 6e27 7420 7368 6172 696e 6720 696e  isn't sharing in
+00006190: 666f 726d 6174 696f 6e20 6163 726f 7373  formation across
+000061a0: 206d 756c 7469 706c 6520 5927 732e 2e2e   multiple Y's...
+000061b0: 0d0a 6e6f 5f73 6861 7265 645f 6d6f 6465  ..no_shared_mode
+000061c0: 6c5f 6469 6374 203d 207b 0d0a 2020 2020  l_dict = {..    
+000061d0: 274b 4e4e 273a 2030 2e31 2c0d 0a20 2020  'KNN': 0.1,..   
+000061e0: 2027 4164 6162 6f6f 7374 273a 2030 2e31   'Adaboost': 0.1
+000061f0: 2c0d 0a20 2020 2027 5356 4d27 3a20 302e  ,..    'SVM': 0.
+00006200: 312c 0d0a 2020 2020 2778 6762 6f6f 7374  1,..    'xgboost
+00006210: 273a 2030 2e31 2c0d 0a20 2020 2027 4c69  ': 0.1,..    'Li
+00006220: 6768 7447 424d 273a 2030 2e31 2c0d 0a20  ghtGBM': 0.1,.. 
+00006230: 2020 2027 4869 7374 4772 6164 6965 6e74     'HistGradient
+00006240: 426f 6f73 7427 3a20 302e 312c 0d0a 2020  Boost': 0.1,..  
+00006250: 2020 2750 6f69 7373 6f6e 5265 6772 6573    'PoissonRegres
+00006260: 7373 696f 6e27 3a20 302e 3035 2c0d 0a7d  ssion': 0.05,..}
+00006270: 0d0a 2320 7468 6573 6520 6172 6520 6d6f  ..# these are mo
+00006280: 6465 6c73 2074 6861 7420 6172 6520 7265  dels that are re
+00006290: 6c61 7469 7665 6c79 2066 6173 7420 7769  latively fast wi
+000062a0: 7468 206c 6172 6765 206d 756c 7469 6f75  th large multiou
+000062b0: 7470 7574 2059 2c20 736d 616c 6c20 6e20  tput Y, small n 
+000062c0: 6f62 730d 0a64 6174 6570 6172 745f 6d6f  obs..datepart_mo
+000062d0: 6465 6c5f 6469 6374 3a20 6469 6374 203d  del_dict: dict =
+000062e0: 207b 0d0a 2020 2020 2745 6c61 7374 6963   {..    'Elastic
+000062f0: 4e65 7427 3a20 302e 312c 0d0a 2020 2020  Net': 0.1,..    
+00006300: 274d 4c50 273a 2030 2e30 352c 0d0a 2020  'MLP': 0.05,..  
+00006310: 2020 2744 6563 6973 696f 6e54 7265 6527    'DecisionTree'
+00006320: 3a20 302e 3032 2c0d 0a20 2020 2027 4164  : 0.02,..    'Ad
+00006330: 6162 6f6f 7374 273a 2030 2e30 352c 0d0a  aboost': 0.05,..
+00006340: 2020 2020 2753 564d 273a 2030 2e30 312c      'SVM': 0.01,
+00006350: 0d0a 2020 2020 274b 6572 6173 524e 4e27  ..    'KerasRNN'
+00006360: 3a20 302e 3032 2c0d 0a20 2020 2027 5472  : 0.02,..    'Tr
+00006370: 616e 7366 6f72 6d65 7227 3a20 302e 3032  ansformer': 0.02
+00006380: 2c20 2023 2073 6c6f 770d 0a20 2020 2027  ,  # slow..    '
+00006390: 5261 6469 7573 4e65 6967 6862 6f72 7327  RadiusNeighbors'
+000063a0: 3a20 302e 312c 0d0a 7d0d 0a64 6174 6570  : 0.1,..}..datep
+000063b0: 6172 745f 6d6f 6465 6c5f 6469 6374 5f64  art_model_dict_d
+000063c0: 6565 7020 3d20 7b0d 0a20 2020 2027 5261  eep = {..    'Ra
+000063d0: 6e64 6f6d 466f 7265 7374 273a 2030 2e30  ndomForest': 0.0
+000063e0: 352c 2020 2320 6372 6173 6865 7320 736f  5,  # crashes so
+000063f0: 6d65 7469 6d65 7320 6174 2073 6361 6c65  metimes at scale
+00006400: 2066 6f72 2075 6e63 6c65 6172 2072 6561   for unclear rea
+00006410: 736f 6e73 0d0a 2020 2020 2745 6c61 7374  sons..    'Elast
+00006420: 6963 4e65 7427 3a20 302e 312c 0d0a 2020  icNet': 0.1,..  
+00006430: 2020 2778 6762 6f6f 7374 273a 2030 2e30    'xgboost': 0.0
+00006440: 352c 0d0a 2020 2020 274d 4c50 273a 2030  5,..    'MLP': 0
+00006450: 2e30 352c 0d0a 2020 2020 2744 6563 6973  .05,..    'Decis
+00006460: 696f 6e54 7265 6527 3a20 302e 3032 2c0d  ionTree': 0.02,.
+00006470: 0a20 2020 2027 4164 6162 6f6f 7374 273a  .    'Adaboost':
+00006480: 2030 2e30 352c 0d0a 2020 2020 2753 564d   0.05,..    'SVM
+00006490: 273a 2030 2e30 312c 0d0a 2020 2020 274b  ': 0.01,..    'K
+000064a0: 6572 6173 524e 4e27 3a20 302e 3032 2c0d  erasRNN': 0.02,.
+000064b0: 0a20 2020 2027 5472 616e 7366 6f72 6d65  .    'Transforme
+000064c0: 7227 3a20 302e 3032 2c20 2023 2073 6c6f  r': 0.02,  # slo
+000064d0: 770d 0a20 2020 2027 4578 7472 6154 7265  w..    'ExtraTre
+000064e0: 6573 273a 2030 2e30 312c 2020 2320 736f  es': 0.01,  # so
+000064f0: 6d65 2070 6172 616d 7320 6361 7573 6520  me params cause 
+00006500: 5241 4d20 6372 6173 683f 0d0a 2020 2020  RAM crash?..    
+00006510: 2752 6164 6975 734e 6569 6768 626f 7273  'RadiusNeighbors
+00006520: 273a 2030 2e31 2c0d 0a20 2020 2027 4d75  ': 0.1,..    'Mu
+00006530: 6c74 696f 7574 7075 7447 5052 273a 2030  ltioutputGPR': 0
+00006540: 2e30 3031 2c0d 0a7d 0d0a 6770 7520 3d20  .001,..}..gpu = 
+00006550: 5b27 5472 616e 7366 6f72 6d65 7227 2c20  ['Transformer', 
+00006560: 274b 6572 6173 524e 4e27 2c20 274d 4c50  'KerasRNN', 'MLP
+00006570: 275d 2020 2320 6f72 206d 6f72 6520 6163  ']  # or more ac
+00006580: 6375 7261 7465 6c79 2c20 6e6f 2064 6e6e  curately, no dnn
+00006590: 0d0a 6772 6164 6965 6e74 5f62 6f6f 7374  ..gradient_boost
+000065a0: 696e 6720 3d20 7b0d 0a20 2020 2027 7867  ing = {..    'xg
+000065b0: 626f 6f73 7427 3a20 302e 3039 2c0d 0a20  boost': 0.09,.. 
+000065c0: 2020 2027 4869 7374 4772 6164 6965 6e74     'HistGradient
+000065d0: 426f 6f73 7427 3a20 302e 3033 2c0d 0a20  Boost': 0.03,.. 
+000065e0: 2020 2027 4c69 6768 7447 424d 273a 2030     'LightGBM': 0
+000065f0: 2e30 392c 0d0a 2020 2020 274c 6967 6874  .09,..    'Light
+00006600: 4742 4d52 6567 7265 7373 6f72 4368 6169  GBMRegressorChai
+00006610: 6e27 3a20 302e 3033 2c0d 0a7d 0d0a 2320  n': 0.03,..}..# 
+00006620: 616c 6c20 7472 6565 2062 6173 6564 206d  all tree based m
+00006630: 6f64 656c 730d 0a74 7265 655f 6469 6374  odels..tree_dict
+00006640: 203d 207b 0d0a 2020 2020 2744 6563 6973   = {..    'Decis
+00006650: 696f 6e54 7265 6527 3a20 312c 0d0a 2020  ionTree': 1,..  
+00006660: 2020 2752 616e 646f 6d46 6f72 6573 7427    'RandomForest'
+00006670: 3a20 312c 0d0a 2020 2020 2745 7874 7261  : 1,..    'Extra
+00006680: 5472 6565 7327 3a20 312c 0d0a 2020 2020  Trees': 1,..    
+00006690: 274c 6967 6874 4742 4d27 3a20 312c 0d0a  'LightGBM': 1,..
+000066a0: 2020 2020 2748 6973 7447 7261 6469 656e      'HistGradien
+000066b0: 7442 6f6f 7374 273a 2031 2c0d 0a20 2020  tBoost': 1,..   
+000066c0: 2027 7867 626f 6f73 7427 3a20 312c 0d0a   'xgboost': 1,..
+000066d0: 2020 2020 2758 4742 5265 6772 6573 736f      'XGBRegresso
+000066e0: 7227 3a20 312c 0d0a 7d0d 0a23 2070 7265  r': 1,..}..# pre
+000066f0: 2d6f 7074 696d 697a 6564 206d 6f64 656c  -optimized model
+00006700: 2074 656d 706c 6174 6573 0d0a 7867 7061   templates..xgpa
+00006710: 7261 6d33 203d 207b 0d0a 2020 2020 226d  ram3 = {..    "m
+00006720: 6f64 656c 223a 2027 7867 626f 6f73 7427  odel": 'xgboost'
+00006730: 2c0d 0a20 2020 2022 6d6f 6465 6c5f 7061  ,..    "model_pa
+00006740: 7261 6d73 223a 207b 0d0a 2020 2020 2020  rams": {..      
+00006750: 2020 2262 6f6f 7374 6572 223a 2027 6762    "booster": 'gb
+00006760: 7472 6565 272c 0d0a 2020 2020 2020 2020  tree',..        
+00006770: 2263 6f6c 7361 6d70 6c65 5f62 796c 6576  "colsample_bylev
+00006780: 656c 223a 2030 2e35 342c 0d0a 2020 2020  el": 0.54,..    
+00006790: 2020 2020 226c 6561 726e 696e 675f 7261      "learning_ra
+000067a0: 7465 223a 2030 2e30 3132 352c 0d0a 2020  te": 0.0125,..  
+000067b0: 2020 2020 2020 226d 6178 5f64 6570 7468        "max_depth
+000067c0: 223a 2031 312c 0d0a 2020 2020 2020 2020  ": 11,..        
+000067d0: 226d 696e 5f63 6869 6c64 5f77 6569 6768  "min_child_weigh
+000067e0: 7422 3a20 302e 3031 3237 3230 332c 0d0a  t": 0.0127203,..
+000067f0: 2020 2020 2020 2020 226e 5f65 7374 696d          "n_estim
+00006800: 6174 6f72 7322 3a20 3331 392c 0d0a 2020  ators": 319,..  
+00006810: 2020 7d2c 0d0a 7d0d 0a78 6770 6172 616d    },..}..xgparam
+00006820: 3120 3d20 7b0d 0a20 2020 2022 6d6f 6465  1 = {..    "mode
+00006830: 6c22 3a20 2778 6762 6f6f 7374 272c 0d0a  l": 'xgboost',..
+00006840: 2020 2020 226d 6f64 656c 5f70 6172 616d      "model_param
+00006850: 7322 3a20 7b0d 0a20 2020 2020 2020 2027  s": {..        '
+00006860: 6e5f 6573 7469 6d61 746f 7273 273a 2037  n_estimators': 7
+00006870: 2c0d 0a20 2020 2020 2020 2027 6d61 785f  ,..        'max_
+00006880: 6c65 6176 6573 273a 2034 2c0d 0a20 2020  leaves': 4,..   
+00006890: 2020 2020 2027 6d69 6e5f 6368 696c 645f       'min_child_
+000068a0: 7765 6967 6874 273a 2032 2e35 2c0d 0a20  weight': 2.5,.. 
+000068b0: 2020 2020 2020 2027 6c65 6172 6e69 6e67         'learning
+000068c0: 5f72 6174 6527 3a20 302e 3335 2c0d 0a20  _rate': 0.35,.. 
+000068d0: 2020 2020 2020 2027 7375 6273 616d 706c         'subsampl
+000068e0: 6527 3a20 302e 3935 2c0d 0a20 2020 2020  e': 0.95,..     
+000068f0: 2020 2027 636f 6c73 616d 706c 655f 6279     'colsample_by
+00006900: 6c65 7665 6c27 3a20 302e 3536 2c0d 0a20  level': 0.56,.. 
+00006910: 2020 2020 2020 2027 636f 6c73 616d 706c         'colsampl
+00006920: 655f 6279 7472 6565 273a 2030 2e34 362c  e_bytree': 0.46,
+00006930: 0d0a 2020 2020 2020 2020 2772 6567 5f61  ..        'reg_a
+00006940: 6c70 6861 273a 2030 2e30 3031 362c 0d0a  lpha': 0.0016,..
+00006950: 2020 2020 2020 2020 2772 6567 5f6c 616d          'reg_lam
+00006960: 6264 6127 3a20 352e 332c 0d0a 2020 2020  bda': 5.3,..    
+00006970: 7d2c 0d0a 7d0d 0a78 6770 6172 616d 3220  },..}..xgparam2 
+00006980: 3d20 7b0d 0a20 2020 2022 6d6f 6465 6c22  = {..    "model"
+00006990: 3a20 2778 6762 6f6f 7374 272c 0d0a 2020  : 'xgboost',..  
+000069a0: 2020 226d 6f64 656c 5f70 6172 616d 7322    "model_params"
+000069b0: 3a20 7b0d 0a20 2020 2020 2020 2022 6261  : {..        "ba
+000069c0: 7365 5f73 636f 7265 223a 2030 2e35 2c0d  se_score": 0.5,.
+000069d0: 0a20 2020 2020 2020 2022 626f 6f73 7465  .        "booste
+000069e0: 7222 3a20 2767 6274 7265 6527 2c0d 0a20  r": 'gbtree',.. 
+000069f0: 2020 2020 2020 2022 636f 6c73 616d 706c         "colsampl
+00006a00: 655f 6279 6c65 7665 6c22 3a20 302e 3639  e_bylevel": 0.69
+00006a10: 322c 0d0a 2020 2020 2020 2020 226c 6561  2,..        "lea
+00006a20: 726e 696e 675f 7261 7465 223a 2030 2e30  rning_rate": 0.0
+00006a30: 3232 2c0d 0a20 2020 2020 2020 2022 6d61  22,..        "ma
+00006a40: 785f 6269 6e22 3a20 3235 362c 0d0a 2020  x_bin": 256,..  
+00006a50: 2020 2020 2020 226d 6178 5f64 6570 7468        "max_depth
+00006a60: 223a 2031 342c 0d0a 2020 2020 2020 2020  ": 14,..        
+00006a70: 226d 6178 5f6c 6561 7665 7322 3a20 302c  "max_leaves": 0,
+00006a80: 0d0a 2020 2020 2020 2020 226d 696e 5f63  ..        "min_c
+00006a90: 6869 6c64 5f77 6569 6768 7422 3a20 302e  hild_weight": 0.
+00006aa0: 3032 342c 0d0a 2020 2020 2020 2020 226e  024,..        "n
+00006ab0: 5f65 7374 696d 6174 6f72 7322 3a20 3136  _estimators": 16
+00006ac0: 322c 0d0a 2020 2020 7d2c 0d0a 7d0d 0a6c  2,..    },..}..l
+00006ad0: 6967 6874 6762 6d70 3120 3d20 7b0d 0a20  ightgbmp1 = {.. 
+00006ae0: 2020 2022 6d6f 6465 6c22 3a20 274c 6967     "model": 'Lig
+00006af0: 6874 4742 4d27 2c0d 0a20 2020 2022 6d6f  htGBM',..    "mo
+00006b00: 6465 6c5f 7061 7261 6d73 223a 207b 0d0a  del_params": {..
+00006b10: 2020 2020 2020 2020 2263 6f6c 7361 6d70          "colsamp
+00006b20: 6c65 5f62 7974 7265 6522 3a20 302e 3136  le_bytree": 0.16
+00006b30: 3435 2c0d 0a20 2020 2020 2020 2022 6c65  45,..        "le
+00006b40: 6172 6e69 6e67 5f72 6174 6522 3a20 302e  arning_rate": 0.
+00006b50: 3032 3033 2c0d 0a20 2020 2020 2020 2022  0203,..        "
+00006b60: 6d61 785f 6269 6e22 3a20 3130 3233 2c0d  max_bin": 1023,.
+00006b70: 0a20 2020 2020 2020 2022 6d69 6e5f 6368  .        "min_ch
+00006b80: 696c 645f 7361 6d70 6c65 7322 3a20 3136  ild_samples": 16
+00006b90: 2c0d 0a20 2020 2020 2020 2022 6e5f 6573  ,..        "n_es
+00006ba0: 7469 6d61 746f 7273 223a 2031 3739 342c  timators": 1794,
+00006bb0: 0d0a 2020 2020 2020 2020 226e 756d 5f6c  ..        "num_l
+00006bc0: 6561 7665 7322 3a20 3135 2c0d 0a20 2020  eaves": 15,..   
+00006bd0: 2020 2020 2022 7265 675f 616c 7068 6122       "reg_alpha"
+00006be0: 3a20 302e 3030 3039 382c 0d0a 2020 2020  : 0.00098,..    
+00006bf0: 2020 2020 2272 6567 5f6c 616d 6264 6122      "reg_lambda"
+00006c00: 3a20 302e 3638 362c 0d0a 2020 2020 7d2c  : 0.686,..    },
+00006c10: 0d0a 7d0d 0a6c 6967 6874 6762 6d70 3220  ..}..lightgbmp2 
+00006c20: 3d20 7b0d 0a20 2020 2022 6d6f 6465 6c22  = {..    "model"
+00006c30: 3a20 274c 6967 6874 4742 4d27 2c0d 0a20  : 'LightGBM',.. 
+00006c40: 2020 2022 6d6f 6465 6c5f 7061 7261 6d73     "model_params
+00006c50: 223a 207b 0d0a 2020 2020 2020 2020 2263  ": {..        "c
+00006c60: 6f6c 7361 6d70 6c65 5f62 7974 7265 6522  olsample_bytree"
+00006c70: 3a20 302e 3934 372c 0d0a 2020 2020 2020  : 0.947,..      
+00006c80: 2020 226c 6561 726e 696e 675f 7261 7465    "learning_rate
+00006c90: 223a 2030 2e37 3032 342c 0d0a 2020 2020  ": 0.7024,..    
+00006ca0: 2020 2020 226d 6178 5f62 696e 223a 2032      "max_bin": 2
+00006cb0: 3535 2c0d 0a20 2020 2020 2020 2022 6d69  55,..        "mi
+00006cc0: 6e5f 6368 696c 645f 7361 6d70 6c65 7322  n_child_samples"
+00006cd0: 3a20 3135 2c0d 0a20 2020 2020 2020 2022  : 15,..        "
+00006ce0: 6e5f 6573 7469 6d61 746f 7273 223a 2035  n_estimators": 5
+00006cf0: 2c0d 0a20 2020 2020 2020 2022 6e75 6d5f  ,..        "num_
+00006d00: 6c65 6176 6573 223a 2033 352c 0d0a 2020  leaves": 35,..  
+00006d10: 2020 2020 2020 2272 6567 5f61 6c70 6861        "reg_alpha
+00006d20: 223a 2030 2e30 3033 3038 2c0d 0a20 2020  ": 0.00308,..   
+00006d30: 2020 2020 2022 7265 675f 6c61 6d62 6461       "reg_lambda
+00006d40: 223a 2035 2e31 3832 2c0d 0a20 2020 207d  ": 5.182,..    }
+00006d50: 2c0d 0a7d 0d0a 0d0a 0d0a 6465 6620 6765  ,..}......def ge
+00006d60: 6e65 7261 7465 5f63 6c61 7373 6966 6965  nerate_classifie
+00006d70: 725f 7061 7261 6d73 280d 0a20 2020 206d  r_params(..    m
+00006d80: 6f64 656c 5f64 6963 743d 4e6f 6e65 2c0d  odel_dict=None,.
+00006d90: 0a20 2020 206d 6574 686f 643d 2264 6566  .    method="def
+00006da0: 6175 6c74 222c 0d0a 293a 0d0a 2020 2020  ault",..):..    
+00006db0: 6966 206d 6f64 656c 5f64 6963 7420 6973  if model_dict is
+00006dc0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00006dd0: 6966 206d 6574 686f 6420 3d3d 2022 6661  if method == "fa
+00006de0: 7374 223a 0d0a 2020 2020 2020 2020 2020  st":..          
+00006df0: 2020 6d6f 6465 6c5f 6469 6374 203d 207b    model_dict = {
+00006e00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006e10: 2020 2778 6762 6f6f 7374 273a 2030 2e35    'xgboost': 0.5
+00006e20: 2c20 2023 2061 6c73 6f20 6372 6173 6865  ,  # also crashe
+00006e30: 7320 736f 6d65 7469 6d65 730d 0a20 2020  s sometimes..   
+00006e40: 2020 2020 2020 2020 2020 2020 2023 2027               # '
+00006e50: 4578 7472 6154 7265 6573 273a 2030 2e32  ExtraTrees': 0.2
+00006e60: 2c20 2023 2063 7261 7368 6573 2073 6f6d  ,  # crashes som
+00006e70: 6574 696d 6573 0d0a 2020 2020 2020 2020  etimes..        
+00006e80: 2020 2020 2020 2020 2320 2752 616e 646f          # 'Rando
+00006e90: 6d46 6f72 6573 7427 3a20 302e 312c 0d0a  mForest': 0.1,..
+00006ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006eb0: 274b 4e4e 273a 2031 2c0d 0a20 2020 2020  'KNN': 1,..     
+00006ec0: 2020 2020 2020 2020 2020 2027 5347 4427             'SGD'
+00006ed0: 3a20 302e 312c 0d0a 2020 2020 2020 2020  : 0.1,..        
+00006ee0: 2020 2020 7d0d 0a20 2020 2020 2020 2065      }..        e
+00006ef0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00006f00: 2020 6d6f 6465 6c5f 6469 6374 203d 207b    model_dict = {
+00006f10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006f20: 2020 2778 6762 6f6f 7374 273a 2030 2e35    'xgboost': 0.5
+00006f30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00006f40: 2020 2027 4578 7472 6154 7265 6573 273a     'ExtraTrees':
+00006f50: 2030 2e32 2c0d 0a20 2020 2020 2020 2020   0.2,..         
+00006f60: 2020 2020 2020 2027 5261 6e64 6f6d 466f         'RandomFo
+00006f70: 7265 7374 273a 2030 2e31 2c0d 0a20 2020  rest': 0.1,..   
+00006f80: 2020 2020 2020 2020 2020 2020 2027 4b4e               'KN
+00006f90: 4e27 3a20 312c 0d0a 2020 2020 2020 2020  N': 1,..        
+00006fa0: 2020 2020 2020 2020 2753 4744 273a 2030          'SGD': 0
+00006fb0: 2e31 2c0d 0a20 2020 2020 2020 2020 2020  .1,..           
+00006fc0: 207d 0d0a 2020 2020 7265 6772 5f70 6172   }..    regr_par
+00006fd0: 616d 7320 3d20 6765 6e65 7261 7465 5f72  ams = generate_r
+00006fe0: 6567 7265 7373 6f72 5f70 6172 616d 7328  egressor_params(
+00006ff0: 0d0a 2020 2020 2020 2020 6d6f 6465 6c5f  ..        model_
+00007000: 6469 6374 3d6d 6f64 656c 5f64 6963 742c  dict=model_dict,
+00007010: 0d0a 2020 2020 2020 2020 6d65 7468 6f64  ..        method
+00007020: 3d6d 6574 686f 642c 0d0a 2020 2020 290d  =method,..    ).
+00007030: 0a20 2020 2069 6620 7265 6772 5f70 6172  .    if regr_par
+00007040: 616d 735b 226d 6f64 656c 225d 203d 3d20  ams["model"] == 
+00007050: 2778 6762 6f6f 7374 273a 0d0a 2020 2020  'xgboost':..    
+00007060: 2020 2020 6966 2022 6f62 6a65 6374 6976      if "objectiv
+00007070: 6522 2069 6e20 7265 6772 5f70 6172 616d  e" in regr_param
+00007080: 735b 276d 6f64 656c 5f70 6172 616d 7327  s['model_params'
+00007090: 5d2e 6b65 7973 2829 3a0d 0a20 2020 2020  ].keys():..     
+000070a0: 2020 2020 2020 2072 6567 725f 7061 7261         regr_para
+000070b0: 6d73 5b27 6d6f 6465 6c5f 7061 7261 6d73  ms['model_params
+000070c0: 275d 2e70 6f70 2827 6f62 6a65 6374 6976  '].pop('objectiv
+000070d0: 6527 2c20 4e6f 6e65 290d 0a20 2020 2065  e', None)..    e
+000070e0: 6c69 6620 7265 6772 5f70 6172 616d 735b  lif regr_params[
+000070f0: 226d 6f64 656c 225d 203d 3d20 2745 7874  "model"] == 'Ext
+00007100: 7261 5472 6565 7327 3a0d 0a20 2020 2020  raTrees':..     
+00007110: 2020 2072 6567 725f 7061 7261 6d73 5b27     regr_params['
+00007120: 6d6f 6465 6c5f 7061 7261 6d73 275d 5b27  model_params']['
+00007130: 6372 6974 6572 696f 6e27 5d20 3d20 2767  criterion'] = 'g
+00007140: 696e 6927 0d0a 2020 2020 7265 7475 726e  ini'..    return
+00007150: 2072 6567 725f 7061 7261 6d73 0d0a 0d0a   regr_params....
+00007160: 0d0a 6465 6620 6765 6e65 7261 7465 5f72  ..def generate_r
+00007170: 6567 7265 7373 6f72 5f70 6172 616d 7328  egressor_params(
+00007180: 0d0a 2020 2020 6d6f 6465 6c5f 6469 6374  ..    model_dict
+00007190: 3d4e 6f6e 652c 0d0a 2020 2020 6d65 7468  =None,..    meth
+000071a0: 6f64 3d22 6465 6661 756c 7422 2c0d 0a29  od="default",..)
+000071b0: 3a0d 0a20 2020 2022 2222 4765 6e65 7261  :..    """Genera
+000071c0: 7465 206e 6577 2070 6172 616d 6574 6572  te new parameter
+000071d0: 7320 666f 7220 696e 7075 7420 746f 2072  s for input to r
+000071e0: 6567 7265 7373 6f72 2e22 2222 0d0a 2020  egressor."""..  
+000071f0: 2020 2320 666f 7263 6520 6e65 7572 616c    # force neural
+00007200: 206e 6574 776f 726b 7320 666f 7220 7465   networks for te
+00007210: 7374 696e 6720 7075 7270 6f73 6573 0d0a  sting purposes..
+00007220: 2020 2020 6966 206d 6574 686f 6420 696e      if method in
+00007230: 205b 2264 6566 6175 6c74 222c 2027 7261   ["default", 'ra
+00007240: 6e64 6f6d 272c 2027 6661 7374 275d 3a0d  ndom', 'fast']:.
+00007250: 0a20 2020 2020 2020 2070 6173 730d 0a20  .        pass.. 
+00007260: 2020 2065 6c69 6620 6d65 7468 6f64 203d     elif method =
+00007270: 3d20 226e 6575 7261 6c6e 6574 7322 3a0d  = "neuralnets":.
+00007280: 0a20 2020 2020 2020 206d 6f64 656c 5f64  .        model_d
+00007290: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
+000072a0: 2020 2020 2027 4b65 7261 7352 4e4e 273a       'KerasRNN':
+000072b0: 2030 2e30 352c 0d0a 2020 2020 2020 2020   0.05,..        
+000072c0: 2020 2020 2754 7261 6e73 666f 726d 6572      'Transformer
+000072d0: 273a 2030 2e30 352c 0d0a 2020 2020 2020  ': 0.05,..      
+000072e0: 2020 2020 2020 274d 4c50 273a 2030 2e30        'MLP': 0.0
+000072f0: 352c 0d0a 2020 2020 2020 2020 7d0d 0a20  5,..        }.. 
+00007300: 2020 2020 2020 206d 6574 686f 6420 3d20         method = 
+00007310: 2264 6565 7022 0d0a 2020 2020 656c 6966  "deep"..    elif
+00007320: 206d 6574 686f 6420 3d3d 2022 6772 6164   method == "grad
+00007330: 6965 6e74 5f62 6f6f 7374 696e 6722 3a0d  ient_boosting":.
+00007340: 0a20 2020 2020 2020 206d 6f64 656c 5f64  .        model_d
+00007350: 6963 7420 3d20 6772 6164 6965 6e74 5f62  ict = gradient_b
+00007360: 6f6f 7374 696e 670d 0a20 2020 2020 2020  oosting..       
+00007370: 206d 6574 686f 6420 3d20 2264 6566 6175   method = "defau
+00007380: 6c74 220d 0a20 2020 2065 6c69 6620 6d65  lt"..    elif me
+00007390: 7468 6f64 203d 3d20 2274 7265 6573 223a  thod == "trees":
+000073a0: 0d0a 2020 2020 2020 2020 6d6f 6465 6c5f  ..        model_
+000073b0: 6469 6374 203d 2074 7265 655f 6469 6374  dict = tree_dict
+000073c0: 0d0a 2020 2020 2020 2020 6d65 7468 6f64  ..        method
+000073d0: 203d 2022 6465 6661 756c 7422 0d0a 2020   = "default"..  
+000073e0: 2020 656c 6966 206d 6574 686f 6420 696e    elif method in
+000073f0: 2073 6b6c 6561 726e 5f6d 6f64 656c 5f64   sklearn_model_d
+00007400: 6963 742e 6b65 7973 2829 3a0d 0a20 2020  ict.keys():..   
+00007410: 2020 2020 206d 6f64 656c 5f64 6963 7420       model_dict 
+00007420: 3d20 7b6d 6574 686f 643a 2073 6b6c 6561  = {method: sklea
+00007430: 726e 5f6d 6f64 656c 5f64 6963 745b 6d65  rn_model_dict[me
+00007440: 7468 6f64 5d7d 0d0a 2020 2020 656c 6966  thod]}..    elif
+00007450: 206d 6f64 656c 5f64 6963 7420 6973 204e   model_dict is N
+00007460: 6f6e 653a 0d0a 2020 2020 2020 2020 6d6f  one:..        mo
+00007470: 6465 6c5f 6469 6374 203d 2073 6b6c 6561  del_dict = sklea
+00007480: 726e 5f6d 6f64 656c 5f64 6963 740d 0a20  rn_model_dict.. 
+00007490: 2020 2023 2075 7365 6420 696e 2043 6173     # used in Cas
+000074a0: 7361 6e64 7261 2074 6f20 7265 6d6f 7665  sandra to remove
+000074b0: 2073 6c6f 7765 7374 206d 6f64 656c 730d   slowest models.
+000074c0: 0a20 2020 2069 6620 6d65 7468 6f64 203d  .    if method =
+000074d0: 3d20 226e 6f5f 6770 7522 3a0d 0a20 2020  = "no_gpu":..   
+000074e0: 2020 2020 206d 6f64 656c 5f64 6963 7420       model_dict 
+000074f0: 3d20 7b78 3a20 7920 666f 7220 2878 2c20  = {x: y for (x, 
+00007500: 7929 2069 6e20 6d6f 6465 6c5f 6469 6374  y) in model_dict
+00007510: 2e69 7465 6d73 2829 2069 6620 7820 6e6f  .items() if x no
+00007520: 7420 696e 2067 7075 7d0d 0a20 2020 206d  t in gpu}..    m
+00007530: 6f64 656c 5f6c 6973 7420 3d20 6c69 7374  odel_list = list
+00007540: 286d 6f64 656c 5f64 6963 742e 6b65 7973  (model_dict.keys
+00007550: 2829 290d 0a20 2020 206d 6f64 656c 203d  ())..    model =
+00007560: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+00007570: 6d6f 6465 6c5f 6c69 7374 2c20 6c69 7374  model_list, list
+00007580: 286d 6f64 656c 5f64 6963 742e 7661 6c75  (model_dict.valu
+00007590: 6573 2829 292c 206b 3d31 295b 305d 0d0a  es()), k=1)[0]..
+000075a0: 2020 2020 6966 206d 6f64 656c 2069 6e20      if model in 
+000075b0: 5b0d 0a20 2020 2020 2020 2027 7867 626f  [..        'xgbo
+000075c0: 6f73 7427 2c0d 0a20 2020 2020 2020 2027  ost',..        '
+000075d0: 4164 6162 6f6f 7374 272c 0d0a 2020 2020  Adaboost',..    
+000075e0: 2020 2020 2744 6563 6973 696f 6e54 7265      'DecisionTre
+000075f0: 6527 2c0d 0a20 2020 2020 2020 2027 4c69  e',..        'Li
+00007600: 6768 7447 424d 272c 0d0a 2020 2020 2020  ghtGBM',..      
+00007610: 2020 274c 6967 6874 4742 4d52 6567 7265    'LightGBMRegre
+00007620: 7373 6f72 4368 6169 6e27 2c0d 0a20 2020  ssorChain',..   
+00007630: 2020 2020 2027 4d4c 5027 2c0d 0a20 2020       'MLP',..   
+00007640: 2020 2020 2027 4b4e 4e27 2c0d 0a20 2020       'KNN',..   
+00007650: 2020 2020 2027 4b65 7261 7352 4e4e 272c       'KerasRNN',
+00007660: 0d0a 2020 2020 2020 2020 2754 7261 6e73  ..        'Trans
+00007670: 666f 726d 6572 272c 0d0a 2020 2020 2020  former',..      
+00007680: 2020 2748 6973 7447 7261 6469 656e 7442    'HistGradientB
+00007690: 6f6f 7374 272c 0d0a 2020 2020 2020 2020  oost',..        
+000076a0: 2752 616e 646f 6d46 6f72 6573 7427 2c0d  'RandomForest',.
+000076b0: 0a20 2020 2020 2020 2027 4578 7472 6154  .        'ExtraT
+000076c0: 7265 6573 272c 0d0a 2020 2020 2020 2020  rees',..        
+000076d0: 2752 6964 6765 272c 0d0a 2020 2020 2020  'Ridge',..      
+000076e0: 2020 2747 6175 7373 6961 6e50 726f 6365    'GaussianProce
+000076f0: 7373 5265 6772 6573 736f 7227 2c0d 0a20  ssRegressor',.. 
+00007700: 2020 2020 2020 2027 4d75 6c74 696f 7574         'Multiout
+00007710: 7075 7447 5052 272c 0d0a 2020 2020 5d3a  putGPR',..    ]:
+00007720: 0d0a 2020 2020 2020 2020 6966 206d 6f64  ..        if mod
+00007730: 656c 203d 3d20 2741 6461 626f 6f73 7427  el == 'Adaboost'
+00007740: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00007750: 6172 616d 5f64 6963 7420 3d20 7b0d 0a20  aram_dict = {.. 
+00007760: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00007770: 6d6f 6465 6c22 3a20 2741 6461 626f 6f73  model": 'Adaboos
+00007780: 7427 2c0d 0a20 2020 2020 2020 2020 2020  t',..           
+00007790: 2020 2020 2022 6d6f 6465 6c5f 7061 7261       "model_para
+000077a0: 6d73 223a 207b 0d0a 2020 2020 2020 2020  ms": {..        
+000077b0: 2020 2020 2020 2020 2020 2020 226e 5f65              "n_e
+000077c0: 7374 696d 6174 6f72 7322 3a20 7261 6e64  stimators": rand
+000077d0: 6f6d 2e63 686f 6963 6573 285b 3530 2c20  om.choices([50, 
+000077e0: 3130 302c 2035 3030 5d2c 205b 302e 372c  100, 500], [0.7,
+000077f0: 2030 2e32 2c20 302e 315d 295b 305d 2c0d   0.2, 0.1])[0],.
+00007800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007810: 2020 2020 2022 6c6f 7373 223a 2072 616e       "loss": ran
+00007820: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+00007830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007840: 2020 2020 2020 5b27 6c69 6e65 6172 272c        ['linear',
+00007850: 2027 7371 7561 7265 272c 2027 6578 706f   'square', 'expo
+00007860: 6e65 6e74 6961 6c27 5d2c 205b 302e 382c  nential'], [0.8,
+00007870: 2030 2e30 312c 2030 2e31 5d0d 0a20 2020   0.01, 0.1]..   
+00007880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007890: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
+000078a0: 2020 2020 2020 2020 2020 2020 2265 7374              "est
+000078b0: 696d 6174 6f72 223a 2072 616e 646f 6d2e  imator": random.
+000078c0: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+000078d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000078e0: 2020 5b4e 6f6e 652c 2027 4c69 6e52 6567    [None, 'LinReg
+000078f0: 272c 2027 5356 5227 5d2c 0d0a 2020 2020  ', 'SVR'],..    
+00007900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007910: 2020 2020 5b30 2e38 2c20 302e 312c 2030      [0.8, 0.1, 0
+00007920: 2e30 5d2c 2020 2320 5356 5220 736c 6f77  .0],  # SVR slow
+00007930: 2061 6e64 2063 7261 7368 2070 726f 6e65   and crash prone
+00007940: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007950: 2020 2020 2020 295b 305d 2c0d 0a20 2020        )[0],..   
+00007960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007970: 2022 6c65 6172 6e69 6e67 5f72 6174 6522   "learning_rate"
+00007980: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
+00007990: 285b 312c 2030 2e35 5d2c 205b 302e 392c  ([1, 0.5], [0.9,
+000079a0: 2030 2e31 5d29 5b30 5d2c 0d0a 2020 2020   0.1])[0],..    
+000079b0: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
+000079c0: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
+000079d0: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
+000079e0: 6c20 3d3d 2027 7867 626f 6f73 7427 3a0d  l == 'xgboost':.
+000079f0: 0a20 2020 2020 2020 2020 2020 2062 7261  .            bra
+00007a00: 6e63 6820 3d20 7261 6e64 6f6d 2e63 686f  nch = random.cho
+00007a10: 6963 6573 285b 2770 3127 2c20 2770 3227  ices(['p1', 'p2'
+00007a20: 2c20 2770 3327 2c20 2772 616e 646f 6d27  , 'p3', 'random'
+00007a30: 5d2c 205b 302e 312c 2030 2e31 2c20 302e  ], [0.1, 0.1, 0.
+00007a40: 312c 2030 2e37 5d29 5b0d 0a20 2020 2020  1, 0.7])[..     
+00007a50: 2020 2020 2020 2020 2020 2030 0d0a 2020             0..  
+00007a60: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
+00007a70: 2020 2020 2020 2020 2069 6620 6272 616e           if bran
+00007a80: 6368 203d 3d20 2770 3127 3a0d 0a20 2020  ch == 'p1':..   
+00007a90: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00007aa0: 616d 5f64 6963 7420 3d20 7867 7061 7261  am_dict = xgpara
+00007ab0: 6d31 0d0a 2020 2020 2020 2020 2020 2020  m1..            
+00007ac0: 656c 6966 2062 7261 6e63 6820 3d3d 2027  elif branch == '
+00007ad0: 7032 273a 0d0a 2020 2020 2020 2020 2020  p2':..          
+00007ae0: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
+00007af0: 203d 2078 6770 6172 616d 320d 0a20 2020   = xgparam2..   
+00007b00: 2020 2020 2020 2020 2065 6c69 6620 6272           elif br
+00007b10: 616e 6368 203d 3d20 2770 3327 3a0d 0a20  anch == 'p3':.. 
+00007b20: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00007b30: 6172 616d 5f64 6963 7420 3d20 7867 7061  aram_dict = xgpa
+00007b40: 7261 6d33 0d0a 2020 2020 2020 2020 2020  ram3..          
+00007b50: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00007b60: 2020 2020 2020 2020 206f 626a 6563 7469           objecti
+00007b70: 7665 203d 2072 616e 646f 6d2e 6368 6f69  ve = random.choi
+00007b80: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+00007b90: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
 00007ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bb0: 2020 295b 0d0a 2020 2020 2020 2020 2020    )[..          
-00007bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bd0: 2020 300d 0a20 2020 2020 2020 2020 2020    0..           
-00007be0: 2020 2020 2020 2020 2020 2020 205d 2c20               ], 
-00007bf0: 2023 2061 6b61 206c 6561 726e 696e 675f   # aka learning_
-00007c00: 7261 7465 0d0a 2020 2020 2020 2020 2020  rate..          
-00007c10: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00007c20: 696e 5f63 6869 6c64 5f77 6569 6768 7422  in_child_weight"
-00007c30: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-00007c40: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-00007c50: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00007c60: 302e 3035 2c20 302e 352c 2031 2c20 322c  0.05, 0.5, 1, 2,
-00007c70: 2035 2c20 3130 5d2c 205b 302e 3031 2c20   5, 10], [0.01, 
-00007c80: 302e 3035 2c20 302e 382c 2030 2e31 2c20  0.05, 0.8, 0.1, 
-00007c90: 302e 312c 2030 2e31 5d0d 0a20 2020 2020  0.1, 0.1]..     
-00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cb0: 2020 2029 5b30 5d2c 0d0a 2020 2020 2020     )[0],..      
-00007cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cd0: 2020 2273 7562 7361 6d70 6c65 223a 2072    "subsample": r
-00007ce0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-00007cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d00: 2020 2020 2020 2020 2020 2020 5b31 2c20              [1, 
-00007d10: 302e 392c 2030 2e37 2c20 302e 355d 2c20  0.9, 0.7, 0.5], 
-00007d20: 5b30 2e39 2c20 302e 3035 2c20 302e 3035  [0.9, 0.05, 0.05
-00007d30: 2c20 302e 3035 5d0d 0a20 2020 2020 2020  , 0.05]..       
-00007d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d50: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
-00007d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d70: 2263 6f6c 7361 6d70 6c65 5f62 796c 6576  "colsample_bylev
-00007d80: 656c 223a 2072 616e 646f 6d2e 6368 6f69  el": random.choi
-00007d90: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+00007bb0: 2020 2020 2027 636f 756e 743a 706f 6973       'count:pois
+00007bc0: 736f 6e27 2c0d 0a20 2020 2020 2020 2020  son',..         
+00007bd0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00007be0: 7265 673a 7371 7561 7265 6465 7272 6f72  reg:squarederror
+00007bf0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00007c00: 2020 2020 2020 2020 2020 2020 2772 6567              'reg
+00007c10: 3a67 616d 6d61 272c 0d0a 2020 2020 2020  :gamma',..      
+00007c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c30: 2020 2772 6567 3a70 7365 7564 6f68 7562    'reg:pseudohub
+00007c40: 6572 6572 726f 7227 2c0d 0a20 2020 2020  ererror',..     
+00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c60: 2020 2027 7265 673a 7175 616e 7469 6c65     'reg:quantile
+00007c70: 6572 726f 7227 2c0d 0a20 2020 2020 2020  error',..       
+00007c80: 2020 2020 2020 2020 2020 2020 205d 2c0d               ],.
+00007c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007ca0: 2020 2020 205b 302e 312c 2030 2e36 2c20       [0.1, 0.6, 
+00007cb0: 302e 312c 2030 2e31 2c20 302e 315d 2c0d  0.1, 0.1, 0.1],.
+00007cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007cd0: 2029 5b30 5d0d 0a20 2020 2020 2020 2020   )[0]..         
+00007ce0: 2020 2020 2020 2070 6172 616d 5f64 6963         param_dic
+00007cf0: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
+00007d00: 2020 2020 2020 2020 2020 2022 6d6f 6465             "mode
+00007d10: 6c22 3a20 2778 6762 6f6f 7374 272c 0d0a  l": 'xgboost',..
+00007d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d30: 2020 2020 226d 6f64 656c 5f70 6172 616d      "model_param
+00007d40: 7322 3a20 7b0d 0a20 2020 2020 2020 2020  s": {..         
+00007d50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00007d60: 626f 6f73 7465 7222 3a20 7261 6e64 6f6d  booster": random
+00007d70: 2e63 686f 6963 6573 285b 2767 6274 7265  .choices(['gbtre
+00007d80: 6527 2c20 2767 626c 696e 6561 7227 5d2c  e', 'gblinear'],
+00007d90: 205b 302e 372c 2030 2e33 5d29 5b0d 0a20   [0.7, 0.3])[.. 
 00007da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007db0: 2020 5b31 2c20 302e 392c 2030 2e37 2c20    [1, 0.9, 0.7, 
-00007dc0: 302e 355d 2c20 5b30 2e34 2c20 302e 312c  0.5], [0.4, 0.1,
-00007dd0: 2030 2e31 2c20 302e 315d 0d0a 2020 2020   0.1, 0.1]..    
+00007db0: 2020 2020 2020 2020 2020 2030 0d0a 2020             0..  
+00007dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007dd0: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
 00007de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007df0: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-00007e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e10: 2020 2022 7265 675f 616c 7068 6122 3a20     "reg_alpha": 
-00007e20: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00007e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007e40: 2020 2020 2020 2020 2020 2020 205b 302c               [0,
-00007e50: 2030 2e30 3031 2c20 302e 3035 2c20 3130   0.001, 0.05, 10
-00007e60: 305d 2c20 5b30 2e39 2c20 302e 312c 2030  0], [0.9, 0.1, 0
-00007e70: 2e30 352c 2030 2e30 355d 0d0a 2020 2020  .05, 0.05]..    
-00007e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e90: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007eb0: 2020 2022 7265 675f 6c61 6d62 6461 223a     "reg_lambda":
-00007ec0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00007ed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007ee0: 2020 2020 2020 2020 2020 2020 2020 5b31                [1
-00007ef0: 2c20 302e 3033 2c20 302e 3131 2c20 302e  , 0.03, 0.11, 0.
-00007f00: 322c 2035 5d2c 205b 302e 392c 2030 2e30  2, 5], [0.9, 0.0
-00007f10: 352c 2030 2e30 352c 2030 2e30 352c 2030  5, 0.05, 0.05, 0
-00007f20: 2e30 355d 0d0a 2020 2020 2020 2020 2020  .05]..          
-00007f30: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-00007f40: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-00007f50: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
-00007f60: 2020 2020 2020 2020 2020 2020 207d 0d0a               }..
+00007df0: 2020 226f 626a 6563 7469 7665 223a 206f    "objective": o
+00007e00: 626a 6563 7469 7665 2c0d 0a20 2020 2020  bjective,..     
+00007e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007e20: 2020 2022 6d61 785f 6465 7074 6822 3a20     "max_depth": 
+00007e30: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
+00007e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e50: 2020 2020 2020 2020 2020 2020 205b 362c               [6,
+00007e60: 2033 2c20 322c 2038 5d2c 205b 302e 362c   3, 2, 8], [0.6,
+00007e70: 2030 2e34 2c20 302e 322c 2030 2e30 315d   0.4, 0.2, 0.01]
+00007e80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007e90: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
+00007ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007eb0: 2020 2020 2020 2020 2022 6574 6122 3a20           "eta": 
+00007ec0: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
+00007ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007ee0: 2020 2020 2020 2020 2020 2020 205b 312e               [1.
+00007ef0: 302c 2030 2e33 2c20 302e 3031 2c20 302e  0, 0.3, 0.01, 0.
+00007f00: 3033 2c20 302e 3035 2c20 302e 3030 335d  03, 0.05, 0.003]
+00007f10: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00007f20: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+00007f30: 302e 3035 2c20 302e 312c 2030 2e31 2c20  0.05, 0.1, 0.1, 
+00007f40: 302e 312c 2030 2e31 2c20 302e 315d 2c0d  0.1, 0.1, 0.1],.
+00007f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007f60: 2020 2020 2020 2020 2029 5b0d 0a20 2020           )[..   
 00007f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007f80: 6966 2072 616e 646f 6d2e 6368 6f69 6365  if random.choice
-00007f90: 7328 5b54 7275 652c 2046 616c 7365 5d2c  s([True, False],
-00007fa0: 205b 302e 342c 2030 2e36 5d29 5b30 5d3a   [0.4, 0.6])[0]:
-00007fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007fc0: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-00007fd0: 5b22 6d6f 6465 6c5f 7061 7261 6d73 225d  ["model_params"]
-00007fe0: 5b22 6d61 785f 6465 7074 6822 5d20 3d20  ["max_depth"] = 
-00007ff0: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00008000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008010: 2020 2020 2020 2020 205b 332c 2036 2c20           [3, 6, 
-00008020: 395d 2c20 5b30 2e31 2c20 302e 382c 2030  9], [0.1, 0.8, 0
-00008030: 2e31 5d0d 0a20 2020 2020 2020 2020 2020  .1]..           
-00008040: 2020 2020 2020 2020 2029 5b30 5d0d 0a20           )[0].. 
-00008050: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00008060: 6620 7261 6e64 6f6d 2e63 686f 6963 6573  f random.choices
-00008070: 285b 5472 7565 2c20 4661 6c73 655d 2c20  ([True, False], 
-00008080: 5b30 2e35 2c20 302e 355d 295b 305d 3a0d  [0.5, 0.5])[0]:.
-00008090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000080a0: 2020 2020 2070 6172 616d 5f64 6963 745b       param_dict[
-000080b0: 226d 6f64 656c 5f70 6172 616d 7322 5d5b  "model_params"][
-000080c0: 226e 5f65 7374 696d 6174 6f72 7322 5d20  "n_estimators"] 
-000080d0: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-000080e0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000080f0: 2020 2020 2020 2020 2020 205b 342c 2037             [4, 7
-00008100: 2c20 3130 2c20 3230 2c20 3130 302c 2031  , 10, 20, 100, 1
-00008110: 3030 305d 2c0d 0a20 2020 2020 2020 2020  000],..         
-00008120: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00008130: 302e 322c 2030 2e32 2c20 302e 322c 2030  0.2, 0.2, 0.2, 0
-00008140: 2e32 2c20 302e 352c 2030 2e32 5d2c 0d0a  .2, 0.5, 0.2],..
+00007f80: 2020 2020 2020 2020 2030 0d0a 2020 2020           0..    
+00007f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007fa0: 2020 2020 5d2c 2020 2320 616b 6120 6c65      ],  # aka le
+00007fb0: 6172 6e69 6e67 5f72 6174 650d 0a20 2020  arning_rate..   
+00007fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007fd0: 2020 2020 2022 6d69 6e5f 6368 696c 645f       "min_child_
+00007fe0: 7765 6967 6874 223a 2072 616e 646f 6d2e  weight": random.
+00007ff0: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+00008000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008010: 2020 2020 2020 5b30 2e30 352c 2030 2e35        [0.05, 0.5
+00008020: 2c20 312c 2032 2c20 352c 2031 305d 2c20  , 1, 2, 5, 10], 
+00008030: 5b30 2e30 312c 2030 2e30 352c 2030 2e38  [0.01, 0.05, 0.8
+00008040: 2c20 302e 312c 2030 2e31 2c20 302e 315d  , 0.1, 0.1, 0.1]
+00008050: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008060: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
+00008070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008080: 2020 2020 2020 2020 2022 7375 6273 616d           "subsam
+00008090: 706c 6522 3a20 7261 6e64 6f6d 2e63 686f  ple": random.cho
+000080a0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+000080b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000080c0: 2020 205b 312c 2030 2e39 2c20 302e 372c     [1, 0.9, 0.7,
+000080d0: 2030 2e35 5d2c 205b 302e 392c 2030 2e30   0.5], [0.9, 0.0
+000080e0: 352c 2030 2e30 352c 2030 2e30 355d 0d0a  5, 0.05, 0.05]..
+000080f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008100: 2020 2020 2020 2020 295b 305d 2c0d 0a20          )[0],.. 
+00008110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008120: 2020 2020 2020 2022 636f 6c73 616d 706c         "colsampl
+00008130: 655f 6279 6c65 7665 6c22 3a20 7261 6e64  e_bylevel": rand
+00008140: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
 00008150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008160: 2020 2020 295b 305d 0d0a 2020 2020 2020      )[0]..      
-00008170: 2020 2020 2020 2020 2020 6966 2072 616e            if ran
-00008180: 646f 6d2e 6368 6f69 6365 7328 5b54 7275  dom.choices([Tru
-00008190: 652c 2046 616c 7365 5d2c 205b 302e 322c  e, False], [0.2,
-000081a0: 2030 2e38 5d29 5b30 5d3a 0d0a 2020 2020   0.8])[0]:..    
-000081b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000081c0: 7061 7261 6d5f 6469 6374 5b22 6d6f 6465  param_dict["mode
-000081d0: 6c5f 7061 7261 6d73 225d 5b22 6772 6f77  l_params"]["grow
-000081e0: 5f70 6f6c 6963 7922 5d20 3d20 226c 6f73  _policy"] = "los
-000081f0: 7367 7569 6465 220d 0a20 2020 2020 2020  sguide"..       
-00008200: 2020 2020 2020 2020 2069 6620 6f62 6a65           if obje
-00008210: 6374 6976 6520 3d3d 2022 7265 673a 7175  ctive == "reg:qu
-00008220: 616e 7469 6c65 6572 726f 7222 3a0d 0a20  antileerror":.. 
-00008230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008240: 2020 2070 6172 616d 5f64 6963 745b 276d     param_dict['m
-00008250: 6f64 656c 5f70 6172 616d 7327 5d5b 2271  odel_params']["q
-00008260: 7561 6e74 696c 655f 616c 7068 6122 5d20  uantile_alpha"] 
-00008270: 3d20 302e 350d 0a20 2020 2020 2020 2020  = 0.5..         
-00008280: 2020 2020 2020 2020 2020 2070 6172 616d             param
-00008290: 5f64 6963 745b 276d 6f64 656c 5f70 6172  _dict['model_par
-000082a0: 616d 7327 5d5b 2274 7265 655f 6d65 7468  ams']["tree_meth
-000082b0: 6f64 225d 203d 2022 6869 7374 220d 0a20  od"] = "hist".. 
-000082c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000082d0: 6c69 6620 7261 6e64 6f6d 2e63 686f 6963  lif random.choic
-000082e0: 6573 285b 5472 7565 2c20 4661 6c73 655d  es([True, False]
-000082f0: 2c20 5b30 2e32 2c20 302e 385d 295b 305d  , [0.2, 0.8])[0]
-00008300: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00008310: 2020 2020 2020 2023 206e 6577 2069 6e20         # new in 
-00008320: 322e 3020 7665 6374 6f72 2074 7265 6573  2.0 vector trees
-00008330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008340: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-00008350: 5b27 6d6f 6465 6c5f 7061 7261 6d73 275d  ['model_params']
-00008360: 5b22 6d75 6c74 695f 7374 7261 7465 6779  ["multi_strategy
-00008370: 225d 203d 2022 6d75 6c74 695f 6f75 7470  "] = "multi_outp
-00008380: 7574 5f74 7265 6522 0d0a 2020 2020 2020  ut_tree"..      
-00008390: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-000083a0: 7261 6d5f 6469 6374 5b27 6d6f 6465 6c5f  ram_dict['model_
-000083b0: 7061 7261 6d73 275d 5b22 7472 6565 5f6d  params']["tree_m
-000083c0: 6574 686f 6422 5d20 3d20 2268 6973 7422  ethod"] = "hist"
-000083d0: 0d0a 2020 2020 2020 2020 656c 6966 206d  ..        elif m
-000083e0: 6f64 656c 203d 3d20 274d 4c50 273a 0d0a  odel == 'MLP':..
-000083f0: 2020 2020 2020 2020 2020 2020 736f 6c76              solv
-00008400: 6572 203d 206e 702e 7261 6e64 6f6d 2e63  er = np.random.c
-00008410: 686f 6963 6528 0d0a 2020 2020 2020 2020  hoice(..        
-00008420: 2020 2020 2020 2020 5b27 6c62 6667 7327          ['lbfgs'
-00008430: 2c20 2773 6764 272c 2027 6164 616d 275d  , 'sgd', 'adam']
-00008440: 2c20 703d 5b30 2e35 2c20 302e 312c 2030  , p=[0.5, 0.1, 0
-00008450: 2e34 5d2c 2073 697a 653d 310d 0a20 2020  .4], size=1..   
-00008460: 2020 2020 2020 2020 2029 2e69 7465 6d28           ).item(
-00008470: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00008480: 6620 736f 6c76 6572 2069 6e20 5b27 7367  f solver in ['sg
-00008490: 6427 2c20 2761 6461 6d27 5d3a 0d0a 2020  d', 'adam']:..  
-000084a0: 2020 2020 2020 2020 2020 2020 2020 6561                ea
-000084b0: 726c 795f 7374 6f70 7069 6e67 203d 206e  rly_stopping = n
-000084c0: 702e 7261 6e64 6f6d 2e63 686f 6963 6528  p.random.choice(
-000084d0: 5b54 7275 652c 2046 616c 7365 5d2c 2073  [True, False], s
-000084e0: 697a 653d 3129 2e69 7465 6d28 290d 0a20  ize=1).item().. 
-000084f0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00008500: 6561 726e 696e 675f 7261 7465 5f69 6e69  earning_rate_ini
-00008510: 7420 3d20 6e70 2e72 616e 646f 6d2e 6368  t = np.random.ch
-00008520: 6f69 6365 280d 0a20 2020 2020 2020 2020  oice(..         
-00008530: 2020 2020 2020 2020 2020 205b 302e 3031             [0.01
-00008540: 2c20 302e 3030 312c 2030 2e30 3030 312c  , 0.001, 0.0001,
-00008550: 2030 2e30 3030 3031 5d2c 2070 3d5b 302e   0.00001], p=[0.
-00008560: 312c 2030 2e37 2c20 302e 312c 2030 2e31  1, 0.7, 0.1, 0.1
-00008570: 5d2c 2073 697a 653d 310d 0a20 2020 2020  ], size=1..     
-00008580: 2020 2020 2020 2020 2020 2029 2e69 7465             ).ite
-00008590: 6d28 290d 0a20 2020 2020 2020 2020 2020  m()..           
-000085a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000085b0: 2020 2020 2020 2020 6561 726c 795f 7374          early_st
-000085c0: 6f70 7069 6e67 203d 2046 616c 7365 0d0a  opping = False..
-000085d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000085e0: 6c65 6172 6e69 6e67 5f72 6174 655f 696e  learning_rate_in
-000085f0: 6974 203d 2030 2e30 3031 0d0a 2020 2020  it = 0.001..    
-00008600: 2020 2020 2020 2020 7061 7261 6d5f 6469          param_di
-00008610: 6374 203d 207b 0d0a 2020 2020 2020 2020  ct = {..        
-00008620: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
-00008630: 2027 4d4c 5027 2c0d 0a20 2020 2020 2020   'MLP',..       
-00008640: 2020 2020 2020 2020 2022 6d6f 6465 6c5f           "model_
-00008650: 7061 7261 6d73 223a 207b 0d0a 2020 2020  params": {..    
-00008660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008670: 2268 6964 6465 6e5f 6c61 7965 725f 7369  "hidden_layer_si
-00008680: 7a65 7322 3a20 7261 6e64 6f6d 2e63 686f  zes": random.cho
-00008690: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-000086a0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-000086b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000086c0: 2020 2020 2020 2020 2020 2020 2020 2831                (1
-000086d0: 3030 2c29 2c0d 0a20 2020 2020 2020 2020  00,),..         
-000086e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000086f0: 2020 2028 3235 2c20 3135 2c20 3235 292c     (25, 15, 25),
-00008700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008710: 2020 2020 2020 2020 2020 2020 2020 2837                (7
-00008720: 322c 2033 362c 2037 3229 2c0d 0a20 2020  2, 36, 72),..   
-00008730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008740: 2020 2020 2020 2020 2028 3235 2c20 3530           (25, 50
-00008750: 2c20 3235 292c 0d0a 2020 2020 2020 2020  , 25),..        
-00008760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008770: 2020 2020 2833 322c 2036 342c 2033 3229      (32, 64, 32)
-00008780: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00008790: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-000087a0: 3332 2c20 3332 2c20 3332 292c 0d0a 2020  32, 32, 32),..  
-000087b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087c0: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
-000087d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087e0: 2020 5b30 2e31 2c20 302e 332c 2030 2e33    [0.1, 0.3, 0.3
-000087f0: 2c20 302e 312c 2030 2e31 2c20 302e 315d  , 0.1, 0.1, 0.1]
-00008800: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00008810: 2020 2020 2020 2029 5b30 5d2c 0d0a 2020         )[0],..  
-00008820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008830: 2020 226d 6178 5f69 7465 7222 3a20 6e70    "max_iter": np
-00008840: 2e72 616e 646f 6d2e 6368 6f69 6365 280d  .random.choice(.
-00008850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008860: 2020 2020 2020 2020 205b 3235 302c 2035           [250, 5
-00008870: 3030 2c20 3130 3030 5d2c 2070 3d5b 302e  00, 1000], p=[0.
-00008880: 382c 2030 2e31 2c20 302e 315d 2c20 7369  8, 0.1, 0.1], si
-00008890: 7a65 3d31 0d0a 2020 2020 2020 2020 2020  ze=1..          
-000088a0: 2020 2020 2020 2020 2020 292e 6974 656d            ).item
-000088b0: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
-000088c0: 2020 2020 2020 2020 2022 6163 7469 7661           "activa
-000088d0: 7469 6f6e 223a 206e 702e 7261 6e64 6f6d  tion": np.random
-000088e0: 2e63 686f 6963 6528 0d0a 2020 2020 2020  .choice(..      
-000088f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008900: 2020 5b27 6964 656e 7469 7479 272c 2027    ['identity', '
-00008910: 6c6f 6769 7374 6963 272c 2027 7461 6e68  logistic', 'tanh
-00008920: 272c 2027 7265 6c75 275d 2c0d 0a20 2020  ', 'relu'],..   
-00008930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008940: 2020 2020 2070 3d5b 302e 3035 2c20 302e       p=[0.05, 0.
-00008950: 3035 2c20 302e 362c 2030 2e33 5d2c 0d0a  05, 0.6, 0.3],..
-00008960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008970: 2020 2020 2020 2020 7369 7a65 3d31 2c0d          size=1,.
-00008980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008990: 2020 2020 2029 2e69 7465 6d28 292c 0d0a       ).item(),..
-000089a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089b0: 2020 2020 2273 6f6c 7665 7222 3a20 736f      "solver": so
-000089c0: 6c76 6572 2c0d 0a20 2020 2020 2020 2020  lver,..         
-000089d0: 2020 2020 2020 2020 2020 2022 6561 726c             "earl
-000089e0: 795f 7374 6f70 7069 6e67 223a 2065 6172  y_stopping": ear
-000089f0: 6c79 5f73 746f 7070 696e 672c 0d0a 2020  ly_stopping,..  
-00008a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a10: 2020 226c 6561 726e 696e 675f 7261 7465    "learning_rate
-00008a20: 5f69 6e69 7422 3a20 6c65 6172 6e69 6e67  _init": learning
-00008a30: 5f72 6174 655f 696e 6974 2c0d 0a20 2020  _rate_init,..   
-00008a40: 2020 2020 2020 2020 2020 2020 207d 2c0d               },.
-00008a50: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
-00008a60: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
-00008a70: 656c 203d 3d20 274b 4e4e 273a 0d0a 2020  el == 'KNN':..  
-00008a80: 2020 2020 2020 2020 2020 7061 7261 6d5f            param_
-00008a90: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
-00008aa0: 2020 2020 2020 2020 2020 226d 6f64 656c            "model
-00008ab0: 223a 2027 4b4e 4e27 2c0d 0a20 2020 2020  ": 'KNN',..     
-00008ac0: 2020 2020 2020 2020 2020 2022 6d6f 6465             "mode
-00008ad0: 6c5f 7061 7261 6d73 223a 207b 0d0a 2020  l_params": {..  
-00008ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008af0: 2020 226e 5f6e 6569 6768 626f 7273 223a    "n_neighbors":
-00008b00: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00008b10: 5b33 2c20 352c 2031 302c 2031 345d 2c20  [3, 5, 10, 14], 
-00008b20: 5b30 2e32 2c20 302e 372c 2030 2e31 2c20  [0.2, 0.7, 0.1, 
-00008b30: 302e 315d 295b 0d0a 2020 2020 2020 2020  0.1])[..        
+00008160: 2020 2020 2020 2020 205b 312c 2030 2e39           [1, 0.9
+00008170: 2c20 302e 372c 2030 2e35 5d2c 205b 302e  , 0.7, 0.5], [0.
+00008180: 342c 2030 2e31 2c20 302e 312c 2030 2e31  4, 0.1, 0.1, 0.1
+00008190: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+000081a0: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+000081b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000081c0: 2020 2020 2020 2020 2020 2272 6567 5f61            "reg_a
+000081d0: 6c70 6861 223a 2072 616e 646f 6d2e 6368  lpha": random.ch
+000081e0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+000081f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008200: 2020 2020 5b30 2c20 302e 3030 312c 2030      [0, 0.001, 0
+00008210: 2e30 352c 2031 3030 5d2c 205b 302e 392c  .05, 100], [0.9,
+00008220: 2030 2e31 2c20 302e 3035 2c20 302e 3035   0.1, 0.05, 0.05
+00008230: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+00008240: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+00008250: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008260: 2020 2020 2020 2020 2020 2272 6567 5f6c            "reg_l
+00008270: 616d 6264 6122 3a20 7261 6e64 6f6d 2e63  ambda": random.c
+00008280: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+00008290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082a0: 2020 2020 205b 312c 2030 2e30 332c 2030       [1, 0.03, 0
+000082b0: 2e31 312c 2030 2e32 2c20 355d 2c20 5b30  .11, 0.2, 5], [0
+000082c0: 2e39 2c20 302e 3035 2c20 302e 3035 2c20  .9, 0.05, 0.05, 
+000082d0: 302e 3035 2c20 302e 3035 5d0d 0a20 2020  0.05, 0.05]..   
+000082e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000082f0: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
+00008300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008310: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
+00008320: 2020 2020 7d0d 0a20 2020 2020 2020 2020      }..         
+00008330: 2020 2020 2020 2069 6620 7261 6e64 6f6d         if random
+00008340: 2e63 686f 6963 6573 285b 5472 7565 2c20  .choices([True, 
+00008350: 4661 6c73 655d 2c20 5b30 2e34 2c20 302e  False], [0.4, 0.
+00008360: 365d 295b 305d 3a0d 0a20 2020 2020 2020  6])[0]:..       
+00008370: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00008380: 616d 5f64 6963 745b 226d 6f64 656c 5f70  am_dict["model_p
+00008390: 6172 616d 7322 5d5b 226d 6178 5f64 6570  arams"]["max_dep
+000083a0: 7468 225d 203d 2072 616e 646f 6d2e 6368  th"] = random.ch
+000083b0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+000083c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000083d0: 5b33 2c20 362c 2039 5d2c 205b 302e 312c  [3, 6, 9], [0.1,
+000083e0: 2030 2e38 2c20 302e 315d 0d0a 2020 2020   0.8, 0.1]..    
+000083f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008400: 295b 305d 0d0a 2020 2020 2020 2020 2020  )[0]..          
+00008410: 2020 2020 2020 6966 2072 616e 646f 6d2e        if random.
+00008420: 6368 6f69 6365 7328 5b54 7275 652c 2046  choices([True, F
+00008430: 616c 7365 5d2c 205b 302e 352c 2030 2e35  alse], [0.5, 0.5
+00008440: 5d29 5b30 5d3a 0d0a 2020 2020 2020 2020  ])[0]:..        
+00008450: 2020 2020 2020 2020 2020 2020 7061 7261              para
+00008460: 6d5f 6469 6374 5b22 6d6f 6465 6c5f 7061  m_dict["model_pa
+00008470: 7261 6d73 225d 5b22 6e5f 6573 7469 6d61  rams"]["n_estima
+00008480: 746f 7273 225d 203d 2072 616e 646f 6d2e  tors"] = random.
+00008490: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+000084a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084b0: 2020 5b34 2c20 372c 2031 302c 2032 302c    [4, 7, 10, 20,
+000084c0: 2031 3030 2c20 3130 3030 5d2c 0d0a 2020   100, 1000],..  
+000084d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000084e0: 2020 2020 2020 5b30 2e32 2c20 302e 322c        [0.2, 0.2,
+000084f0: 2030 2e32 2c20 302e 322c 2030 2e35 2c20   0.2, 0.2, 0.5, 
+00008500: 302e 325d 2c0d 0a20 2020 2020 2020 2020  0.2],..         
+00008510: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
+00008520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008530: 2069 6620 7261 6e64 6f6d 2e63 686f 6963   if random.choic
+00008540: 6573 285b 5472 7565 2c20 4661 6c73 655d  es([True, False]
+00008550: 2c20 5b30 2e32 2c20 302e 385d 295b 305d  , [0.2, 0.8])[0]
+00008560: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00008570: 2020 2020 2020 2070 6172 616d 5f64 6963         param_dic
+00008580: 745b 226d 6f64 656c 5f70 6172 616d 7322  t["model_params"
+00008590: 5d5b 2267 726f 775f 706f 6c69 6379 225d  ]["grow_policy"]
+000085a0: 203d 2022 6c6f 7373 6775 6964 6522 0d0a   = "lossguide"..
+000085b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000085c0: 6966 206f 626a 6563 7469 7665 203d 3d20  if objective == 
+000085d0: 2272 6567 3a71 7561 6e74 696c 6565 7272  "reg:quantileerr
+000085e0: 6f72 223a 0d0a 2020 2020 2020 2020 2020  or":..          
+000085f0: 2020 2020 2020 2020 2020 7061 7261 6d5f            param_
+00008600: 6469 6374 5b27 6d6f 6465 6c5f 7061 7261  dict['model_para
+00008610: 6d73 275d 5b22 7175 616e 7469 6c65 5f61  ms']["quantile_a
+00008620: 6c70 6861 225d 203d 2030 2e35 0d0a 2020  lpha"] = 0.5..  
+00008630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008640: 2020 7061 7261 6d5f 6469 6374 5b27 6d6f    param_dict['mo
+00008650: 6465 6c5f 7061 7261 6d73 275d 5b22 7472  del_params']["tr
+00008660: 6565 5f6d 6574 686f 6422 5d20 3d20 2268  ee_method"] = "h
+00008670: 6973 7422 0d0a 2020 2020 2020 2020 2020  ist"..          
+00008680: 2020 2020 2020 656c 6966 2072 616e 646f        elif rando
+00008690: 6d2e 6368 6f69 6365 7328 5b54 7275 652c  m.choices([True,
+000086a0: 2046 616c 7365 5d2c 205b 302e 322c 2030   False], [0.2, 0
+000086b0: 2e38 5d29 5b30 5d3a 0d0a 2020 2020 2020  .8])[0]:..      
+000086c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000086d0: 6e65 7720 696e 2032 2e30 2076 6563 746f  new in 2.0 vecto
+000086e0: 7220 7472 6565 730d 0a20 2020 2020 2020  r trees..       
+000086f0: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00008700: 616d 5f64 6963 745b 276d 6f64 656c 5f70  am_dict['model_p
+00008710: 6172 616d 7327 5d5b 226d 756c 7469 5f73  arams']["multi_s
+00008720: 7472 6174 6567 7922 5d20 3d20 226d 756c  trategy"] = "mul
+00008730: 7469 5f6f 7574 7075 745f 7472 6565 220d  ti_output_tree".
+00008740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008750: 2020 2020 2070 6172 616d 5f64 6963 745b       param_dict[
+00008760: 276d 6f64 656c 5f70 6172 616d 7327 5d5b  'model_params'][
+00008770: 2274 7265 655f 6d65 7468 6f64 225d 203d  "tree_method"] =
+00008780: 2022 6869 7374 220d 0a20 2020 2020 2020   "hist"..       
+00008790: 2065 6c69 6620 6d6f 6465 6c20 3d3d 2027   elif model == '
+000087a0: 4d4c 5027 3a0d 0a20 2020 2020 2020 2020  MLP':..         
+000087b0: 2020 2073 6f6c 7665 7220 3d20 6e70 2e72     solver = np.r
+000087c0: 616e 646f 6d2e 6368 6f69 6365 280d 0a20  andom.choice(.. 
+000087d0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+000087e0: 276c 6266 6773 272c 2027 7367 6427 2c20  'lbfgs', 'sgd', 
+000087f0: 2761 6461 6d27 5d2c 2070 3d5b 302e 352c  'adam'], p=[0.5,
+00008800: 2030 2e31 2c20 302e 345d 2c20 7369 7a65   0.1, 0.4], size
+00008810: 3d31 0d0a 2020 2020 2020 2020 2020 2020  =1..            
+00008820: 292e 6974 656d 2829 0d0a 2020 2020 2020  ).item()..      
+00008830: 2020 2020 2020 6966 2073 6f6c 7665 7220        if solver 
+00008840: 696e 205b 2773 6764 272c 2027 6164 616d  in ['sgd', 'adam
+00008850: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+00008860: 2020 2020 2065 6172 6c79 5f73 746f 7070       early_stopp
+00008870: 696e 6720 3d20 6e70 2e72 616e 646f 6d2e  ing = np.random.
+00008880: 6368 6f69 6365 285b 5472 7565 2c20 4661  choice([True, Fa
+00008890: 6c73 655d 2c20 7369 7a65 3d31 292e 6974  lse], size=1).it
+000088a0: 656d 2829 0d0a 2020 2020 2020 2020 2020  em()..          
+000088b0: 2020 2020 2020 6c65 6172 6e69 6e67 5f72        learning_r
+000088c0: 6174 655f 696e 6974 203d 206e 702e 7261  ate_init = np.ra
+000088d0: 6e64 6f6d 2e63 686f 6963 6528 0d0a 2020  ndom.choice(..  
+000088e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088f0: 2020 5b30 2e30 312c 2030 2e30 3031 2c20    [0.01, 0.001, 
+00008900: 302e 3030 3031 2c20 302e 3030 3030 315d  0.0001, 0.00001]
+00008910: 2c20 703d 5b30 2e31 2c20 302e 372c 2030  , p=[0.1, 0.7, 0
+00008920: 2e31 2c20 302e 315d 2c20 7369 7a65 3d31  .1, 0.1], size=1
+00008930: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008940: 2020 292e 6974 656d 2829 0d0a 2020 2020    ).item()..    
+00008950: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00008960: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00008970: 6172 6c79 5f73 746f 7070 696e 6720 3d20  arly_stopping = 
+00008980: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
+00008990: 2020 2020 2020 206c 6561 726e 696e 675f         learning_
+000089a0: 7261 7465 5f69 6e69 7420 3d20 302e 3030  rate_init = 0.00
+000089b0: 310d 0a20 2020 2020 2020 2020 2020 2070  1..            p
+000089c0: 6172 616d 5f64 6963 7420 3d20 7b0d 0a20  aram_dict = {.. 
+000089d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000089e0: 6d6f 6465 6c22 3a20 274d 4c50 272c 0d0a  model": 'MLP',..
+000089f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a00: 226d 6f64 656c 5f70 6172 616d 7322 3a20  "model_params": 
+00008a10: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+00008a20: 2020 2020 2020 2022 6869 6464 656e 5f6c         "hidden_l
+00008a30: 6179 6572 5f73 697a 6573 223a 2072 616e  ayer_sizes": ran
+00008a40: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+00008a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a60: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
+00008a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a80: 2020 2020 2028 3130 302c 292c 0d0a 2020       (100,),..  
+00008a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008aa0: 2020 2020 2020 2020 2020 2832 352c 2031            (25, 1
+00008ab0: 352c 2032 3529 2c0d 0a20 2020 2020 2020  5, 25),..       
+00008ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ad0: 2020 2020 2028 3732 2c20 3336 2c20 3732       (72, 36, 72
+00008ae0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00008af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b00: 2832 352c 2035 302c 2032 3529 2c0d 0a20  (25, 50, 25),.. 
+00008b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b20: 2020 2020 2020 2020 2020 2028 3332 2c20             (32, 
+00008b30: 3634 2c20 3332 292c 0d0a 2020 2020 2020  64, 32),..      
 00008b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b50: 300d 0a20 2020 2020 2020 2020 2020 2020  0..             
-00008b60: 2020 2020 2020 205d 2c0d 0a20 2020 2020         ],..     
-00008b70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00008b80: 7765 6967 6874 7322 3a20 7261 6e64 6f6d  weights": random
-00008b90: 2e63 686f 6963 6573 285b 2775 6e69 666f  .choices(['unifo
-00008ba0: 726d 272c 2027 6469 7374 616e 6365 275d  rm', 'distance']
-00008bb0: 2c20 5b30 2e37 2c20 302e 335d 295b 305d  , [0.7, 0.3])[0]
-00008bc0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00008bd0: 2020 2020 2020 2027 7027 3a20 7261 6e64         'p': rand
-00008be0: 6f6d 2e63 686f 6963 6573 285b 322c 2031  om.choices([2, 1
-00008bf0: 2c20 312e 355d 2c20 5b30 2e37 2c20 302e  , 1.5], [0.7, 0.
-00008c00: 312c 2030 2e31 5d29 5b30 5d2c 0d0a 2020  1, 0.1])[0],..  
+00008b50: 2020 2020 2020 2833 322c 2033 322c 2033        (32, 32, 3
+00008b60: 3229 2c0d 0a20 2020 2020 2020 2020 2020  2),..           
+00008b70: 2020 2020 2020 2020 2020 2020 205d 2c0d               ],.
+00008b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008b90: 2020 2020 2020 2020 205b 302e 312c 2030           [0.1, 0
+00008ba0: 2e33 2c20 302e 332c 2030 2e31 2c20 302e  .3, 0.3, 0.1, 0.
+00008bb0: 312c 2030 2e31 5d2c 0d0a 2020 2020 2020  1, 0.1],..      
+00008bc0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
+00008bd0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+00008be0: 2020 2020 2020 2020 2022 6d61 785f 6974           "max_it
+00008bf0: 6572 223a 206e 702e 7261 6e64 6f6d 2e63  er": np.random.c
+00008c00: 686f 6963 6528 0d0a 2020 2020 2020 2020  hoice(..        
 00008c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c20: 2020 276c 6561 665f 7369 7a65 273a 2072    'leaf_size': r
-00008c30: 616e 646f 6d2e 6368 6f69 6365 7328 5b33  andom.choices([3
-00008c40: 302c 2031 302c 2035 305d 2c20 5b30 2e38  0, 10, 50], [0.8
-00008c50: 2c20 302e 312c 2030 2e31 5d29 5b30 5d2c  , 0.1, 0.1])[0],
-00008c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008c70: 2020 7d2c 0d0a 2020 2020 2020 2020 2020    },..          
-00008c80: 2020 7d0d 0a20 2020 2020 2020 2065 6c69    }..        eli
-00008c90: 6620 6d6f 6465 6c20 3d3d 2027 5261 6e64  f model == 'Rand
-00008ca0: 6f6d 466f 7265 7374 273a 0d0a 2020 2020  omForest':..    
-00008cb0: 2020 2020 2020 2020 6966 206d 6574 686f          if metho
-00008cc0: 6420 3d3d 2022 6661 7374 223a 0d0a 2020  d == "fast":..  
-00008cd0: 2020 2020 2020 2020 2020 2020 2020 6e5f                n_
-00008ce0: 6573 7469 6d61 746f 7273 203d 2072 616e  estimators = ran
-00008cf0: 646f 6d2e 6368 6f69 6365 7328 5b34 2c20  dom.choices([4, 
-00008d00: 3330 302c 2031 3030 5d2c 205b 302e 322c  300, 100], [0.2,
-00008d10: 2030 2e34 2c20 302e 345d 295b 305d 0d0a   0.4, 0.4])[0]..
-00008d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d30: 6d69 6e5f 7361 6d70 6c65 735f 6c65 6166  min_samples_leaf
-00008d40: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
-00008d50: 7328 5b32 2c20 342c 2031 5d2c 205b 302e  s([2, 4, 1], [0.
-00008d60: 322c 2030 2e32 2c20 302e 325d 295b 305d  2, 0.2, 0.2])[0]
-00008d70: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
-00008d80: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00008d90: 2020 2020 206e 5f65 7374 696d 6174 6f72       n_estimator
-00008da0: 7320 3d20 7261 6e64 6f6d 2e63 686f 6963  s = random.choic
-00008db0: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
-00008dc0: 2020 2020 2020 2020 205b 342c 2033 3030           [4, 300
-00008dd0: 2c20 3130 302c 2031 3030 302c 2035 3030  , 100, 1000, 500
-00008de0: 305d 2c20 5b30 2e31 2c20 302e 342c 2030  0], [0.1, 0.4, 0
-00008df0: 2e34 2c20 302e 322c 2030 2e30 315d 0d0a  .4, 0.2, 0.01]..
-00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 295b 305d 0d0a 2020 2020 2020 2020 2020  )[0]..          
-00008e20: 2020 2020 2020 6d69 6e5f 7361 6d70 6c65        min_sample
-00008e30: 735f 6c65 6166 203d 2072 616e 646f 6d2e  s_leaf = random.
-00008e40: 6368 6f69 6365 7328 5b32 2c20 342c 2031  choices([2, 4, 1
-00008e50: 5d2c 205b 302e 322c 2030 2e32 2c20 302e  ], [0.2, 0.2, 0.
-00008e60: 385d 295b 305d 0d0a 2020 2020 2020 2020  8])[0]..        
-00008e70: 2020 2020 7061 7261 6d5f 6469 6374 203d      param_dict =
-00008e80: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-00008e90: 2020 2020 226d 6f64 656c 223a 2027 5261      "model": 'Ra
-00008ea0: 6e64 6f6d 466f 7265 7374 272c 0d0a 2020  ndomForest',..  
-00008eb0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00008ec0: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
-00008ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008ee0: 2020 2020 2022 6e5f 6573 7469 6d61 746f       "n_estimato
-00008ef0: 7273 223a 206e 5f65 7374 696d 6174 6f72  rs": n_estimator
-00008f00: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00008f10: 2020 2020 2020 2020 226d 696e 5f73 616d          "min_sam
-00008f20: 706c 6573 5f6c 6561 6622 3a20 6d69 6e5f  ples_leaf": min_
-00008f30: 7361 6d70 6c65 735f 6c65 6166 2c0d 0a20  samples_leaf,.. 
-00008f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f50: 2020 2022 626f 6f74 7374 7261 7022 3a20     "bootstrap": 
-00008f60: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
-00008f70: 5472 7565 2c20 4661 6c73 655d 2c20 5b30  True, False], [0
-00008f80: 2e39 2c20 302e 315d 295b 305d 2c0d 0a20  .9, 0.1])[0],.. 
-00008f90: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00008fa0: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-00008fb0: 0d0a 2020 2020 2020 2020 656c 6966 206d  ..        elif m
-00008fc0: 6f64 656c 203d 3d20 2745 7874 7261 5472  odel == 'ExtraTr
-00008fd0: 6565 7327 3a0d 0a20 2020 2020 2020 2020  ees':..         
-00008fe0: 2020 206d 6178 5f64 6570 7468 5f63 686f     max_depth_cho
-00008ff0: 6963 6520 3d20 7261 6e64 6f6d 2e63 686f  ice = random.cho
-00009000: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-00009010: 2020 2020 2020 205b 4e6f 6e65 2c20 352c         [None, 5,
-00009020: 2031 302c 2032 302c 2033 305d 2c20 5b30   10, 20, 30], [0
-00009030: 2e34 2c20 302e 312c 2030 2e33 2c20 302e  .4, 0.1, 0.3, 0.
-00009040: 342c 2030 2e31 5d0d 0a20 2020 2020 2020  4, 0.1]..       
-00009050: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
-00009060: 2020 2020 2020 2065 7374 696d 6174 6f72         estimator
-00009070: 735f 6368 6f69 6365 203d 2072 616e 646f  s_choice = rando
-00009080: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
-00009090: 2020 2020 2020 2020 2020 2020 5b34 2c20              [4, 
-000090a0: 3530 2c20 3130 302c 2035 3030 5d2c 205b  50, 100, 500], [
-000090b0: 302e 3035 2c20 302e 3035 2c20 302e 392c  0.05, 0.05, 0.9,
-000090c0: 2030 2e30 355d 0d0a 2020 2020 2020 2020   0.05]..        
-000090d0: 2020 2020 295b 305d 0d0a 2020 2020 2020      )[0]..      
-000090e0: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-000090f0: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00009100: 2020 2020 2020 226d 6f64 656c 223a 2027        "model": '
-00009110: 4578 7472 6154 7265 6573 272c 0d0a 2020  ExtraTrees',..  
-00009120: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00009130: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
-00009140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009150: 2020 2020 2022 6e5f 6573 7469 6d61 746f       "n_estimato
-00009160: 7273 223a 2065 7374 696d 6174 6f72 735f  rs": estimators_
-00009170: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00009180: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
-00009190: 6e5f 7361 6d70 6c65 735f 6c65 6166 223a  n_samples_leaf":
-000091a0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-000091b0: 5b32 2c20 342c 2031 5d2c 205b 302e 312c  [2, 4, 1], [0.1,
-000091c0: 2030 2e31 2c20 302e 385d 295b 305d 2c0d   0.1, 0.8])[0],.
-000091d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000091e0: 2020 2020 2022 6d69 6e5f 7361 6d70 6c65       "min_sample
-000091f0: 735f 7370 6c69 7422 3a20 7261 6e64 6f6d  s_split": random
-00009200: 2e63 686f 6963 6573 285b 322c 2034 2c20  .choices([2, 4, 
-00009210: 312e 305d 2c20 5b30 2e38 2c20 302e 312c  1.0], [0.8, 0.1,
-00009220: 2030 2e31 5d29 5b0d 0a20 2020 2020 2020   0.1])[..       
-00009230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009240: 2030 0d0a 2020 2020 2020 2020 2020 2020   0..            
-00009250: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
-00009260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009270: 226d 6178 5f64 6570 7468 223a 206d 6178  "max_depth": max
-00009280: 5f64 6570 7468 5f63 686f 6963 652c 0d0a  _depth_choice,..
-00009290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092a0: 2020 2020 2263 7269 7465 7269 6f6e 223a      "criterion":
-000092b0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-000092c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000092d0: 2020 2020 2020 2020 2020 5b22 7371 7561            ["squa
-000092e0: 7265 645f 6572 726f 7222 2c20 2261 6273  red_error", "abs
-000092f0: 6f6c 7574 655f 6572 726f 7222 2c20 2266  olute_error", "f
-00009300: 7269 6564 6d61 6e5f 6d73 6522 2c20 2270  riedman_mse", "p
-00009310: 6f69 7373 6f6e 225d 2c0d 0a20 2020 2020  oisson"],..     
-00009320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009330: 2020 205b 302e 3235 2c20 302e 302c 2030     [0.25, 0.0, 0
-00009340: 2e32 352c 2030 2e31 5d2c 2020 2320 6162  .25, 0.1],  # ab
-00009350: 7320 6572 726f 7220 7665 7279 2073 6c6f  s error very slo
-00009360: 770d 0a20 2020 2020 2020 2020 2020 2020  w..             
-00009370: 2020 2020 2020 2029 5b30 5d2c 0d0a 2020         )[0],..  
-00009380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009390: 2020 226d 6178 5f66 6561 7475 7265 7322    "max_features"
-000093a0: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-000093b0: 285b 312c 2030 2e36 2c20 302e 335d 2c20  ([1, 0.6, 0.3], 
-000093c0: 5b30 2e38 2c20 302e 312c 2030 2e31 5d29  [0.8, 0.1, 0.1])
-000093d0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-000093e0: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
-000093f0: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-00009400: 2065 6c69 6620 6d6f 6465 6c20 3d3d 2027   elif model == '
-00009410: 4b65 7261 7352 4e4e 273a 0d0a 2020 2020  KerasRNN':..    
-00009420: 2020 2020 2020 2020 696e 6974 5f6c 6973          init_lis
-00009430: 7420 3d20 5b0d 0a20 2020 2020 2020 2020  t = [..         
-00009440: 2020 2020 2020 2027 676c 6f72 6f74 5f75         'glorot_u
-00009450: 6e69 666f 726d 272c 0d0a 2020 2020 2020  niform',..      
-00009460: 2020 2020 2020 2020 2020 276c 6563 756e            'lecun
-00009470: 5f75 6e69 666f 726d 272c 0d0a 2020 2020  _uniform',..    
-00009480: 2020 2020 2020 2020 2020 2020 2767 6c6f              'glo
-00009490: 726f 745f 6e6f 726d 616c 272c 0d0a 2020  rot_normal',..  
-000094a0: 2020 2020 2020 2020 2020 2020 2020 2752                'R
-000094b0: 616e 646f 6d55 6e69 666f 726d 272c 0d0a  andomUniform',..
-000094c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000094d0: 2768 655f 6e6f 726d 616c 272c 0d0a 2020  'he_normal',..  
-000094e0: 2020 2020 2020 2020 2020 2020 2020 277a                'z
-000094f0: 6572 6f73 272c 0d0a 2020 2020 2020 2020  eros',..        
-00009500: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
-00009510: 2020 2070 6172 616d 5f64 6963 7420 3d20     param_dict = 
-00009520: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
-00009530: 2020 2022 6d6f 6465 6c22 3a20 274b 6572     "model": 'Ker
-00009540: 6173 524e 4e27 2c0d 0a20 2020 2020 2020  asRNN',..       
-00009550: 2020 2020 2020 2020 2022 6d6f 6465 6c5f           "model_
-00009560: 7061 7261 6d73 223a 207b 0d0a 2020 2020  params": {..    
-00009570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009580: 226b 6572 6e65 6c5f 696e 6974 6961 6c69  "kernel_initiali
-00009590: 7a65 7222 3a20 7261 6e64 6f6d 2e63 686f  zer": random.cho
-000095a0: 6963 6573 2869 6e69 745f 6c69 7374 295b  ices(init_list)[
-000095b0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-000095c0: 2020 2020 2020 2020 2022 6570 6f63 6873           "epochs
-000095d0: 223a 2072 616e 646f 6d2e 6368 6f69 6365  ": random.choice
-000095e0: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-000095f0: 2020 2020 2020 2020 2020 2020 5b35 302c              [50,
-00009600: 2031 3030 2c20 3230 302c 2035 3030 2c20   100, 200, 500, 
-00009610: 3735 305d 2c20 5b30 2e37 352c 2030 2e32  750], [0.75, 0.2
-00009620: 2c20 302e 3035 2c20 302e 3031 2c20 302e  , 0.05, 0.01, 0.
-00009630: 3030 315d 0d0a 2020 2020 2020 2020 2020  001]..          
-00009640: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
-00009650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009660: 2020 2020 2022 6261 7463 685f 7369 7a65       "batch_size
-00009670: 223a 2072 616e 646f 6d2e 6368 6f69 6365  ": random.choice
-00009680: 7328 5b38 2c20 3136 2c20 3332 2c20 3732  s([8, 16, 32, 72
-00009690: 5d2c 205b 302e 322c 2030 2e32 2c20 302e  ], [0.2, 0.2, 0.
-000096a0: 352c 2030 2e31 5d29 5b0d 0a20 2020 2020  5, 0.1])[..     
-000096b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096c0: 2020 2030 0d0a 2020 2020 2020 2020 2020     0..          
-000096d0: 2020 2020 2020 2020 2020 5d2c 0d0a 2020            ],..  
-000096e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000096f0: 2020 226f 7074 696d 697a 6572 223a 2072    "optimizer": r
-00009700: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-00009710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009720: 2020 2020 2020 2020 5b27 6164 616d 272c          ['adam',
-00009730: 2027 726d 7370 726f 7027 2c20 2761 6461   'rmsprop', 'ada
-00009740: 6772 6164 275d 2c20 5b30 2e34 2c20 302e  grad'], [0.4, 0.
-00009750: 352c 2030 2e31 5d0d 0a20 2020 2020 2020  5, 0.1]..       
-00009760: 2020 2020 2020 2020 2020 2020 2029 5b30               )[0
-00009770: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-00009780: 2020 2020 2020 2020 226c 6f73 7322 3a20          "loss": 
-00009790: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-000097a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000097b0: 2020 2020 2020 2020 205b 276d 6165 272c           ['mae',
-000097c0: 2027 4875 6265 7227 2c20 2770 6f69 7373   'Huber', 'poiss
-000097d0: 6f6e 272c 2027 6d73 6527 2c20 276d 6170  on', 'mse', 'map
-000097e0: 6527 5d2c 0d0a 2020 2020 2020 2020 2020  e'],..          
-000097f0: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
-00009800: 2e32 2c20 302e 332c 2030 2e31 2c20 302e  .2, 0.3, 0.1, 0.
-00009810: 322c 2030 2e32 5d2c 0d0a 2020 2020 2020  2, 0.2],..      
-00009820: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-00009830: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-00009840: 2020 2020 2020 2020 2022 6869 6464 656e           "hidden
-00009850: 5f6c 6179 6572 5f73 697a 6573 223a 2072  _layer_sizes": r
-00009860: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-00009870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009880: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
-00009890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098a0: 2020 2020 2020 2028 3130 302c 292c 0d0a         (100,),..
-000098b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098c0: 2020 2020 2020 2020 2020 2020 2833 322c              (32,
-000098d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000098e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098f0: 2837 322c 2033 362c 2037 3229 2c0d 0a20  (72, 36, 72),.. 
+00008c20: 5b32 3530 2c20 3530 302c 2031 3030 305d  [250, 500, 1000]
+00008c30: 2c20 703d 5b30 2e38 2c20 302e 312c 2030  , p=[0.8, 0.1, 0
+00008c40: 2e31 5d2c 2073 697a 653d 310d 0a20 2020  .1], size=1..   
+00008c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c60: 2029 2e69 7465 6d28 292c 0d0a 2020 2020   ).item(),..    
+00008c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c80: 2261 6374 6976 6174 696f 6e22 3a20 6e70  "activation": np
+00008c90: 2e72 616e 646f 6d2e 6368 6f69 6365 280d  .random.choice(.
+00008ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008cb0: 2020 2020 2020 2020 205b 2769 6465 6e74           ['ident
+00008cc0: 6974 7927 2c20 276c 6f67 6973 7469 6327  ity', 'logistic'
+00008cd0: 2c20 2774 616e 6827 2c20 2772 656c 7527  , 'tanh', 'relu'
+00008ce0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00008cf0: 2020 2020 2020 2020 2020 2020 703d 5b30              p=[0
+00008d00: 2e30 352c 2030 2e30 352c 2030 2e36 2c20  .05, 0.05, 0.6, 
+00008d10: 302e 335d 2c0d 0a20 2020 2020 2020 2020  0.3],..         
+00008d20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00008d30: 697a 653d 312c 0d0a 2020 2020 2020 2020  ize=1,..        
+00008d40: 2020 2020 2020 2020 2020 2020 292e 6974              ).it
+00008d50: 656d 2829 2c0d 0a20 2020 2020 2020 2020  em(),..         
+00008d60: 2020 2020 2020 2020 2020 2022 736f 6c76             "solv
+00008d70: 6572 223a 2073 6f6c 7665 722c 0d0a 2020  er": solver,..  
+00008d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d90: 2020 2265 6172 6c79 5f73 746f 7070 696e    "early_stoppin
+00008da0: 6722 3a20 6561 726c 795f 7374 6f70 7069  g": early_stoppi
+00008db0: 6e67 2c0d 0a20 2020 2020 2020 2020 2020  ng,..           
+00008dc0: 2020 2020 2020 2020 2022 6c65 6172 6e69           "learni
+00008dd0: 6e67 5f72 6174 655f 696e 6974 223a 206c  ng_rate_init": l
+00008de0: 6561 726e 696e 675f 7261 7465 5f69 6e69  earning_rate_ini
+00008df0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+00008e00: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
+00008e10: 2020 2020 7d0d 0a20 2020 2020 2020 2065      }..        e
+00008e20: 6c69 6620 6d6f 6465 6c20 3d3d 2027 4b4e  lif model == 'KN
+00008e30: 4e27 3a0d 0a20 2020 2020 2020 2020 2020  N':..           
+00008e40: 2070 6172 616d 5f64 6963 7420 3d20 7b0d   param_dict = {.
+00008e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008e60: 2022 6d6f 6465 6c22 3a20 274b 4e4e 272c   "model": 'KNN',
+00008e70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008e80: 2020 226d 6f64 656c 5f70 6172 616d 7322    "model_params"
+00008e90: 3a20 7b0d 0a20 2020 2020 2020 2020 2020  : {..           
+00008ea0: 2020 2020 2020 2020 2022 6e5f 6e65 6967           "n_neig
+00008eb0: 6862 6f72 7322 3a20 7261 6e64 6f6d 2e63  hbors": random.c
+00008ec0: 686f 6963 6573 285b 332c 2035 2c20 3130  hoices([3, 5, 10
+00008ed0: 2c20 3134 5d2c 205b 302e 322c 2030 2e37  , 14], [0.2, 0.7
+00008ee0: 2c20 302e 312c 2030 2e31 5d29 5b0d 0a20  , 0.1, 0.1])[.. 
+00008ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008f00: 2020 2020 2020 2030 0d0a 2020 2020 2020         0..      
+00008f10: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+00008f20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008f30: 2020 2020 2020 2277 6569 6768 7473 223a        "weights":
+00008f40: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+00008f50: 5b27 756e 6966 6f72 6d27 2c20 2764 6973  ['uniform', 'dis
+00008f60: 7461 6e63 6527 5d2c 205b 302e 372c 2030  tance'], [0.7, 0
+00008f70: 2e33 5d29 5b30 5d2c 0d0a 2020 2020 2020  .3])[0],..      
+00008f80: 2020 2020 2020 2020 2020 2020 2020 2770                'p
+00008f90: 273a 2072 616e 646f 6d2e 6368 6f69 6365  ': random.choice
+00008fa0: 7328 5b32 2c20 312c 2031 2e35 5d2c 205b  s([2, 1, 1.5], [
+00008fb0: 302e 372c 2030 2e31 2c20 302e 315d 295b  0.7, 0.1, 0.1])[
+00008fc0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+00008fd0: 2020 2020 2020 2020 2027 6c65 6166 5f73           'leaf_s
+00008fe0: 697a 6527 3a20 7261 6e64 6f6d 2e63 686f  ize': random.cho
+00008ff0: 6963 6573 285b 3330 2c20 3130 2c20 3530  ices([30, 10, 50
+00009000: 5d2c 205b 302e 382c 2030 2e31 2c20 302e  ], [0.8, 0.1, 0.
+00009010: 315d 295b 305d 2c0d 0a20 2020 2020 2020  1])[0],..       
+00009020: 2020 2020 2020 2020 207d 2c0d 0a20 2020           },..   
+00009030: 2020 2020 2020 2020 207d 0d0a 2020 2020           }..    
+00009040: 2020 2020 656c 6966 206d 6f64 656c 203d      elif model =
+00009050: 3d20 2752 616e 646f 6d46 6f72 6573 7427  = 'RandomForest'
+00009060: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00009070: 6620 6d65 7468 6f64 203d 3d20 2266 6173  f method == "fas
+00009080: 7422 3a0d 0a20 2020 2020 2020 2020 2020  t":..           
+00009090: 2020 2020 206e 5f65 7374 696d 6174 6f72       n_estimator
+000090a0: 7320 3d20 7261 6e64 6f6d 2e63 686f 6963  s = random.choic
+000090b0: 6573 285b 342c 2033 3030 2c20 3130 305d  es([4, 300, 100]
+000090c0: 2c20 5b30 2e32 2c20 302e 342c 2030 2e34  , [0.2, 0.4, 0.4
+000090d0: 5d29 5b30 5d0d 0a20 2020 2020 2020 2020  ])[0]..         
+000090e0: 2020 2020 2020 206d 696e 5f73 616d 706c         min_sampl
+000090f0: 6573 5f6c 6561 6620 3d20 7261 6e64 6f6d  es_leaf = random
+00009100: 2e63 686f 6963 6573 285b 322c 2034 2c20  .choices([2, 4, 
+00009110: 315d 2c20 5b30 2e32 2c20 302e 322c 2030  1], [0.2, 0.2, 0
+00009120: 2e32 5d29 5b30 5d0d 0a20 2020 2020 2020  .2])[0]..       
+00009130: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00009140: 2020 2020 2020 2020 2020 2020 6e5f 6573              n_es
+00009150: 7469 6d61 746f 7273 203d 2072 616e 646f  timators = rando
+00009160: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00009170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009180: 5b34 2c20 3330 302c 2031 3030 2c20 3130  [4, 300, 100, 10
+00009190: 3030 2c20 3530 3030 5d2c 205b 302e 312c  00, 5000], [0.1,
+000091a0: 2030 2e34 2c20 302e 342c 2030 2e32 2c20   0.4, 0.4, 0.2, 
+000091b0: 302e 3031 5d0d 0a20 2020 2020 2020 2020  0.01]..         
+000091c0: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+000091d0: 2020 2020 2020 2020 2020 2020 206d 696e               min
+000091e0: 5f73 616d 706c 6573 5f6c 6561 6620 3d20  _samples_leaf = 
+000091f0: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
+00009200: 322c 2034 2c20 315d 2c20 5b30 2e32 2c20  2, 4, 1], [0.2, 
+00009210: 302e 322c 2030 2e38 5d29 5b30 5d0d 0a20  0.2, 0.8])[0].. 
+00009220: 2020 2020 2020 2020 2020 2070 6172 616d             param
+00009230: 5f64 6963 7420 3d20 7b0d 0a20 2020 2020  _dict = {..     
+00009240: 2020 2020 2020 2020 2020 2022 6d6f 6465             "mode
+00009250: 6c22 3a20 2752 616e 646f 6d46 6f72 6573  l": 'RandomFores
+00009260: 7427 2c0d 0a20 2020 2020 2020 2020 2020  t',..           
+00009270: 2020 2020 2022 6d6f 6465 6c5f 7061 7261       "model_para
+00009280: 6d73 223a 207b 0d0a 2020 2020 2020 2020  ms": {..        
+00009290: 2020 2020 2020 2020 2020 2020 226e 5f65              "n_e
+000092a0: 7374 696d 6174 6f72 7322 3a20 6e5f 6573  stimators": n_es
+000092b0: 7469 6d61 746f 7273 2c0d 0a20 2020 2020  timators,..     
+000092c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000092d0: 6d69 6e5f 7361 6d70 6c65 735f 6c65 6166  min_samples_leaf
+000092e0: 223a 206d 696e 5f73 616d 706c 6573 5f6c  ": min_samples_l
+000092f0: 6561 662c 0d0a 2020 2020 2020 2020 2020  eaf,..          
+00009300: 2020 2020 2020 2020 2020 2262 6f6f 7473            "boots
+00009310: 7472 6170 223a 2072 616e 646f 6d2e 6368  trap": random.ch
+00009320: 6f69 6365 7328 5b54 7275 652c 2046 616c  oices([True, Fal
+00009330: 7365 5d2c 205b 302e 392c 2030 2e31 5d29  se], [0.9, 0.1])
+00009340: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+00009350: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+00009360: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+00009370: 2065 6c69 6620 6d6f 6465 6c20 3d3d 2027   elif model == '
+00009380: 4578 7472 6154 7265 6573 273a 0d0a 2020  ExtraTrees':..  
+00009390: 2020 2020 2020 2020 2020 6d61 785f 6465            max_de
+000093a0: 7074 685f 6368 6f69 6365 203d 2072 616e  pth_choice = ran
+000093b0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+000093c0: 2020 2020 2020 2020 2020 2020 2020 5b4e                [N
+000093d0: 6f6e 652c 2035 2c20 3130 2c20 3230 2c20  one, 5, 10, 20, 
+000093e0: 3330 5d2c 205b 302e 342c 2030 2e31 2c20  30], [0.4, 0.1, 
+000093f0: 302e 332c 2030 2e34 2c20 302e 315d 0d0a  0.3, 0.4, 0.1]..
+00009400: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+00009410: 0d0a 2020 2020 2020 2020 2020 2020 6573  ..            es
+00009420: 7469 6d61 746f 7273 5f63 686f 6963 6520  timators_choice 
+00009430: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
+00009440: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00009450: 2020 205b 342c 2035 302c 2031 3030 2c20     [4, 50, 100, 
+00009460: 3530 305d 2c20 5b30 2e30 352c 2030 2e30  500], [0.05, 0.0
+00009470: 352c 2030 2e39 2c20 302e 3035 5d0d 0a20  5, 0.9, 0.05].. 
+00009480: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
+00009490: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+000094a0: 616d 5f64 6963 7420 3d20 7b0d 0a20 2020  am_dict = {..   
+000094b0: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
+000094c0: 6465 6c22 3a20 2745 7874 7261 5472 6565  del": 'ExtraTree
+000094d0: 7327 2c0d 0a20 2020 2020 2020 2020 2020  s',..           
+000094e0: 2020 2020 2022 6d6f 6465 6c5f 7061 7261       "model_para
+000094f0: 6d73 223a 207b 0d0a 2020 2020 2020 2020  ms": {..        
+00009500: 2020 2020 2020 2020 2020 2020 226e 5f65              "n_e
+00009510: 7374 696d 6174 6f72 7322 3a20 6573 7469  stimators": esti
+00009520: 6d61 746f 7273 5f63 686f 6963 652c 0d0a  mators_choice,..
+00009530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009540: 2020 2020 226d 696e 5f73 616d 706c 6573      "min_samples
+00009550: 5f6c 6561 6622 3a20 7261 6e64 6f6d 2e63  _leaf": random.c
+00009560: 686f 6963 6573 285b 322c 2034 2c20 315d  hoices([2, 4, 1]
+00009570: 2c20 5b30 2e31 2c20 302e 312c 2030 2e38  , [0.1, 0.1, 0.8
+00009580: 5d29 5b30 5d2c 0d0a 2020 2020 2020 2020  ])[0],..        
+00009590: 2020 2020 2020 2020 2020 2020 226d 696e              "min
+000095a0: 5f73 616d 706c 6573 5f73 706c 6974 223a  _samples_split":
+000095b0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+000095c0: 5b32 2c20 342c 2031 2e30 5d2c 205b 302e  [2, 4, 1.0], [0.
+000095d0: 382c 2030 2e31 2c20 302e 315d 295b 0d0a  8, 0.1, 0.1])[..
+000095e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000095f0: 2020 2020 2020 2020 300d 0a20 2020 2020          0..     
+00009600: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00009610: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00009620: 2020 2020 2020 2022 6d61 785f 6465 7074         "max_dept
+00009630: 6822 3a20 6d61 785f 6465 7074 685f 6368  h": max_depth_ch
+00009640: 6f69 6365 2c0d 0a20 2020 2020 2020 2020  oice,..         
+00009650: 2020 2020 2020 2020 2020 2022 6372 6974             "crit
+00009660: 6572 696f 6e22 3a20 7261 6e64 6f6d 2e63  erion": random.c
+00009670: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+00009680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009690: 205b 2273 7175 6172 6564 5f65 7272 6f72   ["squared_error
+000096a0: 222c 2022 6162 736f 6c75 7465 5f65 7272  ", "absolute_err
+000096b0: 6f72 222c 2022 6672 6965 646d 616e 5f6d  or", "friedman_m
+000096c0: 7365 222c 2022 706f 6973 736f 6e22 5d2c  se", "poisson"],
+000096d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000096e0: 2020 2020 2020 2020 2020 5b30 2e32 352c            [0.25,
+000096f0: 2030 2e30 2c20 302e 3235 2c20 302e 315d   0.0, 0.25, 0.1]
+00009700: 2c20 2023 2061 6273 2065 7272 6f72 2076  ,  # abs error v
+00009710: 6572 7920 736c 6f77 0d0a 2020 2020 2020  ery slow..      
+00009720: 2020 2020 2020 2020 2020 2020 2020 295b                )[
+00009730: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+00009740: 2020 2020 2020 2020 2022 6d61 785f 6665           "max_fe
+00009750: 6174 7572 6573 223a 2072 616e 646f 6d2e  atures": random.
+00009760: 6368 6f69 6365 7328 5b31 2c20 302e 362c  choices([1, 0.6,
+00009770: 2030 2e33 5d2c 205b 302e 382c 2030 2e31   0.3], [0.8, 0.1
+00009780: 2c20 302e 315d 295b 305d 2c0d 0a20 2020  , 0.1])[0],..   
+00009790: 2020 2020 2020 2020 2020 2020 207d 2c0d               },.
+000097a0: 0a20 2020 2020 2020 2020 2020 207d 0d0a  .            }..
+000097b0: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
+000097c0: 656c 203d 3d20 274b 6572 6173 524e 4e27  el == 'KerasRNN'
+000097d0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+000097e0: 6e69 745f 6c69 7374 203d 205b 0d0a 2020  nit_list = [..  
+000097f0: 2020 2020 2020 2020 2020 2020 2020 2767                'g
+00009800: 6c6f 726f 745f 756e 6966 6f72 6d27 2c0d  lorot_uniform',.
+00009810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009820: 2027 6c65 6375 6e5f 756e 6966 6f72 6d27   'lecun_uniform'
+00009830: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00009840: 2020 2027 676c 6f72 6f74 5f6e 6f72 6d61     'glorot_norma
+00009850: 6c27 2c0d 0a20 2020 2020 2020 2020 2020  l',..           
+00009860: 2020 2020 2027 5261 6e64 6f6d 556e 6966       'RandomUnif
+00009870: 6f72 6d27 2c0d 0a20 2020 2020 2020 2020  orm',..         
+00009880: 2020 2020 2020 2027 6865 5f6e 6f72 6d61         'he_norma
+00009890: 6c27 2c0d 0a20 2020 2020 2020 2020 2020  l',..           
+000098a0: 2020 2020 2027 7a65 726f 7327 2c0d 0a20       'zeros',.. 
+000098b0: 2020 2020 2020 2020 2020 205d 0d0a 2020             ]..  
+000098c0: 2020 2020 2020 2020 2020 7061 7261 6d5f            param_
+000098d0: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
+000098e0: 2020 2020 2020 2020 2020 226d 6f64 656c            "model
+000098f0: 223a 2027 4b65 7261 7352 4e4e 272c 0d0a  ": 'KerasRNN',..
 00009900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009910: 2020 2020 2020 2020 2020 2028 3235 2c20             (25, 
-00009920: 3530 2c20 3235 292c 0d0a 2020 2020 2020  50, 25),..      
-00009930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009940: 2020 2020 2020 2833 322c 2036 342c 2033        (32, 64, 3
-00009950: 3229 2c0d 0a20 2020 2020 2020 2020 2020  2),..           
-00009960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009970: 2028 3332 2c20 3332 2c20 3332 292c 0d0a   (32, 32, 32),..
-00009980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009990: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
+00009910: 226d 6f64 656c 5f70 6172 616d 7322 3a20  "model_params": 
+00009920: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+00009930: 2020 2020 2020 2022 6b65 726e 656c 5f69         "kernel_i
+00009940: 6e69 7469 616c 697a 6572 223a 2072 616e  nitializer": ran
+00009950: 646f 6d2e 6368 6f69 6365 7328 696e 6974  dom.choices(init
+00009960: 5f6c 6973 7429 5b30 5d2c 0d0a 2020 2020  _list)[0],..    
+00009970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009980: 2265 706f 6368 7322 3a20 7261 6e64 6f6d  "epochs": random
+00009990: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
 000099a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099b0: 2020 2020 5b30 2e31 2c20 302e 332c 2030      [0.1, 0.3, 0
-000099c0: 2e33 2c20 302e 312c 2030 2e31 2c20 302e  .3, 0.1, 0.1, 0.
-000099d0: 315d 2c0d 0a20 2020 2020 2020 2020 2020  1],..           
-000099e0: 2020 2020 2020 2020 2029 5b30 5d2c 0d0a           )[0],..
+000099b0: 2020 205b 3530 2c20 3130 302c 2032 3030     [50, 100, 200
+000099c0: 2c20 3530 302c 2037 3530 5d2c 205b 302e  , 500, 750], [0.
+000099d0: 3735 2c20 302e 322c 2030 2e30 352c 2030  75, 0.2, 0.05, 0
+000099e0: 2e30 312c 2030 2e30 3031 5d0d 0a20 2020  .01, 0.001]..   
 000099f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a00: 2020 2020 2272 6e6e 5f74 7970 6522 3a20      "rnn_type": 
-00009a10: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00009a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009a30: 2020 2020 2020 2020 205b 274c 5354 4d27           ['LSTM'
-00009a40: 2c20 2747 5255 272c 2022 4532 4432 222c  , 'GRU', "E2D2",
-00009a50: 2022 434e 4e22 5d2c 205b 302e 352c 2030   "CNN"], [0.5, 0
-00009a60: 2e33 2c20 302e 3135 2c20 302e 3031 5d0d  .3, 0.15, 0.01].
-00009a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009a80: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
-00009a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009aa0: 2273 6861 7065 223a 2072 616e 646f 6d2e  "shape": random.
-00009ab0: 6368 6f69 6365 285b 312c 2032 5d29 2c0d  choice([1, 2]),.
-00009ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009ad0: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
-00009ae0: 207d 0d0a 2020 2020 2020 2020 656c 6966   }..        elif
-00009af0: 206d 6f64 656c 203d 3d20 2754 7261 6e73   model == 'Trans
-00009b00: 666f 726d 6572 273a 0d0a 2020 2020 2020  former':..      
-00009b10: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-00009b20: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-00009b30: 2020 2020 2020 226d 6f64 656c 223a 2027        "model": '
-00009b40: 5472 616e 7366 6f72 6d65 7227 2c0d 0a20  Transformer',.. 
-00009b50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00009b60: 6d6f 6465 6c5f 7061 7261 6d73 223a 207b  model_params": {
-00009b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00009b80: 2020 2020 2020 2265 706f 6368 7322 3a20        "epochs": 
-00009b90: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00009ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009bb0: 2020 2020 2020 2020 205b 3530 2c20 3130           [50, 10
-00009bc0: 302c 2032 3030 2c20 3530 302c 2037 3530  0, 200, 500, 750
-00009bd0: 5d2c 205b 302e 3735 2c20 302e 322c 2030  ], [0.75, 0.2, 0
-00009be0: 2e30 352c 2030 2e30 312c 2030 2e30 3031  .05, 0.01, 0.001
-00009bf0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00009c00: 2020 2020 2020 2029 5b30 5d2c 0d0a 2020         )[0],..  
-00009c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c20: 2020 2262 6174 6368 5f73 697a 6522 3a20    "batch_size": 
-00009c30: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00009c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009c50: 2020 2020 2020 2020 205b 382c 2031 362c           [8, 16,
-00009c60: 2033 322c 2036 342c 2037 325d 2c20 5b30   32, 64, 72], [0
-00009c70: 2e30 312c 2030 2e32 2c20 302e 352c 2030  .01, 0.2, 0.5, 0
-00009c80: 2e31 2c20 302e 315d 0d0a 2020 2020 2020  .1, 0.1]..      
-00009c90: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-00009ca0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-00009cb0: 2020 2020 2020 2020 2022 6f70 7469 6d69           "optimi
-00009cc0: 7a65 7222 3a20 7261 6e64 6f6d 2e63 686f  zer": random.cho
-00009cd0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-00009ce0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00009cf0: 2761 6461 6d27 2c20 2772 6d73 7072 6f70  'adam', 'rmsprop
-00009d00: 272c 2027 6164 6167 7261 6427 5d2c 205b  ', 'adagrad'], [
-00009d10: 302e 342c 2030 2e35 2c20 302e 315d 0d0a  0.4, 0.5, 0.1]..
-00009d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d30: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-00009d40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00009d50: 6c6f 7373 223a 2072 616e 646f 6d2e 6368  loss": random.ch
-00009d60: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-00009d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009d80: 5b27 6d61 6527 2c20 2748 7562 6572 272c  ['mae', 'Huber',
-00009d90: 2027 706f 6973 736f 6e27 2c20 276d 7365   'poisson', 'mse
-00009da0: 272c 2027 6d61 7065 275d 2c0d 0a20 2020  ', 'mape'],..   
-00009db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009dc0: 2020 2020 205b 302e 322c 2030 2e33 2c20       [0.2, 0.3, 
-00009dd0: 302e 312c 2030 2e32 2c20 302e 325d 2c0d  0.1, 0.2, 0.2],.
-00009de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009df0: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
-00009e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e10: 2268 6561 645f 7369 7a65 223a 2072 616e  "head_size": ran
-00009e20: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00009e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e40: 2020 2020 2020 5b33 322c 2036 342c 2031        [32, 64, 1
-00009e50: 3238 2c20 3235 362c 2033 3834 5d2c 205b  28, 256, 384], [
-00009e60: 302e 312c 2030 2e31 2c20 302e 332c 2030  0.1, 0.1, 0.3, 0
-00009e70: 2e35 2c20 302e 3035 5d0d 0a20 2020 2020  .5, 0.05]..     
-00009e80: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00009e90: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-00009ea0: 2020 2020 2020 2020 2020 226e 756d 5f68            "num_h
-00009eb0: 6561 6473 223a 2072 616e 646f 6d2e 6368  eads": random.ch
-00009ec0: 6f69 6365 7328 5b32 2c20 345d 2c20 5b30  oices([2, 4], [0
-00009ed0: 2e32 2c20 302e 325d 295b 305d 2c0d 0a20  .2, 0.2])[0],.. 
-00009ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ef0: 2020 2022 6666 5f64 696d 223a 2072 616e     "ff_dim": ran
-00009f00: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f20: 2020 2020 2020 5b32 2c20 332c 2034 2c20        [2, 3, 4, 
-00009f30: 3332 2c20 3634 5d2c 205b 302e 312c 2030  32, 64], [0.1, 0
-00009f40: 2e31 2c20 302e 382c 2030 2e30 352c 2030  .1, 0.8, 0.05, 0
-00009f50: 2e30 355d 0d0a 2020 2020 2020 2020 2020  .05]..          
-00009f60: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
-00009f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f80: 2020 2020 2022 6e75 6d5f 7472 616e 7366       "num_transf
-00009f90: 6f72 6d65 725f 626c 6f63 6b73 223a 2072  ormer_blocks": r
-00009fa0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-00009fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fc0: 2020 2020 2020 2020 5b31 2c20 322c 2034          [1, 2, 4
-00009fd0: 2c20 365d 2c0d 0a20 2020 2020 2020 2020  , 6],..         
-00009fe0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00009ff0: 302e 322c 2030 2e32 2c20 302e 362c 2030  0.2, 0.2, 0.6, 0
-0000a000: 2e30 355d 2c0d 0a20 2020 2020 2020 2020  .05],..         
-0000a010: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-0000a020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a030: 2020 2020 2020 226d 6c70 5f75 6e69 7473        "mlp_units
-0000a040: 223a 2072 616e 646f 6d2e 6368 6f69 6365  ": random.choice
-0000a050: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-0000a060: 2020 2020 2020 2020 2020 2020 5b33 322c              [32,
-0000a070: 2036 342c 2031 3238 2c20 3235 365d 2c0d   64, 128, 256],.
-0000a080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a090: 2020 2020 2020 2020 205b 302e 322c 2030           [0.2, 0
-0000a0a0: 2e33 2c20 302e 382c 2030 2e32 5d2c 0d0a  .3, 0.8, 0.2],..
-0000a0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0c0: 2020 2020 292c 0d0a 2020 2020 2020 2020      ),..        
-0000a0d0: 2020 2020 2020 2020 2020 2020 226d 6c70              "mlp
-0000a0e0: 5f64 726f 706f 7574 223a 2072 616e 646f  _dropout": rando
-0000a0f0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
-0000a100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a110: 2020 2020 5b30 2e30 352c 2030 2e32 2c20      [0.05, 0.2, 
-0000a120: 302e 345d 2c0d 0a20 2020 2020 2020 2020  0.4],..         
-0000a130: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-0000a140: 302e 322c 2030 2e38 2c20 302e 325d 2c0d  0.2, 0.8, 0.2],.
-0000a150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a160: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
-0000a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a180: 2264 726f 706f 7574 223a 2072 616e 646f  "dropout": rando
-0000a190: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
-0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1b0: 2020 2020 5b30 2e30 352c 2030 2e32 2c20      [0.05, 0.2, 
-0000a1c0: 302e 345d 2c0d 0a20 2020 2020 2020 2020  0.4],..         
-0000a1d0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-0000a1e0: 302e 322c 2030 2e38 2c20 302e 325d 2c0d  0.2, 0.8, 0.2],.
-0000a1f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a200: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
-0000a210: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
-0000a220: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
-0000a230: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
-0000a240: 6c20 3d3d 2027 4869 7374 4772 6164 6965  l == 'HistGradie
-0000a250: 6e74 426f 6f73 7427 3a0d 0a20 2020 2020  ntBoost':..     
-0000a260: 2020 2020 2020 2070 6172 616d 5f64 6963         param_dic
-0000a270: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
-0000a280: 2020 2020 2020 2022 6d6f 6465 6c22 3a20         "model": 
-0000a290: 2748 6973 7447 7261 6469 656e 7442 6f6f  'HistGradientBoo
-0000a2a0: 7374 272c 0d0a 2020 2020 2020 2020 2020  st',..          
-0000a2b0: 2020 2020 2020 226d 6f64 656c 5f70 6172        "model_par
-0000a2c0: 616d 7322 3a20 7b0d 0a20 2020 2020 2020  ams": {..       
-0000a2d0: 2020 2020 2020 2020 2020 2020 2022 6c6f               "lo
-0000a2e0: 7373 223a 2072 616e 646f 6d2e 6368 6f69  ss": random.choi
-0000a2f0: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-0000a300: 2020 2020 2020 2020 2020 2020 2020 5b27                ['
-0000a310: 7371 7561 7265 645f 6572 726f 7227 2c20  squared_error', 
-0000a320: 2770 6f69 7373 6f6e 272c 2027 6162 736f  'poisson', 'abso
-0000a330: 6c75 7465 5f65 7272 6f72 275d 2c20 5b30  lute_error'], [0
-0000a340: 2e38 2c20 302e 312c 2030 2e31 5d0d 0a20  .8, 0.1, 0.1].. 
-0000a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a360: 2020 2029 5b30 5d2c 0d0a 2020 2020 2020     )[0],..      
-0000a370: 2020 2020 2020 2020 2020 2020 2020 226c                "l
-0000a380: 6561 726e 696e 675f 7261 7465 223a 2072  earning_rate": r
-0000a390: 616e 646f 6d2e 6368 6f69 6365 7328 5b31  andom.choices([1
-0000a3a0: 2c20 302e 312c 2030 2e30 315d 2c20 5b30  , 0.1, 0.01], [0
-0000a3b0: 2e33 2c20 302e 342c 2030 2e33 5d29 5b30  .3, 0.4, 0.3])[0
-0000a3c0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000a3d0: 2020 2020 2020 2020 226d 6178 5f64 6570          "max_dep
-0000a3e0: 7468 223a 2072 616e 646f 6d2e 6368 6f69  th": random.choi
-0000a3f0: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-0000a400: 2020 2020 2020 2020 2020 2020 2020 5b4e                [N
-0000a410: 6f6e 652c 2035 2c20 3130 2c20 3230 5d2c  one, 5, 10, 20],
-0000a420: 205b 302e 372c 2030 2e31 2c20 302e 312c   [0.7, 0.1, 0.1,
-0000a430: 2030 2e31 5d0d 0a20 2020 2020 2020 2020   0.1]..         
-0000a440: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-0000a450: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a460: 2020 2020 2020 226d 696e 5f73 616d 706c        "min_sampl
-0000a470: 6573 5f6c 6561 6622 3a20 7261 6e64 6f6d  es_leaf": random
-0000a480: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
-0000a490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4a0: 2020 205b 3230 2c20 352c 2031 302c 2033     [20, 5, 10, 3
-0000a4b0: 305d 2c20 5b30 2e39 2c20 302e 312c 2030  0], [0.9, 0.1, 0
-0000a4c0: 2e31 2c20 302e 315d 0d0a 2020 2020 2020  .1, 0.1]..      
-0000a4d0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
-0000a4e0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
-0000a4f0: 2020 2020 2020 2020 2022 6d61 785f 6974           "max_it
-0000a500: 6572 223a 2072 616e 646f 6d2e 6368 6f69  er": random.choi
-0000a510: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-0000a520: 2020 2020 2020 2020 2020 2020 2020 5b31                [1
-0000a530: 3030 2c20 3235 302c 2035 302c 2035 3030  00, 250, 50, 500
-0000a540: 5d2c 205b 302e 392c 2030 2e31 2c20 302e  ], [0.9, 0.1, 0.
-0000a550: 312c 2030 2e30 3031 5d0d 0a20 2020 2020  1, 0.001]..     
-0000a560: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000a570: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
-0000a580: 2020 2020 2020 2020 2020 226c 325f 7265            "l2_re
-0000a590: 6775 6c61 7269 7a61 7469 6f6e 223a 2072  gularization": r
-0000a5a0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-0000a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5c0: 2020 2020 2020 2020 5b30 2c20 302e 3031          [0, 0.01
-0000a5d0: 2c20 302e 3032 2c20 302e 345d 2c20 5b30  , 0.02, 0.4], [0
-0000a5e0: 2e39 2c20 302e 312c 2030 2e31 2c20 302e  .9, 0.1, 0.1, 0.
-0000a5f0: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
-0000a600: 2020 2020 2020 2020 295b 305d 2c0d 0a20          )[0],.. 
-0000a610: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0000a620: 2c0d 0a20 2020 2020 2020 2020 2020 207d  ,..            }
-0000a630: 0d0a 2020 2020 2020 2020 656c 6966 206d  ..        elif m
-0000a640: 6f64 656c 2069 6e20 5b27 4c69 6768 7447  odel in ['LightG
-0000a650: 424d 272c 2022 4c69 6768 7447 424d 5265  BM', "LightGBMRe
-0000a660: 6772 6573 736f 7243 6861 696e 225d 3a0d  gressorChain"]:.
-0000a670: 0a20 2020 2020 2020 2020 2020 2062 7261  .            bra
-0000a680: 6e63 6820 3d20 7261 6e64 6f6d 2e63 686f  nch = random.cho
-0000a690: 6963 6573 285b 2770 3127 2c20 2770 3227  ices(['p1', 'p2'
-0000a6a0: 2c20 2772 616e 646f 6d27 5d2c 205b 302e  , 'random'], [0.
-0000a6b0: 312c 2030 2e31 2c20 302e 385d 295b 305d  1, 0.1, 0.8])[0]
-0000a6c0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0000a6d0: 2062 7261 6e63 6820 3d3d 2027 7031 273a   branch == 'p1':
-0000a6e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a6f0: 2020 7061 7261 6d5f 6469 6374 203d 206c    param_dict = l
-0000a700: 6967 6874 6762 6d70 310d 0a20 2020 2020  ightgbmp1..     
-0000a710: 2020 2020 2020 2065 6c69 6620 6272 616e         elif bran
-0000a720: 6368 203d 3d20 2770 3227 3a0d 0a20 2020  ch == 'p2':..   
-0000a730: 2020 2020 2020 2020 2020 2020 2070 6172               par
-0000a740: 616d 5f64 6963 7420 3d20 6c69 6768 7467  am_dict = lightg
-0000a750: 626d 7032 0d0a 2020 2020 2020 2020 2020  bmp2..          
-0000a760: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-0000a770: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
-0000a780: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
-0000a790: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
-0000a7a0: 6465 6c22 3a20 274c 6967 6874 4742 4d27  del": 'LightGBM'
-0000a7b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000a7c0: 2020 2020 2020 2022 6d6f 6465 6c5f 7061         "model_pa
-0000a7d0: 7261 6d73 223a 207b 0d0a 2020 2020 2020  rams": {..      
-0000a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7f0: 2020 226f 626a 6563 7469 7665 223a 2072    "objective": r
-0000a800: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-0000a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a820: 2020 2020 2020 2020 2020 2020 5b0d 0a20              [.. 
-0000a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a840: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0000a850: 7265 6772 6573 7369 6f6e 272c 0d0a 2020  regression',..  
-0000a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a870: 2020 2020 2020 2020 2020 2020 2020 2767                'g
-0000a880: 616d 6d61 272c 0d0a 2020 2020 2020 2020  amma',..        
-0000a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8a0: 2020 2020 2020 2020 2768 7562 6572 272c          'huber',
-0000a8b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8d0: 2020 2772 6567 7265 7373 696f 6e5f 6c31    'regression_l1
-0000a8e0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-0000a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a900: 2020 2020 2774 7765 6564 6965 272c 0d0a      'tweedie',..
-0000a910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a930: 2770 6f69 7373 6f6e 272c 0d0a 2020 2020  'poisson',..    
-0000a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a950: 2020 2020 2020 2020 2020 2020 2771 7561              'qua
-0000a960: 6e74 696c 6527 2c0d 0a20 2020 2020 2020  ntile',..       
-0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a980: 2020 2020 2020 2020 2022 6661 6972 222c           "fair",
-0000a990: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9b0: 2020 276d 6170 6527 2c0d 0a20 2020 2020    'mape',..     
-0000a9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9d0: 2020 2020 2020 2020 2020 205b 2772 6567             ['reg
-0000a9e0: 7265 7373 696f 6e27 2c20 276d 6170 6527  ression', 'mape'
-0000a9f0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa10: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa30: 5b30 2e34 2c20 302e 322c 2030 2e32 2c20  [0.4, 0.2, 0.2, 
-0000aa40: 302e 322c 2030 2e32 2c20 302e 3035 2c20  0.2, 0.2, 0.05, 
-0000aa50: 302e 3031 2c20 302e 3035 2c20 302e 3035  0.01, 0.05, 0.05
-0000aa60: 2c20 302e 315d 2c0d 0a20 2020 2020 2020  , 0.1],..       
-0000aa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa80: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
-0000aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aaa0: 226c 6561 726e 696e 675f 7261 7465 223a  "learning_rate":
-0000aab0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-0000aac0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000aad0: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
-0000aae0: 2e30 3031 2c20 302e 312c 2030 2e30 312c  .001, 0.1, 0.01,
-0000aaf0: 2030 2e37 5d2c 0d0a 2020 2020 2020 2020   0.7],..        
-0000ab00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab10: 2020 2020 5b30 2e31 2c20 302e 362c 2030      [0.1, 0.6, 0
-0000ab20: 2e33 2c20 302e 325d 2c0d 0a20 2020 2020  .3, 0.2],..     
-0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab40: 2020 2029 5b30 5d2c 0d0a 2020 2020 2020     )[0],..      
-0000ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab60: 2020 226e 756d 5f6c 6561 7665 7322 3a20    "num_leaves": 
-0000ab70: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-0000ab80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ab90: 2020 2020 2020 2020 2020 2020 205b 3331               [31
-0000aba0: 2c20 3132 372c 2037 302c 2031 3030 302c  , 127, 70, 1000,
-0000abb0: 2031 355d 2c0d 0a20 2020 2020 2020 2020   15],..         
-0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abd0: 2020 205b 302e 362c 2030 2e31 2c20 302e     [0.6, 0.1, 0.
-0000abe0: 332c 2030 2e31 2c20 302e 325d 2c0d 0a20  3, 0.1, 0.2],.. 
+00009a00: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
+00009a10: 2020 2020 2020 2020 2020 2020 2262 6174              "bat
+00009a20: 6368 5f73 697a 6522 3a20 7261 6e64 6f6d  ch_size": random
+00009a30: 2e63 686f 6963 6573 285b 382c 2031 362c  .choices([8, 16,
+00009a40: 2033 322c 2037 325d 2c20 5b30 2e32 2c20   32, 72], [0.2, 
+00009a50: 302e 322c 2030 2e35 2c20 302e 315d 295b  0.2, 0.5, 0.1])[
+00009a60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009a70: 2020 2020 2020 2020 2020 300d 0a20 2020            0..   
+00009a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a90: 205d 2c0d 0a20 2020 2020 2020 2020 2020   ],..           
+00009aa0: 2020 2020 2020 2020 2022 6f70 7469 6d69           "optimi
+00009ab0: 7a65 7222 3a20 7261 6e64 6f6d 2e63 686f  zer": random.cho
+00009ac0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+00009ad0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+00009ae0: 2761 6461 6d27 2c20 2772 6d73 7072 6f70  'adam', 'rmsprop
+00009af0: 272c 2027 6164 6167 7261 6427 5d2c 205b  ', 'adagrad'], [
+00009b00: 302e 342c 2030 2e35 2c20 302e 315d 0d0a  0.4, 0.5, 0.1]..
+00009b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b20: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
+00009b30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00009b40: 6c6f 7373 223a 2072 616e 646f 6d2e 6368  loss": random.ch
+00009b50: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+00009b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b70: 5b27 6d61 6527 2c20 2748 7562 6572 272c  ['mae', 'Huber',
+00009b80: 2027 706f 6973 736f 6e27 2c20 276d 7365   'poisson', 'mse
+00009b90: 272c 2027 6d61 7065 275d 2c0d 0a20 2020  ', 'mape'],..   
+00009ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009bb0: 2020 2020 205b 302e 322c 2030 2e33 2c20       [0.2, 0.3, 
+00009bc0: 302e 312c 2030 2e32 2c20 302e 325d 2c0d  0.1, 0.2, 0.2],.
+00009bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009be0: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
+00009bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c00: 2268 6964 6465 6e5f 6c61 7965 725f 7369  "hidden_layer_si
+00009c10: 7a65 7322 3a20 7261 6e64 6f6d 2e63 686f  zes": random.cho
+00009c20: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+00009c30: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+00009c40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009c50: 2020 2020 2020 2020 2020 2020 2020 2831                (1
+00009c60: 3030 2c29 2c0d 0a20 2020 2020 2020 2020  00,),..         
+00009c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c80: 2020 2028 3332 2c29 2c0d 0a20 2020 2020     (32,),..     
+00009c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009ca0: 2020 2020 2020 2028 3732 2c20 3336 2c20         (72, 36, 
+00009cb0: 3732 292c 0d0a 2020 2020 2020 2020 2020  72),..          
+00009cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cd0: 2020 2832 352c 2035 302c 2032 3529 2c0d    (25, 50, 25),.
+00009ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009cf0: 2020 2020 2020 2020 2020 2020 2028 3332               (32
+00009d00: 2c20 3634 2c20 3332 292c 0d0a 2020 2020  , 64, 32),..    
+00009d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d20: 2020 2020 2020 2020 2833 322c 2033 322c          (32, 32,
+00009d30: 2033 3229 2c0d 0a20 2020 2020 2020 2020   32),..         
+00009d40: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00009d50: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00009d60: 2020 2020 2020 2020 2020 205b 302e 312c             [0.1,
+00009d70: 2030 2e33 2c20 302e 332c 2030 2e31 2c20   0.3, 0.3, 0.1, 
+00009d80: 302e 312c 2030 2e31 5d2c 0d0a 2020 2020  0.1, 0.1],..    
+00009d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009da0: 295b 305d 2c0d 0a20 2020 2020 2020 2020  )[0],..         
+00009db0: 2020 2020 2020 2020 2020 2022 726e 6e5f             "rnn_
+00009dc0: 7479 7065 223a 2072 616e 646f 6d2e 6368  type": random.ch
+00009dd0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+00009de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009df0: 5b27 4c53 544d 272c 2027 4752 5527 2c20  ['LSTM', 'GRU', 
+00009e00: 2245 3244 3222 2c20 2243 4e4e 225d 2c20  "E2D2", "CNN"], 
+00009e10: 5b30 2e35 2c20 302e 332c 2030 2e31 352c  [0.5, 0.3, 0.15,
+00009e20: 2030 2e30 315d 0d0a 2020 2020 2020 2020   0.01]..        
+00009e30: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+00009e40: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00009e50: 2020 2020 2020 2022 7368 6170 6522 3a20         "shape": 
+00009e60: 7261 6e64 6f6d 2e63 686f 6963 6528 5b31  random.choice([1
+00009e70: 2c20 325d 292c 0d0a 2020 2020 2020 2020  , 2]),..        
+00009e80: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+00009e90: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+00009ea0: 2020 2065 6c69 6620 6d6f 6465 6c20 3d3d     elif model ==
+00009eb0: 2027 5472 616e 7366 6f72 6d65 7227 3a0d   'Transformer':.
+00009ec0: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+00009ed0: 616d 5f64 6963 7420 3d20 7b0d 0a20 2020  am_dict = {..   
+00009ee0: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
+00009ef0: 6465 6c22 3a20 2754 7261 6e73 666f 726d  del": 'Transform
+00009f00: 6572 272c 0d0a 2020 2020 2020 2020 2020  er',..          
+00009f10: 2020 2020 2020 226d 6f64 656c 5f70 6172        "model_par
+00009f20: 616d 7322 3a20 7b0d 0a20 2020 2020 2020  ams": {..       
+00009f30: 2020 2020 2020 2020 2020 2020 2022 6570               "ep
+00009f40: 6f63 6873 223a 2072 616e 646f 6d2e 6368  ochs": random.ch
+00009f50: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+00009f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f70: 5b35 302c 2031 3030 2c20 3230 302c 2035  [50, 100, 200, 5
+00009f80: 3030 2c20 3735 305d 2c20 5b30 2e37 352c  00, 750], [0.75,
+00009f90: 2030 2e32 2c20 302e 3035 2c20 302e 3031   0.2, 0.05, 0.01
+00009fa0: 2c20 302e 3030 315d 0d0a 2020 2020 2020  , 0.001]..      
+00009fb0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
+00009fc0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+00009fd0: 2020 2020 2020 2020 2022 6261 7463 685f           "batch_
+00009fe0: 7369 7a65 223a 2072 616e 646f 6d2e 6368  size": random.ch
+00009ff0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a010: 5b38 2c20 3136 2c20 3332 2c20 3634 2c20  [8, 16, 32, 64, 
+0000a020: 3732 5d2c 205b 302e 3031 2c20 302e 322c  72], [0.01, 0.2,
+0000a030: 2030 2e35 2c20 302e 312c 2030 2e31 5d0d   0.5, 0.1, 0.1].
+0000a040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a050: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
+0000a060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a070: 226f 7074 696d 697a 6572 223a 2072 616e  "optimizer": ran
+0000a080: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0a0: 2020 2020 2020 5b27 6164 616d 272c 2027        ['adam', '
+0000a0b0: 726d 7370 726f 7027 2c20 2761 6461 6772  rmsprop', 'adagr
+0000a0c0: 6164 275d 2c20 5b30 2e34 2c20 302e 352c  ad'], [0.4, 0.5,
+0000a0d0: 2030 2e31 5d0d 0a20 2020 2020 2020 2020   0.1]..         
+0000a0e0: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+0000a0f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a100: 2020 2020 2020 226c 6f73 7322 3a20 7261        "loss": ra
+0000a110: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a130: 2020 2020 2020 205b 276d 6165 272c 2027         ['mae', '
+0000a140: 4875 6265 7227 2c20 2770 6f69 7373 6f6e  Huber', 'poisson
+0000a150: 272c 2027 6d73 6527 2c20 276d 6170 6527  ', 'mse', 'mape'
+0000a160: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0000a170: 2020 2020 2020 2020 2020 2020 5b30 2e32              [0.2
+0000a180: 2c20 302e 332c 2030 2e31 2c20 302e 322c  , 0.3, 0.1, 0.2,
+0000a190: 2030 2e32 5d2c 0d0a 2020 2020 2020 2020   0.2],..        
+0000a1a0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000a1b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000a1c0: 2020 2020 2020 2022 6865 6164 5f73 697a         "head_siz
+0000a1d0: 6522 3a20 7261 6e64 6f6d 2e63 686f 6963  e": random.choic
+0000a1e0: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+0000a1f0: 2020 2020 2020 2020 2020 2020 205b 3332               [32
+0000a200: 2c20 3634 2c20 3132 382c 2032 3536 2c20  , 64, 128, 256, 
+0000a210: 3338 345d 2c20 5b30 2e31 2c20 302e 312c  384], [0.1, 0.1,
+0000a220: 2030 2e33 2c20 302e 352c 2030 2e30 355d   0.3, 0.5, 0.05]
+0000a230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a240: 2020 2020 2020 295b 305d 2c0d 0a20 2020        )[0],..   
+0000a250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a260: 2022 6e75 6d5f 6865 6164 7322 3a20 7261   "num_heads": ra
+0000a270: 6e64 6f6d 2e63 686f 6963 6573 285b 322c  ndom.choices([2,
+0000a280: 2034 5d2c 205b 302e 322c 2030 2e32 5d29   4], [0.2, 0.2])
+0000a290: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+0000a2a0: 2020 2020 2020 2020 2020 2266 665f 6469            "ff_di
+0000a2b0: 6d22 3a20 7261 6e64 6f6d 2e63 686f 6963  m": random.choic
+0000a2c0: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+0000a2d0: 2020 2020 2020 2020 2020 2020 205b 322c               [2,
+0000a2e0: 2033 2c20 342c 2033 322c 2036 345d 2c20   3, 4, 32, 64], 
+0000a2f0: 5b30 2e31 2c20 302e 312c 2030 2e38 2c20  [0.1, 0.1, 0.8, 
+0000a300: 302e 3035 2c20 302e 3035 5d0d 0a20 2020  0.05, 0.05]..   
+0000a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a320: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
+0000a330: 2020 2020 2020 2020 2020 2020 226e 756d              "num
+0000a340: 5f74 7261 6e73 666f 726d 6572 5f62 6c6f  _transformer_blo
+0000a350: 636b 7322 3a20 7261 6e64 6f6d 2e63 686f  cks": random.cho
+0000a360: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+0000a370: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0000a380: 312c 2032 2c20 342c 2036 5d2c 0d0a 2020  1, 2, 4, 6],..  
+0000a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3a0: 2020 2020 2020 5b30 2e32 2c20 302e 322c        [0.2, 0.2,
+0000a3b0: 2030 2e36 2c20 302e 3035 5d2c 0d0a 2020   0.6, 0.05],..  
+0000a3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3d0: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
+0000a3e0: 2020 2020 2020 2020 2020 2020 2022 6d6c               "ml
+0000a3f0: 705f 756e 6974 7322 3a20 7261 6e64 6f6d  p_units": random
+0000a400: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
+0000a410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a420: 2020 205b 3332 2c20 3634 2c20 3132 382c     [32, 64, 128,
+0000a430: 2032 3536 5d2c 0d0a 2020 2020 2020 2020   256],..        
+0000a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a450: 5b30 2e32 2c20 302e 332c 2030 2e38 2c20  [0.2, 0.3, 0.8, 
+0000a460: 302e 325d 2c0d 0a20 2020 2020 2020 2020  0.2],..         
+0000a470: 2020 2020 2020 2020 2020 2029 2c0d 0a20             ),.. 
+0000a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a490: 2020 2022 6d6c 705f 6472 6f70 6f75 7422     "mlp_dropout"
+0000a4a0: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
+0000a4b0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0000a4c0: 2020 2020 2020 2020 2020 205b 302e 3035             [0.05
+0000a4d0: 2c20 302e 322c 2030 2e34 5d2c 0d0a 2020  , 0.2, 0.4],..  
+0000a4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4f0: 2020 2020 2020 5b30 2e32 2c20 302e 382c        [0.2, 0.8,
+0000a500: 2030 2e32 5d2c 0d0a 2020 2020 2020 2020   0.2],..        
+0000a510: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000a520: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000a530: 2020 2020 2020 2022 6472 6f70 6f75 7422         "dropout"
+0000a540: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
+0000a550: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0000a560: 2020 2020 2020 2020 2020 205b 302e 3035             [0.05
+0000a570: 2c20 302e 322c 2030 2e34 5d2c 0d0a 2020  , 0.2, 0.4],..  
+0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a590: 2020 2020 2020 5b30 2e32 2c20 302e 382c        [0.2, 0.8,
+0000a5a0: 2030 2e32 5d2c 0d0a 2020 2020 2020 2020   0.2],..        
+0000a5b0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000a5c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000a5d0: 2020 207d 2c0d 0a20 2020 2020 2020 2020     },..         
+0000a5e0: 2020 207d 0d0a 2020 2020 2020 2020 656c     }..        el
+0000a5f0: 6966 206d 6f64 656c 203d 3d20 2748 6973  if model == 'His
+0000a600: 7447 7261 6469 656e 7442 6f6f 7374 273a  tGradientBoost':
+0000a610: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+0000a620: 7261 6d5f 6469 6374 203d 207b 0d0a 2020  ram_dict = {..  
+0000a630: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000a640: 6f64 656c 223a 2027 4869 7374 4772 6164  odel": 'HistGrad
+0000a650: 6965 6e74 426f 6f73 7427 2c0d 0a20 2020  ientBoost',..   
+0000a660: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
+0000a670: 6465 6c5f 7061 7261 6d73 223a 207b 0d0a  del_params": {..
+0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a690: 2020 2020 226c 6f73 7322 3a20 7261 6e64      "loss": rand
+0000a6a0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0000a6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6c0: 2020 2020 205b 2773 7175 6172 6564 5f65       ['squared_e
+0000a6d0: 7272 6f72 272c 2027 706f 6973 736f 6e27  rror', 'poisson'
+0000a6e0: 2c20 2761 6273 6f6c 7574 655f 6572 726f  , 'absolute_erro
+0000a6f0: 7227 5d2c 205b 302e 382c 2030 2e31 2c20  r'], [0.8, 0.1, 
+0000a700: 302e 315d 0d0a 2020 2020 2020 2020 2020  0.1]..          
+0000a710: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
+0000a720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a730: 2020 2020 2022 6c65 6172 6e69 6e67 5f72       "learning_r
+0000a740: 6174 6522 3a20 7261 6e64 6f6d 2e63 686f  ate": random.cho
+0000a750: 6963 6573 285b 312c 2030 2e31 2c20 302e  ices([1, 0.1, 0.
+0000a760: 3031 5d2c 205b 302e 332c 2030 2e34 2c20  01], [0.3, 0.4, 
+0000a770: 302e 335d 295b 305d 2c0d 0a20 2020 2020  0.3])[0],..     
+0000a780: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000a790: 6d61 785f 6465 7074 6822 3a20 7261 6e64  max_depth": rand
+0000a7a0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0000a7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a7c0: 2020 2020 205b 4e6f 6e65 2c20 352c 2031       [None, 5, 1
+0000a7d0: 302c 2032 305d 2c20 5b30 2e37 2c20 302e  0, 20], [0.7, 0.
+0000a7e0: 312c 2030 2e31 2c20 302e 315d 0d0a 2020  1, 0.1, 0.1]..  
+0000a7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a800: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
+0000a810: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
+0000a820: 6e5f 7361 6d70 6c65 735f 6c65 6166 223a  n_samples_leaf":
+0000a830: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+0000a840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a850: 2020 2020 2020 2020 2020 5b32 302c 2035            [20, 5
+0000a860: 2c20 3130 2c20 3330 5d2c 205b 302e 392c  , 10, 30], [0.9,
+0000a870: 2030 2e31 2c20 302e 312c 2030 2e31 5d0d   0.1, 0.1, 0.1].
+0000a880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a890: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
+0000a8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8b0: 226d 6178 5f69 7465 7222 3a20 7261 6e64  "max_iter": rand
+0000a8c0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8e0: 2020 2020 205b 3130 302c 2032 3530 2c20       [100, 250, 
+0000a8f0: 3530 2c20 3530 305d 2c20 5b30 2e39 2c20  50, 500], [0.9, 
+0000a900: 302e 312c 2030 2e31 2c20 302e 3030 315d  0.1, 0.1, 0.001]
+0000a910: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a920: 2020 2020 2020 295b 305d 2c0d 0a20 2020        )[0],..   
+0000a930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a940: 2022 6c32 5f72 6567 756c 6172 697a 6174   "l2_regularizat
+0000a950: 696f 6e22 3a20 7261 6e64 6f6d 2e63 686f  ion": random.cho
+0000a960: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+0000a970: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0000a980: 302c 2030 2e30 312c 2030 2e30 322c 2030  0, 0.01, 0.02, 0
+0000a990: 2e34 5d2c 205b 302e 392c 2030 2e31 2c20  .4], [0.9, 0.1, 
+0000a9a0: 302e 312c 2030 2e31 5d0d 0a20 2020 2020  0.1, 0.1]..     
+0000a9b0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000a9c0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+0000a9d0: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+0000a9e0: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+0000a9f0: 2065 6c69 6620 6d6f 6465 6c20 696e 205b   elif model in [
+0000aa00: 274c 6967 6874 4742 4d27 2c20 224c 6967  'LightGBM', "Lig
+0000aa10: 6874 4742 4d52 6567 7265 7373 6f72 4368  htGBMRegressorCh
+0000aa20: 6169 6e22 5d3a 0d0a 2020 2020 2020 2020  ain"]:..        
+0000aa30: 2020 2020 6272 616e 6368 203d 2072 616e      branch = ran
+0000aa40: 646f 6d2e 6368 6f69 6365 7328 5b27 7031  dom.choices(['p1
+0000aa50: 272c 2027 7032 272c 2027 7261 6e64 6f6d  ', 'p2', 'random
+0000aa60: 275d 2c20 5b30 2e31 2c20 302e 312c 2030  '], [0.1, 0.1, 0
+0000aa70: 2e38 5d29 5b30 5d0d 0a20 2020 2020 2020  .8])[0]..       
+0000aa80: 2020 2020 2069 6620 6272 616e 6368 203d       if branch =
+0000aa90: 3d20 2770 3127 3a0d 0a20 2020 2020 2020  = 'p1':..       
+0000aaa0: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
+0000aab0: 6963 7420 3d20 6c69 6768 7467 626d 7031  ict = lightgbmp1
+0000aac0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+0000aad0: 6966 2062 7261 6e63 6820 3d3d 2027 7032  if branch == 'p2
+0000aae0: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+0000aaf0: 2020 2020 7061 7261 6d5f 6469 6374 203d      param_dict =
+0000ab00: 206c 6967 6874 6762 6d70 320d 0a20 2020   lightgbmp2..   
+0000ab10: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+0000ab20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab30: 7061 7261 6d5f 6469 6374 203d 207b 0d0a  param_dict = {..
+0000ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab50: 2020 2020 226d 6f64 656c 223a 2027 4c69      "model": 'Li
+0000ab60: 6768 7447 424d 272c 0d0a 2020 2020 2020  ghtGBM',..      
+0000ab70: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000ab80: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
+0000ab90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000aba0: 2020 2020 2020 2020 2022 6f62 6a65 6374           "object
+0000abb0: 6976 6522 3a20 7261 6e64 6f6d 2e63 686f  ive": random.cho
+0000abc0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abe0: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
 0000abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac00: 2020 2020 2020 2029 5b30 5d2c 0d0a 2020         )[0],..  
-0000ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac20: 2020 2020 2020 226d 6178 5f64 6570 7468        "max_depth
-0000ac30: 223a 2072 616e 646f 6d2e 6368 6f69 6365  ": random.choice
-0000ac40: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-0000ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac60: 5b2d 312c 2035 2c20 3130 5d2c 0d0a 2020  [-1, 5, 10],..  
+0000ac00: 2020 2020 2020 2772 6567 7265 7373 696f        'regressio
+0000ac10: 6e27 2c0d 0a20 2020 2020 2020 2020 2020  n',..           
+0000ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac30: 2020 2020 2027 6761 6d6d 6127 2c0d 0a20       'gamma',.. 
+0000ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac50: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000ac60: 6875 6265 7227 2c0d 0a20 2020 2020 2020  huber',..       
 0000ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac80: 2020 2020 2020 2020 2020 5b30 2e36 2c20            [0.6, 
-0000ac90: 302e 312c 2030 2e33 5d2c 0d0a 2020 2020  0.1, 0.3],..    
+0000ac80: 2020 2020 2020 2020 2027 7265 6772 6573           'regres
+0000ac90: 7369 6f6e 5f6c 3127 2c0d 0a20 2020 2020  sion_l1',..     
 0000aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acb0: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-0000acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acd0: 2020 2022 626f 6f73 7469 6e67 5f74 7970     "boosting_typ
-0000ace0: 6522 3a20 7261 6e64 6f6d 2e63 686f 6963  e": random.choic
-0000acf0: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+0000acb0: 2020 2020 2020 2020 2020 2027 7477 6565             'twee
+0000acc0: 6469 6527 2c0d 0a20 2020 2020 2020 2020  die',..         
+0000acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ace0: 2020 2020 2020 2027 706f 6973 736f 6e27         'poisson'
+0000acf0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
 0000ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad10: 205b 2767 6264 7427 2c20 2772 6627 2c20   ['gbdt', 'rf', 
-0000ad20: 2764 6172 7427 2c20 2767 6f73 7327 5d2c  'dart', 'goss'],
-0000ad30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ad40: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
-0000ad50: 2e36 2c20 302c 2030 2e32 2c20 302e 325d  .6, 0, 0.2, 0.2]
-0000ad60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000ad70: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-0000ad80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ad90: 2020 2020 2020 2020 2020 226e 5f65 7374            "n_est
-0000ada0: 696d 6174 6f72 7322 3a20 7261 6e64 6f6d  imators": random
-0000adb0: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
-0000adc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000add0: 2020 2020 2020 205b 3130 302c 2032 3530         [100, 250
-0000ade0: 2c20 3530 2c20 3530 305d 2c0d 0a20 2020  , 50, 500],..   
-0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae00: 2020 2020 2020 2020 205b 302e 362c 2030           [0.6, 0
-0000ae10: 2e31 2c20 302e 332c 2030 2e30 3031 305d  .1, 0.3, 0.0010]
-0000ae20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000ae30: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-0000ae40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000ae50: 2020 2020 2020 2020 2020 226c 696e 6561            "linea
-0000ae60: 725f 7472 6565 223a 2072 616e 646f 6d2e  r_tree": random.
-0000ae70: 6368 6f69 6365 285b 5472 7565 2c20 4661  choice([True, Fa
-0000ae80: 6c73 655d 292c 0d0a 2020 2020 2020 2020  lse]),..        
-0000ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aea0: 226c 616d 6264 615f 6c31 223a 2072 616e  "lambda_l1": ran
-0000aeb0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-0000aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aed0: 2020 2020 2020 2020 2020 5b30 2e30 2c20            [0.0, 
-0000aee0: 302e 312c 2031 2c20 3130 5d2c 205b 302e  0.1, 1, 10], [0.
-0000aef0: 352c 2030 2e31 2c20 302e 312c 2030 2e31  5, 0.1, 0.1, 0.1
-0000af00: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0000af10: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-0000af20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000af30: 2020 2020 2020 2020 2020 226c 616d 6264            "lambd
-0000af40: 615f 6c32 223a 2072 616e 646f 6d2e 6368  a_l2": random.ch
-0000af50: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-0000af60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af70: 2020 2020 5b30 2e30 2c20 302e 312c 2031      [0.0, 0.1, 1
-0000af80: 2c20 3130 5d2c 205b 302e 352c 2030 2e31  , 10], [0.5, 0.1
-0000af90: 2c20 302e 312c 2030 2e31 5d0d 0a20 2020  , 0.1, 0.1]..   
-0000afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afb0: 2020 2020 2029 5b30 5d2c 0d0a 2020 2020       )[0],..    
-0000afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afd0: 2020 2020 226d 696e 5f64 6174 615f 696e      "min_data_in
-0000afe0: 5f6c 6561 6622 3a20 7261 6e64 6f6d 2e63  _leaf": random.c
-0000aff0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+0000ad10: 2020 2027 7175 616e 7469 6c65 272c 0d0a     'quantile',..
+0000ad20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad40: 2266 6169 7222 2c0d 0a20 2020 2020 2020  "fair",..       
+0000ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad60: 2020 2020 2020 2020 2027 6d61 7065 272c           'mape',
+0000ad70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad90: 2020 5b27 7265 6772 6573 7369 6f6e 272c    ['regression',
+0000ada0: 2027 6d61 7065 275d 2c0d 0a20 2020 2020   'mape'],..     
+0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000adc0: 2020 2020 2020 205d 2c0d 0a20 2020 2020         ],..     
+0000add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ade0: 2020 2020 2020 205b 302e 342c 2030 2e32         [0.4, 0.2
+0000adf0: 2c20 302e 322c 2030 2e32 2c20 302e 322c  , 0.2, 0.2, 0.2,
+0000ae00: 2030 2e30 352c 2030 2e30 312c 2030 2e30   0.05, 0.01, 0.0
+0000ae10: 352c 2030 2e30 352c 2030 2e31 5d2c 0d0a  5, 0.05, 0.1],..
+0000ae20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae30: 2020 2020 2020 2020 295b 305d 2c0d 0a20          )[0],.. 
+0000ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae50: 2020 2020 2020 2022 6c65 6172 6e69 6e67         "learning
+0000ae60: 5f72 6174 6522 3a20 7261 6e64 6f6d 2e63  _rate": random.c
+0000ae70: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+0000ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae90: 2020 2020 205b 302e 3030 312c 2030 2e31       [0.001, 0.1
+0000aea0: 2c20 302e 3031 2c20 302e 375d 2c0d 0a20  , 0.01, 0.7],.. 
+0000aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aec0: 2020 2020 2020 2020 2020 205b 302e 312c             [0.1,
+0000aed0: 2030 2e36 2c20 302e 332c 2030 2e32 5d2c   0.6, 0.3, 0.2],
+0000aee0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000aef0: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
+0000af00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000af10: 2020 2020 2020 2020 2022 6e75 6d5f 6c65           "num_le
+0000af20: 6176 6573 223a 2072 616e 646f 6d2e 6368  aves": random.ch
+0000af30: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+0000af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af50: 2020 2020 5b33 312c 2031 3237 2c20 3730      [31, 127, 70
+0000af60: 2c20 3130 3030 2c20 3135 5d2c 0d0a 2020  , 1000, 15],..  
+0000af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af80: 2020 2020 2020 2020 2020 5b30 2e36 2c20            [0.6, 
+0000af90: 302e 312c 2030 2e33 2c20 302e 312c 2030  0.1, 0.3, 0.1, 0
+0000afa0: 2e32 5d2c 0d0a 2020 2020 2020 2020 2020  .2],..          
+0000afb0: 2020 2020 2020 2020 2020 2020 2020 295b                )[
+0000afc0: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+0000afd0: 2020 2020 2020 2020 2020 2020 2022 6d61               "ma
+0000afe0: 785f 6465 7074 6822 3a20 7261 6e64 6f6d  x_depth": random
+0000aff0: 2e63 686f 6963 6573 280d 0a20 2020 2020  .choices(..     
 0000b000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b010: 2020 2020 205b 352c 2031 352c 2032 302c       [5, 15, 20,
-0000b020: 2033 305d 2c20 5b30 2e31 2c20 302e 322c   30], [0.1, 0.2,
-0000b030: 2030 2e36 2c20 302e 315d 0d0a 2020 2020   0.6, 0.1]..    
-0000b040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b050: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-0000b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b070: 2020 2022 6665 6174 7572 655f 6672 6163     "feature_frac
-0000b080: 7469 6f6e 223a 2072 616e 646f 6d2e 6368  tion": random.ch
-0000b090: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-0000b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0b0: 2020 2020 5b31 2e30 2c20 302e 312c 2030      [1.0, 0.1, 0
-0000b0c0: 2e35 2c20 302e 385d 2c20 5b30 2e35 2c20  .5, 0.8], [0.5, 
-0000b0d0: 302e 312c 2030 2e31 2c20 302e 315d 0d0a  0.1, 0.1, 0.1]..
-0000b0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0f0: 2020 2020 2020 2020 295b 305d 2c0d 0a20          )[0],.. 
-0000b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b110: 2020 2020 2020 2022 6d61 785f 6269 6e22         "max_bin"
-0000b120: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-0000b130: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0000b140: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-0000b150: 3135 3030 2c20 3130 3030 2c20 3235 352c  1500, 1000, 255,
-0000b160: 2035 305d 2c20 5b30 2e31 2c20 302e 322c   50], [0.1, 0.2,
-0000b170: 2030 2e36 2c20 302e 315d 0d0a 2020 2020   0.6, 0.1]..    
-0000b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b190: 2020 2020 295b 305d 2c0d 0a20 2020 2020      )[0],..     
-0000b1a0: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0000b1b0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000b1c0: 2020 207d 0d0a 2020 2020 2020 2020 656c     }..        el
-0000b1d0: 6966 206d 6f64 656c 203d 3d20 2752 6964  if model == 'Rid
-0000b1e0: 6765 273a 0d0a 2020 2020 2020 2020 2020  ge':..          
-0000b1f0: 2020 7061 7261 6d5f 6469 6374 203d 207b    param_dict = {
-0000b200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b210: 2020 226d 6f64 656c 223a 2027 5269 6467    "model": 'Ridg
-0000b220: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
-0000b230: 2020 2020 2022 6d6f 6465 6c5f 7061 7261       "model_para
-0000b240: 6d73 223a 207b 0d0a 2020 2020 2020 2020  ms": {..        
-0000b250: 2020 2020 2020 2020 2020 2020 2761 6c70              'alp
-0000b260: 6861 273a 2072 616e 646f 6d2e 6368 6f69  ha': random.choi
-0000b270: 6365 285b 312e 302c 2031 302e 302c 2030  ce([1.0, 10.0, 0
-0000b280: 2e31 2c20 302e 3030 3030 315d 292c 0d0a  .1, 0.00001]),..
-0000b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2a0: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
-0000b2b0: 7d0d 0a20 2020 2020 2020 2065 6c69 6620  }..        elif 
-0000b2c0: 6d6f 6465 6c20 3d3d 2027 4761 7573 7369  model == 'Gaussi
-0000b2d0: 616e 5072 6f63 6573 7352 6567 7265 7373  anProcessRegress
-0000b2e0: 6f72 273a 0d0a 2020 2020 2020 2020 2020  or':..          
-0000b2f0: 2020 7061 7261 6d5f 6469 6374 203d 207b    param_dict = {
-0000b300: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b310: 2020 226d 6f64 656c 223a 2027 4761 7573    "model": 'Gaus
-0000b320: 7369 616e 5072 6f63 6573 7352 6567 7265  sianProcessRegre
-0000b330: 7373 6f72 272c 0d0a 2020 2020 2020 2020  ssor',..        
-0000b340: 2020 2020 2020 2020 226d 6f64 656c 5f70          "model_p
-0000b350: 6172 616d 7322 3a20 7b0d 0a20 2020 2020  arams": {..     
-0000b360: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-0000b370: 616c 7068 6127 3a20 7261 6e64 6f6d 2e63  alpha': random.c
-0000b380: 686f 6963 6528 5b30 2e30 3030 3030 3030  hoice([0.0000000
-0000b390: 3030 312c 2030 2e30 3030 3031 2c20 315d  001, 0.00001, 1]
-0000b3a0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-0000b3b0: 2020 2020 2020 2020 276b 6572 6e65 6c27          'kernel'
-0000b3c0: 3a20 7261 6e64 6f6d 2e63 686f 6963 6573  : random.choices
-0000b3d0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0000b3e0: 2020 2020 2020 2020 2020 205b 4e6f 6e65             [None
-0000b3f0: 2c20 2244 6f74 5768 6974 6522 2c20 2257  , "DotWhite", "W
-0000b400: 6869 7465 222c 2022 5242 4622 2c20 2245  hite", "RBF", "E
-0000b410: 7870 5369 6e65 5371 7561 7265 6422 5d2c  xpSineSquared"],
-0000b420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b430: 2020 2020 2020 2020 2020 5b30 2e34 2c20            [0.4, 
-0000b440: 302e 312c 2030 2e31 2c20 302e 342c 2030  0.1, 0.1, 0.4, 0
-0000b450: 2e31 5d2c 0d0a 2020 2020 2020 2020 2020  .1],..          
-0000b460: 2020 2020 2020 2020 2020 295b 305d 2c0d            )[0],.
-0000b470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b480: 207d 2c0d 0a20 2020 2020 2020 2020 2020   },..           
-0000b490: 207d 0d0a 2020 2020 2020 2020 656c 6966   }..        elif
-0000b4a0: 206d 6f64 656c 203d 3d20 224d 756c 7469   model == "Multi
-0000b4b0: 6f75 7470 7574 4750 5222 3a0d 0a20 2020  outputGPR":..   
-0000b4c0: 2020 2020 2020 2020 206b 6572 6e65 6c20           kernel 
-0000b4d0: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-0000b4e0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0000b4f0: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
-0000b500: 2020 2020 2020 2020 2020 276c 696e 6561            'linea
-0000b510: 7227 2c0d 0a20 2020 2020 2020 2020 2020  r',..           
-0000b520: 2020 2020 2020 2020 2022 6578 706f 6e65           "expone
-0000b530: 6e74 6961 6c22 2c0d 0a20 2020 2020 2020  ntial",..       
-0000b540: 2020 2020 2020 2020 2020 2020 2022 7262               "rb
-0000b550: 6622 2c0d 0a20 2020 2020 2020 2020 2020  f",..           
-0000b560: 2020 2020 2020 2020 2022 706f 6c79 6e6f           "polyno
-0000b570: 6d69 616c 222c 0d0a 2020 2020 2020 2020  mial",..        
-0000b580: 2020 2020 2020 2020 2020 2020 2770 6572              'per
-0000b590: 696f 6469 6327 2c0d 0a20 2020 2020 2020  iodic',..       
-0000b5a0: 2020 2020 2020 2020 2020 2020 2022 6c6f               "lo
-0000b5b0: 6361 6c6c 795f 7065 7269 6f64 6963 222c  cally_periodic",
-0000b5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b5d0: 2020 5d2c 0d0a 2020 2020 2020 2020 2020    ],..          
-0000b5e0: 2020 2020 2020 5b30 2e31 2c20 302e 312c        [0.1, 0.1,
-0000b5f0: 2030 2e34 2c20 302e 322c 2030 2e30 312c   0.4, 0.2, 0.01,
-0000b600: 2030 2e30 315d 2c0d 0a20 2020 2020 2020   0.01],..       
-0000b610: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
-0000b620: 2020 2020 2020 2070 6172 616d 5f64 6963         param_dic
-0000b630: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
-0000b640: 2020 2020 2020 2022 6d6f 6465 6c22 3a20         "model": 
-0000b650: 274d 756c 7469 6f75 7470 7574 4750 5227  'MultioutputGPR'
-0000b660: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000b670: 2020 2022 6d6f 6465 6c5f 7061 7261 6d73     "model_params
-0000b680: 223a 207b 0d0a 2020 2020 2020 2020 2020  ": {..          
-0000b690: 2020 2020 2020 2020 2020 276e 6f69 7365            'noise
-0000b6a0: 5f76 6172 273a 2072 616e 646f 6d2e 6368  _var': random.ch
-0000b6b0: 6f69 6365 285b 3165 2d37 2c20 3165 2d34  oice([1e-7, 1e-4
-0000b6c0: 2c20 3165 2d33 2c20 3165 2d32 2c20 302e  , 1e-3, 1e-2, 0.
-0000b6d0: 312c 2031 2c20 3130 5d29 2c0d 0a20 2020  1, 1, 10]),..   
-0000b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6f0: 2027 6b65 726e 656c 273a 206b 6572 6e65   'kernel': kerne
-0000b700: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-0000b710: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-0000b720: 2020 2020 7d0d 0a20 2020 2020 2020 2020      }..         
-0000b730: 2020 2069 6620 6b65 726e 656c 2069 6e20     if kernel in 
-0000b740: 5b22 6578 706f 6e65 6e74 6961 6c22 2c20  ["exponential", 
-0000b750: 226c 6f63 616c 6c79 5f70 6572 696f 6469  "locally_periodi
-0000b760: 6322 2c20 2272 6266 222c 2022 7065 7269  c", "rbf", "peri
-0000b770: 6f64 6963 225d 3a0d 0a20 2020 2020 2020  odic"]:..       
-0000b780: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
-0000b790: 6963 745b 2767 616d 6d61 275d 203d 2072  ict['gamma'] = r
-0000b7a0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
-0000b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7c0: 2020 2020 5b30 2e31 2c20 312c 2031 302c      [0.1, 1, 10,
-0000b7d0: 2031 3030 5d2c 0d0a 2020 2020 2020 2020   100],..        
-0000b7e0: 2020 2020 2020 2020 2020 2020 5b30 2e32              [0.2
-0000b7f0: 2c20 302e 3035 2c20 302e 322c 2030 2e32  , 0.05, 0.2, 0.2
-0000b800: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000b810: 2020 2020 295b 305d 0d0a 2020 2020 2020      )[0]..      
-0000b820: 2020 2020 2020 6966 206b 6572 6e65 6c20        if kernel 
-0000b830: 696e 205b 226c 6f63 616c 6c79 5f70 6572  in ["locally_per
-0000b840: 696f 6469 6322 2c20 2270 6572 696f 6469  iodic", "periodi
-0000b850: 6322 5d3a 0d0a 2020 2020 2020 2020 2020  c"]:..          
-0000b860: 2020 2020 2020 7061 7261 6d5f 6469 6374        param_dict
-0000b870: 5b27 7027 5d20 3d20 7261 6e64 6f6d 2e63  ['p'] = random.c
-0000b880: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-0000b890: 2020 2020 2020 2020 2020 2020 205b 372c               [7,
-0000b8a0: 2031 322c 2033 3635 2e32 352c 2035 322c   12, 365.25, 52,
-0000b8b0: 2032 385d 2c20 5b30 2e38 2c20 302e 3135   28], [0.8, 0.15
-0000b8c0: 2c20 302e 3135 2c20 302e 3035 2c20 302e  , 0.15, 0.05, 0.
-0000b8d0: 3035 5d0d 0a20 2020 2020 2020 2020 2020  05]..           
-0000b8e0: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
-0000b8f0: 2020 2020 2020 2069 6620 6b65 726e 656c         if kernel
-0000b900: 203d 3d20 226c 6f63 616c 6c79 5f70 6572   == "locally_per
-0000b910: 696f 6469 6322 3a0d 0a20 2020 2020 2020  iodic":..       
-0000b920: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
-0000b930: 6963 745b 276c 616d 6264 615f 7072 696d  ict['lambda_prim
-0000b940: 6527 5d20 3d20 7261 6e64 6f6d 2e63 686f  e'] = random.cho
-0000b950: 6963 6528 5b30 2e31 2c20 312c 2031 305d  ice([0.1, 1, 10]
-0000b960: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-0000b970: 0d0a 2020 2020 2020 2020 2020 2020 6d69  ..            mi
-0000b980: 6e5f 7361 6d70 6c65 7320 3d20 6e70 2e72  n_samples = np.r
-0000b990: 616e 646f 6d2e 6368 6f69 6365 280d 0a20  andom.choice(.. 
-0000b9a0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-0000b9b0: 312c 2032 2c20 302e 3035 5d2c 2070 3d5b  1, 2, 0.05], p=[
-0000b9c0: 302e 352c 2030 2e33 2c20 302e 325d 2c20  0.5, 0.3, 0.2], 
-0000b9d0: 7369 7a65 3d31 0d0a 2020 2020 2020 2020  size=1..        
-0000b9e0: 2020 2020 292e 6974 656d 2829 0d0a 2020      ).item()..  
-0000b9f0: 2020 2020 2020 2020 2020 6d69 6e5f 7361            min_sa
-0000ba00: 6d70 6c65 7320 3d20 696e 7428 6d69 6e5f  mples = int(min_
-0000ba10: 7361 6d70 6c65 7329 2069 6620 6d69 6e5f  samples) if min_
-0000ba20: 7361 6d70 6c65 7320 696e 205b 325d 2065  samples in [2] e
-0000ba30: 6c73 6520 6d69 6e5f 7361 6d70 6c65 730d  lse min_samples.
-0000ba40: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
-0000ba50: 616d 5f64 6963 7420 3d20 7b0d 0a20 2020  am_dict = {..   
-0000ba60: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
-0000ba70: 6465 6c22 3a20 2744 6563 6973 696f 6e54  del": 'DecisionT
-0000ba80: 7265 6527 2c0d 0a20 2020 2020 2020 2020  ree',..         
-0000ba90: 2020 2020 2020 2022 6d6f 6465 6c5f 7061         "model_pa
-0000baa0: 7261 6d73 223a 207b 0d0a 2020 2020 2020  rams": {..      
-0000bab0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0000bac0: 6178 5f64 6570 7468 223a 206e 702e 7261  ax_depth": np.ra
-0000bad0: 6e64 6f6d 2e63 686f 6963 6528 0d0a 2020  ndom.choice(..  
-0000bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baf0: 2020 2020 2020 5b4e 6f6e 652c 2033 2c20        [None, 3, 
-0000bb00: 395d 2c20 703d 5b30 2e35 2c20 302e 332c  9], p=[0.5, 0.3,
-0000bb10: 2030 2e32 5d2c 2073 697a 653d 310d 0a20   0.2], size=1.. 
-0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb30: 2020 2029 2e69 7465 6d28 292c 0d0a 2020     ).item(),..  
-0000bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb50: 2020 226d 696e 5f73 616d 706c 6573 5f73    "min_samples_s
-0000bb60: 706c 6974 223a 206d 696e 5f73 616d 706c  plit": min_sampl
-0000bb70: 6573 2c0d 0a20 2020 2020 2020 2020 2020  es,..           
-0000bb80: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
-0000bb90: 2020 2020 207d 0d0a 2020 2020 656c 7365       }..    else
-0000bba0: 3a0d 0a20 2020 2020 2020 2070 6172 616d  :..        param
-0000bbb0: 5f64 6963 7420 3d20 7b22 6d6f 6465 6c22  _dict = {"model"
-0000bbc0: 3a20 6d6f 6465 6c2c 2022 6d6f 6465 6c5f  : model, "model_
-0000bbd0: 7061 7261 6d73 223a 207b 7d7d 0d0a 2020  params": {}}..  
-0000bbe0: 2020 7265 7475 726e 2070 6172 616d 5f64    return param_d
-0000bbf0: 6963 740d 0a0d 0a0d 0a63 6c61 7373 2052  ict......class R
-0000bc00: 6f6c 6c69 6e67 5265 6772 6573 7369 6f6e  ollingRegression
-0000bc10: 284d 6f64 656c 4f62 6a65 6374 293a 0d0a  (ModelObject):..
-0000bc20: 2020 2020 2222 2247 656e 6572 616c 2072      """General r
-0000bc30: 6567 7265 7373 696f 6e2d 6672 616d 6564  egression-framed
-0000bc40: 2061 7070 726f 6163 6820 746f 2066 6f72   approach to for
-0000bc50: 6563 6173 7469 6e67 2075 7369 6e67 2073  ecasting using s
-0000bc60: 6b6c 6561 726e 2e0d 0a0d 0a20 2020 2057  klearn.....    W
-0000bc70: 686f 2061 7265 2079 6f75 2077 686f 2061  ho are you who a
-0000bc80: 7265 2073 6f20 7769 7365 2069 6e20 7468  re so wise in th
-0000bc90: 6520 7761 7973 206f 6620 7363 6965 6e63  e ways of scienc
-0000bca0: 653f 0d0a 2020 2020 4920 616d 2041 7274  e?..    I am Art
-0000bcb0: 6875 722c 204b 696e 6720 6f66 2074 6865  hur, King of the
-0000bcc0: 2042 7269 746f 6e73 2e20 2d50 7974 686f   Britons. -Pytho
-0000bcd0: 6e0d 0a0d 0a20 2020 2041 7267 733a 0d0a  n....    Args:..
-0000bce0: 2020 2020 2020 2020 6e61 6d65 2028 7374          name (st
-0000bcf0: 7229 3a20 5374 7269 6e67 2074 6f20 6964  r): String to id
-0000bd00: 656e 7469 6679 2063 6c61 7373 0d0a 2020  entify class..  
-0000bd10: 2020 2020 2020 6672 6571 7565 6e63 7920        frequency 
-0000bd20: 2873 7472 293a 2053 7472 696e 6720 616c  (str): String al
-0000bd30: 6961 7320 6f66 2064 6174 6574 696d 6520  ias of datetime 
-0000bd40: 696e 6465 7820 6672 6571 7565 6e63 7920  index frequency 
-0000bd50: 6f72 2065 6c73 6520 2769 6e66 6572 270d  or else 'infer'.
-0000bd60: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
-0000bd70: 696f 6e5f 696e 7465 7276 616c 2028 666c  ion_interval (fl
-0000bd80: 6f61 7429 3a20 436f 6e66 6964 656e 6365  oat): Confidence
-0000bd90: 2069 6e74 6572 7661 6c20 666f 7220 7072   interval for pr
-0000bda0: 6f62 6162 696c 6973 7469 6320 666f 7265  obabilistic fore
-0000bdb0: 6361 7374 0d0a 2020 2020 2020 2020 686f  cast..        ho
-0000bdc0: 6c69 6461 7920 2862 6f6f 6c29 3a20 4966  liday (bool): If
-0000bdd0: 2074 7275 652c 2069 6e63 6c75 6465 2068   true, include h
-0000bde0: 6f6c 6964 6179 2066 6c61 6773 0d0a 2020  oliday flags..  
-0000bdf0: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
-0000be00: 5f74 7970 6520 2873 7472 293a 2074 7970  _type (str): typ
-0000be10: 6520 6f66 2072 6567 7265 7373 696f 6e20  e of regression 
-0000be20: 284e 6f6e 652c 2027 5573 6572 2729 0d0a  (None, 'User')..
-0000be30: 0d0a 2020 2020 2222 220d 0a0d 0a20 2020  ..    """....   
-0000be40: 2064 6566 205f 5f69 6e69 745f 5f28 0d0a   def __init__(..
-0000be50: 2020 2020 2020 2020 7365 6c66 2c0d 0a20          self,.. 
-0000be60: 2020 2020 2020 206e 616d 653a 2073 7472         name: str
-0000be70: 203d 2022 526f 6c6c 696e 6752 6567 7265   = "RollingRegre
-0000be80: 7373 696f 6e22 2c0d 0a20 2020 2020 2020  ssion",..       
-0000be90: 2066 7265 7175 656e 6379 3a20 7374 7220   frequency: str 
-0000bea0: 3d20 2769 6e66 6572 272c 0d0a 2020 2020  = 'infer',..    
-0000beb0: 2020 2020 7072 6564 6963 7469 6f6e 5f69      prediction_i
-0000bec0: 6e74 6572 7661 6c3a 2066 6c6f 6174 203d  nterval: float =
-0000bed0: 2030 2e39 2c0d 0a20 2020 2020 2020 2072   0.9,..        r
-0000bee0: 6567 7265 7373 696f 6e5f 7479 7065 3a20  egression_type: 
-0000bef0: 7374 7220 3d20 4e6f 6e65 2c0d 0a20 2020  str = None,..   
-0000bf00: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
-0000bf10: 6e74 7279 3a20 7374 7220 3d20 2755 5327  ntry: str = 'US'
-0000bf20: 2c0d 0a20 2020 2020 2020 2076 6572 626f  ,..        verbo
-0000bf30: 7365 3a20 696e 7420 3d20 302c 0d0a 2020  se: int = 0,..  
-0000bf40: 2020 2020 2020 7261 6e64 6f6d 5f73 6565        random_see
-0000bf50: 643a 2069 6e74 203d 2032 3032 302c 0d0a  d: int = 2020,..
-0000bf60: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
-0000bf70: 6f6e 5f6d 6f64 656c 3a20 6469 6374 203d  on_model: dict =
-0000bf80: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-0000bf90: 226d 6f64 656c 223a 2027 4578 7472 6154  "model": 'ExtraT
-0000bfa0: 7265 6573 272c 0d0a 2020 2020 2020 2020  rees',..        
-0000bfb0: 2020 2020 226d 6f64 656c 5f70 6172 616d      "model_param
-0000bfc0: 7322 3a20 7b7d 2c0d 0a20 2020 2020 2020  s": {},..       
-0000bfd0: 207d 2c0d 0a20 2020 2020 2020 2068 6f6c   },..        hol
-0000bfe0: 6964 6179 3a20 626f 6f6c 203d 2046 616c  iday: bool = Fal
-0000bff0: 7365 2c0d 0a20 2020 2020 2020 206d 6561  se,..        mea
-0000c000: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
-0000c010: 733a 2069 6e74 203d 2033 302c 0d0a 2020  s: int = 30,..  
-0000c020: 2020 2020 2020 6d61 6364 5f70 6572 696f        macd_perio
-0000c030: 6473 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ds: int = None,.
-0000c040: 0a20 2020 2020 2020 2073 7464 5f72 6f6c  .        std_rol
-0000c050: 6c69 6e67 5f70 6572 696f 6473 3a20 696e  ling_periods: in
-0000c060: 7420 3d20 372c 0d0a 2020 2020 2020 2020  t = 7,..        
-0000c070: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
-0000c080: 6f64 733a 2069 6e74 203d 2037 2c0d 0a20  ods: int = 7,.. 
-0000c090: 2020 2020 2020 206d 696e 5f72 6f6c 6c69         min_rolli
-0000c0a0: 6e67 5f70 6572 696f 6473 3a20 696e 7420  ng_periods: int 
-0000c0b0: 3d20 372c 0d0a 2020 2020 2020 2020 6577  = 7,..        ew
-0000c0c0: 6d5f 7661 725f 616c 7068 613a 2069 6e74  m_var_alpha: int
-0000c0d0: 203d 204e 6f6e 652c 0d0a 2020 2020 2020   = None,..      
-0000c0e0: 2020 7175 616e 7469 6c65 3930 5f72 6f6c    quantile90_rol
-0000c0f0: 6c69 6e67 5f70 6572 696f 6473 3a20 696e  ling_periods: in
-0000c100: 7420 3d20 4e6f 6e65 2c0d 0a20 2020 2020  t = None,..     
-0000c110: 2020 2071 7561 6e74 696c 6531 305f 726f     quantile10_ro
-0000c120: 6c6c 696e 675f 7065 7269 6f64 733a 2069  lling_periods: i
-0000c130: 6e74 203d 204e 6f6e 652c 0d0a 2020 2020  nt = None,..    
-0000c140: 2020 2020 6577 6d5f 616c 7068 613a 2066      ewm_alpha: f
-0000c150: 6c6f 6174 203d 2030 2e35 2c0d 0a20 2020  loat = 0.5,..   
-0000c160: 2020 2020 2061 6464 6974 696f 6e61 6c5f       additional_
-0000c170: 6c61 675f 7065 7269 6f64 733a 2069 6e74  lag_periods: int
-0000c180: 203d 2037 2c0d 0a20 2020 2020 2020 2061   = 7,..        a
-0000c190: 6273 5f65 6e65 7267 793a 2062 6f6f 6c20  bs_energy: bool 
-0000c1a0: 3d20 4661 6c73 652c 0d0a 2020 2020 2020  = False,..      
-0000c1b0: 2020 726f 6c6c 696e 675f 6175 746f 636f    rolling_autoco
-0000c1c0: 7272 5f70 6572 696f 6473 3a20 696e 7420  rr_periods: int 
-0000c1d0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-0000c1e0: 206e 6f6e 7a65 726f 5f6c 6173 745f 6e3a   nonzero_last_n:
-0000c1f0: 2069 6e74 203d 204e 6f6e 652c 0d0a 2020   int = None,..  
-0000c200: 2020 2020 2020 6164 645f 6461 7465 5f70        add_date_p
-0000c210: 6172 743a 2073 7472 203d 204e 6f6e 652c  art: str = None,
-0000c220: 0d0a 2020 2020 2020 2020 706f 6c79 6e6f  ..        polyno
-0000c230: 6d69 616c 5f64 6567 7265 653a 2069 6e74  mial_degree: int
-0000c240: 203d 204e 6f6e 652c 0d0a 2020 2020 2020   = None,..      
-0000c250: 2020 785f 7472 616e 7366 6f72 6d3a 2073    x_transform: s
-0000c260: 7472 203d 204e 6f6e 652c 0d0a 2020 2020  tr = None,..    
-0000c270: 2020 2020 7769 6e64 6f77 3a20 696e 7420      window: int 
-0000c280: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-0000c290: 206e 5f6a 6f62 733a 2069 6e74 203d 202d   n_jobs: int = -
-0000c2a0: 312c 0d0a 2020 2020 2020 2020 2a2a 6b77  1,..        **kw
-0000c2b0: 6172 6773 2c0d 0a20 2020 2029 3a0d 0a20  args,..    ):.. 
-0000c2c0: 2020 2020 2020 204d 6f64 656c 4f62 6a65         ModelObje
-0000c2d0: 6374 2e5f 5f69 6e69 745f 5f28 0d0a 2020  ct.__init__(..  
-0000c2e0: 2020 2020 2020 2020 2020 7365 6c66 2c0d            self,.
-0000c2f0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
-0000c300: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-0000c310: 6672 6571 7565 6e63 792c 0d0a 2020 2020  frequency,..    
-0000c320: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-0000c330: 6f6e 5f69 6e74 6572 7661 6c2c 0d0a 2020  on_interval,..  
-0000c340: 2020 2020 2020 2020 2020 7265 6772 6573            regres
-0000c350: 7369 6f6e 5f74 7970 653d 7265 6772 6573  sion_type=regres
-0000c360: 7369 6f6e 5f74 7970 652c 0d0a 2020 2020  sion_type,..    
-0000c370: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
-0000c380: 636f 756e 7472 793d 686f 6c69 6461 795f  country=holiday_
-0000c390: 636f 756e 7472 792c 0d0a 2020 2020 2020  country,..      
-0000c3a0: 2020 2020 2020 7261 6e64 6f6d 5f73 6565        random_see
-0000c3b0: 643d 7261 6e64 6f6d 5f73 6565 642c 0d0a  d=random_seed,..
-0000c3c0: 2020 2020 2020 2020 2020 2020 7665 7262              verb
-0000c3d0: 6f73 653d 7665 7262 6f73 652c 0d0a 2020  ose=verbose,..  
-0000c3e0: 2020 2020 2020 2020 2020 6e5f 6a6f 6273            n_jobs
-0000c3f0: 3d6e 5f6a 6f62 732c 0d0a 2020 2020 2020  =n_jobs,..      
-0000c400: 2020 290d 0a20 2020 2020 2020 2073 656c    )..        sel
-0000c410: 662e 7265 6772 6573 7369 6f6e 5f6d 6f64  f.regression_mod
-0000c420: 656c 203d 2072 6567 7265 7373 696f 6e5f  el = regression_
-0000c430: 6d6f 6465 6c0d 0a20 2020 2020 2020 2073  model..        s
-0000c440: 656c 662e 686f 6c69 6461 7920 3d20 686f  elf.holiday = ho
-0000c450: 6c69 6461 790d 0a20 2020 2020 2020 2073  liday..        s
-0000c460: 656c 662e 6d65 616e 5f72 6f6c 6c69 6e67  elf.mean_rolling
-0000c470: 5f70 6572 696f 6473 203d 206d 6561 6e5f  _periods = mean_
-0000c480: 726f 6c6c 696e 675f 7065 7269 6f64 730d  rolling_periods.
-0000c490: 0a20 2020 2020 2020 2069 6620 6d65 616e  .        if mean
-0000c4a0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0000c4b0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-0000c4c0: 2020 2020 2020 2073 656c 662e 6d61 6364         self.macd
-0000c4d0: 5f70 6572 696f 6473 203d 204e 6f6e 650d  _periods = None.
-0000c4e0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0000c4f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c500: 2e6d 6163 645f 7065 7269 6f64 7320 3d20  .macd_periods = 
-0000c510: 6d61 6364 5f70 6572 696f 6473 0d0a 2020  macd_periods..  
-0000c520: 2020 2020 2020 7365 6c66 2e73 7464 5f72        self.std_r
-0000c530: 6f6c 6c69 6e67 5f70 6572 696f 6473 203d  olling_periods =
-0000c540: 2073 7464 5f72 6f6c 6c69 6e67 5f70 6572   std_rolling_per
-0000c550: 696f 6473 0d0a 2020 2020 2020 2020 7365  iods..        se
-0000c560: 6c66 2e6d 6178 5f72 6f6c 6c69 6e67 5f70  lf.max_rolling_p
-0000c570: 6572 696f 6473 203d 206d 6178 5f72 6f6c  eriods = max_rol
-0000c580: 6c69 6e67 5f70 6572 696f 6473 0d0a 2020  ling_periods..  
-0000c590: 2020 2020 2020 7365 6c66 2e6d 696e 5f72        self.min_r
-0000c5a0: 6f6c 6c69 6e67 5f70 6572 696f 6473 203d  olling_periods =
-0000c5b0: 206d 696e 5f72 6f6c 6c69 6e67 5f70 6572   min_rolling_per
-0000c5c0: 696f 6473 0d0a 2020 2020 2020 2020 7365  iods..        se
-0000c5d0: 6c66 2e65 776d 5f76 6172 5f61 6c70 6861  lf.ewm_var_alpha
-0000c5e0: 203d 2065 776d 5f76 6172 5f61 6c70 6861   = ewm_var_alpha
-0000c5f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e71  ..        self.q
-0000c600: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
-0000c610: 675f 7065 7269 6f64 7320 3d20 7175 616e  g_periods = quan
-0000c620: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
-0000c630: 6572 696f 6473 0d0a 2020 2020 2020 2020  eriods..        
-0000c640: 7365 6c66 2e71 7561 6e74 696c 6531 305f  self.quantile10_
-0000c650: 726f 6c6c 696e 675f 7065 7269 6f64 7320  rolling_periods 
-0000c660: 3d20 7175 616e 7469 6c65 3130 5f72 6f6c  = quantile10_rol
-0000c670: 6c69 6e67 5f70 6572 696f 6473 0d0a 2020  ling_periods..  
-0000c680: 2020 2020 2020 7365 6c66 2e65 776d 5f61        self.ewm_a
-0000c690: 6c70 6861 203d 2065 776d 5f61 6c70 6861  lpha = ewm_alpha
-0000c6a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000c6b0: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
-0000c6c0: 7269 6f64 7320 3d20 6164 6469 7469 6f6e  riods = addition
-0000c6d0: 616c 5f6c 6167 5f70 6572 696f 6473 0d0a  al_lag_periods..
-0000c6e0: 2020 2020 2020 2020 7365 6c66 2e61 6273          self.abs
-0000c6f0: 5f65 6e65 7267 7920 3d20 6162 735f 656e  _energy = abs_en
-0000c700: 6572 6779 0d0a 2020 2020 2020 2020 7365  ergy..        se
-0000c710: 6c66 2e72 6f6c 6c69 6e67 5f61 7574 6f63  lf.rolling_autoc
-0000c720: 6f72 725f 7065 7269 6f64 7320 3d20 726f  orr_periods = ro
-0000c730: 6c6c 696e 675f 6175 746f 636f 7272 5f70  lling_autocorr_p
-0000c740: 6572 696f 6473 0d0a 2020 2020 2020 2020  eriods..        
-0000c750: 7365 6c66 2e6e 6f6e 7a65 726f 5f6c 6173  self.nonzero_las
-0000c760: 745f 6e20 3d20 6e6f 6e7a 6572 6f5f 6c61  t_n = nonzero_la
-0000c770: 7374 5f6e 0d0a 2020 2020 2020 2020 7365  st_n..        se
-0000c780: 6c66 2e61 6464 5f64 6174 655f 7061 7274  lf.add_date_part
-0000c790: 203d 2061 6464 5f64 6174 655f 7061 7274   = add_date_part
-0000c7a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
-0000c7b0: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
-0000c7c0: 203d 2070 6f6c 796e 6f6d 6961 6c5f 6465   = polynomial_de
-0000c7d0: 6772 6565 0d0a 2020 2020 2020 2020 7365  gree..        se
-0000c7e0: 6c66 2e78 5f74 7261 6e73 666f 726d 203d  lf.x_transform =
-0000c7f0: 2078 5f74 7261 6e73 666f 726d 0d0a 2020   x_transform..  
-0000c800: 2020 2020 2020 7365 6c66 2e77 696e 646f        self.windo
-0000c810: 7720 3d20 7769 6e64 6f77 0d0a 0d0a 2020  w = window....  
-0000c820: 2020 6465 6620 5f78 5f74 7261 6e73 666f    def _x_transfo
-0000c830: 726d 6572 2873 656c 6629 3a0d 0a20 2020  rmer(self):..   
-0000c840: 2020 2020 2069 6620 7365 6c66 2e78 5f74       if self.x_t
-0000c850: 7261 6e73 666f 726d 203d 3d20 2746 6173  ransform == 'Fas
-0000c860: 7449 4341 273a 0d0a 2020 2020 2020 2020  tICA':..        
-0000c870: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
-0000c880: 2e64 6563 6f6d 706f 7369 7469 6f6e 2069  .decomposition i
-0000c890: 6d70 6f72 7420 4661 7374 4943 410d 0a0d  mport FastICA...
-0000c8a0: 0a20 2020 2020 2020 2020 2020 2078 5f74  .            x_t
-0000c8b0: 7261 6e73 666f 726d 6572 203d 2046 6173  ransformer = Fas
-0000c8c0: 7449 4341 286e 5f63 6f6d 706f 6e65 6e74  tICA(n_component
-0000c8d0: 733d 4e6f 6e65 2c20 7261 6e64 6f6d 5f73  s=None, random_s
-0000c8e0: 7461 7465 3d32 3032 302c 2077 6869 7465  tate=2020, white
-0000c8f0: 6e3d 5472 7565 290d 0a20 2020 2020 2020  n=True)..       
-0000c900: 2065 6c69 6620 7365 6c66 2e78 5f74 7261   elif self.x_tra
-0000c910: 6e73 666f 726d 203d 3d20 274e 7973 7472  nsform == 'Nystr
-0000c920: 6f65 6d27 3a0d 0a20 2020 2020 2020 2020  oem':..         
-0000c930: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
-0000c940: 6b65 726e 656c 5f61 7070 726f 7869 6d61  kernel_approxima
-0000c950: 7469 6f6e 2069 6d70 6f72 7420 4e79 7374  tion import Nyst
-0000c960: 726f 656d 0d0a 0d0a 2020 2020 2020 2020  roem....        
-0000c970: 2020 2020 6861 6c66 5f73 697a 6520 3d20      half_size = 
-0000c980: 696e 7428 7365 6c66 2e73 6b74 7261 696e  int(self.sktrain
-0000c990: 6461 7461 2e73 6861 7065 5b30 5d20 2f20  data.shape[0] / 
-0000c9a0: 3229 202b 2031 0d0a 2020 2020 2020 2020  2) + 1..        
-0000c9b0: 2020 2020 6d61 785f 636f 6d70 203d 2032      max_comp = 2
-0000c9c0: 3030 0d0a 2020 2020 2020 2020 2020 2020  00..            
-0000c9d0: 6e5f 636f 6d70 203d 206d 6178 5f63 6f6d  n_comp = max_com
-0000c9e0: 7020 6966 2068 616c 665f 7369 7a65 203e  p if half_size >
-0000c9f0: 206d 6178 5f63 6f6d 7020 656c 7365 2068   max_comp else h
-0000ca00: 616c 665f 7369 7a65 0d0a 2020 2020 2020  alf_size..      
-0000ca10: 2020 2020 2020 785f 7472 616e 7366 6f72        x_transfor
-0000ca20: 6d65 7220 3d20 4e79 7374 726f 656d 280d  mer = Nystroem(.
-0000ca30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ca40: 206b 6572 6e65 6c3d 2772 6266 272c 2067   kernel='rbf', g
-0000ca50: 616d 6d61 3d30 2e32 2c20 7261 6e64 6f6d  amma=0.2, random
-0000ca60: 5f73 7461 7465 3d32 3032 302c 206e 5f63  _state=2020, n_c
-0000ca70: 6f6d 706f 6e65 6e74 733d 6e5f 636f 6d70  omponents=n_comp
-0000ca80: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
-0000ca90: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0000caa0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-0000cab0: 6c66 2e78 5f74 7261 6e73 666f 726d 203d  lf.x_transform =
-0000cac0: 2027 526d 5a65 726f 5661 7269 616e 6365   'RmZeroVariance
-0000cad0: 270d 0a20 2020 2020 2020 2020 2020 2066  '..            f
-0000cae0: 726f 6d20 736b 6c65 6172 6e2e 6665 6174  rom sklearn.feat
-0000caf0: 7572 655f 7365 6c65 6374 696f 6e20 696d  ure_selection im
-0000cb00: 706f 7274 2056 6172 6961 6e63 6554 6872  port VarianceThr
-0000cb10: 6573 686f 6c64 0d0a 0d0a 2020 2020 2020  eshold....      
-0000cb20: 2020 2020 2020 785f 7472 616e 7366 6f72        x_transfor
-0000cb30: 6d65 7220 3d20 5661 7269 616e 6365 5468  mer = VarianceTh
-0000cb40: 7265 7368 6f6c 6428 7468 7265 7368 6f6c  reshold(threshol
-0000cb50: 643d 302e 3029 0d0a 2020 2020 2020 2020  d=0.0)..        
-0000cb60: 7265 7475 726e 2078 5f74 7261 6e73 666f  return x_transfo
-0000cb70: 726d 6572 0d0a 0d0a 2020 2020 6465 6620  rmer....    def 
-0000cb80: 6669 7428 7365 6c66 2c20 6466 2c20 6675  fit(self, df, fu
-0000cb90: 7475 7265 5f72 6567 7265 7373 6f72 3d4e  ture_regressor=N
-0000cba0: 6f6e 6529 3a0d 0a20 2020 2020 2020 2022  one):..        "
-0000cbb0: 2222 5472 6169 6e20 616c 676f 7269 7468  ""Train algorith
-0000cbc0: 6d20 6769 7665 6e20 6461 7461 2073 7570  m given data sup
-0000cbd0: 706c 6965 642e 0d0a 0d0a 2020 2020 2020  plied.....      
-0000cbe0: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-0000cbf0: 2020 2020 2064 6620 2870 616e 6461 732e       df (pandas.
-0000cc00: 4461 7461 4672 616d 6529 3a20 4461 7465  DataFrame): Date
-0000cc10: 7469 6d65 2049 6e64 6578 6564 0d0a 2020  time Indexed..  
-0000cc20: 2020 2020 2020 2020 2020 6675 7475 7265            future
-0000cc30: 5f72 6567 7265 7373 6f72 2028 7061 6e64  _regressor (pand
-0000cc40: 6173 2e44 6174 6146 7261 6d65 206f 7220  as.DataFrame or 
-0000cc50: 5365 7269 6573 293a 2044 6174 6574 696d  Series): Datetim
-0000cc60: 6520 496e 6465 7865 640d 0a20 2020 2020  e Indexed..     
-0000cc70: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-0000cc80: 6466 203d 2073 656c 662e 6261 7369 635f  df = self.basic_
-0000cc90: 7072 6f66 696c 6528 6466 290d 0a20 2020  profile(df)..   
-0000cca0: 2020 2020 2073 656c 662e 6466 5f74 7261       self.df_tra
-0000ccb0: 696e 203d 2064 660d 0a0d 0a20 2020 2020  in = df....     
-0000ccc0: 2020 2023 2069 6620 6578 7465 726e 616c     # if external
-0000ccd0: 2072 6567 7265 7373 6f72 2c20 646f 2073   regressor, do s
-0000cce0: 6f6d 6520 6368 6563 6b20 7570 0d0a 2020  ome check up..  
-0000ccf0: 2020 2020 2020 6966 2073 656c 662e 7265        if self.re
-0000cd00: 6772 6573 7369 6f6e 5f74 7970 6520 6973  gression_type is
-0000cd10: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-0000cd20: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-0000cd30: 655f 7265 6772 6573 736f 7220 6973 204e  e_regressor is N
-0000cd40: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0000cd50: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-0000cd60: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
-0000cd70: 2020 2020 2020 2020 2020 2020 2022 6675               "fu
-0000cd80: 7475 7265 5f72 6567 7265 7373 6f72 206e  ture_regressor n
-0000cd90: 6f74 2073 7570 706c 6965 642c 206e 6563  ot supplied, nec
-0000cda0: 6573 7361 7279 2066 6f72 2072 6567 7265  essary for regre
-0000cdb0: 7373 696f 6e5f 7479 7065 220d 0a20 2020  ssion_type"..   
-0000cdc0: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-0000cdd0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000cde0: 2e72 6567 7265 7373 6f72 5f74 7261 696e  .regressor_train
-0000cdf0: 203d 2066 7574 7572 655f 7265 6772 6573   = future_regres
-0000ce00: 736f 720d 0a0d 0a20 2020 2020 2020 2023  sor....        #
-0000ce10: 2064 6566 696e 6520 5820 616e 6420 590d   define X and Y.
-0000ce20: 0a20 2020 2020 2020 2073 656c 662e 736b  .        self.sk
-0000ce30: 7472 6169 6e64 6174 6120 3d20 7365 6c66  traindata = self
-0000ce40: 2e64 665f 7472 6169 6e2e 6472 6f70 6e61  .df_train.dropna
-0000ce50: 2868 6f77 3d27 616c 6c27 2c20 6178 6973  (how='all', axis
-0000ce60: 3d30 290d 0a20 2020 2020 2020 2073 656c  =0)..        sel
-0000ce70: 662e 736b 7472 6169 6e64 6174 6120 3d20  f.sktraindata = 
-0000ce80: 7365 6c66 2e73 6b74 7261 696e 6461 7461  self.sktraindata
-0000ce90: 2e66 6669 6c6c 2829 2e62 6669 6c6c 2829  .ffill().bfill()
-0000cea0: 0d0a 2020 2020 2020 2020 7365 6c66 2e59  ..        self.Y
-0000ceb0: 203d 2073 656c 662e 736b 7472 6169 6e64   = self.sktraind
-0000cec0: 6174 612e 6472 6f70 2873 656c 662e 736b  ata.drop(self.sk
-0000ced0: 7472 6169 6e64 6174 612e 6865 6164 2832  traindata.head(2
-0000cee0: 292e 696e 6465 7829 0d0a 2020 2020 2020  ).index)..      
-0000cef0: 2020 7365 6c66 2e59 2e63 6f6c 756d 6e73    self.Y.columns
-0000cf00: 203d 205b 7820 666f 7220 7820 696e 2072   = [x for x in r
-0000cf10: 616e 6765 286c 656e 2873 656c 662e 592e  ange(len(self.Y.
-0000cf20: 636f 6c75 6d6e 7329 295d 0d0a 2020 2020  columns))]..    
-0000cf30: 2020 2020 7365 6c66 2e58 203d 2072 6f6c      self.X = rol
-0000cf40: 6c69 6e67 5f78 5f72 6567 7265 7373 6f72  ling_x_regressor
-0000cf50: 280d 0a20 2020 2020 2020 2020 2020 2073  (..            s
-0000cf60: 656c 662e 736b 7472 6169 6e64 6174 612c  elf.sktraindata,
-0000cf70: 0d0a 2020 2020 2020 2020 2020 2020 6d65  ..            me
-0000cf80: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-0000cf90: 6473 3d73 656c 662e 6d65 616e 5f72 6f6c  ds=self.mean_rol
-0000cfa0: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
-0000cfb0: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
-0000cfc0: 7065 7269 6f64 733d 7365 6c66 2e6d 6163  periods=self.mac
-0000cfd0: 645f 7065 7269 6f64 732c 0d0a 2020 2020  d_periods,..    
-0000cfe0: 2020 2020 2020 2020 7374 645f 726f 6c6c          std_roll
-0000cff0: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
-0000d000: 2e73 7464 5f72 6f6c 6c69 6e67 5f70 6572  .std_rolling_per
-0000d010: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-0000d020: 2020 206d 6178 5f72 6f6c 6c69 6e67 5f70     max_rolling_p
-0000d030: 6572 696f 6473 3d73 656c 662e 6d61 785f  eriods=self.max_
-0000d040: 726f 6c6c 696e 675f 7065 7269 6f64 732c  rolling_periods,
-0000d050: 0d0a 2020 2020 2020 2020 2020 2020 6d69  ..            mi
-0000d060: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
-0000d070: 733d 7365 6c66 2e6d 696e 5f72 6f6c 6c69  s=self.min_rolli
-0000d080: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
-0000d090: 2020 2020 2020 2020 2065 776d 5f76 6172           ewm_var
-0000d0a0: 5f61 6c70 6861 3d73 656c 662e 6577 6d5f  _alpha=self.ewm_
-0000d0b0: 7661 725f 616c 7068 612c 0d0a 2020 2020  var_alpha,..    
-0000d0c0: 2020 2020 2020 2020 7175 616e 7469 6c65          quantile
-0000d0d0: 3930 5f72 6f6c 6c69 6e67 5f70 6572 696f  90_rolling_perio
-0000d0e0: 6473 3d73 656c 662e 7175 616e 7469 6c65  ds=self.quantile
-0000d0f0: 3930 5f72 6f6c 6c69 6e67 5f70 6572 696f  90_rolling_perio
-0000d100: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
-0000d110: 2071 7561 6e74 696c 6531 305f 726f 6c6c   quantile10_roll
-0000d120: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
-0000d130: 2e71 7561 6e74 696c 6531 305f 726f 6c6c  .quantile10_roll
-0000d140: 696e 675f 7065 7269 6f64 732c 0d0a 2020  ing_periods,..  
-0000d150: 2020 2020 2020 2020 2020 6164 6469 7469            additi
-0000d160: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-0000d170: 3d73 656c 662e 6164 6469 7469 6f6e 616c  =self.additional
-0000d180: 5f6c 6167 5f70 6572 696f 6473 2c0d 0a20  _lag_periods,.. 
-0000d190: 2020 2020 2020 2020 2020 2065 776d 5f61             ewm_a
-0000d1a0: 6c70 6861 3d73 656c 662e 6577 6d5f 616c  lpha=self.ewm_al
-0000d1b0: 7068 612c 0d0a 2020 2020 2020 2020 2020  pha,..          
-0000d1c0: 2020 6162 735f 656e 6572 6779 3d73 656c    abs_energy=sel
-0000d1d0: 662e 6162 735f 656e 6572 6779 2c0d 0a20  f.abs_energy,.. 
-0000d1e0: 2020 2020 2020 2020 2020 2072 6f6c 6c69             rolli
-0000d1f0: 6e67 5f61 7574 6f63 6f72 725f 7065 7269  ng_autocorr_peri
-0000d200: 6f64 733d 7365 6c66 2e72 6f6c 6c69 6e67  ods=self.rolling
-0000d210: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
-0000d220: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000d230: 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e 3d73  nonzero_last_n=s
-0000d240: 656c 662e 6e6f 6e7a 6572 6f5f 6c61 7374  elf.nonzero_last
-0000d250: 5f6e 2c0d 0a20 2020 2020 2020 2020 2020  _n,..           
-0000d260: 2061 6464 5f64 6174 655f 7061 7274 3d73   add_date_part=s
-0000d270: 656c 662e 6164 645f 6461 7465 5f70 6172  elf.add_date_par
-0000d280: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0000d290: 686f 6c69 6461 793d 7365 6c66 2e68 6f6c  holiday=self.hol
-0000d2a0: 6964 6179 2c0d 0a20 2020 2020 2020 2020  iday,..         
-0000d2b0: 2020 2068 6f6c 6964 6179 5f63 6f75 6e74     holiday_count
-0000d2c0: 7279 3d73 656c 662e 686f 6c69 6461 795f  ry=self.holiday_
-0000d2d0: 636f 756e 7472 792c 0d0a 2020 2020 2020  country,..      
-0000d2e0: 2020 2020 2020 706f 6c79 6e6f 6d69 616c        polynomial
-0000d2f0: 5f64 6567 7265 653d 7365 6c66 2e70 6f6c  _degree=self.pol
-0000d300: 796e 6f6d 6961 6c5f 6465 6772 6565 2c0d  ynomial_degree,.
-0000d310: 0a20 2020 2020 2020 2020 2020 2077 696e  .            win
-0000d320: 646f 773d 7365 6c66 2e77 696e 646f 772c  dow=self.window,
-0000d330: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
-0000d340: 2020 2020 2069 6620 7365 6c66 2e72 6567       if self.reg
-0000d350: 7265 7373 696f 6e5f 7479 7065 203d 3d20  ression_type == 
-0000d360: 2755 7365 7227 3a0d 0a20 2020 2020 2020  'User':..       
-0000d370: 2020 2020 2073 656c 662e 5820 3d20 7064       self.X = pd
-0000d380: 2e63 6f6e 6361 7428 5b73 656c 662e 582c  .concat([self.X,
-0000d390: 2073 656c 662e 7265 6772 6573 736f 725f   self.regressor_
-0000d3a0: 7472 6169 6e5d 2c20 6178 6973 3d31 290d  train], axis=1).
-0000d3b0: 0a0d 0a20 2020 2020 2020 2069 6620 7365  ...        if se
-0000d3c0: 6c66 2e78 5f74 7261 6e73 666f 726d 2069  lf.x_transform i
-0000d3d0: 6e20 5b27 4661 7374 4943 4127 2c20 274e  n ['FastICA', 'N
-0000d3e0: 7973 7472 6f65 6d27 2c20 2752 6d5a 6572  ystroem', 'RmZer
-0000d3f0: 6f56 6172 6961 6e63 6527 5d3a 0d0a 2020  oVariance']:..  
-0000d400: 2020 2020 2020 2020 2020 7365 6c66 2e78            self.x
-0000d410: 5f74 7261 6e73 666f 726d 6572 203d 2073  _transformer = s
-0000d420: 656c 662e 5f78 5f74 7261 6e73 666f 726d  elf._x_transform
-0000d430: 6572 2829 0d0a 2020 2020 2020 2020 2020  er()..          
-0000d440: 2020 7365 6c66 2e78 5f74 7261 6e73 666f    self.x_transfo
-0000d450: 726d 6572 203d 2073 656c 662e 785f 7472  rmer = self.x_tr
-0000d460: 616e 7366 6f72 6d65 722e 6669 7428 7365  ansformer.fit(se
-0000d470: 6c66 2e58 290d 0a20 2020 2020 2020 2020  lf.X)..         
-0000d480: 2020 2073 656c 662e 5820 3d20 7064 2e44     self.X = pd.D
-0000d490: 6174 6146 7261 6d65 2873 656c 662e 785f  ataFrame(self.x_
-0000d4a0: 7472 616e 7366 6f72 6d65 722e 7472 616e  transformer.tran
-0000d4b0: 7366 6f72 6d28 7365 6c66 2e58 2929 0d0a  sform(self.X))..
-0000d4c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000d4d0: 2e58 203d 2073 656c 662e 582e 7265 706c  .X = self.X.repl
-0000d4e0: 6163 6528 5b6e 702e 696e 662c 202d 6e70  ace([np.inf, -np
-0000d4f0: 2e69 6e66 5d2c 2030 292e 6669 6c6c 6e61  .inf], 0).fillna
-0000d500: 2830 290d 0a20 2020 2020 2020 2022 2222  (0)..        """
-0000d510: 0d0a 2020 2020 2020 2020 5461 696c 2831  ..        Tail(1
-0000d520: 2920 6973 2064 726f 7070 6564 2074 6f20  ) is dropped to 
-0000d530: 7368 6966 7420 6461 7461 2074 6f20 6265  shift data to be
-0000d540: 636f 6d65 2066 6f72 6563 6173 7420 3120  come forecast 1 
-0000d550: 6168 6561 640d 0a20 2020 2020 2020 2061  ahead..        a
-0000d560: 6e64 2074 6865 2066 6972 7374 206f 6e65  nd the first one
-0000d570: 2069 7320 6472 6f70 7065 6420 6265 6361   is dropped beca
-0000d580: 7573 6520 6974 2077 696c 6c20 6c65 6173  use it will leas
-0000d590: 7420 6163 6375 7261 7465 6c79 2072 6570  t accurately rep
-0000d5a0: 7265 7365 6e74 0d0a 2020 2020 2020 2020  resent..        
-0000d5b0: 726f 6c6c 696e 6720 7661 6c75 6573 0d0a  rolling values..
-0000d5c0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
-0000d5d0: 2020 2020 2073 656c 662e 5820 3d20 7365       self.X = se
-0000d5e0: 6c66 2e58 2e64 726f 7028 7365 6c66 2e58  lf.X.drop(self.X
-0000d5f0: 2e74 6169 6c28 3129 2e69 6e64 6578 292e  .tail(1).index).
-0000d600: 6472 6f70 2873 656c 662e 582e 6865 6164  drop(self.X.head
-0000d610: 2831 292e 696e 6465 7829 0d0a 2020 2020  (1).index)..    
-0000d620: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000d630: 6528 7365 6c66 2e58 2c20 7064 2e44 6174  e(self.X, pd.Dat
-0000d640: 6146 7261 6d65 293a 0d0a 2020 2020 2020  aFrame):..      
-0000d650: 2020 2020 2020 7365 6c66 2e58 2e63 6f6c        self.X.col
-0000d660: 756d 6e73 203d 205b 7374 7228 7863 2920  umns = [str(xc) 
-0000d670: 666f 7220 7863 2069 6e20 7365 6c66 2e58  for xc in self.X
-0000d680: 2e63 6f6c 756d 6e73 5d0d 0a0d 0a20 2020  .columns]....   
-0000d690: 2020 2020 206d 756c 7469 6f75 7470 7574       multioutput
-0000d6a0: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-0000d6b0: 2069 6620 7365 6c66 2e59 2e6e 6469 6d20   if self.Y.ndim 
-0000d6c0: 3c20 323a 0d0a 2020 2020 2020 2020 2020  < 2:..          
-0000d6d0: 2020 6d75 6c74 696f 7574 7075 7420 3d20    multioutput = 
-0000d6e0: 4661 6c73 650d 0a20 2020 2020 2020 2065  False..        e
-0000d6f0: 6c69 6620 7365 6c66 2e59 2e73 6861 7065  lif self.Y.shape
-0000d700: 5b31 5d20 3c20 323a 0d0a 2020 2020 2020  [1] < 2:..      
-0000d710: 2020 2020 2020 6d75 6c74 696f 7574 7075        multioutpu
-0000d720: 7420 3d20 4661 6c73 650d 0a20 2020 2020  t = False..     
-0000d730: 2020 2023 2072 6574 7269 6576 6520 6d6f     # retrieve mo
-0000d740: 6465 6c20 6f62 6a65 6374 2074 6f20 7472  del object to tr
-0000d750: 6169 6e0d 0a20 2020 2020 2020 2073 656c  ain..        sel
-0000d760: 662e 6d6f 6465 6c20 3d20 7265 7472 6965  f.model = retrie
-0000d770: 7665 5f72 6567 7265 7373 6f72 280d 0a20  ve_regressor(.. 
-0000d780: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-0000d790: 7373 696f 6e5f 6d6f 6465 6c3d 7365 6c66  ssion_model=self
-0000d7a0: 2e72 6567 7265 7373 696f 6e5f 6d6f 6465  .regression_mode
-0000d7b0: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-0000d7c0: 7665 7262 6f73 653d 7365 6c66 2e76 6572  verbose=self.ver
-0000d7d0: 626f 7365 2c0d 0a20 2020 2020 2020 2020  bose,..         
-0000d7e0: 2020 2076 6572 626f 7365 5f62 6f6f 6c3d     verbose_bool=
-0000d7f0: 7365 6c66 2e76 6572 626f 7365 5f62 6f6f  self.verbose_boo
-0000d800: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
-0000d810: 7261 6e64 6f6d 5f73 6565 643d 7365 6c66  random_seed=self
-0000d820: 2e72 616e 646f 6d5f 7365 6564 2c0d 0a20  .random_seed,.. 
-0000d830: 2020 2020 2020 2020 2020 206e 5f6a 6f62             n_job
-0000d840: 733d 7365 6c66 2e6e 5f6a 6f62 732c 0d0a  s=self.n_jobs,..
-0000d850: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
-0000d860: 696f 7574 7075 743d 6d75 6c74 696f 7574  ioutput=multiout
-0000d870: 7075 742c 0d0a 2020 2020 2020 2020 290d  put,..        ).
-0000d880: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
-0000d890: 2020 2020 2020 7573 655f 6465 7669 6365        use_device
-0000d8a0: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
-0000d8b0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-0000d8c0: 2020 2020 6465 7669 6365 203d 2064 7063      device = dpc
-0000d8d0: 746c 2e53 7963 6c44 6576 6963 6528 2267  tl.SyclDevice("g
-0000d8e0: 7075 2c63 7075 2229 0d0a 2020 2020 2020  pu,cpu")..      
-0000d8f0: 2020 2020 2020 6966 2073 656c 662e 7665        if self.ve
-0000d900: 7262 6f73 6520 3e20 303a 0d0a 2020 2020  rbose > 0:..    
-0000d910: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0000d920: 7428 6622 7b27 4750 5527 2069 6620 6465  t(f"{'GPU' if de
-0000d930: 7669 6365 2e69 735f 6770 7520 656c 7365  vice.is_gpu else
-0000d940: 2027 4350 5527 7d20 7461 7267 6574 6564   'CPU'} targeted
-0000d950: 3a20 222c 2064 6576 6963 6529 0d0a 2020  : ", device)..  
-0000d960: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0000d970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d980: 785f 6465 7669 6365 203d 2066 726f 6d5f  x_device = from_
-0000d990: 6e75 6d70 7928 582c 2075 736d 5f74 7970  numpy(X, usm_typ
-0000d9a0: 653d 2764 6576 6963 6527 2c20 7175 6575  e='device', queu
-0000d9b0: 653d 6470 6374 6c2e 5379 636c 5175 6575  e=dpctl.SyclQueu
-0000d9c0: 6528 6465 7669 6365 2929 0d0a 2020 2020  e(device))..    
-0000d9d0: 2020 2020 2020 2020 2020 2020 795f 6465              y_de
-0000d9e0: 7669 6365 203d 2066 726f 6d5f 6e75 6d70  vice = from_nump
-0000d9f0: 7928 592c 2075 736d 5f74 7970 653d 2764  y(Y, usm_type='d
-0000da00: 6576 6963 6527 2c20 7175 6575 653d 6470  evice', queue=dp
-0000da10: 6374 6c2e 5379 636c 5175 6575 6528 6465  ctl.SyclQueue(de
-0000da20: 7669 6365 2929 0d0a 2020 2020 2020 2020  vice))..        
-0000da30: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-0000da40: 7469 6f6e 3a0d 0a20 2020 2020 2020 2020  tion:..         
-0000da50: 2020 2020 2020 2078 5f64 6576 6963 6520         x_device 
-0000da60: 3d20 6672 6f6d 5f6e 756d 7079 2858 2c20  = from_numpy(X, 
-0000da70: 7573 6d5f 7479 7065 3d27 6465 7669 6365  usm_type='device
-0000da80: 272c 2064 6576 6963 653d 6465 7669 6365  ', device=device
-0000da90: 2c20 7379 636c 5f71 7565 7565 3d64 7063  , sycl_queue=dpc
-0000daa0: 746c 2e53 7963 6c51 7565 7565 2864 6576  tl.SyclQueue(dev
-0000dab0: 6963 6529 290d 0a20 2020 2020 2020 2020  ice))..         
-0000dac0: 2020 2020 2020 2079 5f64 6576 6963 6520         y_device 
-0000dad0: 3d20 6672 6f6d 5f6e 756d 7079 2859 2c20  = from_numpy(Y, 
-0000dae0: 7573 6d5f 7479 7065 3d27 6465 7669 6365  usm_type='device
-0000daf0: 272c 2064 6576 6963 653d 6465 7669 6365  ', device=device
-0000db00: 2c20 7379 636c 5f71 7565 7565 3d64 7063  , sycl_queue=dpc
-0000db10: 746c 2e53 7963 6c51 7565 7565 2864 6576  tl.SyclQueue(dev
-0000db20: 6963 6529 290d 0a20 2020 2020 2020 2020  ice))..         
-0000db30: 2020 2075 7365 5f64 6576 6963 6520 3d20     use_device = 
-0000db40: 5472 7565 0d0a 2020 2020 2020 2020 6578  True..        ex
-0000db50: 6365 7074 2045 7863 6570 7469 6f6e 3a0d  cept Exception:.
-0000db60: 0a20 2020 2020 2020 2020 2020 2078 5f64  .            x_d
-0000db70: 6576 6963 6520 3d20 580d 0a20 2020 2020  evice = X..     
-0000db80: 2020 2020 2020 2079 5f64 6576 6963 6520         y_device 
-0000db90: 3d20 590d 0a20 2020 2020 2020 2022 2222  = Y..        """
-0000dba0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
-0000dbb0: 6f64 656c 203d 2073 656c 662e 6d6f 6465  odel = self.mode
-0000dbc0: 6c2e 6669 7428 7365 6c66 2e58 2c20 7365  l.fit(self.X, se
-0000dbd0: 6c66 2e59 290d 0a0d 0a20 2020 2020 2020  lf.Y)....       
-0000dbe0: 2073 656c 662e 6669 745f 7275 6e74 696d   self.fit_runtim
-0000dbf0: 6520 3d20 6461 7465 7469 6d65 2e64 6174  e = datetime.dat
-0000dc00: 6574 696d 652e 6e6f 7728 2920 2d20 7365  etime.now() - se
-0000dc10: 6c66 2e73 7461 7274 5469 6d65 0d0a 2020  lf.startTime..  
-0000dc20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000dc30: 660d 0a0d 0a20 2020 2064 6566 2070 7265  f....    def pre
-0000dc40: 6469 6374 280d 0a20 2020 2020 2020 2073  dict(..        s
-0000dc50: 656c 662c 0d0a 2020 2020 2020 2020 666f  elf,..        fo
-0000dc60: 7265 6361 7374 5f6c 656e 6774 683a 2069  recast_length: i
-0000dc70: 6e74 2c0d 0a20 2020 2020 2020 2066 7574  nt,..        fut
-0000dc80: 7572 655f 7265 6772 6573 736f 723d 4e6f  ure_regressor=No
-0000dc90: 6e65 2c0d 0a20 2020 2020 2020 206a 7573  ne,..        jus
-0000dca0: 745f 706f 696e 745f 666f 7265 6361 7374  t_point_forecast
-0000dcb0: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
-0000dcc0: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
-0000dcd0: 2022 2222 4765 6e65 7261 7465 2066 6f72   """Generate for
-0000dce0: 6563 6173 7420 6461 7461 2069 6d6d 6564  ecast data immed
-0000dcf0: 6961 7465 6c79 2066 6f6c 6c6f 7769 6e67  iately following
-0000dd00: 2064 6174 6573 206f 6620 696e 6465 7820   dates of index 
-0000dd10: 7375 7070 6c69 6564 2074 6f20 2e66 6974  supplied to .fit
-0000dd20: 2829 2e0d 0a0d 0a20 2020 2020 2020 2041  ().....        A
-0000dd30: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-0000dd40: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
-0000dd50: 6820 2869 6e74 293a 204e 756d 6265 7220  h (int): Number 
-0000dd60: 6f66 2070 6572 696f 6473 206f 6620 6461  of periods of da
-0000dd70: 7461 2074 6f20 666f 7265 6361 7374 2061  ta to forecast a
-0000dd80: 6865 6164 0d0a 2020 2020 2020 2020 2020  head..          
-0000dd90: 2020 7265 6772 6573 736f 7220 286e 756d    regressor (num
-0000dda0: 7079 2e41 7272 6179 293a 2061 6464 6974  py.Array): addit
-0000ddb0: 696f 6e61 6c20 7265 6772 6573 736f 720d  ional regressor.
-0000ddc0: 0a20 2020 2020 2020 2020 2020 206a 7573  .            jus
-0000ddd0: 745f 706f 696e 745f 666f 7265 6361 7374  t_point_forecast
-0000dde0: 2028 626f 6f6c 293a 2049 6620 5472 7565   (bool): If True
-0000ddf0: 2c20 7265 7475 726e 2061 2070 616e 6461  , return a panda
-0000de00: 732e 4461 7461 4672 616d 6520 6f66 206a  s.DataFrame of j
-0000de10: 7573 7420 706f 696e 7420 666f 7265 6361  ust point foreca
-0000de20: 7374 730d 0a0d 0a20 2020 2020 2020 2052  sts....        R
-0000de30: 6574 7572 6e73 3a0d 0a20 2020 2020 2020  eturns:..       
-0000de40: 2020 2020 2045 6974 6865 7220 6120 5072       Either a Pr
-0000de50: 6564 6963 7469 6f6e 4f62 6a65 6374 206f  edictionObject o
-0000de60: 6620 666f 7265 6361 7374 7320 616e 6420  f forecasts and 
-0000de70: 6d65 7461 6461 7461 2c20 6f72 0d0a 2020  metadata, or..  
-0000de80: 2020 2020 2020 2020 2020 6966 206a 7573            if jus
-0000de90: 745f 706f 696e 745f 666f 7265 6361 7374  t_point_forecast
-0000dea0: 203d 3d20 5472 7565 2c20 6120 6461 7461   == True, a data
-0000deb0: 6672 616d 6520 6f66 2070 6f69 6e74 2066  frame of point f
-0000dec0: 6f72 6563 6173 7473 0d0a 2020 2020 2020  orecasts..      
-0000ded0: 2020 2222 220d 0a20 2020 2020 2020 2070    """..        p
-0000dee0: 7265 6469 6374 5374 6172 7454 696d 6520  redictStartTime 
-0000def0: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
-0000df00: 696d 652e 6e6f 7728 290d 0a20 2020 2020  ime.now()..     
-0000df10: 2020 2069 6e64 6578 203d 2073 656c 662e     index = self.
-0000df20: 6372 6561 7465 5f66 6f72 6563 6173 745f  create_forecast_
-0000df30: 696e 6465 7828 666f 7265 6361 7374 5f6c  index(forecast_l
-0000df40: 656e 6774 683d 666f 7265 6361 7374 5f6c  ength=forecast_l
-0000df50: 656e 6774 6829 0d0a 2020 2020 2020 2020  ength)..        
-0000df60: 6966 2073 656c 662e 7265 6772 6573 7369  if self.regressi
-0000df70: 6f6e 5f74 7970 6520 696e 205b 2755 7365  on_type in ['Use
-0000df80: 7227 2c20 2775 7365 7227 5d3a 0d0a 2020  r', 'user']:..  
-0000df90: 2020 2020 2020 2020 2020 636f 6d70 6c65            comple
-0000dfa0: 7465 5f72 6567 7265 7373 6f72 203d 2070  te_regressor = p
-0000dfb0: 642e 636f 6e63 6174 280d 0a20 2020 2020  d.concat(..     
-0000dfc0: 2020 2020 2020 2020 2020 205b 7365 6c66             [self
-0000dfd0: 2e72 6567 7265 7373 6f72 5f74 7261 696e  .regressor_train
-0000dfe0: 2c20 6675 7475 7265 5f72 6567 7265 7373  , future_regress
-0000dff0: 6f72 5d2c 2061 7869 733d 300d 0a20 2020  or], axis=0..   
-0000e000: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
-0000e010: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
-0000e020: 6e64 6578 203d 2073 656c 662e 6466 5f74  ndex = self.df_t
-0000e030: 7261 696e 2e69 6e64 6578 2e61 7070 656e  rain.index.appen
-0000e040: 6428 696e 6465 7829 0d0a 2020 2020 2020  d(index)..      
-0000e050: 2020 666f 7265 6361 7374 203d 2070 642e    forecast = pd.
-0000e060: 4461 7461 4672 616d 6528 290d 0a20 2020  DataFrame()..   
-0000e070: 2020 2020 2073 656c 662e 736b 7472 6169       self.sktrai
-0000e080: 6e64 6174 612e 636f 6c75 6d6e 7320 3d20  ndata.columns = 
-0000e090: 5b78 2066 6f72 2078 2069 6e20 7261 6e67  [x for x in rang
-0000e0a0: 6528 6c65 6e28 7365 6c66 2e73 6b74 7261  e(len(self.sktra
-0000e0b0: 696e 6461 7461 2e63 6f6c 756d 6e73 2929  indata.columns))
-0000e0c0: 5d0d 0a0d 0a20 2020 2020 2020 2023 2066  ]....        # f
-0000e0d0: 6f72 6563 6173 742c 2031 2073 7465 7020  orecast, 1 step 
-0000e0e0: 6168 6561 642c 2074 6865 6e20 616e 6f74  ahead, then anot
-0000e0f0: 6865 722c 2061 6e64 2073 6f20 6f6e 0d0a  her, and so on..
-0000e100: 2020 2020 2020 2020 666f 7220 7820 696e          for x in
-0000e110: 2072 616e 6765 2866 6f72 6563 6173 745f   range(forecast_
-0000e120: 6c65 6e67 7468 293a 0d0a 2020 2020 2020  length):..      
-0000e130: 2020 2020 2020 785f 6461 7420 3d20 726f        x_dat = ro
-0000e140: 6c6c 696e 675f 785f 7265 6772 6573 736f  lling_x_regresso
-0000e150: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-0000e160: 2020 2020 7365 6c66 2e73 6b74 7261 696e      self.sktrain
-0000e170: 6461 7461 2c0d 0a20 2020 2020 2020 2020  data,..         
-0000e180: 2020 2020 2020 206d 6561 6e5f 726f 6c6c         mean_roll
-0000e190: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
-0000e1a0: 2e6d 6561 6e5f 726f 6c6c 696e 675f 7065  .mean_rolling_pe
-0000e1b0: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0000e1c0: 2020 2020 2020 2020 6d61 6364 5f70 6572          macd_per
-0000e1d0: 696f 6473 3d73 656c 662e 6d61 6364 5f70  iods=self.macd_p
-0000e1e0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0000e1f0: 2020 2020 2020 2020 2073 7464 5f72 6f6c           std_rol
-0000e200: 6c69 6e67 5f70 6572 696f 6473 3d73 656c  ling_periods=sel
-0000e210: 662e 7374 645f 726f 6c6c 696e 675f 7065  f.std_rolling_pe
-0000e220: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0000e230: 2020 2020 2020 2020 6d61 785f 726f 6c6c          max_roll
-0000e240: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
-0000e250: 2e6d 6178 5f72 6f6c 6c69 6e67 5f70 6572  .max_rolling_per
-0000e260: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-0000e270: 2020 2020 2020 206d 696e 5f72 6f6c 6c69         min_rolli
-0000e280: 6e67 5f70 6572 696f 6473 3d73 656c 662e  ng_periods=self.
-0000e290: 6d69 6e5f 726f 6c6c 696e 675f 7065 7269  min_rolling_peri
-0000e2a0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-0000e2b0: 2020 2020 2020 6577 6d5f 7661 725f 616c        ewm_var_al
-0000e2c0: 7068 613d 7365 6c66 2e65 776d 5f76 6172  pha=self.ewm_var
-0000e2d0: 5f61 6c70 6861 2c0d 0a20 2020 2020 2020  _alpha,..       
-0000e2e0: 2020 2020 2020 2020 2071 7561 6e74 696c           quantil
-0000e2f0: 6539 305f 726f 6c6c 696e 675f 7065 7269  e90_rolling_peri
-0000e300: 6f64 733d 7365 6c66 2e71 7561 6e74 696c  ods=self.quantil
-0000e310: 6539 305f 726f 6c6c 696e 675f 7065 7269  e90_rolling_peri
-0000e320: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-0000e330: 2020 2020 2020 7175 616e 7469 6c65 3130        quantile10
-0000e340: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0000e350: 3d73 656c 662e 7175 616e 7469 6c65 3130  =self.quantile10
-0000e360: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0000e370: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000e380: 2020 2061 6464 6974 696f 6e61 6c5f 6c61     additional_la
-0000e390: 675f 7065 7269 6f64 733d 7365 6c66 2e61  g_periods=self.a
-0000e3a0: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
-0000e3b0: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0000e3c0: 2020 2020 2020 2020 6577 6d5f 616c 7068          ewm_alph
-0000e3d0: 613d 7365 6c66 2e65 776d 5f61 6c70 6861  a=self.ewm_alpha
-0000e3e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000e3f0: 2020 2061 6273 5f65 6e65 7267 793d 7365     abs_energy=se
-0000e400: 6c66 2e61 6273 5f65 6e65 7267 792c 0d0a  lf.abs_energy,..
-0000e410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e420: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
-0000e430: 5f70 6572 696f 6473 3d73 656c 662e 726f  _periods=self.ro
-0000e440: 6c6c 696e 675f 6175 746f 636f 7272 5f70  lling_autocorr_p
-0000e450: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0000e460: 2020 2020 2020 2020 206e 6f6e 7a65 726f           nonzero
-0000e470: 5f6c 6173 745f 6e3d 7365 6c66 2e6e 6f6e  _last_n=self.non
-0000e480: 7a65 726f 5f6c 6173 745f 6e2c 0d0a 2020  zero_last_n,..  
-0000e490: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-0000e4a0: 645f 6461 7465 5f70 6172 743d 7365 6c66  d_date_part=self
-0000e4b0: 2e61 6464 5f64 6174 655f 7061 7274 2c0d  .add_date_part,.
-0000e4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e4d0: 2068 6f6c 6964 6179 3d73 656c 662e 686f   holiday=self.ho
-0000e4e0: 6c69 6461 792c 0d0a 2020 2020 2020 2020  liday,..        
-0000e4f0: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
-0000e500: 636f 756e 7472 793d 7365 6c66 2e68 6f6c  country=self.hol
-0000e510: 6964 6179 5f63 6f75 6e74 7279 2c0d 0a20  iday_country,.. 
-0000e520: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0000e530: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
-0000e540: 3d73 656c 662e 706f 6c79 6e6f 6d69 616c  =self.polynomial
-0000e550: 5f64 6567 7265 652c 0d0a 2020 2020 2020  _degree,..      
-0000e560: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0000e570: 2020 2020 2069 6620 7365 6c66 2e72 6567       if self.reg
-0000e580: 7265 7373 696f 6e5f 7479 7065 203d 3d20  ression_type == 
-0000e590: 2755 7365 7227 3a0d 0a20 2020 2020 2020  'User':..       
-0000e5a0: 2020 2020 2020 2020 2078 5f64 6174 203d           x_dat =
-0000e5b0: 2070 642e 636f 6e63 6174 280d 0a20 2020   pd.concat(..   
-0000e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e5d0: 205b 785f 6461 742c 2063 6f6d 706c 6574   [x_dat, complet
-0000e5e0: 655f 7265 6772 6573 736f 722e 6865 6164  e_regressor.head
-0000e5f0: 2878 5f64 6174 2e73 6861 7065 5b30 5d29  (x_dat.shape[0])
-0000e600: 5d2c 2061 7869 733d 310d 0a20 2020 2020  ], axis=1..     
-0000e610: 2020 2020 2020 2020 2020 2029 2e66 696c             ).fil
-0000e620: 6c6e 6128 3029 0d0a 2020 2020 2020 2020  lna(0)..        
-0000e630: 2020 2020 6966 2073 656c 662e 785f 7472      if self.x_tr
-0000e640: 616e 7366 6f72 6d20 696e 205b 2746 6173  ansform in ['Fas
-0000e650: 7449 4341 272c 2027 4e79 7374 726f 656d  tICA', 'Nystroem
-0000e660: 272c 2027 526d 5a65 726f 5661 7269 616e  ', 'RmZeroVarian
-0000e670: 6365 275d 3a0d 0a20 2020 2020 2020 2020  ce']:..         
-0000e680: 2020 2020 2020 2078 5f64 6174 203d 2070         x_dat = p
-0000e690: 642e 4461 7461 4672 616d 6528 7365 6c66  d.DataFrame(self
-0000e6a0: 2e78 5f74 7261 6e73 666f 726d 6572 2e74  .x_transformer.t
-0000e6b0: 7261 6e73 666f 726d 2878 5f64 6174 2929  ransform(x_dat))
-0000e6c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000e6d0: 2020 785f 6461 7420 3d20 785f 6461 742e    x_dat = x_dat.
-0000e6e0: 7265 706c 6163 6528 5b6e 702e 696e 662c  replace([np.inf,
-0000e6f0: 202d 6e70 2e69 6e66 5d2c 2030 292e 6669   -np.inf], 0).fi
-0000e700: 6c6c 6e61 2830 290d 0a20 2020 2020 2020  llna(0)..       
-0000e710: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000e720: 6365 2878 5f64 6174 2c20 7064 2e44 6174  ce(x_dat, pd.Dat
-0000e730: 6146 7261 6d65 293a 0d0a 2020 2020 2020  aFrame):..      
-0000e740: 2020 2020 2020 2020 2020 785f 6461 742e            x_dat.
-0000e750: 636f 6c75 6d6e 7320 3d20 5b73 7472 2878  columns = [str(x
-0000e760: 6329 2066 6f72 2078 6320 696e 2078 5f64  c) for xc in x_d
-0000e770: 6174 2e63 6f6c 756d 6e73 5d0d 0a0d 0a20  at.columns].... 
-0000e780: 2020 2020 2020 2020 2020 2072 6650 7265             rfPre
-0000e790: 6420 3d20 7064 2e44 6174 6146 7261 6d65  d = pd.DataFrame
-0000e7a0: 2873 656c 662e 6d6f 6465 6c2e 7072 6564  (self.model.pred
-0000e7b0: 6963 7428 785f 6461 742e 7461 696c 2831  ict(x_dat.tail(1
-0000e7c0: 292e 746f 5f6e 756d 7079 2829 2929 0d0a  ).to_numpy()))..
-0000e7d0: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-0000e7e0: 7265 6361 7374 203d 2070 642e 636f 6e63  recast = pd.conc
-0000e7f0: 6174 285b 666f 7265 6361 7374 2c20 7266  at([forecast, rf
-0000e800: 5072 6564 5d2c 2061 7869 733d 302c 2069  Pred], axis=0, i
-0000e810: 676e 6f72 655f 696e 6465 783d 5472 7565  gnore_index=True
-0000e820: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000e830: 656c 662e 736b 7472 6169 6e64 6174 6120  elf.sktraindata 
-0000e840: 3d20 7064 2e63 6f6e 6361 7428 0d0a 2020  = pd.concat(..  
-0000e850: 2020 2020 2020 2020 2020 2020 2020 5b73                [s
-0000e860: 656c 662e 736b 7472 6169 6e64 6174 612c  elf.sktraindata,
-0000e870: 2072 6650 7265 645d 2c20 6178 6973 3d30   rfPred], axis=0
-0000e880: 2c20 6967 6e6f 7265 5f69 6e64 6578 3d54  , ignore_index=T
-0000e890: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
-0000e8a0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-0000e8b0: 7365 6c66 2e73 6b74 7261 696e 6461 7461  self.sktraindata
-0000e8c0: 2e69 6e64 6578 203d 2063 6f6d 6269 6e65  .index = combine
-0000e8d0: 645f 696e 6465 785b 3a20 6c65 6e28 7365  d_index[: len(se
-0000e8e0: 6c66 2e73 6b74 7261 696e 6461 7461 2e69  lf.sktraindata.i
-0000e8f0: 6e64 6578 295d 0d0a 0d0a 2020 2020 2020  ndex)]....      
-0000e900: 2020 666f 7265 6361 7374 2e63 6f6c 756d    forecast.colum
-0000e910: 6e73 203d 2073 656c 662e 636f 6c75 6d6e  ns = self.column
-0000e920: 5f6e 616d 6573 0d0a 2020 2020 2020 2020  _names..        
-0000e930: 666f 7265 6361 7374 2e69 6e64 6578 203d  forecast.index =
-0000e940: 2069 6e64 6578 0d0a 0d0a 2020 2020 2020   index....      
-0000e950: 2020 6966 206a 7573 745f 706f 696e 745f    if just_point_
-0000e960: 666f 7265 6361 7374 3a0d 0a20 2020 2020  forecast:..     
-0000e970: 2020 2020 2020 2072 6574 7572 6e20 666f         return fo
-0000e980: 7265 6361 7374 0d0a 2020 2020 2020 2020  recast..        
-0000e990: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0000e9a0: 2020 2075 7070 6572 5f66 6f72 6563 6173     upper_forecas
-0000e9b0: 742c 206c 6f77 6572 5f66 6f72 6563 6173  t, lower_forecas
-0000e9c0: 7420 3d20 506f 696e 745f 746f 5f50 726f  t = Point_to_Pro
-0000e9d0: 6261 6269 6c69 7479 280d 0a20 2020 2020  bability(..     
-0000e9e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e9f0: 6466 5f74 7261 696e 2c0d 0a20 2020 2020  df_train,..     
-0000ea00: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
-0000ea10: 6173 742c 0d0a 2020 2020 2020 2020 2020  ast,..          
-0000ea20: 2020 2020 2020 6d65 7468 6f64 3d27 696e        method='in
-0000ea30: 6665 7272 6564 5f6e 6f72 6d61 6c27 2c0d  ferred_normal',.
-0000ea40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ea50: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
-0000ea60: 7276 616c 3d73 656c 662e 7072 6564 6963  rval=self.predic
-0000ea70: 7469 6f6e 5f69 6e74 6572 7661 6c2c 0d0a  tion_interval,..
-0000ea80: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0000ea90: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
-0000eaa0: 6469 6374 5f72 756e 7469 6d65 203d 2064  dict_runtime = d
-0000eab0: 6174 6574 696d 652e 6461 7465 7469 6d65  atetime.datetime
-0000eac0: 2e6e 6f77 2829 202d 2070 7265 6469 6374  .now() - predict
-0000ead0: 5374 6172 7454 696d 650d 0a20 2020 2020  StartTime..     
-0000eae0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-0000eaf0: 6e20 3d20 5072 6564 6963 7469 6f6e 4f62  n = PredictionOb
-0000eb00: 6a65 6374 280d 0a20 2020 2020 2020 2020  ject(..         
-0000eb10: 2020 2020 2020 206d 6f64 656c 5f6e 616d         model_nam
-0000eb20: 653d 7365 6c66 2e6e 616d 652c 0d0a 2020  e=self.name,..  
-0000eb30: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0000eb40: 7265 6361 7374 5f6c 656e 6774 683d 666f  recast_length=fo
-0000eb50: 7265 6361 7374 5f6c 656e 6774 682c 0d0a  recast_length,..
-0000eb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eb70: 666f 7265 6361 7374 5f69 6e64 6578 3d66  forecast_index=f
-0000eb80: 6f72 6563 6173 742e 696e 6465 782c 0d0a  orecast.index,..
-0000eb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eba0: 666f 7265 6361 7374 5f63 6f6c 756d 6e73  forecast_columns
-0000ebb0: 3d66 6f72 6563 6173 742e 636f 6c75 6d6e  =forecast.column
-0000ebc0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000ebd0: 2020 2020 6c6f 7765 725f 666f 7265 6361      lower_foreca
-0000ebe0: 7374 3d6c 6f77 6572 5f66 6f72 6563 6173  st=lower_forecas
-0000ebf0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0000ec00: 2020 2020 666f 7265 6361 7374 3d66 6f72      forecast=for
-0000ec10: 6563 6173 742c 0d0a 2020 2020 2020 2020  ecast,..        
-0000ec20: 2020 2020 2020 2020 7570 7065 725f 666f          upper_fo
-0000ec30: 7265 6361 7374 3d75 7070 6572 5f66 6f72  recast=upper_for
-0000ec40: 6563 6173 742c 0d0a 2020 2020 2020 2020  ecast,..        
-0000ec50: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-0000ec60: 6f6e 5f69 6e74 6572 7661 6c3d 7365 6c66  on_interval=self
-0000ec70: 2e70 7265 6469 6374 696f 6e5f 696e 7465  .prediction_inte
-0000ec80: 7276 616c 2c0d 0a20 2020 2020 2020 2020  rval,..         
-0000ec90: 2020 2020 2020 2070 7265 6469 6374 5f72         predict_r
-0000eca0: 756e 7469 6d65 3d70 7265 6469 6374 5f72  untime=predict_r
-0000ecb0: 756e 7469 6d65 2c0d 0a20 2020 2020 2020  untime,..       
-0000ecc0: 2020 2020 2020 2020 2066 6974 5f72 756e           fit_run
-0000ecd0: 7469 6d65 3d73 656c 662e 6669 745f 7275  time=self.fit_ru
-0000ece0: 6e74 696d 652c 0d0a 2020 2020 2020 2020  ntime,..        
-0000ecf0: 2020 2020 2020 2020 6d6f 6465 6c5f 7061          model_pa
-0000ed00: 7261 6d65 7465 7273 3d73 656c 662e 6765  rameters=self.ge
-0000ed10: 745f 7061 7261 6d73 2829 2c0d 0a20 2020  t_params(),..   
-0000ed20: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-0000ed30: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-0000ed40: 7265 6469 6374 696f 6e0d 0a0d 0a20 2020  rediction....   
-0000ed50: 2064 6566 2067 6574 5f6e 6577 5f70 6172   def get_new_par
-0000ed60: 616d 7328 7365 6c66 2c20 6d65 7468 6f64  ams(self, method
-0000ed70: 3a20 7374 7220 3d20 2772 616e 646f 6d27  : str = 'random'
-0000ed80: 293a 0d0a 2020 2020 2020 2020 2222 2252  ):..        """R
-0000ed90: 6574 7572 6e20 6469 6374 206f 6620 6e65  eturn dict of ne
-0000eda0: 7720 7061 7261 6d65 7465 7273 2066 6f72  w parameters for
-0000edb0: 2070 6172 616d 6574 6572 2074 756e 696e   parameter tunin
-0000edc0: 672e 2222 220d 0a20 2020 2020 2020 2072  g."""..        r
-0000edd0: 6f6c 6c69 6e67 5f6d 6f64 656c 5f64 6963  olling_model_dic
-0000ede0: 7420 3d20 736b 6c65 6172 6e5f 6d6f 6465  t = sklearn_mode
-0000edf0: 6c5f 6469 6374 2e63 6f70 7928 290d 0a20  l_dict.copy().. 
-0000ee00: 2020 2020 2020 2064 656c 2072 6f6c 6c69         del rolli
-0000ee10: 6e67 5f6d 6f64 656c 5f64 6963 745b 274b  ng_model_dict['K
-0000ee20: 4e4e 275d 0d0a 2020 2020 2020 2020 6d6f  NN']..        mo
-0000ee30: 6465 6c5f 6368 6f69 6365 203d 2067 656e  del_choice = gen
-0000ee40: 6572 6174 655f 7265 6772 6573 736f 725f  erate_regressor_
-0000ee50: 7061 7261 6d73 286d 6f64 656c 5f64 6963  params(model_dic
-0000ee60: 743d 726f 6c6c 696e 675f 6d6f 6465 6c5f  t=rolling_model_
-0000ee70: 6469 6374 290d 0a20 2020 2020 2020 206d  dict)..        m
-0000ee80: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
-0000ee90: 6f64 735f 6368 6f69 6365 203d 2072 616e  ods_choice = ran
-0000eea0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-0000eeb0: 2020 2020 2020 2020 2020 5b4e 6f6e 652c            [None,
-0000eec0: 2035 2c20 372c 2031 322c 2033 305d 2c20   5, 7, 12, 30], 
-0000eed0: 5b30 2e32 2c20 302e 322c 2030 2e32 2c20  [0.2, 0.2, 0.2, 
-0000eee0: 302e 322c 2030 2e32 5d0d 0a20 2020 2020  0.2, 0.2]..     
-0000eef0: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
-0000ef00: 2069 6620 6d65 616e 5f72 6f6c 6c69 6e67   if mean_rolling
-0000ef10: 5f70 6572 696f 6473 5f63 686f 6963 6520  _periods_choice 
-0000ef20: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0000ef30: 2020 2020 2020 2020 2020 6d61 6364 5f70            macd_p
-0000ef40: 6572 696f 6473 5f63 686f 6963 6520 3d20  eriods_choice = 
-0000ef50: 7365 6173 6f6e 616c 5f69 6e74 2829 0d0a  seasonal_int()..
-0000ef60: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-0000ef70: 6163 645f 7065 7269 6f64 735f 6368 6f69  acd_periods_choi
-0000ef80: 6365 203d 3d20 6d65 616e 5f72 6f6c 6c69  ce == mean_rolli
-0000ef90: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
-0000efa0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000efb0: 2020 2020 6d61 6364 5f70 6572 696f 6473      macd_periods
-0000efc0: 5f63 686f 6963 6520 3d20 6d65 616e 5f72  _choice = mean_r
-0000efd0: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-0000efe0: 686f 6963 6520 2b20 3130 0d0a 2020 2020  hoice + 10..    
-0000eff0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000f000: 2020 2020 2020 206d 6163 645f 7065 7269         macd_peri
-0000f010: 6f64 735f 6368 6f69 6365 203d 204e 6f6e  ods_choice = Non
-0000f020: 650d 0a20 2020 2020 2020 2073 7464 5f72  e..        std_r
-0000f030: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-0000f040: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-0000f050: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-0000f060: 2020 2020 205b 4e6f 6e65 2c20 352c 2037       [None, 5, 7
-0000f070: 2c20 3130 2c20 3330 5d2c 205b 302e 362c  , 10, 30], [0.6,
-0000f080: 2030 2e31 2c20 302e 312c 2030 2e31 2c20   0.1, 0.1, 0.1, 
-0000f090: 302e 315d 0d0a 2020 2020 2020 2020 295b  0.1]..        )[
-0000f0a0: 305d 0d0a 2020 2020 2020 2020 6d61 785f  0]..        max_
-0000f0b0: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
-0000f0c0: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
-0000f0d0: 6368 6f69 6365 7328 5b4e 6f6e 652c 2073  choices([None, s
-0000f0e0: 6561 736f 6e61 6c5f 696e 7428 295d 2c20  easonal_int()], 
-0000f0f0: 5b30 2e35 2c20 302e 355d 295b 0d0a 2020  [0.5, 0.5])[..  
-0000f100: 2020 2020 2020 2020 2020 300d 0a20 2020            0..   
-0000f110: 2020 2020 205d 0d0a 2020 2020 2020 2020       ]..        
-0000f120: 6d69 6e5f 726f 6c6c 696e 675f 7065 7269  min_rolling_peri
-0000f130: 6f64 735f 6368 6f69 6365 203d 2072 616e  ods_choice = ran
-0000f140: 646f 6d2e 6368 6f69 6365 7328 5b4e 6f6e  dom.choices([Non
-0000f150: 652c 2073 6561 736f 6e61 6c5f 696e 7428  e, seasonal_int(
-0000f160: 295d 2c20 5b30 2e35 2c20 302e 355d 295b  )], [0.5, 0.5])[
-0000f170: 0d0a 2020 2020 2020 2020 2020 2020 300d  ..            0.
-0000f180: 0a20 2020 2020 2020 205d 0d0a 2020 2020  .        ]..    
-0000f190: 2020 2020 6c61 675f 7065 7269 6f64 735f      lag_periods_
-0000f1a0: 6368 6f69 6365 203d 2073 6561 736f 6e61  choice = seasona
-0000f1b0: 6c5f 696e 7428 2920 2d20 310d 0a20 2020  l_int() - 1..   
-0000f1c0: 2020 2020 206c 6167 5f70 6572 696f 6473       lag_periods
-0000f1d0: 5f63 686f 6963 6520 3d20 3220 6966 206c  _choice = 2 if l
-0000f1e0: 6167 5f70 6572 696f 6473 5f63 686f 6963  ag_periods_choic
-0000f1f0: 6520 3c20 3220 656c 7365 206c 6167 5f70  e < 2 else lag_p
-0000f200: 6572 696f 6473 5f63 686f 6963 650d 0a20  eriods_choice.. 
-0000f210: 2020 2020 2020 2065 776d 5f63 686f 6963         ewm_choic
-0000f220: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-0000f230: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
-0000f240: 205b 4e6f 6e65 2c20 302e 3035 2c20 302e   [None, 0.05, 0.
-0000f250: 312c 2030 2e32 2c20 302e 352c 2030 2e38  1, 0.2, 0.5, 0.8
-0000f260: 5d2c 205b 302e 342c 2030 2e30 312c 2030  ], [0.4, 0.01, 0
-0000f270: 2e30 352c 2030 2e31 2c20 302e 312c 2030  .05, 0.1, 0.1, 0
-0000f280: 2e30 355d 0d0a 2020 2020 2020 2020 295b  .05]..        )[
-0000f290: 305d 0d0a 2020 2020 2020 2020 6162 735f  0]..        abs_
-0000f2a0: 656e 6572 6779 5f63 686f 6963 6520 3d20  energy_choice = 
-0000f2b0: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
-0000f2c0: 5472 7565 2c20 4661 6c73 655d 2c20 5b30  True, False], [0
-0000f2d0: 2e31 2c20 302e 395d 295b 305d 0d0a 2020  .1, 0.9])[0]..  
-0000f2e0: 2020 2020 2020 726f 6c6c 696e 675f 6175        rolling_au
-0000f2f0: 746f 636f 7272 5f70 6572 696f 6473 5f63  tocorr_periods_c
-0000f300: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-0000f310: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-0000f320: 2020 2020 205b 4e6f 6e65 2c20 322c 2037       [None, 2, 7
-0000f330: 2c20 3132 2c20 3330 5d2c 205b 302e 382c  , 12, 30], [0.8,
-0000f340: 2030 2e30 352c 2030 2e30 352c 2030 2e30   0.05, 0.05, 0.0
-0000f350: 352c 2030 2e30 355d 0d0a 2020 2020 2020  5, 0.05]..      
-0000f360: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
-0000f370: 6164 645f 6461 7465 5f70 6172 745f 6368  add_date_part_ch
-0000f380: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
-0000f390: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-0000f3a0: 2020 2020 5b0d 0a20 2020 2020 2020 2020      [..         
-0000f3b0: 2020 2020 2020 204e 6f6e 652c 0d0a 2020         None,..  
-0000f3c0: 2020 2020 2020 2020 2020 2020 2020 2773                's
-0000f3d0: 696d 706c 6527 2c0d 0a20 2020 2020 2020  imple',..       
-0000f3e0: 2020 2020 2020 2020 2027 6578 7061 6e64           'expand
-0000f3f0: 6564 272c 0d0a 2020 2020 2020 2020 2020  ed',..          
-0000f400: 2020 2020 2020 2772 6563 7572 7269 6e67        'recurring
-0000f410: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-0000f420: 2020 2020 2273 696d 706c 655f 3222 2c0d      "simple_2",.
-0000f430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f440: 2022 7369 6d70 6c65 5f62 696e 6172 697a   "simple_binariz
-0000f450: 6564 222c 0d0a 2020 2020 2020 2020 2020  ed",..          
-0000f460: 2020 2020 2020 2265 7870 616e 6465 645f        "expanded_
-0000f470: 6269 6e61 7269 7a65 6422 2c0d 0a20 2020  binarized",..   
-0000f480: 2020 2020 2020 2020 205d 2c0d 0a20 2020           ],..   
-0000f490: 2020 2020 2020 2020 205b 302e 372c 2030           [0.7, 0
-0000f4a0: 2e30 352c 2030 2e30 352c 2030 2e30 352c  .05, 0.05, 0.05,
-0000f4b0: 2030 2e30 352c 2030 2e31 2c20 302e 3031   0.05, 0.1, 0.01
-0000f4c0: 5d2c 0d0a 2020 2020 2020 2020 295b 305d  ],..        )[0]
-0000f4d0: 0d0a 2020 2020 2020 2020 686f 6c69 6461  ..        holida
-0000f4e0: 795f 6368 6f69 6365 203d 2072 616e 646f  y_choice = rando
-0000f4f0: 6d2e 6368 6f69 6365 7328 5b54 7275 652c  m.choices([True,
-0000f500: 2046 616c 7365 5d2c 205b 302e 322c 2030   False], [0.2, 0
-0000f510: 2e38 5d29 5b30 5d0d 0a20 2020 2020 2020  .8])[0]..       
-0000f520: 2070 6f6c 796e 6f6d 6961 6c5f 6465 6772   polynomial_degr
-0000f530: 6565 5f63 686f 6963 6520 3d20 7261 6e64  ee_choice = rand
-0000f540: 6f6d 2e63 686f 6963 6573 285b 4e6f 6e65  om.choices([None
-0000f550: 2c20 325d 2c20 5b30 2e39 392c 2030 2e30  , 2], [0.99, 0.0
-0000f560: 315d 295b 305d 0d0a 2020 2020 2020 2020  1])[0]..        
-0000f570: 785f 7472 616e 7366 6f72 6d5f 6368 6f69  x_transform_choi
-0000f580: 6365 203d 2072 616e 646f 6d2e 6368 6f69  ce = random.choi
-0000f590: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
-0000f5a0: 2020 5b4e 6f6e 652c 2027 4661 7374 4943    [None, 'FastIC
-0000f5b0: 4127 2c20 274e 7973 7472 6f65 6d27 2c20  A', 'Nystroem', 
-0000f5c0: 2752 6d5a 6572 6f56 6172 6961 6e63 6527  'RmZeroVariance'
-0000f5d0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0000f5e0: 5b30 2e38 352c 2030 2e30 352c 2030 2e30  [0.85, 0.05, 0.0
-0000f5f0: 352c 2030 2e30 355d 2c0d 0a20 2020 2020  5, 0.05],..     
-0000f600: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
-0000f610: 2069 6620 2272 6567 7265 7373 6f72 2220   if "regressor" 
-0000f620: 696e 206d 6574 686f 643a 0d0a 2020 2020  in method:..    
-0000f630: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
-0000f640: 6f6e 5f63 686f 6963 6520 3d20 2255 7365  on_choice = "Use
-0000f650: 7222 0d0a 2020 2020 2020 2020 656c 7365  r"..        else
-0000f660: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0000f670: 6567 7265 7373 696f 6e5f 6368 6f69 6365  egression_choice
-0000f680: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
-0000f690: 7328 5b4e 6f6e 652c 2027 5573 6572 275d  s([None, 'User']
-0000f6a0: 2c20 5b30 2e37 2c20 302e 335d 295b 305d  , [0.7, 0.3])[0]
-0000f6b0: 0d0a 2020 2020 2020 2020 7061 7261 6d65  ..        parame
-0000f6c0: 7465 725f 6469 6374 203d 207b 0d0a 2020  ter_dict = {..  
-0000f6d0: 2020 2020 2020 2020 2020 2772 6567 7265            'regre
-0000f6e0: 7373 696f 6e5f 6d6f 6465 6c27 3a20 6d6f  ssion_model': mo
-0000f6f0: 6465 6c5f 6368 6f69 6365 2c0d 0a20 2020  del_choice,..   
-0000f700: 2020 2020 2020 2020 2027 686f 6c69 6461           'holida
-0000f710: 7927 3a20 686f 6c69 6461 795f 6368 6f69  y': holiday_choi
-0000f720: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-0000f730: 2027 6d65 616e 5f72 6f6c 6c69 6e67 5f70   'mean_rolling_p
-0000f740: 6572 696f 6473 273a 206d 6561 6e5f 726f  eriods': mean_ro
-0000f750: 6c6c 696e 675f 7065 7269 6f64 735f 6368  lling_periods_ch
-0000f760: 6f69 6365 2c0d 0a20 2020 2020 2020 2020  oice,..         
-0000f770: 2020 2027 6d61 6364 5f70 6572 696f 6473     'macd_periods
-0000f780: 273a 206d 6163 645f 7065 7269 6f64 735f  ': macd_periods_
-0000f790: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-0000f7a0: 2020 2020 2027 7374 645f 726f 6c6c 696e       'std_rollin
-0000f7b0: 675f 7065 7269 6f64 7327 3a20 7374 645f  g_periods': std_
-0000f7c0: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
-0000f7d0: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-0000f7e0: 2020 2020 2027 6d61 785f 726f 6c6c 696e       'max_rollin
-0000f7f0: 675f 7065 7269 6f64 7327 3a20 6d61 785f  g_periods': max_
-0000f800: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
-0000f810: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-0000f820: 2020 2020 2027 6d69 6e5f 726f 6c6c 696e       'min_rollin
-0000f830: 675f 7065 7269 6f64 7327 3a20 6d69 6e5f  g_periods': min_
-0000f840: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
-0000f850: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-0000f860: 2020 2020 2027 6577 6d5f 616c 7068 6127       'ewm_alpha'
-0000f870: 3a20 6577 6d5f 6368 6f69 6365 2c0d 0a20  : ewm_choice,.. 
-0000f880: 2020 2020 2020 2020 2020 2027 6164 6469             'addi
-0000f890: 7469 6f6e 616c 5f6c 6167 5f70 6572 696f  tional_lag_perio
-0000f8a0: 6473 273a 206c 6167 5f70 6572 696f 6473  ds': lag_periods
-0000f8b0: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
-0000f8c0: 2020 2020 2020 2761 6273 5f65 6e65 7267        'abs_energ
-0000f8d0: 7927 3a20 6162 735f 656e 6572 6779 5f63  y': abs_energy_c
-0000f8e0: 686f 6963 652c 0d0a 2020 2020 2020 2020  hoice,..        
-0000f8f0: 2020 2020 2772 6f6c 6c69 6e67 5f61 7574      'rolling_aut
-0000f900: 6f63 6f72 725f 7065 7269 6f64 7327 3a20  ocorr_periods': 
-0000f910: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
-0000f920: 5f70 6572 696f 6473 5f63 686f 6963 652c  _periods_choice,
-0000f930: 0d0a 2020 2020 2020 2020 2020 2020 2761  ..            'a
-0000f940: 6464 5f64 6174 655f 7061 7274 273a 2061  dd_date_part': a
-0000f950: 6464 5f64 6174 655f 7061 7274 5f63 686f  dd_date_part_cho
-0000f960: 6963 652c 0d0a 2020 2020 2020 2020 2020  ice,..          
-0000f970: 2020 2770 6f6c 796e 6f6d 6961 6c5f 6465    'polynomial_de
-0000f980: 6772 6565 273a 2070 6f6c 796e 6f6d 6961  gree': polynomia
-0000f990: 6c5f 6465 6772 6565 5f63 686f 6963 652c  l_degree_choice,
-0000f9a0: 0d0a 2020 2020 2020 2020 2020 2020 2778  ..            'x
-0000f9b0: 5f74 7261 6e73 666f 726d 273a 2078 5f74  _transform': x_t
-0000f9c0: 7261 6e73 666f 726d 5f63 686f 6963 652c  ransform_choice,
-0000f9d0: 0d0a 2020 2020 2020 2020 2020 2020 2772  ..            'r
-0000f9e0: 6567 7265 7373 696f 6e5f 7479 7065 273a  egression_type':
-0000f9f0: 2072 6567 7265 7373 696f 6e5f 6368 6f69   regression_choi
-0000fa00: 6365 2c0d 0a20 2020 2020 2020 207d 0d0a  ce,..        }..
-0000fa10: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-0000fa20: 6172 616d 6574 6572 5f64 6963 740d 0a0d  arameter_dict...
-0000fa30: 0a20 2020 2064 6566 2067 6574 5f70 6172  .    def get_par
-0000fa40: 616d 7328 7365 6c66 293a 0d0a 2020 2020  ams(self):..    
-0000fa50: 2020 2020 2222 2252 6574 7572 6e20 6469      """Return di
-0000fa60: 6374 206f 6620 6375 7272 656e 7420 7061  ct of current pa
-0000fa70: 7261 6d65 7465 7273 2e22 2222 0d0a 2020  rameters."""..  
-0000fa80: 2020 2020 2020 7061 7261 6d65 7465 725f        parameter_
-0000fa90: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
-0000faa0: 2020 2020 2020 2772 6567 7265 7373 696f        'regressio
-0000fab0: 6e5f 6d6f 6465 6c27 3a20 7365 6c66 2e72  n_model': self.r
-0000fac0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c2c  egression_model,
-0000fad0: 0d0a 2020 2020 2020 2020 2020 2020 2768  ..            'h
-0000fae0: 6f6c 6964 6179 273a 2073 656c 662e 686f  oliday': self.ho
-0000faf0: 6c69 6461 792c 0d0a 2020 2020 2020 2020  liday,..        
-0000fb00: 2020 2020 276d 6561 6e5f 726f 6c6c 696e      'mean_rollin
-0000fb10: 675f 7065 7269 6f64 7327 3a20 7365 6c66  g_periods': self
-0000fb20: 2e6d 6561 6e5f 726f 6c6c 696e 675f 7065  .mean_rolling_pe
-0000fb30: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0000fb40: 2020 2020 276d 6163 645f 7065 7269 6f64      'macd_period
-0000fb50: 7327 3a20 7365 6c66 2e6d 6163 645f 7065  s': self.macd_pe
-0000fb60: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0000fb70: 2020 2020 2773 7464 5f72 6f6c 6c69 6e67      'std_rolling
-0000fb80: 5f70 6572 696f 6473 273a 2073 656c 662e  _periods': self.
-0000fb90: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
-0000fba0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-0000fbb0: 2020 276d 6178 5f72 6f6c 6c69 6e67 5f70    'max_rolling_p
-0000fbc0: 6572 696f 6473 273a 2073 656c 662e 6d61  eriods': self.ma
-0000fbd0: 785f 726f 6c6c 696e 675f 7065 7269 6f64  x_rolling_period
-0000fbe0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0000fbf0: 276d 696e 5f72 6f6c 6c69 6e67 5f70 6572  'min_rolling_per
-0000fc00: 696f 6473 273a 2073 656c 662e 6d69 6e5f  iods': self.min_
-0000fc10: 726f 6c6c 696e 675f 7065 7269 6f64 732c  rolling_periods,
-0000fc20: 0d0a 2020 2020 2020 2020 2020 2020 2265  ..            "e
-0000fc30: 776d 5f76 6172 5f61 6c70 6861 223a 2073  wm_var_alpha": s
-0000fc40: 656c 662e 6577 6d5f 7661 725f 616c 7068  elf.ewm_var_alph
-0000fc50: 612c 0d0a 2020 2020 2020 2020 2020 2020  a,..            
-0000fc60: 2271 7561 6e74 696c 6539 305f 726f 6c6c  "quantile90_roll
-0000fc70: 696e 675f 7065 7269 6f64 7322 3a20 7365  ing_periods": se
-0000fc80: 6c66 2e71 7561 6e74 696c 6539 305f 726f  lf.quantile90_ro
-0000fc90: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
-0000fca0: 2020 2020 2020 2020 2020 2020 2271 7561              "qua
-0000fcb0: 6e74 696c 6531 305f 726f 6c6c 696e 675f  ntile10_rolling_
-0000fcc0: 7065 7269 6f64 7322 3a20 7365 6c66 2e71  periods": self.q
-0000fcd0: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
-0000fce0: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-0000fcf0: 2020 2020 2020 2020 2765 776d 5f61 6c70          'ewm_alp
-0000fd00: 6861 273a 2073 656c 662e 6577 6d5f 616c  ha': self.ewm_al
-0000fd10: 7068 612c 0d0a 2020 2020 2020 2020 2020  pha,..          
-0000fd20: 2020 2761 6464 6974 696f 6e61 6c5f 6c61    'additional_la
-0000fd30: 675f 7065 7269 6f64 7327 3a20 7365 6c66  g_periods': self
-0000fd40: 2e61 6464 6974 696f 6e61 6c5f 6c61 675f  .additional_lag_
-0000fd50: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
-0000fd60: 2020 2020 2020 2761 6273 5f65 6e65 7267        'abs_energ
-0000fd70: 7927 3a20 7365 6c66 2e61 6273 5f65 6e65  y': self.abs_ene
-0000fd80: 7267 792c 0d0a 2020 2020 2020 2020 2020  rgy,..          
-0000fd90: 2020 2772 6f6c 6c69 6e67 5f61 7574 6f63    'rolling_autoc
-0000fda0: 6f72 725f 7065 7269 6f64 7327 3a20 7365  orr_periods': se
-0000fdb0: 6c66 2e72 6f6c 6c69 6e67 5f61 7574 6f63  lf.rolling_autoc
-0000fdc0: 6f72 725f 7065 7269 6f64 732c 0d0a 2020  orr_periods,..  
-0000fdd0: 2020 2020 2020 2020 2020 276e 6f6e 7a65            'nonze
-0000fde0: 726f 5f6c 6173 745f 6e27 3a20 7365 6c66  ro_last_n': self
-0000fdf0: 2e6e 6f6e 7a65 726f 5f6c 6173 745f 6e2c  .nonzero_last_n,
-0000fe00: 0d0a 2020 2020 2020 2020 2020 2020 2761  ..            'a
-0000fe10: 6464 5f64 6174 655f 7061 7274 273a 2073  dd_date_part': s
-0000fe20: 656c 662e 6164 645f 6461 7465 5f70 6172  elf.add_date_par
-0000fe30: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0000fe40: 2770 6f6c 796e 6f6d 6961 6c5f 6465 6772  'polynomial_degr
-0000fe50: 6565 273a 2073 656c 662e 706f 6c79 6e6f  ee': self.polyno
-0000fe60: 6d69 616c 5f64 6567 7265 652c 0d0a 2020  mial_degree,..  
-0000fe70: 2020 2020 2020 2020 2020 2778 5f74 7261            'x_tra
-0000fe80: 6e73 666f 726d 273a 2073 656c 662e 785f  nsform': self.x_
-0000fe90: 7472 616e 7366 6f72 6d2c 0d0a 2020 2020  transform,..    
-0000fea0: 2020 2020 2020 2020 2772 6567 7265 7373          'regress
-0000feb0: 696f 6e5f 7479 7065 273a 2073 656c 662e  ion_type': self.
-0000fec0: 7265 6772 6573 7369 6f6e 5f74 7970 652c  regression_type,
-0000fed0: 0d0a 2020 2020 2020 2020 7d0d 0a20 2020  ..        }..   
-0000fee0: 2020 2020 2072 6574 7572 6e20 7061 7261       return para
-0000fef0: 6d65 7465 725f 6469 6374 0d0a 0d0a 0d0a  meter_dict......
-0000ff00: 636c 6173 7320 5769 6e64 6f77 5265 6772  class WindowRegr
-0000ff10: 6573 7369 6f6e 284d 6f64 656c 4f62 6a65  ession(ModelObje
-0000ff20: 6374 293a 0d0a 2020 2020 2222 2252 6567  ct):..    """Reg
-0000ff30: 7265 7373 696f 6e20 7573 6520 7468 6520  ression use the 
-0000ff40: 6c61 7374 206e 2076 616c 7565 7320 6173  last n values as
-0000ff50: 2074 6865 2062 6173 6973 206f 6620 7472   the basis of tr
-0000ff60: 6169 6e69 6e67 2064 6174 612e 0d0a 0d0a  aining data.....
-0000ff70: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
-0000ff80: 2020 206e 616d 6520 2873 7472 293a 2053     name (str): S
-0000ff90: 7472 696e 6720 746f 2069 6465 6e74 6966  tring to identif
-0000ffa0: 7920 636c 6173 730d 0a20 2020 2020 2020  y class..       
-0000ffb0: 2066 7265 7175 656e 6379 2028 7374 7229   frequency (str)
-0000ffc0: 3a20 5374 7269 6e67 2061 6c69 6173 206f  : String alias o
-0000ffd0: 6620 6461 7465 7469 6d65 2069 6e64 6578  f datetime index
-0000ffe0: 2066 7265 7175 656e 6379 206f 7220 656c   frequency or el
-0000fff0: 7365 2027 696e 6665 7227 0d0a 2020 2020  se 'infer'..    
-00010000: 2020 2020 7072 6564 6963 7469 6f6e 5f69      prediction_i
-00010010: 6e74 6572 7661 6c20 2866 6c6f 6174 293a  nterval (float):
-00010020: 2043 6f6e 6669 6465 6e63 6520 696e 7465   Confidence inte
-00010030: 7276 616c 2066 6f72 2070 726f 6261 6269  rval for probabi
-00010040: 6c69 7374 6963 2066 6f72 6563 6173 740d  listic forecast.
-00010050: 0a20 2020 2020 2020 2023 2072 6567 7265  .        # regre
-00010060: 7373 696f 6e5f 7479 7065 3a20 7374 7220  ssion_type: str 
-00010070: 3d20 4e6f 6e65 2c0d 0a20 2020 2022 2222  = None,..    """
-00010080: 0d0a 0d0a 2020 2020 6465 6620 5f5f 696e  ....    def __in
-00010090: 6974 5f5f 280d 0a20 2020 2020 2020 2073  it__(..        s
-000100a0: 656c 662c 0d0a 2020 2020 2020 2020 6e61  elf,..        na
-000100b0: 6d65 3a20 7374 7220 3d20 2257 696e 646f  me: str = "Windo
-000100c0: 7752 6567 7265 7373 696f 6e22 2c0d 0a20  wRegression",.. 
-000100d0: 2020 2020 2020 2066 7265 7175 656e 6379         frequency
-000100e0: 3a20 7374 7220 3d20 2769 6e66 6572 272c  : str = 'infer',
-000100f0: 0d0a 2020 2020 2020 2020 7072 6564 6963  ..        predic
-00010100: 7469 6f6e 5f69 6e74 6572 7661 6c3a 2066  tion_interval: f
-00010110: 6c6f 6174 203d 2030 2e39 2c0d 0a20 2020  loat = 0.9,..   
-00010120: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
-00010130: 6e74 7279 3a20 7374 7220 3d20 2755 5327  ntry: str = 'US'
-00010140: 2c0d 0a20 2020 2020 2020 2072 616e 646f  ,..        rando
-00010150: 6d5f 7365 6564 3a20 696e 7420 3d20 3230  m_seed: int = 20
-00010160: 3232 2c0d 0a20 2020 2020 2020 2076 6572  22,..        ver
-00010170: 626f 7365 3a20 696e 7420 3d20 302c 0d0a  bose: int = 0,..
-00010180: 2020 2020 2020 2020 7769 6e64 6f77 5f73          window_s
-00010190: 697a 653a 2069 6e74 203d 2031 302c 0d0a  ize: int = 10,..
-000101a0: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
-000101b0: 6f6e 5f6d 6f64 656c 3a20 6469 6374 203d  on_model: dict =
-000101c0: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-000101d0: 226d 6f64 656c 223a 2027 5261 6e64 6f6d  "model": 'Random
-000101e0: 466f 7265 7374 272c 0d0a 2020 2020 2020  Forest',..      
-000101f0: 2020 2020 2020 226d 6f64 656c 5f70 6172        "model_par
-00010200: 616d 7322 3a20 7b7d 2c0d 0a20 2020 2020  ams": {},..     
-00010210: 2020 207d 2c0d 0a20 2020 2020 2020 2069     },..        i
-00010220: 6e70 7574 5f64 696d 3a20 7374 7220 3d20  nput_dim: str = 
-00010230: 2775 6e69 7661 7269 6174 6527 2c0d 0a20  'univariate',.. 
-00010240: 2020 2020 2020 206f 7574 7075 745f 6469         output_di
-00010250: 6d3a 2073 7472 203d 2027 666f 7265 6361  m: str = 'foreca
-00010260: 7374 5f6c 656e 6774 6827 2c0d 0a20 2020  st_length',..   
-00010270: 2020 2020 206e 6f72 6d61 6c69 7a65 5f77       normalize_w
-00010280: 696e 646f 773a 2062 6f6f 6c20 3d20 4661  indow: bool = Fa
-00010290: 6c73 652c 0d0a 2020 2020 2020 2020 7368  lse,..        sh
-000102a0: 7566 666c 653a 2062 6f6f 6c20 3d20 4661  uffle: bool = Fa
-000102b0: 6c73 652c 0d0a 2020 2020 2020 2020 666f  lse,..        fo
-000102c0: 7265 6361 7374 5f6c 656e 6774 683a 2069  recast_length: i
-000102d0: 6e74 203d 2031 2c0d 0a20 2020 2020 2020  nt = 1,..       
-000102e0: 206d 6178 5f77 696e 646f 7773 3a20 696e   max_windows: in
-000102f0: 7420 3d20 3530 3030 2c0d 0a20 2020 2020  t = 5000,..     
-00010300: 2020 2072 6567 7265 7373 696f 6e5f 7479     regression_ty
-00010310: 7065 3a20 7374 7220 3d20 4e6f 6e65 2c0d  pe: str = None,.
-00010320: 0a20 2020 2020 2020 206e 5f6a 6f62 733a  .        n_jobs:
-00010330: 2069 6e74 203d 202d 312c 0d0a 2020 2020   int = -1,..    
-00010340: 2020 2020 2a2a 6b77 6172 6773 2c0d 0a20      **kwargs,.. 
-00010350: 2020 2029 3a0d 0a20 2020 2020 2020 204d     ):..        M
-00010360: 6f64 656c 4f62 6a65 6374 2e5f 5f69 6e69  odelObject.__ini
-00010370: 745f 5f28 0d0a 2020 2020 2020 2020 2020  t__(..          
-00010380: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
-00010390: 2020 2020 206e 616d 652c 0d0a 2020 2020       name,..    
-000103a0: 2020 2020 2020 2020 6672 6571 7565 6e63          frequenc
-000103b0: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-000103c0: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
-000103d0: 7661 6c2c 0d0a 2020 2020 2020 2020 2020  val,..          
-000103e0: 2020 686f 6c69 6461 795f 636f 756e 7472    holiday_countr
-000103f0: 793d 686f 6c69 6461 795f 636f 756e 7472  y=holiday_countr
-00010400: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00010410: 7261 6e64 6f6d 5f73 6565 643d 7261 6e64  random_seed=rand
-00010420: 6f6d 5f73 6565 642c 0d0a 2020 2020 2020  om_seed,..      
-00010430: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
-00010440: 5f74 7970 653d 7265 6772 6573 7369 6f6e  _type=regression
-00010450: 5f74 7970 652c 0d0a 2020 2020 2020 2020  _type,..        
-00010460: 2020 2020 7665 7262 6f73 653d 7665 7262      verbose=verb
-00010470: 6f73 652c 0d0a 2020 2020 2020 2020 2020  ose,..          
-00010480: 2020 6e5f 6a6f 6273 3d6e 5f6a 6f62 732c    n_jobs=n_jobs,
-00010490: 0d0a 2020 2020 2020 2020 290d 0a20 2020  ..        )..   
-000104a0: 2020 2020 2073 656c 662e 7769 6e64 6f77       self.window
-000104b0: 5f73 697a 6520 3d20 6162 7328 696e 7428  _size = abs(int(
-000104c0: 7769 6e64 6f77 5f73 697a 6529 290d 0a20  window_size)).. 
-000104d0: 2020 2020 2020 2073 656c 662e 7265 6772         self.regr
-000104e0: 6573 7369 6f6e 5f6d 6f64 656c 203d 2072  ession_model = r
-000104f0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c0d  egression_model.
-00010500: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
-00010510: 7075 745f 6469 6d20 3d20 696e 7075 745f  put_dim = input_
-00010520: 6469 6d0d 0a20 2020 2020 2020 2073 656c  dim..        sel
-00010530: 662e 6f75 7470 7574 5f64 696d 203d 206f  f.output_dim = o
-00010540: 7574 7075 745f 6469 6d0d 0a20 2020 2020  utput_dim..     
-00010550: 2020 2073 656c 662e 6e6f 726d 616c 697a     self.normaliz
-00010560: 655f 7769 6e64 6f77 203d 206e 6f72 6d61  e_window = norma
-00010570: 6c69 7a65 5f77 696e 646f 770d 0a20 2020  lize_window..   
-00010580: 2020 2020 2073 656c 662e 7368 7566 666c       self.shuffl
-00010590: 6520 3d20 7368 7566 666c 650d 0a20 2020  e = shuffle..   
-000105a0: 2020 2020 2073 656c 662e 666f 7265 6361       self.foreca
-000105b0: 7374 5f6c 656e 6774 6820 3d20 666f 7265  st_length = fore
-000105c0: 6361 7374 5f6c 656e 6774 680d 0a20 2020  cast_length..   
-000105d0: 2020 2020 2073 656c 662e 6d61 785f 7769       self.max_wi
-000105e0: 6e64 6f77 7320 3d20 6d61 785f 7769 6e64  ndows = max_wind
-000105f0: 6f77 730d 0a0d 0a20 2020 2064 6566 2066  ows....    def f
-00010600: 6974 2873 656c 662c 2064 662c 2066 7574  it(self, df, fut
-00010610: 7572 655f 7265 6772 6573 736f 723d 4e6f  ure_regressor=No
-00010620: 6e65 293a 0d0a 2020 2020 2020 2020 2222  ne):..        ""
-00010630: 2254 7261 696e 2061 6c67 6f72 6974 686d  "Train algorithm
-00010640: 2067 6976 656e 2064 6174 6120 7375 7070   given data supp
-00010650: 6c69 6564 2e0d 0a0d 0a20 2020 2020 2020  lied.....       
-00010660: 2041 7267 733a 0d0a 2020 2020 2020 2020   Args:..        
-00010670: 2020 2020 6466 2028 7061 6e64 6173 2e44      df (pandas.D
-00010680: 6174 6146 7261 6d65 293a 2044 6174 6574  ataFrame): Datet
-00010690: 696d 6520 496e 6465 7865 640d 0a20 2020  ime Indexed..   
-000106a0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-000106b0: 2020 6966 2028 0d0a 2020 2020 2020 2020    if (..        
-000106c0: 2020 2020 6466 2e73 6861 7065 5b31 5d20      df.shape[1] 
-000106d0: 2a20 7365 6c66 2e66 6f72 6563 6173 745f  * self.forecast_
-000106e0: 6c65 6e67 7468 0d0a 2020 2020 2020 2020  length..        
-000106f0: 2920 3e20 3230 3020 616e 6420 7365 6c66  ) > 200 and self
-00010700: 2e69 6e70 7574 5f64 696d 203d 3d20 226d  .input_dim == "m
-00010710: 756c 7469 7661 7269 6174 6522 3a0d 0a20  ultivariate":.. 
-00010720: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00010730: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
-00010740: 2020 2020 2020 2020 2020 2020 2020 2253                "S
-00010750: 6361 6c65 2065 7863 6565 6473 2072 6563  cale exceeds rec
-00010760: 6f6d 6d65 6e64 6174 696f 6e20 666f 7220  ommendation for 
-00010770: 696e 7075 745f 6469 6d20 3d3d 2060 6d75  input_dim == `mu
-00010780: 6c74 6976 6172 6961 7465 6022 0d0a 2020  ltivariate`"..  
-00010790: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-000107a0: 2020 2020 2064 6620 3d20 7365 6c66 2e62       df = self.b
-000107b0: 6173 6963 5f70 726f 6669 6c65 2864 6629  asic_profile(df)
-000107c0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-000107d0: 662e 7265 6772 6573 7369 6f6e 5f74 7970  f.regression_typ
-000107e0: 6520 696e 205b 2255 7365 7222 2c20 2275  e in ["User", "u
-000107f0: 7365 7222 5d3a 0d0a 2020 2020 2020 2020  ser"]:..        
-00010800: 2020 2020 6966 2066 7574 7572 655f 7265      if future_re
-00010810: 6772 6573 736f 7220 6973 204e 6f6e 653a  gressor is None:
-00010820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010830: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00010840: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
-00010850: 2020 2020 2020 2020 2022 7265 6772 6573           "regres
-00010860: 7369 6f6e 5f74 7970 653d 2755 7365 7227  sion_type='User'
-00010870: 2062 7574 206e 6f20 6675 7475 7265 5f72   but no future_r
-00010880: 6567 7265 7373 6f72 2070 6173 7365 6422  egressor passed"
-00010890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000108a0: 2020 290d 0a20 2020 2020 2020 2073 656c    )..        sel
-000108b0: 662e 6466 5f74 7261 696e 203d 2064 660d  f.df_train = df.
-000108c0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-000108d0: 7374 616e 6365 2866 7574 7572 655f 7265  stance(future_re
-000108e0: 6772 6573 736f 722c 2070 642e 5365 7269  gressor, pd.Seri
-000108f0: 6573 293a 0d0a 2020 2020 2020 2020 2020  es):..          
-00010900: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-00010910: 6f72 203d 2066 7574 7572 655f 7265 6772  or = future_regr
-00010920: 6573 736f 722e 746f 5f66 7261 6d65 2829  essor.to_frame()
-00010930: 0d0a 2020 2020 2020 2020 7365 6c66 2e58  ..        self.X
-00010940: 2c20 7365 6c66 2e59 203d 2077 696e 646f  , self.Y = windo
-00010950: 775f 6d61 6b65 7228 0d0a 2020 2020 2020  w_maker(..      
-00010960: 2020 2020 2020 6466 2c0d 0a20 2020 2020        df,..     
-00010970: 2020 2020 2020 2077 696e 646f 775f 7369         window_si
-00010980: 7a65 3d73 656c 662e 7769 6e64 6f77 5f73  ze=self.window_s
-00010990: 697a 652c 0d0a 2020 2020 2020 2020 2020  ize,..          
-000109a0: 2020 696e 7075 745f 6469 6d3d 7365 6c66    input_dim=self
-000109b0: 2e69 6e70 7574 5f64 696d 2c0d 0a20 2020  .input_dim,..   
-000109c0: 2020 2020 2020 2020 206e 6f72 6d61 6c69           normali
-000109d0: 7a65 5f77 696e 646f 773d 7365 6c66 2e6e  ze_window=self.n
-000109e0: 6f72 6d61 6c69 7a65 5f77 696e 646f 772c  ormalize_window,
-000109f0: 0d0a 2020 2020 2020 2020 2020 2020 7368  ..            sh
-00010a00: 7566 666c 653d 7365 6c66 2e73 6875 6666  uffle=self.shuff
-00010a10: 6c65 2c0d 0a20 2020 2020 2020 2020 2020  le,..           
-00010a20: 206f 7574 7075 745f 6469 6d3d 7365 6c66   output_dim=self
-00010a30: 2e6f 7574 7075 745f 6469 6d2c 0d0a 2020  .output_dim,..  
-00010a40: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-00010a50: 7374 5f6c 656e 6774 683d 7365 6c66 2e66  st_length=self.f
-00010a60: 6f72 6563 6173 745f 6c65 6e67 7468 2c0d  orecast_length,.
-00010a70: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-00010a80: 5f77 696e 646f 7773 3d73 656c 662e 6d61  _windows=self.ma
-00010a90: 785f 7769 6e64 6f77 732c 0d0a 2020 2020  x_windows,..    
-00010aa0: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
-00010ab0: 6f6e 5f74 7970 653d 7365 6c66 2e72 6567  on_type=self.reg
-00010ac0: 7265 7373 696f 6e5f 7479 7065 2c0d 0a20  ression_type,.. 
-00010ad0: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-00010ae0: 655f 7265 6772 6573 736f 723d 6675 7475  e_regressor=futu
-00010af0: 7265 5f72 6567 7265 7373 6f72 2c0d 0a20  re_regressor,.. 
-00010b00: 2020 2020 2020 2020 2020 2072 616e 646f             rando
-00010b10: 6d5f 7365 6564 3d73 656c 662e 7261 6e64  m_seed=self.rand
-00010b20: 6f6d 5f73 6565 642c 0d0a 2020 2020 2020  om_seed,..      
-00010b30: 2020 290d 0a20 2020 2020 2020 206d 756c    )..        mul
-00010b40: 7469 6f75 7470 7574 203d 2054 7275 650d  tioutput = True.
-00010b50: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00010b60: 2e59 2e6e 6469 6d20 3c20 323a 0d0a 2020  .Y.ndim < 2:..  
-00010b70: 2020 2020 2020 2020 2020 6d75 6c74 696f            multio
-00010b80: 7574 7075 7420 3d20 4661 6c73 650d 0a20  utput = False.. 
-00010b90: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
-00010ba0: 2e59 2e73 6861 7065 5b31 5d20 3c20 323a  .Y.shape[1] < 2:
-00010bb0: 0d0a 2020 2020 2020 2020 2020 2020 6d75  ..            mu
-00010bc0: 6c74 696f 7574 7075 7420 3d20 4661 6c73  ltioutput = Fals
-00010bd0: 650d 0a20 2020 2020 2020 2069 6620 6973  e..        if is
-00010be0: 696e 7374 616e 6365 2873 656c 662e 582c  instance(self.X,
-00010bf0: 2070 642e 4461 7461 4672 616d 6529 3a0d   pd.DataFrame):.
-00010c00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00010c10: 662e 5820 3d20 7365 6c66 2e58 2e74 6f5f  f.X = self.X.to_
-00010c20: 6e75 6d70 7928 290d 0a20 2020 2020 2020  numpy()..       
-00010c30: 2073 656c 662e 6d6f 6465 6c20 3d20 7265   self.model = re
-00010c40: 7472 6965 7665 5f72 6567 7265 7373 6f72  trieve_regressor
-00010c50: 280d 0a20 2020 2020 2020 2020 2020 2072  (..            r
-00010c60: 6567 7265 7373 696f 6e5f 6d6f 6465 6c3d  egression_model=
-00010c70: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
-00010c80: 6d6f 6465 6c2c 0d0a 2020 2020 2020 2020  model,..        
-00010c90: 2020 2020 7665 7262 6f73 653d 7365 6c66      verbose=self
-00010ca0: 2e76 6572 626f 7365 2c0d 0a20 2020 2020  .verbose,..     
-00010cb0: 2020 2020 2020 2076 6572 626f 7365 5f62         verbose_b
-00010cc0: 6f6f 6c3d 7365 6c66 2e76 6572 626f 7365  ool=self.verbose
-00010cd0: 5f62 6f6f 6c2c 0d0a 2020 2020 2020 2020  _bool,..        
-00010ce0: 2020 2020 7261 6e64 6f6d 5f73 6565 643d      random_seed=
-00010cf0: 7365 6c66 2e72 616e 646f 6d5f 7365 6564  self.random_seed
-00010d00: 2c0d 0a20 2020 2020 2020 2020 2020 206e  ,..            n
-00010d10: 5f6a 6f62 733d 7365 6c66 2e6e 5f6a 6f62  _jobs=self.n_job
-00010d20: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-00010d30: 6d75 6c74 696f 7574 7075 743d 6d75 6c74  multioutput=mult
-00010d40: 696f 7574 7075 742c 0d0a 2020 2020 2020  ioutput,..      
-00010d50: 2020 290d 0a20 2020 2020 2020 2073 656c    )..        sel
-00010d60: 662e 6d6f 6465 6c20 3d20 7365 6c66 2e6d  f.model = self.m
-00010d70: 6f64 656c 2e66 6974 2873 656c 662e 582c  odel.fit(self.X,
-00010d80: 2073 656c 662e 5929 0d0a 2020 2020 2020   self.Y)..      
-00010d90: 2020 7365 6c66 2e6c 6173 745f 7769 6e64    self.last_wind
-00010da0: 6f77 203d 2064 662e 7461 696c 2873 656c  ow = df.tail(sel
-00010db0: 662e 7769 6e64 6f77 5f73 697a 6529 0d0a  f.window_size)..
-00010dc0: 2020 2020 2020 2020 7365 6c66 2e66 6974          self.fit
-00010dd0: 5f72 756e 7469 6d65 203d 2064 6174 6574  _runtime = datet
-00010de0: 696d 652e 6461 7465 7469 6d65 2e6e 6f77  ime.datetime.now
-00010df0: 2829 202d 2073 656c 662e 7374 6172 7454  () - self.startT
-00010e00: 696d 650d 0a20 2020 2020 2020 2072 6574  ime..        ret
-00010e10: 7572 6e20 7365 6c66 0d0a 0d0a 2020 2020  urn self....    
-00010e20: 6465 6620 6669 745f 6461 7461 2873 656c  def fit_data(sel
-00010e30: 662c 2064 662c 2066 7574 7572 655f 7265  f, df, future_re
-00010e40: 6772 6573 736f 723d 4e6f 6e65 293a 0d0a  gressor=None):..
-00010e50: 2020 2020 2020 2020 6466 203d 2073 656c          df = sel
-00010e60: 662e 6261 7369 635f 7072 6f66 696c 6528  f.basic_profile(
-00010e70: 6466 290d 0a20 2020 2020 2020 2073 656c  df)..        sel
-00010e80: 662e 6c61 7374 5f77 696e 646f 7720 3d20  f.last_window = 
-00010e90: 6466 2e74 6169 6c28 7365 6c66 2e77 696e  df.tail(self.win
-00010ea0: 646f 775f 7369 7a65 290d 0a20 2020 2020  dow_size)..     
-00010eb0: 2020 2072 6574 7572 6e20 7365 6c66 0d0a     return self..
-00010ec0: 0d0a 2020 2020 6465 6620 7072 6564 6963  ..    def predic
-00010ed0: 7428 0d0a 2020 2020 2020 2020 7365 6c66  t(..        self
-00010ee0: 2c0d 0a20 2020 2020 2020 2066 6f72 6563  ,..        forec
-00010ef0: 6173 745f 6c65 6e67 7468 3a20 696e 7420  ast_length: int 
-00010f00: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-00010f10: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
-00010f20: 723d 4e6f 6e65 2c0d 0a20 2020 2020 2020  r=None,..       
-00010f30: 206a 7573 745f 706f 696e 745f 666f 7265   just_point_fore
-00010f40: 6361 7374 3a20 626f 6f6c 203d 2046 616c  cast: bool = Fal
-00010f50: 7365 2c0d 0a20 2020 2020 2020 2064 663d  se,..        df=
-00010f60: 4e6f 6e65 2c0d 0a20 2020 2029 3a0d 0a20  None,..    ):.. 
-00010f70: 2020 2020 2020 2022 2222 4765 6e65 7261         """Genera
-00010f80: 7465 2066 6f72 6563 6173 7420 6461 7461  te forecast data
-00010f90: 2069 6d6d 6564 6961 7465 6c79 2066 6f6c   immediately fol
-00010fa0: 6c6f 7769 6e67 2064 6174 6573 206f 6620  lowing dates of 
-00010fb0: 2e66 6974 2829 2e0d 0a0d 0a20 2020 2020  .fit().....     
-00010fc0: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
-00010fd0: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
-00010fe0: 656e 6774 6820 2869 6e74 293a 204e 756d  ength (int): Num
-00010ff0: 6265 7220 6f66 2070 6572 696f 6473 206f  ber of periods o
-00011000: 6620 6461 7461 2074 6f20 666f 7265 6361  f data to foreca
-00011010: 7374 2061 6865 6164 0d0a 2020 2020 2020  st ahead..      
-00011020: 2020 2020 2020 7265 6772 6573 736f 7220        regressor 
-00011030: 286e 756d 7079 2e41 7272 6179 293a 2061  (numpy.Array): a
-00011040: 6464 6974 696f 6e61 6c20 7265 6772 6573  dditional regres
-00011050: 736f 722c 206e 6f74 2075 7365 640d 0a20  sor, not used.. 
-00011060: 2020 2020 2020 2020 2020 206a 7573 745f             just_
-00011070: 706f 696e 745f 666f 7265 6361 7374 2028  point_forecast (
-00011080: 626f 6f6c 293a 2049 6620 5472 7565 2c20  bool): If True, 
-00011090: 7265 7475 726e 2061 2070 616e 6461 732e  return a pandas.
-000110a0: 4461 7461 4672 616d 6520 6f66 206a 7573  DataFrame of jus
-000110b0: 7420 706f 696e 7420 666f 7265 6361 7374  t point forecast
-000110c0: 730d 0a0d 0a20 2020 2020 2020 2052 6574  s....        Ret
-000110d0: 7572 6e73 3a0d 0a20 2020 2020 2020 2020  urns:..         
-000110e0: 2020 2045 6974 6865 7220 6120 5072 6564     Either a Pred
-000110f0: 6963 7469 6f6e 4f62 6a65 6374 206f 6620  ictionObject of 
-00011100: 666f 7265 6361 7374 7320 616e 6420 6d65  forecasts and me
-00011110: 7461 6461 7461 2c20 6f72 0d0a 2020 2020  tadata, or..    
-00011120: 2020 2020 2020 2020 6966 206a 7573 745f          if just_
-00011130: 706f 696e 745f 666f 7265 6361 7374 203d  point_forecast =
-00011140: 3d20 5472 7565 2c20 6120 6461 7461 6672  = True, a datafr
-00011150: 616d 6520 6f66 2070 6f69 6e74 2066 6f72  ame of point for
-00011160: 6563 6173 7473 0d0a 2020 2020 2020 2020  ecasts..        
-00011170: 2222 220d 0a20 2020 2020 2020 2070 7265  """..        pre
-00011180: 6469 6374 5374 6172 7454 696d 6520 3d20  dictStartTime = 
-00011190: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
-000111a0: 652e 6e6f 7728 290d 0a20 2020 2020 2020  e.now()..       
-000111b0: 2069 6620 6466 2069 7320 6e6f 7420 4e6f   if df is not No
-000111c0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-000111d0: 2073 656c 662e 6669 745f 6461 7461 2864   self.fit_data(d
-000111e0: 6629 0d0a 2020 2020 2020 2020 6966 2066  f)..        if f
-000111f0: 6f72 6563 6173 745f 6c65 6e67 7468 2069  orecast_length i
-00011200: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00011210: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
-00011220: 6e67 7468 203d 2073 656c 662e 666f 7265  ngth = self.fore
-00011230: 6361 7374 5f6c 656e 6774 680d 0a20 2020  cast_length..   
-00011240: 2020 2020 2069 6620 696e 7428 666f 7265       if int(fore
-00011250: 6361 7374 5f6c 656e 6774 6829 203e 2069  cast_length) > i
-00011260: 6e74 2873 656c 662e 666f 7265 6361 7374  nt(self.forecast
-00011270: 5f6c 656e 6774 6829 3a0d 0a20 2020 2020  _length):..     
-00011280: 2020 2020 2020 2070 7269 6e74 2822 5265         print("Re
-00011290: 6772 6573 7369 6f6e 206d 7573 7420 6265  gression must be
-000112a0: 2072 6566 6974 2074 6f20 6368 616e 6765   refit to change
-000112b0: 2066 6f72 6563 6173 7420 6c65 6e67 7468   forecast length
-000112c0: 2122 290d 0a20 2020 2020 2020 2069 6e64  !")..        ind
-000112d0: 6578 203d 2073 656c 662e 6372 6561 7465  ex = self.create
-000112e0: 5f66 6f72 6563 6173 745f 696e 6465 7828  _forecast_index(
-000112f0: 666f 7265 6361 7374 5f6c 656e 6774 683d  forecast_length=
-00011300: 666f 7265 6361 7374 5f6c 656e 6774 6829  forecast_length)
-00011310: 0d0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
-00011320: 6e73 7461 6e63 6528 6675 7475 7265 5f72  nstance(future_r
-00011330: 6567 7265 7373 6f72 2c20 7064 2e53 6572  egressor, pd.Ser
-00011340: 6965 7329 3a0d 0a20 2020 2020 2020 2020  ies):..         
-00011350: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
-00011360: 736f 7220 3d20 6675 7475 7265 5f72 6567  sor = future_reg
-00011370: 7265 7373 6f72 2e74 6f5f 6672 616d 6528  ressor.to_frame(
-00011380: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-00011390: 7365 6c66 2e6f 7574 7075 745f 6469 6d20  self.output_dim 
-000113a0: 3d3d 2027 3173 7465 7027 3a0d 0a20 2020  == '1step':..   
-000113b0: 2020 2020 2020 2020 2023 2063 6f6d 6269           # combi
-000113c0: 6e65 645f 696e 6465 7820 3d20 2873 656c  ned_index = (sel
-000113d0: 662e 6466 5f74 7261 696e 2e69 6e64 6578  f.df_train.index
-000113e0: 2e61 7070 656e 6428 696e 6465 7829 290d  .append(index)).
-000113f0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00011400: 6563 6173 7420 3d20 7064 2e44 6174 6146  ecast = pd.DataF
-00011410: 7261 6d65 2829 0d0a 2020 2020 2020 2020  rame()..        
-00011420: 2020 2020 2320 666f 7265 6361 7374 2c20      # forecast, 
-00011430: 3120 7374 6570 2061 6865 6164 2c20 7468  1 step ahead, th
-00011440: 656e 2061 6e6f 7468 6572 2c20 616e 6420  en another, and 
-00011450: 736f 206f 6e0d 0a20 2020 2020 2020 2020  so on..         
-00011460: 2020 2066 6f72 2078 2069 6e20 7261 6e67     for x in rang
-00011470: 6528 666f 7265 6361 7374 5f6c 656e 6774  e(forecast_lengt
-00011480: 6829 3a0d 0a20 2020 2020 2020 2020 2020  h):..           
-00011490: 2020 2020 2070 7265 6420 3d20 6c61 7374       pred = last
-000114a0: 5f77 696e 646f 7728 0d0a 2020 2020 2020  _window(..      
-000114b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000114c0: 6c66 2e6c 6173 745f 7769 6e64 6f77 2c0d  lf.last_window,.
-000114d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000114e0: 2020 2020 2077 696e 646f 775f 7369 7a65       window_size
-000114f0: 3d73 656c 662e 7769 6e64 6f77 5f73 697a  =self.window_siz
-00011500: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00011510: 2020 2020 2020 2020 696e 7075 745f 6469          input_di
-00011520: 6d3d 7365 6c66 2e69 6e70 7574 5f64 696d  m=self.input_dim
-00011530: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00011540: 2020 2020 2020 206e 6f72 6d61 6c69 7a65         normalize
-00011550: 5f77 696e 646f 773d 7365 6c66 2e6e 6f72  _window=self.nor
-00011560: 6d61 6c69 7a65 5f77 696e 646f 772c 0d0a  malize_window,..
-00011570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011580: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00011590: 2020 2069 6620 7365 6c66 2e72 6567 7265     if self.regre
-000115a0: 7373 696f 6e5f 7479 7065 2069 6e20 5b22  ssion_type in ["
-000115b0: 5573 6572 222c 2022 7573 6572 225d 3a0d  User", "user"]:.
-000115c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000115d0: 2020 2020 2062 6c61 7374 6564 5f74 6869       blasted_thi
-000115e0: 6e67 203d 2028 0d0a 2020 2020 2020 2020  ng = (..        
-000115f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011600: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
-00011610: 2e72 6569 6e64 6578 2869 6e64 6578 292e  .reindex(index).
-00011620: 696c 6f63 5b78 5d2e 746f 5f66 7261 6d65  iloc[x].to_frame
-00011630: 2829 2e74 7261 6e73 706f 7365 2829 0d0a  ().transpose()..
-00011640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011650: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00011660: 2020 2020 2020 2020 2020 2074 6d65 7267             tmerg
-00011670: 203d 2070 642e 636f 6e63 6174 285b 626c   = pd.concat([bl
-00011680: 6173 7465 645f 7468 696e 675d 202a 2070  asted_thing] * p
-00011690: 7265 642e 7368 6170 655b 305d 2c20 6178  red.shape[0], ax
-000116a0: 6973 3d30 290d 0a20 2020 2020 2020 2020  is=0)..         
-000116b0: 2020 2020 2020 2020 2020 2074 6d65 7267             tmerg
-000116c0: 2e69 6e64 6578 203d 2070 7265 642e 696e  .index = pred.in
-000116d0: 6465 780d 0a20 2020 2020 2020 2020 2020  dex..           
-000116e0: 2020 2020 2020 2020 2070 7265 6420 3d20           pred = 
-000116f0: 7064 2e63 6f6e 6361 7428 5b70 7265 642c  pd.concat([pred,
-00011700: 2074 6d65 7267 5d2c 2061 7869 733d 312c   tmerg], axis=1,
-00011710: 2069 676e 6f72 655f 696e 6465 783d 5472   ignore_index=Tr
-00011720: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
-00011730: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00011740: 6365 2870 7265 642c 2070 642e 4461 7461  ce(pred, pd.Data
-00011750: 4672 616d 6529 3a0d 0a20 2020 2020 2020  Frame):..       
-00011760: 2020 2020 2020 2020 2020 2020 2070 7265               pre
-00011770: 6420 3d20 7072 6564 2e74 6f5f 6e75 6d70  d = pred.to_nump
-00011780: 7928 290d 0a20 2020 2020 2020 2020 2020  y()..           
-00011790: 2020 2020 2072 6650 7265 6420 3d20 7064       rfPred = pd
-000117a0: 2e44 6174 6146 7261 6d65 2873 656c 662e  .DataFrame(self.
-000117b0: 6d6f 6465 6c2e 7072 6564 6963 7428 7072  model.predict(pr
-000117c0: 6564 2929 0d0a 2020 2020 2020 2020 2020  ed))..          
-000117d0: 2020 2020 2020 6966 2073 656c 662e 696e        if self.in
-000117e0: 7075 745f 6469 6d20 3d3d 2027 756e 6976  put_dim == 'univ
-000117f0: 6172 6961 7465 273a 0d0a 2020 2020 2020  ariate':..      
-00011800: 2020 2020 2020 2020 2020 2020 2020 7266                rf
-00011810: 5072 6564 203d 2072 6650 7265 642e 7472  Pred = rfPred.tr
-00011820: 616e 7370 6f73 6528 290d 0a20 2020 2020  anspose()..     
-00011830: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011840: 6650 7265 642e 636f 6c75 6d6e 7320 3d20  fPred.columns = 
-00011850: 7365 6c66 2e6c 6173 745f 7769 6e64 6f77  self.last_window
-00011860: 2e63 6f6c 756d 6e73 0d0a 2020 2020 2020  .columns..      
-00011870: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-00011880: 7374 203d 2070 642e 636f 6e63 6174 285b  st = pd.concat([
-00011890: 666f 7265 6361 7374 2c20 7266 5072 6564  forecast, rfPred
-000118a0: 5d2c 2061 7869 733d 302c 2069 676e 6f72  ], axis=0, ignor
-000118b0: 655f 696e 6465 783d 5472 7565 290d 0a20  e_index=True).. 
-000118c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000118d0: 656c 662e 6c61 7374 5f77 696e 646f 7720  elf.last_window 
-000118e0: 3d20 7064 2e63 6f6e 6361 7428 0d0a 2020  = pd.concat(..  
-000118f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011900: 2020 5b73 656c 662e 6c61 7374 5f77 696e    [self.last_win
-00011910: 646f 772c 2072 6650 7265 645d 2c20 6178  dow, rfPred], ax
-00011920: 6973 3d30 2c20 6967 6e6f 7265 5f69 6e64  is=0, ignore_ind
-00011930: 6578 3d54 7275 650d 0a20 2020 2020 2020  ex=True..       
-00011940: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00011950: 2020 2020 2020 2020 6466 203d 2066 6f72          df = for
-00011960: 6563 6173 740d 0a0d 0a20 2020 2020 2020  ecast....       
-00011970: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00011980: 2020 2020 7072 6564 203d 206c 6173 745f      pred = last_
-00011990: 7769 6e64 6f77 280d 0a20 2020 2020 2020  window(..       
-000119a0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
-000119b0: 7374 5f77 696e 646f 772c 0d0a 2020 2020  st_window,..    
-000119c0: 2020 2020 2020 2020 2020 2020 7769 6e64              wind
-000119d0: 6f77 5f73 697a 653d 7365 6c66 2e77 696e  ow_size=self.win
-000119e0: 646f 775f 7369 7a65 2c0d 0a20 2020 2020  dow_size,..     
-000119f0: 2020 2020 2020 2020 2020 2069 6e70 7574             input
-00011a00: 5f64 696d 3d73 656c 662e 696e 7075 745f  _dim=self.input_
-00011a10: 6469 6d2c 0d0a 2020 2020 2020 2020 2020  dim,..          
-00011a20: 2020 2020 2020 6e6f 726d 616c 697a 655f        normalize_
-00011a30: 7769 6e64 6f77 3d73 656c 662e 6e6f 726d  window=self.norm
-00011a40: 616c 697a 655f 7769 6e64 6f77 2c0d 0a20  alize_window,.. 
-00011a50: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00011a60: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00011a70: 662e 7265 6772 6573 7369 6f6e 5f74 7970  f.regression_typ
-00011a80: 6520 696e 205b 2255 7365 7222 2c20 2275  e in ["User", "u
-00011a90: 7365 7222 5d3a 0d0a 2020 2020 2020 2020  ser"]:..        
-00011aa0: 2020 2020 2020 2020 746d 6572 6720 3d20          tmerg = 
-00011ab0: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
-00011ac0: 2e74 6169 6c28 3129 2e6c 6f63 5b0d 0a20  .tail(1).loc[.. 
-00011ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ae0: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
-00011af0: 736f 722e 7461 696c 2831 292e 696e 6465  sor.tail(1).inde
-00011b00: 782e 7265 7065 6174 2870 7265 642e 7368  x.repeat(pred.sh
-00011b10: 6170 655b 305d 290d 0a20 2020 2020 2020  ape[0])..       
-00011b20: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
-00011b30: 2020 2020 2020 2020 2020 2020 746d 6572              tmer
-00011b40: 672e 696e 6465 7820 3d20 7072 6564 2e69  g.index = pred.i
-00011b50: 6e64 6578 0d0a 2020 2020 2020 2020 2020  ndex..          
-00011b60: 2020 2020 2020 7072 6564 203d 2070 642e        pred = pd.
-00011b70: 636f 6e63 6174 285b 7072 6564 2c20 746d  concat([pred, tm
-00011b80: 6572 675d 2c20 6178 6973 3d31 290d 0a20  erg], axis=1).. 
-00011b90: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00011ba0: 696e 7374 616e 6365 2870 7265 642c 2070  instance(pred, p
-00011bb0: 642e 4461 7461 4672 616d 6529 3a0d 0a20  d.DataFrame):.. 
-00011bc0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00011bd0: 7265 6420 3d20 7072 6564 2e74 6f5f 6e75  red = pred.to_nu
-00011be0: 6d70 7928 6474 7970 653d 6e70 2e66 6c6f  mpy(dtype=np.flo
-00011bf0: 6174 3332 290d 0a20 2020 2020 2020 2020  at32)..         
-00011c00: 2020 2063 5920 3d20 7064 2e44 6174 6146     cY = pd.DataF
-00011c10: 7261 6d65 2873 656c 662e 6d6f 6465 6c2e  rame(self.model.
-00011c20: 7072 6564 6963 7428 7072 6564 2e61 7374  predict(pred.ast
-00011c30: 7970 6528 666c 6f61 7429 2929 0d0a 2020  ype(float)))..  
-00011c40: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00011c50: 662e 696e 7075 745f 6469 6d20 3d3d 2027  f.input_dim == '
-00011c60: 6d75 6c74 6976 6172 6961 7465 273a 0d0a  multivariate':..
-00011c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c80: 6359 2e69 6e64 6578 203d 205b 2776 616c  cY.index = ['val
-00011c90: 7565 7327 5d0d 0a20 2020 2020 2020 2020  ues']..         
-00011ca0: 2020 2020 2020 2063 592e 636f 6c75 6d6e         cY.column
-00011cb0: 7320 3d20 6e70 2e74 696c 6528 7365 6c66  s = np.tile(self
-00011cc0: 2e63 6f6c 756d 6e5f 6e61 6d65 732c 2072  .column_names, r
-00011cd0: 6570 733d 7365 6c66 2e66 6f72 6563 6173  eps=self.forecas
-00011ce0: 745f 6c65 6e67 7468 290d 0a20 2020 2020  t_length)..     
-00011cf0: 2020 2020 2020 2020 2020 2063 5920 3d20             cY = 
-00011d00: 6359 2e74 7261 6e73 706f 7365 2829 2e72  cY.transpose().r
-00011d10: 6573 6574 5f69 6e64 6578 2829 0d0a 2020  eset_index()..  
-00011d20: 2020 2020 2020 2020 2020 2020 2020 6359                cY
-00011d30: 5b27 7469 6d65 7374 6570 275d 203d 206e  ['timestep'] = n
-00011d40: 702e 7265 7065 6174 280d 0a20 2020 2020  p.repeat(..     
-00011d50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011d60: 616e 6765 2866 6f72 6563 6173 745f 6c65  ange(forecast_le
-00011d70: 6e67 7468 292c 2072 6570 6561 7473 3d6c  ngth), repeats=l
-00011d80: 656e 2873 656c 662e 636f 6c75 6d6e 5f6e  en(self.column_n
-00011d90: 616d 6573 290d 0a20 2020 2020 2020 2020  ames)..         
-00011da0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00011db0: 2020 2020 2020 2020 2020 6359 203d 2070            cY = p
-00011dc0: 642e 7069 766f 745f 7461 626c 6528 6359  d.pivot_table(cY
-00011dd0: 2c20 696e 6465 783d 2774 696d 6573 7465  , index='timeste
-00011de0: 7027 2c20 636f 6c75 6d6e 733d 2769 6e64  p', columns='ind
-00011df0: 6578 2729 0d0a 2020 2020 2020 2020 2020  ex')..          
-00011e00: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00011e10: 2020 2020 2020 2020 2063 5920 3d20 6359           cY = cY
-00011e20: 2e74 7261 6e73 706f 7365 2829 0d0a 2020  .transpose()..  
-00011e30: 2020 2020 2020 2020 2020 6466 203d 2063            df = c
-00011e40: 590d 0a0d 0a20 2020 2020 2020 2064 662e  Y....        df.
-00011e50: 636f 6c75 6d6e 7320 3d20 7365 6c66 2e63  columns = self.c
-00011e60: 6f6c 756d 6e5f 6e61 6d65 730d 0a20 2020  olumn_names..   
-00011e70: 2020 2020 2064 662e 696e 6465 7820 3d20       df.index = 
-00011e80: 696e 6465 780d 0a20 2020 2020 2020 2069  index..        i
-00011e90: 6620 6a75 7374 5f70 6f69 6e74 5f66 6f72  f just_point_for
-00011ea0: 6563 6173 743a 0d0a 2020 2020 2020 2020  ecast:..        
-00011eb0: 2020 2020 7265 7475 726e 2064 660d 0a20      return df.. 
-00011ec0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00011ed0: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
-00011ee0: 666f 7265 6361 7374 2c20 6c6f 7765 725f  forecast, lower_
-00011ef0: 666f 7265 6361 7374 203d 2050 6f69 6e74  forecast = Point
-00011f00: 5f74 6f5f 5072 6f62 6162 696c 6974 7928  _to_Probability(
-00011f10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011f20: 2020 7365 6c66 2e64 665f 7472 6169 6e2c    self.df_train,
-00011f30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011f40: 2020 6466 2c0d 0a20 2020 2020 2020 2020    df,..         
-00011f50: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-00011f60: 6e5f 696e 7465 7276 616c 3d73 656c 662e  n_interval=self.
-00011f70: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
-00011f80: 7661 6c2c 0d0a 2020 2020 2020 2020 2020  val,..          
-00011f90: 2020 2020 2020 6d65 7468 6f64 3d27 6869        method='hi
-00011fa0: 7374 6f72 6963 5f71 7561 6e74 696c 6527  storic_quantile'
-00011fb0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
-00011fc0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00011fd0: 7072 6564 6963 745f 7275 6e74 696d 6520  predict_runtime 
-00011fe0: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
-00011ff0: 696d 652e 6e6f 7728 2920 2d20 7072 6564  ime.now() - pred
-00012000: 6963 7453 7461 7274 5469 6d65 0d0a 2020  ictStartTime..  
-00012010: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00012020: 7469 6f6e 203d 2050 7265 6469 6374 696f  tion = Predictio
-00012030: 6e4f 626a 6563 7428 0d0a 2020 2020 2020  nObject(..      
-00012040: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-00012050: 6e61 6d65 3d73 656c 662e 6e61 6d65 2c0d  name=self.name,.
-00012060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012070: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
-00012080: 3d66 6f72 6563 6173 745f 6c65 6e67 7468  =forecast_length
-00012090: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000120a0: 2020 2066 6f72 6563 6173 745f 696e 6465     forecast_inde
-000120b0: 783d 6466 2e69 6e64 6578 2c0d 0a20 2020  x=df.index,..   
-000120c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000120d0: 6563 6173 745f 636f 6c75 6d6e 733d 6466  ecast_columns=df
-000120e0: 2e63 6f6c 756d 6e73 2c0d 0a20 2020 2020  .columns,..     
-000120f0: 2020 2020 2020 2020 2020 2023 2073 6f20             # so 
-00012100: 6974 2773 2070 726f 6475 6369 6e67 2066  it's producing f
-00012110: 6c6f 6174 3332 2062 7574 2070 616e 6461  loat32 but panda
-00012120: 7320 6973 2062 6574 7465 7220 7769 7468  s is better with
-00012130: 2066 6c6f 6174 3634 0d0a 2020 2020 2020   float64..      
-00012140: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
-00012150: 666f 7265 6361 7374 3d6c 6f77 6572 5f66  forecast=lower_f
-00012160: 6f72 6563 6173 742e 6173 7479 7065 2866  orecast.astype(f
-00012170: 6c6f 6174 292c 0d0a 2020 2020 2020 2020  loat),..        
-00012180: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-00012190: 3d64 662e 6173 7479 7065 2866 6c6f 6174  =df.astype(float
-000121a0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000121b0: 2020 2020 7570 7065 725f 666f 7265 6361      upper_foreca
-000121c0: 7374 3d75 7070 6572 5f66 6f72 6563 6173  st=upper_forecas
-000121d0: 742e 6173 7479 7065 2866 6c6f 6174 292c  t.astype(float),
-000121e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000121f0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
-00012200: 6572 7661 6c3d 7365 6c66 2e70 7265 6469  erval=self.predi
-00012210: 6374 696f 6e5f 696e 7465 7276 616c 2c0d  ction_interval,.
-00012220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012230: 2070 7265 6469 6374 5f72 756e 7469 6d65   predict_runtime
-00012240: 3d70 7265 6469 6374 5f72 756e 7469 6d65  =predict_runtime
-00012250: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00012260: 2020 2066 6974 5f72 756e 7469 6d65 3d73     fit_runtime=s
-00012270: 656c 662e 6669 745f 7275 6e74 696d 652c  elf.fit_runtime,
-00012280: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012290: 2020 6d6f 6465 6c5f 7061 7261 6d65 7465    model_paramete
-000122a0: 7273 3d73 656c 662e 6765 745f 7061 7261  rs=self.get_para
-000122b0: 6d73 2829 2c0d 0a20 2020 2020 2020 2020  ms(),..         
-000122c0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000122d0: 2020 7265 7475 726e 2070 7265 6469 6374    return predict
-000122e0: 696f 6e0d 0a0d 0a20 2020 2064 6566 2067  ion....    def g
-000122f0: 6574 5f6e 6577 5f70 6172 616d 7328 7365  et_new_params(se
-00012300: 6c66 2c20 6d65 7468 6f64 3a20 7374 7220  lf, method: str 
-00012310: 3d20 2772 616e 646f 6d27 293a 0d0a 2020  = 'random'):..  
-00012320: 2020 2020 2020 2222 2252 6574 7572 6e20        """Return 
-00012330: 6469 6374 206f 6620 6e65 7720 7061 7261  dict of new para
-00012340: 6d65 7465 7273 2066 6f72 2070 6172 616d  meters for param
-00012350: 6574 6572 2074 756e 696e 672e 2222 220d  eter tuning.""".
-00012360: 0a20 2020 2020 2020 2077 6e64 5f73 7a5f  .        wnd_sz_
-00012370: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
-00012380: 6368 6f69 6365 285b 352c 2031 302c 2032  choice([5, 10, 2
-00012390: 302c 2073 6561 736f 6e61 6c5f 696e 7428  0, seasonal_int(
-000123a0: 295d 290d 0a20 2020 2020 2020 2069 6620  )])..        if 
-000123b0: 6d65 7468 6f64 2021 3d20 2264 6565 7022  method != "deep"
-000123c0: 3a0d 0a20 2020 2020 2020 2020 2020 2077  :..            w
-000123d0: 6e64 5f73 7a5f 6368 6f69 6365 203d 2077  nd_sz_choice = w
-000123e0: 6e64 5f73 7a5f 6368 6f69 6365 2069 6620  nd_sz_choice if 
-000123f0: 776e 645f 737a 5f63 686f 6963 6520 3c20  wnd_sz_choice < 
-00012400: 3931 2065 6c73 6520 3930 0d0a 2020 2020  91 else 90..    
-00012410: 2020 2020 6d6f 6465 6c5f 6368 6f69 6365      model_choice
-00012420: 203d 2067 656e 6572 6174 655f 7265 6772   = generate_regr
-00012430: 6573 736f 725f 7061 7261 6d73 280d 0a20  essor_params(.. 
-00012440: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-00012450: 5f64 6963 743d 736b 6c65 6172 6e5f 6d6f  _dict=sklearn_mo
-00012460: 6465 6c5f 6469 6374 2c20 6d65 7468 6f64  del_dict, method
-00012470: 3d6d 6574 686f 640d 0a20 2020 2020 2020  =method..       
-00012480: 2029 0d0a 2020 2020 2020 2020 6966 2022   )..        if "
-00012490: 7265 6772 6573 736f 7222 2069 6e20 6d65  regressor" in me
-000124a0: 7468 6f64 3a0d 0a20 2020 2020 2020 2020  thod:..         
-000124b0: 2020 2072 6567 7265 7373 696f 6e5f 7479     regression_ty
-000124c0: 7065 5f63 686f 6963 6520 3d20 2255 7365  pe_choice = "Use
-000124d0: 7222 0d0a 2020 2020 2020 2020 2020 2020  r"..            
-000124e0: 696e 7075 745f 6469 6d5f 6368 6f69 6365  input_dim_choice
-000124f0: 203d 2027 756e 6976 6172 6961 7465 270d   = 'univariate'.
-00012500: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
-00012510: 7075 745f 6469 6d5f 6368 6f69 6365 203d  put_dim_choice =
-00012520: 2072 616e 646f 6d2e 6368 6f69 6365 280d   random.choice(.
-00012530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012540: 205b 2766 6f72 6563 6173 745f 6c65 6e67   ['forecast_leng
-00012550: 7468 272c 2027 3173 7465 7027 5d2c 0d0a  th', '1step'],..
-00012560: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00012570: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00012580: 2020 2020 2020 2020 2020 696e 7075 745f            input_
-00012590: 6469 6d5f 6368 6f69 6365 203d 2072 616e  dim_choice = ran
-000125a0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
-000125b0: 2020 2020 2020 2020 2020 2020 2020 5b27                ['
-000125c0: 6d75 6c74 6976 6172 6961 7465 272c 2027  multivariate', '
-000125d0: 756e 6976 6172 6961 7465 275d 2c20 5b30  univariate'], [0
-000125e0: 2e30 312c 2030 2e39 395d 0d0a 2020 2020  .01, 0.99]..    
-000125f0: 2020 2020 2020 2020 295b 305d 0d0a 2020          )[0]..  
-00012600: 2020 2020 2020 2020 2020 6966 2069 6e70            if inp
-00012610: 7574 5f64 696d 5f63 686f 6963 6520 3d3d  ut_dim_choice ==
-00012620: 2022 6d75 6c74 6976 6172 6961 7465 223a   "multivariate":
-00012630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012640: 2020 6f75 7470 7574 5f64 696d 5f63 686f    output_dim_cho
-00012650: 6963 6520 3d20 2231 7374 6570 220d 0a20  ice = "1step".. 
-00012660: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00012670: 6567 7265 7373 696f 6e5f 7479 7065 5f63  egression_type_c
-00012680: 686f 6963 6520 3d20 4e6f 6e65 0d0a 2020  hoice = None..  
-00012690: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000126a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000126b0: 206f 7574 7075 745f 6469 6d5f 6368 6f69   output_dim_choi
-000126c0: 6365 203d 2072 616e 646f 6d2e 6368 6f69  ce = random.choi
-000126d0: 6365 280d 0a20 2020 2020 2020 2020 2020  ce(..           
-000126e0: 2020 2020 2020 2020 205b 2766 6f72 6563           ['forec
-000126f0: 6173 745f 6c65 6e67 7468 272c 2027 3173  ast_length', '1s
-00012700: 7465 7027 5d2c 0d0a 2020 2020 2020 2020  tep'],..        
-00012710: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-00012720: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-00012730: 7373 696f 6e5f 7479 7065 5f63 686f 6963  ssion_type_choic
-00012740: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-00012750: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
-00012760: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
-00012770: 2255 7365 7222 5d2c 2077 6569 6768 7473  "User"], weights
-00012780: 3d5b 302e 382c 2030 2e32 5d0d 0a20 2020  =[0.8, 0.2]..   
-00012790: 2020 2020 2020 2020 2020 2020 2029 5b30               )[0
-000127a0: 5d0d 0a20 2020 2020 2020 206e 6f72 6d61  ]..        norma
-000127b0: 6c69 7a65 5f77 696e 646f 775f 6368 6f69  lize_window_choi
-000127c0: 6365 203d 2072 616e 646f 6d2e 6368 6f69  ce = random.choi
-000127d0: 6365 7328 5b54 7275 652c 2046 616c 7365  ces([True, False
-000127e0: 5d2c 205b 302e 3035 2c20 302e 3935 5d29  ], [0.05, 0.95])
-000127f0: 5b30 5d0d 0a20 2020 2020 2020 2069 6620  [0]..        if 
-00012800: 6d65 7468 6f64 203d 3d20 2264 6565 7022  method == "deep"
-00012810: 3a0d 0a20 2020 2020 2020 2020 2020 206d  :..            m
-00012820: 6178 5f77 696e 646f 7773 5f63 686f 6963  ax_windows_choic
-00012830: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-00012840: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
-00012850: 2020 2020 205b 3530 3030 2c20 3530 3030       [5000, 5000
-00012860: 302c 2035 3030 3030 3030 2c20 4e6f 6e65  0, 5000000, None
-00012870: 5d2c 205b 302e 342c 2030 2e32 2c20 302e  ], [0.4, 0.2, 0.
-00012880: 392c 2030 2e30 355d 0d0a 2020 2020 2020  9, 0.05]..      
-00012890: 2020 2020 2020 295b 305d 0d0a 2020 2020        )[0]..    
-000128a0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-000128b0: 2020 2020 2020 206d 6178 5f77 696e 646f         max_windo
-000128c0: 7773 5f63 686f 6963 6520 3d20 7261 6e64  ws_choice = rand
-000128d0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
-000128e0: 2020 2020 2020 2020 2020 2020 205b 3530               [50
-000128f0: 3030 2c20 3530 3030 302c 2035 3030 3030  00, 50000, 50000
-00012900: 3030 5d2c 205b 302e 322c 2030 2e32 2c20  00], [0.2, 0.2, 
-00012910: 302e 395d 0d0a 2020 2020 2020 2020 2020  0.9]..          
-00012920: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
-00012930: 7265 7475 726e 207b 0d0a 2020 2020 2020  return {..      
-00012940: 2020 2020 2020 2777 696e 646f 775f 7369        'window_si
-00012950: 7a65 273a 2077 6e64 5f73 7a5f 6368 6f69  ze': wnd_sz_choi
-00012960: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-00012970: 2027 696e 7075 745f 6469 6d27 3a20 696e   'input_dim': in
-00012980: 7075 745f 6469 6d5f 6368 6f69 6365 2c0d  put_dim_choice,.
-00012990: 0a20 2020 2020 2020 2020 2020 2027 6f75  .            'ou
-000129a0: 7470 7574 5f64 696d 273a 206f 7574 7075  tput_dim': outpu
-000129b0: 745f 6469 6d5f 6368 6f69 6365 2c0d 0a20  t_dim_choice,.. 
-000129c0: 2020 2020 2020 2020 2020 2027 6e6f 726d             'norm
-000129d0: 616c 697a 655f 7769 6e64 6f77 273a 206e  alize_window': n
-000129e0: 6f72 6d61 6c69 7a65 5f77 696e 646f 775f  ormalize_window_
-000129f0: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00012a00: 2020 2020 2027 6d61 785f 7769 6e64 6f77       'max_window
-00012a10: 7327 3a20 6d61 785f 7769 6e64 6f77 735f  s': max_windows_
-00012a20: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00012a30: 2020 2020 2027 7265 6772 6573 7369 6f6e       'regression
-00012a40: 5f74 7970 6527 3a20 7265 6772 6573 7369  _type': regressi
-00012a50: 6f6e 5f74 7970 655f 6368 6f69 6365 2c0d  on_type_choice,.
-00012a60: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-00012a70: 6772 6573 7369 6f6e 5f6d 6f64 656c 273a  gression_model':
-00012a80: 206d 6f64 656c 5f63 686f 6963 652c 0d0a   model_choice,..
-00012a90: 2020 2020 2020 2020 7d0d 0a0d 0a20 2020          }....   
-00012aa0: 2064 6566 2067 6574 5f70 6172 616d 7328   def get_params(
-00012ab0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00012ac0: 2222 2252 6574 7572 6e20 6469 6374 206f  """Return dict o
-00012ad0: 6620 6375 7272 656e 7420 7061 7261 6d65  f current parame
-00012ae0: 7465 7273 2e22 2222 0d0a 2020 2020 2020  ters."""..      
-00012af0: 2020 7265 7475 726e 207b 0d0a 2020 2020    return {..    
-00012b00: 2020 2020 2020 2020 2777 696e 646f 775f          'window_
-00012b10: 7369 7a65 273a 2073 656c 662e 7769 6e64  size': self.wind
-00012b20: 6f77 5f73 697a 652c 0d0a 2020 2020 2020  ow_size,..      
-00012b30: 2020 2020 2020 2769 6e70 7574 5f64 696d        'input_dim
-00012b40: 273a 2073 656c 662e 696e 7075 745f 6469  ': self.input_di
-00012b50: 6d2c 0d0a 2020 2020 2020 2020 2020 2020  m,..            
-00012b60: 276f 7574 7075 745f 6469 6d27 3a20 7365  'output_dim': se
-00012b70: 6c66 2e6f 7574 7075 745f 6469 6d2c 0d0a  lf.output_dim,..
-00012b80: 2020 2020 2020 2020 2020 2020 276e 6f72              'nor
-00012b90: 6d61 6c69 7a65 5f77 696e 646f 7727 3a20  malize_window': 
-00012ba0: 7365 6c66 2e6e 6f72 6d61 6c69 7a65 5f77  self.normalize_w
-00012bb0: 696e 646f 772c 0d0a 2020 2020 2020 2020  indow,..        
-00012bc0: 2020 2020 276d 6178 5f77 696e 646f 7773      'max_windows
-00012bd0: 273a 2073 656c 662e 6d61 785f 7769 6e64  ': self.max_wind
-00012be0: 6f77 732c 0d0a 2020 2020 2020 2020 2020  ows,..          
-00012bf0: 2020 2772 6567 7265 7373 696f 6e5f 7479    'regression_ty
-00012c00: 7065 273a 2073 656c 662e 7265 6772 6573  pe': self.regres
-00012c10: 7369 6f6e 5f74 7970 652c 0d0a 2020 2020  sion_type,..    
-00012c20: 2020 2020 2020 2020 2772 6567 7265 7373          'regress
-00012c30: 696f 6e5f 6d6f 6465 6c27 3a20 7365 6c66  ion_model': self
-00012c40: 2e72 6567 7265 7373 696f 6e5f 6d6f 6465  .regression_mode
-00012c50: 6c2c 0d0a 2020 2020 2020 2020 7d0d 0a0d  l,..        }...
-00012c60: 0a0d 0a63 6c61 7373 2043 6f6d 706f 6e65  ...class Compone
-00012c70: 6e74 416e 616c 7973 6973 284d 6f64 656c  ntAnalysis(Model
-00012c80: 4f62 6a65 6374 293a 0d0a 2020 2020 2222  Object):..    ""
-00012c90: 2246 6f72 6563 6173 7469 6e67 206f 6e20  "Forecasting on 
-00012ca0: 7072 696e 6369 706c 6520 636f 6d70 6f6e  principle compon
-00012cb0: 656e 7473 2e0d 0a0d 0a20 2020 2041 7267  ents.....    Arg
-00012cc0: 733a 0d0a 2020 2020 2020 2020 6e61 6d65  s:..        name
-00012cd0: 2028 7374 7229 3a20 5374 7269 6e67 2074   (str): String t
-00012ce0: 6f20 6964 656e 7469 6679 2063 6c61 7373  o identify class
-00012cf0: 0d0a 2020 2020 2020 2020 6672 6571 7565  ..        freque
-00012d00: 6e63 7920 2873 7472 293a 2053 7472 696e  ncy (str): Strin
-00012d10: 6720 616c 6961 7320 6f66 2064 6174 6574  g alias of datet
-00012d20: 696d 6520 696e 6465 7820 6672 6571 7565  ime index freque
-00012d30: 6e63 7920 6f72 2065 6c73 6520 2769 6e66  ncy or else 'inf
-00012d40: 6572 270d 0a20 2020 2020 2020 2070 7265  er'..        pre
-00012d50: 6469 6374 696f 6e5f 696e 7465 7276 616c  diction_interval
-00012d60: 2028 666c 6f61 7429 3a20 436f 6e66 6964   (float): Confid
-00012d70: 656e 6365 2069 6e74 6572 7661 6c20 666f  ence interval fo
-00012d80: 7220 7072 6f62 6162 696c 6973 7469 6320  r probabilistic 
-00012d90: 666f 7265 6361 7374 0d0a 2020 2020 2020  forecast..      
-00012da0: 2020 6d6f 6465 6c20 2873 7472 293a 2041    model (str): A
-00012db0: 6e20 4175 746f 5453 206d 6f64 656c 2073  n AutoTS model s
-00012dc0: 7472 0d0a 2020 2020 2020 2020 6d6f 6465  tr..        mode
-00012dd0: 6c5f 7061 7261 6d65 7465 7273 2028 6469  l_parameters (di
-00012de0: 6374 293a 2070 6172 616d 6574 6572 7320  ct): parameters 
-00012df0: 746f 2070 6173 7320 746f 2041 7574 6f54  to pass to AutoT
-00012e00: 5320 6d6f 6465 6c0d 0a20 2020 2020 2020  S model..       
-00012e10: 206e 5f63 6f6d 706f 6e65 6e74 7320 2869   n_components (i
-00012e20: 6e74 293a 2069 6e74 206f 7220 274e 7468  nt): int or 'Nth
-00012e30: 4e27 206e 756d 6265 7220 6f66 2063 6f6d  N' number of com
-00012e40: 706f 6e65 6e74 7320 746f 2075 7365 0d0a  ponents to use..
-00012e50: 2020 2020 2020 2020 6465 636f 6d70 6f73          decompos
-00012e60: 6974 696f 6e20 2873 7472 293a 2064 6563  ition (str): dec
-00012e70: 6f6d 706f 7369 7469 6f6e 206d 6574 686f  omposition metho
-00012e80: 6420 746f 2075 7365 2066 726f 6d20 7363  d to use from sc
-00012e90: 696b 6974 2d6c 6561 726e 0d0a 0d0a 2020  ikit-learn....  
-00012ea0: 2020 2222 220d 0a0d 0a20 2020 2064 6566    """....    def
-00012eb0: 205f 5f69 6e69 745f 5f28 0d0a 2020 2020   __init__(..    
-00012ec0: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
-00012ed0: 2020 206e 616d 653a 2073 7472 203d 2022     name: str = "
-00012ee0: 436f 6d70 6f6e 656e 7441 6e61 6c79 7369  ComponentAnalysi
-00012ef0: 7322 2c0d 0a20 2020 2020 2020 2066 7265  s",..        fre
-00012f00: 7175 656e 6379 3a20 7374 7220 3d20 2769  quency: str = 'i
-00012f10: 6e66 6572 272c 0d0a 2020 2020 2020 2020  nfer',..        
-00012f20: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
-00012f30: 7661 6c3a 2066 6c6f 6174 203d 2030 2e39  val: float = 0.9
-00012f40: 2c0d 0a20 2020 2020 2020 2068 6f6c 6964  ,..        holid
-00012f50: 6179 5f63 6f75 6e74 7279 3a20 7374 7220  ay_country: str 
-00012f60: 3d20 2755 5327 2c0d 0a20 2020 2020 2020  = 'US',..       
-00012f70: 2072 616e 646f 6d5f 7365 6564 3a20 696e   random_seed: in
-00012f80: 7420 3d20 3230 3230 2c0d 0a20 2020 2020  t = 2020,..     
-00012f90: 2020 2076 6572 626f 7365 3a20 696e 7420     verbose: int 
-00012fa0: 3d20 302c 0d0a 2020 2020 2020 2020 6e5f  = 0,..        n_
-00012fb0: 636f 6d70 6f6e 656e 7473 3a20 696e 7420  components: int 
-00012fc0: 3d20 3130 2c0d 0a20 2020 2020 2020 2066  = 10,..        f
-00012fd0: 6f72 6563 6173 745f 6c65 6e67 7468 3a20  orecast_length: 
-00012fe0: 696e 7420 3d20 3134 2c0d 0a20 2020 2020  int = 14,..     
-00012ff0: 2020 206d 6f64 656c 3a20 7374 7220 3d20     model: str = 
-00013000: 2747 4c53 272c 0d0a 2020 2020 2020 2020  'GLS',..        
-00013010: 6d6f 6465 6c5f 7061 7261 6d65 7465 7273  model_parameters
-00013020: 3a20 6469 6374 203d 207b 7d2c 0d0a 2020  : dict = {},..  
-00013030: 2020 2020 2020 6465 636f 6d70 6f73 6974        decomposit
-00013040: 696f 6e3a 2073 7472 203d 2027 5043 4127  ion: str = 'PCA'
-00013050: 2c0d 0a20 2020 2020 2020 206e 5f6a 6f62  ,..        n_job
-00013060: 733a 2069 6e74 203d 202d 312c 0d0a 2020  s: int = -1,..  
-00013070: 2020 293a 0d0a 2020 2020 2020 2020 4d6f    ):..        Mo
-00013080: 6465 6c4f 626a 6563 742e 5f5f 696e 6974  delObject.__init
-00013090: 5f5f 280d 0a20 2020 2020 2020 2020 2020  __(..           
-000130a0: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-000130b0: 2020 2020 6e61 6d65 2c0d 0a20 2020 2020      name,..     
-000130c0: 2020 2020 2020 2066 7265 7175 656e 6379         frequency
-000130d0: 2c0d 0a20 2020 2020 2020 2020 2020 2070  ,..            p
-000130e0: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
-000130f0: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
-00013100: 2068 6f6c 6964 6179 5f63 6f75 6e74 7279   holiday_country
-00013110: 3d68 6f6c 6964 6179 5f63 6f75 6e74 7279  =holiday_country
-00013120: 2c0d 0a20 2020 2020 2020 2020 2020 2072  ,..            r
-00013130: 616e 646f 6d5f 7365 6564 3d72 616e 646f  andom_seed=rando
-00013140: 6d5f 7365 6564 2c0d 0a20 2020 2020 2020  m_seed,..       
-00013150: 2020 2020 2076 6572 626f 7365 3d76 6572       verbose=ver
-00013160: 626f 7365 2c0d 0a20 2020 2020 2020 2020  bose,..         
-00013170: 2020 206e 5f6a 6f62 733d 6e5f 6a6f 6273     n_jobs=n_jobs
-00013180: 2c0d 0a20 2020 2020 2020 2029 0d0a 2020  ,..        )..  
-00013190: 2020 2020 2020 7365 6c66 2e6d 6f64 656c        self.model
-000131a0: 203d 206d 6f64 656c 0d0a 2020 2020 2020   = model..      
-000131b0: 2020 7365 6c66 2e6d 6f64 656c 5f70 6172    self.model_par
-000131c0: 616d 6574 6572 7320 3d20 6d6f 6465 6c5f  ameters = model_
-000131d0: 7061 7261 6d65 7465 7273 0d0a 2020 2020  parameters..    
-000131e0: 2020 2020 7365 6c66 2e64 6563 6f6d 706f      self.decompo
-000131f0: 7369 7469 6f6e 203d 2064 6563 6f6d 706f  sition = decompo
-00013200: 7369 7469 6f6e 0d0a 2020 2020 2020 2020  sition..        
-00013210: 7365 6c66 2e6e 5f63 6f6d 706f 6e65 6e74  self.n_component
-00013220: 7320 3d20 6e5f 636f 6d70 6f6e 656e 7473  s = n_components
-00013230: 0d0a 2020 2020 2020 2020 7365 6c66 2e66  ..        self.f
-00013240: 6f72 6563 6173 745f 6c65 6e67 7468 203d  orecast_length =
-00013250: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
-00013260: 0d0a 0d0a 2020 2020 6465 6620 6669 7428  ....    def fit(
-00013270: 7365 6c66 2c20 6466 2c20 6675 7475 7265  self, df, future
-00013280: 5f72 6567 7265 7373 6f72 3d4e 6f6e 6529  _regressor=None)
-00013290: 3a0d 0a20 2020 2020 2020 2022 2222 5472  :..        """Tr
-000132a0: 6169 6e20 616c 676f 7269 7468 6d20 6769  ain algorithm gi
-000132b0: 7665 6e20 6461 7461 2073 7570 706c 6965  ven data supplie
-000132c0: 642e 0d0a 0d0a 2020 2020 2020 2020 4172  d.....        Ar
-000132d0: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
-000132e0: 2064 6620 2870 616e 6461 732e 4461 7461   df (pandas.Data
-000132f0: 4672 616d 6529 3a20 4461 7465 7469 6d65  Frame): Datetime
-00013300: 2049 6e64 6578 6564 0d0a 2020 2020 2020   Indexed..      
-00013310: 2020 2222 220d 0a20 2020 2020 2020 2064    """..        d
-00013320: 6620 3d20 7365 6c66 2e62 6173 6963 5f70  f = self.basic_p
-00013330: 726f 6669 6c65 2864 6629 0d0a 2020 2020  rofile(df)..    
-00013340: 2020 2020 7365 6c66 2e64 665f 7472 6169      self.df_trai
-00013350: 6e20 3d20 6466 0d0a 2020 2020 2020 2020  n = df..        
-00013360: 6966 2027 7468 4e27 2069 6e20 7374 7228  if 'thN' in str(
-00013370: 7365 6c66 2e6e 5f63 6f6d 706f 6e65 6e74  self.n_component
-00013380: 7329 3a0d 0a20 2020 2020 2020 2020 2020  s):..           
-00013390: 206e 5f69 6e74 203d 2069 6e74 2827 272e   n_int = int(''.
-000133a0: 6a6f 696e 285b 7820 666f 7220 7820 696e  join([x for x in
-000133b0: 2073 7472 2873 656c 662e 6e5f 636f 6d70   str(self.n_comp
-000133c0: 6f6e 656e 7473 2920 6966 2078 2e69 7364  onents) if x.isd
-000133d0: 6967 6974 2829 5d29 290d 0a20 2020 2020  igit()]))..     
-000133e0: 2020 2020 2020 206e 5f69 6e74 203d 2069         n_int = i
-000133f0: 6e74 286e 702e 666c 6f6f 7228 6466 2e73  nt(np.floor(df.s
-00013400: 6861 7065 5b31 5d20 2f20 6e5f 696e 7429  hape[1] / n_int)
-00013410: 290d 0a20 2020 2020 2020 2020 2020 206e  )..            n
-00013420: 5f69 6e74 203d 206e 5f69 6e74 2069 6620  _int = n_int if 
-00013430: 6e5f 696e 7420 3e3d 2032 2065 6c73 6520  n_int >= 2 else 
-00013440: 320d 0a20 2020 2020 2020 2065 6c73 653a  2..        else:
-00013450: 0d0a 2020 2020 2020 2020 2020 2020 6e5f  ..            n_
-00013460: 696e 7420 3d20 696e 7428 2727 2e6a 6f69  int = int(''.joi
-00013470: 6e28 5b78 2066 6f72 2078 2069 6e20 7374  n([x for x in st
-00013480: 7228 7365 6c66 2e6e 5f63 6f6d 706f 6e65  r(self.n_compone
-00013490: 6e74 7329 2069 6620 782e 6973 6469 6769  nts) if x.isdigi
-000134a0: 7428 295d 2929 0d0a 2020 2020 2020 2020  t()]))..        
-000134b0: 7365 6c66 2e6e 5f69 6e74 203d 206e 5f69  self.n_int = n_i
-000134c0: 6e74 0d0a 0d0a 2020 2020 2020 2020 6966  nt....        if
-000134d0: 2073 656c 662e 6465 636f 6d70 6f73 6974   self.decomposit
-000134e0: 696f 6e20 3d3d 2027 5472 756e 6361 7465  ion == 'Truncate
-000134f0: 6453 5644 273a 0d0a 2020 2020 2020 2020  dSVD':..        
-00013500: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
-00013510: 2e64 6563 6f6d 706f 7369 7469 6f6e 2069  .decomposition i
-00013520: 6d70 6f72 7420 5472 756e 6361 7465 6453  mport TruncatedS
-00013530: 5644 0d0a 0d0a 2020 2020 2020 2020 2020  VD....          
-00013540: 2020 7472 616e 7366 6f72 6d65 7220 3d20    transformer = 
-00013550: 5472 756e 6361 7465 6453 5644 280d 0a20  TruncatedSVD(.. 
-00013560: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00013570: 5f63 6f6d 706f 6e65 6e74 733d 7365 6c66  _components=self
-00013580: 2e6e 5f69 6e74 2c20 7261 6e64 6f6d 5f73  .n_int, random_s
-00013590: 7461 7465 3d73 656c 662e 7261 6e64 6f6d  tate=self.random
-000135a0: 5f73 6565 640d 0a20 2020 2020 2020 2020  _seed..         
-000135b0: 2020 2029 0d0a 2020 2020 2020 2020 656c     )..        el
-000135c0: 6966 2073 656c 662e 6465 636f 6d70 6f73  if self.decompos
-000135d0: 6974 696f 6e20 3d3d 2027 5768 6974 656e  ition == 'Whiten
-000135e0: 6564 5043 4127 3a0d 0a20 2020 2020 2020  edPCA':..       
-000135f0: 2020 2020 2066 726f 6d20 736b 6c65 6172       from sklear
-00013600: 6e2e 6465 636f 6d70 6f73 6974 696f 6e20  n.decomposition 
-00013610: 696d 706f 7274 2050 4341 0d0a 0d0a 2020  import PCA....  
-00013620: 2020 2020 2020 2020 2020 7472 616e 7366            transf
-00013630: 6f72 6d65 7220 3d20 5043 4128 0d0a 2020  ormer = PCA(..  
-00013640: 2020 2020 2020 2020 2020 2020 2020 6e5f                n_
-00013650: 636f 6d70 6f6e 656e 7473 3d73 656c 662e  components=self.
-00013660: 6e5f 696e 742c 2077 6869 7465 6e3d 5472  n_int, whiten=Tr
-00013670: 7565 2c20 7261 6e64 6f6d 5f73 7461 7465  ue, random_state
-00013680: 3d73 656c 662e 7261 6e64 6f6d 5f73 6565  =self.random_see
-00013690: 640d 0a20 2020 2020 2020 2020 2020 2029  d..            )
-000136a0: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
-000136b0: 656c 662e 6465 636f 6d70 6f73 6974 696f  elf.decompositio
-000136c0: 6e20 3d3d 2027 5043 4127 3a0d 0a20 2020  n == 'PCA':..   
-000136d0: 2020 2020 2020 2020 2066 726f 6d20 736b           from sk
-000136e0: 6c65 6172 6e2e 6465 636f 6d70 6f73 6974  learn.decomposit
-000136f0: 696f 6e20 696d 706f 7274 2050 4341 0d0a  ion import PCA..
-00013700: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-00013710: 616e 7366 6f72 6d65 7220 3d20 5043 4128  ansformer = PCA(
-00013720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013730: 2020 6e5f 636f 6d70 6f6e 656e 7473 3d73    n_components=s
-00013740: 656c 662e 6e5f 696e 742c 2077 6869 7465  elf.n_int, white
-00013750: 6e3d 4661 6c73 652c 2072 616e 646f 6d5f  n=False, random_
-00013760: 7374 6174 653d 7365 6c66 2e72 616e 646f  state=self.rando
-00013770: 6d5f 7365 6564 0d0a 2020 2020 2020 2020  m_seed..        
-00013780: 2020 2020 290d 0a20 2020 2020 2020 2065      )..        e
-00013790: 6c69 6620 7365 6c66 2e64 6563 6f6d 706f  lif self.decompo
-000137a0: 7369 7469 6f6e 203d 3d20 274b 6572 6e65  sition == 'Kerne
-000137b0: 6c50 4341 273a 0d0a 2020 2020 2020 2020  lPCA':..        
-000137c0: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
-000137d0: 2e64 6563 6f6d 706f 7369 7469 6f6e 2069  .decomposition i
-000137e0: 6d70 6f72 7420 4b65 726e 656c 5043 410d  mport KernelPCA.
-000137f0: 0a0d 0a20 2020 2020 2020 2020 2020 2074  ...            t
-00013800: 7261 6e73 666f 726d 6572 203d 204b 6572  ransformer = Ker
-00013810: 6e65 6c50 4341 280d 0a20 2020 2020 2020  nelPCA(..       
-00013820: 2020 2020 2020 2020 206e 5f63 6f6d 706f           n_compo
-00013830: 6e65 6e74 733d 7365 6c66 2e6e 5f69 6e74  nents=self.n_int
-00013840: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00013850: 2020 206b 6572 6e65 6c3d 2772 6266 272c     kernel='rbf',
-00013860: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013870: 2020 7261 6e64 6f6d 5f73 7461 7465 3d73    random_state=s
-00013880: 656c 662e 7261 6e64 6f6d 5f73 6565 642c  elf.random_seed,
-00013890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000138a0: 2020 6669 745f 696e 7665 7273 655f 7472    fit_inverse_tr
-000138b0: 616e 7366 6f72 6d3d 5472 7565 2c0d 0a20  ansform=True,.. 
-000138c0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-000138d0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-000138e0: 6465 636f 6d70 6f73 6974 696f 6e20 3d3d  decomposition ==
-000138f0: 2027 4661 7374 4943 4127 3a0d 0a20 2020   'FastICA':..   
-00013900: 2020 2020 2020 2020 2066 726f 6d20 736b           from sk
-00013910: 6c65 6172 6e2e 6465 636f 6d70 6f73 6974  learn.decomposit
-00013920: 696f 6e20 696d 706f 7274 2046 6173 7449  ion import FastI
-00013930: 4341 0d0a 0d0a 2020 2020 2020 2020 2020  CA....          
-00013940: 2020 7472 616e 7366 6f72 6d65 7220 3d20    transformer = 
-00013950: 4661 7374 4943 4128 0d0a 2020 2020 2020  FastICA(..      
-00013960: 2020 2020 2020 2020 2020 6e5f 636f 6d70            n_comp
-00013970: 6f6e 656e 7473 3d73 656c 662e 6e5f 696e  onents=self.n_in
-00013980: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-00013990: 2020 2020 7768 6974 656e 3d54 7275 652c      whiten=True,
-000139a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000139b0: 2020 7261 6e64 6f6d 5f73 7461 7465 3d73    random_state=s
-000139c0: 656c 662e 7261 6e64 6f6d 5f73 6565 642c  elf.random_seed,
-000139d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000139e0: 2020 6d61 785f 6974 6572 3d35 3030 2c0d    max_iter=500,.
-000139f0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-00013a00: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00013a10: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-00013a20: 7261 6e73 666f 726d 6572 203d 2074 7261  ransformer = tra
-00013a30: 6e73 666f 726d 6572 2e66 6974 2864 6629  nsformer.fit(df)
-00013a40: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00013a50: 2056 616c 7565 4572 726f 723a 0d0a 2020   ValueError:..  
-00013a60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00013a70: 5661 6c75 6545 7272 6f72 280d 0a20 2020  ValueError(..   
-00013a80: 2020 2020 2020 2020 2020 2020 2022 6e5f               "n_
-00013a90: 636f 6d70 6f6e 656e 7473 2061 6e64 2064  components and d
-00013aa0: 6563 6f6d 706f 7369 7469 6f6e 206e 6f74  ecomposition not
-00013ab0: 2073 7569 7461 626c 6520 666f 7220 7468   suitable for th
-00013ac0: 6973 2064 6174 6173 6574 2e22 0d0a 2020  is dataset."..  
-00013ad0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00013ae0: 2020 2020 2058 203d 2073 656c 662e 7472       X = self.tr
-00013af0: 616e 7366 6f72 6d65 722e 7472 616e 7366  ansformer.transf
-00013b00: 6f72 6d28 6466 290d 0a20 2020 2020 2020  orm(df)..       
-00013b10: 2058 203d 2070 642e 4461 7461 4672 616d   X = pd.DataFram
-00013b20: 6528 5829 0d0a 2020 2020 2020 2020 582e  e(X)..        X.
-00013b30: 696e 6465 7820 3d20 6466 2e69 6e64 6578  index = df.index
-00013b40: 0d0a 2020 2020 2020 2020 6672 6f6d 2061  ..        from a
-00013b50: 7574 6f74 732e 6576 616c 7561 746f 722e  utots.evaluator.
-00013b60: 6175 746f 5f6d 6f64 656c 2069 6d70 6f72  auto_model impor
-00013b70: 7420 4d6f 6465 6c4d 6f6e 7374 6572 0d0a  t ModelMonster..
-00013b80: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00013b90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00013ba0: 2e6d 6f64 656c 6f62 6a20 3d20 4d6f 6465  .modelobj = Mode
-00013bb0: 6c4d 6f6e 7374 6572 280d 0a20 2020 2020  lMonster(..     
-00013bc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013bd0: 6d6f 6465 6c2c 0d0a 2020 2020 2020 2020  model,..        
-00013be0: 2020 2020 2020 2020 7061 7261 6d65 7465          paramete
-00013bf0: 7273 3d73 656c 662e 6d6f 6465 6c5f 7061  rs=self.model_pa
-00013c00: 7261 6d65 7465 7273 2c0d 0a20 2020 2020  rameters,..     
-00013c10: 2020 2020 2020 2020 2020 2066 7265 7175             frequ
-00013c20: 656e 6379 3d73 656c 662e 6672 6571 7565  ency=self.freque
-00013c30: 6e63 792c 0d0a 2020 2020 2020 2020 2020  ncy,..          
-00013c40: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-00013c50: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
-00013c60: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
-00013c70: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
-00013c80: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
-00013c90: 6e74 7279 3d73 656c 662e 686f 6c69 6461  ntry=self.holida
-00013ca0: 795f 636f 756e 7472 792c 0d0a 2020 2020  y_country,..    
-00013cb0: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
-00013cc0: 6f6d 5f73 6565 643d 7365 6c66 2e72 616e  om_seed=self.ran
-00013cd0: 646f 6d5f 7365 6564 2c0d 0a20 2020 2020  dom_seed,..     
-00013ce0: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
-00013cf0: 7365 3d73 656c 662e 7665 7262 6f73 652c  se=self.verbose,
-00013d00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013d10: 2020 6e5f 6a6f 6273 3d73 656c 662e 6e5f    n_jobs=self.n_
-00013d20: 6a6f 6273 2c0d 0a20 2020 2020 2020 2020  jobs,..         
-00013d30: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
-00013d40: 6c65 6e67 7468 3d73 656c 662e 666f 7265  length=self.fore
-00013d50: 6361 7374 5f6c 656e 6774 682c 0d0a 2020  cast_length,..  
-00013d60: 2020 2020 2020 2020 2020 292e 6669 7428            ).fit(
-00013d70: 582e 6173 7479 7065 2866 6c6f 6174 292c  X.astype(float),
-00013d80: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
-00013d90: 723d 6675 7475 7265 5f72 6567 7265 7373  r=future_regress
-00013da0: 6f72 290d 0a20 2020 2020 2020 2065 7863  or)..        exc
-00013db0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00013dc0: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-00013dd0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00013de0: 7228 6622 4d6f 6465 6c20 7b73 7472 2873  r(f"Model {str(s
-00013df0: 656c 662e 6d6f 6465 6c29 7d20 7769 7468  elf.model)} with
-00013e00: 2065 7272 6f72 3a20 7b72 6570 7228 6529   error: {repr(e)
-00013e10: 7d22 290d 0a20 2020 2020 2020 2073 656c  }")..        sel
-00013e20: 662e 6669 745f 7275 6e74 696d 6520 3d20  f.fit_runtime = 
-00013e30: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
-00013e40: 652e 6e6f 7728 2920 2d20 7365 6c66 2e73  e.now() - self.s
-00013e50: 7461 7274 5469 6d65 0d0a 2020 2020 2020  tartTime..      
-00013e60: 2020 7265 7475 726e 2073 656c 660d 0a0d    return self...
-00013e70: 0a20 2020 2064 6566 2070 7265 6469 6374  .    def predict
-00013e80: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-00013e90: 0d0a 2020 2020 2020 2020 666f 7265 6361  ..        foreca
-00013ea0: 7374 5f6c 656e 6774 683a 2069 6e74 203d  st_length: int =
-00013eb0: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
-00013ec0: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
-00013ed0: 3d4e 6f6e 652c 0d0a 2020 2020 2020 2020  =None,..        
-00013ee0: 6a75 7374 5f70 6f69 6e74 5f66 6f72 6563  just_point_forec
-00013ef0: 6173 743a 2062 6f6f 6c20 3d20 4661 6c73  ast: bool = Fals
-00013f00: 652c 0d0a 2020 2020 293a 0d0a 2020 2020  e,..    ):..    
-00013f10: 2020 2020 2222 2247 656e 6572 6174 6520      """Generate 
-00013f20: 666f 7265 6361 7374 2064 6174 6120 696d  forecast data im
-00013f30: 6d65 6469 6174 656c 7920 666f 6c6c 6f77  mediately follow
-00013f40: 696e 6720 6461 7465 7320 6f66 202e 6669  ing dates of .fi
-00013f50: 7428 292e 0d0a 0d0a 2020 2020 2020 2020  t().....        
-00013f60: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
-00013f70: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
-00013f80: 7468 2028 696e 7429 3a20 4e75 6d62 6572  th (int): Number
-00013f90: 206f 6620 7065 7269 6f64 7320 6f66 2064   of periods of d
-00013fa0: 6174 6120 746f 2066 6f72 6563 6173 7420  ata to forecast 
-00013fb0: 6168 6561 640d 0a20 2020 2020 2020 2020  ahead..         
-00013fc0: 2020 2072 6567 7265 7373 6f72 2028 6e75     regressor (nu
-00013fd0: 6d70 792e 4172 7261 7929 3a20 6164 6469  mpy.Array): addi
-00013fe0: 7469 6f6e 616c 2072 6567 7265 7373 6f72  tional regressor
-00013ff0: 2c20 6e6f 7420 7573 6564 0d0a 2020 2020  , not used..    
-00014000: 2020 2020 2020 2020 6a75 7374 5f70 6f69          just_poi
-00014010: 6e74 5f66 6f72 6563 6173 7420 2862 6f6f  nt_forecast (boo
-00014020: 6c29 3a20 4966 2054 7275 652c 2072 6574  l): If True, ret
-00014030: 7572 6e20 6120 7061 6e64 6173 2e44 6174  urn a pandas.Dat
-00014040: 6146 7261 6d65 206f 6620 6a75 7374 2070  aFrame of just p
-00014050: 6f69 6e74 2066 6f72 6563 6173 7473 0d0a  oint forecasts..
-00014060: 0d0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00014070: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00014080: 4569 7468 6572 2061 2050 7265 6469 6374  Either a Predict
-00014090: 696f 6e4f 626a 6563 7420 6f66 2066 6f72  ionObject of for
-000140a0: 6563 6173 7473 2061 6e64 206d 6574 6164  ecasts and metad
-000140b0: 6174 612c 206f 720d 0a20 2020 2020 2020  ata, or..       
-000140c0: 2020 2020 2069 6620 6a75 7374 5f70 6f69       if just_poi
-000140d0: 6e74 5f66 6f72 6563 6173 7420 3d3d 2054  nt_forecast == T
-000140e0: 7275 652c 2061 2064 6174 6166 7261 6d65  rue, a dataframe
-000140f0: 206f 6620 706f 696e 7420 666f 7265 6361   of point foreca
-00014100: 7374 730d 0a20 2020 2020 2020 2022 2222  sts..        """
-00014110: 0d0a 2020 2020 2020 2020 7072 6564 6963  ..        predic
-00014120: 7453 7461 7274 5469 6d65 203d 2064 6174  tStartTime = dat
-00014130: 6574 696d 652e 6461 7465 7469 6d65 2e6e  etime.datetime.n
-00014140: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
-00014150: 6966 2066 6f72 6563 6173 745f 6c65 6e67  if forecast_leng
-00014160: 7468 2069 7320 4e6f 6e65 3a0d 0a20 2020  th is None:..   
-00014170: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
-00014180: 745f 6c65 6e67 7468 203d 2073 656c 662e  t_length = self.
-00014190: 666f 7265 6361 7374 5f6c 656e 6774 680d  forecast_length.
-000141a0: 0a20 2020 2020 2020 2058 4120 3d20 7365  .        XA = se
-000141b0: 6c66 2e6d 6f64 656c 6f62 6a2e 7072 6564  lf.modelobj.pred
-000141c0: 6963 7428 0d0a 2020 2020 2020 2020 2020  ict(..          
-000141d0: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
-000141e0: 683d 666f 7265 6361 7374 5f6c 656e 6774  h=forecast_lengt
-000141f0: 682c 2066 7574 7572 655f 7265 6772 6573  h, future_regres
-00014200: 736f 723d 6675 7475 7265 5f72 6567 7265  sor=future_regre
-00014210: 7373 6f72 0d0a 2020 2020 2020 2020 290d  ssor..        ).
-00014220: 0a20 2020 2020 2020 2058 6620 3d20 7365  .        Xf = se
-00014230: 6c66 2e74 7261 6e73 666f 726d 6572 2e69  lf.transformer.i
-00014240: 6e76 6572 7365 5f74 7261 6e73 666f 726d  nverse_transform
-00014250: 286e 702e 6172 7261 7928 5841 2e66 6f72  (np.array(XA.for
-00014260: 6563 6173 7429 290d 0a20 2020 2020 2020  ecast))..       
-00014270: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00014280: 6365 2858 662c 2070 642e 4461 7461 4672  ce(Xf, pd.DataFr
-00014290: 616d 6529 3a0d 0a20 2020 2020 2020 2020  ame):..         
-000142a0: 2020 2058 6620 3d20 7064 2e44 6174 6146     Xf = pd.DataF
-000142b0: 7261 6d65 2858 6629 0d0a 2020 2020 2020  rame(Xf)..      
-000142c0: 2020 5866 2e63 6f6c 756d 6e73 203d 2073    Xf.columns = s
-000142d0: 656c 662e 636f 6c75 6d6e 5f6e 616d 6573  elf.column_names
-000142e0: 0d0a 2020 2020 2020 2020 5866 2e69 6e64  ..        Xf.ind
-000142f0: 6578 203d 2073 656c 662e 6372 6561 7465  ex = self.create
-00014300: 5f66 6f72 6563 6173 745f 696e 6465 7828  _forecast_index(
-00014310: 666f 7265 6361 7374 5f6c 656e 6774 683d  forecast_length=
-00014320: 666f 7265 6361 7374 5f6c 656e 6774 6829  forecast_length)
-00014330: 0d0a 2020 2020 2020 2020 5866 203d 2058  ..        Xf = X
-00014340: 662e 6173 7479 7065 2866 6c6f 6174 290d  f.astype(float).
-00014350: 0a20 2020 2020 2020 2069 6620 6a75 7374  .        if just
-00014360: 5f70 6f69 6e74 5f66 6f72 6563 6173 743a  _point_forecast:
-00014370: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00014380: 7475 726e 2058 660d 0a20 2020 2020 2020  turn Xf..       
-00014390: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000143a0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000143b0: 2020 2020 2075 7070 6572 5f66 6f72 6563       upper_forec
-000143c0: 6173 7420 3d20 7365 6c66 2e74 7261 6e73  ast = self.trans
-000143d0: 666f 726d 6572 2e69 6e76 6572 7365 5f74  former.inverse_t
-000143e0: 7261 6e73 666f 726d 286e 702e 6172 7261  ransform(np.arra
-000143f0: 7928 5841 2e75 7070 6572 5f66 6f72 6563  y(XA.upper_forec
-00014400: 6173 7429 290d 0a20 2020 2020 2020 2020  ast))..         
-00014410: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00014420: 616e 6365 2875 7070 6572 5f66 6f72 6563  ance(upper_forec
-00014430: 6173 742c 2070 642e 4461 7461 4672 616d  ast, pd.DataFram
-00014440: 6529 3a0d 0a20 2020 2020 2020 2020 2020  e):..           
-00014450: 2020 2020 2075 7070 6572 5f66 6f72 6563       upper_forec
-00014460: 6173 7420 3d20 7064 2e44 6174 6146 7261  ast = pd.DataFra
-00014470: 6d65 2875 7070 6572 5f66 6f72 6563 6173  me(upper_forecas
-00014480: 7429 0d0a 2020 2020 2020 2020 2020 2020  t)..            
-00014490: 7570 7065 725f 666f 7265 6361 7374 2e63  upper_forecast.c
-000144a0: 6f6c 756d 6e73 203d 2073 656c 662e 636f  olumns = self.co
-000144b0: 6c75 6d6e 5f6e 616d 6573 0d0a 2020 2020  lumn_names..    
-000144c0: 2020 2020 2020 2020 7570 7065 725f 666f          upper_fo
-000144d0: 7265 6361 7374 2e69 6e64 6578 203d 2073  recast.index = s
-000144e0: 656c 662e 6372 6561 7465 5f66 6f72 6563  elf.create_forec
-000144f0: 6173 745f 696e 6465 7828 666f 7265 6361  ast_index(foreca
-00014500: 7374 5f6c 656e 6774 683d 666f 7265 6361  st_length=foreca
-00014510: 7374 5f6c 656e 6774 6829 0d0a 0d0a 2020  st_length)....  
-00014520: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
-00014530: 666f 7265 6361 7374 203d 2073 656c 662e  forecast = self.
-00014540: 7472 616e 7366 6f72 6d65 722e 696e 7665  transformer.inve
-00014550: 7273 655f 7472 616e 7366 6f72 6d28 6e70  rse_transform(np
-00014560: 2e61 7272 6179 2858 412e 6c6f 7765 725f  .array(XA.lower_
-00014570: 666f 7265 6361 7374 2929 0d0a 2020 2020  forecast))..    
-00014580: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00014590: 7369 6e73 7461 6e63 6528 6c6f 7765 725f  sinstance(lower_
-000145a0: 666f 7265 6361 7374 2c20 7064 2e44 6174  forecast, pd.Dat
-000145b0: 6146 7261 6d65 293a 0d0a 2020 2020 2020  aFrame):..      
-000145c0: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
-000145d0: 666f 7265 6361 7374 203d 2070 642e 4461  forecast = pd.Da
-000145e0: 7461 4672 616d 6528 6c6f 7765 725f 666f  taFrame(lower_fo
-000145f0: 7265 6361 7374 290d 0a20 2020 2020 2020  recast)..       
-00014600: 2020 2020 206c 6f77 6572 5f66 6f72 6563       lower_forec
-00014610: 6173 742e 636f 6c75 6d6e 7320 3d20 7365  ast.columns = se
-00014620: 6c66 2e63 6f6c 756d 6e5f 6e61 6d65 730d  lf.column_names.
-00014630: 0a20 2020 2020 2020 2020 2020 206c 6f77  .            low
-00014640: 6572 5f66 6f72 6563 6173 742e 696e 6465  er_forecast.inde
-00014650: 7820 3d20 7365 6c66 2e63 7265 6174 655f  x = self.create_
-00014660: 666f 7265 6361 7374 5f69 6e64 6578 2866  forecast_index(f
-00014670: 6f72 6563 6173 745f 6c65 6e67 7468 3d66  orecast_length=f
-00014680: 6f72 6563 6173 745f 6c65 6e67 7468 290d  orecast_length).
-00014690: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
-000146a0: 0d0a 2020 2020 2020 2020 2020 2020 7570  ..            up
-000146b0: 7065 725f 666f 7265 6361 7374 2c20 6c6f  per_forecast, lo
-000146c0: 7765 725f 666f 7265 6361 7374 203d 2050  wer_forecast = P
-000146d0: 6f69 6e74 5f74 6f5f 5072 6f62 6162 696c  oint_to_Probabil
-000146e0: 6974 7928 0d0a 2020 2020 2020 2020 2020  ity(..          
-000146f0: 2020 2020 2020 7365 6c66 2e64 665f 7472        self.df_tr
-00014700: 6169 6e2c 0d0a 2020 2020 2020 2020 2020  ain,..          
-00014710: 2020 2020 2020 5866 2c0d 0a20 2020 2020        Xf,..     
-00014720: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-00014730: 643d 2769 6e66 6572 7265 645f 6e6f 726d  d='inferred_norm
-00014740: 616c 272c 0d0a 2020 2020 2020 2020 2020  al',..          
-00014750: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-00014760: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
-00014770: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
-00014780: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
-00014790: 2029 0d0a 0d0a 2020 2020 2020 2020 2020   )....          
-000147a0: 2020 7072 6564 6963 745f 7275 6e74 696d    predict_runtim
-000147b0: 6520 3d20 6461 7465 7469 6d65 2e64 6174  e = datetime.dat
-000147c0: 6574 696d 652e 6e6f 7728 2920 2d20 7072  etime.now() - pr
-000147d0: 6564 6963 7453 7461 7274 5469 6d65 0d0a  edictStartTime..
-000147e0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-000147f0: 6963 7469 6f6e 203d 2050 7265 6469 6374  iction = Predict
-00014800: 696f 6e4f 626a 6563 7428 0d0a 2020 2020  ionObject(..    
-00014810: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-00014820: 6c5f 6e61 6d65 3d73 656c 662e 6e61 6d65  l_name=self.name
-00014830: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00014840: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
-00014850: 7468 3d66 6f72 6563 6173 745f 6c65 6e67  th=forecast_leng
-00014860: 7468 2c0d 0a20 2020 2020 2020 2020 2020  th,..           
-00014870: 2020 2020 2066 6f72 6563 6173 745f 696e       forecast_in
-00014880: 6465 783d 5866 2e69 6e64 6578 2c0d 0a20  dex=Xf.index,.. 
-00014890: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000148a0: 6f72 6563 6173 745f 636f 6c75 6d6e 733d  orecast_columns=
-000148b0: 5866 2e63 6f6c 756d 6e73 2c0d 0a20 2020  Xf.columns,..   
-000148c0: 2020 2020 2020 2020 2020 2020 206c 6f77               low
-000148d0: 6572 5f66 6f72 6563 6173 743d 6c6f 7765  er_forecast=lowe
-000148e0: 725f 666f 7265 6361 7374 2c0d 0a20 2020  r_forecast,..   
-000148f0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00014900: 6563 6173 743d 5866 2c0d 0a20 2020 2020  ecast=Xf,..     
-00014910: 2020 2020 2020 2020 2020 2075 7070 6572             upper
-00014920: 5f66 6f72 6563 6173 743d 7570 7065 725f  _forecast=upper_
-00014930: 666f 7265 6361 7374 2c0d 0a20 2020 2020  forecast,..     
-00014940: 2020 2020 2020 2020 2020 2070 7265 6469             predi
-00014950: 6374 696f 6e5f 696e 7465 7276 616c 3d73  ction_interval=s
-00014960: 656c 662e 7072 6564 6963 7469 6f6e 5f69  elf.prediction_i
-00014970: 6e74 6572 7661 6c2c 0d0a 2020 2020 2020  nterval,..      
-00014980: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00014990: 745f 7275 6e74 696d 653d 7072 6564 6963  t_runtime=predic
-000149a0: 745f 7275 6e74 696d 652c 0d0a 2020 2020  t_runtime,..    
-000149b0: 2020 2020 2020 2020 2020 2020 6669 745f              fit_
-000149c0: 7275 6e74 696d 653d 7365 6c66 2e66 6974  runtime=self.fit
-000149d0: 5f72 756e 7469 6d65 2c0d 0a20 2020 2020  _runtime,..     
-000149e0: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-000149f0: 5f70 6172 616d 6574 6572 733d 7365 6c66  _parameters=self
-00014a00: 2e67 6574 5f70 6172 616d 7328 292c 0d0a  .get_params(),..
-00014a10: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-00014a20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014a30: 6e20 7072 6564 6963 7469 6f6e 0d0a 0d0a  n prediction....
-00014a40: 2020 2020 6465 6620 6765 745f 6e65 775f      def get_new_
-00014a50: 7061 7261 6d73 2873 656c 662c 206d 6574  params(self, met
-00014a60: 686f 643a 2073 7472 203d 2027 7261 6e64  hod: str = 'rand
-00014a70: 6f6d 2729 3a0d 0a20 2020 2020 2020 2022  om'):..        "
-00014a80: 2222 5265 7475 726e 2064 6963 7420 6f66  ""Return dict of
-00014a90: 206e 6577 2070 6172 616d 6574 6572 7320   new parameters 
-00014aa0: 666f 7220 7061 7261 6d65 7465 7220 7475  for parameter tu
-00014ab0: 6e69 6e67 2e22 2222 0d0a 2020 2020 2020  ning."""..      
-00014ac0: 2020 6e5f 636f 6d70 6f6e 656e 7473 5f63    n_components_c
-00014ad0: 686f 6963 6520 3d20 6e70 2e72 616e 646f  hoice = np.rando
-00014ae0: 6d2e 6368 6f69 6365 280d 0a20 2020 2020  m.choice(..     
-00014af0: 2020 2020 2020 2061 3d5b 3130 2c20 2731         a=[10, '1
-00014b00: 3074 684e 275d 2c20 7369 7a65 3d31 2c20  0thN'], size=1, 
-00014b10: 703d 5b30 2e36 2c20 302e 345d 0d0a 2020  p=[0.6, 0.4]..  
-00014b20: 2020 2020 2020 292e 6974 656d 2829 0d0a        ).item()..
-00014b30: 2020 2020 2020 2020 6465 636f 6d70 6f73          decompos
-00014b40: 6974 696f 6e5f 6368 6f69 6365 203d 206e  ition_choice = n
-00014b50: 702e 7261 6e64 6f6d 2e63 686f 6963 6528  p.random.choice(
-00014b60: 0d0a 2020 2020 2020 2020 2020 2020 613d  ..            a=
-00014b70: 5b27 5472 756e 6361 7465 6453 5644 272c  ['TruncatedSVD',
-00014b80: 2027 5768 6974 656e 6564 5043 4127 2c20   'WhitenedPCA', 
-00014b90: 2750 4341 272c 2027 4b65 726e 656c 5043  'PCA', 'KernelPC
-00014ba0: 4127 2c20 2746 6173 7449 4341 275d 2c0d  A', 'FastICA'],.
-00014bb0: 0a20 2020 2020 2020 2020 2020 2073 697a  .            siz
-00014bc0: 653d 312c 0d0a 2020 2020 2020 2020 2020  e=1,..          
-00014bd0: 2020 703d 5b30 2e30 352c 2030 2e30 352c    p=[0.05, 0.05,
-00014be0: 2030 2e35 2c20 302e 322c 2030 2e32 5d2c   0.5, 0.2, 0.2],
-00014bf0: 0d0a 2020 2020 2020 2020 292e 6974 656d  ..        ).item
-00014c00: 2829 0d0a 2020 2020 2020 2020 6d6f 6465  ()..        mode
-00014c10: 6c5f 6c69 7374 203d 205b 0d0a 2020 2020  l_list = [..    
-00014c20: 2020 2020 2020 2020 274c 6173 7456 616c          'LastVal
-00014c30: 7565 4e61 6976 6527 2c0d 0a20 2020 2020  ueNaive',..     
-00014c40: 2020 2020 2020 2027 474c 5327 2c0d 0a20         'GLS',.. 
-00014c50: 2020 2020 2020 2020 2020 2027 5465 6e73             'Tens
-00014c60: 6f72 666c 6f77 5354 5327 2c0d 0a20 2020  orflowSTS',..   
-00014c70: 2020 2020 2020 2020 2027 474c 4d27 2c0d           'GLM',.
-00014c80: 0a20 2020 2020 2020 2020 2020 2027 4554  .            'ET
-00014c90: 5327 2c0d 0a20 2020 2020 2020 2020 2020  S',..           
-00014ca0: 2027 4642 5072 6f70 6865 7427 2c0d 0a20   'FBProphet',.. 
-00014cb0: 2020 2020 2020 2020 2020 2027 4d6f 7469             'Moti
-00014cc0: 6653 696d 756c 6174 696f 6e27 2c0d 0a20  fSimulation',.. 
-00014cd0: 2020 2020 2020 2020 2020 2027 526f 6c6c             'Roll
-00014ce0: 696e 6752 6567 7265 7373 696f 6e27 2c0d  ingRegression',.
-00014cf0: 0a20 2020 2020 2020 2020 2020 2027 5769  .            'Wi
-00014d00: 6e64 6f77 5265 6772 6573 7369 6f6e 272c  ndowRegression',
-00014d10: 0d0a 2020 2020 2020 2020 2020 2020 2755  ..            'U
-00014d20: 6e6f 6273 6572 7665 6443 6f6d 706f 6e65  nobservedCompone
-00014d30: 6e74 7327 2c0d 0a20 2020 2020 2020 2020  nts',..         
-00014d40: 2020 2027 5645 434d 272c 0d0a 2020 2020     'VECM',..    
-00014d50: 2020 2020 5d0d 0a20 2020 2020 2020 206d      ]..        m
-00014d60: 6f64 656c 5f73 7472 203d 206e 702e 7261  odel_str = np.ra
-00014d70: 6e64 6f6d 2e63 686f 6963 6528 0d0a 2020  ndom.choice(..  
-00014d80: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-00014d90: 6c69 7374 2c0d 0a20 2020 2020 2020 2020  list,..         
-00014da0: 2020 2073 697a 653d 312c 0d0a 2020 2020     size=1,..    
-00014db0: 2020 2020 2020 2020 703d 5b30 2e30 312c          p=[0.01,
-00014dc0: 2030 2e30 312c 2030 2e30 312c 2030 2e30   0.01, 0.01, 0.0
-00014dd0: 312c 2030 2e30 312c 2030 2e37 2c20 302e  1, 0.01, 0.7, 0.
-00014de0: 3031 2c20 302e 3032 2c20 302e 312c 2030  01, 0.02, 0.1, 0
-00014df0: 2e31 2c20 302e 3032 5d2c 0d0a 2020 2020  .1, 0.02],..    
-00014e00: 2020 2020 292e 6974 656d 2829 0d0a 2020      ).item()..  
-00014e10: 2020 2020 2020 6d6f 6465 6c5f 7374 7220        model_str 
-00014e20: 3d20 6e70 2e72 616e 646f 6d2e 6368 6f69  = np.random.choi
-00014e30: 6365 286d 6f64 656c 5f6c 6973 7429 0d0a  ce(model_list)..
-00014e40: 2020 2020 2020 2020 6672 6f6d 2061 7574          from aut
-00014e50: 6f74 732e 6576 616c 7561 746f 722e 6175  ots.evaluator.au
-00014e60: 746f 5f6d 6f64 656c 2069 6d70 6f72 7420  to_model import 
-00014e70: 4d6f 6465 6c4d 6f6e 7374 6572 0d0a 0d0a  ModelMonster....
-00014e80: 2020 2020 2020 2020 7061 7261 6d5f 6469          param_di
-00014e90: 6374 203d 204d 6f64 656c 4d6f 6e73 7465  ct = ModelMonste
-00014ea0: 7228 6d6f 6465 6c5f 7374 7229 2e67 6574  r(model_str).get
-00014eb0: 5f6e 6577 5f70 6172 616d 7328 290d 0a20  _new_params().. 
-00014ec0: 2020 2020 2020 2072 6574 7572 6e20 7b0d         return {.
-00014ed0: 0a20 2020 2020 2020 2020 2020 2027 6d6f  .            'mo
-00014ee0: 6465 6c27 3a20 6d6f 6465 6c5f 7374 722c  del': model_str,
-00014ef0: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
-00014f00: 6f64 656c 5f70 6172 616d 6574 6572 7327  odel_parameters'
-00014f10: 3a20 7061 7261 6d5f 6469 6374 2c0d 0a20  : param_dict,.. 
-00014f20: 2020 2020 2020 2020 2020 2027 6465 636f             'deco
-00014f30: 6d70 6f73 6974 696f 6e27 3a20 6465 636f  mposition': deco
-00014f40: 6d70 6f73 6974 696f 6e5f 6368 6f69 6365  mposition_choice
-00014f50: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00014f60: 6e5f 636f 6d70 6f6e 656e 7473 273a 206e  n_components': n
-00014f70: 5f63 6f6d 706f 6e65 6e74 735f 6368 6f69  _components_choi
-00014f80: 6365 2c0d 0a20 2020 2020 2020 207d 0d0a  ce,..        }..
-00014f90: 0d0a 2020 2020 6465 6620 6765 745f 7061  ..    def get_pa
-00014fa0: 7261 6d73 2873 656c 6629 3a0d 0a20 2020  rams(self):..   
-00014fb0: 2020 2020 2022 2222 5265 7475 726e 2064       """Return d
-00014fc0: 6963 7420 6f66 2063 7572 7265 6e74 2070  ict of current p
-00014fd0: 6172 616d 6574 6572 732e 2222 220d 0a20  arameters.""".. 
-00014fe0: 2020 2020 2020 2072 6574 7572 6e20 7b0d         return {.
-00014ff0: 0a20 2020 2020 2020 2020 2020 2027 6d6f  .            'mo
-00015000: 6465 6c27 3a20 7365 6c66 2e6d 6f64 656c  del': self.model
-00015010: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00015020: 6d6f 6465 6c5f 7061 7261 6d65 7465 7273  model_parameters
-00015030: 273a 2073 656c 662e 6d6f 6465 6c5f 7061  ': self.model_pa
-00015040: 7261 6d65 7465 7273 2c0d 0a20 2020 2020  rameters,..     
-00015050: 2020 2020 2020 2027 6465 636f 6d70 6f73         'decompos
-00015060: 6974 696f 6e27 3a20 7365 6c66 2e64 6563  ition': self.dec
-00015070: 6f6d 706f 7369 7469 6f6e 2c0d 0a20 2020  omposition,..   
-00015080: 2020 2020 2020 2020 2027 6e5f 636f 6d70           'n_comp
-00015090: 6f6e 656e 7473 273a 2073 656c 662e 6e5f  onents': self.n_
-000150a0: 636f 6d70 6f6e 656e 7473 2c0d 0a20 2020  components,..   
-000150b0: 2020 2020 207d 0d0a 0d0a 0d0a 636c 6173       }......clas
-000150c0: 7320 4461 7465 7061 7274 5265 6772 6573  s DatepartRegres
-000150d0: 7369 6f6e 284d 6f64 656c 4f62 6a65 6374  sion(ModelObject
-000150e0: 293a 0d0a 2020 2020 2222 2252 6567 7265  ):..    """Regre
-000150f0: 7373 696f 6e20 6e6f 7420 6f6e 2073 6572  ssion not on ser
-00015100: 6965 7320 6275 7420 6461 7465 7469 6d65  ies but datetime
-00015110: 0d0a 0d0a 2020 2020 4172 6773 3a0d 0a20  ....    Args:.. 
-00015120: 2020 2020 2020 206e 616d 6520 2873 7472         name (str
-00015130: 293a 2053 7472 696e 6720 746f 2069 6465  ): String to ide
-00015140: 6e74 6966 7920 636c 6173 730d 0a20 2020  ntify class..   
-00015150: 2020 2020 2066 7265 7175 656e 6379 2028       frequency (
-00015160: 7374 7229 3a20 5374 7269 6e67 2061 6c69  str): String ali
-00015170: 6173 206f 6620 6461 7465 7469 6d65 2069  as of datetime i
-00015180: 6e64 6578 2066 7265 7175 656e 6379 206f  ndex frequency o
-00015190: 7220 656c 7365 2027 696e 6665 7227 0d0a  r else 'infer'..
-000151a0: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-000151b0: 6f6e 5f69 6e74 6572 7661 6c20 2866 6c6f  on_interval (flo
-000151c0: 6174 293a 2043 6f6e 6669 6465 6e63 6520  at): Confidence 
-000151d0: 696e 7465 7276 616c 2066 6f72 2070 726f  interval for pro
-000151e0: 6261 6269 6c69 7374 6963 2066 6f72 6563  babilistic forec
-000151f0: 6173 740d 0a20 2020 2022 2222 0d0a 0d0a  ast..    """....
-00015200: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00015210: 280d 0a20 2020 2020 2020 2073 656c 662c  (..        self,
-00015220: 0d0a 2020 2020 2020 2020 6e61 6d65 3a20  ..        name: 
-00015230: 7374 7220 3d20 2244 6174 6570 6172 7452  str = "DatepartR
-00015240: 6567 7265 7373 696f 6e22 2c0d 0a20 2020  egression",..   
-00015250: 2020 2020 2066 7265 7175 656e 6379 3a20       frequency: 
-00015260: 7374 7220 3d20 2769 6e66 6572 272c 0d0a  str = 'infer',..
-00015270: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
-00015280: 6f6e 5f69 6e74 6572 7661 6c3a 2066 6c6f  on_interval: flo
-00015290: 6174 203d 2030 2e39 2c0d 0a20 2020 2020  at = 0.9,..     
-000152a0: 2020 2068 6f6c 6964 6179 5f63 6f75 6e74     holiday_count
-000152b0: 7279 3a20 7374 7220 3d20 2755 5327 2c0d  ry: str = 'US',.
-000152c0: 0a20 2020 2020 2020 2072 616e 646f 6d5f  .        random_
-000152d0: 7365 6564 3a20 696e 7420 3d20 3230 3230  seed: int = 2020
-000152e0: 2c0d 0a20 2020 2020 2020 2076 6572 626f  ,..        verbo
-000152f0: 7365 3a20 696e 7420 3d20 302c 0d0a 2020  se: int = 0,..  
-00015300: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
-00015310: 656e 6774 683a 2069 6e74 203d 2031 2c0d  ength: int = 1,.
-00015320: 0a20 2020 2020 2020 206e 5f6a 6f62 733a  .        n_jobs:
-00015330: 2069 6e74 203d 204e 6f6e 652c 0d0a 2020   int = None,..  
-00015340: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
-00015350: 5f6d 6f64 656c 3a20 6469 6374 203d 207b  _model: dict = {
-00015360: 0d0a 2020 2020 2020 2020 2020 2020 226d  ..            "m
-00015370: 6f64 656c 223a 2027 4465 6369 7369 6f6e  odel": 'Decision
-00015380: 5472 6565 272c 0d0a 2020 2020 2020 2020  Tree',..        
-00015390: 2020 2020 226d 6f64 656c 5f70 6172 616d      "model_param
-000153a0: 7322 3a20 7b22 6d61 785f 6465 7074 6822  s": {"max_depth"
-000153b0: 3a20 352c 2022 6d69 6e5f 7361 6d70 6c65  : 5, "min_sample
-000153c0: 735f 7370 6c69 7422 3a20 327d 2c0d 0a20  s_split": 2},.. 
-000153d0: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
-000153e0: 2020 2064 6174 6570 6172 745f 6d65 7468     datepart_meth
-000153f0: 6f64 3a20 7374 7220 3d20 2765 7870 616e  od: str = 'expan
-00015400: 6465 6427 2c0d 0a20 2020 2020 2020 2070  ded',..        p
-00015410: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
-00015420: 3a20 696e 7420 3d20 4e6f 6e65 2c0d 0a20  : int = None,.. 
-00015430: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
-00015440: 6e5f 7479 7065 3a20 7374 7220 3d20 4e6f  n_type: str = No
-00015450: 6e65 2c0d 0a20 2020 2020 2020 202a 2a6b  ne,..        **k
-00015460: 7761 7267 732c 0d0a 2020 2020 293a 0d0a  wargs,..    ):..
-00015470: 2020 2020 2020 2020 4d6f 6465 6c4f 626a          ModelObj
-00015480: 6563 742e 5f5f 696e 6974 5f5f 280d 0a20  ect.__init__(.. 
-00015490: 2020 2020 2020 2020 2020 2073 656c 662c             self,
-000154a0: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
-000154b0: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
-000154c0: 2066 7265 7175 656e 6379 2c0d 0a20 2020   frequency,..   
-000154d0: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-000154e0: 696f 6e5f 696e 7465 7276 616c 2c0d 0a20  ion_interval,.. 
-000154f0: 2020 2020 2020 2020 2020 2068 6f6c 6964             holid
-00015500: 6179 5f63 6f75 6e74 7279 3d68 6f6c 6964  ay_country=holid
-00015510: 6179 5f63 6f75 6e74 7279 2c0d 0a20 2020  ay_country,..   
-00015520: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
-00015530: 7365 6564 3d72 616e 646f 6d5f 7365 6564  seed=random_seed
-00015540: 2c0d 0a20 2020 2020 2020 2020 2020 2072  ,..            r
-00015550: 6567 7265 7373 696f 6e5f 7479 7065 3d72  egression_type=r
-00015560: 6567 7265 7373 696f 6e5f 7479 7065 2c0d  egression_type,.
-00015570: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
-00015580: 626f 7365 3d76 6572 626f 7365 2c0d 0a20  bose=verbose,.. 
-00015590: 2020 2020 2020 2020 2020 206e 5f6a 6f62             n_job
-000155a0: 733d 6e5f 6a6f 6273 2c0d 0a20 2020 2020  s=n_jobs,..     
-000155b0: 2020 2029 0d0a 2020 2020 2020 2020 7365     )..        se
-000155c0: 6c66 2e72 6567 7265 7373 696f 6e5f 6d6f  lf.regression_mo
-000155d0: 6465 6c20 3d20 7265 6772 6573 7369 6f6e  del = regression
-000155e0: 5f6d 6f64 656c 0d0a 2020 2020 2020 2020  _model..        
-000155f0: 7365 6c66 2e64 6174 6570 6172 745f 6d65  self.datepart_me
-00015600: 7468 6f64 203d 2064 6174 6570 6172 745f  thod = datepart_
-00015610: 6d65 7468 6f64 0d0a 2020 2020 2020 2020  method..        
-00015620: 7365 6c66 2e70 6f6c 796e 6f6d 6961 6c5f  self.polynomial_
-00015630: 6465 6772 6565 203d 2070 6f6c 796e 6f6d  degree = polynom
-00015640: 6961 6c5f 6465 6772 6565 0d0a 2020 2020  ial_degree..    
-00015650: 2020 2020 7365 6c66 2e66 6f72 6563 6173      self.forecas
-00015660: 745f 6c65 6e67 7468 203d 2066 6f72 6563  t_length = forec
-00015670: 6173 745f 6c65 6e67 7468 0d0a 0d0a 2020  ast_length....  
-00015680: 2020 6465 6620 6669 7428 7365 6c66 2c20    def fit(self, 
-00015690: 6466 2c20 6675 7475 7265 5f72 6567 7265  df, future_regre
-000156a0: 7373 6f72 3d4e 6f6e 6529 3a0d 0a20 2020  ssor=None):..   
-000156b0: 2020 2020 2022 2222 5472 6169 6e20 616c       """Train al
-000156c0: 676f 7269 7468 6d20 6769 7665 6e20 6461  gorithm given da
-000156d0: 7461 2073 7570 706c 6965 642e 0d0a 0d0a  ta supplied.....
-000156e0: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
-000156f0: 2020 2020 2020 2020 2020 2064 6620 2870             df (p
-00015700: 616e 6461 732e 4461 7461 4672 616d 6529  andas.DataFrame)
-00015710: 3a20 4461 7465 7469 6d65 2049 6e64 6578  : Datetime Index
-00015720: 6564 0d0a 2020 2020 2020 2020 2222 220d  ed..        """.
-00015730: 0a20 2020 2020 2020 2064 6620 3d20 7365  .        df = se
-00015740: 6c66 2e62 6173 6963 5f70 726f 6669 6c65  lf.basic_profile
-00015750: 2864 6629 0d0a 2020 2020 2020 2020 2320  (df)..        # 
-00015760: 6966 2065 7874 6572 6e61 6c20 7265 6772  if external regr
-00015770: 6573 736f 722c 2064 6f20 736f 6d65 2063  essor, do some c
-00015780: 6865 636b 2075 700d 0a20 2020 2020 2020  heck up..       
-00015790: 2069 6620 7365 6c66 2e72 6567 7265 7373   if self.regress
-000157a0: 696f 6e5f 7479 7065 2069 7320 6e6f 7420  ion_type is not 
-000157b0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-000157c0: 2020 2069 6620 6675 7475 7265 5f72 6567     if future_reg
-000157d0: 7265 7373 6f72 2069 7320 4e6f 6e65 3a0d  ressor is None:.
-000157e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000157f0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00015800: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00015810: 2020 2020 2020 2020 2272 6567 7265 7373          "regress
-00015820: 696f 6e5f 7479 7065 3d27 5573 6572 2720  ion_type='User' 
-00015830: 6275 7420 6e6f 2066 7574 7572 655f 7265  but no future_re
-00015840: 6772 6573 736f 7220 7061 7373 6564 220d  gressor passed".
-00015850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015860: 2029 0d0a 0d0a 2020 2020 2020 2020 7920   )....        y 
-00015870: 3d20 6466 2e74 6f5f 6e75 6d70 7928 290d  = df.to_numpy().
-00015880: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00015890: 5820 3d20 6461 7465 5f70 6172 7428 0d0a  X = date_part(..
-000158a0: 2020 2020 2020 2020 2020 2020 6466 2e69              df.i
-000158b0: 6e64 6578 2c0d 0a20 2020 2020 2020 2020  ndex,..         
-000158c0: 2020 206d 6574 686f 643d 7365 6c66 2e64     method=self.d
-000158d0: 6174 6570 6172 745f 6d65 7468 6f64 2c0d  atepart_method,.
-000158e0: 0a20 2020 2020 2020 2020 2020 2070 6f6c  .            pol
-000158f0: 796e 6f6d 6961 6c5f 6465 6772 6565 3d73  ynomial_degree=s
-00015900: 656c 662e 706f 6c79 6e6f 6d69 616c 5f64  elf.polynomial_d
-00015910: 6567 7265 652c 0d0a 2020 2020 2020 2020  egree,..        
-00015920: 290d 0a20 2020 2020 2020 2069 6620 7365  )..        if se
-00015930: 6c66 2e72 6567 7265 7373 696f 6e5f 7479  lf.regression_ty
-00015940: 7065 2069 6e20 5b27 5573 6572 272c 2027  pe in ['User', '
-00015950: 7573 6572 275d 3a0d 0a20 2020 2020 2020  user']:..       
-00015960: 2020 2020 2023 2072 6567 7220 3d20 6675       # regr = fu
-00015970: 7475 7265 5f72 6567 7265 7373 6f72 2e63  ture_regressor.c
-00015980: 6f70 7928 290d 0a20 2020 2020 2020 2020  opy()..         
-00015990: 2020 2023 2072 6567 722e 696e 6465 7820     # regr.index 
-000159a0: 3d20 582e 696e 6465 780d 0a20 2020 2020  = X.index..     
-000159b0: 2020 2020 2020 2073 656c 662e 5820 3d20         self.X = 
-000159c0: 7064 2e63 6f6e 6361 7428 5b73 656c 662e  pd.concat([self.
-000159d0: 582c 2066 7574 7572 655f 7265 6772 6573  X, future_regres
-000159e0: 736f 725d 2c20 6178 6973 3d31 290d 0a20  sor], axis=1).. 
-000159f0: 2020 2020 2020 2073 656c 662e 582e 636f         self.X.co
-00015a00: 6c75 6d6e 7320 3d20 5b73 7472 2878 6329  lumns = [str(xc)
-00015a10: 2066 6f72 2078 6320 696e 2073 656c 662e   for xc in self.
-00015a20: 582e 636f 6c75 6d6e 735d 0d0a 0d0a 2020  X.columns]....  
-00015a30: 2020 2020 2020 6d75 6c74 696f 7574 7075        multioutpu
-00015a40: 7420 3d20 5472 7565 0d0a 2020 2020 2020  t = True..      
-00015a50: 2020 6966 2079 2e6e 6469 6d20 3c20 323a    if y.ndim < 2:
-00015a60: 0d0a 2020 2020 2020 2020 2020 2020 6d75  ..            mu
-00015a70: 6c74 696f 7574 7075 7420 3d20 4661 6c73  ltioutput = Fals
-00015a80: 650d 0a20 2020 2020 2020 2065 6c69 6620  e..        elif 
-00015a90: 792e 7368 6170 655b 315d 203c 2032 3a0d  y.shape[1] < 2:.
-00015aa0: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
-00015ab0: 7469 6f75 7470 7574 203d 2046 616c 7365  tioutput = False
-00015ac0: 0d0a 2020 2020 2020 2020 2020 2020 7920  ..            y 
-00015ad0: 3d20 792e 7261 7665 6c28 290d 0a20 2020  = y.ravel()..   
-00015ae0: 2020 2020 2073 656c 662e 6d6f 6465 6c20       self.model 
-00015af0: 3d20 7265 7472 6965 7665 5f72 6567 7265  = retrieve_regre
-00015b00: 7373 6f72 280d 0a20 2020 2020 2020 2020  ssor(..         
-00015b10: 2020 2072 6567 7265 7373 696f 6e5f 6d6f     regression_mo
-00015b20: 6465 6c3d 7365 6c66 2e72 6567 7265 7373  del=self.regress
-00015b30: 696f 6e5f 6d6f 6465 6c2c 0d0a 2020 2020  ion_model,..    
-00015b40: 2020 2020 2020 2020 7665 7262 6f73 653d          verbose=
-00015b50: 7365 6c66 2e76 6572 626f 7365 2c0d 0a20  self.verbose,.. 
-00015b60: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
-00015b70: 7365 5f62 6f6f 6c3d 7365 6c66 2e76 6572  se_bool=self.ver
-00015b80: 626f 7365 5f62 6f6f 6c2c 0d0a 2020 2020  bose_bool,..    
-00015b90: 2020 2020 2020 2020 7261 6e64 6f6d 5f73          random_s
-00015ba0: 6565 643d 7365 6c66 2e72 616e 646f 6d5f  eed=self.random_
-00015bb0: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
-00015bc0: 2020 206e 5f6a 6f62 733d 7365 6c66 2e6e     n_jobs=self.n
-00015bd0: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
-00015be0: 2020 2020 6d75 6c74 696f 7574 7075 743d      multioutput=
-00015bf0: 6d75 6c74 696f 7574 7075 742c 0d0a 2020  multioutput,..  
-00015c00: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00015c10: 2073 656c 662e 6466 5f74 7261 696e 203d   self.df_train =
-00015c20: 2064 660d 0a20 2020 2020 2020 2073 656c   df..        sel
-00015c30: 662e 6d6f 6465 6c20 3d20 7365 6c66 2e6d  f.model = self.m
-00015c40: 6f64 656c 2e66 6974 2873 656c 662e 582e  odel.fit(self.X.
-00015c50: 6173 7479 7065 286e 702e 666c 6f61 7433  astype(np.float3
-00015c60: 3229 2c20 792e 6173 7479 7065 286e 702e  2), y.astype(np.
-00015c70: 666c 6f61 7433 3229 290d 0a20 2020 2020  float32))..     
-00015c80: 2020 2073 656c 662e 7368 6170 6520 3d20     self.shape = 
-00015c90: 6466 2e73 6861 7065 0d0a 2020 2020 2020  df.shape..      
-00015ca0: 2020 7265 7475 726e 2073 656c 660d 0a0d    return self...
-00015cb0: 0a20 2020 2064 6566 2066 6974 5f64 6174  .    def fit_dat
-00015cc0: 6128 7365 6c66 2c20 6466 2c20 6675 7475  a(self, df, futu
-00015cd0: 7265 5f72 6567 7265 7373 6f72 3d4e 6f6e  re_regressor=Non
-00015ce0: 6529 3a0d 0a20 2020 2020 2020 2073 656c  e):..        sel
-00015cf0: 662e 6261 7369 635f 7072 6f66 696c 6528  f.basic_profile(
-00015d00: 6466 290d 0a20 2020 2020 2020 2072 6574  df)..        ret
-00015d10: 7572 6e20 7365 6c66 0d0a 0d0a 2020 2020  urn self....    
-00015d20: 6465 6620 7072 6564 6963 7428 0d0a 2020  def predict(..  
-00015d30: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
-00015d40: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
-00015d50: 6e67 7468 3a20 696e 7420 3d20 4e6f 6e65  ngth: int = None
-00015d60: 2c0d 0a20 2020 2020 2020 2066 7574 7572  ,..        futur
-00015d70: 655f 7265 6772 6573 736f 723d 4e6f 6e65  e_regressor=None
-00015d80: 2c0d 0a20 2020 2020 2020 206a 7573 745f  ,..        just_
-00015d90: 706f 696e 745f 666f 7265 6361 7374 3a20  point_forecast: 
-00015da0: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
-00015db0: 2020 2020 2020 2064 663d 4e6f 6e65 2c0d         df=None,.
-00015dc0: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
-00015dd0: 2022 2222 4765 6e65 7261 7465 2066 6f72   """Generate for
-00015de0: 6563 6173 7420 6461 7461 2069 6d6d 6564  ecast data immed
-00015df0: 6961 7465 6c79 2066 6f6c 6c6f 7769 6e67  iately following
-00015e00: 2064 6174 6573 206f 6620 696e 6465 7820   dates of index 
-00015e10: 7375 7070 6c69 6564 2074 6f20 2e66 6974  supplied to .fit
-00015e20: 2829 2e0d 0a0d 0a20 2020 2020 2020 2041  ().....        A
-00015e30: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00015e40: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
-00015e50: 6820 2869 6e74 293a 204e 756d 6265 7220  h (int): Number 
-00015e60: 6f66 2070 6572 696f 6473 206f 6620 6461  of periods of da
-00015e70: 7461 2074 6f20 666f 7265 6361 7374 2061  ta to forecast a
-00015e80: 6865 6164 0d0a 2020 2020 2020 2020 2020  head..          
-00015e90: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-00015ea0: 6f72 2028 7061 6e64 6173 2e44 6174 6146  or (pandas.DataF
-00015eb0: 7261 6d65 206f 7220 5365 7269 6573 293a  rame or Series):
-00015ec0: 2044 6174 6574 696d 6520 496e 6465 7865   Datetime Indexe
-00015ed0: 640d 0a20 2020 2020 2020 2020 2020 206a  d..            j
-00015ee0: 7573 745f 706f 696e 745f 666f 7265 6361  ust_point_foreca
-00015ef0: 7374 2028 626f 6f6c 293a 2049 6620 5472  st (bool): If Tr
-00015f00: 7565 2c20 7265 7475 726e 2061 2070 616e  ue, return a pan
-00015f10: 6461 732e 4461 7461 4672 616d 6520 6f66  das.DataFrame of
-00015f20: 206a 7573 7420 706f 696e 7420 666f 7265   just point fore
-00015f30: 6361 7374 730d 0a0d 0a20 2020 2020 2020  casts....       
-00015f40: 2052 6574 7572 6e73 3a0d 0a20 2020 2020   Returns:..     
-00015f50: 2020 2020 2020 2045 6974 6865 7220 6120         Either a 
-00015f60: 5072 6564 6963 7469 6f6e 4f62 6a65 6374  PredictionObject
-00015f70: 206f 6620 666f 7265 6361 7374 7320 616e   of forecasts an
-00015f80: 6420 6d65 7461 6461 7461 2c20 6f72 0d0a  d metadata, or..
-00015f90: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-00015fa0: 7573 745f 706f 696e 745f 666f 7265 6361  ust_point_foreca
-00015fb0: 7374 203d 3d20 5472 7565 2c20 6120 6461  st == True, a da
-00015fc0: 7461 6672 616d 6520 6f66 2070 6f69 6e74  taframe of point
-00015fd0: 2066 6f72 6563 6173 7473 0d0a 2020 2020   forecasts..    
-00015fe0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00015ff0: 2069 6620 666f 7265 6361 7374 5f6c 656e   if forecast_len
-00016000: 6774 6820 6973 204e 6f6e 653a 0d0a 2020  gth is None:..  
-00016010: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-00016020: 7374 5f6c 656e 6774 6820 3d20 7365 6c66  st_length = self
-00016030: 2e66 6f72 6563 6173 745f 6c65 6e67 7468  .forecast_length
-00016040: 0d0a 2020 2020 2020 2020 6966 2064 6620  ..        if df 
-00016050: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-00016060: 2020 2020 2020 2020 2020 7365 6c66 2e66            self.f
-00016070: 6974 5f64 6174 6128 6466 290d 0a20 2020  it_data(df)..   
-00016080: 2020 2020 2070 7265 6469 6374 5374 6172       predictStar
-00016090: 7454 696d 6520 3d20 6461 7465 7469 6d65  tTime = datetime
-000160a0: 2e64 6174 6574 696d 652e 6e6f 7728 290d  .datetime.now().
-000160b0: 0a20 2020 2020 2020 2069 6e64 6578 203d  .        index =
-000160c0: 2073 656c 662e 6372 6561 7465 5f66 6f72   self.create_for
-000160d0: 6563 6173 745f 696e 6465 7828 666f 7265  ecast_index(fore
-000160e0: 6361 7374 5f6c 656e 6774 683d 666f 7265  cast_length=fore
-000160f0: 6361 7374 5f6c 656e 6774 6829 0d0a 2020  cast_length)..  
-00016100: 2020 2020 2020 7365 6c66 2e58 5f70 7265        self.X_pre
-00016110: 6420 3d20 6461 7465 5f70 6172 7428 0d0a  d = date_part(..
-00016120: 2020 2020 2020 2020 2020 2020 696e 6465              inde
-00016130: 782c 206d 6574 686f 643d 7365 6c66 2e64  x, method=self.d
-00016140: 6174 6570 6172 745f 6d65 7468 6f64 2c20  atepart_method, 
-00016150: 706f 6c79 6e6f 6d69 616c 5f64 6567 7265  polynomial_degre
-00016160: 653d 7365 6c66 2e70 6f6c 796e 6f6d 6961  e=self.polynomia
-00016170: 6c5f 6465 6772 6565 0d0a 2020 2020 2020  l_degree..      
-00016180: 2020 290d 0a20 2020 2020 2020 2069 6620    )..        if 
-00016190: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
-000161a0: 7479 7065 2069 6e20 5b27 5573 6572 272c  type in ['User',
-000161b0: 2027 7573 6572 275d 3a0d 0a20 2020 2020   'user']:..     
-000161c0: 2020 2020 2020 2073 656c 662e 585f 7072         self.X_pr
-000161d0: 6564 203d 2070 642e 636f 6e63 6174 280d  ed = pd.concat(.
-000161e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000161f0: 205b 7365 6c66 2e58 5f70 7265 642c 2066   [self.X_pred, f
-00016200: 7574 7572 655f 7265 6772 6573 736f 722e  uture_regressor.
-00016210: 7265 696e 6465 7828 696e 6465 7829 5d2c  reindex(index)],
-00016220: 2061 7869 733d 310d 0a20 2020 2020 2020   axis=1..       
-00016230: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00016240: 2020 2020 6966 2073 656c 662e 585f 7072      if self.X_pr
-00016250: 6564 2e73 6861 7065 5b30 5d20 3e20 696e  ed.shape[0] > in
-00016260: 6465 782e 7368 6170 655b 305d 3a0d 0a20  dex.shape[0]:.. 
-00016270: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00016280: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-00016290: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000162a0: 2020 2020 2020 6622 6675 7475 7265 5f72        f"future_r
-000162b0: 6567 7265 7373 6f72 207b 6675 7475 7265  egressor {future
-000162c0: 5f72 6567 7265 7373 6f72 2e69 6e64 6578  _regressor.index
-000162d0: 7d20 616e 6420 5820 7b73 656c 662e 585f  } and X {self.X_
-000162e0: 7072 6564 2e69 6e64 6578 7d20 696e 6465  pred.index} inde
-000162f0: 7820 6661 696c 6564 2074 6f20 616c 6967  x failed to alig
-00016300: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
-00016310: 2020 2020 290d 0a20 2020 2020 2020 2073      )..        s
-00016320: 656c 662e 585f 7072 6564 2e63 6f6c 756d  elf.X_pred.colum
-00016330: 6e73 203d 205b 7374 7228 7863 2920 666f  ns = [str(xc) fo
-00016340: 7220 7863 2069 6e20 7365 6c66 2e58 5f70  r xc in self.X_p
-00016350: 7265 642e 636f 6c75 6d6e 735d 0d0a 0d0a  red.columns]....
-00016360: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00016370: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-00016380: 7374 203d 2070 642e 4461 7461 4672 616d  st = pd.DataFram
-00016390: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-000163a0: 2020 2020 7365 6c66 2e6d 6f64 656c 2e70      self.model.p
-000163b0: 7265 6469 6374 2873 656c 662e 585f 7072  redict(self.X_pr
-000163c0: 6564 2e61 7374 7970 6528 666c 6f61 7429  ed.astype(float)
-000163d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-000163e0: 2020 2020 696e 6465 783d 696e 6465 782c      index=index,
-000163f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016400: 2020 636f 6c75 6d6e 733d 7365 6c66 2e63    columns=self.c
-00016410: 6f6c 756d 6e5f 6e61 6d65 732c 0d0a 2020  olumn_names,..  
-00016420: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00016430: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00016440: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00016450: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00016460: 616c 7565 4572 726f 7228 0d0a 2020 2020  alueError(..    
-00016470: 2020 2020 2020 2020 2020 2020 6622 4461              f"Da
-00016480: 7465 7061 7274 2070 7265 6469 6374 696f  tepart predictio
-00016490: 6e20 7769 7468 2070 6172 616d 7320 7b73  n with params {s
-000164a0: 656c 662e 6765 745f 7061 7261 6d73 2829  elf.get_params()
-000164b0: 7d20 6661 696c 6564 2e20 5468 6973 2069  } failed. This i
-000164c0: 7320 6f66 7465 6e20 6475 6520 746f 2061  s often due to a
-000164d0: 6e20 696d 7072 6f70 6572 6c79 2069 6e64  n improperly ind
-000164e0: 6578 6564 2066 7574 7572 655f 7265 6772  exed future_regr
-000164f0: 6573 736f 7220 2877 6974 6820 6472 6f70  essor (with drop
-00016500: 5f6d 6f73 745f 7265 6365 6e74 2065 7370  _most_recent esp
-00016510: 6563 6961 6c6c 7929 220d 0a20 2020 2020  ecially)"..     
-00016520: 2020 2020 2020 2029 2066 726f 6d20 650d         ) from e.
-00016530: 0a0d 0a20 2020 2020 2020 2069 6620 6a75  ...        if ju
-00016540: 7374 5f70 6f69 6e74 5f66 6f72 6563 6173  st_point_forecas
-00016550: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00016560: 7265 7475 726e 2066 6f72 6563 6173 740d  return forecast.
-00016570: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00016580: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
-00016590: 725f 666f 7265 6361 7374 2c20 6c6f 7765  r_forecast, lowe
-000165a0: 725f 666f 7265 6361 7374 203d 2050 6f69  r_forecast = Poi
-000165b0: 6e74 5f74 6f5f 5072 6f62 6162 696c 6974  nt_to_Probabilit
-000165c0: 7928 0d0a 2020 2020 2020 2020 2020 2020  y(..            
-000165d0: 2020 2020 7365 6c66 2e64 665f 7472 6169      self.df_trai
-000165e0: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-000165f0: 2020 2020 666f 7265 6361 7374 2c0d 0a20      forecast,.. 
-00016600: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00016610: 6574 686f 643d 2769 6e66 6572 7265 645f  ethod='inferred_
-00016620: 6e6f 726d 616c 272c 0d0a 2020 2020 2020  normal',..      
-00016630: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00016640: 7469 6f6e 5f69 6e74 6572 7661 6c3d 7365  tion_interval=se
-00016650: 6c66 2e70 7265 6469 6374 696f 6e5f 696e  lf.prediction_in
-00016660: 7465 7276 616c 2c0d 0a20 2020 2020 2020  terval,..       
-00016670: 2020 2020 2029 0d0a 0d0a 2020 2020 2020       )....      
-00016680: 2020 2020 2020 7072 6564 6963 745f 7275        predict_ru
-00016690: 6e74 696d 6520 3d20 6461 7465 7469 6d65  ntime = datetime
-000166a0: 2e64 6174 6574 696d 652e 6e6f 7728 2920  .datetime.now() 
-000166b0: 2d20 7072 6564 6963 7453 7461 7274 5469  - predictStartTi
-000166c0: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
-000166d0: 7072 6564 6963 7469 6f6e 203d 2050 7265  prediction = Pre
-000166e0: 6469 6374 696f 6e4f 626a 6563 7428 0d0a  dictionObject(..
-000166f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016700: 6d6f 6465 6c5f 6e61 6d65 3d73 656c 662e  model_name=self.
-00016710: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
-00016720: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
-00016730: 6c65 6e67 7468 3d66 6f72 6563 6173 745f  length=forecast_
-00016740: 6c65 6e67 7468 2c0d 0a20 2020 2020 2020  length,..       
-00016750: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
-00016760: 745f 696e 6465 783d 666f 7265 6361 7374  t_index=forecast
-00016770: 2e69 6e64 6578 2c0d 0a20 2020 2020 2020  .index,..       
-00016780: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
-00016790: 745f 636f 6c75 6d6e 733d 666f 7265 6361  t_columns=foreca
-000167a0: 7374 2e63 6f6c 756d 6e73 2c0d 0a20 2020  st.columns,..   
-000167b0: 2020 2020 2020 2020 2020 2020 206c 6f77               low
-000167c0: 6572 5f66 6f72 6563 6173 743d 6c6f 7765  er_forecast=lowe
-000167d0: 725f 666f 7265 6361 7374 2c0d 0a20 2020  r_forecast,..   
-000167e0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000167f0: 6563 6173 743d 666f 7265 6361 7374 2c0d  ecast=forecast,.
-00016800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016810: 2075 7070 6572 5f66 6f72 6563 6173 743d   upper_forecast=
-00016820: 7570 7065 725f 666f 7265 6361 7374 2c0d  upper_forecast,.
-00016830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016840: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
-00016850: 7276 616c 3d73 656c 662e 7072 6564 6963  rval=self.predic
-00016860: 7469 6f6e 5f69 6e74 6572 7661 6c2c 0d0a  tion_interval,..
-00016870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016880: 7072 6564 6963 745f 7275 6e74 696d 653d  predict_runtime=
-00016890: 7072 6564 6963 745f 7275 6e74 696d 652c  predict_runtime,
-000168a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000168b0: 2020 6669 745f 7275 6e74 696d 653d 7365    fit_runtime=se
-000168c0: 6c66 2e66 6974 5f72 756e 7469 6d65 2c0d  lf.fit_runtime,.
-000168d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000168e0: 206d 6f64 656c 5f70 6172 616d 6574 6572   model_parameter
-000168f0: 733d 7365 6c66 2e67 6574 5f70 6172 616d  s=self.get_param
-00016900: 7328 292c 0d0a 2020 2020 2020 2020 2020  s(),..          
-00016910: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00016920: 2072 6574 7572 6e20 7072 6564 6963 7469   return predicti
-00016930: 6f6e 0d0a 0d0a 2020 2020 6465 6620 6765  on....    def ge
-00016940: 745f 6e65 775f 7061 7261 6d73 2873 656c  t_new_params(sel
-00016950: 662c 206d 6574 686f 643a 2073 7472 203d  f, method: str =
-00016960: 2027 7261 6e64 6f6d 2729 3a0d 0a20 2020   'random'):..   
-00016970: 2020 2020 2022 2222 5265 7475 726e 2064       """Return d
-00016980: 6963 7420 6f66 206e 6577 2070 6172 616d  ict of new param
-00016990: 6574 6572 7320 666f 7220 7061 7261 6d65  eters for parame
-000169a0: 7465 7220 7475 6e69 6e67 2e22 2222 0d0a  ter tuning."""..
-000169b0: 2020 2020 2020 2020 6966 206d 6574 686f          if metho
-000169c0: 6420 3d3d 2027 6465 6570 273a 0d0a 2020  d == 'deep':..  
-000169d0: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-000169e0: 6368 6f69 6365 203d 2067 656e 6572 6174  choice = generat
-000169f0: 655f 7265 6772 6573 736f 725f 7061 7261  e_regressor_para
-00016a00: 6d73 280d 0a20 2020 2020 2020 2020 2020  ms(..           
-00016a10: 2020 2020 206d 6f64 656c 5f64 6963 743d       model_dict=
-00016a20: 6461 7465 7061 7274 5f6d 6f64 656c 5f64  datepart_model_d
-00016a30: 6963 745f 6465 6570 0d0a 2020 2020 2020  ict_deep..      
-00016a40: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00016a50: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00016a60: 2020 2020 6d6f 6465 6c5f 6368 6f69 6365      model_choice
-00016a70: 203d 2067 656e 6572 6174 655f 7265 6772   = generate_regr
-00016a80: 6573 736f 725f 7061 7261 6d73 286d 6f64  essor_params(mod
-00016a90: 656c 5f64 6963 743d 6461 7465 7061 7274  el_dict=datepart
-00016aa0: 5f6d 6f64 656c 5f64 6963 7429 0d0a 2020  _model_dict)..  
-00016ab0: 2020 2020 2020 6461 7465 7061 7274 5f63        datepart_c
-00016ac0: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-00016ad0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-00016ae0: 2020 2020 205b 0d0a 2020 2020 2020 2020       [..        
-00016af0: 2020 2020 2020 2020 2272 6563 7572 7269          "recurri
-00016b00: 6e67 222c 0d0a 2020 2020 2020 2020 2020  ng",..          
-00016b10: 2020 2020 2020 2273 696d 706c 6522 2c0d        "simple",.
-00016b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016b30: 2022 6578 7061 6e64 6564 222c 0d0a 2020   "expanded",..  
-00016b40: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00016b50: 696d 706c 655f 3222 2c0d 0a20 2020 2020  imple_2",..     
-00016b60: 2020 2020 2020 2020 2020 2022 7369 6d70             "simp
-00016b70: 6c65 5f62 696e 6172 697a 6564 222c 0d0a  le_binarized",..
-00016b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b90: 2265 7870 616e 6465 645f 6269 6e61 7269  "expanded_binari
-00016ba0: 7a65 6422 2c0d 0a20 2020 2020 2020 2020  zed",..         
-00016bb0: 2020 2020 2020 2027 636f 6d6d 6f6e 5f66         'common_f
-00016bc0: 6f75 7269 6572 272c 0d0a 2020 2020 2020  ourier',..      
-00016bd0: 2020 2020 2020 5d2c 0d0a 2020 2020 2020        ],..      
-00016be0: 2020 2020 2020 5b30 2e34 2c20 302e 332c        [0.4, 0.3,
-00016bf0: 2030 2e33 2c20 302e 332c 2030 2e34 2c20   0.3, 0.3, 0.4, 
-00016c00: 302e 3035 2c20 302e 3035 5d2c 0d0a 2020  0.05, 0.05],..  
-00016c10: 2020 2020 2020 295b 305d 0d0a 2020 2020        )[0]..    
-00016c20: 2020 2020 6966 2064 6174 6570 6172 745f      if datepart_
-00016c30: 6368 6f69 6365 2069 6e20 5b22 7369 6d70  choice in ["simp
-00016c40: 6c65 222c 2022 7369 6d70 6c65 5f32 222c  le", "simple_2",
-00016c50: 2022 7265 6375 7272 696e 6722 2c20 2273   "recurring", "s
-00016c60: 696d 706c 655f 6269 6e61 7269 7a65 6422  imple_binarized"
-00016c70: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00016c80: 706f 6c79 6e6f 6d69 616c 5f63 686f 6963  polynomial_choic
-00016c90: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-00016ca0: 6573 285b 4e6f 6e65 2c20 322c 2033 5d2c  es([None, 2, 3],
-00016cb0: 205b 302e 352c 2030 2e32 2c20 302e 3031   [0.5, 0.2, 0.01
-00016cc0: 5d29 5b30 5d0d 0a20 2020 2020 2020 2065  ])[0]..        e
-00016cd0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00016ce0: 2020 706f 6c79 6e6f 6d69 616c 5f63 686f    polynomial_cho
-00016cf0: 6963 6520 3d20 4e6f 6e65 0d0a 2020 2020  ice = None..    
-00016d00: 2020 2020 6966 2022 7265 6772 6573 736f      if "regresso
-00016d10: 7222 2069 6e20 6d65 7468 6f64 3a0d 0a20  r" in method:.. 
-00016d20: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-00016d30: 7373 696f 6e5f 6368 6f69 6365 203d 2022  ssion_choice = "
-00016d40: 5573 6572 220d 0a20 2020 2020 2020 2065  User"..        e
-00016d50: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00016d60: 2020 7265 6772 6573 7369 6f6e 5f63 686f    regression_cho
-00016d70: 6963 6520 3d20 7261 6e64 6f6d 2e63 686f  ice = random.cho
-00016d80: 6963 6573 285b 4e6f 6e65 2c20 2755 7365  ices([None, 'Use
-00016d90: 7227 5d2c 205b 302e 372c 2030 2e33 5d29  r'], [0.7, 0.3])
-00016da0: 5b30 5d0d 0a20 2020 2020 2020 2070 6172  [0]..        par
-00016db0: 616d 6574 6572 5f64 6963 7420 3d20 7b0d  ameter_dict = {.
-00016dc0: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-00016dd0: 6772 6573 7369 6f6e 5f6d 6f64 656c 273a  gression_model':
-00016de0: 206d 6f64 656c 5f63 686f 6963 652c 0d0a   model_choice,..
-00016df0: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
-00016e00: 6570 6172 745f 6d65 7468 6f64 273a 2064  epart_method': d
-00016e10: 6174 6570 6172 745f 6368 6f69 6365 2c0d  atepart_choice,.
-00016e20: 0a20 2020 2020 2020 2020 2020 2027 706f  .            'po
-00016e30: 6c79 6e6f 6d69 616c 5f64 6567 7265 6527  lynomial_degree'
-00016e40: 3a20 706f 6c79 6e6f 6d69 616c 5f63 686f  : polynomial_cho
-00016e50: 6963 652c 0d0a 2020 2020 2020 2020 2020  ice,..          
-00016e60: 2020 2772 6567 7265 7373 696f 6e5f 7479    'regression_ty
-00016e70: 7065 273a 2072 6567 7265 7373 696f 6e5f  pe': regression_
-00016e80: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00016e90: 207d 0d0a 2020 2020 2020 2020 7265 7475   }..        retu
-00016ea0: 726e 2070 6172 616d 6574 6572 5f64 6963  rn parameter_dic
-00016eb0: 740d 0a0d 0a20 2020 2064 6566 2067 6574  t....    def get
-00016ec0: 5f70 6172 616d 7328 7365 6c66 293a 0d0a  _params(self):..
-00016ed0: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
-00016ee0: 6e20 6469 6374 206f 6620 6375 7272 656e  n dict of curren
-00016ef0: 7420 7061 7261 6d65 7465 7273 2e22 2222  t parameters."""
-00016f00: 0d0a 2020 2020 2020 2020 7061 7261 6d65  ..        parame
-00016f10: 7465 725f 6469 6374 203d 207b 0d0a 2020  ter_dict = {..  
-00016f20: 2020 2020 2020 2020 2020 2772 6567 7265            'regre
-00016f30: 7373 696f 6e5f 6d6f 6465 6c27 3a20 7365  ssion_model': se
-00016f40: 6c66 2e72 6567 7265 7373 696f 6e5f 6d6f  lf.regression_mo
-00016f50: 6465 6c2c 0d0a 2020 2020 2020 2020 2020  del,..          
-00016f60: 2020 2764 6174 6570 6172 745f 6d65 7468    'datepart_meth
-00016f70: 6f64 273a 2073 656c 662e 6461 7465 7061  od': self.datepa
-00016f80: 7274 5f6d 6574 686f 642c 0d0a 2020 2020  rt_method,..    
-00016f90: 2020 2020 2020 2020 2770 6f6c 796e 6f6d          'polynom
-00016fa0: 6961 6c5f 6465 6772 6565 273a 2073 656c  ial_degree': sel
-00016fb0: 662e 706f 6c79 6e6f 6d69 616c 5f64 6567  f.polynomial_deg
-00016fc0: 7265 652c 0d0a 2020 2020 2020 2020 2020  ree,..          
-00016fd0: 2020 2772 6567 7265 7373 696f 6e5f 7479    'regression_ty
-00016fe0: 7065 273a 2073 656c 662e 7265 6772 6573  pe': self.regres
-00016ff0: 7369 6f6e 5f74 7970 652c 0d0a 2020 2020  sion_type,..    
-00017000: 2020 2020 7d0d 0a20 2020 2020 2020 2072      }..        r
-00017010: 6574 7572 6e20 7061 7261 6d65 7465 725f  eturn parameter_
-00017020: 6469 6374 0d0a 0d0a 0d0a 636c 6173 7320  dict......class 
-00017030: 556e 6976 6172 6961 7465 5265 6772 6573  UnivariateRegres
-00017040: 7369 6f6e 284d 6f64 656c 4f62 6a65 6374  sion(ModelObject
-00017050: 293a 0d0a 2020 2020 2222 2252 6567 7265  ):..    """Regre
-00017060: 7373 696f 6e2d 6672 616d 6564 2061 7070  ssion-framed app
-00017070: 726f 6163 6820 746f 2066 6f72 6563 6173  roach to forecas
-00017080: 7469 6e67 2075 7369 6e67 2073 6b6c 6561  ting using sklea
-00017090: 726e 2e0d 0a20 2020 2041 2075 6e69 7661  rn...    A univa
-000170a0: 7269 6174 6520 7665 7273 696f 6e20 6f66  riate version of
-000170b0: 2072 6f6c 6c69 6e67 2072 6567 7265 7373   rolling regress
-000170c0: 696f 6e3a 2069 6520 6561 6368 2073 6572  ion: ie each ser
-000170d0: 6965 7320 6973 206d 6f64 656c 6564 2069  ies is modeled i
-000170e0: 6e64 6570 656e 6465 6e74 6c79 0d0a 0d0a  ndependently....
-000170f0: 2020 2020 2259 6f75 2776 6520 676f 7420      "You've got 
-00017100: 746f 2074 6869 6e6b 2066 6f72 2079 6f75  to think for you
-00017110: 7220 7365 6c76 6573 212e 2059 6f75 2772  r selves!. You'r
-00017120: 6520 414c 4c20 696e 6469 7669 6475 616c  e ALL individual
-00017130: 7322 0d0a 2020 2020 2259 6573 2120 5765  s"..    "Yes! We
-00017140: 2772 6520 616c 6c20 696e 6469 7669 6475  're all individu
-00017150: 616c 7321 2220 2d20 5079 7468 6f6e 0d0a  als!" - Python..
-00017160: 0d0a 2020 2020 4172 6773 3a0d 0a20 2020  ..    Args:..   
-00017170: 2020 2020 206e 616d 6520 2873 7472 293a       name (str):
-00017180: 2053 7472 696e 6720 746f 2069 6465 6e74   String to ident
-00017190: 6966 7920 636c 6173 730d 0a20 2020 2020  ify class..     
-000171a0: 2020 2066 7265 7175 656e 6379 2028 7374     frequency (st
-000171b0: 7229 3a20 5374 7269 6e67 2061 6c69 6173  r): String alias
-000171c0: 206f 6620 6461 7465 7469 6d65 2069 6e64   of datetime ind
-000171d0: 6578 2066 7265 7175 656e 6379 206f 7220  ex frequency or 
-000171e0: 656c 7365 2027 696e 6665 7227 0d0a 2020  else 'infer'..  
-000171f0: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-00017200: 5f69 6e74 6572 7661 6c20 2866 6c6f 6174  _interval (float
-00017210: 293a 2043 6f6e 6669 6465 6e63 6520 696e  ): Confidence in
-00017220: 7465 7276 616c 2066 6f72 2070 726f 6261  terval for proba
-00017230: 6269 6c69 7374 6963 2066 6f72 6563 6173  bilistic forecas
-00017240: 740d 0a20 2020 2020 2020 2068 6f6c 6964  t..        holid
-00017250: 6179 2028 626f 6f6c 293a 2049 6620 7472  ay (bool): If tr
-00017260: 7565 2c20 696e 636c 7564 6520 686f 6c69  ue, include holi
-00017270: 6461 7920 666c 6167 730d 0a20 2020 2020  day flags..     
-00017280: 2020 2072 6567 7265 7373 696f 6e5f 7479     regression_ty
-00017290: 7065 2028 7374 7229 3a20 7479 7065 206f  pe (str): type o
-000172a0: 6620 7265 6772 6573 7369 6f6e 2028 4e6f  f regression (No
-000172b0: 6e65 2c20 2755 7365 7227 290d 0a0d 0a20  ne, 'User').... 
-000172c0: 2020 2022 2222 0d0a 0d0a 2020 2020 6465     """....    de
-000172d0: 6620 5f5f 696e 6974 5f5f 280d 0a20 2020  f __init__(..   
-000172e0: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
-000172f0: 2020 2020 6e61 6d65 3a20 7374 7220 3d20      name: str = 
-00017300: 2255 6e69 7661 7269 6174 6552 6567 7265  "UnivariateRegre
-00017310: 7373 696f 6e22 2c0d 0a20 2020 2020 2020  ssion",..       
-00017320: 2066 7265 7175 656e 6379 3a20 7374 7220   frequency: str 
-00017330: 3d20 2769 6e66 6572 272c 0d0a 2020 2020  = 'infer',..    
-00017340: 2020 2020 7072 6564 6963 7469 6f6e 5f69      prediction_i
-00017350: 6e74 6572 7661 6c3a 2066 6c6f 6174 203d  nterval: float =
-00017360: 2030 2e39 2c0d 0a20 2020 2020 2020 2072   0.9,..        r
-00017370: 6567 7265 7373 696f 6e5f 7479 7065 3a20  egression_type: 
-00017380: 7374 7220 3d20 4e6f 6e65 2c0d 0a20 2020  str = None,..   
-00017390: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
-000173a0: 6e74 7279 3a20 7374 7220 3d20 2755 5327  ntry: str = 'US'
-000173b0: 2c0d 0a20 2020 2020 2020 2076 6572 626f  ,..        verbo
-000173c0: 7365 3a20 696e 7420 3d20 302c 0d0a 2020  se: int = 0,..  
-000173d0: 2020 2020 2020 7261 6e64 6f6d 5f73 6565        random_see
-000173e0: 643a 2069 6e74 203d 2032 3032 302c 0d0a  d: int = 2020,..
-000173f0: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-00017400: 5f6c 656e 6774 683a 2069 6e74 203d 2037  _length: int = 7
-00017410: 2c0d 0a20 2020 2020 2020 2072 6567 7265  ,..        regre
-00017420: 7373 696f 6e5f 6d6f 6465 6c3a 2064 6963  ssion_model: dic
-00017430: 7420 3d20 7b0d 0a20 2020 2020 2020 2020  t = {..         
-00017440: 2020 2022 6d6f 6465 6c22 3a20 2745 7874     "model": 'Ext
-00017450: 7261 5472 6565 7327 2c0d 0a20 2020 2020  raTrees',..     
-00017460: 2020 2020 2020 2022 6d6f 6465 6c5f 7061         "model_pa
-00017470: 7261 6d73 223a 207b 7d2c 0d0a 2020 2020  rams": {},..    
-00017480: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-00017490: 686f 6c69 6461 793a 2062 6f6f 6c20 3d20  holiday: bool = 
-000174a0: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-000174b0: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
-000174c0: 696f 6473 3a20 696e 7420 3d20 3330 2c0d  iods: int = 30,.
-000174d0: 0a20 2020 2020 2020 206d 6163 645f 7065  .        macd_pe
-000174e0: 7269 6f64 733a 2069 6e74 203d 204e 6f6e  riods: int = Non
-000174f0: 652c 0d0a 2020 2020 2020 2020 7374 645f  e,..        std_
-00017500: 726f 6c6c 696e 675f 7065 7269 6f64 733a  rolling_periods:
-00017510: 2069 6e74 203d 2037 2c0d 0a20 2020 2020   int = 7,..     
-00017520: 2020 206d 6178 5f72 6f6c 6c69 6e67 5f70     max_rolling_p
-00017530: 6572 696f 6473 3a20 696e 7420 3d20 372c  eriods: int = 7,
-00017540: 0d0a 2020 2020 2020 2020 6d69 6e5f 726f  ..        min_ro
-00017550: 6c6c 696e 675f 7065 7269 6f64 733a 2069  lling_periods: i
-00017560: 6e74 203d 2037 2c0d 0a20 2020 2020 2020  nt = 7,..       
-00017570: 2065 776d 5f76 6172 5f61 6c70 6861 3a20   ewm_var_alpha: 
-00017580: 666c 6f61 7420 3d20 4e6f 6e65 2c0d 0a20  float = None,.. 
-00017590: 2020 2020 2020 2065 776d 5f61 6c70 6861         ewm_alpha
-000175a0: 3a20 666c 6f61 7420 3d20 302e 352c 0d0a  : float = 0.5,..
-000175b0: 2020 2020 2020 2020 6164 6469 7469 6f6e          addition
-000175c0: 616c 5f6c 6167 5f70 6572 696f 6473 3a20  al_lag_periods: 
-000175d0: 696e 7420 3d20 372c 0d0a 2020 2020 2020  int = 7,..      
-000175e0: 2020 6162 735f 656e 6572 6779 3a20 626f    abs_energy: bo
-000175f0: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
-00017600: 2020 2020 2072 6f6c 6c69 6e67 5f61 7574       rolling_aut
-00017610: 6f63 6f72 725f 7065 7269 6f64 733a 2069  ocorr_periods: i
-00017620: 6e74 203d 204e 6f6e 652c 0d0a 2020 2020  nt = None,..    
-00017630: 2020 2020 6164 645f 6461 7465 5f70 6172      add_date_par
-00017640: 743a 2073 7472 203d 204e 6f6e 652c 0d0a  t: str = None,..
-00017650: 2020 2020 2020 2020 706f 6c79 6e6f 6d69          polynomi
-00017660: 616c 5f64 6567 7265 653a 2069 6e74 203d  al_degree: int =
-00017670: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
-00017680: 785f 7472 616e 7366 6f72 6d3a 2073 7472  x_transform: str
-00017690: 203d 204e 6f6e 652c 0d0a 2020 2020 2020   = None,..      
-000176a0: 2020 7769 6e64 6f77 3a20 696e 7420 3d20    window: int = 
-000176b0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 206e  None,..        n
-000176c0: 5f6a 6f62 733a 2069 6e74 203d 202d 312c  _jobs: int = -1,
-000176d0: 0d0a 2020 2020 2020 2020 2a2a 6b77 6172  ..        **kwar
-000176e0: 6773 2c0d 0a20 2020 2029 3a0d 0a20 2020  gs,..    ):..   
-000176f0: 2020 2020 204d 6f64 656c 4f62 6a65 6374       ModelObject
-00017700: 2e5f 5f69 6e69 745f 5f28 0d0a 2020 2020  .__init__(..    
-00017710: 2020 2020 2020 2020 7365 6c66 2c0d 0a20          self,.. 
-00017720: 2020 2020 2020 2020 2020 206e 616d 652c             name,
-00017730: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
-00017740: 6571 7565 6e63 792c 0d0a 2020 2020 2020  equency,..      
-00017750: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-00017760: 5f69 6e74 6572 7661 6c2c 0d0a 2020 2020  _interval,..    
-00017770: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
-00017780: 6f6e 5f74 7970 653d 7265 6772 6573 7369  on_type=regressi
-00017790: 6f6e 5f74 7970 652c 0d0a 2020 2020 2020  on_type,..      
-000177a0: 2020 2020 2020 686f 6c69 6461 795f 636f        holiday_co
-000177b0: 756e 7472 793d 686f 6c69 6461 795f 636f  untry=holiday_co
-000177c0: 756e 7472 792c 0d0a 2020 2020 2020 2020  untry,..        
-000177d0: 2020 2020 7261 6e64 6f6d 5f73 6565 643d      random_seed=
-000177e0: 7261 6e64 6f6d 5f73 6565 642c 0d0a 2020  random_seed,..  
-000177f0: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
-00017800: 653d 7665 7262 6f73 652c 0d0a 2020 2020  e=verbose,..    
-00017810: 2020 2020 2020 2020 6e5f 6a6f 6273 3d6e          n_jobs=n
-00017820: 5f6a 6f62 732c 0d0a 2020 2020 2020 2020  _jobs,..        
-00017830: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00017840: 666f 7265 6361 7374 5f6c 656e 6774 6820  forecast_length 
-00017850: 3d20 666f 7265 6361 7374 5f6c 656e 6774  = forecast_lengt
-00017860: 680d 0a20 2020 2020 2020 2073 656c 662e  h..        self.
-00017870: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
-00017880: 203d 2072 6567 7265 7373 696f 6e5f 6d6f   = regression_mo
-00017890: 6465 6c0d 0a20 2020 2020 2020 2073 656c  del..        sel
-000178a0: 662e 686f 6c69 6461 7920 3d20 686f 6c69  f.holiday = holi
-000178b0: 6461 790d 0a20 2020 2020 2020 2073 656c  day..        sel
-000178c0: 662e 6d65 616e 5f72 6f6c 6c69 6e67 5f70  f.mean_rolling_p
-000178d0: 6572 696f 6473 203d 206d 6561 6e5f 726f  eriods = mean_ro
-000178e0: 6c6c 696e 675f 7065 7269 6f64 730d 0a20  lling_periods.. 
-000178f0: 2020 2020 2020 2069 6620 6d65 616e 5f72         if mean_r
-00017900: 6f6c 6c69 6e67 5f70 6572 696f 6473 2069  olling_periods i
-00017910: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00017920: 2020 2020 2073 656c 662e 6d61 6364 5f70       self.macd_p
-00017930: 6572 696f 6473 203d 204e 6f6e 650d 0a20  eriods = None.. 
-00017940: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00017950: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-00017960: 6163 645f 7065 7269 6f64 7320 3d20 6d61  acd_periods = ma
-00017970: 6364 5f70 6572 696f 6473 0d0a 2020 2020  cd_periods..    
-00017980: 2020 2020 7365 6c66 2e73 7464 5f72 6f6c      self.std_rol
-00017990: 6c69 6e67 5f70 6572 696f 6473 203d 2073  ling_periods = s
-000179a0: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
-000179b0: 6473 0d0a 2020 2020 2020 2020 7365 6c66  ds..        self
-000179c0: 2e6d 6178 5f72 6f6c 6c69 6e67 5f70 6572  .max_rolling_per
-000179d0: 696f 6473 203d 206d 6178 5f72 6f6c 6c69  iods = max_rolli
-000179e0: 6e67 5f70 6572 696f 6473 0d0a 2020 2020  ng_periods..    
-000179f0: 2020 2020 7365 6c66 2e6d 696e 5f72 6f6c      self.min_rol
-00017a00: 6c69 6e67 5f70 6572 696f 6473 203d 206d  ling_periods = m
-00017a10: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
-00017a20: 6473 0d0a 2020 2020 2020 2020 7365 6c66  ds..        self
-00017a30: 2e65 776d 5f76 6172 5f61 6c70 6861 203d  .ewm_var_alpha =
-00017a40: 2065 776d 5f76 6172 5f61 6c70 6861 0d0a   ewm_var_alpha..
-00017a50: 2020 2020 2020 2020 7365 6c66 2e65 776d          self.ewm
-00017a60: 5f61 6c70 6861 203d 2065 776d 5f61 6c70  _alpha = ewm_alp
-00017a70: 6861 0d0a 2020 2020 2020 2020 7365 6c66  ha..        self
-00017a80: 2e61 6464 6974 696f 6e61 6c5f 6c61 675f  .additional_lag_
-00017a90: 7065 7269 6f64 7320 3d20 6164 6469 7469  periods = additi
-00017aa0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-00017ab0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00017ac0: 6273 5f65 6e65 7267 7920 3d20 6162 735f  bs_energy = abs_
-00017ad0: 656e 6572 6779 0d0a 2020 2020 2020 2020  energy..        
-00017ae0: 7365 6c66 2e72 6f6c 6c69 6e67 5f61 7574  self.rolling_aut
-00017af0: 6f63 6f72 725f 7065 7269 6f64 7320 3d20  ocorr_periods = 
-00017b00: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
-00017b10: 5f70 6572 696f 6473 0d0a 2020 2020 2020  _periods..      
-00017b20: 2020 7365 6c66 2e61 6464 5f64 6174 655f    self.add_date_
-00017b30: 7061 7274 203d 2061 6464 5f64 6174 655f  part = add_date_
-00017b40: 7061 7274 0d0a 2020 2020 2020 2020 7365  part..        se
-00017b50: 6c66 2e70 6f6c 796e 6f6d 6961 6c5f 6465  lf.polynomial_de
-00017b60: 6772 6565 203d 2070 6f6c 796e 6f6d 6961  gree = polynomia
-00017b70: 6c5f 6465 6772 6565 0d0a 2020 2020 2020  l_degree..      
-00017b80: 2020 7365 6c66 2e78 5f74 7261 6e73 666f    self.x_transfo
-00017b90: 726d 203d 2078 5f74 7261 6e73 666f 726d  rm = x_transform
-00017ba0: 0d0a 2020 2020 2020 2020 7365 6c66 2e77  ..        self.w
-00017bb0: 696e 646f 7720 3d20 7769 6e64 6f77 0d0a  indow = window..
-00017bc0: 0d0a 2020 2020 6465 6620 5f78 5f74 7261  ..    def _x_tra
-00017bd0: 6e73 666f 726d 6572 2873 656c 6629 3a0d  nsformer(self):.
-00017be0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00017bf0: 2e78 5f74 7261 6e73 666f 726d 203d 3d20  .x_transform == 
-00017c00: 2746 6173 7449 4341 273a 0d0a 2020 2020  'FastICA':..    
-00017c10: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
-00017c20: 6561 726e 2e64 6563 6f6d 706f 7369 7469  earn.decompositi
-00017c30: 6f6e 2069 6d70 6f72 7420 4661 7374 4943  on import FastIC
-00017c40: 410d 0a0d 0a20 2020 2020 2020 2020 2020  A....           
-00017c50: 2078 5f74 7261 6e73 666f 726d 6572 203d   x_transformer =
-00017c60: 2046 6173 7449 4341 286e 5f63 6f6d 706f   FastICA(n_compo
-00017c70: 6e65 6e74 733d 4e6f 6e65 2c20 7261 6e64  nents=None, rand
-00017c80: 6f6d 5f73 7461 7465 3d32 3032 302c 2077  om_state=2020, w
-00017c90: 6869 7465 6e3d 5472 7565 290d 0a20 2020  hiten=True)..   
-00017ca0: 2020 2020 2065 6c69 6620 7365 6c66 2e78       elif self.x
-00017cb0: 5f74 7261 6e73 666f 726d 203d 3d20 274e  _transform == 'N
-00017cc0: 7973 7472 6f65 6d27 3a0d 0a20 2020 2020  ystroem':..     
-00017cd0: 2020 2020 2020 2066 726f 6d20 736b 6c65         from skle
-00017ce0: 6172 6e2e 6b65 726e 656c 5f61 7070 726f  arn.kernel_appro
-00017cf0: 7869 6d61 7469 6f6e 2069 6d70 6f72 7420  ximation import 
-00017d00: 4e79 7374 726f 656d 0d0a 0d0a 2020 2020  Nystroem....    
-00017d10: 2020 2020 2020 2020 6861 6c66 5f73 697a          half_siz
-00017d20: 6520 3d20 696e 7428 7365 6c66 2e73 6b74  e = int(self.skt
-00017d30: 7261 696e 6461 7461 2e73 6861 7065 5b30  raindata.shape[0
-00017d40: 5d20 2f20 3229 202b 2031 0d0a 2020 2020  ] / 2) + 1..    
-00017d50: 2020 2020 2020 2020 6d61 785f 636f 6d70          max_comp
-00017d60: 203d 2032 3030 0d0a 2020 2020 2020 2020   = 200..        
-00017d70: 2020 2020 6e5f 636f 6d70 203d 206d 6178      n_comp = max
-00017d80: 5f63 6f6d 7020 6966 2068 616c 665f 7369  _comp if half_si
-00017d90: 7a65 203e 206d 6178 5f63 6f6d 7020 656c  ze > max_comp el
-00017da0: 7365 2068 616c 665f 7369 7a65 0d0a 2020  se half_size..  
-00017db0: 2020 2020 2020 2020 2020 785f 7472 616e            x_tran
-00017dc0: 7366 6f72 6d65 7220 3d20 4e79 7374 726f  sformer = Nystro
-00017dd0: 656d 280d 0a20 2020 2020 2020 2020 2020  em(..           
-00017de0: 2020 2020 206b 6572 6e65 6c3d 2772 6266       kernel='rbf
-00017df0: 272c 2067 616d 6d61 3d30 2e32 2c20 7261  ', gamma=0.2, ra
-00017e00: 6e64 6f6d 5f73 7461 7465 3d32 3032 302c  ndom_state=2020,
-00017e10: 206e 5f63 6f6d 706f 6e65 6e74 733d 6e5f   n_components=n_
-00017e20: 636f 6d70 0d0a 2020 2020 2020 2020 2020  comp..          
-00017e30: 2020 290d 0a20 2020 2020 2020 2065 6c73    )..        els
-00017e40: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00017e50: 2320 7365 6c66 2e78 5f74 7261 6e73 666f  # self.x_transfo
-00017e60: 726d 203d 2027 526d 5a65 726f 5661 7269  rm = 'RmZeroVari
-00017e70: 616e 6365 270d 0a20 2020 2020 2020 2020  ance'..         
-00017e80: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
-00017e90: 6665 6174 7572 655f 7365 6c65 6374 696f  feature_selectio
-00017ea0: 6e20 696d 706f 7274 2056 6172 6961 6e63  n import Varianc
-00017eb0: 6554 6872 6573 686f 6c64 0d0a 0d0a 2020  eThreshold....  
-00017ec0: 2020 2020 2020 2020 2020 785f 7472 616e            x_tran
-00017ed0: 7366 6f72 6d65 7220 3d20 5661 7269 616e  sformer = Varian
-00017ee0: 6365 5468 7265 7368 6f6c 6428 7468 7265  ceThreshold(thre
-00017ef0: 7368 6f6c 643d 302e 3029 0d0a 2020 2020  shold=0.0)..    
-00017f00: 2020 2020 7265 7475 726e 2078 5f74 7261      return x_tra
-00017f10: 6e73 666f 726d 6572 0d0a 0d0a 2020 2020  nsformer....    
-00017f20: 6465 6620 6669 7428 7365 6c66 2c20 6466  def fit(self, df
-00017f30: 2c20 6675 7475 7265 5f72 6567 7265 7373  , future_regress
-00017f40: 6f72 3d4e 6f6e 6529 3a0d 0a20 2020 2020  or=None):..     
-00017f50: 2020 2022 2222 5472 6169 6e20 616c 676f     """Train algo
-00017f60: 7269 7468 6d20 6769 7665 6e20 6461 7461  rithm given data
-00017f70: 2073 7570 706c 6965 642e 0d0a 0d0a 2020   supplied.....  
-00017f80: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
-00017f90: 2020 2020 2020 2020 2064 6620 2870 616e           df (pan
-00017fa0: 6461 732e 4461 7461 4672 616d 6529 3a20  das.DataFrame): 
-00017fb0: 4461 7465 7469 6d65 2049 6e64 6578 6564  Datetime Indexed
-00017fc0: 0d0a 2020 2020 2020 2020 2020 2020 6675  ..            fu
-00017fd0: 7475 7265 5f72 6567 7265 7373 6f72 2028  ture_regressor (
-00017fe0: 7061 6e64 6173 2e44 6174 6146 7261 6d65  pandas.DataFrame
-00017ff0: 206f 7220 5365 7269 6573 293a 2044 6174   or Series): Dat
-00018000: 6574 696d 6520 496e 6465 7865 640d 0a20  etime Indexed.. 
-00018010: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-00018020: 2020 2020 6466 203d 2073 656c 662e 6261      df = self.ba
-00018030: 7369 635f 7072 6f66 696c 6528 6466 290d  sic_profile(df).
-00018040: 0a20 2020 2020 2020 2073 656c 662e 736b  .        self.sk
-00018050: 7472 6169 6e64 6174 6120 3d20 6466 0d0a  traindata = df..
-00018060: 0d0a 2020 2020 2020 2020 2320 6966 2065  ..        # if e
-00018070: 7874 6572 6e61 6c20 7265 6772 6573 736f  xternal regresso
-00018080: 722c 2064 6f20 736f 6d65 2063 6865 636b  r, do some check
-00018090: 2075 700d 0a20 2020 2020 2020 2069 6620   up..        if 
-000180a0: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
-000180b0: 7479 7065 2069 7320 6e6f 7420 4e6f 6e65  type is not None
-000180c0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
-000180d0: 6620 6675 7475 7265 5f72 6567 7265 7373  f future_regress
-000180e0: 6f72 2069 7320 4e6f 6e65 3a0d 0a20 2020  or is None:..   
-000180f0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00018100: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
-00018110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018120: 2020 2020 2272 6567 7265 7373 696f 6e5f      "regression_
-00018130: 7479 7065 3d27 5573 6572 2720 6275 7420  type='User' but 
-00018140: 6e6f 7420 6675 7475 7265 5f72 6567 7265  not future_regre
-00018150: 7373 6f72 2073 7570 706c 6965 642e 220d  ssor supplied.".
-00018160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018170: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-00018180: 656c 6966 2066 7574 7572 655f 7265 6772  elif future_regr
-00018190: 6573 736f 722e 7368 6170 655b 305d 2021  essor.shape[0] !
-000181a0: 3d20 6466 2e73 6861 7065 5b30 5d3a 0d0a  = df.shape[0]:..
-000181b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181c0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-000181d0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000181e0: 2020 2020 2020 2022 6675 7475 7265 5f72         "future_r
-000181f0: 6567 7265 7373 6f72 2073 6861 7065 2064  egressor shape d
-00018200: 6f65 7320 6e6f 7420 6d61 7463 6820 7472  oes not match tr
-00018210: 6169 6e69 6e67 2064 6174 6120 7368 6170  aining data shap
-00018220: 652e 220d 0a20 2020 2020 2020 2020 2020  e."..           
-00018230: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00018240: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00018250: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00018260: 7265 6772 6573 736f 725f 7472 6169 6e20  regressor_train 
-00018270: 3d20 6675 7475 7265 5f72 6567 7265 7373  = future_regress
-00018280: 6f72 0d0a 0d0a 2020 2020 2020 2020 636f  or....        co
-00018290: 6c73 203d 2073 656c 662e 736b 7472 6169  ls = self.sktrai
-000182a0: 6e64 6174 612e 636f 6c75 6d6e 730d 0a0d  ndata.columns...
-000182b0: 0a20 2020 2020 2020 2064 6566 2066 6f72  .        def for
-000182c0: 6563 6173 745f 6279 5f63 6f6c 756d 6e28  ecast_by_column(
-000182d0: 7365 6c66 2c20 6172 6773 2c20 7061 7261  self, args, para
-000182e0: 6c6c 656c 2c20 6e5f 6a6f 6273 2c20 636f  llel, n_jobs, co
-000182f0: 6c29 3a0d 0a20 2020 2020 2020 2020 2020  l):..           
-00018300: 2022 2222 5275 6e20 6f6e 6520 7365 7269   """Run one seri
-00018310: 6573 2061 6e64 2072 6574 7572 6e20 7072  es and return pr
-00018320: 6564 6963 7469 6f6e 2e22 2222 0d0a 2020  ediction."""..  
-00018330: 2020 2020 2020 2020 2020 6261 7365 203d            base =
-00018340: 2070 642e 4461 7461 4672 616d 6528 7365   pd.DataFrame(se
-00018350: 6c66 2e73 6b74 7261 696e 6461 7461 5b63  lf.sktraindata[c
-00018360: 6f6c 5d29 0d0a 2020 2020 2020 2020 2020  ol])..          
-00018370: 2020 5920 3d20 6261 7365 2e63 6f70 7928    Y = base.copy(
-00018380: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
-00018390: 6f72 2063 7572 725f 7368 6966 7420 696e  or curr_shift in
-000183a0: 2072 616e 6765 2831 2c20 7365 6c66 2e66   range(1, self.f
-000183b0: 6f72 6563 6173 745f 6c65 6e67 7468 293a  orecast_length):
-000183c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000183d0: 2020 5920 3d20 7064 2e63 6f6e 6361 7428    Y = pd.concat(
-000183e0: 5b59 2c20 6261 7365 2e73 6869 6674 282d  [Y, base.shift(-
-000183f0: 6375 7272 5f73 6869 6674 295d 2c20 6178  curr_shift)], ax
-00018400: 6973 3d31 290d 0a20 2020 2020 2020 2020  is=1)..         
-00018410: 2020 2023 2064 726f 7020 696e 636f 6d70     # drop incomp
-00018420: 6c65 7465 2064 6174 610d 0a20 2020 2020  lete data..     
-00018430: 2020 2020 2020 2059 203d 2059 2e64 726f         Y = Y.dro
-00018440: 7028 696e 6465 783d 592e 7461 696c 2873  p(index=Y.tail(s
-00018450: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
-00018460: 6774 6820 2d20 3129 2e69 6e64 6578 290d  gth - 1).index).
-00018470: 0a20 2020 2020 2020 2020 2020 2023 2064  .            # d
-00018480: 726f 7020 7468 6520 6d6f 7374 2072 6563  rop the most rec
-00018490: 656e 7420 6265 6361 7573 6520 7468 6572  ent because ther
-000184a0: 6527 7320 6e6f 2066 7574 7572 6520 666f  e's no future fo
-000184b0: 7220 6974 0d0a 2020 2020 2020 2020 2020  r it..          
-000184c0: 2020 5920 3d20 592e 6472 6f70 2869 6e64    Y = Y.drop(ind
-000184d0: 6578 3d59 2e69 6e64 6578 5b30 5d29 0d0a  ex=Y.index[0])..
-000184e0: 2020 2020 2020 2020 2020 2020 592e 636f              Y.co
-000184f0: 6c75 6d6e 7320 3d20 5b78 2066 6f72 2078  lumns = [x for x
-00018500: 2069 6e20 7261 6e67 6528 6c65 6e28 592e   in range(len(Y.
-00018510: 636f 6c75 6d6e 7329 295d 0d0a 0d0a 2020  columns))]....  
-00018520: 2020 2020 2020 2020 2020 5820 3d20 726f            X = ro
-00018530: 6c6c 696e 675f 785f 7265 6772 6573 736f  lling_x_regresso
-00018540: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-00018550: 2020 2020 6261 7365 2c0d 0a20 2020 2020      base,..     
-00018560: 2020 2020 2020 2020 2020 206d 6561 6e5f             mean_
-00018570: 726f 6c6c 696e 675f 7065 7269 6f64 733d  rolling_periods=
-00018580: 7365 6c66 2e6d 6561 6e5f 726f 6c6c 696e  self.mean_rollin
-00018590: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-000185a0: 2020 2020 2020 2020 2020 2020 6d61 6364              macd
-000185b0: 5f70 6572 696f 6473 3d73 656c 662e 6d61  _periods=self.ma
-000185c0: 6364 5f70 6572 696f 6473 2c0d 0a20 2020  cd_periods,..   
-000185d0: 2020 2020 2020 2020 2020 2020 2073 7464               std
-000185e0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-000185f0: 3d73 656c 662e 7374 645f 726f 6c6c 696e  =self.std_rollin
-00018600: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-00018610: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
-00018620: 726f 6c6c 696e 675f 7065 7269 6f64 733d  rolling_periods=
-00018630: 7365 6c66 2e6d 6178 5f72 6f6c 6c69 6e67  self.max_rolling
-00018640: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-00018650: 2020 2020 2020 2020 2020 206d 696e 5f72             min_r
-00018660: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
-00018670: 656c 662e 6d69 6e5f 726f 6c6c 696e 675f  elf.min_rolling_
-00018680: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
-00018690: 2020 2020 2020 2020 2020 6577 6d5f 7661            ewm_va
-000186a0: 725f 616c 7068 613d 7365 6c66 2e65 776d  r_alpha=self.ewm
-000186b0: 5f76 6172 5f61 6c70 6861 2c0d 0a20 2020  _var_alpha,..   
-000186c0: 2020 2020 2020 2020 2020 2020 2061 6464               add
-000186d0: 6974 696f 6e61 6c5f 6c61 675f 7065 7269  itional_lag_peri
-000186e0: 6f64 733d 7365 6c66 2e61 6464 6974 696f  ods=self.additio
-000186f0: 6e61 6c5f 6c61 675f 7065 7269 6f64 732c  nal_lag_periods,
-00018700: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018710: 2020 6577 6d5f 616c 7068 613d 7365 6c66    ewm_alpha=self
-00018720: 2e65 776d 5f61 6c70 6861 2c0d 0a20 2020  .ewm_alpha,..   
-00018730: 2020 2020 2020 2020 2020 2020 2061 6273               abs
-00018740: 5f65 6e65 7267 793d 7365 6c66 2e61 6273  _energy=self.abs
-00018750: 5f65 6e65 7267 792c 0d0a 2020 2020 2020  _energy,..      
-00018760: 2020 2020 2020 2020 2020 726f 6c6c 696e            rollin
-00018770: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
-00018780: 6473 3d73 656c 662e 726f 6c6c 696e 675f  ds=self.rolling_
-00018790: 6175 746f 636f 7272 5f70 6572 696f 6473  autocorr_periods
-000187a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000187b0: 2020 2061 6464 5f64 6174 655f 7061 7274     add_date_part
-000187c0: 3d73 656c 662e 6164 645f 6461 7465 5f70  =self.add_date_p
-000187d0: 6172 742c 0d0a 2020 2020 2020 2020 2020  art,..          
-000187e0: 2020 2020 2020 686f 6c69 6461 793d 7365        holiday=se
-000187f0: 6c66 2e68 6f6c 6964 6179 2c0d 0a20 2020  lf.holiday,..   
-00018800: 2020 2020 2020 2020 2020 2020 2068 6f6c               hol
-00018810: 6964 6179 5f63 6f75 6e74 7279 3d73 656c  iday_country=sel
-00018820: 662e 686f 6c69 6461 795f 636f 756e 7472  f.holiday_countr
-00018830: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00018840: 2020 2020 706f 6c79 6e6f 6d69 616c 5f64      polynomial_d
-00018850: 6567 7265 653d 7365 6c66 2e70 6f6c 796e  egree=self.polyn
-00018860: 6f6d 6961 6c5f 6465 6772 6565 2c0d 0a20  omial_degree,.. 
-00018870: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00018880: 696e 646f 773d 7365 6c66 2e77 696e 646f  indow=self.windo
-00018890: 772c 0d0a 2020 2020 2020 2020 2020 2020  w,..            
-000188a0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-000188b0: 6620 7365 6c66 2e72 6567 7265 7373 696f  f self.regressio
-000188c0: 6e5f 7479 7065 203d 3d20 2755 7365 7227  n_type == 'User'
-000188d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000188e0: 2020 2058 203d 2070 642e 636f 6e63 6174     X = pd.concat
-000188f0: 285b 582c 2073 656c 662e 7265 6772 6573  ([X, self.regres
-00018900: 736f 725f 7472 6169 6e5d 2c20 6178 6973  sor_train], axis
-00018910: 3d31 290d 0a0d 0a20 2020 2020 2020 2020  =1)....         
-00018920: 2020 2069 6620 7365 6c66 2e78 5f74 7261     if self.x_tra
-00018930: 6e73 666f 726d 2069 6e20 5b27 4661 7374  nsform in ['Fast
-00018940: 4943 4127 2c20 274e 7973 7472 6f65 6d27  ICA', 'Nystroem'
-00018950: 2c20 2752 6d5a 6572 6f56 6172 6961 6e63  , 'RmZeroVarianc
-00018960: 6527 5d3a 0d0a 2020 2020 2020 2020 2020  e']:..          
-00018970: 2020 2020 2020 7365 6c66 2e78 5f74 7261        self.x_tra
-00018980: 6e73 666f 726d 6572 203d 2073 656c 662e  nsformer = self.
-00018990: 5f78 5f74 7261 6e73 666f 726d 6572 2829  _x_transformer()
-000189a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000189b0: 2020 7365 6c66 2e78 5f74 7261 6e73 666f    self.x_transfo
-000189c0: 726d 6572 203d 2073 656c 662e 785f 7472  rmer = self.x_tr
-000189d0: 616e 7366 6f72 6d65 722e 6669 7428 5829  ansformer.fit(X)
-000189e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000189f0: 2020 5820 3d20 7064 2e44 6174 6146 7261    X = pd.DataFra
-00018a00: 6d65 2873 656c 662e 785f 7472 616e 7366  me(self.x_transf
-00018a10: 6f72 6d65 722e 7472 616e 7366 6f72 6d28  ormer.transform(
-00018a20: 5829 290d 0a20 2020 2020 2020 2020 2020  X))..           
-00018a30: 2020 2020 2058 203d 2058 2e72 6570 6c61       X = X.repla
-00018a40: 6365 285b 6e70 2e69 6e66 2c20 2d6e 702e  ce([np.inf, -np.
-00018a50: 696e 665d 2c20 3029 2e66 696c 6c6e 6128  inf], 0).fillna(
-00018a60: 3029 0d0a 0d0a 2020 2020 2020 2020 2020  0)....          
-00018a70: 2020 5820 3d20 582e 6472 6f70 2869 6e64    X = X.drop(ind
-00018a80: 6578 3d58 2e74 6169 6c28 7365 6c66 2e66  ex=X.tail(self.f
-00018a90: 6f72 6563 6173 745f 6c65 6e67 7468 292e  orecast_length).
-00018aa0: 696e 6465 7829 0d0a 2020 2020 2020 2020  index)..        
-00018ab0: 2020 2020 592e 696e 6465 7820 3d20 582e      Y.index = X.
-00018ac0: 696e 6465 7820 2023 2061 6e64 206a 7573  index  # and jus
-00018ad0: 7420 686f 7065 2049 2067 6f74 2074 6865  t hope I got the
-00018ae0: 2061 646a 7573 746d 656e 7473 2072 6967   adjustments rig
-00018af0: 6874 0d0a 0d0a 2020 2020 2020 2020 2020  ht....          
-00018b00: 2020 2320 7265 7472 6965 7665 206d 6f64    # retrieve mod
-00018b10: 656c 206f 626a 6563 7420 746f 2074 7261  el object to tra
-00018b20: 696e 0d0a 2020 2020 2020 2020 2020 2020  in..            
-00018b30: 6966 206e 6f74 2070 6172 616c 6c65 6c20  if not parallel 
-00018b40: 616e 6420 6e5f 6a6f 6273 203e 2031 3a0d  and n_jobs > 1:.
-00018b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018b60: 206e 5f6a 6f62 735f 7061 7373 6564 203d   n_jobs_passed =
-00018b70: 206e 5f6a 6f62 730d 0a20 2020 2020 2020   n_jobs..       
-00018b80: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00018b90: 2020 2020 2020 2020 2020 2020 6e5f 6a6f              n_jo
-00018ba0: 6273 5f70 6173 7365 6420 3d20 310d 0a20  bs_passed = 1.. 
-00018bb0: 2020 2020 2020 2020 2020 206d 756c 7469             multi
-00018bc0: 6f75 7470 7574 203d 2054 7275 650d 0a20  output = True.. 
-00018bd0: 2020 2020 2020 2020 2020 2069 6620 592e             if Y.
-00018be0: 6e64 696d 203c 2032 3a0d 0a20 2020 2020  ndim < 2:..     
-00018bf0: 2020 2020 2020 2020 2020 206d 756c 7469             multi
-00018c00: 6f75 7470 7574 203d 2046 616c 7365 0d0a  output = False..
-00018c10: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00018c20: 2059 2e73 6861 7065 5b31 5d20 3c20 323a   Y.shape[1] < 2:
-00018c30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018c40: 2020 6d75 6c74 696f 7574 7075 7420 3d20    multioutput = 
-00018c50: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-00018c60: 2020 2023 2062 6563 6175 7365 2074 6865     # because the
-00018c70: 2074 7261 696e 696e 6720 6d65 7373 6167   training messag
-00018c80: 6573 2067 6574 2061 6e6e 6f79 696e 670d  es get annoying.
-00018c90: 0a20 2020 2020 2020 2020 2020 2069 6e6e  .            inn
-00018ca0: 6572 5f76 6572 626f 7365 203d 2073 656c  er_verbose = sel
-00018cb0: 662e 7665 7262 6f73 6520 2d20 3120 6966  f.verbose - 1 if
-00018cc0: 2073 656c 662e 7665 7262 6f73 6520 3e20   self.verbose > 
-00018cd0: 3020 656c 7365 2073 656c 662e 7665 7262  0 else self.verb
-00018ce0: 6f73 650d 0a20 2020 2020 2020 2020 2020  ose..           
-00018cf0: 2064 6168 5f6d 6f64 656c 203d 2072 6574   dah_model = ret
-00018d00: 7269 6576 655f 7265 6772 6573 736f 7228  rieve_regressor(
-00018d10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018d20: 2020 7265 6772 6573 7369 6f6e 5f6d 6f64    regression_mod
-00018d30: 656c 3d73 656c 662e 7265 6772 6573 7369  el=self.regressi
-00018d40: 6f6e 5f6d 6f64 656c 2c0d 0a20 2020 2020  on_model,..     
-00018d50: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
-00018d60: 7365 3d69 6e6e 6572 5f76 6572 626f 7365  se=inner_verbose
-00018d70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00018d80: 2020 2076 6572 626f 7365 5f62 6f6f 6c3d     verbose_bool=
-00018d90: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-00018da0: 2020 2020 2020 2020 7261 6e64 6f6d 5f73          random_s
-00018db0: 6565 643d 7365 6c66 2e72 616e 646f 6d5f  eed=self.random_
-00018dc0: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
-00018dd0: 2020 2020 2020 206e 5f6a 6f62 733d 6e5f         n_jobs=n_
-00018de0: 6a6f 6273 5f70 6173 7365 642c 0d0a 2020  jobs_passed,..  
-00018df0: 2020 2020 2020 2020 2020 2020 2020 6d75                mu
-00018e00: 6c74 696f 7574 7075 743d 6d75 6c74 696f  ltioutput=multio
-00018e10: 7574 7075 742c 0d0a 2020 2020 2020 2020  utput,..        
-00018e20: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00018e30: 2020 2064 6168 5f6d 6f64 656c 2e66 6974     dah_model.fit
-00018e40: 2858 2e74 6f5f 6e75 6d70 7928 292c 2059  (X.to_numpy(), Y
-00018e50: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00018e60: 6574 7572 6e20 7b63 6f6c 3a20 6461 685f  eturn {col: dah_
-00018e70: 6d6f 6465 6c7d 0d0a 0d0a 2020 2020 2020  model}....      
-00018e80: 2020 7365 6c66 2e70 6172 616c 6c65 6c20    self.parallel 
-00018e90: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-00018ea0: 7365 6c66 2e6e 6f74 5f70 6172 616c 6c65  self.not_paralle
-00018eb0: 6c5f 6d6f 6465 6c73 203d 205b 0d0a 2020  l_models = [..  
-00018ec0: 2020 2020 2020 2020 2020 274c 6967 6874            'Light
-00018ed0: 4742 4d27 2c0d 0a20 2020 2020 2020 2020  GBM',..         
-00018ee0: 2020 2027 5261 6e64 6f6d 466f 7265 7374     'RandomForest
-00018ef0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00018f00: 2242 6179 6573 6961 6e52 6964 6765 222c  "BayesianRidge",
-00018f10: 0d0a 2020 2020 2020 2020 2020 2020 2754  ..            'T
-00018f20: 7261 6e73 666f 726d 6572 272c 0d0a 2020  ransformer',..  
-00018f30: 2020 2020 2020 2020 2020 224b 6572 6173            "Keras
-00018f40: 524e 4e22 2c0d 0a20 2020 2020 2020 2020  RNN",..         
-00018f50: 2020 2022 4869 7374 4772 6164 6965 6e74     "HistGradient
-00018f60: 426f 6f73 7422 2c0d 0a20 2020 2020 2020  Boost",..       
-00018f70: 205d 0d0a 2020 2020 2020 2020 6f75 745f   ]..        out_
-00018f80: 6e5f 6a6f 6273 203d 2069 6e74 2873 656c  n_jobs = int(sel
-00018f90: 662e 6e5f 6a6f 6273 202d 2031 290d 0a20  f.n_jobs - 1).. 
-00018fa0: 2020 2020 2020 206f 7574 5f6e 5f6a 6f62         out_n_job
-00018fb0: 7320 3d20 3120 6966 206f 7574 5f6e 5f6a  s = 1 if out_n_j
-00018fc0: 6f62 7320 3c20 3120 656c 7365 206f 7574  obs < 1 else out
-00018fd0: 5f6e 5f6a 6f62 730d 0a20 2020 2020 2020  _n_jobs..       
-00018fe0: 2069 6620 6f75 745f 6e5f 6a6f 6273 2069   if out_n_jobs i
-00018ff0: 6e20 5b30 2c20 315d 206f 7220 6c65 6e28  n [0, 1] or len(
-00019000: 636f 6c73 2920 3c20 333a 0d0a 2020 2020  cols) < 3:..    
-00019010: 2020 2020 2020 2020 7365 6c66 2e70 6172          self.par
-00019020: 616c 6c65 6c20 3d20 4661 6c73 650d 0a20  allel = False.. 
-00019030: 2020 2020 2020 2065 6c69 6620 280d 0a20         elif (.. 
-00019040: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00019050: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
-00019060: 2e67 6574 2822 6d6f 6465 6c22 2c20 2245  .get("model", "E
-00019070: 6c61 7374 6963 4e65 7422 2920 696e 2073  lasticNet") in s
-00019080: 656c 662e 6e6f 745f 7061 7261 6c6c 656c  elf.not_parallel
-00019090: 5f6d 6f64 656c 730d 0a20 2020 2020 2020  _models..       
-000190a0: 2029 3a0d 0a20 2020 2020 2020 2020 2020   ):..           
-000190b0: 2073 656c 662e 7061 7261 6c6c 656c 203d   self.parallel =
-000190c0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-000190d0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000190e0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-000190f0: 2020 2020 2020 2020 2066 726f 6d20 6a6f           from jo
-00019100: 626c 6962 2069 6d70 6f72 7420 5061 7261  blib import Para
-00019110: 6c6c 656c 2c20 6465 6c61 7965 640d 0a20  llel, delayed.. 
-00019120: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00019130: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
-00019140: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00019150: 6c66 2e70 6172 616c 6c65 6c20 3d20 4661  lf.parallel = Fa
-00019160: 6c73 650d 0a20 2020 2020 2020 2061 7267  lse..        arg
-00019170: 7320 3d20 7b7d 0d0a 2020 2020 2020 2020  s = {}..        
-00019180: 2320 6a6f 626c 6962 206d 756c 7469 7072  # joblib multipr
-00019190: 6f63 6573 7369 6e67 2074 6f20 6c6f 6f70  ocessing to loop
-000191a0: 2074 6872 6f75 6768 2073 6572 6965 730d   through series.
-000191b0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000191c0: 2e70 6172 616c 6c65 6c3a 0d0a 2020 2020  .parallel:..    
-000191d0: 2020 2020 2020 2020 6466 5f6c 6973 7420          df_list 
-000191e0: 3d20 5061 7261 6c6c 656c 286e 5f6a 6f62  = Parallel(n_job
-000191f0: 733d 6f75 745f 6e5f 6a6f 6273 2928 0d0a  s=out_n_jobs)(..
+0000b010: 2020 2020 2020 205b 2d31 2c20 352c 2031         [-1, 5, 1
+0000b020: 305d 2c0d 0a20 2020 2020 2020 2020 2020  0],..           
+0000b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b040: 205b 302e 362c 2030 2e31 2c20 302e 335d   [0.6, 0.1, 0.3]
+0000b050: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000b060: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+0000b070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b080: 2020 2020 2020 2020 2020 2262 6f6f 7374            "boost
+0000b090: 696e 675f 7479 7065 223a 2072 616e 646f  ing_type": rando
+0000b0a0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+0000b0b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b0c0: 2020 2020 2020 2020 5b27 6762 6474 272c          ['gbdt',
+0000b0d0: 2027 7266 272c 2027 6461 7274 272c 2027   'rf', 'dart', '
+0000b0e0: 676f 7373 275d 2c0d 0a20 2020 2020 2020  goss'],..       
+0000b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b100: 2020 2020 205b 302e 362c 2030 2c20 302e       [0.6, 0, 0.
+0000b110: 322c 2030 2e32 5d2c 0d0a 2020 2020 2020  2, 0.2],..      
+0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b130: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
+0000b140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b150: 2022 6e5f 6573 7469 6d61 746f 7273 223a   "n_estimators":
+0000b160: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+0000b170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b180: 2020 2020 2020 2020 2020 2020 2020 5b31                [1
+0000b190: 3030 2c20 3235 302c 2035 302c 2035 3030  00, 250, 50, 500
+0000b1a0: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0000b1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1c0: 5b30 2e36 2c20 302e 312c 2030 2e33 2c20  [0.6, 0.1, 0.3, 
+0000b1d0: 302e 3030 3130 5d2c 0d0a 2020 2020 2020  0.0010],..      
+0000b1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1f0: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
+0000b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b210: 2022 6c69 6e65 6172 5f74 7265 6522 3a20   "linear_tree": 
+0000b220: 7261 6e64 6f6d 2e63 686f 6963 6528 5b54  random.choice([T
+0000b230: 7275 652c 2046 616c 7365 5d29 2c0d 0a20  rue, False]),.. 
+0000b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b250: 2020 2020 2020 2022 6c61 6d62 6461 5f6c         "lambda_l
+0000b260: 3122 3a20 7261 6e64 6f6d 2e63 686f 6963  1": random.choic
+0000b270: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+0000b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b290: 205b 302e 302c 2030 2e31 2c20 312c 2031   [0.0, 0.1, 1, 1
+0000b2a0: 305d 2c20 5b30 2e35 2c20 302e 312c 2030  0], [0.5, 0.1, 0
+0000b2b0: 2e31 2c20 302e 315d 0d0a 2020 2020 2020  .1, 0.1]..      
+0000b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2d0: 2020 295b 305d 2c0d 0a20 2020 2020 2020    )[0],..       
+0000b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2f0: 2022 6c61 6d62 6461 5f6c 3222 3a20 7261   "lambda_l2": ra
+0000b300: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+0000b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b320: 2020 2020 2020 2020 2020 205b 302e 302c             [0.0,
+0000b330: 2030 2e31 2c20 312c 2031 305d 2c20 5b30   0.1, 1, 10], [0
+0000b340: 2e35 2c20 302e 312c 2030 2e31 2c20 302e  .5, 0.1, 0.1, 0.
+0000b350: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
+0000b360: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000b370: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000b380: 2020 2020 2020 2020 2020 2022 6d69 6e5f             "min_
+0000b390: 6461 7461 5f69 6e5f 6c65 6166 223a 2072  data_in_leaf": r
+0000b3a0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+0000b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3c0: 2020 2020 2020 2020 2020 2020 5b35 2c20              [5, 
+0000b3d0: 3135 2c20 3230 2c20 3330 5d2c 205b 302e  15, 20, 30], [0.
+0000b3e0: 312c 2030 2e32 2c20 302e 362c 2030 2e31  1, 0.2, 0.6, 0.1
+0000b3f0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0000b400: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+0000b410: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b420: 2020 2020 2020 2020 2020 2266 6561 7475            "featu
+0000b430: 7265 5f66 7261 6374 696f 6e22 3a20 7261  re_fraction": ra
+0000b440: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+0000b450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b460: 2020 2020 2020 2020 2020 205b 312e 302c             [1.0,
+0000b470: 2030 2e31 2c20 302e 352c 2030 2e38 5d2c   0.1, 0.5, 0.8],
+0000b480: 205b 302e 352c 2030 2e31 2c20 302e 312c   [0.5, 0.1, 0.1,
+0000b490: 2030 2e31 5d0d 0a20 2020 2020 2020 2020   0.1]..         
+0000b4a0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000b4b0: 5b30 5d2c 0d0a 2020 2020 2020 2020 2020  [0],..          
+0000b4c0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000b4d0: 6178 5f62 696e 223a 2072 616e 646f 6d2e  ax_bin": random.
+0000b4e0: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+0000b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b500: 2020 2020 2020 5b31 3530 302c 2031 3030        [1500, 100
+0000b510: 302c 2032 3535 2c20 3530 5d2c 205b 302e  0, 255, 50], [0.
+0000b520: 312c 2030 2e32 2c20 302e 362c 2030 2e31  1, 0.2, 0.6, 0.1
+0000b530: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
+0000b540: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
+0000b550: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b560: 2020 2020 2020 7d2c 0d0a 2020 2020 2020        },..      
+0000b570: 2020 2020 2020 2020 2020 7d0d 0a20 2020            }..   
+0000b580: 2020 2020 2065 6c69 6620 6d6f 6465 6c20       elif model 
+0000b590: 3d3d 2027 5269 6467 6527 3a0d 0a20 2020  == 'Ridge':..   
+0000b5a0: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
+0000b5b0: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
+0000b5c0: 2020 2020 2020 2020 2022 6d6f 6465 6c22           "model"
+0000b5d0: 3a20 2752 6964 6765 272c 0d0a 2020 2020  : 'Ridge',..    
+0000b5e0: 2020 2020 2020 2020 2020 2020 226d 6f64              "mod
+0000b5f0: 656c 5f70 6172 616d 7322 3a20 7b0d 0a20  el_params": {.. 
+0000b600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b610: 2020 2027 616c 7068 6127 3a20 7261 6e64     'alpha': rand
+0000b620: 6f6d 2e63 686f 6963 6528 5b31 2e30 2c20  om.choice([1.0, 
+0000b630: 3130 2e30 2c20 302e 312c 2030 2e30 3030  10.0, 0.1, 0.000
+0000b640: 3031 5d29 2c0d 0a20 2020 2020 2020 2020  01]),..         
+0000b650: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
+0000b660: 2020 2020 2020 207d 0d0a 2020 2020 2020         }..      
+0000b670: 2020 656c 6966 206d 6f64 656c 203d 3d20    elif model == 
+0000b680: 2747 6175 7373 6961 6e50 726f 6365 7373  'GaussianProcess
+0000b690: 5265 6772 6573 736f 7227 3a0d 0a20 2020  Regressor':..   
+0000b6a0: 2020 2020 2020 2020 2070 6172 616d 5f64           param_d
+0000b6b0: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
+0000b6c0: 2020 2020 2020 2020 2022 6d6f 6465 6c22           "model"
+0000b6d0: 3a20 2747 6175 7373 6961 6e50 726f 6365  : 'GaussianProce
+0000b6e0: 7373 5265 6772 6573 736f 7227 2c0d 0a20  ssRegressor',.. 
+0000b6f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b700: 6d6f 6465 6c5f 7061 7261 6d73 223a 207b  model_params": {
+0000b710: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b720: 2020 2020 2020 2761 6c70 6861 273a 2072        'alpha': r
+0000b730: 616e 646f 6d2e 6368 6f69 6365 285b 302e  andom.choice([0.
+0000b740: 3030 3030 3030 3030 3031 2c20 302e 3030  0000000001, 0.00
+0000b750: 3030 312c 2031 5d29 2c0d 0a20 2020 2020  001, 1]),..     
+0000b760: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000b770: 6b65 726e 656c 273a 2072 616e 646f 6d2e  kernel': random.
+0000b780: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+0000b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7a0: 2020 5b4e 6f6e 652c 2022 446f 7457 6869    [None, "DotWhi
+0000b7b0: 7465 222c 2022 5768 6974 6522 2c20 2252  te", "White", "R
+0000b7c0: 4246 222c 2022 4578 7053 696e 6553 7175  BF", "ExpSineSqu
+0000b7d0: 6172 6564 225d 2c0d 0a20 2020 2020 2020  ared"],..       
+0000b7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b7f0: 205b 302e 342c 2030 2e31 2c20 302e 312c   [0.4, 0.1, 0.1,
+0000b800: 2030 2e34 2c20 302e 315d 2c0d 0a20 2020   0.4, 0.1],..   
+0000b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b820: 2029 5b30 5d2c 0d0a 2020 2020 2020 2020   )[0],..        
+0000b830: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+0000b840: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+0000b850: 2020 2065 6c69 6620 6d6f 6465 6c20 3d3d     elif model ==
+0000b860: 2022 4d75 6c74 696f 7574 7075 7447 5052   "MultioutputGPR
+0000b870: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0000b880: 6b65 726e 656c 203d 2072 616e 646f 6d2e  kernel = random.
+0000b890: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
+0000b8a0: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
+0000b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b8c0: 2027 6c69 6e65 6172 272c 0d0a 2020 2020   'linear',..    
+0000b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b8e0: 2265 7870 6f6e 656e 7469 616c 222c 0d0a  "exponential",..
+0000b8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b900: 2020 2020 2272 6266 222c 0d0a 2020 2020      "rbf",..    
+0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b920: 2270 6f6c 796e 6f6d 6961 6c22 2c0d 0a20  "polynomial",.. 
+0000b930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b940: 2020 2027 7065 7269 6f64 6963 272c 0d0a     'periodic',..
+0000b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b960: 2020 2020 226c 6f63 616c 6c79 5f70 6572      "locally_per
+0000b970: 696f 6469 6322 2c0d 0a20 2020 2020 2020  iodic",..       
+0000b980: 2020 2020 2020 2020 205d 2c0d 0a20 2020           ],..   
+0000b990: 2020 2020 2020 2020 2020 2020 205b 302e               [0.
+0000b9a0: 312c 2030 2e31 2c20 302e 342c 2030 2e32  1, 0.1, 0.4, 0.2
+0000b9b0: 2c20 302e 3031 2c20 302e 3031 5d2c 0d0a  , 0.01, 0.01],..
+0000b9c0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000b9d0: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
+0000b9e0: 7261 6d5f 6469 6374 203d 207b 0d0a 2020  ram_dict = {..  
+0000b9f0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000ba00: 6f64 656c 223a 2027 4d75 6c74 696f 7574  odel": 'Multiout
+0000ba10: 7075 7447 5052 272c 0d0a 2020 2020 2020  putGPR',..      
+0000ba20: 2020 2020 2020 2020 2020 226d 6f64 656c            "model
+0000ba30: 5f70 6172 616d 7322 3a20 7b0d 0a20 2020  _params": {..   
+0000ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba50: 2027 6e6f 6973 655f 7661 7227 3a20 7261   'noise_var': ra
+0000ba60: 6e64 6f6d 2e63 686f 6963 6528 5b31 652d  ndom.choice([1e-
+0000ba70: 372c 2031 652d 342c 2031 652d 332c 2031  7, 1e-4, 1e-3, 1
+0000ba80: 652d 322c 2030 2e31 2c20 312c 2031 305d  e-2, 0.1, 1, 10]
+0000ba90: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0000baa0: 2020 2020 2020 2020 276b 6572 6e65 6c27          'kernel'
+0000bab0: 3a20 6b65 726e 656c 2c0d 0a20 2020 2020  : kernel,..     
+0000bac0: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
+0000bad0: 2020 2020 2020 2020 2020 207d 0d0a 2020             }..  
+0000bae0: 2020 2020 2020 2020 2020 6966 206b 6572            if ker
+0000baf0: 6e65 6c20 696e 205b 2265 7870 6f6e 656e  nel in ["exponen
+0000bb00: 7469 616c 222c 2022 6c6f 6361 6c6c 795f  tial", "locally_
+0000bb10: 7065 7269 6f64 6963 222c 2022 7262 6622  periodic", "rbf"
+0000bb20: 2c20 2270 6572 696f 6469 6322 5d3a 0d0a  , "periodic"]:..
+0000bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb40: 7061 7261 6d5f 6469 6374 5b27 6761 6d6d  param_dict['gamm
+0000bb50: 6127 5d20 3d20 7261 6e64 6f6d 2e63 686f  a'] = random.cho
+0000bb60: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+0000bb70: 2020 2020 2020 2020 2020 205b 302e 312c             [0.1,
+0000bb80: 2031 2c20 3130 2c20 3130 305d 2c0d 0a20   1, 10, 100],.. 
+0000bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bba0: 2020 205b 302e 322c 2030 2e30 352c 2030     [0.2, 0.05, 0
+0000bbb0: 2e32 2c20 302e 325d 2c0d 0a20 2020 2020  .2, 0.2],..     
+0000bbc0: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
+0000bbd0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000bbe0: 6b65 726e 656c 2069 6e20 5b22 6c6f 6361  kernel in ["loca
+0000bbf0: 6c6c 795f 7065 7269 6f64 6963 222c 2022  lly_periodic", "
+0000bc00: 7065 7269 6f64 6963 225d 3a0d 0a20 2020  periodic"]:..   
+0000bc10: 2020 2020 2020 2020 2020 2020 2070 6172               par
+0000bc20: 616d 5f64 6963 745b 2770 275d 203d 2072  am_dict['p'] = r
+0000bc30: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+0000bc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc50: 2020 2020 5b37 2c20 3132 2c20 3336 352e      [7, 12, 365.
+0000bc60: 3235 2c20 3532 2c20 3238 5d2c 205b 302e  25, 52, 28], [0.
+0000bc70: 382c 2030 2e31 352c 2030 2e31 352c 2030  8, 0.15, 0.15, 0
+0000bc80: 2e30 352c 2030 2e30 355d 0d0a 2020 2020  .05, 0.05]..    
+0000bc90: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0000bca0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0000bcb0: 206b 6572 6e65 6c20 3d3d 2022 6c6f 6361   kernel == "loca
+0000bcc0: 6c6c 795f 7065 7269 6f64 6963 223a 0d0a  lly_periodic":..
+0000bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bce0: 7061 7261 6d5f 6469 6374 5b27 6c61 6d62  param_dict['lamb
+0000bcf0: 6461 5f70 7269 6d65 275d 203d 2072 616e  da_prime'] = ran
+0000bd00: 646f 6d2e 6368 6f69 6365 285b 302e 312c  dom.choice([0.1,
+0000bd10: 2031 2c20 3130 5d29 0d0a 2020 2020 2020   1, 10])..      
+0000bd20: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+0000bd30: 2020 2020 206d 696e 5f73 616d 706c 6573       min_samples
+0000bd40: 203d 206e 702e 7261 6e64 6f6d 2e63 686f   = np.random.cho
+0000bd50: 6963 6528 0d0a 2020 2020 2020 2020 2020  ice(..          
+0000bd60: 2020 2020 2020 5b31 2c20 322c 2030 2e30        [1, 2, 0.0
+0000bd70: 355d 2c20 703d 5b30 2e35 2c20 302e 332c  5], p=[0.5, 0.3,
+0000bd80: 2030 2e32 5d2c 2073 697a 653d 310d 0a20   0.2], size=1.. 
+0000bd90: 2020 2020 2020 2020 2020 2029 2e69 7465             ).ite
+0000bda0: 6d28 290d 0a20 2020 2020 2020 2020 2020  m()..           
+0000bdb0: 206d 696e 5f73 616d 706c 6573 203d 2069   min_samples = i
+0000bdc0: 6e74 286d 696e 5f73 616d 706c 6573 2920  nt(min_samples) 
+0000bdd0: 6966 206d 696e 5f73 616d 706c 6573 2069  if min_samples i
+0000bde0: 6e20 5b32 5d20 656c 7365 206d 696e 5f73  n [2] else min_s
+0000bdf0: 616d 706c 6573 0d0a 2020 2020 2020 2020  amples..        
+0000be00: 2020 2020 7061 7261 6d5f 6469 6374 203d      param_dict =
+0000be10: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+0000be20: 2020 2020 226d 6f64 656c 223a 2027 4465      "model": 'De
+0000be30: 6369 7369 6f6e 5472 6565 272c 0d0a 2020  cisionTree',..  
+0000be40: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000be50: 6f64 656c 5f70 6172 616d 7322 3a20 7b0d  odel_params": {.
+0000be60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000be70: 2020 2020 2022 6d61 785f 6465 7074 6822       "max_depth"
+0000be80: 3a20 6e70 2e72 616e 646f 6d2e 6368 6f69  : np.random.choi
+0000be90: 6365 280d 0a20 2020 2020 2020 2020 2020  ce(..           
+0000bea0: 2020 2020 2020 2020 2020 2020 205b 4e6f               [No
+0000beb0: 6e65 2c20 332c 2039 5d2c 2070 3d5b 302e  ne, 3, 9], p=[0.
+0000bec0: 352c 2030 2e33 2c20 302e 325d 2c20 7369  5, 0.3, 0.2], si
+0000bed0: 7a65 3d31 0d0a 2020 2020 2020 2020 2020  ze=1..          
+0000bee0: 2020 2020 2020 2020 2020 292e 6974 656d            ).item
+0000bef0: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
+0000bf00: 2020 2020 2020 2020 2022 6d69 6e5f 7361           "min_sa
+0000bf10: 6d70 6c65 735f 7370 6c69 7422 3a20 6d69  mples_split": mi
+0000bf20: 6e5f 7361 6d70 6c65 732c 0d0a 2020 2020  n_samples,..    
+0000bf30: 2020 2020 2020 2020 2020 2020 7d2c 0d0a              },..
+0000bf40: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
+0000bf50: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000bf60: 2020 7061 7261 6d5f 6469 6374 203d 207b    param_dict = {
+0000bf70: 226d 6f64 656c 223a 206d 6f64 656c 2c20  "model": model, 
+0000bf80: 226d 6f64 656c 5f70 6172 616d 7322 3a20  "model_params": 
+0000bf90: 7b7d 7d0d 0a20 2020 2072 6574 7572 6e20  {}}..    return 
+0000bfa0: 7061 7261 6d5f 6469 6374 0d0a 0d0a 0d0a  param_dict......
+0000bfb0: 636c 6173 7320 526f 6c6c 696e 6752 6567  class RollingReg
+0000bfc0: 7265 7373 696f 6e28 4d6f 6465 6c4f 626a  ression(ModelObj
+0000bfd0: 6563 7429 3a0d 0a20 2020 2022 2222 4765  ect):..    """Ge
+0000bfe0: 6e65 7261 6c20 7265 6772 6573 7369 6f6e  neral regression
+0000bff0: 2d66 7261 6d65 6420 6170 7072 6f61 6368  -framed approach
+0000c000: 2074 6f20 666f 7265 6361 7374 696e 6720   to forecasting 
+0000c010: 7573 696e 6720 736b 6c65 6172 6e2e 0d0a  using sklearn...
+0000c020: 0d0a 2020 2020 5768 6f20 6172 6520 796f  ..    Who are yo
+0000c030: 7520 7768 6f20 6172 6520 736f 2077 6973  u who are so wis
+0000c040: 6520 696e 2074 6865 2077 6179 7320 6f66  e in the ways of
+0000c050: 2073 6369 656e 6365 3f0d 0a20 2020 2049   science?..    I
+0000c060: 2061 6d20 4172 7468 7572 2c20 4b69 6e67   am Arthur, King
+0000c070: 206f 6620 7468 6520 4272 6974 6f6e 732e   of the Britons.
+0000c080: 202d 5079 7468 6f6e 0d0a 0d0a 2020 2020   -Python....    
+0000c090: 4172 6773 3a0d 0a20 2020 2020 2020 206e  Args:..        n
+0000c0a0: 616d 6520 2873 7472 293a 2053 7472 696e  ame (str): Strin
+0000c0b0: 6720 746f 2069 6465 6e74 6966 7920 636c  g to identify cl
+0000c0c0: 6173 730d 0a20 2020 2020 2020 2066 7265  ass..        fre
+0000c0d0: 7175 656e 6379 2028 7374 7229 3a20 5374  quency (str): St
+0000c0e0: 7269 6e67 2061 6c69 6173 206f 6620 6461  ring alias of da
+0000c0f0: 7465 7469 6d65 2069 6e64 6578 2066 7265  tetime index fre
+0000c100: 7175 656e 6379 206f 7220 656c 7365 2027  quency or else '
+0000c110: 696e 6665 7227 0d0a 2020 2020 2020 2020  infer'..        
+0000c120: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
+0000c130: 7661 6c20 2866 6c6f 6174 293a 2043 6f6e  val (float): Con
+0000c140: 6669 6465 6e63 6520 696e 7465 7276 616c  fidence interval
+0000c150: 2066 6f72 2070 726f 6261 6269 6c69 7374   for probabilist
+0000c160: 6963 2066 6f72 6563 6173 740d 0a20 2020  ic forecast..   
+0000c170: 2020 2020 2068 6f6c 6964 6179 2028 626f       holiday (bo
+0000c180: 6f6c 293a 2049 6620 7472 7565 2c20 696e  ol): If true, in
+0000c190: 636c 7564 6520 686f 6c69 6461 7920 666c  clude holiday fl
+0000c1a0: 6167 730d 0a20 2020 2020 2020 2072 6567  ags..        reg
+0000c1b0: 7265 7373 696f 6e5f 7479 7065 2028 7374  ression_type (st
+0000c1c0: 7229 3a20 7479 7065 206f 6620 7265 6772  r): type of regr
+0000c1d0: 6573 7369 6f6e 2028 4e6f 6e65 2c20 2755  ession (None, 'U
+0000c1e0: 7365 7227 290d 0a0d 0a20 2020 2022 2222  ser')....    """
+0000c1f0: 0d0a 0d0a 2020 2020 6465 6620 5f5f 696e  ....    def __in
+0000c200: 6974 5f5f 280d 0a20 2020 2020 2020 2073  it__(..        s
+0000c210: 656c 662c 0d0a 2020 2020 2020 2020 6e61  elf,..        na
+0000c220: 6d65 3a20 7374 7220 3d20 2252 6f6c 6c69  me: str = "Rolli
+0000c230: 6e67 5265 6772 6573 7369 6f6e 222c 0d0a  ngRegression",..
+0000c240: 2020 2020 2020 2020 6672 6571 7565 6e63          frequenc
+0000c250: 793a 2073 7472 203d 2027 696e 6665 7227  y: str = 'infer'
+0000c260: 2c0d 0a20 2020 2020 2020 2070 7265 6469  ,..        predi
+0000c270: 6374 696f 6e5f 696e 7465 7276 616c 3a20  ction_interval: 
+0000c280: 666c 6f61 7420 3d20 302e 392c 0d0a 2020  float = 0.9,..  
+0000c290: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
+0000c2a0: 5f74 7970 653a 2073 7472 203d 204e 6f6e  _type: str = Non
+0000c2b0: 652c 0d0a 2020 2020 2020 2020 686f 6c69  e,..        holi
+0000c2c0: 6461 795f 636f 756e 7472 793a 2073 7472  day_country: str
+0000c2d0: 203d 2027 5553 272c 0d0a 2020 2020 2020   = 'US',..      
+0000c2e0: 2020 7665 7262 6f73 653a 2069 6e74 203d    verbose: int =
+0000c2f0: 2030 2c0d 0a20 2020 2020 2020 2072 616e   0,..        ran
+0000c300: 646f 6d5f 7365 6564 3a20 696e 7420 3d20  dom_seed: int = 
+0000c310: 3230 3230 2c0d 0a20 2020 2020 2020 2072  2020,..        r
+0000c320: 6567 7265 7373 696f 6e5f 6d6f 6465 6c3a  egression_model:
+0000c330: 2064 6963 7420 3d20 7b0d 0a20 2020 2020   dict = {..     
+0000c340: 2020 2020 2020 2022 6d6f 6465 6c22 3a20         "model": 
+0000c350: 2745 7874 7261 5472 6565 7327 2c0d 0a20  'ExtraTrees',.. 
+0000c360: 2020 2020 2020 2020 2020 2022 6d6f 6465             "mode
+0000c370: 6c5f 7061 7261 6d73 223a 207b 7d2c 0d0a  l_params": {},..
+0000c380: 2020 2020 2020 2020 7d2c 0d0a 2020 2020          },..    
+0000c390: 2020 2020 686f 6c69 6461 793a 2062 6f6f      holiday: boo
+0000c3a0: 6c20 3d20 4661 6c73 652c 0d0a 2020 2020  l = False,..    
+0000c3b0: 2020 2020 6d65 616e 5f72 6f6c 6c69 6e67      mean_rolling
+0000c3c0: 5f70 6572 696f 6473 3a20 696e 7420 3d20  _periods: int = 
+0000c3d0: 3330 2c0d 0a20 2020 2020 2020 206d 6163  30,..        mac
+0000c3e0: 645f 7065 7269 6f64 733a 2069 6e74 203d  d_periods: int =
+0000c3f0: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
+0000c400: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
+0000c410: 6f64 733a 2069 6e74 203d 2037 2c0d 0a20  ods: int = 7,.. 
+0000c420: 2020 2020 2020 206d 6178 5f72 6f6c 6c69         max_rolli
+0000c430: 6e67 5f70 6572 696f 6473 3a20 696e 7420  ng_periods: int 
+0000c440: 3d20 372c 0d0a 2020 2020 2020 2020 6d69  = 7,..        mi
+0000c450: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0000c460: 733a 2069 6e74 203d 2037 2c0d 0a20 2020  s: int = 7,..   
+0000c470: 2020 2020 2065 776d 5f76 6172 5f61 6c70       ewm_var_alp
+0000c480: 6861 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ha: int = None,.
+0000c490: 0a20 2020 2020 2020 2071 7561 6e74 696c  .        quantil
+0000c4a0: 6539 305f 726f 6c6c 696e 675f 7065 7269  e90_rolling_peri
+0000c4b0: 6f64 733a 2069 6e74 203d 204e 6f6e 652c  ods: int = None,
+0000c4c0: 0d0a 2020 2020 2020 2020 7175 616e 7469  ..        quanti
+0000c4d0: 6c65 3130 5f72 6f6c 6c69 6e67 5f70 6572  le10_rolling_per
+0000c4e0: 696f 6473 3a20 696e 7420 3d20 4e6f 6e65  iods: int = None
+0000c4f0: 2c0d 0a20 2020 2020 2020 2065 776d 5f61  ,..        ewm_a
+0000c500: 6c70 6861 3a20 666c 6f61 7420 3d20 302e  lpha: float = 0.
+0000c510: 352c 0d0a 2020 2020 2020 2020 6164 6469  5,..        addi
+0000c520: 7469 6f6e 616c 5f6c 6167 5f70 6572 696f  tional_lag_perio
+0000c530: 6473 3a20 696e 7420 3d20 372c 0d0a 2020  ds: int = 7,..  
+0000c540: 2020 2020 2020 6162 735f 656e 6572 6779        abs_energy
+0000c550: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
+0000c560: 0a20 2020 2020 2020 2072 6f6c 6c69 6e67  .        rolling
+0000c570: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+0000c580: 733a 2069 6e74 203d 204e 6f6e 652c 0d0a  s: int = None,..
+0000c590: 2020 2020 2020 2020 6e6f 6e7a 6572 6f5f          nonzero_
+0000c5a0: 6c61 7374 5f6e 3a20 696e 7420 3d20 4e6f  last_n: int = No
+0000c5b0: 6e65 2c0d 0a20 2020 2020 2020 2061 6464  ne,..        add
+0000c5c0: 5f64 6174 655f 7061 7274 3a20 7374 7220  _date_part: str 
+0000c5d0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+0000c5e0: 2070 6f6c 796e 6f6d 6961 6c5f 6465 6772   polynomial_degr
+0000c5f0: 6565 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ee: int = None,.
+0000c600: 0a20 2020 2020 2020 2078 5f74 7261 6e73  .        x_trans
+0000c610: 666f 726d 3a20 7374 7220 3d20 4e6f 6e65  form: str = None
+0000c620: 2c0d 0a20 2020 2020 2020 2077 696e 646f  ,..        windo
+0000c630: 773a 2069 6e74 203d 204e 6f6e 652c 0d0a  w: int = None,..
+0000c640: 2020 2020 2020 2020 6e5f 6a6f 6273 3a20          n_jobs: 
+0000c650: 696e 7420 3d20 2d31 2c0d 0a20 2020 2020  int = -1,..     
+0000c660: 2020 202a 2a6b 7761 7267 732c 0d0a 2020     **kwargs,..  
+0000c670: 2020 293a 0d0a 2020 2020 2020 2020 4d6f    ):..        Mo
+0000c680: 6465 6c4f 626a 6563 742e 5f5f 696e 6974  delObject.__init
+0000c690: 5f5f 280d 0a20 2020 2020 2020 2020 2020  __(..           
+0000c6a0: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
+0000c6b0: 2020 2020 6e61 6d65 2c0d 0a20 2020 2020      name,..     
+0000c6c0: 2020 2020 2020 2066 7265 7175 656e 6379         frequency
+0000c6d0: 2c0d 0a20 2020 2020 2020 2020 2020 2070  ,..            p
+0000c6e0: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+0000c6f0: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
+0000c700: 2072 6567 7265 7373 696f 6e5f 7479 7065   regression_type
+0000c710: 3d72 6567 7265 7373 696f 6e5f 7479 7065  =regression_type
+0000c720: 2c0d 0a20 2020 2020 2020 2020 2020 2068  ,..            h
+0000c730: 6f6c 6964 6179 5f63 6f75 6e74 7279 3d68  oliday_country=h
+0000c740: 6f6c 6964 6179 5f63 6f75 6e74 7279 2c0d  oliday_country,.
+0000c750: 0a20 2020 2020 2020 2020 2020 2072 616e  .            ran
+0000c760: 646f 6d5f 7365 6564 3d72 616e 646f 6d5f  dom_seed=random_
+0000c770: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
+0000c780: 2020 2076 6572 626f 7365 3d76 6572 626f     verbose=verbo
+0000c790: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+0000c7a0: 206e 5f6a 6f62 733d 6e5f 6a6f 6273 2c0d   n_jobs=n_jobs,.
+0000c7b0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
+0000c7c0: 2020 2020 7365 6c66 2e72 6567 7265 7373      self.regress
+0000c7d0: 696f 6e5f 6d6f 6465 6c20 3d20 7265 6772  ion_model = regr
+0000c7e0: 6573 7369 6f6e 5f6d 6f64 656c 0d0a 2020  ession_model..  
+0000c7f0: 2020 2020 2020 7365 6c66 2e68 6f6c 6964        self.holid
+0000c800: 6179 203d 2068 6f6c 6964 6179 0d0a 2020  ay = holiday..  
+0000c810: 2020 2020 2020 7365 6c66 2e6d 6561 6e5f        self.mean_
+0000c820: 726f 6c6c 696e 675f 7065 7269 6f64 7320  rolling_periods 
+0000c830: 3d20 6d65 616e 5f72 6f6c 6c69 6e67 5f70  = mean_rolling_p
+0000c840: 6572 696f 6473 0d0a 2020 2020 2020 2020  eriods..        
+0000c850: 6966 206d 6561 6e5f 726f 6c6c 696e 675f  if mean_rolling_
+0000c860: 7065 7269 6f64 7320 6973 204e 6f6e 653a  periods is None:
+0000c870: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0000c880: 6c66 2e6d 6163 645f 7065 7269 6f64 7320  lf.macd_periods 
+0000c890: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+0000c8a0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000c8b0: 2020 2073 656c 662e 6d61 6364 5f70 6572     self.macd_per
+0000c8c0: 696f 6473 203d 206d 6163 645f 7065 7269  iods = macd_peri
+0000c8d0: 6f64 730d 0a20 2020 2020 2020 2073 656c  ods..        sel
+0000c8e0: 662e 7374 645f 726f 6c6c 696e 675f 7065  f.std_rolling_pe
+0000c8f0: 7269 6f64 7320 3d20 7374 645f 726f 6c6c  riods = std_roll
+0000c900: 696e 675f 7065 7269 6f64 730d 0a20 2020  ing_periods..   
+0000c910: 2020 2020 2073 656c 662e 6d61 785f 726f       self.max_ro
+0000c920: 6c6c 696e 675f 7065 7269 6f64 7320 3d20  lling_periods = 
+0000c930: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
+0000c940: 6f64 730d 0a20 2020 2020 2020 2073 656c  ods..        sel
+0000c950: 662e 6d69 6e5f 726f 6c6c 696e 675f 7065  f.min_rolling_pe
+0000c960: 7269 6f64 7320 3d20 6d69 6e5f 726f 6c6c  riods = min_roll
+0000c970: 696e 675f 7065 7269 6f64 730d 0a20 2020  ing_periods..   
+0000c980: 2020 2020 2073 656c 662e 6577 6d5f 7661       self.ewm_va
+0000c990: 725f 616c 7068 6120 3d20 6577 6d5f 7661  r_alpha = ewm_va
+0000c9a0: 725f 616c 7068 610d 0a20 2020 2020 2020  r_alpha..       
+0000c9b0: 2073 656c 662e 7175 616e 7469 6c65 3930   self.quantile90
+0000c9c0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0000c9d0: 203d 2071 7561 6e74 696c 6539 305f 726f   = quantile90_ro
+0000c9e0: 6c6c 696e 675f 7065 7269 6f64 730d 0a20  lling_periods.. 
+0000c9f0: 2020 2020 2020 2073 656c 662e 7175 616e         self.quan
+0000ca00: 7469 6c65 3130 5f72 6f6c 6c69 6e67 5f70  tile10_rolling_p
+0000ca10: 6572 696f 6473 203d 2071 7561 6e74 696c  eriods = quantil
+0000ca20: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
+0000ca30: 6f64 730d 0a20 2020 2020 2020 2073 656c  ods..        sel
+0000ca40: 662e 6577 6d5f 616c 7068 6120 3d20 6577  f.ewm_alpha = ew
+0000ca50: 6d5f 616c 7068 610d 0a20 2020 2020 2020  m_alpha..       
+0000ca60: 2073 656c 662e 6164 6469 7469 6f6e 616c   self.additional
+0000ca70: 5f6c 6167 5f70 6572 696f 6473 203d 2061  _lag_periods = a
+0000ca80: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
+0000ca90: 7269 6f64 730d 0a20 2020 2020 2020 2073  riods..        s
+0000caa0: 656c 662e 6162 735f 656e 6572 6779 203d  elf.abs_energy =
+0000cab0: 2061 6273 5f65 6e65 7267 790d 0a20 2020   abs_energy..   
+0000cac0: 2020 2020 2073 656c 662e 726f 6c6c 696e       self.rollin
+0000cad0: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+0000cae0: 6473 203d 2072 6f6c 6c69 6e67 5f61 7574  ds = rolling_aut
+0000caf0: 6f63 6f72 725f 7065 7269 6f64 730d 0a20  ocorr_periods.. 
+0000cb00: 2020 2020 2020 2073 656c 662e 6e6f 6e7a         self.nonz
+0000cb10: 6572 6f5f 6c61 7374 5f6e 203d 206e 6f6e  ero_last_n = non
+0000cb20: 7a65 726f 5f6c 6173 745f 6e0d 0a20 2020  zero_last_n..   
+0000cb30: 2020 2020 2073 656c 662e 6164 645f 6461       self.add_da
+0000cb40: 7465 5f70 6172 7420 3d20 6164 645f 6461  te_part = add_da
+0000cb50: 7465 5f70 6172 740d 0a20 2020 2020 2020  te_part..       
+0000cb60: 2073 656c 662e 706f 6c79 6e6f 6d69 616c   self.polynomial
+0000cb70: 5f64 6567 7265 6520 3d20 706f 6c79 6e6f  _degree = polyno
+0000cb80: 6d69 616c 5f64 6567 7265 650d 0a20 2020  mial_degree..   
+0000cb90: 2020 2020 2073 656c 662e 785f 7472 616e       self.x_tran
+0000cba0: 7366 6f72 6d20 3d20 785f 7472 616e 7366  sform = x_transf
+0000cbb0: 6f72 6d0d 0a20 2020 2020 2020 2073 656c  orm..        sel
+0000cbc0: 662e 7769 6e64 6f77 203d 2077 696e 646f  f.window = windo
+0000cbd0: 770d 0a0d 0a20 2020 2064 6566 205f 785f  w....    def _x_
+0000cbe0: 7472 616e 7366 6f72 6d65 7228 7365 6c66  transformer(self
+0000cbf0: 293a 0d0a 2020 2020 2020 2020 6966 2073  ):..        if s
+0000cc00: 656c 662e 785f 7472 616e 7366 6f72 6d20  elf.x_transform 
+0000cc10: 3d3d 2027 4661 7374 4943 4127 3a0d 0a20  == 'FastICA':.. 
+0000cc20: 2020 2020 2020 2020 2020 2066 726f 6d20             from 
+0000cc30: 736b 6c65 6172 6e2e 6465 636f 6d70 6f73  sklearn.decompos
+0000cc40: 6974 696f 6e20 696d 706f 7274 2046 6173  ition import Fas
+0000cc50: 7449 4341 0d0a 0d0a 2020 2020 2020 2020  tICA....        
+0000cc60: 2020 2020 785f 7472 616e 7366 6f72 6d65      x_transforme
+0000cc70: 7220 3d20 4661 7374 4943 4128 6e5f 636f  r = FastICA(n_co
+0000cc80: 6d70 6f6e 656e 7473 3d4e 6f6e 652c 2072  mponents=None, r
+0000cc90: 616e 646f 6d5f 7374 6174 653d 3230 3230  andom_state=2020
+0000cca0: 2c20 7768 6974 656e 3d54 7275 6529 0d0a  , whiten=True)..
+0000ccb0: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+0000ccc0: 662e 785f 7472 616e 7366 6f72 6d20 3d3d  f.x_transform ==
+0000ccd0: 2027 4e79 7374 726f 656d 273a 0d0a 2020   'Nystroem':..  
+0000cce0: 2020 2020 2020 2020 2020 6672 6f6d 2073            from s
+0000ccf0: 6b6c 6561 726e 2e6b 6572 6e65 6c5f 6170  klearn.kernel_ap
+0000cd00: 7072 6f78 696d 6174 696f 6e20 696d 706f  proximation impo
+0000cd10: 7274 204e 7973 7472 6f65 6d0d 0a0d 0a20  rt Nystroem.... 
+0000cd20: 2020 2020 2020 2020 2020 2068 616c 665f             half_
+0000cd30: 7369 7a65 203d 2069 6e74 2873 656c 662e  size = int(self.
+0000cd40: 736b 7472 6169 6e64 6174 612e 7368 6170  sktraindata.shap
+0000cd50: 655b 305d 202f 2032 2920 2b20 310d 0a20  e[0] / 2) + 1.. 
+0000cd60: 2020 2020 2020 2020 2020 206d 6178 5f63             max_c
+0000cd70: 6f6d 7020 3d20 3230 300d 0a20 2020 2020  omp = 200..     
+0000cd80: 2020 2020 2020 206e 5f63 6f6d 7020 3d20         n_comp = 
+0000cd90: 6d61 785f 636f 6d70 2069 6620 6861 6c66  max_comp if half
+0000cda0: 5f73 697a 6520 3e20 6d61 785f 636f 6d70  _size > max_comp
+0000cdb0: 2065 6c73 6520 6861 6c66 5f73 697a 650d   else half_size.
+0000cdc0: 0a20 2020 2020 2020 2020 2020 2078 5f74  .            x_t
+0000cdd0: 7261 6e73 666f 726d 6572 203d 204e 7973  ransformer = Nys
+0000cde0: 7472 6f65 6d28 0d0a 2020 2020 2020 2020  troem(..        
+0000cdf0: 2020 2020 2020 2020 6b65 726e 656c 3d27          kernel='
+0000ce00: 7262 6627 2c20 6761 6d6d 613d 302e 322c  rbf', gamma=0.2,
+0000ce10: 2072 616e 646f 6d5f 7374 6174 653d 3230   random_state=20
+0000ce20: 3230 2c20 6e5f 636f 6d70 6f6e 656e 7473  20, n_components
+0000ce30: 3d6e 5f63 6f6d 700d 0a20 2020 2020 2020  =n_comp..       
+0000ce40: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000ce50: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0000ce60: 2020 2023 2073 656c 662e 785f 7472 616e     # self.x_tran
+0000ce70: 7366 6f72 6d20 3d20 2752 6d5a 6572 6f56  sform = 'RmZeroV
+0000ce80: 6172 6961 6e63 6527 0d0a 2020 2020 2020  ariance'..      
+0000ce90: 2020 2020 2020 6672 6f6d 2073 6b6c 6561        from sklea
+0000cea0: 726e 2e66 6561 7475 7265 5f73 656c 6563  rn.feature_selec
+0000ceb0: 7469 6f6e 2069 6d70 6f72 7420 5661 7269  tion import Vari
+0000cec0: 616e 6365 5468 7265 7368 6f6c 640d 0a0d  anceThreshold...
+0000ced0: 0a20 2020 2020 2020 2020 2020 2078 5f74  .            x_t
+0000cee0: 7261 6e73 666f 726d 6572 203d 2056 6172  ransformer = Var
+0000cef0: 6961 6e63 6554 6872 6573 686f 6c64 2874  ianceThreshold(t
+0000cf00: 6872 6573 686f 6c64 3d30 2e30 290d 0a20  hreshold=0.0).. 
+0000cf10: 2020 2020 2020 2072 6574 7572 6e20 785f         return x_
+0000cf20: 7472 616e 7366 6f72 6d65 720d 0a0d 0a20  transformer.... 
+0000cf30: 2020 2064 6566 2066 6974 2873 656c 662c     def fit(self,
+0000cf40: 2064 662c 2066 7574 7572 655f 7265 6772   df, future_regr
+0000cf50: 6573 736f 723d 4e6f 6e65 293a 0d0a 2020  essor=None):..  
+0000cf60: 2020 2020 2020 2222 2254 7261 696e 2061        """Train a
+0000cf70: 6c67 6f72 6974 686d 2067 6976 656e 2064  lgorithm given d
+0000cf80: 6174 6120 7375 7070 6c69 6564 2e0d 0a0d  ata supplied....
+0000cf90: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
+0000cfa0: 2020 2020 2020 2020 2020 2020 6466 2028              df (
+0000cfb0: 7061 6e64 6173 2e44 6174 6146 7261 6d65  pandas.DataFrame
+0000cfc0: 293a 2044 6174 6574 696d 6520 496e 6465  ): Datetime Inde
+0000cfd0: 7865 640d 0a20 2020 2020 2020 2020 2020  xed..           
+0000cfe0: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+0000cff0: 7220 2870 616e 6461 732e 4461 7461 4672  r (pandas.DataFr
+0000d000: 616d 6520 6f72 2053 6572 6965 7329 3a20  ame or Series): 
+0000d010: 4461 7465 7469 6d65 2049 6e64 6578 6564  Datetime Indexed
+0000d020: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+0000d030: 2020 2020 2020 2064 6620 3d20 7365 6c66         df = self
+0000d040: 2e62 6173 6963 5f70 726f 6669 6c65 2864  .basic_profile(d
+0000d050: 6629 0d0a 2020 2020 2020 2020 7365 6c66  f)..        self
+0000d060: 2e64 665f 7472 6169 6e20 3d20 6466 0d0a  .df_train = df..
+0000d070: 0d0a 2020 2020 2020 2020 2320 6966 2065  ..        # if e
+0000d080: 7874 6572 6e61 6c20 7265 6772 6573 736f  xternal regresso
+0000d090: 722c 2064 6f20 736f 6d65 2063 6865 636b  r, do some check
+0000d0a0: 2075 700d 0a20 2020 2020 2020 2069 6620   up..        if 
+0000d0b0: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+0000d0c0: 7479 7065 2069 7320 6e6f 7420 4e6f 6e65  type is not None
+0000d0d0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+0000d0e0: 6620 6675 7475 7265 5f72 6567 7265 7373  f future_regress
+0000d0f0: 6f72 2069 7320 4e6f 6e65 3a0d 0a20 2020  or is None:..   
+0000d100: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0000d110: 7365 2056 616c 7565 4572 726f 7228 0d0a  se ValueError(..
+0000d120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d130: 2020 2020 2266 7574 7572 655f 7265 6772      "future_regr
+0000d140: 6573 736f 7220 6e6f 7420 7375 7070 6c69  essor not suppli
+0000d150: 6564 2c20 6e65 6365 7373 6172 7920 666f  ed, necessary fo
+0000d160: 7220 7265 6772 6573 7369 6f6e 5f74 7970  r regression_typ
+0000d170: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
+0000d180: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+0000d190: 2020 2073 656c 662e 7265 6772 6573 736f     self.regresso
+0000d1a0: 725f 7472 6169 6e20 3d20 6675 7475 7265  r_train = future
+0000d1b0: 5f72 6567 7265 7373 6f72 0d0a 0d0a 2020  _regressor....  
+0000d1c0: 2020 2020 2020 2320 6465 6669 6e65 2058        # define X
+0000d1d0: 2061 6e64 2059 0d0a 2020 2020 2020 2020   and Y..        
+0000d1e0: 7365 6c66 2e73 6b74 7261 696e 6461 7461  self.sktraindata
+0000d1f0: 203d 2073 656c 662e 6466 5f74 7261 696e   = self.df_train
+0000d200: 2e64 726f 706e 6128 686f 773d 2761 6c6c  .dropna(how='all
+0000d210: 272c 2061 7869 733d 3029 0d0a 2020 2020  ', axis=0)..    
+0000d220: 2020 2020 7365 6c66 2e73 6b74 7261 696e      self.sktrain
+0000d230: 6461 7461 203d 2073 656c 662e 736b 7472  data = self.sktr
+0000d240: 6169 6e64 6174 612e 6666 696c 6c28 292e  aindata.ffill().
+0000d250: 6266 696c 6c28 290d 0a20 2020 2020 2020  bfill()..       
+0000d260: 2073 656c 662e 5920 3d20 7365 6c66 2e73   self.Y = self.s
+0000d270: 6b74 7261 696e 6461 7461 2e64 726f 7028  ktraindata.drop(
+0000d280: 7365 6c66 2e73 6b74 7261 696e 6461 7461  self.sktraindata
+0000d290: 2e68 6561 6428 3229 2e69 6e64 6578 290d  .head(2).index).
+0000d2a0: 0a20 2020 2020 2020 2073 656c 662e 592e  .        self.Y.
+0000d2b0: 636f 6c75 6d6e 7320 3d20 5b78 2066 6f72  columns = [x for
+0000d2c0: 2078 2069 6e20 7261 6e67 6528 6c65 6e28   x in range(len(
+0000d2d0: 7365 6c66 2e59 2e63 6f6c 756d 6e73 2929  self.Y.columns))
+0000d2e0: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
+0000d2f0: 5820 3d20 726f 6c6c 696e 675f 785f 7265  X = rolling_x_re
+0000d300: 6772 6573 736f 7228 0d0a 2020 2020 2020  gressor(..      
+0000d310: 2020 2020 2020 7365 6c66 2e73 6b74 7261        self.sktra
+0000d320: 696e 6461 7461 2c0d 0a20 2020 2020 2020  indata,..       
+0000d330: 2020 2020 206d 6561 6e5f 726f 6c6c 696e       mean_rollin
+0000d340: 675f 7065 7269 6f64 733d 7365 6c66 2e6d  g_periods=self.m
+0000d350: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
+0000d360: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
+0000d370: 2020 6d61 6364 5f70 6572 696f 6473 3d73    macd_periods=s
+0000d380: 656c 662e 6d61 6364 5f70 6572 696f 6473  elf.macd_periods
+0000d390: 2c0d 0a20 2020 2020 2020 2020 2020 2073  ,..            s
+0000d3a0: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
+0000d3b0: 6473 3d73 656c 662e 7374 645f 726f 6c6c  ds=self.std_roll
+0000d3c0: 696e 675f 7065 7269 6f64 732c 0d0a 2020  ing_periods,..  
+0000d3d0: 2020 2020 2020 2020 2020 6d61 785f 726f            max_ro
+0000d3e0: 6c6c 696e 675f 7065 7269 6f64 733d 7365  lling_periods=se
+0000d3f0: 6c66 2e6d 6178 5f72 6f6c 6c69 6e67 5f70  lf.max_rolling_p
+0000d400: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+0000d410: 2020 2020 206d 696e 5f72 6f6c 6c69 6e67       min_rolling
+0000d420: 5f70 6572 696f 6473 3d73 656c 662e 6d69  _periods=self.mi
+0000d430: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0000d440: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0000d450: 6577 6d5f 7661 725f 616c 7068 613d 7365  ewm_var_alpha=se
+0000d460: 6c66 2e65 776d 5f76 6172 5f61 6c70 6861  lf.ewm_var_alpha
+0000d470: 2c0d 0a20 2020 2020 2020 2020 2020 2071  ,..            q
+0000d480: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
+0000d490: 675f 7065 7269 6f64 733d 7365 6c66 2e71  g_periods=self.q
+0000d4a0: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
+0000d4b0: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
+0000d4c0: 2020 2020 2020 2020 7175 616e 7469 6c65          quantile
+0000d4d0: 3130 5f72 6f6c 6c69 6e67 5f70 6572 696f  10_rolling_perio
+0000d4e0: 6473 3d73 656c 662e 7175 616e 7469 6c65  ds=self.quantile
+0000d4f0: 3130 5f72 6f6c 6c69 6e67 5f70 6572 696f  10_rolling_perio
+0000d500: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
+0000d510: 2061 6464 6974 696f 6e61 6c5f 6c61 675f   additional_lag_
+0000d520: 7065 7269 6f64 733d 7365 6c66 2e61 6464  periods=self.add
+0000d530: 6974 696f 6e61 6c5f 6c61 675f 7065 7269  itional_lag_peri
+0000d540: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
+0000d550: 2020 6577 6d5f 616c 7068 613d 7365 6c66    ewm_alpha=self
+0000d560: 2e65 776d 5f61 6c70 6861 2c0d 0a20 2020  .ewm_alpha,..   
+0000d570: 2020 2020 2020 2020 2061 6273 5f65 6e65           abs_ene
+0000d580: 7267 793d 7365 6c66 2e61 6273 5f65 6e65  rgy=self.abs_ene
+0000d590: 7267 792c 0d0a 2020 2020 2020 2020 2020  rgy,..          
+0000d5a0: 2020 726f 6c6c 696e 675f 6175 746f 636f    rolling_autoco
+0000d5b0: 7272 5f70 6572 696f 6473 3d73 656c 662e  rr_periods=self.
+0000d5c0: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
+0000d5d0: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+0000d5e0: 2020 2020 2020 206e 6f6e 7a65 726f 5f6c         nonzero_l
+0000d5f0: 6173 745f 6e3d 7365 6c66 2e6e 6f6e 7a65  ast_n=self.nonze
+0000d600: 726f 5f6c 6173 745f 6e2c 0d0a 2020 2020  ro_last_n,..    
+0000d610: 2020 2020 2020 2020 6164 645f 6461 7465          add_date
+0000d620: 5f70 6172 743d 7365 6c66 2e61 6464 5f64  _part=self.add_d
+0000d630: 6174 655f 7061 7274 2c0d 0a20 2020 2020  ate_part,..     
+0000d640: 2020 2020 2020 2068 6f6c 6964 6179 3d73         holiday=s
+0000d650: 656c 662e 686f 6c69 6461 792c 0d0a 2020  elf.holiday,..  
+0000d660: 2020 2020 2020 2020 2020 686f 6c69 6461            holida
+0000d670: 795f 636f 756e 7472 793d 7365 6c66 2e68  y_country=self.h
+0000d680: 6f6c 6964 6179 5f63 6f75 6e74 7279 2c0d  oliday_country,.
+0000d690: 0a20 2020 2020 2020 2020 2020 2070 6f6c  .            pol
+0000d6a0: 796e 6f6d 6961 6c5f 6465 6772 6565 3d73  ynomial_degree=s
+0000d6b0: 656c 662e 706f 6c79 6e6f 6d69 616c 5f64  elf.polynomial_d
+0000d6c0: 6567 7265 652c 0d0a 2020 2020 2020 2020  egree,..        
+0000d6d0: 2020 2020 7769 6e64 6f77 3d73 656c 662e      window=self.
+0000d6e0: 7769 6e64 6f77 2c0d 0a20 2020 2020 2020  window,..       
+0000d6f0: 2029 0d0a 2020 2020 2020 2020 6966 2073   )..        if s
+0000d700: 656c 662e 7265 6772 6573 7369 6f6e 5f74  elf.regression_t
+0000d710: 7970 6520 3d3d 2027 5573 6572 273a 0d0a  ype == 'User':..
+0000d720: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000d730: 2e58 203d 2070 642e 636f 6e63 6174 285b  .X = pd.concat([
+0000d740: 7365 6c66 2e58 2c20 7365 6c66 2e72 6567  self.X, self.reg
+0000d750: 7265 7373 6f72 5f74 7261 696e 5d2c 2061  ressor_train], a
+0000d760: 7869 733d 3129 0d0a 0d0a 2020 2020 2020  xis=1)....      
+0000d770: 2020 6966 2073 656c 662e 785f 7472 616e    if self.x_tran
+0000d780: 7366 6f72 6d20 696e 205b 2746 6173 7449  sform in ['FastI
+0000d790: 4341 272c 2027 4e79 7374 726f 656d 272c  CA', 'Nystroem',
+0000d7a0: 2027 526d 5a65 726f 5661 7269 616e 6365   'RmZeroVariance
+0000d7b0: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+0000d7c0: 2073 656c 662e 785f 7472 616e 7366 6f72   self.x_transfor
+0000d7d0: 6d65 7220 3d20 7365 6c66 2e5f 785f 7472  mer = self._x_tr
+0000d7e0: 616e 7366 6f72 6d65 7228 290d 0a20 2020  ansformer()..   
+0000d7f0: 2020 2020 2020 2020 2073 656c 662e 785f           self.x_
+0000d800: 7472 616e 7366 6f72 6d65 7220 3d20 7365  transformer = se
+0000d810: 6c66 2e78 5f74 7261 6e73 666f 726d 6572  lf.x_transformer
+0000d820: 2e66 6974 2873 656c 662e 5829 0d0a 2020  .fit(self.X)..  
+0000d830: 2020 2020 2020 2020 2020 7365 6c66 2e58            self.X
+0000d840: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
+0000d850: 7365 6c66 2e78 5f74 7261 6e73 666f 726d  self.x_transform
+0000d860: 6572 2e74 7261 6e73 666f 726d 2873 656c  er.transform(sel
+0000d870: 662e 5829 290d 0a20 2020 2020 2020 2020  f.X))..         
+0000d880: 2020 2073 656c 662e 5820 3d20 7365 6c66     self.X = self
+0000d890: 2e58 2e72 6570 6c61 6365 285b 6e70 2e69  .X.replace([np.i
+0000d8a0: 6e66 2c20 2d6e 702e 696e 665d 2c20 3029  nf, -np.inf], 0)
+0000d8b0: 2e66 696c 6c6e 6128 3029 0d0a 2020 2020  .fillna(0)..    
+0000d8c0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000d8d0: 2054 6169 6c28 3129 2069 7320 6472 6f70   Tail(1) is drop
+0000d8e0: 7065 6420 746f 2073 6869 6674 2064 6174  ped to shift dat
+0000d8f0: 6120 746f 2062 6563 6f6d 6520 666f 7265  a to become fore
+0000d900: 6361 7374 2031 2061 6865 6164 0d0a 2020  cast 1 ahead..  
+0000d910: 2020 2020 2020 616e 6420 7468 6520 6669        and the fi
+0000d920: 7273 7420 6f6e 6520 6973 2064 726f 7070  rst one is dropp
+0000d930: 6564 2062 6563 6175 7365 2069 7420 7769  ed because it wi
+0000d940: 6c6c 206c 6561 7374 2061 6363 7572 6174  ll least accurat
+0000d950: 656c 7920 7265 7072 6573 656e 740d 0a20  ely represent.. 
+0000d960: 2020 2020 2020 2072 6f6c 6c69 6e67 2076         rolling v
+0000d970: 616c 7565 730d 0a20 2020 2020 2020 2022  alues..        "
+0000d980: 2222 0d0a 2020 2020 2020 2020 7365 6c66  ""..        self
+0000d990: 2e58 203d 2073 656c 662e 582e 6472 6f70  .X = self.X.drop
+0000d9a0: 2873 656c 662e 582e 7461 696c 2831 292e  (self.X.tail(1).
+0000d9b0: 696e 6465 7829 2e64 726f 7028 7365 6c66  index).drop(self
+0000d9c0: 2e58 2e68 6561 6428 3129 2e69 6e64 6578  .X.head(1).index
+0000d9d0: 290d 0a20 2020 2020 2020 2069 6620 6973  )..        if is
+0000d9e0: 696e 7374 616e 6365 2873 656c 662e 582c  instance(self.X,
+0000d9f0: 2070 642e 4461 7461 4672 616d 6529 3a0d   pd.DataFrame):.
+0000da00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000da10: 662e 582e 636f 6c75 6d6e 7320 3d20 5b73  f.X.columns = [s
+0000da20: 7472 2878 6329 2066 6f72 2078 6320 696e  tr(xc) for xc in
+0000da30: 2073 656c 662e 582e 636f 6c75 6d6e 735d   self.X.columns]
+0000da40: 0d0a 0d0a 2020 2020 2020 2020 6d75 6c74  ....        mult
+0000da50: 696f 7574 7075 7420 3d20 5472 7565 0d0a  ioutput = True..
+0000da60: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000da70: 592e 6e64 696d 203c 2032 3a0d 0a20 2020  Y.ndim < 2:..   
+0000da80: 2020 2020 2020 2020 206d 756c 7469 6f75           multiou
+0000da90: 7470 7574 203d 2046 616c 7365 0d0a 2020  tput = False..  
+0000daa0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+0000dab0: 592e 7368 6170 655b 315d 203c 2032 3a0d  Y.shape[1] < 2:.
+0000dac0: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
+0000dad0: 7469 6f75 7470 7574 203d 2046 616c 7365  tioutput = False
+0000dae0: 0d0a 2020 2020 2020 2020 2320 7265 7472  ..        # retr
+0000daf0: 6965 7665 206d 6f64 656c 206f 626a 6563  ieve model objec
+0000db00: 7420 746f 2074 7261 696e 0d0a 2020 2020  t to train..    
+0000db10: 2020 2020 7365 6c66 2e6d 6f64 656c 203d      self.model =
+0000db20: 2072 6574 7269 6576 655f 7265 6772 6573   retrieve_regres
+0000db30: 736f 7228 0d0a 2020 2020 2020 2020 2020  sor(..          
+0000db40: 2020 7265 6772 6573 7369 6f6e 5f6d 6f64    regression_mod
+0000db50: 656c 3d73 656c 662e 7265 6772 6573 7369  el=self.regressi
+0000db60: 6f6e 5f6d 6f64 656c 2c0d 0a20 2020 2020  on_model,..     
+0000db70: 2020 2020 2020 2076 6572 626f 7365 3d73         verbose=s
+0000db80: 656c 662e 7665 7262 6f73 652c 0d0a 2020  elf.verbose,..  
+0000db90: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
+0000dba0: 655f 626f 6f6c 3d73 656c 662e 7665 7262  e_bool=self.verb
+0000dbb0: 6f73 655f 626f 6f6c 2c0d 0a20 2020 2020  ose_bool,..     
+0000dbc0: 2020 2020 2020 2072 616e 646f 6d5f 7365         random_se
+0000dbd0: 6564 3d73 656c 662e 7261 6e64 6f6d 5f73  ed=self.random_s
+0000dbe0: 6565 642c 0d0a 2020 2020 2020 2020 2020  eed,..          
+0000dbf0: 2020 6e5f 6a6f 6273 3d73 656c 662e 6e5f    n_jobs=self.n_
+0000dc00: 6a6f 6273 2c0d 0a20 2020 2020 2020 2020  jobs,..         
+0000dc10: 2020 206d 756c 7469 6f75 7470 7574 3d6d     multioutput=m
+0000dc20: 756c 7469 6f75 7470 7574 2c0d 0a20 2020  ultioutput,..   
+0000dc30: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0000dc40: 2222 220d 0a20 2020 2020 2020 2075 7365  """..        use
+0000dc50: 5f64 6576 6963 6520 3d20 4661 6c73 650d  _device = False.
+0000dc60: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+0000dc70: 2020 2020 2020 2020 2020 2064 6576 6963             devic
+0000dc80: 6520 3d20 6470 6374 6c2e 5379 636c 4465  e = dpctl.SyclDe
+0000dc90: 7669 6365 2822 6770 752c 6370 7522 290d  vice("gpu,cpu").
+0000dca0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000dcb0: 7365 6c66 2e76 6572 626f 7365 203e 2030  self.verbose > 0
+0000dcc0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000dcd0: 2020 2070 7269 6e74 2866 227b 2747 5055     print(f"{'GPU
+0000dce0: 2720 6966 2064 6576 6963 652e 6973 5f67  ' if device.is_g
+0000dcf0: 7075 2065 6c73 6520 2743 5055 277d 2074  pu else 'CPU'} t
+0000dd00: 6172 6765 7465 643a 2022 2c20 6465 7669  argeted: ", devi
+0000dd10: 6365 290d 0a20 2020 2020 2020 2020 2020  ce)..           
+0000dd20: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0000dd30: 2020 2020 2020 2078 5f64 6576 6963 6520         x_device 
+0000dd40: 3d20 6672 6f6d 5f6e 756d 7079 2858 2c20  = from_numpy(X, 
+0000dd50: 7573 6d5f 7479 7065 3d27 6465 7669 6365  usm_type='device
+0000dd60: 272c 2071 7565 7565 3d64 7063 746c 2e53  ', queue=dpctl.S
+0000dd70: 7963 6c51 7565 7565 2864 6576 6963 6529  yclQueue(device)
+0000dd80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000dd90: 2020 2079 5f64 6576 6963 6520 3d20 6672     y_device = fr
+0000dda0: 6f6d 5f6e 756d 7079 2859 2c20 7573 6d5f  om_numpy(Y, usm_
+0000ddb0: 7479 7065 3d27 6465 7669 6365 272c 2071  type='device', q
+0000ddc0: 7565 7565 3d64 7063 746c 2e53 7963 6c51  ueue=dpctl.SyclQ
+0000ddd0: 7565 7565 2864 6576 6963 6529 290d 0a20  ueue(device)).. 
+0000dde0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0000ddf0: 7420 4578 6365 7074 696f 6e3a 0d0a 2020  t Exception:..  
+0000de00: 2020 2020 2020 2020 2020 2020 2020 785f                x_
+0000de10: 6465 7669 6365 203d 2066 726f 6d5f 6e75  device = from_nu
+0000de20: 6d70 7928 582c 2075 736d 5f74 7970 653d  mpy(X, usm_type=
+0000de30: 2764 6576 6963 6527 2c20 6465 7669 6365  'device', device
+0000de40: 3d64 6576 6963 652c 2073 7963 6c5f 7175  =device, sycl_qu
+0000de50: 6575 653d 6470 6374 6c2e 5379 636c 5175  eue=dpctl.SyclQu
+0000de60: 6575 6528 6465 7669 6365 2929 0d0a 2020  eue(device))..  
+0000de70: 2020 2020 2020 2020 2020 2020 2020 795f                y_
+0000de80: 6465 7669 6365 203d 2066 726f 6d5f 6e75  device = from_nu
+0000de90: 6d70 7928 592c 2075 736d 5f74 7970 653d  mpy(Y, usm_type=
+0000dea0: 2764 6576 6963 6527 2c20 6465 7669 6365  'device', device
+0000deb0: 3d64 6576 6963 652c 2073 7963 6c5f 7175  =device, sycl_qu
+0000dec0: 6575 653d 6470 6374 6c2e 5379 636c 5175  eue=dpctl.SyclQu
+0000ded0: 6575 6528 6465 7669 6365 2929 0d0a 2020  eue(device))..  
+0000dee0: 2020 2020 2020 2020 2020 7573 655f 6465            use_de
+0000def0: 7669 6365 203d 2054 7275 650d 0a20 2020  vice = True..   
+0000df00: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+0000df10: 7074 696f 6e3a 0d0a 2020 2020 2020 2020  ption:..        
+0000df20: 2020 2020 785f 6465 7669 6365 203d 2058      x_device = X
+0000df30: 0d0a 2020 2020 2020 2020 2020 2020 795f  ..            y_
+0000df40: 6465 7669 6365 203d 2059 0d0a 2020 2020  device = Y..    
+0000df50: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+0000df60: 2073 656c 662e 6d6f 6465 6c20 3d20 7365   self.model = se
+0000df70: 6c66 2e6d 6f64 656c 2e66 6974 2873 656c  lf.model.fit(sel
+0000df80: 662e 582c 2073 656c 662e 5929 0d0a 0d0a  f.X, self.Y)....
+0000df90: 2020 2020 2020 2020 7365 6c66 2e66 6974          self.fit
+0000dfa0: 5f72 756e 7469 6d65 203d 2064 6174 6574  _runtime = datet
+0000dfb0: 696d 652e 6461 7465 7469 6d65 2e6e 6f77  ime.datetime.now
+0000dfc0: 2829 202d 2073 656c 662e 7374 6172 7454  () - self.startT
+0000dfd0: 696d 650d 0a20 2020 2020 2020 2072 6574  ime..        ret
+0000dfe0: 7572 6e20 7365 6c66 0d0a 0d0a 2020 2020  urn self....    
+0000dff0: 6465 6620 7072 6564 6963 7428 0d0a 2020  def predict(..  
+0000e000: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+0000e010: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+0000e020: 6e67 7468 3a20 696e 742c 0d0a 2020 2020  ngth: int,..    
+0000e030: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
+0000e040: 7373 6f72 3d4e 6f6e 652c 0d0a 2020 2020  ssor=None,..    
+0000e050: 2020 2020 6a75 7374 5f70 6f69 6e74 5f66      just_point_f
+0000e060: 6f72 6563 6173 743a 2062 6f6f 6c20 3d20  orecast: bool = 
+0000e070: 4661 6c73 652c 0d0a 2020 2020 293a 0d0a  False,..    ):..
+0000e080: 2020 2020 2020 2020 2222 2247 656e 6572          """Gener
+0000e090: 6174 6520 666f 7265 6361 7374 2064 6174  ate forecast dat
+0000e0a0: 6120 696d 6d65 6469 6174 656c 7920 666f  a immediately fo
+0000e0b0: 6c6c 6f77 696e 6720 6461 7465 7320 6f66  llowing dates of
+0000e0c0: 2069 6e64 6578 2073 7570 706c 6965 6420   index supplied 
+0000e0d0: 746f 202e 6669 7428 292e 0d0a 0d0a 2020  to .fit().....  
+0000e0e0: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+0000e0f0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+0000e100: 745f 6c65 6e67 7468 2028 696e 7429 3a20  t_length (int): 
+0000e110: 4e75 6d62 6572 206f 6620 7065 7269 6f64  Number of period
+0000e120: 7320 6f66 2064 6174 6120 746f 2066 6f72  s of data to for
+0000e130: 6563 6173 7420 6168 6561 640d 0a20 2020  ecast ahead..   
+0000e140: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+0000e150: 6f72 2028 6e75 6d70 792e 4172 7261 7929  or (numpy.Array)
+0000e160: 3a20 6164 6469 7469 6f6e 616c 2072 6567  : additional reg
+0000e170: 7265 7373 6f72 0d0a 2020 2020 2020 2020  ressor..        
+0000e180: 2020 2020 6a75 7374 5f70 6f69 6e74 5f66      just_point_f
+0000e190: 6f72 6563 6173 7420 2862 6f6f 6c29 3a20  orecast (bool): 
+0000e1a0: 4966 2054 7275 652c 2072 6574 7572 6e20  If True, return 
+0000e1b0: 6120 7061 6e64 6173 2e44 6174 6146 7261  a pandas.DataFra
+0000e1c0: 6d65 206f 6620 6a75 7374 2070 6f69 6e74  me of just point
+0000e1d0: 2066 6f72 6563 6173 7473 0d0a 0d0a 2020   forecasts....  
+0000e1e0: 2020 2020 2020 5265 7475 726e 733a 0d0a        Returns:..
+0000e1f0: 2020 2020 2020 2020 2020 2020 4569 7468              Eith
+0000e200: 6572 2061 2050 7265 6469 6374 696f 6e4f  er a PredictionO
+0000e210: 626a 6563 7420 6f66 2066 6f72 6563 6173  bject of forecas
+0000e220: 7473 2061 6e64 206d 6574 6164 6174 612c  ts and metadata,
+0000e230: 206f 720d 0a20 2020 2020 2020 2020 2020   or..           
+0000e240: 2069 6620 6a75 7374 5f70 6f69 6e74 5f66   if just_point_f
+0000e250: 6f72 6563 6173 7420 3d3d 2054 7275 652c  orecast == True,
+0000e260: 2061 2064 6174 6166 7261 6d65 206f 6620   a dataframe of 
+0000e270: 706f 696e 7420 666f 7265 6361 7374 730d  point forecasts.
+0000e280: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+0000e290: 2020 2020 2020 7072 6564 6963 7453 7461        predictSta
+0000e2a0: 7274 5469 6d65 203d 2064 6174 6574 696d  rtTime = datetim
+0000e2b0: 652e 6461 7465 7469 6d65 2e6e 6f77 2829  e.datetime.now()
+0000e2c0: 0d0a 2020 2020 2020 2020 696e 6465 7820  ..        index 
+0000e2d0: 3d20 7365 6c66 2e63 7265 6174 655f 666f  = self.create_fo
+0000e2e0: 7265 6361 7374 5f69 6e64 6578 2866 6f72  recast_index(for
+0000e2f0: 6563 6173 745f 6c65 6e67 7468 3d66 6f72  ecast_length=for
+0000e300: 6563 6173 745f 6c65 6e67 7468 290d 0a20  ecast_length).. 
+0000e310: 2020 2020 2020 2069 6620 7365 6c66 2e72         if self.r
+0000e320: 6567 7265 7373 696f 6e5f 7479 7065 2069  egression_type i
+0000e330: 6e20 5b27 5573 6572 272c 2027 7573 6572  n ['User', 'user
+0000e340: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+0000e350: 2063 6f6d 706c 6574 655f 7265 6772 6573   complete_regres
+0000e360: 736f 7220 3d20 7064 2e63 6f6e 6361 7428  sor = pd.concat(
+0000e370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e380: 2020 5b73 656c 662e 7265 6772 6573 736f    [self.regresso
+0000e390: 725f 7472 6169 6e2c 2066 7574 7572 655f  r_train, future_
+0000e3a0: 7265 6772 6573 736f 725d 2c20 6178 6973  regressor], axis
+0000e3b0: 3d30 0d0a 2020 2020 2020 2020 2020 2020  =0..            
+0000e3c0: 290d 0a0d 0a20 2020 2020 2020 2063 6f6d  )....        com
+0000e3d0: 6269 6e65 645f 696e 6465 7820 3d20 7365  bined_index = se
+0000e3e0: 6c66 2e64 665f 7472 6169 6e2e 696e 6465  lf.df_train.inde
+0000e3f0: 782e 6170 7065 6e64 2869 6e64 6578 290d  x.append(index).
+0000e400: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
+0000e410: 7420 3d20 7064 2e44 6174 6146 7261 6d65  t = pd.DataFrame
+0000e420: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0000e430: 2e73 6b74 7261 696e 6461 7461 2e63 6f6c  .sktraindata.col
+0000e440: 756d 6e73 203d 205b 7820 666f 7220 7820  umns = [x for x 
+0000e450: 696e 2072 616e 6765 286c 656e 2873 656c  in range(len(sel
+0000e460: 662e 736b 7472 6169 6e64 6174 612e 636f  f.sktraindata.co
+0000e470: 6c75 6d6e 7329 295d 0d0a 0d0a 2020 2020  lumns))]....    
+0000e480: 2020 2020 2320 666f 7265 6361 7374 2c20      # forecast, 
+0000e490: 3120 7374 6570 2061 6865 6164 2c20 7468  1 step ahead, th
+0000e4a0: 656e 2061 6e6f 7468 6572 2c20 616e 6420  en another, and 
+0000e4b0: 736f 206f 6e0d 0a20 2020 2020 2020 2066  so on..        f
+0000e4c0: 6f72 2078 2069 6e20 7261 6e67 6528 666f  or x in range(fo
+0000e4d0: 7265 6361 7374 5f6c 656e 6774 6829 3a0d  recast_length):.
+0000e4e0: 0a20 2020 2020 2020 2020 2020 2078 5f64  .            x_d
+0000e4f0: 6174 203d 2072 6f6c 6c69 6e67 5f78 5f72  at = rolling_x_r
+0000e500: 6567 7265 7373 6f72 280d 0a20 2020 2020  egressor(..     
+0000e510: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000e520: 736b 7472 6169 6e64 6174 612c 0d0a 2020  sktraindata,..  
+0000e530: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+0000e540: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
+0000e550: 6473 3d73 656c 662e 6d65 616e 5f72 6f6c  ds=self.mean_rol
+0000e560: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+0000e570: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000e580: 6163 645f 7065 7269 6f64 733d 7365 6c66  acd_periods=self
+0000e590: 2e6d 6163 645f 7065 7269 6f64 732c 0d0a  .macd_periods,..
+0000e5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e5b0: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
+0000e5c0: 6f64 733d 7365 6c66 2e73 7464 5f72 6f6c  ods=self.std_rol
+0000e5d0: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+0000e5e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000e5f0: 6178 5f72 6f6c 6c69 6e67 5f70 6572 696f  ax_rolling_perio
+0000e600: 6473 3d73 656c 662e 6d61 785f 726f 6c6c  ds=self.max_roll
+0000e610: 696e 675f 7065 7269 6f64 732c 0d0a 2020  ing_periods,..  
+0000e620: 2020 2020 2020 2020 2020 2020 2020 6d69                mi
+0000e630: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0000e640: 733d 7365 6c66 2e6d 696e 5f72 6f6c 6c69  s=self.min_rolli
+0000e650: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+0000e660: 2020 2020 2020 2020 2020 2020 2065 776d               ewm
+0000e670: 5f76 6172 5f61 6c70 6861 3d73 656c 662e  _var_alpha=self.
+0000e680: 6577 6d5f 7661 725f 616c 7068 612c 0d0a  ewm_var_alpha,..
+0000e690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e6a0: 7175 616e 7469 6c65 3930 5f72 6f6c 6c69  quantile90_rolli
+0000e6b0: 6e67 5f70 6572 696f 6473 3d73 656c 662e  ng_periods=self.
+0000e6c0: 7175 616e 7469 6c65 3930 5f72 6f6c 6c69  quantile90_rolli
+0000e6d0: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+0000e6e0: 2020 2020 2020 2020 2020 2020 2071 7561               qua
+0000e6f0: 6e74 696c 6531 305f 726f 6c6c 696e 675f  ntile10_rolling_
+0000e700: 7065 7269 6f64 733d 7365 6c66 2e71 7561  periods=self.qua
+0000e710: 6e74 696c 6531 305f 726f 6c6c 696e 675f  ntile10_rolling_
+0000e720: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
+0000e730: 2020 2020 2020 2020 2020 6164 6469 7469            additi
+0000e740: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
+0000e750: 3d73 656c 662e 6164 6469 7469 6f6e 616c  =self.additional
+0000e760: 5f6c 6167 5f70 6572 696f 6473 2c0d 0a20  _lag_periods,.. 
+0000e770: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000e780: 776d 5f61 6c70 6861 3d73 656c 662e 6577  wm_alpha=self.ew
+0000e790: 6d5f 616c 7068 612c 0d0a 2020 2020 2020  m_alpha,..      
+0000e7a0: 2020 2020 2020 2020 2020 6162 735f 656e            abs_en
+0000e7b0: 6572 6779 3d73 656c 662e 6162 735f 656e  ergy=self.abs_en
+0000e7c0: 6572 6779 2c0d 0a20 2020 2020 2020 2020  ergy,..         
+0000e7d0: 2020 2020 2020 2072 6f6c 6c69 6e67 5f61         rolling_a
+0000e7e0: 7574 6f63 6f72 725f 7065 7269 6f64 733d  utocorr_periods=
+0000e7f0: 7365 6c66 2e72 6f6c 6c69 6e67 5f61 7574  self.rolling_aut
+0000e800: 6f63 6f72 725f 7065 7269 6f64 732c 0d0a  ocorr_periods,..
+0000e810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e820: 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e 3d73  nonzero_last_n=s
+0000e830: 656c 662e 6e6f 6e7a 6572 6f5f 6c61 7374  elf.nonzero_last
+0000e840: 5f6e 2c0d 0a20 2020 2020 2020 2020 2020  _n,..           
+0000e850: 2020 2020 2061 6464 5f64 6174 655f 7061       add_date_pa
+0000e860: 7274 3d73 656c 662e 6164 645f 6461 7465  rt=self.add_date
+0000e870: 5f70 6172 742c 0d0a 2020 2020 2020 2020  _part,..        
+0000e880: 2020 2020 2020 2020 686f 6c69 6461 793d          holiday=
+0000e890: 7365 6c66 2e68 6f6c 6964 6179 2c0d 0a20  self.holiday,.. 
+0000e8a0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+0000e8b0: 6f6c 6964 6179 5f63 6f75 6e74 7279 3d73  oliday_country=s
+0000e8c0: 656c 662e 686f 6c69 6461 795f 636f 756e  elf.holiday_coun
+0000e8d0: 7472 792c 0d0a 2020 2020 2020 2020 2020  try,..          
+0000e8e0: 2020 2020 2020 706f 6c79 6e6f 6d69 616c        polynomial
+0000e8f0: 5f64 6567 7265 653d 7365 6c66 2e70 6f6c  _degree=self.pol
+0000e900: 796e 6f6d 6961 6c5f 6465 6772 6565 2c0d  ynomial_degree,.
+0000e910: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+0000e920: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0000e930: 656c 662e 7265 6772 6573 7369 6f6e 5f74  elf.regression_t
+0000e940: 7970 6520 3d3d 2027 5573 6572 273a 0d0a  ype == 'User':..
+0000e950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e960: 785f 6461 7420 3d20 7064 2e63 6f6e 6361  x_dat = pd.conca
+0000e970: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+0000e980: 2020 2020 2020 2020 5b78 5f64 6174 2c20          [x_dat, 
+0000e990: 636f 6d70 6c65 7465 5f72 6567 7265 7373  complete_regress
+0000e9a0: 6f72 2e68 6561 6428 785f 6461 742e 7368  or.head(x_dat.sh
+0000e9b0: 6170 655b 305d 295d 2c20 6178 6973 3d31  ape[0])], axis=1
+0000e9c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e9d0: 2020 292e 6669 6c6c 6e61 2830 290d 0a20    ).fillna(0).. 
+0000e9e0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0000e9f0: 6c66 2e78 5f74 7261 6e73 666f 726d 2069  lf.x_transform i
+0000ea00: 6e20 5b27 4661 7374 4943 4127 2c20 274e  n ['FastICA', 'N
+0000ea10: 7973 7472 6f65 6d27 2c20 2752 6d5a 6572  ystroem', 'RmZer
+0000ea20: 6f56 6172 6961 6e63 6527 5d3a 0d0a 2020  oVariance']:..  
+0000ea30: 2020 2020 2020 2020 2020 2020 2020 785f                x_
+0000ea40: 6461 7420 3d20 7064 2e44 6174 6146 7261  dat = pd.DataFra
+0000ea50: 6d65 2873 656c 662e 785f 7472 616e 7366  me(self.x_transf
+0000ea60: 6f72 6d65 722e 7472 616e 7366 6f72 6d28  ormer.transform(
+0000ea70: 785f 6461 7429 290d 0a20 2020 2020 2020  x_dat))..       
+0000ea80: 2020 2020 2020 2020 2078 5f64 6174 203d           x_dat =
+0000ea90: 2078 5f64 6174 2e72 6570 6c61 6365 285b   x_dat.replace([
+0000eaa0: 6e70 2e69 6e66 2c20 2d6e 702e 696e 665d  np.inf, -np.inf]
+0000eab0: 2c20 3029 2e66 696c 6c6e 6128 3029 0d0a  , 0).fillna(0)..
+0000eac0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000ead0: 7369 6e73 7461 6e63 6528 785f 6461 742c  sinstance(x_dat,
+0000eae0: 2070 642e 4461 7461 4672 616d 6529 3a0d   pd.DataFrame):.
+0000eaf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000eb00: 2078 5f64 6174 2e63 6f6c 756d 6e73 203d   x_dat.columns =
+0000eb10: 205b 7374 7228 7863 2920 666f 7220 7863   [str(xc) for xc
+0000eb20: 2069 6e20 785f 6461 742e 636f 6c75 6d6e   in x_dat.column
+0000eb30: 735d 0d0a 0d0a 2020 2020 2020 2020 2020  s]....          
+0000eb40: 2020 7266 5072 6564 203d 2070 642e 4461    rfPred = pd.Da
+0000eb50: 7461 4672 616d 6528 7365 6c66 2e6d 6f64  taFrame(self.mod
+0000eb60: 656c 2e70 7265 6469 6374 2878 5f64 6174  el.predict(x_dat
+0000eb70: 2e74 6169 6c28 3129 2e74 6f5f 6e75 6d70  .tail(1).to_nump
+0000eb80: 7928 2929 290d 0a0d 0a20 2020 2020 2020  y()))....       
+0000eb90: 2020 2020 2066 6f72 6563 6173 7420 3d20       forecast = 
+0000eba0: 7064 2e63 6f6e 6361 7428 5b66 6f72 6563  pd.concat([forec
+0000ebb0: 6173 742c 2072 6650 7265 645d 2c20 6178  ast, rfPred], ax
+0000ebc0: 6973 3d30 2c20 6967 6e6f 7265 5f69 6e64  is=0, ignore_ind
+0000ebd0: 6578 3d54 7275 6529 0d0a 2020 2020 2020  ex=True)..      
+0000ebe0: 2020 2020 2020 7365 6c66 2e73 6b74 7261        self.sktra
+0000ebf0: 696e 6461 7461 203d 2070 642e 636f 6e63  indata = pd.conc
+0000ec00: 6174 280d 0a20 2020 2020 2020 2020 2020  at(..           
+0000ec10: 2020 2020 205b 7365 6c66 2e73 6b74 7261       [self.sktra
+0000ec20: 696e 6461 7461 2c20 7266 5072 6564 5d2c  indata, rfPred],
+0000ec30: 2061 7869 733d 302c 2069 676e 6f72 655f   axis=0, ignore_
+0000ec40: 696e 6465 783d 5472 7565 0d0a 2020 2020  index=True..    
+0000ec50: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+0000ec60: 2020 2020 2020 2073 656c 662e 736b 7472         self.sktr
+0000ec70: 6169 6e64 6174 612e 696e 6465 7820 3d20  aindata.index = 
+0000ec80: 636f 6d62 696e 6564 5f69 6e64 6578 5b3a  combined_index[:
+0000ec90: 206c 656e 2873 656c 662e 736b 7472 6169   len(self.sktrai
+0000eca0: 6e64 6174 612e 696e 6465 7829 5d0d 0a0d  ndata.index)]...
+0000ecb0: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
+0000ecc0: 742e 636f 6c75 6d6e 7320 3d20 7365 6c66  t.columns = self
+0000ecd0: 2e63 6f6c 756d 6e5f 6e61 6d65 730d 0a20  .column_names.. 
+0000ece0: 2020 2020 2020 2066 6f72 6563 6173 742e         forecast.
+0000ecf0: 696e 6465 7820 3d20 696e 6465 780d 0a0d  index = index...
+0000ed00: 0a20 2020 2020 2020 2069 6620 6a75 7374  .        if just
+0000ed10: 5f70 6f69 6e74 5f66 6f72 6563 6173 743a  _point_forecast:
+0000ed20: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000ed30: 7475 726e 2066 6f72 6563 6173 740d 0a20  turn forecast.. 
+0000ed40: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0000ed50: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
+0000ed60: 666f 7265 6361 7374 2c20 6c6f 7765 725f  forecast, lower_
+0000ed70: 666f 7265 6361 7374 203d 2050 6f69 6e74  forecast = Point
+0000ed80: 5f74 6f5f 5072 6f62 6162 696c 6974 7928  _to_Probability(
+0000ed90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000eda0: 2020 7365 6c66 2e64 665f 7472 6169 6e2c    self.df_train,
+0000edb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000edc0: 2020 666f 7265 6361 7374 2c0d 0a20 2020    forecast,..   
+0000edd0: 2020 2020 2020 2020 2020 2020 206d 6574               met
+0000ede0: 686f 643d 2769 6e66 6572 7265 645f 6e6f  hod='inferred_no
+0000edf0: 726d 616c 272c 0d0a 2020 2020 2020 2020  rmal',..        
+0000ee00: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
+0000ee10: 6f6e 5f69 6e74 6572 7661 6c3d 7365 6c66  on_interval=self
+0000ee20: 2e70 7265 6469 6374 696f 6e5f 696e 7465  .prediction_inte
+0000ee30: 7276 616c 2c0d 0a20 2020 2020 2020 2020  rval,..         
+0000ee40: 2020 2029 0d0a 0d0a 2020 2020 2020 2020     )....        
+0000ee50: 2020 2020 7072 6564 6963 745f 7275 6e74      predict_runt
+0000ee60: 696d 6520 3d20 6461 7465 7469 6d65 2e64  ime = datetime.d
+0000ee70: 6174 6574 696d 652e 6e6f 7728 2920 2d20  atetime.now() - 
+0000ee80: 7072 6564 6963 7453 7461 7274 5469 6d65  predictStartTime
+0000ee90: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+0000eea0: 6564 6963 7469 6f6e 203d 2050 7265 6469  ediction = Predi
+0000eeb0: 6374 696f 6e4f 626a 6563 7428 0d0a 2020  ctionObject(..  
+0000eec0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+0000eed0: 6465 6c5f 6e61 6d65 3d73 656c 662e 6e61  del_name=self.na
+0000eee0: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
+0000eef0: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+0000ef00: 6e67 7468 3d66 6f72 6563 6173 745f 6c65  ngth=forecast_le
+0000ef10: 6e67 7468 2c0d 0a20 2020 2020 2020 2020  ngth,..         
+0000ef20: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
+0000ef30: 696e 6465 783d 666f 7265 6361 7374 2e69  index=forecast.i
+0000ef40: 6e64 6578 2c0d 0a20 2020 2020 2020 2020  ndex,..         
+0000ef50: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
+0000ef60: 636f 6c75 6d6e 733d 666f 7265 6361 7374  columns=forecast
+0000ef70: 2e63 6f6c 756d 6e73 2c0d 0a20 2020 2020  .columns,..     
+0000ef80: 2020 2020 2020 2020 2020 206c 6f77 6572             lower
+0000ef90: 5f66 6f72 6563 6173 743d 6c6f 7765 725f  _forecast=lower_
+0000efa0: 666f 7265 6361 7374 2c0d 0a20 2020 2020  forecast,..     
+0000efb0: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
+0000efc0: 6173 743d 666f 7265 6361 7374 2c0d 0a20  ast=forecast,.. 
+0000efd0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0000efe0: 7070 6572 5f66 6f72 6563 6173 743d 7570  pper_forecast=up
+0000eff0: 7065 725f 666f 7265 6361 7374 2c0d 0a20  per_forecast,.. 
+0000f000: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000f010: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+0000f020: 616c 3d73 656c 662e 7072 6564 6963 7469  al=self.predicti
+0000f030: 6f6e 5f69 6e74 6572 7661 6c2c 0d0a 2020  on_interval,..  
+0000f040: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000f050: 6564 6963 745f 7275 6e74 696d 653d 7072  edict_runtime=pr
+0000f060: 6564 6963 745f 7275 6e74 696d 652c 0d0a  edict_runtime,..
+0000f070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f080: 6669 745f 7275 6e74 696d 653d 7365 6c66  fit_runtime=self
+0000f090: 2e66 6974 5f72 756e 7469 6d65 2c0d 0a20  .fit_runtime,.. 
+0000f0a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000f0b0: 6f64 656c 5f70 6172 616d 6574 6572 733d  odel_parameters=
+0000f0c0: 7365 6c66 2e67 6574 5f70 6172 616d 7328  self.get_params(
+0000f0d0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+0000f0e0: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+0000f0f0: 6574 7572 6e20 7072 6564 6963 7469 6f6e  eturn prediction
+0000f100: 0d0a 0d0a 2020 2020 6465 6620 6765 745f  ....    def get_
+0000f110: 6e65 775f 7061 7261 6d73 2873 656c 662c  new_params(self,
+0000f120: 206d 6574 686f 643a 2073 7472 203d 2027   method: str = '
+0000f130: 7261 6e64 6f6d 2729 3a0d 0a20 2020 2020  random'):..     
+0000f140: 2020 2022 2222 5265 7475 726e 2064 6963     """Return dic
+0000f150: 7420 6f66 206e 6577 2070 6172 616d 6574  t of new paramet
+0000f160: 6572 7320 666f 7220 7061 7261 6d65 7465  ers for paramete
+0000f170: 7220 7475 6e69 6e67 2e22 2222 0d0a 2020  r tuning."""..  
+0000f180: 2020 2020 2020 726f 6c6c 696e 675f 6d6f        rolling_mo
+0000f190: 6465 6c5f 6469 6374 203d 2073 6b6c 6561  del_dict = sklea
+0000f1a0: 726e 5f6d 6f64 656c 5f64 6963 742e 636f  rn_model_dict.co
+0000f1b0: 7079 2829 0d0a 2020 2020 2020 2020 6465  py()..        de
+0000f1c0: 6c20 726f 6c6c 696e 675f 6d6f 6465 6c5f  l rolling_model_
+0000f1d0: 6469 6374 5b27 4b4e 4e27 5d0d 0a20 2020  dict['KNN']..   
+0000f1e0: 2020 2020 206d 6f64 656c 5f63 686f 6963       model_choic
+0000f1f0: 6520 3d20 6765 6e65 7261 7465 5f72 6567  e = generate_reg
+0000f200: 7265 7373 6f72 5f70 6172 616d 7328 6d6f  ressor_params(mo
+0000f210: 6465 6c5f 6469 6374 3d72 6f6c 6c69 6e67  del_dict=rolling
+0000f220: 5f6d 6f64 656c 5f64 6963 7429 0d0a 2020  _model_dict)..  
+0000f230: 2020 2020 2020 6d65 616e 5f72 6f6c 6c69        mean_rolli
+0000f240: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+0000f250: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
+0000f260: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+0000f270: 205b 4e6f 6e65 2c20 352c 2037 2c20 3132   [None, 5, 7, 12
+0000f280: 2c20 3330 5d2c 205b 302e 322c 2030 2e32  , 30], [0.2, 0.2
+0000f290: 2c20 302e 322c 2030 2e32 2c20 302e 325d  , 0.2, 0.2, 0.2]
+0000f2a0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+0000f2b0: 2020 2020 2020 2020 6966 206d 6561 6e5f          if mean_
+0000f2c0: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
+0000f2d0: 6368 6f69 6365 2069 7320 6e6f 7420 4e6f  choice is not No
+0000f2e0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+0000f2f0: 206d 6163 645f 7065 7269 6f64 735f 6368   macd_periods_ch
+0000f300: 6f69 6365 203d 2073 6561 736f 6e61 6c5f  oice = seasonal_
+0000f310: 696e 7428 290d 0a20 2020 2020 2020 2020  int()..         
+0000f320: 2020 2069 6620 6d61 6364 5f70 6572 696f     if macd_perio
+0000f330: 6473 5f63 686f 6963 6520 3d3d 206d 6561  ds_choice == mea
+0000f340: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0000f350: 735f 6368 6f69 6365 3a0d 0a20 2020 2020  s_choice:..     
+0000f360: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
+0000f370: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+0000f380: 206d 6561 6e5f 726f 6c6c 696e 675f 7065   mean_rolling_pe
+0000f390: 7269 6f64 735f 6368 6f69 6365 202b 2031  riods_choice + 1
+0000f3a0: 300d 0a20 2020 2020 2020 2065 6c73 653a  0..        else:
+0000f3b0: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+0000f3c0: 6364 5f70 6572 696f 6473 5f63 686f 6963  cd_periods_choic
+0000f3d0: 6520 3d20 4e6f 6e65 0d0a 2020 2020 2020  e = None..      
+0000f3e0: 2020 7374 645f 726f 6c6c 696e 675f 7065    std_rolling_pe
+0000f3f0: 7269 6f64 735f 6368 6f69 6365 203d 2072  riods_choice = r
+0000f400: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+0000f410: 2020 2020 2020 2020 2020 2020 5b4e 6f6e              [Non
+0000f420: 652c 2035 2c20 372c 2031 302c 2033 305d  e, 5, 7, 10, 30]
+0000f430: 2c20 5b30 2e36 2c20 302e 312c 2030 2e31  , [0.6, 0.1, 0.1
+0000f440: 2c20 302e 312c 2030 2e31 5d0d 0a20 2020  , 0.1, 0.1]..   
+0000f450: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
+0000f460: 2020 206d 6178 5f72 6f6c 6c69 6e67 5f70     max_rolling_p
+0000f470: 6572 696f 6473 5f63 686f 6963 6520 3d20  eriods_choice = 
+0000f480: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
+0000f490: 4e6f 6e65 2c20 7365 6173 6f6e 616c 5f69  None, seasonal_i
+0000f4a0: 6e74 2829 5d2c 205b 302e 352c 2030 2e35  nt()], [0.5, 0.5
+0000f4b0: 5d29 5b0d 0a20 2020 2020 2020 2020 2020  ])[..           
+0000f4c0: 2030 0d0a 2020 2020 2020 2020 5d0d 0a20   0..        ].. 
+0000f4d0: 2020 2020 2020 206d 696e 5f72 6f6c 6c69         min_rolli
+0000f4e0: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+0000f4f0: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
+0000f500: 6573 285b 4e6f 6e65 2c20 7365 6173 6f6e  es([None, season
+0000f510: 616c 5f69 6e74 2829 5d2c 205b 302e 352c  al_int()], [0.5,
+0000f520: 2030 2e35 5d29 5b0d 0a20 2020 2020 2020   0.5])[..       
+0000f530: 2020 2020 2030 0d0a 2020 2020 2020 2020       0..        
+0000f540: 5d0d 0a20 2020 2020 2020 206c 6167 5f70  ]..        lag_p
+0000f550: 6572 696f 6473 5f63 686f 6963 6520 3d20  eriods_choice = 
+0000f560: 7365 6173 6f6e 616c 5f69 6e74 2829 202d  seasonal_int() -
+0000f570: 2031 0d0a 2020 2020 2020 2020 6c61 675f   1..        lag_
+0000f580: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+0000f590: 2032 2069 6620 6c61 675f 7065 7269 6f64   2 if lag_period
+0000f5a0: 735f 6368 6f69 6365 203c 2032 2065 6c73  s_choice < 2 els
+0000f5b0: 6520 6c61 675f 7065 7269 6f64 735f 6368  e lag_periods_ch
+0000f5c0: 6f69 6365 0d0a 2020 2020 2020 2020 6577  oice..        ew
+0000f5d0: 6d5f 6368 6f69 6365 203d 2072 616e 646f  m_choice = rando
+0000f5e0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+0000f5f0: 2020 2020 2020 2020 5b4e 6f6e 652c 2030          [None, 0
+0000f600: 2e30 352c 2030 2e31 2c20 302e 322c 2030  .05, 0.1, 0.2, 0
+0000f610: 2e35 2c20 302e 385d 2c20 5b30 2e34 2c20  .5, 0.8], [0.4, 
+0000f620: 302e 3031 2c20 302e 3035 2c20 302e 312c  0.01, 0.05, 0.1,
+0000f630: 2030 2e31 2c20 302e 3035 5d0d 0a20 2020   0.1, 0.05]..   
+0000f640: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
+0000f650: 2020 2061 6273 5f65 6e65 7267 795f 6368     abs_energy_ch
+0000f660: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
+0000f670: 6f69 6365 7328 5b54 7275 652c 2046 616c  oices([True, Fal
+0000f680: 7365 5d2c 205b 302e 312c 2030 2e39 5d29  se], [0.1, 0.9])
+0000f690: 5b30 5d0d 0a20 2020 2020 2020 2072 6f6c  [0]..        rol
+0000f6a0: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
+0000f6b0: 7269 6f64 735f 6368 6f69 6365 203d 2072  riods_choice = r
+0000f6c0: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+0000f6d0: 2020 2020 2020 2020 2020 2020 5b4e 6f6e              [Non
+0000f6e0: 652c 2032 2c20 372c 2031 322c 2033 305d  e, 2, 7, 12, 30]
+0000f6f0: 2c20 5b30 2e38 2c20 302e 3035 2c20 302e  , [0.8, 0.05, 0.
+0000f700: 3035 2c20 302e 3035 2c20 302e 3035 5d0d  05, 0.05, 0.05].
+0000f710: 0a20 2020 2020 2020 2029 5b30 5d0d 0a20  .        )[0].. 
+0000f720: 2020 2020 2020 2061 6464 5f64 6174 655f         add_date_
+0000f730: 7061 7274 5f63 686f 6963 6520 3d20 7261  part_choice = ra
+0000f740: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+0000f750: 2020 2020 2020 2020 2020 205b 0d0a 2020             [..  
+0000f760: 2020 2020 2020 2020 2020 2020 2020 4e6f                No
+0000f770: 6e65 2c0d 0a20 2020 2020 2020 2020 2020  ne,..           
+0000f780: 2020 2020 2027 7369 6d70 6c65 272c 0d0a       'simple',..
+0000f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f7a0: 2765 7870 616e 6465 6427 2c0d 0a20 2020  'expanded',..   
+0000f7b0: 2020 2020 2020 2020 2020 2020 2027 7265               're
+0000f7c0: 6375 7272 696e 6727 2c0d 0a20 2020 2020  curring',..     
+0000f7d0: 2020 2020 2020 2020 2020 2022 7369 6d70             "simp
+0000f7e0: 6c65 5f32 222c 0d0a 2020 2020 2020 2020  le_2",..        
+0000f7f0: 2020 2020 2020 2020 2273 696d 706c 655f          "simple_
+0000f800: 6269 6e61 7269 7a65 6422 2c0d 0a20 2020  binarized",..   
+0000f810: 2020 2020 2020 2020 2020 2020 2022 6578               "ex
+0000f820: 7061 6e64 6564 5f62 696e 6172 697a 6564  panded_binarized
+0000f830: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+0000f840: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+0000f850: 5b30 2e37 2c20 302e 3035 2c20 302e 3035  [0.7, 0.05, 0.05
+0000f860: 2c20 302e 3035 2c20 302e 3035 2c20 302e  , 0.05, 0.05, 0.
+0000f870: 312c 2030 2e30 315d 2c0d 0a20 2020 2020  1, 0.01],..     
+0000f880: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
+0000f890: 2068 6f6c 6964 6179 5f63 686f 6963 6520   holiday_choice 
+0000f8a0: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
+0000f8b0: 285b 5472 7565 2c20 4661 6c73 655d 2c20  ([True, False], 
+0000f8c0: 5b30 2e32 2c20 302e 385d 295b 305d 0d0a  [0.2, 0.8])[0]..
+0000f8d0: 2020 2020 2020 2020 706f 6c79 6e6f 6d69          polynomi
+0000f8e0: 616c 5f64 6567 7265 655f 6368 6f69 6365  al_degree_choice
+0000f8f0: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+0000f900: 7328 5b4e 6f6e 652c 2032 5d2c 205b 302e  s([None, 2], [0.
+0000f910: 3939 2c20 302e 3031 5d29 5b30 5d0d 0a20  99, 0.01])[0].. 
+0000f920: 2020 2020 2020 2078 5f74 7261 6e73 666f         x_transfo
+0000f930: 726d 5f63 686f 6963 6520 3d20 7261 6e64  rm_choice = rand
+0000f940: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0000f950: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
+0000f960: 2746 6173 7449 4341 272c 2027 4e79 7374  'FastICA', 'Nyst
+0000f970: 726f 656d 272c 2027 526d 5a65 726f 5661  roem', 'RmZeroVa
+0000f980: 7269 616e 6365 275d 2c0d 0a20 2020 2020  riance'],..     
+0000f990: 2020 2020 2020 205b 302e 3835 2c20 302e         [0.85, 0.
+0000f9a0: 3035 2c20 302e 3035 2c20 302e 3035 5d2c  05, 0.05, 0.05],
+0000f9b0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+0000f9c0: 2020 2020 2020 2020 6966 2022 7265 6772          if "regr
+0000f9d0: 6573 736f 7222 2069 6e20 6d65 7468 6f64  essor" in method
+0000f9e0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+0000f9f0: 6567 7265 7373 696f 6e5f 6368 6f69 6365  egression_choice
+0000fa00: 203d 2022 5573 6572 220d 0a20 2020 2020   = "User"..     
+0000fa10: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+0000fa20: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
+0000fa30: 5f63 686f 6963 6520 3d20 7261 6e64 6f6d  _choice = random
+0000fa40: 2e63 686f 6963 6573 285b 4e6f 6e65 2c20  .choices([None, 
+0000fa50: 2755 7365 7227 5d2c 205b 302e 372c 2030  'User'], [0.7, 0
+0000fa60: 2e33 5d29 5b30 5d0d 0a20 2020 2020 2020  .3])[0]..       
+0000fa70: 2070 6172 616d 6574 6572 5f64 6963 7420   parameter_dict 
+0000fa80: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+0000fa90: 2027 7265 6772 6573 7369 6f6e 5f6d 6f64   'regression_mod
+0000faa0: 656c 273a 206d 6f64 656c 5f63 686f 6963  el': model_choic
+0000fab0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0000fac0: 2768 6f6c 6964 6179 273a 2068 6f6c 6964  'holiday': holid
+0000fad0: 6179 5f63 686f 6963 652c 0d0a 2020 2020  ay_choice,..    
+0000fae0: 2020 2020 2020 2020 276d 6561 6e5f 726f          'mean_ro
+0000faf0: 6c6c 696e 675f 7065 7269 6f64 7327 3a20  lling_periods': 
+0000fb00: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
+0000fb10: 696f 6473 5f63 686f 6963 652c 0d0a 2020  iods_choice,..  
+0000fb20: 2020 2020 2020 2020 2020 276d 6163 645f            'macd_
+0000fb30: 7065 7269 6f64 7327 3a20 6d61 6364 5f70  periods': macd_p
+0000fb40: 6572 696f 6473 5f63 686f 6963 652c 0d0a  eriods_choice,..
+0000fb50: 2020 2020 2020 2020 2020 2020 2773 7464              'std
+0000fb60: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0000fb70: 273a 2073 7464 5f72 6f6c 6c69 6e67 5f70  ': std_rolling_p
+0000fb80: 6572 696f 6473 5f63 686f 6963 652c 0d0a  eriods_choice,..
+0000fb90: 2020 2020 2020 2020 2020 2020 276d 6178              'max
+0000fba0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0000fbb0: 273a 206d 6178 5f72 6f6c 6c69 6e67 5f70  ': max_rolling_p
+0000fbc0: 6572 696f 6473 5f63 686f 6963 652c 0d0a  eriods_choice,..
+0000fbd0: 2020 2020 2020 2020 2020 2020 276d 696e              'min
+0000fbe0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0000fbf0: 273a 206d 696e 5f72 6f6c 6c69 6e67 5f70  ': min_rolling_p
+0000fc00: 6572 696f 6473 5f63 686f 6963 652c 0d0a  eriods_choice,..
+0000fc10: 2020 2020 2020 2020 2020 2020 2765 776d              'ewm
+0000fc20: 5f61 6c70 6861 273a 2065 776d 5f63 686f  _alpha': ewm_cho
+0000fc30: 6963 652c 0d0a 2020 2020 2020 2020 2020  ice,..          
+0000fc40: 2020 2761 6464 6974 696f 6e61 6c5f 6c61    'additional_la
+0000fc50: 675f 7065 7269 6f64 7327 3a20 6c61 675f  g_periods': lag_
+0000fc60: 7065 7269 6f64 735f 6368 6f69 6365 2c0d  periods_choice,.
+0000fc70: 0a20 2020 2020 2020 2020 2020 2027 6162  .            'ab
+0000fc80: 735f 656e 6572 6779 273a 2061 6273 5f65  s_energy': abs_e
+0000fc90: 6e65 7267 795f 6368 6f69 6365 2c0d 0a20  nergy_choice,.. 
+0000fca0: 2020 2020 2020 2020 2020 2027 726f 6c6c             'roll
+0000fcb0: 696e 675f 6175 746f 636f 7272 5f70 6572  ing_autocorr_per
+0000fcc0: 696f 6473 273a 2072 6f6c 6c69 6e67 5f61  iods': rolling_a
+0000fcd0: 7574 6f63 6f72 725f 7065 7269 6f64 735f  utocorr_periods_
+0000fce0: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+0000fcf0: 2020 2020 2027 6164 645f 6461 7465 5f70       'add_date_p
+0000fd00: 6172 7427 3a20 6164 645f 6461 7465 5f70  art': add_date_p
+0000fd10: 6172 745f 6368 6f69 6365 2c0d 0a20 2020  art_choice,..   
+0000fd20: 2020 2020 2020 2020 2027 706f 6c79 6e6f           'polyno
+0000fd30: 6d69 616c 5f64 6567 7265 6527 3a20 706f  mial_degree': po
+0000fd40: 6c79 6e6f 6d69 616c 5f64 6567 7265 655f  lynomial_degree_
+0000fd50: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+0000fd60: 2020 2020 2027 785f 7472 616e 7366 6f72       'x_transfor
+0000fd70: 6d27 3a20 785f 7472 616e 7366 6f72 6d5f  m': x_transform_
+0000fd80: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+0000fd90: 2020 2020 2027 7265 6772 6573 7369 6f6e       'regression
+0000fda0: 5f74 7970 6527 3a20 7265 6772 6573 7369  _type': regressi
+0000fdb0: 6f6e 5f63 686f 6963 652c 0d0a 2020 2020  on_choice,..    
+0000fdc0: 2020 2020 7d0d 0a20 2020 2020 2020 2072      }..        r
+0000fdd0: 6574 7572 6e20 7061 7261 6d65 7465 725f  eturn parameter_
+0000fde0: 6469 6374 0d0a 0d0a 2020 2020 6465 6620  dict....    def 
+0000fdf0: 6765 745f 7061 7261 6d73 2873 656c 6629  get_params(self)
+0000fe00: 3a0d 0a20 2020 2020 2020 2022 2222 5265  :..        """Re
+0000fe10: 7475 726e 2064 6963 7420 6f66 2063 7572  turn dict of cur
+0000fe20: 7265 6e74 2070 6172 616d 6574 6572 732e  rent parameters.
+0000fe30: 2222 220d 0a20 2020 2020 2020 2070 6172  """..        par
+0000fe40: 616d 6574 6572 5f64 6963 7420 3d20 7b0d  ameter_dict = {.
+0000fe50: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
+0000fe60: 6772 6573 7369 6f6e 5f6d 6f64 656c 273a  gression_model':
+0000fe70: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
+0000fe80: 5f6d 6f64 656c 2c0d 0a20 2020 2020 2020  _model,..       
+0000fe90: 2020 2020 2027 686f 6c69 6461 7927 3a20       'holiday': 
+0000fea0: 7365 6c66 2e68 6f6c 6964 6179 2c0d 0a20  self.holiday,.. 
+0000feb0: 2020 2020 2020 2020 2020 2027 6d65 616e             'mean
+0000fec0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0000fed0: 273a 2073 656c 662e 6d65 616e 5f72 6f6c  ': self.mean_rol
+0000fee0: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+0000fef0: 2020 2020 2020 2020 2020 2027 6d61 6364             'macd
+0000ff00: 5f70 6572 696f 6473 273a 2073 656c 662e  _periods': self.
+0000ff10: 6d61 6364 5f70 6572 696f 6473 2c0d 0a20  macd_periods,.. 
+0000ff20: 2020 2020 2020 2020 2020 2027 7374 645f             'std_
+0000ff30: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
+0000ff40: 3a20 7365 6c66 2e73 7464 5f72 6f6c 6c69  : self.std_rolli
+0000ff50: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+0000ff60: 2020 2020 2020 2020 2027 6d61 785f 726f           'max_ro
+0000ff70: 6c6c 696e 675f 7065 7269 6f64 7327 3a20  lling_periods': 
+0000ff80: 7365 6c66 2e6d 6178 5f72 6f6c 6c69 6e67  self.max_rolling
+0000ff90: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+0000ffa0: 2020 2020 2020 2027 6d69 6e5f 726f 6c6c         'min_roll
+0000ffb0: 696e 675f 7065 7269 6f64 7327 3a20 7365  ing_periods': se
+0000ffc0: 6c66 2e6d 696e 5f72 6f6c 6c69 6e67 5f70  lf.min_rolling_p
+0000ffd0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+0000ffe0: 2020 2020 2022 6577 6d5f 7661 725f 616c       "ewm_var_al
+0000fff0: 7068 6122 3a20 7365 6c66 2e65 776d 5f76  pha": self.ewm_v
+00010000: 6172 5f61 6c70 6861 2c0d 0a20 2020 2020  ar_alpha,..     
+00010010: 2020 2020 2020 2022 7175 616e 7469 6c65         "quantile
+00010020: 3930 5f72 6f6c 6c69 6e67 5f70 6572 696f  90_rolling_perio
+00010030: 6473 223a 2073 656c 662e 7175 616e 7469  ds": self.quanti
+00010040: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+00010050: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+00010060: 2020 2022 7175 616e 7469 6c65 3130 5f72     "quantile10_r
+00010070: 6f6c 6c69 6e67 5f70 6572 696f 6473 223a  olling_periods":
+00010080: 2073 656c 662e 7175 616e 7469 6c65 3130   self.quantile10
+00010090: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+000100a0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+000100b0: 6577 6d5f 616c 7068 6127 3a20 7365 6c66  ewm_alpha': self
+000100c0: 2e65 776d 5f61 6c70 6861 2c0d 0a20 2020  .ewm_alpha,..   
+000100d0: 2020 2020 2020 2020 2027 6164 6469 7469           'additi
+000100e0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
+000100f0: 273a 2073 656c 662e 6164 6469 7469 6f6e  ': self.addition
+00010100: 616c 5f6c 6167 5f70 6572 696f 6473 2c0d  al_lag_periods,.
+00010110: 0a20 2020 2020 2020 2020 2020 2027 6162  .            'ab
+00010120: 735f 656e 6572 6779 273a 2073 656c 662e  s_energy': self.
+00010130: 6162 735f 656e 6572 6779 2c0d 0a20 2020  abs_energy,..   
+00010140: 2020 2020 2020 2020 2027 726f 6c6c 696e           'rollin
+00010150: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+00010160: 6473 273a 2073 656c 662e 726f 6c6c 696e  ds': self.rollin
+00010170: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+00010180: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
+00010190: 2027 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e   'nonzero_last_n
+000101a0: 273a 2073 656c 662e 6e6f 6e7a 6572 6f5f  ': self.nonzero_
+000101b0: 6c61 7374 5f6e 2c0d 0a20 2020 2020 2020  last_n,..       
+000101c0: 2020 2020 2027 6164 645f 6461 7465 5f70       'add_date_p
+000101d0: 6172 7427 3a20 7365 6c66 2e61 6464 5f64  art': self.add_d
+000101e0: 6174 655f 7061 7274 2c0d 0a20 2020 2020  ate_part,..     
+000101f0: 2020 2020 2020 2027 706f 6c79 6e6f 6d69         'polynomi
+00010200: 616c 5f64 6567 7265 6527 3a20 7365 6c66  al_degree': self
+00010210: 2e70 6f6c 796e 6f6d 6961 6c5f 6465 6772  .polynomial_degr
+00010220: 6565 2c0d 0a20 2020 2020 2020 2020 2020  ee,..           
+00010230: 2027 785f 7472 616e 7366 6f72 6d27 3a20   'x_transform': 
+00010240: 7365 6c66 2e78 5f74 7261 6e73 666f 726d  self.x_transform
+00010250: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00010260: 7265 6772 6573 7369 6f6e 5f74 7970 6527  regression_type'
+00010270: 3a20 7365 6c66 2e72 6567 7265 7373 696f  : self.regressio
+00010280: 6e5f 7479 7065 2c0d 0a20 2020 2020 2020  n_type,..       
+00010290: 207d 0d0a 2020 2020 2020 2020 7265 7475   }..        retu
+000102a0: 726e 2070 6172 616d 6574 6572 5f64 6963  rn parameter_dic
+000102b0: 740d 0a0d 0a0d 0a63 6c61 7373 2057 696e  t......class Win
+000102c0: 646f 7752 6567 7265 7373 696f 6e28 4d6f  dowRegression(Mo
+000102d0: 6465 6c4f 626a 6563 7429 3a0d 0a20 2020  delObject):..   
+000102e0: 2022 2222 5265 6772 6573 7369 6f6e 2075   """Regression u
+000102f0: 7365 2074 6865 206c 6173 7420 6e20 7661  se the last n va
+00010300: 6c75 6573 2061 7320 7468 6520 6261 7369  lues as the basi
+00010310: 7320 6f66 2074 7261 696e 696e 6720 6461  s of training da
+00010320: 7461 2e0d 0a0d 0a20 2020 2041 7267 733a  ta.....    Args:
+00010330: 0d0a 2020 2020 2020 2020 6e61 6d65 2028  ..        name (
+00010340: 7374 7229 3a20 5374 7269 6e67 2074 6f20  str): String to 
+00010350: 6964 656e 7469 6679 2063 6c61 7373 0d0a  identify class..
+00010360: 2020 2020 2020 2020 6672 6571 7565 6e63          frequenc
+00010370: 7920 2873 7472 293a 2053 7472 696e 6720  y (str): String 
+00010380: 616c 6961 7320 6f66 2064 6174 6574 696d  alias of datetim
+00010390: 6520 696e 6465 7820 6672 6571 7565 6e63  e index frequenc
+000103a0: 7920 6f72 2065 6c73 6520 2769 6e66 6572  y or else 'infer
+000103b0: 270d 0a20 2020 2020 2020 2070 7265 6469  '..        predi
+000103c0: 6374 696f 6e5f 696e 7465 7276 616c 2028  ction_interval (
+000103d0: 666c 6f61 7429 3a20 436f 6e66 6964 656e  float): Confiden
+000103e0: 6365 2069 6e74 6572 7661 6c20 666f 7220  ce interval for 
+000103f0: 7072 6f62 6162 696c 6973 7469 6320 666f  probabilistic fo
+00010400: 7265 6361 7374 0d0a 2020 2020 2020 2020  recast..        
+00010410: 2320 7265 6772 6573 7369 6f6e 5f74 7970  # regression_typ
+00010420: 653a 2073 7472 203d 204e 6f6e 652c 0d0a  e: str = None,..
+00010430: 2020 2020 2222 220d 0a0d 0a20 2020 2064      """....    d
+00010440: 6566 205f 5f69 6e69 745f 5f28 0d0a 2020  ef __init__(..  
+00010450: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+00010460: 2020 2020 206e 616d 653a 2073 7472 203d       name: str =
+00010470: 2022 5769 6e64 6f77 5265 6772 6573 7369   "WindowRegressi
+00010480: 6f6e 222c 0d0a 2020 2020 2020 2020 6672  on",..        fr
+00010490: 6571 7565 6e63 793a 2073 7472 203d 2027  equency: str = '
+000104a0: 696e 6665 7227 2c0d 0a20 2020 2020 2020  infer',..       
+000104b0: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
+000104c0: 7276 616c 3a20 666c 6f61 7420 3d20 302e  rval: float = 0.
+000104d0: 392c 0d0a 2020 2020 2020 2020 686f 6c69  9,..        holi
+000104e0: 6461 795f 636f 756e 7472 793a 2073 7472  day_country: str
+000104f0: 203d 2027 5553 272c 0d0a 2020 2020 2020   = 'US',..      
+00010500: 2020 7261 6e64 6f6d 5f73 6565 643a 2069    random_seed: i
+00010510: 6e74 203d 2032 3032 322c 0d0a 2020 2020  nt = 2022,..    
+00010520: 2020 2020 7665 7262 6f73 653a 2069 6e74      verbose: int
+00010530: 203d 2030 2c0d 0a20 2020 2020 2020 2077   = 0,..        w
+00010540: 696e 646f 775f 7369 7a65 3a20 696e 7420  indow_size: int 
+00010550: 3d20 3130 2c0d 0a20 2020 2020 2020 2072  = 10,..        r
+00010560: 6567 7265 7373 696f 6e5f 6d6f 6465 6c3a  egression_model:
+00010570: 2064 6963 7420 3d20 7b0d 0a20 2020 2020   dict = {..     
+00010580: 2020 2020 2020 2022 6d6f 6465 6c22 3a20         "model": 
+00010590: 2752 616e 646f 6d46 6f72 6573 7427 2c0d  'RandomForest',.
+000105a0: 0a20 2020 2020 2020 2020 2020 2022 6d6f  .            "mo
+000105b0: 6465 6c5f 7061 7261 6d73 223a 207b 7d2c  del_params": {},
+000105c0: 0d0a 2020 2020 2020 2020 7d2c 0d0a 2020  ..        },..  
+000105d0: 2020 2020 2020 696e 7075 745f 6469 6d3a        input_dim:
+000105e0: 2073 7472 203d 2027 756e 6976 6172 6961   str = 'univaria
+000105f0: 7465 272c 0d0a 2020 2020 2020 2020 6f75  te',..        ou
+00010600: 7470 7574 5f64 696d 3a20 7374 7220 3d20  tput_dim: str = 
+00010610: 2766 6f72 6563 6173 745f 6c65 6e67 7468  'forecast_length
+00010620: 272c 0d0a 2020 2020 2020 2020 6e6f 726d  ',..        norm
+00010630: 616c 697a 655f 7769 6e64 6f77 3a20 626f  alize_window: bo
+00010640: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
+00010650: 2020 2020 2073 6875 6666 6c65 3a20 626f       shuffle: bo
+00010660: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
+00010670: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+00010680: 6e67 7468 3a20 696e 7420 3d20 312c 0d0a  ngth: int = 1,..
+00010690: 2020 2020 2020 2020 6d61 785f 7769 6e64          max_wind
+000106a0: 6f77 733a 2069 6e74 203d 2035 3030 302c  ows: int = 5000,
+000106b0: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
+000106c0: 7369 6f6e 5f74 7970 653a 2073 7472 203d  sion_type: str =
+000106d0: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
+000106e0: 6e5f 6a6f 6273 3a20 696e 7420 3d20 2d31  n_jobs: int = -1
+000106f0: 2c0d 0a20 2020 2020 2020 202a 2a6b 7761  ,..        **kwa
+00010700: 7267 732c 0d0a 2020 2020 293a 0d0a 2020  rgs,..    ):..  
+00010710: 2020 2020 2020 4d6f 6465 6c4f 626a 6563        ModelObjec
+00010720: 742e 5f5f 696e 6974 5f5f 280d 0a20 2020  t.__init__(..   
+00010730: 2020 2020 2020 2020 2073 656c 662c 0d0a           self,..
+00010740: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00010750: 2c0d 0a20 2020 2020 2020 2020 2020 2066  ,..            f
+00010760: 7265 7175 656e 6379 2c0d 0a20 2020 2020  requency,..     
+00010770: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+00010780: 6e5f 696e 7465 7276 616c 2c0d 0a20 2020  n_interval,..   
+00010790: 2020 2020 2020 2020 2068 6f6c 6964 6179           holiday
+000107a0: 5f63 6f75 6e74 7279 3d68 6f6c 6964 6179  _country=holiday
+000107b0: 5f63 6f75 6e74 7279 2c0d 0a20 2020 2020  _country,..     
+000107c0: 2020 2020 2020 2072 616e 646f 6d5f 7365         random_se
+000107d0: 6564 3d72 616e 646f 6d5f 7365 6564 2c0d  ed=random_seed,.
+000107e0: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+000107f0: 7265 7373 696f 6e5f 7479 7065 3d72 6567  ression_type=reg
+00010800: 7265 7373 696f 6e5f 7479 7065 2c0d 0a20  ression_type,.. 
+00010810: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
+00010820: 7365 3d76 6572 626f 7365 2c0d 0a20 2020  se=verbose,..   
+00010830: 2020 2020 2020 2020 206e 5f6a 6f62 733d           n_jobs=
+00010840: 6e5f 6a6f 6273 2c0d 0a20 2020 2020 2020  n_jobs,..       
+00010850: 2029 0d0a 2020 2020 2020 2020 7365 6c66   )..        self
+00010860: 2e77 696e 646f 775f 7369 7a65 203d 2061  .window_size = a
+00010870: 6273 2869 6e74 2877 696e 646f 775f 7369  bs(int(window_si
+00010880: 7a65 2929 0d0a 2020 2020 2020 2020 7365  ze))..        se
+00010890: 6c66 2e72 6567 7265 7373 696f 6e5f 6d6f  lf.regression_mo
+000108a0: 6465 6c20 3d20 7265 6772 6573 7369 6f6e  del = regression
+000108b0: 5f6d 6f64 656c 0d0a 2020 2020 2020 2020  _model..        
+000108c0: 7365 6c66 2e69 6e70 7574 5f64 696d 203d  self.input_dim =
+000108d0: 2069 6e70 7574 5f64 696d 0d0a 2020 2020   input_dim..    
+000108e0: 2020 2020 7365 6c66 2e6f 7574 7075 745f      self.output_
+000108f0: 6469 6d20 3d20 6f75 7470 7574 5f64 696d  dim = output_dim
+00010900: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
+00010910: 6f72 6d61 6c69 7a65 5f77 696e 646f 7720  ormalize_window 
+00010920: 3d20 6e6f 726d 616c 697a 655f 7769 6e64  = normalize_wind
+00010930: 6f77 0d0a 2020 2020 2020 2020 7365 6c66  ow..        self
+00010940: 2e73 6875 6666 6c65 203d 2073 6875 6666  .shuffle = shuff
+00010950: 6c65 0d0a 2020 2020 2020 2020 7365 6c66  le..        self
+00010960: 2e66 6f72 6563 6173 745f 6c65 6e67 7468  .forecast_length
+00010970: 203d 2066 6f72 6563 6173 745f 6c65 6e67   = forecast_leng
+00010980: 7468 0d0a 2020 2020 2020 2020 7365 6c66  th..        self
+00010990: 2e6d 6178 5f77 696e 646f 7773 203d 206d  .max_windows = m
+000109a0: 6178 5f77 696e 646f 7773 0d0a 2020 2020  ax_windows..    
+000109b0: 2020 2020 7365 6c66 2e73 7461 7469 635f      self.static_
+000109c0: 7265 6772 6573 736f 7220 3d20 4e6f 6e65  regressor = None
+000109d0: 0d0a 0d0a 2020 2020 6465 6620 6669 7428  ....    def fit(
+000109e0: 7365 6c66 2c20 6466 2c20 6675 7475 7265  self, df, future
+000109f0: 5f72 6567 7265 7373 6f72 3d4e 6f6e 652c  _regressor=None,
+00010a00: 2073 7461 7469 635f 7265 6772 6573 736f   static_regresso
+00010a10: 723d 4e6f 6e65 293a 0d0a 2020 2020 2020  r=None):..      
+00010a20: 2020 2222 2254 7261 696e 2061 6c67 6f72    """Train algor
+00010a30: 6974 686d 2067 6976 656e 2064 6174 6120  ithm given data 
+00010a40: 7375 7070 6c69 6564 2e0d 0a0d 0a20 2020  supplied.....   
+00010a50: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
+00010a60: 2020 2020 2020 2020 6466 2028 7061 6e64          df (pand
+00010a70: 6173 2e44 6174 6146 7261 6d65 293a 2044  as.DataFrame): D
+00010a80: 6174 6574 696d 6520 496e 6465 7865 640d  atetime Indexed.
+00010a90: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00010aa0: 2020 2020 2020 6966 2028 0d0a 2020 2020        if (..    
+00010ab0: 2020 2020 2020 2020 6466 2e73 6861 7065          df.shape
+00010ac0: 5b31 5d20 2a20 7365 6c66 2e66 6f72 6563  [1] * self.forec
+00010ad0: 6173 745f 6c65 6e67 7468 0d0a 2020 2020  ast_length..    
+00010ae0: 2020 2020 2920 3e20 3230 3020 616e 6420      ) > 200 and 
+00010af0: 7365 6c66 2e69 6e70 7574 5f64 696d 203d  self.input_dim =
+00010b00: 3d20 226d 756c 7469 7661 7269 6174 6522  = "multivariate"
+00010b10: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00010b20: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+00010b30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00010b40: 2020 2253 6361 6c65 2065 7863 6565 6473    "Scale exceeds
+00010b50: 2072 6563 6f6d 6d65 6e64 6174 696f 6e20   recommendation 
+00010b60: 666f 7220 696e 7075 745f 6469 6d20 3d3d  for input_dim ==
+00010b70: 2060 6d75 6c74 6976 6172 6961 7465 6022   `multivariate`"
+00010b80: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00010b90: 0a20 2020 2020 2020 2064 6620 3d20 7365  .        df = se
+00010ba0: 6c66 2e62 6173 6963 5f70 726f 6669 6c65  lf.basic_profile
+00010bb0: 2864 6629 0d0a 2020 2020 2020 2020 6966  (df)..        if
+00010bc0: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
+00010bd0: 5f74 7970 6520 696e 205b 2255 7365 7222  _type in ["User"
+00010be0: 2c20 2275 7365 7222 5d3a 0d0a 2020 2020  , "user"]:..    
+00010bf0: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
+00010c00: 655f 7265 6772 6573 736f 7220 6973 204e  e_regressor is N
+00010c10: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00010c20: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00010c30: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
+00010c40: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+00010c50: 6772 6573 7369 6f6e 5f74 7970 653d 2755  gression_type='U
+00010c60: 7365 7227 2062 7574 206e 6f20 6675 7475  ser' but no futu
+00010c70: 7265 5f72 6567 7265 7373 6f72 2070 6173  re_regressor pas
+00010c80: 7365 6422 0d0a 2020 2020 2020 2020 2020  sed"..          
+00010c90: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00010ca0: 2020 2020 2073 656c 662e 7374 6174 6963       self.static
+00010cb0: 5f72 6567 7265 7373 6f72 203d 2073 7461  _regressor = sta
+00010cc0: 7469 635f 7265 6772 6573 736f 720d 0a20  tic_regressor.. 
+00010cd0: 2020 2020 2020 2073 656c 662e 6466 5f74         self.df_t
+00010ce0: 7261 696e 203d 2064 660d 0a20 2020 2020  rain = df..     
+00010cf0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00010d00: 2866 7574 7572 655f 7265 6772 6573 736f  (future_regresso
+00010d10: 722c 2070 642e 5365 7269 6573 293a 0d0a  r, pd.Series):..
+00010d20: 2020 2020 2020 2020 2020 2020 6675 7475              futu
+00010d30: 7265 5f72 6567 7265 7373 6f72 203d 2066  re_regressor = f
+00010d40: 7574 7572 655f 7265 6772 6573 736f 722e  uture_regressor.
+00010d50: 746f 5f66 7261 6d65 2829 0d0a 2020 2020  to_frame()..    
+00010d60: 2020 2020 7365 6c66 2e58 2c20 7365 6c66      self.X, self
+00010d70: 2e59 203d 2077 696e 646f 775f 6d61 6b65  .Y = window_make
+00010d80: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+00010d90: 6466 2c0d 0a20 2020 2020 2020 2020 2020  df,..           
+00010da0: 2077 696e 646f 775f 7369 7a65 3d73 656c   window_size=sel
+00010db0: 662e 7769 6e64 6f77 5f73 697a 652c 0d0a  f.window_size,..
+00010dc0: 2020 2020 2020 2020 2020 2020 696e 7075              inpu
+00010dd0: 745f 6469 6d3d 7365 6c66 2e69 6e70 7574  t_dim=self.input
+00010de0: 5f64 696d 2c0d 0a20 2020 2020 2020 2020  _dim,..         
+00010df0: 2020 206e 6f72 6d61 6c69 7a65 5f77 696e     normalize_win
+00010e00: 646f 773d 7365 6c66 2e6e 6f72 6d61 6c69  dow=self.normali
+00010e10: 7a65 5f77 696e 646f 772c 0d0a 2020 2020  ze_window,..    
+00010e20: 2020 2020 2020 2020 7368 7566 666c 653d          shuffle=
+00010e30: 7365 6c66 2e73 6875 6666 6c65 2c0d 0a20  self.shuffle,.. 
+00010e40: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+00010e50: 745f 6469 6d3d 7365 6c66 2e6f 7574 7075  t_dim=self.outpu
+00010e60: 745f 6469 6d2c 0d0a 2020 2020 2020 2020  t_dim,..        
+00010e70: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
+00010e80: 6774 683d 7365 6c66 2e66 6f72 6563 6173  gth=self.forecas
+00010e90: 745f 6c65 6e67 7468 2c0d 0a20 2020 2020  t_length,..     
+00010ea0: 2020 2020 2020 206d 6178 5f77 696e 646f         max_windo
+00010eb0: 7773 3d73 656c 662e 6d61 785f 7769 6e64  ws=self.max_wind
+00010ec0: 6f77 732c 0d0a 2020 2020 2020 2020 2020  ows,..          
+00010ed0: 2020 7265 6772 6573 7369 6f6e 5f74 7970    regression_typ
+00010ee0: 653d 7365 6c66 2e72 6567 7265 7373 696f  e=self.regressio
+00010ef0: 6e5f 7479 7065 2c0d 0a20 2020 2020 2020  n_type,..       
+00010f00: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
+00010f10: 6573 736f 723d 6675 7475 7265 5f72 6567  essor=future_reg
+00010f20: 7265 7373 6f72 2c0d 0a20 2020 2020 2020  ressor,..       
+00010f30: 2020 2020 2072 616e 646f 6d5f 7365 6564       random_seed
+00010f40: 3d73 656c 662e 7261 6e64 6f6d 5f73 6565  =self.random_see
+00010f50: 642c 0d0a 2020 2020 2020 2020 290d 0a20  d,..        ).. 
+00010f60: 2020 2020 2020 206d 756c 7469 6f75 7470         multioutp
+00010f70: 7574 203d 2054 7275 650d 0a20 2020 2020  ut = True..     
+00010f80: 2020 2069 6620 7365 6c66 2e59 2e6e 6469     if self.Y.ndi
+00010f90: 6d20 3c20 323a 0d0a 2020 2020 2020 2020  m < 2:..        
+00010fa0: 2020 2020 6d75 6c74 696f 7574 7075 7420      multioutput 
+00010fb0: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+00010fc0: 2065 6c69 6620 7365 6c66 2e59 2e73 6861   elif self.Y.sha
+00010fd0: 7065 5b31 5d20 3c20 323a 0d0a 2020 2020  pe[1] < 2:..    
+00010fe0: 2020 2020 2020 2020 6d75 6c74 696f 7574          multiout
+00010ff0: 7075 7420 3d20 4661 6c73 650d 0a20 2020  put = False..   
+00011000: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00011010: 6365 2873 656c 662e 582c 2070 642e 4461  ce(self.X, pd.Da
+00011020: 7461 4672 616d 6529 3a0d 0a20 2020 2020  taFrame):..     
+00011030: 2020 2020 2020 2073 656c 662e 5820 3d20         self.X = 
+00011040: 7365 6c66 2e58 2e74 6f5f 6e75 6d70 7928  self.X.to_numpy(
+00011050: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00011060: 6d6f 6465 6c20 3d20 7265 7472 6965 7665  model = retrieve
+00011070: 5f72 6567 7265 7373 6f72 280d 0a20 2020  _regressor(..   
+00011080: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+00011090: 696f 6e5f 6d6f 6465 6c3d 7365 6c66 2e72  ion_model=self.r
+000110a0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c2c  egression_model,
+000110b0: 0d0a 2020 2020 2020 2020 2020 2020 7665  ..            ve
+000110c0: 7262 6f73 653d 7365 6c66 2e76 6572 626f  rbose=self.verbo
+000110d0: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
+000110e0: 2076 6572 626f 7365 5f62 6f6f 6c3d 7365   verbose_bool=se
+000110f0: 6c66 2e76 6572 626f 7365 5f62 6f6f 6c2c  lf.verbose_bool,
+00011100: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00011110: 6e64 6f6d 5f73 6565 643d 7365 6c66 2e72  ndom_seed=self.r
+00011120: 616e 646f 6d5f 7365 6564 2c0d 0a20 2020  andom_seed,..   
+00011130: 2020 2020 2020 2020 206e 5f6a 6f62 733d           n_jobs=
+00011140: 7365 6c66 2e6e 5f6a 6f62 732c 0d0a 2020  self.n_jobs,..  
+00011150: 2020 2020 2020 2020 2020 6d75 6c74 696f            multio
+00011160: 7574 7075 743d 6d75 6c74 696f 7574 7075  utput=multioutpu
+00011170: 742c 0d0a 2020 2020 2020 2020 290d 0a20  t,..        ).. 
+00011180: 2020 2020 2020 2073 656c 662e 6d6f 6465         self.mode
+00011190: 6c20 3d20 7365 6c66 2e6d 6f64 656c 2e66  l = self.model.f
+000111a0: 6974 2873 656c 662e 582c 2073 656c 662e  it(self.X, self.
+000111b0: 5929 0d0a 2020 2020 2020 2020 7365 6c66  Y)..        self
+000111c0: 2e6c 6173 745f 7769 6e64 6f77 203d 2064  .last_window = d
+000111d0: 662e 7461 696c 2873 656c 662e 7769 6e64  f.tail(self.wind
+000111e0: 6f77 5f73 697a 6529 0d0a 2020 2020 2020  ow_size)..      
+000111f0: 2020 7365 6c66 2e66 6974 5f72 756e 7469    self.fit_runti
+00011200: 6d65 203d 2064 6174 6574 696d 652e 6461  me = datetime.da
+00011210: 7465 7469 6d65 2e6e 6f77 2829 202d 2073  tetime.now() - s
+00011220: 656c 662e 7374 6172 7454 696d 650d 0a20  elf.startTime.. 
+00011230: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00011240: 6c66 0d0a 0d0a 2020 2020 6465 6620 6669  lf....    def fi
+00011250: 745f 6461 7461 2873 656c 662c 2064 662c  t_data(self, df,
+00011260: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+00011270: 723d 4e6f 6e65 293a 0d0a 2020 2020 2020  r=None):..      
+00011280: 2020 6466 203d 2073 656c 662e 6261 7369    df = self.basi
+00011290: 635f 7072 6f66 696c 6528 6466 290d 0a20  c_profile(df).. 
+000112a0: 2020 2020 2020 2073 656c 662e 6c61 7374         self.last
+000112b0: 5f77 696e 646f 7720 3d20 6466 2e74 6169  _window = df.tai
+000112c0: 6c28 7365 6c66 2e77 696e 646f 775f 7369  l(self.window_si
+000112d0: 7a65 290d 0a20 2020 2020 2020 2072 6574  ze)..        ret
+000112e0: 7572 6e20 7365 6c66 0d0a 0d0a 2020 2020  urn self....    
+000112f0: 6465 6620 7072 6564 6963 7428 0d0a 2020  def predict(..  
+00011300: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+00011310: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+00011320: 6e67 7468 3a20 696e 7420 3d20 4e6f 6e65  ngth: int = None
+00011330: 2c0d 0a20 2020 2020 2020 2066 7574 7572  ,..        futur
+00011340: 655f 7265 6772 6573 736f 723d 4e6f 6e65  e_regressor=None
+00011350: 2c0d 0a20 2020 2020 2020 206a 7573 745f  ,..        just_
+00011360: 706f 696e 745f 666f 7265 6361 7374 3a20  point_forecast: 
+00011370: 626f 6f6c 203d 2046 616c 7365 2c0d 0a20  bool = False,.. 
+00011380: 2020 2020 2020 2064 663d 4e6f 6e65 2c0d         df=None,.
+00011390: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+000113a0: 2022 2222 4765 6e65 7261 7465 2066 6f72   """Generate for
+000113b0: 6563 6173 7420 6461 7461 2069 6d6d 6564  ecast data immed
+000113c0: 6961 7465 6c79 2066 6f6c 6c6f 7769 6e67  iately following
+000113d0: 2064 6174 6573 206f 6620 2e66 6974 2829   dates of .fit()
+000113e0: 2e0d 0a0d 0a20 2020 2020 2020 2041 7267  .....        Arg
+000113f0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00011400: 666f 7265 6361 7374 5f6c 656e 6774 6820  forecast_length 
+00011410: 2869 6e74 293a 204e 756d 6265 7220 6f66  (int): Number of
+00011420: 2070 6572 696f 6473 206f 6620 6461 7461   periods of data
+00011430: 2074 6f20 666f 7265 6361 7374 2061 6865   to forecast ahe
+00011440: 6164 0d0a 2020 2020 2020 2020 2020 2020  ad..            
+00011450: 7265 6772 6573 736f 7220 286e 756d 7079  regressor (numpy
+00011460: 2e41 7272 6179 293a 2061 6464 6974 696f  .Array): additio
+00011470: 6e61 6c20 7265 6772 6573 736f 722c 206e  nal regressor, n
+00011480: 6f74 2075 7365 640d 0a20 2020 2020 2020  ot used..       
+00011490: 2020 2020 206a 7573 745f 706f 696e 745f       just_point_
+000114a0: 666f 7265 6361 7374 2028 626f 6f6c 293a  forecast (bool):
+000114b0: 2049 6620 5472 7565 2c20 7265 7475 726e   If True, return
+000114c0: 2061 2070 616e 6461 732e 4461 7461 4672   a pandas.DataFr
+000114d0: 616d 6520 6f66 206a 7573 7420 706f 696e  ame of just poin
+000114e0: 7420 666f 7265 6361 7374 730d 0a0d 0a20  t forecasts.... 
+000114f0: 2020 2020 2020 2052 6574 7572 6e73 3a0d         Returns:.
+00011500: 0a20 2020 2020 2020 2020 2020 2045 6974  .            Eit
+00011510: 6865 7220 6120 5072 6564 6963 7469 6f6e  her a Prediction
+00011520: 4f62 6a65 6374 206f 6620 666f 7265 6361  Object of foreca
+00011530: 7374 7320 616e 6420 6d65 7461 6461 7461  sts and metadata
+00011540: 2c20 6f72 0d0a 2020 2020 2020 2020 2020  , or..          
+00011550: 2020 6966 206a 7573 745f 706f 696e 745f    if just_point_
+00011560: 666f 7265 6361 7374 203d 3d20 5472 7565  forecast == True
+00011570: 2c20 6120 6461 7461 6672 616d 6520 6f66  , a dataframe of
+00011580: 2070 6f69 6e74 2066 6f72 6563 6173 7473   point forecasts
+00011590: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
+000115a0: 2020 2020 2020 2070 7265 6469 6374 5374         predictSt
+000115b0: 6172 7454 696d 6520 3d20 6461 7465 7469  artTime = dateti
+000115c0: 6d65 2e64 6174 6574 696d 652e 6e6f 7728  me.datetime.now(
+000115d0: 290d 0a20 2020 2020 2020 2069 6620 6466  )..        if df
+000115e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+000115f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00011600: 6669 745f 6461 7461 2864 6629 0d0a 2020  fit_data(df)..  
+00011610: 2020 2020 2020 6966 2066 6f72 6563 6173        if forecas
+00011620: 745f 6c65 6e67 7468 2069 7320 4e6f 6e65  t_length is None
+00011630: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00011640: 6f72 6563 6173 745f 6c65 6e67 7468 203d  orecast_length =
+00011650: 2073 656c 662e 666f 7265 6361 7374 5f6c   self.forecast_l
+00011660: 656e 6774 680d 0a20 2020 2020 2020 2069  ength..        i
+00011670: 6620 696e 7428 666f 7265 6361 7374 5f6c  f int(forecast_l
+00011680: 656e 6774 6829 203e 2069 6e74 2873 656c  ength) > int(sel
+00011690: 662e 666f 7265 6361 7374 5f6c 656e 6774  f.forecast_lengt
+000116a0: 6829 3a0d 0a20 2020 2020 2020 2020 2020  h):..           
+000116b0: 2070 7269 6e74 2822 5265 6772 6573 7369   print("Regressi
+000116c0: 6f6e 206d 7573 7420 6265 2072 6566 6974  on must be refit
+000116d0: 2074 6f20 6368 616e 6765 2066 6f72 6563   to change forec
+000116e0: 6173 7420 6c65 6e67 7468 2122 290d 0a20  ast length!").. 
+000116f0: 2020 2020 2020 2069 6e64 6578 203d 2073         index = s
+00011700: 656c 662e 6372 6561 7465 5f66 6f72 6563  elf.create_forec
+00011710: 6173 745f 696e 6465 7828 666f 7265 6361  ast_index(foreca
+00011720: 7374 5f6c 656e 6774 683d 666f 7265 6361  st_length=foreca
+00011730: 7374 5f6c 656e 6774 6829 0d0a 2020 2020  st_length)..    
+00011740: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00011750: 6528 6675 7475 7265 5f72 6567 7265 7373  e(future_regress
+00011760: 6f72 2c20 7064 2e53 6572 6965 7329 3a0d  or, pd.Series):.
+00011770: 0a20 2020 2020 2020 2020 2020 2066 7574  .            fut
+00011780: 7572 655f 7265 6772 6573 736f 7220 3d20  ure_regressor = 
+00011790: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
+000117a0: 2e74 6f5f 6672 616d 6528 290d 0a0d 0a20  .to_frame().... 
+000117b0: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
+000117c0: 7574 7075 745f 6469 6d20 3d3d 2027 3173  utput_dim == '1s
+000117d0: 7465 7027 3a0d 0a20 2020 2020 2020 2020  tep':..         
+000117e0: 2020 2023 2063 6f6d 6269 6e65 645f 696e     # combined_in
+000117f0: 6465 7820 3d20 2873 656c 662e 6466 5f74  dex = (self.df_t
+00011800: 7261 696e 2e69 6e64 6578 2e61 7070 656e  rain.index.appen
+00011810: 6428 696e 6465 7829 290d 0a20 2020 2020  d(index))..     
+00011820: 2020 2020 2020 2066 6f72 6563 6173 7420         forecast 
+00011830: 3d20 7064 2e44 6174 6146 7261 6d65 2829  = pd.DataFrame()
+00011840: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00011850: 666f 7265 6361 7374 2c20 3120 7374 6570  forecast, 1 step
+00011860: 2061 6865 6164 2c20 7468 656e 2061 6e6f   ahead, then ano
+00011870: 7468 6572 2c20 616e 6420 736f 206f 6e0d  ther, and so on.
+00011880: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00011890: 2078 2069 6e20 7261 6e67 6528 666f 7265   x in range(fore
+000118a0: 6361 7374 5f6c 656e 6774 6829 3a0d 0a20  cast_length):.. 
+000118b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000118c0: 7265 6420 3d20 6c61 7374 5f77 696e 646f  red = last_windo
+000118d0: 7728 0d0a 2020 2020 2020 2020 2020 2020  w(..            
+000118e0: 2020 2020 2020 2020 7365 6c66 2e6c 6173          self.las
+000118f0: 745f 7769 6e64 6f77 2c0d 0a20 2020 2020  t_window,..     
+00011900: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00011910: 696e 646f 775f 7369 7a65 3d73 656c 662e  indow_size=self.
+00011920: 7769 6e64 6f77 5f73 697a 652c 0d0a 2020  window_size,..  
+00011930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011940: 2020 696e 7075 745f 6469 6d3d 7365 6c66    input_dim=self
+00011950: 2e69 6e70 7574 5f64 696d 2c0d 0a20 2020  .input_dim,..   
+00011960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011970: 206e 6f72 6d61 6c69 7a65 5f77 696e 646f   normalize_windo
+00011980: 773d 7365 6c66 2e6e 6f72 6d61 6c69 7a65  w=self.normalize
+00011990: 5f77 696e 646f 772c 0d0a 2020 2020 2020  _window,..      
+000119a0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+000119b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000119c0: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+000119d0: 7479 7065 2069 6e20 5b22 5573 6572 222c  type in ["User",
+000119e0: 2022 7573 6572 225d 3a0d 0a20 2020 2020   "user"]:..     
+000119f0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00011a00: 6c61 7374 6564 5f74 6869 6e67 203d 2028  lasted_thing = (
+00011a10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011a20: 2020 2020 2020 2020 2020 6675 7475 7265            future
+00011a30: 5f72 6567 7265 7373 6f72 2e72 6569 6e64  _regressor.reind
+00011a40: 6578 2869 6e64 6578 292e 696c 6f63 5b78  ex(index).iloc[x
+00011a50: 5d2e 746f 5f66 7261 6d65 2829 2e74 7261  ].to_frame().tra
+00011a60: 6e73 706f 7365 2829 0d0a 2020 2020 2020  nspose()..      
+00011a70: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00011a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011a90: 2020 2020 2074 6d65 7267 203d 2070 642e       tmerg = pd.
+00011aa0: 636f 6e63 6174 285b 626c 6173 7465 645f  concat([blasted_
+00011ab0: 7468 696e 675d 202a 2070 7265 642e 7368  thing] * pred.sh
+00011ac0: 6170 655b 305d 2c20 6178 6973 3d30 290d  ape[0], axis=0).
+00011ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011ae0: 2020 2020 2074 6d65 7267 2e69 6e64 6578       tmerg.index
+00011af0: 203d 2070 7265 642e 696e 6465 780d 0a20   = pred.index.. 
+00011b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b10: 2020 2070 7265 6420 3d20 7064 2e63 6f6e     pred = pd.con
+00011b20: 6361 7428 5b70 7265 642c 2074 6d65 7267  cat([pred, tmerg
+00011b30: 5d2c 2061 7869 733d 312c 2069 676e 6f72  ], axis=1, ignor
+00011b40: 655f 696e 6465 783d 5472 7565 290d 0a20  e_index=True).. 
+00011b50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00011b60: 6620 6973 696e 7374 616e 6365 2870 7265  f isinstance(pre
+00011b70: 642c 2070 642e 4461 7461 4672 616d 6529  d, pd.DataFrame)
+00011b80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00011b90: 2020 2020 2020 2070 7265 6420 3d20 7072         pred = pr
+00011ba0: 6564 2e74 6f5f 6e75 6d70 7928 290d 0a20  ed.to_numpy().. 
+00011bb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00011bc0: 6650 7265 6420 3d20 7064 2e44 6174 6146  fPred = pd.DataF
+00011bd0: 7261 6d65 2873 656c 662e 6d6f 6465 6c2e  rame(self.model.
+00011be0: 7072 6564 6963 7428 7072 6564 2929 0d0a  predict(pred))..
+00011bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c00: 6966 2073 656c 662e 696e 7075 745f 6469  if self.input_di
+00011c10: 6d20 3d3d 2027 756e 6976 6172 6961 7465  m == 'univariate
+00011c20: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+00011c30: 2020 2020 2020 2020 7266 5072 6564 203d          rfPred =
+00011c40: 2072 6650 7265 642e 7472 616e 7370 6f73   rfPred.transpos
+00011c50: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+00011c60: 2020 2020 2020 2020 2072 6650 7265 642e           rfPred.
+00011c70: 636f 6c75 6d6e 7320 3d20 7365 6c66 2e6c  columns = self.l
+00011c80: 6173 745f 7769 6e64 6f77 2e63 6f6c 756d  ast_window.colum
+00011c90: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
+00011ca0: 2020 2020 666f 7265 6361 7374 203d 2070      forecast = p
+00011cb0: 642e 636f 6e63 6174 285b 666f 7265 6361  d.concat([foreca
+00011cc0: 7374 2c20 7266 5072 6564 5d2c 2061 7869  st, rfPred], axi
+00011cd0: 733d 302c 2069 676e 6f72 655f 696e 6465  s=0, ignore_inde
+00011ce0: 783d 5472 7565 290d 0a20 2020 2020 2020  x=True)..       
+00011cf0: 2020 2020 2020 2020 2073 656c 662e 6c61           self.la
+00011d00: 7374 5f77 696e 646f 7720 3d20 7064 2e63  st_window = pd.c
+00011d10: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
+00011d20: 2020 2020 2020 2020 2020 2020 5b73 656c              [sel
+00011d30: 662e 6c61 7374 5f77 696e 646f 772c 2072  f.last_window, r
+00011d40: 6650 7265 645d 2c20 6178 6973 3d30 2c20  fPred], axis=0, 
+00011d50: 6967 6e6f 7265 5f69 6e64 6578 3d54 7275  ignore_index=Tru
+00011d60: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00011d70: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+00011d80: 2020 6466 203d 2066 6f72 6563 6173 740d    df = forecast.
+00011d90: 0a0d 0a20 2020 2020 2020 2065 6c73 653a  ...        else:
+00011da0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00011db0: 6564 203d 206c 6173 745f 7769 6e64 6f77  ed = last_window
+00011dc0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00011dd0: 2020 2073 656c 662e 6c61 7374 5f77 696e     self.last_win
+00011de0: 646f 772c 0d0a 2020 2020 2020 2020 2020  dow,..          
+00011df0: 2020 2020 2020 7769 6e64 6f77 5f73 697a        window_siz
+00011e00: 653d 7365 6c66 2e77 696e 646f 775f 7369  e=self.window_si
+00011e10: 7a65 2c0d 0a20 2020 2020 2020 2020 2020  ze,..           
+00011e20: 2020 2020 2069 6e70 7574 5f64 696d 3d73       input_dim=s
+00011e30: 656c 662e 696e 7075 745f 6469 6d2c 0d0a  elf.input_dim,..
+00011e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e50: 6e6f 726d 616c 697a 655f 7769 6e64 6f77  normalize_window
+00011e60: 3d73 656c 662e 6e6f 726d 616c 697a 655f  =self.normalize_
+00011e70: 7769 6e64 6f77 2c0d 0a20 2020 2020 2020  window,..       
+00011e80: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00011e90: 2020 2020 6966 2073 656c 662e 7265 6772      if self.regr
+00011ea0: 6573 7369 6f6e 5f74 7970 6520 696e 205b  ession_type in [
+00011eb0: 2255 7365 7222 2c20 2275 7365 7222 5d3a  "User", "user"]:
+00011ec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011ed0: 2020 746d 6572 6720 3d20 6675 7475 7265    tmerg = future
+00011ee0: 5f72 6567 7265 7373 6f72 2e74 6169 6c28  _regressor.tail(
+00011ef0: 3129 2e6c 6f63 5b0d 0a20 2020 2020 2020  1).loc[..       
+00011f00: 2020 2020 2020 2020 2020 2020 2066 7574               fut
+00011f10: 7572 655f 7265 6772 6573 736f 722e 7461  ure_regressor.ta
+00011f20: 696c 2831 292e 696e 6465 782e 7265 7065  il(1).index.repe
+00011f30: 6174 2870 7265 642e 7368 6170 655b 305d  at(pred.shape[0]
+00011f40: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00011f50: 2020 205d 0d0a 2020 2020 2020 2020 2020     ]..          
+00011f60: 2020 2020 2020 746d 6572 672e 696e 6465        tmerg.inde
+00011f70: 7820 3d20 7072 6564 2e69 6e64 6578 0d0a  x = pred.index..
+00011f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f90: 7072 6564 203d 2070 642e 636f 6e63 6174  pred = pd.concat
+00011fa0: 285b 7072 6564 2c20 746d 6572 675d 2c20  ([pred, tmerg], 
+00011fb0: 6178 6973 3d31 290d 0a20 2020 2020 2020  axis=1)..       
+00011fc0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00011fd0: 6365 2870 7265 642c 2070 642e 4461 7461  ce(pred, pd.Data
+00011fe0: 4672 616d 6529 3a0d 0a20 2020 2020 2020  Frame):..       
+00011ff0: 2020 2020 2020 2020 2070 7265 6420 3d20           pred = 
+00012000: 7072 6564 2e74 6f5f 6e75 6d70 7928 6474  pred.to_numpy(dt
+00012010: 7970 653d 6e70 2e66 6c6f 6174 3332 290d  ype=np.float32).
+00012020: 0a20 2020 2020 2020 2020 2020 2063 5920  .            cY 
+00012030: 3d20 7064 2e44 6174 6146 7261 6d65 2873  = pd.DataFrame(s
+00012040: 656c 662e 6d6f 6465 6c2e 7072 6564 6963  elf.model.predic
+00012050: 7428 7072 6564 2e61 7374 7970 6528 666c  t(pred.astype(fl
+00012060: 6f61 7429 2929 0d0a 2020 2020 2020 2020  oat)))..        
+00012070: 2020 2020 6966 2073 656c 662e 696e 7075      if self.inpu
+00012080: 745f 6469 6d20 3d3d 2027 6d75 6c74 6976  t_dim == 'multiv
+00012090: 6172 6961 7465 273a 0d0a 2020 2020 2020  ariate':..      
+000120a0: 2020 2020 2020 2020 2020 6359 2e69 6e64            cY.ind
+000120b0: 6578 203d 205b 2776 616c 7565 7327 5d0d  ex = ['values'].
+000120c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000120d0: 2063 592e 636f 6c75 6d6e 7320 3d20 6e70   cY.columns = np
+000120e0: 2e74 696c 6528 7365 6c66 2e63 6f6c 756d  .tile(self.colum
+000120f0: 6e5f 6e61 6d65 732c 2072 6570 733d 7365  n_names, reps=se
+00012100: 6c66 2e66 6f72 6563 6173 745f 6c65 6e67  lf.forecast_leng
+00012110: 7468 290d 0a20 2020 2020 2020 2020 2020  th)..           
+00012120: 2020 2020 2063 5920 3d20 6359 2e74 7261       cY = cY.tra
+00012130: 6e73 706f 7365 2829 2e72 6573 6574 5f69  nspose().reset_i
+00012140: 6e64 6578 2829 0d0a 2020 2020 2020 2020  ndex()..        
+00012150: 2020 2020 2020 2020 6359 5b27 7469 6d65          cY['time
+00012160: 7374 6570 275d 203d 206e 702e 7265 7065  step'] = np.repe
+00012170: 6174 280d 0a20 2020 2020 2020 2020 2020  at(..           
+00012180: 2020 2020 2020 2020 2072 616e 6765 2866           range(f
+00012190: 6f72 6563 6173 745f 6c65 6e67 7468 292c  orecast_length),
+000121a0: 2072 6570 6561 7473 3d6c 656e 2873 656c   repeats=len(sel
+000121b0: 662e 636f 6c75 6d6e 5f6e 616d 6573 290d  f.column_names).
+000121c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000121d0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+000121e0: 2020 2020 6359 203d 2070 642e 7069 766f      cY = pd.pivo
+000121f0: 745f 7461 626c 6528 6359 2c20 696e 6465  t_table(cY, inde
+00012200: 783d 2774 696d 6573 7465 7027 2c20 636f  x='timestep', co
+00012210: 6c75 6d6e 733d 2769 6e64 6578 2729 0d0a  lumns='index')..
+00012220: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00012230: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012240: 2020 2063 5920 3d20 6359 2e74 7261 6e73     cY = cY.trans
+00012250: 706f 7365 2829 0d0a 2020 2020 2020 2020  pose()..        
+00012260: 2020 2020 6466 203d 2063 590d 0a0d 0a20      df = cY.... 
+00012270: 2020 2020 2020 2064 662e 636f 6c75 6d6e         df.column
+00012280: 7320 3d20 7365 6c66 2e63 6f6c 756d 6e5f  s = self.column_
+00012290: 6e61 6d65 730d 0a20 2020 2020 2020 2064  names..        d
+000122a0: 662e 696e 6465 7820 3d20 696e 6465 780d  f.index = index.
+000122b0: 0a20 2020 2020 2020 2069 6620 6a75 7374  .        if just
+000122c0: 5f70 6f69 6e74 5f66 6f72 6563 6173 743a  _point_forecast:
+000122d0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000122e0: 7475 726e 2064 660d 0a20 2020 2020 2020  turn df..       
+000122f0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00012300: 2020 2020 7570 7065 725f 666f 7265 6361      upper_foreca
+00012310: 7374 2c20 6c6f 7765 725f 666f 7265 6361  st, lower_foreca
+00012320: 7374 203d 2050 6f69 6e74 5f74 6f5f 5072  st = Point_to_Pr
+00012330: 6f62 6162 696c 6974 7928 0d0a 2020 2020  obability(..    
+00012340: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00012350: 2e64 665f 7472 6169 6e2c 0d0a 2020 2020  .df_train,..    
+00012360: 2020 2020 2020 2020 2020 2020 6466 2c0d              df,.
+00012370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012380: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
+00012390: 7276 616c 3d73 656c 662e 7072 6564 6963  rval=self.predic
+000123a0: 7469 6f6e 5f69 6e74 6572 7661 6c2c 0d0a  tion_interval,..
+000123b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123c0: 6d65 7468 6f64 3d27 6869 7374 6f72 6963  method='historic
+000123d0: 5f71 7561 6e74 696c 6527 2c0d 0a20 2020  _quantile',..   
+000123e0: 2020 2020 2020 2020 2029 0d0a 0d0a 2020           )....  
+000123f0: 2020 2020 2020 2020 2020 7072 6564 6963            predic
+00012400: 745f 7275 6e74 696d 6520 3d20 6461 7465  t_runtime = date
+00012410: 7469 6d65 2e64 6174 6574 696d 652e 6e6f  time.datetime.no
+00012420: 7728 2920 2d20 7072 6564 6963 7453 7461  w() - predictSta
+00012430: 7274 5469 6d65 0d0a 2020 2020 2020 2020  rtTime..        
+00012440: 2020 2020 7072 6564 6963 7469 6f6e 203d      prediction =
+00012450: 2050 7265 6469 6374 696f 6e4f 626a 6563   PredictionObjec
+00012460: 7428 0d0a 2020 2020 2020 2020 2020 2020  t(..            
+00012470: 2020 2020 6d6f 6465 6c5f 6e61 6d65 3d73      model_name=s
+00012480: 656c 662e 6e61 6d65 2c0d 0a20 2020 2020  elf.name,..     
+00012490: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
+000124a0: 6173 745f 6c65 6e67 7468 3d66 6f72 6563  ast_length=forec
+000124b0: 6173 745f 6c65 6e67 7468 2c0d 0a20 2020  ast_length,..   
+000124c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+000124d0: 6563 6173 745f 696e 6465 783d 6466 2e69  ecast_index=df.i
+000124e0: 6e64 6578 2c0d 0a20 2020 2020 2020 2020  ndex,..         
+000124f0: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
+00012500: 636f 6c75 6d6e 733d 6466 2e63 6f6c 756d  columns=df.colum
+00012510: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
+00012520: 2020 2020 2023 2073 6f20 6974 2773 2070       # so it's p
+00012530: 726f 6475 6369 6e67 2066 6c6f 6174 3332  roducing float32
+00012540: 2062 7574 2070 616e 6461 7320 6973 2062   but pandas is b
+00012550: 6574 7465 7220 7769 7468 2066 6c6f 6174  etter with float
+00012560: 3634 0d0a 2020 2020 2020 2020 2020 2020  64..            
+00012570: 2020 2020 6c6f 7765 725f 666f 7265 6361      lower_foreca
+00012580: 7374 3d6c 6f77 6572 5f66 6f72 6563 6173  st=lower_forecas
+00012590: 742e 6173 7479 7065 2866 6c6f 6174 292c  t.astype(float),
+000125a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000125b0: 2020 666f 7265 6361 7374 3d64 662e 6173    forecast=df.as
+000125c0: 7479 7065 2866 6c6f 6174 292c 0d0a 2020  type(float),..  
+000125d0: 2020 2020 2020 2020 2020 2020 2020 7570                up
+000125e0: 7065 725f 666f 7265 6361 7374 3d75 7070  per_forecast=upp
+000125f0: 6572 5f66 6f72 6563 6173 742e 6173 7479  er_forecast.asty
+00012600: 7065 2866 6c6f 6174 292c 0d0a 2020 2020  pe(float),..    
+00012610: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00012620: 6963 7469 6f6e 5f69 6e74 6572 7661 6c3d  iction_interval=
+00012630: 7365 6c66 2e70 7265 6469 6374 696f 6e5f  self.prediction_
+00012640: 696e 7465 7276 616c 2c0d 0a20 2020 2020  interval,..     
+00012650: 2020 2020 2020 2020 2020 2070 7265 6469             predi
+00012660: 6374 5f72 756e 7469 6d65 3d70 7265 6469  ct_runtime=predi
+00012670: 6374 5f72 756e 7469 6d65 2c0d 0a20 2020  ct_runtime,..   
+00012680: 2020 2020 2020 2020 2020 2020 2066 6974               fit
+00012690: 5f72 756e 7469 6d65 3d73 656c 662e 6669  _runtime=self.fi
+000126a0: 745f 7275 6e74 696d 652c 0d0a 2020 2020  t_runtime,..    
+000126b0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
+000126c0: 6c5f 7061 7261 6d65 7465 7273 3d73 656c  l_parameters=sel
+000126d0: 662e 6765 745f 7061 7261 6d73 2829 2c0d  f.get_params(),.
+000126e0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000126f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00012700: 726e 2070 7265 6469 6374 696f 6e0d 0a0d  rn prediction...
+00012710: 0a20 2020 2064 6566 2067 6574 5f6e 6577  .    def get_new
+00012720: 5f70 6172 616d 7328 7365 6c66 2c20 6d65  _params(self, me
+00012730: 7468 6f64 3a20 7374 7220 3d20 2772 616e  thod: str = 'ran
+00012740: 646f 6d27 293a 0d0a 2020 2020 2020 2020  dom'):..        
+00012750: 2222 2252 6574 7572 6e20 6469 6374 206f  """Return dict o
+00012760: 6620 6e65 7720 7061 7261 6d65 7465 7273  f new parameters
+00012770: 2066 6f72 2070 6172 616d 6574 6572 2074   for parameter t
+00012780: 756e 696e 672e 2222 220d 0a20 2020 2020  uning."""..     
+00012790: 2020 2077 6e64 5f73 7a5f 6368 6f69 6365     wnd_sz_choice
+000127a0: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+000127b0: 285b 352c 2031 302c 2032 302c 2073 6561  ([5, 10, 20, sea
+000127c0: 736f 6e61 6c5f 696e 7428 295d 290d 0a20  sonal_int()]).. 
+000127d0: 2020 2020 2020 2069 6620 6d65 7468 6f64         if method
+000127e0: 2021 3d20 2264 6565 7022 3a0d 0a20 2020   != "deep":..   
+000127f0: 2020 2020 2020 2020 2077 6e64 5f73 7a5f           wnd_sz_
+00012800: 6368 6f69 6365 203d 2077 6e64 5f73 7a5f  choice = wnd_sz_
+00012810: 6368 6f69 6365 2069 6620 776e 645f 737a  choice if wnd_sz
+00012820: 5f63 686f 6963 6520 3c20 3931 2065 6c73  _choice < 91 els
+00012830: 6520 3930 0d0a 2020 2020 2020 2020 6d6f  e 90..        mo
+00012840: 6465 6c5f 6368 6f69 6365 203d 2067 656e  del_choice = gen
+00012850: 6572 6174 655f 7265 6772 6573 736f 725f  erate_regressor_
+00012860: 7061 7261 6d73 280d 0a20 2020 2020 2020  params(..       
+00012870: 2020 2020 206d 6f64 656c 5f64 6963 743d       model_dict=
+00012880: 736b 6c65 6172 6e5f 6d6f 6465 6c5f 6469  sklearn_model_di
+00012890: 6374 2c20 6d65 7468 6f64 3d6d 6574 686f  ct, method=metho
+000128a0: 640d 0a20 2020 2020 2020 2029 0d0a 2020  d..        )..  
+000128b0: 2020 2020 2020 6966 2022 7265 6772 6573        if "regres
+000128c0: 736f 7222 2069 6e20 6d65 7468 6f64 3a0d  sor" in method:.
+000128d0: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+000128e0: 7265 7373 696f 6e5f 7479 7065 5f63 686f  ression_type_cho
+000128f0: 6963 6520 3d20 2255 7365 7222 0d0a 2020  ice = "User"..  
+00012900: 2020 2020 2020 2020 2020 696e 7075 745f            input_
+00012910: 6469 6d5f 6368 6f69 6365 203d 2027 756e  dim_choice = 'un
+00012920: 6976 6172 6961 7465 270d 0a20 2020 2020  ivariate'..     
+00012930: 2020 2020 2020 206f 7574 7075 745f 6469         output_di
+00012940: 6d5f 6368 6f69 6365 203d 2072 616e 646f  m_choice = rando
+00012950: 6d2e 6368 6f69 6365 280d 0a20 2020 2020  m.choice(..     
+00012960: 2020 2020 2020 2020 2020 205b 2766 6f72             ['for
+00012970: 6563 6173 745f 6c65 6e67 7468 272c 2027  ecast_length', '
+00012980: 3173 7465 7027 5d2c 0d0a 2020 2020 2020  1step'],..      
+00012990: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000129a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000129b0: 2020 2020 696e 7075 745f 6469 6d5f 6368      input_dim_ch
+000129c0: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
+000129d0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+000129e0: 2020 2020 2020 2020 5b27 6d75 6c74 6976          ['multiv
+000129f0: 6172 6961 7465 272c 2027 756e 6976 6172  ariate', 'univar
+00012a00: 6961 7465 275d 2c20 5b30 2e30 312c 2030  iate'], [0.01, 0
+00012a10: 2e39 395d 0d0a 2020 2020 2020 2020 2020  .99]..          
+00012a20: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
+00012a30: 2020 2020 6966 2069 6e70 7574 5f64 696d      if input_dim
+00012a40: 5f63 686f 6963 6520 3d3d 2022 6d75 6c74  _choice == "mult
+00012a50: 6976 6172 6961 7465 223a 0d0a 2020 2020  ivariate":..    
+00012a60: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+00012a70: 7574 5f64 696d 5f63 686f 6963 6520 3d20  ut_dim_choice = 
+00012a80: 2231 7374 6570 220d 0a20 2020 2020 2020  "1step"..       
+00012a90: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+00012aa0: 696f 6e5f 7479 7065 5f63 686f 6963 6520  ion_type_choice 
+00012ab0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00012ac0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00012ad0: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
+00012ae0: 745f 6469 6d5f 6368 6f69 6365 203d 2072  t_dim_choice = r
+00012af0: 616e 646f 6d2e 6368 6f69 6365 280d 0a20  andom.choice(.. 
+00012b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b10: 2020 205b 2766 6f72 6563 6173 745f 6c65     ['forecast_le
+00012b20: 6e67 7468 272c 2027 3173 7465 7027 5d2c  ngth', '1step'],
+00012b30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012b40: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00012b50: 2020 2020 2072 6567 7265 7373 696f 6e5f       regression_
+00012b60: 7479 7065 5f63 686f 6963 6520 3d20 7261  type_choice = ra
+00012b70: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+00012b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b90: 2020 205b 4e6f 6e65 2c20 2255 7365 7222     [None, "User"
+00012ba0: 5d2c 2077 6569 6768 7473 3d5b 302e 382c  ], weights=[0.8,
+00012bb0: 2030 2e32 5d0d 0a20 2020 2020 2020 2020   0.2]..         
+00012bc0: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+00012bd0: 2020 2020 206e 6f72 6d61 6c69 7a65 5f77       normalize_w
+00012be0: 696e 646f 775f 6368 6f69 6365 203d 2072  indow_choice = r
+00012bf0: 616e 646f 6d2e 6368 6f69 6365 7328 5b54  andom.choices([T
+00012c00: 7275 652c 2046 616c 7365 5d2c 205b 302e  rue, False], [0.
+00012c10: 3035 2c20 302e 3935 5d29 5b30 5d0d 0a20  05, 0.95])[0].. 
+00012c20: 2020 2020 2020 2069 6620 6d65 7468 6f64         if method
+00012c30: 203d 3d20 2264 6565 7022 3a0d 0a20 2020   == "deep":..   
+00012c40: 2020 2020 2020 2020 206d 6178 5f77 696e           max_win
+00012c50: 646f 7773 5f63 686f 6963 6520 3d20 7261  dows_choice = ra
+00012c60: 6e64 6f6d 2e63 686f 6963 6573 280d 0a20  ndom.choices(.. 
+00012c70: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+00012c80: 3530 3030 2c20 3530 3030 302c 2035 3030  5000, 50000, 500
+00012c90: 3030 3030 2c20 4e6f 6e65 5d2c 205b 302e  0000, None], [0.
+00012ca0: 342c 2030 2e32 2c20 302e 392c 2030 2e30  4, 0.2, 0.9, 0.0
+00012cb0: 355d 0d0a 2020 2020 2020 2020 2020 2020  5]..            
+00012cc0: 295b 305d 0d0a 2020 2020 2020 2020 656c  )[0]..        el
+00012cd0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00012ce0: 206d 6178 5f77 696e 646f 7773 5f63 686f   max_windows_cho
+00012cf0: 6963 6520 3d20 7261 6e64 6f6d 2e63 686f  ice = random.cho
+00012d00: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+00012d10: 2020 2020 2020 205b 3530 3030 2c20 3530         [5000, 50
+00012d20: 3030 302c 2035 3030 3030 3030 5d2c 205b  000, 5000000], [
+00012d30: 302e 322c 2030 2e32 2c20 302e 395d 0d0a  0.2, 0.2, 0.9]..
+00012d40: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+00012d50: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00012d60: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
+00012d70: 2777 696e 646f 775f 7369 7a65 273a 2077  'window_size': w
+00012d80: 6e64 5f73 7a5f 6368 6f69 6365 2c0d 0a20  nd_sz_choice,.. 
+00012d90: 2020 2020 2020 2020 2020 2027 696e 7075             'inpu
+00012da0: 745f 6469 6d27 3a20 696e 7075 745f 6469  t_dim': input_di
+00012db0: 6d5f 6368 6f69 6365 2c0d 0a20 2020 2020  m_choice,..     
+00012dc0: 2020 2020 2020 2027 6f75 7470 7574 5f64         'output_d
+00012dd0: 696d 273a 206f 7574 7075 745f 6469 6d5f  im': output_dim_
+00012de0: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+00012df0: 2020 2020 2027 6e6f 726d 616c 697a 655f       'normalize_
+00012e00: 7769 6e64 6f77 273a 206e 6f72 6d61 6c69  window': normali
+00012e10: 7a65 5f77 696e 646f 775f 6368 6f69 6365  ze_window_choice
+00012e20: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00012e30: 6d61 785f 7769 6e64 6f77 7327 3a20 6d61  max_windows': ma
+00012e40: 785f 7769 6e64 6f77 735f 6368 6f69 6365  x_windows_choice
+00012e50: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00012e60: 7265 6772 6573 7369 6f6e 5f74 7970 6527  regression_type'
+00012e70: 3a20 7265 6772 6573 7369 6f6e 5f74 7970  : regression_typ
+00012e80: 655f 6368 6f69 6365 2c0d 0a20 2020 2020  e_choice,..     
+00012e90: 2020 2020 2020 2027 7265 6772 6573 7369         'regressi
+00012ea0: 6f6e 5f6d 6f64 656c 273a 206d 6f64 656c  on_model': model
+00012eb0: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
+00012ec0: 2020 7d0d 0a0d 0a20 2020 2064 6566 2067    }....    def g
+00012ed0: 6574 5f70 6172 616d 7328 7365 6c66 293a  et_params(self):
+00012ee0: 0d0a 2020 2020 2020 2020 2222 2252 6574  ..        """Ret
+00012ef0: 7572 6e20 6469 6374 206f 6620 6375 7272  urn dict of curr
+00012f00: 656e 7420 7061 7261 6d65 7465 7273 2e22  ent parameters."
+00012f10: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
+00012f20: 726e 207b 0d0a 2020 2020 2020 2020 2020  rn {..          
+00012f30: 2020 2777 696e 646f 775f 7369 7a65 273a    'window_size':
+00012f40: 2073 656c 662e 7769 6e64 6f77 5f73 697a   self.window_siz
+00012f50: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00012f60: 2769 6e70 7574 5f64 696d 273a 2073 656c  'input_dim': sel
+00012f70: 662e 696e 7075 745f 6469 6d2c 0d0a 2020  f.input_dim,..  
+00012f80: 2020 2020 2020 2020 2020 276f 7574 7075            'outpu
+00012f90: 745f 6469 6d27 3a20 7365 6c66 2e6f 7574  t_dim': self.out
+00012fa0: 7075 745f 6469 6d2c 0d0a 2020 2020 2020  put_dim,..      
+00012fb0: 2020 2020 2020 276e 6f72 6d61 6c69 7a65        'normalize
+00012fc0: 5f77 696e 646f 7727 3a20 7365 6c66 2e6e  _window': self.n
+00012fd0: 6f72 6d61 6c69 7a65 5f77 696e 646f 772c  ormalize_window,
+00012fe0: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
+00012ff0: 6178 5f77 696e 646f 7773 273a 2073 656c  ax_windows': sel
+00013000: 662e 6d61 785f 7769 6e64 6f77 732c 0d0a  f.max_windows,..
+00013010: 2020 2020 2020 2020 2020 2020 2772 6567              'reg
+00013020: 7265 7373 696f 6e5f 7479 7065 273a 2073  ression_type': s
+00013030: 656c 662e 7265 6772 6573 7369 6f6e 5f74  elf.regression_t
+00013040: 7970 652c 0d0a 2020 2020 2020 2020 2020  ype,..          
+00013050: 2020 2772 6567 7265 7373 696f 6e5f 6d6f    'regression_mo
+00013060: 6465 6c27 3a20 7365 6c66 2e72 6567 7265  del': self.regre
+00013070: 7373 696f 6e5f 6d6f 6465 6c2c 0d0a 2020  ssion_model,..  
+00013080: 2020 2020 2020 7d0d 0a0d 0a0d 0a63 6c61        }......cla
+00013090: 7373 2043 6f6d 706f 6e65 6e74 416e 616c  ss ComponentAnal
+000130a0: 7973 6973 284d 6f64 656c 4f62 6a65 6374  ysis(ModelObject
+000130b0: 293a 0d0a 2020 2020 2222 2246 6f72 6563  ):..    """Forec
+000130c0: 6173 7469 6e67 206f 6e20 7072 696e 6369  asting on princi
+000130d0: 706c 6520 636f 6d70 6f6e 656e 7473 2e0d  ple components..
+000130e0: 0a0d 0a20 2020 2041 7267 733a 0d0a 2020  ...    Args:..  
+000130f0: 2020 2020 2020 6e61 6d65 2028 7374 7229        name (str)
+00013100: 3a20 5374 7269 6e67 2074 6f20 6964 656e  : String to iden
+00013110: 7469 6679 2063 6c61 7373 0d0a 2020 2020  tify class..    
+00013120: 2020 2020 6672 6571 7565 6e63 7920 2873      frequency (s
+00013130: 7472 293a 2053 7472 696e 6720 616c 6961  tr): String alia
+00013140: 7320 6f66 2064 6174 6574 696d 6520 696e  s of datetime in
+00013150: 6465 7820 6672 6571 7565 6e63 7920 6f72  dex frequency or
+00013160: 2065 6c73 6520 2769 6e66 6572 270d 0a20   else 'infer'.. 
+00013170: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+00013180: 6e5f 696e 7465 7276 616c 2028 666c 6f61  n_interval (floa
+00013190: 7429 3a20 436f 6e66 6964 656e 6365 2069  t): Confidence i
+000131a0: 6e74 6572 7661 6c20 666f 7220 7072 6f62  nterval for prob
+000131b0: 6162 696c 6973 7469 6320 666f 7265 6361  abilistic foreca
+000131c0: 7374 0d0a 2020 2020 2020 2020 6d6f 6465  st..        mode
+000131d0: 6c20 2873 7472 293a 2041 6e20 4175 746f  l (str): An Auto
+000131e0: 5453 206d 6f64 656c 2073 7472 0d0a 2020  TS model str..  
+000131f0: 2020 2020 2020 6d6f 6465 6c5f 7061 7261        model_para
+00013200: 6d65 7465 7273 2028 6469 6374 293a 2070  meters (dict): p
+00013210: 6172 616d 6574 6572 7320 746f 2070 6173  arameters to pas
+00013220: 7320 746f 2041 7574 6f54 5320 6d6f 6465  s to AutoTS mode
+00013230: 6c0d 0a20 2020 2020 2020 206e 5f63 6f6d  l..        n_com
+00013240: 706f 6e65 6e74 7320 2869 6e74 293a 2069  ponents (int): i
+00013250: 6e74 206f 7220 274e 7468 4e27 206e 756d  nt or 'NthN' num
+00013260: 6265 7220 6f66 2063 6f6d 706f 6e65 6e74  ber of component
+00013270: 7320 746f 2075 7365 0d0a 2020 2020 2020  s to use..      
+00013280: 2020 6465 636f 6d70 6f73 6974 696f 6e20    decomposition 
+00013290: 2873 7472 293a 2064 6563 6f6d 706f 7369  (str): decomposi
+000132a0: 7469 6f6e 206d 6574 686f 6420 746f 2075  tion method to u
+000132b0: 7365 2066 726f 6d20 7363 696b 6974 2d6c  se from scikit-l
+000132c0: 6561 726e 0d0a 0d0a 2020 2020 2222 220d  earn....    """.
+000132d0: 0a0d 0a20 2020 2064 6566 205f 5f69 6e69  ...    def __ini
+000132e0: 745f 5f28 0d0a 2020 2020 2020 2020 7365  t__(..        se
+000132f0: 6c66 2c0d 0a20 2020 2020 2020 206e 616d  lf,..        nam
+00013300: 653a 2073 7472 203d 2022 436f 6d70 6f6e  e: str = "Compon
+00013310: 656e 7441 6e61 6c79 7369 7322 2c0d 0a20  entAnalysis",.. 
+00013320: 2020 2020 2020 2066 7265 7175 656e 6379         frequency
+00013330: 3a20 7374 7220 3d20 2769 6e66 6572 272c  : str = 'infer',
+00013340: 0d0a 2020 2020 2020 2020 7072 6564 6963  ..        predic
+00013350: 7469 6f6e 5f69 6e74 6572 7661 6c3a 2066  tion_interval: f
+00013360: 6c6f 6174 203d 2030 2e39 2c0d 0a20 2020  loat = 0.9,..   
+00013370: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
+00013380: 6e74 7279 3a20 7374 7220 3d20 2755 5327  ntry: str = 'US'
+00013390: 2c0d 0a20 2020 2020 2020 2072 616e 646f  ,..        rando
+000133a0: 6d5f 7365 6564 3a20 696e 7420 3d20 3230  m_seed: int = 20
+000133b0: 3230 2c0d 0a20 2020 2020 2020 2076 6572  20,..        ver
+000133c0: 626f 7365 3a20 696e 7420 3d20 302c 0d0a  bose: int = 0,..
+000133d0: 2020 2020 2020 2020 6e5f 636f 6d70 6f6e          n_compon
+000133e0: 656e 7473 3a20 696e 7420 3d20 3130 2c0d  ents: int = 10,.
+000133f0: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
+00013400: 745f 6c65 6e67 7468 3a20 696e 7420 3d20  t_length: int = 
+00013410: 3134 2c0d 0a20 2020 2020 2020 206d 6f64  14,..        mod
+00013420: 656c 3a20 7374 7220 3d20 2747 4c53 272c  el: str = 'GLS',
+00013430: 0d0a 2020 2020 2020 2020 6d6f 6465 6c5f  ..        model_
+00013440: 7061 7261 6d65 7465 7273 3a20 6469 6374  parameters: dict
+00013450: 203d 207b 7d2c 0d0a 2020 2020 2020 2020   = {},..        
+00013460: 6465 636f 6d70 6f73 6974 696f 6e3a 2073  decomposition: s
+00013470: 7472 203d 2027 5043 4127 2c0d 0a20 2020  tr = 'PCA',..   
+00013480: 2020 2020 206e 5f6a 6f62 733a 2069 6e74       n_jobs: int
+00013490: 203d 202d 312c 0d0a 2020 2020 293a 0d0a   = -1,..    ):..
+000134a0: 2020 2020 2020 2020 4d6f 6465 6c4f 626a          ModelObj
+000134b0: 6563 742e 5f5f 696e 6974 5f5f 280d 0a20  ect.__init__(.. 
+000134c0: 2020 2020 2020 2020 2020 2073 656c 662c             self,
+000134d0: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
+000134e0: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
+000134f0: 2066 7265 7175 656e 6379 2c0d 0a20 2020   frequency,..   
+00013500: 2020 2020 2020 2020 2070 7265 6469 6374           predict
+00013510: 696f 6e5f 696e 7465 7276 616c 2c0d 0a20  ion_interval,.. 
+00013520: 2020 2020 2020 2020 2020 2068 6f6c 6964             holid
+00013530: 6179 5f63 6f75 6e74 7279 3d68 6f6c 6964  ay_country=holid
+00013540: 6179 5f63 6f75 6e74 7279 2c0d 0a20 2020  ay_country,..   
+00013550: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
+00013560: 7365 6564 3d72 616e 646f 6d5f 7365 6564  seed=random_seed
+00013570: 2c0d 0a20 2020 2020 2020 2020 2020 2076  ,..            v
+00013580: 6572 626f 7365 3d76 6572 626f 7365 2c0d  erbose=verbose,.
+00013590: 0a20 2020 2020 2020 2020 2020 206e 5f6a  .            n_j
+000135a0: 6f62 733d 6e5f 6a6f 6273 2c0d 0a20 2020  obs=n_jobs,..   
+000135b0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000135c0: 7365 6c66 2e6d 6f64 656c 203d 206d 6f64  self.model = mod
+000135d0: 656c 0d0a 2020 2020 2020 2020 7365 6c66  el..        self
+000135e0: 2e6d 6f64 656c 5f70 6172 616d 6574 6572  .model_parameter
+000135f0: 7320 3d20 6d6f 6465 6c5f 7061 7261 6d65  s = model_parame
+00013600: 7465 7273 0d0a 2020 2020 2020 2020 7365  ters..        se
+00013610: 6c66 2e64 6563 6f6d 706f 7369 7469 6f6e  lf.decomposition
+00013620: 203d 2064 6563 6f6d 706f 7369 7469 6f6e   = decomposition
+00013630: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
+00013640: 5f63 6f6d 706f 6e65 6e74 7320 3d20 6e5f  _components = n_
+00013650: 636f 6d70 6f6e 656e 7473 0d0a 2020 2020  components..    
+00013660: 2020 2020 7365 6c66 2e66 6f72 6563 6173      self.forecas
+00013670: 745f 6c65 6e67 7468 203d 2066 6f72 6563  t_length = forec
+00013680: 6173 745f 6c65 6e67 7468 0d0a 0d0a 2020  ast_length....  
+00013690: 2020 6465 6620 6669 7428 7365 6c66 2c20    def fit(self, 
+000136a0: 6466 2c20 6675 7475 7265 5f72 6567 7265  df, future_regre
+000136b0: 7373 6f72 3d4e 6f6e 6529 3a0d 0a20 2020  ssor=None):..   
+000136c0: 2020 2020 2022 2222 5472 6169 6e20 616c       """Train al
+000136d0: 676f 7269 7468 6d20 6769 7665 6e20 6461  gorithm given da
+000136e0: 7461 2073 7570 706c 6965 642e 0d0a 0d0a  ta supplied.....
+000136f0: 2020 2020 2020 2020 4172 6773 3a0d 0a20          Args:.. 
+00013700: 2020 2020 2020 2020 2020 2064 6620 2870             df (p
+00013710: 616e 6461 732e 4461 7461 4672 616d 6529  andas.DataFrame)
+00013720: 3a20 4461 7465 7469 6d65 2049 6e64 6578  : Datetime Index
+00013730: 6564 0d0a 2020 2020 2020 2020 2222 220d  ed..        """.
+00013740: 0a20 2020 2020 2020 2064 6620 3d20 7365  .        df = se
+00013750: 6c66 2e62 6173 6963 5f70 726f 6669 6c65  lf.basic_profile
+00013760: 2864 6629 0d0a 2020 2020 2020 2020 7365  (df)..        se
+00013770: 6c66 2e64 665f 7472 6169 6e20 3d20 6466  lf.df_train = df
+00013780: 0d0a 2020 2020 2020 2020 6966 2027 7468  ..        if 'th
+00013790: 4e27 2069 6e20 7374 7228 7365 6c66 2e6e  N' in str(self.n
+000137a0: 5f63 6f6d 706f 6e65 6e74 7329 3a0d 0a20  _components):.. 
+000137b0: 2020 2020 2020 2020 2020 206e 5f69 6e74             n_int
+000137c0: 203d 2069 6e74 2827 272e 6a6f 696e 285b   = int(''.join([
+000137d0: 7820 666f 7220 7820 696e 2073 7472 2873  x for x in str(s
+000137e0: 656c 662e 6e5f 636f 6d70 6f6e 656e 7473  elf.n_components
+000137f0: 2920 6966 2078 2e69 7364 6967 6974 2829  ) if x.isdigit()
+00013800: 5d29 290d 0a20 2020 2020 2020 2020 2020  ]))..           
+00013810: 206e 5f69 6e74 203d 2069 6e74 286e 702e   n_int = int(np.
+00013820: 666c 6f6f 7228 6466 2e73 6861 7065 5b31  floor(df.shape[1
+00013830: 5d20 2f20 6e5f 696e 7429 290d 0a20 2020  ] / n_int))..   
+00013840: 2020 2020 2020 2020 206e 5f69 6e74 203d           n_int =
+00013850: 206e 5f69 6e74 2069 6620 6e5f 696e 7420   n_int if n_int 
+00013860: 3e3d 2032 2065 6c73 6520 320d 0a20 2020  >= 2 else 2..   
+00013870: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00013880: 2020 2020 2020 2020 6e5f 696e 7420 3d20          n_int = 
+00013890: 696e 7428 2727 2e6a 6f69 6e28 5b78 2066  int(''.join([x f
+000138a0: 6f72 2078 2069 6e20 7374 7228 7365 6c66  or x in str(self
+000138b0: 2e6e 5f63 6f6d 706f 6e65 6e74 7329 2069  .n_components) i
+000138c0: 6620 782e 6973 6469 6769 7428 295d 2929  f x.isdigit()]))
+000138d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
+000138e0: 5f69 6e74 203d 206e 5f69 6e74 0d0a 0d0a  _int = n_int....
+000138f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00013900: 6465 636f 6d70 6f73 6974 696f 6e20 3d3d  decomposition ==
+00013910: 2027 5472 756e 6361 7465 6453 5644 273a   'TruncatedSVD':
+00013920: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
+00013930: 6f6d 2073 6b6c 6561 726e 2e64 6563 6f6d  om sklearn.decom
+00013940: 706f 7369 7469 6f6e 2069 6d70 6f72 7420  position import 
+00013950: 5472 756e 6361 7465 6453 5644 0d0a 0d0a  TruncatedSVD....
+00013960: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+00013970: 7366 6f72 6d65 7220 3d20 5472 756e 6361  sformer = Trunca
+00013980: 7465 6453 5644 280d 0a20 2020 2020 2020  tedSVD(..       
+00013990: 2020 2020 2020 2020 206e 5f63 6f6d 706f           n_compo
+000139a0: 6e65 6e74 733d 7365 6c66 2e6e 5f69 6e74  nents=self.n_int
+000139b0: 2c20 7261 6e64 6f6d 5f73 7461 7465 3d73  , random_state=s
+000139c0: 656c 662e 7261 6e64 6f6d 5f73 6565 640d  elf.random_seed.
+000139d0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+000139e0: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+000139f0: 662e 6465 636f 6d70 6f73 6974 696f 6e20  f.decomposition 
+00013a00: 3d3d 2027 5768 6974 656e 6564 5043 4127  == 'WhitenedPCA'
+00013a10: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00013a20: 726f 6d20 736b 6c65 6172 6e2e 6465 636f  rom sklearn.deco
+00013a30: 6d70 6f73 6974 696f 6e20 696d 706f 7274  mposition import
+00013a40: 2050 4341 0d0a 0d0a 2020 2020 2020 2020   PCA....        
+00013a50: 2020 2020 7472 616e 7366 6f72 6d65 7220      transformer 
+00013a60: 3d20 5043 4128 0d0a 2020 2020 2020 2020  = PCA(..        
+00013a70: 2020 2020 2020 2020 6e5f 636f 6d70 6f6e          n_compon
+00013a80: 656e 7473 3d73 656c 662e 6e5f 696e 742c  ents=self.n_int,
+00013a90: 2077 6869 7465 6e3d 5472 7565 2c20 7261   whiten=True, ra
+00013aa0: 6e64 6f6d 5f73 7461 7465 3d73 656c 662e  ndom_state=self.
+00013ab0: 7261 6e64 6f6d 5f73 6565 640d 0a20 2020  random_seed..   
+00013ac0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00013ad0: 2020 2020 656c 6966 2073 656c 662e 6465      elif self.de
+00013ae0: 636f 6d70 6f73 6974 696f 6e20 3d3d 2027  composition == '
+00013af0: 5043 4127 3a0d 0a20 2020 2020 2020 2020  PCA':..         
+00013b00: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
+00013b10: 6465 636f 6d70 6f73 6974 696f 6e20 696d  decomposition im
+00013b20: 706f 7274 2050 4341 0d0a 0d0a 2020 2020  port PCA....    
+00013b30: 2020 2020 2020 2020 7472 616e 7366 6f72          transfor
+00013b40: 6d65 7220 3d20 5043 4128 0d0a 2020 2020  mer = PCA(..    
+00013b50: 2020 2020 2020 2020 2020 2020 6e5f 636f              n_co
+00013b60: 6d70 6f6e 656e 7473 3d73 656c 662e 6e5f  mponents=self.n_
+00013b70: 696e 742c 2077 6869 7465 6e3d 4661 6c73  int, whiten=Fals
+00013b80: 652c 2072 616e 646f 6d5f 7374 6174 653d  e, random_state=
+00013b90: 7365 6c66 2e72 616e 646f 6d5f 7365 6564  self.random_seed
+00013ba0: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00013bb0: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
+00013bc0: 6c66 2e64 6563 6f6d 706f 7369 7469 6f6e  lf.decomposition
+00013bd0: 203d 3d20 274b 6572 6e65 6c50 4341 273a   == 'KernelPCA':
+00013be0: 0d0a 2020 2020 2020 2020 2020 2020 6672  ..            fr
+00013bf0: 6f6d 2073 6b6c 6561 726e 2e64 6563 6f6d  om sklearn.decom
+00013c00: 706f 7369 7469 6f6e 2069 6d70 6f72 7420  position import 
+00013c10: 4b65 726e 656c 5043 410d 0a0d 0a20 2020  KernelPCA....   
+00013c20: 2020 2020 2020 2020 2074 7261 6e73 666f           transfo
+00013c30: 726d 6572 203d 204b 6572 6e65 6c50 4341  rmer = KernelPCA
+00013c40: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00013c50: 2020 206e 5f63 6f6d 706f 6e65 6e74 733d     n_components=
+00013c60: 7365 6c66 2e6e 5f69 6e74 2c0d 0a20 2020  self.n_int,..   
+00013c70: 2020 2020 2020 2020 2020 2020 206b 6572               ker
+00013c80: 6e65 6c3d 2772 6266 272c 0d0a 2020 2020  nel='rbf',..    
+00013c90: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
+00013ca0: 6f6d 5f73 7461 7465 3d73 656c 662e 7261  om_state=self.ra
+00013cb0: 6e64 6f6d 5f73 6565 642c 0d0a 2020 2020  ndom_seed,..    
+00013cc0: 2020 2020 2020 2020 2020 2020 6669 745f              fit_
+00013cd0: 696e 7665 7273 655f 7472 616e 7366 6f72  inverse_transfor
+00013ce0: 6d3d 5472 7565 2c0d 0a20 2020 2020 2020  m=True,..       
+00013cf0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00013d00: 656c 6966 2073 656c 662e 6465 636f 6d70  elif self.decomp
+00013d10: 6f73 6974 696f 6e20 3d3d 2027 4661 7374  osition == 'Fast
+00013d20: 4943 4127 3a0d 0a20 2020 2020 2020 2020  ICA':..         
+00013d30: 2020 2066 726f 6d20 736b 6c65 6172 6e2e     from sklearn.
+00013d40: 6465 636f 6d70 6f73 6974 696f 6e20 696d  decomposition im
+00013d50: 706f 7274 2046 6173 7449 4341 0d0a 0d0a  port FastICA....
+00013d60: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+00013d70: 7366 6f72 6d65 7220 3d20 4661 7374 4943  sformer = FastIC
+00013d80: 4128 0d0a 2020 2020 2020 2020 2020 2020  A(..            
+00013d90: 2020 2020 6e5f 636f 6d70 6f6e 656e 7473      n_components
+00013da0: 3d73 656c 662e 6e5f 696e 742c 0d0a 2020  =self.n_int,..  
+00013db0: 2020 2020 2020 2020 2020 2020 2020 7768                wh
+00013dc0: 6974 656e 3d54 7275 652c 0d0a 2020 2020  iten=True,..    
+00013dd0: 2020 2020 2020 2020 2020 2020 7261 6e64              rand
+00013de0: 6f6d 5f73 7461 7465 3d73 656c 662e 7261  om_state=self.ra
+00013df0: 6e64 6f6d 5f73 6565 642c 0d0a 2020 2020  ndom_seed,..    
+00013e00: 2020 2020 2020 2020 2020 2020 6d61 785f              max_
+00013e10: 6974 6572 3d35 3030 2c0d 0a20 2020 2020  iter=500,..     
+00013e20: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00013e30: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+00013e40: 2020 2020 7365 6c66 2e74 7261 6e73 666f      self.transfo
+00013e50: 726d 6572 203d 2074 7261 6e73 666f 726d  rmer = transform
+00013e60: 6572 2e66 6974 2864 6629 0d0a 2020 2020  er.fit(df)..    
+00013e70: 2020 2020 6578 6365 7074 2056 616c 7565      except Value
+00013e80: 4572 726f 723a 0d0a 2020 2020 2020 2020  Error:..        
+00013e90: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00013ea0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00013eb0: 2020 2020 2020 2022 6e5f 636f 6d70 6f6e         "n_compon
+00013ec0: 656e 7473 2061 6e64 2064 6563 6f6d 706f  ents and decompo
+00013ed0: 7369 7469 6f6e 206e 6f74 2073 7569 7461  sition not suita
+00013ee0: 626c 6520 666f 7220 7468 6973 2064 6174  ble for this dat
+00013ef0: 6173 6574 2e22 0d0a 2020 2020 2020 2020  aset."..        
+00013f00: 2020 2020 290d 0a20 2020 2020 2020 2058      )..        X
+00013f10: 203d 2073 656c 662e 7472 616e 7366 6f72   = self.transfor
+00013f20: 6d65 722e 7472 616e 7366 6f72 6d28 6466  mer.transform(df
+00013f30: 290d 0a20 2020 2020 2020 2058 203d 2070  )..        X = p
+00013f40: 642e 4461 7461 4672 616d 6528 5829 0d0a  d.DataFrame(X)..
+00013f50: 2020 2020 2020 2020 582e 696e 6465 7820          X.index 
+00013f60: 3d20 6466 2e69 6e64 6578 0d0a 2020 2020  = df.index..    
+00013f70: 2020 2020 6672 6f6d 2061 7574 6f74 732e      from autots.
+00013f80: 6576 616c 7561 746f 722e 6175 746f 5f6d  evaluator.auto_m
+00013f90: 6f64 656c 2069 6d70 6f72 7420 4d6f 6465  odel import Mode
+00013fa0: 6c4d 6f6e 7374 6572 0d0a 0d0a 2020 2020  lMonster....    
+00013fb0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00013fc0: 2020 2020 2020 7365 6c66 2e6d 6f64 656c        self.model
+00013fd0: 6f62 6a20 3d20 4d6f 6465 6c4d 6f6e 7374  obj = ModelMonst
+00013fe0: 6572 280d 0a20 2020 2020 2020 2020 2020  er(..           
+00013ff0: 2020 2020 2073 656c 662e 6d6f 6465 6c2c       self.model,
+00014000: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014010: 2020 7061 7261 6d65 7465 7273 3d73 656c    parameters=sel
+00014020: 662e 6d6f 6465 6c5f 7061 7261 6d65 7465  f.model_paramete
+00014030: 7273 2c0d 0a20 2020 2020 2020 2020 2020  rs,..           
+00014040: 2020 2020 2066 7265 7175 656e 6379 3d73       frequency=s
+00014050: 656c 662e 6672 6571 7565 6e63 792c 0d0a  elf.frequency,..
+00014060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014070: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
+00014080: 7661 6c3d 7365 6c66 2e70 7265 6469 6374  val=self.predict
+00014090: 696f 6e5f 696e 7465 7276 616c 2c0d 0a20  ion_interval,.. 
+000140a0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+000140b0: 6f6c 6964 6179 5f63 6f75 6e74 7279 3d73  oliday_country=s
+000140c0: 656c 662e 686f 6c69 6461 795f 636f 756e  elf.holiday_coun
+000140d0: 7472 792c 0d0a 2020 2020 2020 2020 2020  try,..          
+000140e0: 2020 2020 2020 7261 6e64 6f6d 5f73 6565        random_see
+000140f0: 643d 7365 6c66 2e72 616e 646f 6d5f 7365  d=self.random_se
+00014100: 6564 2c0d 0a20 2020 2020 2020 2020 2020  ed,..           
+00014110: 2020 2020 2076 6572 626f 7365 3d73 656c       verbose=sel
+00014120: 662e 7665 7262 6f73 652c 0d0a 2020 2020  f.verbose,..    
+00014130: 2020 2020 2020 2020 2020 2020 6e5f 6a6f              n_jo
+00014140: 6273 3d73 656c 662e 6e5f 6a6f 6273 2c0d  bs=self.n_jobs,.
+00014150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014160: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
+00014170: 3d73 656c 662e 666f 7265 6361 7374 5f6c  =self.forecast_l
+00014180: 656e 6774 682c 0d0a 2020 2020 2020 2020  ength,..        
+00014190: 2020 2020 292e 6669 7428 582e 6173 7479      ).fit(X.asty
+000141a0: 7065 2866 6c6f 6174 292c 2066 7574 7572  pe(float), futur
+000141b0: 655f 7265 6772 6573 736f 723d 6675 7475  e_regressor=futu
+000141c0: 7265 5f72 6567 7265 7373 6f72 290d 0a20  re_regressor).. 
+000141d0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000141e0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+000141f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00014200: 2056 616c 7565 4572 726f 7228 6622 4d6f   ValueError(f"Mo
+00014210: 6465 6c20 7b73 7472 2873 656c 662e 6d6f  del {str(self.mo
+00014220: 6465 6c29 7d20 7769 7468 2065 7272 6f72  del)} with error
+00014230: 3a20 7b72 6570 7228 6529 7d22 290d 0a20  : {repr(e)}").. 
+00014240: 2020 2020 2020 2073 656c 662e 6669 745f         self.fit_
+00014250: 7275 6e74 696d 6520 3d20 6461 7465 7469  runtime = dateti
+00014260: 6d65 2e64 6174 6574 696d 652e 6e6f 7728  me.datetime.now(
+00014270: 2920 2d20 7365 6c66 2e73 7461 7274 5469  ) - self.startTi
+00014280: 6d65 0d0a 2020 2020 2020 2020 7265 7475  me..        retu
+00014290: 726e 2073 656c 660d 0a0d 0a20 2020 2064  rn self....    d
+000142a0: 6566 2070 7265 6469 6374 280d 0a20 2020  ef predict(..   
+000142b0: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
+000142c0: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
+000142d0: 6774 683a 2069 6e74 203d 204e 6f6e 652c  gth: int = None,
+000142e0: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
+000142f0: 5f72 6567 7265 7373 6f72 3d4e 6f6e 652c  _regressor=None,
+00014300: 0d0a 2020 2020 2020 2020 6a75 7374 5f70  ..        just_p
+00014310: 6f69 6e74 5f66 6f72 6563 6173 743a 2062  oint_forecast: b
+00014320: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
+00014330: 2020 293a 0d0a 2020 2020 2020 2020 2222    ):..        ""
+00014340: 2247 656e 6572 6174 6520 666f 7265 6361  "Generate foreca
+00014350: 7374 2064 6174 6120 696d 6d65 6469 6174  st data immediat
+00014360: 656c 7920 666f 6c6c 6f77 696e 6720 6461  ely following da
+00014370: 7465 7320 6f66 202e 6669 7428 292e 0d0a  tes of .fit()...
+00014380: 0d0a 2020 2020 2020 2020 4172 6773 3a0d  ..        Args:.
+00014390: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000143a0: 6563 6173 745f 6c65 6e67 7468 2028 696e  ecast_length (in
+000143b0: 7429 3a20 4e75 6d62 6572 206f 6620 7065  t): Number of pe
+000143c0: 7269 6f64 7320 6f66 2064 6174 6120 746f  riods of data to
+000143d0: 2066 6f72 6563 6173 7420 6168 6561 640d   forecast ahead.
+000143e0: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+000143f0: 7265 7373 6f72 2028 6e75 6d70 792e 4172  ressor (numpy.Ar
+00014400: 7261 7929 3a20 6164 6469 7469 6f6e 616c  ray): additional
+00014410: 2072 6567 7265 7373 6f72 2c20 6e6f 7420   regressor, not 
+00014420: 7573 6564 0d0a 2020 2020 2020 2020 2020  used..          
+00014430: 2020 6a75 7374 5f70 6f69 6e74 5f66 6f72    just_point_for
+00014440: 6563 6173 7420 2862 6f6f 6c29 3a20 4966  ecast (bool): If
+00014450: 2054 7275 652c 2072 6574 7572 6e20 6120   True, return a 
+00014460: 7061 6e64 6173 2e44 6174 6146 7261 6d65  pandas.DataFrame
+00014470: 206f 6620 6a75 7374 2070 6f69 6e74 2066   of just point f
+00014480: 6f72 6563 6173 7473 0d0a 0d0a 2020 2020  orecasts....    
+00014490: 2020 2020 5265 7475 726e 733a 0d0a 2020      Returns:..  
+000144a0: 2020 2020 2020 2020 2020 4569 7468 6572            Either
+000144b0: 2061 2050 7265 6469 6374 696f 6e4f 626a   a PredictionObj
+000144c0: 6563 7420 6f66 2066 6f72 6563 6173 7473  ect of forecasts
+000144d0: 2061 6e64 206d 6574 6164 6174 612c 206f   and metadata, o
+000144e0: 720d 0a20 2020 2020 2020 2020 2020 2069  r..            i
+000144f0: 6620 6a75 7374 5f70 6f69 6e74 5f66 6f72  f just_point_for
+00014500: 6563 6173 7420 3d3d 2054 7275 652c 2061  ecast == True, a
+00014510: 2064 6174 6166 7261 6d65 206f 6620 706f   dataframe of po
+00014520: 696e 7420 666f 7265 6361 7374 730d 0a20  int forecasts.. 
+00014530: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00014540: 2020 2020 7072 6564 6963 7453 7461 7274      predictStart
+00014550: 5469 6d65 203d 2064 6174 6574 696d 652e  Time = datetime.
+00014560: 6461 7465 7469 6d65 2e6e 6f77 2829 0d0a  datetime.now()..
+00014570: 0d0a 2020 2020 2020 2020 6966 2066 6f72  ..        if for
+00014580: 6563 6173 745f 6c65 6e67 7468 2069 7320  ecast_length is 
+00014590: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+000145a0: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
+000145b0: 7468 203d 2073 656c 662e 666f 7265 6361  th = self.foreca
+000145c0: 7374 5f6c 656e 6774 680d 0a20 2020 2020  st_length..     
+000145d0: 2020 2058 4120 3d20 7365 6c66 2e6d 6f64     XA = self.mod
+000145e0: 656c 6f62 6a2e 7072 6564 6963 7428 0d0a  elobj.predict(..
+000145f0: 2020 2020 2020 2020 2020 2020 666f 7265              fore
+00014600: 6361 7374 5f6c 656e 6774 683d 666f 7265  cast_length=fore
+00014610: 6361 7374 5f6c 656e 6774 682c 2066 7574  cast_length, fut
+00014620: 7572 655f 7265 6772 6573 736f 723d 6675  ure_regressor=fu
+00014630: 7475 7265 5f72 6567 7265 7373 6f72 0d0a  ture_regressor..
+00014640: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00014650: 2020 2058 6620 3d20 7365 6c66 2e74 7261     Xf = self.tra
+00014660: 6e73 666f 726d 6572 2e69 6e76 6572 7365  nsformer.inverse
+00014670: 5f74 7261 6e73 666f 726d 286e 702e 6172  _transform(np.ar
+00014680: 7261 7928 5841 2e66 6f72 6563 6173 7429  ray(XA.forecast)
+00014690: 290d 0a20 2020 2020 2020 2069 6620 6e6f  )..        if no
+000146a0: 7420 6973 696e 7374 616e 6365 2858 662c  t isinstance(Xf,
+000146b0: 2070 642e 4461 7461 4672 616d 6529 3a0d   pd.DataFrame):.
+000146c0: 0a20 2020 2020 2020 2020 2020 2058 6620  .            Xf 
+000146d0: 3d20 7064 2e44 6174 6146 7261 6d65 2858  = pd.DataFrame(X
+000146e0: 6629 0d0a 2020 2020 2020 2020 5866 2e63  f)..        Xf.c
+000146f0: 6f6c 756d 6e73 203d 2073 656c 662e 636f  olumns = self.co
+00014700: 6c75 6d6e 5f6e 616d 6573 0d0a 2020 2020  lumn_names..    
+00014710: 2020 2020 5866 2e69 6e64 6578 203d 2073      Xf.index = s
+00014720: 656c 662e 6372 6561 7465 5f66 6f72 6563  elf.create_forec
+00014730: 6173 745f 696e 6465 7828 666f 7265 6361  ast_index(foreca
+00014740: 7374 5f6c 656e 6774 683d 666f 7265 6361  st_length=foreca
+00014750: 7374 5f6c 656e 6774 6829 0d0a 2020 2020  st_length)..    
+00014760: 2020 2020 5866 203d 2058 662e 6173 7479      Xf = Xf.asty
+00014770: 7065 2866 6c6f 6174 290d 0a20 2020 2020  pe(float)..     
+00014780: 2020 2069 6620 6a75 7374 5f70 6f69 6e74     if just_point
+00014790: 5f66 6f72 6563 6173 743a 0d0a 2020 2020  _forecast:..    
+000147a0: 2020 2020 2020 2020 7265 7475 726e 2058          return X
+000147b0: 660d 0a20 2020 2020 2020 2065 6c73 653a  f..        else:
+000147c0: 0d0a 2020 2020 2020 2020 2020 2020 2222  ..            ""
+000147d0: 220d 0a20 2020 2020 2020 2020 2020 2075  "..            u
+000147e0: 7070 6572 5f66 6f72 6563 6173 7420 3d20  pper_forecast = 
+000147f0: 7365 6c66 2e74 7261 6e73 666f 726d 6572  self.transformer
+00014800: 2e69 6e76 6572 7365 5f74 7261 6e73 666f  .inverse_transfo
+00014810: 726d 286e 702e 6172 7261 7928 5841 2e75  rm(np.array(XA.u
+00014820: 7070 6572 5f66 6f72 6563 6173 7429 290d  pper_forecast)).
+00014830: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00014840: 6e6f 7420 6973 696e 7374 616e 6365 2875  not isinstance(u
+00014850: 7070 6572 5f66 6f72 6563 6173 742c 2070  pper_forecast, p
+00014860: 642e 4461 7461 4672 616d 6529 3a0d 0a20  d.DataFrame):.. 
+00014870: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00014880: 7070 6572 5f66 6f72 6563 6173 7420 3d20  pper_forecast = 
+00014890: 7064 2e44 6174 6146 7261 6d65 2875 7070  pd.DataFrame(upp
+000148a0: 6572 5f66 6f72 6563 6173 7429 0d0a 2020  er_forecast)..  
+000148b0: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
+000148c0: 666f 7265 6361 7374 2e63 6f6c 756d 6e73  forecast.columns
+000148d0: 203d 2073 656c 662e 636f 6c75 6d6e 5f6e   = self.column_n
+000148e0: 616d 6573 0d0a 2020 2020 2020 2020 2020  ames..          
+000148f0: 2020 7570 7065 725f 666f 7265 6361 7374    upper_forecast
+00014900: 2e69 6e64 6578 203d 2073 656c 662e 6372  .index = self.cr
+00014910: 6561 7465 5f66 6f72 6563 6173 745f 696e  eate_forecast_in
+00014920: 6465 7828 666f 7265 6361 7374 5f6c 656e  dex(forecast_len
+00014930: 6774 683d 666f 7265 6361 7374 5f6c 656e  gth=forecast_len
+00014940: 6774 6829 0d0a 0d0a 2020 2020 2020 2020  gth)....        
+00014950: 2020 2020 6c6f 7765 725f 666f 7265 6361      lower_foreca
+00014960: 7374 203d 2073 656c 662e 7472 616e 7366  st = self.transf
+00014970: 6f72 6d65 722e 696e 7665 7273 655f 7472  ormer.inverse_tr
+00014980: 616e 7366 6f72 6d28 6e70 2e61 7272 6179  ansform(np.array
+00014990: 2858 412e 6c6f 7765 725f 666f 7265 6361  (XA.lower_foreca
+000149a0: 7374 2929 0d0a 2020 2020 2020 2020 2020  st))..          
+000149b0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+000149c0: 6e63 6528 6c6f 7765 725f 666f 7265 6361  nce(lower_foreca
+000149d0: 7374 2c20 7064 2e44 6174 6146 7261 6d65  st, pd.DataFrame
+000149e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000149f0: 2020 2020 6c6f 7765 725f 666f 7265 6361      lower_foreca
+00014a00: 7374 203d 2070 642e 4461 7461 4672 616d  st = pd.DataFram
+00014a10: 6528 6c6f 7765 725f 666f 7265 6361 7374  e(lower_forecast
+00014a20: 290d 0a20 2020 2020 2020 2020 2020 206c  )..            l
+00014a30: 6f77 6572 5f66 6f72 6563 6173 742e 636f  ower_forecast.co
+00014a40: 6c75 6d6e 7320 3d20 7365 6c66 2e63 6f6c  lumns = self.col
+00014a50: 756d 6e5f 6e61 6d65 730d 0a20 2020 2020  umn_names..     
+00014a60: 2020 2020 2020 206c 6f77 6572 5f66 6f72         lower_for
+00014a70: 6563 6173 742e 696e 6465 7820 3d20 7365  ecast.index = se
+00014a80: 6c66 2e63 7265 6174 655f 666f 7265 6361  lf.create_foreca
+00014a90: 7374 5f69 6e64 6578 2866 6f72 6563 6173  st_index(forecas
+00014aa0: 745f 6c65 6e67 7468 3d66 6f72 6563 6173  t_length=forecas
+00014ab0: 745f 6c65 6e67 7468 290d 0a20 2020 2020  t_length)..     
+00014ac0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00014ad0: 2020 2020 2020 2020 7570 7065 725f 666f          upper_fo
+00014ae0: 7265 6361 7374 2c20 6c6f 7765 725f 666f  recast, lower_fo
+00014af0: 7265 6361 7374 203d 2050 6f69 6e74 5f74  recast = Point_t
+00014b00: 6f5f 5072 6f62 6162 696c 6974 7928 0d0a  o_Probability(..
+00014b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b20: 7365 6c66 2e64 665f 7472 6169 6e2c 0d0a  self.df_train,..
+00014b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b40: 5866 2c0d 0a20 2020 2020 2020 2020 2020  Xf,..           
+00014b50: 2020 2020 206d 6574 686f 643d 2769 6e66       method='inf
+00014b60: 6572 7265 645f 6e6f 726d 616c 272c 0d0a  erred_normal',..
+00014b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b80: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
+00014b90: 7661 6c3d 7365 6c66 2e70 7265 6469 6374  val=self.predict
+00014ba0: 696f 6e5f 696e 7465 7276 616c 2c0d 0a20  ion_interval,.. 
+00014bb0: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00014bc0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00014bd0: 6963 745f 7275 6e74 696d 6520 3d20 6461  ict_runtime = da
+00014be0: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
+00014bf0: 6e6f 7728 2920 2d20 7072 6564 6963 7453  now() - predictS
+00014c00: 7461 7274 5469 6d65 0d0a 2020 2020 2020  tartTime..      
+00014c10: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
+00014c20: 203d 2050 7265 6469 6374 696f 6e4f 626a   = PredictionObj
+00014c30: 6563 7428 0d0a 2020 2020 2020 2020 2020  ect(..          
+00014c40: 2020 2020 2020 6d6f 6465 6c5f 6e61 6d65        model_name
+00014c50: 3d73 656c 662e 6e61 6d65 2c0d 0a20 2020  =self.name,..   
+00014c60: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00014c70: 6563 6173 745f 6c65 6e67 7468 3d66 6f72  ecast_length=for
+00014c80: 6563 6173 745f 6c65 6e67 7468 2c0d 0a20  ecast_length,.. 
+00014c90: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00014ca0: 6f72 6563 6173 745f 696e 6465 783d 5866  orecast_index=Xf
+00014cb0: 2e69 6e64 6578 2c0d 0a20 2020 2020 2020  .index,..       
+00014cc0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+00014cd0: 745f 636f 6c75 6d6e 733d 5866 2e63 6f6c  t_columns=Xf.col
+00014ce0: 756d 6e73 2c0d 0a20 2020 2020 2020 2020  umns,..         
+00014cf0: 2020 2020 2020 206c 6f77 6572 5f66 6f72         lower_for
+00014d00: 6563 6173 743d 6c6f 7765 725f 666f 7265  ecast=lower_fore
+00014d10: 6361 7374 2c0d 0a20 2020 2020 2020 2020  cast,..         
+00014d20: 2020 2020 2020 2066 6f72 6563 6173 743d         forecast=
+00014d30: 5866 2c0d 0a20 2020 2020 2020 2020 2020  Xf,..           
+00014d40: 2020 2020 2075 7070 6572 5f66 6f72 6563       upper_forec
+00014d50: 6173 743d 7570 7065 725f 666f 7265 6361  ast=upper_foreca
+00014d60: 7374 2c0d 0a20 2020 2020 2020 2020 2020  st,..           
+00014d70: 2020 2020 2070 7265 6469 6374 696f 6e5f       prediction_
+00014d80: 696e 7465 7276 616c 3d73 656c 662e 7072  interval=self.pr
+00014d90: 6564 6963 7469 6f6e 5f69 6e74 6572 7661  ediction_interva
+00014da0: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
+00014db0: 2020 2020 7072 6564 6963 745f 7275 6e74      predict_runt
+00014dc0: 696d 653d 7072 6564 6963 745f 7275 6e74  ime=predict_runt
+00014dd0: 696d 652c 0d0a 2020 2020 2020 2020 2020  ime,..          
+00014de0: 2020 2020 2020 6669 745f 7275 6e74 696d        fit_runtim
+00014df0: 653d 7365 6c66 2e66 6974 5f72 756e 7469  e=self.fit_runti
+00014e00: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
+00014e10: 2020 2020 206d 6f64 656c 5f70 6172 616d       model_param
+00014e20: 6574 6572 733d 7365 6c66 2e67 6574 5f70  eters=self.get_p
+00014e30: 6172 616d 7328 292c 0d0a 2020 2020 2020  arams(),..      
+00014e40: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00014e50: 2020 2020 2072 6574 7572 6e20 7072 6564       return pred
+00014e60: 6963 7469 6f6e 0d0a 0d0a 2020 2020 6465  iction....    de
+00014e70: 6620 6765 745f 6e65 775f 7061 7261 6d73  f get_new_params
+00014e80: 2873 656c 662c 206d 6574 686f 643a 2073  (self, method: s
+00014e90: 7472 203d 2027 7261 6e64 6f6d 2729 3a0d  tr = 'random'):.
+00014ea0: 0a20 2020 2020 2020 2022 2222 5265 7475  .        """Retu
+00014eb0: 726e 2064 6963 7420 6f66 206e 6577 2070  rn dict of new p
+00014ec0: 6172 616d 6574 6572 7320 666f 7220 7061  arameters for pa
+00014ed0: 7261 6d65 7465 7220 7475 6e69 6e67 2e22  rameter tuning."
+00014ee0: 2222 0d0a 2020 2020 2020 2020 6e5f 636f  ""..        n_co
+00014ef0: 6d70 6f6e 656e 7473 5f63 686f 6963 6520  mponents_choice 
+00014f00: 3d20 6e70 2e72 616e 646f 6d2e 6368 6f69  = np.random.choi
+00014f10: 6365 280d 0a20 2020 2020 2020 2020 2020  ce(..           
+00014f20: 2061 3d5b 3130 2c20 2731 3074 684e 275d   a=[10, '10thN']
+00014f30: 2c20 7369 7a65 3d31 2c20 703d 5b30 2e36  , size=1, p=[0.6
+00014f40: 2c20 302e 345d 0d0a 2020 2020 2020 2020  , 0.4]..        
+00014f50: 292e 6974 656d 2829 0d0a 2020 2020 2020  ).item()..      
+00014f60: 2020 6465 636f 6d70 6f73 6974 696f 6e5f    decomposition_
+00014f70: 6368 6f69 6365 203d 206e 702e 7261 6e64  choice = np.rand
+00014f80: 6f6d 2e63 686f 6963 6528 0d0a 2020 2020  om.choice(..    
+00014f90: 2020 2020 2020 2020 613d 5b27 5472 756e          a=['Trun
+00014fa0: 6361 7465 6453 5644 272c 2027 5768 6974  catedSVD', 'Whit
+00014fb0: 656e 6564 5043 4127 2c20 2750 4341 272c  enedPCA', 'PCA',
+00014fc0: 2027 4b65 726e 656c 5043 4127 2c20 2746   'KernelPCA', 'F
+00014fd0: 6173 7449 4341 275d 2c0d 0a20 2020 2020  astICA'],..     
+00014fe0: 2020 2020 2020 2073 697a 653d 312c 0d0a         size=1,..
+00014ff0: 2020 2020 2020 2020 2020 2020 703d 5b30              p=[0
+00015000: 2e30 352c 2030 2e30 352c 2030 2e35 2c20  .05, 0.05, 0.5, 
+00015010: 302e 322c 2030 2e32 5d2c 0d0a 2020 2020  0.2, 0.2],..    
+00015020: 2020 2020 292e 6974 656d 2829 0d0a 2020      ).item()..  
+00015030: 2020 2020 2020 6d6f 6465 6c5f 6c69 7374        model_list
+00015040: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
+00015050: 2020 274c 6173 7456 616c 7565 4e61 6976    'LastValueNaiv
+00015060: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
+00015070: 2027 474c 5327 2c0d 0a20 2020 2020 2020   'GLS',..       
+00015080: 2020 2020 2027 5465 6e73 6f72 666c 6f77       'Tensorflow
+00015090: 5354 5327 2c0d 0a20 2020 2020 2020 2020  STS',..         
+000150a0: 2020 2027 474c 4d27 2c0d 0a20 2020 2020     'GLM',..     
+000150b0: 2020 2020 2020 2027 4554 5327 2c0d 0a20         'ETS',.. 
+000150c0: 2020 2020 2020 2020 2020 2027 4642 5072             'FBPr
+000150d0: 6f70 6865 7427 2c0d 0a20 2020 2020 2020  ophet',..       
+000150e0: 2020 2020 2027 4d6f 7469 6653 696d 756c       'MotifSimul
+000150f0: 6174 696f 6e27 2c0d 0a20 2020 2020 2020  ation',..       
+00015100: 2020 2020 2027 526f 6c6c 696e 6752 6567       'RollingReg
+00015110: 7265 7373 696f 6e27 2c0d 0a20 2020 2020  ression',..     
+00015120: 2020 2020 2020 2027 5769 6e64 6f77 5265         'WindowRe
+00015130: 6772 6573 7369 6f6e 272c 0d0a 2020 2020  gression',..    
+00015140: 2020 2020 2020 2020 2755 6e6f 6273 6572          'Unobser
+00015150: 7665 6443 6f6d 706f 6e65 6e74 7327 2c0d  vedComponents',.
+00015160: 0a20 2020 2020 2020 2020 2020 2027 5645  .            'VE
+00015170: 434d 272c 0d0a 2020 2020 2020 2020 5d0d  CM',..        ].
+00015180: 0a20 2020 2020 2020 206d 6f64 656c 5f73  .        model_s
+00015190: 7472 203d 206e 702e 7261 6e64 6f6d 2e63  tr = np.random.c
+000151a0: 686f 6963 6528 0d0a 2020 2020 2020 2020  hoice(..        
+000151b0: 2020 2020 6d6f 6465 6c5f 6c69 7374 2c0d      model_list,.
+000151c0: 0a20 2020 2020 2020 2020 2020 2073 697a  .            siz
+000151d0: 653d 312c 0d0a 2020 2020 2020 2020 2020  e=1,..          
+000151e0: 2020 703d 5b30 2e30 312c 2030 2e30 312c    p=[0.01, 0.01,
+000151f0: 2030 2e30 312c 2030 2e30 312c 2030 2e30   0.01, 0.01, 0.0
+00015200: 312c 2030 2e37 2c20 302e 3031 2c20 302e  1, 0.7, 0.01, 0.
+00015210: 3032 2c20 302e 312c 2030 2e31 2c20 302e  02, 0.1, 0.1, 0.
+00015220: 3032 5d2c 0d0a 2020 2020 2020 2020 292e  02],..        ).
+00015230: 6974 656d 2829 0d0a 2020 2020 2020 2020  item()..        
+00015240: 6d6f 6465 6c5f 7374 7220 3d20 6e70 2e72  model_str = np.r
+00015250: 616e 646f 6d2e 6368 6f69 6365 286d 6f64  andom.choice(mod
+00015260: 656c 5f6c 6973 7429 0d0a 2020 2020 2020  el_list)..      
+00015270: 2020 6672 6f6d 2061 7574 6f74 732e 6576    from autots.ev
+00015280: 616c 7561 746f 722e 6175 746f 5f6d 6f64  aluator.auto_mod
+00015290: 656c 2069 6d70 6f72 7420 4d6f 6465 6c4d  el import ModelM
+000152a0: 6f6e 7374 6572 0d0a 0d0a 2020 2020 2020  onster....      
+000152b0: 2020 7061 7261 6d5f 6469 6374 203d 204d    param_dict = M
+000152c0: 6f64 656c 4d6f 6e73 7465 7228 6d6f 6465  odelMonster(mode
+000152d0: 6c5f 7374 7229 2e67 6574 5f6e 6577 5f70  l_str).get_new_p
+000152e0: 6172 616d 7328 290d 0a20 2020 2020 2020  arams()..       
+000152f0: 2072 6574 7572 6e20 7b0d 0a20 2020 2020   return {..     
+00015300: 2020 2020 2020 2027 6d6f 6465 6c27 3a20         'model': 
+00015310: 6d6f 6465 6c5f 7374 722c 0d0a 2020 2020  model_str,..    
+00015320: 2020 2020 2020 2020 276d 6f64 656c 5f70          'model_p
+00015330: 6172 616d 6574 6572 7327 3a20 7061 7261  arameters': para
+00015340: 6d5f 6469 6374 2c0d 0a20 2020 2020 2020  m_dict,..       
+00015350: 2020 2020 2027 6465 636f 6d70 6f73 6974       'decomposit
+00015360: 696f 6e27 3a20 6465 636f 6d70 6f73 6974  ion': decomposit
+00015370: 696f 6e5f 6368 6f69 6365 2c0d 0a20 2020  ion_choice,..   
+00015380: 2020 2020 2020 2020 2027 6e5f 636f 6d70           'n_comp
+00015390: 6f6e 656e 7473 273a 206e 5f63 6f6d 706f  onents': n_compo
+000153a0: 6e65 6e74 735f 6368 6f69 6365 2c0d 0a20  nents_choice,.. 
+000153b0: 2020 2020 2020 207d 0d0a 0d0a 2020 2020         }....    
+000153c0: 6465 6620 6765 745f 7061 7261 6d73 2873  def get_params(s
+000153d0: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+000153e0: 2222 5265 7475 726e 2064 6963 7420 6f66  ""Return dict of
+000153f0: 2063 7572 7265 6e74 2070 6172 616d 6574   current paramet
+00015400: 6572 732e 2222 220d 0a20 2020 2020 2020  ers."""..       
+00015410: 2072 6574 7572 6e20 7b0d 0a20 2020 2020   return {..     
+00015420: 2020 2020 2020 2027 6d6f 6465 6c27 3a20         'model': 
+00015430: 7365 6c66 2e6d 6f64 656c 2c0d 0a20 2020  self.model,..   
+00015440: 2020 2020 2020 2020 2027 6d6f 6465 6c5f           'model_
+00015450: 7061 7261 6d65 7465 7273 273a 2073 656c  parameters': sel
+00015460: 662e 6d6f 6465 6c5f 7061 7261 6d65 7465  f.model_paramete
+00015470: 7273 2c0d 0a20 2020 2020 2020 2020 2020  rs,..           
+00015480: 2027 6465 636f 6d70 6f73 6974 696f 6e27   'decomposition'
+00015490: 3a20 7365 6c66 2e64 6563 6f6d 706f 7369  : self.decomposi
+000154a0: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
+000154b0: 2020 2027 6e5f 636f 6d70 6f6e 656e 7473     'n_components
+000154c0: 273a 2073 656c 662e 6e5f 636f 6d70 6f6e  ': self.n_compon
+000154d0: 656e 7473 2c0d 0a20 2020 2020 2020 207d  ents,..        }
+000154e0: 0d0a 0d0a 0d0a 636c 6173 7320 4461 7465  ......class Date
+000154f0: 7061 7274 5265 6772 6573 7369 6f6e 284d  partRegression(M
+00015500: 6f64 656c 4f62 6a65 6374 293a 0d0a 2020  odelObject):..  
+00015510: 2020 2222 2252 6567 7265 7373 696f 6e20    """Regression 
+00015520: 6e6f 7420 6f6e 2073 6572 6965 7320 6275  not on series bu
+00015530: 7420 6461 7465 7469 6d65 0d0a 0d0a 2020  t datetime....  
+00015540: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
+00015550: 206e 616d 6520 2873 7472 293a 2053 7472   name (str): Str
+00015560: 696e 6720 746f 2069 6465 6e74 6966 7920  ing to identify 
+00015570: 636c 6173 730d 0a20 2020 2020 2020 2066  class..        f
+00015580: 7265 7175 656e 6379 2028 7374 7229 3a20  requency (str): 
+00015590: 5374 7269 6e67 2061 6c69 6173 206f 6620  String alias of 
+000155a0: 6461 7465 7469 6d65 2069 6e64 6578 2066  datetime index f
+000155b0: 7265 7175 656e 6379 206f 7220 656c 7365  requency or else
+000155c0: 2027 696e 6665 7227 0d0a 2020 2020 2020   'infer'..      
+000155d0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
+000155e0: 6572 7661 6c20 2866 6c6f 6174 293a 2043  erval (float): C
+000155f0: 6f6e 6669 6465 6e63 6520 696e 7465 7276  onfidence interv
+00015600: 616c 2066 6f72 2070 726f 6261 6269 6c69  al for probabili
+00015610: 7374 6963 2066 6f72 6563 6173 740d 0a20  stic forecast.. 
+00015620: 2020 2022 2222 0d0a 0d0a 2020 2020 6465     """....    de
+00015630: 6620 5f5f 696e 6974 5f5f 280d 0a20 2020  f __init__(..   
+00015640: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
+00015650: 2020 2020 6e61 6d65 3a20 7374 7220 3d20      name: str = 
+00015660: 2244 6174 6570 6172 7452 6567 7265 7373  "DatepartRegress
+00015670: 696f 6e22 2c0d 0a20 2020 2020 2020 2066  ion",..        f
+00015680: 7265 7175 656e 6379 3a20 7374 7220 3d20  requency: str = 
+00015690: 2769 6e66 6572 272c 0d0a 2020 2020 2020  'infer',..      
+000156a0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
+000156b0: 6572 7661 6c3a 2066 6c6f 6174 203d 2030  erval: float = 0
+000156c0: 2e39 2c0d 0a20 2020 2020 2020 2068 6f6c  .9,..        hol
+000156d0: 6964 6179 5f63 6f75 6e74 7279 3a20 7374  iday_country: st
+000156e0: 7220 3d20 2755 5327 2c0d 0a20 2020 2020  r = 'US',..     
+000156f0: 2020 2072 616e 646f 6d5f 7365 6564 3a20     random_seed: 
+00015700: 696e 7420 3d20 3230 3230 2c0d 0a20 2020  int = 2020,..   
+00015710: 2020 2020 2076 6572 626f 7365 3a20 696e       verbose: in
+00015720: 7420 3d20 302c 0d0a 2020 2020 2020 2020  t = 0,..        
+00015730: 666f 7265 6361 7374 5f6c 656e 6774 683a  forecast_length:
+00015740: 2069 6e74 203d 2031 2c0d 0a20 2020 2020   int = 1,..     
+00015750: 2020 206e 5f6a 6f62 733a 2069 6e74 203d     n_jobs: int =
+00015760: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
+00015770: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
+00015780: 3a20 6469 6374 203d 207b 0d0a 2020 2020  : dict = {..    
+00015790: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
+000157a0: 2027 4465 6369 7369 6f6e 5472 6565 272c   'DecisionTree',
+000157b0: 0d0a 2020 2020 2020 2020 2020 2020 226d  ..            "m
+000157c0: 6f64 656c 5f70 6172 616d 7322 3a20 7b22  odel_params": {"
+000157d0: 6d61 785f 6465 7074 6822 3a20 352c 2022  max_depth": 5, "
+000157e0: 6d69 6e5f 7361 6d70 6c65 735f 7370 6c69  min_samples_spli
+000157f0: 7422 3a20 327d 2c0d 0a20 2020 2020 2020  t": 2},..       
+00015800: 207d 2c0d 0a20 2020 2020 2020 2064 6174   },..        dat
+00015810: 6570 6172 745f 6d65 7468 6f64 3a20 7374  epart_method: st
+00015820: 7220 3d20 2765 7870 616e 6465 6427 2c0d  r = 'expanded',.
+00015830: 0a20 2020 2020 2020 2070 6f6c 796e 6f6d  .        polynom
+00015840: 6961 6c5f 6465 6772 6565 3a20 696e 7420  ial_degree: int 
+00015850: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+00015860: 2072 6567 7265 7373 696f 6e5f 7479 7065   regression_type
+00015870: 3a20 7374 7220 3d20 4e6f 6e65 2c0d 0a20  : str = None,.. 
+00015880: 2020 2020 2020 202a 2a6b 7761 7267 732c         **kwargs,
+00015890: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+000158a0: 2020 4d6f 6465 6c4f 626a 6563 742e 5f5f    ModelObject.__
+000158b0: 696e 6974 5f5f 280d 0a20 2020 2020 2020  init__(..       
+000158c0: 2020 2020 2073 656c 662c 0d0a 2020 2020       self,..    
+000158d0: 2020 2020 2020 2020 6e61 6d65 2c0d 0a20          name,.. 
+000158e0: 2020 2020 2020 2020 2020 2066 7265 7175             frequ
+000158f0: 656e 6379 2c0d 0a20 2020 2020 2020 2020  ency,..         
+00015900: 2020 2070 7265 6469 6374 696f 6e5f 696e     prediction_in
+00015910: 7465 7276 616c 2c0d 0a20 2020 2020 2020  terval,..       
+00015920: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
+00015930: 6e74 7279 3d68 6f6c 6964 6179 5f63 6f75  ntry=holiday_cou
+00015940: 6e74 7279 2c0d 0a20 2020 2020 2020 2020  ntry,..         
+00015950: 2020 2072 616e 646f 6d5f 7365 6564 3d72     random_seed=r
+00015960: 616e 646f 6d5f 7365 6564 2c0d 0a20 2020  andom_seed,..   
+00015970: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+00015980: 696f 6e5f 7479 7065 3d72 6567 7265 7373  ion_type=regress
+00015990: 696f 6e5f 7479 7065 2c0d 0a20 2020 2020  ion_type,..     
+000159a0: 2020 2020 2020 2076 6572 626f 7365 3d76         verbose=v
+000159b0: 6572 626f 7365 2c0d 0a20 2020 2020 2020  erbose,..       
+000159c0: 2020 2020 206e 5f6a 6f62 733d 6e5f 6a6f       n_jobs=n_jo
+000159d0: 6273 2c0d 0a20 2020 2020 2020 2029 0d0a  bs,..        )..
+000159e0: 2020 2020 2020 2020 7365 6c66 2e72 6567          self.reg
+000159f0: 7265 7373 696f 6e5f 6d6f 6465 6c20 3d20  ression_model = 
+00015a00: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
+00015a10: 0d0a 2020 2020 2020 2020 7365 6c66 2e64  ..        self.d
+00015a20: 6174 6570 6172 745f 6d65 7468 6f64 203d  atepart_method =
+00015a30: 2064 6174 6570 6172 745f 6d65 7468 6f64   datepart_method
+00015a40: 0d0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
+00015a50: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
+00015a60: 203d 2070 6f6c 796e 6f6d 6961 6c5f 6465   = polynomial_de
+00015a70: 6772 6565 0d0a 2020 2020 2020 2020 7365  gree..        se
+00015a80: 6c66 2e66 6f72 6563 6173 745f 6c65 6e67  lf.forecast_leng
+00015a90: 7468 203d 2066 6f72 6563 6173 745f 6c65  th = forecast_le
+00015aa0: 6e67 7468 0d0a 0d0a 2020 2020 6465 6620  ngth....    def 
+00015ab0: 6669 7428 0d0a 2020 2020 2020 2020 7365  fit(..        se
+00015ac0: 6c66 2c0d 0a20 2020 2020 2020 2064 662c  lf,..        df,
+00015ad0: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
+00015ae0: 5f72 6567 7265 7373 6f72 3d4e 6f6e 652c  _regressor=None,
+00015af0: 0d0a 2020 2020 2020 2020 7374 6174 6963  ..        static
+00015b00: 5f72 6567 7265 7373 6f72 3d4e 6f6e 652c  _regressor=None,
+00015b10: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
+00015b20: 736f 725f 7065 725f 7365 7269 6573 3d4e  sor_per_series=N
+00015b30: 6f6e 652c 0d0a 2020 2020 293a 0d0a 2020  one,..    ):..  
+00015b40: 2020 2020 2020 2222 2254 7261 696e 2061        """Train a
+00015b50: 6c67 6f72 6974 686d 2067 6976 656e 2064  lgorithm given d
+00015b60: 6174 6120 7375 7070 6c69 6564 2e0d 0a0d  ata supplied....
+00015b70: 0a20 2020 2020 2020 2041 7267 733a 0d0a  .        Args:..
+00015b80: 2020 2020 2020 2020 2020 2020 6466 2028              df (
+00015b90: 7061 6e64 6173 2e44 6174 6146 7261 6d65  pandas.DataFrame
+00015ba0: 293a 2044 6174 6574 696d 6520 496e 6465  ): Datetime Inde
+00015bb0: 7865 640d 0a20 2020 2020 2020 2022 2222  xed..        """
+00015bc0: 0d0a 2020 2020 2020 2020 6466 203d 2073  ..        df = s
+00015bd0: 656c 662e 6261 7369 635f 7072 6f66 696c  elf.basic_profil
+00015be0: 6528 6466 290d 0a20 2020 2020 2020 2023  e(df)..        #
+00015bf0: 2069 6620 6578 7465 726e 616c 2072 6567   if external reg
+00015c00: 7265 7373 6f72 2c20 646f 2073 6f6d 6520  ressor, do some 
+00015c10: 6368 6563 6b20 7570 0d0a 2020 2020 2020  check up..      
+00015c20: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
+00015c30: 7369 6f6e 5f74 7970 6520 6973 206e 6f74  sion_type is not
+00015c40: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00015c50: 2020 2020 6966 2066 7574 7572 655f 7265      if future_re
+00015c60: 6772 6573 736f 7220 6973 204e 6f6e 653a  gressor is None:
+00015c70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015c80: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+00015c90: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+00015ca0: 2020 2020 2020 2020 2022 7265 6772 6573           "regres
+00015cb0: 7369 6f6e 5f74 7970 653d 2755 7365 7227  sion_type='User'
+00015cc0: 2062 7574 206e 6f20 6675 7475 7265 5f72   but no future_r
+00015cd0: 6567 7265 7373 6f72 2070 6173 7365 6422  egressor passed"
+00015ce0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015cf0: 2020 290d 0a0d 0a20 2020 2020 2020 2079    )....        y
+00015d00: 203d 2064 662e 746f 5f6e 756d 7079 2829   = df.to_numpy()
+00015d10: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00015d20: 2e58 203d 2064 6174 655f 7061 7274 280d  .X = date_part(.
+00015d30: 0a20 2020 2020 2020 2020 2020 2064 662e  .            df.
+00015d40: 696e 6465 782c 0d0a 2020 2020 2020 2020  index,..        
+00015d50: 2020 2020 6d65 7468 6f64 3d73 656c 662e      method=self.
+00015d60: 6461 7465 7061 7274 5f6d 6574 686f 642c  datepart_method,
+00015d70: 0d0a 2020 2020 2020 2020 2020 2020 706f  ..            po
+00015d80: 6c79 6e6f 6d69 616c 5f64 6567 7265 653d  lynomial_degree=
+00015d90: 7365 6c66 2e70 6f6c 796e 6f6d 6961 6c5f  self.polynomial_
+00015da0: 6465 6772 6565 2c0d 0a20 2020 2020 2020  degree,..       
+00015db0: 2029 0d0a 2020 2020 2020 2020 6966 2073   )..        if s
+00015dc0: 656c 662e 7265 6772 6573 7369 6f6e 5f74  elf.regression_t
+00015dd0: 7970 6520 696e 205b 2755 7365 7227 2c20  ype in ['User', 
+00015de0: 2775 7365 7227 5d3a 0d0a 2020 2020 2020  'user']:..      
+00015df0: 2020 2020 2020 2320 7265 6772 203d 2066        # regr = f
+00015e00: 7574 7572 655f 7265 6772 6573 736f 722e  uture_regressor.
+00015e10: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+00015e20: 2020 2020 2320 7265 6772 2e69 6e64 6578      # regr.index
+00015e30: 203d 2058 2e69 6e64 6578 0d0a 2020 2020   = X.index..    
+00015e40: 2020 2020 2020 2020 7365 6c66 2e58 203d          self.X =
+00015e50: 2070 642e 636f 6e63 6174 285b 7365 6c66   pd.concat([self
+00015e60: 2e58 2c20 6675 7475 7265 5f72 6567 7265  .X, future_regre
+00015e70: 7373 6f72 5d2c 2061 7869 733d 3129 0d0a  ssor], axis=1)..
+00015e80: 2020 2020 2020 2020 7365 6c66 2e58 2e63          self.X.c
+00015e90: 6f6c 756d 6e73 203d 205b 7374 7228 7863  olumns = [str(xc
+00015ea0: 2920 666f 7220 7863 2069 6e20 7365 6c66  ) for xc in self
+00015eb0: 2e58 2e63 6f6c 756d 6e73 5d0d 0a0d 0a20  .X.columns].... 
+00015ec0: 2020 2020 2020 206d 756c 7469 6f75 7470         multioutp
+00015ed0: 7574 203d 2054 7275 650d 0a20 2020 2020  ut = True..     
+00015ee0: 2020 2069 6620 792e 6e64 696d 203c 2032     if y.ndim < 2
+00015ef0: 3a0d 0a20 2020 2020 2020 2020 2020 206d  :..            m
+00015f00: 756c 7469 6f75 7470 7574 203d 2046 616c  ultioutput = Fal
+00015f10: 7365 0d0a 2020 2020 2020 2020 656c 6966  se..        elif
+00015f20: 2079 2e73 6861 7065 5b31 5d20 3c20 323a   y.shape[1] < 2:
+00015f30: 0d0a 2020 2020 2020 2020 2020 2020 6d75  ..            mu
+00015f40: 6c74 696f 7574 7075 7420 3d20 4661 6c73  ltioutput = Fals
+00015f50: 650d 0a20 2020 2020 2020 2020 2020 2079  e..            y
+00015f60: 203d 2079 2e72 6176 656c 2829 0d0a 2020   = y.ravel()..  
+00015f70: 2020 2020 2020 7365 6c66 2e6d 6f64 656c        self.model
+00015f80: 203d 2072 6574 7269 6576 655f 7265 6772   = retrieve_regr
+00015f90: 6573 736f 7228 0d0a 2020 2020 2020 2020  essor(..        
+00015fa0: 2020 2020 7265 6772 6573 7369 6f6e 5f6d      regression_m
+00015fb0: 6f64 656c 3d73 656c 662e 7265 6772 6573  odel=self.regres
+00015fc0: 7369 6f6e 5f6d 6f64 656c 2c0d 0a20 2020  sion_model,..   
+00015fd0: 2020 2020 2020 2020 2076 6572 626f 7365           verbose
+00015fe0: 3d73 656c 662e 7665 7262 6f73 652c 0d0a  =self.verbose,..
+00015ff0: 2020 2020 2020 2020 2020 2020 7665 7262              verb
+00016000: 6f73 655f 626f 6f6c 3d73 656c 662e 7665  ose_bool=self.ve
+00016010: 7262 6f73 655f 626f 6f6c 2c0d 0a20 2020  rbose_bool,..   
+00016020: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
+00016030: 7365 6564 3d73 656c 662e 7261 6e64 6f6d  seed=self.random
+00016040: 5f73 6565 642c 0d0a 2020 2020 2020 2020  _seed,..        
+00016050: 2020 2020 6e5f 6a6f 6273 3d73 656c 662e      n_jobs=self.
+00016060: 6e5f 6a6f 6273 2c0d 0a20 2020 2020 2020  n_jobs,..       
+00016070: 2020 2020 206d 756c 7469 6f75 7470 7574       multioutput
+00016080: 3d6d 756c 7469 6f75 7470 7574 2c0d 0a20  =multioutput,.. 
+00016090: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+000160a0: 2020 7365 6c66 2e64 665f 7472 6169 6e20    self.df_train 
+000160b0: 3d20 6466 0d0a 2020 2020 2020 2020 7365  = df..        se
+000160c0: 6c66 2e6d 6f64 656c 203d 2073 656c 662e  lf.model = self.
+000160d0: 6d6f 6465 6c2e 6669 7428 7365 6c66 2e58  model.fit(self.X
+000160e0: 2e61 7374 7970 6528 6e70 2e66 6c6f 6174  .astype(np.float
+000160f0: 3332 292c 2079 2e61 7374 7970 6528 6e70  32), y.astype(np
+00016100: 2e66 6c6f 6174 3332 2929 0d0a 2020 2020  .float32))..    
+00016110: 2020 2020 7365 6c66 2e73 6861 7065 203d      self.shape =
+00016120: 2064 662e 7368 6170 650d 0a20 2020 2020   df.shape..     
+00016130: 2020 2072 6574 7572 6e20 7365 6c66 0d0a     return self..
+00016140: 0d0a 2020 2020 6465 6620 6669 745f 6461  ..    def fit_da
+00016150: 7461 2873 656c 662c 2064 662c 2066 7574  ta(self, df, fut
+00016160: 7572 655f 7265 6772 6573 736f 723d 4e6f  ure_regressor=No
+00016170: 6e65 293a 0d0a 2020 2020 2020 2020 7365  ne):..        se
+00016180: 6c66 2e62 6173 6963 5f70 726f 6669 6c65  lf.basic_profile
+00016190: 2864 6629 0d0a 2020 2020 2020 2020 7265  (df)..        re
+000161a0: 7475 726e 2073 656c 660d 0a0d 0a20 2020  turn self....   
+000161b0: 2064 6566 2070 7265 6469 6374 280d 0a20   def predict(.. 
+000161c0: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+000161d0: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
+000161e0: 656e 6774 683a 2069 6e74 203d 204e 6f6e  ength: int = Non
+000161f0: 652c 0d0a 2020 2020 2020 2020 6675 7475  e,..        futu
+00016200: 7265 5f72 6567 7265 7373 6f72 3d4e 6f6e  re_regressor=Non
+00016210: 652c 0d0a 2020 2020 2020 2020 6a75 7374  e,..        just
+00016220: 5f70 6f69 6e74 5f66 6f72 6563 6173 743a  _point_forecast:
+00016230: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00016240: 2020 2020 2020 2020 6466 3d4e 6f6e 652c          df=None,
+00016250: 0d0a 2020 2020 2020 2020 7265 6772 6573  ..        regres
+00016260: 736f 725f 7065 725f 7365 7269 6573 3d4e  sor_per_series=N
+00016270: 6f6e 652c 0d0a 2020 2020 293a 0d0a 2020  one,..    ):..  
+00016280: 2020 2020 2020 2222 2247 656e 6572 6174        """Generat
+00016290: 6520 666f 7265 6361 7374 2064 6174 6120  e forecast data 
+000162a0: 696d 6d65 6469 6174 656c 7920 666f 6c6c  immediately foll
+000162b0: 6f77 696e 6720 6461 7465 7320 6f66 2069  owing dates of i
+000162c0: 6e64 6578 2073 7570 706c 6965 6420 746f  ndex supplied to
+000162d0: 202e 6669 7428 292e 0d0a 0d0a 2020 2020   .fit().....    
+000162e0: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
+000162f0: 2020 2020 2020 2066 6f72 6563 6173 745f         forecast_
+00016300: 6c65 6e67 7468 2028 696e 7429 3a20 4e75  length (int): Nu
+00016310: 6d62 6572 206f 6620 7065 7269 6f64 7320  mber of periods 
+00016320: 6f66 2064 6174 6120 746f 2066 6f72 6563  of data to forec
+00016330: 6173 7420 6168 6561 640d 0a20 2020 2020  ast ahead..     
+00016340: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+00016350: 6772 6573 736f 7220 2870 616e 6461 732e  gressor (pandas.
+00016360: 4461 7461 4672 616d 6520 6f72 2053 6572  DataFrame or Ser
+00016370: 6965 7329 3a20 4461 7465 7469 6d65 2049  ies): Datetime I
+00016380: 6e64 6578 6564 0d0a 2020 2020 2020 2020  ndexed..        
+00016390: 2020 2020 6a75 7374 5f70 6f69 6e74 5f66      just_point_f
+000163a0: 6f72 6563 6173 7420 2862 6f6f 6c29 3a20  orecast (bool): 
+000163b0: 4966 2054 7275 652c 2072 6574 7572 6e20  If True, return 
+000163c0: 6120 7061 6e64 6173 2e44 6174 6146 7261  a pandas.DataFra
+000163d0: 6d65 206f 6620 6a75 7374 2070 6f69 6e74  me of just point
+000163e0: 2066 6f72 6563 6173 7473 0d0a 0d0a 2020   forecasts....  
+000163f0: 2020 2020 2020 5265 7475 726e 733a 0d0a        Returns:..
+00016400: 2020 2020 2020 2020 2020 2020 4569 7468              Eith
+00016410: 6572 2061 2050 7265 6469 6374 696f 6e4f  er a PredictionO
+00016420: 626a 6563 7420 6f66 2066 6f72 6563 6173  bject of forecas
+00016430: 7473 2061 6e64 206d 6574 6164 6174 612c  ts and metadata,
+00016440: 206f 720d 0a20 2020 2020 2020 2020 2020   or..           
+00016450: 2069 6620 6a75 7374 5f70 6f69 6e74 5f66   if just_point_f
+00016460: 6f72 6563 6173 7420 3d3d 2054 7275 652c  orecast == True,
+00016470: 2061 2064 6174 6166 7261 6d65 206f 6620   a dataframe of 
+00016480: 706f 696e 7420 666f 7265 6361 7374 730d  point forecasts.
+00016490: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+000164a0: 2020 2020 2020 6966 2066 6f72 6563 6173        if forecas
+000164b0: 745f 6c65 6e67 7468 2069 7320 4e6f 6e65  t_length is None
+000164c0: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+000164d0: 6f72 6563 6173 745f 6c65 6e67 7468 203d  orecast_length =
+000164e0: 2073 656c 662e 666f 7265 6361 7374 5f6c   self.forecast_l
+000164f0: 656e 6774 680d 0a20 2020 2020 2020 2069  ength..        i
+00016500: 6620 6466 2069 7320 6e6f 7420 4e6f 6e65  f df is not None
+00016510: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00016520: 656c 662e 6669 745f 6461 7461 2864 6629  elf.fit_data(df)
+00016530: 0d0a 2020 2020 2020 2020 7072 6564 6963  ..        predic
+00016540: 7453 7461 7274 5469 6d65 203d 2064 6174  tStartTime = dat
+00016550: 6574 696d 652e 6461 7465 7469 6d65 2e6e  etime.datetime.n
+00016560: 6f77 2829 0d0a 2020 2020 2020 2020 696e  ow()..        in
+00016570: 6465 7820 3d20 7365 6c66 2e63 7265 6174  dex = self.creat
+00016580: 655f 666f 7265 6361 7374 5f69 6e64 6578  e_forecast_index
+00016590: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
+000165a0: 3d66 6f72 6563 6173 745f 6c65 6e67 7468  =forecast_length
+000165b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000165c0: 585f 7072 6564 203d 2064 6174 655f 7061  X_pred = date_pa
+000165d0: 7274 280d 0a20 2020 2020 2020 2020 2020  rt(..           
+000165e0: 2069 6e64 6578 2c20 6d65 7468 6f64 3d73   index, method=s
+000165f0: 656c 662e 6461 7465 7061 7274 5f6d 6574  elf.datepart_met
+00016600: 686f 642c 2070 6f6c 796e 6f6d 6961 6c5f  hod, polynomial_
+00016610: 6465 6772 6565 3d73 656c 662e 706f 6c79  degree=self.poly
+00016620: 6e6f 6d69 616c 5f64 6567 7265 650d 0a20  nomial_degree.. 
+00016630: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00016640: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
+00016650: 7369 6f6e 5f74 7970 6520 696e 205b 2755  sion_type in ['U
+00016660: 7365 7227 2c20 2775 7365 7227 5d3a 0d0a  ser', 'user']:..
+00016670: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00016680: 2e58 5f70 7265 6420 3d20 7064 2e63 6f6e  .X_pred = pd.con
+00016690: 6361 7428 0d0a 2020 2020 2020 2020 2020  cat(..          
+000166a0: 2020 2020 2020 5b73 656c 662e 585f 7072        [self.X_pr
+000166b0: 6564 2c20 6675 7475 7265 5f72 6567 7265  ed, future_regre
+000166c0: 7373 6f72 2e72 6569 6e64 6578 2869 6e64  ssor.reindex(ind
+000166d0: 6578 295d 2c20 6178 6973 3d31 0d0a 2020  ex)], axis=1..  
+000166e0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+000166f0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00016700: 2e58 5f70 7265 642e 7368 6170 655b 305d  .X_pred.shape[0]
+00016710: 203e 2069 6e64 6578 2e73 6861 7065 5b30   > index.shape[0
+00016720: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
+00016730: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00016740: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
+00016750: 2020 2020 2020 2020 2020 2066 2266 7574             f"fut
+00016760: 7572 655f 7265 6772 6573 736f 7220 7b66  ure_regressor {f
+00016770: 7574 7572 655f 7265 6772 6573 736f 722e  uture_regressor.
+00016780: 696e 6465 787d 2061 6e64 2058 207b 7365  index} and X {se
+00016790: 6c66 2e58 5f70 7265 642e 696e 6465 787d  lf.X_pred.index}
+000167a0: 2069 6e64 6578 2066 6169 6c65 6420 746f   index failed to
+000167b0: 2061 6c69 676e 220d 0a20 2020 2020 2020   align"..       
+000167c0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+000167d0: 2020 2020 7365 6c66 2e58 5f70 7265 642e      self.X_pred.
+000167e0: 636f 6c75 6d6e 7320 3d20 5b73 7472 2878  columns = [str(x
+000167f0: 6329 2066 6f72 2078 6320 696e 2073 656c  c) for xc in sel
+00016800: 662e 585f 7072 6564 2e63 6f6c 756d 6e73  f.X_pred.columns
+00016810: 5d0d 0a0d 0a20 2020 2020 2020 2074 7279  ]....        try
+00016820: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00016830: 6f72 6563 6173 7420 3d20 7064 2e44 6174  orecast = pd.Dat
+00016840: 6146 7261 6d65 280d 0a20 2020 2020 2020  aFrame(..       
+00016850: 2020 2020 2020 2020 2073 656c 662e 6d6f           self.mo
+00016860: 6465 6c2e 7072 6564 6963 7428 7365 6c66  del.predict(self
+00016870: 2e58 5f70 7265 642e 6173 7479 7065 2866  .X_pred.astype(f
+00016880: 6c6f 6174 2929 2c0d 0a20 2020 2020 2020  loat)),..       
+00016890: 2020 2020 2020 2020 2069 6e64 6578 3d69           index=i
+000168a0: 6e64 6578 2c0d 0a20 2020 2020 2020 2020  ndex,..         
+000168b0: 2020 2020 2020 2063 6f6c 756d 6e73 3d73         columns=s
+000168c0: 656c 662e 636f 6c75 6d6e 5f6e 616d 6573  elf.column_names
+000168d0: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+000168e0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+000168f0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+00016900: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00016910: 6973 6520 5661 6c75 6545 7272 6f72 280d  ise ValueError(.
+00016920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016930: 2066 2244 6174 6570 6172 7420 7072 6564   f"Datepart pred
+00016940: 6963 7469 6f6e 2077 6974 6820 7061 7261  iction with para
+00016950: 6d73 207b 7365 6c66 2e67 6574 5f70 6172  ms {self.get_par
+00016960: 616d 7328 297d 2066 6169 6c65 642e 2054  ams()} failed. T
+00016970: 6869 7320 6973 206f 6674 656e 2064 7565  his is often due
+00016980: 2074 6f20 616e 2069 6d70 726f 7065 726c   to an improperl
+00016990: 7920 696e 6465 7865 6420 6675 7475 7265  y indexed future
+000169a0: 5f72 6567 7265 7373 6f72 2028 7769 7468  _regressor (with
+000169b0: 2064 726f 705f 6d6f 7374 5f72 6563 656e   drop_most_recen
+000169c0: 7420 6573 7065 6369 616c 6c79 2922 0d0a  t especially)"..
+000169d0: 2020 2020 2020 2020 2020 2020 2920 6672              ) fr
+000169e0: 6f6d 2065 0d0a 0d0a 2020 2020 2020 2020  om e....        
+000169f0: 6966 206a 7573 745f 706f 696e 745f 666f  if just_point_fo
+00016a00: 7265 6361 7374 3a0d 0a20 2020 2020 2020  recast:..       
+00016a10: 2020 2020 2072 6574 7572 6e20 666f 7265       return fore
+00016a20: 6361 7374 0d0a 2020 2020 2020 2020 656c  cast..        el
+00016a30: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00016a40: 2075 7070 6572 5f66 6f72 6563 6173 742c   upper_forecast,
+00016a50: 206c 6f77 6572 5f66 6f72 6563 6173 7420   lower_forecast 
+00016a60: 3d20 506f 696e 745f 746f 5f50 726f 6261  = Point_to_Proba
+00016a70: 6269 6c69 7479 280d 0a20 2020 2020 2020  bility(..       
+00016a80: 2020 2020 2020 2020 2073 656c 662e 6466           self.df
+00016a90: 5f74 7261 696e 2c0d 0a20 2020 2020 2020  _train,..       
+00016aa0: 2020 2020 2020 2020 2066 6f72 6563 6173           forecas
+00016ab0: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
+00016ac0: 2020 2020 6d65 7468 6f64 3d27 696e 6665      method='infe
+00016ad0: 7272 6564 5f6e 6f72 6d61 6c27 2c0d 0a20  rred_normal',.. 
+00016ae0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00016af0: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+00016b00: 616c 3d73 656c 662e 7072 6564 6963 7469  al=self.predicti
+00016b10: 6f6e 5f69 6e74 6572 7661 6c2c 0d0a 2020  on_interval,..  
+00016b20: 2020 2020 2020 2020 2020 290d 0a0d 0a20            ).... 
+00016b30: 2020 2020 2020 2020 2020 2070 7265 6469             predi
+00016b40: 6374 5f72 756e 7469 6d65 203d 2064 6174  ct_runtime = dat
+00016b50: 6574 696d 652e 6461 7465 7469 6d65 2e6e  etime.datetime.n
+00016b60: 6f77 2829 202d 2070 7265 6469 6374 5374  ow() - predictSt
+00016b70: 6172 7454 696d 650d 0a20 2020 2020 2020  artTime..       
+00016b80: 2020 2020 2070 7265 6469 6374 696f 6e20       prediction 
+00016b90: 3d20 5072 6564 6963 7469 6f6e 4f62 6a65  = PredictionObje
+00016ba0: 6374 280d 0a20 2020 2020 2020 2020 2020  ct(..           
+00016bb0: 2020 2020 206d 6f64 656c 5f6e 616d 653d       model_name=
+00016bc0: 7365 6c66 2e6e 616d 652c 0d0a 2020 2020  self.name,..    
+00016bd0: 2020 2020 2020 2020 2020 2020 666f 7265              fore
+00016be0: 6361 7374 5f6c 656e 6774 683d 666f 7265  cast_length=fore
+00016bf0: 6361 7374 5f6c 656e 6774 682c 0d0a 2020  cast_length,..  
+00016c00: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00016c10: 7265 6361 7374 5f69 6e64 6578 3d66 6f72  recast_index=for
+00016c20: 6563 6173 742e 696e 6465 782c 0d0a 2020  ecast.index,..  
+00016c30: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00016c40: 7265 6361 7374 5f63 6f6c 756d 6e73 3d66  recast_columns=f
+00016c50: 6f72 6563 6173 742e 636f 6c75 6d6e 732c  orecast.columns,
+00016c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016c70: 2020 6c6f 7765 725f 666f 7265 6361 7374    lower_forecast
+00016c80: 3d6c 6f77 6572 5f66 6f72 6563 6173 742c  =lower_forecast,
+00016c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00016ca0: 2020 666f 7265 6361 7374 3d66 6f72 6563    forecast=forec
+00016cb0: 6173 742c 0d0a 2020 2020 2020 2020 2020  ast,..          
+00016cc0: 2020 2020 2020 7570 7065 725f 666f 7265        upper_fore
+00016cd0: 6361 7374 3d75 7070 6572 5f66 6f72 6563  cast=upper_forec
+00016ce0: 6173 742c 0d0a 2020 2020 2020 2020 2020  ast,..          
+00016cf0: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
+00016d00: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
+00016d10: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
+00016d20: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
+00016d30: 2020 2020 2070 7265 6469 6374 5f72 756e       predict_run
+00016d40: 7469 6d65 3d70 7265 6469 6374 5f72 756e  time=predict_run
+00016d50: 7469 6d65 2c0d 0a20 2020 2020 2020 2020  time,..         
+00016d60: 2020 2020 2020 2066 6974 5f72 756e 7469         fit_runti
+00016d70: 6d65 3d73 656c 662e 6669 745f 7275 6e74  me=self.fit_runt
+00016d80: 696d 652c 0d0a 2020 2020 2020 2020 2020  ime,..          
+00016d90: 2020 2020 2020 6d6f 6465 6c5f 7061 7261        model_para
+00016da0: 6d65 7465 7273 3d73 656c 662e 6765 745f  meters=self.get_
+00016db0: 7061 7261 6d73 2829 2c0d 0a20 2020 2020  params(),..     
+00016dc0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00016dd0: 2020 2020 2020 7265 7475 726e 2070 7265        return pre
+00016de0: 6469 6374 696f 6e0d 0a0d 0a20 2020 2064  diction....    d
+00016df0: 6566 2067 6574 5f6e 6577 5f70 6172 616d  ef get_new_param
+00016e00: 7328 7365 6c66 2c20 6d65 7468 6f64 3a20  s(self, method: 
+00016e10: 7374 7220 3d20 2772 616e 646f 6d27 293a  str = 'random'):
+00016e20: 0d0a 2020 2020 2020 2020 2222 2252 6574  ..        """Ret
+00016e30: 7572 6e20 6469 6374 206f 6620 6e65 7720  urn dict of new 
+00016e40: 7061 7261 6d65 7465 7273 2066 6f72 2070  parameters for p
+00016e50: 6172 616d 6574 6572 2074 756e 696e 672e  arameter tuning.
+00016e60: 2222 220d 0a20 2020 2020 2020 2069 6620  """..        if 
+00016e70: 6d65 7468 6f64 203d 3d20 2764 6565 7027  method == 'deep'
+00016e80: 3a0d 0a20 2020 2020 2020 2020 2020 206d  :..            m
+00016e90: 6f64 656c 5f63 686f 6963 6520 3d20 6765  odel_choice = ge
+00016ea0: 6e65 7261 7465 5f72 6567 7265 7373 6f72  nerate_regressor
+00016eb0: 5f70 6172 616d 7328 0d0a 2020 2020 2020  _params(..      
+00016ec0: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
+00016ed0: 6469 6374 3d64 6174 6570 6172 745f 6d6f  dict=datepart_mo
+00016ee0: 6465 6c5f 6469 6374 5f64 6565 700d 0a20  del_dict_deep.. 
+00016ef0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00016f00: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00016f10: 2020 2020 2020 2020 206d 6f64 656c 5f63           model_c
+00016f20: 686f 6963 6520 3d20 6765 6e65 7261 7465  hoice = generate
+00016f30: 5f72 6567 7265 7373 6f72 5f70 6172 616d  _regressor_param
+00016f40: 7328 6d6f 6465 6c5f 6469 6374 3d64 6174  s(model_dict=dat
+00016f50: 6570 6172 745f 6d6f 6465 6c5f 6469 6374  epart_model_dict
+00016f60: 290d 0a20 2020 2020 2020 2064 6174 6570  )..        datep
+00016f70: 6172 745f 6368 6f69 6365 203d 2072 616e  art_choice = ran
+00016f80: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+00016f90: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
+00016fa0: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+00016fb0: 6375 7272 696e 6722 2c0d 0a20 2020 2020  curring",..     
+00016fc0: 2020 2020 2020 2020 2020 2022 7369 6d70             "simp
+00016fd0: 6c65 222c 0d0a 2020 2020 2020 2020 2020  le",..          
+00016fe0: 2020 2020 2020 2265 7870 616e 6465 6422        "expanded"
+00016ff0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00017000: 2020 2022 7369 6d70 6c65 5f32 222c 0d0a     "simple_2",..
+00017010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017020: 2273 696d 706c 655f 6269 6e61 7269 7a65  "simple_binarize
+00017030: 6422 2c0d 0a20 2020 2020 2020 2020 2020  d",..           
+00017040: 2020 2020 2022 6578 7061 6e64 6564 5f62       "expanded_b
+00017050: 696e 6172 697a 6564 222c 0d0a 2020 2020  inarized",..    
+00017060: 2020 2020 2020 2020 2020 2020 2763 6f6d              'com
+00017070: 6d6f 6e5f 666f 7572 6965 7227 2c0d 0a20  mon_fourier',.. 
+00017080: 2020 2020 2020 2020 2020 205d 2c0d 0a20             ],.. 
+00017090: 2020 2020 2020 2020 2020 205b 302e 342c             [0.4,
+000170a0: 2030 2e33 2c20 302e 332c 2030 2e33 2c20   0.3, 0.3, 0.3, 
+000170b0: 302e 342c 2030 2e30 352c 2030 2e30 355d  0.4, 0.05, 0.05]
+000170c0: 2c0d 0a20 2020 2020 2020 2029 5b30 5d0d  ,..        )[0].
+000170d0: 0a20 2020 2020 2020 2069 6620 6461 7465  .        if date
+000170e0: 7061 7274 5f63 686f 6963 6520 696e 205b  part_choice in [
+000170f0: 2273 696d 706c 6522 2c20 2273 696d 706c  "simple", "simpl
+00017100: 655f 3222 2c20 2272 6563 7572 7269 6e67  e_2", "recurring
+00017110: 222c 2022 7369 6d70 6c65 5f62 696e 6172  ", "simple_binar
+00017120: 697a 6564 225d 3a0d 0a20 2020 2020 2020  ized"]:..       
+00017130: 2020 2020 2070 6f6c 796e 6f6d 6961 6c5f       polynomial_
+00017140: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
+00017150: 6368 6f69 6365 7328 5b4e 6f6e 652c 2032  choices([None, 2
+00017160: 2c20 335d 2c20 5b30 2e35 2c20 302e 322c  , 3], [0.5, 0.2,
+00017170: 2030 2e30 315d 295b 305d 0d0a 2020 2020   0.01])[0]..    
+00017180: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00017190: 2020 2020 2020 2070 6f6c 796e 6f6d 6961         polynomia
+000171a0: 6c5f 6368 6f69 6365 203d 204e 6f6e 650d  l_choice = None.
+000171b0: 0a20 2020 2020 2020 2069 6620 2272 6567  .        if "reg
+000171c0: 7265 7373 6f72 2220 696e 206d 6574 686f  ressor" in metho
+000171d0: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+000171e0: 7265 6772 6573 7369 6f6e 5f63 686f 6963  regression_choic
+000171f0: 6520 3d20 2255 7365 7222 0d0a 2020 2020  e = "User"..    
+00017200: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00017210: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
+00017220: 6e5f 6368 6f69 6365 203d 2072 616e 646f  n_choice = rando
+00017230: 6d2e 6368 6f69 6365 7328 5b4e 6f6e 652c  m.choices([None,
+00017240: 2027 5573 6572 275d 2c20 5b30 2e37 2c20   'User'], [0.7, 
+00017250: 302e 335d 295b 305d 0d0a 2020 2020 2020  0.3])[0]..      
+00017260: 2020 7061 7261 6d65 7465 725f 6469 6374    parameter_dict
+00017270: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
+00017280: 2020 2772 6567 7265 7373 696f 6e5f 6d6f    'regression_mo
+00017290: 6465 6c27 3a20 6d6f 6465 6c5f 6368 6f69  del': model_choi
+000172a0: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
+000172b0: 2027 6461 7465 7061 7274 5f6d 6574 686f   'datepart_metho
+000172c0: 6427 3a20 6461 7465 7061 7274 5f63 686f  d': datepart_cho
+000172d0: 6963 652c 0d0a 2020 2020 2020 2020 2020  ice,..          
+000172e0: 2020 2770 6f6c 796e 6f6d 6961 6c5f 6465    'polynomial_de
+000172f0: 6772 6565 273a 2070 6f6c 796e 6f6d 6961  gree': polynomia
+00017300: 6c5f 6368 6f69 6365 2c0d 0a20 2020 2020  l_choice,..     
+00017310: 2020 2020 2020 2027 7265 6772 6573 7369         'regressi
+00017320: 6f6e 5f74 7970 6527 3a20 7265 6772 6573  on_type': regres
+00017330: 7369 6f6e 5f63 686f 6963 652c 0d0a 2020  sion_choice,..  
+00017340: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
+00017350: 2072 6574 7572 6e20 7061 7261 6d65 7465   return paramete
+00017360: 725f 6469 6374 0d0a 0d0a 2020 2020 6465  r_dict....    de
+00017370: 6620 6765 745f 7061 7261 6d73 2873 656c  f get_params(sel
+00017380: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
+00017390: 5265 7475 726e 2064 6963 7420 6f66 2063  Return dict of c
+000173a0: 7572 7265 6e74 2070 6172 616d 6574 6572  urrent parameter
+000173b0: 732e 2222 220d 0a20 2020 2020 2020 2070  s."""..        p
+000173c0: 6172 616d 6574 6572 5f64 6963 7420 3d20  arameter_dict = 
+000173d0: 7b0d 0a20 2020 2020 2020 2020 2020 2027  {..            '
+000173e0: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
+000173f0: 273a 2073 656c 662e 7265 6772 6573 7369  ': self.regressi
+00017400: 6f6e 5f6d 6f64 656c 2c0d 0a20 2020 2020  on_model,..     
+00017410: 2020 2020 2020 2027 6461 7465 7061 7274         'datepart
+00017420: 5f6d 6574 686f 6427 3a20 7365 6c66 2e64  _method': self.d
+00017430: 6174 6570 6172 745f 6d65 7468 6f64 2c0d  atepart_method,.
+00017440: 0a20 2020 2020 2020 2020 2020 2027 706f  .            'po
+00017450: 6c79 6e6f 6d69 616c 5f64 6567 7265 6527  lynomial_degree'
+00017460: 3a20 7365 6c66 2e70 6f6c 796e 6f6d 6961  : self.polynomia
+00017470: 6c5f 6465 6772 6565 2c0d 0a20 2020 2020  l_degree,..     
+00017480: 2020 2020 2020 2027 7265 6772 6573 7369         'regressi
+00017490: 6f6e 5f74 7970 6527 3a20 7365 6c66 2e72  on_type': self.r
+000174a0: 6567 7265 7373 696f 6e5f 7479 7065 2c0d  egression_type,.
+000174b0: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
+000174c0: 2020 2020 7265 7475 726e 2070 6172 616d      return param
+000174d0: 6574 6572 5f64 6963 740d 0a0d 0a0d 0a63  eter_dict......c
+000174e0: 6c61 7373 2055 6e69 7661 7269 6174 6552  lass UnivariateR
+000174f0: 6567 7265 7373 696f 6e28 4d6f 6465 6c4f  egression(ModelO
+00017500: 626a 6563 7429 3a0d 0a20 2020 2022 2222  bject):..    """
+00017510: 5265 6772 6573 7369 6f6e 2d66 7261 6d65  Regression-frame
+00017520: 6420 6170 7072 6f61 6368 2074 6f20 666f  d approach to fo
+00017530: 7265 6361 7374 696e 6720 7573 696e 6720  recasting using 
+00017540: 736b 6c65 6172 6e2e 0d0a 2020 2020 4120  sklearn...    A 
+00017550: 756e 6976 6172 6961 7465 2076 6572 7369  univariate versi
+00017560: 6f6e 206f 6620 726f 6c6c 696e 6720 7265  on of rolling re
+00017570: 6772 6573 7369 6f6e 3a20 6965 2065 6163  gression: ie eac
+00017580: 6820 7365 7269 6573 2069 7320 6d6f 6465  h series is mode
+00017590: 6c65 6420 696e 6465 7065 6e64 656e 746c  led independentl
+000175a0: 790d 0a0d 0a20 2020 2022 596f 7527 7665  y....    "You've
+000175b0: 2067 6f74 2074 6f20 7468 696e 6b20 666f   got to think fo
+000175c0: 7220 796f 7572 2073 656c 7665 7321 2e20  r your selves!. 
+000175d0: 596f 7527 7265 2041 4c4c 2069 6e64 6976  You're ALL indiv
+000175e0: 6964 7561 6c73 220d 0a20 2020 2022 5965  iduals"..    "Ye
+000175f0: 7321 2057 6527 7265 2061 6c6c 2069 6e64  s! We're all ind
+00017600: 6976 6964 7561 6c73 2122 202d 2050 7974  ividuals!" - Pyt
+00017610: 686f 6e0d 0a0d 0a20 2020 2041 7267 733a  hon....    Args:
+00017620: 0d0a 2020 2020 2020 2020 6e61 6d65 2028  ..        name (
+00017630: 7374 7229 3a20 5374 7269 6e67 2074 6f20  str): String to 
+00017640: 6964 656e 7469 6679 2063 6c61 7373 0d0a  identify class..
+00017650: 2020 2020 2020 2020 6672 6571 7565 6e63          frequenc
+00017660: 7920 2873 7472 293a 2053 7472 696e 6720  y (str): String 
+00017670: 616c 6961 7320 6f66 2064 6174 6574 696d  alias of datetim
+00017680: 6520 696e 6465 7820 6672 6571 7565 6e63  e index frequenc
+00017690: 7920 6f72 2065 6c73 6520 2769 6e66 6572  y or else 'infer
+000176a0: 270d 0a20 2020 2020 2020 2070 7265 6469  '..        predi
+000176b0: 6374 696f 6e5f 696e 7465 7276 616c 2028  ction_interval (
+000176c0: 666c 6f61 7429 3a20 436f 6e66 6964 656e  float): Confiden
+000176d0: 6365 2069 6e74 6572 7661 6c20 666f 7220  ce interval for 
+000176e0: 7072 6f62 6162 696c 6973 7469 6320 666f  probabilistic fo
+000176f0: 7265 6361 7374 0d0a 2020 2020 2020 2020  recast..        
+00017700: 686f 6c69 6461 7920 2862 6f6f 6c29 3a20  holiday (bool): 
+00017710: 4966 2074 7275 652c 2069 6e63 6c75 6465  If true, include
+00017720: 2068 6f6c 6964 6179 2066 6c61 6773 0d0a   holiday flags..
+00017730: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
+00017740: 6f6e 5f74 7970 6520 2873 7472 293a 2074  on_type (str): t
+00017750: 7970 6520 6f66 2072 6567 7265 7373 696f  ype of regressio
+00017760: 6e20 284e 6f6e 652c 2027 5573 6572 2729  n (None, 'User')
+00017770: 0d0a 0d0a 2020 2020 2222 220d 0a0d 0a20  ....    """.... 
+00017780: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00017790: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
+000177a0: 0a20 2020 2020 2020 206e 616d 653a 2073  .        name: s
+000177b0: 7472 203d 2022 556e 6976 6172 6961 7465  tr = "Univariate
+000177c0: 5265 6772 6573 7369 6f6e 222c 0d0a 2020  Regression",..  
+000177d0: 2020 2020 2020 6672 6571 7565 6e63 793a        frequency:
+000177e0: 2073 7472 203d 2027 696e 6665 7227 2c0d   str = 'infer',.
+000177f0: 0a20 2020 2020 2020 2070 7265 6469 6374  .        predict
+00017800: 696f 6e5f 696e 7465 7276 616c 3a20 666c  ion_interval: fl
+00017810: 6f61 7420 3d20 302e 392c 0d0a 2020 2020  oat = 0.9,..    
+00017820: 2020 2020 7265 6772 6573 7369 6f6e 5f74      regression_t
+00017830: 7970 653a 2073 7472 203d 204e 6f6e 652c  ype: str = None,
+00017840: 0d0a 2020 2020 2020 2020 686f 6c69 6461  ..        holida
+00017850: 795f 636f 756e 7472 793a 2073 7472 203d  y_country: str =
+00017860: 2027 5553 272c 0d0a 2020 2020 2020 2020   'US',..        
+00017870: 7665 7262 6f73 653a 2069 6e74 203d 2030  verbose: int = 0
+00017880: 2c0d 0a20 2020 2020 2020 2072 616e 646f  ,..        rando
+00017890: 6d5f 7365 6564 3a20 696e 7420 3d20 3230  m_seed: int = 20
+000178a0: 3230 2c0d 0a20 2020 2020 2020 2066 6f72  20,..        for
+000178b0: 6563 6173 745f 6c65 6e67 7468 3a20 696e  ecast_length: in
+000178c0: 7420 3d20 372c 0d0a 2020 2020 2020 2020  t = 7,..        
+000178d0: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
+000178e0: 3a20 6469 6374 203d 207b 0d0a 2020 2020  : dict = {..    
+000178f0: 2020 2020 2020 2020 226d 6f64 656c 223a          "model":
+00017900: 2027 4578 7472 6154 7265 6573 272c 0d0a   'ExtraTrees',..
+00017910: 2020 2020 2020 2020 2020 2020 226d 6f64              "mod
+00017920: 656c 5f70 6172 616d 7322 3a20 7b7d 2c0d  el_params": {},.
+00017930: 0a20 2020 2020 2020 207d 2c0d 0a20 2020  .        },..   
+00017940: 2020 2020 2068 6f6c 6964 6179 3a20 626f       holiday: bo
+00017950: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
+00017960: 2020 2020 206d 6561 6e5f 726f 6c6c 696e       mean_rollin
+00017970: 675f 7065 7269 6f64 733a 2069 6e74 203d  g_periods: int =
+00017980: 2033 302c 0d0a 2020 2020 2020 2020 6d61   30,..        ma
+00017990: 6364 5f70 6572 696f 6473 3a20 696e 7420  cd_periods: int 
+000179a0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+000179b0: 2073 7464 5f72 6f6c 6c69 6e67 5f70 6572   std_rolling_per
+000179c0: 696f 6473 3a20 696e 7420 3d20 372c 0d0a  iods: int = 7,..
+000179d0: 2020 2020 2020 2020 6d61 785f 726f 6c6c          max_roll
+000179e0: 696e 675f 7065 7269 6f64 733a 2069 6e74  ing_periods: int
+000179f0: 203d 2037 2c0d 0a20 2020 2020 2020 206d   = 7,..        m
+00017a00: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
+00017a10: 6473 3a20 696e 7420 3d20 372c 0d0a 2020  ds: int = 7,..  
+00017a20: 2020 2020 2020 6577 6d5f 7661 725f 616c        ewm_var_al
+00017a30: 7068 613a 2066 6c6f 6174 203d 204e 6f6e  pha: float = Non
+00017a40: 652c 0d0a 2020 2020 2020 2020 6577 6d5f  e,..        ewm_
+00017a50: 616c 7068 613a 2066 6c6f 6174 203d 2030  alpha: float = 0
+00017a60: 2e35 2c0d 0a20 2020 2020 2020 2061 6464  .5,..        add
+00017a70: 6974 696f 6e61 6c5f 6c61 675f 7065 7269  itional_lag_peri
+00017a80: 6f64 733a 2069 6e74 203d 2037 2c0d 0a20  ods: int = 7,.. 
+00017a90: 2020 2020 2020 2061 6273 5f65 6e65 7267         abs_energ
+00017aa0: 793a 2062 6f6f 6c20 3d20 4661 6c73 652c  y: bool = False,
+00017ab0: 0d0a 2020 2020 2020 2020 726f 6c6c 696e  ..        rollin
+00017ac0: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+00017ad0: 6473 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ds: int = None,.
+00017ae0: 0a20 2020 2020 2020 2061 6464 5f64 6174  .        add_dat
+00017af0: 655f 7061 7274 3a20 7374 7220 3d20 4e6f  e_part: str = No
+00017b00: 6e65 2c0d 0a20 2020 2020 2020 2070 6f6c  ne,..        pol
+00017b10: 796e 6f6d 6961 6c5f 6465 6772 6565 3a20  ynomial_degree: 
+00017b20: 696e 7420 3d20 4e6f 6e65 2c0d 0a20 2020  int = None,..   
+00017b30: 2020 2020 2078 5f74 7261 6e73 666f 726d       x_transform
+00017b40: 3a20 7374 7220 3d20 4e6f 6e65 2c0d 0a20  : str = None,.. 
+00017b50: 2020 2020 2020 2077 696e 646f 773a 2069         window: i
+00017b60: 6e74 203d 204e 6f6e 652c 0d0a 2020 2020  nt = None,..    
+00017b70: 2020 2020 6e5f 6a6f 6273 3a20 696e 7420      n_jobs: int 
+00017b80: 3d20 2d31 2c0d 0a20 2020 2020 2020 202a  = -1,..        *
+00017b90: 2a6b 7761 7267 732c 0d0a 2020 2020 293a  *kwargs,..    ):
+00017ba0: 0d0a 2020 2020 2020 2020 4d6f 6465 6c4f  ..        ModelO
+00017bb0: 626a 6563 742e 5f5f 696e 6974 5f5f 280d  bject.__init__(.
+00017bc0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00017bd0: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+00017be0: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
+00017bf0: 2020 2066 7265 7175 656e 6379 2c0d 0a20     frequency,.. 
+00017c00: 2020 2020 2020 2020 2020 2070 7265 6469             predi
+00017c10: 6374 696f 6e5f 696e 7465 7276 616c 2c0d  ction_interval,.
+00017c20: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+00017c30: 7265 7373 696f 6e5f 7479 7065 3d72 6567  ression_type=reg
+00017c40: 7265 7373 696f 6e5f 7479 7065 2c0d 0a20  ression_type,.. 
+00017c50: 2020 2020 2020 2020 2020 2068 6f6c 6964             holid
+00017c60: 6179 5f63 6f75 6e74 7279 3d68 6f6c 6964  ay_country=holid
+00017c70: 6179 5f63 6f75 6e74 7279 2c0d 0a20 2020  ay_country,..   
+00017c80: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
+00017c90: 7365 6564 3d72 616e 646f 6d5f 7365 6564  seed=random_seed
+00017ca0: 2c0d 0a20 2020 2020 2020 2020 2020 2076  ,..            v
+00017cb0: 6572 626f 7365 3d76 6572 626f 7365 2c0d  erbose=verbose,.
+00017cc0: 0a20 2020 2020 2020 2020 2020 206e 5f6a  .            n_j
+00017cd0: 6f62 733d 6e5f 6a6f 6273 2c0d 0a20 2020  obs=n_jobs,..   
+00017ce0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00017cf0: 7365 6c66 2e66 6f72 6563 6173 745f 6c65  self.forecast_le
+00017d00: 6e67 7468 203d 2066 6f72 6563 6173 745f  ngth = forecast_
+00017d10: 6c65 6e67 7468 0d0a 2020 2020 2020 2020  length..        
+00017d20: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+00017d30: 6d6f 6465 6c20 3d20 7265 6772 6573 7369  model = regressi
+00017d40: 6f6e 5f6d 6f64 656c 0d0a 2020 2020 2020  on_model..      
+00017d50: 2020 7365 6c66 2e68 6f6c 6964 6179 203d    self.holiday =
+00017d60: 2068 6f6c 6964 6179 0d0a 2020 2020 2020   holiday..      
+00017d70: 2020 7365 6c66 2e6d 6561 6e5f 726f 6c6c    self.mean_roll
+00017d80: 696e 675f 7065 7269 6f64 7320 3d20 6d65  ing_periods = me
+00017d90: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
+00017da0: 6473 0d0a 2020 2020 2020 2020 6966 206d  ds..        if m
+00017db0: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
+00017dc0: 6f64 7320 6973 204e 6f6e 653a 0d0a 2020  ods is None:..  
+00017dd0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00017de0: 6163 645f 7065 7269 6f64 7320 3d20 4e6f  acd_periods = No
+00017df0: 6e65 0d0a 2020 2020 2020 2020 656c 7365  ne..        else
+00017e00: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00017e10: 656c 662e 6d61 6364 5f70 6572 696f 6473  elf.macd_periods
+00017e20: 203d 206d 6163 645f 7065 7269 6f64 730d   = macd_periods.
+00017e30: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+00017e40: 645f 726f 6c6c 696e 675f 7065 7269 6f64  d_rolling_period
+00017e50: 7320 3d20 7374 645f 726f 6c6c 696e 675f  s = std_rolling_
+00017e60: 7065 7269 6f64 730d 0a20 2020 2020 2020  periods..       
+00017e70: 2073 656c 662e 6d61 785f 726f 6c6c 696e   self.max_rollin
+00017e80: 675f 7065 7269 6f64 7320 3d20 6d61 785f  g_periods = max_
+00017e90: 726f 6c6c 696e 675f 7065 7269 6f64 730d  rolling_periods.
+00017ea0: 0a20 2020 2020 2020 2073 656c 662e 6d69  .        self.mi
+00017eb0: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+00017ec0: 7320 3d20 6d69 6e5f 726f 6c6c 696e 675f  s = min_rolling_
+00017ed0: 7065 7269 6f64 730d 0a20 2020 2020 2020  periods..       
+00017ee0: 2073 656c 662e 6577 6d5f 7661 725f 616c   self.ewm_var_al
+00017ef0: 7068 6120 3d20 6577 6d5f 7661 725f 616c  pha = ewm_var_al
+00017f00: 7068 610d 0a20 2020 2020 2020 2073 656c  pha..        sel
+00017f10: 662e 6577 6d5f 616c 7068 6120 3d20 6577  f.ewm_alpha = ew
+00017f20: 6d5f 616c 7068 610d 0a20 2020 2020 2020  m_alpha..       
+00017f30: 2073 656c 662e 6164 6469 7469 6f6e 616c   self.additional
+00017f40: 5f6c 6167 5f70 6572 696f 6473 203d 2061  _lag_periods = a
+00017f50: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
+00017f60: 7269 6f64 730d 0a20 2020 2020 2020 2073  riods..        s
+00017f70: 656c 662e 6162 735f 656e 6572 6779 203d  elf.abs_energy =
+00017f80: 2061 6273 5f65 6e65 7267 790d 0a20 2020   abs_energy..   
+00017f90: 2020 2020 2073 656c 662e 726f 6c6c 696e       self.rollin
+00017fa0: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
+00017fb0: 6473 203d 2072 6f6c 6c69 6e67 5f61 7574  ds = rolling_aut
+00017fc0: 6f63 6f72 725f 7065 7269 6f64 730d 0a20  ocorr_periods.. 
+00017fd0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+00017fe0: 6461 7465 5f70 6172 7420 3d20 6164 645f  date_part = add_
+00017ff0: 6461 7465 5f70 6172 740d 0a20 2020 2020  date_part..     
+00018000: 2020 2073 656c 662e 706f 6c79 6e6f 6d69     self.polynomi
+00018010: 616c 5f64 6567 7265 6520 3d20 706f 6c79  al_degree = poly
+00018020: 6e6f 6d69 616c 5f64 6567 7265 650d 0a20  nomial_degree.. 
+00018030: 2020 2020 2020 2073 656c 662e 785f 7472         self.x_tr
+00018040: 616e 7366 6f72 6d20 3d20 785f 7472 616e  ansform = x_tran
+00018050: 7366 6f72 6d0d 0a20 2020 2020 2020 2073  sform..        s
+00018060: 656c 662e 7769 6e64 6f77 203d 2077 696e  elf.window = win
+00018070: 646f 770d 0a0d 0a20 2020 2064 6566 205f  dow....    def _
+00018080: 785f 7472 616e 7366 6f72 6d65 7228 7365  x_transformer(se
+00018090: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
+000180a0: 2073 656c 662e 785f 7472 616e 7366 6f72   self.x_transfor
+000180b0: 6d20 3d3d 2027 4661 7374 4943 4127 3a0d  m == 'FastICA':.
+000180c0: 0a20 2020 2020 2020 2020 2020 2066 726f  .            fro
+000180d0: 6d20 736b 6c65 6172 6e2e 6465 636f 6d70  m sklearn.decomp
+000180e0: 6f73 6974 696f 6e20 696d 706f 7274 2046  osition import F
+000180f0: 6173 7449 4341 0d0a 0d0a 2020 2020 2020  astICA....      
+00018100: 2020 2020 2020 785f 7472 616e 7366 6f72        x_transfor
+00018110: 6d65 7220 3d20 4661 7374 4943 4128 6e5f  mer = FastICA(n_
+00018120: 636f 6d70 6f6e 656e 7473 3d4e 6f6e 652c  components=None,
+00018130: 2072 616e 646f 6d5f 7374 6174 653d 3230   random_state=20
+00018140: 3230 2c20 7768 6974 656e 3d54 7275 6529  20, whiten=True)
+00018150: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
+00018160: 656c 662e 785f 7472 616e 7366 6f72 6d20  elf.x_transform 
+00018170: 3d3d 2027 4e79 7374 726f 656d 273a 0d0a  == 'Nystroem':..
+00018180: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00018190: 2073 6b6c 6561 726e 2e6b 6572 6e65 6c5f   sklearn.kernel_
+000181a0: 6170 7072 6f78 696d 6174 696f 6e20 696d  approximation im
+000181b0: 706f 7274 204e 7973 7472 6f65 6d0d 0a0d  port Nystroem...
+000181c0: 0a20 2020 2020 2020 2020 2020 2068 616c  .            hal
+000181d0: 665f 7369 7a65 203d 2069 6e74 2873 656c  f_size = int(sel
+000181e0: 662e 736b 7472 6169 6e64 6174 612e 7368  f.sktraindata.sh
+000181f0: 6170 655b 305d 202f 2032 2920 2b20 310d  ape[0] / 2) + 1.
+00018200: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
+00018210: 5f63 6f6d 7020 3d20 3230 300d 0a20 2020  _comp = 200..   
+00018220: 2020 2020 2020 2020 206e 5f63 6f6d 7020           n_comp 
+00018230: 3d20 6d61 785f 636f 6d70 2069 6620 6861  = max_comp if ha
+00018240: 6c66 5f73 697a 6520 3e20 6d61 785f 636f  lf_size > max_co
+00018250: 6d70 2065 6c73 6520 6861 6c66 5f73 697a  mp else half_siz
+00018260: 650d 0a20 2020 2020 2020 2020 2020 2078  e..            x
+00018270: 5f74 7261 6e73 666f 726d 6572 203d 204e  _transformer = N
+00018280: 7973 7472 6f65 6d28 0d0a 2020 2020 2020  ystroem(..      
+00018290: 2020 2020 2020 2020 2020 6b65 726e 656c            kernel
+000182a0: 3d27 7262 6627 2c20 6761 6d6d 613d 302e  ='rbf', gamma=0.
+000182b0: 322c 2072 616e 646f 6d5f 7374 6174 653d  2, random_state=
+000182c0: 3230 3230 2c20 6e5f 636f 6d70 6f6e 656e  2020, n_componen
+000182d0: 7473 3d6e 5f63 6f6d 700d 0a20 2020 2020  ts=n_comp..     
+000182e0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+000182f0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00018300: 2020 2020 2023 2073 656c 662e 785f 7472       # self.x_tr
+00018310: 616e 7366 6f72 6d20 3d20 2752 6d5a 6572  ansform = 'RmZer
+00018320: 6f56 6172 6961 6e63 6527 0d0a 2020 2020  oVariance'..    
+00018330: 2020 2020 2020 2020 6672 6f6d 2073 6b6c          from skl
+00018340: 6561 726e 2e66 6561 7475 7265 5f73 656c  earn.feature_sel
+00018350: 6563 7469 6f6e 2069 6d70 6f72 7420 5661  ection import Va
+00018360: 7269 616e 6365 5468 7265 7368 6f6c 640d  rianceThreshold.
+00018370: 0a0d 0a20 2020 2020 2020 2020 2020 2078  ...            x
+00018380: 5f74 7261 6e73 666f 726d 6572 203d 2056  _transformer = V
+00018390: 6172 6961 6e63 6554 6872 6573 686f 6c64  arianceThreshold
+000183a0: 2874 6872 6573 686f 6c64 3d30 2e30 290d  (threshold=0.0).
+000183b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000183c0: 785f 7472 616e 7366 6f72 6d65 720d 0a0d  x_transformer...
+000183d0: 0a20 2020 2064 6566 2066 6974 2873 656c  .    def fit(sel
+000183e0: 662c 2064 662c 2066 7574 7572 655f 7265  f, df, future_re
+000183f0: 6772 6573 736f 723d 4e6f 6e65 293a 0d0a  gressor=None):..
+00018400: 2020 2020 2020 2020 2222 2254 7261 696e          """Train
+00018410: 2061 6c67 6f72 6974 686d 2067 6976 656e   algorithm given
+00018420: 2064 6174 6120 7375 7070 6c69 6564 2e0d   data supplied..
+00018430: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+00018440: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00018450: 2028 7061 6e64 6173 2e44 6174 6146 7261   (pandas.DataFra
+00018460: 6d65 293a 2044 6174 6574 696d 6520 496e  me): Datetime In
+00018470: 6465 7865 640d 0a20 2020 2020 2020 2020  dexed..         
+00018480: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
+00018490: 736f 7220 2870 616e 6461 732e 4461 7461  sor (pandas.Data
+000184a0: 4672 616d 6520 6f72 2053 6572 6965 7329  Frame or Series)
+000184b0: 3a20 4461 7465 7469 6d65 2049 6e64 6578  : Datetime Index
+000184c0: 6564 0d0a 2020 2020 2020 2020 2222 220d  ed..        """.
+000184d0: 0a20 2020 2020 2020 2064 6620 3d20 7365  .        df = se
+000184e0: 6c66 2e62 6173 6963 5f70 726f 6669 6c65  lf.basic_profile
+000184f0: 2864 6629 0d0a 2020 2020 2020 2020 7365  (df)..        se
+00018500: 6c66 2e73 6b74 7261 696e 6461 7461 203d  lf.sktraindata =
+00018510: 2064 660d 0a0d 0a20 2020 2020 2020 2023   df....        #
+00018520: 2069 6620 6578 7465 726e 616c 2072 6567   if external reg
+00018530: 7265 7373 6f72 2c20 646f 2073 6f6d 6520  ressor, do some 
+00018540: 6368 6563 6b20 7570 0d0a 2020 2020 2020  check up..      
+00018550: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
+00018560: 7369 6f6e 5f74 7970 6520 6973 206e 6f74  sion_type is not
+00018570: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00018580: 2020 2020 6966 2066 7574 7572 655f 7265      if future_re
+00018590: 6772 6573 736f 7220 6973 204e 6f6e 653a  gressor is None:
+000185a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000185b0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+000185c0: 6f72 280d 0a20 2020 2020 2020 2020 2020  or(..           
+000185d0: 2020 2020 2020 2020 2022 7265 6772 6573           "regres
+000185e0: 7369 6f6e 5f74 7970 653d 2755 7365 7227  sion_type='User'
+000185f0: 2062 7574 206e 6f74 2066 7574 7572 655f   but not future_
+00018600: 7265 6772 6573 736f 7220 7375 7070 6c69  regressor suppli
+00018610: 6564 2e22 0d0a 2020 2020 2020 2020 2020  ed."..          
+00018620: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00018630: 2020 2020 2065 6c69 6620 6675 7475 7265       elif future
+00018640: 5f72 6567 7265 7373 6f72 2e73 6861 7065  _regressor.shape
+00018650: 5b30 5d20 213d 2064 662e 7368 6170 655b  [0] != df.shape[
+00018660: 305d 3a0d 0a20 2020 2020 2020 2020 2020  0]:..           
+00018670: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00018680: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
+00018690: 2020 2020 2020 2020 2020 2020 2266 7574              "fut
+000186a0: 7572 655f 7265 6772 6573 736f 7220 7368  ure_regressor sh
+000186b0: 6170 6520 646f 6573 206e 6f74 206d 6174  ape does not mat
+000186c0: 6368 2074 7261 696e 696e 6720 6461 7461  ch training data
+000186d0: 2073 6861 7065 2e22 0d0a 2020 2020 2020   shape."..      
+000186e0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
+000186f0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+00018700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018710: 7365 6c66 2e72 6567 7265 7373 6f72 5f74  self.regressor_t
+00018720: 7261 696e 203d 2066 7574 7572 655f 7265  rain = future_re
+00018730: 6772 6573 736f 720d 0a0d 0a20 2020 2020  gressor....     
+00018740: 2020 2063 6f6c 7320 3d20 7365 6c66 2e73     cols = self.s
+00018750: 6b74 7261 696e 6461 7461 2e63 6f6c 756d  ktraindata.colum
+00018760: 6e73 0d0a 0d0a 2020 2020 2020 2020 6465  ns....        de
+00018770: 6620 666f 7265 6361 7374 5f62 795f 636f  f forecast_by_co
+00018780: 6c75 6d6e 2873 656c 662c 2061 7267 732c  lumn(self, args,
+00018790: 2070 6172 616c 6c65 6c2c 206e 5f6a 6f62   parallel, n_job
+000187a0: 732c 2063 6f6c 293a 0d0a 2020 2020 2020  s, col):..      
+000187b0: 2020 2020 2020 2222 2252 756e 206f 6e65        """Run one
+000187c0: 2073 6572 6965 7320 616e 6420 7265 7475   series and retu
+000187d0: 726e 2070 7265 6469 6374 696f 6e2e 2222  rn prediction.""
+000187e0: 220d 0a20 2020 2020 2020 2020 2020 2062  "..            b
+000187f0: 6173 6520 3d20 7064 2e44 6174 6146 7261  ase = pd.DataFra
+00018800: 6d65 2873 656c 662e 736b 7472 6169 6e64  me(self.sktraind
+00018810: 6174 615b 636f 6c5d 290d 0a20 2020 2020  ata[col])..     
+00018820: 2020 2020 2020 2059 203d 2062 6173 652e         Y = base.
+00018830: 636f 7079 2829 0d0a 2020 2020 2020 2020  copy()..        
+00018840: 2020 2020 666f 7220 6375 7272 5f73 6869      for curr_shi
+00018850: 6674 2069 6e20 7261 6e67 6528 312c 2073  ft in range(1, s
+00018860: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
+00018870: 6774 6829 3a0d 0a20 2020 2020 2020 2020  gth):..         
+00018880: 2020 2020 2020 2059 203d 2070 642e 636f         Y = pd.co
+00018890: 6e63 6174 285b 592c 2062 6173 652e 7368  ncat([Y, base.sh
+000188a0: 6966 7428 2d63 7572 725f 7368 6966 7429  ift(-curr_shift)
+000188b0: 5d2c 2061 7869 733d 3129 0d0a 2020 2020  ], axis=1)..    
+000188c0: 2020 2020 2020 2020 2320 6472 6f70 2069          # drop i
+000188d0: 6e63 6f6d 706c 6574 6520 6461 7461 0d0a  ncomplete data..
+000188e0: 2020 2020 2020 2020 2020 2020 5920 3d20              Y = 
+000188f0: 592e 6472 6f70 2869 6e64 6578 3d59 2e74  Y.drop(index=Y.t
+00018900: 6169 6c28 7365 6c66 2e66 6f72 6563 6173  ail(self.forecas
+00018910: 745f 6c65 6e67 7468 202d 2031 292e 696e  t_length - 1).in
+00018920: 6465 7829 0d0a 2020 2020 2020 2020 2020  dex)..          
+00018930: 2020 2320 6472 6f70 2074 6865 206d 6f73    # drop the mos
+00018940: 7420 7265 6365 6e74 2062 6563 6175 7365  t recent because
+00018950: 2074 6865 7265 2773 206e 6f20 6675 7475   there's no futu
+00018960: 7265 2066 6f72 2069 740d 0a20 2020 2020  re for it..     
+00018970: 2020 2020 2020 2059 203d 2059 2e64 726f         Y = Y.dro
+00018980: 7028 696e 6465 783d 592e 696e 6465 785b  p(index=Y.index[
+00018990: 305d 290d 0a20 2020 2020 2020 2020 2020  0])..           
+000189a0: 2059 2e63 6f6c 756d 6e73 203d 205b 7820   Y.columns = [x 
+000189b0: 666f 7220 7820 696e 2072 616e 6765 286c  for x in range(l
+000189c0: 656e 2859 2e63 6f6c 756d 6e73 2929 5d0d  en(Y.columns))].
+000189d0: 0a0d 0a20 2020 2020 2020 2020 2020 2058  ...            X
+000189e0: 203d 2072 6f6c 6c69 6e67 5f78 5f72 6567   = rolling_x_reg
+000189f0: 7265 7373 6f72 280d 0a20 2020 2020 2020  ressor(..       
+00018a00: 2020 2020 2020 2020 2062 6173 652c 0d0a           base,..
+00018a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a20: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
+00018a30: 696f 6473 3d73 656c 662e 6d65 616e 5f72  iods=self.mean_r
+00018a40: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
+00018a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018a60: 206d 6163 645f 7065 7269 6f64 733d 7365   macd_periods=se
+00018a70: 6c66 2e6d 6163 645f 7065 7269 6f64 732c  lf.macd_periods,
+00018a80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018a90: 2020 7374 645f 726f 6c6c 696e 675f 7065    std_rolling_pe
+00018aa0: 7269 6f64 733d 7365 6c66 2e73 7464 5f72  riods=self.std_r
+00018ab0: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
+00018ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018ad0: 206d 6178 5f72 6f6c 6c69 6e67 5f70 6572   max_rolling_per
+00018ae0: 696f 6473 3d73 656c 662e 6d61 785f 726f  iods=self.max_ro
+00018af0: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
+00018b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b10: 6d69 6e5f 726f 6c6c 696e 675f 7065 7269  min_rolling_peri
+00018b20: 6f64 733d 7365 6c66 2e6d 696e 5f72 6f6c  ods=self.min_rol
+00018b30: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+00018b40: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00018b50: 776d 5f76 6172 5f61 6c70 6861 3d73 656c  wm_var_alpha=sel
+00018b60: 662e 6577 6d5f 7661 725f 616c 7068 612c  f.ewm_var_alpha,
+00018b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018b80: 2020 6164 6469 7469 6f6e 616c 5f6c 6167    additional_lag
+00018b90: 5f70 6572 696f 6473 3d73 656c 662e 6164  _periods=self.ad
+00018ba0: 6469 7469 6f6e 616c 5f6c 6167 5f70 6572  ditional_lag_per
+00018bb0: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+00018bc0: 2020 2020 2020 2065 776d 5f61 6c70 6861         ewm_alpha
+00018bd0: 3d73 656c 662e 6577 6d5f 616c 7068 612c  =self.ewm_alpha,
+00018be0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018bf0: 2020 6162 735f 656e 6572 6779 3d73 656c    abs_energy=sel
+00018c00: 662e 6162 735f 656e 6572 6779 2c0d 0a20  f.abs_energy,.. 
+00018c10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00018c20: 6f6c 6c69 6e67 5f61 7574 6f63 6f72 725f  olling_autocorr_
+00018c30: 7065 7269 6f64 733d 7365 6c66 2e72 6f6c  periods=self.rol
+00018c40: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
+00018c50: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
+00018c60: 2020 2020 2020 2020 6164 645f 6461 7465          add_date
+00018c70: 5f70 6172 743d 7365 6c66 2e61 6464 5f64  _part=self.add_d
+00018c80: 6174 655f 7061 7274 2c0d 0a20 2020 2020  ate_part,..     
+00018c90: 2020 2020 2020 2020 2020 2068 6f6c 6964             holid
+00018ca0: 6179 3d73 656c 662e 686f 6c69 6461 792c  ay=self.holiday,
+00018cb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018cc0: 2020 686f 6c69 6461 795f 636f 756e 7472    holiday_countr
+00018cd0: 793d 7365 6c66 2e68 6f6c 6964 6179 5f63  y=self.holiday_c
+00018ce0: 6f75 6e74 7279 2c0d 0a20 2020 2020 2020  ountry,..       
+00018cf0: 2020 2020 2020 2020 2070 6f6c 796e 6f6d           polynom
+00018d00: 6961 6c5f 6465 6772 6565 3d73 656c 662e  ial_degree=self.
+00018d10: 706f 6c79 6e6f 6d69 616c 5f64 6567 7265  polynomial_degre
+00018d20: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00018d30: 2020 2020 7769 6e64 6f77 3d73 656c 662e      window=self.
+00018d40: 7769 6e64 6f77 2c0d 0a20 2020 2020 2020  window,..       
+00018d50: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00018d60: 2020 2020 6966 2073 656c 662e 7265 6772      if self.regr
+00018d70: 6573 7369 6f6e 5f74 7970 6520 3d3d 2027  ession_type == '
+00018d80: 5573 6572 273a 0d0a 2020 2020 2020 2020  User':..        
+00018d90: 2020 2020 2020 2020 5820 3d20 7064 2e63          X = pd.c
+00018da0: 6f6e 6361 7428 5b58 2c20 7365 6c66 2e72  oncat([X, self.r
+00018db0: 6567 7265 7373 6f72 5f74 7261 696e 5d2c  egressor_train],
+00018dc0: 2061 7869 733d 3129 0d0a 0d0a 2020 2020   axis=1)....    
+00018dd0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00018de0: 785f 7472 616e 7366 6f72 6d20 696e 205b  x_transform in [
+00018df0: 2746 6173 7449 4341 272c 2027 4e79 7374  'FastICA', 'Nyst
+00018e00: 726f 656d 272c 2027 526d 5a65 726f 5661  roem', 'RmZeroVa
+00018e10: 7269 616e 6365 275d 3a0d 0a20 2020 2020  riance']:..     
+00018e20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00018e30: 785f 7472 616e 7366 6f72 6d65 7220 3d20  x_transformer = 
+00018e40: 7365 6c66 2e5f 785f 7472 616e 7366 6f72  self._x_transfor
+00018e50: 6d65 7228 290d 0a20 2020 2020 2020 2020  mer()..         
+00018e60: 2020 2020 2020 2073 656c 662e 785f 7472         self.x_tr
+00018e70: 616e 7366 6f72 6d65 7220 3d20 7365 6c66  ansformer = self
+00018e80: 2e78 5f74 7261 6e73 666f 726d 6572 2e66  .x_transformer.f
+00018e90: 6974 2858 290d 0a20 2020 2020 2020 2020  it(X)..         
+00018ea0: 2020 2020 2020 2058 203d 2070 642e 4461         X = pd.Da
+00018eb0: 7461 4672 616d 6528 7365 6c66 2e78 5f74  taFrame(self.x_t
+00018ec0: 7261 6e73 666f 726d 6572 2e74 7261 6e73  ransformer.trans
+00018ed0: 666f 726d 2858 2929 0d0a 2020 2020 2020  form(X))..      
+00018ee0: 2020 2020 2020 2020 2020 5820 3d20 582e            X = X.
+00018ef0: 7265 706c 6163 6528 5b6e 702e 696e 662c  replace([np.inf,
+00018f00: 202d 6e70 2e69 6e66 5d2c 2030 292e 6669   -np.inf], 0).fi
+00018f10: 6c6c 6e61 2830 290d 0a0d 0a20 2020 2020  llna(0)....     
+00018f20: 2020 2020 2020 2058 203d 2058 2e64 726f         X = X.dro
+00018f30: 7028 696e 6465 783d 582e 7461 696c 2873  p(index=X.tail(s
+00018f40: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
+00018f50: 6774 6829 2e69 6e64 6578 290d 0a20 2020  gth).index)..   
+00018f60: 2020 2020 2020 2020 2059 2e69 6e64 6578           Y.index
+00018f70: 203d 2058 2e69 6e64 6578 2020 2320 616e   = X.index  # an
+00018f80: 6420 6a75 7374 2068 6f70 6520 4920 676f  d just hope I go
+00018f90: 7420 7468 6520 6164 6a75 7374 6d65 6e74  t the adjustment
+00018fa0: 7320 7269 6768 740d 0a0d 0a20 2020 2020  s right....     
+00018fb0: 2020 2020 2020 2023 2072 6574 7269 6576         # retriev
+00018fc0: 6520 6d6f 6465 6c20 6f62 6a65 6374 2074  e model object t
+00018fd0: 6f20 7472 6169 6e0d 0a20 2020 2020 2020  o train..       
+00018fe0: 2020 2020 2069 6620 6e6f 7420 7061 7261       if not para
+00018ff0: 6c6c 656c 2061 6e64 206e 5f6a 6f62 7320  llel and n_jobs 
+00019000: 3e20 313a 0d0a 2020 2020 2020 2020 2020  > 1:..          
+00019010: 2020 2020 2020 6e5f 6a6f 6273 5f70 6173        n_jobs_pas
+00019020: 7365 6420 3d20 6e5f 6a6f 6273 0d0a 2020  sed = n_jobs..  
+00019030: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00019040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019050: 206e 5f6a 6f62 735f 7061 7373 6564 203d   n_jobs_passed =
+00019060: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
+00019070: 6d75 6c74 696f 7574 7075 7420 3d20 5472  multioutput = Tr
+00019080: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+00019090: 6966 2059 2e6e 6469 6d20 3c20 323a 0d0a  if Y.ndim < 2:..
+000190a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000190b0: 6d75 6c74 696f 7574 7075 7420 3d20 4661  multioutput = Fa
+000190c0: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
+000190d0: 2065 6c69 6620 592e 7368 6170 655b 315d   elif Y.shape[1]
+000190e0: 203c 2032 3a0d 0a20 2020 2020 2020 2020   < 2:..         
+000190f0: 2020 2020 2020 206d 756c 7469 6f75 7470         multioutp
+00019100: 7574 203d 2046 616c 7365 0d0a 2020 2020  ut = False..    
+00019110: 2020 2020 2020 2020 2320 6265 6361 7573          # becaus
+00019120: 6520 7468 6520 7472 6169 6e69 6e67 206d  e the training m
+00019130: 6573 7361 6765 7320 6765 7420 616e 6e6f  essages get anno
+00019140: 7969 6e67 0d0a 2020 2020 2020 2020 2020  ying..          
+00019150: 2020 696e 6e65 725f 7665 7262 6f73 6520    inner_verbose 
+00019160: 3d20 7365 6c66 2e76 6572 626f 7365 202d  = self.verbose -
+00019170: 2031 2069 6620 7365 6c66 2e76 6572 626f   1 if self.verbo
+00019180: 7365 203e 2030 2065 6c73 6520 7365 6c66  se > 0 else self
+00019190: 2e76 6572 626f 7365 0d0a 2020 2020 2020  .verbose..      
+000191a0: 2020 2020 2020 6461 685f 6d6f 6465 6c20        dah_model 
+000191b0: 3d20 7265 7472 6965 7665 5f72 6567 7265  = retrieve_regre
+000191c0: 7373 6f72 280d 0a20 2020 2020 2020 2020  ssor(..         
+000191d0: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
+000191e0: 6e5f 6d6f 6465 6c3d 7365 6c66 2e72 6567  n_model=self.reg
+000191f0: 7265 7373 696f 6e5f 6d6f 6465 6c2c 0d0a  ression_model,..
 00019200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019210: 6465 6c61 7965 6428 666f 7265 6361 7374  delayed(forecast
-00019220: 5f62 795f 636f 6c75 6d6e 2928 7365 6c66  _by_column)(self
-00019230: 2c20 6172 6773 2c20 7365 6c66 2e70 6172  , args, self.par
-00019240: 616c 6c65 6c2c 2073 656c 662e 6e5f 6a6f  allel, self.n_jo
-00019250: 6273 2c20 636f 6c29 0d0a 2020 2020 2020  bs, col)..      
-00019260: 2020 2020 2020 2020 2020 666f 7220 2863            for (c
-00019270: 6f6c 2920 696e 2063 6f6c 730d 0a20 2020  ol) in cols..   
-00019280: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00019290: 2020 2020 2020 2020 7365 6c66 2e6d 6f64          self.mod
-000192a0: 656c 7320 3d20 7b6b 3a20 7620 666f 7220  els = {k: v for 
-000192b0: 6420 696e 2064 665f 6c69 7374 2066 6f72  d in df_list for
-000192c0: 206b 2c20 7620 696e 2064 2e69 7465 6d73   k, v in d.items
-000192d0: 2829 7d0d 0a20 2020 2020 2020 2065 6c73  ()}..        els
-000192e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000192f0: 6466 5f6c 6973 7420 3d20 5b5d 0d0a 2020  df_list = []..  
-00019300: 2020 2020 2020 2020 2020 666f 7220 636f            for co
-00019310: 6c20 696e 2063 6f6c 733a 0d0a 2020 2020  l in cols:..    
-00019320: 2020 2020 2020 2020 2020 2020 6466 5f6c              df_l
-00019330: 6973 742e 6170 7065 6e64 280d 0a20 2020  ist.append(..   
-00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019350: 2066 6f72 6563 6173 745f 6279 5f63 6f6c   forecast_by_col
-00019360: 756d 6e28 7365 6c66 2c20 6172 6773 2c20  umn(self, args, 
-00019370: 7365 6c66 2e70 6172 616c 6c65 6c2c 2073  self.parallel, s
-00019380: 656c 662e 6e5f 6a6f 6273 2c20 636f 6c29  elf.n_jobs, col)
-00019390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000193a0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-000193b0: 2073 656c 662e 6d6f 6465 6c73 203d 207b   self.models = {
-000193c0: 6b3a 2076 2066 6f72 2064 2069 6e20 6466  k: v for d in df
-000193d0: 5f6c 6973 7420 666f 7220 6b2c 2076 2069  _list for k, v i
-000193e0: 6e20 642e 6974 656d 7328 297d 0d0a 2020  n d.items()}..  
-000193f0: 2020 2020 2020 7365 6c66 2e66 6974 5f72        self.fit_r
-00019400: 756e 7469 6d65 203d 2064 6174 6574 696d  untime = datetim
-00019410: 652e 6461 7465 7469 6d65 2e6e 6f77 2829  e.datetime.now()
-00019420: 202d 2073 656c 662e 7374 6172 7454 696d   - self.startTim
-00019430: 650d 0a20 2020 2020 2020 2072 6574 7572  e..        retur
-00019440: 6e20 7365 6c66 0d0a 0d0a 2020 2020 6465  n self....    de
-00019450: 6620 7072 6564 6963 7428 0d0a 2020 2020  f predict(..    
-00019460: 2020 2020 7365 6c66 2c0d 0a20 2020 2020      self,..     
-00019470: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
-00019480: 7468 3a20 696e 7420 3d20 4e6f 6e65 2c0d  th: int = None,.
-00019490: 0a20 2020 2020 2020 206a 7573 745f 706f  .        just_po
-000194a0: 696e 745f 666f 7265 6361 7374 3a20 626f  int_forecast: bo
-000194b0: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
-000194c0: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
-000194d0: 6573 736f 723d 4e6f 6e65 2c0d 0a20 2020  essor=None,..   
-000194e0: 2029 3a0d 0a20 2020 2020 2020 2022 2222   ):..        """
-000194f0: 4765 6e65 7261 7465 2066 6f72 6563 6173  Generate forecas
-00019500: 7420 6461 7461 2069 6d6d 6564 6961 7465  t data immediate
-00019510: 6c79 2066 6f6c 6c6f 7769 6e67 2064 6174  ly following dat
-00019520: 6573 206f 6620 696e 6465 7820 7375 7070  es of index supp
-00019530: 6c69 6564 2074 6f20 2e66 6974 2829 2e0d  lied to .fit()..
-00019540: 0a0d 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-00019550: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00019560: 7265 6361 7374 5f6c 656e 6774 6820 2869  recast_length (i
-00019570: 6e74 293a 204e 756d 6265 7220 6f66 2070  nt): Number of p
-00019580: 6572 696f 6473 206f 6620 6461 7461 2074  eriods of data t
-00019590: 6f20 666f 7265 6361 7374 2061 6865 6164  o forecast ahead
-000195a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000195b0: 2020 6967 6e6f 7265 6420 6865 7265 2066    ignored here f
-000195c0: 6f72 2074 6869 7320 6d6f 6465 6c2c 206d  or this model, m
-000195d0: 7573 7420 6265 2073 6574 2069 6e20 5f5f  ust be set in __
-000195e0: 696e 6974 5f5f 2062 6566 6f72 6520 2e66  init__ before .f
-000195f0: 6974 2829 0d0a 2020 2020 2020 2020 2020  it()..          
-00019600: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-00019610: 6f72 2028 7064 2e44 6174 6146 7261 6d65  or (pd.DataFrame
-00019620: 293a 2061 6464 6974 696f 6e61 6c20 7265  ): additional re
-00019630: 6772 6573 736f 720d 0a20 2020 2020 2020  gressor..       
-00019640: 2020 2020 206a 7573 745f 706f 696e 745f       just_point_
-00019650: 666f 7265 6361 7374 2028 626f 6f6c 293a  forecast (bool):
-00019660: 2049 6620 5472 7565 2c20 7265 7475 726e   If True, return
-00019670: 2061 2070 616e 6461 732e 4461 7461 4672   a pandas.DataFr
-00019680: 616d 6520 6f66 206a 7573 7420 706f 696e  ame of just poin
-00019690: 7420 666f 7265 6361 7374 730d 0a0d 0a20  t forecasts.... 
-000196a0: 2020 2020 2020 2052 6574 7572 6e73 3a0d         Returns:.
-000196b0: 0a20 2020 2020 2020 2020 2020 2045 6974  .            Eit
-000196c0: 6865 7220 6120 5072 6564 6963 7469 6f6e  her a Prediction
-000196d0: 4f62 6a65 6374 206f 6620 666f 7265 6361  Object of foreca
-000196e0: 7374 7320 616e 6420 6d65 7461 6461 7461  sts and metadata
-000196f0: 2c20 6f72 0d0a 2020 2020 2020 2020 2020  , or..          
-00019700: 2020 6966 206a 7573 745f 706f 696e 745f    if just_point_
-00019710: 666f 7265 6361 7374 203d 3d20 5472 7565  forecast == True
-00019720: 2c20 6120 6461 7461 6672 616d 6520 6f66  , a dataframe of
-00019730: 2070 6f69 6e74 2066 6f72 6563 6173 7473   point forecasts
-00019740: 0d0a 2020 2020 2020 2020 2222 220d 0a20  ..        """.. 
-00019750: 2020 2020 2020 2070 7265 6469 6374 5374         predictSt
-00019760: 6172 7454 696d 6520 3d20 6461 7465 7469  artTime = dateti
-00019770: 6d65 2e64 6174 6574 696d 652e 6e6f 7728  me.datetime.now(
-00019780: 290d 0a20 2020 2020 2020 2069 6e64 6578  )..        index
-00019790: 203d 2073 656c 662e 6372 6561 7465 5f66   = self.create_f
-000197a0: 6f72 6563 6173 745f 696e 6465 7828 666f  orecast_index(fo
-000197b0: 7265 6361 7374 5f6c 656e 6774 683d 7365  recast_length=se
-000197c0: 6c66 2e66 6f72 6563 6173 745f 6c65 6e67  lf.forecast_leng
-000197d0: 7468 290d 0a20 2020 2020 2020 2066 6f72  th)..        for
-000197e0: 6563 6173 7420 3d20 7064 2e44 6174 6146  ecast = pd.DataF
-000197f0: 7261 6d65 2829 0d0a 2020 2020 2020 2020  rame()..        
-00019800: 666f 7220 785f 636f 6c20 696e 2073 656c  for x_col in sel
-00019810: 662e 736b 7472 6169 6e64 6174 612e 636f  f.sktraindata.co
-00019820: 6c75 6d6e 733a 0d0a 2020 2020 2020 2020  lumns:..        
-00019830: 2020 2020 6261 7365 203d 2070 642e 4461      base = pd.Da
-00019840: 7461 4672 616d 6528 7365 6c66 2e73 6b74  taFrame(self.skt
-00019850: 7261 696e 6461 7461 5b78 5f63 6f6c 5d29  raindata[x_col])
-00019860: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00019870: 785f 6461 7420 3d20 726f 6c6c 696e 675f  x_dat = rolling_
-00019880: 785f 7265 6772 6573 736f 7228 0d0a 2020  x_regressor(..  
-00019890: 2020 2020 2020 2020 2020 2020 2020 6261                ba
-000198a0: 7365 2c0d 0a20 2020 2020 2020 2020 2020  se,..           
-000198b0: 2020 2020 206d 6561 6e5f 726f 6c6c 696e       mean_rollin
-000198c0: 675f 7065 7269 6f64 733d 7365 6c66 2e6d  g_periods=self.m
-000198d0: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
-000198e0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-000198f0: 2020 2020 2020 6d61 6364 5f70 6572 696f        macd_perio
-00019900: 6473 3d73 656c 662e 6d61 6364 5f70 6572  ds=self.macd_per
-00019910: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-00019920: 2020 2020 2020 2073 7464 5f72 6f6c 6c69         std_rolli
-00019930: 6e67 5f70 6572 696f 6473 3d73 656c 662e  ng_periods=self.
-00019940: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
-00019950: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-00019960: 2020 2020 2020 6d61 785f 726f 6c6c 696e        max_rollin
-00019970: 675f 7065 7269 6f64 733d 7365 6c66 2e6d  g_periods=self.m
-00019980: 6178 5f72 6f6c 6c69 6e67 5f70 6572 696f  ax_rolling_perio
-00019990: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
-000199a0: 2020 2020 206d 696e 5f72 6f6c 6c69 6e67       min_rolling
-000199b0: 5f70 6572 696f 6473 3d73 656c 662e 6d69  _periods=self.mi
-000199c0: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
-000199d0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-000199e0: 2020 2020 6577 6d5f 7661 725f 616c 7068      ewm_var_alph
-000199f0: 613d 7365 6c66 2e65 776d 5f76 6172 5f61  a=self.ewm_var_a
-00019a00: 6c70 6861 2c0d 0a20 2020 2020 2020 2020  lpha,..         
-00019a10: 2020 2020 2020 2061 6464 6974 696f 6e61         additiona
-00019a20: 6c5f 6c61 675f 7065 7269 6f64 733d 7365  l_lag_periods=se
-00019a30: 6c66 2e61 6464 6974 696f 6e61 6c5f 6c61  lf.additional_la
-00019a40: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-00019a50: 2020 2020 2020 2020 2020 2020 6577 6d5f              ewm_
-00019a60: 616c 7068 613d 7365 6c66 2e65 776d 5f61  alpha=self.ewm_a
-00019a70: 6c70 6861 2c0d 0a20 2020 2020 2020 2020  lpha,..         
-00019a80: 2020 2020 2020 2061 6273 5f65 6e65 7267         abs_energ
-00019a90: 793d 7365 6c66 2e61 6273 5f65 6e65 7267  y=self.abs_energ
-00019aa0: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-00019ab0: 2020 2020 726f 6c6c 696e 675f 6175 746f      rolling_auto
-00019ac0: 636f 7272 5f70 6572 696f 6473 3d73 656c  corr_periods=sel
-00019ad0: 662e 726f 6c6c 696e 675f 6175 746f 636f  f.rolling_autoco
-00019ae0: 7272 5f70 6572 696f 6473 2c0d 0a20 2020  rr_periods,..   
-00019af0: 2020 2020 2020 2020 2020 2020 2061 6464               add
-00019b00: 5f64 6174 655f 7061 7274 3d73 656c 662e  _date_part=self.
-00019b10: 6164 645f 6461 7465 5f70 6172 742c 0d0a  add_date_part,..
-00019b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b30: 686f 6c69 6461 793d 7365 6c66 2e68 6f6c  holiday=self.hol
-00019b40: 6964 6179 2c0d 0a20 2020 2020 2020 2020  iday,..         
-00019b50: 2020 2020 2020 2068 6f6c 6964 6179 5f63         holiday_c
-00019b60: 6f75 6e74 7279 3d73 656c 662e 686f 6c69  ountry=self.holi
-00019b70: 6461 795f 636f 756e 7472 792c 0d0a 2020  day_country,..  
-00019b80: 2020 2020 2020 2020 2020 2020 2020 706f                po
-00019b90: 6c79 6e6f 6d69 616c 5f64 6567 7265 653d  lynomial_degree=
-00019ba0: 7365 6c66 2e70 6f6c 796e 6f6d 6961 6c5f  self.polynomial_
-00019bb0: 6465 6772 6565 2c0d 0a20 2020 2020 2020  degree,..       
-00019bc0: 2020 2020 2020 2020 2077 696e 646f 773d           window=
-00019bd0: 7365 6c66 2e77 696e 646f 772c 0d0a 2020  self.window,..  
-00019be0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00019bf0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00019c00: 2e72 6567 7265 7373 696f 6e5f 7479 7065  .regression_type
-00019c10: 203d 3d20 2755 7365 7227 3a0d 0a20 2020   == 'User':..   
-00019c20: 2020 2020 2020 2020 2020 2020 2078 5f64               x_d
-00019c30: 6174 203d 2070 642e 636f 6e63 6174 285b  at = pd.concat([
-00019c40: 785f 6461 742c 2073 656c 662e 7265 6772  x_dat, self.regr
-00019c50: 6573 736f 725f 7472 6169 6e5d 2c20 6178  essor_train], ax
-00019c60: 6973 3d31 292e 6669 6c6c 6e61 2830 290d  is=1).fillna(0).
-00019c70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00019c80: 7365 6c66 2e78 5f74 7261 6e73 666f 726d  self.x_transform
-00019c90: 2069 6e20 5b27 4661 7374 4943 4127 2c20   in ['FastICA', 
-00019ca0: 274e 7973 7472 6f65 6d27 2c20 2752 6d5a  'Nystroem', 'RmZ
-00019cb0: 6572 6f56 6172 6961 6e63 6527 5d3a 0d0a  eroVariance']:..
-00019cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019cd0: 785f 6461 7420 3d20 7064 2e44 6174 6146  x_dat = pd.DataF
-00019ce0: 7261 6d65 2873 656c 662e 785f 7472 616e  rame(self.x_tran
-00019cf0: 7366 6f72 6d65 722e 7472 616e 7366 6f72  sformer.transfor
-00019d00: 6d28 785f 6461 7429 290d 0a20 2020 2020  m(x_dat))..     
-00019d10: 2020 2020 2020 2020 2020 2078 5f64 6174             x_dat
-00019d20: 203d 2078 5f64 6174 2e72 6570 6c61 6365   = x_dat.replace
-00019d30: 285b 6e70 2e69 6e66 2c20 2d6e 702e 696e  ([np.inf, -np.in
-00019d40: 665d 2c20 3029 2e66 696c 6c6e 6128 3029  f], 0).fillna(0)
-00019d50: 0d0a 2020 2020 2020 2020 2020 2020 7266  ..            rf
-00019d60: 5072 6564 203d 2073 656c 662e 6d6f 6465  Pred = self.mode
-00019d70: 6c73 5b78 5f63 6f6c 5d2e 7072 6564 6963  ls[x_col].predic
-00019d80: 7428 785f 6461 742e 7461 696c 2831 292e  t(x_dat.tail(1).
-00019d90: 746f 5f6e 756d 7079 2829 290d 0a20 2020  to_numpy())..   
-00019da0: 2020 2020 2020 2020 2023 2072 6650 7265           # rfPre
-00019db0: 6420 3d20 7064 2e44 6174 6146 7261 6d65  d = pd.DataFrame
-00019dc0: 2872 6650 7265 6429 2e74 7261 6e73 706f  (rfPred).transpo
-00019dd0: 7365 2829 0d0a 2020 2020 2020 2020 2020  se()..          
-00019de0: 2020 2320 7266 5072 6564 2e63 6f6c 756d    # rfPred.colum
-00019df0: 6e73 203d 205b 785f 636f 6c5d 0d0a 2020  ns = [x_col]..  
-00019e00: 2020 2020 2020 2020 2020 7266 5072 6564            rfPred
-00019e10: 203d 2070 642e 5365 7269 6573 2872 6650   = pd.Series(rfP
-00019e20: 7265 642e 666c 6174 7465 6e28 2929 0d0a  red.flatten())..
-00019e30: 2020 2020 2020 2020 2020 2020 7266 5072              rfPr
-00019e40: 6564 2e6e 616d 6520 3d20 785f 636f 6c0d  ed.name = x_col.
-00019e50: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00019e60: 6563 6173 7420 3d20 7064 2e63 6f6e 6361  ecast = pd.conca
-00019e70: 7428 5b66 6f72 6563 6173 742c 2072 6650  t([forecast, rfP
-00019e80: 7265 645d 2c20 6178 6973 3d31 290d 0a0d  red], axis=1)...
-00019e90: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
-00019ea0: 7420 3d20 666f 7265 6361 7374 5b73 656c  t = forecast[sel
-00019eb0: 662e 636f 6c75 6d6e 5f6e 616d 6573 5d0d  f.column_names].
-00019ec0: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
-00019ed0: 742e 696e 6465 7820 3d20 696e 6465 780d  t.index = index.
-00019ee0: 0a0d 0a20 2020 2020 2020 2069 6620 6a75  ...        if ju
-00019ef0: 7374 5f70 6f69 6e74 5f66 6f72 6563 6173  st_point_forecas
-00019f00: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00019f10: 7265 7475 726e 2066 6f72 6563 6173 740d  return forecast.
-00019f20: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00019f30: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
-00019f40: 725f 666f 7265 6361 7374 2c20 6c6f 7765  r_forecast, lowe
-00019f50: 725f 666f 7265 6361 7374 203d 2050 6f69  r_forecast = Poi
-00019f60: 6e74 5f74 6f5f 5072 6f62 6162 696c 6974  nt_to_Probabilit
-00019f70: 7928 0d0a 2020 2020 2020 2020 2020 2020  y(..            
-00019f80: 2020 2020 7365 6c66 2e73 6b74 7261 696e      self.sktrain
-00019f90: 6461 7461 2c0d 0a20 2020 2020 2020 2020  data,..         
-00019fa0: 2020 2020 2020 2066 6f72 6563 6173 742c         forecast,
-00019fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019fc0: 2020 6d65 7468 6f64 3d27 696e 6665 7272    method='inferr
-00019fd0: 6564 5f6e 6f72 6d61 6c27 2c0d 0a20 2020  ed_normal',..   
-00019fe0: 2020 2020 2020 2020 2020 2020 2070 7265               pre
-00019ff0: 6469 6374 696f 6e5f 696e 7465 7276 616c  diction_interval
-0001a000: 3d73 656c 662e 7072 6564 6963 7469 6f6e  =self.prediction
-0001a010: 5f69 6e74 6572 7661 6c2c 0d0a 2020 2020  _interval,..    
-0001a020: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
-0001a030: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-0001a040: 5f72 756e 7469 6d65 203d 2064 6174 6574  _runtime = datet
-0001a050: 696d 652e 6461 7465 7469 6d65 2e6e 6f77  ime.datetime.now
-0001a060: 2829 202d 2070 7265 6469 6374 5374 6172  () - predictStar
-0001a070: 7454 696d 650d 0a20 2020 2020 2020 2020  tTime..         
-0001a080: 2020 2070 7265 6469 6374 696f 6e20 3d20     prediction = 
-0001a090: 5072 6564 6963 7469 6f6e 4f62 6a65 6374  PredictionObject
-0001a0a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0001a0b0: 2020 206d 6f64 656c 5f6e 616d 653d 7365     model_name=se
-0001a0c0: 6c66 2e6e 616d 652c 0d0a 2020 2020 2020  lf.name,..      
-0001a0d0: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
-0001a0e0: 7374 5f6c 656e 6774 683d 7365 6c66 2e66  st_length=self.f
-0001a0f0: 6f72 6563 6173 745f 6c65 6e67 7468 2c0d  orecast_length,.
-0001a100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a110: 2066 6f72 6563 6173 745f 696e 6465 783d   forecast_index=
-0001a120: 666f 7265 6361 7374 2e69 6e64 6578 2c0d  forecast.index,.
-0001a130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a140: 2066 6f72 6563 6173 745f 636f 6c75 6d6e   forecast_column
-0001a150: 733d 666f 7265 6361 7374 2e63 6f6c 756d  s=forecast.colum
-0001a160: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
-0001a170: 2020 2020 206c 6f77 6572 5f66 6f72 6563       lower_forec
-0001a180: 6173 743d 6c6f 7765 725f 666f 7265 6361  ast=lower_foreca
-0001a190: 7374 2c0d 0a20 2020 2020 2020 2020 2020  st,..           
-0001a1a0: 2020 2020 2066 6f72 6563 6173 743d 666f       forecast=fo
-0001a1b0: 7265 6361 7374 2c0d 0a20 2020 2020 2020  recast,..       
-0001a1c0: 2020 2020 2020 2020 2075 7070 6572 5f66           upper_f
-0001a1d0: 6f72 6563 6173 743d 7570 7065 725f 666f  orecast=upper_fo
-0001a1e0: 7265 6361 7374 2c0d 0a20 2020 2020 2020  recast,..       
-0001a1f0: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-0001a200: 696f 6e5f 696e 7465 7276 616c 3d73 656c  ion_interval=sel
-0001a210: 662e 7072 6564 6963 7469 6f6e 5f69 6e74  f.prediction_int
-0001a220: 6572 7661 6c2c 0d0a 2020 2020 2020 2020  erval,..        
-0001a230: 2020 2020 2020 2020 7072 6564 6963 745f          predict_
-0001a240: 7275 6e74 696d 653d 7072 6564 6963 745f  runtime=predict_
-0001a250: 7275 6e74 696d 652c 0d0a 2020 2020 2020  runtime,..      
-0001a260: 2020 2020 2020 2020 2020 6669 745f 7275            fit_ru
-0001a270: 6e74 696d 653d 7365 6c66 2e66 6974 5f72  ntime=self.fit_r
-0001a280: 756e 7469 6d65 2c0d 0a20 2020 2020 2020  untime,..       
-0001a290: 2020 2020 2020 2020 206d 6f64 656c 5f70           model_p
-0001a2a0: 6172 616d 6574 6572 733d 7365 6c66 2e67  arameters=self.g
-0001a2b0: 6574 5f70 6172 616d 7328 292c 0d0a 2020  et_params(),..  
-0001a2c0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-0001a2d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001a2e0: 7072 6564 6963 7469 6f6e 0d0a 0d0a 2020  prediction....  
-0001a2f0: 2020 6465 6620 6765 745f 6e65 775f 7061    def get_new_pa
-0001a300: 7261 6d73 2873 656c 662c 206d 6574 686f  rams(self, metho
-0001a310: 643a 2073 7472 203d 2027 7261 6e64 6f6d  d: str = 'random
-0001a320: 2729 3a0d 0a20 2020 2020 2020 2022 2222  '):..        """
-0001a330: 5265 7475 726e 2064 6963 7420 6f66 206e  Return dict of n
-0001a340: 6577 2070 6172 616d 6574 6572 7320 666f  ew parameters fo
-0001a350: 7220 7061 7261 6d65 7465 7220 7475 6e69  r parameter tuni
-0001a360: 6e67 2e22 2222 0d0a 2020 2020 2020 2020  ng."""..        
-0001a370: 6966 206d 6574 686f 6420 3d3d 2022 6465  if method == "de
-0001a380: 6570 223a 0d0a 2020 2020 2020 2020 2020  ep":..          
-0001a390: 2020 785f 7472 616e 7366 6f72 6d5f 6368    x_transform_ch
-0001a3a0: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
-0001a3b0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-0001a3c0: 2020 2020 2020 2020 5b4e 6f6e 652c 2027          [None, '
-0001a3d0: 4661 7374 4943 4127 2c20 274e 7973 7472  FastICA', 'Nystr
-0001a3e0: 6f65 6d27 2c20 2752 6d5a 6572 6f56 6172  oem', 'RmZeroVar
-0001a3f0: 6961 6e63 6527 5d2c 0d0a 2020 2020 2020  iance'],..      
-0001a400: 2020 2020 2020 2020 2020 5b30 2e39 2c20            [0.9, 
-0001a410: 302e 3033 2c20 302e 3033 2c20 302e 3034  0.03, 0.03, 0.04
-0001a420: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
-0001a430: 295b 305d 0d0a 2020 2020 2020 2020 2020  )[0]..          
-0001a440: 2020 7769 6e64 6f77 5f63 686f 6963 6520    window_choice 
-0001a450: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-0001a460: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-0001a470: 2020 205b 4e6f 6e65 2c20 332c 2037 2c20     [None, 3, 7, 
-0001a480: 3130 2c20 3234 5d2c 205b 302e 372c 2030  10, 24], [0.7, 0
-0001a490: 2e32 2c20 302e 3035 2c20 302e 3035 2c20  .2, 0.05, 0.05, 
-0001a4a0: 302e 3035 5d0d 0a20 2020 2020 2020 2020  0.05]..         
-0001a4b0: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
-0001a4c0: 2020 2020 206d 6f64 656c 5f63 686f 6963       model_choic
-0001a4d0: 6520 3d20 6765 6e65 7261 7465 5f72 6567  e = generate_reg
-0001a4e0: 7265 7373 6f72 5f70 6172 616d 7328 0d0a  ressor_params(..
-0001a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a500: 6d6f 6465 6c5f 6469 6374 3d75 6e69 7661  model_dict=univa
-0001a510: 7269 6174 655f 6d6f 6465 6c5f 6469 6374  riate_model_dict
-0001a520: 2c20 6d65 7468 6f64 3d6d 6574 686f 640d  , method=method.
-0001a530: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-0001a540: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0001a550: 2020 2020 2020 2020 2020 2078 5f74 7261             x_tra
-0001a560: 6e73 666f 726d 5f63 686f 6963 6520 3d20  nsform_choice = 
-0001a570: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-0001a580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a590: 205b 4e6f 6e65 2c20 2746 6173 7449 4341   [None, 'FastICA
-0001a5a0: 272c 2027 4e79 7374 726f 656d 272c 2027  ', 'Nystroem', '
-0001a5b0: 526d 5a65 726f 5661 7269 616e 6365 275d  RmZeroVariance']
-0001a5c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a5d0: 2020 205b 312e 302c 2030 2e30 2c20 302e     [1.0, 0.0, 0.
-0001a5e0: 302c 2030 2e30 5d2c 0d0a 2020 2020 2020  0, 0.0],..      
-0001a5f0: 2020 2020 2020 295b 305d 0d0a 2020 2020        )[0]..    
-0001a600: 2020 2020 2020 2020 7769 6e64 6f77 5f63          window_c
-0001a610: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-0001a620: 686f 6963 6573 285b 4e6f 6e65 2c20 332c  hoices([None, 3,
-0001a630: 2037 2c20 3130 5d2c 205b 302e 372c 2030   7, 10], [0.7, 0
-0001a640: 2e32 2c20 302e 3035 2c20 302e 3035 5d29  .2, 0.05, 0.05])
-0001a650: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-0001a660: 206d 6f64 656c 5f63 686f 6963 6520 3d20   model_choice = 
-0001a670: 6765 6e65 7261 7465 5f72 6567 7265 7373  generate_regress
-0001a680: 6f72 5f70 6172 616d 7328 0d0a 2020 2020  or_params(..    
-0001a690: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-0001a6a0: 6c5f 6469 6374 3d7b 0d0a 2020 2020 2020  l_dict={..      
-0001a6b0: 2020 2020 2020 2020 2020 2020 2020 2745                'E
-0001a6c0: 6c61 7374 6963 4e65 7427 3a20 302e 322c  lasticNet': 0.2,
-0001a6d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a6e0: 2020 2020 2020 2744 6563 6973 696f 6e54        'DecisionT
-0001a6f0: 7265 6527 3a20 302e 342c 0d0a 2020 2020  ree': 0.4,..    
-0001a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a710: 2746 6173 7452 6964 6765 273a 2030 2e32  'FastRidge': 0.2
-0001a720: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001a730: 2020 2020 2020 2027 4c69 6e65 6172 5265         'LinearRe
-0001a740: 6772 6573 7369 6f6e 273a 2030 2e32 2c0d  gression': 0.2,.
-0001a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a760: 2020 2020 2023 2027 4578 7472 6154 7265       # 'ExtraTre
-0001a770: 6573 273a 2030 2e31 2c0d 0a20 2020 2020  es': 0.1,..     
-0001a780: 2020 2020 2020 2020 2020 207d 2c0d 0a20             },.. 
-0001a790: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001a7a0: 6574 686f 643d 6d65 7468 6f64 2c0d 0a20  ethod=method,.. 
-0001a7b0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-0001a7c0: 2020 2020 2020 6966 206d 6574 686f 6420        if method 
-0001a7d0: 3d3d 2027 6e65 7572 616c 6e65 7473 273a  == 'neuralnets':
-0001a7e0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-0001a7f0: 696e 7428 2760 6e65 7572 616c 6e65 7473  int('`neuralnets
-0001a800: 6020 6d6f 6465 6c5f 6d6f 6465 2064 6f65  ` model_mode doe
-0001a810: 7320 6e6f 7420 6170 706c 7920 746f 2055  s not apply to U
-0001a820: 6e69 7661 7269 6174 6552 6567 7265 7373  nivariateRegress
-0001a830: 696f 6e27 290d 0a20 2020 2020 2020 2020  ion')..         
-0001a840: 2020 206d 6574 686f 6420 3d20 2764 6565     method = 'dee
-0001a850: 7027 0d0a 0d0a 2020 2020 2020 2020 6d65  p'....        me
-0001a860: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-0001a870: 6473 5f63 686f 6963 6520 3d20 7261 6e64  ds_choice = rand
-0001a880: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
-0001a890: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
-0001a8a0: 352c 2037 2c20 3132 2c20 3330 5d2c 205b  5, 7, 12, 30], [
-0001a8b0: 302e 362c 2030 2e31 2c20 302e 312c 2030  0.6, 0.1, 0.1, 0
-0001a8c0: 2e31 2c20 302e 315d 0d0a 2020 2020 2020  .1, 0.1]..      
-0001a8d0: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
-0001a8e0: 6966 206d 6561 6e5f 726f 6c6c 696e 675f  if mean_rolling_
-0001a8f0: 7065 7269 6f64 735f 6368 6f69 6365 2069  periods_choice i
-0001a900: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0001a910: 2020 2020 2020 2020 206d 6163 645f 7065           macd_pe
-0001a920: 7269 6f64 735f 6368 6f69 6365 203d 2073  riods_choice = s
-0001a930: 6561 736f 6e61 6c5f 696e 7428 290d 0a20  easonal_int().. 
-0001a940: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-0001a950: 6364 5f70 6572 696f 6473 5f63 686f 6963  cd_periods_choic
-0001a960: 6520 3d3d 206d 6561 6e5f 726f 6c6c 696e  e == mean_rollin
-0001a970: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
-0001a980: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001a990: 2020 206d 6163 645f 7065 7269 6f64 735f     macd_periods_
-0001a9a0: 6368 6f69 6365 203d 206d 6561 6e5f 726f  choice = mean_ro
-0001a9b0: 6c6c 696e 675f 7065 7269 6f64 735f 6368  lling_periods_ch
-0001a9c0: 6f69 6365 202b 2031 300d 0a20 2020 2020  oice + 10..     
-0001a9d0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0001a9e0: 2020 2020 2020 6d61 6364 5f70 6572 696f        macd_perio
-0001a9f0: 6473 5f63 686f 6963 6520 3d20 4e6f 6e65  ds_choice = None
-0001aa00: 0d0a 2020 2020 2020 2020 7374 645f 726f  ..        std_ro
-0001aa10: 6c6c 696e 675f 7065 7269 6f64 735f 6368  lling_periods_ch
-0001aa20: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
-0001aa30: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-0001aa40: 2020 2020 5b4e 6f6e 652c 2035 2c20 372c      [None, 5, 7,
-0001aa50: 2031 302c 2033 305d 2c20 5b30 2e36 2c20   10, 30], [0.6, 
-0001aa60: 302e 312c 2030 2e31 2c20 302e 312c 2030  0.1, 0.1, 0.1, 0
-0001aa70: 2e31 5d0d 0a20 2020 2020 2020 2029 5b30  .1]..        )[0
-0001aa80: 5d0d 0a20 2020 2020 2020 206d 6178 5f72  ]..        max_r
-0001aa90: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-0001aaa0: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-0001aab0: 686f 6963 6573 285b 4e6f 6e65 2c20 7365  hoices([None, se
-0001aac0: 6173 6f6e 616c 5f69 6e74 2829 5d2c 205b  asonal_int()], [
-0001aad0: 302e 352c 2030 2e35 5d29 5b0d 0a20 2020  0.5, 0.5])[..   
-0001aae0: 2020 2020 2020 2020 2030 0d0a 2020 2020           0..    
-0001aaf0: 2020 2020 5d0d 0a20 2020 2020 2020 206d      ]..        m
-0001ab00: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
-0001ab10: 6473 5f63 686f 6963 6520 3d20 7261 6e64  ds_choice = rand
-0001ab20: 6f6d 2e63 686f 6963 6573 285b 4e6f 6e65  om.choices([None
-0001ab30: 2c20 7365 6173 6f6e 616c 5f69 6e74 2829  , seasonal_int()
-0001ab40: 5d2c 205b 302e 352c 2030 2e35 5d29 5b0d  ], [0.5, 0.5])[.
-0001ab50: 0a20 2020 2020 2020 2020 2020 2030 0d0a  .            0..
-0001ab60: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
-0001ab70: 2020 206c 6167 5f70 6572 696f 6473 5f63     lag_periods_c
-0001ab80: 686f 6963 6520 3d20 7365 6173 6f6e 616c  hoice = seasonal
-0001ab90: 5f69 6e74 2829 202d 2031 0d0a 2020 2020  _int() - 1..    
-0001aba0: 2020 2020 6c61 675f 7065 7269 6f64 735f      lag_periods_
-0001abb0: 6368 6f69 6365 203d 2032 2069 6620 6c61  choice = 2 if la
-0001abc0: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
-0001abd0: 203c 2032 2065 6c73 6520 6c61 675f 7065   < 2 else lag_pe
-0001abe0: 7269 6f64 735f 6368 6f69 6365 0d0a 2020  riods_choice..  
-0001abf0: 2020 2020 2020 6577 6d5f 6368 6f69 6365        ewm_choice
-0001ac00: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
-0001ac10: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
-0001ac20: 5b4e 6f6e 652c 2030 2e31 2c20 302e 322c  [None, 0.1, 0.2,
-0001ac30: 2030 2e35 2c20 302e 385d 2c20 5b30 2e37   0.5, 0.8], [0.7
-0001ac40: 352c 2030 2e30 352c 2030 2e31 2c20 302e  5, 0.05, 0.1, 0.
-0001ac50: 312c 2030 2e30 355d 0d0a 2020 2020 2020  1, 0.05]..      
-0001ac60: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
-0001ac70: 6577 6d5f 7661 725f 616c 7068 6120 3d20  ewm_var_alpha = 
-0001ac80: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-0001ac90: 0a20 2020 2020 2020 2020 2020 205b 4e6f  .            [No
-0001aca0: 6e65 2c20 302e 3035 2c20 302e 312c 2030  ne, 0.05, 0.1, 0
-0001acb0: 2e32 2c20 302e 352c 2030 2e38 5d2c 205b  .2, 0.5, 0.8], [
-0001acc0: 302e 372c 2030 2e30 312c 2030 2e30 352c  0.7, 0.01, 0.05,
-0001acd0: 2030 2e31 2c20 302e 312c 2030 2e30 355d   0.1, 0.1, 0.05]
-0001ace0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
-0001acf0: 2020 2020 2020 2020 6162 735f 656e 6572          abs_ener
-0001ad00: 6779 5f63 686f 6963 6520 3d20 7261 6e64  gy_choice = rand
-0001ad10: 6f6d 2e63 686f 6963 6573 285b 5472 7565  om.choices([True
-0001ad20: 2c20 4661 6c73 655d 2c20 5b30 2e30 352c  , False], [0.05,
-0001ad30: 2030 2e39 355d 295b 305d 0d0a 2020 2020   0.95])[0]..    
-0001ad40: 2020 2020 726f 6c6c 696e 675f 6175 746f      rolling_auto
-0001ad50: 636f 7272 5f70 6572 696f 6473 5f63 686f  corr_periods_cho
-0001ad60: 6963 6520 3d20 7261 6e64 6f6d 2e63 686f  ice = random.cho
-0001ad70: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-0001ad80: 2020 205b 4e6f 6e65 2c20 322c 2037 2c20     [None, 2, 7, 
-0001ad90: 3132 2c20 3330 5d2c 205b 302e 3836 2c20  12, 30], [0.86, 
-0001ada0: 302e 3031 2c20 302e 3031 2c20 302e 3031  0.01, 0.01, 0.01
-0001adb0: 2c20 302e 3031 5d0d 0a20 2020 2020 2020  , 0.01]..       
-0001adc0: 2029 5b30 5d0d 0a20 2020 2020 2020 2061   )[0]..        a
-0001add0: 6464 5f64 6174 655f 7061 7274 5f63 686f  dd_date_part_cho
-0001ade0: 6963 6520 3d20 7261 6e64 6f6d 2e63 686f  ice = random.cho
-0001adf0: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
-0001ae00: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
-0001ae10: 2020 2020 2020 4e6f 6e65 2c0d 0a20 2020        None,..   
-0001ae20: 2020 2020 2020 2020 2020 2020 2027 7369               'si
-0001ae30: 6d70 6c65 272c 0d0a 2020 2020 2020 2020  mple',..        
-0001ae40: 2020 2020 2020 2020 2765 7870 616e 6465          'expande
-0001ae50: 6427 2c0d 0a20 2020 2020 2020 2020 2020  d',..           
-0001ae60: 2020 2020 2027 7265 6375 7272 696e 6727       'recurring'
-0001ae70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001ae80: 2020 2022 7369 6d70 6c65 5f32 222c 0d0a     "simple_2",..
-0001ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aea0: 2273 696d 706c 655f 325f 706f 6c79 222c  "simple_2_poly",
-0001aeb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001aec0: 2020 2273 696d 706c 655f 6269 6e61 7269    "simple_binari
-0001aed0: 7a65 6422 2c0d 0a20 2020 2020 2020 2020  zed",..         
-0001aee0: 2020 205d 2c0d 0a20 2020 2020 2020 2020     ],..         
-0001aef0: 2020 205b 302e 382c 2030 2e30 352c 2030     [0.8, 0.05, 0
-0001af00: 2e31 2c20 302e 312c 2030 2e30 352c 2030  .1, 0.1, 0.05, 0
-0001af10: 2e30 352c 2030 2e30 355d 2c0d 0a20 2020  .05, 0.05],..   
-0001af20: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
-0001af30: 2020 2068 6f6c 6964 6179 5f63 686f 6963     holiday_choic
-0001af40: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-0001af50: 6573 285b 5472 7565 2c20 4661 6c73 655d  es([True, False]
-0001af60: 2c20 5b30 2e32 2c20 302e 385d 295b 305d  , [0.2, 0.8])[0]
-0001af70: 0d0a 2020 2020 2020 2020 706f 6c79 6e6f  ..        polyno
-0001af80: 6d69 616c 5f64 6567 7265 655f 6368 6f69  mial_degree_choi
-0001af90: 6365 203d 204e 6f6e 650d 0a0d 0a20 2020  ce = None....   
-0001afa0: 2020 2020 2069 6620 2272 6567 7265 7373       if "regress
-0001afb0: 6f72 2220 696e 206d 6574 686f 643a 0d0a  or" in method:..
-0001afc0: 2020 2020 2020 2020 2020 2020 7265 6772              regr
-0001afd0: 6573 7369 6f6e 5f63 686f 6963 6520 3d20  ession_choice = 
-0001afe0: 2255 7365 7222 0d0a 2020 2020 2020 2020  "User"..        
-0001aff0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-0001b000: 2020 2072 6567 7265 7373 696f 6e5f 6368     regression_ch
-0001b010: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
-0001b020: 6f69 6365 7328 5b4e 6f6e 652c 2027 5573  oices([None, 'Us
-0001b030: 6572 275d 2c20 5b30 2e37 2c20 302e 335d  er'], [0.7, 0.3]
-0001b040: 295b 305d 0d0a 0d0a 2020 2020 2020 2020  )[0]....        
-0001b050: 7061 7261 6d65 7465 725f 6469 6374 203d  parameter_dict =
-0001b060: 207b 0d0a 2020 2020 2020 2020 2020 2020   {..            
-0001b070: 2772 6567 7265 7373 696f 6e5f 6d6f 6465  'regression_mode
-0001b080: 6c27 3a20 6d6f 6465 6c5f 6368 6f69 6365  l': model_choice
-0001b090: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-0001b0a0: 686f 6c69 6461 7927 3a20 686f 6c69 6461  holiday': holida
-0001b0b0: 795f 6368 6f69 6365 2c0d 0a20 2020 2020  y_choice,..     
-0001b0c0: 2020 2020 2020 2027 6d65 616e 5f72 6f6c         'mean_rol
-0001b0d0: 6c69 6e67 5f70 6572 696f 6473 273a 206d  ling_periods': m
-0001b0e0: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
-0001b0f0: 6f64 735f 6368 6f69 6365 2c0d 0a20 2020  ods_choice,..   
-0001b100: 2020 2020 2020 2020 2027 6d61 6364 5f70           'macd_p
-0001b110: 6572 696f 6473 273a 206d 6163 645f 7065  eriods': macd_pe
-0001b120: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
-0001b130: 2020 2020 2020 2020 2020 2027 7374 645f             'std_
-0001b140: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
-0001b150: 3a20 7374 645f 726f 6c6c 696e 675f 7065  : std_rolling_pe
-0001b160: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
-0001b170: 2020 2020 2020 2020 2020 2027 6d61 785f             'max_
-0001b180: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
-0001b190: 3a20 6d61 785f 726f 6c6c 696e 675f 7065  : max_rolling_pe
-0001b1a0: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
-0001b1b0: 2020 2020 2020 2020 2020 2027 6d69 6e5f             'min_
-0001b1c0: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
-0001b1d0: 3a20 6d69 6e5f 726f 6c6c 696e 675f 7065  : min_rolling_pe
-0001b1e0: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
-0001b1f0: 2020 2020 2020 2020 2020 2022 6577 6d5f             "ewm_
-0001b200: 7661 725f 616c 7068 6122 3a20 6577 6d5f  var_alpha": ewm_
-0001b210: 7661 725f 616c 7068 612c 0d0a 2020 2020  var_alpha,..    
-0001b220: 2020 2020 2020 2020 2765 776d 5f61 6c70          'ewm_alp
-0001b230: 6861 273a 2065 776d 5f63 686f 6963 652c  ha': ewm_choice,
-0001b240: 0d0a 2020 2020 2020 2020 2020 2020 2761  ..            'a
-0001b250: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
-0001b260: 7269 6f64 7327 3a20 6c61 675f 7065 7269  riods': lag_peri
-0001b270: 6f64 735f 6368 6f69 6365 2c0d 0a20 2020  ods_choice,..   
-0001b280: 2020 2020 2020 2020 2027 6162 735f 656e           'abs_en
-0001b290: 6572 6779 273a 2061 6273 5f65 6e65 7267  ergy': abs_energ
-0001b2a0: 795f 6368 6f69 6365 2c0d 0a20 2020 2020  y_choice,..     
-0001b2b0: 2020 2020 2020 2027 726f 6c6c 696e 675f         'rolling_
-0001b2c0: 6175 746f 636f 7272 5f70 6572 696f 6473  autocorr_periods
-0001b2d0: 273a 2072 6f6c 6c69 6e67 5f61 7574 6f63  ': rolling_autoc
-0001b2e0: 6f72 725f 7065 7269 6f64 735f 6368 6f69  orr_periods_choi
-0001b2f0: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-0001b300: 2027 6164 645f 6461 7465 5f70 6172 7427   'add_date_part'
-0001b310: 3a20 6164 645f 6461 7465 5f70 6172 745f  : add_date_part_
-0001b320: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-0001b330: 2020 2020 2027 706f 6c79 6e6f 6d69 616c       'polynomial
-0001b340: 5f64 6567 7265 6527 3a20 706f 6c79 6e6f  _degree': polyno
-0001b350: 6d69 616c 5f64 6567 7265 655f 6368 6f69  mial_degree_choi
-0001b360: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-0001b370: 2027 785f 7472 616e 7366 6f72 6d27 3a20   'x_transform': 
-0001b380: 785f 7472 616e 7366 6f72 6d5f 6368 6f69  x_transform_choi
-0001b390: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-0001b3a0: 2027 7265 6772 6573 7369 6f6e 5f74 7970   'regression_typ
-0001b3b0: 6527 3a20 7265 6772 6573 7369 6f6e 5f63  e': regression_c
-0001b3c0: 686f 6963 652c 0d0a 2020 2020 2020 2020  hoice,..        
-0001b3d0: 2020 2020 2777 696e 646f 7727 3a20 7769      'window': wi
-0001b3e0: 6e64 6f77 5f63 686f 6963 652c 0d0a 2020  ndow_choice,..  
-0001b3f0: 2020 2020 2020 7d0d 0a20 2020 2020 2020        }..       
-0001b400: 2072 6574 7572 6e20 7061 7261 6d65 7465   return paramete
-0001b410: 725f 6469 6374 0d0a 0d0a 2020 2020 6465  r_dict....    de
-0001b420: 6620 6765 745f 7061 7261 6d73 2873 656c  f get_params(sel
-0001b430: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
-0001b440: 5265 7475 726e 2064 6963 7420 6f66 2063  Return dict of c
-0001b450: 7572 7265 6e74 2070 6172 616d 6574 6572  urrent parameter
-0001b460: 732e 2222 220d 0a20 2020 2020 2020 2070  s."""..        p
-0001b470: 6172 616d 6574 6572 5f64 6963 7420 3d20  arameter_dict = 
-0001b480: 7b0d 0a20 2020 2020 2020 2020 2020 2027  {..            '
-0001b490: 7265 6772 6573 7369 6f6e 5f6d 6f64 656c  regression_model
-0001b4a0: 273a 2073 656c 662e 7265 6772 6573 7369  ': self.regressi
-0001b4b0: 6f6e 5f6d 6f64 656c 2c0d 0a20 2020 2020  on_model,..     
-0001b4c0: 2020 2020 2020 2027 686f 6c69 6461 7927         'holiday'
-0001b4d0: 3a20 7365 6c66 2e68 6f6c 6964 6179 2c0d  : self.holiday,.
-0001b4e0: 0a20 2020 2020 2020 2020 2020 2027 6d65  .            'me
-0001b4f0: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-0001b500: 6473 273a 2073 656c 662e 6d65 616e 5f72  ds': self.mean_r
-0001b510: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
-0001b520: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
-0001b530: 6364 5f70 6572 696f 6473 273a 2073 656c  cd_periods': sel
-0001b540: 662e 6d61 6364 5f70 6572 696f 6473 2c0d  f.macd_periods,.
-0001b550: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
-0001b560: 645f 726f 6c6c 696e 675f 7065 7269 6f64  d_rolling_period
-0001b570: 7327 3a20 7365 6c66 2e73 7464 5f72 6f6c  s': self.std_rol
-0001b580: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
-0001b590: 2020 2020 2020 2020 2020 2027 6d61 785f             'max_
-0001b5a0: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
-0001b5b0: 3a20 7365 6c66 2e6d 6178 5f72 6f6c 6c69  : self.max_rolli
-0001b5c0: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
-0001b5d0: 2020 2020 2020 2020 2027 6d69 6e5f 726f           'min_ro
-0001b5e0: 6c6c 696e 675f 7065 7269 6f64 7327 3a20  lling_periods': 
-0001b5f0: 7365 6c66 2e6d 696e 5f72 6f6c 6c69 6e67  self.min_rolling
-0001b600: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-0001b610: 2020 2020 2020 2022 6577 6d5f 7661 725f         "ewm_var_
-0001b620: 616c 7068 6122 3a20 7365 6c66 2e65 776d  alpha": self.ewm
-0001b630: 5f76 6172 5f61 6c70 6861 2c0d 0a20 2020  _var_alpha,..   
-0001b640: 2020 2020 2020 2020 2027 6577 6d5f 616c           'ewm_al
-0001b650: 7068 6127 3a20 7365 6c66 2e65 776d 5f61  pha': self.ewm_a
-0001b660: 6c70 6861 2c0d 0a20 2020 2020 2020 2020  lpha,..         
-0001b670: 2020 2027 6164 6469 7469 6f6e 616c 5f6c     'additional_l
-0001b680: 6167 5f70 6572 696f 6473 273a 2073 656c  ag_periods': sel
-0001b690: 662e 6164 6469 7469 6f6e 616c 5f6c 6167  f.additional_lag
-0001b6a0: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-0001b6b0: 2020 2020 2020 2027 6162 735f 656e 6572         'abs_ener
-0001b6c0: 6779 273a 2073 656c 662e 6162 735f 656e  gy': self.abs_en
-0001b6d0: 6572 6779 2c0d 0a20 2020 2020 2020 2020  ergy,..         
-0001b6e0: 2020 2027 726f 6c6c 696e 675f 6175 746f     'rolling_auto
-0001b6f0: 636f 7272 5f70 6572 696f 6473 273a 2073  corr_periods': s
-0001b700: 656c 662e 726f 6c6c 696e 675f 6175 746f  elf.rolling_auto
-0001b710: 636f 7272 5f70 6572 696f 6473 2c0d 0a20  corr_periods,.. 
-0001b720: 2020 2020 2020 2020 2020 2027 6164 645f             'add_
-0001b730: 6461 7465 5f70 6172 7427 3a20 7365 6c66  date_part': self
-0001b740: 2e61 6464 5f64 6174 655f 7061 7274 2c0d  .add_date_part,.
-0001b750: 0a20 2020 2020 2020 2020 2020 2027 706f  .            'po
-0001b760: 6c79 6e6f 6d69 616c 5f64 6567 7265 6527  lynomial_degree'
-0001b770: 3a20 7365 6c66 2e70 6f6c 796e 6f6d 6961  : self.polynomia
-0001b780: 6c5f 6465 6772 6565 2c0d 0a20 2020 2020  l_degree,..     
-0001b790: 2020 2020 2020 2027 785f 7472 616e 7366         'x_transf
-0001b7a0: 6f72 6d27 3a20 7365 6c66 2e78 5f74 7261  orm': self.x_tra
-0001b7b0: 6e73 666f 726d 2c0d 0a20 2020 2020 2020  nsform,..       
-0001b7c0: 2020 2020 2027 7265 6772 6573 7369 6f6e       'regression
-0001b7d0: 5f74 7970 6527 3a20 7365 6c66 2e72 6567  _type': self.reg
-0001b7e0: 7265 7373 696f 6e5f 7479 7065 2c0d 0a20  ression_type,.. 
-0001b7f0: 2020 2020 2020 2020 2020 2027 7769 6e64             'wind
-0001b800: 6f77 273a 2073 656c 662e 7769 6e64 6f77  ow': self.window
-0001b810: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
-0001b820: 2020 2020 2020 7265 7475 726e 2070 6172        return par
-0001b830: 616d 6574 6572 5f64 6963 740d 0a0d 0a0d  ameter_dict.....
-0001b840: 0a63 6c61 7373 204d 756c 7469 7661 7269  .class Multivari
-0001b850: 6174 6552 6567 7265 7373 696f 6e28 4d6f  ateRegression(Mo
-0001b860: 6465 6c4f 626a 6563 7429 3a0d 0a20 2020  delObject):..   
-0001b870: 2022 2222 5265 6772 6573 7369 6f6e 2d66   """Regression-f
-0001b880: 7261 6d65 6420 6170 7072 6f61 6368 2074  ramed approach t
-0001b890: 6f20 666f 7265 6361 7374 696e 6720 7573  o forecasting us
-0001b8a0: 696e 6720 736b 6c65 6172 6e2e 0d0a 2020  ing sklearn...  
-0001b8b0: 2020 4120 6d75 6c74 6961 7269 6174 6520    A multiariate 
-0001b8c0: 7665 7273 696f 6e20 6f66 2072 6f6c 6c69  version of rolli
-0001b8d0: 6e67 2072 6567 7265 7373 696f 6e3a 2069  ng regression: i
-0001b8e0: 6520 6561 6368 2073 6572 6965 7320 6973  e each series is
-0001b8f0: 206c 6167 6765 6420 696e 6465 7065 6e64   lagged independ
-0001b900: 656e 746c 7920 6275 7420 6d6f 6465 6c65  ently but modele
-0001b910: 6420 746f 6765 7468 6572 0d0a 0d0a 2020  d together....  
-0001b920: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-0001b930: 206e 616d 6520 2873 7472 293a 2053 7472   name (str): Str
-0001b940: 696e 6720 746f 2069 6465 6e74 6966 7920  ing to identify 
-0001b950: 636c 6173 730d 0a20 2020 2020 2020 2066  class..        f
-0001b960: 7265 7175 656e 6379 2028 7374 7229 3a20  requency (str): 
-0001b970: 5374 7269 6e67 2061 6c69 6173 206f 6620  String alias of 
-0001b980: 6461 7465 7469 6d65 2069 6e64 6578 2066  datetime index f
-0001b990: 7265 7175 656e 6379 206f 7220 656c 7365  requency or else
-0001b9a0: 2027 696e 6665 7227 0d0a 2020 2020 2020   'infer'..      
-0001b9b0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
-0001b9c0: 6572 7661 6c20 2866 6c6f 6174 293a 2043  erval (float): C
-0001b9d0: 6f6e 6669 6465 6e63 6520 696e 7465 7276  onfidence interv
-0001b9e0: 616c 2066 6f72 2070 726f 6261 6269 6c69  al for probabili
-0001b9f0: 7374 6963 2066 6f72 6563 6173 740d 0a20  stic forecast.. 
-0001ba00: 2020 2020 2020 2068 6f6c 6964 6179 2028         holiday (
-0001ba10: 626f 6f6c 293a 2049 6620 7472 7565 2c20  bool): If true, 
-0001ba20: 696e 636c 7564 6520 686f 6c69 6461 7920  include holiday 
-0001ba30: 666c 6167 730d 0a20 2020 2020 2020 2072  flags..        r
-0001ba40: 6567 7265 7373 696f 6e5f 7479 7065 2028  egression_type (
-0001ba50: 7374 7229 3a20 7479 7065 206f 6620 7265  str): type of re
-0001ba60: 6772 6573 7369 6f6e 2028 4e6f 6e65 2c20  gression (None, 
-0001ba70: 2755 7365 7227 290d 0a0d 0a20 2020 2022  'User')....    "
-0001ba80: 2222 0d0a 0d0a 2020 2020 6465 6620 5f5f  ""....    def __
-0001ba90: 696e 6974 5f5f 280d 0a20 2020 2020 2020  init__(..       
-0001baa0: 2073 656c 662c 0d0a 2020 2020 2020 2020   self,..        
-0001bab0: 6e61 6d65 3a20 7374 7220 3d20 224d 756c  name: str = "Mul
-0001bac0: 7469 7661 7269 6174 6552 6567 7265 7373  tivariateRegress
-0001bad0: 696f 6e22 2c0d 0a20 2020 2020 2020 2066  ion",..        f
-0001bae0: 7265 7175 656e 6379 3a20 7374 7220 3d20  requency: str = 
-0001baf0: 2769 6e66 6572 272c 0d0a 2020 2020 2020  'infer',..      
-0001bb00: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
-0001bb10: 6572 7661 6c3a 2066 6c6f 6174 203d 2030  erval: float = 0
-0001bb20: 2e39 2c0d 0a20 2020 2020 2020 2072 6567  .9,..        reg
-0001bb30: 7265 7373 696f 6e5f 7479 7065 3a20 7374  ression_type: st
-0001bb40: 7220 3d20 4e6f 6e65 2c0d 0a20 2020 2020  r = None,..     
-0001bb50: 2020 2068 6f6c 6964 6179 5f63 6f75 6e74     holiday_count
-0001bb60: 7279 3a20 7374 7220 3d20 2755 5327 2c0d  ry: str = 'US',.
-0001bb70: 0a20 2020 2020 2020 2076 6572 626f 7365  .        verbose
-0001bb80: 3a20 696e 7420 3d20 302c 0d0a 2020 2020  : int = 0,..    
-0001bb90: 2020 2020 7261 6e64 6f6d 5f73 6565 643a      random_seed:
-0001bba0: 2069 6e74 203d 2032 3032 302c 0d0a 2020   int = 2020,..  
-0001bbb0: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
-0001bbc0: 656e 6774 683a 2069 6e74 203d 2037 2c0d  ength: int = 7,.
-0001bbd0: 0a20 2020 2020 2020 2072 6567 7265 7373  .        regress
-0001bbe0: 696f 6e5f 6d6f 6465 6c3a 2064 6963 7420  ion_model: dict 
-0001bbf0: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
-0001bc00: 2022 6d6f 6465 6c22 3a20 2752 616e 646f   "model": 'Rando
-0001bc10: 6d46 6f72 6573 7427 2c0d 0a20 2020 2020  mForest',..     
-0001bc20: 2020 2020 2020 2022 6d6f 6465 6c5f 7061         "model_pa
-0001bc30: 7261 6d73 223a 207b 7d2c 0d0a 2020 2020  rams": {},..    
-0001bc40: 2020 2020 7d2c 0d0a 2020 2020 2020 2020      },..        
-0001bc50: 686f 6c69 6461 793a 2062 6f6f 6c20 3d20  holiday: bool = 
-0001bc60: 4661 6c73 652c 0d0a 2020 2020 2020 2020  False,..        
-0001bc70: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
-0001bc80: 696f 6473 3a20 696e 7420 3d20 3330 2c0d  iods: int = 30,.
-0001bc90: 0a20 2020 2020 2020 206d 6163 645f 7065  .        macd_pe
-0001bca0: 7269 6f64 733a 2069 6e74 203d 204e 6f6e  riods: int = Non
-0001bcb0: 652c 0d0a 2020 2020 2020 2020 7374 645f  e,..        std_
-0001bcc0: 726f 6c6c 696e 675f 7065 7269 6f64 733a  rolling_periods:
-0001bcd0: 2069 6e74 203d 2037 2c0d 0a20 2020 2020   int = 7,..     
-0001bce0: 2020 206d 6178 5f72 6f6c 6c69 6e67 5f70     max_rolling_p
-0001bcf0: 6572 696f 6473 3a20 696e 7420 3d20 372c  eriods: int = 7,
-0001bd00: 0d0a 2020 2020 2020 2020 6d69 6e5f 726f  ..        min_ro
-0001bd10: 6c6c 696e 675f 7065 7269 6f64 733a 2069  lling_periods: i
-0001bd20: 6e74 203d 2037 2c0d 0a20 2020 2020 2020  nt = 7,..       
-0001bd30: 2065 776d 5f76 6172 5f61 6c70 6861 3a20   ewm_var_alpha: 
-0001bd40: 666c 6f61 7420 3d20 4e6f 6e65 2c0d 0a20  float = None,.. 
-0001bd50: 2020 2020 2020 2071 7561 6e74 696c 6539         quantile9
-0001bd60: 305f 726f 6c6c 696e 675f 7065 7269 6f64  0_rolling_period
-0001bd70: 733a 2069 6e74 203d 204e 6f6e 652c 0d0a  s: int = None,..
-0001bd80: 2020 2020 2020 2020 7175 616e 7469 6c65          quantile
-0001bd90: 3130 5f72 6f6c 6c69 6e67 5f70 6572 696f  10_rolling_perio
-0001bda0: 6473 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ds: int = None,.
-0001bdb0: 0a20 2020 2020 2020 2065 776d 5f61 6c70  .        ewm_alp
-0001bdc0: 6861 3a20 666c 6f61 7420 3d20 302e 352c  ha: float = 0.5,
-0001bdd0: 0d0a 2020 2020 2020 2020 6164 6469 7469  ..        additi
-0001bde0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-0001bdf0: 3a20 696e 7420 3d20 4e6f 6e65 2c0d 0a20  : int = None,.. 
-0001be00: 2020 2020 2020 2061 6273 5f65 6e65 7267         abs_energ
-0001be10: 793a 2062 6f6f 6c20 3d20 4661 6c73 652c  y: bool = False,
-0001be20: 0d0a 2020 2020 2020 2020 726f 6c6c 696e  ..        rollin
-0001be30: 675f 6175 746f 636f 7272 5f70 6572 696f  g_autocorr_perio
-0001be40: 6473 3a20 696e 7420 3d20 4e6f 6e65 2c0d  ds: int = None,.
-0001be50: 0a20 2020 2020 2020 206e 6f6e 7a65 726f  .        nonzero
-0001be60: 5f6c 6173 745f 6e3a 2069 6e74 203d 204e  _last_n: int = N
-0001be70: 6f6e 652c 0d0a 2020 2020 2020 2020 6461  one,..        da
-0001be80: 7465 7061 7274 5f6d 6574 686f 643a 2073  tepart_method: s
-0001be90: 7472 203d 204e 6f6e 652c 0d0a 2020 2020  tr = None,..    
-0001bea0: 2020 2020 706f 6c79 6e6f 6d69 616c 5f64      polynomial_d
-0001beb0: 6567 7265 653a 2069 6e74 203d 204e 6f6e  egree: int = Non
-0001bec0: 652c 0d0a 2020 2020 2020 2020 7769 6e64  e,..        wind
-0001bed0: 6f77 3a20 696e 7420 3d20 352c 0d0a 2020  ow: int = 5,..  
-0001bee0: 2020 2020 2020 7072 6f62 6162 696c 6973        probabilis
-0001bef0: 7469 633a 2062 6f6f 6c20 3d20 4661 6c73  tic: bool = Fals
-0001bf00: 652c 0d0a 2020 2020 2020 2020 7363 616c  e,..        scal
-0001bf10: 655f 6675 6c6c 5f58 3a20 626f 6f6c 203d  e_full_X: bool =
-0001bf20: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
-0001bf30: 2071 7561 6e74 696c 655f 7061 7261 6d73   quantile_params
-0001bf40: 3a20 6469 6374 203d 207b 0d0a 2020 2020  : dict = {..    
-0001bf50: 2020 2020 2020 2020 276c 6561 726e 696e          'learnin
-0001bf60: 675f 7261 7465 273a 2030 2e31 2c0d 0a20  g_rate': 0.1,.. 
-0001bf70: 2020 2020 2020 2020 2020 2027 6d61 785f             'max_
-0001bf80: 6465 7074 6827 3a20 3230 2c0d 0a20 2020  depth': 20,..   
-0001bf90: 2020 2020 2020 2020 2027 6d69 6e5f 7361           'min_sa
-0001bfa0: 6d70 6c65 735f 6c65 6166 273a 2034 2c0d  mples_leaf': 4,.
-0001bfb0: 0a20 2020 2020 2020 2020 2020 2027 6d69  .            'mi
-0001bfc0: 6e5f 7361 6d70 6c65 735f 7370 6c69 7427  n_samples_split'
-0001bfd0: 3a20 352c 0d0a 2020 2020 2020 2020 2020  : 5,..          
-0001bfe0: 2020 276e 5f65 7374 696d 6174 6f72 7327    'n_estimators'
-0001bff0: 3a20 3235 302c 0d0a 2020 2020 2020 2020  : 250,..        
-0001c000: 7d2c 0d0a 2020 2020 2020 2020 636f 696e  },..        coin
-0001c010: 7465 6772 6174 696f 6e3a 2073 7472 203d  tegration: str =
-0001c020: 204e 6f6e 652c 0d0a 2020 2020 2020 2020   None,..        
-0001c030: 636f 696e 7465 6772 6174 696f 6e5f 6c61  cointegration_la
-0001c040: 673a 2069 6e74 203d 2031 2c0d 0a20 2020  g: int = 1,..   
-0001c050: 2020 2020 206e 5f6a 6f62 733a 2069 6e74       n_jobs: int
-0001c060: 203d 202d 312c 0d0a 2020 2020 2020 2020   = -1,..        
-0001c070: 2a2a 6b77 6172 6773 2c0d 0a20 2020 2029  **kwargs,..    )
-0001c080: 3a0d 0a20 2020 2020 2020 204d 6f64 656c  :..        Model
-0001c090: 4f62 6a65 6374 2e5f 5f69 6e69 745f 5f28  Object.__init__(
-0001c0a0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0001c0b0: 6c66 2c0d 0a20 2020 2020 2020 2020 2020  lf,..           
-0001c0c0: 206e 616d 652c 0d0a 2020 2020 2020 2020   name,..        
-0001c0d0: 2020 2020 6672 6571 7565 6e63 792c 0d0a      frequency,..
-0001c0e0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-0001c0f0: 6963 7469 6f6e 5f69 6e74 6572 7661 6c2c  iction_interval,
-0001c100: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001c110: 6772 6573 7369 6f6e 5f74 7970 653d 7265  gression_type=re
-0001c120: 6772 6573 7369 6f6e 5f74 7970 652c 0d0a  gression_type,..
-0001c130: 2020 2020 2020 2020 2020 2020 686f 6c69              holi
-0001c140: 6461 795f 636f 756e 7472 793d 686f 6c69  day_country=holi
-0001c150: 6461 795f 636f 756e 7472 792c 0d0a 2020  day_country,..  
-0001c160: 2020 2020 2020 2020 2020 7261 6e64 6f6d            random
-0001c170: 5f73 6565 643d 7261 6e64 6f6d 5f73 6565  _seed=random_see
-0001c180: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
-0001c190: 7665 7262 6f73 653d 7665 7262 6f73 652c  verbose=verbose,
-0001c1a0: 0d0a 2020 2020 2020 2020 2020 2020 6e5f  ..            n_
-0001c1b0: 6a6f 6273 3d6e 5f6a 6f62 732c 0d0a 2020  jobs=n_jobs,..  
-0001c1c0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0001c1d0: 2073 656c 662e 666f 7265 6361 7374 5f6c   self.forecast_l
-0001c1e0: 656e 6774 6820 3d20 666f 7265 6361 7374  ength = forecast
-0001c1f0: 5f6c 656e 6774 680d 0a20 2020 2020 2020  _length..       
-0001c200: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
-0001c210: 5f6d 6f64 656c 203d 2072 6567 7265 7373  _model = regress
-0001c220: 696f 6e5f 6d6f 6465 6c0d 0a20 2020 2020  ion_model..     
-0001c230: 2020 2073 656c 662e 686f 6c69 6461 7920     self.holiday 
-0001c240: 3d20 686f 6c69 6461 790d 0a20 2020 2020  = holiday..     
-0001c250: 2020 2073 656c 662e 6d65 616e 5f72 6f6c     self.mean_rol
-0001c260: 6c69 6e67 5f70 6572 696f 6473 203d 206d  ling_periods = m
-0001c270: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
-0001c280: 6f64 730d 0a20 2020 2020 2020 2069 6620  ods..        if 
-0001c290: 6d65 616e 5f72 6f6c 6c69 6e67 5f70 6572  mean_rolling_per
-0001c2a0: 696f 6473 2069 7320 4e6f 6e65 3a0d 0a20  iods is None:.. 
-0001c2b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001c2c0: 6d61 6364 5f70 6572 696f 6473 203d 204e  macd_periods = N
-0001c2d0: 6f6e 650d 0a20 2020 2020 2020 2065 6c73  one..        els
-0001c2e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001c2f0: 7365 6c66 2e6d 6163 645f 7065 7269 6f64  self.macd_period
-0001c300: 7320 3d20 6d61 6364 5f70 6572 696f 6473  s = macd_periods
-0001c310: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-0001c320: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
-0001c330: 6473 203d 2073 7464 5f72 6f6c 6c69 6e67  ds = std_rolling
-0001c340: 5f70 6572 696f 6473 0d0a 2020 2020 2020  _periods..      
-0001c350: 2020 7365 6c66 2e6d 6178 5f72 6f6c 6c69    self.max_rolli
-0001c360: 6e67 5f70 6572 696f 6473 203d 206d 6178  ng_periods = max
-0001c370: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0001c380: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
-0001c390: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
-0001c3a0: 6473 203d 206d 696e 5f72 6f6c 6c69 6e67  ds = min_rolling
-0001c3b0: 5f70 6572 696f 6473 0d0a 2020 2020 2020  _periods..      
-0001c3c0: 2020 7365 6c66 2e65 776d 5f76 6172 5f61    self.ewm_var_a
-0001c3d0: 6c70 6861 203d 2065 776d 5f76 6172 5f61  lpha = ewm_var_a
-0001c3e0: 6c70 6861 0d0a 2020 2020 2020 2020 7365  lpha..        se
-0001c3f0: 6c66 2e71 7561 6e74 696c 6539 305f 726f  lf.quantile90_ro
-0001c400: 6c6c 696e 675f 7065 7269 6f64 7320 3d20  lling_periods = 
-0001c410: 7175 616e 7469 6c65 3930 5f72 6f6c 6c69  quantile90_rolli
-0001c420: 6e67 5f70 6572 696f 6473 0d0a 2020 2020  ng_periods..    
-0001c430: 2020 2020 7365 6c66 2e71 7561 6e74 696c      self.quantil
-0001c440: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
-0001c450: 6f64 7320 3d20 7175 616e 7469 6c65 3130  ods = quantile10
-0001c460: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0001c470: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-0001c480: 776d 5f61 6c70 6861 203d 2065 776d 5f61  wm_alpha = ewm_a
-0001c490: 6c70 6861 0d0a 2020 2020 2020 2020 7365  lpha..        se
-0001c4a0: 6c66 2e61 6464 6974 696f 6e61 6c5f 6c61  lf.additional_la
-0001c4b0: 675f 7065 7269 6f64 7320 3d20 6164 6469  g_periods = addi
-0001c4c0: 7469 6f6e 616c 5f6c 6167 5f70 6572 696f  tional_lag_perio
-0001c4d0: 6473 0d0a 2020 2020 2020 2020 7365 6c66  ds..        self
-0001c4e0: 2e61 6273 5f65 6e65 7267 7920 3d20 6162  .abs_energy = ab
-0001c4f0: 735f 656e 6572 6779 0d0a 2020 2020 2020  s_energy..      
-0001c500: 2020 7365 6c66 2e72 6f6c 6c69 6e67 5f61    self.rolling_a
-0001c510: 7574 6f63 6f72 725f 7065 7269 6f64 7320  utocorr_periods 
-0001c520: 3d20 726f 6c6c 696e 675f 6175 746f 636f  = rolling_autoco
-0001c530: 7272 5f70 6572 696f 6473 0d0a 2020 2020  rr_periods..    
-0001c540: 2020 2020 7365 6c66 2e6e 6f6e 7a65 726f      self.nonzero
-0001c550: 5f6c 6173 745f 6e20 3d20 6e6f 6e7a 6572  _last_n = nonzer
-0001c560: 6f5f 6c61 7374 5f6e 0d0a 2020 2020 2020  o_last_n..      
-0001c570: 2020 7365 6c66 2e64 6174 6570 6172 745f    self.datepart_
-0001c580: 6d65 7468 6f64 203d 2064 6174 6570 6172  method = datepar
-0001c590: 745f 6d65 7468 6f64 0d0a 2020 2020 2020  t_method..      
-0001c5a0: 2020 7365 6c66 2e70 6f6c 796e 6f6d 6961    self.polynomia
-0001c5b0: 6c5f 6465 6772 6565 203d 2070 6f6c 796e  l_degree = polyn
-0001c5c0: 6f6d 6961 6c5f 6465 6772 6565 0d0a 2020  omial_degree..  
-0001c5d0: 2020 2020 2020 7365 6c66 2e77 696e 646f        self.windo
-0001c5e0: 7720 3d20 7769 6e64 6f77 0d0a 2020 2020  w = window..    
-0001c5f0: 2020 2020 7365 6c66 2e71 7561 6e74 696c      self.quantil
-0001c600: 655f 7061 7261 6d73 203d 2071 7561 6e74  e_params = quant
-0001c610: 696c 655f 7061 7261 6d73 0d0a 2020 2020  ile_params..    
-0001c620: 2020 2020 7365 6c66 2e72 6567 7265 7373      self.regress
-0001c630: 6f72 5f74 7261 696e 203d 204e 6f6e 650d  or_train = None.
-0001c640: 0a20 2020 2020 2020 2073 656c 662e 7072  .        self.pr
-0001c650: 6f62 6162 696c 6973 7469 6320 3d20 7072  obabilistic = pr
-0001c660: 6f62 6162 696c 6973 7469 630d 0a20 2020  obabilistic..   
-0001c670: 2020 2020 2073 656c 662e 7363 616c 655f       self.scale_
-0001c680: 6675 6c6c 5f58 203d 2073 6361 6c65 5f66  full_X = scale_f
-0001c690: 756c 6c5f 580d 0a20 2020 2020 2020 2073  ull_X..        s
-0001c6a0: 656c 662e 636f 696e 7465 6772 6174 696f  elf.cointegratio
-0001c6b0: 6e20 3d20 636f 696e 7465 6772 6174 696f  n = cointegratio
-0001c6c0: 6e0d 0a20 2020 2020 2020 2073 656c 662e  n..        self.
-0001c6d0: 636f 696e 7465 6772 6174 696f 6e5f 6c61  cointegration_la
-0001c6e0: 6720 3d20 636f 696e 7465 6772 6174 696f  g = cointegratio
-0001c6f0: 6e5f 6c61 670d 0a0d 0a20 2020 2020 2020  n_lag....       
-0001c700: 2023 2064 6574 6563 7420 6a75 7374 2074   # detect just t
-0001c710: 6865 206d 6178 206e 6565 6465 6420 666f  he max needed fo
-0001c720: 7220 6375 746f 6666 2028 6d61 6b65 7320  r cutoff (makes 
-0001c730: 6661 7374 6572 290d 0a20 2020 2020 2020  faster)..       
-0001c740: 2073 7461 7274 696e 675f 6d69 6e20 3d20   starting_min = 
-0001c750: 3930 2020 2320 6261 7365 6420 6f6e 2077  90  # based on w
-0001c760: 6861 7420 6566 6665 6374 7320 6577 6d20  hat effects ewm 
-0001c770: 616c 7068 6173 2c20 746f 6f0d 0a20 2020  alphas, too..   
-0001c780: 2020 2020 206c 6973 745f 6f5f 7661 6c73       list_o_vals
-0001c790: 203d 205b 0d0a 2020 2020 2020 2020 2020   = [..          
-0001c7a0: 2020 6d65 616e 5f72 6f6c 6c69 6e67 5f70    mean_rolling_p
-0001c7b0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0001c7c0: 2020 2020 206d 6163 645f 7065 7269 6f64       macd_period
-0001c7d0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
-0001c7e0: 7374 645f 726f 6c6c 696e 675f 7065 7269  std_rolling_peri
-0001c7f0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-0001c800: 2020 6d61 785f 726f 6c6c 696e 675f 7065    max_rolling_pe
-0001c810: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0001c820: 2020 2020 6d69 6e5f 726f 6c6c 696e 675f      min_rolling_
-0001c830: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
-0001c840: 2020 2020 2020 7175 616e 7469 6c65 3930        quantile90
-0001c850: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0001c860: 2c0d 0a20 2020 2020 2020 2020 2020 2071  ,..            q
-0001c870: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
-0001c880: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-0001c890: 2020 2020 2020 2020 6164 6469 7469 6f6e          addition
-0001c8a0: 616c 5f6c 6167 5f70 6572 696f 6473 2c0d  al_lag_periods,.
-0001c8b0: 0a20 2020 2020 2020 2020 2020 2072 6f6c  .            rol
-0001c8c0: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
-0001c8d0: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
-0001c8e0: 2020 2020 6e6f 6e7a 6572 6f5f 6c61 7374      nonzero_last
-0001c8f0: 5f6e 2c0d 0a20 2020 2020 2020 2020 2020  _n,..           
-0001c900: 2077 696e 646f 772c 0d0a 2020 2020 2020   window,..      
-0001c910: 2020 2020 2020 7374 6172 7469 6e67 5f6d        starting_m
-0001c920: 696e 2c0d 0a20 2020 2020 2020 205d 0d0a  in,..        ]..
-0001c930: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
-0001c940: 5f74 6872 6573 686f 6c64 203d 206d 6178  _threshold = max
-0001c950: 285b 7820 666f 7220 7820 696e 206c 6973  ([x for x in lis
-0001c960: 745f 6f5f 7661 6c73 2069 6620 7374 7228  t_o_vals if str(
-0001c970: 7829 2e69 7364 6967 6974 2829 5d29 0d0a  x).isdigit()])..
-0001c980: 2020 2020 2020 2020 7365 6c66 2e73 6361          self.sca
-0001c990: 6c65 725f 6d65 616e 203d 204e 6f6e 650d  ler_mean = None.
-0001c9a0: 0a0d 0a20 2020 2064 6566 2062 6173 655f  ...    def base_
-0001c9b0: 7363 616c 6572 2873 656c 662c 2064 6629  scaler(self, df)
-0001c9c0: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
-0001c9d0: 7363 616c 6572 5f6d 6561 6e20 3d20 6e70  scaler_mean = np
-0001c9e0: 2e6d 6561 6e28 6466 2c20 6178 6973 3d30  .mean(df, axis=0
-0001c9f0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0001ca00: 7363 616c 6572 5f73 7464 203d 206e 702e  scaler_std = np.
-0001ca10: 7374 6428 6466 2c20 6178 6973 3d30 290d  std(df, axis=0).
-0001ca20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001ca30: 2864 6620 2d20 7365 6c66 2e73 6361 6c65  (df - self.scale
-0001ca40: 725f 6d65 616e 2920 2f20 7365 6c66 2e73  r_mean) / self.s
-0001ca50: 6361 6c65 725f 7374 640d 0a0d 0a20 2020  caler_std....   
-0001ca60: 2064 6566 2073 6361 6c65 5f64 6174 6128   def scale_data(
-0001ca70: 7365 6c66 2c20 6466 293a 0d0a 2020 2020  self, df):..    
-0001ca80: 2020 2020 6966 2073 656c 662e 7363 616c      if self.scal
-0001ca90: 6572 5f6d 6561 6e20 6973 204e 6f6e 653a  er_mean is None:
-0001caa0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001cab0: 7475 726e 2073 656c 662e 6261 7365 5f73  turn self.base_s
-0001cac0: 6361 6c65 7228 6466 290d 0a20 2020 2020  caler(df)..     
-0001cad0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-0001cae0: 2020 2020 2020 7265 7475 726e 2028 6466        return (df
-0001caf0: 202d 2073 656c 662e 7363 616c 6572 5f6d   - self.scaler_m
-0001cb00: 6561 6e29 202f 2073 656c 662e 7363 616c  ean) / self.scal
-0001cb10: 6572 5f73 7464 0d0a 0d0a 2020 2020 6465  er_std....    de
-0001cb20: 6620 746f 5f6f 7269 6769 6e5f 7370 6163  f to_origin_spac
-0001cb30: 6528 0d0a 2020 2020 2020 2020 7365 6c66  e(..        self
-0001cb40: 2c20 6466 2c20 7472 616e 735f 6d65 7468  , df, trans_meth
-0001cb50: 6f64 3d27 666f 7265 6361 7374 272c 2063  od='forecast', c
-0001cb60: 6f6d 706f 6e65 6e74 733d 4661 6c73 652c  omponents=False,
-0001cb70: 2062 6f75 6e64 733d 4661 6c73 650d 0a20   bounds=False.. 
-0001cb80: 2020 2029 3a0d 0a20 2020 2020 2020 2022     ):..        "
-0001cb90: 2222 5461 6b65 2074 7261 6e73 666f 726d  ""Take transform
-0001cba0: 6564 206f 7574 7075 7473 2062 6163 6b20  ed outputs back 
-0001cbb0: 746f 206f 7269 6769 6e61 6c20 6665 6174  to original feat
-0001cbc0: 7572 6520 7370 6163 652e 2222 220d 0a20  ure space.""".. 
-0001cbd0: 2020 2020 2020 2072 6574 7572 6e20 6466         return df
-0001cbe0: 202a 2073 656c 662e 7363 616c 6572 5f73   * self.scaler_s
-0001cbf0: 7464 202b 2073 656c 662e 7363 616c 6572  td + self.scaler
-0001cc00: 5f6d 6561 6e0d 0a0d 0a20 2020 2064 6566  _mean....    def
-0001cc10: 2066 6974 2873 656c 662c 2064 662c 2066   fit(self, df, f
-0001cc20: 7574 7572 655f 7265 6772 6573 736f 723d  uture_regressor=
-0001cc30: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-0001cc40: 2222 2254 7261 696e 2061 6c67 6f72 6974  """Train algorit
-0001cc50: 686d 2067 6976 656e 2064 6174 6120 7375  hm given data su
-0001cc60: 7070 6c69 6564 2e0d 0a0d 0a20 2020 2020  pplied.....     
-0001cc70: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
-0001cc80: 2020 2020 2020 6466 2028 7061 6e64 6173        df (pandas
-0001cc90: 2e44 6174 6146 7261 6d65 293a 2044 6174  .DataFrame): Dat
-0001cca0: 6574 696d 6520 496e 6465 7865 640d 0a20  etime Indexed.. 
-0001ccb0: 2020 2020 2020 2020 2020 2066 7574 7572             futur
-0001ccc0: 655f 7265 6772 6573 736f 7220 2870 616e  e_regressor (pan
-0001ccd0: 6461 732e 4461 7461 4672 616d 6520 6f72  das.DataFrame or
-0001cce0: 2053 6572 6965 7329 3a20 4461 7465 7469   Series): Dateti
-0001ccf0: 6d65 2049 6e64 6578 6564 0d0a 2020 2020  me Indexed..    
-0001cd00: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0001cd10: 2064 6620 3d20 7365 6c66 2e62 6173 6963   df = self.basic
-0001cd20: 5f70 726f 6669 6c65 2864 6629 0d0a 2020  _profile(df)..  
-0001cd30: 2020 2020 2020 2320 6173 7375 6d65 206d        # assume m
-0001cd40: 656d 6f72 7920 616e 6420 4350 5520 636f  emory and CPU co
-0001cd50: 756e 7420 6172 6520 636f 7272 656c 6174  unt are correlat
-0001cd60: 6564 0d0a 2020 2020 2020 2020 7769 7468  ed..        with
-0001cd70: 2063 6f6e 6669 675f 636f 6e74 6578 7428   config_context(
-0001cd80: 6173 7375 6d65 5f66 696e 6974 653d 5472  assume_finite=Tr
-0001cd90: 7565 2c20 776f 726b 696e 675f 6d65 6d6f  ue, working_memo
-0001cda0: 7279 3d69 6e74 2873 656c 662e 6e5f 6a6f  ry=int(self.n_jo
-0001cdb0: 6273 202a 2035 3132 2929 3a0d 0a20 2020  bs * 512)):..   
-0001cdc0: 2020 2020 2020 2020 2023 2069 6620 6578           # if ex
-0001cdd0: 7465 726e 616c 2072 6567 7265 7373 6f72  ternal regressor
-0001cde0: 2c20 646f 2073 6f6d 6520 6368 6563 6b20  , do some check 
-0001cdf0: 7570 0d0a 2020 2020 2020 2020 2020 2020  up..            
-0001ce00: 6966 2073 656c 662e 7265 6772 6573 7369  if self.regressi
-0001ce10: 6f6e 5f74 7970 6520 6973 206e 6f74 204e  on_type is not N
-0001ce20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0001ce30: 2020 2020 2020 6966 2066 7574 7572 655f        if future_
-0001ce40: 7265 6772 6573 736f 7220 6973 204e 6f6e  regressor is Non
-0001ce50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001ce60: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-0001ce70: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
-0001ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce90: 2020 2022 7265 6772 6573 7369 6f6e 5f74     "regression_t
-0001cea0: 7970 653d 2755 7365 7227 2062 7574 206e  ype='User' but n
-0001ceb0: 6f74 2066 7574 7572 655f 7265 6772 6573  ot future_regres
-0001cec0: 736f 7220 7375 7070 6c69 6564 2e22 0d0a  sor supplied."..
-0001ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cee0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0001cef0: 2020 2020 2020 2065 6c69 6620 6675 7475         elif futu
-0001cf00: 7265 5f72 6567 7265 7373 6f72 2e73 6861  re_regressor.sha
-0001cf10: 7065 5b30 5d20 213d 2064 662e 7368 6170  pe[0] != df.shap
-0001cf20: 655b 305d 3a0d 0a20 2020 2020 2020 2020  e[0]:..         
-0001cf30: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001cf40: 2056 616c 7565 4572 726f 7228 0d0a 2020   ValueError(..  
-0001cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf60: 2020 2020 2020 2266 7574 7572 655f 7265        "future_re
-0001cf70: 6772 6573 736f 7220 7368 6170 6520 646f  gressor shape do
-0001cf80: 6573 206e 6f74 206d 6174 6368 2074 7261  es not match tra
-0001cf90: 696e 696e 6720 6461 7461 2073 6861 7065  ining data shape
-0001cfa0: 2e22 0d0a 2020 2020 2020 2020 2020 2020  ."..            
-0001cfb0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0001cfc0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001cfd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cfe0: 2020 2020 2020 7365 6c66 2e72 6567 7265        self.regre
-0001cff0: 7373 6f72 5f74 7261 696e 203d 2066 7574  ssor_train = fut
-0001d000: 7572 655f 7265 6772 6573 736f 720d 0a20  ure_regressor.. 
-0001d010: 2020 2020 2020 2020 2020 2023 2064 6566             # def
-0001d020: 696e 6520 5820 616e 6420 590d 0a20 2020  ine X and Y..   
-0001d030: 2020 2020 2020 2020 2073 656c 662e 5920           self.Y 
-0001d040: 3d20 6466 5b31 3a5d 2e74 6f5f 6e75 6d70  = df[1:].to_nump
-0001d050: 7928 292e 7261 7665 6c28 6f72 6465 723d  y().ravel(order=
-0001d060: 2246 2229 0d0a 2020 2020 2020 2020 2020  "F")..          
-0001d070: 2020 2320 6472 6f70 206c 6f6f 6b20 6168    # drop look ah
-0001d080: 6561 6420 6461 7461 0d0a 2020 2020 2020  ead data..      
-0001d090: 2020 2020 2020 6261 7365 203d 2064 665b        base = df[
-0001d0a0: 3a2d 315d 0d0a 2020 2020 2020 2020 2020  :-1]..          
-0001d0b0: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
-0001d0c0: 7369 6f6e 5f74 7970 6520 6973 206e 6f74  sion_type is not
-0001d0d0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001d0e0: 2020 2020 2020 2020 6375 745f 7265 6772          cut_regr
-0001d0f0: 203d 2073 656c 662e 7265 6772 6573 736f   = self.regresso
-0001d100: 725f 7472 6169 6e5b 313a 5d0d 0a20 2020  r_train[1:]..   
-0001d110: 2020 2020 2020 2020 2020 2020 2063 7574               cut
-0001d120: 5f72 6567 722e 696e 6465 7820 3d20 6261  _regr.index = ba
-0001d130: 7365 2e69 6e64 6578 0d0a 2020 2020 2020  se.index..      
-0001d140: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0001d150: 2020 2020 2020 2020 2020 2020 2063 7574               cut
-0001d160: 5f72 6567 7220 3d20 4e6f 6e65 0d0a 2020  _regr = None..  
-0001d170: 2020 2020 2020 2020 2020 2320 6f70 656e            # open
-0001d180: 2074 6f20 7375 6767 6573 7469 6f6e 7320   to suggestions 
-0001d190: 6f6e 206d 616b 696e 6720 7468 6973 2066  on making this f
-0001d1a0: 6173 7465 720d 0a20 2020 2020 2020 2020  aster..         
-0001d1b0: 2020 2073 656c 662e 5820 3d20 7064 2e63     self.X = pd.c
-0001d1c0: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
-0001d1d0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
-0001d1e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d1f0: 6f6c 6c69 6e67 5f78 5f72 6567 7265 7373  olling_x_regress
-0001d200: 6f72 5f72 6567 7265 7373 6f72 280d 0a20  or_regressor(.. 
-0001d210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d220: 2020 2020 2020 2062 6173 655b 785f 636f         base[x_co
-0001d230: 6c5d 2e74 6f5f 6672 616d 6528 292c 0d0a  l].to_frame(),..
-0001d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d250: 2020 2020 2020 2020 6d65 616e 5f72 6f6c          mean_rol
-0001d260: 6c69 6e67 5f70 6572 696f 6473 3d73 656c  ling_periods=sel
-0001d270: 662e 6d65 616e 5f72 6f6c 6c69 6e67 5f70  f.mean_rolling_p
-0001d280: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0001d290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d2a0: 206d 6163 645f 7065 7269 6f64 733d 7365   macd_periods=se
-0001d2b0: 6c66 2e6d 6163 645f 7065 7269 6f64 732c  lf.macd_periods,
-0001d2c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d2d0: 2020 2020 2020 2020 2020 7374 645f 726f            std_ro
-0001d2e0: 6c6c 696e 675f 7065 7269 6f64 733d 7365  lling_periods=se
-0001d2f0: 6c66 2e73 7464 5f72 6f6c 6c69 6e67 5f70  lf.std_rolling_p
-0001d300: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0001d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d320: 206d 6178 5f72 6f6c 6c69 6e67 5f70 6572   max_rolling_per
-0001d330: 696f 6473 3d73 656c 662e 6d61 785f 726f  iods=self.max_ro
-0001d340: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
-0001d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d360: 2020 2020 2020 2020 6d69 6e5f 726f 6c6c          min_roll
-0001d370: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
-0001d380: 2e6d 696e 5f72 6f6c 6c69 6e67 5f70 6572  .min_rolling_per
-0001d390: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-0001d3a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001d3b0: 776d 5f76 6172 5f61 6c70 6861 3d73 656c  wm_var_alpha=sel
-0001d3c0: 662e 6577 6d5f 7661 725f 616c 7068 612c  f.ewm_var_alpha,
-0001d3d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d3e0: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
-0001d3f0: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
-0001d400: 696f 6473 3d73 656c 662e 7175 616e 7469  iods=self.quanti
-0001d410: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
-0001d420: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-0001d430: 2020 2020 2020 2020 2020 2020 2020 2071                 q
-0001d440: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
-0001d450: 675f 7065 7269 6f64 733d 7365 6c66 2e71  g_periods=self.q
-0001d460: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
-0001d470: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-0001d480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d490: 2020 2020 6164 6469 7469 6f6e 616c 5f6c      additional_l
-0001d4a0: 6167 5f70 6572 696f 6473 3d73 656c 662e  ag_periods=self.
-0001d4b0: 6164 6469 7469 6f6e 616c 5f6c 6167 5f70  additional_lag_p
-0001d4c0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-0001d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d4e0: 2065 776d 5f61 6c70 6861 3d73 656c 662e   ewm_alpha=self.
-0001d4f0: 6577 6d5f 616c 7068 612c 0d0a 2020 2020  ewm_alpha,..    
-0001d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d510: 2020 2020 6162 735f 656e 6572 6779 3d73      abs_energy=s
-0001d520: 656c 662e 6162 735f 656e 6572 6779 2c0d  elf.abs_energy,.
-0001d530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d540: 2020 2020 2020 2020 2072 6f6c 6c69 6e67           rolling
-0001d550: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
-0001d560: 733d 7365 6c66 2e72 6f6c 6c69 6e67 5f61  s=self.rolling_a
-0001d570: 7574 6f63 6f72 725f 7065 7269 6f64 732c  utocorr_periods,
-0001d580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d590: 2020 2020 2020 2020 2020 6e6f 6e7a 6572            nonzer
-0001d5a0: 6f5f 6c61 7374 5f6e 3d73 656c 662e 6e6f  o_last_n=self.no
-0001d5b0: 6e7a 6572 6f5f 6c61 7374 5f6e 2c0d 0a20  nzero_last_n,.. 
-0001d5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d5d0: 2020 2020 2020 2061 6464 5f64 6174 655f         add_date_
-0001d5e0: 7061 7274 3d73 656c 662e 6461 7465 7061  part=self.datepa
-0001d5f0: 7274 5f6d 6574 686f 642c 0d0a 2020 2020  rt_method,..    
-0001d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d610: 2020 2020 686f 6c69 6461 793d 7365 6c66      holiday=self
-0001d620: 2e68 6f6c 6964 6179 2c0d 0a20 2020 2020  .holiday,..     
-0001d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d640: 2020 2068 6f6c 6964 6179 5f63 6f75 6e74     holiday_count
-0001d650: 7279 3d73 656c 662e 686f 6c69 6461 795f  ry=self.holiday_
-0001d660: 636f 756e 7472 792c 0d0a 2020 2020 2020  country,..      
-0001d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d680: 2020 706f 6c79 6e6f 6d69 616c 5f64 6567    polynomial_deg
-0001d690: 7265 653d 7365 6c66 2e70 6f6c 796e 6f6d  ree=self.polynom
-0001d6a0: 6961 6c5f 6465 6772 6565 2c0d 0a20 2020  ial_degree,..   
-0001d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d6c0: 2020 2020 2077 696e 646f 773d 7365 6c66       window=self
-0001d6d0: 2e77 696e 646f 772c 0d0a 2020 2020 2020  .window,..      
-0001d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d6f0: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-0001d700: 6f72 3d63 7574 5f72 6567 722c 0d0a 2020  or=cut_regr,..  
-0001d710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d720: 2020 2020 2020 636f 696e 7465 6772 6174        cointegrat
-0001d730: 696f 6e3d 7365 6c66 2e63 6f69 6e74 6567  ion=self.cointeg
-0001d740: 7261 7469 6f6e 2c0d 0a20 2020 2020 2020  ration,..       
-0001d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d760: 2063 6f69 6e74 6567 7261 7469 6f6e 5f6c   cointegration_l
-0001d770: 6167 3d73 656c 662e 636f 696e 7465 6772  ag=self.cointegr
-0001d780: 6174 696f 6e5f 6c61 672c 0d0a 2020 2020  ation_lag,..    
-0001d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d7a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001d7b0: 2020 2020 2020 2066 6f72 2078 5f63 6f6c         for x_col
-0001d7c0: 2069 6e20 6261 7365 2e63 6f6c 756d 6e73   in base.columns
-0001d7d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d7e0: 2020 5d0d 0a20 2020 2020 2020 2020 2020    ]..           
-0001d7f0: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
-0001d800: 6465 6c20 6261 7365 0d0a 2020 2020 2020  del base..      
-0001d810: 2020 2020 2020 6966 2073 656c 662e 7072        if self.pr
-0001d820: 6f62 6162 696c 6973 7469 633a 0d0a 2020  obabilistic:..  
-0001d830: 2020 2020 2020 2020 2020 2020 2020 6672                fr
-0001d840: 6f6d 2073 6b6c 6561 726e 2e65 6e73 656d  om sklearn.ensem
-0001d850: 626c 6520 696d 706f 7274 2047 7261 6469  ble import Gradi
-0001d860: 656e 7442 6f6f 7374 696e 6752 6567 7265  entBoostingRegre
-0001d870: 7373 6f72 0d0a 0d0a 2020 2020 2020 2020  ssor....        
-0001d880: 2020 2020 2020 2020 616c 7068 615f 6261          alpha_ba
-0001d890: 7365 203d 2028 3120 2d20 7365 6c66 2e70  se = (1 - self.p
-0001d8a0: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
-0001d8b0: 616c 2920 2f20 320d 0a20 2020 2020 2020  al) / 2..       
-0001d8c0: 2020 2020 2020 2020 2073 656c 662e 6d6f           self.mo
-0001d8d0: 6465 6c5f 7570 7065 7220 3d20 4772 6164  del_upper = Grad
-0001d8e0: 6965 6e74 426f 6f73 7469 6e67 5265 6772  ientBoostingRegr
-0001d8f0: 6573 736f 7228 0d0a 2020 2020 2020 2020  essor(..        
-0001d900: 2020 2020 2020 2020 2020 2020 6c6f 7373              loss
-0001d910: 3d27 7175 616e 7469 6c65 272c 0d0a 2020  ='quantile',..  
-0001d920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d930: 2020 616c 7068 613d 2831 202d 2061 6c70    alpha=(1 - alp
-0001d940: 6861 5f62 6173 6529 2c0d 0a20 2020 2020  ha_base),..     
-0001d950: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d960: 616e 646f 6d5f 7374 6174 653d 7365 6c66  andom_state=self
-0001d970: 2e72 616e 646f 6d5f 7365 6564 2c0d 0a20  .random_seed,.. 
-0001d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d990: 2020 202a 2a73 656c 662e 7175 616e 7469     **self.quanti
-0001d9a0: 6c65 5f70 6172 616d 732c 0d0a 2020 2020  le_params,..    
-0001d9b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0001d9c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001d9d0: 656c 662e 6d6f 6465 6c5f 6c6f 7765 7220  elf.model_lower 
-0001d9e0: 3d20 4772 6164 6965 6e74 426f 6f73 7469  = GradientBoosti
-0001d9f0: 6e67 5265 6772 6573 736f 7228 0d0a 2020  ngRegressor(..  
-0001da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da10: 2020 6c6f 7373 3d27 7175 616e 7469 6c65    loss='quantile
-0001da20: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-0001da30: 2020 2020 2020 2020 616c 7068 613d 616c          alpha=al
-0001da40: 7068 615f 6261 7365 2c0d 0a20 2020 2020  pha_base,..     
-0001da50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001da60: 616e 646f 6d5f 7374 6174 653d 7365 6c66  andom_state=self
-0001da70: 2e72 616e 646f 6d5f 7365 6564 2c0d 0a20  .random_seed,.. 
-0001da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001da90: 2020 202a 2a73 656c 662e 7175 616e 7469     **self.quanti
-0001daa0: 6c65 5f70 6172 616d 732c 0d0a 2020 2020  le_params,..    
-0001dab0: 2020 2020 2020 2020 2020 2020 290d 0a0d              )...
-0001dac0: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
-0001dad0: 7469 6f75 7470 7574 203d 2054 7275 650d  tioutput = True.
-0001dae0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001daf0: 7365 6c66 2e59 2e6e 6469 6d20 3c20 323a  self.Y.ndim < 2:
-0001db00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001db10: 2020 6d75 6c74 696f 7574 7075 7420 3d20    multioutput = 
-0001db20: 4661 6c73 650d 0a20 2020 2020 2020 2020  False..         
-0001db30: 2020 2065 6c69 6620 7365 6c66 2e59 2e73     elif self.Y.s
-0001db40: 6861 7065 5b31 5d20 3c20 323a 0d0a 2020  hape[1] < 2:..  
-0001db50: 2020 2020 2020 2020 2020 2020 2020 6d75                mu
-0001db60: 6c74 696f 7574 7075 7420 3d20 4661 6c73  ltioutput = Fals
-0001db70: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
-0001db80: 656c 662e 6d6f 6465 6c20 3d20 7265 7472  elf.model = retr
-0001db90: 6965 7665 5f72 6567 7265 7373 6f72 280d  ieve_regressor(.
-0001dba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dbb0: 2072 6567 7265 7373 696f 6e5f 6d6f 6465   regression_mode
-0001dbc0: 6c3d 7365 6c66 2e72 6567 7265 7373 696f  l=self.regressio
-0001dbd0: 6e5f 6d6f 6465 6c2c 0d0a 2020 2020 2020  n_model,..      
-0001dbe0: 2020 2020 2020 2020 2020 7665 7262 6f73            verbos
-0001dbf0: 653d 7365 6c66 2e76 6572 626f 7365 2c0d  e=self.verbose,.
-0001dc00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dc10: 2076 6572 626f 7365 5f62 6f6f 6c3d 7365   verbose_bool=se
-0001dc20: 6c66 2e76 6572 626f 7365 5f62 6f6f 6c2c  lf.verbose_bool,
-0001dc30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001dc40: 2020 7261 6e64 6f6d 5f73 6565 643d 7365    random_seed=se
-0001dc50: 6c66 2e72 616e 646f 6d5f 7365 6564 2c0d  lf.random_seed,.
-0001dc60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dc70: 206e 5f6a 6f62 733d 7365 6c66 2e6e 5f6a   n_jobs=self.n_j
-0001dc80: 6f62 732c 0d0a 2020 2020 2020 2020 2020  obs,..          
-0001dc90: 2020 2020 2020 6d75 6c74 696f 7574 7075        multioutpu
-0001dca0: 743d 6d75 6c74 696f 7574 7075 742c 0d0a  t=multioutput,..
-0001dcb0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0001dcc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001dcd0: 6d75 6c74 696f 7574 7075 7467 7072 203d  multioutputgpr =
-0001dce0: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
-0001dcf0: 5f6d 6f64 656c 5b27 6d6f 6465 6c27 5d20  _model['model'] 
-0001dd00: 3d3d 2022 4d75 6c74 696f 7574 7075 7447  == "MultioutputG
-0001dd10: 5052 220d 0a20 2020 2020 2020 2020 2020  PR"..           
-0001dd20: 2069 6620 7365 6c66 2e73 6361 6c65 5f66   if self.scale_f
-0001dd30: 756c 6c5f 583a 0d0a 2020 2020 2020 2020  ull_X:..        
-0001dd40: 2020 2020 2020 2020 7365 6c66 2e58 203d          self.X =
-0001dd50: 2073 656c 662e 7363 616c 655f 6461 7461   self.scale_data
-0001dd60: 2873 656c 662e 5829 0d0a 0d0a 2020 2020  (self.X)....    
-0001dd70: 2020 2020 2020 2020 7365 6c66 2e6d 6f64          self.mod
-0001dd80: 656c 2e66 6974 2873 656c 662e 582e 746f  el.fit(self.X.to
-0001dd90: 5f6e 756d 7079 2829 2c20 7365 6c66 2e59  _numpy(), self.Y
-0001dda0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0001ddb0: 2069 6620 7365 6c66 2e70 726f 6261 6269   if self.probabi
-0001ddc0: 6c69 7374 6963 2061 6e64 206e 6f74 2073  listic and not s
-0001ddd0: 656c 662e 6d75 6c74 696f 7574 7075 7467  elf.multioutputg
-0001dde0: 7072 3a0d 0a20 2020 2020 2020 2020 2020  pr:..           
-0001ddf0: 2020 2020 2073 656c 662e 6d6f 6465 6c5f       self.model_
-0001de00: 7570 7065 722e 6669 7428 7365 6c66 2e58  upper.fit(self.X
-0001de10: 2e74 6f5f 6e75 6d70 7928 292c 2073 656c  .to_numpy(), sel
-0001de20: 662e 5929 0d0a 2020 2020 2020 2020 2020  f.Y)..          
-0001de30: 2020 2020 2020 7365 6c66 2e6d 6f64 656c        self.model
-0001de40: 5f6c 6f77 6572 2e66 6974 2873 656c 662e  _lower.fit(self.
-0001de50: 582e 746f 5f6e 756d 7079 2829 2c20 7365  X.to_numpy(), se
-0001de60: 6c66 2e59 290d 0a20 2020 2020 2020 2020  lf.Y)..         
-0001de70: 2020 2023 2077 6520 6f6e 6c79 206e 6565     # we only nee
-0001de80: 6420 7468 6520 4e20 6d6f 7374 2072 6563  d the N most rec
-0001de90: 656e 7420 706f 696e 7473 2066 6f72 2070  ent points for p
-0001dea0: 7265 6469 6374 0d0a 2020 2020 2020 2020  redict..        
-0001deb0: 2020 2020 2320 7365 6c66 2e73 6b74 7261      # self.sktra
-0001dec0: 696e 6461 7461 203d 2064 662e 7461 696c  indata = df.tail
-0001ded0: 2873 656c 662e 6d69 6e5f 7468 7265 7368  (self.min_thresh
-0001dee0: 6f6c 6429 0d0a 2020 2020 2020 2020 2020  old)..          
-0001def0: 2020 7365 6c66 2e66 6974 5f64 6174 6128    self.fit_data(
-0001df00: 6466 290d 0a0d 0a20 2020 2020 2020 2020  df)....         
-0001df10: 2020 2073 656c 662e 6669 745f 7275 6e74     self.fit_runt
-0001df20: 696d 6520 3d20 6461 7465 7469 6d65 2e64  ime = datetime.d
-0001df30: 6174 6574 696d 652e 6e6f 7728 2920 2d20  atetime.now() - 
-0001df40: 7365 6c66 2e73 7461 7274 5469 6d65 0d0a  self.startTime..
-0001df50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001df60: 726e 2073 656c 660d 0a0d 0a20 2020 2064  rn self....    d
-0001df70: 6566 2066 6974 5f64 6174 6128 7365 6c66  ef fit_data(self
-0001df80: 2c20 6466 2c20 6675 7475 7265 5f72 6567  , df, future_reg
-0001df90: 7265 7373 6f72 3d4e 6f6e 6529 3a0d 0a20  ressor=None):.. 
-0001dfa0: 2020 2020 2020 2064 6620 3d20 7365 6c66         df = self
-0001dfb0: 2e62 6173 6963 5f70 726f 6669 6c65 2864  .basic_profile(d
-0001dfc0: 6629 0d0a 2020 2020 2020 2020 7365 6c66  f)..        self
-0001dfd0: 2e73 6b74 7261 696e 6461 7461 203d 2064  .sktraindata = d
-0001dfe0: 662e 7461 696c 2873 656c 662e 6d69 6e5f  f.tail(self.min_
-0001dff0: 7468 7265 7368 6f6c 6429 0d0a 2020 2020  threshold)..    
-0001e000: 2020 2020 6966 2066 7574 7572 655f 7265      if future_re
-0001e010: 6772 6573 736f 7220 6973 206e 6f74 204e  gressor is not N
-0001e020: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-0001e030: 2020 7365 6c66 2e72 6567 7265 7373 6f72    self.regressor
-0001e040: 5f74 7261 696e 203d 2066 7574 7572 655f  _train = future_
-0001e050: 7265 6772 6573 736f 720d 0a20 2020 2020  regressor..     
-0001e060: 2020 2072 6574 7572 6e20 7365 6c66 0d0a     return self..
-0001e070: 0d0a 2020 2020 6465 6620 7072 6564 6963  ..    def predic
-0001e080: 7428 0d0a 2020 2020 2020 2020 7365 6c66  t(..        self
-0001e090: 2c0d 0a20 2020 2020 2020 2066 6f72 6563  ,..        forec
-0001e0a0: 6173 745f 6c65 6e67 7468 3a20 696e 7420  ast_length: int 
-0001e0b0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
-0001e0c0: 206a 7573 745f 706f 696e 745f 666f 7265   just_point_fore
-0001e0d0: 6361 7374 3a20 626f 6f6c 203d 2046 616c  cast: bool = Fal
-0001e0e0: 7365 2c0d 0a20 2020 2020 2020 2066 7574  se,..        fut
-0001e0f0: 7572 655f 7265 6772 6573 736f 723d 4e6f  ure_regressor=No
-0001e100: 6e65 2c0d 0a20 2020 2020 2020 2064 663d  ne,..        df=
-0001e110: 4e6f 6e65 2c0d 0a20 2020 2029 3a0d 0a20  None,..    ):.. 
-0001e120: 2020 2020 2020 2022 2222 4765 6e65 7261         """Genera
-0001e130: 7465 2066 6f72 6563 6173 7420 6461 7461  te forecast data
-0001e140: 2069 6d6d 6564 6961 7465 6c79 2066 6f6c   immediately fol
-0001e150: 6c6f 7769 6e67 2064 6174 6573 206f 6620  lowing dates of 
-0001e160: 696e 6465 7820 7375 7070 6c69 6564 2074  index supplied t
-0001e170: 6f20 2e66 6974 2829 2e0d 0a0d 0a20 2020  o .fit().....   
-0001e180: 2020 2020 2041 7267 733a 0d0a 2020 2020       Args:..    
-0001e190: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-0001e1a0: 5f6c 656e 6774 6820 2869 6e74 293a 204e  _length (int): N
-0001e1b0: 756d 6265 7220 6f66 2070 6572 696f 6473  umber of periods
-0001e1c0: 206f 6620 6461 7461 2074 6f20 666f 7265   of data to fore
-0001e1d0: 6361 7374 2061 6865 6164 0d0a 2020 2020  cast ahead..    
-0001e1e0: 2020 2020 2020 2020 2020 2020 6967 6e6f              igno
-0001e1f0: 7265 6420 6865 7265 2066 6f72 2074 6869  red here for thi
-0001e200: 7320 6d6f 6465 6c2c 206d 7573 7420 6265  s model, must be
-0001e210: 2073 6574 2069 6e20 5f5f 696e 6974 5f5f   set in __init__
-0001e220: 2062 6566 6f72 6520 2e66 6974 2829 0d0a   before .fit()..
-0001e230: 2020 2020 2020 2020 2020 2020 6675 7475              futu
-0001e240: 7265 5f72 6567 7265 7373 6f72 2028 7064  re_regressor (pd
-0001e250: 2e44 6174 6146 7261 6d65 293a 2061 6464  .DataFrame): add
-0001e260: 6974 696f 6e61 6c20 7265 6772 6573 736f  itional regresso
-0001e270: 720d 0a20 2020 2020 2020 2020 2020 206a  r..            j
-0001e280: 7573 745f 706f 696e 745f 666f 7265 6361  ust_point_foreca
-0001e290: 7374 2028 626f 6f6c 293a 2049 6620 5472  st (bool): If Tr
-0001e2a0: 7565 2c20 7265 7475 726e 2061 2070 616e  ue, return a pan
-0001e2b0: 6461 732e 4461 7461 4672 616d 6520 6f66  das.DataFrame of
-0001e2c0: 206a 7573 7420 706f 696e 7420 666f 7265   just point fore
-0001e2d0: 6361 7374 730d 0a0d 0a20 2020 2020 2020  casts....       
-0001e2e0: 2052 6574 7572 6e73 3a0d 0a20 2020 2020   Returns:..     
-0001e2f0: 2020 2020 2020 2045 6974 6865 7220 6120         Either a 
-0001e300: 5072 6564 6963 7469 6f6e 4f62 6a65 6374  PredictionObject
-0001e310: 206f 6620 666f 7265 6361 7374 7320 616e   of forecasts an
-0001e320: 6420 6d65 7461 6461 7461 2c20 6f72 0d0a  d metadata, or..
-0001e330: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-0001e340: 7573 745f 706f 696e 745f 666f 7265 6361  ust_point_foreca
-0001e350: 7374 203d 3d20 5472 7565 2c20 6120 6461  st == True, a da
-0001e360: 7461 6672 616d 6520 6f66 2070 6f69 6e74  taframe of point
-0001e370: 2066 6f72 6563 6173 7473 0d0a 2020 2020   forecasts..    
-0001e380: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-0001e390: 2069 6620 6466 2069 7320 6e6f 7420 4e6f   if df is not No
-0001e3a0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001e3b0: 2073 656c 662e 6669 745f 6461 7461 2864   self.fit_data(d
-0001e3c0: 6629 2020 2320 6e6f 206e 6577 2072 6567  f)  # no new reg
-0001e3d0: 7265 7373 6f72 2073 7570 706f 7274 0d0a  ressor support..
-0001e3e0: 2020 2020 2020 2020 6966 2066 6f72 6563          if forec
-0001e3f0: 6173 745f 6c65 6e67 7468 2069 7320 4e6f  ast_length is No
-0001e400: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-0001e410: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
-0001e420: 203d 2073 656c 662e 666f 7265 6361 7374   = self.forecast
-0001e430: 5f6c 656e 6774 680d 0a20 2020 2020 2020  _length..       
-0001e440: 2070 7265 6469 6374 5374 6172 7454 696d   predictStartTim
-0001e450: 6520 3d20 6461 7465 7469 6d65 2e64 6174  e = datetime.dat
-0001e460: 6574 696d 652e 6e6f 7728 290d 0a20 2020  etime.now()..   
-0001e470: 2020 2020 2069 6e64 6578 203d 2073 656c       index = sel
-0001e480: 662e 6372 6561 7465 5f66 6f72 6563 6173  f.create_forecas
-0001e490: 745f 696e 6465 7828 666f 7265 6361 7374  t_index(forecast
-0001e4a0: 5f6c 656e 6774 683d 666f 7265 6361 7374  _length=forecast
-0001e4b0: 5f6c 656e 6774 6829 0d0a 2020 2020 2020  _length)..      
-0001e4c0: 2020 666f 7265 6361 7374 203d 2070 642e    forecast = pd.
-0001e4d0: 4461 7461 4672 616d 6528 290d 0a20 2020  DataFrame()..   
-0001e4e0: 2020 2020 2075 7070 6572 5f66 6f72 6563       upper_forec
-0001e4f0: 6173 7420 3d20 7064 2e44 6174 6146 7261  ast = pd.DataFra
-0001e500: 6d65 2829 0d0a 2020 2020 2020 2020 6c6f  me()..        lo
-0001e510: 7765 725f 666f 7265 6361 7374 203d 2070  wer_forecast = p
-0001e520: 642e 4461 7461 4672 616d 6528 290d 0a20  d.DataFrame().. 
-0001e530: 2020 2020 2020 2069 6620 7365 6c66 2e72         if self.r
-0001e540: 6567 7265 7373 6f72 5f74 7261 696e 2069  egressor_train i
-0001e550: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-0001e560: 2020 2020 2020 2020 2062 6173 655f 7265           base_re
-0001e570: 6772 203d 2070 642e 636f 6e63 6174 285b  gr = pd.concat([
-0001e580: 7365 6c66 2e72 6567 7265 7373 6f72 5f74  self.regressor_t
-0001e590: 7261 696e 2c20 6675 7475 7265 5f72 6567  rain, future_reg
-0001e5a0: 7265 7373 6f72 5d29 0d0a 2020 2020 2020  ressor])..      
-0001e5b0: 2020 2020 2020 2320 6d6f 7665 2069 6e64        # move ind
-0001e5c0: 6578 2062 6163 6b20 6f6e 6520 746f 2061  ex back one to a
-0001e5d0: 6c69 676e 2077 6974 6820 7472 6169 6e69  lign with traini
-0001e5e0: 6e67 2064 6174 6573 206f 6e20 6d65 7267  ng dates on merg
-0001e5f0: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-0001e600: 6567 725f 6964 7820 3d20 6261 7365 5f72  egr_idx = base_r
-0001e610: 6567 722e 696e 6465 785b 3a2d 315d 0d0a  egr.index[:-1]..
-0001e620: 2020 2020 2020 2020 2020 2020 6261 7365              base
-0001e630: 5f72 6567 7220 3d20 6261 7365 5f72 6567  _regr = base_reg
-0001e640: 725b 313a 5d0d 0a20 2020 2020 2020 2020  r[1:]..         
-0001e650: 2020 2062 6173 655f 7265 6772 2e69 6e64     base_regr.ind
-0001e660: 6578 203d 2072 6567 725f 6964 780d 0a20  ex = regr_idx.. 
-0001e670: 2020 2020 2020 2023 206e 6565 6420 746f         # need to
-0001e680: 2063 6f70 7920 656c 7365 206d 756c 7469   copy else multi
-0001e690: 706c 6520 7072 6564 6963 7469 6f6e 7320  ple predictions 
-0001e6a0: 6d6f 7665 2065 7665 7279 206f 6e2e 2e2e  move every on...
-0001e6b0: 0d0a 2020 2020 2020 2020 6375 7272 656e  ..        curren
-0001e6c0: 745f 7820 3d20 7365 6c66 2e73 6b74 7261  t_x = self.sktra
-0001e6d0: 696e 6461 7461 2e63 6f70 7928 290d 0a0d  indata.copy()...
-0001e6e0: 0a20 2020 2020 2020 2023 2061 6e64 2074  .        # and t
-0001e6f0: 6869 7320 6973 2072 6964 6963 756c 6f75  his is ridiculou
-0001e700: 736c 7920 736c 6f77 2c20 6e65 7374 6564  sly slow, nested
-0001e710: 206c 6f6f 700d 0a20 2020 2020 2020 2066   loop..        f
-0001e720: 6f72 2066 6373 745f 7374 6570 2069 6e20  or fcst_step in 
-0001e730: 7261 6e67 6528 666f 7265 6361 7374 5f6c  range(forecast_l
-0001e740: 656e 6774 6829 3a0d 0a20 2020 2020 2020  ength):..       
-0001e750: 2020 2020 2063 7572 5f72 6567 7220 3d20       cur_regr = 
-0001e760: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
-0001e770: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
-0001e780: 7369 6f6e 5f74 7970 6520 6973 206e 6f74  sion_type is not
-0001e790: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-0001e7a0: 2020 2020 2020 2020 6375 725f 7265 6772          cur_regr
-0001e7b0: 203d 2062 6173 655f 7265 6772 2e72 6569   = base_regr.rei
-0001e7c0: 6e64 6578 2863 7572 7265 6e74 5f78 2e69  ndex(current_x.i
-0001e7d0: 6e64 6578 290d 0a20 2020 2020 2020 2020  ndex)..         
-0001e7e0: 2020 2073 656c 662e 585f 7072 6564 203d     self.X_pred =
-0001e7f0: 2070 642e 636f 6e63 6174 280d 0a20 2020   pd.concat(..   
-0001e800: 2020 2020 2020 2020 2020 2020 205b 0d0a               [..
-0001e810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e820: 2020 2020 726f 6c6c 696e 675f 785f 7265      rolling_x_re
-0001e830: 6772 6573 736f 725f 7265 6772 6573 736f  gressor_regresso
-0001e840: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-0001e850: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-0001e860: 656e 745f 785b 785f 636f 6c5d 2e74 6f5f  ent_x[x_col].to_
-0001e870: 6672 616d 6528 292c 0d0a 2020 2020 2020  frame(),..      
-0001e880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e890: 2020 6d65 616e 5f72 6f6c 6c69 6e67 5f70    mean_rolling_p
-0001e8a0: 6572 696f 6473 3d73 656c 662e 6d65 616e  eriods=self.mean
-0001e8b0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0001e8c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001e8d0: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
-0001e8e0: 7065 7269 6f64 733d 7365 6c66 2e6d 6163  periods=self.mac
-0001e8f0: 645f 7065 7269 6f64 732c 0d0a 2020 2020  d_periods,..    
-0001e900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e910: 2020 2020 7374 645f 726f 6c6c 696e 675f      std_rolling_
-0001e920: 7065 7269 6f64 733d 7365 6c66 2e73 7464  periods=self.std
-0001e930: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-0001e940: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001e950: 2020 2020 2020 2020 2020 206d 6178 5f72             max_r
-0001e960: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
-0001e970: 656c 662e 6d61 785f 726f 6c6c 696e 675f  elf.max_rolling_
-0001e980: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
-0001e990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e9a0: 2020 6d69 6e5f 726f 6c6c 696e 675f 7065    min_rolling_pe
-0001e9b0: 7269 6f64 733d 7365 6c66 2e6d 696e 5f72  riods=self.min_r
-0001e9c0: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
-0001e9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e9e0: 2020 2020 2020 2020 2065 776d 5f76 6172           ewm_var
-0001e9f0: 5f61 6c70 6861 3d73 656c 662e 6577 6d5f  _alpha=self.ewm_
-0001ea00: 7661 725f 616c 7068 612c 0d0a 2020 2020  var_alpha,..    
-0001ea10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea20: 2020 2020 7175 616e 7469 6c65 3930 5f72      quantile90_r
-0001ea30: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
-0001ea40: 656c 662e 7175 616e 7469 6c65 3930 5f72  elf.quantile90_r
-0001ea50: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
-0001ea60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ea70: 2020 2020 2020 2020 2071 7561 6e74 696c           quantil
-0001ea80: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
-0001ea90: 6f64 733d 7365 6c66 2e71 7561 6e74 696c  ods=self.quantil
-0001eaa0: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
-0001eab0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
-0001eac0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-0001ead0: 6469 7469 6f6e 616c 5f6c 6167 5f70 6572  ditional_lag_per
-0001eae0: 696f 6473 3d73 656c 662e 6164 6469 7469  iods=self.additi
-0001eaf0: 6f6e 616c 5f6c 6167 5f70 6572 696f 6473  onal_lag_periods
-0001eb00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001eb10: 2020 2020 2020 2020 2020 2065 776d 5f61             ewm_a
-0001eb20: 6c70 6861 3d73 656c 662e 6577 6d5f 616c  lpha=self.ewm_al
-0001eb30: 7068 612c 0d0a 2020 2020 2020 2020 2020  pha,..          
-0001eb40: 2020 2020 2020 2020 2020 2020 2020 6162                ab
-0001eb50: 735f 656e 6572 6779 3d73 656c 662e 6162  s_energy=self.ab
-0001eb60: 735f 656e 6572 6779 2c0d 0a20 2020 2020  s_energy,..     
-0001eb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb80: 2020 2072 6f6c 6c69 6e67 5f61 7574 6f63     rolling_autoc
-0001eb90: 6f72 725f 7065 7269 6f64 733d 7365 6c66  orr_periods=self
-0001eba0: 2e72 6f6c 6c69 6e67 5f61 7574 6f63 6f72  .rolling_autocor
-0001ebb0: 725f 7065 7269 6f64 732c 0d0a 2020 2020  r_periods,..    
-0001ebc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ebd0: 2020 2020 6e6f 6e7a 6572 6f5f 6c61 7374      nonzero_last
-0001ebe0: 5f6e 3d73 656c 662e 6e6f 6e7a 6572 6f5f  _n=self.nonzero_
-0001ebf0: 6c61 7374 5f6e 2c0d 0a20 2020 2020 2020  last_n,..       
-0001ec00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ec10: 2061 6464 5f64 6174 655f 7061 7274 3d73   add_date_part=s
-0001ec20: 656c 662e 6461 7465 7061 7274 5f6d 6574  elf.datepart_met
-0001ec30: 686f 642c 0d0a 2020 2020 2020 2020 2020  hod,..          
-0001ec40: 2020 2020 2020 2020 2020 2020 2020 686f                ho
-0001ec50: 6c69 6461 793d 7365 6c66 2e68 6f6c 6964  liday=self.holid
-0001ec60: 6179 2c0d 0a20 2020 2020 2020 2020 2020  ay,..           
-0001ec70: 2020 2020 2020 2020 2020 2020 2068 6f6c               hol
-0001ec80: 6964 6179 5f63 6f75 6e74 7279 3d73 656c  iday_country=sel
-0001ec90: 662e 686f 6c69 6461 795f 636f 756e 7472  f.holiday_countr
-0001eca0: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
-0001ecb0: 2020 2020 2020 2020 2020 2020 706f 6c79              poly
-0001ecc0: 6e6f 6d69 616c 5f64 6567 7265 653d 7365  nomial_degree=se
-0001ecd0: 6c66 2e70 6f6c 796e 6f6d 6961 6c5f 6465  lf.polynomial_de
-0001ece0: 6772 6565 2c0d 0a20 2020 2020 2020 2020  gree,..         
-0001ecf0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0001ed00: 696e 646f 773d 7365 6c66 2e77 696e 646f  indow=self.windo
-0001ed10: 772c 0d0a 2020 2020 2020 2020 2020 2020  w,..            
-0001ed20: 2020 2020 2020 2020 2020 2020 6675 7475              futu
-0001ed30: 7265 5f72 6567 7265 7373 6f72 3d63 7572  re_regressor=cur
-0001ed40: 5f72 6567 722c 0d0a 2020 2020 2020 2020  _regr,..        
-0001ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ed60: 636f 696e 7465 6772 6174 696f 6e3d 7365  cointegration=se
-0001ed70: 6c66 2e63 6f69 6e74 6567 7261 7469 6f6e  lf.cointegration
-0001ed80: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001ed90: 2020 2020 2020 2020 2020 2063 6f69 6e74             coint
-0001eda0: 6567 7261 7469 6f6e 5f6c 6167 3d73 656c  egration_lag=sel
-0001edb0: 662e 636f 696e 7465 6772 6174 696f 6e5f  f.cointegration_
-0001edc0: 6c61 672c 0d0a 2020 2020 2020 2020 2020  lag,..          
-0001edd0: 2020 2020 2020 2020 2020 292e 7461 696c            ).tail
-0001ede0: 2831 290d 0a20 2020 2020 2020 2020 2020  (1)..           
-0001edf0: 2020 2020 2020 2020 2066 6f72 2078 5f63           for x_c
-0001ee00: 6f6c 2069 6e20 6375 7272 656e 745f 782e  ol in current_x.
-0001ee10: 636f 6c75 6d6e 730d 0a20 2020 2020 2020  columns..       
-0001ee20: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
-0001ee30: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0001ee40: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
-0001ee50: 6361 6c65 5f66 756c 6c5f 583a 0d0a 2020  cale_full_X:..  
-0001ee60: 2020 2020 2020 2020 2020 2020 2020 635f                c_
-0001ee70: 785f 7072 6564 203d 2073 656c 662e 7363  x_pred = self.sc
-0001ee80: 616c 655f 6461 7461 2873 656c 662e 585f  ale_data(self.X_
-0001ee90: 7072 6564 292e 746f 5f6e 756d 7079 2829  pred).to_numpy()
-0001eea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001eeb0: 2020 7266 5072 6564 203d 2073 656c 662e    rfPred = self.
-0001eec0: 6d6f 6465 6c2e 7072 6564 6963 7428 635f  model.predict(c_
-0001eed0: 785f 7072 6564 290d 0a20 2020 2020 2020  x_pred)..       
-0001eee0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-0001eef0: 2020 2020 2020 2020 2020 2020 635f 785f              c_x_
-0001ef00: 7072 6564 203d 2073 656c 662e 585f 7072  pred = self.X_pr
-0001ef10: 6564 2e74 6f5f 6e75 6d70 7928 290d 0a20  ed.to_numpy().. 
-0001ef20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001ef30: 6650 7265 6420 3d20 7365 6c66 2e6d 6f64  fPred = self.mod
-0001ef40: 656c 2e70 7265 6469 6374 2863 5f78 5f70  el.predict(c_x_p
-0001ef50: 7265 6429 0d0a 2020 2020 2020 2020 2020  red)..          
-0001ef60: 2020 7072 6564 5f63 6c65 616e 203d 2070    pred_clean = p
-0001ef70: 642e 4461 7461 4672 616d 6528 0d0a 2020  d.DataFrame(..  
-0001ef80: 2020 2020 2020 2020 2020 2020 2020 7266                rf
-0001ef90: 5072 6564 2c20 696e 6465 783d 6375 7272  Pred, index=curr
-0001efa0: 656e 745f 782e 636f 6c75 6d6e 732c 2063  ent_x.columns, c
-0001efb0: 6f6c 756d 6e73 3d5b 696e 6465 785b 6663  olumns=[index[fc
-0001efc0: 7374 5f73 7465 705d 5d0d 0a20 2020 2020  st_step]]..     
-0001efd0: 2020 2020 2020 2029 2e74 7261 6e73 706f         ).transpo
-0001efe0: 7365 2829 0d0a 2020 2020 2020 2020 2020  se()..          
-0001eff0: 2020 666f 7265 6361 7374 203d 2070 642e    forecast = pd.
-0001f000: 636f 6e63 6174 285b 666f 7265 6361 7374  concat([forecast
-0001f010: 2c20 7072 6564 5f63 6c65 616e 5d29 0d0a  , pred_clean])..
-0001f020: 2020 2020 2020 2020 2020 2020 2320 6120              # a 
-0001f030: 6c6f 7420 736c 6f77 6572 0d0a 2020 2020  lot slower..    
-0001f040: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0001f050: 7072 6f62 6162 696c 6973 7469 633a 0d0a  probabilistic:..
-0001f060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f070: 6966 2073 656c 662e 6d75 6c74 696f 7574  if self.multiout
-0001f080: 7075 7467 7072 3a0d 0a20 2020 2020 2020  putgpr:..       
-0001f090: 2020 2020 2020 2020 2020 2020 206d 6564               med
-0001f0a0: 2c20 7661 7220 3d20 7365 6c66 2e6d 6f64  , var = self.mod
-0001f0b0: 656c 2e70 7265 6469 6374 5f70 726f 6261  el.predict_proba
-0001f0c0: 2863 5f78 5f70 7265 6429 0d0a 2020 2020  (c_x_pred)..    
-0001f0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f0e0: 7374 6465 7620 3d20 6e70 2e73 7172 7428  stdev = np.sqrt(
-0001f0f0: 7661 7229 5b2e 2e2e 2c20 6e70 2e6e 6577  var)[..., np.new
-0001f100: 6178 6973 5d2e 5420 2a20 6e6f 726d 2e70  axis].T * norm.p
-0001f110: 7066 280d 0a20 2020 2020 2020 2020 2020  pf(..           
-0001f120: 2020 2020 2020 2020 2020 2020 2028 3120               (1 
-0001f130: 2b20 7365 6c66 2e70 7265 6469 6374 696f  + self.predictio
-0001f140: 6e5f 696e 7465 7276 616c 2920 2f20 320d  n_interval) / 2.
-0001f150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f160: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-0001f170: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-0001f180: 5f75 7070 6572 203d 2070 642e 4461 7461  _upper = pd.Data
-0001f190: 4672 616d 6528 0d0a 2020 2020 2020 2020  Frame(..        
-0001f1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f1b0: 6d65 6420 2b20 7374 6465 762c 2069 6e64  med + stdev, ind
-0001f1c0: 6578 3d5b 696e 6465 785b 6663 7374 5f73  ex=[index[fcst_s
-0001f1d0: 7465 705d 5d2c 2063 6f6c 756d 6e73 3d63  tep]], columns=c
-0001f1e0: 7572 7265 6e74 5f78 2e63 6f6c 756d 6e73  urrent_x.columns
-0001f1f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f200: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-0001f210: 2020 2020 2020 2020 2020 2020 2070 7265               pre
-0001f220: 645f 6c6f 7765 7220 3d20 7064 2e44 6174  d_lower = pd.Dat
-0001f230: 6146 7261 6d65 280d 0a20 2020 2020 2020  aFrame(..       
-0001f240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f250: 206d 6564 202d 2073 7464 6576 2c20 696e   med - stdev, in
-0001f260: 6465 783d 5b69 6e64 6578 5b66 6373 745f  dex=[index[fcst_
-0001f270: 7374 6570 5d5d 2c20 636f 6c75 6d6e 733d  step]], columns=
-0001f280: 6375 7272 656e 745f 782e 636f 6c75 6d6e  current_x.column
-0001f290: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
-0001f2a0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-0001f2b0: 2020 2020 2020 2020 2020 2020 2020 7570                up
-0001f2c0: 7065 725f 666f 7265 6361 7374 203d 2070  per_forecast = p
-0001f2d0: 642e 636f 6e63 6174 285b 7570 7065 725f  d.concat([upper_
-0001f2e0: 666f 7265 6361 7374 2c20 7072 6564 5f75  forecast, pred_u
-0001f2f0: 7070 6572 5d29 0d0a 2020 2020 2020 2020  pper])..        
-0001f300: 2020 2020 2020 2020 2020 2020 6c6f 7765              lowe
-0001f310: 725f 666f 7265 6361 7374 203d 2070 642e  r_forecast = pd.
-0001f320: 636f 6e63 6174 285b 6c6f 7765 725f 666f  concat([lower_fo
-0001f330: 7265 6361 7374 2c20 7072 6564 5f6c 6f77  recast, pred_low
-0001f340: 6572 5d29 0d0a 2020 2020 2020 2020 2020  er])..          
-0001f350: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-0001f360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f370: 2072 6650 7265 645f 7570 7065 7220 3d20   rfPred_upper = 
-0001f380: 7365 6c66 2e6d 6f64 656c 5f75 7070 6572  self.model_upper
-0001f390: 2e70 7265 6469 6374 2863 5f78 5f70 7265  .predict(c_x_pre
-0001f3a0: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
-0001f3b0: 2020 2020 2020 2020 7072 6564 5f75 7070          pred_upp
-0001f3c0: 6572 203d 2070 642e 4461 7461 4672 616d  er = pd.DataFram
-0001f3d0: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
-0001f3e0: 2020 2020 2020 2020 2020 2020 7266 5072              rfPr
-0001f3f0: 6564 5f75 7070 6572 2c0d 0a20 2020 2020  ed_upper,..     
-0001f400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f410: 2020 2069 6e64 6578 3d63 7572 7265 6e74     index=current
-0001f420: 5f78 2e63 6f6c 756d 6e73 2c0d 0a20 2020  _x.columns,..   
-0001f430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f440: 2020 2020 2063 6f6c 756d 6e73 3d5b 696e       columns=[in
-0001f450: 6465 785b 6663 7374 5f73 7465 705d 5d2c  dex[fcst_step]],
-0001f460: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f470: 2020 2020 2020 292e 7472 616e 7370 6f73        ).transpos
-0001f480: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-0001f490: 2020 2020 2020 2020 2072 6650 7265 645f           rfPred_
-0001f4a0: 6c6f 7765 7220 3d20 7365 6c66 2e6d 6f64  lower = self.mod
-0001f4b0: 656c 5f6c 6f77 6572 2e70 7265 6469 6374  el_lower.predict
-0001f4c0: 2863 5f78 5f70 7265 6429 0d0a 2020 2020  (c_x_pred)..    
-0001f4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f4e0: 7072 6564 5f6c 6f77 6572 203d 2070 642e  pred_lower = pd.
-0001f4f0: 4461 7461 4672 616d 6528 0d0a 2020 2020  DataFrame(..    
+00019210: 7665 7262 6f73 653d 696e 6e65 725f 7665  verbose=inner_ve
+00019220: 7262 6f73 652c 0d0a 2020 2020 2020 2020  rbose,..        
+00019230: 2020 2020 2020 2020 7665 7262 6f73 655f          verbose_
+00019240: 626f 6f6c 3d46 616c 7365 2c0d 0a20 2020  bool=False,..   
+00019250: 2020 2020 2020 2020 2020 2020 2072 616e               ran
+00019260: 646f 6d5f 7365 6564 3d73 656c 662e 7261  dom_seed=self.ra
+00019270: 6e64 6f6d 5f73 6565 642c 0d0a 2020 2020  ndom_seed,..    
+00019280: 2020 2020 2020 2020 2020 2020 6e5f 6a6f              n_jo
+00019290: 6273 3d6e 5f6a 6f62 735f 7061 7373 6564  bs=n_jobs_passed
+000192a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000192b0: 2020 206d 756c 7469 6f75 7470 7574 3d6d     multioutput=m
+000192c0: 756c 7469 6f75 7470 7574 2c0d 0a20 2020  ultioutput,..   
+000192d0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+000192e0: 2020 2020 2020 2020 6461 685f 6d6f 6465          dah_mode
+000192f0: 6c2e 6669 7428 582e 746f 5f6e 756d 7079  l.fit(X.to_numpy
+00019300: 2829 2c20 5929 0d0a 2020 2020 2020 2020  (), Y)..        
+00019310: 2020 2020 7265 7475 726e 207b 636f 6c3a      return {col:
+00019320: 2064 6168 5f6d 6f64 656c 7d0d 0a0d 0a20   dah_model}.... 
+00019330: 2020 2020 2020 2073 656c 662e 7061 7261         self.para
+00019340: 6c6c 656c 203d 2054 7275 650d 0a20 2020  llel = True..   
+00019350: 2020 2020 2073 656c 662e 6e6f 745f 7061       self.not_pa
+00019360: 7261 6c6c 656c 5f6d 6f64 656c 7320 3d20  rallel_models = 
+00019370: 5b0d 0a20 2020 2020 2020 2020 2020 2027  [..            '
+00019380: 4c69 6768 7447 424d 272c 0d0a 2020 2020  LightGBM',..    
+00019390: 2020 2020 2020 2020 2752 616e 646f 6d46          'RandomF
+000193a0: 6f72 6573 7427 2c0d 0a20 2020 2020 2020  orest',..       
+000193b0: 2020 2020 2022 4261 7965 7369 616e 5269       "BayesianRi
+000193c0: 6467 6522 2c0d 0a20 2020 2020 2020 2020  dge",..         
+000193d0: 2020 2027 5472 616e 7366 6f72 6d65 7227     'Transformer'
+000193e0: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+000193f0: 4b65 7261 7352 4e4e 222c 0d0a 2020 2020  KerasRNN",..    
+00019400: 2020 2020 2020 2020 2248 6973 7447 7261          "HistGra
+00019410: 6469 656e 7442 6f6f 7374 222c 0d0a 2020  dientBoost",..  
+00019420: 2020 2020 2020 5d0d 0a20 2020 2020 2020        ]..       
+00019430: 206f 7574 5f6e 5f6a 6f62 7320 3d20 696e   out_n_jobs = in
+00019440: 7428 7365 6c66 2e6e 5f6a 6f62 7320 2d20  t(self.n_jobs - 
+00019450: 3129 0d0a 2020 2020 2020 2020 6f75 745f  1)..        out_
+00019460: 6e5f 6a6f 6273 203d 2031 2069 6620 6f75  n_jobs = 1 if ou
+00019470: 745f 6e5f 6a6f 6273 203c 2031 2065 6c73  t_n_jobs < 1 els
+00019480: 6520 6f75 745f 6e5f 6a6f 6273 0d0a 2020  e out_n_jobs..  
+00019490: 2020 2020 2020 6966 206f 7574 5f6e 5f6a        if out_n_j
+000194a0: 6f62 7320 696e 205b 302c 2031 5d20 6f72  obs in [0, 1] or
+000194b0: 206c 656e 2863 6f6c 7329 203c 2033 3a0d   len(cols) < 3:.
+000194c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000194d0: 662e 7061 7261 6c6c 656c 203d 2046 616c  f.parallel = Fal
+000194e0: 7365 0d0a 2020 2020 2020 2020 656c 6966  se..        elif
+000194f0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+00019500: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+00019510: 6d6f 6465 6c2e 6765 7428 226d 6f64 656c  model.get("model
+00019520: 222c 2022 456c 6173 7469 634e 6574 2229  ", "ElasticNet")
+00019530: 2069 6e20 7365 6c66 2e6e 6f74 5f70 6172   in self.not_par
+00019540: 616c 6c65 6c5f 6d6f 6465 6c73 0d0a 2020  allel_models..  
+00019550: 2020 2020 2020 293a 0d0a 2020 2020 2020        ):..      
+00019560: 2020 2020 2020 7365 6c66 2e70 6172 616c        self.paral
+00019570: 6c65 6c20 3d20 4661 6c73 650d 0a20 2020  lel = False..   
+00019580: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00019590: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+000195a0: 2020 2020 2020 2020 2020 2020 2020 6672                fr
+000195b0: 6f6d 206a 6f62 6c69 6220 696d 706f 7274  om joblib import
+000195c0: 2050 6172 616c 6c65 6c2c 2064 656c 6179   Parallel, delay
+000195d0: 6564 0d0a 2020 2020 2020 2020 2020 2020  ed..            
+000195e0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+000195f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00019600: 2020 2073 656c 662e 7061 7261 6c6c 656c     self.parallel
+00019610: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+00019620: 2020 6172 6773 203d 207b 7d0d 0a20 2020    args = {}..   
+00019630: 2020 2020 2023 206a 6f62 6c69 6220 6d75       # joblib mu
+00019640: 6c74 6970 726f 6365 7373 696e 6720 746f  ltiprocessing to
+00019650: 206c 6f6f 7020 7468 726f 7567 6820 7365   loop through se
+00019660: 7269 6573 0d0a 2020 2020 2020 2020 6966  ries..        if
+00019670: 2073 656c 662e 7061 7261 6c6c 656c 3a0d   self.parallel:.
+00019680: 0a20 2020 2020 2020 2020 2020 2064 665f  .            df_
+00019690: 6c69 7374 203d 2050 6172 616c 6c65 6c28  list = Parallel(
+000196a0: 6e5f 6a6f 6273 3d6f 7574 5f6e 5f6a 6f62  n_jobs=out_n_job
+000196b0: 7329 280d 0a20 2020 2020 2020 2020 2020  s)(..           
+000196c0: 2020 2020 2064 656c 6179 6564 2866 6f72       delayed(for
+000196d0: 6563 6173 745f 6279 5f63 6f6c 756d 6e29  ecast_by_column)
+000196e0: 2873 656c 662c 2061 7267 732c 2073 656c  (self, args, sel
+000196f0: 662e 7061 7261 6c6c 656c 2c20 7365 6c66  f.parallel, self
+00019700: 2e6e 5f6a 6f62 732c 2063 6f6c 290d 0a20  .n_jobs, col).. 
+00019710: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00019720: 6f72 2028 636f 6c29 2069 6e20 636f 6c73  or (col) in cols
+00019730: 0d0a 2020 2020 2020 2020 2020 2020 290d  ..            ).
+00019740: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00019750: 662e 6d6f 6465 6c73 203d 207b 6b3a 2076  f.models = {k: v
+00019760: 2066 6f72 2064 2069 6e20 6466 5f6c 6973   for d in df_lis
+00019770: 7420 666f 7220 6b2c 2076 2069 6e20 642e  t for k, v in d.
+00019780: 6974 656d 7328 297d 0d0a 2020 2020 2020  items()}..      
+00019790: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000197a0: 2020 2020 2064 665f 6c69 7374 203d 205b       df_list = [
+000197b0: 5d0d 0a20 2020 2020 2020 2020 2020 2066  ]..            f
+000197c0: 6f72 2063 6f6c 2069 6e20 636f 6c73 3a0d  or col in cols:.
+000197d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000197e0: 2064 665f 6c69 7374 2e61 7070 656e 6428   df_list.append(
+000197f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019800: 2020 2020 2020 666f 7265 6361 7374 5f62        forecast_b
+00019810: 795f 636f 6c75 6d6e 2873 656c 662c 2061  y_column(self, a
+00019820: 7267 732c 2073 656c 662e 7061 7261 6c6c  rgs, self.parall
+00019830: 656c 2c20 7365 6c66 2e6e 5f6a 6f62 732c  el, self.n_jobs,
+00019840: 2063 6f6c 290d 0a20 2020 2020 2020 2020   col)..         
+00019850: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00019860: 2020 2020 2020 7365 6c66 2e6d 6f64 656c        self.model
+00019870: 7320 3d20 7b6b 3a20 7620 666f 7220 6420  s = {k: v for d 
+00019880: 696e 2064 665f 6c69 7374 2066 6f72 206b  in df_list for k
+00019890: 2c20 7620 696e 2064 2e69 7465 6d73 2829  , v in d.items()
+000198a0: 7d0d 0a20 2020 2020 2020 2073 656c 662e  }..        self.
+000198b0: 6669 745f 7275 6e74 696d 6520 3d20 6461  fit_runtime = da
+000198c0: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
+000198d0: 6e6f 7728 2920 2d20 7365 6c66 2e73 7461  now() - self.sta
+000198e0: 7274 5469 6d65 0d0a 2020 2020 2020 2020  rtTime..        
+000198f0: 7265 7475 726e 2073 656c 660d 0a0d 0a20  return self.... 
+00019900: 2020 2064 6566 2070 7265 6469 6374 280d     def predict(.
+00019910: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
+00019920: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
+00019930: 5f6c 656e 6774 683a 2069 6e74 203d 204e  _length: int = N
+00019940: 6f6e 652c 0d0a 2020 2020 2020 2020 6a75  one,..        ju
+00019950: 7374 5f70 6f69 6e74 5f66 6f72 6563 6173  st_point_forecas
+00019960: 743a 2062 6f6f 6c20 3d20 4661 6c73 652c  t: bool = False,
+00019970: 0d0a 2020 2020 2020 2020 6675 7475 7265  ..        future
+00019980: 5f72 6567 7265 7373 6f72 3d4e 6f6e 652c  _regressor=None,
+00019990: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+000199a0: 2020 2222 2247 656e 6572 6174 6520 666f    """Generate fo
+000199b0: 7265 6361 7374 2064 6174 6120 696d 6d65  recast data imme
+000199c0: 6469 6174 656c 7920 666f 6c6c 6f77 696e  diately followin
+000199d0: 6720 6461 7465 7320 6f66 2069 6e64 6578  g dates of index
+000199e0: 2073 7570 706c 6965 6420 746f 202e 6669   supplied to .fi
+000199f0: 7428 292e 0d0a 0d0a 2020 2020 2020 2020  t().....        
+00019a00: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
+00019a10: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
+00019a20: 7468 2028 696e 7429 3a20 4e75 6d62 6572  th (int): Number
+00019a30: 206f 6620 7065 7269 6f64 7320 6f66 2064   of periods of d
+00019a40: 6174 6120 746f 2066 6f72 6563 6173 7420  ata to forecast 
+00019a50: 6168 6561 640d 0a20 2020 2020 2020 2020  ahead..         
+00019a60: 2020 2020 2020 2069 676e 6f72 6564 2068         ignored h
+00019a70: 6572 6520 666f 7220 7468 6973 206d 6f64  ere for this mod
+00019a80: 656c 2c20 6d75 7374 2062 6520 7365 7420  el, must be set 
+00019a90: 696e 205f 5f69 6e69 745f 5f20 6265 666f  in __init__ befo
+00019aa0: 7265 202e 6669 7428 290d 0a20 2020 2020  re .fit()..     
+00019ab0: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+00019ac0: 6772 6573 736f 7220 2870 642e 4461 7461  gressor (pd.Data
+00019ad0: 4672 616d 6529 3a20 6164 6469 7469 6f6e  Frame): addition
+00019ae0: 616c 2072 6567 7265 7373 6f72 0d0a 2020  al regressor..  
+00019af0: 2020 2020 2020 2020 2020 6a75 7374 5f70            just_p
+00019b00: 6f69 6e74 5f66 6f72 6563 6173 7420 2862  oint_forecast (b
+00019b10: 6f6f 6c29 3a20 4966 2054 7275 652c 2072  ool): If True, r
+00019b20: 6574 7572 6e20 6120 7061 6e64 6173 2e44  eturn a pandas.D
+00019b30: 6174 6146 7261 6d65 206f 6620 6a75 7374  ataFrame of just
+00019b40: 2070 6f69 6e74 2066 6f72 6563 6173 7473   point forecasts
+00019b50: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+00019b60: 726e 733a 0d0a 2020 2020 2020 2020 2020  rns:..          
+00019b70: 2020 4569 7468 6572 2061 2050 7265 6469    Either a Predi
+00019b80: 6374 696f 6e4f 626a 6563 7420 6f66 2066  ctionObject of f
+00019b90: 6f72 6563 6173 7473 2061 6e64 206d 6574  orecasts and met
+00019ba0: 6164 6174 612c 206f 720d 0a20 2020 2020  adata, or..     
+00019bb0: 2020 2020 2020 2069 6620 6a75 7374 5f70         if just_p
+00019bc0: 6f69 6e74 5f66 6f72 6563 6173 7420 3d3d  oint_forecast ==
+00019bd0: 2054 7275 652c 2061 2064 6174 6166 7261   True, a datafra
+00019be0: 6d65 206f 6620 706f 696e 7420 666f 7265  me of point fore
+00019bf0: 6361 7374 730d 0a20 2020 2020 2020 2022  casts..        "
+00019c00: 2222 0d0a 2020 2020 2020 2020 7072 6564  ""..        pred
+00019c10: 6963 7453 7461 7274 5469 6d65 203d 2064  ictStartTime = d
+00019c20: 6174 6574 696d 652e 6461 7465 7469 6d65  atetime.datetime
+00019c30: 2e6e 6f77 2829 0d0a 2020 2020 2020 2020  .now()..        
+00019c40: 696e 6465 7820 3d20 7365 6c66 2e63 7265  index = self.cre
+00019c50: 6174 655f 666f 7265 6361 7374 5f69 6e64  ate_forecast_ind
+00019c60: 6578 2866 6f72 6563 6173 745f 6c65 6e67  ex(forecast_leng
+00019c70: 7468 3d73 656c 662e 666f 7265 6361 7374  th=self.forecast
+00019c80: 5f6c 656e 6774 6829 0d0a 2020 2020 2020  _length)..      
+00019c90: 2020 666f 7265 6361 7374 203d 2070 642e    forecast = pd.
+00019ca0: 4461 7461 4672 616d 6528 290d 0a20 2020  DataFrame()..   
+00019cb0: 2020 2020 2066 6f72 2078 5f63 6f6c 2069       for x_col i
+00019cc0: 6e20 7365 6c66 2e73 6b74 7261 696e 6461  n self.sktrainda
+00019cd0: 7461 2e63 6f6c 756d 6e73 3a0d 0a20 2020  ta.columns:..   
+00019ce0: 2020 2020 2020 2020 2062 6173 6520 3d20           base = 
+00019cf0: 7064 2e44 6174 6146 7261 6d65 2873 656c  pd.DataFrame(sel
+00019d00: 662e 736b 7472 6169 6e64 6174 615b 785f  f.sktraindata[x_
+00019d10: 636f 6c5d 290d 0a0d 0a20 2020 2020 2020  col])....       
+00019d20: 2020 2020 2078 5f64 6174 203d 2072 6f6c       x_dat = rol
+00019d30: 6c69 6e67 5f78 5f72 6567 7265 7373 6f72  ling_x_regressor
+00019d40: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00019d50: 2020 2062 6173 652c 0d0a 2020 2020 2020     base,..      
+00019d60: 2020 2020 2020 2020 2020 6d65 616e 5f72            mean_r
+00019d70: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
+00019d80: 656c 662e 6d65 616e 5f72 6f6c 6c69 6e67  elf.mean_rolling
+00019d90: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+00019da0: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
+00019db0: 7065 7269 6f64 733d 7365 6c66 2e6d 6163  periods=self.mac
+00019dc0: 645f 7065 7269 6f64 732c 0d0a 2020 2020  d_periods,..    
+00019dd0: 2020 2020 2020 2020 2020 2020 7374 645f              std_
+00019de0: 726f 6c6c 696e 675f 7065 7269 6f64 733d  rolling_periods=
+00019df0: 7365 6c66 2e73 7464 5f72 6f6c 6c69 6e67  self.std_rolling
+00019e00: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+00019e10: 2020 2020 2020 2020 2020 206d 6178 5f72             max_r
+00019e20: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
+00019e30: 656c 662e 6d61 785f 726f 6c6c 696e 675f  elf.max_rolling_
+00019e40: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
+00019e50: 2020 2020 2020 2020 2020 6d69 6e5f 726f            min_ro
+00019e60: 6c6c 696e 675f 7065 7269 6f64 733d 7365  lling_periods=se
+00019e70: 6c66 2e6d 696e 5f72 6f6c 6c69 6e67 5f70  lf.min_rolling_p
+00019e80: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+00019e90: 2020 2020 2020 2020 2065 776d 5f76 6172           ewm_var
+00019ea0: 5f61 6c70 6861 3d73 656c 662e 6577 6d5f  _alpha=self.ewm_
+00019eb0: 7661 725f 616c 7068 612c 0d0a 2020 2020  var_alpha,..    
+00019ec0: 2020 2020 2020 2020 2020 2020 6164 6469              addi
+00019ed0: 7469 6f6e 616c 5f6c 6167 5f70 6572 696f  tional_lag_perio
+00019ee0: 6473 3d73 656c 662e 6164 6469 7469 6f6e  ds=self.addition
+00019ef0: 616c 5f6c 6167 5f70 6572 696f 6473 2c0d  al_lag_periods,.
+00019f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019f10: 2065 776d 5f61 6c70 6861 3d73 656c 662e   ewm_alpha=self.
+00019f20: 6577 6d5f 616c 7068 612c 0d0a 2020 2020  ewm_alpha,..    
+00019f30: 2020 2020 2020 2020 2020 2020 6162 735f              abs_
+00019f40: 656e 6572 6779 3d73 656c 662e 6162 735f  energy=self.abs_
+00019f50: 656e 6572 6779 2c0d 0a20 2020 2020 2020  energy,..       
+00019f60: 2020 2020 2020 2020 2072 6f6c 6c69 6e67           rolling
+00019f70: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+00019f80: 733d 7365 6c66 2e72 6f6c 6c69 6e67 5f61  s=self.rolling_a
+00019f90: 7574 6f63 6f72 725f 7065 7269 6f64 732c  utocorr_periods,
+00019fa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019fb0: 2020 6164 645f 6461 7465 5f70 6172 743d    add_date_part=
+00019fc0: 7365 6c66 2e61 6464 5f64 6174 655f 7061  self.add_date_pa
+00019fd0: 7274 2c0d 0a20 2020 2020 2020 2020 2020  rt,..           
+00019fe0: 2020 2020 2068 6f6c 6964 6179 3d73 656c       holiday=sel
+00019ff0: 662e 686f 6c69 6461 792c 0d0a 2020 2020  f.holiday,..    
+0001a000: 2020 2020 2020 2020 2020 2020 686f 6c69              holi
+0001a010: 6461 795f 636f 756e 7472 793d 7365 6c66  day_country=self
+0001a020: 2e68 6f6c 6964 6179 5f63 6f75 6e74 7279  .holiday_country
+0001a030: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a040: 2020 2070 6f6c 796e 6f6d 6961 6c5f 6465     polynomial_de
+0001a050: 6772 6565 3d73 656c 662e 706f 6c79 6e6f  gree=self.polyno
+0001a060: 6d69 616c 5f64 6567 7265 652c 0d0a 2020  mial_degree,..  
+0001a070: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+0001a080: 6e64 6f77 3d73 656c 662e 7769 6e64 6f77  ndow=self.window
+0001a090: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+0001a0a0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+0001a0b0: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
+0001a0c0: 5f74 7970 6520 3d3d 2027 5573 6572 273a  _type == 'User':
+0001a0d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a0e0: 2020 785f 6461 7420 3d20 7064 2e63 6f6e    x_dat = pd.con
+0001a0f0: 6361 7428 5b78 5f64 6174 2c20 7365 6c66  cat([x_dat, self
+0001a100: 2e72 6567 7265 7373 6f72 5f74 7261 696e  .regressor_train
+0001a110: 5d2c 2061 7869 733d 3129 2e66 696c 6c6e  ], axis=1).filln
+0001a120: 6128 3029 0d0a 2020 2020 2020 2020 2020  a(0)..          
+0001a130: 2020 6966 2073 656c 662e 785f 7472 616e    if self.x_tran
+0001a140: 7366 6f72 6d20 696e 205b 2746 6173 7449  sform in ['FastI
+0001a150: 4341 272c 2027 4e79 7374 726f 656d 272c  CA', 'Nystroem',
+0001a160: 2027 526d 5a65 726f 5661 7269 616e 6365   'RmZeroVariance
+0001a170: 275d 3a0d 0a20 2020 2020 2020 2020 2020  ']:..           
+0001a180: 2020 2020 2078 5f64 6174 203d 2070 642e       x_dat = pd.
+0001a190: 4461 7461 4672 616d 6528 7365 6c66 2e78  DataFrame(self.x
+0001a1a0: 5f74 7261 6e73 666f 726d 6572 2e74 7261  _transformer.tra
+0001a1b0: 6e73 666f 726d 2878 5f64 6174 2929 0d0a  nsform(x_dat))..
+0001a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1d0: 785f 6461 7420 3d20 785f 6461 742e 7265  x_dat = x_dat.re
+0001a1e0: 706c 6163 6528 5b6e 702e 696e 662c 202d  place([np.inf, -
+0001a1f0: 6e70 2e69 6e66 5d2c 2030 292e 6669 6c6c  np.inf], 0).fill
+0001a200: 6e61 2830 290d 0a20 2020 2020 2020 2020  na(0)..         
+0001a210: 2020 2072 6650 7265 6420 3d20 7365 6c66     rfPred = self
+0001a220: 2e6d 6f64 656c 735b 785f 636f 6c5d 2e70  .models[x_col].p
+0001a230: 7265 6469 6374 2878 5f64 6174 2e74 6169  redict(x_dat.tai
+0001a240: 6c28 3129 2e74 6f5f 6e75 6d70 7928 2929  l(1).to_numpy())
+0001a250: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0001a260: 7266 5072 6564 203d 2070 642e 4461 7461  rfPred = pd.Data
+0001a270: 4672 616d 6528 7266 5072 6564 292e 7472  Frame(rfPred).tr
+0001a280: 616e 7370 6f73 6528 290d 0a20 2020 2020  anspose()..     
+0001a290: 2020 2020 2020 2023 2072 6650 7265 642e         # rfPred.
+0001a2a0: 636f 6c75 6d6e 7320 3d20 5b78 5f63 6f6c  columns = [x_col
+0001a2b0: 5d0d 0a20 2020 2020 2020 2020 2020 2072  ]..            r
+0001a2c0: 6650 7265 6420 3d20 7064 2e53 6572 6965  fPred = pd.Serie
+0001a2d0: 7328 7266 5072 6564 2e66 6c61 7474 656e  s(rfPred.flatten
+0001a2e0: 2829 290d 0a20 2020 2020 2020 2020 2020  ())..           
+0001a2f0: 2072 6650 7265 642e 6e61 6d65 203d 2078   rfPred.name = x
+0001a300: 5f63 6f6c 0d0a 2020 2020 2020 2020 2020  _col..          
+0001a310: 2020 666f 7265 6361 7374 203d 2070 642e    forecast = pd.
+0001a320: 636f 6e63 6174 285b 666f 7265 6361 7374  concat([forecast
+0001a330: 2c20 7266 5072 6564 5d2c 2061 7869 733d  , rfPred], axis=
+0001a340: 3129 0d0a 0d0a 2020 2020 2020 2020 666f  1)....        fo
+0001a350: 7265 6361 7374 203d 2066 6f72 6563 6173  recast = forecas
+0001a360: 745b 7365 6c66 2e63 6f6c 756d 6e5f 6e61  t[self.column_na
+0001a370: 6d65 735d 0d0a 2020 2020 2020 2020 666f  mes]..        fo
+0001a380: 7265 6361 7374 2e69 6e64 6578 203d 2069  recast.index = i
+0001a390: 6e64 6578 0d0a 0d0a 2020 2020 2020 2020  ndex....        
+0001a3a0: 6966 206a 7573 745f 706f 696e 745f 666f  if just_point_fo
+0001a3b0: 7265 6361 7374 3a0d 0a20 2020 2020 2020  recast:..       
+0001a3c0: 2020 2020 2072 6574 7572 6e20 666f 7265       return fore
+0001a3d0: 6361 7374 0d0a 2020 2020 2020 2020 656c  cast..        el
+0001a3e0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+0001a3f0: 2075 7070 6572 5f66 6f72 6563 6173 742c   upper_forecast,
+0001a400: 206c 6f77 6572 5f66 6f72 6563 6173 7420   lower_forecast 
+0001a410: 3d20 506f 696e 745f 746f 5f50 726f 6261  = Point_to_Proba
+0001a420: 6269 6c69 7479 280d 0a20 2020 2020 2020  bility(..       
+0001a430: 2020 2020 2020 2020 2073 656c 662e 736b           self.sk
+0001a440: 7472 6169 6e64 6174 612c 0d0a 2020 2020  traindata,..    
+0001a450: 2020 2020 2020 2020 2020 2020 666f 7265              fore
+0001a460: 6361 7374 2c0d 0a20 2020 2020 2020 2020  cast,..         
+0001a470: 2020 2020 2020 206d 6574 686f 643d 2769         method='i
+0001a480: 6e66 6572 7265 645f 6e6f 726d 616c 272c  nferred_normal',
+0001a490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a4a0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
+0001a4b0: 6572 7661 6c3d 7365 6c66 2e70 7265 6469  erval=self.predi
+0001a4c0: 6374 696f 6e5f 696e 7465 7276 616c 2c0d  ction_interval,.
+0001a4d0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+0001a4e0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+0001a4f0: 6564 6963 745f 7275 6e74 696d 6520 3d20  edict_runtime = 
+0001a500: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+0001a510: 652e 6e6f 7728 2920 2d20 7072 6564 6963  e.now() - predic
+0001a520: 7453 7461 7274 5469 6d65 0d0a 2020 2020  tStartTime..    
+0001a530: 2020 2020 2020 2020 7072 6564 6963 7469          predicti
+0001a540: 6f6e 203d 2050 7265 6469 6374 696f 6e4f  on = PredictionO
+0001a550: 626a 6563 7428 0d0a 2020 2020 2020 2020  bject(..        
+0001a560: 2020 2020 2020 2020 6d6f 6465 6c5f 6e61          model_na
+0001a570: 6d65 3d73 656c 662e 6e61 6d65 2c0d 0a20  me=self.name,.. 
+0001a580: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001a590: 6f72 6563 6173 745f 6c65 6e67 7468 3d73  orecast_length=s
+0001a5a0: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
+0001a5b0: 6774 682c 0d0a 2020 2020 2020 2020 2020  gth,..          
+0001a5c0: 2020 2020 2020 666f 7265 6361 7374 5f69        forecast_i
+0001a5d0: 6e64 6578 3d66 6f72 6563 6173 742e 696e  ndex=forecast.in
+0001a5e0: 6465 782c 0d0a 2020 2020 2020 2020 2020  dex,..          
+0001a5f0: 2020 2020 2020 666f 7265 6361 7374 5f63        forecast_c
+0001a600: 6f6c 756d 6e73 3d66 6f72 6563 6173 742e  olumns=forecast.
+0001a610: 636f 6c75 6d6e 732c 0d0a 2020 2020 2020  columns,..      
+0001a620: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
+0001a630: 666f 7265 6361 7374 3d6c 6f77 6572 5f66  forecast=lower_f
+0001a640: 6f72 6563 6173 742c 0d0a 2020 2020 2020  orecast,..      
+0001a650: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+0001a660: 7374 3d66 6f72 6563 6173 742c 0d0a 2020  st=forecast,..  
+0001a670: 2020 2020 2020 2020 2020 2020 2020 7570                up
+0001a680: 7065 725f 666f 7265 6361 7374 3d75 7070  per_forecast=upp
+0001a690: 6572 5f66 6f72 6563 6173 742c 0d0a 2020  er_forecast,..  
+0001a6a0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0001a6b0: 6564 6963 7469 6f6e 5f69 6e74 6572 7661  ediction_interva
+0001a6c0: 6c3d 7365 6c66 2e70 7265 6469 6374 696f  l=self.predictio
+0001a6d0: 6e5f 696e 7465 7276 616c 2c0d 0a20 2020  n_interval,..   
+0001a6e0: 2020 2020 2020 2020 2020 2020 2070 7265               pre
+0001a6f0: 6469 6374 5f72 756e 7469 6d65 3d70 7265  dict_runtime=pre
+0001a700: 6469 6374 5f72 756e 7469 6d65 2c0d 0a20  dict_runtime,.. 
+0001a710: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001a720: 6974 5f72 756e 7469 6d65 3d73 656c 662e  it_runtime=self.
+0001a730: 6669 745f 7275 6e74 696d 652c 0d0a 2020  fit_runtime,..  
+0001a740: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+0001a750: 6465 6c5f 7061 7261 6d65 7465 7273 3d73  del_parameters=s
+0001a760: 656c 662e 6765 745f 7061 7261 6d73 2829  elf.get_params()
+0001a770: 2c0d 0a20 2020 2020 2020 2020 2020 2029  ,..            )
+0001a780: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001a790: 7475 726e 2070 7265 6469 6374 696f 6e0d  turn prediction.
+0001a7a0: 0a0d 0a20 2020 2064 6566 2067 6574 5f6e  ...    def get_n
+0001a7b0: 6577 5f70 6172 616d 7328 7365 6c66 2c20  ew_params(self, 
+0001a7c0: 6d65 7468 6f64 3a20 7374 7220 3d20 2772  method: str = 'r
+0001a7d0: 616e 646f 6d27 293a 0d0a 2020 2020 2020  andom'):..      
+0001a7e0: 2020 2222 2252 6574 7572 6e20 6469 6374    """Return dict
+0001a7f0: 206f 6620 6e65 7720 7061 7261 6d65 7465   of new paramete
+0001a800: 7273 2066 6f72 2070 6172 616d 6574 6572  rs for parameter
+0001a810: 2074 756e 696e 672e 2222 220d 0a20 2020   tuning."""..   
+0001a820: 2020 2020 2069 6620 6d65 7468 6f64 203d       if method =
+0001a830: 3d20 2264 6565 7022 3a0d 0a20 2020 2020  = "deep":..     
+0001a840: 2020 2020 2020 2078 5f74 7261 6e73 666f         x_transfo
+0001a850: 726d 5f63 686f 6963 6520 3d20 7261 6e64  rm_choice = rand
+0001a860: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0001a870: 2020 2020 2020 2020 2020 2020 205b 4e6f               [No
+0001a880: 6e65 2c20 2746 6173 7449 4341 272c 2027  ne, 'FastICA', '
+0001a890: 4e79 7374 726f 656d 272c 2027 526d 5a65  Nystroem', 'RmZe
+0001a8a0: 726f 5661 7269 616e 6365 275d 2c0d 0a20  roVariance'],.. 
+0001a8b0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0001a8c0: 302e 392c 2030 2e30 332c 2030 2e30 332c  0.9, 0.03, 0.03,
+0001a8d0: 2030 2e30 345d 2c0d 0a20 2020 2020 2020   0.04],..       
+0001a8e0: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
+0001a8f0: 2020 2020 2020 2077 696e 646f 775f 6368         window_ch
+0001a900: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
+0001a910: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+0001a920: 2020 2020 2020 2020 5b4e 6f6e 652c 2033          [None, 3
+0001a930: 2c20 372c 2031 302c 2032 345d 2c20 5b30  , 7, 10, 24], [0
+0001a940: 2e37 2c20 302e 322c 2030 2e30 352c 2030  .7, 0.2, 0.05, 0
+0001a950: 2e30 352c 2030 2e30 355d 0d0a 2020 2020  .05, 0.05]..    
+0001a960: 2020 2020 2020 2020 295b 305d 0d0a 2020          )[0]..  
+0001a970: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
+0001a980: 6368 6f69 6365 203d 2067 656e 6572 6174  choice = generat
+0001a990: 655f 7265 6772 6573 736f 725f 7061 7261  e_regressor_para
+0001a9a0: 6d73 280d 0a20 2020 2020 2020 2020 2020  ms(..           
+0001a9b0: 2020 2020 206d 6f64 656c 5f64 6963 743d       model_dict=
+0001a9c0: 756e 6976 6172 6961 7465 5f6d 6f64 656c  univariate_model
+0001a9d0: 5f64 6963 742c 206d 6574 686f 643d 6d65  _dict, method=me
+0001a9e0: 7468 6f64 0d0a 2020 2020 2020 2020 2020  thod..          
+0001a9f0: 2020 290d 0a20 2020 2020 2020 2065 6c73    )..        els
+0001aa00: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001aa10: 785f 7472 616e 7366 6f72 6d5f 6368 6f69  x_transform_choi
+0001aa20: 6365 203d 2072 616e 646f 6d2e 6368 6f69  ce = random.choi
+0001aa30: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+0001aa40: 2020 2020 2020 5b4e 6f6e 652c 2027 4661        [None, 'Fa
+0001aa50: 7374 4943 4127 2c20 274e 7973 7472 6f65  stICA', 'Nystroe
+0001aa60: 6d27 2c20 2752 6d5a 6572 6f56 6172 6961  m', 'RmZeroVaria
+0001aa70: 6e63 6527 5d2c 0d0a 2020 2020 2020 2020  nce'],..        
+0001aa80: 2020 2020 2020 2020 5b31 2e30 2c20 302e          [1.0, 0.
+0001aa90: 302c 2030 2e30 2c20 302e 305d 2c0d 0a20  0, 0.0, 0.0],.. 
+0001aaa0: 2020 2020 2020 2020 2020 2029 5b30 5d0d             )[0].
+0001aab0: 0a20 2020 2020 2020 2020 2020 2077 696e  .            win
+0001aac0: 646f 775f 6368 6f69 6365 203d 2072 616e  dow_choice = ran
+0001aad0: 646f 6d2e 6368 6f69 6365 7328 5b4e 6f6e  dom.choices([Non
+0001aae0: 652c 2033 2c20 372c 2031 305d 2c20 5b30  e, 3, 7, 10], [0
+0001aaf0: 2e37 2c20 302e 322c 2030 2e30 352c 2030  .7, 0.2, 0.05, 0
+0001ab00: 2e30 355d 295b 305d 0d0a 2020 2020 2020  .05])[0]..      
+0001ab10: 2020 2020 2020 6d6f 6465 6c5f 6368 6f69        model_choi
+0001ab20: 6365 203d 2067 656e 6572 6174 655f 7265  ce = generate_re
+0001ab30: 6772 6573 736f 725f 7061 7261 6d73 280d  gressor_params(.
+0001ab40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ab50: 206d 6f64 656c 5f64 6963 743d 7b0d 0a20   model_dict={.. 
+0001ab60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab70: 2020 2027 456c 6173 7469 634e 6574 273a     'ElasticNet':
+0001ab80: 2030 2e32 2c0d 0a20 2020 2020 2020 2020   0.2,..         
+0001ab90: 2020 2020 2020 2020 2020 2027 4465 6369             'Deci
+0001aba0: 7369 6f6e 5472 6565 273a 2030 2e34 2c0d  sionTree': 0.4,.
+0001abb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001abc0: 2020 2020 2027 4661 7374 5269 6467 6527       'FastRidge'
+0001abd0: 3a20 302e 322c 0d0a 2020 2020 2020 2020  : 0.2,..        
+0001abe0: 2020 2020 2020 2020 2020 2020 274c 696e              'Lin
+0001abf0: 6561 7252 6567 7265 7373 696f 6e27 3a20  earRegression': 
+0001ac00: 302e 322c 0d0a 2020 2020 2020 2020 2020  0.2,..          
+0001ac10: 2020 2020 2020 2020 2020 2320 2745 7874            # 'Ext
+0001ac20: 7261 5472 6565 7327 3a20 302e 312c 0d0a  raTrees': 0.1,..
+0001ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac40: 7d2c 0d0a 2020 2020 2020 2020 2020 2020  },..            
+0001ac50: 2020 2020 6d65 7468 6f64 3d6d 6574 686f      method=metho
+0001ac60: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
+0001ac70: 290d 0a20 2020 2020 2020 2069 6620 6d65  )..        if me
+0001ac80: 7468 6f64 203d 3d20 276e 6575 7261 6c6e  thod == 'neuraln
+0001ac90: 6574 7327 3a0d 0a20 2020 2020 2020 2020  ets':..         
+0001aca0: 2020 2070 7269 6e74 2827 606e 6575 7261     print('`neura
+0001acb0: 6c6e 6574 7360 206d 6f64 656c 5f6d 6f64  lnets` model_mod
+0001acc0: 6520 646f 6573 206e 6f74 2061 7070 6c79  e does not apply
+0001acd0: 2074 6f20 556e 6976 6172 6961 7465 5265   to UnivariateRe
+0001ace0: 6772 6573 7369 6f6e 2729 0d0a 2020 2020  gression')..    
+0001acf0: 2020 2020 2020 2020 6d65 7468 6f64 203d          method =
+0001ad00: 2027 6465 6570 270d 0a0d 0a20 2020 2020   'deep'....     
+0001ad10: 2020 206d 6561 6e5f 726f 6c6c 696e 675f     mean_rolling_
+0001ad20: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+0001ad30: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+0001ad40: 0d0a 2020 2020 2020 2020 2020 2020 5b4e  ..            [N
+0001ad50: 6f6e 652c 2035 2c20 372c 2031 322c 2033  one, 5, 7, 12, 3
+0001ad60: 305d 2c20 5b30 2e36 2c20 302e 312c 2030  0], [0.6, 0.1, 0
+0001ad70: 2e31 2c20 302e 312c 2030 2e31 5d0d 0a20  .1, 0.1, 0.1].. 
+0001ad80: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+0001ad90: 2020 2020 2069 6620 6d65 616e 5f72 6f6c       if mean_rol
+0001ada0: 6c69 6e67 5f70 6572 696f 6473 5f63 686f  ling_periods_cho
+0001adb0: 6963 6520 6973 206e 6f74 204e 6f6e 653a  ice is not None:
+0001adc0: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
+0001add0: 6364 5f70 6572 696f 6473 5f63 686f 6963  cd_periods_choic
+0001ade0: 6520 3d20 7365 6173 6f6e 616c 5f69 6e74  e = seasonal_int
+0001adf0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+0001ae00: 6966 206d 6163 645f 7065 7269 6f64 735f  if macd_periods_
+0001ae10: 6368 6f69 6365 203d 3d20 6d65 616e 5f72  choice == mean_r
+0001ae20: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
+0001ae30: 686f 6963 653a 0d0a 2020 2020 2020 2020  hoice:..        
+0001ae40: 2020 2020 2020 2020 6d61 6364 5f70 6572          macd_per
+0001ae50: 696f 6473 5f63 686f 6963 6520 3d20 6d65  iods_choice = me
+0001ae60: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
+0001ae70: 6473 5f63 686f 6963 6520 2b20 3130 0d0a  ds_choice + 10..
+0001ae80: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+0001ae90: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
+0001aea0: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+0001aeb0: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+0001aec0: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
+0001aed0: 6473 5f63 686f 6963 6520 3d20 7261 6e64  ds_choice = rand
+0001aee0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+0001aef0: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
+0001af00: 352c 2037 2c20 3130 2c20 3330 5d2c 205b  5, 7, 10, 30], [
+0001af10: 302e 362c 2030 2e31 2c20 302e 312c 2030  0.6, 0.1, 0.1, 0
+0001af20: 2e31 2c20 302e 315d 0d0a 2020 2020 2020  .1, 0.1]..      
+0001af30: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
+0001af40: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
+0001af50: 6f64 735f 6368 6f69 6365 203d 2072 616e  ods_choice = ran
+0001af60: 646f 6d2e 6368 6f69 6365 7328 5b4e 6f6e  dom.choices([Non
+0001af70: 652c 2073 6561 736f 6e61 6c5f 696e 7428  e, seasonal_int(
+0001af80: 295d 2c20 5b30 2e35 2c20 302e 355d 295b  )], [0.5, 0.5])[
+0001af90: 0d0a 2020 2020 2020 2020 2020 2020 300d  ..            0.
+0001afa0: 0a20 2020 2020 2020 205d 0d0a 2020 2020  .        ]..    
+0001afb0: 2020 2020 6d69 6e5f 726f 6c6c 696e 675f      min_rolling_
+0001afc0: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+0001afd0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+0001afe0: 5b4e 6f6e 652c 2073 6561 736f 6e61 6c5f  [None, seasonal_
+0001aff0: 696e 7428 295d 2c20 5b30 2e35 2c20 302e  int()], [0.5, 0.
+0001b000: 355d 295b 0d0a 2020 2020 2020 2020 2020  5])[..          
+0001b010: 2020 300d 0a20 2020 2020 2020 205d 0d0a    0..        ]..
+0001b020: 2020 2020 2020 2020 6c61 675f 7065 7269          lag_peri
+0001b030: 6f64 735f 6368 6f69 6365 203d 2073 6561  ods_choice = sea
+0001b040: 736f 6e61 6c5f 696e 7428 2920 2d20 310d  sonal_int() - 1.
+0001b050: 0a20 2020 2020 2020 206c 6167 5f70 6572  .        lag_per
+0001b060: 696f 6473 5f63 686f 6963 6520 3d20 3220  iods_choice = 2 
+0001b070: 6966 206c 6167 5f70 6572 696f 6473 5f63  if lag_periods_c
+0001b080: 686f 6963 6520 3c20 3220 656c 7365 206c  hoice < 2 else l
+0001b090: 6167 5f70 6572 696f 6473 5f63 686f 6963  ag_periods_choic
+0001b0a0: 650d 0a20 2020 2020 2020 2065 776d 5f63  e..        ewm_c
+0001b0b0: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
+0001b0c0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
+0001b0d0: 2020 2020 205b 4e6f 6e65 2c20 302e 312c       [None, 0.1,
+0001b0e0: 2030 2e32 2c20 302e 352c 2030 2e38 5d2c   0.2, 0.5, 0.8],
+0001b0f0: 205b 302e 3735 2c20 302e 3035 2c20 302e   [0.75, 0.05, 0.
+0001b100: 312c 2030 2e31 2c20 302e 3035 5d0d 0a20  1, 0.1, 0.05].. 
+0001b110: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+0001b120: 2020 2020 2065 776d 5f76 6172 5f61 6c70       ewm_var_alp
+0001b130: 6861 203d 2072 616e 646f 6d2e 6368 6f69  ha = random.choi
+0001b140: 6365 7328 0d0a 2020 2020 2020 2020 2020  ces(..          
+0001b150: 2020 5b4e 6f6e 652c 2030 2e30 352c 2030    [None, 0.05, 0
+0001b160: 2e31 2c20 302e 322c 2030 2e35 2c20 302e  .1, 0.2, 0.5, 0.
+0001b170: 385d 2c20 5b30 2e37 2c20 302e 3031 2c20  8], [0.7, 0.01, 
+0001b180: 302e 3035 2c20 302e 312c 2030 2e31 2c20  0.05, 0.1, 0.1, 
+0001b190: 302e 3035 5d0d 0a20 2020 2020 2020 2029  0.05]..        )
+0001b1a0: 5b30 5d0d 0a20 2020 2020 2020 2061 6273  [0]..        abs
+0001b1b0: 5f65 6e65 7267 795f 6368 6f69 6365 203d  _energy_choice =
+0001b1c0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+0001b1d0: 5b54 7275 652c 2046 616c 7365 5d2c 205b  [True, False], [
+0001b1e0: 302e 3035 2c20 302e 3935 5d29 5b30 5d0d  0.05, 0.95])[0].
+0001b1f0: 0a20 2020 2020 2020 2072 6f6c 6c69 6e67  .        rolling
+0001b200: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+0001b210: 735f 6368 6f69 6365 203d 2072 616e 646f  s_choice = rando
+0001b220: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+0001b230: 2020 2020 2020 2020 5b4e 6f6e 652c 2032          [None, 2
+0001b240: 2c20 372c 2031 322c 2033 305d 2c20 5b30  , 7, 12, 30], [0
+0001b250: 2e38 362c 2030 2e30 312c 2030 2e30 312c  .86, 0.01, 0.01,
+0001b260: 2030 2e30 312c 2030 2e30 315d 0d0a 2020   0.01, 0.01]..  
+0001b270: 2020 2020 2020 295b 305d 0d0a 2020 2020        )[0]..    
+0001b280: 2020 2020 6164 645f 6461 7465 5f70 6172      add_date_par
+0001b290: 745f 6368 6f69 6365 203d 2072 616e 646f  t_choice = rando
+0001b2a0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+0001b2b0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+0001b2c0: 2020 2020 2020 2020 2020 204e 6f6e 652c             None,
+0001b2d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b2e0: 2020 2773 696d 706c 6527 2c0d 0a20 2020    'simple',..   
+0001b2f0: 2020 2020 2020 2020 2020 2020 2027 6578               'ex
+0001b300: 7061 6e64 6564 272c 0d0a 2020 2020 2020  panded',..      
+0001b310: 2020 2020 2020 2020 2020 2772 6563 7572            'recur
+0001b320: 7269 6e67 272c 0d0a 2020 2020 2020 2020  ring',..        
+0001b330: 2020 2020 2020 2020 2273 696d 706c 655f          "simple_
+0001b340: 3222 2c0d 0a20 2020 2020 2020 2020 2020  2",..           
+0001b350: 2020 2020 2022 7369 6d70 6c65 5f32 5f70       "simple_2_p
+0001b360: 6f6c 7922 2c0d 0a20 2020 2020 2020 2020  oly",..         
+0001b370: 2020 2020 2020 2022 7369 6d70 6c65 5f62         "simple_b
+0001b380: 696e 6172 697a 6564 222c 0d0a 2020 2020  inarized",..    
+0001b390: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
+0001b3a0: 2020 2020 2020 2020 5b30 2e38 2c20 302e          [0.8, 0.
+0001b3b0: 3035 2c20 302e 312c 2030 2e31 2c20 302e  05, 0.1, 0.1, 0.
+0001b3c0: 3035 2c20 302e 3035 2c20 302e 3035 5d2c  05, 0.05, 0.05],
+0001b3d0: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+0001b3e0: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
+0001b3f0: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
+0001b400: 6368 6f69 6365 7328 5b54 7275 652c 2046  choices([True, F
+0001b410: 616c 7365 5d2c 205b 302e 322c 2030 2e38  alse], [0.2, 0.8
+0001b420: 5d29 5b30 5d0d 0a20 2020 2020 2020 2070  ])[0]..        p
+0001b430: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
+0001b440: 5f63 686f 6963 6520 3d20 4e6f 6e65 0d0a  _choice = None..
+0001b450: 0d0a 2020 2020 2020 2020 6966 2022 7265  ..        if "re
+0001b460: 6772 6573 736f 7222 2069 6e20 6d65 7468  gressor" in meth
+0001b470: 6f64 3a0d 0a20 2020 2020 2020 2020 2020  od:..           
+0001b480: 2072 6567 7265 7373 696f 6e5f 6368 6f69   regression_choi
+0001b490: 6365 203d 2022 5573 6572 220d 0a20 2020  ce = "User"..   
+0001b4a0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+0001b4b0: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
+0001b4c0: 6f6e 5f63 686f 6963 6520 3d20 7261 6e64  on_choice = rand
+0001b4d0: 6f6d 2e63 686f 6963 6573 285b 4e6f 6e65  om.choices([None
+0001b4e0: 2c20 2755 7365 7227 5d2c 205b 302e 372c  , 'User'], [0.7,
+0001b4f0: 2030 2e33 5d29 5b30 5d0d 0a0d 0a20 2020   0.3])[0]....   
+0001b500: 2020 2020 2070 6172 616d 6574 6572 5f64       parameter_d
+0001b510: 6963 7420 3d20 7b0d 0a20 2020 2020 2020  ict = {..       
+0001b520: 2020 2020 2027 7265 6772 6573 7369 6f6e       'regression
+0001b530: 5f6d 6f64 656c 273a 206d 6f64 656c 5f63  _model': model_c
+0001b540: 686f 6963 652c 0d0a 2020 2020 2020 2020  hoice,..        
+0001b550: 2020 2020 2768 6f6c 6964 6179 273a 2068      'holiday': h
+0001b560: 6f6c 6964 6179 5f63 686f 6963 652c 0d0a  oliday_choice,..
+0001b570: 2020 2020 2020 2020 2020 2020 276d 6561              'mea
+0001b580: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0001b590: 7327 3a20 6d65 616e 5f72 6f6c 6c69 6e67  s': mean_rolling
+0001b5a0: 5f70 6572 696f 6473 5f63 686f 6963 652c  _periods_choice,
+0001b5b0: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
+0001b5c0: 6163 645f 7065 7269 6f64 7327 3a20 6d61  acd_periods': ma
+0001b5d0: 6364 5f70 6572 696f 6473 5f63 686f 6963  cd_periods_choic
+0001b5e0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0001b5f0: 2773 7464 5f72 6f6c 6c69 6e67 5f70 6572  'std_rolling_per
+0001b600: 696f 6473 273a 2073 7464 5f72 6f6c 6c69  iods': std_rolli
+0001b610: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+0001b620: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0001b630: 276d 6178 5f72 6f6c 6c69 6e67 5f70 6572  'max_rolling_per
+0001b640: 696f 6473 273a 206d 6178 5f72 6f6c 6c69  iods': max_rolli
+0001b650: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+0001b660: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0001b670: 276d 696e 5f72 6f6c 6c69 6e67 5f70 6572  'min_rolling_per
+0001b680: 696f 6473 273a 206d 696e 5f72 6f6c 6c69  iods': min_rolli
+0001b690: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+0001b6a0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0001b6b0: 2265 776d 5f76 6172 5f61 6c70 6861 223a  "ewm_var_alpha":
+0001b6c0: 2065 776d 5f76 6172 5f61 6c70 6861 2c0d   ewm_var_alpha,.
+0001b6d0: 0a20 2020 2020 2020 2020 2020 2027 6577  .            'ew
+0001b6e0: 6d5f 616c 7068 6127 3a20 6577 6d5f 6368  m_alpha': ewm_ch
+0001b6f0: 6f69 6365 2c0d 0a20 2020 2020 2020 2020  oice,..         
+0001b700: 2020 2027 6164 6469 7469 6f6e 616c 5f6c     'additional_l
+0001b710: 6167 5f70 6572 696f 6473 273a 206c 6167  ag_periods': lag
+0001b720: 5f70 6572 696f 6473 5f63 686f 6963 652c  _periods_choice,
+0001b730: 0d0a 2020 2020 2020 2020 2020 2020 2761  ..            'a
+0001b740: 6273 5f65 6e65 7267 7927 3a20 6162 735f  bs_energy': abs_
+0001b750: 656e 6572 6779 5f63 686f 6963 652c 0d0a  energy_choice,..
+0001b760: 2020 2020 2020 2020 2020 2020 2772 6f6c              'rol
+0001b770: 6c69 6e67 5f61 7574 6f63 6f72 725f 7065  ling_autocorr_pe
+0001b780: 7269 6f64 7327 3a20 726f 6c6c 696e 675f  riods': rolling_
+0001b790: 6175 746f 636f 7272 5f70 6572 696f 6473  autocorr_periods
+0001b7a0: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
+0001b7b0: 2020 2020 2020 2761 6464 5f64 6174 655f        'add_date_
+0001b7c0: 7061 7274 273a 2061 6464 5f64 6174 655f  part': add_date_
+0001b7d0: 7061 7274 5f63 686f 6963 652c 0d0a 2020  part_choice,..  
+0001b7e0: 2020 2020 2020 2020 2020 2770 6f6c 796e            'polyn
+0001b7f0: 6f6d 6961 6c5f 6465 6772 6565 273a 2070  omial_degree': p
+0001b800: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
+0001b810: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
+0001b820: 2020 2020 2020 2778 5f74 7261 6e73 666f        'x_transfo
+0001b830: 726d 273a 2078 5f74 7261 6e73 666f 726d  rm': x_transform
+0001b840: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
+0001b850: 2020 2020 2020 2772 6567 7265 7373 696f        'regressio
+0001b860: 6e5f 7479 7065 273a 2072 6567 7265 7373  n_type': regress
+0001b870: 696f 6e5f 6368 6f69 6365 2c0d 0a20 2020  ion_choice,..   
+0001b880: 2020 2020 2020 2020 2027 7769 6e64 6f77           'window
+0001b890: 273a 2077 696e 646f 775f 6368 6f69 6365  ': window_choice
+0001b8a0: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
+0001b8b0: 2020 2020 2020 7265 7475 726e 2070 6172        return par
+0001b8c0: 616d 6574 6572 5f64 6963 740d 0a0d 0a20  ameter_dict.... 
+0001b8d0: 2020 2064 6566 2067 6574 5f70 6172 616d     def get_param
+0001b8e0: 7328 7365 6c66 293a 0d0a 2020 2020 2020  s(self):..      
+0001b8f0: 2020 2222 2252 6574 7572 6e20 6469 6374    """Return dict
+0001b900: 206f 6620 6375 7272 656e 7420 7061 7261   of current para
+0001b910: 6d65 7465 7273 2e22 2222 0d0a 2020 2020  meters."""..    
+0001b920: 2020 2020 7061 7261 6d65 7465 725f 6469      parameter_di
+0001b930: 6374 203d 207b 0d0a 2020 2020 2020 2020  ct = {..        
+0001b940: 2020 2020 2772 6567 7265 7373 696f 6e5f      'regression_
+0001b950: 6d6f 6465 6c27 3a20 7365 6c66 2e72 6567  model': self.reg
+0001b960: 7265 7373 696f 6e5f 6d6f 6465 6c2c 0d0a  ression_model,..
+0001b970: 2020 2020 2020 2020 2020 2020 2768 6f6c              'hol
+0001b980: 6964 6179 273a 2073 656c 662e 686f 6c69  iday': self.holi
+0001b990: 6461 792c 0d0a 2020 2020 2020 2020 2020  day,..          
+0001b9a0: 2020 276d 6561 6e5f 726f 6c6c 696e 675f    'mean_rolling_
+0001b9b0: 7065 7269 6f64 7327 3a20 7365 6c66 2e6d  periods': self.m
+0001b9c0: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
+0001b9d0: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
+0001b9e0: 2020 276d 6163 645f 7065 7269 6f64 7327    'macd_periods'
+0001b9f0: 3a20 7365 6c66 2e6d 6163 645f 7065 7269  : self.macd_peri
+0001ba00: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
+0001ba10: 2020 2773 7464 5f72 6f6c 6c69 6e67 5f70    'std_rolling_p
+0001ba20: 6572 696f 6473 273a 2073 656c 662e 7374  eriods': self.st
+0001ba30: 645f 726f 6c6c 696e 675f 7065 7269 6f64  d_rolling_period
+0001ba40: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0001ba50: 276d 6178 5f72 6f6c 6c69 6e67 5f70 6572  'max_rolling_per
+0001ba60: 696f 6473 273a 2073 656c 662e 6d61 785f  iods': self.max_
+0001ba70: 726f 6c6c 696e 675f 7065 7269 6f64 732c  rolling_periods,
+0001ba80: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
+0001ba90: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
+0001baa0: 6473 273a 2073 656c 662e 6d69 6e5f 726f  ds': self.min_ro
+0001bab0: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
+0001bac0: 2020 2020 2020 2020 2020 2020 2265 776d              "ewm
+0001bad0: 5f76 6172 5f61 6c70 6861 223a 2073 656c  _var_alpha": sel
+0001bae0: 662e 6577 6d5f 7661 725f 616c 7068 612c  f.ewm_var_alpha,
+0001baf0: 0d0a 2020 2020 2020 2020 2020 2020 2765  ..            'e
+0001bb00: 776d 5f61 6c70 6861 273a 2073 656c 662e  wm_alpha': self.
+0001bb10: 6577 6d5f 616c 7068 612c 0d0a 2020 2020  ewm_alpha,..    
+0001bb20: 2020 2020 2020 2020 2761 6464 6974 696f          'additio
+0001bb30: 6e61 6c5f 6c61 675f 7065 7269 6f64 7327  nal_lag_periods'
+0001bb40: 3a20 7365 6c66 2e61 6464 6974 696f 6e61  : self.additiona
+0001bb50: 6c5f 6c61 675f 7065 7269 6f64 732c 0d0a  l_lag_periods,..
+0001bb60: 2020 2020 2020 2020 2020 2020 2761 6273              'abs
+0001bb70: 5f65 6e65 7267 7927 3a20 7365 6c66 2e61  _energy': self.a
+0001bb80: 6273 5f65 6e65 7267 792c 0d0a 2020 2020  bs_energy,..    
+0001bb90: 2020 2020 2020 2020 2772 6f6c 6c69 6e67          'rolling
+0001bba0: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+0001bbb0: 7327 3a20 7365 6c66 2e72 6f6c 6c69 6e67  s': self.rolling
+0001bbc0: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+0001bbd0: 732c 0d0a 2020 2020 2020 2020 2020 2020  s,..            
+0001bbe0: 2761 6464 5f64 6174 655f 7061 7274 273a  'add_date_part':
+0001bbf0: 2073 656c 662e 6164 645f 6461 7465 5f70   self.add_date_p
+0001bc00: 6172 742c 0d0a 2020 2020 2020 2020 2020  art,..          
+0001bc10: 2020 2770 6f6c 796e 6f6d 6961 6c5f 6465    'polynomial_de
+0001bc20: 6772 6565 273a 2073 656c 662e 706f 6c79  gree': self.poly
+0001bc30: 6e6f 6d69 616c 5f64 6567 7265 652c 0d0a  nomial_degree,..
+0001bc40: 2020 2020 2020 2020 2020 2020 2778 5f74              'x_t
+0001bc50: 7261 6e73 666f 726d 273a 2073 656c 662e  ransform': self.
+0001bc60: 785f 7472 616e 7366 6f72 6d2c 0d0a 2020  x_transform,..  
+0001bc70: 2020 2020 2020 2020 2020 2772 6567 7265            'regre
+0001bc80: 7373 696f 6e5f 7479 7065 273a 2073 656c  ssion_type': sel
+0001bc90: 662e 7265 6772 6573 7369 6f6e 5f74 7970  f.regression_typ
+0001bca0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+0001bcb0: 2777 696e 646f 7727 3a20 7365 6c66 2e77  'window': self.w
+0001bcc0: 696e 646f 772c 0d0a 2020 2020 2020 2020  indow,..        
+0001bcd0: 7d0d 0a20 2020 2020 2020 2072 6574 7572  }..        retur
+0001bce0: 6e20 7061 7261 6d65 7465 725f 6469 6374  n parameter_dict
+0001bcf0: 0d0a 0d0a 0d0a 636c 6173 7320 4d75 6c74  ......class Mult
+0001bd00: 6976 6172 6961 7465 5265 6772 6573 7369  ivariateRegressi
+0001bd10: 6f6e 284d 6f64 656c 4f62 6a65 6374 293a  on(ModelObject):
+0001bd20: 0d0a 2020 2020 2222 2252 6567 7265 7373  ..    """Regress
+0001bd30: 696f 6e2d 6672 616d 6564 2061 7070 726f  ion-framed appro
+0001bd40: 6163 6820 746f 2066 6f72 6563 6173 7469  ach to forecasti
+0001bd50: 6e67 2075 7369 6e67 2073 6b6c 6561 726e  ng using sklearn
+0001bd60: 2e0d 0a20 2020 2041 206d 756c 7469 6172  ...    A multiar
+0001bd70: 6961 7465 2076 6572 7369 6f6e 206f 6620  iate version of 
+0001bd80: 726f 6c6c 696e 6720 7265 6772 6573 7369  rolling regressi
+0001bd90: 6f6e 3a20 6965 2065 6163 6820 7365 7269  on: ie each seri
+0001bda0: 6573 2069 7320 6c61 6767 6564 2069 6e64  es is lagged ind
+0001bdb0: 6570 656e 6465 6e74 6c79 2062 7574 206d  ependently but m
+0001bdc0: 6f64 656c 6564 2074 6f67 6574 6865 720d  odeled together.
+0001bdd0: 0a0d 0a20 2020 2041 7267 733a 0d0a 2020  ...    Args:..  
+0001bde0: 2020 2020 2020 6e61 6d65 2028 7374 7229        name (str)
+0001bdf0: 3a20 5374 7269 6e67 2074 6f20 6964 656e  : String to iden
+0001be00: 7469 6679 2063 6c61 7373 0d0a 2020 2020  tify class..    
+0001be10: 2020 2020 6672 6571 7565 6e63 7920 2873      frequency (s
+0001be20: 7472 293a 2053 7472 696e 6720 616c 6961  tr): String alia
+0001be30: 7320 6f66 2064 6174 6574 696d 6520 696e  s of datetime in
+0001be40: 6465 7820 6672 6571 7565 6e63 7920 6f72  dex frequency or
+0001be50: 2065 6c73 6520 2769 6e66 6572 270d 0a20   else 'infer'.. 
+0001be60: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+0001be70: 6e5f 696e 7465 7276 616c 2028 666c 6f61  n_interval (floa
+0001be80: 7429 3a20 436f 6e66 6964 656e 6365 2069  t): Confidence i
+0001be90: 6e74 6572 7661 6c20 666f 7220 7072 6f62  nterval for prob
+0001bea0: 6162 696c 6973 7469 6320 666f 7265 6361  abilistic foreca
+0001beb0: 7374 0d0a 2020 2020 2020 2020 686f 6c69  st..        holi
+0001bec0: 6461 7920 2862 6f6f 6c29 3a20 4966 2074  day (bool): If t
+0001bed0: 7275 652c 2069 6e63 6c75 6465 2068 6f6c  rue, include hol
+0001bee0: 6964 6179 2066 6c61 6773 0d0a 2020 2020  iday flags..    
+0001bef0: 2020 2020 7265 6772 6573 7369 6f6e 5f74      regression_t
+0001bf00: 7970 6520 2873 7472 293a 2074 7970 6520  ype (str): type 
+0001bf10: 6f66 2072 6567 7265 7373 696f 6e20 284e  of regression (N
+0001bf20: 6f6e 652c 2027 5573 6572 2729 0d0a 0d0a  one, 'User')....
+0001bf30: 2020 2020 2222 220d 0a0d 0a20 2020 2064      """....    d
+0001bf40: 6566 205f 5f69 6e69 745f 5f28 0d0a 2020  ef __init__(..  
+0001bf50: 2020 2020 2020 7365 6c66 2c0d 0a20 2020        self,..   
+0001bf60: 2020 2020 206e 616d 653a 2073 7472 203d       name: str =
+0001bf70: 2022 4d75 6c74 6976 6172 6961 7465 5265   "MultivariateRe
+0001bf80: 6772 6573 7369 6f6e 222c 0d0a 2020 2020  gression",..    
+0001bf90: 2020 2020 6672 6571 7565 6e63 793a 2073      frequency: s
+0001bfa0: 7472 203d 2027 696e 6665 7227 2c0d 0a20  tr = 'infer',.. 
+0001bfb0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
+0001bfc0: 6e5f 696e 7465 7276 616c 3a20 666c 6f61  n_interval: floa
+0001bfd0: 7420 3d20 302e 392c 0d0a 2020 2020 2020  t = 0.9,..      
+0001bfe0: 2020 7265 6772 6573 7369 6f6e 5f74 7970    regression_typ
+0001bff0: 653a 2073 7472 203d 204e 6f6e 652c 0d0a  e: str = None,..
+0001c000: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
+0001c010: 636f 756e 7472 793a 2073 7472 203d 2027  country: str = '
+0001c020: 5553 272c 0d0a 2020 2020 2020 2020 7665  US',..        ve
+0001c030: 7262 6f73 653a 2069 6e74 203d 2030 2c0d  rbose: int = 0,.
+0001c040: 0a20 2020 2020 2020 2072 616e 646f 6d5f  .        random_
+0001c050: 7365 6564 3a20 696e 7420 3d20 3230 3230  seed: int = 2020
+0001c060: 2c0d 0a20 2020 2020 2020 2066 6f72 6563  ,..        forec
+0001c070: 6173 745f 6c65 6e67 7468 3a20 696e 7420  ast_length: int 
+0001c080: 3d20 372c 0d0a 2020 2020 2020 2020 7265  = 7,..        re
+0001c090: 6772 6573 7369 6f6e 5f6d 6f64 656c 3a20  gression_model: 
+0001c0a0: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
+0001c0b0: 2020 2020 2020 226d 6f64 656c 223a 2027        "model": '
+0001c0c0: 5261 6e64 6f6d 466f 7265 7374 272c 0d0a  RandomForest',..
+0001c0d0: 2020 2020 2020 2020 2020 2020 226d 6f64              "mod
+0001c0e0: 656c 5f70 6172 616d 7322 3a20 7b7d 2c0d  el_params": {},.
+0001c0f0: 0a20 2020 2020 2020 207d 2c0d 0a20 2020  .        },..   
+0001c100: 2020 2020 2068 6f6c 6964 6179 3a20 626f       holiday: bo
+0001c110: 6f6c 203d 2046 616c 7365 2c0d 0a20 2020  ol = False,..   
+0001c120: 2020 2020 206d 6561 6e5f 726f 6c6c 696e       mean_rollin
+0001c130: 675f 7065 7269 6f64 733a 2069 6e74 203d  g_periods: int =
+0001c140: 2033 302c 0d0a 2020 2020 2020 2020 6d61   30,..        ma
+0001c150: 6364 5f70 6572 696f 6473 3a20 696e 7420  cd_periods: int 
+0001c160: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+0001c170: 2073 7464 5f72 6f6c 6c69 6e67 5f70 6572   std_rolling_per
+0001c180: 696f 6473 3a20 696e 7420 3d20 372c 0d0a  iods: int = 7,..
+0001c190: 2020 2020 2020 2020 6d61 785f 726f 6c6c          max_roll
+0001c1a0: 696e 675f 7065 7269 6f64 733a 2069 6e74  ing_periods: int
+0001c1b0: 203d 2037 2c0d 0a20 2020 2020 2020 206d   = 7,..        m
+0001c1c0: 696e 5f72 6f6c 6c69 6e67 5f70 6572 696f  in_rolling_perio
+0001c1d0: 6473 3a20 696e 7420 3d20 372c 0d0a 2020  ds: int = 7,..  
+0001c1e0: 2020 2020 2020 6577 6d5f 7661 725f 616c        ewm_var_al
+0001c1f0: 7068 613a 2066 6c6f 6174 203d 204e 6f6e  pha: float = Non
+0001c200: 652c 0d0a 2020 2020 2020 2020 7175 616e  e,..        quan
+0001c210: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
+0001c220: 6572 696f 6473 3a20 696e 7420 3d20 4e6f  eriods: int = No
+0001c230: 6e65 2c0d 0a20 2020 2020 2020 2071 7561  ne,..        qua
+0001c240: 6e74 696c 6531 305f 726f 6c6c 696e 675f  ntile10_rolling_
+0001c250: 7065 7269 6f64 733a 2069 6e74 203d 204e  periods: int = N
+0001c260: 6f6e 652c 0d0a 2020 2020 2020 2020 6577  one,..        ew
+0001c270: 6d5f 616c 7068 613a 2066 6c6f 6174 203d  m_alpha: float =
+0001c280: 2030 2e35 2c0d 0a20 2020 2020 2020 2061   0.5,..        a
+0001c290: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
+0001c2a0: 7269 6f64 733a 2069 6e74 203d 204e 6f6e  riods: int = Non
+0001c2b0: 652c 0d0a 2020 2020 2020 2020 6162 735f  e,..        abs_
+0001c2c0: 656e 6572 6779 3a20 626f 6f6c 203d 2046  energy: bool = F
+0001c2d0: 616c 7365 2c0d 0a20 2020 2020 2020 2072  alse,..        r
+0001c2e0: 6f6c 6c69 6e67 5f61 7574 6f63 6f72 725f  olling_autocorr_
+0001c2f0: 7065 7269 6f64 733a 2069 6e74 203d 204e  periods: int = N
+0001c300: 6f6e 652c 0d0a 2020 2020 2020 2020 6e6f  one,..        no
+0001c310: 6e7a 6572 6f5f 6c61 7374 5f6e 3a20 696e  nzero_last_n: in
+0001c320: 7420 3d20 4e6f 6e65 2c0d 0a20 2020 2020  t = None,..     
+0001c330: 2020 2064 6174 6570 6172 745f 6d65 7468     datepart_meth
+0001c340: 6f64 3a20 7374 7220 3d20 4e6f 6e65 2c0d  od: str = None,.
+0001c350: 0a20 2020 2020 2020 2070 6f6c 796e 6f6d  .        polynom
+0001c360: 6961 6c5f 6465 6772 6565 3a20 696e 7420  ial_degree: int 
+0001c370: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+0001c380: 2077 696e 646f 773a 2069 6e74 203d 2035   window: int = 5
+0001c390: 2c0d 0a20 2020 2020 2020 2070 726f 6261  ,..        proba
+0001c3a0: 6269 6c69 7374 6963 3a20 626f 6f6c 203d  bilistic: bool =
+0001c3b0: 2046 616c 7365 2c0d 0a20 2020 2020 2020   False,..       
+0001c3c0: 2073 6361 6c65 5f66 756c 6c5f 583a 2062   scale_full_X: b
+0001c3d0: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
+0001c3e0: 2020 2020 2020 7175 616e 7469 6c65 5f70        quantile_p
+0001c3f0: 6172 616d 733a 2064 6963 7420 3d20 7b0d  arams: dict = {.
+0001c400: 0a20 2020 2020 2020 2020 2020 2027 6c65  .            'le
+0001c410: 6172 6e69 6e67 5f72 6174 6527 3a20 302e  arning_rate': 0.
+0001c420: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
+0001c430: 276d 6178 5f64 6570 7468 273a 2032 302c  'max_depth': 20,
+0001c440: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
+0001c450: 696e 5f73 616d 706c 6573 5f6c 6561 6627  in_samples_leaf'
+0001c460: 3a20 342c 0d0a 2020 2020 2020 2020 2020  : 4,..          
+0001c470: 2020 276d 696e 5f73 616d 706c 6573 5f73    'min_samples_s
+0001c480: 706c 6974 273a 2035 2c0d 0a20 2020 2020  plit': 5,..     
+0001c490: 2020 2020 2020 2027 6e5f 6573 7469 6d61         'n_estima
+0001c4a0: 746f 7273 273a 2032 3530 2c0d 0a20 2020  tors': 250,..   
+0001c4b0: 2020 2020 207d 2c0d 0a20 2020 2020 2020       },..       
+0001c4c0: 2063 6f69 6e74 6567 7261 7469 6f6e 3a20   cointegration: 
+0001c4d0: 7374 7220 3d20 4e6f 6e65 2c0d 0a20 2020  str = None,..   
+0001c4e0: 2020 2020 2063 6f69 6e74 6567 7261 7469       cointegrati
+0001c4f0: 6f6e 5f6c 6167 3a20 696e 7420 3d20 312c  on_lag: int = 1,
+0001c500: 0d0a 2020 2020 2020 2020 7365 7269 6573  ..        series
+0001c510: 5f68 6173 683a 2062 6f6f 6c20 3d20 4661  _hash: bool = Fa
+0001c520: 6c73 652c 0d0a 2020 2020 2020 2020 6e5f  lse,..        n_
+0001c530: 6a6f 6273 3a20 696e 7420 3d20 2d31 2c0d  jobs: int = -1,.
+0001c540: 0a20 2020 2020 2020 202a 2a6b 7761 7267  .        **kwarg
+0001c550: 732c 0d0a 2020 2020 293a 0d0a 2020 2020  s,..    ):..    
+0001c560: 2020 2020 4d6f 6465 6c4f 626a 6563 742e      ModelObject.
+0001c570: 5f5f 696e 6974 5f5f 280d 0a20 2020 2020  __init__(..     
+0001c580: 2020 2020 2020 2073 656c 662c 0d0a 2020         self,..  
+0001c590: 2020 2020 2020 2020 2020 6e61 6d65 2c0d            name,.
+0001c5a0: 0a20 2020 2020 2020 2020 2020 2066 7265  .            fre
+0001c5b0: 7175 656e 6379 2c0d 0a20 2020 2020 2020  quency,..       
+0001c5c0: 2020 2020 2070 7265 6469 6374 696f 6e5f       prediction_
+0001c5d0: 696e 7465 7276 616c 2c0d 0a20 2020 2020  interval,..     
+0001c5e0: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
+0001c5f0: 6e5f 7479 7065 3d72 6567 7265 7373 696f  n_type=regressio
+0001c600: 6e5f 7479 7065 2c0d 0a20 2020 2020 2020  n_type,..       
+0001c610: 2020 2020 2068 6f6c 6964 6179 5f63 6f75       holiday_cou
+0001c620: 6e74 7279 3d68 6f6c 6964 6179 5f63 6f75  ntry=holiday_cou
+0001c630: 6e74 7279 2c0d 0a20 2020 2020 2020 2020  ntry,..         
+0001c640: 2020 2072 616e 646f 6d5f 7365 6564 3d72     random_seed=r
+0001c650: 616e 646f 6d5f 7365 6564 2c0d 0a20 2020  andom_seed,..   
+0001c660: 2020 2020 2020 2020 2076 6572 626f 7365           verbose
+0001c670: 3d76 6572 626f 7365 2c0d 0a20 2020 2020  =verbose,..     
+0001c680: 2020 2020 2020 206e 5f6a 6f62 733d 6e5f         n_jobs=n_
+0001c690: 6a6f 6273 2c0d 0a20 2020 2020 2020 2029  jobs,..        )
+0001c6a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e66  ..        self.f
+0001c6b0: 6f72 6563 6173 745f 6c65 6e67 7468 203d  orecast_length =
+0001c6c0: 2066 6f72 6563 6173 745f 6c65 6e67 7468   forecast_length
+0001c6d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e72  ..        self.r
+0001c6e0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c20  egression_model 
+0001c6f0: 3d20 7265 6772 6573 7369 6f6e 5f6d 6f64  = regression_mod
+0001c700: 656c 0d0a 2020 2020 2020 2020 7365 6c66  el..        self
+0001c710: 2e68 6f6c 6964 6179 203d 2068 6f6c 6964  .holiday = holid
+0001c720: 6179 0d0a 2020 2020 2020 2020 7365 6c66  ay..        self
+0001c730: 2e6d 6561 6e5f 726f 6c6c 696e 675f 7065  .mean_rolling_pe
+0001c740: 7269 6f64 7320 3d20 6d65 616e 5f72 6f6c  riods = mean_rol
+0001c750: 6c69 6e67 5f70 6572 696f 6473 0d0a 2020  ling_periods..  
+0001c760: 2020 2020 2020 6966 206d 6561 6e5f 726f        if mean_ro
+0001c770: 6c6c 696e 675f 7065 7269 6f64 7320 6973  lling_periods is
+0001c780: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001c790: 2020 2020 7365 6c66 2e6d 6163 645f 7065      self.macd_pe
+0001c7a0: 7269 6f64 7320 3d20 4e6f 6e65 0d0a 2020  riods = None..  
+0001c7b0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0001c7c0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0001c7d0: 6364 5f70 6572 696f 6473 203d 206d 6163  cd_periods = mac
+0001c7e0: 645f 7065 7269 6f64 730d 0a20 2020 2020  d_periods..     
+0001c7f0: 2020 2073 656c 662e 7374 645f 726f 6c6c     self.std_roll
+0001c800: 696e 675f 7065 7269 6f64 7320 3d20 7374  ing_periods = st
+0001c810: 645f 726f 6c6c 696e 675f 7065 7269 6f64  d_rolling_period
+0001c820: 730d 0a20 2020 2020 2020 2073 656c 662e  s..        self.
+0001c830: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
+0001c840: 6f64 7320 3d20 6d61 785f 726f 6c6c 696e  ods = max_rollin
+0001c850: 675f 7065 7269 6f64 730d 0a20 2020 2020  g_periods..     
+0001c860: 2020 2073 656c 662e 6d69 6e5f 726f 6c6c     self.min_roll
+0001c870: 696e 675f 7065 7269 6f64 7320 3d20 6d69  ing_periods = mi
+0001c880: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0001c890: 730d 0a20 2020 2020 2020 2073 656c 662e  s..        self.
+0001c8a0: 6577 6d5f 7661 725f 616c 7068 6120 3d20  ewm_var_alpha = 
+0001c8b0: 6577 6d5f 7661 725f 616c 7068 610d 0a20  ewm_var_alpha.. 
+0001c8c0: 2020 2020 2020 2073 656c 662e 7175 616e         self.quan
+0001c8d0: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
+0001c8e0: 6572 696f 6473 203d 2071 7561 6e74 696c  eriods = quantil
+0001c8f0: 6539 305f 726f 6c6c 696e 675f 7065 7269  e90_rolling_peri
+0001c900: 6f64 730d 0a20 2020 2020 2020 2073 656c  ods..        sel
+0001c910: 662e 7175 616e 7469 6c65 3130 5f72 6f6c  f.quantile10_rol
+0001c920: 6c69 6e67 5f70 6572 696f 6473 203d 2071  ling_periods = q
+0001c930: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
+0001c940: 675f 7065 7269 6f64 730d 0a20 2020 2020  g_periods..     
+0001c950: 2020 2073 656c 662e 6577 6d5f 616c 7068     self.ewm_alph
+0001c960: 6120 3d20 6577 6d5f 616c 7068 610d 0a20  a = ewm_alpha.. 
+0001c970: 2020 2020 2020 2073 656c 662e 6164 6469         self.addi
+0001c980: 7469 6f6e 616c 5f6c 6167 5f70 6572 696f  tional_lag_perio
+0001c990: 6473 203d 2061 6464 6974 696f 6e61 6c5f  ds = additional_
+0001c9a0: 6c61 675f 7065 7269 6f64 730d 0a20 2020  lag_periods..   
+0001c9b0: 2020 2020 2073 656c 662e 6162 735f 656e       self.abs_en
+0001c9c0: 6572 6779 203d 2061 6273 5f65 6e65 7267  ergy = abs_energ
+0001c9d0: 790d 0a20 2020 2020 2020 2073 656c 662e  y..        self.
+0001c9e0: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
+0001c9f0: 5f70 6572 696f 6473 203d 2072 6f6c 6c69  _periods = rolli
+0001ca00: 6e67 5f61 7574 6f63 6f72 725f 7065 7269  ng_autocorr_peri
+0001ca10: 6f64 730d 0a20 2020 2020 2020 2073 656c  ods..        sel
+0001ca20: 662e 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e  f.nonzero_last_n
+0001ca30: 203d 206e 6f6e 7a65 726f 5f6c 6173 745f   = nonzero_last_
+0001ca40: 6e0d 0a20 2020 2020 2020 2073 656c 662e  n..        self.
+0001ca50: 6461 7465 7061 7274 5f6d 6574 686f 6420  datepart_method 
+0001ca60: 3d20 6461 7465 7061 7274 5f6d 6574 686f  = datepart_metho
+0001ca70: 640d 0a20 2020 2020 2020 2073 656c 662e  d..        self.
+0001ca80: 706f 6c79 6e6f 6d69 616c 5f64 6567 7265  polynomial_degre
+0001ca90: 6520 3d20 706f 6c79 6e6f 6d69 616c 5f64  e = polynomial_d
+0001caa0: 6567 7265 650d 0a20 2020 2020 2020 2073  egree..        s
+0001cab0: 656c 662e 7769 6e64 6f77 203d 2077 696e  elf.window = win
+0001cac0: 646f 770d 0a20 2020 2020 2020 2073 656c  dow..        sel
+0001cad0: 662e 7175 616e 7469 6c65 5f70 6172 616d  f.quantile_param
+0001cae0: 7320 3d20 7175 616e 7469 6c65 5f70 6172  s = quantile_par
+0001caf0: 616d 730d 0a20 2020 2020 2020 2073 656c  ams..        sel
+0001cb00: 662e 7265 6772 6573 736f 725f 7472 6169  f.regressor_trai
+0001cb10: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+0001cb20: 2020 7365 6c66 2e72 6567 7265 7373 6f72    self.regressor
+0001cb30: 5f70 6572 5f73 6572 6965 735f 7472 6169  _per_series_trai
+0001cb40: 6e20 3d20 4e6f 6e65 0d0a 2020 2020 2020  n = None..      
+0001cb50: 2020 7365 6c66 2e73 7461 7469 635f 7265    self.static_re
+0001cb60: 6772 6573 736f 7220 3d20 4e6f 6e65 0d0a  gressor = None..
+0001cb70: 2020 2020 2020 2020 7365 6c66 2e70 726f          self.pro
+0001cb80: 6261 6269 6c69 7374 6963 203d 2070 726f  babilistic = pro
+0001cb90: 6261 6269 6c69 7374 6963 0d0a 2020 2020  babilistic..    
+0001cba0: 2020 2020 7365 6c66 2e73 6361 6c65 5f66      self.scale_f
+0001cbb0: 756c 6c5f 5820 3d20 7363 616c 655f 6675  ull_X = scale_fu
+0001cbc0: 6c6c 5f58 0d0a 2020 2020 2020 2020 7365  ll_X..        se
+0001cbd0: 6c66 2e63 6f69 6e74 6567 7261 7469 6f6e  lf.cointegration
+0001cbe0: 203d 2063 6f69 6e74 6567 7261 7469 6f6e   = cointegration
+0001cbf0: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+0001cc00: 6f69 6e74 6567 7261 7469 6f6e 5f6c 6167  ointegration_lag
+0001cc10: 203d 2063 6f69 6e74 6567 7261 7469 6f6e   = cointegration
+0001cc20: 5f6c 6167 0d0a 2020 2020 2020 2020 7365  _lag..        se
+0001cc30: 6c66 2e73 6572 6965 735f 6861 7368 203d  lf.series_hash =
+0001cc40: 2073 6572 6965 735f 6861 7368 0d0a 0d0a   series_hash....
+0001cc50: 2020 2020 2020 2020 2320 6465 7465 6374          # detect
+0001cc60: 206a 7573 7420 7468 6520 6d61 7820 6e65   just the max ne
+0001cc70: 6564 6564 2066 6f72 2063 7574 6f66 6620  eded for cutoff 
+0001cc80: 286d 616b 6573 2066 6173 7465 7229 0d0a  (makes faster)..
+0001cc90: 2020 2020 2020 2020 7374 6172 7469 6e67          starting
+0001cca0: 5f6d 696e 203d 2039 3020 2023 2062 6173  _min = 90  # bas
+0001ccb0: 6564 206f 6e20 7768 6174 2065 6666 6563  ed on what effec
+0001ccc0: 7473 2065 776d 2061 6c70 6861 732c 2074  ts ewm alphas, t
+0001ccd0: 6f6f 0d0a 2020 2020 2020 2020 6c69 7374  oo..        list
+0001cce0: 5f6f 5f76 616c 7320 3d20 5b0d 0a20 2020  _o_vals = [..   
+0001ccf0: 2020 2020 2020 2020 206d 6561 6e5f 726f           mean_ro
+0001cd00: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
+0001cd10: 2020 2020 2020 2020 2020 2020 6d61 6364              macd
+0001cd20: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+0001cd30: 2020 2020 2020 2073 7464 5f72 6f6c 6c69         std_rolli
+0001cd40: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+0001cd50: 2020 2020 2020 2020 206d 6178 5f72 6f6c           max_rol
+0001cd60: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+0001cd70: 2020 2020 2020 2020 2020 206d 696e 5f72             min_r
+0001cd80: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
+0001cd90: 0a20 2020 2020 2020 2020 2020 2071 7561  .            qua
+0001cda0: 6e74 696c 6539 305f 726f 6c6c 696e 675f  ntile90_rolling_
+0001cdb0: 7065 7269 6f64 732c 0d0a 2020 2020 2020  periods,..      
+0001cdc0: 2020 2020 2020 7175 616e 7469 6c65 3130        quantile10
+0001cdd0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0001cde0: 2c0d 0a20 2020 2020 2020 2020 2020 2061  ,..            a
+0001cdf0: 6464 6974 696f 6e61 6c5f 6c61 675f 7065  dditional_lag_pe
+0001ce00: 7269 6f64 732c 0d0a 2020 2020 2020 2020  riods,..        
+0001ce10: 2020 2020 726f 6c6c 696e 675f 6175 746f      rolling_auto
+0001ce20: 636f 7272 5f70 6572 696f 6473 2c0d 0a20  corr_periods,.. 
+0001ce30: 2020 2020 2020 2020 2020 206e 6f6e 7a65             nonze
+0001ce40: 726f 5f6c 6173 745f 6e2c 0d0a 2020 2020  ro_last_n,..    
+0001ce50: 2020 2020 2020 2020 7769 6e64 6f77 2c0d          window,.
+0001ce60: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+0001ce70: 7274 696e 675f 6d69 6e2c 0d0a 2020 2020  rting_min,..    
+0001ce80: 2020 2020 5d0d 0a20 2020 2020 2020 2073      ]..        s
+0001ce90: 656c 662e 6d69 6e5f 7468 7265 7368 6f6c  elf.min_threshol
+0001cea0: 6420 3d20 6d61 7828 5b78 2066 6f72 2078  d = max([x for x
+0001ceb0: 2069 6e20 6c69 7374 5f6f 5f76 616c 7320   in list_o_vals 
+0001cec0: 6966 2073 7472 2878 292e 6973 6469 6769  if str(x).isdigi
+0001ced0: 7428 295d 290d 0a20 2020 2020 2020 2073  t()])..        s
+0001cee0: 656c 662e 7363 616c 6572 5f6d 6561 6e20  elf.scaler_mean 
+0001cef0: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 6465  = None....    de
+0001cf00: 6620 6261 7365 5f73 6361 6c65 7228 7365  f base_scaler(se
+0001cf10: 6c66 2c20 6466 293a 0d0a 2020 2020 2020  lf, df):..      
+0001cf20: 2020 7365 6c66 2e73 6361 6c65 725f 6d65    self.scaler_me
+0001cf30: 616e 203d 206e 702e 6d65 616e 2864 662c  an = np.mean(df,
+0001cf40: 2061 7869 733d 3029 0d0a 2020 2020 2020   axis=0)..      
+0001cf50: 2020 7365 6c66 2e73 6361 6c65 725f 7374    self.scaler_st
+0001cf60: 6420 3d20 6e70 2e73 7464 2864 662c 2061  d = np.std(df, a
+0001cf70: 7869 733d 3029 0d0a 2020 2020 2020 2020  xis=0)..        
+0001cf80: 7365 6c66 2e73 6361 6c65 725f 7374 645b  self.scaler_std[
+0001cf90: 7365 6c66 2e73 6361 6c65 725f 7374 6420  self.scaler_std 
+0001cfa0: 3d3d 2030 5d20 3d20 310d 0a20 2020 2020  == 0] = 1..     
+0001cfb0: 2020 2072 6574 7572 6e20 2864 6620 2d20     return (df - 
+0001cfc0: 7365 6c66 2e73 6361 6c65 725f 6d65 616e  self.scaler_mean
+0001cfd0: 2920 2f20 7365 6c66 2e73 6361 6c65 725f  ) / self.scaler_
+0001cfe0: 7374 640d 0a0d 0a20 2020 2064 6566 2073  std....    def s
+0001cff0: 6361 6c65 5f64 6174 6128 7365 6c66 2c20  cale_data(self, 
+0001d000: 6466 293a 0d0a 2020 2020 2020 2020 6966  df):..        if
+0001d010: 2073 656c 662e 7363 616c 6572 5f6d 6561   self.scaler_mea
+0001d020: 6e20 6973 204e 6f6e 653a 0d0a 2020 2020  n is None:..    
+0001d030: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001d040: 656c 662e 6261 7365 5f73 6361 6c65 7228  elf.base_scaler(
+0001d050: 6466 290d 0a20 2020 2020 2020 2065 6c73  df)..        els
+0001d060: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001d070: 7265 7475 726e 2028 6466 202d 2073 656c  return (df - sel
+0001d080: 662e 7363 616c 6572 5f6d 6561 6e29 202f  f.scaler_mean) /
+0001d090: 2073 656c 662e 7363 616c 6572 5f73 7464   self.scaler_std
+0001d0a0: 0d0a 0d0a 2020 2020 6465 6620 746f 5f6f  ....    def to_o
+0001d0b0: 7269 6769 6e5f 7370 6163 6528 0d0a 2020  rigin_space(..  
+0001d0c0: 2020 2020 2020 7365 6c66 2c20 6466 2c20        self, df, 
+0001d0d0: 7472 616e 735f 6d65 7468 6f64 3d27 666f  trans_method='fo
+0001d0e0: 7265 6361 7374 272c 2063 6f6d 706f 6e65  recast', compone
+0001d0f0: 6e74 733d 4661 6c73 652c 2062 6f75 6e64  nts=False, bound
+0001d100: 733d 4661 6c73 650d 0a20 2020 2029 3a0d  s=False..    ):.
+0001d110: 0a20 2020 2020 2020 2022 2222 5461 6b65  .        """Take
+0001d120: 2074 7261 6e73 666f 726d 6564 206f 7574   transformed out
+0001d130: 7075 7473 2062 6163 6b20 746f 206f 7269  puts back to ori
+0001d140: 6769 6e61 6c20 6665 6174 7572 6520 7370  ginal feature sp
+0001d150: 6163 652e 2222 220d 0a20 2020 2020 2020  ace."""..       
+0001d160: 2072 6574 7572 6e20 6466 202a 2073 656c   return df * sel
+0001d170: 662e 7363 616c 6572 5f73 7464 202b 2073  f.scaler_std + s
+0001d180: 656c 662e 7363 616c 6572 5f6d 6561 6e0d  elf.scaler_mean.
+0001d190: 0a0d 0a20 2020 2064 6566 2066 6974 280d  ...    def fit(.
+0001d1a0: 0a20 2020 2020 2020 2073 656c 662c 0d0a  .        self,..
+0001d1b0: 2020 2020 2020 2020 6466 2c0d 0a20 2020          df,..   
+0001d1c0: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
+0001d1d0: 6573 736f 723d 4e6f 6e65 2c0d 0a20 2020  essor=None,..   
+0001d1e0: 2020 2020 2073 7461 7469 635f 7265 6772       static_regr
+0001d1f0: 6573 736f 723d 4e6f 6e65 2c0d 0a20 2020  essor=None,..   
+0001d200: 2020 2020 2072 6567 7265 7373 6f72 5f70       regressor_p
+0001d210: 6572 5f73 6572 6965 733d 4e6f 6e65 2c0d  er_series=None,.
+0001d220: 0a20 2020 2029 3a0d 0a20 2020 2020 2020  .    ):..       
+0001d230: 2022 2222 5472 6169 6e20 616c 676f 7269   """Train algori
+0001d240: 7468 6d20 6769 7665 6e20 6461 7461 2073  thm given data s
+0001d250: 7570 706c 6965 642e 0d0a 0d0a 2020 2020  upplied.....    
+0001d260: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
+0001d270: 2020 2020 2020 2064 6620 2870 616e 6461         df (panda
+0001d280: 732e 4461 7461 4672 616d 6529 3a20 4461  s.DataFrame): Da
+0001d290: 7465 7469 6d65 2049 6e64 6578 6564 0d0a  tetime Indexed..
+0001d2a0: 2020 2020 2020 2020 2020 2020 6675 7475              futu
+0001d2b0: 7265 5f72 6567 7265 7373 6f72 2028 7061  re_regressor (pa
+0001d2c0: 6e64 6173 2e44 6174 6146 7261 6d65 206f  ndas.DataFrame o
+0001d2d0: 7220 5365 7269 6573 293a 2044 6174 6574  r Series): Datet
+0001d2e0: 696d 6520 496e 6465 7865 640d 0a20 2020  ime Indexed..   
+0001d2f0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
+0001d300: 2020 6466 203d 2073 656c 662e 6261 7369    df = self.basi
+0001d310: 635f 7072 6f66 696c 6528 6466 290d 0a20  c_profile(df).. 
+0001d320: 2020 2020 2020 2023 2061 7373 756d 6520         # assume 
+0001d330: 6d65 6d6f 7279 2061 6e64 2043 5055 2063  memory and CPU c
+0001d340: 6f75 6e74 2061 7265 2063 6f72 7265 6c61  ount are correla
+0001d350: 7465 640d 0a20 2020 2020 2020 2077 6974  ted..        wit
+0001d360: 6820 636f 6e66 6967 5f63 6f6e 7465 7874  h config_context
+0001d370: 2861 7373 756d 655f 6669 6e69 7465 3d54  (assume_finite=T
+0001d380: 7275 652c 2077 6f72 6b69 6e67 5f6d 656d  rue, working_mem
+0001d390: 6f72 793d 696e 7428 7365 6c66 2e6e 5f6a  ory=int(self.n_j
+0001d3a0: 6f62 7320 2a20 3531 3229 293a 0d0a 2020  obs * 512)):..  
+0001d3b0: 2020 2020 2020 2020 2020 2320 6966 2065            # if e
+0001d3c0: 7874 6572 6e61 6c20 7265 6772 6573 736f  xternal regresso
+0001d3d0: 722c 2064 6f20 736f 6d65 2063 6865 636b  r, do some check
+0001d3e0: 2075 700d 0a20 2020 2020 2020 2020 2020   up..           
+0001d3f0: 2069 6620 7365 6c66 2e72 6567 7265 7373   if self.regress
+0001d400: 696f 6e5f 7479 7065 2069 7320 6e6f 7420  ion_type is not 
+0001d410: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+0001d420: 2020 2020 2020 2069 6620 6675 7475 7265         if future
+0001d430: 5f72 6567 7265 7373 6f72 2069 7320 4e6f  _regressor is No
+0001d440: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+0001d450: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+0001d460: 616c 7565 4572 726f 7228 0d0a 2020 2020  alueError(..    
+0001d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d480: 2020 2020 2272 6567 7265 7373 696f 6e5f      "regression_
+0001d490: 7479 7065 3d27 5573 6572 2720 6275 7420  type='User' but 
+0001d4a0: 6e6f 7420 6675 7475 7265 5f72 6567 7265  not future_regre
+0001d4b0: 7373 6f72 2073 7570 706c 6965 642e 220d  ssor supplied.".
+0001d4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d4d0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+0001d4e0: 2020 2020 2020 2020 2320 6272 6f6b 656e          # broken
+0001d4f0: 2062 7920 736c 6963 650d 0a20 2020 2020   by slice..     
+0001d500: 2020 2020 2020 2020 2020 2023 2065 6c69             # eli
+0001d510: 6620 6675 7475 7265 5f72 6567 7265 7373  f future_regress
+0001d520: 6f72 2e73 6861 7065 5b30 5d20 213d 2064  or.shape[0] != d
+0001d530: 662e 7368 6170 655b 305d 3a0d 0a20 2020  f.shape[0]:..   
+0001d540: 2020 2020 2020 2020 2020 2020 2023 2020               #  
+0001d550: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+0001d560: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+0001d570: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001d580: 2266 7574 7572 655f 7265 6772 6573 736f  "future_regresso
+0001d590: 7220 7368 6170 6520 646f 6573 206e 6f74  r shape does not
+0001d5a0: 206d 6174 6368 2074 7261 696e 696e 6720   match training 
+0001d5b0: 6461 7461 2073 6861 7065 2e22 0d0a 2020  data shape."..  
+0001d5c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001d5d0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+0001d5e0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+0001d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d600: 2020 7365 6c66 2e72 6567 7265 7373 6f72    self.regressor
+0001d610: 5f74 7261 696e 203d 2066 7574 7572 655f  _train = future_
+0001d620: 7265 6772 6573 736f 722e 7265 696e 6465  regressor.reinde
+0001d630: 7828 6466 2e69 6e64 6578 290d 0a20 2020  x(df.index)..   
+0001d640: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001d650: 7265 6772 6573 736f 725f 7065 725f 7365  regressor_per_se
+0001d660: 7269 6573 2069 7320 6e6f 7420 4e6f 6e65  ries is not None
+0001d670: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001d680: 2020 2020 2020 2073 656c 662e 7265 6772         self.regr
+0001d690: 6573 736f 725f 7065 725f 7365 7269 6573  essor_per_series
+0001d6a0: 5f74 7261 696e 203d 2072 6567 7265 7373  _train = regress
+0001d6b0: 6f72 5f70 6572 5f73 6572 6965 730d 0a20  or_per_series.. 
+0001d6c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001d6d0: 6620 7374 6174 6963 5f72 6567 7265 7373  f static_regress
+0001d6e0: 6f72 2069 7320 6e6f 7420 4e6f 6e65 3a0d  or is not None:.
+0001d6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d700: 2020 2020 2073 656c 662e 7374 6174 6963       self.static
+0001d710: 5f72 6567 7265 7373 6f72 203d 2073 7461  _regressor = sta
+0001d720: 7469 635f 7265 6772 6573 736f 720d 0a20  tic_regressor.. 
+0001d730: 2020 2020 2020 2020 2020 2023 2064 6566             # def
+0001d740: 696e 6520 5820 616e 6420 590d 0a20 2020  ine X and Y..   
+0001d750: 2020 2020 2020 2020 2073 656c 662e 5920           self.Y 
+0001d760: 3d20 6466 5b31 3a5d 2e74 6f5f 6e75 6d70  = df[1:].to_nump
+0001d770: 7928 292e 7261 7665 6c28 6f72 6465 723d  y().ravel(order=
+0001d780: 2246 2229 0d0a 2020 2020 2020 2020 2020  "F")..          
+0001d790: 2020 2320 6472 6f70 206c 6f6f 6b20 6168    # drop look ah
+0001d7a0: 6561 6420 6461 7461 0d0a 2020 2020 2020  ead data..      
+0001d7b0: 2020 2020 2020 6261 7365 203d 2064 665b        base = df[
+0001d7c0: 3a2d 315d 0d0a 2020 2020 2020 2020 2020  :-1]..          
+0001d7d0: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
+0001d7e0: 7369 6f6e 5f74 7970 6520 6973 206e 6f74  sion_type is not
+0001d7f0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001d800: 2020 2020 2020 2020 6375 745f 7265 6772          cut_regr
+0001d810: 203d 2073 656c 662e 7265 6772 6573 736f   = self.regresso
+0001d820: 725f 7472 6169 6e5b 313a 5d0d 0a20 2020  r_train[1:]..   
+0001d830: 2020 2020 2020 2020 2020 2020 2063 7574               cut
+0001d840: 5f72 6567 722e 696e 6465 7820 3d20 6261  _regr.index = ba
+0001d850: 7365 2e69 6e64 6578 0d0a 2020 2020 2020  se.index..      
+0001d860: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+0001d870: 2020 2020 2020 2020 2020 2020 2063 7574               cut
+0001d880: 5f72 6567 7220 3d20 4e6f 6e65 0d0a 2020  _regr = None..  
+0001d890: 2020 2020 2020 2020 2020 2320 6f70 656e            # open
+0001d8a0: 2074 6f20 7375 6767 6573 7469 6f6e 7320   to suggestions 
+0001d8b0: 6f6e 206d 616b 696e 6720 7468 6973 2066  on making this f
+0001d8c0: 6173 7465 720d 0a20 2020 2020 2020 2020  aster..         
+0001d8d0: 2020 2073 656c 662e 5820 3d20 7064 2e63     self.X = pd.c
+0001d8e0: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
+0001d8f0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+0001d900: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001d910: 6f6c 6c69 6e67 5f78 5f72 6567 7265 7373  olling_x_regress
+0001d920: 6f72 5f72 6567 7265 7373 6f72 280d 0a20  or_regressor(.. 
+0001d930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d940: 2020 2020 2020 2062 6173 655b 785f 636f         base[x_co
+0001d950: 6c5d 2e74 6f5f 6672 616d 6528 292c 0d0a  l].to_frame(),..
+0001d960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d970: 2020 2020 2020 2020 6d65 616e 5f72 6f6c          mean_rol
+0001d980: 6c69 6e67 5f70 6572 696f 6473 3d73 656c  ling_periods=sel
+0001d990: 662e 6d65 616e 5f72 6f6c 6c69 6e67 5f70  f.mean_rolling_p
+0001d9a0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+0001d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9c0: 206d 6163 645f 7065 7269 6f64 733d 7365   macd_periods=se
+0001d9d0: 6c66 2e6d 6163 645f 7065 7269 6f64 732c  lf.macd_periods,
+0001d9e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d9f0: 2020 2020 2020 2020 2020 7374 645f 726f            std_ro
+0001da00: 6c6c 696e 675f 7065 7269 6f64 733d 7365  lling_periods=se
+0001da10: 6c66 2e73 7464 5f72 6f6c 6c69 6e67 5f70  lf.std_rolling_p
+0001da20: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+0001da30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da40: 206d 6178 5f72 6f6c 6c69 6e67 5f70 6572   max_rolling_per
+0001da50: 696f 6473 3d73 656c 662e 6d61 785f 726f  iods=self.max_ro
+0001da60: 6c6c 696e 675f 7065 7269 6f64 732c 0d0a  lling_periods,..
+0001da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da80: 2020 2020 2020 2020 6d69 6e5f 726f 6c6c          min_roll
+0001da90: 696e 675f 7065 7269 6f64 733d 7365 6c66  ing_periods=self
+0001daa0: 2e6d 696e 5f72 6f6c 6c69 6e67 5f70 6572  .min_rolling_per
+0001dab0: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+0001dac0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001dad0: 776d 5f76 6172 5f61 6c70 6861 3d73 656c  wm_var_alpha=sel
+0001dae0: 662e 6577 6d5f 7661 725f 616c 7068 612c  f.ewm_var_alpha,
+0001daf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001db00: 2020 2020 2020 2020 2020 7175 616e 7469            quanti
+0001db10: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+0001db20: 696f 6473 3d73 656c 662e 7175 616e 7469  iods=self.quanti
+0001db30: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+0001db40: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+0001db50: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0001db60: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
+0001db70: 675f 7065 7269 6f64 733d 7365 6c66 2e71  g_periods=self.q
+0001db80: 7561 6e74 696c 6531 305f 726f 6c6c 696e  uantile10_rollin
+0001db90: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
+0001dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbb0: 2020 2020 6164 6469 7469 6f6e 616c 5f6c      additional_l
+0001dbc0: 6167 5f70 6572 696f 6473 3d73 656c 662e  ag_periods=self.
+0001dbd0: 6164 6469 7469 6f6e 616c 5f6c 6167 5f70  additional_lag_p
+0001dbe0: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+0001dbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc00: 2065 776d 5f61 6c70 6861 3d73 656c 662e   ewm_alpha=self.
+0001dc10: 6577 6d5f 616c 7068 612c 0d0a 2020 2020  ewm_alpha,..    
+0001dc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc30: 2020 2020 6162 735f 656e 6572 6779 3d73      abs_energy=s
+0001dc40: 656c 662e 6162 735f 656e 6572 6779 2c0d  elf.abs_energy,.
+0001dc50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dc60: 2020 2020 2020 2020 2072 6f6c 6c69 6e67           rolling
+0001dc70: 5f61 7574 6f63 6f72 725f 7065 7269 6f64  _autocorr_period
+0001dc80: 733d 7365 6c66 2e72 6f6c 6c69 6e67 5f61  s=self.rolling_a
+0001dc90: 7574 6f63 6f72 725f 7065 7269 6f64 732c  utocorr_periods,
+0001dca0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001dcb0: 2020 2020 2020 2020 2020 6e6f 6e7a 6572            nonzer
+0001dcc0: 6f5f 6c61 7374 5f6e 3d73 656c 662e 6e6f  o_last_n=self.no
+0001dcd0: 6e7a 6572 6f5f 6c61 7374 5f6e 2c0d 0a20  nzero_last_n,.. 
+0001dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dcf0: 2020 2020 2020 2061 6464 5f64 6174 655f         add_date_
+0001dd00: 7061 7274 3d73 656c 662e 6461 7465 7061  part=self.datepa
+0001dd10: 7274 5f6d 6574 686f 642c 0d0a 2020 2020  rt_method,..    
+0001dd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd30: 2020 2020 686f 6c69 6461 793d 7365 6c66      holiday=self
+0001dd40: 2e68 6f6c 6964 6179 2c0d 0a20 2020 2020  .holiday,..     
+0001dd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd60: 2020 2068 6f6c 6964 6179 5f63 6f75 6e74     holiday_count
+0001dd70: 7279 3d73 656c 662e 686f 6c69 6461 795f  ry=self.holiday_
+0001dd80: 636f 756e 7472 792c 0d0a 2020 2020 2020  country,..      
+0001dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dda0: 2020 706f 6c79 6e6f 6d69 616c 5f64 6567    polynomial_deg
+0001ddb0: 7265 653d 7365 6c66 2e70 6f6c 796e 6f6d  ree=self.polynom
+0001ddc0: 6961 6c5f 6465 6772 6565 2c0d 0a20 2020  ial_degree,..   
+0001ddd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dde0: 2020 2020 2077 696e 646f 773d 7365 6c66       window=self
+0001ddf0: 2e77 696e 646f 772c 0d0a 2020 2020 2020  .window,..      
+0001de00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de10: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
+0001de20: 6f72 3d63 7574 5f72 6567 722c 0d0a 2020  or=cut_regr,..  
+0001de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de40: 2020 2020 2020 2320 7468 6573 6520 7265        # these re
+0001de50: 6c79 2074 6865 2069 6620 7061 7274 206e  ly the if part n
+0001de60: 6f74 2062 6569 6e67 2072 756e 2069 6620  ot being run if 
+0001de70: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+0001de80: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001de90: 6772 6573 736f 725f 7065 725f 7365 7269  gressor_per_seri
+0001dea0: 6573 3d73 656c 662e 7265 6772 6573 736f  es=self.regresso
+0001deb0: 725f 7065 725f 7365 7269 6573 5f74 7261  r_per_series_tra
+0001dec0: 696e 5b78 5f63 6f6c 5d0d 0a20 2020 2020  in[x_col]..     
+0001ded0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dee0: 2020 2069 6620 7365 6c66 2e72 6567 7265     if self.regre
+0001def0: 7373 6f72 5f70 6572 5f73 6572 6965 735f  ssor_per_series_
+0001df00: 7472 6169 6e20 6973 206e 6f74 204e 6f6e  train is not Non
+0001df10: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+0001df20: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
+0001df30: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
+0001df40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001df50: 7461 7469 635f 7265 6772 6573 736f 723d  tatic_regressor=
+0001df60: 7374 6174 6963 5f72 6567 7265 7373 6f72  static_regressor
+0001df70: 2e6c 6f63 5b78 5f63 6f6c 5d2e 746f 5f66  .loc[x_col].to_f
+0001df80: 7261 6d65 2829 2e54 0d0a 2020 2020 2020  rame().T..      
+0001df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfa0: 2020 6966 2073 656c 662e 7374 6174 6963    if self.static
+0001dfb0: 5f72 6567 7265 7373 6f72 2069 7320 6e6f  _regressor is no
+0001dfc0: 7420 4e6f 6e65 0d0a 2020 2020 2020 2020  t None..        
+0001dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dfe0: 656c 7365 204e 6f6e 652c 0d0a 2020 2020  else None,..    
+0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e000: 2020 2020 636f 696e 7465 6772 6174 696f      cointegratio
+0001e010: 6e3d 7365 6c66 2e63 6f69 6e74 6567 7261  n=self.cointegra
+0001e020: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
+0001e030: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001e040: 6f69 6e74 6567 7261 7469 6f6e 5f6c 6167  ointegration_lag
+0001e050: 3d73 656c 662e 636f 696e 7465 6772 6174  =self.cointegrat
+0001e060: 696f 6e5f 6c61 672c 0d0a 2020 2020 2020  ion_lag,..      
+0001e070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e080: 2020 7365 7269 6573 5f69 643d 785f 636f    series_id=x_co
+0001e090: 6c20 6966 2073 656c 662e 7365 7269 6573  l if self.series
+0001e0a0: 5f68 6173 6820 656c 7365 204e 6f6e 652c  _hash else None,
+0001e0b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e0c0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+0001e0d0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0001e0e0: 2078 5f63 6f6c 2069 6e20 6261 7365 2e63   x_col in base.c
+0001e0f0: 6f6c 756d 6e73 0d0a 2020 2020 2020 2020  olumns..        
+0001e100: 2020 2020 2020 2020 5d0d 0a20 2020 2020          ]..     
+0001e110: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+0001e120: 2020 2020 2020 6465 6c20 6261 7365 0d0a        del base..
+0001e130: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001e140: 656c 662e 7072 6f62 6162 696c 6973 7469  elf.probabilisti
+0001e150: 633a 0d0a 2020 2020 2020 2020 2020 2020  c:..            
+0001e160: 2020 2020 6672 6f6d 2073 6b6c 6561 726e      from sklearn
+0001e170: 2e65 6e73 656d 626c 6520 696d 706f 7274  .ensemble import
+0001e180: 2047 7261 6469 656e 7442 6f6f 7374 696e   GradientBoostin
+0001e190: 6752 6567 7265 7373 6f72 0d0a 0d0a 2020  gRegressor....  
+0001e1a0: 2020 2020 2020 2020 2020 2020 2020 616c                al
+0001e1b0: 7068 615f 6261 7365 203d 2028 3120 2d20  pha_base = (1 - 
+0001e1c0: 7365 6c66 2e70 7265 6469 6374 696f 6e5f  self.prediction_
+0001e1d0: 696e 7465 7276 616c 2920 2f20 320d 0a20  interval) / 2.. 
+0001e1e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e1f0: 656c 662e 6d6f 6465 6c5f 7570 7065 7220  elf.model_upper 
+0001e200: 3d20 4772 6164 6965 6e74 426f 6f73 7469  = GradientBoosti
+0001e210: 6e67 5265 6772 6573 736f 7228 0d0a 2020  ngRegressor(..  
+0001e220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e230: 2020 6c6f 7373 3d27 7175 616e 7469 6c65    loss='quantile
+0001e240: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0001e250: 2020 2020 2020 2020 616c 7068 613d 2831          alpha=(1
+0001e260: 202d 2061 6c70 6861 5f62 6173 6529 2c0d   - alpha_base),.
+0001e270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e280: 2020 2020 2072 616e 646f 6d5f 7374 6174       random_stat
+0001e290: 653d 7365 6c66 2e72 616e 646f 6d5f 7365  e=self.random_se
+0001e2a0: 6564 2c0d 0a20 2020 2020 2020 2020 2020  ed,..           
+0001e2b0: 2020 2020 2020 2020 202a 2a73 656c 662e           **self.
+0001e2c0: 7175 616e 7469 6c65 5f70 6172 616d 732c  quantile_params,
+0001e2d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e2e0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0001e2f0: 2020 2020 2073 656c 662e 6d6f 6465 6c5f       self.model_
+0001e300: 6c6f 7765 7220 3d20 4772 6164 6965 6e74  lower = Gradient
+0001e310: 426f 6f73 7469 6e67 5265 6772 6573 736f  BoostingRegresso
+0001e320: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
+0001e330: 2020 2020 2020 2020 6c6f 7373 3d27 7175          loss='qu
+0001e340: 616e 7469 6c65 272c 0d0a 2020 2020 2020  antile',..      
+0001e350: 2020 2020 2020 2020 2020 2020 2020 616c                al
+0001e360: 7068 613d 616c 7068 615f 6261 7365 2c0d  pha=alpha_base,.
+0001e370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e380: 2020 2020 2072 616e 646f 6d5f 7374 6174       random_stat
+0001e390: 653d 7365 6c66 2e72 616e 646f 6d5f 7365  e=self.random_se
+0001e3a0: 6564 2c0d 0a20 2020 2020 2020 2020 2020  ed,..           
+0001e3b0: 2020 2020 2020 2020 202a 2a73 656c 662e           **self.
+0001e3c0: 7175 616e 7469 6c65 5f70 6172 616d 732c  quantile_params,
+0001e3d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e3e0: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+0001e3f0: 2020 206d 756c 7469 6f75 7470 7574 203d     multioutput =
+0001e400: 2054 7275 650d 0a20 2020 2020 2020 2020   True..         
+0001e410: 2020 2069 6620 7365 6c66 2e59 2e6e 6469     if self.Y.ndi
+0001e420: 6d20 3c20 323a 0d0a 2020 2020 2020 2020  m < 2:..        
+0001e430: 2020 2020 2020 2020 6d75 6c74 696f 7574          multiout
+0001e440: 7075 7420 3d20 4661 6c73 650d 0a20 2020  put = False..   
+0001e450: 2020 2020 2020 2020 2065 6c69 6620 7365           elif se
+0001e460: 6c66 2e59 2e73 6861 7065 5b31 5d20 3c20  lf.Y.shape[1] < 
+0001e470: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+0001e480: 2020 2020 6d75 6c74 696f 7574 7075 7420      multioutput 
+0001e490: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
+0001e4a0: 2020 2020 2073 656c 662e 6d6f 6465 6c20       self.model 
+0001e4b0: 3d20 7265 7472 6965 7665 5f72 6567 7265  = retrieve_regre
+0001e4c0: 7373 6f72 280d 0a20 2020 2020 2020 2020  ssor(..         
+0001e4d0: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
+0001e4e0: 6e5f 6d6f 6465 6c3d 7365 6c66 2e72 6567  n_model=self.reg
+0001e4f0: 7265 7373 696f 6e5f 6d6f 6465 6c2c 0d0a  ression_model,..
+0001e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e510: 7665 7262 6f73 653d 7365 6c66 2e76 6572  verbose=self.ver
+0001e520: 626f 7365 2c0d 0a20 2020 2020 2020 2020  bose,..         
+0001e530: 2020 2020 2020 2076 6572 626f 7365 5f62         verbose_b
+0001e540: 6f6f 6c3d 7365 6c66 2e76 6572 626f 7365  ool=self.verbose
+0001e550: 5f62 6f6f 6c2c 0d0a 2020 2020 2020 2020  _bool,..        
+0001e560: 2020 2020 2020 2020 7261 6e64 6f6d 5f73          random_s
+0001e570: 6565 643d 7365 6c66 2e72 616e 646f 6d5f  eed=self.random_
+0001e580: 7365 6564 2c0d 0a20 2020 2020 2020 2020  seed,..         
+0001e590: 2020 2020 2020 206e 5f6a 6f62 733d 7365         n_jobs=se
+0001e5a0: 6c66 2e6e 5f6a 6f62 732c 0d0a 2020 2020  lf.n_jobs,..    
+0001e5b0: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
+0001e5c0: 696f 7574 7075 743d 6d75 6c74 696f 7574  ioutput=multiout
+0001e5d0: 7075 742c 0d0a 2020 2020 2020 2020 2020  put,..          
+0001e5e0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0001e5f0: 2073 656c 662e 6d75 6c74 696f 7574 7075   self.multioutpu
+0001e600: 7467 7072 203d 2073 656c 662e 7265 6772  tgpr = self.regr
+0001e610: 6573 7369 6f6e 5f6d 6f64 656c 5b27 6d6f  ession_model['mo
+0001e620: 6465 6c27 5d20 3d3d 2022 4d75 6c74 696f  del'] == "Multio
+0001e630: 7574 7075 7447 5052 220d 0a20 2020 2020  utputGPR"..     
+0001e640: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
+0001e650: 6361 6c65 5f66 756c 6c5f 583a 0d0a 2020  cale_full_X:..  
+0001e660: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0001e670: 6c66 2e58 203d 2073 656c 662e 7363 616c  lf.X = self.scal
+0001e680: 655f 6461 7461 2873 656c 662e 5829 0d0a  e_data(self.X)..
+0001e690: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0001e6a0: 5265 6d65 6d62 6572 2074 6865 2058 2064  Remember the X d
+0001e6b0: 6174 6574 696d 6520 6973 2066 6f72 2074  atetime is for t
+0001e6c0: 6865 2070 7265 7669 6f75 7320 6461 7920  he previous day 
+0001e6d0: 746f 2074 6865 2059 2064 6174 6574 696d  to the Y datetim
+0001e6e0: 6520 6865 7265 0d0a 2020 2020 2020 2020  e here..        
+0001e6f0: 2020 2020 7365 6c66 2e6d 6f64 656c 2e66      self.model.f
+0001e700: 6974 2873 656c 662e 582e 746f 5f6e 756d  it(self.X.to_num
+0001e710: 7079 2829 2c20 7365 6c66 2e59 290d 0a0d  py(), self.Y)...
+0001e720: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001e730: 7365 6c66 2e70 726f 6261 6269 6c69 7374  self.probabilist
+0001e740: 6963 2061 6e64 206e 6f74 2073 656c 662e  ic and not self.
+0001e750: 6d75 6c74 696f 7574 7075 7467 7072 3a0d  multioutputgpr:.
+0001e760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e770: 2073 656c 662e 6d6f 6465 6c5f 7570 7065   self.model_uppe
+0001e780: 722e 6669 7428 7365 6c66 2e58 2e74 6f5f  r.fit(self.X.to_
+0001e790: 6e75 6d70 7928 292c 2073 656c 662e 5929  numpy(), self.Y)
+0001e7a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001e7b0: 2020 7365 6c66 2e6d 6f64 656c 5f6c 6f77    self.model_low
+0001e7c0: 6572 2e66 6974 2873 656c 662e 582e 746f  er.fit(self.X.to
+0001e7d0: 5f6e 756d 7079 2829 2c20 7365 6c66 2e59  _numpy(), self.Y
+0001e7e0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0001e7f0: 2077 6520 6f6e 6c79 206e 6565 6420 7468   we only need th
+0001e800: 6520 4e20 6d6f 7374 2072 6563 656e 7420  e N most recent 
+0001e810: 706f 696e 7473 2066 6f72 2070 7265 6469  points for predi
+0001e820: 6374 0d0a 2020 2020 2020 2020 2020 2020  ct..            
+0001e830: 2320 7365 6c66 2e73 6b74 7261 696e 6461  # self.sktrainda
+0001e840: 7461 203d 2064 662e 7461 696c 2873 656c  ta = df.tail(sel
+0001e850: 662e 6d69 6e5f 7468 7265 7368 6f6c 6429  f.min_threshold)
+0001e860: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001e870: 6c66 2e66 6974 5f64 6174 6128 6466 290d  lf.fit_data(df).
+0001e880: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+0001e890: 656c 662e 6669 745f 7275 6e74 696d 6520  elf.fit_runtime 
+0001e8a0: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
+0001e8b0: 696d 652e 6e6f 7728 2920 2d20 7365 6c66  ime.now() - self
+0001e8c0: 2e73 7461 7274 5469 6d65 0d0a 2020 2020  .startTime..    
+0001e8d0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001e8e0: 656c 660d 0a0d 0a20 2020 2064 6566 2066  elf....    def f
+0001e8f0: 6974 5f64 6174 6128 0d0a 2020 2020 2020  it_data(..      
+0001e900: 2020 7365 6c66 2c0d 0a20 2020 2020 2020    self,..       
+0001e910: 2064 662c 0d0a 2020 2020 2020 2020 6675   df,..        fu
+0001e920: 7475 7265 5f72 6567 7265 7373 6f72 3d4e  ture_regressor=N
+0001e930: 6f6e 652c 0d0a 2020 2020 2020 2020 7374  one,..        st
+0001e940: 6174 6963 5f72 6567 7265 7373 6f72 3d4e  atic_regressor=N
+0001e950: 6f6e 652c 0d0a 2020 2020 2020 2020 7265  one,..        re
+0001e960: 6772 6573 736f 725f 7065 725f 7365 7269  gressor_per_seri
+0001e970: 6573 3d4e 6f6e 652c 0d0a 2020 2020 293a  es=None,..    ):
+0001e980: 0d0a 2020 2020 2020 2020 6466 203d 2073  ..        df = s
+0001e990: 656c 662e 6261 7369 635f 7072 6f66 696c  elf.basic_profil
+0001e9a0: 6528 6466 290d 0a20 2020 2020 2020 2073  e(df)..        s
+0001e9b0: 656c 662e 736b 7472 6169 6e64 6174 6120  elf.sktraindata 
+0001e9c0: 3d20 6466 2e74 6169 6c28 7365 6c66 2e6d  = df.tail(self.m
+0001e9d0: 696e 5f74 6872 6573 686f 6c64 290d 0a20  in_threshold).. 
+0001e9e0: 2020 2020 2020 2069 6620 7365 6c66 2e72         if self.r
+0001e9f0: 6567 7265 7373 696f 6e5f 7479 7065 2069  egression_type i
+0001ea00: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+0001ea10: 2020 2020 2020 2020 2069 6620 6675 7475           if futu
+0001ea20: 7265 5f72 6567 7265 7373 6f72 2069 7320  re_regressor is 
+0001ea30: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
+0001ea40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001ea50: 7265 6772 6573 736f 725f 7472 6169 6e20  regressor_train 
+0001ea60: 3d20 6675 7475 7265 5f72 6567 7265 7373  = future_regress
+0001ea70: 6f72 2e72 6569 6e64 6578 2864 6629 0d0a  or.reindex(df)..
+0001ea80: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+0001ea90: 6567 7265 7373 6f72 5f70 6572 5f73 6572  egressor_per_ser
+0001eaa0: 6965 7320 6973 206e 6f74 204e 6f6e 653a  ies is not None:
+0001eab0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001eac0: 2020 7365 6c66 2e72 6567 7265 7373 6f72    self.regressor
+0001ead0: 5f70 6572 5f73 6572 6965 735f 7472 6169  _per_series_trai
+0001eae0: 6e20 3d20 7265 6772 6573 736f 725f 7065  n = regressor_pe
+0001eaf0: 725f 7365 7269 6573 0d0a 2020 2020 2020  r_series..      
+0001eb00: 2020 2020 2020 6966 2073 7461 7469 635f        if static_
+0001eb10: 7265 6772 6573 736f 7220 6973 206e 6f74  regressor is not
+0001eb20: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001eb30: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+0001eb40: 7469 635f 7265 6772 6573 736f 7220 3d20  tic_regressor = 
+0001eb50: 7374 6174 6963 5f72 6567 7265 7373 6f72  static_regressor
+0001eb60: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001eb70: 2073 656c 660d 0a0d 0a20 2020 2064 6566   self....    def
+0001eb80: 2070 7265 6469 6374 280d 0a20 2020 2020   predict(..     
+0001eb90: 2020 2073 656c 662c 0d0a 2020 2020 2020     self,..      
+0001eba0: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
+0001ebb0: 683a 2069 6e74 203d 204e 6f6e 652c 0d0a  h: int = None,..
+0001ebc0: 2020 2020 2020 2020 6a75 7374 5f70 6f69          just_poi
+0001ebd0: 6e74 5f66 6f72 6563 6173 743a 2062 6f6f  nt_forecast: boo
+0001ebe0: 6c20 3d20 4661 6c73 652c 0d0a 2020 2020  l = False,..    
+0001ebf0: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
+0001ec00: 7373 6f72 3d4e 6f6e 652c 0d0a 2020 2020  ssor=None,..    
+0001ec10: 2020 2020 6466 3d4e 6f6e 652c 0d0a 2020      df=None,..  
+0001ec20: 2020 2020 2020 7265 6772 6573 736f 725f        regressor_
+0001ec30: 7065 725f 7365 7269 6573 3d4e 6f6e 652c  per_series=None,
+0001ec40: 0d0a 2020 2020 293a 0d0a 2020 2020 2020  ..    ):..      
+0001ec50: 2020 2222 2247 656e 6572 6174 6520 666f    """Generate fo
+0001ec60: 7265 6361 7374 2064 6174 6120 696d 6d65  recast data imme
+0001ec70: 6469 6174 656c 7920 666f 6c6c 6f77 696e  diately followin
+0001ec80: 6720 6461 7465 7320 6f66 2069 6e64 6578  g dates of index
+0001ec90: 2073 7570 706c 6965 6420 746f 202e 6669   supplied to .fi
+0001eca0: 7428 292e 0d0a 0d0a 2020 2020 2020 2020  t().....        
+0001ecb0: 4172 6773 3a0d 0a20 2020 2020 2020 2020  Args:..         
+0001ecc0: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
+0001ecd0: 7468 2028 696e 7429 3a20 4e75 6d62 6572  th (int): Number
+0001ece0: 206f 6620 7065 7269 6f64 7320 6f66 2064   of periods of d
+0001ecf0: 6174 6120 746f 2066 6f72 6563 6173 7420  ata to forecast 
+0001ed00: 6168 6561 640d 0a20 2020 2020 2020 2020  ahead..         
+0001ed10: 2020 2020 2020 2069 676e 6f72 6564 2068         ignored h
+0001ed20: 6572 6520 666f 7220 7468 6973 206d 6f64  ere for this mod
+0001ed30: 656c 2c20 6d75 7374 2062 6520 7365 7420  el, must be set 
+0001ed40: 696e 205f 5f69 6e69 745f 5f20 6265 666f  in __init__ befo
+0001ed50: 7265 202e 6669 7428 290d 0a20 2020 2020  re .fit()..     
+0001ed60: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+0001ed70: 6772 6573 736f 7220 2870 642e 4461 7461  gressor (pd.Data
+0001ed80: 4672 616d 6529 3a20 6164 6469 7469 6f6e  Frame): addition
+0001ed90: 616c 2072 6567 7265 7373 6f72 0d0a 2020  al regressor..  
+0001eda0: 2020 2020 2020 2020 2020 6a75 7374 5f70            just_p
+0001edb0: 6f69 6e74 5f66 6f72 6563 6173 7420 2862  oint_forecast (b
+0001edc0: 6f6f 6c29 3a20 4966 2054 7275 652c 2072  ool): If True, r
+0001edd0: 6574 7572 6e20 6120 7061 6e64 6173 2e44  eturn a pandas.D
+0001ede0: 6174 6146 7261 6d65 206f 6620 6a75 7374  ataFrame of just
+0001edf0: 2070 6f69 6e74 2066 6f72 6563 6173 7473   point forecasts
+0001ee00: 0d0a 0d0a 2020 2020 2020 2020 5265 7475  ....        Retu
+0001ee10: 726e 733a 0d0a 2020 2020 2020 2020 2020  rns:..          
+0001ee20: 2020 4569 7468 6572 2061 2050 7265 6469    Either a Predi
+0001ee30: 6374 696f 6e4f 626a 6563 7420 6f66 2066  ctionObject of f
+0001ee40: 6f72 6563 6173 7473 2061 6e64 206d 6574  orecasts and met
+0001ee50: 6164 6174 612c 206f 720d 0a20 2020 2020  adata, or..     
+0001ee60: 2020 2020 2020 2069 6620 6a75 7374 5f70         if just_p
+0001ee70: 6f69 6e74 5f66 6f72 6563 6173 7420 3d3d  oint_forecast ==
+0001ee80: 2054 7275 652c 2061 2064 6174 6166 7261   True, a datafra
+0001ee90: 6d65 206f 6620 706f 696e 7420 666f 7265  me of point fore
+0001eea0: 6361 7374 730d 0a20 2020 2020 2020 2022  casts..        "
+0001eeb0: 2222 0d0a 2020 2020 2020 2020 6966 2064  ""..        if d
+0001eec0: 6620 6973 206e 6f74 204e 6f6e 653a 0d0a  f is not None:..
+0001eed0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001eee0: 2e66 6974 5f64 6174 6128 6466 2920 2023  .fit_data(df)  #
+0001eef0: 206e 6f20 6e65 7720 7265 6772 6573 736f   no new regresso
+0001ef00: 7220 7375 7070 6f72 740d 0a20 2020 2020  r support..     
+0001ef10: 2020 2069 6620 666f 7265 6361 7374 5f6c     if forecast_l
+0001ef20: 656e 6774 6820 6973 204e 6f6e 653a 0d0a  ength is None:..
+0001ef30: 2020 2020 2020 2020 2020 2020 666f 7265              fore
+0001ef40: 6361 7374 5f6c 656e 6774 6820 3d20 7365  cast_length = se
+0001ef50: 6c66 2e66 6f72 6563 6173 745f 6c65 6e67  lf.forecast_leng
+0001ef60: 7468 0d0a 2020 2020 2020 2020 7072 6564  th..        pred
+0001ef70: 6963 7453 7461 7274 5469 6d65 203d 2064  ictStartTime = d
+0001ef80: 6174 6574 696d 652e 6461 7465 7469 6d65  atetime.datetime
+0001ef90: 2e6e 6f77 2829 0d0a 2020 2020 2020 2020  .now()..        
+0001efa0: 696e 6465 7820 3d20 7365 6c66 2e63 7265  index = self.cre
+0001efb0: 6174 655f 666f 7265 6361 7374 5f69 6e64  ate_forecast_ind
+0001efc0: 6578 2866 6f72 6563 6173 745f 6c65 6e67  ex(forecast_leng
+0001efd0: 7468 3d66 6f72 6563 6173 745f 6c65 6e67  th=forecast_leng
+0001efe0: 7468 290d 0a20 2020 2020 2020 2066 6f72  th)..        for
+0001eff0: 6563 6173 7420 3d20 7064 2e44 6174 6146  ecast = pd.DataF
+0001f000: 7261 6d65 2829 0d0a 2020 2020 2020 2020  rame()..        
+0001f010: 7570 7065 725f 666f 7265 6361 7374 203d  upper_forecast =
+0001f020: 2070 642e 4461 7461 4672 616d 6528 290d   pd.DataFrame().
+0001f030: 0a20 2020 2020 2020 206c 6f77 6572 5f66  .        lower_f
+0001f040: 6f72 6563 6173 7420 3d20 7064 2e44 6174  orecast = pd.Dat
+0001f050: 6146 7261 6d65 2829 0d0a 2020 2020 2020  aFrame()..      
+0001f060: 2020 6966 2073 656c 662e 7265 6772 6573    if self.regres
+0001f070: 736f 725f 7472 6169 6e20 6973 206e 6f74  sor_train is not
+0001f080: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+0001f090: 2020 2020 6261 7365 5f72 6567 7220 3d20      base_regr = 
+0001f0a0: 7064 2e63 6f6e 6361 7428 5b73 656c 662e  pd.concat([self.
+0001f0b0: 7265 6772 6573 736f 725f 7472 6169 6e2c  regressor_train,
+0001f0c0: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+0001f0d0: 725d 290d 0a20 2020 2020 2020 2020 2020  r])..           
+0001f0e0: 2023 206d 6f76 6520 696e 6465 7820 6261   # move index ba
+0001f0f0: 636b 206f 6e65 2074 6f20 616c 6967 6e20  ck one to align 
+0001f100: 7769 7468 2074 7261 696e 696e 6720 6461  with training da
+0001f110: 7465 7320 6f6e 206d 6572 6765 0d0a 2020  tes on merge..  
+0001f120: 2020 2020 2020 2020 2020 7265 6772 5f69            regr_i
+0001f130: 6478 203d 2062 6173 655f 7265 6772 2e69  dx = base_regr.i
+0001f140: 6e64 6578 5b3a 2d31 5d0d 0a20 2020 2020  ndex[:-1]..     
+0001f150: 2020 2020 2020 2062 6173 655f 7265 6772         base_regr
+0001f160: 203d 2062 6173 655f 7265 6772 5b31 3a5d   = base_regr[1:]
+0001f170: 0d0a 2020 2020 2020 2020 2020 2020 6261  ..            ba
+0001f180: 7365 5f72 6567 722e 696e 6465 7820 3d20  se_regr.index = 
+0001f190: 7265 6772 5f69 6478 0d0a 2020 2020 2020  regr_idx..      
+0001f1a0: 2020 2320 6e65 6564 2074 6f20 636f 7079    # need to copy
+0001f1b0: 2065 6c73 6520 6d75 6c74 6970 6c65 2070   else multiple p
+0001f1c0: 7265 6469 6374 696f 6e73 206d 6f76 6520  redictions move 
+0001f1d0: 6576 6572 7920 6f6e 2e2e 2e0d 0a20 2020  every on.....   
+0001f1e0: 2020 2020 2063 7572 7265 6e74 5f78 203d       current_x =
+0001f1f0: 2073 656c 662e 736b 7472 6169 6e64 6174   self.sktraindat
+0001f200: 612e 636f 7079 2829 0d0a 0d0a 2020 2020  a.copy()....    
+0001f210: 2020 2020 2320 616e 6420 7468 6973 2069      # and this i
+0001f220: 7320 7269 6469 6375 6c6f 7573 6c79 2073  s ridiculously s
+0001f230: 6c6f 772c 206e 6573 7465 6420 6c6f 6f70  low, nested loop
+0001f240: 0d0a 2020 2020 2020 2020 666f 7220 6663  ..        for fc
+0001f250: 7374 5f73 7465 7020 696e 2072 616e 6765  st_step in range
+0001f260: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
+0001f270: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001f280: 6375 725f 7265 6772 203d 204e 6f6e 650d  cur_regr = None.
+0001f290: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001f2a0: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+0001f2b0: 7479 7065 2069 7320 6e6f 7420 4e6f 6e65  type is not None
+0001f2c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001f2d0: 2020 2063 7572 5f72 6567 7220 3d20 6261     cur_regr = ba
+0001f2e0: 7365 5f72 6567 722e 7265 696e 6465 7828  se_regr.reindex(
+0001f2f0: 6375 7272 656e 745f 782e 696e 6465 7829  current_x.index)
+0001f300: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001f310: 6c66 2e58 5f70 7265 6420 3d20 7064 2e63  lf.X_pred = pd.c
+0001f320: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
+0001f330: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+0001f340: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001f350: 6f6c 6c69 6e67 5f78 5f72 6567 7265 7373  olling_x_regress
+0001f360: 6f72 5f72 6567 7265 7373 6f72 280d 0a20  or_regressor(.. 
+0001f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f380: 2020 2020 2020 2063 7572 7265 6e74 5f78         current_x
+0001f390: 5b78 5f63 6f6c 5d2e 746f 5f66 7261 6d65  [x_col].to_frame
+0001f3a0: 2829 2c0d 0a20 2020 2020 2020 2020 2020  (),..           
+0001f3b0: 2020 2020 2020 2020 2020 2020 206d 6561               mea
+0001f3c0: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+0001f3d0: 733d 7365 6c66 2e6d 6561 6e5f 726f 6c6c  s=self.mean_roll
+0001f3e0: 696e 675f 7065 7269 6f64 732c 0d0a 2020  ing_periods,..  
+0001f3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f400: 2020 2020 2020 6d61 6364 5f70 6572 696f        macd_perio
+0001f410: 6473 3d73 656c 662e 6d61 6364 5f70 6572  ds=self.macd_per
+0001f420: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+0001f430: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001f440: 7464 5f72 6f6c 6c69 6e67 5f70 6572 696f  td_rolling_perio
+0001f450: 6473 3d73 656c 662e 7374 645f 726f 6c6c  ds=self.std_roll
+0001f460: 696e 675f 7065 7269 6f64 732c 0d0a 2020  ing_periods,..  
+0001f470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f480: 2020 2020 2020 6d61 785f 726f 6c6c 696e        max_rollin
+0001f490: 675f 7065 7269 6f64 733d 7365 6c66 2e6d  g_periods=self.m
+0001f4a0: 6178 5f72 6f6c 6c69 6e67 5f70 6572 696f  ax_rolling_perio
+0001f4b0: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
+0001f4c0: 2020 2020 2020 2020 2020 2020 206d 696e               min
+0001f4d0: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+0001f4e0: 3d73 656c 662e 6d69 6e5f 726f 6c6c 696e  =self.min_rollin
+0001f4f0: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
 0001f500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f510: 2020 2020 7266 5072 6564 5f6c 6f77 6572      rfPred_lower
-0001f520: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001f530: 2020 2020 2020 2020 2020 2069 6e64 6578             index
-0001f540: 3d63 7572 7265 6e74 5f78 2e63 6f6c 756d  =current_x.colum
-0001f550: 6e73 2c0d 0a20 2020 2020 2020 2020 2020  ns,..           
-0001f560: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-0001f570: 756d 6e73 3d5b 696e 6465 785b 6663 7374  umns=[index[fcst
-0001f580: 5f73 7465 705d 5d2c 0d0a 2020 2020 2020  _step]],..      
-0001f590: 2020 2020 2020 2020 2020 2020 2020 292e                ).
-0001f5a0: 7472 616e 7370 6f73 6528 290d 0a20 2020  transpose()..   
-0001f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f5c0: 2075 7070 6572 5f66 6f72 6563 6173 7420   upper_forecast 
-0001f5d0: 3d20 7064 2e63 6f6e 6361 7428 5b75 7070  = pd.concat([upp
-0001f5e0: 6572 5f66 6f72 6563 6173 742c 2070 7265  er_forecast, pre
-0001f5f0: 645f 7570 7065 725d 290d 0a20 2020 2020  d_upper])..     
-0001f600: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0001f610: 6f77 6572 5f66 6f72 6563 6173 7420 3d20  ower_forecast = 
-0001f620: 7064 2e63 6f6e 6361 7428 5b6c 6f77 6572  pd.concat([lower
-0001f630: 5f66 6f72 6563 6173 742c 2070 7265 645f  _forecast, pred_
-0001f640: 6c6f 7765 725d 290d 0a20 2020 2020 2020  lower])..       
-0001f650: 2020 2020 2063 7572 7265 6e74 5f78 203d       current_x =
-0001f660: 2070 642e 636f 6e63 6174 280d 0a20 2020   pd.concat(..   
-0001f670: 2020 2020 2020 2020 2020 2020 205b 0d0a               [..
-0001f680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f690: 2020 2020 6375 7272 656e 745f 782c 0d0a      current_x,..
-0001f6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f6b0: 2020 2020 7072 6564 5f63 6c65 616e 2c0d      pred_clean,.
-0001f6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f6d0: 205d 0d0a 2020 2020 2020 2020 2020 2020   ]..            
-0001f6e0: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-0001f6f0: 6563 6173 7420 3d20 666f 7265 6361 7374  ecast = forecast
-0001f700: 5b73 656c 662e 636f 6c75 6d6e 5f6e 616d  [self.column_nam
-0001f710: 6573 5d0d 0a20 2020 2020 2020 2069 6620  es]..        if 
-0001f720: 6e6f 7420 7365 6c66 2e70 726f 6261 6269  not self.probabi
-0001f730: 6c69 7374 6963 3a0d 0a20 2020 2020 2020  listic:..       
-0001f740: 2020 2020 2075 7070 6572 5f66 6f72 6563       upper_forec
-0001f750: 6173 742c 206c 6f77 6572 5f66 6f72 6563  ast, lower_forec
-0001f760: 6173 7420 3d20 506f 696e 745f 746f 5f50  ast = Point_to_P
-0001f770: 726f 6261 6269 6c69 7479 280d 0a20 2020  robability(..   
-0001f780: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001f790: 662e 736b 7472 6169 6e64 6174 612c 0d0a  f.sktraindata,..
-0001f7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f7b0: 666f 7265 6361 7374 2c0d 0a20 2020 2020  forecast,..     
-0001f7c0: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-0001f7d0: 643d 2769 6e66 6572 7265 645f 6e6f 726d  d='inferred_norm
-0001f7e0: 616c 272c 0d0a 2020 2020 2020 2020 2020  al',..          
-0001f7f0: 2020 2020 2020 7072 6564 6963 7469 6f6e        prediction
-0001f800: 5f69 6e74 6572 7661 6c3d 7365 6c66 2e70  _interval=self.p
-0001f810: 7265 6469 6374 696f 6e5f 696e 7465 7276  rediction_interv
-0001f820: 616c 2c0d 0a20 2020 2020 2020 2020 2020  al,..           
-0001f830: 2029 0d0a 2020 2020 2020 2020 7570 7065   )..        uppe
-0001f840: 725f 666f 7265 6361 7374 203d 2075 7070  r_forecast = upp
-0001f850: 6572 5f66 6f72 6563 6173 745b 7365 6c66  er_forecast[self
-0001f860: 2e63 6f6c 756d 6e5f 6e61 6d65 735d 0d0a  .column_names]..
-0001f870: 2020 2020 2020 2020 6c6f 7765 725f 666f          lower_fo
-0001f880: 7265 6361 7374 203d 206c 6f77 6572 5f66  recast = lower_f
-0001f890: 6f72 6563 6173 745b 7365 6c66 2e63 6f6c  orecast[self.col
-0001f8a0: 756d 6e5f 6e61 6d65 735d 0d0a 0d0a 2020  umn_names]....  
-0001f8b0: 2020 2020 2020 6966 206a 7573 745f 706f        if just_po
-0001f8c0: 696e 745f 666f 7265 6361 7374 3a0d 0a20  int_forecast:.. 
-0001f8d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001f8e0: 6e20 666f 7265 6361 7374 0d0a 2020 2020  n forecast..    
-0001f8f0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0001f900: 2020 2020 2020 2070 7265 6469 6374 5f72         predict_r
-0001f910: 756e 7469 6d65 203d 2064 6174 6574 696d  untime = datetim
-0001f920: 652e 6461 7465 7469 6d65 2e6e 6f77 2829  e.datetime.now()
-0001f930: 202d 2070 7265 6469 6374 5374 6172 7454   - predictStartT
-0001f940: 696d 650d 0a20 2020 2020 2020 2020 2020  ime..           
-0001f950: 2070 7265 6469 6374 696f 6e20 3d20 5072   prediction = Pr
-0001f960: 6564 6963 7469 6f6e 4f62 6a65 6374 280d  edictionObject(.
+0001f510: 2020 2020 6577 6d5f 7661 725f 616c 7068      ewm_var_alph
+0001f520: 613d 7365 6c66 2e65 776d 5f76 6172 5f61  a=self.ewm_var_a
+0001f530: 6c70 6861 2c0d 0a20 2020 2020 2020 2020  lpha,..         
+0001f540: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0001f550: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
+0001f560: 675f 7065 7269 6f64 733d 7365 6c66 2e71  g_periods=self.q
+0001f570: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
+0001f580: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
+0001f590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f5a0: 2020 2020 7175 616e 7469 6c65 3130 5f72      quantile10_r
+0001f5b0: 6f6c 6c69 6e67 5f70 6572 696f 6473 3d73  olling_periods=s
+0001f5c0: 656c 662e 7175 616e 7469 6c65 3130 5f72  elf.quantile10_r
+0001f5d0: 6f6c 6c69 6e67 5f70 6572 696f 6473 2c0d  olling_periods,.
+0001f5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f5f0: 2020 2020 2020 2020 2061 6464 6974 696f           additio
+0001f600: 6e61 6c5f 6c61 675f 7065 7269 6f64 733d  nal_lag_periods=
+0001f610: 7365 6c66 2e61 6464 6974 696f 6e61 6c5f  self.additional_
+0001f620: 6c61 675f 7065 7269 6f64 732c 0d0a 2020  lag_periods,..  
+0001f630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f640: 2020 2020 2020 6577 6d5f 616c 7068 613d        ewm_alpha=
+0001f650: 7365 6c66 2e65 776d 5f61 6c70 6861 2c0d  self.ewm_alpha,.
+0001f660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f670: 2020 2020 2020 2020 2061 6273 5f65 6e65           abs_ene
+0001f680: 7267 793d 7365 6c66 2e61 6273 5f65 6e65  rgy=self.abs_ene
+0001f690: 7267 792c 0d0a 2020 2020 2020 2020 2020  rgy,..          
+0001f6a0: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+0001f6b0: 6c6c 696e 675f 6175 746f 636f 7272 5f70  lling_autocorr_p
+0001f6c0: 6572 696f 6473 3d73 656c 662e 726f 6c6c  eriods=self.roll
+0001f6d0: 696e 675f 6175 746f 636f 7272 5f70 6572  ing_autocorr_per
+0001f6e0: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+0001f6f0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001f700: 6f6e 7a65 726f 5f6c 6173 745f 6e3d 7365  onzero_last_n=se
+0001f710: 6c66 2e6e 6f6e 7a65 726f 5f6c 6173 745f  lf.nonzero_last_
+0001f720: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
+0001f730: 2020 2020 2020 2020 2020 2020 6164 645f              add_
+0001f740: 6461 7465 5f70 6172 743d 7365 6c66 2e64  date_part=self.d
+0001f750: 6174 6570 6172 745f 6d65 7468 6f64 2c0d  atepart_method,.
+0001f760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f770: 2020 2020 2020 2020 2068 6f6c 6964 6179           holiday
+0001f780: 3d73 656c 662e 686f 6c69 6461 792c 0d0a  =self.holiday,..
+0001f790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f7a0: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
+0001f7b0: 636f 756e 7472 793d 7365 6c66 2e68 6f6c  country=self.hol
+0001f7c0: 6964 6179 5f63 6f75 6e74 7279 2c0d 0a20  iday_country,.. 
+0001f7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f7e0: 2020 2020 2020 2070 6f6c 796e 6f6d 6961         polynomia
+0001f7f0: 6c5f 6465 6772 6565 3d73 656c 662e 706f  l_degree=self.po
+0001f800: 6c79 6e6f 6d69 616c 5f64 6567 7265 652c  lynomial_degree,
+0001f810: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001f820: 2020 2020 2020 2020 2020 7769 6e64 6f77            window
+0001f830: 3d73 656c 662e 7769 6e64 6f77 2c0d 0a20  =self.window,.. 
+0001f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f850: 2020 2020 2020 2066 7574 7572 655f 7265         future_re
+0001f860: 6772 6573 736f 723d 6375 725f 7265 6772  gressor=cur_regr
+0001f870: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001f880: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+0001f890: 7365 2072 656c 7920 7468 6520 6966 2070  se rely the if p
+0001f8a0: 6172 7420 6e6f 7420 6265 696e 6720 7275  art not being ru
+0001f8b0: 6e20 6966 204e 6f6e 650d 0a20 2020 2020  n if None..     
+0001f8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f8d0: 2020 2072 6567 7265 7373 6f72 5f70 6572     regressor_per
+0001f8e0: 5f73 6572 6965 733d 7265 6772 6573 736f  _series=regresso
+0001f8f0: 725f 7065 725f 7365 7269 6573 5b78 5f63  r_per_series[x_c
+0001f900: 6f6c 5d0d 0a20 2020 2020 2020 2020 2020  ol]..           
+0001f910: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f920: 7365 6c66 2e72 6567 7265 7373 6f72 5f70  self.regressor_p
+0001f930: 6572 5f73 6572 6965 735f 7472 6169 6e20  er_series_train 
+0001f940: 6973 206e 6f74 204e 6f6e 650d 0a20 2020  is not None..   
+0001f950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f960: 2020 2020 2065 6c73 6520 4e6f 6e65 2c0d       else None,.
 0001f970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f980: 206d 6f64 656c 5f6e 616d 653d 7365 6c66   model_name=self
-0001f990: 2e6e 616d 652c 0d0a 2020 2020 2020 2020  .name,..        
-0001f9a0: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-0001f9b0: 5f6c 656e 6774 683d 7365 6c66 2e66 6f72  _length=self.for
-0001f9c0: 6563 6173 745f 6c65 6e67 7468 2c0d 0a20  ecast_length,.. 
-0001f9d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001f9e0: 6f72 6563 6173 745f 696e 6465 783d 666f  orecast_index=fo
-0001f9f0: 7265 6361 7374 2e69 6e64 6578 2c0d 0a20  recast.index,.. 
-0001fa00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001fa10: 6f72 6563 6173 745f 636f 6c75 6d6e 733d  orecast_columns=
-0001fa20: 666f 7265 6361 7374 2e63 6f6c 756d 6e73  forecast.columns
-0001fa30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001fa40: 2020 206c 6f77 6572 5f66 6f72 6563 6173     lower_forecas
-0001fa50: 743d 6c6f 7765 725f 666f 7265 6361 7374  t=lower_forecast
-0001fa60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001fa70: 2020 2066 6f72 6563 6173 743d 666f 7265     forecast=fore
-0001fa80: 6361 7374 2c0d 0a20 2020 2020 2020 2020  cast,..         
-0001fa90: 2020 2020 2020 2075 7070 6572 5f66 6f72         upper_for
-0001faa0: 6563 6173 743d 7570 7065 725f 666f 7265  ecast=upper_fore
-0001fab0: 6361 7374 2c0d 0a20 2020 2020 2020 2020  cast,..         
-0001fac0: 2020 2020 2020 2070 7265 6469 6374 696f         predictio
-0001fad0: 6e5f 696e 7465 7276 616c 3d73 656c 662e  n_interval=self.
-0001fae0: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
-0001faf0: 7661 6c2c 0d0a 2020 2020 2020 2020 2020  val,..          
-0001fb00: 2020 2020 2020 7072 6564 6963 745f 7275        predict_ru
-0001fb10: 6e74 696d 653d 7072 6564 6963 745f 7275  ntime=predict_ru
-0001fb20: 6e74 696d 652c 0d0a 2020 2020 2020 2020  ntime,..        
-0001fb30: 2020 2020 2020 2020 6669 745f 7275 6e74          fit_runt
-0001fb40: 696d 653d 7365 6c66 2e66 6974 5f72 756e  ime=self.fit_run
-0001fb50: 7469 6d65 2c0d 0a20 2020 2020 2020 2020  time,..         
-0001fb60: 2020 2020 2020 206d 6f64 656c 5f70 6172         model_par
-0001fb70: 616d 6574 6572 733d 7365 6c66 2e67 6574  ameters=self.get
-0001fb80: 5f70 6172 616d 7328 292c 0d0a 2020 2020  _params(),..    
-0001fb90: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
-0001fba0: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
-0001fbb0: 6564 6963 7469 6f6e 0d0a 0d0a 2020 2020  ediction....    
-0001fbc0: 6465 6620 6765 745f 6e65 775f 7061 7261  def get_new_para
-0001fbd0: 6d73 2873 656c 662c 206d 6574 686f 643a  ms(self, method:
-0001fbe0: 2073 7472 203d 2027 7261 6e64 6f6d 2729   str = 'random')
-0001fbf0: 3a0d 0a20 2020 2020 2020 2022 2222 5265  :..        """Re
-0001fc00: 7475 726e 2064 6963 7420 6f66 206e 6577  turn dict of new
-0001fc10: 2070 6172 616d 6574 6572 7320 666f 7220   parameters for 
-0001fc20: 7061 7261 6d65 7465 7220 7475 6e69 6e67  parameter tuning
-0001fc30: 2e22 2222 0d0a 2020 2020 2020 2020 6966  ."""..        if
-0001fc40: 206d 6574 686f 6420 3d3d 2022 6465 6570   method == "deep
-0001fc50: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-0001fc60: 6d6f 6465 6c5f 6368 6f69 6365 203d 2067  model_choice = g
-0001fc70: 656e 6572 6174 655f 7265 6772 6573 736f  enerate_regresso
-0001fc80: 725f 7061 7261 6d73 280d 0a20 2020 2020  r_params(..     
-0001fc90: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-0001fca0: 5f64 6963 743d 736b 6c65 6172 6e5f 6d6f  _dict=sklearn_mo
-0001fcb0: 6465 6c5f 6469 6374 2c20 6d65 7468 6f64  del_dict, method
-0001fcc0: 3d6d 6574 686f 640d 0a20 2020 2020 2020  =method..       
-0001fcd0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-0001fce0: 2020 2020 7769 6e64 6f77 5f63 686f 6963      window_choic
-0001fcf0: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
-0001fd00: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
-0001fd10: 2020 2020 205b 4e6f 6e65 2c20 332c 2037       [None, 3, 7
-0001fd20: 2c20 3130 2c20 3134 2c20 3238 5d2c 205b  , 10, 14, 28], [
-0001fd30: 302e 322c 2030 2e32 2c20 302e 3035 2c20  0.2, 0.2, 0.05, 
-0001fd40: 302e 3035 2c20 302e 3035 2c20 302e 3035  0.05, 0.05, 0.05
-0001fd50: 5d0d 0a20 2020 2020 2020 2020 2020 2029  ]..            )
-0001fd60: 5b30 5d0d 0a20 2020 2020 2020 2020 2020  [0]..           
-0001fd70: 2070 726f 6261 6269 6c69 7374 6963 203d   probabilistic =
-0001fd80: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-0001fd90: 5b54 7275 652c 2046 616c 7365 5d2c 205b  [True, False], [
-0001fda0: 302e 322c 2030 2e38 5d29 5b30 5d0d 0a20  0.2, 0.8])[0].. 
-0001fdb0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0001fdc0: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-0001fdd0: 6368 6f69 6365 203d 2067 656e 6572 6174  choice = generat
-0001fde0: 655f 7265 6772 6573 736f 725f 7061 7261  e_regressor_para
-0001fdf0: 6d73 280d 0a20 2020 2020 2020 2020 2020  ms(..           
-0001fe00: 2020 2020 206d 6f64 656c 5f64 6963 743d       model_dict=
-0001fe10: 6d75 6c74 6976 6172 6961 7465 5f6d 6f64  multivariate_mod
-0001fe20: 656c 5f64 6963 742c 206d 6574 686f 643d  el_dict, method=
-0001fe30: 6d65 7468 6f64 0d0a 2020 2020 2020 2020  method..        
-0001fe40: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-0001fe50: 2020 2077 696e 646f 775f 6368 6f69 6365     window_choice
-0001fe60: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
-0001fe70: 7328 5b4e 6f6e 652c 2033 2c20 372c 2031  s([None, 3, 7, 1
-0001fe80: 305d 2c20 5b30 2e32 2c20 302e 322c 2030  0], [0.2, 0.2, 0
-0001fe90: 2e30 352c 2030 2e30 355d 295b 305d 0d0a  .05, 0.05])[0]..
-0001fea0: 2020 2020 2020 2020 2020 2020 7072 6f62              prob
-0001feb0: 6162 696c 6973 7469 6320 3d20 4661 6c73  abilistic = Fals
-0001fec0: 650d 0a20 2020 2020 2020 206d 6561 6e5f  e..        mean_
-0001fed0: 726f 6c6c 696e 675f 7065 7269 6f64 735f  rolling_periods_
-0001fee0: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
-0001fef0: 6368 6f69 6365 7328 0d0a 2020 2020 2020  choices(..      
-0001ff00: 2020 2020 2020 5b4e 6f6e 652c 2035 2c20        [None, 5, 
-0001ff10: 372c 2031 322c 2033 302c 2039 305d 2c20  7, 12, 30, 90], 
-0001ff20: 5b30 2e33 2c20 302e 312c 2030 2e31 2c20  [0.3, 0.1, 0.1, 
-0001ff30: 302e 312c 2030 2e31 2c20 302e 3035 5d0d  0.1, 0.1, 0.05].
-0001ff40: 0a20 2020 2020 2020 2029 5b30 5d0d 0a20  .        )[0].. 
-0001ff50: 2020 2020 2020 2069 6620 6d65 616e 5f72         if mean_r
-0001ff60: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-0001ff70: 686f 6963 6520 6973 206e 6f74 204e 6f6e  hoice is not Non
-0001ff80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001ff90: 6d61 6364 5f70 6572 696f 6473 5f63 686f  macd_periods_cho
-0001ffa0: 6963 6520 3d20 7365 6173 6f6e 616c 5f69  ice = seasonal_i
-0001ffb0: 6e74 2873 6d61 6c6c 3d54 7275 6529 0d0a  nt(small=True)..
-0001ffc0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-0001ffd0: 6163 645f 7065 7269 6f64 735f 6368 6f69  acd_periods_choi
-0001ffe0: 6365 203d 3d20 6d65 616e 5f72 6f6c 6c69  ce == mean_rolli
-0001fff0: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
-00020000: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00020010: 2020 2020 6d61 6364 5f70 6572 696f 6473      macd_periods
-00020020: 5f63 686f 6963 6520 3d20 6d65 616e 5f72  _choice = mean_r
-00020030: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-00020040: 686f 6963 6520 2b20 3130 0d0a 2020 2020  hoice + 10..    
-00020050: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00020060: 2020 2020 2020 206d 6163 645f 7065 7269         macd_peri
-00020070: 6f64 735f 6368 6f69 6365 203d 204e 6f6e  ods_choice = Non
-00020080: 650d 0a20 2020 2020 2020 2073 7464 5f72  e..        std_r
-00020090: 6f6c 6c69 6e67 5f70 6572 696f 6473 5f63  olling_periods_c
-000200a0: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-000200b0: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-000200c0: 2020 2020 205b 4e6f 6e65 2c20 352c 2037       [None, 5, 7
-000200d0: 2c20 3130 2c20 3330 2c20 3930 5d2c 205b  , 10, 30, 90], [
-000200e0: 302e 332c 2030 2e31 2c20 302e 312c 2030  0.3, 0.1, 0.1, 0
-000200f0: 2e31 2c20 302e 312c 2030 2e30 355d 0d0a  .1, 0.1, 0.05]..
-00020100: 2020 2020 2020 2020 295b 305d 0d0a 2020          )[0]..  
-00020110: 2020 2020 2020 6577 6d5f 7661 725f 616c        ewm_var_al
-00020120: 7068 6120 3d20 7261 6e64 6f6d 2e63 686f  pha = random.cho
-00020130: 6963 6573 285b 4e6f 6e65 2c20 302e 322c  ices([None, 0.2,
-00020140: 2030 2e35 2c20 302e 385d 2c20 5b30 2e34   0.5, 0.8], [0.4
-00020150: 2c20 302e 312c 2030 2e31 2c20 302e 3035  , 0.1, 0.1, 0.05
-00020160: 5d29 5b30 5d0d 0a20 2020 2020 2020 2071  ])[0]..        q
-00020170: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
-00020180: 675f 7065 7269 6f64 7320 3d20 7261 6e64  g_periods = rand
-00020190: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
-000201a0: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
-000201b0: 352c 2037 2c20 3130 2c20 3330 2c20 3930  5, 7, 10, 30, 90
-000201c0: 5d2c 205b 302e 332c 2030 2e31 2c20 302e  ], [0.3, 0.1, 0.
-000201d0: 312c 2030 2e31 2c20 302e 312c 2030 2e30  1, 0.1, 0.1, 0.0
-000201e0: 355d 0d0a 2020 2020 2020 2020 295b 305d  5]..        )[0]
-000201f0: 0d0a 2020 2020 2020 2020 7175 616e 7469  ..        quanti
-00020200: 6c65 3130 5f72 6f6c 6c69 6e67 5f70 6572  le10_rolling_per
-00020210: 696f 6473 203d 2072 616e 646f 6d2e 6368  iods = random.ch
-00020220: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
-00020230: 2020 2020 5b4e 6f6e 652c 2035 2c20 372c      [None, 5, 7,
-00020240: 2031 302c 2033 302c 2039 305d 2c20 5b30   10, 30, 90], [0
-00020250: 2e33 2c20 302e 312c 2030 2e31 2c20 302e  .3, 0.1, 0.1, 0.
-00020260: 312c 2030 2e31 2c20 302e 3035 5d0d 0a20  1, 0.1, 0.05].. 
-00020270: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
-00020280: 2020 2020 206d 6178 5f72 6f6c 6c69 6e67       max_rolling
-00020290: 5f70 6572 696f 6473 5f63 686f 6963 6520  _periods_choice 
-000202a0: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-000202b0: 280d 0a20 2020 2020 2020 2020 2020 205b  (..            [
-000202c0: 4e6f 6e65 2c20 7365 6173 6f6e 616c 5f69  None, seasonal_i
-000202d0: 6e74 2873 6d61 6c6c 3d54 7275 6529 5d2c  nt(small=True)],
-000202e0: 205b 302e 322c 2030 2e35 5d0d 0a20 2020   [0.2, 0.5]..   
-000202f0: 2020 2020 2029 5b30 5d0d 0a20 2020 2020       )[0]..     
-00020300: 2020 206d 696e 5f72 6f6c 6c69 6e67 5f70     min_rolling_p
-00020310: 6572 696f 6473 5f63 686f 6963 6520 3d20  eriods_choice = 
-00020320: 7261 6e64 6f6d 2e63 686f 6963 6573 280d  random.choices(.
-00020330: 0a20 2020 2020 2020 2020 2020 205b 4e6f  .            [No
-00020340: 6e65 2c20 7365 6173 6f6e 616c 5f69 6e74  ne, seasonal_int
-00020350: 2873 6d61 6c6c 3d54 7275 6529 5d2c 205b  (small=True)], [
-00020360: 302e 322c 2030 2e35 5d0d 0a20 2020 2020  0.2, 0.5]..     
-00020370: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
-00020380: 206c 6167 5f70 6572 696f 6473 5f63 686f   lag_periods_cho
-00020390: 6963 6520 3d20 4e6f 6e65 0d0a 2020 2020  ice = None..    
-000203a0: 2020 2020 6577 6d5f 6368 6f69 6365 203d      ewm_choice =
-000203b0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-000203c0: 0d0a 2020 2020 2020 2020 2020 2020 5b4e  ..            [N
-000203d0: 6f6e 652c 2030 2e31 2c20 302e 322c 2030  one, 0.1, 0.2, 0
-000203e0: 2e35 2c20 302e 385d 2c20 5b30 2e34 2c20  .5, 0.8], [0.4, 
-000203f0: 302e 3031 2c20 302e 312c 2030 2e31 2c20  0.01, 0.1, 0.1, 
-00020400: 302e 3035 5d0d 0a20 2020 2020 2020 2029  0.05]..        )
-00020410: 5b30 5d0d 0a20 2020 2020 2020 2061 6273  [0]..        abs
-00020420: 5f65 6e65 7267 795f 6368 6f69 6365 203d  _energy_choice =
-00020430: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00020440: 726f 6c6c 696e 675f 6175 746f 636f 7272  rolling_autocorr
-00020450: 5f70 6572 696f 6473 5f63 686f 6963 6520  _periods_choice 
-00020460: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
-00020470: 280d 0a20 2020 2020 2020 2020 2020 205b  (..            [
-00020480: 4e6f 6e65 2c20 322c 2037 2c20 3132 2c20  None, 2, 7, 12, 
-00020490: 3330 5d2c 205b 302e 342c 2030 2e30 312c  30], [0.4, 0.01,
-000204a0: 2030 2e30 312c 2030 2e30 312c 2030 2e30   0.01, 0.01, 0.0
-000204b0: 315d 0d0a 2020 2020 2020 2020 295b 305d  1]..        )[0]
-000204c0: 0d0a 2020 2020 2020 2020 6e6f 6e7a 6572  ..        nonzer
-000204d0: 6f5f 6c61 7374 5f6e 203d 2072 616e 646f  o_last_n = rando
-000204e0: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
-000204f0: 2020 2020 2020 2020 5b4e 6f6e 652c 2032          [None, 2
-00020500: 2c20 372c 2031 342c 2033 305d 2c20 5b30  , 7, 14, 30], [0
-00020510: 2e36 2c20 302e 3031 2c20 302e 312c 2030  .6, 0.01, 0.1, 0
-00020520: 2e31 2c20 302e 3031 5d0d 0a20 2020 2020  .1, 0.01]..     
-00020530: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
-00020540: 2061 6464 5f64 6174 655f 7061 7274 5f63   add_date_part_c
-00020550: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-00020560: 686f 6963 6573 280d 0a20 2020 2020 2020  hoices(..       
-00020570: 2020 2020 205b 0d0a 2020 2020 2020 2020       [..        
-00020580: 2020 2020 2020 2020 4e6f 6e65 2c0d 0a20          None,.. 
-00020590: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-000205a0: 7369 6d70 6c65 272c 0d0a 2020 2020 2020  simple',..      
-000205b0: 2020 2020 2020 2020 2020 2765 7870 616e            'expan
-000205c0: 6465 6427 2c0d 0a20 2020 2020 2020 2020  ded',..         
-000205d0: 2020 2020 2020 2027 7265 6375 7272 696e         'recurrin
-000205e0: 6727 2c0d 0a20 2020 2020 2020 2020 2020  g',..           
-000205f0: 2020 2020 2022 7369 6d70 6c65 5f32 222c       "simple_2",
-00020600: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020610: 2020 2273 696d 706c 655f 325f 706f 6c79    "simple_2_poly
-00020620: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00020630: 2020 2020 2273 696d 706c 655f 6269 6e61      "simple_bina
-00020640: 7269 7a65 6422 2c0d 0a20 2020 2020 2020  rized",..       
-00020650: 2020 2020 2020 2020 2022 636f 6d6d 6f6e           "common
-00020660: 5f66 6f75 7269 6572 222c 0d0a 2020 2020  _fourier",..    
-00020670: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
-00020680: 616e 6465 645f 6269 6e61 7269 7a65 6422  anded_binarized"
-00020690: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000206a0: 2020 2022 636f 6d6d 6f6e 5f66 6f75 7269     "common_fouri
-000206b0: 6572 5f72 7722 2c0d 0a20 2020 2020 2020  er_rw",..       
-000206c0: 2020 2020 205d 2c0d 0a20 2020 2020 2020       ],..       
-000206d0: 2020 2020 205b 302e 322c 2030 2e30 352c       [0.2, 0.05,
-000206e0: 2030 2e31 2c20 302e 312c 2030 2e30 352c   0.1, 0.1, 0.05,
-000206f0: 2030 2e31 2c20 302e 3035 2c20 302e 3035   0.1, 0.05, 0.05
-00020700: 2c20 302e 3035 2c20 302e 3032 355d 2c0d  , 0.05, 0.025],.
-00020710: 0a20 2020 2020 2020 2029 5b30 5d0d 0a20  .        )[0].. 
-00020720: 2020 2020 2020 2068 6f6c 6964 6179 5f63         holiday_c
-00020730: 686f 6963 6520 3d20 7261 6e64 6f6d 2e63  hoice = random.c
-00020740: 686f 6963 6573 285b 5472 7565 2c20 4661  hoices([True, Fa
-00020750: 6c73 655d 2c20 5b30 2e31 2c20 302e 395d  lse], [0.1, 0.9]
-00020760: 295b 305d 0d0a 2020 2020 2020 2020 706f  )[0]..        po
-00020770: 6c79 6e6f 6d69 616c 5f64 6567 7265 655f  lynomial_degree_
-00020780: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
-00020790: 6368 6f69 6365 7328 5b4e 6f6e 652c 2032  choices([None, 2
-000207a0: 5d2c 205b 302e 3939 352c 2030 2e30 3035  ], [0.995, 0.005
-000207b0: 5d29 5b30 5d0d 0a20 2020 2020 2020 2069  ])[0]..        i
-000207c0: 6620 2272 6567 7265 7373 6f72 2220 696e  f "regressor" in
-000207d0: 206d 6574 686f 643a 0d0a 2020 2020 2020   method:..      
-000207e0: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
-000207f0: 5f63 686f 6963 6520 3d20 2255 7365 7222  _choice = "User"
-00020800: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00020810: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
-00020820: 7265 7373 696f 6e5f 6368 6f69 6365 203d  ression_choice =
-00020830: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00020840: 5b4e 6f6e 652c 2027 5573 6572 275d 2c20  [None, 'User'], 
-00020850: 5b30 2e37 2c20 302e 335d 295b 305d 0d0a  [0.7, 0.3])[0]..
-00020860: 2020 2020 2020 2020 636f 696e 745f 6368          coint_ch
-00020870: 6f69 6365 203d 2072 616e 646f 6d2e 6368  oice = random.ch
-00020880: 6f69 6365 7328 5b4e 6f6e 652c 2022 4254  oices([None, "BT
-00020890: 4344 222c 2022 4a6f 6861 6e73 656e 225d  CD", "Johansen"]
-000208a0: 2c20 5b30 2e38 2c20 302e 312c 2030 2e31  , [0.8, 0.1, 0.1
-000208b0: 5d29 5b30 5d0d 0a20 2020 2020 2020 2063  ])[0]..        c
-000208c0: 6f69 6e74 5f6c 6167 203d 2031 0d0a 2020  oint_lag = 1..  
-000208d0: 2020 2020 2020 6966 2063 6f69 6e74 5f63        if coint_c
-000208e0: 686f 6963 6520 6973 206e 6f74 204e 6f6e  hoice is not Non
-000208f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00020900: 636f 696e 745f 6c61 6720 3d20 7261 6e64  coint_lag = rand
-00020910: 6f6d 2e63 686f 6963 6528 5b31 2c20 322c  om.choice([1, 2,
-00020920: 2037 5d29 0d0a 2020 2020 2020 2020 7061   7])..        pa
-00020930: 7261 6d65 7465 725f 6469 6374 203d 207b  rameter_dict = {
-00020940: 0d0a 2020 2020 2020 2020 2020 2020 2772  ..            'r
-00020950: 6567 7265 7373 696f 6e5f 6d6f 6465 6c27  egression_model'
-00020960: 3a20 6d6f 6465 6c5f 6368 6f69 6365 2c0d  : model_choice,.
-00020970: 0a20 2020 2020 2020 2020 2020 2027 6d65  .            'me
-00020980: 616e 5f72 6f6c 6c69 6e67 5f70 6572 696f  an_rolling_perio
-00020990: 6473 273a 206d 6561 6e5f 726f 6c6c 696e  ds': mean_rollin
-000209a0: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
-000209b0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-000209c0: 6d61 6364 5f70 6572 696f 6473 273a 206d  macd_periods': m
-000209d0: 6163 645f 7065 7269 6f64 735f 6368 6f69  acd_periods_choi
-000209e0: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-000209f0: 2027 7374 645f 726f 6c6c 696e 675f 7065   'std_rolling_pe
-00020a00: 7269 6f64 7327 3a20 7374 645f 726f 6c6c  riods': std_roll
-00020a10: 696e 675f 7065 7269 6f64 735f 6368 6f69  ing_periods_choi
-00020a20: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-00020a30: 2027 6d61 785f 726f 6c6c 696e 675f 7065   'max_rolling_pe
-00020a40: 7269 6f64 7327 3a20 6d61 785f 726f 6c6c  riods': max_roll
-00020a50: 696e 675f 7065 7269 6f64 735f 6368 6f69  ing_periods_choi
-00020a60: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-00020a70: 2027 6d69 6e5f 726f 6c6c 696e 675f 7065   'min_rolling_pe
-00020a80: 7269 6f64 7327 3a20 6d69 6e5f 726f 6c6c  riods': min_roll
-00020a90: 696e 675f 7065 7269 6f64 735f 6368 6f69  ing_periods_choi
-00020aa0: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
-00020ab0: 2022 7175 616e 7469 6c65 3930 5f72 6f6c   "quantile90_rol
-00020ac0: 6c69 6e67 5f70 6572 696f 6473 223a 2071  ling_periods": q
-00020ad0: 7561 6e74 696c 6539 305f 726f 6c6c 696e  uantile90_rollin
-00020ae0: 675f 7065 7269 6f64 732c 0d0a 2020 2020  g_periods,..    
-00020af0: 2020 2020 2020 2020 2271 7561 6e74 696c          "quantil
-00020b00: 6531 305f 726f 6c6c 696e 675f 7065 7269  e10_rolling_peri
-00020b10: 6f64 7322 3a20 7175 616e 7469 6c65 3130  ods": quantile10
-00020b20: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-00020b30: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00020b40: 6577 6d5f 616c 7068 6127 3a20 6577 6d5f  ewm_alpha': ewm_
-00020b50: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00020b60: 2020 2020 2022 6577 6d5f 7661 725f 616c       "ewm_var_al
-00020b70: 7068 6122 3a20 6577 6d5f 7661 725f 616c  pha": ewm_var_al
-00020b80: 7068 612c 0d0a 2020 2020 2020 2020 2020  pha,..          
-00020b90: 2020 2761 6464 6974 696f 6e61 6c5f 6c61    'additional_la
-00020ba0: 675f 7065 7269 6f64 7327 3a20 6c61 675f  g_periods': lag_
-00020bb0: 7065 7269 6f64 735f 6368 6f69 6365 2c0d  periods_choice,.
-00020bc0: 0a20 2020 2020 2020 2020 2020 2027 6162  .            'ab
-00020bd0: 735f 656e 6572 6779 273a 2061 6273 5f65  s_energy': abs_e
-00020be0: 6e65 7267 795f 6368 6f69 6365 2c0d 0a20  nergy_choice,.. 
-00020bf0: 2020 2020 2020 2020 2020 2027 726f 6c6c             'roll
-00020c00: 696e 675f 6175 746f 636f 7272 5f70 6572  ing_autocorr_per
-00020c10: 696f 6473 273a 2072 6f6c 6c69 6e67 5f61  iods': rolling_a
-00020c20: 7574 6f63 6f72 725f 7065 7269 6f64 735f  utocorr_periods_
-00020c30: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
-00020c40: 2020 2020 2027 6e6f 6e7a 6572 6f5f 6c61       'nonzero_la
-00020c50: 7374 5f6e 273a 206e 6f6e 7a65 726f 5f6c  st_n': nonzero_l
-00020c60: 6173 745f 6e2c 0d0a 2020 2020 2020 2020  ast_n,..        
-00020c70: 2020 2020 2764 6174 6570 6172 745f 6d65      'datepart_me
-00020c80: 7468 6f64 273a 2061 6464 5f64 6174 655f  thod': add_date_
-00020c90: 7061 7274 5f63 686f 6963 652c 0d0a 2020  part_choice,..  
-00020ca0: 2020 2020 2020 2020 2020 2770 6f6c 796e            'polyn
-00020cb0: 6f6d 6961 6c5f 6465 6772 6565 273a 2070  omial_degree': p
-00020cc0: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
-00020cd0: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
-00020ce0: 2020 2020 2020 2772 6567 7265 7373 696f        'regressio
-00020cf0: 6e5f 7479 7065 273a 2072 6567 7265 7373  n_type': regress
-00020d00: 696f 6e5f 6368 6f69 6365 2c0d 0a20 2020  ion_choice,..   
-00020d10: 2020 2020 2020 2020 2027 7769 6e64 6f77           'window
-00020d20: 273a 2077 696e 646f 775f 6368 6f69 6365  ': window_choice
-00020d30: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00020d40: 686f 6c69 6461 7927 3a20 686f 6c69 6461  holiday': holida
-00020d50: 795f 6368 6f69 6365 2c0d 0a20 2020 2020  y_choice,..     
-00020d60: 2020 2020 2020 2022 7072 6f62 6162 696c         "probabil
-00020d70: 6973 7469 6322 3a20 7072 6f62 6162 696c  istic": probabil
-00020d80: 6973 7469 632c 0d0a 2020 2020 2020 2020  istic,..        
-00020d90: 2020 2020 2773 6361 6c65 5f66 756c 6c5f      'scale_full_
-00020da0: 5827 3a20 7261 6e64 6f6d 2e63 686f 6963  X': random.choic
-00020db0: 6573 285b 5472 7565 2c20 4661 6c73 655d  es([True, False]
-00020dc0: 2c20 5b30 2e32 2c20 302e 385d 295b 305d  , [0.2, 0.8])[0]
-00020dd0: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00020de0: 636f 696e 7465 6772 6174 696f 6e22 3a20  cointegration": 
-00020df0: 636f 696e 745f 6368 6f69 6365 2c0d 0a20  coint_choice,.. 
-00020e00: 2020 2020 2020 2020 2020 2022 636f 696e             "coin
-00020e10: 7465 6772 6174 696f 6e5f 6c61 6722 3a20  tegration_lag": 
-00020e20: 636f 696e 745f 6c61 672c 0d0a 2020 2020  coint_lag,..    
-00020e30: 2020 2020 7d0d 0a20 2020 2020 2020 2072      }..        r
-00020e40: 6574 7572 6e20 7061 7261 6d65 7465 725f  eturn parameter_
-00020e50: 6469 6374 0d0a 0d0a 2020 2020 6465 6620  dict....    def 
-00020e60: 6765 745f 7061 7261 6d73 2873 656c 6629  get_params(self)
-00020e70: 3a0d 0a20 2020 2020 2020 2022 2222 5265  :..        """Re
-00020e80: 7475 726e 2064 6963 7420 6f66 2063 7572  turn dict of cur
-00020e90: 7265 6e74 2070 6172 616d 6574 6572 732e  rent parameters.
-00020ea0: 2222 220d 0a20 2020 2020 2020 2070 6172  """..        par
-00020eb0: 616d 6574 6572 5f64 6963 7420 3d20 7b0d  ameter_dict = {.
-00020ec0: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-00020ed0: 6772 6573 7369 6f6e 5f6d 6f64 656c 273a  gression_model':
-00020ee0: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
-00020ef0: 5f6d 6f64 656c 2c0d 0a20 2020 2020 2020  _model,..       
-00020f00: 2020 2020 2027 6d65 616e 5f72 6f6c 6c69       'mean_rolli
-00020f10: 6e67 5f70 6572 696f 6473 273a 2073 656c  ng_periods': sel
-00020f20: 662e 6d65 616e 5f72 6f6c 6c69 6e67 5f70  f.mean_rolling_p
-00020f30: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-00020f40: 2020 2020 2027 6d61 6364 5f70 6572 696f       'macd_perio
-00020f50: 6473 273a 2073 656c 662e 6d61 6364 5f70  ds': self.macd_p
-00020f60: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
-00020f70: 2020 2020 2027 7374 645f 726f 6c6c 696e       'std_rollin
-00020f80: 675f 7065 7269 6f64 7327 3a20 7365 6c66  g_periods': self
-00020f90: 2e73 7464 5f72 6f6c 6c69 6e67 5f70 6572  .std_rolling_per
-00020fa0: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
-00020fb0: 2020 2027 6d61 785f 726f 6c6c 696e 675f     'max_rolling_
-00020fc0: 7065 7269 6f64 7327 3a20 7365 6c66 2e6d  periods': self.m
-00020fd0: 6178 5f72 6f6c 6c69 6e67 5f70 6572 696f  ax_rolling_perio
-00020fe0: 6473 2c0d 0a20 2020 2020 2020 2020 2020  ds,..           
-00020ff0: 2027 6d69 6e5f 726f 6c6c 696e 675f 7065   'min_rolling_pe
-00021000: 7269 6f64 7327 3a20 7365 6c66 2e6d 696e  riods': self.min
-00021010: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
-00021020: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
-00021030: 7175 616e 7469 6c65 3930 5f72 6f6c 6c69  quantile90_rolli
-00021040: 6e67 5f70 6572 696f 6473 223a 2073 656c  ng_periods": sel
-00021050: 662e 7175 616e 7469 6c65 3930 5f72 6f6c  f.quantile90_rol
-00021060: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
-00021070: 2020 2020 2020 2020 2020 2022 7175 616e             "quan
-00021080: 7469 6c65 3130 5f72 6f6c 6c69 6e67 5f70  tile10_rolling_p
-00021090: 6572 696f 6473 223a 2073 656c 662e 7175  eriods": self.qu
-000210a0: 616e 7469 6c65 3130 5f72 6f6c 6c69 6e67  antile10_rolling
-000210b0: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-000210c0: 2020 2020 2020 2027 6577 6d5f 616c 7068         'ewm_alph
-000210d0: 6127 3a20 7365 6c66 2e65 776d 5f61 6c70  a': self.ewm_alp
-000210e0: 6861 2c0d 0a20 2020 2020 2020 2020 2020  ha,..           
-000210f0: 2022 6577 6d5f 7661 725f 616c 7068 6122   "ewm_var_alpha"
-00021100: 3a20 7365 6c66 2e65 776d 5f76 6172 5f61  : self.ewm_var_a
-00021110: 6c70 6861 2c0d 0a20 2020 2020 2020 2020  lpha,..         
-00021120: 2020 2027 6164 6469 7469 6f6e 616c 5f6c     'additional_l
-00021130: 6167 5f70 6572 696f 6473 273a 2073 656c  ag_periods': sel
-00021140: 662e 6164 6469 7469 6f6e 616c 5f6c 6167  f.additional_lag
-00021150: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
-00021160: 2020 2020 2020 2027 6162 735f 656e 6572         'abs_ener
-00021170: 6779 273a 2073 656c 662e 6162 735f 656e  gy': self.abs_en
-00021180: 6572 6779 2c0d 0a20 2020 2020 2020 2020  ergy,..         
-00021190: 2020 2027 726f 6c6c 696e 675f 6175 746f     'rolling_auto
-000211a0: 636f 7272 5f70 6572 696f 6473 273a 2073  corr_periods': s
-000211b0: 656c 662e 726f 6c6c 696e 675f 6175 746f  elf.rolling_auto
-000211c0: 636f 7272 5f70 6572 696f 6473 2c0d 0a20  corr_periods,.. 
-000211d0: 2020 2020 2020 2020 2020 2027 6e6f 6e7a             'nonz
-000211e0: 6572 6f5f 6c61 7374 5f6e 273a 2073 656c  ero_last_n': sel
-000211f0: 662e 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e  f.nonzero_last_n
-00021200: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00021210: 6461 7465 7061 7274 5f6d 6574 686f 6427  datepart_method'
-00021220: 3a20 7365 6c66 2e64 6174 6570 6172 745f  : self.datepart_
-00021230: 6d65 7468 6f64 2c0d 0a20 2020 2020 2020  method,..       
-00021240: 2020 2020 2027 706f 6c79 6e6f 6d69 616c       'polynomial
-00021250: 5f64 6567 7265 6527 3a20 7365 6c66 2e70  _degree': self.p
-00021260: 6f6c 796e 6f6d 6961 6c5f 6465 6772 6565  olynomial_degree
-00021270: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00021280: 7265 6772 6573 7369 6f6e 5f74 7970 6527  regression_type'
-00021290: 3a20 7365 6c66 2e72 6567 7265 7373 696f  : self.regressio
-000212a0: 6e5f 7479 7065 2c0d 0a20 2020 2020 2020  n_type,..       
-000212b0: 2020 2020 2027 7769 6e64 6f77 273a 2073       'window': s
-000212c0: 656c 662e 7769 6e64 6f77 2c0d 0a20 2020  elf.window,..   
-000212d0: 2020 2020 2020 2020 2027 686f 6c69 6461           'holida
-000212e0: 7927 3a20 7365 6c66 2e68 6f6c 6964 6179  y': self.holiday
-000212f0: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00021300: 7072 6f62 6162 696c 6973 7469 6327 3a20  probabilistic': 
-00021310: 7365 6c66 2e70 726f 6261 6269 6c69 7374  self.probabilist
-00021320: 6963 2c0d 0a20 2020 2020 2020 2020 2020  ic,..           
-00021330: 2027 7363 616c 655f 6675 6c6c 5f58 273a   'scale_full_X':
-00021340: 2073 656c 662e 7363 616c 655f 6675 6c6c   self.scale_full
-00021350: 5f58 2c0d 0a20 2020 2020 2020 2020 2020  _X,..           
-00021360: 2022 636f 696e 7465 6772 6174 696f 6e22   "cointegration"
-00021370: 3a20 7365 6c66 2e63 6f69 6e74 6567 7261  : self.cointegra
-00021380: 7469 6f6e 2c0d 0a20 2020 2020 2020 2020  tion,..         
-00021390: 2020 2022 636f 696e 7465 6772 6174 696f     "cointegratio
-000213a0: 6e5f 6c61 6722 3a20 7365 6c66 2e63 6f69  n_lag": self.coi
-000213b0: 6e74 6567 7261 7469 6f6e 5f6c 6167 2c0d  ntegration_lag,.
-000213c0: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
-000213d0: 2020 2020 7265 7475 726e 2070 6172 616d      return param
-000213e0: 6574 6572 5f64 6963 740d 0a0d 0a0d 0a63  eter_dict......c
-000213f0: 6c61 7373 2056 6563 746f 7269 7a65 644d  lass VectorizedM
-00021400: 756c 7469 4f75 7470 7574 4750 523a 0d0a  ultiOutputGPR:..
-00021410: 2020 2020 2222 2247 6175 7373 6961 6e20      """Gaussian 
-00021420: 5072 6f63 6573 7320 5265 6772 6573 736f  Process Regresso
-00021430: 722e 0d0a 0d0a 2020 2020 4172 6773 3a0d  r.....    Args:.
-00021440: 0a20 2020 2020 2020 206b 6572 6e65 6c20  .        kernel 
-00021450: 2873 7472 293a 206c 696e 6561 722c 2070  (str): linear, p
-00021460: 6f6c 796e 6f6d 6961 6c2c 2072 6266 2c20  olynomial, rbf, 
-00021470: 7065 7269 6f64 6963 2c20 6c6f 6361 6c6c  periodic, locall
-00021480: 795f 7065 7269 6f64 6963 2c20 6578 706f  y_periodic, expo
-00021490: 6e65 6e74 6961 6c0d 0a20 2020 2020 2020  nential..       
-000214a0: 206e 6f69 7365 5f76 6172 2028 666c 6f61   noise_var (floa
-000214b0: 7429 3a20 6e6f 6973 6520 7661 7269 616e  t): noise varian
-000214c0: 6365 2c20 6566 6665 6374 6976 656c 7920  ce, effectively 
-000214d0: 7265 6775 6c61 7269 7a61 7469 6f6e 2e20  regularization. 
-000214e0: 436c 6f73 6520 746f 207a 6572 6f20 6c69  Close to zero li
-000214f0: 7474 6c65 2072 6567 756c 6172 697a 6174  ttle regularizat
-00021500: 696f 6e2c 206c 6172 6765 7220 7661 6c75  ion, larger valu
-00021510: 6573 2063 7265 6174 6520 6d6f 7265 206d  es create more m
-00021520: 6f64 656c 2066 6c65 7869 626c 6974 7920  odel flexiblity 
-00021530: 616e 6420 6e6f 6973 6520 746f 6c65 7261  and noise tolera
-00021540: 6e63 652e 0d0a 2020 2020 2020 2020 6761  nce...        ga
-00021550: 6d6d 613a 2046 6f72 2074 6865 2052 4246  mma: For the RBF
-00021560: 2c20 4578 706f 6e65 6e74 6961 6c2c 2061  , Exponential, a
-00021570: 6e64 204c 6f63 616c 6c79 2050 6572 696f  nd Locally Perio
-00021580: 6469 6320 6b65 726e 656c 732c 20ce b320  dic kernels, .. 
-00021590: 6973 2065 7373 656e 7469 616c 6c79 2061  is essentially a
-000215a0: 6e20 696e 7665 7273 6520 6c65 6e67 7468  n inverse length
-000215b0: 2073 6361 6c65 2e20 5b30 2e31 2c31 2c31   scale. [0.1,1,1
-000215c0: 302c 3130 305d 2e0d 0a20 2020 2020 2020  0,100]...       
-000215d0: 206c 616d 6264 615f 3a20 466f 7220 7468   lambda_: For th
-000215e0: 6520 5065 7269 6f64 6963 2061 6e64 204c  e Periodic and L
-000215f0: 6f63 616c 6c79 2050 6572 696f 6469 6320  ocally Periodic 
-00021600: 6b65 726e 656c 732c 205c 6c61 6d62 6461  kernels, \lambda
-00021610: 5f20 6465 7465 726d 696e 6573 2074 6865  _ determines the
-00021620: 2073 6d6f 6f74 686e 6573 7320 6f66 2074   smoothness of t
-00021630: 6865 2070 6572 696f 6469 6320 6675 6e63  he periodic func
-00021640: 7469 6f6e 2e20 4120 7265 6173 6f6e 6162  tion. A reasonab
-00021650: 6c65 2072 616e 6765 206d 6967 6874 2062  le range might b
-00021660: 6520 5b30 2e31 2c31 2c31 302c 3130 305d  e [0.1,1,10,100]
-00021670: 2e0d 0a20 2020 2020 2020 206c 616d 6264  ...        lambd
-00021680: 615f 7072 696d 653a 2053 7065 6369 6669  a_prime: Specifi
-00021690: 6361 6c6c 7920 666f 7220 7468 6520 4c6f  cally for the Lo
-000216a0: 6361 6c6c 7920 5065 7269 6f64 6963 206b  cally Periodic k
-000216b0: 6572 6e65 6c2c 2074 6869 7320 6465 7465  ernel, this dete
-000216c0: 726d 696e 6573 2074 6865 2073 6d6f 6f74  rmines the smoot
-000216d0: 686e 6573 7320 6f66 2074 6865 2070 6572  hness of the per
-000216e0: 696f 6469 6320 636f 6d70 6f6e 656e 742e  iodic component.
-000216f0: 2053 616d 6520 7261 6e67 6520 6173 205c   Same range as \
-00021700: 6c61 6d62 6461 5f2e 0d0a 2020 2020 2020  lambda_...      
-00021710: 2020 703a 2054 6865 2070 6572 696f 6420    p: The period 
-00021720: 7061 7261 6d65 7465 7220 666f 7220 7468  parameter for th
-00021730: 6520 5065 7269 6f64 6963 2061 6e64 204c  e Periodic and L
-00021740: 6f63 616c 6c79 2050 6572 696f 6469 6320  ocally Periodic 
-00021750: 6b65 726e 656c 7320 7375 6368 2061 7320  kernels such as 
-00021760: 3720 6f72 2033 3635 2e32 3520 666f 7220  7 or 365.25 for 
-00021770: 6461 696c 7920 6461 7461 2e0d 0a20 2020  daily data...   
-00021780: 2022 2222 0d0a 0d0a 2020 2020 6465 6620   """....    def 
-00021790: 5f5f 696e 6974 5f5f 2873 656c 662c 206b  __init__(self, k
-000217a0: 6572 6e65 6c3d 2772 6266 272c 206e 6f69  ernel='rbf', noi
-000217b0: 7365 5f76 6172 3d31 302c 2067 616d 6d61  se_var=10, gamma
-000217c0: 3d30 2e31 2c20 6c61 6d62 6461 5f70 7269  =0.1, lambda_pri
-000217d0: 6d65 3d30 2e31 2c20 703d 3729 3a0d 0a20  me=0.1, p=7):.. 
-000217e0: 2020 2020 2020 2073 656c 662e 6b65 726e         self.kern
-000217f0: 656c 203d 206b 6572 6e65 6c0d 0a20 2020  el = kernel..   
-00021800: 2020 2020 2073 656c 662e 6e6f 6973 655f       self.noise_
-00021810: 7661 7220 3d20 6e6f 6973 655f 7661 720d  var = noise_var.
-00021820: 0a20 2020 2020 2020 2073 656c 662e 6761  .        self.ga
-00021830: 6d6d 6120 3d20 6761 6d6d 610d 0a20 2020  mma = gamma..   
-00021840: 2020 2020 2073 656c 662e 6c61 6d62 6461       self.lambda
-00021850: 5f70 7269 6d65 203d 206c 616d 6264 615f  _prime = lambda_
-00021860: 7072 696d 650d 0a20 2020 2020 2020 2073  prime..        s
-00021870: 656c 662e 7020 3d20 700d 0a0d 0a20 2020  elf.p = p....   
-00021880: 2064 6566 205f 6c69 6e65 6172 5f6b 6572   def _linear_ker
-00021890: 6e65 6c28 7365 6c66 2c20 7831 2c20 7832  nel(self, x1, x2
-000218a0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-000218b0: 726e 206e 702e 646f 7428 7831 2c20 7832  rn np.dot(x1, x2
-000218c0: 2e54 290d 0a0d 0a20 2020 2064 6566 205f  .T)....    def _
-000218d0: 706f 6c79 6e6f 6d69 616c 5f6b 6572 6e65  polynomial_kerne
-000218e0: 6c28 7365 6c66 2c20 7831 2c20 7832 2c20  l(self, x1, x2, 
-000218f0: 703d 3229 3a0d 0a20 2020 2020 2020 2072  p=2):..        r
-00021900: 6574 7572 6e20 2831 202b 206e 702e 646f  eturn (1 + np.do
-00021910: 7428 7831 2c20 7832 2e54 2929 202a 2a20  t(x1, x2.T)) ** 
-00021920: 700d 0a0d 0a20 2020 2064 6566 205f 7262  p....    def _rb
-00021930: 665f 6b65 726e 656c 2873 656c 662c 2078  f_kernel(self, x
-00021940: 312c 2078 322c 2067 616d 6d61 293a 0d0a  1, x2, gamma):..
-00021950: 2020 2020 2020 2020 2320 6672 6f6d 2073          # from s
-00021960: 6369 7079 2e73 7061 7469 616c 2e64 6973  cipy.spatial.dis
-00021970: 7461 6e63 6520 696d 706f 7274 2063 6469  tance import cdi
-00021980: 7374 0d0a 2020 2020 2020 2020 2320 7265  st..        # re
-00021990: 7475 726e 206e 702e 6578 7028 2d67 616d  turn np.exp(-gam
-000219a0: 6d61 202a 2063 6469 7374 2878 312c 2078  ma * cdist(x1, x
-000219b0: 322c 2027 7371 6575 636c 6964 6561 6e27  2, 'sqeuclidean'
-000219c0: 2929 0d0a 2020 2020 2020 2020 6966 2067  ))..        if g
-000219d0: 616d 6d61 2069 7320 4e6f 6e65 3a0d 0a20  amma is None:.. 
-000219e0: 2020 2020 2020 2020 2020 2067 616d 6d61             gamma
-000219f0: 203d 2031 2e30 202f 2078 312e 7368 6170   = 1.0 / x1.shap
-00021a00: 655b 315d 0d0a 2020 2020 2020 2020 6469  e[1]..        di
-00021a10: 7374 616e 6365 203d 2028 0d0a 2020 2020  stance = (..    
-00021a20: 2020 2020 2020 2020 6e70 2e73 756d 2878          np.sum(x
-00021a30: 312a 2a32 2c20 3129 2e72 6573 6861 7065  1**2, 1).reshape
-00021a40: 282d 312c 2031 290d 0a20 2020 2020 2020  (-1, 1)..       
-00021a50: 2020 2020 202b 206e 702e 7375 6d28 7832       + np.sum(x2
-00021a60: 2a2a 322c 2031 290d 0a20 2020 2020 2020  **2, 1)..       
-00021a70: 2020 2020 202d 2032 202a 206e 702e 646f       - 2 * np.do
-00021a80: 7428 7831 2c20 7832 2e54 290d 0a20 2020  t(x1, x2.T)..   
-00021a90: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00021aa0: 7265 7475 726e 206e 702e 6578 7028 2d67  return np.exp(-g
-00021ab0: 616d 6d61 202a 2064 6973 7461 6e63 6529  amma * distance)
-00021ac0: 0d0a 0d0a 2020 2020 6465 6620 5f6f 6c64  ....    def _old
-00021ad0: 5f65 7870 6f6e 656e 7469 616c 5f6b 6572  _exponential_ker
-00021ae0: 6e65 6c28 7365 6c66 2c20 7831 2c20 7832  nel(self, x1, x2
-00021af0: 2c20 6761 6d6d 6129 3a0d 0a20 2020 2020  , gamma):..     
-00021b00: 2020 2023 206d 656d 6f72 7920 6875 6e67     # memory hung
-00021b10: 7279 0d0a 2020 2020 2020 2020 6469 6666  ry..        diff
-00021b20: 203d 2078 315b 3a2c 206e 702e 6e65 7761   = x1[:, np.newa
-00021b30: 7869 732c 203a 5d20 2d20 7832 5b6e 702e  xis, :] - x2[np.
-00021b40: 6e65 7761 7869 732c 203a 2c20 3a5d 0d0a  newaxis, :, :]..
-00021b50: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00021b60: 702e 6578 7028 2d6e 702e 6162 7328 6469  p.exp(-np.abs(di
-00021b70: 6666 2920 2f20 6761 6d6d 6129 0d0a 2020  ff) / gamma)..  
-00021b80: 2020 2020 2020 2320 7265 7475 726e 206e        # return n
-00021b90: 702e 6578 7028 2d6e 702e 6162 7328 7831  p.exp(-np.abs(x1
-00021ba0: 202d 2078 322e 5429 202f 2067 616d 6d61   - x2.T) / gamma
-00021bb0: 290d 0a0d 0a20 2020 2064 6566 205f 6578  )....    def _ex
-00021bc0: 706f 6e65 6e74 6961 6c5f 6b65 726e 656c  ponential_kernel
-00021bd0: 2873 656c 662c 2078 312c 2078 322c 2067  (self, x1, x2, g
-00021be0: 616d 6d61 293a 0d0a 2020 2020 2020 2020  amma):..        
-00021bf0: 2320 6c65 7373 206d 656d 6f72 7920 6875  # less memory hu
-00021c00: 6e67 7279 0d0a 2020 2020 2020 2020 7265  ngry..        re
-00021c10: 7375 6c74 203d 206e 702e 656d 7074 7928  sult = np.empty(
-00021c20: 2878 312e 7368 6170 655b 305d 2c20 7832  (x1.shape[0], x2
-00021c30: 2e73 6861 7065 5b30 5d29 290d 0a20 2020  .shape[0]))..   
-00021c40: 2020 2020 2066 6f72 2069 2c20 7869 2069       for i, xi i
-00021c50: 6e20 656e 756d 6572 6174 6528 7831 293a  n enumerate(x1):
-00021c60: 0d0a 2020 2020 2020 2020 2020 2020 6469  ..            di
-00021c70: 6666 203d 206e 702e 6162 7328 7869 202d  ff = np.abs(xi -
-00021c80: 2078 3229 0d0a 2020 2020 2020 2020 2020   x2)..          
-00021c90: 2020 7265 7375 6c74 5b69 2c20 3a5d 203d    result[i, :] =
-00021ca0: 206e 702e 6578 7028 2d64 6966 662e 7375   np.exp(-diff.su
-00021cb0: 6d28 6178 6973 3d31 2920 2f20 6761 6d6d  m(axis=1) / gamm
-00021cc0: 6129 0d0a 2020 2020 2020 2020 7265 7475  a)..        retu
-00021cd0: 726e 2072 6573 756c 740d 0a0d 0a20 2020  rn result....   
-00021ce0: 2064 6566 205f 6f6c 645f 7065 7269 6f64   def _old_period
-00021cf0: 6963 5f6b 6572 6e65 6c28 7365 6c66 2c20  ic_kernel(self, 
-00021d00: 7831 2c20 7832 2c20 6761 6d6d 612c 2070  x1, x2, gamma, p
-00021d10: 293a 0d0a 2020 2020 2020 2020 7369 6e5f  ):..        sin_
-00021d20: 7371 203d 206e 702e 7369 6e28 6e70 2e70  sq = np.sin(np.p
-00021d30: 6920 2a20 6e70 2e61 6273 2878 3120 2d20  i * np.abs(x1 - 
-00021d40: 7832 2e54 2920 2f20 7029 202a 2a20 320d  x2.T) / p) ** 2.
-00021d50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00021d60: 6e70 2e65 7870 282d 3220 2a20 7369 6e5f  np.exp(-2 * sin_
-00021d70: 7371 202f 2067 616d 6d61 2a2a 3229 0d0a  sq / gamma**2)..
-00021d80: 0d0a 2020 2020 6465 6620 5f76 6563 5f70  ..    def _vec_p
-00021d90: 6572 696f 6469 635f 6b65 726e 656c 2873  eriodic_kernel(s
-00021da0: 656c 662c 2078 312c 2078 322c 2067 616d  elf, x1, x2, gam
-00021db0: 6d61 2c20 7029 3a0d 0a20 2020 2020 2020  ma, p):..       
-00021dc0: 2064 6966 6620 3d20 7831 5b3a 2c20 6e70   diff = x1[:, np
-00021dd0: 2e6e 6577 6178 6973 2c20 3a5d 202d 2078  .newaxis, :] - x
-00021de0: 325b 6e70 2e6e 6577 6178 6973 2c20 3a2c  2[np.newaxis, :,
-00021df0: 203a 5d0d 0a20 2020 2020 2020 2073 696e   :]..        sin
-00021e00: 5f73 7120 3d20 6e70 2e73 696e 286e 702e  _sq = np.sin(np.
-00021e10: 7069 202a 206e 702e 6162 7328 6469 6666  pi * np.abs(diff
-00021e20: 2920 2f20 7029 202a 2a20 320d 0a20 2020  ) / p) ** 2..   
-00021e30: 2020 2020 2072 6574 7572 6e20 6e70 2e65       return np.e
-00021e40: 7870 282d 3220 2a20 7369 6e5f 7371 202f  xp(-2 * sin_sq /
-00021e50: 2067 616d 6d61 2a2a 3229 0d0a 0d0a 2020   gamma**2)....  
-00021e60: 2020 6465 6620 5f70 6572 696f 6469 635f    def _periodic_
-00021e70: 6b65 726e 656c 2873 656c 662c 2078 312c  kernel(self, x1,
-00021e80: 2078 322c 2067 616d 6d61 2c20 7029 3a0d   x2, gamma, p):.
-00021e90: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00021ea0: 3d20 6e70 2e65 6d70 7479 2828 7831 2e73  = np.empty((x1.s
-00021eb0: 6861 7065 5b30 5d2c 2078 322e 7368 6170  hape[0], x2.shap
-00021ec0: 655b 305d 2929 0d0a 2020 2020 2020 2020  e[0]))..        
-00021ed0: 666f 7220 692c 2078 6920 696e 2065 6e75  for i, xi in enu
-00021ee0: 6d65 7261 7465 2878 3129 3a0d 0a20 2020  merate(x1):..   
-00021ef0: 2020 2020 2020 2020 2064 6966 6620 3d20           diff = 
-00021f00: 7869 202d 2078 320d 0a20 2020 2020 2020  xi - x2..       
-00021f10: 2020 2020 2073 696e 5f73 7120 3d20 286e       sin_sq = (n
-00021f20: 702e 7369 6e28 6e70 2e70 6920 2a20 6e70  p.sin(np.pi * np
-00021f30: 2e61 6273 2864 6966 6629 202f 2070 2920  .abs(diff) / p) 
-00021f40: 2a2a 2032 292e 7375 6d28 6178 6973 3d31  ** 2).sum(axis=1
-00021f50: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00021f60: 6573 756c 745b 692c 203a 5d20 3d20 6e70  esult[i, :] = np
-00021f70: 2e65 7870 282d 3220 2a20 7369 6e5f 7371  .exp(-2 * sin_sq
-00021f80: 202f 2067 616d 6d61 2a2a 3229 0d0a 2020   / gamma**2)..  
-00021f90: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-00021fa0: 756c 740d 0a0d 0a20 2020 2064 6566 205f  ult....    def _
-00021fb0: 6f6c 645f 6c6f 6361 6c6c 795f 7065 7269  old_locally_peri
-00021fc0: 6f64 6963 5f6b 6572 6e65 6c28 7365 6c66  odic_kernel(self
-00021fd0: 2c20 7831 2c20 7832 2c20 6761 6d6d 612c  , x1, x2, gamma,
-00021fe0: 206c 616d 6264 615f 7072 696d 652c 2070   lambda_prime, p
-00021ff0: 293a 0d0a 2020 2020 2020 2020 7262 665f  ):..        rbf_
-00022000: 7061 7274 203d 206e 702e 6578 7028 0d0a  part = np.exp(..
-00022010: 2020 2020 2020 2020 2020 2020 2d28 2878              -((x
-00022020: 3120 2d20 7832 2920 2a2a 2032 2920 2f20  1 - x2) ** 2) / 
-00022030: 2832 202a 2067 616d 6d61 2a2a 3229 0d0a  (2 * gamma**2)..
-00022040: 2020 2020 2020 2020 2920 2023 2020 6f6c          )  #  ol
-00022050: 643a 206e 702e 6578 7028 2d28 2878 3120  d: np.exp(-((x1 
-00022060: 2d20 7832 2e54 2920 2a2a 2032 2920 2f20  - x2.T) ** 2) / 
-00022070: 2832 202a 2067 616d 6d61 2a2a 3229 290d  (2 * gamma**2)).
-00022080: 0a20 2020 2020 2020 2070 6572 696f 6469  .        periodi
-00022090: 635f 7061 7274 203d 2073 656c 662e 5f70  c_part = self._p
-000220a0: 6572 696f 6469 635f 6b65 726e 656c 2878  eriodic_kernel(x
-000220b0: 312c 2078 322c 206c 616d 6264 615f 7072  1, x2, lambda_pr
-000220c0: 696d 652c 2070 290d 0a20 2020 2020 2020  ime, p)..       
-000220d0: 2072 6574 7572 6e20 7262 665f 7061 7274   return rbf_part
-000220e0: 202a 2070 6572 696f 6469 635f 7061 7274   * periodic_part
-000220f0: 0d0a 0d0a 2020 2020 6465 6620 5f6c 6f63  ....    def _loc
-00022100: 616c 6c79 5f70 6572 696f 6469 635f 6b65  ally_periodic_ke
-00022110: 726e 656c 2873 656c 662c 2078 312c 2078  rnel(self, x1, x
-00022120: 322c 2067 616d 6d61 2c20 6c61 6d62 6461  2, gamma, lambda
-00022130: 5f70 7269 6d65 2c20 7029 3a0d 0a20 2020  _prime, p):..   
-00022140: 2020 2020 2072 6573 756c 7420 3d20 6e70       result = np
-00022150: 2e65 6d70 7479 2828 7831 2e73 6861 7065  .empty((x1.shape
-00022160: 5b30 5d2c 2078 322e 7368 6170 655b 305d  [0], x2.shape[0]
-00022170: 2929 0d0a 2020 2020 2020 2020 666f 7220  ))..        for 
-00022180: 692c 2078 6920 696e 2065 6e75 6d65 7261  i, xi in enumera
-00022190: 7465 2878 3129 3a0d 0a20 2020 2020 2020  te(x1):..       
-000221a0: 2020 2020 2064 6966 6620 3d20 7869 202d       diff = xi -
-000221b0: 2078 320d 0a20 2020 2020 2020 2020 2020   x2..           
-000221c0: 2072 6266 5f70 6172 7420 3d20 6e70 2e65   rbf_part = np.e
-000221d0: 7870 282d 6e70 2e73 756d 2864 6966 662a  xp(-np.sum(diff*
-000221e0: 2a32 2c20 6178 6973 3d31 2920 2f20 2832  *2, axis=1) / (2
-000221f0: 202a 2067 616d 6d61 2a2a 3229 290d 0a20   * gamma**2)).. 
-00022200: 2020 2020 2020 2020 2020 2073 696e 5f73             sin_s
-00022210: 7120 3d20 286e 702e 7369 6e28 6e70 2e70  q = (np.sin(np.p
-00022220: 6920 2a20 6e70 2e61 6273 2864 6966 6629  i * np.abs(diff)
-00022230: 202f 2070 2920 2a2a 2032 292e 7375 6d28   / p) ** 2).sum(
-00022240: 6178 6973 3d31 290d 0a20 2020 2020 2020  axis=1)..       
-00022250: 2020 2020 2070 6572 696f 6469 635f 7061       periodic_pa
-00022260: 7274 203d 206e 702e 6578 7028 2d32 202a  rt = np.exp(-2 *
-00022270: 2073 696e 5f73 7120 2f20 6761 6d6d 612a   sin_sq / gamma*
-00022280: 2a32 290d 0a20 2020 2020 2020 2020 2020  *2)..           
-00022290: 2072 6573 756c 745b 692c 203a 5d20 3d20   result[i, :] = 
-000222a0: 7262 665f 7061 7274 202a 2070 6572 696f  rbf_part * perio
-000222b0: 6469 635f 7061 7274 0d0a 2020 2020 2020  dic_part..      
-000222c0: 2020 7265 7475 726e 2072 6573 756c 740d    return result.
-000222d0: 0a0d 0a20 2020 2064 6566 2066 6974 2873  ...    def fit(s
-000222e0: 656c 662c 2058 2c20 5929 3a0d 0a20 2020  elf, X, Y):..   
-000222f0: 2020 2020 2073 656c 662e 585f 7472 6169       self.X_trai
-00022300: 6e20 3d20 6e70 2e61 7361 7272 6179 2858  n = np.asarray(X
-00022310: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-00022320: 7365 6c66 2e6b 6572 6e65 6c20 3d3d 2027  self.kernel == '
-00022330: 6c69 6e65 6172 273a 0d0a 2020 2020 2020  linear':..      
-00022340: 2020 2020 2020 4b20 3d20 7365 6c66 2e5f        K = self._
-00022350: 6c69 6e65 6172 5f6b 6572 6e65 6c28 7365  linear_kernel(se
-00022360: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
-00022370: 2e58 5f74 7261 696e 290d 0a20 2020 2020  .X_train)..     
-00022380: 2020 2065 6c69 6620 7365 6c66 2e6b 6572     elif self.ker
-00022390: 6e65 6c20 3d3d 2027 706f 6c79 6e6f 6d69  nel == 'polynomi
-000223a0: 616c 273a 0d0a 2020 2020 2020 2020 2020  al':..          
-000223b0: 2020 4b20 3d20 7365 6c66 2e5f 706f 6c79    K = self._poly
-000223c0: 6e6f 6d69 616c 5f6b 6572 6e65 6c28 7365  nomial_kernel(se
-000223d0: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
-000223e0: 2e58 5f74 7261 696e 290d 0a20 2020 2020  .X_train)..     
-000223f0: 2020 2065 6c69 6620 7365 6c66 2e6b 6572     elif self.ker
-00022400: 6e65 6c20 3d3d 2027 7262 6627 3a0d 0a20  nel == 'rbf':.. 
-00022410: 2020 2020 2020 2020 2020 204b 203d 2073             K = s
-00022420: 656c 662e 5f72 6266 5f6b 6572 6e65 6c28  elf._rbf_kernel(
-00022430: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
-00022440: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
-00022450: 2e67 616d 6d61 290d 0a20 2020 2020 2020  .gamma)..       
-00022460: 2065 6c69 6620 7365 6c66 2e6b 6572 6e65   elif self.kerne
-00022470: 6c20 3d3d 2027 6578 706f 6e65 6e74 6961  l == 'exponentia
-00022480: 6c27 3a0d 0a20 2020 2020 2020 2020 2020  l':..           
-00022490: 204b 203d 2073 656c 662e 5f65 7870 6f6e   K = self._expon
-000224a0: 656e 7469 616c 5f6b 6572 6e65 6c28 7365  ential_kernel(se
-000224b0: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
-000224c0: 2e58 5f74 7261 696e 2c20 7365 6c66 2e67  .X_train, self.g
-000224d0: 616d 6d61 290d 0a20 2020 2020 2020 2065  amma)..        e
-000224e0: 6c69 6620 7365 6c66 2e6b 6572 6e65 6c20  lif self.kernel 
-000224f0: 3d3d 2027 7065 7269 6f64 6963 273a 0d0a  == 'periodic':..
-00022500: 2020 2020 2020 2020 2020 2020 4b20 3d20              K = 
-00022510: 7365 6c66 2e5f 7065 7269 6f64 6963 5f6b  self._periodic_k
-00022520: 6572 6e65 6c28 7365 6c66 2e58 5f74 7261  ernel(self.X_tra
-00022530: 696e 2c20 7365 6c66 2e58 5f74 7261 696e  in, self.X_train
-00022540: 2c20 7365 6c66 2e67 616d 6d61 2c20 7365  , self.gamma, se
-00022550: 6c66 2e70 290d 0a20 2020 2020 2020 2065  lf.p)..        e
-00022560: 6c69 6620 7365 6c66 2e6b 6572 6e65 6c20  lif self.kernel 
-00022570: 3d3d 2027 6c6f 6361 6c6c 795f 7065 7269  == 'locally_peri
-00022580: 6f64 6963 273a 0d0a 2020 2020 2020 2020  odic':..        
-00022590: 2020 2020 4b20 3d20 7365 6c66 2e5f 6c6f      K = self._lo
-000225a0: 6361 6c6c 795f 7065 7269 6f64 6963 5f6b  cally_periodic_k
-000225b0: 6572 6e65 6c28 0d0a 2020 2020 2020 2020  ernel(..        
-000225c0: 2020 2020 2020 2020 7365 6c66 2e58 5f74          self.X_t
-000225d0: 7261 696e 2c20 7365 6c66 2e58 5f74 7261  rain, self.X_tra
-000225e0: 696e 2c20 7365 6c66 2e67 616d 6d61 2c20  in, self.gamma, 
-000225f0: 7365 6c66 2e6c 616d 6264 615f 7072 696d  self.lambda_prim
-00022600: 652c 2073 656c 662e 700d 0a20 2020 2020  e, self.p..     
-00022610: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00022620: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00022630: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00022640: 4572 726f 7228 2249 6e76 616c 6964 204b  Error("Invalid K
-00022650: 6572 6e65 6c22 290d 0a0d 0a20 2020 2020  ernel")....     
-00022660: 2020 2023 2052 6567 756c 6172 697a 6564     # Regularized
-00022670: 204b 6572 6e65 6c0d 0a20 2020 2020 2020   Kernel..       
-00022680: 2023 204b 5f72 6567 203d 204b 202b 2073   # K_reg = K + s
-00022690: 656c 662e 6e6f 6973 655f 7661 7220 2a20  elf.noise_var * 
-000226a0: 6e70 2e65 7965 284b 2e73 6861 7065 5b30  np.eye(K.shape[0
-000226b0: 5d29 0d0a 2020 2020 2020 2020 6e70 2e66  ])..        np.f
-000226c0: 696c 6c5f 6469 6167 6f6e 616c 284b 2c20  ill_diagonal(K, 
-000226d0: 6e70 2e64 6961 6728 4b29 202b 2073 656c  np.diag(K) + sel
-000226e0: 662e 6e6f 6973 655f 7661 7229 0d0a 0d0a  f.noise_var)....
-000226f0: 2020 2020 2020 2020 2320 4368 6f6c 6573          # Choles
-00022700: 6b79 2064 6563 6f6d 706f 7369 7469 6f6e  ky decomposition
-00022710: 2061 6e64 2073 6f6c 7665 2066 6f72 2061   and solve for a
-00022720: 6c70 6861 2069 6e20 6120 7665 6374 6f72  lpha in a vector
-00022730: 697a 6564 2077 6179 0d0a 2020 2020 2020  ized way..      
-00022740: 2020 6966 2046 616c 7365 3a0d 0a20 2020    if False:..   
-00022750: 2020 2020 2020 2020 2066 726f 6d20 7363           from sc
-00022760: 6970 792e 7370 6172 7365 2e6c 696e 616c  ipy.sparse.linal
-00022770: 6720 696d 706f 7274 2063 670d 0a0d 0a20  g import cg.... 
-00022780: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00022790: 616c 7068 612c 205f 203d 2063 6728 4b2c  alpha, _ = cg(K,
-000227a0: 206e 702e 6173 6172 7261 7928 5929 2920   np.asarray(Y)) 
-000227b0: 2023 205f 2063 6170 7475 7265 7320 696e   # _ captures in
-000227c0: 666f 2061 626f 7574 2063 6f6e 7665 7267  fo about converg
-000227d0: 656e 6365 0d0a 2020 2020 2020 2020 656c  ence..        el
-000227e0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-000227f0: 2073 656c 662e 4c20 3d20 6e70 2e6c 696e   self.L = np.lin
-00022800: 616c 672e 6368 6f6c 6573 6b79 284b 290d  alg.cholesky(K).
-00022810: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00022820: 662e 616c 7068 6120 3d20 6e70 2e6c 696e  f.alpha = np.lin
-00022830: 616c 672e 736f 6c76 6528 0d0a 2020 2020  alg.solve(..    
-00022840: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00022850: 2e4c 2e54 2c20 6e70 2e6c 696e 616c 672e  .L.T, np.linalg.
-00022860: 736f 6c76 6528 7365 6c66 2e4c 2c20 6e70  solve(self.L, np
-00022870: 2e61 7361 7272 6179 2859 2929 0d0a 2020  .asarray(Y))..  
-00022880: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00022890: 2020 2020 2064 656c 204b 0d0a 2020 2020       del K..    
-000228a0: 2020 2020 2320 5265 6775 6c61 7269 7a65      # Regularize
-000228b0: 6420 4b65 726e 656c 0d0a 2020 2020 2020  d Kernel..      
-000228c0: 2020 7265 7475 726e 2073 656c 660d 0a0d    return self...
-000228d0: 0a20 2020 2064 6566 2070 7265 6469 6374  .    def predict
-000228e0: 2873 656c 662c 2058 293a 0d0a 2020 2020  (self, X):..    
-000228f0: 2020 2020 785f 7072 6564 203d 206e 702e      x_pred = np.
-00022900: 6173 6172 7261 7928 5829 0d0a 2020 2020  asarray(X)..    
-00022910: 2020 2020 6966 2073 656c 662e 6b65 726e      if self.kern
-00022920: 656c 203d 3d20 276c 696e 6561 7227 3a0d  el == 'linear':.
-00022930: 0a20 2020 2020 2020 2020 2020 206b 203d  .            k =
-00022940: 2073 656c 662e 5f6c 696e 6561 725f 6b65   self._linear_ke
-00022950: 726e 656c 2878 5f70 7265 642c 2073 656c  rnel(x_pred, sel
-00022960: 662e 585f 7472 6169 6e29 0d0a 2020 2020  f.X_train)..    
-00022970: 2020 2020 656c 6966 2073 656c 662e 6b65      elif self.ke
-00022980: 726e 656c 203d 3d20 2770 6f6c 796e 6f6d  rnel == 'polynom
-00022990: 6961 6c27 3a0d 0a20 2020 2020 2020 2020  ial':..         
-000229a0: 2020 206b 203d 2073 656c 662e 5f70 6f6c     k = self._pol
-000229b0: 796e 6f6d 6961 6c5f 6b65 726e 656c 2878  ynomial_kernel(x
-000229c0: 5f70 7265 642c 2073 656c 662e 585f 7472  _pred, self.X_tr
-000229d0: 6169 6e29 0d0a 2020 2020 2020 2020 656c  ain)..        el
-000229e0: 6966 2073 656c 662e 6b65 726e 656c 203d  if self.kernel =
-000229f0: 3d20 2772 6266 273a 0d0a 2020 2020 2020  = 'rbf':..      
-00022a00: 2020 2020 2020 6b20 3d20 7365 6c66 2e5f        k = self._
-00022a10: 7262 665f 6b65 726e 656c 2878 5f70 7265  rbf_kernel(x_pre
-00022a20: 642c 2073 656c 662e 585f 7472 6169 6e2c  d, self.X_train,
-00022a30: 2073 656c 662e 6761 6d6d 6129 0d0a 2020   self.gamma)..  
-00022a40: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-00022a50: 6b65 726e 656c 203d 3d20 2765 7870 6f6e  kernel == 'expon
-00022a60: 656e 7469 616c 273a 0d0a 2020 2020 2020  ential':..      
-00022a70: 2020 2020 2020 6b20 3d20 7365 6c66 2e5f        k = self._
-00022a80: 6578 706f 6e65 6e74 6961 6c5f 6b65 726e  exponential_kern
-00022a90: 656c 2878 5f70 7265 642c 2073 656c 662e  el(x_pred, self.
-00022aa0: 585f 7472 6169 6e2c 2073 656c 662e 6761  X_train, self.ga
-00022ab0: 6d6d 6129 0d0a 2020 2020 2020 2020 656c  mma)..        el
-00022ac0: 6966 2073 656c 662e 6b65 726e 656c 203d  if self.kernel =
-00022ad0: 3d20 2770 6572 696f 6469 6327 3a0d 0a20  = 'periodic':.. 
-00022ae0: 2020 2020 2020 2020 2020 206b 203d 2073             k = s
-00022af0: 656c 662e 5f70 6572 696f 6469 635f 6b65  elf._periodic_ke
-00022b00: 726e 656c 2878 5f70 7265 642c 2073 656c  rnel(x_pred, sel
-00022b10: 662e 585f 7472 6169 6e2c 2073 656c 662e  f.X_train, self.
-00022b20: 6761 6d6d 612c 2073 656c 662e 7029 0d0a  gamma, self.p)..
-00022b30: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-00022b40: 662e 6b65 726e 656c 203d 3d20 276c 6f63  f.kernel == 'loc
-00022b50: 616c 6c79 5f70 6572 696f 6469 6327 3a0d  ally_periodic':.
-00022b60: 0a20 2020 2020 2020 2020 2020 206b 203d  .            k =
-00022b70: 2073 656c 662e 5f6c 6f63 616c 6c79 5f70   self._locally_p
-00022b80: 6572 696f 6469 635f 6b65 726e 656c 280d  eriodic_kernel(.
-00022b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022ba0: 2078 5f70 7265 642c 2073 656c 662e 585f   x_pred, self.X_
-00022bb0: 7472 6169 6e2c 2073 656c 662e 6761 6d6d  train, self.gamm
-00022bc0: 612c 2073 656c 662e 6c61 6d62 6461 5f70  a, self.lambda_p
-00022bd0: 7269 6d65 2c20 7365 6c66 2e70 0d0a 2020  rime, self.p..  
-00022be0: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00022bf0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00022c00: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00022c10: 6c75 6545 7272 6f72 2822 496e 7661 6c69  lueError("Invali
-00022c20: 6420 4b65 726e 656c 2229 0d0a 0d0a 2020  d Kernel")....  
-00022c30: 2020 2020 2020 2320 4d61 6b69 6e67 2070        # Making p
-00022c40: 7265 6469 6374 696f 6e73 0d0a 2020 2020  redictions..    
-00022c50: 2020 2020 595f 7072 6564 203d 206b 2040      Y_pred = k @
-00022c60: 2073 656c 662e 616c 7068 610d 0a0d 0a20   self.alpha.... 
-00022c70: 2020 2020 2020 2072 6574 7572 6e20 595f         return Y_
-00022c80: 7072 6564 0d0a 0d0a 2020 2020 6465 6620  pred....    def 
-00022c90: 7072 6564 6963 745f 7072 6f62 6128 7365  predict_proba(se
-00022ca0: 6c66 2c20 5829 3a0d 0a20 2020 2020 2020  lf, X):..       
-00022cb0: 2078 5f70 7265 6420 3d20 6e70 2e61 7361   x_pred = np.asa
-00022cc0: 7272 6179 2858 290d 0a20 2020 2020 2020  rray(X)..       
-00022cd0: 2069 6620 7365 6c66 2e6b 6572 6e65 6c20   if self.kernel 
-00022ce0: 3d3d 2027 6c69 6e65 6172 273a 0d0a 2020  == 'linear':..  
-00022cf0: 2020 2020 2020 2020 2020 6b5f 7374 6172            k_star
-00022d00: 203d 2073 656c 662e 5f6c 696e 6561 725f   = self._linear_
-00022d10: 6b65 726e 656c 2878 5f70 7265 642c 2073  kernel(x_pred, s
-00022d20: 656c 662e 585f 7472 6169 6e29 0d0a 2020  elf.X_train)..  
-00022d30: 2020 2020 2020 2020 2020 6b5f 7374 6172            k_star
-00022d40: 5f73 7461 7220 3d20 6e70 2e64 6961 6728  _star = np.diag(
-00022d50: 7365 6c66 2e5f 6c69 6e65 6172 5f6b 6572  self._linear_ker
-00022d60: 6e65 6c28 785f 7072 6564 2c20 7365 6c66  nel(x_pred, self
-00022d70: 2e58 5f74 7261 696e 2929 0d0a 2020 2020  .X_train))..    
-00022d80: 2020 2020 656c 6966 2073 656c 662e 6b65      elif self.ke
-00022d90: 726e 656c 203d 3d20 2770 6f6c 796e 6f6d  rnel == 'polynom
-00022da0: 6961 6c27 3a0d 0a20 2020 2020 2020 2020  ial':..         
-00022db0: 2020 206b 5f73 7461 7220 3d20 7365 6c66     k_star = self
-00022dc0: 2e5f 706f 6c79 6e6f 6d69 616c 5f6b 6572  ._polynomial_ker
-00022dd0: 6e65 6c28 785f 7072 6564 2c20 7365 6c66  nel(x_pred, self
-00022de0: 2e58 5f74 7261 696e 290d 0a20 2020 2020  .X_train)..     
-00022df0: 2020 2020 2020 206b 5f73 7461 725f 7374         k_star_st
-00022e00: 6172 203d 206e 702e 6469 6167 2873 656c  ar = np.diag(sel
-00022e10: 662e 5f70 6f6c 796e 6f6d 6961 6c5f 6b65  f._polynomial_ke
-00022e20: 726e 656c 2878 5f70 7265 642c 2073 656c  rnel(x_pred, sel
-00022e30: 662e 585f 7472 6169 6e29 290d 0a20 2020  f.X_train))..   
-00022e40: 2020 2020 2065 6c69 6620 7365 6c66 2e6b       elif self.k
-00022e50: 6572 6e65 6c20 3d3d 2027 7262 6627 3a0d  ernel == 'rbf':.
-00022e60: 0a20 2020 2020 2020 2020 2020 206b 5f73  .            k_s
-00022e70: 7461 7220 3d20 7365 6c66 2e5f 7262 665f  tar = self._rbf_
-00022e80: 6b65 726e 656c 2878 5f70 7265 642c 2073  kernel(x_pred, s
-00022e90: 656c 662e 585f 7472 6169 6e2c 2073 656c  elf.X_train, sel
-00022ea0: 662e 6761 6d6d 6129 0d0a 2020 2020 2020  f.gamma)..      
-00022eb0: 2020 2020 2020 6b5f 7374 6172 5f73 7461        k_star_sta
-00022ec0: 7220 3d20 6e70 2e64 6961 6728 7365 6c66  r = np.diag(self
-00022ed0: 2e5f 7262 665f 6b65 726e 656c 2878 5f70  ._rbf_kernel(x_p
-00022ee0: 7265 642c 2073 656c 662e 585f 7472 6169  red, self.X_trai
-00022ef0: 6e2c 2073 656c 662e 6761 6d6d 6129 290d  n, self.gamma)).
-00022f00: 0a0d 0a20 2020 2020 2020 2065 6c69 6620  ...        elif 
-00022f10: 7365 6c66 2e6b 6572 6e65 6c20 3d3d 2027  self.kernel == '
-00022f20: 6578 706f 6e65 6e74 6961 6c27 3a0d 0a20  exponential':.. 
-00022f30: 2020 2020 2020 2020 2020 206b 5f73 7461             k_sta
-00022f40: 7220 3d20 7365 6c66 2e5f 6578 706f 6e65  r = self._expone
-00022f50: 6e74 6961 6c5f 6b65 726e 656c 2858 2c20  ntial_kernel(X, 
-00022f60: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
-00022f70: 6c66 2e67 616d 6d61 290d 0a20 2020 2020  lf.gamma)..     
-00022f80: 2020 2020 2020 206b 5f73 7461 725f 7374         k_star_st
-00022f90: 6172 203d 206e 702e 6469 6167 280d 0a20  ar = np.diag(.. 
-00022fa0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00022fb0: 656c 662e 5f65 7870 6f6e 656e 7469 616c  elf._exponential
-00022fc0: 5f6b 6572 6e65 6c28 785f 7072 6564 2c20  _kernel(x_pred, 
-00022fd0: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
-00022fe0: 6c66 2e67 616d 6d61 290d 0a20 2020 2020  lf.gamma)..     
-00022ff0: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-00023000: 2020 656c 6966 2073 656c 662e 6b65 726e    elif self.kern
-00023010: 656c 203d 3d20 2770 6572 696f 6469 6327  el == 'periodic'
-00023020: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
-00023030: 5f73 7461 7220 3d20 7365 6c66 2e5f 7065  _star = self._pe
-00023040: 7269 6f64 6963 5f6b 6572 6e65 6c28 582c  riodic_kernel(X,
-00023050: 2073 656c 662e 585f 7472 6169 6e2c 2073   self.X_train, s
-00023060: 656c 662e 6761 6d6d 612c 2073 656c 662e  elf.gamma, self.
-00023070: 7029 0d0a 2020 2020 2020 2020 2020 2020  p)..            
-00023080: 6b5f 7374 6172 5f73 7461 7220 3d20 6e70  k_star_star = np
-00023090: 2e64 6961 6728 0d0a 2020 2020 2020 2020  .diag(..        
-000230a0: 2020 2020 2020 2020 7365 6c66 2e5f 7065          self._pe
-000230b0: 7269 6f64 6963 5f6b 6572 6e65 6c28 785f  riodic_kernel(x_
-000230c0: 7072 6564 2c20 7365 6c66 2e58 5f74 7261  pred, self.X_tra
-000230d0: 696e 2c20 7365 6c66 2e67 616d 6d61 2c20  in, self.gamma, 
-000230e0: 7365 6c66 2e6c 616d 6264 615f 290d 0a20  self.lambda_).. 
-000230f0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00023100: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-00023110: 6b65 726e 656c 203d 3d20 276c 6f63 616c  kernel == 'local
-00023120: 6c79 5f70 6572 696f 6469 6327 3a0d 0a20  ly_periodic':.. 
-00023130: 2020 2020 2020 2020 2020 206b 5f73 7461             k_sta
-00023140: 7220 3d20 7365 6c66 2e5f 6c6f 6361 6c6c  r = self._locall
-00023150: 795f 7065 7269 6f64 6963 5f6b 6572 6e65  y_periodic_kerne
-00023160: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00023170: 2020 2020 785f 7072 6564 2c20 7365 6c66      x_pred, self
-00023180: 2e58 5f74 7261 696e 2c20 7365 6c66 2e67  .X_train, self.g
-00023190: 616d 6d61 2c20 7365 6c66 2e6c 616d 6264  amma, self.lambd
-000231a0: 615f 7072 696d 652c 2073 656c 662e 700d  a_prime, self.p.
-000231b0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
-000231c0: 2020 2020 2020 2020 2020 2020 6b5f 7374              k_st
-000231d0: 6172 5f73 7461 7220 3d20 6e70 2e64 6961  ar_star = np.dia
-000231e0: 6728 0d0a 2020 2020 2020 2020 2020 2020  g(..            
-000231f0: 2020 2020 7365 6c66 2e5f 6c6f 6361 6c6c      self._locall
-00023200: 795f 7065 7269 6f64 6963 5f6b 6572 6e65  y_periodic_kerne
-00023210: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
-00023220: 2020 2020 2020 2020 785f 7072 6564 2c20          x_pred, 
-00023230: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
-00023240: 6c66 2e67 616d 6d61 2c20 7365 6c66 2e6c  lf.gamma, self.l
-00023250: 616d 6264 615f 7072 696d 652c 2073 656c  ambda_prime, sel
-00023260: 662e 700d 0a20 2020 2020 2020 2020 2020  f.p..           
-00023270: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
-00023280: 2020 2020 290d 0a20 2020 2020 2020 2065      )..        e
-00023290: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000232a0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-000232b0: 6f72 2822 496e 7661 6c69 6420 4b65 726e  or("Invalid Kern
-000232c0: 656c 2229 0d0a 0d0a 2020 2020 2020 2020  el")....        
-000232d0: 2320 4d61 6b69 6e67 2070 7265 6469 6374  # Making predict
-000232e0: 696f 6e73 0d0a 2020 2020 2020 2020 595f  ions..        Y_
-000232f0: 7072 6564 203d 206b 5f73 7461 7220 4020  pred = k_star @ 
-00023300: 7365 6c66 2e61 6c70 6861 0d0a 0d0a 2020  self.alpha....  
-00023310: 2020 2020 2020 2320 436f 6d70 7574 696e        # Computin
-00023320: 6720 7468 6520 7072 6564 6963 7469 7665  g the predictive
-00023330: 2076 6172 6961 6e63 6520 666f 7220 6561   variance for ea
-00023340: 6368 2074 6573 7420 706f 696e 7420 616e  ch test point an
-00023350: 6420 6561 6368 206f 7574 7075 740d 0a20  d each output.. 
-00023360: 2020 2020 2020 2076 203d 206e 702e 6c69         v = np.li
-00023370: 6e61 6c67 2e73 6f6c 7665 2873 656c 662e  nalg.solve(self.
-00023380: 4c2c 206b 5f73 7461 722e 5429 0d0a 2020  L, k_star.T)..  
-00023390: 2020 2020 2020 595f 7661 7220 3d20 6b5f        Y_var = k_
-000233a0: 7374 6172 5f73 7461 7220 2d20 6e70 2e73  star_star - np.s
-000233b0: 756d 2876 2a2a 322c 2061 7869 733d 3029  um(v**2, axis=0)
-000233c0: 0d0a 0d0a 2020 2020 2020 2020 7265 7475  ....        retu
-000233d0: 726e 2059 5f70 7265 642c 2059 5f76 6172  rn Y_pred, Y_var
-000233e0: 0d0a 0d0a 0d0a 636c 6173 7320 5072 6570  ......class Prep
-000233f0: 726f 6365 7373 696e 6752 6567 7265 7373  rocessingRegress
-00023400: 696f 6e28 4d6f 6465 6c4f 626a 6563 7429  ion(ModelObject)
-00023410: 3a0d 0a20 2020 2022 2222 5265 6772 6573  :..    """Regres
-00023420: 7369 6f6e 2075 7365 2074 6865 206c 6173  sion use the las
-00023430: 7420 6e20 7661 6c75 6573 2061 7320 7468  t n values as th
-00023440: 6520 6261 7369 7320 6f66 2074 7261 696e  e basis of train
-00023450: 696e 6720 6461 7461 2e0d 0a0d 0a20 2020  ing data.....   
-00023460: 2041 7267 733a 0d0a 2020 2020 2020 2020   Args:..        
-00023470: 6e61 6d65 2028 7374 7229 3a20 5374 7269  name (str): Stri
-00023480: 6e67 2074 6f20 6964 656e 7469 6679 2063  ng to identify c
-00023490: 6c61 7373 0d0a 2020 2020 2020 2020 6672  lass..        fr
-000234a0: 6571 7565 6e63 7920 2873 7472 293a 2053  equency (str): S
-000234b0: 7472 696e 6720 616c 6961 7320 6f66 2064  tring alias of d
-000234c0: 6174 6574 696d 6520 696e 6465 7820 6672  atetime index fr
-000234d0: 6571 7565 6e63 7920 6f72 2065 6c73 6520  equency or else 
-000234e0: 2769 6e66 6572 270d 0a20 2020 2020 2020  'infer'..       
-000234f0: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
-00023500: 7276 616c 2028 666c 6f61 7429 3a20 436f  rval (float): Co
-00023510: 6e66 6964 656e 6365 2069 6e74 6572 7661  nfidence interva
-00023520: 6c20 666f 7220 7072 6f62 6162 696c 6973  l for probabilis
-00023530: 7469 6320 666f 7265 6361 7374 0d0a 2020  tic forecast..  
-00023540: 2020 2020 2020 2320 7265 6772 6573 7369        # regressi
-00023550: 6f6e 5f74 7970 653a 2073 7472 203d 204e  on_type: str = N
-00023560: 6f6e 652c 0d0a 2020 2020 2222 220d 0a0d  one,..    """...
-00023570: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00023580: 5f28 0d0a 2020 2020 2020 2020 7365 6c66  _(..        self
-00023590: 2c0d 0a20 2020 2020 2020 206e 616d 653a  ,..        name:
-000235a0: 2073 7472 203d 2022 5072 6570 726f 6365   str = "Preproce
-000235b0: 7373 696e 6752 6567 7265 7373 696f 6e22  ssingRegression"
-000235c0: 2c0d 0a20 2020 2020 2020 2066 7265 7175  ,..        frequ
-000235d0: 656e 6379 3a20 7374 7220 3d20 2769 6e66  ency: str = 'inf
-000235e0: 6572 272c 0d0a 2020 2020 2020 2020 7072  er',..        pr
-000235f0: 6564 6963 7469 6f6e 5f69 6e74 6572 7661  ediction_interva
-00023600: 6c3a 2066 6c6f 6174 203d 2030 2e39 2c0d  l: float = 0.9,.
-00023610: 0a20 2020 2020 2020 2068 6f6c 6964 6179  .        holiday
-00023620: 5f63 6f75 6e74 7279 3a20 7374 7220 3d20  _country: str = 
-00023630: 2755 5327 2c0d 0a20 2020 2020 2020 2072  'US',..        r
-00023640: 616e 646f 6d5f 7365 6564 3a20 696e 7420  andom_seed: int 
-00023650: 3d20 3230 3233 2c0d 0a20 2020 2020 2020  = 2023,..       
-00023660: 2076 6572 626f 7365 3a20 696e 7420 3d20   verbose: int = 
-00023670: 302c 0d0a 2020 2020 2020 2020 7769 6e64  0,..        wind
-00023680: 6f77 5f73 697a 653a 2069 6e74 203d 2031  ow_size: int = 1
-00023690: 302c 0d0a 2020 2020 2020 2020 7265 6772  0,..        regr
-000236a0: 6573 7369 6f6e 5f6d 6f64 656c 3a20 6469  ession_model: di
-000236b0: 6374 203d 207b 0d0a 2020 2020 2020 2020  ct = {..        
-000236c0: 2020 2020 226d 6f64 656c 223a 2027 5261      "model": 'Ra
-000236d0: 6e64 6f6d 466f 7265 7374 272c 0d0a 2020  ndomForest',..  
-000236e0: 2020 2020 2020 2020 2020 226d 6f64 656c            "model
-000236f0: 5f70 6172 616d 7322 3a20 7b7d 2c0d 0a20  _params": {},.. 
-00023700: 2020 2020 2020 207d 2c0d 0a20 2020 2020         },..     
-00023710: 2020 2074 7261 6e73 666f 726d 6174 696f     transformatio
-00023720: 6e5f 6469 6374 3d4e 6f6e 652c 0d0a 2020  n_dict=None,..  
-00023730: 2020 2020 2020 6d61 785f 6869 7374 6f72        max_histor
-00023740: 793a 2069 6e74 203d 204e 6f6e 652c 0d0a  y: int = None,..
-00023750: 2020 2020 2020 2020 6f6e 655f 7374 6570          one_step
-00023760: 3a20 626f 6f6c 203d 2046 616c 7365 2c0d  : bool = False,.
-00023770: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00023780: 6564 5f79 3a20 626f 6f6c 203d 2046 616c  ed_y: bool = Fal
-00023790: 7365 2c0d 0a20 2020 2020 2020 206e 6f72  se,..        nor
-000237a0: 6d61 6c69 7a65 5f77 696e 646f 773a 2062  malize_window: b
-000237b0: 6f6f 6c20 3d20 4661 6c73 652c 0d0a 2020  ool = False,..  
-000237c0: 2020 2020 2020 6461 7465 7061 7274 5f6d        datepart_m
-000237d0: 6574 686f 643a 2073 7472 203d 2022 636f  ethod: str = "co
-000237e0: 6d6d 6f6e 5f66 6f75 7269 6572 222c 0d0a  mmon_fourier",..
-000237f0: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-00023800: 5f6c 656e 6774 683a 2069 6e74 203d 2032  _length: int = 2
-00023810: 382c 0d0a 2020 2020 2020 2020 7265 6772  8,..        regr
-00023820: 6573 7369 6f6e 5f74 7970 653a 2073 7472  ession_type: str
-00023830: 203d 204e 6f6e 652c 0d0a 2020 2020 2020   = None,..      
-00023840: 2020 6e5f 6a6f 6273 3a20 696e 7420 3d20    n_jobs: int = 
-00023850: 2d31 2c0d 0a20 2020 2020 2020 202a 2a6b  -1,..        **k
-00023860: 7761 7267 732c 0d0a 2020 2020 293a 0d0a  wargs,..    ):..
-00023870: 2020 2020 2020 2020 4d6f 6465 6c4f 626a          ModelObj
-00023880: 6563 742e 5f5f 696e 6974 5f5f 280d 0a20  ect.__init__(.. 
-00023890: 2020 2020 2020 2020 2020 2073 656c 662c             self,
-000238a0: 0d0a 2020 2020 2020 2020 2020 2020 6e61  ..            na
-000238b0: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
-000238c0: 2066 7265 7175 656e 6379 2c0d 0a20 2020   frequency,..   
-000238d0: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-000238e0: 696f 6e5f 696e 7465 7276 616c 2c0d 0a20  ion_interval,.. 
-000238f0: 2020 2020 2020 2020 2020 2068 6f6c 6964             holid
-00023900: 6179 5f63 6f75 6e74 7279 3d68 6f6c 6964  ay_country=holid
-00023910: 6179 5f63 6f75 6e74 7279 2c0d 0a20 2020  ay_country,..   
-00023920: 2020 2020 2020 2020 2072 616e 646f 6d5f           random_
-00023930: 7365 6564 3d72 616e 646f 6d5f 7365 6564  seed=random_seed
-00023940: 2c0d 0a20 2020 2020 2020 2020 2020 2072  ,..            r
-00023950: 6567 7265 7373 696f 6e5f 7479 7065 3d72  egression_type=r
-00023960: 6567 7265 7373 696f 6e5f 7479 7065 2c0d  egression_type,.
-00023970: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
-00023980: 626f 7365 3d76 6572 626f 7365 2c0d 0a20  bose=verbose,.. 
-00023990: 2020 2020 2020 2020 2020 206e 5f6a 6f62             n_job
-000239a0: 733d 6e5f 6a6f 6273 2c0d 0a20 2020 2020  s=n_jobs,..     
-000239b0: 2020 2029 0d0a 2020 2020 2020 2020 7365     )..        se
-000239c0: 6c66 2e72 6567 7265 7373 696f 6e5f 6d6f  lf.regression_mo
-000239d0: 6465 6c20 3d20 7265 6772 6573 7369 6f6e  del = regression
-000239e0: 5f6d 6f64 656c 0d0a 2020 2020 2020 2020  _model..        
-000239f0: 7365 6c66 2e77 696e 646f 775f 7369 7a65  self.window_size
-00023a00: 203d 2061 6273 2869 6e74 2877 696e 646f   = abs(int(windo
-00023a10: 775f 7369 7a65 2929 0d0a 2020 2020 2020  w_size))..      
-00023a20: 2020 7365 6c66 2e6d 6178 5f68 6973 746f    self.max_histo
-00023a30: 7279 203d 206d 6178 5f68 6973 746f 7279  ry = max_history
-00023a40: 0d0a 2020 2020 2020 2020 7365 6c66 2e6f  ..        self.o
-00023a50: 6e65 5f73 7465 7020 3d20 6f6e 655f 7374  ne_step = one_st
-00023a60: 6570 0d0a 2020 2020 2020 2020 7365 6c66  ep..        self
-00023a70: 2e70 726f 6365 7373 6564 5f79 203d 2070  .processed_y = p
-00023a80: 726f 6365 7373 6564 5f79 0d0a 2020 2020  rocessed_y..    
-00023a90: 2020 2020 7365 6c66 2e74 7261 6e73 666f      self.transfo
-00023aa0: 726d 6174 696f 6e5f 6469 6374 203d 2074  rmation_dict = t
-00023ab0: 7261 6e73 666f 726d 6174 696f 6e5f 6469  ransformation_di
-00023ac0: 6374 0d0a 2020 2020 2020 2020 7365 6c66  ct..        self
-00023ad0: 2e64 6174 6570 6172 745f 6d65 7468 6f64  .datepart_method
-00023ae0: 203d 2064 6174 6570 6172 745f 6d65 7468   = datepart_meth
-00023af0: 6f64 0d0a 2020 2020 2020 2020 7365 6c66  od..        self
-00023b00: 2e6e 6f72 6d61 6c69 7a65 5f77 696e 646f  .normalize_windo
-00023b10: 7720 3d20 6e6f 726d 616c 697a 655f 7769  w = normalize_wi
-00023b20: 6e64 6f77 0d0a 2020 2020 2020 2020 7365  ndow..        se
-00023b30: 6c66 2e66 6f72 6563 6173 745f 6c65 6e67  lf.forecast_leng
-00023b40: 7468 203d 2066 6f72 6563 6173 745f 6c65  th = forecast_le
-00023b50: 6e67 7468 0d0a 0d0a 2020 2020 6465 6620  ngth....    def 
-00023b60: 6669 7428 7365 6c66 2c20 6466 2c20 6675  fit(self, df, fu
-00023b70: 7475 7265 5f72 6567 7265 7373 6f72 3d4e  ture_regressor=N
-00023b80: 6f6e 6529 3a0d 0a20 2020 2020 2020 2022  one):..        "
-00023b90: 2222 5472 6169 6e20 616c 676f 7269 7468  ""Train algorith
-00023ba0: 6d20 6769 7665 6e20 6461 7461 2073 7570  m given data sup
-00023bb0: 706c 6965 642e 0d0a 0d0a 2020 2020 2020  plied.....      
-00023bc0: 2020 4172 6773 3a0d 0a20 2020 2020 2020    Args:..       
-00023bd0: 2020 2020 2064 6620 2870 616e 6461 732e       df (pandas.
-00023be0: 4461 7461 4672 616d 6529 3a20 4461 7465  DataFrame): Date
-00023bf0: 7469 6d65 2049 6e64 6578 6564 0d0a 2020  time Indexed..  
-00023c00: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00023c10: 2020 2073 656c 662e 6669 745f 6461 7461     self.fit_data
-00023c20: 2864 6629 0d0a 2020 2020 2020 2020 6966  (df)..        if
-00023c30: 2073 656c 662e 7265 6772 6573 7369 6f6e   self.regression
-00023c40: 5f74 7970 6520 696e 205b 2255 7365 7222  _type in ["User"
-00023c50: 2c20 2275 7365 7222 5d3a 0d0a 2020 2020  , "user"]:..    
-00023c60: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-00023c70: 655f 7265 6772 6573 736f 7220 6973 204e  e_regressor is N
-00023c80: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00023c90: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00023ca0: 6545 7272 6f72 280d 0a20 2020 2020 2020  eError(..       
-00023cb0: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-00023cc0: 6772 6573 7369 6f6e 5f74 7970 653d 2755  gression_type='U
-00023cd0: 7365 7227 2062 7574 206e 6f20 6675 7475  ser' but no futu
-00023ce0: 7265 5f72 6567 7265 7373 6f72 2070 6173  re_regressor pas
-00023cf0: 7365 6422 0d0a 2020 2020 2020 2020 2020  sed"..          
-00023d00: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
-00023d10: 2066 726f 6d20 6175 746f 7473 2e74 6f6f   from autots.too
-00023d20: 6c73 2e74 7261 6e73 666f 726d 2069 6d70  ls.transform imp
-00023d30: 6f72 7420 4765 6e65 7261 6c54 7261 6e73  ort GeneralTrans
-00023d40: 666f 726d 6572 2020 2320 6176 6f69 6420  former  # avoid 
-00023d50: 6369 7263 756c 6172 2069 6d70 6f72 7473  circular imports
-00023d60: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00023d70: 2e74 7261 6e73 666f 726d 6572 5f6f 626a  .transformer_obj
-00023d80: 6563 7420 3d20 4765 6e65 7261 6c54 7261  ect = GeneralTra
-00023d90: 6e73 666f 726d 6572 280d 0a20 2020 2020  nsformer(..     
-00023da0: 2020 2020 2020 206e 5f6a 6f62 733d 7365         n_jobs=se
-00023db0: 6c66 2e6e 5f6a 6f62 732c 0d0a 2020 2020  lf.n_jobs,..    
-00023dc0: 2020 2020 2020 2020 686f 6c69 6461 795f          holiday_
-00023dd0: 636f 756e 7472 793d 7365 6c66 2e68 6f6c  country=self.hol
-00023de0: 6964 6179 5f63 6f75 6e74 7279 2c0d 0a20  iday_country,.. 
-00023df0: 2020 2020 2020 2020 2020 202a 2a73 656c             **sel
-00023e00: 662e 7472 616e 7366 6f72 6d61 7469 6f6e  f.transformation
-00023e10: 5f64 6963 742c 0d0a 2020 2020 2020 2020  _dict,..        
-00023e20: 290d 0a20 2020 2020 2020 2066 6f72 6563  )..        forec
-00023e30: 6173 745f 6c65 6e67 7468 203d 2073 656c  ast_length = sel
-00023e40: 662e 666f 7265 6361 7374 5f6c 656e 6774  f.forecast_lengt
-00023e50: 680d 0a20 2020 2020 2020 206f 6e65 5f73  h..        one_s
-00023e60: 7465 7020 3d20 7365 6c66 2e6f 6e65 5f73  tep = self.one_s
-00023e70: 7465 700d 0a20 2020 2020 2020 2070 726f  tep..        pro
-00023e80: 6365 7373 6564 5f79 203d 2073 656c 662e  cessed_y = self.
-00023e90: 7072 6f63 6573 7365 645f 790d 0a20 2020  processed_y..   
-00023ea0: 2020 2020 2064 6620 3d20 7365 6c66 2e74       df = self.t
-00023eb0: 7261 6e73 666f 726d 6572 5f6f 626a 6563  ransformer_objec
-00023ec0: 742e 5f66 6972 7374 5f66 6974 2864 6629  t._first_fit(df)
-00023ed0: 0d0a 0d0a 2020 2020 2020 2020 6466 5f6c  ....        df_l
-00023ee0: 6973 7420 3d20 5b64 665d 0d0a 2020 2020  ist = [df]..    
-00023ef0: 2020 2020 6e65 775f 6466 203d 2064 660d      new_df = df.
-00023f00: 0a20 2020 2020 2020 2074 7261 6e73 5f6b  .        trans_k
-00023f10: 6579 7320 3d20 736f 7274 6564 286c 6973  eys = sorted(lis
-00023f20: 7428 7365 6c66 2e74 7261 6e73 666f 726d  t(self.transform
-00023f30: 6572 5f6f 626a 6563 742e 7472 616e 7366  er_object.transf
-00023f40: 6f72 6d61 7469 6f6e 732e 6b65 7973 2829  ormations.keys()
-00023f50: 2929 0d0a 2020 2020 2020 2020 666f 7220  ))..        for 
-00023f60: 6920 696e 2074 7261 6e73 5f6b 6579 733a  i in trans_keys:
-00023f70: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-00023f80: 616e 735f 6e61 6d65 203d 2073 656c 662e  ans_name = self.
-00023f90: 7472 616e 7366 6f72 6d65 725f 6f62 6a65  transformer_obje
-00023fa0: 6374 2e74 7261 6e73 666f 726d 6174 696f  ct.transformatio
-00023fb0: 6e73 5b69 5d0d 0a20 2020 2020 2020 2020  ns[i]..         
-00023fc0: 2020 2069 6620 7472 616e 735f 6e61 6d65     if trans_name
-00023fd0: 206e 6f74 2069 6e20 5b27 536c 6963 6527   not in ['Slice'
-00023fe0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00023ff0: 2020 2020 6e65 775f 6466 203d 2073 656c      new_df = sel
-00024000: 662e 7472 616e 7366 6f72 6d65 725f 6f62  f.transformer_ob
-00024010: 6a65 6374 2e5f 6669 745f 6f6e 6528 6e65  ject._fit_one(ne
-00024020: 775f 6466 2c20 6929 0d0a 2020 2020 2020  w_df, i)..      
-00024030: 2020 2020 2020 2020 2020 6466 5f6c 6973            df_lis
-00024040: 742e 6170 7065 6e64 286e 6577 5f64 6629  t.append(new_df)
-00024050: 0d0a 0d0a 2020 2020 2020 2020 6d61 785f  ....        max_
-00024060: 6869 7374 6f72 7920 3d20 3020 6966 2073  history = 0 if s
-00024070: 656c 662e 6d61 785f 6869 7374 6f72 7920  elf.max_history 
-00024080: 6973 204e 6f6e 6520 656c 7365 2061 6273  is None else abs
-00024090: 2869 6e74 2873 656c 662e 6d61 785f 6869  (int(self.max_hi
-000240a0: 7374 6f72 7929 290d 0a20 2020 2020 2020  story))..       
-000240b0: 2077 696e 646f 775f 6c69 7374 203d 205b   window_list = [
-000240c0: 5d0d 0a20 2020 2020 2020 2066 6f72 2063  ]..        for c
-000240d0: 6466 2069 6e20 6466 5f6c 6973 743a 0d0a  df in df_list:..
-000240e0: 2020 2020 2020 2020 2020 2020 7769 6e64              wind
-000240f0: 6f77 5f6c 6973 742e 6170 7065 6e64 280d  ow_list.append(.
-00024100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024110: 2073 6c69 6469 6e67 5f77 696e 646f 775f   sliding_window_
-00024120: 7669 6577 280d 0a20 2020 2020 2020 2020  view(..         
-00024130: 2020 2020 2020 2020 2020 206e 702e 6173             np.as
-00024140: 6172 7261 7928 6364 6629 5b2d 6d61 785f  array(cdf)[-max_
-00024150: 6869 7374 6f72 793a 5d2c 0d0a 2020 2020  history:],..    
-00024160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024170: 7769 6e64 6f77 5f73 6861 7065 3d28 7365  window_shape=(se
-00024180: 6c66 2e77 696e 646f 775f 7369 7a65 2c29  lf.window_size,)
-00024190: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000241a0: 2020 2020 2020 2061 7869 733d 302c 0d0a         axis=0,..
-000241b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000241c0: 290d 0a20 2020 2020 2020 2020 2020 2029  )..            )
-000241d0: 0d0a 2020 2020 2020 2020 6675 6c6c 203d  ..        full =
-000241e0: 206e 702e 636f 6e63 6174 656e 6174 6528   np.concatenate(
-000241f0: 7769 6e64 6f77 5f6c 6973 742c 2061 7869  window_list, axi
-00024200: 733d 3229 0d0a 0d0a 2020 2020 2020 2020  s=2)....        
-00024210: 6578 7472 6173 203d 2073 656c 662e 5f63  extras = self._c
-00024220: 6f6e 7374 7275 6374 5f65 7874 7261 7328  onstruct_extras(
-00024230: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00024240: 5f69 6e64 6578 3d64 662e 696e 6465 782c  _index=df.index,
-00024250: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
-00024260: 723d 6675 7475 7265 5f72 6567 7265 7373  r=future_regress
-00024270: 6f72 0d0a 2020 2020 2020 2020 290d 0a0d  or..        )...
-00024280: 0a20 2020 2020 2020 2066 756c 6c5f 656e  .        full_en
-00024290: 6420 3d20 6466 2e73 6861 7065 5b30 5d20  d = df.shape[0] 
-000242a0: 2d20 310d 0a20 2020 2020 2020 2077 696e  - 1..        win
-000242b0: 646f 775f 656e 6420 3d20 6675 6c6c 2e73  dow_end = full.s
-000242c0: 6861 7065 5b30 5d20 2d20 310d 0a20 2020  hape[0] - 1..   
-000242d0: 2020 2020 206d 6178 5f68 6973 745f 7265       max_hist_re
-000242e0: 7620 3d20 6466 2e73 6861 7065 5b30 5d20  v = df.shape[0] 
-000242f0: 2d20 6d61 785f 6869 7374 6f72 7920 6966  - max_history if
-00024300: 206d 6178 5f68 6973 746f 7279 2021 3d20   max_history != 
-00024310: 3020 656c 7365 2030 0d0a 0d0a 2020 2020  0 else 0....    
-00024320: 2020 2020 6966 206f 6e65 5f73 7465 703a      if one_step:
-00024330: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00024340: 6c66 2e58 203d 2066 756c 6c5b 3a2d 315d  lf.X = full[:-1]
-00024350: 2e72 6573 6861 7065 282d 312c 2066 756c  .reshape(-1, ful
-00024360: 6c2e 7368 6170 655b 2d31 5d29 0d0a 2020  l.shape[-1])..  
-00024370: 2020 2020 2020 2020 2020 6966 2065 7874            if ext
-00024380: 7261 7320 6973 206e 6f74 204e 6f6e 653a  ras is not None:
-00024390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000243a0: 2020 7365 6c66 2e58 203d 206e 702e 636f    self.X = np.co
-000243b0: 6e63 6174 656e 6174 6528 0d0a 2020 2020  ncatenate(..    
-000243c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000243d0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
-000243e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000243f0: 582c 0d0a 2020 2020 2020 2020 2020 2020  X,..            
-00024400: 2020 2020 2020 2020 2020 2020 6578 7472              extr
-00024410: 6173 5b73 656c 662e 7769 6e64 6f77 5f73  as[self.window_s
-00024420: 697a 6520 2b20 6d61 785f 6869 7374 5f72  ize + max_hist_r
-00024430: 6576 203a 5d2e 7265 7368 6170 6528 0d0a  ev :].reshape(..
-00024440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024450: 2020 2020 2020 2020 2020 2020 2d31 2c20              -1, 
-00024460: 6578 7472 6173 2e73 6861 7065 5b2d 315d  extras.shape[-1]
-00024470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024480: 2020 2020 2020 2020 2020 292c 0d0a 2020            ),..  
-00024490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000244a0: 2020 5d2c 0d0a 2020 2020 2020 2020 2020    ],..          
-000244b0: 2020 2020 2020 2020 2020 6178 6973 3d31            axis=1
-000244c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000244d0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000244e0: 2020 6966 2070 726f 6365 7373 6564 5f79    if processed_y
-000244f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00024500: 2020 2073 656c 662e 5920 3d20 6e70 2e61     self.Y = np.a
-00024510: 7361 7272 6179 2864 665f 6c69 7374 5b2d  sarray(df_list[-
-00024520: 315d 295b 0d0a 2020 2020 2020 2020 2020  1])[..          
-00024530: 2020 2020 2020 2020 2020 7365 6c66 2e77            self.w
-00024540: 696e 646f 775f 7369 7a65 202b 206d 6178  indow_size + max
-00024550: 5f68 6973 745f 7265 7620 3a0d 0a20 2020  _hist_rev :..   
-00024560: 2020 2020 2020 2020 2020 2020 205d 2e72               ].r
-00024570: 6573 6861 7065 282d 3129 0d0a 2020 2020  eshape(-1)..    
-00024580: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00024590: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000245a0: 656c 662e 5920 3d20 6e70 2e61 7361 7272  elf.Y = np.asarr
-000245b0: 6179 2864 6629 5b73 656c 662e 7769 6e64  ay(df)[self.wind
-000245c0: 6f77 5f73 697a 6520 2b20 6d61 785f 6869  ow_size + max_hi
-000245d0: 7374 5f72 6576 203a 5d2e 7265 7368 6170  st_rev :].reshap
-000245e0: 6528 2d31 290d 0a20 2020 2020 2020 2065  e(-1)..        e
-000245f0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00024600: 2020 7769 6e64 6f77 7320 3d20 5b5d 0d0a    windows = []..
-00024610: 2020 2020 2020 2020 2020 2020 7461 7267              targ
-00024620: 6574 7320 3d20 5b5d 0d0a 2020 2020 2020  ets = []..      
-00024630: 2020 2020 2020 6578 7472 615f 7365 6c20        extra_sel 
-00024640: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
-00024650: 2020 666f 7265 6361 7374 5f73 7465 7073    forecast_steps
-00024660: 203d 205b 5d0d 0a20 2020 2020 2020 2020   = []..         
-00024670: 2020 2023 2063 6f6e 6361 7420 616e 6420     # concat and 
-00024680: 6472 6f70 2077 696e 646f 7720 6f66 2065  drop window of e
-00024690: 6e64 206f 6620 6461 7461 7365 740d 0a20  nd of dataset.. 
-000246a0: 2020 2020 2020 2020 2020 2066 6f72 206e             for n
-000246b0: 2069 6e20 7261 6e67 6528 666f 7265 6361   in range(foreca
-000246c0: 7374 5f6c 656e 6774 6829 3a0d 0a20 2020  st_length):..   
-000246d0: 2020 2020 2020 2020 2020 2020 2023 2064               # d
-000246e0: 6f6e 2774 2069 6e63 6c75 6465 206c 6173  on't include las
-000246f0: 7420 706f 696e 7420 666f 7220 7769 6e64  t point for wind
-00024700: 6f77 7320 6173 2069 7420 6973 2074 6865  ows as it is the
-00024710: 2074 7261 696e 696e 6720 706f 696e 740d   training point.
-00024720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024730: 2065 6e64 5f70 6f69 6e74 203d 2077 696e   end_point = win
-00024740: 646f 775f 656e 6420 2d20 6e20 2d20 310d  dow_end - n - 1.
-00024750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024760: 2069 6620 656e 645f 706f 696e 7420 3e20   if end_point > 
-00024770: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-00024780: 2020 2020 2020 2020 7769 6e64 6f77 5f69          window_i
-00024790: 6478 203d 206e 702e 6172 616e 6765 2830  dx = np.arange(0
-000247a0: 2c20 656e 645f 706f 696e 7429 0d0a 2020  , end_point)..  
-000247b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000247c0: 2020 7769 6e64 6f77 732e 6170 7065 6e64    windows.append
-000247d0: 2866 756c 6c5b 7769 6e64 6f77 5f69 6478  (full[window_idx
-000247e0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-000247f0: 2020 2020 2020 2020 2320 666f 7220 7920          # for y 
-00024800: 616e 6420 7461 7267 6574 2072 656c 6174  and target relat
-00024810: 6564 2076 6172 732c 2064 6f6e 2774 2069  ed vars, don't i
-00024820: 6e63 6c75 6465 2066 6972 7374 2070 6f69  nclude first poi
-00024830: 6e74 0d0a 2020 2020 2020 2020 2020 2020  nt..            
-00024840: 2020 2020 2020 2020 7461 7267 6574 5f69          target_i
-00024850: 6478 203d 206e 702e 6172 616e 6765 280d  dx = np.arange(.
-00024860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024870: 2020 2020 2020 2020 2073 656c 662e 7769           self.wi
-00024880: 6e64 6f77 5f73 697a 6520 2b20 6e20 2b20  ndow_size + n + 
-00024890: 6d61 785f 6869 7374 5f72 6576 2c20 6675  max_hist_rev, fu
-000248a0: 6c6c 5f65 6e64 0d0a 2020 2020 2020 2020  ll_end..        
-000248b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-000248c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000248d0: 2020 2069 6620 7072 6f63 6573 7365 645f     if processed_
-000248e0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-000248f0: 2020 2020 2020 2020 2020 2020 7461 7267              targ
-00024900: 6574 732e 6170 7065 6e64 286e 702e 6173  ets.append(np.as
-00024910: 6172 7261 7928 6466 5f6c 6973 745b 2d31  array(df_list[-1
-00024920: 5d29 5b74 6172 6765 745f 6964 785d 290d  ])[target_idx]).
-00024930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024940: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00024950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024960: 2020 2020 7461 7267 6574 732e 6170 7065      targets.appe
-00024970: 6e64 286e 702e 6173 6172 7261 7928 6466  nd(np.asarray(df
-00024980: 295b 7461 7267 6574 5f69 6478 5d29 0d0a  )[target_idx])..
-00024990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000249a0: 2020 2020 666f 7265 6361 7374 5f73 7465      forecast_ste
-000249b0: 7073 2e61 7070 656e 6428 286e 702e 6f6e  ps.append((np.on
-000249c0: 6573 5f6c 696b 6528 6466 2920 2a20 6e29  es_like(df) * n)
-000249d0: 5b74 6172 6765 745f 6964 785d 290d 0a20  [target_idx]).. 
-000249e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000249f0: 2020 2069 6620 6578 7472 6173 2069 7320     if extras is 
-00024a00: 6e6f 7420 4e6f 6e65 3a0d 0a20 2020 2020  not None:..     
-00024a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024a20: 2020 2065 7874 7261 5f73 656c 2e61 7070     extra_sel.app
-00024a30: 656e 6428 6578 7472 6173 5b74 6172 6765  end(extras[targe
-00024a40: 745f 6964 785d 290d 0a20 2020 2020 2020  t_idx])..       
-00024a50: 2020 2020 2077 696e 646f 7773 203d 206e       windows = n
-00024a60: 702e 636f 6e63 6174 656e 6174 6528 7769  p.concatenate(wi
-00024a70: 6e64 6f77 732c 2061 7869 733d 3029 0d0a  ndows, axis=0)..
-00024a80: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00024a90: 7874 7261 7320 6973 206e 6f74 204e 6f6e  xtras is not Non
-00024aa0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00024ab0: 2020 2020 6578 7472 615f 7365 6c20 3d20      extra_sel = 
-00024ac0: 6e70 2e63 6f6e 6361 7465 6e61 7465 2865  np.concatenate(e
-00024ad0: 7874 7261 5f73 656c 2c20 6178 6973 3d30  xtra_sel, axis=0
-00024ae0: 290d 0a20 2020 2020 2020 2020 2020 2066  )..            f
-00024af0: 6f72 6563 6173 745f 7374 6570 7320 3d20  orecast_steps = 
-00024b00: 6e70 2e63 6f6e 6361 7465 6e61 7465 2866  np.concatenate(f
-00024b10: 6f72 6563 6173 745f 7374 6570 732c 2061  orecast_steps, a
-00024b20: 7869 733d 3029 0d0a 2020 2020 2020 2020  xis=0)..        
-00024b30: 2020 2020 6966 2065 7874 7261 7320 6973      if extras is
-00024b40: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-00024b50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00024b60: 2e58 203d 206e 702e 636f 6e63 6174 656e  .X = np.concaten
-00024b70: 6174 6528 0d0a 2020 2020 2020 2020 2020  ate(..          
-00024b80: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
-00024b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024ba0: 2020 2020 2077 696e 646f 7773 2e72 6573       windows.res
-00024bb0: 6861 7065 282d 312c 2077 696e 646f 7773  hape(-1, windows
-00024bc0: 2e73 6861 7065 5b2d 315d 292c 0d0a 2020  .shape[-1]),..  
-00024bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024be0: 2020 2020 2020 6578 7472 615f 7365 6c2e        extra_sel.
-00024bf0: 7265 7368 6170 6528 2d31 2c20 6578 7472  reshape(-1, extr
-00024c00: 6173 2e73 6861 7065 5b2d 315d 292c 0d0a  as.shape[-1]),..
-00024c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024c20: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
-00024c30: 5f73 7465 7073 2e72 6573 6861 7065 282d  _steps.reshape(-
-00024c40: 312c 2031 292c 0d0a 2020 2020 2020 2020  1, 1),..        
-00024c50: 2020 2020 2020 2020 2020 2020 5d2c 0d0a              ],..
-00024c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024c70: 2020 2020 6178 6973 3d31 2c0d 0a20 2020      axis=1,..   
-00024c80: 2020 2020 2020 2020 2020 2020 2029 0d0a               )..
-00024c90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00024ca0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00024cb0: 2020 2073 656c 662e 5820 3d20 6e70 2e63     self.X = np.c
-00024cc0: 6f6e 6361 7465 6e61 7465 280d 0a20 2020  oncatenate(..   
-00024cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024ce0: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-00024cf0: 2020 2020 2020 2020 2020 2020 7769 6e64              wind
-00024d00: 6f77 732e 7265 7368 6170 6528 2d31 2c20  ows.reshape(-1, 
-00024d10: 7769 6e64 6f77 732e 7368 6170 655b 2d31  windows.shape[-1
-00024d20: 5d29 2c0d 0a20 2020 2020 2020 2020 2020  ]),..           
-00024d30: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00024d40: 6563 6173 745f 7374 6570 732e 7265 7368  ecast_steps.resh
-00024d50: 6170 6528 2d31 2c20 3129 2c0d 0a20 2020  ape(-1, 1),..   
-00024d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024d70: 205d 2c0d 0a20 2020 2020 2020 2020 2020   ],..           
-00024d80: 2020 2020 2020 2020 2061 7869 733d 312c           axis=1,
-00024d90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00024da0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
-00024db0: 2073 656c 662e 5920 3d20 6e70 2e63 6f6e   self.Y = np.con
-00024dc0: 6361 7465 6e61 7465 2874 6172 6765 7473  catenate(targets
-00024dd0: 2c20 6178 6973 3d30 292e 7265 7368 6170  , axis=0).reshap
-00024de0: 6528 2d31 290d 0a0d 0a20 2020 2020 2020  e(-1)....       
-00024df0: 2023 2044 524f 5020 7661 6c75 6573 2077   # DROP values w
-00024e00: 6869 6368 2063 6f6e 7461 696e 206e 756d  hich contain num
-00024e10: 7079 2c20 6e6f 7420 6861 7669 6e67 2066  py, not having f
-00024e20: 696c 6c65 6420 696e 6974 6961 6c20 6e61  illed initial na
-00024e30: 6e20 7661 6c75 6573 0d0a 2020 2020 2020  n values..      
-00024e40: 2020 6e61 6e5f 726f 7773 203d 206e 702e    nan_rows = np.
-00024e50: 6172 6777 6865 7265 286e 702e 6973 6e61  argwhere(np.isna
-00024e60: 6e28 6e70 2e73 756d 2873 656c 662e 582c  n(np.sum(self.X,
-00024e70: 2061 7869 733d 3129 2929 0d0a 2020 2020   axis=1)))..    
-00024e80: 2020 2020 6966 206e 616e 5f72 6f77 732e      if nan_rows.
-00024e90: 7369 7a65 2021 3d20 303a 0d0a 2020 2020  size != 0:..    
-00024ea0: 2020 2020 2020 2020 7365 6c66 2e58 203d          self.X =
-00024eb0: 206e 702e 6465 6c65 7465 2873 656c 662e   np.delete(self.
-00024ec0: 582c 206e 616e 5f72 6f77 732c 2061 7869  X, nan_rows, axi
-00024ed0: 733d 3029 0d0a 2020 2020 2020 2020 2020  s=0)..          
-00024ee0: 2020 7365 6c66 2e59 203d 206e 702e 6465    self.Y = np.de
-00024ef0: 6c65 7465 2873 656c 662e 592c 206e 616e  lete(self.Y, nan
-00024f00: 5f72 6f77 732c 2061 7869 733d 3029 0d0a  _rows, axis=0)..
-00024f10: 0d0a 2020 2020 2020 2020 6d75 6c74 696f  ..        multio
-00024f20: 7574 7075 7420 3d20 5472 7565 0d0a 2020  utput = True..  
-00024f30: 2020 2020 2020 6966 2073 656c 662e 592e        if self.Y.
-00024f40: 6e64 696d 203c 2032 3a0d 0a20 2020 2020  ndim < 2:..     
-00024f50: 2020 2020 2020 206d 756c 7469 6f75 7470         multioutp
-00024f60: 7574 203d 2046 616c 7365 0d0a 2020 2020  ut = False..    
-00024f70: 2020 2020 656c 6966 2073 656c 662e 592e      elif self.Y.
-00024f80: 7368 6170 655b 315d 203c 2032 3a0d 0a20  shape[1] < 2:.. 
-00024f90: 2020 2020 2020 2020 2020 206d 756c 7469             multi
-00024fa0: 6f75 7470 7574 203d 2046 616c 7365 0d0a  output = False..
-00024fb0: 2020 2020 2020 2020 7365 6c66 2e6d 6f64          self.mod
-00024fc0: 656c 203d 2072 6574 7269 6576 655f 7265  el = retrieve_re
-00024fd0: 6772 6573 736f 7228 0d0a 2020 2020 2020  gressor(..      
-00024fe0: 2020 2020 2020 7265 6772 6573 7369 6f6e        regression
-00024ff0: 5f6d 6f64 656c 3d73 656c 662e 7265 6772  _model=self.regr
-00025000: 6573 7369 6f6e 5f6d 6f64 656c 2c0d 0a20  ession_model,.. 
-00025010: 2020 2020 2020 2020 2020 2076 6572 626f             verbo
-00025020: 7365 3d73 656c 662e 7665 7262 6f73 652c  se=self.verbose,
-00025030: 0d0a 2020 2020 2020 2020 2020 2020 7665  ..            ve
-00025040: 7262 6f73 655f 626f 6f6c 3d73 656c 662e  rbose_bool=self.
-00025050: 7665 7262 6f73 655f 626f 6f6c 2c0d 0a20  verbose_bool,.. 
-00025060: 2020 2020 2020 2020 2020 2072 616e 646f             rando
-00025070: 6d5f 7365 6564 3d73 656c 662e 7261 6e64  m_seed=self.rand
-00025080: 6f6d 5f73 6565 642c 0d0a 2020 2020 2020  om_seed,..      
-00025090: 2020 2020 2020 6e5f 6a6f 6273 3d73 656c        n_jobs=sel
-000250a0: 662e 6e5f 6a6f 6273 2c0d 0a20 2020 2020  f.n_jobs,..     
-000250b0: 2020 2020 2020 206d 756c 7469 6f75 7470         multioutp
-000250c0: 7574 3d6d 756c 7469 6f75 7470 7574 2c0d  ut=multioutput,.
-000250d0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-000250e0: 2020 2020 6966 2073 656c 662e 6e6f 726d      if self.norm
-000250f0: 616c 697a 655f 7769 6e64 6f77 3a0d 0a20  alize_window:.. 
-00025100: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00025110: 5820 3d20 7365 6c66 2e5f 6261 7365 5f73  X = self._base_s
-00025120: 6361 6c65 7228 7365 6c66 2e58 290d 0a20  caler(self.X).. 
-00025130: 2020 2020 2020 2073 656c 662e 6d6f 6465         self.mode
-00025140: 6c20 3d20 7365 6c66 2e6d 6f64 656c 2e66  l = self.model.f
-00025150: 6974 2873 656c 662e 582e 6173 7479 7065  it(self.X.astype
-00025160: 2866 6c6f 6174 292c 2073 656c 662e 592e  (float), self.Y.
-00025170: 6173 7479 7065 2866 6c6f 6174 2929 0d0a  astype(float))..
-00025180: 2020 2020 2020 2020 7365 6c66 2e66 6974          self.fit
-00025190: 5f72 756e 7469 6d65 203d 2064 6174 6574  _runtime = datet
-000251a0: 696d 652e 6461 7465 7469 6d65 2e6e 6f77  ime.datetime.now
-000251b0: 2829 202d 2073 656c 662e 7374 6172 7454  () - self.startT
-000251c0: 696d 650d 0a20 2020 2020 2020 2072 6574  ime..        ret
-000251d0: 7572 6e20 7365 6c66 0d0a 0d0a 2020 2020  urn self....    
-000251e0: 6465 6620 5f63 6f6e 7374 7275 6374 5f65  def _construct_e
-000251f0: 7874 7261 7328 7365 6c66 2c20 6466 5f69  xtras(self, df_i
-00025200: 6e64 6578 2c20 6675 7475 7265 5f72 6567  ndex, future_reg
-00025210: 7265 7373 6f72 293a 0d0a 2020 2020 2020  ressor):..      
-00025220: 2020 6578 7472 6173 203d 2054 7275 650d    extras = True.
-00025230: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00025240: 2e64 6174 6570 6172 745f 6d65 7468 6f64  .datepart_method
-00025250: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00025260: 2020 2020 2020 2020 2020 2064 6174 655f             date_
-00025270: 7061 7274 5f64 6620 3d20 6461 7465 5f70  part_df = date_p
-00025280: 6172 7428 6466 5f69 6e64 6578 2c20 6d65  art(df_index, me
-00025290: 7468 6f64 3d73 656c 662e 6461 7465 7061  thod=self.datepa
-000252a0: 7274 5f6d 6574 686f 6429 0d0a 2020 2020  rt_method)..    
-000252b0: 2020 2020 2020 2020 6966 2066 7574 7572          if futur
-000252c0: 655f 7265 6772 6573 736f 7220 6973 206e  e_regressor is n
-000252d0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-000252e0: 2020 2020 2020 2020 2020 6461 7465 5f70            date_p
-000252f0: 6172 745f 6466 203d 2064 6174 655f 7061  art_df = date_pa
-00025300: 7274 5f64 662e 6d65 7267 6528 0d0a 2020  rt_df.merge(..  
-00025310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025320: 2020 6675 7475 7265 5f72 6567 7265 7373    future_regress
-00025330: 6f72 2c20 6c65 6674 5f69 6e64 6578 3d54  or, left_index=T
-00025340: 7275 652c 2072 6967 6874 5f69 6e64 6578  rue, right_index
-00025350: 3d54 7275 652c 2068 6f77 3d27 6c65 6674  =True, how='left
-00025360: 270d 0a20 2020 2020 2020 2020 2020 2020  '..             
-00025370: 2020 2029 0d0a 2020 2020 2020 2020 656c     )..        el
-00025380: 6966 2066 7574 7572 655f 7265 6772 6573  if future_regres
-00025390: 736f 7220 6973 206e 6f74 204e 6f6e 6520  sor is not None 
-000253a0: 616e 6420 7365 6c66 2e72 6567 7265 7373  and self.regress
-000253b0: 696f 6e5f 7479 7065 2069 6e20 5b22 5573  ion_type in ["Us
-000253c0: 6572 222c 2022 7573 6572 225d 3a0d 0a20  er", "user"]:.. 
-000253d0: 2020 2020 2020 2020 2020 2064 6174 655f             date_
-000253e0: 7061 7274 5f64 6620 3d20 6675 7475 7265  part_df = future
-000253f0: 5f72 6567 7265 7373 6f72 0d0a 2020 2020  _regressor..    
-00025400: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00025410: 2020 2020 2020 2065 7874 7261 7320 3d20         extras = 
-00025420: 4e6f 6e65 0d0a 2020 2020 2020 2020 6966  None..        if
-00025430: 2065 7874 7261 7320 6973 206e 6f74 204e   extras is not N
-00025440: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00025450: 2020 4e20 3d20 7365 6c66 2e74 7261 696e    N = self.train
-00025460: 5f73 6861 7065 5b31 5d0d 0a20 2020 2020  _shape[1]..     
-00025470: 2020 2020 2020 2023 206d 656d 6f72 7920         # memory 
-00025480: 6566 6669 6369 656e 7420 7265 7065 6174  efficient repeat
-00025490: 2c20 686f 7065 6675 6c6c 790d 0a20 2020  , hopefully..   
-000254a0: 2020 2020 2020 2020 2065 7874 7261 7320           extras 
-000254b0: 3d20 6e70 2e6d 6f76 6561 7869 7328 0d0a  = np.moveaxis(..
-000254c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000254d0: 6e70 2e61 7361 7272 6179 2864 6174 655f  np.asarray(date_
-000254e0: 7061 7274 5f64 6629 5b3a 2c20 3a2c 206e  part_df)[:, :, n
-000254f0: 702e 6e65 7761 7869 735d 202a 206e 702e  p.newaxis] * np.
-00025500: 6f6e 6573 2828 312c 2031 2c20 4e29 292c  ones((1, 1, N)),
-00025510: 2032 2c20 310d 0a20 2020 2020 2020 2020   2, 1..         
-00025520: 2020 2029 0d0a 2020 2020 2020 2020 7265     )..        re
-00025530: 7475 726e 2065 7874 7261 730d 0a0d 0a20  turn extras.... 
-00025540: 2020 2064 6566 205f 636f 6e73 7472 7563     def _construc
-00025550: 745f 6675 6c6c 2873 656c 662c 2064 6629  t_full(self, df)
-00025560: 3a0d 0a20 2020 2020 2020 2023 2075 7365  :..        # use
-00025570: 6420 696e 2070 7265 6469 6374 206f 6e6c  d in predict onl
-00025580: 790d 0a20 2020 2020 2020 2064 6620 3d20  y..        df = 
-00025590: 7365 6c66 2e74 7261 6e73 666f 726d 6572  self.transformer
-000255a0: 5f6f 626a 6563 742e 5f66 6972 7374 5f66  _object._first_f
-000255b0: 6974 2864 6629 0d0a 2020 2020 2020 2020  it(df)..        
-000255c0: 6466 5f6c 6973 7420 3d20 5b64 665d 0d0a  df_list = [df]..
-000255d0: 2020 2020 2020 2020 6e65 775f 6466 203d          new_df =
-000255e0: 2064 660d 0a20 2020 2020 2020 2074 7261   df..        tra
-000255f0: 6e73 5f6b 6579 7320 3d20 736f 7274 6564  ns_keys = sorted
-00025600: 286c 6973 7428 7365 6c66 2e74 7261 6e73  (list(self.trans
-00025610: 666f 726d 6572 5f6f 626a 6563 742e 7472  former_object.tr
-00025620: 616e 7366 6f72 6d61 7469 6f6e 732e 6b65  ansformations.ke
-00025630: 7973 2829 2929 0d0a 2020 2020 2020 2020  ys()))..        
-00025640: 666f 7220 6920 696e 2074 7261 6e73 5f6b  for i in trans_k
-00025650: 6579 733a 0d0a 2020 2020 2020 2020 2020  eys:..          
-00025660: 2020 7472 616e 735f 6e61 6d65 203d 2073    trans_name = s
-00025670: 656c 662e 7472 616e 7366 6f72 6d65 725f  elf.transformer_
-00025680: 6f62 6a65 6374 2e74 7261 6e73 666f 726d  object.transform
-00025690: 6174 696f 6e73 5b69 5d0d 0a20 2020 2020  ations[i]..     
-000256a0: 2020 2020 2020 2069 6620 7472 616e 735f         if trans_
-000256b0: 6e61 6d65 206e 6f74 2069 6e20 5b27 536c  name not in ['Sl
-000256c0: 6963 6527 5d3a 0d0a 2020 2020 2020 2020  ice']:..        
-000256d0: 2020 2020 2020 2020 6e65 775f 6466 203d          new_df =
-000256e0: 2073 656c 662e 7472 616e 7366 6f72 6d65   self.transforme
-000256f0: 725f 6f62 6a65 6374 2e5f 7472 616e 7366  r_object._transf
-00025700: 6f72 6d5f 6f6e 6528 6e65 775f 6466 2c20  orm_one(new_df, 
-00025710: 6929 0d0a 2020 2020 2020 2020 2020 2020  i)..            
-00025720: 2020 2020 6466 5f6c 6973 742e 6170 7065      df_list.appe
-00025730: 6e64 286e 6577 5f64 6629 0d0a 0d0a 2020  nd(new_df)....  
-00025740: 2020 2020 2020 2320 6d61 785f 6869 7374        # max_hist
-00025750: 6f72 7920 3d20 3020 6966 2073 656c 662e  ory = 0 if self.
-00025760: 6d61 785f 6869 7374 6f72 7920 6973 204e  max_history is N
-00025770: 6f6e 6520 656c 7365 2073 656c 662e 6d61  one else self.ma
-00025780: 785f 6869 7374 6f72 790d 0a20 2020 2020  x_history..     
-00025790: 2020 2077 696e 646f 775f 6c69 7374 203d     window_list =
-000257a0: 205b 5d0d 0a20 2020 2020 2020 2066 6f72   []..        for
-000257b0: 2063 6466 2069 6e20 6466 5f6c 6973 743a   cdf in df_list:
-000257c0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-000257d0: 6e64 6f77 5f6c 6973 742e 6170 7065 6e64  ndow_list.append
-000257e0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
-000257f0: 2020 2073 6c69 6469 6e67 5f77 696e 646f     sliding_windo
-00025800: 775f 7669 6577 280d 0a20 2020 2020 2020  w_view(..       
-00025810: 2020 2020 2020 2020 2020 2020 206e 702e               np.
-00025820: 6173 6172 7261 7928 6364 6629 2c0d 0a20  asarray(cdf),.. 
-00025830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025840: 2020 2077 696e 646f 775f 7368 6170 653d     window_shape=
-00025850: 2873 656c 662e 7769 6e64 6f77 5f73 697a  (self.window_siz
-00025860: 652c 292c 0d0a 2020 2020 2020 2020 2020  e,),..          
-00025870: 2020 2020 2020 2020 2020 6178 6973 3d30            axis=0
-00025880: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00025890: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000258a0: 2020 2920 2023 205b 2d6d 6178 5f68 6973    )  # [-max_his
-000258b0: 746f 7279 3a5d 0d0a 2020 2020 2020 2020  tory:]..        
-000258c0: 7265 7475 726e 206e 702e 636f 6e63 6174  return np.concat
-000258d0: 656e 6174 6528 7769 6e64 6f77 5f6c 6973  enate(window_lis
-000258e0: 742c 2061 7869 733d 3229 0d0a 0d0a 2020  t, axis=2)....  
-000258f0: 2020 6465 6620 5f62 6173 655f 7363 616c    def _base_scal
-00025900: 6572 2873 656c 662c 2058 293a 0d0a 2020  er(self, X):..  
-00025910: 2020 2020 2020 7365 6c66 2e73 6361 6c65        self.scale
-00025920: 725f 6d65 616e 203d 206e 702e 6d65 616e  r_mean = np.mean
-00025930: 2858 2c20 6178 6973 3d30 290d 0a20 2020  (X, axis=0)..   
-00025940: 2020 2020 2073 656c 662e 7363 616c 6572       self.scaler
-00025950: 5f73 7464 203d 206e 702e 7374 6428 582c  _std = np.std(X,
-00025960: 2061 7869 733d 3029 0d0a 2020 2020 2020   axis=0)..      
-00025970: 2020 7265 7475 726e 2028 5820 2d20 7365    return (X - se
-00025980: 6c66 2e73 6361 6c65 725f 6d65 616e 2920  lf.scaler_mean) 
-00025990: 2f20 7365 6c66 2e73 6361 6c65 725f 7374  / self.scaler_st
-000259a0: 640d 0a0d 0a20 2020 2064 6566 205f 7363  d....    def _sc
-000259b0: 616c 6528 7365 6c66 2c20 5829 3a0d 0a20  ale(self, X):.. 
-000259c0: 2020 2020 2020 2072 6574 7572 6e20 2858         return (X
-000259d0: 202d 2073 656c 662e 7363 616c 6572 5f6d   - self.scaler_m
-000259e0: 6561 6e29 202f 2073 656c 662e 7363 616c  ean) / self.scal
-000259f0: 6572 5f73 7464 0d0a 0d0a 2020 2020 6465  er_std....    de
-00025a00: 6620 6669 745f 6461 7461 2873 656c 662c  f fit_data(self,
-00025a10: 2064 662c 2066 7574 7572 655f 7265 6772   df, future_regr
-00025a20: 6573 736f 723d 4e6f 6e65 293a 0d0a 2020  essor=None):..  
-00025a30: 2020 2020 2020 6466 203d 2073 656c 662e        df = self.
-00025a40: 6261 7369 635f 7072 6f66 696c 6528 6466  basic_profile(df
-00025a50: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00025a60: 6c61 7374 5f77 696e 646f 7720 3d20 6466  last_window = df
-00025a70: 2e74 6169 6c28 7365 6c66 2e77 696e 646f  .tail(self.windo
-00025a80: 775f 7369 7a65 290d 0a20 2020 2020 2020  w_size)..       
-00025a90: 2072 6574 7572 6e20 7365 6c66 0d0a 0d0a   return self....
-00025aa0: 2020 2020 6465 6620 7072 6564 6963 7428      def predict(
-00025ab0: 0d0a 2020 2020 2020 2020 7365 6c66 2c0d  ..        self,.
-00025ac0: 0a20 2020 2020 2020 2066 6f72 6563 6173  .        forecas
-00025ad0: 745f 6c65 6e67 7468 3a20 696e 7420 3d20  t_length: int = 
-00025ae0: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2066  None,..        f
-00025af0: 7574 7572 655f 7265 6772 6573 736f 723d  uture_regressor=
-00025b00: 4e6f 6e65 2c0d 0a20 2020 2020 2020 206a  None,..        j
-00025b10: 7573 745f 706f 696e 745f 666f 7265 6361  ust_point_foreca
-00025b20: 7374 3a20 626f 6f6c 203d 2046 616c 7365  st: bool = False
-00025b30: 2c0d 0a20 2020 2020 2020 2064 663d 4e6f  ,..        df=No
-00025b40: 6e65 2c0d 0a20 2020 2029 3a0d 0a20 2020  ne,..    ):..   
-00025b50: 2020 2020 2022 2222 4765 6e65 7261 7465       """Generate
-00025b60: 2066 6f72 6563 6173 7420 6461 7461 2069   forecast data i
-00025b70: 6d6d 6564 6961 7465 6c79 2066 6f6c 6c6f  mmediately follo
-00025b80: 7769 6e67 2064 6174 6573 206f 6620 2e66  wing dates of .f
-00025b90: 6974 2829 2e0d 0a0d 0a20 2020 2020 2020  it().....       
-00025ba0: 2041 7267 733a 0d0a 2020 2020 2020 2020   Args:..        
-00025bb0: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
-00025bc0: 6774 6820 2869 6e74 293a 204e 756d 6265  gth (int): Numbe
-00025bd0: 7220 6f66 2070 6572 696f 6473 206f 6620  r of periods of 
-00025be0: 6461 7461 2074 6f20 666f 7265 6361 7374  data to forecast
-00025bf0: 2061 6865 6164 0d0a 2020 2020 2020 2020   ahead..        
-00025c00: 2020 2020 7265 6772 6573 736f 7220 286e      regressor (n
-00025c10: 756d 7079 2e41 7272 6179 293a 2061 6464  umpy.Array): add
-00025c20: 6974 696f 6e61 6c20 7265 6772 6573 736f  itional regresso
-00025c30: 722c 206e 6f74 2075 7365 640d 0a20 2020  r, not used..   
-00025c40: 2020 2020 2020 2020 206a 7573 745f 706f           just_po
-00025c50: 696e 745f 666f 7265 6361 7374 2028 626f  int_forecast (bo
-00025c60: 6f6c 293a 2049 6620 5472 7565 2c20 7265  ol): If True, re
-00025c70: 7475 726e 2061 2070 616e 6461 732e 4461  turn a pandas.Da
-00025c80: 7461 4672 616d 6520 6f66 206a 7573 7420  taFrame of just 
-00025c90: 706f 696e 7420 666f 7265 6361 7374 730d  point forecasts.
-00025ca0: 0a0d 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00025cb0: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
-00025cc0: 2045 6974 6865 7220 6120 5072 6564 6963   Either a Predic
-00025cd0: 7469 6f6e 4f62 6a65 6374 206f 6620 666f  tionObject of fo
-00025ce0: 7265 6361 7374 7320 616e 6420 6d65 7461  recasts and meta
-00025cf0: 6461 7461 2c20 6f72 0d0a 2020 2020 2020  data, or..      
-00025d00: 2020 2020 2020 6966 206a 7573 745f 706f        if just_po
-00025d10: 696e 745f 666f 7265 6361 7374 203d 3d20  int_forecast == 
-00025d20: 5472 7565 2c20 6120 6461 7461 6672 616d  True, a datafram
-00025d30: 6520 6f66 2070 6f69 6e74 2066 6f72 6563  e of point forec
-00025d40: 6173 7473 0d0a 2020 2020 2020 2020 2222  asts..        ""
-00025d50: 220d 0a20 2020 2020 2020 2070 7265 6469  "..        predi
-00025d60: 6374 5374 6172 7454 696d 6520 3d20 6461  ctStartTime = da
-00025d70: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
-00025d80: 6e6f 7728 290d 0a20 2020 2020 2020 2069  now()..        i
-00025d90: 6620 6466 2069 7320 6e6f 7420 4e6f 6e65  f df is not None
-00025da0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00025db0: 656c 662e 6669 745f 6461 7461 2864 6629  elf.fit_data(df)
-00025dc0: 0d0a 2020 2020 2020 2020 6966 2066 6f72  ..        if for
-00025dd0: 6563 6173 745f 6c65 6e67 7468 2069 7320  ecast_length is 
-00025de0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00025df0: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
-00025e00: 7468 203d 2073 656c 662e 666f 7265 6361  th = self.foreca
-00025e10: 7374 5f6c 656e 6774 680d 0a20 2020 2020  st_length..     
-00025e20: 2020 2069 6620 696e 7428 666f 7265 6361     if int(foreca
-00025e30: 7374 5f6c 656e 6774 6829 203e 2069 6e74  st_length) > int
-00025e40: 2873 656c 662e 666f 7265 6361 7374 5f6c  (self.forecast_l
-00025e50: 656e 6774 6829 2061 6e64 206e 6f74 2073  ength) and not s
-00025e60: 656c 662e 6f6e 655f 7374 6570 3a0d 0a20  elf.one_step:.. 
-00025e70: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00025e80: 2822 5265 6772 6573 7369 6f6e 206d 7573  ("Regression mus
-00025e90: 7420 6265 2072 6566 6974 2074 6f20 6368  t be refit to ch
-00025ea0: 616e 6765 2066 6f72 6563 6173 7420 6c65  ange forecast le
-00025eb0: 6e67 7468 2122 290d 0a20 2020 2020 2020  ngth!")..       
-00025ec0: 2069 6e64 6578 203d 2073 656c 662e 6372   index = self.cr
-00025ed0: 6561 7465 5f66 6f72 6563 6173 745f 696e  eate_forecast_in
-00025ee0: 6465 7828 666f 7265 6361 7374 5f6c 656e  dex(forecast_len
-00025ef0: 6774 683d 666f 7265 6361 7374 5f6c 656e  gth=forecast_len
-00025f00: 6774 6829 0d0a 0d0a 2020 2020 2020 2020  gth)....        
-00025f10: 6966 2073 656c 662e 6f6e 655f 7374 6570  if self.one_step
-00025f20: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00025f30: 2063 6f6d 6269 6e65 645f 696e 6465 7820   combined_index 
-00025f40: 3d20 2873 656c 662e 6466 5f74 7261 696e  = (self.df_train
-00025f50: 2e69 6e64 6578 2e61 7070 656e 6428 696e  .index.append(in
-00025f60: 6465 7829 290d 0a20 2020 2020 2020 2020  dex))..         
-00025f70: 2020 2066 6f72 6563 6173 7420 3d20 7064     forecast = pd
-00025f80: 2e44 6174 6146 7261 6d65 2829 0d0a 2020  .DataFrame()..  
-00025f90: 2020 2020 2020 2020 2020 2320 666f 7265            # fore
-00025fa0: 6361 7374 2c20 3120 7374 6570 2061 6865  cast, 1 step ahe
-00025fb0: 6164 2c20 7468 656e 2061 6e6f 7468 6572  ad, then another
-00025fc0: 2c20 616e 6420 736f 206f 6e0d 0a20 2020  , and so on..   
-00025fd0: 2020 2020 2020 2020 206c 7769 6e64 6f77           lwindow
-00025fe0: 203d 2073 656c 662e 6c61 7374 5f77 696e   = self.last_win
-00025ff0: 646f 770d 0a20 2020 2020 2020 2020 2020  dow..           
-00026000: 2066 6f72 2078 2069 6e20 7261 6e67 6528   for x in range(
-00026010: 666f 7265 6361 7374 5f6c 656e 6774 6829  forecast_length)
-00026020: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00026030: 2020 2063 696e 6465 7820 3d20 696e 6465     cindex = inde
-00026040: 785b 7820 3a20 7820 2b20 315d 0d0a 2020  x[x : x + 1]..  
-00026050: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-00026060: 6c6c 203d 2073 656c 662e 5f63 6f6e 7374  ll = self._const
-00026070: 7275 6374 5f66 756c 6c28 6c77 696e 646f  ruct_full(lwindo
-00026080: 7729 0d0a 2020 2020 2020 2020 2020 2020  w)..            
-00026090: 2020 2020 635f 7265 6720 3d20 280d 0a20      c_reg = (.. 
-000260a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000260b0: 2020 2066 7574 7572 655f 7265 6772 6573     future_regres
-000260c0: 736f 722e 7265 696e 6465 7828 6369 6e64  sor.reindex(cind
-000260d0: 6578 290d 0a20 2020 2020 2020 2020 2020  ex)..           
-000260e0: 2020 2020 2020 2020 2069 6620 6675 7475           if futu
-000260f0: 7265 5f72 6567 7265 7373 6f72 2069 7320  re_regressor is 
-00026100: 6e6f 7420 4e6f 6e65 0d0a 2020 2020 2020  not None..      
-00026110: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00026120: 7365 204e 6f6e 650d 0a20 2020 2020 2020  se None..       
-00026130: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
-00026140: 2020 2020 2020 2020 2020 2020 6578 7472              extr
-00026150: 6173 203d 2073 656c 662e 5f63 6f6e 7374  as = self._const
-00026160: 7275 6374 5f65 7874 7261 7328 6369 6e64  ruct_extras(cind
-00026170: 6578 2c20 635f 7265 6729 0d0a 2020 2020  ex, c_reg)..    
-00026180: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00026190: 7874 7261 7320 6973 206e 6f74 204e 6f6e  xtras is not Non
-000261a0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-000261b0: 2020 2020 2020 2020 7072 6564 203d 206e          pred = n
-000261c0: 702e 636f 6e63 6174 656e 6174 6528 0d0a  p.concatenate(..
-000261d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000261e0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
-000261f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026200: 2020 2020 2020 2066 756c 6c5b 2d31 3a5d         full[-1:]
-00026210: 2e72 6573 6861 7065 282d 312c 2066 756c  .reshape(-1, ful
-00026220: 6c2e 7368 6170 655b 2d31 5d29 2c0d 0a20  l.shape[-1]),.. 
-00026230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026240: 2020 2020 2020 2020 2020 2065 7874 7261             extra
-00026250: 732e 7265 7368 6170 6528 2d31 2c20 6578  s.reshape(-1, ex
-00026260: 7472 6173 2e73 6861 7065 5b2d 315d 292c  tras.shape[-1]),
-00026270: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026280: 2020 2020 2020 2020 2020 5d2c 0d0a 2020            ],..  
-00026290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000262a0: 2020 2020 2020 6178 6973 3d31 2c0d 0a20        axis=1,.. 
-000262b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000262c0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000262d0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000262e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000262f0: 2070 7265 6420 3d20 6675 6c6c 5b2d 313a   pred = full[-1:
-00026300: 5d2e 7265 7368 6170 6528 2d31 2c20 6675  ].reshape(-1, fu
-00026310: 6c6c 2e73 6861 7065 5b2d 315d 290d 0a20  ll.shape[-1]).. 
-00026320: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00026330: 6620 7365 6c66 2e6e 6f72 6d61 6c69 7a65  f self.normalize
-00026340: 5f77 696e 646f 773a 0d0a 2020 2020 2020  _window:..      
-00026350: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00026360: 6564 203d 2073 656c 662e 5f73 6361 6c65  ed = self._scale
-00026370: 2870 7265 6429 0d0a 2020 2020 2020 2020  (pred)..        
-00026380: 2020 2020 2020 2020 7266 5072 6564 203d          rfPred =
-00026390: 2070 642e 4461 7461 4672 616d 6528 7365   pd.DataFrame(se
-000263a0: 6c66 2e6d 6f64 656c 2e70 7265 6469 6374  lf.model.predict
-000263b0: 2870 7265 6429 292e 7472 616e 7370 6f73  (pred)).transpos
-000263c0: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
-000263d0: 2020 2020 2072 6650 7265 642e 636f 6c75       rfPred.colu
-000263e0: 6d6e 7320 3d20 7365 6c66 2e6c 6173 745f  mns = self.last_
-000263f0: 7769 6e64 6f77 2e63 6f6c 756d 6e73 0d0a  window.columns..
-00026400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026410: 7266 5072 6564 2e69 6e64 6578 203d 2063  rfPred.index = c
-00026420: 696e 6465 780d 0a20 2020 2020 2020 2020  index..         
-00026430: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
-00026440: 726f 6365 7373 6564 5f79 3a0d 0a20 2020  rocessed_y:..   
-00026450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026460: 2023 2077 6f6e 2774 2077 6f72 6b20 7769   # won't work wi
-00026470: 7468 2073 6f6d 6520 7072 6570 726f 6365  th some preproce
-00026480: 7373 696e 6720 6c69 6b65 2064 6966 660d  ssing like diff.
-00026490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000264a0: 2020 2020 2072 6650 7265 6420 3d20 7365       rfPred = se
-000264b0: 6c66 2e74 7261 6e73 666f 726d 6572 5f6f  lf.transformer_o
-000264c0: 626a 6563 742e 696e 7665 7273 655f 7472  bject.inverse_tr
-000264d0: 616e 7366 6f72 6d28 7266 5072 6564 290d  ansform(rfPred).
-000264e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000264f0: 2066 6f72 6563 6173 7420 3d20 7064 2e63   forecast = pd.c
-00026500: 6f6e 6361 7428 5b66 6f72 6563 6173 742c  oncat([forecast,
-00026510: 2072 6650 7265 645d 2c20 6178 6973 3d30   rfPred], axis=0
-00026520: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00026530: 2020 206c 7769 6e64 6f77 203d 2070 642e     lwindow = pd.
-00026540: 636f 6e63 6174 285b 6c77 696e 646f 772c  concat([lwindow,
-00026550: 2072 6650 7265 645d 2c20 6178 6973 3d30   rfPred], axis=0
-00026560: 2c20 6967 6e6f 7265 5f69 6e64 6578 3d46  , ignore_index=F
-00026570: 616c 7365 292e 7461 696c 280d 0a20 2020  alse).tail(..   
-00026580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026590: 2073 656c 662e 7769 6e64 6f77 5f73 697a   self.window_siz
-000265a0: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-000265b0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-000265c0: 2020 6466 203d 2066 6f72 6563 6173 740d    df = forecast.
-000265d0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-000265e0: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-000265f0: 203d 2073 656c 662e 5f63 6f6e 7374 7275   = self._constru
-00026600: 6374 5f66 756c 6c28 7365 6c66 2e6c 6173  ct_full(self.las
-00026610: 745f 7769 6e64 6f77 295b 2d31 3a5d 0d0a  t_window)[-1:]..
-00026620: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-00026630: 203d 2066 756c 6c2e 7265 7368 6170 6528   = full.reshape(
-00026640: 2d31 2c20 6675 6c6c 2e73 6861 7065 5b2d  -1, full.shape[-
-00026650: 315d 290d 0a20 2020 2020 2020 2020 2020  1])..           
-00026660: 204e 203d 2073 656c 662e 7472 6169 6e5f   N = self.train_
-00026670: 7368 6170 655b 315d 0d0a 2020 2020 2020  shape[1]..      
-00026680: 2020 2020 2020 666f 7265 6361 7374 5f73        forecast_s
-00026690: 7465 7073 203d 206e 702e 7265 7065 6174  teps = np.repeat
-000266a0: 286e 702e 6172 616e 6765 2831 2c20 666f  (np.arange(1, fo
-000266b0: 7265 6361 7374 5f6c 656e 6774 6820 2b20  recast_length + 
-000266c0: 3129 2c20 4e29 2e72 6573 6861 7065 280d  1), N).reshape(.
-000266d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000266e0: 202d 312c 2031 0d0a 2020 2020 2020 2020   -1, 1..        
-000266f0: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
-00026700: 2020 2063 5f72 6567 203d 2028 0d0a 2020     c_reg = (..  
-00026710: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-00026720: 7475 7265 5f72 6567 7265 7373 6f72 2e72  ture_regressor.r
-00026730: 6569 6e64 6578 2869 6e64 6578 290d 0a20  eindex(index).. 
-00026740: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00026750: 6620 6675 7475 7265 5f72 6567 7265 7373  f future_regress
-00026760: 6f72 2069 7320 6e6f 7420 4e6f 6e65 0d0a  or is not None..
-00026770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026780: 656c 7365 204e 6f6e 650d 0a20 2020 2020  else None..     
-00026790: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
-000267a0: 2020 2020 2020 6578 7472 6173 203d 2073        extras = s
-000267b0: 656c 662e 5f63 6f6e 7374 7275 6374 5f65  elf._construct_e
-000267c0: 7874 7261 7328 696e 6465 782c 2063 5f72  xtras(index, c_r
-000267d0: 6567 290d 0a20 2020 2020 2020 2020 2020  eg)..           
-000267e0: 2069 6620 6578 7472 6173 2069 7320 4e6f   if extras is No
-000267f0: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00026800: 2020 2020 2073 656c 662e 7072 6564 203d       self.pred =
-00026810: 206e 702e 636f 6e63 6174 656e 6174 6528   np.concatenate(
-00026820: 5b66 756c 6c2c 2066 6f72 6563 6173 745f  [full, forecast_
-00026830: 7374 6570 735d 2c20 6178 6973 3d31 290d  steps], axis=1).
-00026840: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00026850: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00026860: 2020 2020 7365 6c66 2e70 7265 6420 3d20      self.pred = 
-00026870: 6e70 2e63 6f6e 6361 7465 6e61 7465 280d  np.concatenate(.
-00026880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026890: 2020 2020 205b 0d0a 2020 2020 2020 2020       [..        
-000268a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000268b0: 6e70 2e74 696c 6528 6675 6c6c 2c20 2866  np.tile(full, (f
-000268c0: 6f72 6563 6173 745f 6c65 6e67 7468 2c20  orecast_length, 
-000268d0: 3129 292c 0d0a 2020 2020 2020 2020 2020  1)),..          
-000268e0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000268f0: 7472 6173 2e72 6573 6861 7065 282d 312c  tras.reshape(-1,
-00026900: 2065 7874 7261 732e 7368 6170 655b 2d31   extras.shape[-1
-00026910: 5d29 2c0d 0a20 2020 2020 2020 2020 2020  ]),..           
-00026920: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00026930: 6563 6173 745f 7374 6570 732c 0d0a 2020  ecast_steps,..  
-00026940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026950: 2020 5d2c 0d0a 2020 2020 2020 2020 2020    ],..          
-00026960: 2020 2020 2020 2020 2020 6178 6973 3d31            axis=1
-00026970: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00026980: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
-00026990: 2020 6966 2073 656c 662e 6e6f 726d 616c    if self.normal
-000269a0: 697a 655f 7769 6e64 6f77 3a0d 0a20 2020  ize_window:..   
-000269b0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-000269c0: 662e 7072 6564 203d 2073 656c 662e 5f73  f.pred = self._s
-000269d0: 6361 6c65 2873 656c 662e 7072 6564 290d  cale(self.pred).
-000269e0: 0a20 2020 2020 2020 2020 2020 2063 5920  .            cY 
-000269f0: 3d20 7365 6c66 2e6d 6f64 656c 2e70 7265  = self.model.pre
-00026a00: 6469 6374 2873 656c 662e 7072 6564 2e61  dict(self.pred.a
-00026a10: 7374 7970 6528 666c 6f61 7429 290d 0a20  stype(float)).. 
-00026a20: 2020 2020 2020 2020 2020 2063 5920 3d20             cY = 
-00026a30: 7064 2e44 6174 6146 7261 6d65 2863 592e  pd.DataFrame(cY.
-00026a40: 7265 7368 6170 6528 666f 7265 6361 7374  reshape(forecast
-00026a50: 5f6c 656e 6774 682c 2073 656c 662e 7472  _length, self.tr
-00026a60: 6169 6e5f 7368 6170 655b 315d 2929 0d0a  ain_shape[1]))..
-00026a70: 2020 2020 2020 2020 2020 2020 6359 2e63              cY.c
-00026a80: 6f6c 756d 6e73 203d 2073 656c 662e 636f  olumns = self.co
-00026a90: 6c75 6d6e 5f6e 616d 6573 0d0a 2020 2020  lumn_names..    
-00026aa0: 2020 2020 2020 2020 6359 2e69 6e64 6578          cY.index
-00026ab0: 203d 2069 6e64 6578 0d0a 2020 2020 2020   = index..      
-00026ac0: 2020 2020 2020 6966 2073 656c 662e 7072        if self.pr
-00026ad0: 6f63 6573 7365 645f 793a 0d0a 2020 2020  ocessed_y:..    
-00026ae0: 2020 2020 2020 2020 2020 2020 2320 776f              # wo
-00026af0: 6e27 7420 776f 726b 2077 6974 6820 736f  n't work with so
-00026b00: 6d65 2070 7265 7072 6f63 6573 7369 6e67  me preprocessing
-00026b10: 206c 696b 6520 6469 6666 0d0a 2020 2020   like diff..    
-00026b20: 2020 2020 2020 2020 2020 2020 6359 203d              cY =
-00026b30: 2073 656c 662e 7472 616e 7366 6f72 6d65   self.transforme
-00026b40: 725f 6f62 6a65 6374 2e69 6e76 6572 7365  r_object.inverse
-00026b50: 5f74 7261 6e73 666f 726d 2863 5929 0d0a  _transform(cY)..
-00026b60: 2020 2020 2020 2020 2020 2020 6466 203d              df =
-00026b70: 2063 590d 0a0d 0a20 2020 2020 2020 2069   cY....        i
-00026b80: 6620 6a75 7374 5f70 6f69 6e74 5f66 6f72  f just_point_for
-00026b90: 6563 6173 743a 0d0a 2020 2020 2020 2020  ecast:..        
-00026ba0: 2020 2020 7265 7475 726e 2064 660d 0a20      return df.. 
-00026bb0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00026bc0: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
-00026bd0: 666f 7265 6361 7374 2c20 6c6f 7765 725f  forecast, lower_
-00026be0: 666f 7265 6361 7374 203d 2050 6f69 6e74  forecast = Point
-00026bf0: 5f74 6f5f 5072 6f62 6162 696c 6974 7928  _to_Probability(
-00026c00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026c10: 2020 7365 6c66 2e6c 6173 745f 7769 6e64    self.last_wind
-00026c20: 6f77 2c0d 0a20 2020 2020 2020 2020 2020  ow,..           
-00026c30: 2020 2020 2064 662c 0d0a 2020 2020 2020       df,..      
-00026c40: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00026c50: 7469 6f6e 5f69 6e74 6572 7661 6c3d 7365  tion_interval=se
-00026c60: 6c66 2e70 7265 6469 6374 696f 6e5f 696e  lf.prediction_in
-00026c70: 7465 7276 616c 2c0d 0a20 2020 2020 2020  terval,..       
-00026c80: 2020 2020 2020 2020 206d 6574 686f 643d           method=
-00026c90: 2769 6e66 6572 7265 645f 6e6f 726d 616c  'inferred_normal
-00026ca0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00026cb0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00026cc0: 2070 7265 6469 6374 5f72 756e 7469 6d65   predict_runtime
-00026cd0: 203d 2064 6174 6574 696d 652e 6461 7465   = datetime.date
-00026ce0: 7469 6d65 2e6e 6f77 2829 202d 2070 7265  time.now() - pre
-00026cf0: 6469 6374 5374 6172 7454 696d 650d 0a20  dictStartTime.. 
-00026d00: 2020 2020 2020 2020 2020 2070 7265 6469             predi
-00026d10: 6374 696f 6e20 3d20 5072 6564 6963 7469  ction = Predicti
-00026d20: 6f6e 4f62 6a65 6374 280d 0a20 2020 2020  onObject(..     
-00026d30: 2020 2020 2020 2020 2020 206d 6f64 656c             model
-00026d40: 5f6e 616d 653d 7365 6c66 2e6e 616d 652c  _name=self.name,
-00026d50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00026d60: 2020 666f 7265 6361 7374 5f6c 656e 6774    forecast_lengt
-00026d70: 683d 666f 7265 6361 7374 5f6c 656e 6774  h=forecast_lengt
-00026d80: 682c 0d0a 2020 2020 2020 2020 2020 2020  h,..            
-00026d90: 2020 2020 666f 7265 6361 7374 5f69 6e64      forecast_ind
-00026da0: 6578 3d64 662e 696e 6465 782c 0d0a 2020  ex=df.index,..  
-00026db0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00026dc0: 7265 6361 7374 5f63 6f6c 756d 6e73 3d64  recast_columns=d
-00026dd0: 662e 636f 6c75 6d6e 732c 0d0a 2020 2020  f.columns,..    
-00026de0: 2020 2020 2020 2020 2020 2020 6c6f 7765              lowe
-00026df0: 725f 666f 7265 6361 7374 3d6c 6f77 6572  r_forecast=lower
-00026e00: 5f66 6f72 6563 6173 742c 0d0a 2020 2020  _forecast,..    
-00026e10: 2020 2020 2020 2020 2020 2020 666f 7265              fore
-00026e20: 6361 7374 3d64 662c 0d0a 2020 2020 2020  cast=df,..      
-00026e30: 2020 2020 2020 2020 2020 7570 7065 725f            upper_
-00026e40: 666f 7265 6361 7374 3d75 7070 6572 5f66  forecast=upper_f
-00026e50: 6f72 6563 6173 742c 0d0a 2020 2020 2020  orecast,..      
-00026e60: 2020 2020 2020 2020 2020 7072 6564 6963            predic
-00026e70: 7469 6f6e 5f69 6e74 6572 7661 6c3d 7365  tion_interval=se
-00026e80: 6c66 2e70 7265 6469 6374 696f 6e5f 696e  lf.prediction_in
-00026e90: 7465 7276 616c 2c0d 0a20 2020 2020 2020  terval,..       
-00026ea0: 2020 2020 2020 2020 2070 7265 6469 6374           predict
-00026eb0: 5f72 756e 7469 6d65 3d70 7265 6469 6374  _runtime=predict
-00026ec0: 5f72 756e 7469 6d65 2c0d 0a20 2020 2020  _runtime,..     
-00026ed0: 2020 2020 2020 2020 2020 2066 6974 5f72             fit_r
-00026ee0: 756e 7469 6d65 3d73 656c 662e 6669 745f  untime=self.fit_
-00026ef0: 7275 6e74 696d 652c 0d0a 2020 2020 2020  runtime,..      
-00026f00: 2020 2020 2020 2020 2020 6d6f 6465 6c5f            model_
-00026f10: 7061 7261 6d65 7465 7273 3d73 656c 662e  parameters=self.
-00026f20: 6765 745f 7061 7261 6d73 2829 2c0d 0a20  get_params(),.. 
-00026f30: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-00026f40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00026f50: 2070 7265 6469 6374 696f 6e0d 0a0d 0a20   prediction.... 
-00026f60: 2020 2064 6566 2067 6574 5f6e 6577 5f70     def get_new_p
-00026f70: 6172 616d 7328 7365 6c66 2c20 6d65 7468  arams(self, meth
-00026f80: 6f64 3a20 7374 7220 3d20 2772 616e 646f  od: str = 'rando
-00026f90: 6d27 293a 0d0a 2020 2020 2020 2020 2222  m'):..        ""
-00026fa0: 2252 6574 7572 6e20 6469 6374 206f 6620  "Return dict of 
-00026fb0: 6e65 7720 7061 7261 6d65 7465 7273 2066  new parameters f
-00026fc0: 6f72 2070 6172 616d 6574 6572 2074 756e  or parameter tun
-00026fd0: 696e 672e 2222 220d 0a20 2020 2020 2020  ing."""..       
-00026fe0: 2077 6e64 5f73 7a5f 6368 6f69 6365 203d   wnd_sz_choice =
-00026ff0: 2072 616e 646f 6d2e 6368 6f69 6365 285b   random.choice([
-00027000: 352c 2031 302c 2032 302c 2073 6561 736f  5, 10, 20, seaso
-00027010: 6e61 6c5f 696e 7428 295d 290d 0a20 2020  nal_int()])..   
-00027020: 2020 2020 2069 6620 6d65 7468 6f64 2021       if method !
-00027030: 3d20 2264 6565 7022 3a0d 0a20 2020 2020  = "deep":..     
-00027040: 2020 2020 2020 2077 6e64 5f73 7a5f 6368         wnd_sz_ch
-00027050: 6f69 6365 203d 2077 6e64 5f73 7a5f 6368  oice = wnd_sz_ch
-00027060: 6f69 6365 2069 6620 776e 645f 737a 5f63  oice if wnd_sz_c
-00027070: 686f 6963 6520 3c20 3931 2065 6c73 6520  hoice < 91 else 
-00027080: 3930 0d0a 2020 2020 2020 2020 6d6f 6465  90..        mode
-00027090: 6c5f 6368 6f69 6365 203d 2067 656e 6572  l_choice = gener
-000270a0: 6174 655f 7265 6772 6573 736f 725f 7061  ate_regressor_pa
-000270b0: 7261 6d73 280d 0a20 2020 2020 2020 2020  rams(..         
-000270c0: 2020 206d 6f64 656c 5f64 6963 743d 736b     model_dict=sk
-000270d0: 6c65 6172 6e5f 6d6f 6465 6c5f 6469 6374  learn_model_dict
-000270e0: 2c20 6d65 7468 6f64 3d6d 6574 686f 640d  , method=method.
-000270f0: 0a20 2020 2020 2020 2029 0d0a 2020 2020  .        )..    
-00027100: 2020 2020 6966 2022 7265 6772 6573 736f      if "regresso
-00027110: 7222 2069 6e20 6d65 7468 6f64 3a0d 0a20  r" in method:.. 
-00027120: 2020 2020 2020 2020 2020 2072 6567 7265             regre
-00027130: 7373 696f 6e5f 7479 7065 5f63 686f 6963  ssion_type_choic
-00027140: 6520 3d20 2255 7365 7222 0d0a 2020 2020  e = "User"..    
-00027150: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00027160: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
-00027170: 6e5f 7479 7065 5f63 686f 6963 6520 3d20  n_type_choice = 
-00027180: 7261 6e64 6f6d 2e63 686f 6963 6573 285b  random.choices([
-00027190: 4e6f 6e65 2c20 2255 7365 7222 5d2c 2077  None, "User"], w
-000271a0: 6569 6768 7473 3d5b 302e 382c 2030 2e32  eights=[0.8, 0.2
-000271b0: 5d29 5b0d 0a20 2020 2020 2020 2020 2020  ])[..           
-000271c0: 2020 2020 2030 0d0a 2020 2020 2020 2020       0..        
-000271d0: 2020 2020 5d0d 0a20 2020 2020 2020 206e      ]..        n
-000271e0: 6f72 6d61 6c69 7a65 5f77 696e 646f 775f  ormalize_window_
-000271f0: 6368 6f69 6365 203d 2072 616e 646f 6d2e  choice = random.
-00027200: 6368 6f69 6365 7328 5b54 7275 652c 2046  choices([True, F
-00027210: 616c 7365 5d2c 205b 302e 312c 2030 2e39  alse], [0.1, 0.9
-00027220: 5d29 5b30 5d0d 0a20 2020 2020 2020 2064  ])[0]..        d
-00027230: 6174 6570 6172 745f 6368 6f69 6365 203d  atepart_choice =
-00027240: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
-00027250: 0d0a 2020 2020 2020 2020 2020 2020 5b0d  ..            [.
-00027260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027270: 2022 7265 6375 7272 696e 6722 2c0d 0a20   "recurring",.. 
-00027280: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00027290: 7369 6d70 6c65 222c 0d0a 2020 2020 2020  simple",..      
-000272a0: 2020 2020 2020 2020 2020 2265 7870 616e            "expan
-000272b0: 6465 6422 2c0d 0a20 2020 2020 2020 2020  ded",..         
-000272c0: 2020 2020 2020 2022 7369 6d70 6c65 5f32         "simple_2
-000272d0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-000272e0: 2020 2020 2273 696d 706c 655f 6269 6e61      "simple_bina
-000272f0: 7269 7a65 6422 2c0d 0a20 2020 2020 2020  rized",..       
-00027300: 2020 2020 2020 2020 2022 6578 7061 6e64           "expand
-00027310: 6564 5f62 696e 6172 697a 6564 222c 0d0a  ed_binarized",..
-00027320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027330: 2763 6f6d 6d6f 6e5f 666f 7572 6965 7227  'common_fourier'
-00027340: 2c0d 0a20 2020 2020 2020 2020 2020 205d  ,..            ]
-00027350: 2c0d 0a20 2020 2020 2020 2020 2020 205b  ,..            [
-00027360: 302e 342c 2030 2e33 2c20 302e 332c 2030  0.4, 0.3, 0.3, 0
-00027370: 2e33 2c20 302e 342c 2030 2e30 352c 2030  .3, 0.4, 0.05, 0
-00027380: 2e30 355d 2c0d 0a20 2020 2020 2020 2029  .05],..        )
-00027390: 5b30 5d0d 0a20 2020 2020 2020 2072 6574  [0]..        ret
-000273a0: 7572 6e20 7b0d 0a20 2020 2020 2020 2020  urn {..         
-000273b0: 2020 2027 7769 6e64 6f77 5f73 697a 6527     'window_size'
-000273c0: 3a20 776e 645f 737a 5f63 686f 6963 652c  : wnd_sz_choice,
-000273d0: 0d0a 2020 2020 2020 2020 2020 2020 276d  ..            'm
-000273e0: 6178 5f68 6973 746f 7279 273a 2072 616e  ax_history': ran
-000273f0: 646f 6d2e 6368 6f69 6365 7328 5b4e 6f6e  dom.choices([Non
-00027400: 652c 2031 3030 305d 2c20 5b30 2e35 2c20  e, 1000], [0.5, 
-00027410: 302e 355d 295b 305d 2c0d 0a20 2020 2020  0.5])[0],..     
-00027420: 2020 2020 2020 2027 6f6e 655f 7374 6570         'one_step
-00027430: 273a 2072 616e 646f 6d2e 6368 6f69 6365  ': random.choice
-00027440: 285b 5472 7565 2c20 4661 6c73 655d 292c  ([True, False]),
-00027450: 0d0a 2020 2020 2020 2020 2020 2020 276e  ..            'n
-00027460: 6f72 6d61 6c69 7a65 5f77 696e 646f 7727  ormalize_window'
-00027470: 3a20 6e6f 726d 616c 697a 655f 7769 6e64  : normalize_wind
-00027480: 6f77 5f63 686f 6963 652c 0d0a 2020 2020  ow_choice,..    
-00027490: 2020 2020 2020 2020 2770 726f 6365 7373          'process
-000274a0: 6564 5f79 273a 2072 616e 646f 6d2e 6368  ed_y': random.ch
-000274b0: 6f69 6365 285b 5472 7565 2c20 4661 6c73  oice([True, Fals
-000274c0: 655d 292c 0d0a 2020 2020 2020 2020 2020  e]),..          
-000274d0: 2020 2774 7261 6e73 666f 726d 6174 696f    'transformatio
-000274e0: 6e5f 6469 6374 273a 204e 6f6e 652c 2020  n_dict': None,  
-000274f0: 2320 6173 7375 6d65 2074 6869 7320 7061  # assume this pa
-00027500: 7373 6564 2076 6961 2041 7574 6f54 5320  ssed via AutoTS 
-00027510: 7472 616e 7366 6f72 6d65 7220 6469 6374  transformer dict
-00027520: 0d0a 2020 2020 2020 2020 2020 2020 2764  ..            'd
-00027530: 6174 6570 6172 745f 6d65 7468 6f64 273a  atepart_method':
-00027540: 2064 6174 6570 6172 745f 6368 6f69 6365   datepart_choice
-00027550: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
-00027560: 7265 6772 6573 7369 6f6e 5f74 7970 6527  regression_type'
-00027570: 3a20 7265 6772 6573 7369 6f6e 5f74 7970  : regression_typ
-00027580: 655f 6368 6f69 6365 2c0d 0a20 2020 2020  e_choice,..     
-00027590: 2020 2020 2020 2027 7265 6772 6573 7369         'regressi
-000275a0: 6f6e 5f6d 6f64 656c 273a 206d 6f64 656c  on_model': model
-000275b0: 5f63 686f 6963 652c 0d0a 2020 2020 2020  _choice,..      
-000275c0: 2020 7d0d 0a0d 0a20 2020 2064 6566 2067    }....    def g
-000275d0: 6574 5f70 6172 616d 7328 7365 6c66 293a  et_params(self):
-000275e0: 0d0a 2020 2020 2020 2020 2222 2252 6574  ..        """Ret
-000275f0: 7572 6e20 6469 6374 206f 6620 6375 7272  urn dict of curr
-00027600: 656e 7420 7061 7261 6d65 7465 7273 2e22  ent parameters."
-00027610: 2222 0d0a 2020 2020 2020 2020 7265 7475  ""..        retu
-00027620: 726e 207b 0d0a 2020 2020 2020 2020 2020  rn {..          
-00027630: 2020 2777 696e 646f 775f 7369 7a65 273a    'window_size':
-00027640: 2073 656c 662e 7769 6e64 6f77 5f73 697a   self.window_siz
-00027650: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
-00027660: 276d 6178 5f68 6973 746f 7279 273a 2073  'max_history': s
-00027670: 656c 662e 6d61 785f 6869 7374 6f72 792c  elf.max_history,
-00027680: 0d0a 2020 2020 2020 2020 2020 2020 276f  ..            'o
-00027690: 6e65 5f73 7465 7027 3a20 7365 6c66 2e6f  ne_step': self.o
-000276a0: 6e65 5f73 7465 702c 0d0a 2020 2020 2020  ne_step,..      
-000276b0: 2020 2020 2020 276e 6f72 6d61 6c69 7a65        'normalize
-000276c0: 5f77 696e 646f 7727 3a20 7365 6c66 2e6e  _window': self.n
-000276d0: 6f72 6d61 6c69 7a65 5f77 696e 646f 772c  ormalize_window,
-000276e0: 0d0a 2020 2020 2020 2020 2020 2020 2770  ..            'p
-000276f0: 726f 6365 7373 6564 5f79 273a 2073 656c  rocessed_y': sel
-00027700: 662e 7072 6f63 6573 7365 645f 792c 0d0a  f.processed_y,..
-00027710: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
-00027720: 6e73 666f 726d 6174 696f 6e5f 6469 6374  nsformation_dict
-00027730: 273a 2073 656c 662e 7472 616e 7366 6f72  ': self.transfor
-00027740: 6d61 7469 6f6e 5f64 6963 742c 0d0a 2020  mation_dict,..  
-00027750: 2020 2020 2020 2020 2020 2764 6174 6570            'datep
-00027760: 6172 745f 6d65 7468 6f64 273a 2073 656c  art_method': sel
-00027770: 662e 6461 7465 7061 7274 5f6d 6574 686f  f.datepart_metho
-00027780: 642c 0d0a 2020 2020 2020 2020 2020 2020  d,..            
-00027790: 2772 6567 7265 7373 696f 6e5f 7479 7065  'regression_type
-000277a0: 273a 2073 656c 662e 7265 6772 6573 7369  ': self.regressi
-000277b0: 6f6e 5f74 7970 652c 0d0a 2020 2020 2020  on_type,..      
-000277c0: 2020 2020 2020 2772 6567 7265 7373 696f        'regressio
-000277d0: 6e5f 6d6f 6465 6c27 3a20 7365 6c66 2e72  n_model': self.r
-000277e0: 6567 7265 7373 696f 6e5f 6d6f 6465 6c2c  egression_model,
-000277f0: 0d0a 2020 2020 2020 2020 7d0d 0a         ..        }..
+0001f980: 2020 2020 2020 2020 2073 7461 7469 635f           static_
+0001f990: 7265 6772 6573 736f 723d 7365 6c66 2e73  regressor=self.s
+0001f9a0: 7461 7469 635f 7265 6772 6573 736f 722e  tatic_regressor.
+0001f9b0: 6c6f 635b 785f 636f 6c5d 2e74 6f5f 6672  loc[x_col].to_fr
+0001f9c0: 616d 6528 292e 540d 0a20 2020 2020 2020  ame().T..       
+0001f9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f9e0: 2069 6620 7365 6c66 2e73 7461 7469 635f   if self.static_
+0001f9f0: 7265 6772 6573 736f 7220 6973 206e 6f74  regressor is not
+0001fa00: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
+0001fa10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001fa20: 6c73 6520 4e6f 6e65 2c0d 0a20 2020 2020  lse None,..     
+0001fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fa40: 2020 2063 6f69 6e74 6567 7261 7469 6f6e     cointegration
+0001fa50: 3d73 656c 662e 636f 696e 7465 6772 6174  =self.cointegrat
+0001fa60: 696f 6e2c 0d0a 2020 2020 2020 2020 2020  ion,..          
+0001fa70: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001fa80: 696e 7465 6772 6174 696f 6e5f 6c61 673d  integration_lag=
+0001fa90: 7365 6c66 2e63 6f69 6e74 6567 7261 7469  self.cointegrati
+0001faa0: 6f6e 5f6c 6167 2c0d 0a20 2020 2020 2020  on_lag,..       
+0001fab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fac0: 2073 6572 6965 735f 6964 3d78 5f63 6f6c   series_id=x_col
+0001fad0: 2069 6620 7365 6c66 2e73 6572 6965 735f   if self.series_
+0001fae0: 6861 7368 2065 6c73 6520 4e6f 6e65 2c0d  hash else None,.
+0001faf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fb00: 2020 2020 2029 2e74 6169 6c28 3129 0d0a       ).tail(1)..
+0001fb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fb20: 2020 2020 666f 7220 785f 636f 6c20 696e      for x_col in
+0001fb30: 2063 7572 7265 6e74 5f78 2e63 6f6c 756d   current_x.colum
+0001fb40: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
+0001fb50: 2020 2020 5d0d 0a20 2020 2020 2020 2020      ]..         
+0001fb60: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+0001fb70: 2020 6966 2073 656c 662e 7363 616c 655f    if self.scale_
+0001fb80: 6675 6c6c 5f58 3a0d 0a20 2020 2020 2020  full_X:..       
+0001fb90: 2020 2020 2020 2020 2063 5f78 5f70 7265           c_x_pre
+0001fba0: 6420 3d20 7365 6c66 2e73 6361 6c65 5f64  d = self.scale_d
+0001fbb0: 6174 6128 7365 6c66 2e58 5f70 7265 6429  ata(self.X_pred)
+0001fbc0: 2e74 6f5f 6e75 6d70 7928 290d 0a20 2020  .to_numpy()..   
+0001fbd0: 2020 2020 2020 2020 2020 2020 2072 6650               rfP
+0001fbe0: 7265 6420 3d20 7365 6c66 2e6d 6f64 656c  red = self.model
+0001fbf0: 2e70 7265 6469 6374 2863 5f78 5f70 7265  .predict(c_x_pre
+0001fc00: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
+0001fc10: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+0001fc20: 2020 2020 2020 2063 5f78 5f70 7265 6420         c_x_pred 
+0001fc30: 3d20 7365 6c66 2e58 5f70 7265 642e 746f  = self.X_pred.to
+0001fc40: 5f6e 756d 7079 2829 0d0a 2020 2020 2020  _numpy()..      
+0001fc50: 2020 2020 2020 2020 2020 7266 5072 6564            rfPred
+0001fc60: 203d 2073 656c 662e 6d6f 6465 6c2e 7072   = self.model.pr
+0001fc70: 6564 6963 7428 635f 785f 7072 6564 290d  edict(c_x_pred).
+0001fc80: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
+0001fc90: 645f 636c 6561 6e20 3d20 7064 2e44 6174  d_clean = pd.Dat
+0001fca0: 6146 7261 6d65 280d 0a20 2020 2020 2020  aFrame(..       
+0001fcb0: 2020 2020 2020 2020 2072 6650 7265 642c           rfPred,
+0001fcc0: 2069 6e64 6578 3d63 7572 7265 6e74 5f78   index=current_x
+0001fcd0: 2e63 6f6c 756d 6e73 2c20 636f 6c75 6d6e  .columns, column
+0001fce0: 733d 5b69 6e64 6578 5b66 6373 745f 7374  s=[index[fcst_st
+0001fcf0: 6570 5d5d 0d0a 2020 2020 2020 2020 2020  ep]]..          
+0001fd00: 2020 292e 7472 616e 7370 6f73 6528 290d    ).transpose().
+0001fd10: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0001fd20: 6563 6173 7420 3d20 7064 2e63 6f6e 6361  ecast = pd.conca
+0001fd30: 7428 5b66 6f72 6563 6173 742c 2070 7265  t([forecast, pre
+0001fd40: 645f 636c 6561 6e5d 290d 0a20 2020 2020  d_clean])..     
+0001fd50: 2020 2020 2020 2023 2061 206c 6f74 2073         # a lot s
+0001fd60: 6c6f 7765 720d 0a20 2020 2020 2020 2020  lower..         
+0001fd70: 2020 2069 6620 7365 6c66 2e70 726f 6261     if self.proba
+0001fd80: 6269 6c69 7374 6963 3a0d 0a20 2020 2020  bilistic:..     
+0001fd90: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0001fda0: 6c66 2e6d 756c 7469 6f75 7470 7574 6770  lf.multioutputgp
+0001fdb0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+0001fdc0: 2020 2020 2020 2020 6d65 642c 2076 6172          med, var
+0001fdd0: 203d 2073 656c 662e 6d6f 6465 6c2e 7072   = self.model.pr
+0001fde0: 6564 6963 745f 7072 6f62 6128 635f 785f  edict_proba(c_x_
+0001fdf0: 7072 6564 290d 0a20 2020 2020 2020 2020  pred)..         
+0001fe00: 2020 2020 2020 2020 2020 2073 7464 6576             stdev
+0001fe10: 203d 206e 702e 7371 7274 2876 6172 295b   = np.sqrt(var)[
+0001fe20: 2e2e 2e2c 206e 702e 6e65 7761 7869 735d  ..., np.newaxis]
+0001fe30: 2e54 202a 206e 6f72 6d2e 7070 6628 0d0a  .T * norm.ppf(..
+0001fe40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe50: 2020 2020 2020 2020 2831 202b 2073 656c          (1 + sel
+0001fe60: 662e 7072 6564 6963 7469 6f6e 5f69 6e74  f.prediction_int
+0001fe70: 6572 7661 6c29 202f 2032 0d0a 2020 2020  erval) / 2..    
+0001fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe90: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001fea0: 2020 2020 2020 2070 7265 645f 7570 7065         pred_uppe
+0001feb0: 7220 3d20 7064 2e44 6174 6146 7261 6d65  r = pd.DataFrame
+0001fec0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+0001fed0: 2020 2020 2020 2020 2020 206d 6564 202b             med +
+0001fee0: 2073 7464 6576 2c20 696e 6465 783d 5b69   stdev, index=[i
+0001fef0: 6e64 6578 5b66 6373 745f 7374 6570 5d5d  ndex[fcst_step]]
+0001ff00: 2c20 636f 6c75 6d6e 733d 6375 7272 656e  , columns=curren
+0001ff10: 745f 782e 636f 6c75 6d6e 730d 0a20 2020  t_x.columns..   
+0001ff20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff30: 2029 0d0a 2020 2020 2020 2020 2020 2020   )..            
+0001ff40: 2020 2020 2020 2020 7072 6564 5f6c 6f77          pred_low
+0001ff50: 6572 203d 2070 642e 4461 7461 4672 616d  er = pd.DataFram
+0001ff60: 6528 0d0a 2020 2020 2020 2020 2020 2020  e(..            
+0001ff70: 2020 2020 2020 2020 2020 2020 6d65 6420              med 
+0001ff80: 2d20 7374 6465 762c 2069 6e64 6578 3d5b  - stdev, index=[
+0001ff90: 696e 6465 785b 6663 7374 5f73 7465 705d  index[fcst_step]
+0001ffa0: 5d2c 2063 6f6c 756d 6e73 3d63 7572 7265  ], columns=curre
+0001ffb0: 6e74 5f78 2e63 6f6c 756d 6e73 0d0a 2020  nt_x.columns..  
+0001ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ffd0: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+0001ffe0: 2020 2020 2020 2020 2075 7070 6572 5f66           upper_f
+0001fff0: 6f72 6563 6173 7420 3d20 7064 2e63 6f6e  orecast = pd.con
+00020000: 6361 7428 5b75 7070 6572 5f66 6f72 6563  cat([upper_forec
+00020010: 6173 742c 2070 7265 645f 7570 7065 725d  ast, pred_upper]
+00020020: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00020030: 2020 2020 2020 206c 6f77 6572 5f66 6f72         lower_for
+00020040: 6563 6173 7420 3d20 7064 2e63 6f6e 6361  ecast = pd.conca
+00020050: 7428 5b6c 6f77 6572 5f66 6f72 6563 6173  t([lower_forecas
+00020060: 742c 2070 7265 645f 6c6f 7765 725d 290d  t, pred_lower]).
+00020070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020080: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00020090: 2020 2020 2020 2020 2020 2020 7266 5072              rfPr
+000200a0: 6564 5f75 7070 6572 203d 2073 656c 662e  ed_upper = self.
+000200b0: 6d6f 6465 6c5f 7570 7065 722e 7072 6564  model_upper.pred
+000200c0: 6963 7428 635f 785f 7072 6564 290d 0a20  ict(c_x_pred).. 
+000200d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000200e0: 2020 2070 7265 645f 7570 7065 7220 3d20     pred_upper = 
+000200f0: 7064 2e44 6174 6146 7261 6d65 280d 0a20  pd.DataFrame(.. 
+00020100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020110: 2020 2020 2020 2072 6650 7265 645f 7570         rfPred_up
+00020120: 7065 722c 0d0a 2020 2020 2020 2020 2020  per,..          
+00020130: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00020140: 6465 783d 6375 7272 656e 745f 782e 636f  dex=current_x.co
+00020150: 6c75 6d6e 732c 0d0a 2020 2020 2020 2020  lumns,..        
+00020160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020170: 636f 6c75 6d6e 733d 5b69 6e64 6578 5b66  columns=[index[f
+00020180: 6373 745f 7374 6570 5d5d 2c0d 0a20 2020  cst_step]],..   
+00020190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201a0: 2029 2e74 7261 6e73 706f 7365 2829 0d0a   ).transpose()..
+000201b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201c0: 2020 2020 7266 5072 6564 5f6c 6f77 6572      rfPred_lower
+000201d0: 203d 2073 656c 662e 6d6f 6465 6c5f 6c6f   = self.model_lo
+000201e0: 7765 722e 7072 6564 6963 7428 635f 785f  wer.predict(c_x_
+000201f0: 7072 6564 290d 0a20 2020 2020 2020 2020  pred)..         
+00020200: 2020 2020 2020 2020 2020 2070 7265 645f             pred_
+00020210: 6c6f 7765 7220 3d20 7064 2e44 6174 6146  lower = pd.DataF
+00020220: 7261 6d65 280d 0a20 2020 2020 2020 2020  rame(..         
+00020230: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00020240: 6650 7265 645f 6c6f 7765 722c 0d0a 2020  fPred_lower,..  
+00020250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020260: 2020 2020 2020 696e 6465 783d 6375 7272        index=curr
+00020270: 656e 745f 782e 636f 6c75 6d6e 732c 0d0a  ent_x.columns,..
+00020280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020290: 2020 2020 2020 2020 636f 6c75 6d6e 733d          columns=
+000202a0: 5b69 6e64 6578 5b66 6373 745f 7374 6570  [index[fcst_step
+000202b0: 5d5d 2c0d 0a20 2020 2020 2020 2020 2020  ]],..           
+000202c0: 2020 2020 2020 2020 2029 2e74 7261 6e73           ).trans
+000202d0: 706f 7365 2829 0d0a 2020 2020 2020 2020  pose()..        
+000202e0: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
+000202f0: 725f 666f 7265 6361 7374 203d 2070 642e  r_forecast = pd.
+00020300: 636f 6e63 6174 285b 7570 7065 725f 666f  concat([upper_fo
+00020310: 7265 6361 7374 2c20 7072 6564 5f75 7070  recast, pred_upp
+00020320: 6572 5d29 0d0a 2020 2020 2020 2020 2020  er])..          
+00020330: 2020 2020 2020 2020 2020 6c6f 7765 725f            lower_
+00020340: 666f 7265 6361 7374 203d 2070 642e 636f  forecast = pd.co
+00020350: 6e63 6174 285b 6c6f 7765 725f 666f 7265  ncat([lower_fore
+00020360: 6361 7374 2c20 7072 6564 5f6c 6f77 6572  cast, pred_lower
+00020370: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
+00020380: 6375 7272 656e 745f 7820 3d20 7064 2e63  current_x = pd.c
+00020390: 6f6e 6361 7428 0d0a 2020 2020 2020 2020  oncat(..        
+000203a0: 2020 2020 2020 2020 5b0d 0a20 2020 2020          [..     
+000203b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000203c0: 7572 7265 6e74 5f78 2c0d 0a20 2020 2020  urrent_x,..     
+000203d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000203e0: 7265 645f 636c 6561 6e2c 0d0a 2020 2020  red_clean,..    
+000203f0: 2020 2020 2020 2020 2020 2020 5d0d 0a20              ].. 
+00020400: 2020 2020 2020 2020 2020 2029 0d0a 0d0a             )....
+00020410: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
+00020420: 203d 2066 6f72 6563 6173 745b 7365 6c66   = forecast[self
+00020430: 2e63 6f6c 756d 6e5f 6e61 6d65 735d 0d0a  .column_names]..
+00020440: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+00020450: 656c 662e 7072 6f62 6162 696c 6973 7469  elf.probabilisti
+00020460: 633a 0d0a 2020 2020 2020 2020 2020 2020  c:..            
+00020470: 7570 7065 725f 666f 7265 6361 7374 2c20  upper_forecast, 
+00020480: 6c6f 7765 725f 666f 7265 6361 7374 203d  lower_forecast =
+00020490: 2050 6f69 6e74 5f74 6f5f 5072 6f62 6162   Point_to_Probab
+000204a0: 696c 6974 7928 0d0a 2020 2020 2020 2020  ility(..        
+000204b0: 2020 2020 2020 2020 7365 6c66 2e73 6b74          self.skt
+000204c0: 7261 696e 6461 7461 2c0d 0a20 2020 2020  raindata,..     
+000204d0: 2020 2020 2020 2020 2020 2066 6f72 6563             forec
+000204e0: 6173 742c 0d0a 2020 2020 2020 2020 2020  ast,..          
+000204f0: 2020 2020 2020 6d65 7468 6f64 3d27 696e        method='in
+00020500: 6665 7272 6564 5f6e 6f72 6d61 6c27 2c0d  ferred_normal',.
+00020510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020520: 2070 7265 6469 6374 696f 6e5f 696e 7465   prediction_inte
+00020530: 7276 616c 3d73 656c 662e 7072 6564 6963  rval=self.predic
+00020540: 7469 6f6e 5f69 6e74 6572 7661 6c2c 0d0a  tion_interval,..
+00020550: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00020560: 2020 2020 2020 2075 7070 6572 5f66 6f72         upper_for
+00020570: 6563 6173 7420 3d20 7570 7065 725f 666f  ecast = upper_fo
+00020580: 7265 6361 7374 5b73 656c 662e 636f 6c75  recast[self.colu
+00020590: 6d6e 5f6e 616d 6573 5d0d 0a20 2020 2020  mn_names]..     
+000205a0: 2020 206c 6f77 6572 5f66 6f72 6563 6173     lower_forecas
+000205b0: 7420 3d20 6c6f 7765 725f 666f 7265 6361  t = lower_foreca
+000205c0: 7374 5b73 656c 662e 636f 6c75 6d6e 5f6e  st[self.column_n
+000205d0: 616d 6573 5d0d 0a0d 0a20 2020 2020 2020  ames]....       
+000205e0: 2069 6620 6a75 7374 5f70 6f69 6e74 5f66   if just_point_f
+000205f0: 6f72 6563 6173 743a 0d0a 2020 2020 2020  orecast:..      
+00020600: 2020 2020 2020 7265 7475 726e 2066 6f72        return for
+00020610: 6563 6173 740d 0a20 2020 2020 2020 2065  ecast..        e
+00020620: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00020630: 2020 7072 6564 6963 745f 7275 6e74 696d    predict_runtim
+00020640: 6520 3d20 6461 7465 7469 6d65 2e64 6174  e = datetime.dat
+00020650: 6574 696d 652e 6e6f 7728 2920 2d20 7072  etime.now() - pr
+00020660: 6564 6963 7453 7461 7274 5469 6d65 0d0a  edictStartTime..
+00020670: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00020680: 6963 7469 6f6e 203d 2050 7265 6469 6374  iction = Predict
+00020690: 696f 6e4f 626a 6563 7428 0d0a 2020 2020  ionObject(..    
+000206a0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
+000206b0: 6c5f 6e61 6d65 3d73 656c 662e 6e61 6d65  l_name=self.name
+000206c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000206d0: 2020 2066 6f72 6563 6173 745f 6c65 6e67     forecast_leng
+000206e0: 7468 3d73 656c 662e 666f 7265 6361 7374  th=self.forecast
+000206f0: 5f6c 656e 6774 682c 0d0a 2020 2020 2020  _length,..      
+00020700: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+00020710: 7374 5f69 6e64 6578 3d66 6f72 6563 6173  st_index=forecas
+00020720: 742e 696e 6465 782c 0d0a 2020 2020 2020  t.index,..      
+00020730: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+00020740: 7374 5f63 6f6c 756d 6e73 3d66 6f72 6563  st_columns=forec
+00020750: 6173 742e 636f 6c75 6d6e 732c 0d0a 2020  ast.columns,..  
+00020760: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+00020770: 7765 725f 666f 7265 6361 7374 3d6c 6f77  wer_forecast=low
+00020780: 6572 5f66 6f72 6563 6173 742c 0d0a 2020  er_forecast,..  
+00020790: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000207a0: 7265 6361 7374 3d66 6f72 6563 6173 742c  recast=forecast,
+000207b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000207c0: 2020 7570 7065 725f 666f 7265 6361 7374    upper_forecast
+000207d0: 3d75 7070 6572 5f66 6f72 6563 6173 742c  =upper_forecast,
+000207e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000207f0: 2020 7072 6564 6963 7469 6f6e 5f69 6e74    prediction_int
+00020800: 6572 7661 6c3d 7365 6c66 2e70 7265 6469  erval=self.predi
+00020810: 6374 696f 6e5f 696e 7465 7276 616c 2c0d  ction_interval,.
+00020820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020830: 2070 7265 6469 6374 5f72 756e 7469 6d65   predict_runtime
+00020840: 3d70 7265 6469 6374 5f72 756e 7469 6d65  =predict_runtime
+00020850: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00020860: 2020 2066 6974 5f72 756e 7469 6d65 3d73     fit_runtime=s
+00020870: 656c 662e 6669 745f 7275 6e74 696d 652c  elf.fit_runtime,
+00020880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020890: 2020 6d6f 6465 6c5f 7061 7261 6d65 7465    model_paramete
+000208a0: 7273 3d73 656c 662e 6765 745f 7061 7261  rs=self.get_para
+000208b0: 6d73 2829 2c0d 0a20 2020 2020 2020 2020  ms(),..         
+000208c0: 2020 2029 0d0a 2020 2020 2020 2020 2020     )..          
+000208d0: 2020 7265 7475 726e 2070 7265 6469 6374    return predict
+000208e0: 696f 6e0d 0a0d 0a20 2020 2064 6566 2067  ion....    def g
+000208f0: 6574 5f6e 6577 5f70 6172 616d 7328 7365  et_new_params(se
+00020900: 6c66 2c20 6d65 7468 6f64 3a20 7374 7220  lf, method: str 
+00020910: 3d20 2772 616e 646f 6d27 293a 0d0a 2020  = 'random'):..  
+00020920: 2020 2020 2020 2222 2252 6574 7572 6e20        """Return 
+00020930: 6469 6374 206f 6620 6e65 7720 7061 7261  dict of new para
+00020940: 6d65 7465 7273 2066 6f72 2070 6172 616d  meters for param
+00020950: 6574 6572 2074 756e 696e 672e 2222 220d  eter tuning.""".
+00020960: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
+00020970: 6f64 203d 3d20 2264 6565 7022 3a0d 0a20  od == "deep":.. 
+00020980: 2020 2020 2020 2020 2020 206d 6f64 656c             model
+00020990: 5f63 686f 6963 6520 3d20 6765 6e65 7261  _choice = genera
+000209a0: 7465 5f72 6567 7265 7373 6f72 5f70 6172  te_regressor_par
+000209b0: 616d 7328 0d0a 2020 2020 2020 2020 2020  ams(..          
+000209c0: 2020 2020 2020 6d6f 6465 6c5f 6469 6374        model_dict
+000209d0: 3d73 6b6c 6561 726e 5f6d 6f64 656c 5f64  =sklearn_model_d
+000209e0: 6963 742c 206d 6574 686f 643d 6d65 7468  ict, method=meth
+000209f0: 6f64 0d0a 2020 2020 2020 2020 2020 2020  od..            
+00020a00: 290d 0a20 2020 2020 2020 2020 2020 2077  )..            w
+00020a10: 696e 646f 775f 6368 6f69 6365 203d 2072  indow_choice = r
+00020a20: 616e 646f 6d2e 6368 6f69 6365 7328 0d0a  andom.choices(..
+00020a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020a40: 5b4e 6f6e 652c 2033 2c20 372c 2031 302c  [None, 3, 7, 10,
+00020a50: 2031 342c 2032 385d 2c20 5b30 2e32 2c20   14, 28], [0.2, 
+00020a60: 302e 322c 2030 2e30 352c 2030 2e30 352c  0.2, 0.05, 0.05,
+00020a70: 2030 2e30 352c 2030 2e30 355d 0d0a 2020   0.05, 0.05]..  
+00020a80: 2020 2020 2020 2020 2020 295b 305d 0d0a            )[0]..
+00020a90: 2020 2020 2020 2020 2020 2020 7072 6f62              prob
+00020aa0: 6162 696c 6973 7469 6320 3d20 7261 6e64  abilistic = rand
+00020ab0: 6f6d 2e63 686f 6963 6573 285b 5472 7565  om.choices([True
+00020ac0: 2c20 4661 6c73 655d 2c20 5b30 2e32 2c20  , False], [0.2, 
+00020ad0: 302e 385d 295b 305d 0d0a 2020 2020 2020  0.8])[0]..      
+00020ae0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00020af0: 2020 2020 206d 6f64 656c 5f63 686f 6963       model_choic
+00020b00: 6520 3d20 6765 6e65 7261 7465 5f72 6567  e = generate_reg
+00020b10: 7265 7373 6f72 5f70 6172 616d 7328 0d0a  ressor_params(..
+00020b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020b30: 6d6f 6465 6c5f 6469 6374 3d6d 756c 7469  model_dict=multi
+00020b40: 7661 7269 6174 655f 6d6f 6465 6c5f 6469  variate_model_di
+00020b50: 6374 2c20 6d65 7468 6f64 3d6d 6574 686f  ct, method=metho
+00020b60: 640d 0a20 2020 2020 2020 2020 2020 2029  d..            )
+00020b70: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+00020b80: 6e64 6f77 5f63 686f 6963 6520 3d20 7261  ndow_choice = ra
+00020b90: 6e64 6f6d 2e63 686f 6963 6573 285b 4e6f  ndom.choices([No
+00020ba0: 6e65 2c20 332c 2037 2c20 3130 5d2c 205b  ne, 3, 7, 10], [
+00020bb0: 302e 322c 2030 2e32 2c20 302e 3035 2c20  0.2, 0.2, 0.05, 
+00020bc0: 302e 3035 5d29 5b30 5d0d 0a20 2020 2020  0.05])[0]..     
+00020bd0: 2020 2020 2020 2070 726f 6261 6269 6c69         probabili
+00020be0: 7374 6963 203d 2046 616c 7365 0d0a 2020  stic = False..  
+00020bf0: 2020 2020 2020 6d65 616e 5f72 6f6c 6c69        mean_rolli
+00020c00: 6e67 5f70 6572 696f 6473 5f63 686f 6963  ng_periods_choic
+00020c10: 6520 3d20 7261 6e64 6f6d 2e63 686f 6963  e = random.choic
+00020c20: 6573 280d 0a20 2020 2020 2020 2020 2020  es(..           
+00020c30: 205b 4e6f 6e65 2c20 352c 2037 2c20 3132   [None, 5, 7, 12
+00020c40: 2c20 3330 2c20 3930 5d2c 205b 302e 332c  , 30, 90], [0.3,
+00020c50: 2030 2e31 2c20 302e 312c 2030 2e31 2c20   0.1, 0.1, 0.1, 
+00020c60: 302e 312c 2030 2e30 355d 0d0a 2020 2020  0.1, 0.05]..    
+00020c70: 2020 2020 295b 305d 0d0a 2020 2020 2020      )[0]..      
+00020c80: 2020 6966 206d 6561 6e5f 726f 6c6c 696e    if mean_rollin
+00020c90: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
+00020ca0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00020cb0: 2020 2020 2020 2020 2020 206d 6163 645f             macd_
+00020cc0: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+00020cd0: 2073 6561 736f 6e61 6c5f 696e 7428 736d   seasonal_int(sm
+00020ce0: 616c 6c3d 5472 7565 290d 0a20 2020 2020  all=True)..     
+00020cf0: 2020 2020 2020 2069 6620 6d61 6364 5f70         if macd_p
+00020d00: 6572 696f 6473 5f63 686f 6963 6520 3d3d  eriods_choice ==
+00020d10: 206d 6561 6e5f 726f 6c6c 696e 675f 7065   mean_rolling_pe
+00020d20: 7269 6f64 735f 6368 6f69 6365 3a0d 0a20  riods_choice:.. 
+00020d30: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00020d40: 6163 645f 7065 7269 6f64 735f 6368 6f69  acd_periods_choi
+00020d50: 6365 203d 206d 6561 6e5f 726f 6c6c 696e  ce = mean_rollin
+00020d60: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
+00020d70: 202b 2031 300d 0a20 2020 2020 2020 2065   + 10..        e
+00020d80: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00020d90: 2020 6d61 6364 5f70 6572 696f 6473 5f63    macd_periods_c
+00020da0: 686f 6963 6520 3d20 4e6f 6e65 0d0a 2020  hoice = None..  
+00020db0: 2020 2020 2020 7374 645f 726f 6c6c 696e        std_rollin
+00020dc0: 675f 7065 7269 6f64 735f 6368 6f69 6365  g_periods_choice
+00020dd0: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+00020de0: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+00020df0: 5b4e 6f6e 652c 2035 2c20 372c 2031 302c  [None, 5, 7, 10,
+00020e00: 2033 302c 2039 305d 2c20 5b30 2e33 2c20   30, 90], [0.3, 
+00020e10: 302e 312c 2030 2e31 2c20 302e 312c 2030  0.1, 0.1, 0.1, 0
+00020e20: 2e31 2c20 302e 3035 5d0d 0a20 2020 2020  .1, 0.05]..     
+00020e30: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
+00020e40: 2065 776d 5f76 6172 5f61 6c70 6861 203d   ewm_var_alpha =
+00020e50: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+00020e60: 5b4e 6f6e 652c 2030 2e32 2c20 302e 352c  [None, 0.2, 0.5,
+00020e70: 2030 2e38 5d2c 205b 302e 342c 2030 2e31   0.8], [0.4, 0.1
+00020e80: 2c20 302e 312c 2030 2e30 355d 295b 305d  , 0.1, 0.05])[0]
+00020e90: 0d0a 2020 2020 2020 2020 7175 616e 7469  ..        quanti
+00020ea0: 6c65 3930 5f72 6f6c 6c69 6e67 5f70 6572  le90_rolling_per
+00020eb0: 696f 6473 203d 2072 616e 646f 6d2e 6368  iods = random.ch
+00020ec0: 6f69 6365 7328 0d0a 2020 2020 2020 2020  oices(..        
+00020ed0: 2020 2020 5b4e 6f6e 652c 2035 2c20 372c      [None, 5, 7,
+00020ee0: 2031 302c 2033 302c 2039 305d 2c20 5b30   10, 30, 90], [0
+00020ef0: 2e33 2c20 302e 312c 2030 2e31 2c20 302e  .3, 0.1, 0.1, 0.
+00020f00: 312c 2030 2e31 2c20 302e 3035 5d0d 0a20  1, 0.1, 0.05].. 
+00020f10: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+00020f20: 2020 2020 2071 7561 6e74 696c 6531 305f       quantile10_
+00020f30: 726f 6c6c 696e 675f 7065 7269 6f64 7320  rolling_periods 
+00020f40: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
+00020f50: 280d 0a20 2020 2020 2020 2020 2020 205b  (..            [
+00020f60: 4e6f 6e65 2c20 352c 2037 2c20 3130 2c20  None, 5, 7, 10, 
+00020f70: 3330 2c20 3930 5d2c 205b 302e 332c 2030  30, 90], [0.3, 0
+00020f80: 2e31 2c20 302e 312c 2030 2e31 2c20 302e  .1, 0.1, 0.1, 0.
+00020f90: 312c 2030 2e30 355d 0d0a 2020 2020 2020  1, 0.05]..      
+00020fa0: 2020 295b 305d 0d0a 2020 2020 2020 2020    )[0]..        
+00020fb0: 6d61 785f 726f 6c6c 696e 675f 7065 7269  max_rolling_peri
+00020fc0: 6f64 735f 6368 6f69 6365 203d 2072 616e  ods_choice = ran
+00020fd0: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+00020fe0: 2020 2020 2020 2020 2020 5b4e 6f6e 652c            [None,
+00020ff0: 2073 6561 736f 6e61 6c5f 696e 7428 736d   seasonal_int(sm
+00021000: 616c 6c3d 5472 7565 295d 2c20 5b30 2e32  all=True)], [0.2
+00021010: 2c20 302e 355d 0d0a 2020 2020 2020 2020  , 0.5]..        
+00021020: 295b 305d 0d0a 2020 2020 2020 2020 6d69  )[0]..        mi
+00021030: 6e5f 726f 6c6c 696e 675f 7065 7269 6f64  n_rolling_period
+00021040: 735f 6368 6f69 6365 203d 2072 616e 646f  s_choice = rando
+00021050: 6d2e 6368 6f69 6365 7328 0d0a 2020 2020  m.choices(..    
+00021060: 2020 2020 2020 2020 5b4e 6f6e 652c 2073          [None, s
+00021070: 6561 736f 6e61 6c5f 696e 7428 736d 616c  easonal_int(smal
+00021080: 6c3d 5472 7565 295d 2c20 5b30 2e32 2c20  l=True)], [0.2, 
+00021090: 302e 355d 0d0a 2020 2020 2020 2020 295b  0.5]..        )[
+000210a0: 305d 0d0a 2020 2020 2020 2020 6c61 675f  0]..        lag_
+000210b0: 7065 7269 6f64 735f 6368 6f69 6365 203d  periods_choice =
+000210c0: 204e 6f6e 650d 0a20 2020 2020 2020 2065   None..        e
+000210d0: 776d 5f63 686f 6963 6520 3d20 7261 6e64  wm_choice = rand
+000210e0: 6f6d 2e63 686f 6963 6573 280d 0a20 2020  om.choices(..   
+000210f0: 2020 2020 2020 2020 205b 4e6f 6e65 2c20           [None, 
+00021100: 302e 312c 2030 2e32 2c20 302e 352c 2030  0.1, 0.2, 0.5, 0
+00021110: 2e38 5d2c 205b 302e 342c 2030 2e30 312c  .8], [0.4, 0.01,
+00021120: 2030 2e31 2c20 302e 312c 2030 2e30 355d   0.1, 0.1, 0.05]
+00021130: 0d0a 2020 2020 2020 2020 295b 305d 0d0a  ..        )[0]..
+00021140: 2020 2020 2020 2020 6162 735f 656e 6572          abs_ener
+00021150: 6779 5f63 686f 6963 6520 3d20 4661 6c73  gy_choice = Fals
+00021160: 650d 0a20 2020 2020 2020 2072 6f6c 6c69  e..        rolli
+00021170: 6e67 5f61 7574 6f63 6f72 725f 7065 7269  ng_autocorr_peri
+00021180: 6f64 735f 6368 6f69 6365 203d 2072 616e  ods_choice = ran
+00021190: 646f 6d2e 6368 6f69 6365 7328 0d0a 2020  dom.choices(..  
+000211a0: 2020 2020 2020 2020 2020 5b4e 6f6e 652c            [None,
+000211b0: 2032 2c20 372c 2031 322c 2033 305d 2c20   2, 7, 12, 30], 
+000211c0: 5b30 2e34 2c20 302e 3031 2c20 302e 3031  [0.4, 0.01, 0.01
+000211d0: 2c20 302e 3031 2c20 302e 3031 5d0d 0a20  , 0.01, 0.01].. 
+000211e0: 2020 2020 2020 2029 5b30 5d0d 0a20 2020         )[0]..   
+000211f0: 2020 2020 206e 6f6e 7a65 726f 5f6c 6173       nonzero_las
+00021200: 745f 6e20 3d20 7261 6e64 6f6d 2e63 686f  t_n = random.cho
+00021210: 6963 6573 280d 0a20 2020 2020 2020 2020  ices(..         
+00021220: 2020 205b 4e6f 6e65 2c20 322c 2037 2c20     [None, 2, 7, 
+00021230: 3134 2c20 3330 5d2c 205b 302e 362c 2030  14, 30], [0.6, 0
+00021240: 2e30 312c 2030 2e31 2c20 302e 312c 2030  .01, 0.1, 0.1, 0
+00021250: 2e30 315d 0d0a 2020 2020 2020 2020 295b  .01]..        )[
+00021260: 305d 0d0a 2020 2020 2020 2020 6164 645f  0]..        add_
+00021270: 6461 7465 5f70 6172 745f 6368 6f69 6365  date_part_choice
+00021280: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+00021290: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+000212a0: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+000212b0: 2020 204e 6f6e 652c 0d0a 2020 2020 2020     None,..      
+000212c0: 2020 2020 2020 2020 2020 2773 696d 706c            'simpl
+000212d0: 6527 2c0d 0a20 2020 2020 2020 2020 2020  e',..           
+000212e0: 2020 2020 2027 6578 7061 6e64 6564 272c       'expanded',
+000212f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00021300: 2020 2772 6563 7572 7269 6e67 272c 0d0a    'recurring',..
+00021310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021320: 2273 696d 706c 655f 3222 2c0d 0a20 2020  "simple_2",..   
+00021330: 2020 2020 2020 2020 2020 2020 2022 7369               "si
+00021340: 6d70 6c65 5f32 5f70 6f6c 7922 2c0d 0a20  mple_2_poly",.. 
+00021350: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00021360: 7369 6d70 6c65 5f62 696e 6172 697a 6564  simple_binarized
+00021370: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00021380: 2020 2020 2263 6f6d 6d6f 6e5f 666f 7572      "common_four
+00021390: 6965 7222 2c0d 0a20 2020 2020 2020 2020  ier",..         
+000213a0: 2020 2020 2020 2022 6578 7061 6e64 6564         "expanded
+000213b0: 5f62 696e 6172 697a 6564 222c 0d0a 2020  _binarized",..  
+000213c0: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+000213d0: 6f6d 6d6f 6e5f 666f 7572 6965 725f 7277  ommon_fourier_rw
+000213e0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+000213f0: 2020 2020 5b22 6461 796f 6677 6565 6b22      ["dayofweek"
+00021400: 2c20 3336 352e 3235 5d2c 0d0a 2020 2020  , 365.25],..    
+00021410: 2020 2020 2020 2020 5d2c 0d0a 2020 2020          ],..    
+00021420: 2020 2020 2020 2020 5b30 2e32 2c20 302e          [0.2, 0.
+00021430: 312c 2030 2e30 3235 2c20 302e 312c 2030  1, 0.025, 0.1, 0
+00021440: 2e30 352c 2030 2e31 2c20 302e 3035 2c20  .05, 0.1, 0.05, 
+00021450: 302e 3035 2c20 302e 3035 2c20 302e 3032  0.05, 0.05, 0.02
+00021460: 352c 2030 2e30 355d 2c0d 0a20 2020 2020  5, 0.05],..     
+00021470: 2020 2029 5b30 5d0d 0a20 2020 2020 2020     )[0]..       
+00021480: 2068 6f6c 6964 6179 5f63 686f 6963 6520   holiday_choice 
+00021490: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
+000214a0: 285b 5472 7565 2c20 4661 6c73 655d 2c20  ([True, False], 
+000214b0: 5b30 2e31 2c20 302e 395d 295b 305d 0d0a  [0.1, 0.9])[0]..
+000214c0: 2020 2020 2020 2020 706f 6c79 6e6f 6d69          polynomi
+000214d0: 616c 5f64 6567 7265 655f 6368 6f69 6365  al_degree_choice
+000214e0: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+000214f0: 7328 5b4e 6f6e 652c 2032 5d2c 205b 302e  s([None, 2], [0.
+00021500: 3939 352c 2030 2e30 3035 5d29 5b30 5d0d  995, 0.005])[0].
+00021510: 0a20 2020 2020 2020 2069 6620 2272 6567  .        if "reg
+00021520: 7265 7373 6f72 2220 696e 206d 6574 686f  ressor" in metho
+00021530: 643a 0d0a 2020 2020 2020 2020 2020 2020  d:..            
+00021540: 7265 6772 6573 7369 6f6e 5f63 686f 6963  regression_choic
+00021550: 6520 3d20 2255 7365 7222 0d0a 2020 2020  e = "User"..    
+00021560: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00021570: 2020 2020 2020 2072 6567 7265 7373 696f         regressio
+00021580: 6e5f 6368 6f69 6365 203d 2072 616e 646f  n_choice = rando
+00021590: 6d2e 6368 6f69 6365 7328 5b4e 6f6e 652c  m.choices([None,
+000215a0: 2027 5573 6572 275d 2c20 5b30 2e37 2c20   'User'], [0.7, 
+000215b0: 302e 335d 295b 305d 0d0a 2020 2020 2020  0.3])[0]..      
+000215c0: 2020 636f 696e 745f 6368 6f69 6365 203d    coint_choice =
+000215d0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+000215e0: 5b4e 6f6e 652c 2022 4254 4344 222c 2022  [None, "BTCD", "
+000215f0: 4a6f 6861 6e73 656e 225d 2c20 5b30 2e38  Johansen"], [0.8
+00021600: 2c20 302e 312c 2030 2e31 5d29 5b30 5d0d  , 0.1, 0.1])[0].
+00021610: 0a20 2020 2020 2020 2063 6f69 6e74 5f6c  .        coint_l
+00021620: 6167 203d 2031 0d0a 2020 2020 2020 2020  ag = 1..        
+00021630: 6966 2063 6f69 6e74 5f63 686f 6963 6520  if coint_choice 
+00021640: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00021650: 2020 2020 2020 2020 2020 636f 696e 745f            coint_
+00021660: 6c61 6720 3d20 7261 6e64 6f6d 2e63 686f  lag = random.cho
+00021670: 6963 6528 5b31 2c20 322c 2037 5d29 0d0a  ice([1, 2, 7])..
+00021680: 2020 2020 2020 2020 7061 7261 6d65 7465          paramete
+00021690: 725f 6469 6374 203d 207b 0d0a 2020 2020  r_dict = {..    
+000216a0: 2020 2020 2020 2020 2772 6567 7265 7373          'regress
+000216b0: 696f 6e5f 6d6f 6465 6c27 3a20 6d6f 6465  ion_model': mode
+000216c0: 6c5f 6368 6f69 6365 2c0d 0a20 2020 2020  l_choice,..     
+000216d0: 2020 2020 2020 2027 6d65 616e 5f72 6f6c         'mean_rol
+000216e0: 6c69 6e67 5f70 6572 696f 6473 273a 206d  ling_periods': m
+000216f0: 6561 6e5f 726f 6c6c 696e 675f 7065 7269  ean_rolling_peri
+00021700: 6f64 735f 6368 6f69 6365 2c0d 0a20 2020  ods_choice,..   
+00021710: 2020 2020 2020 2020 2027 6d61 6364 5f70           'macd_p
+00021720: 6572 696f 6473 273a 206d 6163 645f 7065  eriods': macd_pe
+00021730: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
+00021740: 2020 2020 2020 2020 2020 2027 7374 645f             'std_
+00021750: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
+00021760: 3a20 7374 645f 726f 6c6c 696e 675f 7065  : std_rolling_pe
+00021770: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
+00021780: 2020 2020 2020 2020 2020 2027 6d61 785f             'max_
+00021790: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
+000217a0: 3a20 6d61 785f 726f 6c6c 696e 675f 7065  : max_rolling_pe
+000217b0: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
+000217c0: 2020 2020 2020 2020 2020 2027 6d69 6e5f             'min_
+000217d0: 726f 6c6c 696e 675f 7065 7269 6f64 7327  rolling_periods'
+000217e0: 3a20 6d69 6e5f 726f 6c6c 696e 675f 7065  : min_rolling_pe
+000217f0: 7269 6f64 735f 6368 6f69 6365 2c0d 0a20  riods_choice,.. 
+00021800: 2020 2020 2020 2020 2020 2022 7175 616e             "quan
+00021810: 7469 6c65 3930 5f72 6f6c 6c69 6e67 5f70  tile90_rolling_p
+00021820: 6572 696f 6473 223a 2071 7561 6e74 696c  eriods": quantil
+00021830: 6539 305f 726f 6c6c 696e 675f 7065 7269  e90_rolling_peri
+00021840: 6f64 732c 0d0a 2020 2020 2020 2020 2020  ods,..          
+00021850: 2020 2271 7561 6e74 696c 6531 305f 726f    "quantile10_ro
+00021860: 6c6c 696e 675f 7065 7269 6f64 7322 3a20  lling_periods": 
+00021870: 7175 616e 7469 6c65 3130 5f72 6f6c 6c69  quantile10_rolli
+00021880: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+00021890: 2020 2020 2020 2020 2027 6577 6d5f 616c           'ewm_al
+000218a0: 7068 6127 3a20 6577 6d5f 6368 6f69 6365  pha': ewm_choice
+000218b0: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+000218c0: 6577 6d5f 7661 725f 616c 7068 6122 3a20  ewm_var_alpha": 
+000218d0: 6577 6d5f 7661 725f 616c 7068 612c 0d0a  ewm_var_alpha,..
+000218e0: 2020 2020 2020 2020 2020 2020 2761 6464              'add
+000218f0: 6974 696f 6e61 6c5f 6c61 675f 7065 7269  itional_lag_peri
+00021900: 6f64 7327 3a20 6c61 675f 7065 7269 6f64  ods': lag_period
+00021910: 735f 6368 6f69 6365 2c0d 0a20 2020 2020  s_choice,..     
+00021920: 2020 2020 2020 2027 6162 735f 656e 6572         'abs_ener
+00021930: 6779 273a 2061 6273 5f65 6e65 7267 795f  gy': abs_energy_
+00021940: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+00021950: 2020 2020 2027 726f 6c6c 696e 675f 6175       'rolling_au
+00021960: 746f 636f 7272 5f70 6572 696f 6473 273a  tocorr_periods':
+00021970: 2072 6f6c 6c69 6e67 5f61 7574 6f63 6f72   rolling_autocor
+00021980: 725f 7065 7269 6f64 735f 6368 6f69 6365  r_periods_choice
+00021990: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+000219a0: 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e 273a  nonzero_last_n':
+000219b0: 206e 6f6e 7a65 726f 5f6c 6173 745f 6e2c   nonzero_last_n,
+000219c0: 0d0a 2020 2020 2020 2020 2020 2020 2764  ..            'd
+000219d0: 6174 6570 6172 745f 6d65 7468 6f64 273a  atepart_method':
+000219e0: 2061 6464 5f64 6174 655f 7061 7274 5f63   add_date_part_c
+000219f0: 686f 6963 652c 0d0a 2020 2020 2020 2020  hoice,..        
+00021a00: 2020 2020 2770 6f6c 796e 6f6d 6961 6c5f      'polynomial_
+00021a10: 6465 6772 6565 273a 2070 6f6c 796e 6f6d  degree': polynom
+00021a20: 6961 6c5f 6465 6772 6565 5f63 686f 6963  ial_degree_choic
+00021a30: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00021a40: 2772 6567 7265 7373 696f 6e5f 7479 7065  'regression_type
+00021a50: 273a 2072 6567 7265 7373 696f 6e5f 6368  ': regression_ch
+00021a60: 6f69 6365 2c0d 0a20 2020 2020 2020 2020  oice,..         
+00021a70: 2020 2027 7769 6e64 6f77 273a 2077 696e     'window': win
+00021a80: 646f 775f 6368 6f69 6365 2c0d 0a20 2020  dow_choice,..   
+00021a90: 2020 2020 2020 2020 2027 686f 6c69 6461           'holida
+00021aa0: 7927 3a20 686f 6c69 6461 795f 6368 6f69  y': holiday_choi
+00021ab0: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
+00021ac0: 2022 7072 6f62 6162 696c 6973 7469 6322   "probabilistic"
+00021ad0: 3a20 7072 6f62 6162 696c 6973 7469 632c  : probabilistic,
+00021ae0: 0d0a 2020 2020 2020 2020 2020 2020 2773  ..            's
+00021af0: 6361 6c65 5f66 756c 6c5f 5827 3a20 7261  cale_full_X': ra
+00021b00: 6e64 6f6d 2e63 686f 6963 6573 285b 5472  ndom.choices([Tr
+00021b10: 7565 2c20 4661 6c73 655d 2c20 5b30 2e32  ue, False], [0.2
+00021b20: 2c20 302e 385d 295b 305d 2c0d 0a20 2020  , 0.8])[0],..   
+00021b30: 2020 2020 2020 2020 2022 636f 696e 7465           "cointe
+00021b40: 6772 6174 696f 6e22 3a20 636f 696e 745f  gration": coint_
+00021b50: 6368 6f69 6365 2c0d 0a20 2020 2020 2020  choice,..       
+00021b60: 2020 2020 2022 636f 696e 7465 6772 6174       "cointegrat
+00021b70: 696f 6e5f 6c61 6722 3a20 636f 696e 745f  ion_lag": coint_
+00021b80: 6c61 672c 0d0a 2020 2020 2020 2020 2020  lag,..          
+00021b90: 2020 2273 6572 6965 735f 6861 7368 223a    "series_hash":
+00021ba0: 2072 616e 646f 6d2e 6368 6f69 6365 7328   random.choices(
+00021bb0: 5b54 7275 652c 2046 616c 7365 5d2c 205b  [True, False], [
+00021bc0: 302e 352c 2030 2e35 5d29 5b30 5d2c 0d0a  0.5, 0.5])[0],..
+00021bd0: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
+00021be0: 2020 2072 6574 7572 6e20 7061 7261 6d65     return parame
+00021bf0: 7465 725f 6469 6374 0d0a 0d0a 2020 2020  ter_dict....    
+00021c00: 6465 6620 6765 745f 7061 7261 6d73 2873  def get_params(s
+00021c10: 656c 6629 3a0d 0a20 2020 2020 2020 2022  elf):..        "
+00021c20: 2222 5265 7475 726e 2064 6963 7420 6f66  ""Return dict of
+00021c30: 2063 7572 7265 6e74 2070 6172 616d 6574   current paramet
+00021c40: 6572 732e 2222 220d 0a20 2020 2020 2020  ers."""..       
+00021c50: 2070 6172 616d 6574 6572 5f64 6963 7420   parameter_dict 
+00021c60: 3d20 7b0d 0a20 2020 2020 2020 2020 2020  = {..           
+00021c70: 2027 7265 6772 6573 7369 6f6e 5f6d 6f64   'regression_mod
+00021c80: 656c 273a 2073 656c 662e 7265 6772 6573  el': self.regres
+00021c90: 7369 6f6e 5f6d 6f64 656c 2c0d 0a20 2020  sion_model,..   
+00021ca0: 2020 2020 2020 2020 2027 6d65 616e 5f72           'mean_r
+00021cb0: 6f6c 6c69 6e67 5f70 6572 696f 6473 273a  olling_periods':
+00021cc0: 2073 656c 662e 6d65 616e 5f72 6f6c 6c69   self.mean_rolli
+00021cd0: 6e67 5f70 6572 696f 6473 2c0d 0a20 2020  ng_periods,..   
+00021ce0: 2020 2020 2020 2020 2027 6d61 6364 5f70           'macd_p
+00021cf0: 6572 696f 6473 273a 2073 656c 662e 6d61  eriods': self.ma
+00021d00: 6364 5f70 6572 696f 6473 2c0d 0a20 2020  cd_periods,..   
+00021d10: 2020 2020 2020 2020 2027 7374 645f 726f           'std_ro
+00021d20: 6c6c 696e 675f 7065 7269 6f64 7327 3a20  lling_periods': 
+00021d30: 7365 6c66 2e73 7464 5f72 6f6c 6c69 6e67  self.std_rolling
+00021d40: 5f70 6572 696f 6473 2c0d 0a20 2020 2020  _periods,..     
+00021d50: 2020 2020 2020 2027 6d61 785f 726f 6c6c         'max_roll
+00021d60: 696e 675f 7065 7269 6f64 7327 3a20 7365  ing_periods': se
+00021d70: 6c66 2e6d 6178 5f72 6f6c 6c69 6e67 5f70  lf.max_rolling_p
+00021d80: 6572 696f 6473 2c0d 0a20 2020 2020 2020  eriods,..       
+00021d90: 2020 2020 2027 6d69 6e5f 726f 6c6c 696e       'min_rollin
+00021da0: 675f 7065 7269 6f64 7327 3a20 7365 6c66  g_periods': self
+00021db0: 2e6d 696e 5f72 6f6c 6c69 6e67 5f70 6572  .min_rolling_per
+00021dc0: 696f 6473 2c0d 0a20 2020 2020 2020 2020  iods,..         
+00021dd0: 2020 2022 7175 616e 7469 6c65 3930 5f72     "quantile90_r
+00021de0: 6f6c 6c69 6e67 5f70 6572 696f 6473 223a  olling_periods":
+00021df0: 2073 656c 662e 7175 616e 7469 6c65 3930   self.quantile90
+00021e00: 5f72 6f6c 6c69 6e67 5f70 6572 696f 6473  _rolling_periods
+00021e10: 2c0d 0a20 2020 2020 2020 2020 2020 2022  ,..            "
+00021e20: 7175 616e 7469 6c65 3130 5f72 6f6c 6c69  quantile10_rolli
+00021e30: 6e67 5f70 6572 696f 6473 223a 2073 656c  ng_periods": sel
+00021e40: 662e 7175 616e 7469 6c65 3130 5f72 6f6c  f.quantile10_rol
+00021e50: 6c69 6e67 5f70 6572 696f 6473 2c0d 0a20  ling_periods,.. 
+00021e60: 2020 2020 2020 2020 2020 2027 6577 6d5f             'ewm_
+00021e70: 616c 7068 6127 3a20 7365 6c66 2e65 776d  alpha': self.ewm
+00021e80: 5f61 6c70 6861 2c0d 0a20 2020 2020 2020  _alpha,..       
+00021e90: 2020 2020 2022 6577 6d5f 7661 725f 616c       "ewm_var_al
+00021ea0: 7068 6122 3a20 7365 6c66 2e65 776d 5f76  pha": self.ewm_v
+00021eb0: 6172 5f61 6c70 6861 2c0d 0a20 2020 2020  ar_alpha,..     
+00021ec0: 2020 2020 2020 2027 6164 6469 7469 6f6e         'addition
+00021ed0: 616c 5f6c 6167 5f70 6572 696f 6473 273a  al_lag_periods':
+00021ee0: 2073 656c 662e 6164 6469 7469 6f6e 616c   self.additional
+00021ef0: 5f6c 6167 5f70 6572 696f 6473 2c0d 0a20  _lag_periods,.. 
+00021f00: 2020 2020 2020 2020 2020 2027 6162 735f             'abs_
+00021f10: 656e 6572 6779 273a 2073 656c 662e 6162  energy': self.ab
+00021f20: 735f 656e 6572 6779 2c0d 0a20 2020 2020  s_energy,..     
+00021f30: 2020 2020 2020 2027 726f 6c6c 696e 675f         'rolling_
+00021f40: 6175 746f 636f 7272 5f70 6572 696f 6473  autocorr_periods
+00021f50: 273a 2073 656c 662e 726f 6c6c 696e 675f  ': self.rolling_
+00021f60: 6175 746f 636f 7272 5f70 6572 696f 6473  autocorr_periods
+00021f70: 2c0d 0a20 2020 2020 2020 2020 2020 2027  ,..            '
+00021f80: 6e6f 6e7a 6572 6f5f 6c61 7374 5f6e 273a  nonzero_last_n':
+00021f90: 2073 656c 662e 6e6f 6e7a 6572 6f5f 6c61   self.nonzero_la
+00021fa0: 7374 5f6e 2c0d 0a20 2020 2020 2020 2020  st_n,..         
+00021fb0: 2020 2027 6461 7465 7061 7274 5f6d 6574     'datepart_met
+00021fc0: 686f 6427 3a20 7365 6c66 2e64 6174 6570  hod': self.datep
+00021fd0: 6172 745f 6d65 7468 6f64 2c0d 0a20 2020  art_method,..   
+00021fe0: 2020 2020 2020 2020 2027 706f 6c79 6e6f           'polyno
+00021ff0: 6d69 616c 5f64 6567 7265 6527 3a20 7365  mial_degree': se
+00022000: 6c66 2e70 6f6c 796e 6f6d 6961 6c5f 6465  lf.polynomial_de
+00022010: 6772 6565 2c0d 0a20 2020 2020 2020 2020  gree,..         
+00022020: 2020 2027 7265 6772 6573 7369 6f6e 5f74     'regression_t
+00022030: 7970 6527 3a20 7365 6c66 2e72 6567 7265  ype': self.regre
+00022040: 7373 696f 6e5f 7479 7065 2c0d 0a20 2020  ssion_type,..   
+00022050: 2020 2020 2020 2020 2027 7769 6e64 6f77           'window
+00022060: 273a 2073 656c 662e 7769 6e64 6f77 2c0d  ': self.window,.
+00022070: 0a20 2020 2020 2020 2020 2020 2027 686f  .            'ho
+00022080: 6c69 6461 7927 3a20 7365 6c66 2e68 6f6c  liday': self.hol
+00022090: 6964 6179 2c0d 0a20 2020 2020 2020 2020  iday,..         
+000220a0: 2020 2027 7072 6f62 6162 696c 6973 7469     'probabilisti
+000220b0: 6327 3a20 7365 6c66 2e70 726f 6261 6269  c': self.probabi
+000220c0: 6c69 7374 6963 2c0d 0a20 2020 2020 2020  listic,..       
+000220d0: 2020 2020 2027 7363 616c 655f 6675 6c6c       'scale_full
+000220e0: 5f58 273a 2073 656c 662e 7363 616c 655f  _X': self.scale_
+000220f0: 6675 6c6c 5f58 2c0d 0a20 2020 2020 2020  full_X,..       
+00022100: 2020 2020 2022 636f 696e 7465 6772 6174       "cointegrat
+00022110: 696f 6e22 3a20 7365 6c66 2e63 6f69 6e74  ion": self.coint
+00022120: 6567 7261 7469 6f6e 2c0d 0a20 2020 2020  egration,..     
+00022130: 2020 2020 2020 2022 636f 696e 7465 6772         "cointegr
+00022140: 6174 696f 6e5f 6c61 6722 3a20 7365 6c66  ation_lag": self
+00022150: 2e63 6f69 6e74 6567 7261 7469 6f6e 5f6c  .cointegration_l
+00022160: 6167 2c0d 0a20 2020 2020 2020 2020 2020  ag,..           
+00022170: 2022 7365 7269 6573 5f68 6173 6822 3a20   "series_hash": 
+00022180: 7365 6c66 2e73 6572 6965 735f 6861 7368  self.series_hash
+00022190: 2c0d 0a20 2020 2020 2020 207d 0d0a 2020  ,..        }..  
+000221a0: 2020 2020 2020 7265 7475 726e 2070 6172        return par
+000221b0: 616d 6574 6572 5f64 6963 740d 0a0d 0a0d  ameter_dict.....
+000221c0: 0a63 6c61 7373 2056 6563 746f 7269 7a65  .class Vectorize
+000221d0: 644d 756c 7469 4f75 7470 7574 4750 523a  dMultiOutputGPR:
+000221e0: 0d0a 2020 2020 2222 2247 6175 7373 6961  ..    """Gaussia
+000221f0: 6e20 5072 6f63 6573 7320 5265 6772 6573  n Process Regres
+00022200: 736f 722e 0d0a 0d0a 2020 2020 4172 6773  sor.....    Args
+00022210: 3a0d 0a20 2020 2020 2020 206b 6572 6e65  :..        kerne
+00022220: 6c20 2873 7472 293a 206c 696e 6561 722c  l (str): linear,
+00022230: 2070 6f6c 796e 6f6d 6961 6c2c 2072 6266   polynomial, rbf
+00022240: 2c20 7065 7269 6f64 6963 2c20 6c6f 6361  , periodic, loca
+00022250: 6c6c 795f 7065 7269 6f64 6963 2c20 6578  lly_periodic, ex
+00022260: 706f 6e65 6e74 6961 6c0d 0a20 2020 2020  ponential..     
+00022270: 2020 206e 6f69 7365 5f76 6172 2028 666c     noise_var (fl
+00022280: 6f61 7429 3a20 6e6f 6973 6520 7661 7269  oat): noise vari
+00022290: 616e 6365 2c20 6566 6665 6374 6976 656c  ance, effectivel
+000222a0: 7920 7265 6775 6c61 7269 7a61 7469 6f6e  y regularization
+000222b0: 2e20 436c 6f73 6520 746f 207a 6572 6f20  . Close to zero 
+000222c0: 6c69 7474 6c65 2072 6567 756c 6172 697a  little regulariz
+000222d0: 6174 696f 6e2c 206c 6172 6765 7220 7661  ation, larger va
+000222e0: 6c75 6573 2063 7265 6174 6520 6d6f 7265  lues create more
+000222f0: 206d 6f64 656c 2066 6c65 7869 626c 6974   model flexiblit
+00022300: 7920 616e 6420 6e6f 6973 6520 746f 6c65  y and noise tole
+00022310: 7261 6e63 652e 0d0a 2020 2020 2020 2020  rance...        
+00022320: 6761 6d6d 613a 2046 6f72 2074 6865 2052  gamma: For the R
+00022330: 4246 2c20 4578 706f 6e65 6e74 6961 6c2c  BF, Exponential,
+00022340: 2061 6e64 204c 6f63 616c 6c79 2050 6572   and Locally Per
+00022350: 696f 6469 6320 6b65 726e 656c 732c 20ce  iodic kernels, .
+00022360: b320 6973 2065 7373 656e 7469 616c 6c79  . is essentially
+00022370: 2061 6e20 696e 7665 7273 6520 6c65 6e67   an inverse leng
+00022380: 7468 2073 6361 6c65 2e20 5b30 2e31 2c31  th scale. [0.1,1
+00022390: 2c31 302c 3130 305d 2e0d 0a20 2020 2020  ,10,100]...     
+000223a0: 2020 206c 616d 6264 615f 3a20 466f 7220     lambda_: For 
+000223b0: 7468 6520 5065 7269 6f64 6963 2061 6e64  the Periodic and
+000223c0: 204c 6f63 616c 6c79 2050 6572 696f 6469   Locally Periodi
+000223d0: 6320 6b65 726e 656c 732c 205c 6c61 6d62  c kernels, \lamb
+000223e0: 6461 5f20 6465 7465 726d 696e 6573 2074  da_ determines t
+000223f0: 6865 2073 6d6f 6f74 686e 6573 7320 6f66  he smoothness of
+00022400: 2074 6865 2070 6572 696f 6469 6320 6675   the periodic fu
+00022410: 6e63 7469 6f6e 2e20 4120 7265 6173 6f6e  nction. A reason
+00022420: 6162 6c65 2072 616e 6765 206d 6967 6874  able range might
+00022430: 2062 6520 5b30 2e31 2c31 2c31 302c 3130   be [0.1,1,10,10
+00022440: 305d 2e0d 0a20 2020 2020 2020 206c 616d  0]...        lam
+00022450: 6264 615f 7072 696d 653a 2053 7065 6369  bda_prime: Speci
+00022460: 6669 6361 6c6c 7920 666f 7220 7468 6520  fically for the 
+00022470: 4c6f 6361 6c6c 7920 5065 7269 6f64 6963  Locally Periodic
+00022480: 206b 6572 6e65 6c2c 2074 6869 7320 6465   kernel, this de
+00022490: 7465 726d 696e 6573 2074 6865 2073 6d6f  termines the smo
+000224a0: 6f74 686e 6573 7320 6f66 2074 6865 2070  othness of the p
+000224b0: 6572 696f 6469 6320 636f 6d70 6f6e 656e  eriodic componen
+000224c0: 742e 2053 616d 6520 7261 6e67 6520 6173  t. Same range as
+000224d0: 205c 6c61 6d62 6461 5f2e 0d0a 2020 2020   \lambda_...    
+000224e0: 2020 2020 703a 2054 6865 2070 6572 696f      p: The perio
+000224f0: 6420 7061 7261 6d65 7465 7220 666f 7220  d parameter for 
+00022500: 7468 6520 5065 7269 6f64 6963 2061 6e64  the Periodic and
+00022510: 204c 6f63 616c 6c79 2050 6572 696f 6469   Locally Periodi
+00022520: 6320 6b65 726e 656c 7320 7375 6368 2061  c kernels such a
+00022530: 7320 3720 6f72 2033 3635 2e32 3520 666f  s 7 or 365.25 fo
+00022540: 7220 6461 696c 7920 6461 7461 2e0d 0a20  r daily data... 
+00022550: 2020 2022 2222 0d0a 0d0a 2020 2020 6465     """....    de
+00022560: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00022570: 206b 6572 6e65 6c3d 2772 6266 272c 206e   kernel='rbf', n
+00022580: 6f69 7365 5f76 6172 3d31 302c 2067 616d  oise_var=10, gam
+00022590: 6d61 3d30 2e31 2c20 6c61 6d62 6461 5f70  ma=0.1, lambda_p
+000225a0: 7269 6d65 3d30 2e31 2c20 703d 3729 3a0d  rime=0.1, p=7):.
+000225b0: 0a20 2020 2020 2020 2073 656c 662e 6b65  .        self.ke
+000225c0: 726e 656c 203d 206b 6572 6e65 6c0d 0a20  rnel = kernel.. 
+000225d0: 2020 2020 2020 2073 656c 662e 6e6f 6973         self.nois
+000225e0: 655f 7661 7220 3d20 6e6f 6973 655f 7661  e_var = noise_va
+000225f0: 720d 0a20 2020 2020 2020 2073 656c 662e  r..        self.
+00022600: 6761 6d6d 6120 3d20 6761 6d6d 610d 0a20  gamma = gamma.. 
+00022610: 2020 2020 2020 2073 656c 662e 6c61 6d62         self.lamb
+00022620: 6461 5f70 7269 6d65 203d 206c 616d 6264  da_prime = lambd
+00022630: 615f 7072 696d 650d 0a20 2020 2020 2020  a_prime..       
+00022640: 2073 656c 662e 7020 3d20 700d 0a0d 0a20   self.p = p.... 
+00022650: 2020 2064 6566 205f 6c69 6e65 6172 5f6b     def _linear_k
+00022660: 6572 6e65 6c28 7365 6c66 2c20 7831 2c20  ernel(self, x1, 
+00022670: 7832 293a 0d0a 2020 2020 2020 2020 7265  x2):..        re
+00022680: 7475 726e 206e 702e 646f 7428 7831 2c20  turn np.dot(x1, 
+00022690: 7832 2e54 290d 0a0d 0a20 2020 2064 6566  x2.T)....    def
+000226a0: 205f 706f 6c79 6e6f 6d69 616c 5f6b 6572   _polynomial_ker
+000226b0: 6e65 6c28 7365 6c66 2c20 7831 2c20 7832  nel(self, x1, x2
+000226c0: 2c20 703d 3229 3a0d 0a20 2020 2020 2020  , p=2):..       
+000226d0: 2072 6574 7572 6e20 2831 202b 206e 702e   return (1 + np.
+000226e0: 646f 7428 7831 2c20 7832 2e54 2929 202a  dot(x1, x2.T)) *
+000226f0: 2a20 700d 0a0d 0a20 2020 2064 6566 205f  * p....    def _
+00022700: 7262 665f 6b65 726e 656c 2873 656c 662c  rbf_kernel(self,
+00022710: 2078 312c 2078 322c 2067 616d 6d61 293a   x1, x2, gamma):
+00022720: 0d0a 2020 2020 2020 2020 2320 6672 6f6d  ..        # from
+00022730: 2073 6369 7079 2e73 7061 7469 616c 2e64   scipy.spatial.d
+00022740: 6973 7461 6e63 6520 696d 706f 7274 2063  istance import c
+00022750: 6469 7374 0d0a 2020 2020 2020 2020 2320  dist..        # 
+00022760: 7265 7475 726e 206e 702e 6578 7028 2d67  return np.exp(-g
+00022770: 616d 6d61 202a 2063 6469 7374 2878 312c  amma * cdist(x1,
+00022780: 2078 322c 2027 7371 6575 636c 6964 6561   x2, 'sqeuclidea
+00022790: 6e27 2929 0d0a 2020 2020 2020 2020 6966  n'))..        if
+000227a0: 2067 616d 6d61 2069 7320 4e6f 6e65 3a0d   gamma is None:.
+000227b0: 0a20 2020 2020 2020 2020 2020 2067 616d  .            gam
+000227c0: 6d61 203d 2031 2e30 202f 2078 312e 7368  ma = 1.0 / x1.sh
+000227d0: 6170 655b 315d 0d0a 2020 2020 2020 2020  ape[1]..        
+000227e0: 6469 7374 616e 6365 203d 2028 0d0a 2020  distance = (..  
+000227f0: 2020 2020 2020 2020 2020 6e70 2e73 756d            np.sum
+00022800: 2878 312a 2a32 2c20 3129 2e72 6573 6861  (x1**2, 1).resha
+00022810: 7065 282d 312c 2031 290d 0a20 2020 2020  pe(-1, 1)..     
+00022820: 2020 2020 2020 202b 206e 702e 7375 6d28         + np.sum(
+00022830: 7832 2a2a 322c 2031 290d 0a20 2020 2020  x2**2, 1)..     
+00022840: 2020 2020 2020 202d 2032 202a 206e 702e         - 2 * np.
+00022850: 646f 7428 7831 2c20 7832 2e54 290d 0a20  dot(x1, x2.T).. 
+00022860: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00022870: 2020 7265 7475 726e 206e 702e 6578 7028    return np.exp(
+00022880: 2d67 616d 6d61 202a 2064 6973 7461 6e63  -gamma * distanc
+00022890: 6529 0d0a 0d0a 2020 2020 6465 6620 5f6f  e)....    def _o
+000228a0: 6c64 5f65 7870 6f6e 656e 7469 616c 5f6b  ld_exponential_k
+000228b0: 6572 6e65 6c28 7365 6c66 2c20 7831 2c20  ernel(self, x1, 
+000228c0: 7832 2c20 6761 6d6d 6129 3a0d 0a20 2020  x2, gamma):..   
+000228d0: 2020 2020 2023 206d 656d 6f72 7920 6875       # memory hu
+000228e0: 6e67 7279 0d0a 2020 2020 2020 2020 6469  ngry..        di
+000228f0: 6666 203d 2078 315b 3a2c 206e 702e 6e65  ff = x1[:, np.ne
+00022900: 7761 7869 732c 203a 5d20 2d20 7832 5b6e  waxis, :] - x2[n
+00022910: 702e 6e65 7761 7869 732c 203a 2c20 3a5d  p.newaxis, :, :]
+00022920: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00022930: 206e 702e 6578 7028 2d6e 702e 6162 7328   np.exp(-np.abs(
+00022940: 6469 6666 2920 2f20 6761 6d6d 6129 0d0a  diff) / gamma)..
+00022950: 2020 2020 2020 2020 2320 7265 7475 726e          # return
+00022960: 206e 702e 6578 7028 2d6e 702e 6162 7328   np.exp(-np.abs(
+00022970: 7831 202d 2078 322e 5429 202f 2067 616d  x1 - x2.T) / gam
+00022980: 6d61 290d 0a0d 0a20 2020 2064 6566 205f  ma)....    def _
+00022990: 6578 706f 6e65 6e74 6961 6c5f 6b65 726e  exponential_kern
+000229a0: 656c 2873 656c 662c 2078 312c 2078 322c  el(self, x1, x2,
+000229b0: 2067 616d 6d61 293a 0d0a 2020 2020 2020   gamma):..      
+000229c0: 2020 2320 6c65 7373 206d 656d 6f72 7920    # less memory 
+000229d0: 6875 6e67 7279 0d0a 2020 2020 2020 2020  hungry..        
+000229e0: 7265 7375 6c74 203d 206e 702e 656d 7074  result = np.empt
+000229f0: 7928 2878 312e 7368 6170 655b 305d 2c20  y((x1.shape[0], 
+00022a00: 7832 2e73 6861 7065 5b30 5d29 290d 0a20  x2.shape[0])).. 
+00022a10: 2020 2020 2020 2066 6f72 2069 2c20 7869         for i, xi
+00022a20: 2069 6e20 656e 756d 6572 6174 6528 7831   in enumerate(x1
+00022a30: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00022a40: 6469 6666 203d 206e 702e 6162 7328 7869  diff = np.abs(xi
+00022a50: 202d 2078 3229 0d0a 2020 2020 2020 2020   - x2)..        
+00022a60: 2020 2020 7265 7375 6c74 5b69 2c20 3a5d      result[i, :]
+00022a70: 203d 206e 702e 6578 7028 2d64 6966 662e   = np.exp(-diff.
+00022a80: 7375 6d28 6178 6973 3d31 2920 2f20 6761  sum(axis=1) / ga
+00022a90: 6d6d 6129 0d0a 2020 2020 2020 2020 7265  mma)..        re
+00022aa0: 7475 726e 2072 6573 756c 740d 0a0d 0a20  turn result.... 
+00022ab0: 2020 2064 6566 205f 6f6c 645f 7065 7269     def _old_peri
+00022ac0: 6f64 6963 5f6b 6572 6e65 6c28 7365 6c66  odic_kernel(self
+00022ad0: 2c20 7831 2c20 7832 2c20 6761 6d6d 612c  , x1, x2, gamma,
+00022ae0: 2070 293a 0d0a 2020 2020 2020 2020 7369   p):..        si
+00022af0: 6e5f 7371 203d 206e 702e 7369 6e28 6e70  n_sq = np.sin(np
+00022b00: 2e70 6920 2a20 6e70 2e61 6273 2878 3120  .pi * np.abs(x1 
+00022b10: 2d20 7832 2e54 2920 2f20 7029 202a 2a20  - x2.T) / p) ** 
+00022b20: 320d 0a20 2020 2020 2020 2072 6574 7572  2..        retur
+00022b30: 6e20 6e70 2e65 7870 282d 3220 2a20 7369  n np.exp(-2 * si
+00022b40: 6e5f 7371 202f 2067 616d 6d61 2a2a 3229  n_sq / gamma**2)
+00022b50: 0d0a 0d0a 2020 2020 6465 6620 5f76 6563  ....    def _vec
+00022b60: 5f70 6572 696f 6469 635f 6b65 726e 656c  _periodic_kernel
+00022b70: 2873 656c 662c 2078 312c 2078 322c 2067  (self, x1, x2, g
+00022b80: 616d 6d61 2c20 7029 3a0d 0a20 2020 2020  amma, p):..     
+00022b90: 2020 2064 6966 6620 3d20 7831 5b3a 2c20     diff = x1[:, 
+00022ba0: 6e70 2e6e 6577 6178 6973 2c20 3a5d 202d  np.newaxis, :] -
+00022bb0: 2078 325b 6e70 2e6e 6577 6178 6973 2c20   x2[np.newaxis, 
+00022bc0: 3a2c 203a 5d0d 0a20 2020 2020 2020 2073  :, :]..        s
+00022bd0: 696e 5f73 7120 3d20 6e70 2e73 696e 286e  in_sq = np.sin(n
+00022be0: 702e 7069 202a 206e 702e 6162 7328 6469  p.pi * np.abs(di
+00022bf0: 6666 2920 2f20 7029 202a 2a20 320d 0a20  ff) / p) ** 2.. 
+00022c00: 2020 2020 2020 2072 6574 7572 6e20 6e70         return np
+00022c10: 2e65 7870 282d 3220 2a20 7369 6e5f 7371  .exp(-2 * sin_sq
+00022c20: 202f 2067 616d 6d61 2a2a 3229 0d0a 0d0a   / gamma**2)....
+00022c30: 2020 2020 6465 6620 5f70 6572 696f 6469      def _periodi
+00022c40: 635f 6b65 726e 656c 2873 656c 662c 2078  c_kernel(self, x
+00022c50: 312c 2078 322c 2067 616d 6d61 2c20 7029  1, x2, gamma, p)
+00022c60: 3a0d 0a20 2020 2020 2020 2072 6573 756c  :..        resul
+00022c70: 7420 3d20 6e70 2e65 6d70 7479 2828 7831  t = np.empty((x1
+00022c80: 2e73 6861 7065 5b30 5d2c 2078 322e 7368  .shape[0], x2.sh
+00022c90: 6170 655b 305d 2929 0d0a 2020 2020 2020  ape[0]))..      
+00022ca0: 2020 666f 7220 692c 2078 6920 696e 2065    for i, xi in e
+00022cb0: 6e75 6d65 7261 7465 2878 3129 3a0d 0a20  numerate(x1):.. 
+00022cc0: 2020 2020 2020 2020 2020 2064 6966 6620             diff 
+00022cd0: 3d20 7869 202d 2078 320d 0a20 2020 2020  = xi - x2..     
+00022ce0: 2020 2020 2020 2073 696e 5f73 7120 3d20         sin_sq = 
+00022cf0: 286e 702e 7369 6e28 6e70 2e70 6920 2a20  (np.sin(np.pi * 
+00022d00: 6e70 2e61 6273 2864 6966 6629 202f 2070  np.abs(diff) / p
+00022d10: 2920 2a2a 2032 292e 7375 6d28 6178 6973  ) ** 2).sum(axis
+00022d20: 3d31 290d 0a20 2020 2020 2020 2020 2020  =1)..           
+00022d30: 2072 6573 756c 745b 692c 203a 5d20 3d20   result[i, :] = 
+00022d40: 6e70 2e65 7870 282d 3220 2a20 7369 6e5f  np.exp(-2 * sin_
+00022d50: 7371 202f 2067 616d 6d61 2a2a 3229 0d0a  sq / gamma**2)..
+00022d60: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00022d70: 6573 756c 740d 0a0d 0a20 2020 2064 6566  esult....    def
+00022d80: 205f 6f6c 645f 6c6f 6361 6c6c 795f 7065   _old_locally_pe
+00022d90: 7269 6f64 6963 5f6b 6572 6e65 6c28 7365  riodic_kernel(se
+00022da0: 6c66 2c20 7831 2c20 7832 2c20 6761 6d6d  lf, x1, x2, gamm
+00022db0: 612c 206c 616d 6264 615f 7072 696d 652c  a, lambda_prime,
+00022dc0: 2070 293a 0d0a 2020 2020 2020 2020 7262   p):..        rb
+00022dd0: 665f 7061 7274 203d 206e 702e 6578 7028  f_part = np.exp(
+00022de0: 0d0a 2020 2020 2020 2020 2020 2020 2d28  ..            -(
+00022df0: 2878 3120 2d20 7832 2920 2a2a 2032 2920  (x1 - x2) ** 2) 
+00022e00: 2f20 2832 202a 2067 616d 6d61 2a2a 3229  / (2 * gamma**2)
+00022e10: 0d0a 2020 2020 2020 2020 2920 2023 2020  ..        )  #  
+00022e20: 6f6c 643a 206e 702e 6578 7028 2d28 2878  old: np.exp(-((x
+00022e30: 3120 2d20 7832 2e54 2920 2a2a 2032 2920  1 - x2.T) ** 2) 
+00022e40: 2f20 2832 202a 2067 616d 6d61 2a2a 3229  / (2 * gamma**2)
+00022e50: 290d 0a20 2020 2020 2020 2070 6572 696f  )..        perio
+00022e60: 6469 635f 7061 7274 203d 2073 656c 662e  dic_part = self.
+00022e70: 5f70 6572 696f 6469 635f 6b65 726e 656c  _periodic_kernel
+00022e80: 2878 312c 2078 322c 206c 616d 6264 615f  (x1, x2, lambda_
+00022e90: 7072 696d 652c 2070 290d 0a20 2020 2020  prime, p)..     
+00022ea0: 2020 2072 6574 7572 6e20 7262 665f 7061     return rbf_pa
+00022eb0: 7274 202a 2070 6572 696f 6469 635f 7061  rt * periodic_pa
+00022ec0: 7274 0d0a 0d0a 2020 2020 6465 6620 5f6c  rt....    def _l
+00022ed0: 6f63 616c 6c79 5f70 6572 696f 6469 635f  ocally_periodic_
+00022ee0: 6b65 726e 656c 2873 656c 662c 2078 312c  kernel(self, x1,
+00022ef0: 2078 322c 2067 616d 6d61 2c20 6c61 6d62   x2, gamma, lamb
+00022f00: 6461 5f70 7269 6d65 2c20 7029 3a0d 0a20  da_prime, p):.. 
+00022f10: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00022f20: 6e70 2e65 6d70 7479 2828 7831 2e73 6861  np.empty((x1.sha
+00022f30: 7065 5b30 5d2c 2078 322e 7368 6170 655b  pe[0], x2.shape[
+00022f40: 305d 2929 0d0a 2020 2020 2020 2020 666f  0]))..        fo
+00022f50: 7220 692c 2078 6920 696e 2065 6e75 6d65  r i, xi in enume
+00022f60: 7261 7465 2878 3129 3a0d 0a20 2020 2020  rate(x1):..     
+00022f70: 2020 2020 2020 2064 6966 6620 3d20 7869         diff = xi
+00022f80: 202d 2078 320d 0a20 2020 2020 2020 2020   - x2..         
+00022f90: 2020 2072 6266 5f70 6172 7420 3d20 6e70     rbf_part = np
+00022fa0: 2e65 7870 282d 6e70 2e73 756d 2864 6966  .exp(-np.sum(dif
+00022fb0: 662a 2a32 2c20 6178 6973 3d31 2920 2f20  f**2, axis=1) / 
+00022fc0: 2832 202a 2067 616d 6d61 2a2a 3229 290d  (2 * gamma**2)).
+00022fd0: 0a20 2020 2020 2020 2020 2020 2073 696e  .            sin
+00022fe0: 5f73 7120 3d20 286e 702e 7369 6e28 6e70  _sq = (np.sin(np
+00022ff0: 2e70 6920 2a20 6e70 2e61 6273 2864 6966  .pi * np.abs(dif
+00023000: 6629 202f 2070 2920 2a2a 2032 292e 7375  f) / p) ** 2).su
+00023010: 6d28 6178 6973 3d31 290d 0a20 2020 2020  m(axis=1)..     
+00023020: 2020 2020 2020 2070 6572 696f 6469 635f         periodic_
+00023030: 7061 7274 203d 206e 702e 6578 7028 2d32  part = np.exp(-2
+00023040: 202a 2073 696e 5f73 7120 2f20 6761 6d6d   * sin_sq / gamm
+00023050: 612a 2a32 290d 0a20 2020 2020 2020 2020  a**2)..         
+00023060: 2020 2072 6573 756c 745b 692c 203a 5d20     result[i, :] 
+00023070: 3d20 7262 665f 7061 7274 202a 2070 6572  = rbf_part * per
+00023080: 696f 6469 635f 7061 7274 0d0a 2020 2020  iodic_part..    
+00023090: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+000230a0: 740d 0a0d 0a20 2020 2064 6566 2066 6974  t....    def fit
+000230b0: 2873 656c 662c 2058 2c20 5929 3a0d 0a20  (self, X, Y):.. 
+000230c0: 2020 2020 2020 2073 656c 662e 585f 7472         self.X_tr
+000230d0: 6169 6e20 3d20 6e70 2e61 7361 7272 6179  ain = np.asarray
+000230e0: 2858 290d 0a0d 0a20 2020 2020 2020 2069  (X)....        i
+000230f0: 6620 7365 6c66 2e6b 6572 6e65 6c20 3d3d  f self.kernel ==
+00023100: 2027 6c69 6e65 6172 273a 0d0a 2020 2020   'linear':..    
+00023110: 2020 2020 2020 2020 4b20 3d20 7365 6c66          K = self
+00023120: 2e5f 6c69 6e65 6172 5f6b 6572 6e65 6c28  ._linear_kernel(
+00023130: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
+00023140: 6c66 2e58 5f74 7261 696e 290d 0a20 2020  lf.X_train)..   
+00023150: 2020 2020 2065 6c69 6620 7365 6c66 2e6b       elif self.k
+00023160: 6572 6e65 6c20 3d3d 2027 706f 6c79 6e6f  ernel == 'polyno
+00023170: 6d69 616c 273a 0d0a 2020 2020 2020 2020  mial':..        
+00023180: 2020 2020 4b20 3d20 7365 6c66 2e5f 706f      K = self._po
+00023190: 6c79 6e6f 6d69 616c 5f6b 6572 6e65 6c28  lynomial_kernel(
+000231a0: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
+000231b0: 6c66 2e58 5f74 7261 696e 290d 0a20 2020  lf.X_train)..   
+000231c0: 2020 2020 2065 6c69 6620 7365 6c66 2e6b       elif self.k
+000231d0: 6572 6e65 6c20 3d3d 2027 7262 6627 3a0d  ernel == 'rbf':.
+000231e0: 0a20 2020 2020 2020 2020 2020 204b 203d  .            K =
+000231f0: 2073 656c 662e 5f72 6266 5f6b 6572 6e65   self._rbf_kerne
+00023200: 6c28 7365 6c66 2e58 5f74 7261 696e 2c20  l(self.X_train, 
+00023210: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
+00023220: 6c66 2e67 616d 6d61 290d 0a20 2020 2020  lf.gamma)..     
+00023230: 2020 2065 6c69 6620 7365 6c66 2e6b 6572     elif self.ker
+00023240: 6e65 6c20 3d3d 2027 6578 706f 6e65 6e74  nel == 'exponent
+00023250: 6961 6c27 3a0d 0a20 2020 2020 2020 2020  ial':..         
+00023260: 2020 204b 203d 2073 656c 662e 5f65 7870     K = self._exp
+00023270: 6f6e 656e 7469 616c 5f6b 6572 6e65 6c28  onential_kernel(
+00023280: 7365 6c66 2e58 5f74 7261 696e 2c20 7365  self.X_train, se
+00023290: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
+000232a0: 2e67 616d 6d61 290d 0a20 2020 2020 2020  .gamma)..       
+000232b0: 2065 6c69 6620 7365 6c66 2e6b 6572 6e65   elif self.kerne
+000232c0: 6c20 3d3d 2027 7065 7269 6f64 6963 273a  l == 'periodic':
+000232d0: 0d0a 2020 2020 2020 2020 2020 2020 4b20  ..            K 
+000232e0: 3d20 7365 6c66 2e5f 7065 7269 6f64 6963  = self._periodic
+000232f0: 5f6b 6572 6e65 6c28 7365 6c66 2e58 5f74  _kernel(self.X_t
+00023300: 7261 696e 2c20 7365 6c66 2e58 5f74 7261  rain, self.X_tra
+00023310: 696e 2c20 7365 6c66 2e67 616d 6d61 2c20  in, self.gamma, 
+00023320: 7365 6c66 2e70 290d 0a20 2020 2020 2020  self.p)..       
+00023330: 2065 6c69 6620 7365 6c66 2e6b 6572 6e65   elif self.kerne
+00023340: 6c20 3d3d 2027 6c6f 6361 6c6c 795f 7065  l == 'locally_pe
+00023350: 7269 6f64 6963 273a 0d0a 2020 2020 2020  riodic':..      
+00023360: 2020 2020 2020 4b20 3d20 7365 6c66 2e5f        K = self._
+00023370: 6c6f 6361 6c6c 795f 7065 7269 6f64 6963  locally_periodic
+00023380: 5f6b 6572 6e65 6c28 0d0a 2020 2020 2020  _kernel(..      
+00023390: 2020 2020 2020 2020 2020 7365 6c66 2e58            self.X
+000233a0: 5f74 7261 696e 2c20 7365 6c66 2e58 5f74  _train, self.X_t
+000233b0: 7261 696e 2c20 7365 6c66 2e67 616d 6d61  rain, self.gamma
+000233c0: 2c20 7365 6c66 2e6c 616d 6264 615f 7072  , self.lambda_pr
+000233d0: 696d 652c 2073 656c 662e 700d 0a20 2020  ime, self.p..   
+000233e0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+000233f0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00023400: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00023410: 7565 4572 726f 7228 2249 6e76 616c 6964  ueError("Invalid
+00023420: 204b 6572 6e65 6c22 290d 0a0d 0a20 2020   Kernel")....   
+00023430: 2020 2020 2023 2052 6567 756c 6172 697a       # Regulariz
+00023440: 6564 204b 6572 6e65 6c0d 0a20 2020 2020  ed Kernel..     
+00023450: 2020 2023 204b 5f72 6567 203d 204b 202b     # K_reg = K +
+00023460: 2073 656c 662e 6e6f 6973 655f 7661 7220   self.noise_var 
+00023470: 2a20 6e70 2e65 7965 284b 2e73 6861 7065  * np.eye(K.shape
+00023480: 5b30 5d29 0d0a 2020 2020 2020 2020 6e70  [0])..        np
+00023490: 2e66 696c 6c5f 6469 6167 6f6e 616c 284b  .fill_diagonal(K
+000234a0: 2c20 6e70 2e64 6961 6728 4b29 202b 2073  , np.diag(K) + s
+000234b0: 656c 662e 6e6f 6973 655f 7661 7229 0d0a  elf.noise_var)..
+000234c0: 0d0a 2020 2020 2020 2020 2320 4368 6f6c  ..        # Chol
+000234d0: 6573 6b79 2064 6563 6f6d 706f 7369 7469  esky decompositi
+000234e0: 6f6e 2061 6e64 2073 6f6c 7665 2066 6f72  on and solve for
+000234f0: 2061 6c70 6861 2069 6e20 6120 7665 6374   alpha in a vect
+00023500: 6f72 697a 6564 2077 6179 0d0a 2020 2020  orized way..    
+00023510: 2020 2020 6966 2046 616c 7365 3a0d 0a20      if False:.. 
+00023520: 2020 2020 2020 2020 2020 2066 726f 6d20             from 
+00023530: 7363 6970 792e 7370 6172 7365 2e6c 696e  scipy.sparse.lin
+00023540: 616c 6720 696d 706f 7274 2063 670d 0a0d  alg import cg...
+00023550: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00023560: 662e 616c 7068 612c 205f 203d 2063 6728  f.alpha, _ = cg(
+00023570: 4b2c 206e 702e 6173 6172 7261 7928 5929  K, np.asarray(Y)
+00023580: 2920 2023 205f 2063 6170 7475 7265 7320  )  # _ captures 
+00023590: 696e 666f 2061 626f 7574 2063 6f6e 7665  info about conve
+000235a0: 7267 656e 6365 0d0a 2020 2020 2020 2020  rgence..        
+000235b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000235c0: 2020 2073 656c 662e 4c20 3d20 6e70 2e6c     self.L = np.l
+000235d0: 696e 616c 672e 6368 6f6c 6573 6b79 284b  inalg.cholesky(K
+000235e0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+000235f0: 656c 662e 616c 7068 6120 3d20 6e70 2e6c  elf.alpha = np.l
+00023600: 696e 616c 672e 736f 6c76 6528 0d0a 2020  inalg.solve(..  
+00023610: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00023620: 6c66 2e4c 2e54 2c20 6e70 2e6c 696e 616c  lf.L.T, np.linal
+00023630: 672e 736f 6c76 6528 7365 6c66 2e4c 2c20  g.solve(self.L, 
+00023640: 6e70 2e61 7361 7272 6179 2859 2929 0d0a  np.asarray(Y))..
+00023650: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+00023660: 2020 2020 2020 2064 656c 204b 0d0a 2020         del K..  
+00023670: 2020 2020 2020 2320 5265 6775 6c61 7269        # Regulari
+00023680: 7a65 6420 4b65 726e 656c 0d0a 2020 2020  zed Kernel..    
+00023690: 2020 2020 7265 7475 726e 2073 656c 660d      return self.
+000236a0: 0a0d 0a20 2020 2064 6566 2070 7265 6469  ...    def predi
+000236b0: 6374 2873 656c 662c 2058 293a 0d0a 2020  ct(self, X):..  
+000236c0: 2020 2020 2020 785f 7072 6564 203d 206e        x_pred = n
+000236d0: 702e 6173 6172 7261 7928 5829 0d0a 2020  p.asarray(X)..  
+000236e0: 2020 2020 2020 6966 2073 656c 662e 6b65        if self.ke
+000236f0: 726e 656c 203d 3d20 276c 696e 6561 7227  rnel == 'linear'
+00023700: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00023710: 203d 2073 656c 662e 5f6c 696e 6561 725f   = self._linear_
+00023720: 6b65 726e 656c 2878 5f70 7265 642c 2073  kernel(x_pred, s
+00023730: 656c 662e 585f 7472 6169 6e29 0d0a 2020  elf.X_train)..  
+00023740: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+00023750: 6b65 726e 656c 203d 3d20 2770 6f6c 796e  kernel == 'polyn
+00023760: 6f6d 6961 6c27 3a0d 0a20 2020 2020 2020  omial':..       
+00023770: 2020 2020 206b 203d 2073 656c 662e 5f70       k = self._p
+00023780: 6f6c 796e 6f6d 6961 6c5f 6b65 726e 656c  olynomial_kernel
+00023790: 2878 5f70 7265 642c 2073 656c 662e 585f  (x_pred, self.X_
+000237a0: 7472 6169 6e29 0d0a 2020 2020 2020 2020  train)..        
+000237b0: 656c 6966 2073 656c 662e 6b65 726e 656c  elif self.kernel
+000237c0: 203d 3d20 2772 6266 273a 0d0a 2020 2020   == 'rbf':..    
+000237d0: 2020 2020 2020 2020 6b20 3d20 7365 6c66          k = self
+000237e0: 2e5f 7262 665f 6b65 726e 656c 2878 5f70  ._rbf_kernel(x_p
+000237f0: 7265 642c 2073 656c 662e 585f 7472 6169  red, self.X_trai
+00023800: 6e2c 2073 656c 662e 6761 6d6d 6129 0d0a  n, self.gamma)..
+00023810: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+00023820: 662e 6b65 726e 656c 203d 3d20 2765 7870  f.kernel == 'exp
+00023830: 6f6e 656e 7469 616c 273a 0d0a 2020 2020  onential':..    
+00023840: 2020 2020 2020 2020 6b20 3d20 7365 6c66          k = self
+00023850: 2e5f 6578 706f 6e65 6e74 6961 6c5f 6b65  ._exponential_ke
+00023860: 726e 656c 2878 5f70 7265 642c 2073 656c  rnel(x_pred, sel
+00023870: 662e 585f 7472 6169 6e2c 2073 656c 662e  f.X_train, self.
+00023880: 6761 6d6d 6129 0d0a 2020 2020 2020 2020  gamma)..        
+00023890: 656c 6966 2073 656c 662e 6b65 726e 656c  elif self.kernel
+000238a0: 203d 3d20 2770 6572 696f 6469 6327 3a0d   == 'periodic':.
+000238b0: 0a20 2020 2020 2020 2020 2020 206b 203d  .            k =
+000238c0: 2073 656c 662e 5f70 6572 696f 6469 635f   self._periodic_
+000238d0: 6b65 726e 656c 2878 5f70 7265 642c 2073  kernel(x_pred, s
+000238e0: 656c 662e 585f 7472 6169 6e2c 2073 656c  elf.X_train, sel
+000238f0: 662e 6761 6d6d 612c 2073 656c 662e 7029  f.gamma, self.p)
+00023900: 0d0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
+00023910: 656c 662e 6b65 726e 656c 203d 3d20 276c  elf.kernel == 'l
+00023920: 6f63 616c 6c79 5f70 6572 696f 6469 6327  ocally_periodic'
+00023930: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00023940: 203d 2073 656c 662e 5f6c 6f63 616c 6c79   = self._locally
+00023950: 5f70 6572 696f 6469 635f 6b65 726e 656c  _periodic_kernel
+00023960: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00023970: 2020 2078 5f70 7265 642c 2073 656c 662e     x_pred, self.
+00023980: 585f 7472 6169 6e2c 2073 656c 662e 6761  X_train, self.ga
+00023990: 6d6d 612c 2073 656c 662e 6c61 6d62 6461  mma, self.lambda
+000239a0: 5f70 7269 6d65 2c20 7365 6c66 2e70 0d0a  _prime, self.p..
+000239b0: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
+000239c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000239d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000239e0: 5661 6c75 6545 7272 6f72 2822 496e 7661  ValueError("Inva
+000239f0: 6c69 6420 4b65 726e 656c 2229 0d0a 0d0a  lid Kernel")....
+00023a00: 2020 2020 2020 2020 2320 4d61 6b69 6e67          # Making
+00023a10: 2070 7265 6469 6374 696f 6e73 0d0a 2020   predictions..  
+00023a20: 2020 2020 2020 595f 7072 6564 203d 206b        Y_pred = k
+00023a30: 2040 2073 656c 662e 616c 7068 610d 0a0d   @ self.alpha...
+00023a40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00023a50: 595f 7072 6564 0d0a 0d0a 2020 2020 6465  Y_pred....    de
+00023a60: 6620 7072 6564 6963 745f 7072 6f62 6128  f predict_proba(
+00023a70: 7365 6c66 2c20 5829 3a0d 0a20 2020 2020  self, X):..     
+00023a80: 2020 2078 5f70 7265 6420 3d20 6e70 2e61     x_pred = np.a
+00023a90: 7361 7272 6179 2858 290d 0a20 2020 2020  sarray(X)..     
+00023aa0: 2020 2069 6620 7365 6c66 2e6b 6572 6e65     if self.kerne
+00023ab0: 6c20 3d3d 2027 6c69 6e65 6172 273a 0d0a  l == 'linear':..
+00023ac0: 2020 2020 2020 2020 2020 2020 6b5f 7374              k_st
+00023ad0: 6172 203d 2073 656c 662e 5f6c 696e 6561  ar = self._linea
+00023ae0: 725f 6b65 726e 656c 2878 5f70 7265 642c  r_kernel(x_pred,
+00023af0: 2073 656c 662e 585f 7472 6169 6e29 0d0a   self.X_train)..
+00023b00: 2020 2020 2020 2020 2020 2020 6b5f 7374              k_st
+00023b10: 6172 5f73 7461 7220 3d20 6e70 2e64 6961  ar_star = np.dia
+00023b20: 6728 7365 6c66 2e5f 6c69 6e65 6172 5f6b  g(self._linear_k
+00023b30: 6572 6e65 6c28 785f 7072 6564 2c20 7365  ernel(x_pred, se
+00023b40: 6c66 2e58 5f74 7261 696e 2929 0d0a 2020  lf.X_train))..  
+00023b50: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+00023b60: 6b65 726e 656c 203d 3d20 2770 6f6c 796e  kernel == 'polyn
+00023b70: 6f6d 6961 6c27 3a0d 0a20 2020 2020 2020  omial':..       
+00023b80: 2020 2020 206b 5f73 7461 7220 3d20 7365       k_star = se
+00023b90: 6c66 2e5f 706f 6c79 6e6f 6d69 616c 5f6b  lf._polynomial_k
+00023ba0: 6572 6e65 6c28 785f 7072 6564 2c20 7365  ernel(x_pred, se
+00023bb0: 6c66 2e58 5f74 7261 696e 290d 0a20 2020  lf.X_train)..   
+00023bc0: 2020 2020 2020 2020 206b 5f73 7461 725f           k_star_
+00023bd0: 7374 6172 203d 206e 702e 6469 6167 2873  star = np.diag(s
+00023be0: 656c 662e 5f70 6f6c 796e 6f6d 6961 6c5f  elf._polynomial_
+00023bf0: 6b65 726e 656c 2878 5f70 7265 642c 2073  kernel(x_pred, s
+00023c00: 656c 662e 585f 7472 6169 6e29 290d 0a20  elf.X_train)).. 
+00023c10: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+00023c20: 2e6b 6572 6e65 6c20 3d3d 2027 7262 6627  .kernel == 'rbf'
+00023c30: 3a0d 0a20 2020 2020 2020 2020 2020 206b  :..            k
+00023c40: 5f73 7461 7220 3d20 7365 6c66 2e5f 7262  _star = self._rb
+00023c50: 665f 6b65 726e 656c 2878 5f70 7265 642c  f_kernel(x_pred,
+00023c60: 2073 656c 662e 585f 7472 6169 6e2c 2073   self.X_train, s
+00023c70: 656c 662e 6761 6d6d 6129 0d0a 2020 2020  elf.gamma)..    
+00023c80: 2020 2020 2020 2020 6b5f 7374 6172 5f73          k_star_s
+00023c90: 7461 7220 3d20 6e70 2e64 6961 6728 7365  tar = np.diag(se
+00023ca0: 6c66 2e5f 7262 665f 6b65 726e 656c 2878  lf._rbf_kernel(x
+00023cb0: 5f70 7265 642c 2073 656c 662e 585f 7472  _pred, self.X_tr
+00023cc0: 6169 6e2c 2073 656c 662e 6761 6d6d 6129  ain, self.gamma)
+00023cd0: 290d 0a0d 0a20 2020 2020 2020 2065 6c69  )....        eli
+00023ce0: 6620 7365 6c66 2e6b 6572 6e65 6c20 3d3d  f self.kernel ==
+00023cf0: 2027 6578 706f 6e65 6e74 6961 6c27 3a0d   'exponential':.
+00023d00: 0a20 2020 2020 2020 2020 2020 206b 5f73  .            k_s
+00023d10: 7461 7220 3d20 7365 6c66 2e5f 6578 706f  tar = self._expo
+00023d20: 6e65 6e74 6961 6c5f 6b65 726e 656c 2858  nential_kernel(X
+00023d30: 2c20 7365 6c66 2e58 5f74 7261 696e 2c20  , self.X_train, 
+00023d40: 7365 6c66 2e67 616d 6d61 290d 0a20 2020  self.gamma)..   
+00023d50: 2020 2020 2020 2020 206b 5f73 7461 725f           k_star_
+00023d60: 7374 6172 203d 206e 702e 6469 6167 280d  star = np.diag(.
+00023d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023d80: 2073 656c 662e 5f65 7870 6f6e 656e 7469   self._exponenti
+00023d90: 616c 5f6b 6572 6e65 6c28 785f 7072 6564  al_kernel(x_pred
+00023da0: 2c20 7365 6c66 2e58 5f74 7261 696e 2c20  , self.X_train, 
+00023db0: 7365 6c66 2e67 616d 6d61 290d 0a20 2020  self.gamma)..   
+00023dc0: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00023dd0: 2020 2020 656c 6966 2073 656c 662e 6b65      elif self.ke
+00023de0: 726e 656c 203d 3d20 2770 6572 696f 6469  rnel == 'periodi
+00023df0: 6327 3a0d 0a20 2020 2020 2020 2020 2020  c':..           
+00023e00: 206b 5f73 7461 7220 3d20 7365 6c66 2e5f   k_star = self._
+00023e10: 7065 7269 6f64 6963 5f6b 6572 6e65 6c28  periodic_kernel(
+00023e20: 582c 2073 656c 662e 585f 7472 6169 6e2c  X, self.X_train,
+00023e30: 2073 656c 662e 6761 6d6d 612c 2073 656c   self.gamma, sel
+00023e40: 662e 7029 0d0a 2020 2020 2020 2020 2020  f.p)..          
+00023e50: 2020 6b5f 7374 6172 5f73 7461 7220 3d20    k_star_star = 
+00023e60: 6e70 2e64 6961 6728 0d0a 2020 2020 2020  np.diag(..      
+00023e70: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00023e80: 7065 7269 6f64 6963 5f6b 6572 6e65 6c28  periodic_kernel(
+00023e90: 785f 7072 6564 2c20 7365 6c66 2e58 5f74  x_pred, self.X_t
+00023ea0: 7261 696e 2c20 7365 6c66 2e67 616d 6d61  rain, self.gamma
+00023eb0: 2c20 7365 6c66 2e6c 616d 6264 615f 290d  , self.lambda_).
+00023ec0: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00023ed0: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+00023ee0: 662e 6b65 726e 656c 203d 3d20 276c 6f63  f.kernel == 'loc
+00023ef0: 616c 6c79 5f70 6572 696f 6469 6327 3a0d  ally_periodic':.
+00023f00: 0a20 2020 2020 2020 2020 2020 206b 5f73  .            k_s
+00023f10: 7461 7220 3d20 7365 6c66 2e5f 6c6f 6361  tar = self._loca
+00023f20: 6c6c 795f 7065 7269 6f64 6963 5f6b 6572  lly_periodic_ker
+00023f30: 6e65 6c28 0d0a 2020 2020 2020 2020 2020  nel(..          
+00023f40: 2020 2020 2020 785f 7072 6564 2c20 7365        x_pred, se
+00023f50: 6c66 2e58 5f74 7261 696e 2c20 7365 6c66  lf.X_train, self
+00023f60: 2e67 616d 6d61 2c20 7365 6c66 2e6c 616d  .gamma, self.lam
+00023f70: 6264 615f 7072 696d 652c 2073 656c 662e  bda_prime, self.
+00023f80: 700d 0a20 2020 2020 2020 2020 2020 2029  p..            )
+00023f90: 0d0a 2020 2020 2020 2020 2020 2020 6b5f  ..            k_
+00023fa0: 7374 6172 5f73 7461 7220 3d20 6e70 2e64  star_star = np.d
+00023fb0: 6961 6728 0d0a 2020 2020 2020 2020 2020  iag(..          
+00023fc0: 2020 2020 2020 7365 6c66 2e5f 6c6f 6361        self._loca
+00023fd0: 6c6c 795f 7065 7269 6f64 6963 5f6b 6572  lly_periodic_ker
+00023fe0: 6e65 6c28 0d0a 2020 2020 2020 2020 2020  nel(..          
+00023ff0: 2020 2020 2020 2020 2020 785f 7072 6564            x_pred
+00024000: 2c20 7365 6c66 2e58 5f74 7261 696e 2c20  , self.X_train, 
+00024010: 7365 6c66 2e67 616d 6d61 2c20 7365 6c66  self.gamma, self
+00024020: 2e6c 616d 6264 615f 7072 696d 652c 2073  .lambda_prime, s
+00024030: 656c 662e 700d 0a20 2020 2020 2020 2020  elf.p..         
+00024040: 2020 2020 2020 2029 0d0a 2020 2020 2020         )..      
+00024050: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+00024060: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00024070: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00024080: 7272 6f72 2822 496e 7661 6c69 6420 4b65  rror("Invalid Ke
+00024090: 726e 656c 2229 0d0a 0d0a 2020 2020 2020  rnel")....      
+000240a0: 2020 2320 4d61 6b69 6e67 2070 7265 6469    # Making predi
+000240b0: 6374 696f 6e73 0d0a 2020 2020 2020 2020  ctions..        
+000240c0: 595f 7072 6564 203d 206b 5f73 7461 7220  Y_pred = k_star 
+000240d0: 4020 7365 6c66 2e61 6c70 6861 0d0a 0d0a  @ self.alpha....
+000240e0: 2020 2020 2020 2020 2320 436f 6d70 7574          # Comput
+000240f0: 696e 6720 7468 6520 7072 6564 6963 7469  ing the predicti
+00024100: 7665 2076 6172 6961 6e63 6520 666f 7220  ve variance for 
+00024110: 6561 6368 2074 6573 7420 706f 696e 7420  each test point 
+00024120: 616e 6420 6561 6368 206f 7574 7075 740d  and each output.
+00024130: 0a20 2020 2020 2020 2076 203d 206e 702e  .        v = np.
+00024140: 6c69 6e61 6c67 2e73 6f6c 7665 2873 656c  linalg.solve(sel
+00024150: 662e 4c2c 206b 5f73 7461 722e 5429 0d0a  f.L, k_star.T)..
+00024160: 2020 2020 2020 2020 595f 7661 7220 3d20          Y_var = 
+00024170: 6b5f 7374 6172 5f73 7461 7220 2d20 6e70  k_star_star - np
+00024180: 2e73 756d 2876 2a2a 322c 2061 7869 733d  .sum(v**2, axis=
+00024190: 3029 0d0a 0d0a 2020 2020 2020 2020 7265  0)....        re
+000241a0: 7475 726e 2059 5f70 7265 642c 2059 5f76  turn Y_pred, Y_v
+000241b0: 6172 0d0a 0d0a 0d0a 636c 6173 7320 5072  ar......class Pr
+000241c0: 6570 726f 6365 7373 696e 6752 6567 7265  eprocessingRegre
+000241d0: 7373 696f 6e28 4d6f 6465 6c4f 626a 6563  ssion(ModelObjec
+000241e0: 7429 3a0d 0a20 2020 2022 2222 5265 6772  t):..    """Regr
+000241f0: 6573 7369 6f6e 2075 7365 2074 6865 206c  ession use the l
+00024200: 6173 7420 6e20 7661 6c75 6573 2061 7320  ast n values as 
+00024210: 7468 6520 6261 7369 7320 6f66 2074 7261  the basis of tra
+00024220: 696e 696e 6720 6461 7461 2e0d 0a0d 0a20  ining data..... 
+00024230: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+00024240: 2020 6e61 6d65 2028 7374 7229 3a20 5374    name (str): St
+00024250: 7269 6e67 2074 6f20 6964 656e 7469 6679  ring to identify
+00024260: 2063 6c61 7373 0d0a 2020 2020 2020 2020   class..        
+00024270: 6672 6571 7565 6e63 7920 2873 7472 293a  frequency (str):
+00024280: 2053 7472 696e 6720 616c 6961 7320 6f66   String alias of
+00024290: 2064 6174 6574 696d 6520 696e 6465 7820   datetime index 
+000242a0: 6672 6571 7565 6e63 7920 6f72 2065 6c73  frequency or els
+000242b0: 6520 2769 6e66 6572 270d 0a20 2020 2020  e 'infer'..     
+000242c0: 2020 2070 7265 6469 6374 696f 6e5f 696e     prediction_in
+000242d0: 7465 7276 616c 2028 666c 6f61 7429 3a20  terval (float): 
+000242e0: 436f 6e66 6964 656e 6365 2069 6e74 6572  Confidence inter
+000242f0: 7661 6c20 666f 7220 7072 6f62 6162 696c  val for probabil
+00024300: 6973 7469 6320 666f 7265 6361 7374 0d0a  istic forecast..
+00024310: 2020 2020 2020 2020 2320 7265 6772 6573          # regres
+00024320: 7369 6f6e 5f74 7970 653a 2073 7472 203d  sion_type: str =
+00024330: 204e 6f6e 652c 0d0a 2020 2020 2222 220d   None,..    """.
+00024340: 0a0d 0a20 2020 2064 6566 205f 5f69 6e69  ...    def __ini
+00024350: 745f 5f28 0d0a 2020 2020 2020 2020 7365  t__(..        se
+00024360: 6c66 2c0d 0a20 2020 2020 2020 206e 616d  lf,..        nam
+00024370: 653a 2073 7472 203d 2022 5072 6570 726f  e: str = "Prepro
+00024380: 6365 7373 696e 6752 6567 7265 7373 696f  cessingRegressio
+00024390: 6e22 2c0d 0a20 2020 2020 2020 2066 7265  n",..        fre
+000243a0: 7175 656e 6379 3a20 7374 7220 3d20 2769  quency: str = 'i
+000243b0: 6e66 6572 272c 0d0a 2020 2020 2020 2020  nfer',..        
+000243c0: 7072 6564 6963 7469 6f6e 5f69 6e74 6572  prediction_inter
+000243d0: 7661 6c3a 2066 6c6f 6174 203d 2030 2e39  val: float = 0.9
+000243e0: 2c0d 0a20 2020 2020 2020 2068 6f6c 6964  ,..        holid
+000243f0: 6179 5f63 6f75 6e74 7279 3a20 7374 7220  ay_country: str 
+00024400: 3d20 2755 5327 2c0d 0a20 2020 2020 2020  = 'US',..       
+00024410: 2072 616e 646f 6d5f 7365 6564 3a20 696e   random_seed: in
+00024420: 7420 3d20 3230 3233 2c0d 0a20 2020 2020  t = 2023,..     
+00024430: 2020 2076 6572 626f 7365 3a20 696e 7420     verbose: int 
+00024440: 3d20 302c 0d0a 2020 2020 2020 2020 7769  = 0,..        wi
+00024450: 6e64 6f77 5f73 697a 653a 2069 6e74 203d  ndow_size: int =
+00024460: 2031 302c 0d0a 2020 2020 2020 2020 7265   10,..        re
+00024470: 6772 6573 7369 6f6e 5f6d 6f64 656c 3a20  gression_model: 
+00024480: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
+00024490: 2020 2020 2020 226d 6f64 656c 223a 2027        "model": '
+000244a0: 5261 6e64 6f6d 466f 7265 7374 272c 0d0a  RandomForest',..
+000244b0: 2020 2020 2020 2020 2020 2020 226d 6f64              "mod
+000244c0: 656c 5f70 6172 616d 7322 3a20 7b7d 2c0d  el_params": {},.
+000244d0: 0a20 2020 2020 2020 207d 2c0d 0a20 2020  .        },..   
+000244e0: 2020 2020 2074 7261 6e73 666f 726d 6174       transformat
+000244f0: 696f 6e5f 6469 6374 3d4e 6f6e 652c 0d0a  ion_dict=None,..
+00024500: 2020 2020 2020 2020 6d61 785f 6869 7374          max_hist
+00024510: 6f72 793a 2069 6e74 203d 204e 6f6e 652c  ory: int = None,
+00024520: 0d0a 2020 2020 2020 2020 6f6e 655f 7374  ..        one_st
+00024530: 6570 3a20 626f 6f6c 203d 2046 616c 7365  ep: bool = False
+00024540: 2c0d 0a20 2020 2020 2020 2070 726f 6365  ,..        proce
+00024550: 7373 6564 5f79 3a20 626f 6f6c 203d 2046  ssed_y: bool = F
+00024560: 616c 7365 2c0d 0a20 2020 2020 2020 206e  alse,..        n
+00024570: 6f72 6d61 6c69 7a65 5f77 696e 646f 773a  ormalize_window:
+00024580: 2062 6f6f 6c20 3d20 4661 6c73 652c 0d0a   bool = False,..
+00024590: 2020 2020 2020 2020 6461 7465 7061 7274          datepart
+000245a0: 5f6d 6574 686f 643a 2073 7472 203d 2022  _method: str = "
+000245b0: 636f 6d6d 6f6e 5f66 6f75 7269 6572 222c  common_fourier",
+000245c0: 0d0a 2020 2020 2020 2020 666f 7265 6361  ..        foreca
+000245d0: 7374 5f6c 656e 6774 683a 2069 6e74 203d  st_length: int =
+000245e0: 2032 382c 0d0a 2020 2020 2020 2020 7265   28,..        re
+000245f0: 6772 6573 7369 6f6e 5f74 7970 653a 2073  gression_type: s
+00024600: 7472 203d 204e 6f6e 652c 0d0a 2020 2020  tr = None,..    
+00024610: 2020 2020 6e5f 6a6f 6273 3a20 696e 7420      n_jobs: int 
+00024620: 3d20 2d31 2c0d 0a20 2020 2020 2020 202a  = -1,..        *
+00024630: 2a6b 7761 7267 732c 0d0a 2020 2020 293a  *kwargs,..    ):
+00024640: 0d0a 2020 2020 2020 2020 4d6f 6465 6c4f  ..        ModelO
+00024650: 626a 6563 742e 5f5f 696e 6974 5f5f 280d  bject.__init__(.
+00024660: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00024670: 662c 0d0a 2020 2020 2020 2020 2020 2020  f,..            
+00024680: 6e61 6d65 2c0d 0a20 2020 2020 2020 2020  name,..         
+00024690: 2020 2066 7265 7175 656e 6379 2c0d 0a20     frequency,.. 
+000246a0: 2020 2020 2020 2020 2020 2070 7265 6469             predi
+000246b0: 6374 696f 6e5f 696e 7465 7276 616c 2c0d  ction_interval,.
+000246c0: 0a20 2020 2020 2020 2020 2020 2068 6f6c  .            hol
+000246d0: 6964 6179 5f63 6f75 6e74 7279 3d68 6f6c  iday_country=hol
+000246e0: 6964 6179 5f63 6f75 6e74 7279 2c0d 0a20  iday_country,.. 
+000246f0: 2020 2020 2020 2020 2020 2072 616e 646f             rando
+00024700: 6d5f 7365 6564 3d72 616e 646f 6d5f 7365  m_seed=random_se
+00024710: 6564 2c0d 0a20 2020 2020 2020 2020 2020  ed,..           
+00024720: 2072 6567 7265 7373 696f 6e5f 7479 7065   regression_type
+00024730: 3d72 6567 7265 7373 696f 6e5f 7479 7065  =regression_type
+00024740: 2c0d 0a20 2020 2020 2020 2020 2020 2076  ,..            v
+00024750: 6572 626f 7365 3d76 6572 626f 7365 2c0d  erbose=verbose,.
+00024760: 0a20 2020 2020 2020 2020 2020 206e 5f6a  .            n_j
+00024770: 6f62 733d 6e5f 6a6f 6273 2c0d 0a20 2020  obs=n_jobs,..   
+00024780: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00024790: 7365 6c66 2e72 6567 7265 7373 696f 6e5f  self.regression_
+000247a0: 6d6f 6465 6c20 3d20 7265 6772 6573 7369  model = regressi
+000247b0: 6f6e 5f6d 6f64 656c 0d0a 2020 2020 2020  on_model..      
+000247c0: 2020 7365 6c66 2e77 696e 646f 775f 7369    self.window_si
+000247d0: 7a65 203d 2061 6273 2869 6e74 2877 696e  ze = abs(int(win
+000247e0: 646f 775f 7369 7a65 2929 0d0a 2020 2020  dow_size))..    
+000247f0: 2020 2020 7365 6c66 2e6d 6178 5f68 6973      self.max_his
+00024800: 746f 7279 203d 206d 6178 5f68 6973 746f  tory = max_histo
+00024810: 7279 0d0a 2020 2020 2020 2020 7365 6c66  ry..        self
+00024820: 2e6f 6e65 5f73 7465 7020 3d20 6f6e 655f  .one_step = one_
+00024830: 7374 6570 0d0a 2020 2020 2020 2020 7365  step..        se
+00024840: 6c66 2e70 726f 6365 7373 6564 5f79 203d  lf.processed_y =
+00024850: 2070 726f 6365 7373 6564 5f79 0d0a 2020   processed_y..  
+00024860: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+00024870: 666f 726d 6174 696f 6e5f 6469 6374 203d  formation_dict =
+00024880: 2074 7261 6e73 666f 726d 6174 696f 6e5f   transformation_
+00024890: 6469 6374 0d0a 2020 2020 2020 2020 7365  dict..        se
+000248a0: 6c66 2e64 6174 6570 6172 745f 6d65 7468  lf.datepart_meth
+000248b0: 6f64 203d 2064 6174 6570 6172 745f 6d65  od = datepart_me
+000248c0: 7468 6f64 0d0a 2020 2020 2020 2020 7365  thod..        se
+000248d0: 6c66 2e6e 6f72 6d61 6c69 7a65 5f77 696e  lf.normalize_win
+000248e0: 646f 7720 3d20 6e6f 726d 616c 697a 655f  dow = normalize_
+000248f0: 7769 6e64 6f77 0d0a 2020 2020 2020 2020  window..        
+00024900: 7365 6c66 2e66 6f72 6563 6173 745f 6c65  self.forecast_le
+00024910: 6e67 7468 203d 2066 6f72 6563 6173 745f  ngth = forecast_
+00024920: 6c65 6e67 7468 0d0a 0d0a 2020 2020 6465  length....    de
+00024930: 6620 6669 7428 7365 6c66 2c20 6466 2c20  f fit(self, df, 
+00024940: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
+00024950: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+00024960: 2022 2222 5472 6169 6e20 616c 676f 7269   """Train algori
+00024970: 7468 6d20 6769 7665 6e20 6461 7461 2073  thm given data s
+00024980: 7570 706c 6965 642e 0d0a 0d0a 2020 2020  upplied.....    
+00024990: 2020 2020 4172 6773 3a0d 0a20 2020 2020      Args:..     
+000249a0: 2020 2020 2020 2064 6620 2870 616e 6461         df (panda
+000249b0: 732e 4461 7461 4672 616d 6529 3a20 4461  s.DataFrame): Da
+000249c0: 7465 7469 6d65 2049 6e64 6578 6564 0d0a  tetime Indexed..
+000249d0: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+000249e0: 2020 2020 2073 656c 662e 6669 745f 6461       self.fit_da
+000249f0: 7461 2864 6629 0d0a 2020 2020 2020 2020  ta(df)..        
+00024a00: 6966 2073 656c 662e 7265 6772 6573 7369  if self.regressi
+00024a10: 6f6e 5f74 7970 6520 696e 205b 2255 7365  on_type in ["Use
+00024a20: 7222 2c20 2275 7365 7222 5d3a 0d0a 2020  r", "user"]:..  
+00024a30: 2020 2020 2020 2020 2020 6966 2066 7574            if fut
+00024a40: 7572 655f 7265 6772 6573 736f 7220 6973  ure_regressor is
+00024a50: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00024a60: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00024a70: 6c75 6545 7272 6f72 280d 0a20 2020 2020  lueError(..     
+00024a80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024a90: 7265 6772 6573 7369 6f6e 5f74 7970 653d  regression_type=
+00024aa0: 2755 7365 7227 2062 7574 206e 6f20 6675  'User' but no fu
+00024ab0: 7475 7265 5f72 6567 7265 7373 6f72 2070  ture_regressor p
+00024ac0: 6173 7365 6422 0d0a 2020 2020 2020 2020  assed"..        
+00024ad0: 2020 2020 2020 2020 290d 0a20 2020 2020          )..     
+00024ae0: 2020 2066 726f 6d20 6175 746f 7473 2e74     from autots.t
+00024af0: 6f6f 6c73 2e74 7261 6e73 666f 726d 2069  ools.transform i
+00024b00: 6d70 6f72 7420 4765 6e65 7261 6c54 7261  mport GeneralTra
+00024b10: 6e73 666f 726d 6572 2020 2320 6176 6f69  nsformer  # avoi
+00024b20: 6420 6369 7263 756c 6172 2069 6d70 6f72  d circular impor
+00024b30: 7473 0d0a 0d0a 2020 2020 2020 2020 7365  ts....        se
+00024b40: 6c66 2e74 7261 6e73 666f 726d 6572 5f6f  lf.transformer_o
+00024b50: 626a 6563 7420 3d20 4765 6e65 7261 6c54  bject = GeneralT
+00024b60: 7261 6e73 666f 726d 6572 280d 0a20 2020  ransformer(..   
+00024b70: 2020 2020 2020 2020 206e 5f6a 6f62 733d           n_jobs=
+00024b80: 7365 6c66 2e6e 5f6a 6f62 732c 0d0a 2020  self.n_jobs,..  
+00024b90: 2020 2020 2020 2020 2020 686f 6c69 6461            holida
+00024ba0: 795f 636f 756e 7472 793d 7365 6c66 2e68  y_country=self.h
+00024bb0: 6f6c 6964 6179 5f63 6f75 6e74 7279 2c0d  oliday_country,.
+00024bc0: 0a20 2020 2020 2020 2020 2020 202a 2a73  .            **s
+00024bd0: 656c 662e 7472 616e 7366 6f72 6d61 7469  elf.transformati
+00024be0: 6f6e 5f64 6963 742c 0d0a 2020 2020 2020  on_dict,..      
+00024bf0: 2020 290d 0a20 2020 2020 2020 2066 6f72    )..        for
+00024c00: 6563 6173 745f 6c65 6e67 7468 203d 2073  ecast_length = s
+00024c10: 656c 662e 666f 7265 6361 7374 5f6c 656e  elf.forecast_len
+00024c20: 6774 680d 0a20 2020 2020 2020 206f 6e65  gth..        one
+00024c30: 5f73 7465 7020 3d20 7365 6c66 2e6f 6e65  _step = self.one
+00024c40: 5f73 7465 700d 0a20 2020 2020 2020 2070  _step..        p
+00024c50: 726f 6365 7373 6564 5f79 203d 2073 656c  rocessed_y = sel
+00024c60: 662e 7072 6f63 6573 7365 645f 790d 0a20  f.processed_y.. 
+00024c70: 2020 2020 2020 2064 6620 3d20 7365 6c66         df = self
+00024c80: 2e74 7261 6e73 666f 726d 6572 5f6f 626a  .transformer_obj
+00024c90: 6563 742e 5f66 6972 7374 5f66 6974 2864  ect._first_fit(d
+00024ca0: 6629 0d0a 0d0a 2020 2020 2020 2020 6466  f)....        df
+00024cb0: 5f6c 6973 7420 3d20 5b64 665d 0d0a 2020  _list = [df]..  
+00024cc0: 2020 2020 2020 6e65 775f 6466 203d 2064        new_df = d
+00024cd0: 660d 0a20 2020 2020 2020 2074 7261 6e73  f..        trans
+00024ce0: 5f6b 6579 7320 3d20 736f 7274 6564 286c  _keys = sorted(l
+00024cf0: 6973 7428 7365 6c66 2e74 7261 6e73 666f  ist(self.transfo
+00024d00: 726d 6572 5f6f 626a 6563 742e 7472 616e  rmer_object.tran
+00024d10: 7366 6f72 6d61 7469 6f6e 732e 6b65 7973  sformations.keys
+00024d20: 2829 2929 0d0a 2020 2020 2020 2020 666f  ()))..        fo
+00024d30: 7220 6920 696e 2074 7261 6e73 5f6b 6579  r i in trans_key
+00024d40: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00024d50: 7472 616e 735f 6e61 6d65 203d 2073 656c  trans_name = sel
+00024d60: 662e 7472 616e 7366 6f72 6d65 725f 6f62  f.transformer_ob
+00024d70: 6a65 6374 2e74 7261 6e73 666f 726d 6174  ject.transformat
+00024d80: 696f 6e73 5b69 5d0d 0a20 2020 2020 2020  ions[i]..       
+00024d90: 2020 2020 2069 6620 7472 616e 735f 6e61       if trans_na
+00024da0: 6d65 206e 6f74 2069 6e20 5b27 536c 6963  me not in ['Slic
+00024db0: 6527 5d3a 0d0a 2020 2020 2020 2020 2020  e']:..          
+00024dc0: 2020 2020 2020 6e65 775f 6466 203d 2073        new_df = s
+00024dd0: 656c 662e 7472 616e 7366 6f72 6d65 725f  elf.transformer_
+00024de0: 6f62 6a65 6374 2e5f 6669 745f 6f6e 6528  object._fit_one(
+00024df0: 6e65 775f 6466 2c20 6929 0d0a 2020 2020  new_df, i)..    
+00024e00: 2020 2020 2020 2020 2020 2020 6466 5f6c              df_l
+00024e10: 6973 742e 6170 7065 6e64 286e 6577 5f64  ist.append(new_d
+00024e20: 6629 0d0a 0d0a 2020 2020 2020 2020 6d61  f)....        ma
+00024e30: 785f 6869 7374 6f72 7920 3d20 3020 6966  x_history = 0 if
+00024e40: 2073 656c 662e 6d61 785f 6869 7374 6f72   self.max_histor
+00024e50: 7920 6973 204e 6f6e 6520 656c 7365 2061  y is None else a
+00024e60: 6273 2869 6e74 2873 656c 662e 6d61 785f  bs(int(self.max_
+00024e70: 6869 7374 6f72 7929 290d 0a20 2020 2020  history))..     
+00024e80: 2020 2077 696e 646f 775f 6c69 7374 203d     window_list =
+00024e90: 205b 5d0d 0a20 2020 2020 2020 2066 6f72   []..        for
+00024ea0: 2063 6466 2069 6e20 6466 5f6c 6973 743a   cdf in df_list:
+00024eb0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+00024ec0: 6e64 6f77 5f6c 6973 742e 6170 7065 6e64  ndow_list.append
+00024ed0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00024ee0: 2020 2073 6c69 6469 6e67 5f77 696e 646f     sliding_windo
+00024ef0: 775f 7669 6577 280d 0a20 2020 2020 2020  w_view(..       
+00024f00: 2020 2020 2020 2020 2020 2020 206e 702e               np.
+00024f10: 6173 6172 7261 7928 6364 6629 5b2d 6d61  asarray(cdf)[-ma
+00024f20: 785f 6869 7374 6f72 793a 5d2c 0d0a 2020  x_history:],..  
+00024f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024f40: 2020 7769 6e64 6f77 5f73 6861 7065 3d28    window_shape=(
+00024f50: 7365 6c66 2e77 696e 646f 775f 7369 7a65  self.window_size
+00024f60: 2c29 2c0d 0a20 2020 2020 2020 2020 2020  ,),..           
+00024f70: 2020 2020 2020 2020 2061 7869 733d 302c           axis=0,
+00024f80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00024f90: 2020 290d 0a20 2020 2020 2020 2020 2020    )..           
+00024fa0: 2029 0d0a 2020 2020 2020 2020 6675 6c6c   )..        full
+00024fb0: 203d 206e 702e 636f 6e63 6174 656e 6174   = np.concatenat
+00024fc0: 6528 7769 6e64 6f77 5f6c 6973 742c 2061  e(window_list, a
+00024fd0: 7869 733d 3229 0d0a 0d0a 2020 2020 2020  xis=2)....      
+00024fe0: 2020 6578 7472 6173 203d 2073 656c 662e    extras = self.
+00024ff0: 5f63 6f6e 7374 7275 6374 5f65 7874 7261  _construct_extra
+00025000: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+00025010: 6466 5f69 6e64 6578 3d64 662e 696e 6465  df_index=df.inde
+00025020: 782c 2066 7574 7572 655f 7265 6772 6573  x, future_regres
+00025030: 736f 723d 6675 7475 7265 5f72 6567 7265  sor=future_regre
+00025040: 7373 6f72 0d0a 2020 2020 2020 2020 290d  ssor..        ).
+00025050: 0a0d 0a20 2020 2020 2020 2066 756c 6c5f  ...        full_
+00025060: 656e 6420 3d20 6466 2e73 6861 7065 5b30  end = df.shape[0
+00025070: 5d20 2d20 310d 0a20 2020 2020 2020 2077  ] - 1..        w
+00025080: 696e 646f 775f 656e 6420 3d20 6675 6c6c  indow_end = full
+00025090: 2e73 6861 7065 5b30 5d20 2d20 310d 0a20  .shape[0] - 1.. 
+000250a0: 2020 2020 2020 206d 6178 5f68 6973 745f         max_hist_
+000250b0: 7265 7620 3d20 6466 2e73 6861 7065 5b30  rev = df.shape[0
+000250c0: 5d20 2d20 6d61 785f 6869 7374 6f72 7920  ] - max_history 
+000250d0: 6966 206d 6178 5f68 6973 746f 7279 2021  if max_history !
+000250e0: 3d20 3020 656c 7365 2030 0d0a 0d0a 2020  = 0 else 0....  
+000250f0: 2020 2020 2020 6966 206f 6e65 5f73 7465        if one_ste
+00025100: 703a 0d0a 2020 2020 2020 2020 2020 2020  p:..            
+00025110: 7365 6c66 2e58 203d 2066 756c 6c5b 3a2d  self.X = full[:-
+00025120: 315d 2e72 6573 6861 7065 282d 312c 2066  1].reshape(-1, f
+00025130: 756c 6c2e 7368 6170 655b 2d31 5d29 0d0a  ull.shape[-1])..
+00025140: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00025150: 7874 7261 7320 6973 206e 6f74 204e 6f6e  xtras is not Non
+00025160: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00025170: 2020 2020 7365 6c66 2e58 203d 206e 702e      self.X = np.
+00025180: 636f 6e63 6174 656e 6174 6528 0d0a 2020  concatenate(..  
+00025190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000251a0: 2020 5b0d 0a20 2020 2020 2020 2020 2020    [..           
+000251b0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000251c0: 662e 582c 0d0a 2020 2020 2020 2020 2020  f.X,..          
+000251d0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+000251e0: 7472 6173 5b73 656c 662e 7769 6e64 6f77  tras[self.window
+000251f0: 5f73 697a 6520 2b20 6d61 785f 6869 7374  _size + max_hist
+00025200: 5f72 6576 203a 5d2e 7265 7368 6170 6528  _rev :].reshape(
+00025210: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00025220: 2020 2020 2020 2020 2020 2020 2020 2d31                -1
+00025230: 2c20 6578 7472 6173 2e73 6861 7065 5b2d  , extras.shape[-
+00025240: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
+00025250: 2020 2020 2020 2020 2020 2020 292c 0d0a              ),..
+00025260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025270: 2020 2020 5d2c 0d0a 2020 2020 2020 2020      ],..        
+00025280: 2020 2020 2020 2020 2020 2020 6178 6973              axis
+00025290: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
+000252a0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000252b0: 2020 2020 6966 2070 726f 6365 7373 6564      if processed
+000252c0: 5f79 3a0d 0a20 2020 2020 2020 2020 2020  _y:..           
+000252d0: 2020 2020 2073 656c 662e 5920 3d20 6e70       self.Y = np
+000252e0: 2e61 7361 7272 6179 2864 665f 6c69 7374  .asarray(df_list
+000252f0: 5b2d 315d 295b 0d0a 2020 2020 2020 2020  [-1])[..        
+00025300: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00025310: 2e77 696e 646f 775f 7369 7a65 202b 206d  .window_size + m
+00025320: 6178 5f68 6973 745f 7265 7620 3a0d 0a20  ax_hist_rev :.. 
+00025330: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00025340: 2e72 6573 6861 7065 282d 3129 0d0a 2020  .reshape(-1)..  
+00025350: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00025360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025370: 2073 656c 662e 5920 3d20 6e70 2e61 7361   self.Y = np.asa
+00025380: 7272 6179 2864 6629 5b73 656c 662e 7769  rray(df)[self.wi
+00025390: 6e64 6f77 5f73 697a 6520 2b20 6d61 785f  ndow_size + max_
+000253a0: 6869 7374 5f72 6576 203a 5d2e 7265 7368  hist_rev :].resh
+000253b0: 6170 6528 2d31 290d 0a20 2020 2020 2020  ape(-1)..       
+000253c0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000253d0: 2020 2020 7769 6e64 6f77 7320 3d20 5b5d      windows = []
+000253e0: 0d0a 2020 2020 2020 2020 2020 2020 7461  ..            ta
+000253f0: 7267 6574 7320 3d20 5b5d 0d0a 2020 2020  rgets = []..    
+00025400: 2020 2020 2020 2020 6578 7472 615f 7365          extra_se
+00025410: 6c20 3d20 5b5d 0d0a 2020 2020 2020 2020  l = []..        
+00025420: 2020 2020 666f 7265 6361 7374 5f73 7465      forecast_ste
+00025430: 7073 203d 205b 5d0d 0a20 2020 2020 2020  ps = []..       
+00025440: 2020 2020 2023 2063 6f6e 6361 7420 616e       # concat an
+00025450: 6420 6472 6f70 2077 696e 646f 7720 6f66  d drop window of
+00025460: 2065 6e64 206f 6620 6461 7461 7365 740d   end of dataset.
+00025470: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00025480: 206e 2069 6e20 7261 6e67 6528 666f 7265   n in range(fore
+00025490: 6361 7374 5f6c 656e 6774 6829 3a0d 0a20  cast_length):.. 
+000254a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000254b0: 2064 6f6e 2774 2069 6e63 6c75 6465 206c   don't include l
+000254c0: 6173 7420 706f 696e 7420 666f 7220 7769  ast point for wi
+000254d0: 6e64 6f77 7320 6173 2069 7420 6973 2074  ndows as it is t
+000254e0: 6865 2074 7261 696e 696e 6720 706f 696e  he training poin
+000254f0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00025500: 2020 2065 6e64 5f70 6f69 6e74 203d 2077     end_point = w
+00025510: 696e 646f 775f 656e 6420 2d20 6e20 2d20  indow_end - n - 
+00025520: 310d 0a20 2020 2020 2020 2020 2020 2020  1..             
+00025530: 2020 2069 6620 656e 645f 706f 696e 7420     if end_point 
+00025540: 3e20 303a 0d0a 2020 2020 2020 2020 2020  > 0:..          
+00025550: 2020 2020 2020 2020 2020 7769 6e64 6f77            window
+00025560: 5f69 6478 203d 206e 702e 6172 616e 6765  _idx = np.arange
+00025570: 2830 2c20 656e 645f 706f 696e 7429 0d0a  (0, end_point)..
+00025580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025590: 2020 2020 7769 6e64 6f77 732e 6170 7065      windows.appe
+000255a0: 6e64 2866 756c 6c5b 7769 6e64 6f77 5f69  nd(full[window_i
+000255b0: 6478 5d29 0d0a 2020 2020 2020 2020 2020  dx])..          
+000255c0: 2020 2020 2020 2020 2020 2320 666f 7220            # for 
+000255d0: 7920 616e 6420 7461 7267 6574 2072 656c  y and target rel
+000255e0: 6174 6564 2076 6172 732c 2064 6f6e 2774  ated vars, don't
+000255f0: 2069 6e63 6c75 6465 2066 6972 7374 2070   include first p
+00025600: 6f69 6e74 0d0a 2020 2020 2020 2020 2020  oint..          
+00025610: 2020 2020 2020 2020 2020 7461 7267 6574            target
+00025620: 5f69 6478 203d 206e 702e 6172 616e 6765  _idx = np.arange
+00025630: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00025640: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00025650: 7769 6e64 6f77 5f73 697a 6520 2b20 6e20  window_size + n 
+00025660: 2b20 6d61 785f 6869 7374 5f72 6576 2c20  + max_hist_rev, 
+00025670: 6675 6c6c 5f65 6e64 0d0a 2020 2020 2020  full_end..      
+00025680: 2020 2020 2020 2020 2020 2020 2020 290d                ).
+00025690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000256a0: 2020 2020 2069 6620 7072 6f63 6573 7365       if processe
+000256b0: 645f 793a 0d0a 2020 2020 2020 2020 2020  d_y:..          
+000256c0: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+000256d0: 7267 6574 732e 6170 7065 6e64 286e 702e  rgets.append(np.
+000256e0: 6173 6172 7261 7928 6466 5f6c 6973 745b  asarray(df_list[
+000256f0: 2d31 5d29 5b74 6172 6765 745f 6964 785d  -1])[target_idx]
+00025700: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00025710: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00025720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025730: 2020 2020 2020 7461 7267 6574 732e 6170        targets.ap
+00025740: 7065 6e64 286e 702e 6173 6172 7261 7928  pend(np.asarray(
+00025750: 6466 295b 7461 7267 6574 5f69 6478 5d29  df)[target_idx])
+00025760: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00025770: 2020 2020 2020 666f 7265 6361 7374 5f73        forecast_s
+00025780: 7465 7073 2e61 7070 656e 6428 286e 702e  teps.append((np.
+00025790: 6f6e 6573 5f6c 696b 6528 6466 2920 2a20  ones_like(df) * 
+000257a0: 6e29 5b74 6172 6765 745f 6964 785d 290d  n)[target_idx]).
+000257b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000257c0: 2020 2020 2069 6620 6578 7472 6173 2069       if extras i
+000257d0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+000257e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000257f0: 2020 2020 2065 7874 7261 5f73 656c 2e61       extra_sel.a
+00025800: 7070 656e 6428 6578 7472 6173 5b74 6172  ppend(extras[tar
+00025810: 6765 745f 6964 785d 290d 0a20 2020 2020  get_idx])..     
+00025820: 2020 2020 2020 2077 696e 646f 7773 203d         windows =
+00025830: 206e 702e 636f 6e63 6174 656e 6174 6528   np.concatenate(
+00025840: 7769 6e64 6f77 732c 2061 7869 733d 3029  windows, axis=0)
+00025850: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00025860: 2065 7874 7261 7320 6973 206e 6f74 204e   extras is not N
+00025870: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00025880: 2020 2020 2020 6578 7472 615f 7365 6c20        extra_sel 
+00025890: 3d20 6e70 2e63 6f6e 6361 7465 6e61 7465  = np.concatenate
+000258a0: 2865 7874 7261 5f73 656c 2c20 6178 6973  (extra_sel, axis
+000258b0: 3d30 290d 0a20 2020 2020 2020 2020 2020  =0)..           
+000258c0: 2066 6f72 6563 6173 745f 7374 6570 7320   forecast_steps 
+000258d0: 3d20 6e70 2e63 6f6e 6361 7465 6e61 7465  = np.concatenate
+000258e0: 2866 6f72 6563 6173 745f 7374 6570 732c  (forecast_steps,
+000258f0: 2061 7869 733d 3029 0d0a 2020 2020 2020   axis=0)..      
+00025900: 2020 2020 2020 6966 2065 7874 7261 7320        if extras 
+00025910: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00025920: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00025930: 6c66 2e58 203d 206e 702e 636f 6e63 6174  lf.X = np.concat
+00025940: 656e 6174 6528 0d0a 2020 2020 2020 2020  enate(..        
+00025950: 2020 2020 2020 2020 2020 2020 5b0d 0a20              [.. 
+00025960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025970: 2020 2020 2020 2077 696e 646f 7773 2e72         windows.r
+00025980: 6573 6861 7065 282d 312c 2077 696e 646f  eshape(-1, windo
+00025990: 7773 2e73 6861 7065 5b2d 315d 292c 0d0a  ws.shape[-1]),..
+000259a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000259b0: 2020 2020 2020 2020 6578 7472 615f 7365          extra_se
+000259c0: 6c2e 7265 7368 6170 6528 2d31 2c20 6578  l.reshape(-1, ex
+000259d0: 7472 6173 2e73 6861 7065 5b2d 315d 292c  tras.shape[-1]),
+000259e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000259f0: 2020 2020 2020 2020 2020 666f 7265 6361            foreca
+00025a00: 7374 5f73 7465 7073 2e72 6573 6861 7065  st_steps.reshape
+00025a10: 282d 312c 2031 292c 0d0a 2020 2020 2020  (-1, 1),..      
+00025a20: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+00025a30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00025a40: 2020 2020 2020 6178 6973 3d31 2c0d 0a20        axis=1,.. 
+00025a50: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00025a60: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00025a70: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00025a80: 2020 2020 2073 656c 662e 5820 3d20 6e70       self.X = np
+00025a90: 2e63 6f6e 6361 7465 6e61 7465 280d 0a20  .concatenate(.. 
+00025aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025ab0: 2020 205b 0d0a 2020 2020 2020 2020 2020     [..          
+00025ac0: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00025ad0: 6e64 6f77 732e 7265 7368 6170 6528 2d31  ndows.reshape(-1
+00025ae0: 2c20 7769 6e64 6f77 732e 7368 6170 655b  , windows.shape[
+00025af0: 2d31 5d29 2c0d 0a20 2020 2020 2020 2020  -1]),..         
+00025b00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00025b10: 6f72 6563 6173 745f 7374 6570 732e 7265  orecast_steps.re
+00025b20: 7368 6170 6528 2d31 2c20 3129 2c0d 0a20  shape(-1, 1),.. 
+00025b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025b40: 2020 205d 2c0d 0a20 2020 2020 2020 2020     ],..         
+00025b50: 2020 2020 2020 2020 2020 2061 7869 733d             axis=
+00025b60: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
+00025b70: 2020 2020 290d 0a20 2020 2020 2020 2020      )..         
+00025b80: 2020 2073 656c 662e 5920 3d20 6e70 2e63     self.Y = np.c
+00025b90: 6f6e 6361 7465 6e61 7465 2874 6172 6765  oncatenate(targe
+00025ba0: 7473 2c20 6178 6973 3d30 292e 7265 7368  ts, axis=0).resh
+00025bb0: 6170 6528 2d31 290d 0a0d 0a20 2020 2020  ape(-1)....     
+00025bc0: 2020 2023 2044 524f 5020 7661 6c75 6573     # DROP values
+00025bd0: 2077 6869 6368 2063 6f6e 7461 696e 206e   which contain n
+00025be0: 756d 7079 2c20 6e6f 7420 6861 7669 6e67  umpy, not having
+00025bf0: 2066 696c 6c65 6420 696e 6974 6961 6c20   filled initial 
+00025c00: 6e61 6e20 7661 6c75 6573 0d0a 2020 2020  nan values..    
+00025c10: 2020 2020 6e61 6e5f 726f 7773 203d 206e      nan_rows = n
+00025c20: 702e 6172 6777 6865 7265 286e 702e 6973  p.argwhere(np.is
+00025c30: 6e61 6e28 6e70 2e73 756d 2873 656c 662e  nan(np.sum(self.
+00025c40: 582c 2061 7869 733d 3129 2929 0d0a 2020  X, axis=1)))..  
+00025c50: 2020 2020 2020 6966 206e 616e 5f72 6f77        if nan_row
+00025c60: 732e 7369 7a65 2021 3d20 303a 0d0a 2020  s.size != 0:..  
+00025c70: 2020 2020 2020 2020 2020 7365 6c66 2e58            self.X
+00025c80: 203d 206e 702e 6465 6c65 7465 2873 656c   = np.delete(sel
+00025c90: 662e 582c 206e 616e 5f72 6f77 732c 2061  f.X, nan_rows, a
+00025ca0: 7869 733d 3029 0d0a 2020 2020 2020 2020  xis=0)..        
+00025cb0: 2020 2020 7365 6c66 2e59 203d 206e 702e      self.Y = np.
+00025cc0: 6465 6c65 7465 2873 656c 662e 592c 206e  delete(self.Y, n
+00025cd0: 616e 5f72 6f77 732c 2061 7869 733d 3029  an_rows, axis=0)
+00025ce0: 0d0a 0d0a 2020 2020 2020 2020 6d75 6c74  ....        mult
+00025cf0: 696f 7574 7075 7420 3d20 5472 7565 0d0a  ioutput = True..
+00025d00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00025d10: 592e 6e64 696d 203c 2032 3a0d 0a20 2020  Y.ndim < 2:..   
+00025d20: 2020 2020 2020 2020 206d 756c 7469 6f75           multiou
+00025d30: 7470 7574 203d 2046 616c 7365 0d0a 2020  tput = False..  
+00025d40: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
+00025d50: 592e 7368 6170 655b 315d 203c 2032 3a0d  Y.shape[1] < 2:.
+00025d60: 0a20 2020 2020 2020 2020 2020 206d 756c  .            mul
+00025d70: 7469 6f75 7470 7574 203d 2046 616c 7365  tioutput = False
+00025d80: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
+00025d90: 6f64 656c 203d 2072 6574 7269 6576 655f  odel = retrieve_
+00025da0: 7265 6772 6573 736f 7228 0d0a 2020 2020  regressor(..    
+00025db0: 2020 2020 2020 2020 7265 6772 6573 7369          regressi
+00025dc0: 6f6e 5f6d 6f64 656c 3d73 656c 662e 7265  on_model=self.re
+00025dd0: 6772 6573 7369 6f6e 5f6d 6f64 656c 2c0d  gression_model,.
+00025de0: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
+00025df0: 626f 7365 3d73 656c 662e 7665 7262 6f73  bose=self.verbos
+00025e00: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00025e10: 7665 7262 6f73 655f 626f 6f6c 3d73 656c  verbose_bool=sel
+00025e20: 662e 7665 7262 6f73 655f 626f 6f6c 2c0d  f.verbose_bool,.
+00025e30: 0a20 2020 2020 2020 2020 2020 2072 616e  .            ran
+00025e40: 646f 6d5f 7365 6564 3d73 656c 662e 7261  dom_seed=self.ra
+00025e50: 6e64 6f6d 5f73 6565 642c 0d0a 2020 2020  ndom_seed,..    
+00025e60: 2020 2020 2020 2020 6e5f 6a6f 6273 3d73          n_jobs=s
+00025e70: 656c 662e 6e5f 6a6f 6273 2c0d 0a20 2020  elf.n_jobs,..   
+00025e80: 2020 2020 2020 2020 206d 756c 7469 6f75           multiou
+00025e90: 7470 7574 3d6d 756c 7469 6f75 7470 7574  tput=multioutput
+00025ea0: 2c0d 0a20 2020 2020 2020 2029 0d0a 2020  ,..        )..  
+00025eb0: 2020 2020 2020 6966 2073 656c 662e 6e6f        if self.no
+00025ec0: 726d 616c 697a 655f 7769 6e64 6f77 3a0d  rmalize_window:.
+00025ed0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00025ee0: 662e 5820 3d20 7365 6c66 2e5f 6261 7365  f.X = self._base
+00025ef0: 5f73 6361 6c65 7228 7365 6c66 2e58 290d  _scaler(self.X).
+00025f00: 0a20 2020 2020 2020 2073 656c 662e 6d6f  .        self.mo
+00025f10: 6465 6c20 3d20 7365 6c66 2e6d 6f64 656c  del = self.model
+00025f20: 2e66 6974 2873 656c 662e 582e 6173 7479  .fit(self.X.asty
+00025f30: 7065 2866 6c6f 6174 292c 2073 656c 662e  pe(float), self.
+00025f40: 592e 6173 7479 7065 2866 6c6f 6174 2929  Y.astype(float))
+00025f50: 0d0a 2020 2020 2020 2020 7365 6c66 2e66  ..        self.f
+00025f60: 6974 5f72 756e 7469 6d65 203d 2064 6174  it_runtime = dat
+00025f70: 6574 696d 652e 6461 7465 7469 6d65 2e6e  etime.datetime.n
+00025f80: 6f77 2829 202d 2073 656c 662e 7374 6172  ow() - self.star
+00025f90: 7454 696d 650d 0a20 2020 2020 2020 2072  tTime..        r
+00025fa0: 6574 7572 6e20 7365 6c66 0d0a 0d0a 2020  eturn self....  
+00025fb0: 2020 6465 6620 5f63 6f6e 7374 7275 6374    def _construct
+00025fc0: 5f65 7874 7261 7328 7365 6c66 2c20 6466  _extras(self, df
+00025fd0: 5f69 6e64 6578 2c20 6675 7475 7265 5f72  _index, future_r
+00025fe0: 6567 7265 7373 6f72 293a 0d0a 2020 2020  egressor):..    
+00025ff0: 2020 2020 6578 7472 6173 203d 2054 7275      extras = Tru
+00026000: 650d 0a20 2020 2020 2020 2069 6620 7365  e..        if se
+00026010: 6c66 2e64 6174 6570 6172 745f 6d65 7468  lf.datepart_meth
+00026020: 6f64 2069 7320 6e6f 7420 4e6f 6e65 3a0d  od is not None:.
+00026030: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00026040: 655f 7061 7274 5f64 6620 3d20 6461 7465  e_part_df = date
+00026050: 5f70 6172 7428 6466 5f69 6e64 6578 2c20  _part(df_index, 
+00026060: 6d65 7468 6f64 3d73 656c 662e 6461 7465  method=self.date
+00026070: 7061 7274 5f6d 6574 686f 6429 0d0a 2020  part_method)..  
+00026080: 2020 2020 2020 2020 2020 6966 2066 7574            if fut
+00026090: 7572 655f 7265 6772 6573 736f 7220 6973  ure_regressor is
+000260a0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+000260b0: 2020 2020 2020 2020 2020 2020 6461 7465              date
+000260c0: 5f70 6172 745f 6466 203d 2064 6174 655f  _part_df = date_
+000260d0: 7061 7274 5f64 662e 6d65 7267 6528 0d0a  part_df.merge(..
+000260e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000260f0: 2020 2020 6675 7475 7265 5f72 6567 7265      future_regre
+00026100: 7373 6f72 2c20 6c65 6674 5f69 6e64 6578  ssor, left_index
+00026110: 3d54 7275 652c 2072 6967 6874 5f69 6e64  =True, right_ind
+00026120: 6578 3d54 7275 652c 2068 6f77 3d27 6c65  ex=True, how='le
+00026130: 6674 270d 0a20 2020 2020 2020 2020 2020  ft'..           
+00026140: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00026150: 656c 6966 2066 7574 7572 655f 7265 6772  elif future_regr
+00026160: 6573 736f 7220 6973 206e 6f74 204e 6f6e  essor is not Non
+00026170: 6520 616e 6420 7365 6c66 2e72 6567 7265  e and self.regre
+00026180: 7373 696f 6e5f 7479 7065 2069 6e20 5b22  ssion_type in ["
+00026190: 5573 6572 222c 2022 7573 6572 225d 3a0d  User", "user"]:.
+000261a0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+000261b0: 655f 7061 7274 5f64 6620 3d20 6675 7475  e_part_df = futu
+000261c0: 7265 5f72 6567 7265 7373 6f72 0d0a 2020  re_regressor..  
+000261d0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+000261e0: 2020 2020 2020 2020 2065 7874 7261 7320           extras 
+000261f0: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00026200: 6966 2065 7874 7261 7320 6973 206e 6f74  if extras is not
+00026210: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+00026220: 2020 2020 4e20 3d20 7365 6c66 2e74 7261      N = self.tra
+00026230: 696e 5f73 6861 7065 5b31 5d0d 0a20 2020  in_shape[1]..   
+00026240: 2020 2020 2020 2020 2023 206d 656d 6f72           # memor
+00026250: 7920 6566 6669 6369 656e 7420 7265 7065  y efficient repe
+00026260: 6174 2c20 686f 7065 6675 6c6c 790d 0a20  at, hopefully.. 
+00026270: 2020 2020 2020 2020 2020 2065 7874 7261             extra
+00026280: 7320 3d20 6e70 2e6d 6f76 6561 7869 7328  s = np.moveaxis(
+00026290: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000262a0: 2020 6e70 2e61 7361 7272 6179 2864 6174    np.asarray(dat
+000262b0: 655f 7061 7274 5f64 6629 5b3a 2c20 3a2c  e_part_df)[:, :,
+000262c0: 206e 702e 6e65 7761 7869 735d 202a 206e   np.newaxis] * n
+000262d0: 702e 6f6e 6573 2828 312c 2031 2c20 4e29  p.ones((1, 1, N)
+000262e0: 292c 2032 2c20 310d 0a20 2020 2020 2020  ), 2, 1..       
+000262f0: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00026300: 7265 7475 726e 2065 7874 7261 730d 0a0d  return extras...
+00026310: 0a20 2020 2064 6566 205f 636f 6e73 7472  .    def _constr
+00026320: 7563 745f 6675 6c6c 2873 656c 662c 2064  uct_full(self, d
+00026330: 6629 3a0d 0a20 2020 2020 2020 2023 2075  f):..        # u
+00026340: 7365 6420 696e 2070 7265 6469 6374 206f  sed in predict o
+00026350: 6e6c 790d 0a20 2020 2020 2020 2064 6620  nly..        df 
+00026360: 3d20 7365 6c66 2e74 7261 6e73 666f 726d  = self.transform
+00026370: 6572 5f6f 626a 6563 742e 5f66 6972 7374  er_object._first
+00026380: 5f66 6974 2864 6629 0d0a 2020 2020 2020  _fit(df)..      
+00026390: 2020 6466 5f6c 6973 7420 3d20 5b64 665d    df_list = [df]
+000263a0: 0d0a 2020 2020 2020 2020 6e65 775f 6466  ..        new_df
+000263b0: 203d 2064 660d 0a20 2020 2020 2020 2074   = df..        t
+000263c0: 7261 6e73 5f6b 6579 7320 3d20 736f 7274  rans_keys = sort
+000263d0: 6564 286c 6973 7428 7365 6c66 2e74 7261  ed(list(self.tra
+000263e0: 6e73 666f 726d 6572 5f6f 626a 6563 742e  nsformer_object.
+000263f0: 7472 616e 7366 6f72 6d61 7469 6f6e 732e  transformations.
+00026400: 6b65 7973 2829 2929 0d0a 2020 2020 2020  keys()))..      
+00026410: 2020 666f 7220 6920 696e 2074 7261 6e73    for i in trans
+00026420: 5f6b 6579 733a 0d0a 2020 2020 2020 2020  _keys:..        
+00026430: 2020 2020 7472 616e 735f 6e61 6d65 203d      trans_name =
+00026440: 2073 656c 662e 7472 616e 7366 6f72 6d65   self.transforme
+00026450: 725f 6f62 6a65 6374 2e74 7261 6e73 666f  r_object.transfo
+00026460: 726d 6174 696f 6e73 5b69 5d0d 0a20 2020  rmations[i]..   
+00026470: 2020 2020 2020 2020 2069 6620 7472 616e           if tran
+00026480: 735f 6e61 6d65 206e 6f74 2069 6e20 5b27  s_name not in ['
+00026490: 536c 6963 6527 5d3a 0d0a 2020 2020 2020  Slice']:..      
+000264a0: 2020 2020 2020 2020 2020 6e65 775f 6466            new_df
+000264b0: 203d 2073 656c 662e 7472 616e 7366 6f72   = self.transfor
+000264c0: 6d65 725f 6f62 6a65 6374 2e5f 7472 616e  mer_object._tran
+000264d0: 7366 6f72 6d5f 6f6e 6528 6e65 775f 6466  sform_one(new_df
+000264e0: 2c20 6929 0d0a 2020 2020 2020 2020 2020  , i)..          
+000264f0: 2020 2020 2020 6466 5f6c 6973 742e 6170        df_list.ap
+00026500: 7065 6e64 286e 6577 5f64 6629 0d0a 0d0a  pend(new_df)....
+00026510: 2020 2020 2020 2020 2320 6d61 785f 6869          # max_hi
+00026520: 7374 6f72 7920 3d20 3020 6966 2073 656c  story = 0 if sel
+00026530: 662e 6d61 785f 6869 7374 6f72 7920 6973  f.max_history is
+00026540: 204e 6f6e 6520 656c 7365 2073 656c 662e   None else self.
+00026550: 6d61 785f 6869 7374 6f72 790d 0a20 2020  max_history..   
+00026560: 2020 2020 2077 696e 646f 775f 6c69 7374       window_list
+00026570: 203d 205b 5d0d 0a20 2020 2020 2020 2066   = []..        f
+00026580: 6f72 2063 6466 2069 6e20 6466 5f6c 6973  or cdf in df_lis
+00026590: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+000265a0: 7769 6e64 6f77 5f6c 6973 742e 6170 7065  window_list.appe
+000265b0: 6e64 280d 0a20 2020 2020 2020 2020 2020  nd(..           
+000265c0: 2020 2020 2073 6c69 6469 6e67 5f77 696e       sliding_win
+000265d0: 646f 775f 7669 6577 280d 0a20 2020 2020  dow_view(..     
+000265e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000265f0: 702e 6173 6172 7261 7928 6364 6629 2c0d  p.asarray(cdf),.
+00026600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026610: 2020 2020 2077 696e 646f 775f 7368 6170       window_shap
+00026620: 653d 2873 656c 662e 7769 6e64 6f77 5f73  e=(self.window_s
+00026630: 697a 652c 292c 0d0a 2020 2020 2020 2020  ize,),..        
+00026640: 2020 2020 2020 2020 2020 2020 6178 6973              axis
+00026650: 3d30 2c0d 0a20 2020 2020 2020 2020 2020  =0,..           
+00026660: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00026670: 2020 2020 2920 2023 205b 2d6d 6178 5f68      )  # [-max_h
+00026680: 6973 746f 7279 3a5d 0d0a 2020 2020 2020  istory:]..      
+00026690: 2020 7265 7475 726e 206e 702e 636f 6e63    return np.conc
+000266a0: 6174 656e 6174 6528 7769 6e64 6f77 5f6c  atenate(window_l
+000266b0: 6973 742c 2061 7869 733d 3229 0d0a 0d0a  ist, axis=2)....
+000266c0: 2020 2020 6465 6620 5f62 6173 655f 7363      def _base_sc
+000266d0: 616c 6572 2873 656c 662c 2058 293a 0d0a  aler(self, X):..
+000266e0: 2020 2020 2020 2020 7365 6c66 2e73 6361          self.sca
+000266f0: 6c65 725f 6d65 616e 203d 206e 702e 6d65  ler_mean = np.me
+00026700: 616e 2858 2c20 6178 6973 3d30 290d 0a20  an(X, axis=0).. 
+00026710: 2020 2020 2020 2073 656c 662e 7363 616c         self.scal
+00026720: 6572 5f73 7464 203d 206e 702e 7374 6428  er_std = np.std(
+00026730: 582c 2061 7869 733d 3029 0d0a 2020 2020  X, axis=0)..    
+00026740: 2020 2020 7265 7475 726e 2028 5820 2d20      return (X - 
+00026750: 7365 6c66 2e73 6361 6c65 725f 6d65 616e  self.scaler_mean
+00026760: 2920 2f20 7365 6c66 2e73 6361 6c65 725f  ) / self.scaler_
+00026770: 7374 640d 0a0d 0a20 2020 2064 6566 205f  std....    def _
+00026780: 7363 616c 6528 7365 6c66 2c20 5829 3a0d  scale(self, X):.
+00026790: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000267a0: 2858 202d 2073 656c 662e 7363 616c 6572  (X - self.scaler
+000267b0: 5f6d 6561 6e29 202f 2073 656c 662e 7363  _mean) / self.sc
+000267c0: 616c 6572 5f73 7464 0d0a 0d0a 2020 2020  aler_std....    
+000267d0: 6465 6620 6669 745f 6461 7461 2873 656c  def fit_data(sel
+000267e0: 662c 2064 662c 2066 7574 7572 655f 7265  f, df, future_re
+000267f0: 6772 6573 736f 723d 4e6f 6e65 293a 0d0a  gressor=None):..
+00026800: 2020 2020 2020 2020 6466 203d 2073 656c          df = sel
+00026810: 662e 6261 7369 635f 7072 6f66 696c 6528  f.basic_profile(
+00026820: 6466 290d 0a20 2020 2020 2020 2073 656c  df)..        sel
+00026830: 662e 6c61 7374 5f77 696e 646f 7720 3d20  f.last_window = 
+00026840: 6466 2e74 6169 6c28 7365 6c66 2e77 696e  df.tail(self.win
+00026850: 646f 775f 7369 7a65 290d 0a20 2020 2020  dow_size)..     
+00026860: 2020 2072 6574 7572 6e20 7365 6c66 0d0a     return self..
+00026870: 0d0a 2020 2020 6465 6620 7072 6564 6963  ..    def predic
+00026880: 7428 0d0a 2020 2020 2020 2020 7365 6c66  t(..        self
+00026890: 2c0d 0a20 2020 2020 2020 2066 6f72 6563  ,..        forec
+000268a0: 6173 745f 6c65 6e67 7468 3a20 696e 7420  ast_length: int 
+000268b0: 3d20 4e6f 6e65 2c0d 0a20 2020 2020 2020  = None,..       
+000268c0: 2066 7574 7572 655f 7265 6772 6573 736f   future_regresso
+000268d0: 723d 4e6f 6e65 2c0d 0a20 2020 2020 2020  r=None,..       
+000268e0: 206a 7573 745f 706f 696e 745f 666f 7265   just_point_fore
+000268f0: 6361 7374 3a20 626f 6f6c 203d 2046 616c  cast: bool = Fal
+00026900: 7365 2c0d 0a20 2020 2020 2020 2064 663d  se,..        df=
+00026910: 4e6f 6e65 2c0d 0a20 2020 2029 3a0d 0a20  None,..    ):.. 
+00026920: 2020 2020 2020 2022 2222 4765 6e65 7261         """Genera
+00026930: 7465 2066 6f72 6563 6173 7420 6461 7461  te forecast data
+00026940: 2069 6d6d 6564 6961 7465 6c79 2066 6f6c   immediately fol
+00026950: 6c6f 7769 6e67 2064 6174 6573 206f 6620  lowing dates of 
+00026960: 2e66 6974 2829 2e0d 0a0d 0a20 2020 2020  .fit().....     
+00026970: 2020 2041 7267 733a 0d0a 2020 2020 2020     Args:..      
+00026980: 2020 2020 2020 666f 7265 6361 7374 5f6c        forecast_l
+00026990: 656e 6774 6820 2869 6e74 293a 204e 756d  ength (int): Num
+000269a0: 6265 7220 6f66 2070 6572 696f 6473 206f  ber of periods o
+000269b0: 6620 6461 7461 2074 6f20 666f 7265 6361  f data to foreca
+000269c0: 7374 2061 6865 6164 0d0a 2020 2020 2020  st ahead..      
+000269d0: 2020 2020 2020 7265 6772 6573 736f 7220        regressor 
+000269e0: 286e 756d 7079 2e41 7272 6179 293a 2061  (numpy.Array): a
+000269f0: 6464 6974 696f 6e61 6c20 7265 6772 6573  dditional regres
+00026a00: 736f 722c 206e 6f74 2075 7365 640d 0a20  sor, not used.. 
+00026a10: 2020 2020 2020 2020 2020 206a 7573 745f             just_
+00026a20: 706f 696e 745f 666f 7265 6361 7374 2028  point_forecast (
+00026a30: 626f 6f6c 293a 2049 6620 5472 7565 2c20  bool): If True, 
+00026a40: 7265 7475 726e 2061 2070 616e 6461 732e  return a pandas.
+00026a50: 4461 7461 4672 616d 6520 6f66 206a 7573  DataFrame of jus
+00026a60: 7420 706f 696e 7420 666f 7265 6361 7374  t point forecast
+00026a70: 730d 0a0d 0a20 2020 2020 2020 2052 6574  s....        Ret
+00026a80: 7572 6e73 3a0d 0a20 2020 2020 2020 2020  urns:..         
+00026a90: 2020 2045 6974 6865 7220 6120 5072 6564     Either a Pred
+00026aa0: 6963 7469 6f6e 4f62 6a65 6374 206f 6620  ictionObject of 
+00026ab0: 666f 7265 6361 7374 7320 616e 6420 6d65  forecasts and me
+00026ac0: 7461 6461 7461 2c20 6f72 0d0a 2020 2020  tadata, or..    
+00026ad0: 2020 2020 2020 2020 6966 206a 7573 745f          if just_
+00026ae0: 706f 696e 745f 666f 7265 6361 7374 203d  point_forecast =
+00026af0: 3d20 5472 7565 2c20 6120 6461 7461 6672  = True, a datafr
+00026b00: 616d 6520 6f66 2070 6f69 6e74 2066 6f72  ame of point for
+00026b10: 6563 6173 7473 0d0a 2020 2020 2020 2020  ecasts..        
+00026b20: 2222 220d 0a20 2020 2020 2020 2070 7265  """..        pre
+00026b30: 6469 6374 5374 6172 7454 696d 6520 3d20  dictStartTime = 
+00026b40: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+00026b50: 652e 6e6f 7728 290d 0a20 2020 2020 2020  e.now()..       
+00026b60: 2069 6620 6466 2069 7320 6e6f 7420 4e6f   if df is not No
+00026b70: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00026b80: 2073 656c 662e 6669 745f 6461 7461 2864   self.fit_data(d
+00026b90: 6629 0d0a 2020 2020 2020 2020 6966 2066  f)..        if f
+00026ba0: 6f72 6563 6173 745f 6c65 6e67 7468 2069  orecast_length i
+00026bb0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00026bc0: 2020 2020 2066 6f72 6563 6173 745f 6c65       forecast_le
+00026bd0: 6e67 7468 203d 2073 656c 662e 666f 7265  ngth = self.fore
+00026be0: 6361 7374 5f6c 656e 6774 680d 0a20 2020  cast_length..   
+00026bf0: 2020 2020 2069 6620 696e 7428 666f 7265       if int(fore
+00026c00: 6361 7374 5f6c 656e 6774 6829 203e 2069  cast_length) > i
+00026c10: 6e74 2873 656c 662e 666f 7265 6361 7374  nt(self.forecast
+00026c20: 5f6c 656e 6774 6829 2061 6e64 206e 6f74  _length) and not
+00026c30: 2073 656c 662e 6f6e 655f 7374 6570 3a0d   self.one_step:.
+00026c40: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00026c50: 6e74 2822 5265 6772 6573 7369 6f6e 206d  nt("Regression m
+00026c60: 7573 7420 6265 2072 6566 6974 2074 6f20  ust be refit to 
+00026c70: 6368 616e 6765 2066 6f72 6563 6173 7420  change forecast 
+00026c80: 6c65 6e67 7468 2122 290d 0a20 2020 2020  length!")..     
+00026c90: 2020 2069 6e64 6578 203d 2073 656c 662e     index = self.
+00026ca0: 6372 6561 7465 5f66 6f72 6563 6173 745f  create_forecast_
+00026cb0: 696e 6465 7828 666f 7265 6361 7374 5f6c  index(forecast_l
+00026cc0: 656e 6774 683d 666f 7265 6361 7374 5f6c  ength=forecast_l
+00026cd0: 656e 6774 6829 0d0a 0d0a 2020 2020 2020  ength)....      
+00026ce0: 2020 6966 2073 656c 662e 6f6e 655f 7374    if self.one_st
+00026cf0: 6570 3a0d 0a20 2020 2020 2020 2020 2020  ep:..           
+00026d00: 2023 2063 6f6d 6269 6e65 645f 696e 6465   # combined_inde
+00026d10: 7820 3d20 2873 656c 662e 6466 5f74 7261  x = (self.df_tra
+00026d20: 696e 2e69 6e64 6578 2e61 7070 656e 6428  in.index.append(
+00026d30: 696e 6465 7829 290d 0a20 2020 2020 2020  index))..       
+00026d40: 2020 2020 2066 6f72 6563 6173 7420 3d20       forecast = 
+00026d50: 7064 2e44 6174 6146 7261 6d65 2829 0d0a  pd.DataFrame()..
+00026d60: 2020 2020 2020 2020 2020 2020 2320 666f              # fo
+00026d70: 7265 6361 7374 2c20 3120 7374 6570 2061  recast, 1 step a
+00026d80: 6865 6164 2c20 7468 656e 2061 6e6f 7468  head, then anoth
+00026d90: 6572 2c20 616e 6420 736f 206f 6e0d 0a20  er, and so on.. 
+00026da0: 2020 2020 2020 2020 2020 206c 7769 6e64             lwind
+00026db0: 6f77 203d 2073 656c 662e 6c61 7374 5f77  ow = self.last_w
+00026dc0: 696e 646f 770d 0a20 2020 2020 2020 2020  indow..         
+00026dd0: 2020 2066 6f72 2078 2069 6e20 7261 6e67     for x in rang
+00026de0: 6528 666f 7265 6361 7374 5f6c 656e 6774  e(forecast_lengt
+00026df0: 6829 3a0d 0a20 2020 2020 2020 2020 2020  h):..           
+00026e00: 2020 2020 2063 696e 6465 7820 3d20 696e       cindex = in
+00026e10: 6465 785b 7820 3a20 7820 2b20 315d 0d0a  dex[x : x + 1]..
+00026e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026e30: 6675 6c6c 203d 2073 656c 662e 5f63 6f6e  full = self._con
+00026e40: 7374 7275 6374 5f66 756c 6c28 6c77 696e  struct_full(lwin
+00026e50: 646f 7729 0d0a 2020 2020 2020 2020 2020  dow)..          
+00026e60: 2020 2020 2020 635f 7265 6720 3d20 280d        c_reg = (.
+00026e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026e80: 2020 2020 2066 7574 7572 655f 7265 6772       future_regr
+00026e90: 6573 736f 722e 7265 696e 6465 7828 6369  essor.reindex(ci
+00026ea0: 6e64 6578 290d 0a20 2020 2020 2020 2020  ndex)..         
+00026eb0: 2020 2020 2020 2020 2020 2069 6620 6675             if fu
+00026ec0: 7475 7265 5f72 6567 7265 7373 6f72 2069  ture_regressor i
+00026ed0: 7320 6e6f 7420 4e6f 6e65 0d0a 2020 2020  s not None..    
+00026ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026ef0: 656c 7365 204e 6f6e 650d 0a20 2020 2020  else None..     
+00026f00: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00026f10: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00026f20: 7472 6173 203d 2073 656c 662e 5f63 6f6e  tras = self._con
+00026f30: 7374 7275 6374 5f65 7874 7261 7328 6369  struct_extras(ci
+00026f40: 6e64 6578 2c20 635f 7265 6729 0d0a 2020  ndex, c_reg)..  
+00026f50: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00026f60: 2065 7874 7261 7320 6973 206e 6f74 204e   extras is not N
+00026f70: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00026f80: 2020 2020 2020 2020 2020 7072 6564 203d            pred =
+00026f90: 206e 702e 636f 6e63 6174 656e 6174 6528   np.concatenate(
+00026fa0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00026fb0: 2020 2020 2020 2020 2020 5b0d 0a20 2020            [..   
+00026fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026fd0: 2020 2020 2020 2020 2066 756c 6c5b 2d31           full[-1
+00026fe0: 3a5d 2e72 6573 6861 7065 282d 312c 2066  :].reshape(-1, f
+00026ff0: 756c 6c2e 7368 6170 655b 2d31 5d29 2c0d  ull.shape[-1]),.
+00027000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027010: 2020 2020 2020 2020 2020 2020 2065 7874               ext
+00027020: 7261 732e 7265 7368 6170 6528 2d31 2c20  ras.reshape(-1, 
+00027030: 6578 7472 6173 2e73 6861 7065 5b2d 315d  extras.shape[-1]
+00027040: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00027050: 2020 2020 2020 2020 2020 2020 5d2c 0d0a              ],..
+00027060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027070: 2020 2020 2020 2020 6178 6973 3d31 2c0d          axis=1,.
+00027080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027090: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+000270a0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000270b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000270c0: 2020 2070 7265 6420 3d20 6675 6c6c 5b2d     pred = full[-
+000270d0: 313a 5d2e 7265 7368 6170 6528 2d31 2c20  1:].reshape(-1, 
+000270e0: 6675 6c6c 2e73 6861 7065 5b2d 315d 290d  full.shape[-1]).
+000270f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027100: 2069 6620 7365 6c66 2e6e 6f72 6d61 6c69   if self.normali
+00027110: 7a65 5f77 696e 646f 773a 0d0a 2020 2020  ze_window:..    
+00027120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027130: 7072 6564 203d 2073 656c 662e 5f73 6361  pred = self._sca
+00027140: 6c65 2870 7265 6429 0d0a 2020 2020 2020  le(pred)..      
+00027150: 2020 2020 2020 2020 2020 7266 5072 6564            rfPred
+00027160: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
+00027170: 7365 6c66 2e6d 6f64 656c 2e70 7265 6469  self.model.predi
+00027180: 6374 2870 7265 6429 292e 7472 616e 7370  ct(pred)).transp
+00027190: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
+000271a0: 2020 2020 2020 2072 6650 7265 642e 636f         rfPred.co
+000271b0: 6c75 6d6e 7320 3d20 7365 6c66 2e6c 6173  lumns = self.las
+000271c0: 745f 7769 6e64 6f77 2e63 6f6c 756d 6e73  t_window.columns
+000271d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000271e0: 2020 7266 5072 6564 2e69 6e64 6578 203d    rfPred.index =
+000271f0: 2063 696e 6465 780d 0a20 2020 2020 2020   cindex..       
+00027200: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00027210: 2e70 726f 6365 7373 6564 5f79 3a0d 0a20  .processed_y:.. 
+00027220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027230: 2020 2023 2077 6f6e 2774 2077 6f72 6b20     # won't work 
+00027240: 7769 7468 2073 6f6d 6520 7072 6570 726f  with some prepro
+00027250: 6365 7373 696e 6720 6c69 6b65 2064 6966  cessing like dif
+00027260: 660d 0a20 2020 2020 2020 2020 2020 2020  f..             
+00027270: 2020 2020 2020 2072 6650 7265 6420 3d20         rfPred = 
+00027280: 7365 6c66 2e74 7261 6e73 666f 726d 6572  self.transformer
+00027290: 5f6f 626a 6563 742e 696e 7665 7273 655f  _object.inverse_
+000272a0: 7472 616e 7366 6f72 6d28 7266 5072 6564  transform(rfPred
+000272b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000272c0: 2020 2066 6f72 6563 6173 7420 3d20 7064     forecast = pd
+000272d0: 2e63 6f6e 6361 7428 5b66 6f72 6563 6173  .concat([forecas
+000272e0: 742c 2072 6650 7265 645d 2c20 6178 6973  t, rfPred], axis
+000272f0: 3d30 290d 0a20 2020 2020 2020 2020 2020  =0)..           
+00027300: 2020 2020 206c 7769 6e64 6f77 203d 2070       lwindow = p
+00027310: 642e 636f 6e63 6174 285b 6c77 696e 646f  d.concat([lwindo
+00027320: 772c 2072 6650 7265 645d 2c20 6178 6973  w, rfPred], axis
+00027330: 3d30 2c20 6967 6e6f 7265 5f69 6e64 6578  =0, ignore_index
+00027340: 3d46 616c 7365 292e 7461 696c 280d 0a20  =False).tail(.. 
+00027350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027360: 2020 2073 656c 662e 7769 6e64 6f77 5f73     self.window_s
+00027370: 697a 650d 0a20 2020 2020 2020 2020 2020  ize..           
+00027380: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00027390: 2020 2020 6466 203d 2066 6f72 6563 6173      df = forecas
+000273a0: 740d 0a20 2020 2020 2020 2065 6c73 653a  t..        else:
+000273b0: 0d0a 2020 2020 2020 2020 2020 2020 6675  ..            fu
+000273c0: 6c6c 203d 2073 656c 662e 5f63 6f6e 7374  ll = self._const
+000273d0: 7275 6374 5f66 756c 6c28 7365 6c66 2e6c  ruct_full(self.l
+000273e0: 6173 745f 7769 6e64 6f77 295b 2d31 3a5d  ast_window)[-1:]
+000273f0: 0d0a 2020 2020 2020 2020 2020 2020 6675  ..            fu
+00027400: 6c6c 203d 2066 756c 6c2e 7265 7368 6170  ll = full.reshap
+00027410: 6528 2d31 2c20 6675 6c6c 2e73 6861 7065  e(-1, full.shape
+00027420: 5b2d 315d 290d 0a20 2020 2020 2020 2020  [-1])..         
+00027430: 2020 204e 203d 2073 656c 662e 7472 6169     N = self.trai
+00027440: 6e5f 7368 6170 655b 315d 0d0a 2020 2020  n_shape[1]..    
+00027450: 2020 2020 2020 2020 666f 7265 6361 7374          forecast
+00027460: 5f73 7465 7073 203d 206e 702e 7265 7065  _steps = np.repe
+00027470: 6174 286e 702e 6172 616e 6765 2831 2c20  at(np.arange(1, 
+00027480: 666f 7265 6361 7374 5f6c 656e 6774 6820  forecast_length 
+00027490: 2b20 3129 2c20 4e29 2e72 6573 6861 7065  + 1), N).reshape
+000274a0: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+000274b0: 2020 202d 312c 2031 0d0a 2020 2020 2020     -1, 1..      
+000274c0: 2020 2020 2020 290d 0a20 2020 2020 2020        )..       
+000274d0: 2020 2020 2063 5f72 6567 203d 2028 0d0a       c_reg = (..
+000274e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000274f0: 6675 7475 7265 5f72 6567 7265 7373 6f72  future_regressor
+00027500: 2e72 6569 6e64 6578 2869 6e64 6578 290d  .reindex(index).
+00027510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027520: 2069 6620 6675 7475 7265 5f72 6567 7265   if future_regre
+00027530: 7373 6f72 2069 7320 6e6f 7420 4e6f 6e65  ssor is not None
+00027540: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00027550: 2020 656c 7365 204e 6f6e 650d 0a20 2020    else None..   
+00027560: 2020 2020 2020 2020 2029 0d0a 2020 2020           )..    
+00027570: 2020 2020 2020 2020 6578 7472 6173 203d          extras =
+00027580: 2073 656c 662e 5f63 6f6e 7374 7275 6374   self._construct
+00027590: 5f65 7874 7261 7328 696e 6465 782c 2063  _extras(index, c
+000275a0: 5f72 6567 290d 0a20 2020 2020 2020 2020  _reg)..         
+000275b0: 2020 2069 6620 6578 7472 6173 2069 7320     if extras is 
+000275c0: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+000275d0: 2020 2020 2020 2073 656c 662e 7072 6564         self.pred
+000275e0: 203d 206e 702e 636f 6e63 6174 656e 6174   = np.concatenat
+000275f0: 6528 5b66 756c 6c2c 2066 6f72 6563 6173  e([full, forecas
+00027600: 745f 7374 6570 735d 2c20 6178 6973 3d31  t_steps], axis=1
+00027610: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00027620: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00027630: 2020 2020 2020 7365 6c66 2e70 7265 6420        self.pred 
+00027640: 3d20 6e70 2e63 6f6e 6361 7465 6e61 7465  = np.concatenate
+00027650: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00027660: 2020 2020 2020 205b 0d0a 2020 2020 2020         [..      
+00027670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027680: 2020 6e70 2e74 696c 6528 6675 6c6c 2c20    np.tile(full, 
+00027690: 2866 6f72 6563 6173 745f 6c65 6e67 7468  (forecast_length
+000276a0: 2c20 3129 292c 0d0a 2020 2020 2020 2020  , 1)),..        
+000276b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000276c0: 6578 7472 6173 2e72 6573 6861 7065 282d  extras.reshape(-
+000276d0: 312c 2065 7874 7261 732e 7368 6170 655b  1, extras.shape[
+000276e0: 2d31 5d29 2c0d 0a20 2020 2020 2020 2020  -1]),..         
+000276f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00027700: 6f72 6563 6173 745f 7374 6570 732c 0d0a  orecast_steps,..
+00027710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027720: 2020 2020 5d2c 0d0a 2020 2020 2020 2020      ],..        
+00027730: 2020 2020 2020 2020 2020 2020 6178 6973              axis
+00027740: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
+00027750: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00027760: 2020 2020 6966 2073 656c 662e 6e6f 726d      if self.norm
+00027770: 616c 697a 655f 7769 6e64 6f77 3a0d 0a20  alize_window:.. 
+00027780: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00027790: 656c 662e 7072 6564 203d 2073 656c 662e  elf.pred = self.
+000277a0: 5f73 6361 6c65 2873 656c 662e 7072 6564  _scale(self.pred
+000277b0: 290d 0a20 2020 2020 2020 2020 2020 2063  )..            c
+000277c0: 5920 3d20 7365 6c66 2e6d 6f64 656c 2e70  Y = self.model.p
+000277d0: 7265 6469 6374 2873 656c 662e 7072 6564  redict(self.pred
+000277e0: 2e61 7374 7970 6528 666c 6f61 7429 290d  .astype(float)).
+000277f0: 0a20 2020 2020 2020 2020 2020 2063 5920  .            cY 
+00027800: 3d20 7064 2e44 6174 6146 7261 6d65 2863  = pd.DataFrame(c
+00027810: 592e 7265 7368 6170 6528 666f 7265 6361  Y.reshape(foreca
+00027820: 7374 5f6c 656e 6774 682c 2073 656c 662e  st_length, self.
+00027830: 7472 6169 6e5f 7368 6170 655b 315d 2929  train_shape[1]))
+00027840: 0d0a 2020 2020 2020 2020 2020 2020 6359  ..            cY
+00027850: 2e63 6f6c 756d 6e73 203d 2073 656c 662e  .columns = self.
+00027860: 636f 6c75 6d6e 5f6e 616d 6573 0d0a 2020  column_names..  
+00027870: 2020 2020 2020 2020 2020 6359 2e69 6e64            cY.ind
+00027880: 6578 203d 2069 6e64 6578 0d0a 2020 2020  ex = index..    
+00027890: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000278a0: 7072 6f63 6573 7365 645f 793a 0d0a 2020  processed_y:..  
+000278b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000278c0: 776f 6e27 7420 776f 726b 2077 6974 6820  won't work with 
+000278d0: 736f 6d65 2070 7265 7072 6f63 6573 7369  some preprocessi
+000278e0: 6e67 206c 696b 6520 6469 6666 0d0a 2020  ng like diff..  
+000278f0: 2020 2020 2020 2020 2020 2020 2020 6359                cY
+00027900: 203d 2073 656c 662e 7472 616e 7366 6f72   = self.transfor
+00027910: 6d65 725f 6f62 6a65 6374 2e69 6e76 6572  mer_object.inver
+00027920: 7365 5f74 7261 6e73 666f 726d 2863 5929  se_transform(cY)
+00027930: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00027940: 203d 2063 590d 0a0d 0a20 2020 2020 2020   = cY....       
+00027950: 2069 6620 6a75 7374 5f70 6f69 6e74 5f66   if just_point_f
+00027960: 6f72 6563 6173 743a 0d0a 2020 2020 2020  orecast:..      
+00027970: 2020 2020 2020 7265 7475 726e 2064 660d        return df.
+00027980: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00027990: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
+000279a0: 725f 666f 7265 6361 7374 2c20 6c6f 7765  r_forecast, lowe
+000279b0: 725f 666f 7265 6361 7374 203d 2050 6f69  r_forecast = Poi
+000279c0: 6e74 5f74 6f5f 5072 6f62 6162 696c 6974  nt_to_Probabilit
+000279d0: 7928 0d0a 2020 2020 2020 2020 2020 2020  y(..            
+000279e0: 2020 2020 7365 6c66 2e6c 6173 745f 7769      self.last_wi
+000279f0: 6e64 6f77 2c0d 0a20 2020 2020 2020 2020  ndow,..         
+00027a00: 2020 2020 2020 2064 662c 0d0a 2020 2020         df,..    
+00027a10: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00027a20: 6963 7469 6f6e 5f69 6e74 6572 7661 6c3d  iction_interval=
+00027a30: 7365 6c66 2e70 7265 6469 6374 696f 6e5f  self.prediction_
+00027a40: 696e 7465 7276 616c 2c0d 0a20 2020 2020  interval,..     
+00027a50: 2020 2020 2020 2020 2020 206d 6574 686f             metho
+00027a60: 643d 2769 6e66 6572 7265 645f 6e6f 726d  d='inferred_norm
+00027a70: 616c 272c 0d0a 2020 2020 2020 2020 2020  al',..          
+00027a80: 2020 290d 0a0d 0a20 2020 2020 2020 2020    )....         
+00027a90: 2020 2070 7265 6469 6374 5f72 756e 7469     predict_runti
+00027aa0: 6d65 203d 2064 6174 6574 696d 652e 6461  me = datetime.da
+00027ab0: 7465 7469 6d65 2e6e 6f77 2829 202d 2070  tetime.now() - p
+00027ac0: 7265 6469 6374 5374 6172 7454 696d 650d  redictStartTime.
+00027ad0: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
+00027ae0: 6469 6374 696f 6e20 3d20 5072 6564 6963  diction = Predic
+00027af0: 7469 6f6e 4f62 6a65 6374 280d 0a20 2020  tionObject(..   
+00027b00: 2020 2020 2020 2020 2020 2020 206d 6f64               mod
+00027b10: 656c 5f6e 616d 653d 7365 6c66 2e6e 616d  el_name=self.nam
+00027b20: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00027b30: 2020 2020 666f 7265 6361 7374 5f6c 656e      forecast_len
+00027b40: 6774 683d 666f 7265 6361 7374 5f6c 656e  gth=forecast_len
+00027b50: 6774 682c 0d0a 2020 2020 2020 2020 2020  gth,..          
+00027b60: 2020 2020 2020 666f 7265 6361 7374 5f69        forecast_i
+00027b70: 6e64 6578 3d64 662e 696e 6465 782c 0d0a  ndex=df.index,..
+00027b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027b90: 666f 7265 6361 7374 5f63 6f6c 756d 6e73  forecast_columns
+00027ba0: 3d64 662e 636f 6c75 6d6e 732c 0d0a 2020  =df.columns,..  
+00027bb0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+00027bc0: 7765 725f 666f 7265 6361 7374 3d6c 6f77  wer_forecast=low
+00027bd0: 6572 5f66 6f72 6563 6173 742c 0d0a 2020  er_forecast,..  
+00027be0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00027bf0: 7265 6361 7374 3d64 662c 0d0a 2020 2020  recast=df,..    
+00027c00: 2020 2020 2020 2020 2020 2020 7570 7065              uppe
+00027c10: 725f 666f 7265 6361 7374 3d75 7070 6572  r_forecast=upper
+00027c20: 5f66 6f72 6563 6173 742c 0d0a 2020 2020  _forecast,..    
+00027c30: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00027c40: 6963 7469 6f6e 5f69 6e74 6572 7661 6c3d  iction_interval=
+00027c50: 7365 6c66 2e70 7265 6469 6374 696f 6e5f  self.prediction_
+00027c60: 696e 7465 7276 616c 2c0d 0a20 2020 2020  interval,..     
+00027c70: 2020 2020 2020 2020 2020 2070 7265 6469             predi
+00027c80: 6374 5f72 756e 7469 6d65 3d70 7265 6469  ct_runtime=predi
+00027c90: 6374 5f72 756e 7469 6d65 2c0d 0a20 2020  ct_runtime,..   
+00027ca0: 2020 2020 2020 2020 2020 2020 2066 6974               fit
+00027cb0: 5f72 756e 7469 6d65 3d73 656c 662e 6669  _runtime=self.fi
+00027cc0: 745f 7275 6e74 696d 652c 0d0a 2020 2020  t_runtime,..    
+00027cd0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
+00027ce0: 6c5f 7061 7261 6d65 7465 7273 3d73 656c  l_parameters=sel
+00027cf0: 662e 6765 745f 7061 7261 6d73 2829 2c0d  f.get_params(),.
+00027d00: 0a20 2020 2020 2020 2020 2020 2029 0d0a  .            )..
+00027d10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00027d20: 726e 2070 7265 6469 6374 696f 6e0d 0a0d  rn prediction...
+00027d30: 0a20 2020 2064 6566 2067 6574 5f6e 6577  .    def get_new
+00027d40: 5f70 6172 616d 7328 7365 6c66 2c20 6d65  _params(self, me
+00027d50: 7468 6f64 3a20 7374 7220 3d20 2772 616e  thod: str = 'ran
+00027d60: 646f 6d27 293a 0d0a 2020 2020 2020 2020  dom'):..        
+00027d70: 2222 2252 6574 7572 6e20 6469 6374 206f  """Return dict o
+00027d80: 6620 6e65 7720 7061 7261 6d65 7465 7273  f new parameters
+00027d90: 2066 6f72 2070 6172 616d 6574 6572 2074   for parameter t
+00027da0: 756e 696e 672e 2222 220d 0a20 2020 2020  uning."""..     
+00027db0: 2020 2077 6e64 5f73 7a5f 6368 6f69 6365     wnd_sz_choice
+00027dc0: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+00027dd0: 285b 352c 2031 302c 2032 302c 2073 6561  ([5, 10, 20, sea
+00027de0: 736f 6e61 6c5f 696e 7428 295d 290d 0a20  sonal_int()]).. 
+00027df0: 2020 2020 2020 2069 6620 6d65 7468 6f64         if method
+00027e00: 2021 3d20 2264 6565 7022 3a0d 0a20 2020   != "deep":..   
+00027e10: 2020 2020 2020 2020 2077 6e64 5f73 7a5f           wnd_sz_
+00027e20: 6368 6f69 6365 203d 2077 6e64 5f73 7a5f  choice = wnd_sz_
+00027e30: 6368 6f69 6365 2069 6620 776e 645f 737a  choice if wnd_sz
+00027e40: 5f63 686f 6963 6520 3c20 3931 2065 6c73  _choice < 91 els
+00027e50: 6520 3930 0d0a 2020 2020 2020 2020 6d6f  e 90..        mo
+00027e60: 6465 6c5f 6368 6f69 6365 203d 2067 656e  del_choice = gen
+00027e70: 6572 6174 655f 7265 6772 6573 736f 725f  erate_regressor_
+00027e80: 7061 7261 6d73 280d 0a20 2020 2020 2020  params(..       
+00027e90: 2020 2020 206d 6f64 656c 5f64 6963 743d       model_dict=
+00027ea0: 736b 6c65 6172 6e5f 6d6f 6465 6c5f 6469  sklearn_model_di
+00027eb0: 6374 2c20 6d65 7468 6f64 3d6d 6574 686f  ct, method=metho
+00027ec0: 640d 0a20 2020 2020 2020 2029 0d0a 2020  d..        )..  
+00027ed0: 2020 2020 2020 6966 2022 7265 6772 6573        if "regres
+00027ee0: 736f 7222 2069 6e20 6d65 7468 6f64 3a0d  sor" in method:.
+00027ef0: 0a20 2020 2020 2020 2020 2020 2072 6567  .            reg
+00027f00: 7265 7373 696f 6e5f 7479 7065 5f63 686f  ression_type_cho
+00027f10: 6963 6520 3d20 2255 7365 7222 0d0a 2020  ice = "User"..  
+00027f20: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00027f30: 2020 2020 2020 2020 2072 6567 7265 7373           regress
+00027f40: 696f 6e5f 7479 7065 5f63 686f 6963 6520  ion_type_choice 
+00027f50: 3d20 7261 6e64 6f6d 2e63 686f 6963 6573  = random.choices
+00027f60: 285b 4e6f 6e65 2c20 2255 7365 7222 5d2c  ([None, "User"],
+00027f70: 2077 6569 6768 7473 3d5b 302e 382c 2030   weights=[0.8, 0
+00027f80: 2e32 5d29 5b0d 0a20 2020 2020 2020 2020  .2])[..         
+00027f90: 2020 2020 2020 2030 0d0a 2020 2020 2020         0..      
+00027fa0: 2020 2020 2020 5d0d 0a20 2020 2020 2020        ]..       
+00027fb0: 206e 6f72 6d61 6c69 7a65 5f77 696e 646f   normalize_windo
+00027fc0: 775f 6368 6f69 6365 203d 2072 616e 646f  w_choice = rando
+00027fd0: 6d2e 6368 6f69 6365 7328 5b54 7275 652c  m.choices([True,
+00027fe0: 2046 616c 7365 5d2c 205b 302e 312c 2030   False], [0.1, 0
+00027ff0: 2e39 5d29 5b30 5d0d 0a20 2020 2020 2020  .9])[0]..       
+00028000: 2064 6174 6570 6172 745f 6368 6f69 6365   datepart_choice
+00028010: 203d 2072 616e 646f 6d2e 6368 6f69 6365   = random.choice
+00028020: 7328 0d0a 2020 2020 2020 2020 2020 2020  s(..            
+00028030: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+00028040: 2020 2022 7265 6375 7272 696e 6722 2c0d     "recurring",.
+00028050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028060: 2022 7369 6d70 6c65 222c 0d0a 2020 2020   "simple",..    
+00028070: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
+00028080: 616e 6465 6422 2c0d 0a20 2020 2020 2020  anded",..       
+00028090: 2020 2020 2020 2020 2022 7369 6d70 6c65           "simple
+000280a0: 5f32 222c 0d0a 2020 2020 2020 2020 2020  _2",..          
+000280b0: 2020 2020 2020 2273 696d 706c 655f 6269        "simple_bi
+000280c0: 6e61 7269 7a65 6422 2c0d 0a20 2020 2020  narized",..     
+000280d0: 2020 2020 2020 2020 2020 2022 6578 7061             "expa
+000280e0: 6e64 6564 5f62 696e 6172 697a 6564 222c  nded_binarized",
+000280f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00028100: 2020 2763 6f6d 6d6f 6e5f 666f 7572 6965    'common_fourie
+00028110: 7227 2c0d 0a20 2020 2020 2020 2020 2020  r',..           
+00028120: 205d 2c0d 0a20 2020 2020 2020 2020 2020   ],..           
+00028130: 205b 302e 342c 2030 2e33 2c20 302e 332c   [0.4, 0.3, 0.3,
+00028140: 2030 2e33 2c20 302e 342c 2030 2e30 352c   0.3, 0.4, 0.05,
+00028150: 2030 2e30 355d 2c0d 0a20 2020 2020 2020   0.05],..       
+00028160: 2029 5b30 5d0d 0a20 2020 2020 2020 2072   )[0]..        r
+00028170: 6574 7572 6e20 7b0d 0a20 2020 2020 2020  eturn {..       
+00028180: 2020 2020 2027 7769 6e64 6f77 5f73 697a       'window_siz
+00028190: 6527 3a20 776e 645f 737a 5f63 686f 6963  e': wnd_sz_choic
+000281a0: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+000281b0: 276d 6178 5f68 6973 746f 7279 273a 2072  'max_history': r
+000281c0: 616e 646f 6d2e 6368 6f69 6365 7328 5b4e  andom.choices([N
+000281d0: 6f6e 652c 2031 3030 305d 2c20 5b30 2e35  one, 1000], [0.5
+000281e0: 2c20 302e 355d 295b 305d 2c0d 0a20 2020  , 0.5])[0],..   
+000281f0: 2020 2020 2020 2020 2027 6f6e 655f 7374           'one_st
+00028200: 6570 273a 2072 616e 646f 6d2e 6368 6f69  ep': random.choi
+00028210: 6365 285b 5472 7565 2c20 4661 6c73 655d  ce([True, False]
+00028220: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00028230: 276e 6f72 6d61 6c69 7a65 5f77 696e 646f  'normalize_windo
+00028240: 7727 3a20 6e6f 726d 616c 697a 655f 7769  w': normalize_wi
+00028250: 6e64 6f77 5f63 686f 6963 652c 0d0a 2020  ndow_choice,..  
+00028260: 2020 2020 2020 2020 2020 2770 726f 6365            'proce
+00028270: 7373 6564 5f79 273a 2072 616e 646f 6d2e  ssed_y': random.
+00028280: 6368 6f69 6365 285b 5472 7565 2c20 4661  choice([True, Fa
+00028290: 6c73 655d 292c 0d0a 2020 2020 2020 2020  lse]),..        
+000282a0: 2020 2020 2774 7261 6e73 666f 726d 6174      'transformat
+000282b0: 696f 6e5f 6469 6374 273a 204e 6f6e 652c  ion_dict': None,
+000282c0: 2020 2320 6173 7375 6d65 2074 6869 7320    # assume this 
+000282d0: 7061 7373 6564 2076 6961 2041 7574 6f54  passed via AutoT
+000282e0: 5320 7472 616e 7366 6f72 6d65 7220 6469  S transformer di
+000282f0: 6374 0d0a 2020 2020 2020 2020 2020 2020  ct..            
+00028300: 2764 6174 6570 6172 745f 6d65 7468 6f64  'datepart_method
+00028310: 273a 2064 6174 6570 6172 745f 6368 6f69  ': datepart_choi
+00028320: 6365 2c0d 0a20 2020 2020 2020 2020 2020  ce,..           
+00028330: 2027 7265 6772 6573 7369 6f6e 5f74 7970   'regression_typ
+00028340: 6527 3a20 7265 6772 6573 7369 6f6e 5f74  e': regression_t
+00028350: 7970 655f 6368 6f69 6365 2c0d 0a20 2020  ype_choice,..   
+00028360: 2020 2020 2020 2020 2027 7265 6772 6573           'regres
+00028370: 7369 6f6e 5f6d 6f64 656c 273a 206d 6f64  sion_model': mod
+00028380: 656c 5f63 686f 6963 652c 0d0a 2020 2020  el_choice,..    
+00028390: 2020 2020 7d0d 0a0d 0a20 2020 2064 6566      }....    def
+000283a0: 2067 6574 5f70 6172 616d 7328 7365 6c66   get_params(self
+000283b0: 293a 0d0a 2020 2020 2020 2020 2222 2252  ):..        """R
+000283c0: 6574 7572 6e20 6469 6374 206f 6620 6375  eturn dict of cu
+000283d0: 7272 656e 7420 7061 7261 6d65 7465 7273  rrent parameters
+000283e0: 2e22 2222 0d0a 2020 2020 2020 2020 7265  ."""..        re
+000283f0: 7475 726e 207b 0d0a 2020 2020 2020 2020  turn {..        
+00028400: 2020 2020 2777 696e 646f 775f 7369 7a65      'window_size
+00028410: 273a 2073 656c 662e 7769 6e64 6f77 5f73  ': self.window_s
+00028420: 697a 652c 0d0a 2020 2020 2020 2020 2020  ize,..          
+00028430: 2020 276d 6178 5f68 6973 746f 7279 273a    'max_history':
+00028440: 2073 656c 662e 6d61 785f 6869 7374 6f72   self.max_histor
+00028450: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+00028460: 276f 6e65 5f73 7465 7027 3a20 7365 6c66  'one_step': self
+00028470: 2e6f 6e65 5f73 7465 702c 0d0a 2020 2020  .one_step,..    
+00028480: 2020 2020 2020 2020 276e 6f72 6d61 6c69          'normali
+00028490: 7a65 5f77 696e 646f 7727 3a20 7365 6c66  ze_window': self
+000284a0: 2e6e 6f72 6d61 6c69 7a65 5f77 696e 646f  .normalize_windo
+000284b0: 772c 0d0a 2020 2020 2020 2020 2020 2020  w,..            
+000284c0: 2770 726f 6365 7373 6564 5f79 273a 2073  'processed_y': s
+000284d0: 656c 662e 7072 6f63 6573 7365 645f 792c  elf.processed_y,
+000284e0: 0d0a 2020 2020 2020 2020 2020 2020 2774  ..            't
+000284f0: 7261 6e73 666f 726d 6174 696f 6e5f 6469  ransformation_di
+00028500: 6374 273a 2073 656c 662e 7472 616e 7366  ct': self.transf
+00028510: 6f72 6d61 7469 6f6e 5f64 6963 742c 0d0a  ormation_dict,..
+00028520: 2020 2020 2020 2020 2020 2020 2764 6174              'dat
+00028530: 6570 6172 745f 6d65 7468 6f64 273a 2073  epart_method': s
+00028540: 656c 662e 6461 7465 7061 7274 5f6d 6574  elf.datepart_met
+00028550: 686f 642c 0d0a 2020 2020 2020 2020 2020  hod,..          
+00028560: 2020 2772 6567 7265 7373 696f 6e5f 7479    'regression_ty
+00028570: 7065 273a 2073 656c 662e 7265 6772 6573  pe': self.regres
+00028580: 7369 6f6e 5f74 7970 652c 0d0a 2020 2020  sion_type,..    
+00028590: 2020 2020 2020 2020 2772 6567 7265 7373          'regress
+000285a0: 696f 6e5f 6d6f 6465 6c27 3a20 7365 6c66  ion_model': self
+000285b0: 2e72 6567 7265 7373 696f 6e5f 6d6f 6465  .regression_mode
+000285c0: 6c2c 0d0a 2020 2020 2020 2020 7d0d 0a    l,..        }..
```

### Comparing `autots-0.6.8/autots/models/statsmodels.py` & `autots-0.6.9/autots/models/statsmodels.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/tfp.py` & `autots-0.6.9/autots/models/tfp.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/models/tide.py` & `autots-0.6.9/autots/models/tide.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/templates/general.py` & `autots-0.6.9/autots/templates/general.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/anomaly_utils.py` & `autots-0.6.9/autots/tools/anomaly_utils.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/calendar.py` & `autots-0.6.9/autots/tools/calendar.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/cointegration.py` & `autots-0.6.9/autots/tools/cointegration.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/cpu_count.py` & `autots-0.6.9/autots/tools/cpu_count.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/fast_kalman.py` & `autots-0.6.9/autots/tools/fast_kalman.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/fft.py` & `autots-0.6.9/autots/tools/fft.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/hierarchial.py` & `autots-0.6.9/autots/tools/hierarchial.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/holiday.py` & `autots-0.6.9/autots/tools/holiday.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/impute.py` & `autots-0.6.9/autots/tools/impute.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/lunar.py` & `autots-0.6.9/autots/tools/lunar.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/percentile.py` & `autots-0.6.9/autots/tools/percentile.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/probabilistic.py` & `autots-0.6.9/autots/tools/probabilistic.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/profile.py` & `autots-0.6.9/autots/tools/profile.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/regressor.py` & `autots-0.6.9/autots/tools/regressor.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/seasonal.py` & `autots-0.6.9/autots/tools/seasonal.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/shaping.py` & `autots-0.6.9/autots/tools/shaping.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/thresholding.py` & `autots-0.6.9/autots/tools/thresholding.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/autots/tools/transform.py` & `autots-0.6.9/autots/tools/transform.py`

 * *Files 0% similar despite different names*

```diff
@@ -5476,14 +5476,15 @@
         transformer_list = fast_transformer_dict.copy()
         del transformer_list["KalmanSmoothing"]  # potential kernel/RAM issues
         del transformer_list["SinTrend"]  # no observed issues, but for efficiency
         # del transformer_list["HolidayTransformer"]  # improved, should be good enough
         # temporary removal for testing
         del transformer_list["RegressionFilter"]
         del transformer_list["LocalLinearTrend"]
+        del transformer_list["ReplaceConstant"]
 
     if isinstance(transformer_list, dict):
         transformer_prob = list(transformer_list.values())
         transformer_list = [*transformer_list]
         # xsx = sum(transformer_prob)
         # if xsx != 1:
         #     transformer_prob = [float(i) / xsx for i in transformer_prob]
```

### Comparing `autots-0.6.8/autots/tools/window_functions.py` & `autots-0.6.9/autots/tools/window_functions.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/docs/conf.py` & `autots-0.6.9/docs/conf.py`

 * *Files 1% similar despite different names*

```diff
@@ -21,15 +21,15 @@
 copyright = u'%s, Colin Catlin' % date.today().year
 author = 'Colin Catlin'
 
 # The full version, including alpha/beta/rc tags
 # import AutoTS
 # from  AutoTS import __version__
 # release = __version__
-release = "0.6.8"
+release = "0.6.9"
 
 # -- General configuration ---------------------------------------------------
 
 # Add any Sphinx extension module names here, as strings. They can be
 # extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
 # ones.
 # Add napoleon to the extensions list
```

### Comparing `autots-0.6.8/pyproject.toml` & `autots-0.6.9/pyproject.toml`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 [build-system]
 requires = ["setuptools>=61.0"]
 build-backend = "setuptools.build_meta"
 
 [project]
 name = "autots"
-version = "0.6.8"
+version = "0.6.9"
 authors = [
   { name="Colin Catlin", email="colin.catlin@gmail.com" },
 ]
 description = "Automated Time Series Forecasting"
 readme = "README.md"
 requires-python = ">=3.6"
 license = {text = "MIT License"}
```

### Comparing `autots-0.6.8/setup.py` & `autots-0.6.9/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -28,15 +28,15 @@
 }
 
 with open("README.md", "r") as fh:
     long_description = fh.read()
 
 setuptools.setup(
     name="AutoTS",
-    version="0.6.8",
+    version="0.6.9",
     author="Colin Catlin",
     author_email="colin.catlin@syllepsis.live",
     description="Automated Time Series Forecasting",
     long_description=long_description,
     long_description_content_type="text/markdown",
     url="https://github.com/winedarksea/AutoTS",
     packages=setuptools.find_packages(),
```

### Comparing `autots-0.6.8/tests/test_anomalies.py` & `autots-0.6.9/tests/test_anomalies.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_autots.py` & `autots-0.6.9/tests/test_autots.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_calendar_holiday.py` & `autots-0.6.9/tests/test_calendar_holiday.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_cassandra.py` & `autots-0.6.9/tests/test_cassandra.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_event_forecasting.py` & `autots-0.6.9/tests/test_event_forecasting.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_impute.py` & `autots-0.6.9/tests/test_impute.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_metrics.py` & `autots-0.6.9/tests/test_metrics.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_percentile.py` & `autots-0.6.9/tests/test_percentile.py`

 * *Files identical despite different names*

### Comparing `autots-0.6.8/tests/test_regressor.py` & `autots-0.6.9/tests/test_regressor.py`

 * *Files identical despite different names*

