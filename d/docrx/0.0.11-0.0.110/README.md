# Comparing `tmp/docrx-0.0.11.tar.gz` & `tmp/docrx-0.0.110.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "docrx-0.0.11.tar", last modified: Tue Feb  6 18:35:37 2024, max compression
+gzip compressed data, was "docrx-0.0.110.tar", last modified: Fri May 17 15:46:55 2024, max compression
```

## Comparing `docrx-0.0.11.tar` & `docrx-0.0.110.tar`

### file list

```diff
@@ -1,49 +1,47 @@
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.710874 docrx-0.0.11/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)     1072 2023-08-15 18:10:00.000000 docrx-0.0.11/LICENSE.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)       46 2022-02-09 16:00:43.000000 docrx-0.0.11/MANIFEST.in
--rw-r--r--   0 tiago     (1000) tiago     (1000)     2328 2024-02-06 18:35:37.710874 docrx-0.0.11/PKG-INFO
--rw-rw-r--   0 tiago     (1000) tiago     (1000)      181 2024-01-25 19:19:24.000000 docrx-0.0.11/README.md
--rw-rw-r--   0 tiago     (1000) tiago     (1000)       28 2022-02-09 16:00:43.000000 docrx-0.0.11/requirements-dev.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)      372 2024-02-06 17:57:53.000000 docrx-0.0.11/requirements.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)     1270 2024-02-06 18:35:37.710874 docrx-0.0.11/setup.cfg
--rwxrwxr-x   0 tiago     (1000) tiago     (1000)     3722 2024-02-05 21:02:14.000000 docrx-0.0.11/setup.py
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.690874 docrx-0.0.11/src/
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.710874 docrx-0.0.11/src/docrx.egg-info/
--rw-r--r--   0 tiago     (1000) tiago     (1000)     2328 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/PKG-INFO
--rw-rw-r--   0 tiago     (1000) tiago     (1000)     1121 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/SOURCES.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        1 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/dependency_links.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        1 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/not-zip-safe
--rw-rw-r--   0 tiago     (1000) tiago     (1000)      418 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/requires.txt
--rw-rw-r--   0 tiago     (1000) tiago     (1000)       14 2024-02-06 18:35:37.000000 docrx-0.0.11/src/docrx.egg-info/top_level.txt
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.698874 docrx-0.0.11/src/wrapper/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   454898 2024-02-06 18:35:37.000000 docrx-0.0.11/src/wrapper/Process.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.11/src/wrapper/__init__.py
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.702874 docrx-0.0.11/src/wrapper/core/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   308838 2024-02-06 18:34:22.000000 docrx-0.0.11/src/wrapper/core/DocumentSearch.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   478765 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/core/DocumentSearchSB.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   530365 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/core/DocumentSearchTD.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   365083 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/core/File.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   276969 2024-01-25 19:19:24.000000 docrx-0.0.11/src/wrapper/core/Image.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   276407 2024-01-25 19:19:24.000000 docrx-0.0.11/src/wrapper/core/PDF.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   278847 2024-01-25 19:19:24.000000 docrx-0.0.11/src/wrapper/core/Video.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.11/src/wrapper/core/__init__.py
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   207171 2023-08-16 19:41:41.000000 docrx-0.0.11/src/wrapper/core/test2.c
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.706874 docrx-0.0.11/src/wrapper/infra/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   249742 2023-08-16 20:21:24.000000 docrx-0.0.11/src/wrapper/infra/AbsctractGenerator.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   259869 2023-08-16 20:23:30.000000 docrx-0.0.11/src/wrapper/infra/DocumentSimilarityCalculator.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   363239 2023-08-16 20:24:23.000000 docrx-0.0.11/src/wrapper/infra/ImageObjectsExtractor.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   404869 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/infra/LanguageDetector.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   246495 2023-08-16 20:24:23.000000 docrx-0.0.11/src/wrapper/infra/NERExtractor.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   363225 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/infra/PreProcessing.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   475478 2024-02-06 18:34:23.000000 docrx-0.0.11/src/wrapper/infra/TextExtractor.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   272002 2023-08-18 16:35:55.000000 docrx-0.0.11/src/wrapper/infra/TextFeatureExtractor.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   345115 2023-08-21 16:33:02.000000 docrx-0.0.11/src/wrapper/infra/VideoObjectsExtractor.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   247450 2024-01-25 19:19:24.000000 docrx-0.0.11/src/wrapper/infra/WordFixer.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.11/src/wrapper/infra/__init__.py
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.706874 docrx-0.0.11/src/wrapper/infra/res/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.11/src/wrapper/infra/res/__init__.py
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   248716 2024-02-06 18:35:37.000000 docrx-0.0.11/src/wrapper/test.c
-drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-02-06 18:35:37.710874 docrx-0.0.11/tests/
--rw-rw-r--   0 tiago     (1000) tiago     (1000)   294051 2023-08-18 15:35:17.000000 docrx-0.0.11/tests/ProcessPDFImageTest.c
--rw-rw-r--   0 tiago     (1000) tiago     (1000)      287 2022-02-09 16:00:43.000000 docrx-0.0.11/tests/test_basics.py
--rw-rw-r--   0 tiago     (1000) tiago     (1000)      228 2022-02-09 16:00:43.000000 docrx-0.0.11/tests/test_data.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.839737 docrx-0.0.110/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)     1072 2023-08-15 18:10:00.000000 docrx-0.0.110/LICENSE.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)       46 2022-02-09 16:00:43.000000 docrx-0.0.110/MANIFEST.in
+-rw-r--r--   0 tiago     (1000) tiago     (1000)     2421 2024-05-17 15:46:55.839737 docrx-0.0.110/PKG-INFO
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)      181 2024-01-25 19:19:24.000000 docrx-0.0.110/README.md
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)       42 2024-04-03 16:42:12.000000 docrx-0.0.110/requirements-dev.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)      404 2024-05-16 18:22:18.000000 docrx-0.0.110/requirements.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)     1271 2024-05-17 15:46:55.839737 docrx-0.0.110/setup.cfg
+-rwxrwxr-x   0 tiago     (1000) tiago     (1000)     3348 2024-05-17 15:44:47.000000 docrx-0.0.110/setup.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.819737 docrx-0.0.110/src/
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.839737 docrx-0.0.110/src/docrx.egg-info/
+-rw-r--r--   0 tiago     (1000) tiago     (1000)     2421 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/PKG-INFO
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)     1094 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/SOURCES.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        1 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/dependency_links.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        1 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/not-zip-safe
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)      464 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/requires.txt
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        8 2024-05-17 15:46:55.000000 docrx-0.0.110/src/docrx.egg-info/top_level.txt
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.827737 docrx-0.0.110/src/wrapper/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   491184 2024-05-17 15:46:55.000000 docrx-0.0.110/src/wrapper/Process.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.110/src/wrapper/__init__.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.835737 docrx-0.0.110/src/wrapper/core/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   308838 2024-04-03 16:41:28.000000 docrx-0.0.110/src/wrapper/core/DocumentSearch.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   479564 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/DocumentSearchSB.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   530365 2024-05-03 22:12:32.000000 docrx-0.0.110/src/wrapper/core/DocumentSearchTD.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   368433 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/File.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   279948 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/Image.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   278026 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/PDF.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   315197 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/SentenceTransformerVectorizer.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   293392 2024-05-17 15:45:55.000000 docrx-0.0.110/src/wrapper/core/Vectorizer.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   278997 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/core/Video.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.110/src/wrapper/core/__init__.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.839737 docrx-0.0.110/src/wrapper/infra/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   249742 2023-08-16 20:21:24.000000 docrx-0.0.110/src/wrapper/infra/AbsctractGenerator.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   277587 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/DocLanguage.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   363239 2023-08-16 20:24:23.000000 docrx-0.0.110/src/wrapper/infra/ImageObjectsExtractor.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   487999 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/LanguageDetector.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   187001 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/ModelType.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   246255 2024-05-03 22:12:32.000000 docrx-0.0.110/src/wrapper/infra/NERExtractor.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   382373 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/PreProcessing.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   476607 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/TextExtractor.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   345115 2023-08-21 16:33:02.000000 docrx-0.0.110/src/wrapper/infra/VideoObjectsExtractor.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)   278651 2024-05-17 15:45:56.000000 docrx-0.0.110/src/wrapper/infra/WordFixer.c
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.110/src/wrapper/infra/__init__.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.839737 docrx-0.0.110/src/wrapper/infra/res/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)        0 2023-08-15 18:18:13.000000 docrx-0.0.110/src/wrapper/infra/res/__init__.py
+drwxrwxr-x   0 tiago     (1000) tiago     (1000)        0 2024-05-17 15:46:55.839737 docrx-0.0.110/tests/
+-rw-rw-r--   0 tiago     (1000) tiago     (1000)     3015 2024-05-16 18:46:42.000000 docrx-0.0.110/tests/test_TestProcessPDFImage.py
```

### Comparing `docrx-0.0.11/LICENSE.txt` & `docrx-0.0.110/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `docrx-0.0.11/PKG-INFO` & `docrx-0.0.110/PKG-INFO`

 * *Files 20% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: docrx
-Version: 0.0.11
+Version: 0.0.110
 Summary: search in documents
 Author: Tiago Zamperini
 Author-email: tiagozamperini@live.com
 License: MIT
 Classifier: Development Status :: 1 - Planning
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Intended Audience :: Education
@@ -41,21 +41,23 @@
 Requires-Dist: pytesseract==0.3.10
 Requires-Dist: nltk==3.8.1
 Requires-Dist: gensim==4.3.1
 Requires-Dist: spacy==3.6.0
 Requires-Dist: Pillow==10.2.0
 Requires-Dist: transformers==4.33.3
 Requires-Dist: sentence-transformers==2.2.2
-Requires-Dist: pyspellchecker==0.7.2
+Requires-Dist: pyspellchecker==0.8.1
 Requires-Dist: googletrans==4.0.0rc1
 Requires-Dist: PyMuPDF==1.23.20
-Requires-Dist: ocrmypdf==16.0.4
+Requires-Dist: ocrmypdf==16.2.0
+Requires-Dist: lingua-language-detector==2.0.2
 Provides-Extra: dev
 Requires-Dist: pytest>=5.1; extra == "dev"
 Requires-Dist: flake8>=3.7; extra == "dev"
+Requires-Dist: Cython==3.0.0; extra == "dev"
 Provides-Extra: docs
 Requires-Dist: sphinx; extra == "docs"
 Requires-Dist: sphinx-rtd-theme; extra == "docs"
 
 docrx
 ======================
```

### Comparing `docrx-0.0.11/setup.cfg` & `docrx-0.0.110/setup.cfg`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [metadata]
 name = docrx
-version = 0.0.11
+version = 0.0.110
 description = search in documents
 long_description = file: README.md
 long_description_content_type = text/markdown
 license = MIT
 author = Tiago Zamperini
 author_email = tiagozamperini@live.com
 classifiers =
```

### Comparing `docrx-0.0.11/setup.py` & `docrx-0.0.110/setup.py`

 * *Files 8% similar despite different names*

```diff
@@ -25,42 +25,34 @@
                 sfile = path + ext
             sources.append(sfile)
         extension.sources[:] = sources
     return extensions
 
 
 extensions = [
-    Extension("wrapper.test", ["src/wrapper/test.pyx"]),
-    Extension("wrapper.core.test2", ["src/wrapper/core/test2.pyx"]),
     Extension("wrapper.Process", ["src/wrapper/Process.pyx"]),
     Extension("wrapper.core.DocumentSearch", ["src/wrapper/core/DocumentSearch.pyx"]),
     Extension("wrapper.core.DocumentSearchTD", ["src/wrapper/core/DocumentSearchTD.pyx"]),
     Extension("wrapper.core.DocumentSearchSB", ["src/wrapper/core/DocumentSearchSB.pyx"]),
     Extension("wrapper.core.File", ["src/wrapper/core/File.pyx"]),
     Extension("wrapper.core.Image", ["src/wrapper/core/Image.pyx"]),
     Extension("wrapper.core.PDF", ["src/wrapper/core/PDF.pyx"]),
     Extension("wrapper.core.Video", ["src/wrapper/core/Video.pyx"]),
+    Extension("wrapper.core.Vectorizer", ["src/wrapper/core/Vectorizer.pyx"]),
+    Extension("wrapper.core.SentenceTransformerVectorizer", ["src/wrapper/core/SentenceTransformerVectorizer.pyx"]),
     Extension("wrapper.infra.AbsctractGenerator", ["src/wrapper/infra/AbsctractGenerator.pyx"]),
-    Extension("wrapper.infra.DocumentSimilarityCalculator", ["src/wrapper/infra/DocumentSimilarityCalculator.pyx"]),
     Extension("wrapper.infra.ImageObjectsExtractor", ["src/wrapper/infra/ImageObjectsExtractor.pyx"]),
     Extension("wrapper.infra.LanguageDetector", ["src/wrapper/infra/LanguageDetector.pyx"]),
     Extension("wrapper.infra.NERExtractor", ["src/wrapper/infra/NERExtractor.pyx"]),
     Extension("wrapper.infra.PreProcessing", ["src/wrapper/infra/PreProcessing.pyx"]),
     Extension("wrapper.infra.TextExtractor", ["src/wrapper/infra/TextExtractor.pyx"]),
-    Extension("wrapper.infra.TextFeatureExtractor", ["src/wrapper/infra/TextFeatureExtractor.pyx"]),
     Extension("wrapper.infra.VideoObjectsExtractor", ["src/wrapper/infra/VideoObjectsExtractor.pyx"]),
     Extension("wrapper.infra.WordFixer", ["src/wrapper/infra/WordFixer.pyx"]),
-    Extension("tests.ProcessPDFImageTest", ["tests/ProcessPDFImageTest.pyx"]),
-    # Extension("cypack.utils", ["src/cypack/utils.pyx"]),
-    # Extension("cypack.answer", ["src/cypack/answer.pyx"]),
-    # Extension("cypack.fibonacci", ["src/cypack/fibonacci.pyx"]),
-    # Extension(
-    #     "cypack.sub.wrong",
-    #     ["src/cypack/sub/wrong.pyx", "src/cypack/sub/helper.c"]
-    # ),
+    Extension("wrapper.infra.DocLanguage", ["src/wrapper/infra/DocLanguage.pyx"]),
+    Extension("wrapper.infra.ModelType", ["src/wrapper/infra/ModelType.pyx"]),
 ]
 
 CYTHONIZE = bool(int(os.getenv("CYTHONIZE", 0))) and cythonize is not None
 
 if CYTHONIZE:
     compiler_directives = {"language_level": 3, "embedsignature": True}
     extensions = cythonize(extensions, compiler_directives=compiler_directives)
```

### Comparing `docrx-0.0.11/src/docrx.egg-info/PKG-INFO` & `docrx-0.0.110/src/docrx.egg-info/PKG-INFO`

 * *Files 20% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: docrx
-Version: 0.0.11
+Version: 0.0.110
 Summary: search in documents
 Author: Tiago Zamperini
 Author-email: tiagozamperini@live.com
 License: MIT
 Classifier: Development Status :: 1 - Planning
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Intended Audience :: Education
@@ -41,21 +41,23 @@
 Requires-Dist: pytesseract==0.3.10
 Requires-Dist: nltk==3.8.1
 Requires-Dist: gensim==4.3.1
 Requires-Dist: spacy==3.6.0
 Requires-Dist: Pillow==10.2.0
 Requires-Dist: transformers==4.33.3
 Requires-Dist: sentence-transformers==2.2.2
-Requires-Dist: pyspellchecker==0.7.2
+Requires-Dist: pyspellchecker==0.8.1
 Requires-Dist: googletrans==4.0.0rc1
 Requires-Dist: PyMuPDF==1.23.20
-Requires-Dist: ocrmypdf==16.0.4
+Requires-Dist: ocrmypdf==16.2.0
+Requires-Dist: lingua-language-detector==2.0.2
 Provides-Extra: dev
 Requires-Dist: pytest>=5.1; extra == "dev"
 Requires-Dist: flake8>=3.7; extra == "dev"
+Requires-Dist: Cython==3.0.0; extra == "dev"
 Provides-Extra: docs
 Requires-Dist: sphinx; extra == "docs"
 Requires-Dist: sphinx-rtd-theme; extra == "docs"
 
 docrx
 ======================
```

### Comparing `docrx-0.0.11/src/docrx.egg-info/SOURCES.txt` & `docrx-0.0.110/src/docrx.egg-info/SOURCES.txt`

 * *Files 17% similar despite different names*

```diff
@@ -9,32 +9,30 @@
 src/docrx.egg-info/SOURCES.txt
 src/docrx.egg-info/dependency_links.txt
 src/docrx.egg-info/not-zip-safe
 src/docrx.egg-info/requires.txt
 src/docrx.egg-info/top_level.txt
 src/wrapper/Process.c
 src/wrapper/__init__.py
-src/wrapper/test.c
 src/wrapper/core/DocumentSearch.c
 src/wrapper/core/DocumentSearchSB.c
 src/wrapper/core/DocumentSearchTD.c
 src/wrapper/core/File.c
 src/wrapper/core/Image.c
 src/wrapper/core/PDF.c
+src/wrapper/core/SentenceTransformerVectorizer.c
+src/wrapper/core/Vectorizer.c
 src/wrapper/core/Video.c
 src/wrapper/core/__init__.py
-src/wrapper/core/test2.c
 src/wrapper/infra/AbsctractGenerator.c
-src/wrapper/infra/DocumentSimilarityCalculator.c
+src/wrapper/infra/DocLanguage.c
 src/wrapper/infra/ImageObjectsExtractor.c
 src/wrapper/infra/LanguageDetector.c
+src/wrapper/infra/ModelType.c
 src/wrapper/infra/NERExtractor.c
 src/wrapper/infra/PreProcessing.c
 src/wrapper/infra/TextExtractor.c
-src/wrapper/infra/TextFeatureExtractor.c
 src/wrapper/infra/VideoObjectsExtractor.c
 src/wrapper/infra/WordFixer.c
 src/wrapper/infra/__init__.py
 src/wrapper/infra/res/__init__.py
-tests/ProcessPDFImageTest.c
-tests/test_basics.py
-tests/test_data.py
+tests/test_TestProcessPDFImage.py
```

### Comparing `docrx-0.0.11/src/wrapper/Process.c` & `docrx-0.0.110/src/wrapper/Process.c`

 * *Files 5% similar despite different names*

```diff
@@ -1354,14 +1354,24 @@
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
+struct __pyx_defaults;
+typedef struct __pyx_defaults __pyx_defaults;
+struct __pyx_defaults1;
+typedef struct __pyx_defaults1 __pyx_defaults1;
+struct __pyx_defaults {
+  PyObject *__pyx_arg_type;
+};
+struct __pyx_defaults1 {
+  PyObject *__pyx_arg_translate_to;
+};
 /* #### Code section: utility_code_proto ### */
 
 /* --- Runtime support code (head) --- */
 /* Refnanny.proto */
 #ifndef CYTHON_REFNANNY
   #define CYTHON_REFNANNY 0
 #endif
@@ -1555,23 +1565,14 @@
 
 /* ParseKeywords.proto */
 static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
     PyObject **argnames[],
     PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
     const char* function_name);
 
-/* PyObjectSetAttrStr.proto */
-#if CYTHON_USE_TYPE_SLOTS
-#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
-#else
-#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
-#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
-#endif
-
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1662,16 +1663,34 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* RaiseException.proto */
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
+/* PyObjectSetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
+#else
+#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
+#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
+#endif
+
+/* RaiseTooManyValuesToUnpack.proto */
+static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);
+
+/* RaiseNeedMoreValuesToUnpack.proto */
+static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);
+
+/* IterFinish.proto */
+static CYTHON_INLINE int __Pyx_IterFinish(void);
+
+/* UnpackItemEndCheck.proto */
+static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);
 
 /* PyObjectFormatSimple.proto */
 #if CYTHON_COMPILING_IN_PYPY
     #define __Pyx_PyObject_FormatSimple(s, f) (\
         likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
         PyObject_Format(s, f))
 #elif PY_MAJOR_VERSION < 3
@@ -1691,14 +1710,17 @@
         PyObject_Format(s, f))
 #endif
 
 /* JoinPyUnicode.proto */
 static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
                                       Py_UCS4 max_char);
 
+/* RaiseException.proto */
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
+
 /* PyObjectCallOneArg.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
 
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
 /* ImportFrom.proto */
@@ -1706,17 +1728,14 @@
 
 /* ImportDottedModule.proto */
 static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
 #if PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
 #endif
 
-/* PyIntCompare.proto */
-static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace);
-
 /* SetNameInClass.proto */
 #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
 #define __Pyx_SetNameInClass(ns, name, value)\
     (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
 #elif CYTHON_COMPILING_IN_CPYTHON
 #define __Pyx_SetNameInClass(ns, name, value)\
     (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
@@ -1959,42 +1978,40 @@
 extern int __pyx_module_is_main_wrapper__Process;
 int __pyx_module_is_main_wrapper__Process = 0;
 
 /* Implementation of "wrapper.Process" */
 /* #### Code section: global_var ### */
 static PyObject *__pyx_builtin_staticmethod;
 /* #### Code section: string_decls ### */
-static const char __pyx_k__2[] = "/";
-static const char __pyx_k__4[] = "";
-static const char __pyx_k__9[] = ".";
-static const char __pyx_k_en[] = "en";
-static const char __pyx_k_es[] = "es";
+static const char __pyx_k_[] = "/";
+static const char __pyx_k_SB[] = "SB";
+static const char __pyx_k_TD[] = "TD";
+static const char __pyx_k__3[] = "";
+static const char __pyx_k_id[] = "id";
 static const char __pyx_k_os[] = "os";
-static const char __pyx_k_pt[] = "pt";
-static const char __pyx_k_sb[] = "sb";
-static const char __pyx_k_td[] = "td";
 static const char __pyx_k_PDF[] = "PDF";
-static const char __pyx_k__10[] = "*";
-static const char __pyx_k__32[] = "?";
+static const char __pyx_k__12[] = ".";
+static const char __pyx_k__13[] = "*";
+static const char __pyx_k__34[] = "?";
 static const char __pyx_k_csv[] = ".csv";
 static const char __pyx_k_doc[] = "doc";
-static const char __pyx_k_get[] = "get";
 static const char __pyx_k_jpg[] = ".jpg";
 static const char __pyx_k_mp4[] = ".mp4";
 static const char __pyx_k_pdf[] = ".pdf";
 static const char __pyx_k_png[] = ".png";
 static const char __pyx_k_str[] = "str";
 static const char __pyx_k_txt[] = ".txt";
 static const char __pyx_k_wav[] = ".wav";
 static const char __pyx_k_File[] = "File";
 static const char __pyx_k_None[] = "None";
 static const char __pyx_k_bool[] = "bool";
 static const char __pyx_k_dict[] = "__dict__";
 static const char __pyx_k_docx[] = ".docx";
 static const char __pyx_k_file[] = "file";
+static const char __pyx_k_info[] = "info";
 static const char __pyx_k_init[] = "__init__";
 static const char __pyx_k_join[] = "join";
 static const char __pyx_k_jpeg[] = "jpeg";
 static const char __pyx_k_load[] = "load";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_nltk[] = "nltk";
@@ -2002,114 +2019,120 @@
 static const char __pyx_k_path[] = "path";
 static const char __pyx_k_rslp[] = "rslp";
 static const char __pyx_k_self[] = "self";
 static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
 static const char __pyx_k_text[] = "text";
 static const char __pyx_k_type[] = "type";
-static const char __pyx_k_DEBUG[] = "DEBUG";
 static const char __pyx_k_Image[] = "Image";
+static const char __pyx_k_Query[] = " - Query: ";
 static const char __pyx_k_Video[] = "Video";
 static const char __pyx_k_doc_2[] = "__doc__";
-static const char __pyx_k_level[] = "level";
+static const char __pyx_k_infra[] = "infra";
 static const char __pyx_k_punkt[] = "punkt";
 static const char __pyx_k_query[] = "query";
 static const char __pyx_k_super[] = "super";
+static const char __pyx_k_value[] = "value";
 static const char __pyx_k_exists[] = "exists";
-static const char __pyx_k_format[] = "format";
 static const char __pyx_k_import[] = "__import__";
 static const char __pyx_k_jpeg_2[] = ".jpeg";
 static const char __pyx_k_models[] = "/models";
 static const char __pyx_k_module[] = "__module__";
 static const char __pyx_k_return[] = "return";
 static const char __pyx_k_search[] = "search";
 static const char __pyx_k_system[] = "system";
+static const char __pyx_k_ENGLISH[] = "ENGLISH";
 static const char __pyx_k_Process[] = "Process";
-static const char __pyx_k_WARNING[] = "WARNING";
 static const char __pyx_k_compile[] = "compile";
-static const char __pyx_k_english[] = "english";
-static const char __pyx_k_environ[] = "environ";
 static const char __pyx_k_isExist[] = "isExist";
 static const char __pyx_k_logging[] = "logging";
 static const char __pyx_k_prepare[] = "__prepare__";
-static const char __pyx_k_spanish[] = "spanish";
 static const char __pyx_k_warning[] = "warning";
 static const char __pyx_k_wordnet[] = "wordnet";
 static const char __pyx_k_core_PDF[] = "core.PDF";
 static const char __pyx_k_download[] = "download";
 static const char __pyx_k_endswith[] = "endswith";
-static const char __pyx_k_filename[] = "filename";
 static const char __pyx_k_makedirs[] = "makedirs";
 static const char __pyx_k_modeldir[] = "modeldir";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
+static const char __pyx_k_ModelType[] = "ModelType";
 static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_core_File[] = "core.File";
 static const char __pyx_k_file_path[] = "file_path";
 static const char __pyx_k_metaclass[] = "__metaclass__";
 static const char __pyx_k_stopwords[] = "stopwords";
 static const char __pyx_k_train_doc[] = "train_doc";
 static const char __pyx_k_core_Image[] = "core.Image";
 static const char __pyx_k_core_Video[] = "core.Video";
-static const char __pyx_k_portuguese[] = "portuguese";
+static const char __pyx_k_file_index[] = "file_index";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_annotations[] = "__annotations__";
-static const char __pyx_k_basicConfig[] = "basicConfig";
 static const char __pyx_k_compile_doc[] = "compile_doc";
+static const char __pyx_k_detect_lang[] = "detect_lang";
 static const char __pyx_k_train_model[] = "train_model";
 static const char __pyx_k_Process_load[] = "Process.load";
+static const char __pyx_k_download_dir[] = "download_dir";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_staticmethod[] = "staticmethod";
 static const char __pyx_k_translate_to[] = "translate_to";
 static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_Process___init[] = "Process.__init__";
 static const char __pyx_k_Process_search[] = "Process.search";
+static const char __pyx_k_lang_to_search[] = "lang_to_search";
 static const char __pyx_k_Process_compile[] = "Process.compile";
 static const char __pyx_k_complement_path[] = "complement_path";
 static const char __pyx_k_create_features[] = "create_features";
 static const char __pyx_k_document_search[] = "document_search";
+static const char __pyx_k_infra_ModelType[] = "infra.ModelType";
 static const char __pyx_k_wrapper_Process[] = "wrapper.Process";
 static const char __pyx_k_DocumentSearchSB[] = "DocumentSearchSB";
 static const char __pyx_k_DocumentSearchTD[] = "DocumentSearchTD";
+static const char __pyx_k_LanguageDetector[] = "LanguageDetector";
 static const char __pyx_k_results_per_page[] = "results_per_page";
 static const char __pyx_k_search_documents[] = "search_documents";
+static const char __pyx_k_Language_detected[] = "Language detected: ";
 static const char __pyx_k_Process_train_doc[] = "Process.train_doc";
 static const char __pyx_k_compile_and_train[] = "compile_and_train";
+static const char __pyx_k_detected_language[] = "detected_language";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_is_detect_language[] = "is_detect_language";
 static const char __pyx_k_Process_compile_doc[] = "Process.compile_doc";
-static const char __pyx_k_model_not_supported[] = "model not supported.";
-static const char __pyx_k_supported_languages[] = "supported_languages";
+static const char __pyx_k_starting_process_pyx[] = "starting process.pyx";
+static const char __pyx_k_Downloading_resources[] = "Downloading resources...";
 static const char __pyx_k_core_DocumentSearchSB[] = "core.DocumentSearchSB";
 static const char __pyx_k_core_DocumentSearchTD[] = "core.DocumentSearchTD";
 static const char __pyx_k_create_batch_pipeline[] = "create_batch_pipeline";
 static const char __pyx_k_Not_supported_document[] = "Not supported document";
 static const char __pyx_k_src_wrapper_Process_pyx[] = "src/wrapper/Process.pyx";
-static const char __pyx_k_detected_search_language[] = "detected_search_language";
 static const char __pyx_k_Process_compile_and_train[] = "Process.compile_and_train";
+static const char __pyx_k_Downloading_more_resources[] = "Downloading more resources...";
+static const char __pyx_k_Finish_Downloading_resources[] = "Finish Downloading resources...";
 static const char __pyx_k_Process_create_batch_pipeline[] = "Process.create_batch_pipeline";
-static const char __pyx_k_asctime_s_levelname_s_message_s[] = "%(asctime)s - %(levelname)s - %(message)s";
 static const char __pyx_k_python3_m_spacy_download_xx_ent[] = "python3 -m spacy download xx_ent_wiki_sm";
 static const char __pyx_k_Not_supported_extension_for_docu[] = "Not supported extension for document ";
 static const char __pyx_k_Process_create_online_pipeline_m[] = "Process.create_online_pipeline_multilingual";
 static const char __pyx_k_Without_support_for_document_wit[] = "Without support for document with extension .txt, .csv or .docx.";
-static const char __pyx_k_background_tasks_server_logs_doc[] = "background_tasks/server/logs/docrx.log";
 static const char __pyx_k_create_online_pipeline_multiling[] = "create_online_pipeline_multilingual";
 static const char __pyx_k_python3_m_spacy_download_pt_core[] = "python3 -m spacy download pt_core_news_sm";
 /* #### Code section: decls ### */
+static PyObject *__pyx_pf_7wrapper_7Process___defaults__(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
 static PyObject *__pyx_pf_7wrapper_7Process_7Process___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to, PyObject *__pyx_v_type); /* proto */
+static PyObject *__pyx_pf_7wrapper_7Process_2__defaults__(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_2create_online_pipeline_multilingual(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_4create_batch_pipeline(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_6compile_and_train(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path); /* proto */
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_8compile_doc(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path); /* proto */
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_6compile_and_train(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path, PyObject *__pyx_v_file_index); /* proto */
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_8compile_doc(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path, PyObject *__pyx_v_file_index); /* proto */
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_10train_doc(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_file); /* proto */
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_12search(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_query, PyObject *__pyx_v_detected_search_language, PyObject *__pyx_v_page, PyObject *__pyx_v_results_per_page); /* proto */
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_12search(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_query, PyObject *__pyx_v_detected_language, PyObject *__pyx_v_page, PyObject *__pyx_v_results_per_page); /* proto */
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_14compile(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_complement_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_16load(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_16load(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_download_dir); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -2131,48 +2154,53 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_n_s_DEBUG;
-  PyObject *__pyx_n_u_DEBUG;
+  PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
   PyObject *__pyx_n_s_DocumentSearchSB;
   PyObject *__pyx_n_s_DocumentSearchTD;
+  PyObject *__pyx_kp_u_Downloading_more_resources;
+  PyObject *__pyx_kp_u_Downloading_resources;
+  PyObject *__pyx_n_s_ENGLISH;
   PyObject *__pyx_n_s_File;
+  PyObject *__pyx_kp_u_Finish_Downloading_resources;
   PyObject *__pyx_n_s_Image;
+  PyObject *__pyx_n_s_LanguageDetector;
+  PyObject *__pyx_kp_u_Language_detected;
+  PyObject *__pyx_n_s_ModelType;
   PyObject *__pyx_n_s_None;
   PyObject *__pyx_kp_u_Not_supported_document;
   PyObject *__pyx_kp_u_Not_supported_extension_for_docu;
   PyObject *__pyx_n_s_PDF;
   PyObject *__pyx_n_s_Process;
   PyObject *__pyx_n_s_Process___init;
   PyObject *__pyx_n_s_Process_compile;
   PyObject *__pyx_n_s_Process_compile_and_train;
   PyObject *__pyx_n_s_Process_compile_doc;
   PyObject *__pyx_n_s_Process_create_batch_pipeline;
   PyObject *__pyx_n_s_Process_create_online_pipeline_m;
   PyObject *__pyx_n_s_Process_load;
   PyObject *__pyx_n_s_Process_search;
   PyObject *__pyx_n_s_Process_train_doc;
+  PyObject *__pyx_kp_u_Query;
+  PyObject *__pyx_n_s_SB;
+  PyObject *__pyx_n_s_TD;
   PyObject *__pyx_n_s_Video;
-  PyObject *__pyx_n_s_WARNING;
   PyObject *__pyx_kp_u_Without_support_for_document_wit;
-  PyObject *__pyx_n_s__10;
-  PyObject *__pyx_kp_u__2;
-  PyObject *__pyx_n_s__32;
-  PyObject *__pyx_kp_u__4;
-  PyObject *__pyx_kp_u__9;
+  PyObject *__pyx_kp_u__12;
+  PyObject *__pyx_n_s__13;
+  PyObject *__pyx_kp_u__3;
+  PyObject *__pyx_n_s__34;
   PyObject *__pyx_n_s_annotations;
-  PyObject *__pyx_kp_u_asctime_s_levelname_s_message_s;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_kp_u_background_tasks_server_logs_doc;
   PyObject *__pyx_n_s_base_path;
-  PyObject *__pyx_n_s_basicConfig;
   PyObject *__pyx_n_s_bool;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_compile;
   PyObject *__pyx_n_s_compile_and_train;
   PyObject *__pyx_n_s_compile_doc;
   PyObject *__pyx_n_s_complement_path;
   PyObject *__pyx_n_s_core_DocumentSearchSB;
@@ -2181,127 +2209,125 @@
   PyObject *__pyx_n_s_core_Image;
   PyObject *__pyx_n_s_core_PDF;
   PyObject *__pyx_n_s_core_Video;
   PyObject *__pyx_n_s_create_batch_pipeline;
   PyObject *__pyx_n_s_create_features;
   PyObject *__pyx_n_s_create_online_pipeline_multiling;
   PyObject *__pyx_kp_u_csv;
-  PyObject *__pyx_n_s_detected_search_language;
+  PyObject *__pyx_n_s_detect_lang;
+  PyObject *__pyx_n_s_detected_language;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_doc;
   PyObject *__pyx_n_s_doc_2;
   PyObject *__pyx_n_s_document_search;
   PyObject *__pyx_kp_u_docx;
   PyObject *__pyx_n_s_download;
-  PyObject *__pyx_n_u_en;
+  PyObject *__pyx_n_s_download_dir;
   PyObject *__pyx_n_s_endswith;
-  PyObject *__pyx_n_u_english;
-  PyObject *__pyx_n_s_environ;
-  PyObject *__pyx_n_u_es;
   PyObject *__pyx_n_s_exists;
   PyObject *__pyx_n_s_file;
+  PyObject *__pyx_n_s_file_index;
   PyObject *__pyx_n_s_file_path;
-  PyObject *__pyx_n_s_filename;
-  PyObject *__pyx_n_s_format;
-  PyObject *__pyx_n_s_get;
+  PyObject *__pyx_n_s_id;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_info;
+  PyObject *__pyx_n_s_infra;
+  PyObject *__pyx_n_s_infra_DocLanguage;
+  PyObject *__pyx_n_s_infra_ModelType;
   PyObject *__pyx_n_s_init;
   PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_isExist;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_detect_language;
   PyObject *__pyx_n_s_join;
   PyObject *__pyx_n_u_jpeg;
   PyObject *__pyx_kp_u_jpeg_2;
   PyObject *__pyx_kp_u_jpg;
-  PyObject *__pyx_n_s_level;
+  PyObject *__pyx_n_s_lang_to_search;
   PyObject *__pyx_n_s_load;
   PyObject *__pyx_n_s_logging;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_makedirs;
   PyObject *__pyx_n_s_metaclass;
-  PyObject *__pyx_kp_u_model_not_supported;
   PyObject *__pyx_n_s_modeldir;
   PyObject *__pyx_kp_u_models;
   PyObject *__pyx_n_s_module;
   PyObject *__pyx_kp_u_mp4;
   PyObject *__pyx_n_s_name;
   PyObject *__pyx_n_s_nltk;
   PyObject *__pyx_n_s_os;
   PyObject *__pyx_n_s_page;
   PyObject *__pyx_n_s_path;
   PyObject *__pyx_kp_u_pdf;
   PyObject *__pyx_kp_u_png;
-  PyObject *__pyx_n_u_portuguese;
   PyObject *__pyx_n_s_prepare;
-  PyObject *__pyx_n_u_pt;
   PyObject *__pyx_n_u_punkt;
   PyObject *__pyx_kp_u_python3_m_spacy_download_pt_core;
   PyObject *__pyx_kp_u_python3_m_spacy_download_xx_ent;
   PyObject *__pyx_n_s_qualname;
   PyObject *__pyx_n_s_query;
   PyObject *__pyx_n_s_results_per_page;
   PyObject *__pyx_n_s_return;
   PyObject *__pyx_n_u_rslp;
-  PyObject *__pyx_n_u_sb;
   PyObject *__pyx_n_s_search;
   PyObject *__pyx_n_s_search_documents;
   PyObject *__pyx_n_s_self;
   PyObject *__pyx_n_s_set_name;
-  PyObject *__pyx_n_u_spanish;
   PyObject *__pyx_n_s_spec;
   PyObject *__pyx_kp_s_src_wrapper_Process_pyx;
+  PyObject *__pyx_kp_u_starting_process_pyx;
   PyObject *__pyx_n_s_staticmethod;
   PyObject *__pyx_n_u_stopwords;
   PyObject *__pyx_n_s_str;
   PyObject *__pyx_n_s_super;
-  PyObject *__pyx_n_s_supported_languages;
   PyObject *__pyx_n_s_system;
-  PyObject *__pyx_n_u_td;
   PyObject *__pyx_n_s_test;
   PyObject *__pyx_n_s_text;
   PyObject *__pyx_n_s_train_doc;
   PyObject *__pyx_n_s_train_model;
   PyObject *__pyx_n_s_translate_to;
   PyObject *__pyx_kp_u_txt;
   PyObject *__pyx_n_s_type;
+  PyObject *__pyx_n_s_value;
   PyObject *__pyx_n_s_warning;
   PyObject *__pyx_kp_u_wav;
   PyObject *__pyx_n_u_wordnet;
   PyObject *__pyx_n_s_wrapper_Process;
   PyObject *__pyx_int_1;
   PyObject *__pyx_int_10;
-  PyObject *__pyx_tuple_;
-  PyObject *__pyx_tuple__3;
+  PyObject *__pyx_tuple__2;
+  PyObject *__pyx_tuple__4;
   PyObject *__pyx_tuple__5;
   PyObject *__pyx_tuple__6;
   PyObject *__pyx_tuple__7;
   PyObject *__pyx_tuple__8;
+  PyObject *__pyx_tuple__9;
+  PyObject *__pyx_tuple__10;
   PyObject *__pyx_tuple__11;
-  PyObject *__pyx_tuple__12;
   PyObject *__pyx_tuple__14;
-  PyObject *__pyx_tuple__15;
-  PyObject *__pyx_tuple__17;
+  PyObject *__pyx_tuple__16;
   PyObject *__pyx_tuple__19;
   PyObject *__pyx_tuple__20;
   PyObject *__pyx_tuple__23;
   PyObject *__pyx_tuple__25;
   PyObject *__pyx_tuple__27;
   PyObject *__pyx_tuple__28;
   PyObject *__pyx_tuple__30;
-  PyObject *__pyx_codeobj__13;
-  PyObject *__pyx_codeobj__16;
+  PyObject *__pyx_tuple__31;
+  PyObject *__pyx_tuple__33;
+  PyObject *__pyx_codeobj__15;
+  PyObject *__pyx_codeobj__17;
   PyObject *__pyx_codeobj__18;
   PyObject *__pyx_codeobj__21;
   PyObject *__pyx_codeobj__22;
   PyObject *__pyx_codeobj__24;
   PyObject *__pyx_codeobj__26;
   PyObject *__pyx_codeobj__29;
-  PyObject *__pyx_codeobj__31;
+  PyObject *__pyx_codeobj__32;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2336,48 +2362,53 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_n_s_DEBUG);
-  Py_CLEAR(clear_module_state->__pyx_n_u_DEBUG);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_DocumentSearchSB);
   Py_CLEAR(clear_module_state->__pyx_n_s_DocumentSearchTD);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Downloading_more_resources);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Downloading_resources);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ENGLISH);
   Py_CLEAR(clear_module_state->__pyx_n_s_File);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Finish_Downloading_resources);
   Py_CLEAR(clear_module_state->__pyx_n_s_Image);
+  Py_CLEAR(clear_module_state->__pyx_n_s_LanguageDetector);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Language_detected);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ModelType);
   Py_CLEAR(clear_module_state->__pyx_n_s_None);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Not_supported_document);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Not_supported_extension_for_docu);
   Py_CLEAR(clear_module_state->__pyx_n_s_PDF);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process___init);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_compile);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_compile_and_train);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_compile_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_create_batch_pipeline);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_create_online_pipeline_m);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_load);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_search);
   Py_CLEAR(clear_module_state->__pyx_n_s_Process_train_doc);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Query);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SB);
+  Py_CLEAR(clear_module_state->__pyx_n_s_TD);
   Py_CLEAR(clear_module_state->__pyx_n_s_Video);
-  Py_CLEAR(clear_module_state->__pyx_n_s_WARNING);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Without_support_for_document_wit);
-  Py_CLEAR(clear_module_state->__pyx_n_s__10);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
-  Py_CLEAR(clear_module_state->__pyx_n_s__32);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__4);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__9);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__12);
+  Py_CLEAR(clear_module_state->__pyx_n_s__13);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__3);
+  Py_CLEAR(clear_module_state->__pyx_n_s__34);
   Py_CLEAR(clear_module_state->__pyx_n_s_annotations);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_asctime_s_levelname_s_message_s);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_background_tasks_server_logs_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_base_path);
-  Py_CLEAR(clear_module_state->__pyx_n_s_basicConfig);
   Py_CLEAR(clear_module_state->__pyx_n_s_bool);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_compile);
   Py_CLEAR(clear_module_state->__pyx_n_s_compile_and_train);
   Py_CLEAR(clear_module_state->__pyx_n_s_compile_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_complement_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_core_DocumentSearchSB);
@@ -2386,127 +2417,125 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_core_Image);
   Py_CLEAR(clear_module_state->__pyx_n_s_core_PDF);
   Py_CLEAR(clear_module_state->__pyx_n_s_core_Video);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_batch_pipeline);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_online_pipeline_multiling);
   Py_CLEAR(clear_module_state->__pyx_kp_u_csv);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detected_search_language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detected_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_document_search);
   Py_CLEAR(clear_module_state->__pyx_kp_u_docx);
   Py_CLEAR(clear_module_state->__pyx_n_s_download);
-  Py_CLEAR(clear_module_state->__pyx_n_u_en);
+  Py_CLEAR(clear_module_state->__pyx_n_s_download_dir);
   Py_CLEAR(clear_module_state->__pyx_n_s_endswith);
-  Py_CLEAR(clear_module_state->__pyx_n_u_english);
-  Py_CLEAR(clear_module_state->__pyx_n_s_environ);
-  Py_CLEAR(clear_module_state->__pyx_n_u_es);
   Py_CLEAR(clear_module_state->__pyx_n_s_exists);
   Py_CLEAR(clear_module_state->__pyx_n_s_file);
+  Py_CLEAR(clear_module_state->__pyx_n_s_file_index);
   Py_CLEAR(clear_module_state->__pyx_n_s_file_path);
-  Py_CLEAR(clear_module_state->__pyx_n_s_filename);
-  Py_CLEAR(clear_module_state->__pyx_n_s_format);
-  Py_CLEAR(clear_module_state->__pyx_n_s_get);
+  Py_CLEAR(clear_module_state->__pyx_n_s_id);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_info);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_ModelType);
   Py_CLEAR(clear_module_state->__pyx_n_s_init);
   Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_isExist);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_detect_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_join);
   Py_CLEAR(clear_module_state->__pyx_n_u_jpeg);
   Py_CLEAR(clear_module_state->__pyx_kp_u_jpeg_2);
   Py_CLEAR(clear_module_state->__pyx_kp_u_jpg);
-  Py_CLEAR(clear_module_state->__pyx_n_s_level);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lang_to_search);
   Py_CLEAR(clear_module_state->__pyx_n_s_load);
   Py_CLEAR(clear_module_state->__pyx_n_s_logging);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_makedirs);
   Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_model_not_supported);
   Py_CLEAR(clear_module_state->__pyx_n_s_modeldir);
   Py_CLEAR(clear_module_state->__pyx_kp_u_models);
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_kp_u_mp4);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_nltk);
   Py_CLEAR(clear_module_state->__pyx_n_s_os);
   Py_CLEAR(clear_module_state->__pyx_n_s_page);
   Py_CLEAR(clear_module_state->__pyx_n_s_path);
   Py_CLEAR(clear_module_state->__pyx_kp_u_pdf);
   Py_CLEAR(clear_module_state->__pyx_kp_u_png);
-  Py_CLEAR(clear_module_state->__pyx_n_u_portuguese);
   Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
-  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
   Py_CLEAR(clear_module_state->__pyx_n_u_punkt);
   Py_CLEAR(clear_module_state->__pyx_kp_u_python3_m_spacy_download_pt_core);
   Py_CLEAR(clear_module_state->__pyx_kp_u_python3_m_spacy_download_xx_ent);
   Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
   Py_CLEAR(clear_module_state->__pyx_n_s_query);
   Py_CLEAR(clear_module_state->__pyx_n_s_results_per_page);
   Py_CLEAR(clear_module_state->__pyx_n_s_return);
   Py_CLEAR(clear_module_state->__pyx_n_u_rslp);
-  Py_CLEAR(clear_module_state->__pyx_n_u_sb);
   Py_CLEAR(clear_module_state->__pyx_n_s_search);
   Py_CLEAR(clear_module_state->__pyx_n_s_search_documents);
   Py_CLEAR(clear_module_state->__pyx_n_s_self);
   Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
-  Py_CLEAR(clear_module_state->__pyx_n_u_spanish);
   Py_CLEAR(clear_module_state->__pyx_n_s_spec);
   Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_Process_pyx);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_starting_process_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_staticmethod);
   Py_CLEAR(clear_module_state->__pyx_n_u_stopwords);
   Py_CLEAR(clear_module_state->__pyx_n_s_str);
   Py_CLEAR(clear_module_state->__pyx_n_s_super);
-  Py_CLEAR(clear_module_state->__pyx_n_s_supported_languages);
   Py_CLEAR(clear_module_state->__pyx_n_s_system);
-  Py_CLEAR(clear_module_state->__pyx_n_u_td);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
   Py_CLEAR(clear_module_state->__pyx_n_s_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_train_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_train_model);
   Py_CLEAR(clear_module_state->__pyx_n_s_translate_to);
   Py_CLEAR(clear_module_state->__pyx_kp_u_txt);
   Py_CLEAR(clear_module_state->__pyx_n_s_type);
+  Py_CLEAR(clear_module_state->__pyx_n_s_value);
   Py_CLEAR(clear_module_state->__pyx_n_s_warning);
   Py_CLEAR(clear_module_state->__pyx_kp_u_wav);
   Py_CLEAR(clear_module_state->__pyx_n_u_wordnet);
   Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_Process);
   Py_CLEAR(clear_module_state->__pyx_int_1);
   Py_CLEAR(clear_module_state->__pyx_int_10);
-  Py_CLEAR(clear_module_state->__pyx_tuple_);
-  Py_CLEAR(clear_module_state->__pyx_tuple__3);
+  Py_CLEAR(clear_module_state->__pyx_tuple__2);
+  Py_CLEAR(clear_module_state->__pyx_tuple__4);
   Py_CLEAR(clear_module_state->__pyx_tuple__5);
   Py_CLEAR(clear_module_state->__pyx_tuple__6);
   Py_CLEAR(clear_module_state->__pyx_tuple__7);
   Py_CLEAR(clear_module_state->__pyx_tuple__8);
+  Py_CLEAR(clear_module_state->__pyx_tuple__9);
+  Py_CLEAR(clear_module_state->__pyx_tuple__10);
   Py_CLEAR(clear_module_state->__pyx_tuple__11);
-  Py_CLEAR(clear_module_state->__pyx_tuple__12);
   Py_CLEAR(clear_module_state->__pyx_tuple__14);
-  Py_CLEAR(clear_module_state->__pyx_tuple__15);
-  Py_CLEAR(clear_module_state->__pyx_tuple__17);
+  Py_CLEAR(clear_module_state->__pyx_tuple__16);
   Py_CLEAR(clear_module_state->__pyx_tuple__19);
   Py_CLEAR(clear_module_state->__pyx_tuple__20);
   Py_CLEAR(clear_module_state->__pyx_tuple__23);
   Py_CLEAR(clear_module_state->__pyx_tuple__25);
   Py_CLEAR(clear_module_state->__pyx_tuple__27);
   Py_CLEAR(clear_module_state->__pyx_tuple__28);
   Py_CLEAR(clear_module_state->__pyx_tuple__30);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__13);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__16);
+  Py_CLEAR(clear_module_state->__pyx_tuple__31);
+  Py_CLEAR(clear_module_state->__pyx_tuple__33);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__15);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__17);
   Py_CLEAR(clear_module_state->__pyx_codeobj__18);
   Py_CLEAR(clear_module_state->__pyx_codeobj__21);
   Py_CLEAR(clear_module_state->__pyx_codeobj__22);
   Py_CLEAR(clear_module_state->__pyx_codeobj__24);
   Py_CLEAR(clear_module_state->__pyx_codeobj__26);
   Py_CLEAR(clear_module_state->__pyx_codeobj__29);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__31);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__32);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2519,48 +2548,53 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_n_s_DEBUG);
-  Py_VISIT(traverse_module_state->__pyx_n_u_DEBUG);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_DocumentSearchSB);
   Py_VISIT(traverse_module_state->__pyx_n_s_DocumentSearchTD);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Downloading_more_resources);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Downloading_resources);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ENGLISH);
   Py_VISIT(traverse_module_state->__pyx_n_s_File);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Finish_Downloading_resources);
   Py_VISIT(traverse_module_state->__pyx_n_s_Image);
+  Py_VISIT(traverse_module_state->__pyx_n_s_LanguageDetector);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Language_detected);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ModelType);
   Py_VISIT(traverse_module_state->__pyx_n_s_None);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Not_supported_document);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Not_supported_extension_for_docu);
   Py_VISIT(traverse_module_state->__pyx_n_s_PDF);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process___init);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_compile);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_compile_and_train);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_compile_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_create_batch_pipeline);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_create_online_pipeline_m);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_load);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_search);
   Py_VISIT(traverse_module_state->__pyx_n_s_Process_train_doc);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Query);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SB);
+  Py_VISIT(traverse_module_state->__pyx_n_s_TD);
   Py_VISIT(traverse_module_state->__pyx_n_s_Video);
-  Py_VISIT(traverse_module_state->__pyx_n_s_WARNING);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Without_support_for_document_wit);
-  Py_VISIT(traverse_module_state->__pyx_n_s__10);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
-  Py_VISIT(traverse_module_state->__pyx_n_s__32);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__4);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__9);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__12);
+  Py_VISIT(traverse_module_state->__pyx_n_s__13);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__3);
+  Py_VISIT(traverse_module_state->__pyx_n_s__34);
   Py_VISIT(traverse_module_state->__pyx_n_s_annotations);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_asctime_s_levelname_s_message_s);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_background_tasks_server_logs_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_base_path);
-  Py_VISIT(traverse_module_state->__pyx_n_s_basicConfig);
   Py_VISIT(traverse_module_state->__pyx_n_s_bool);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_compile);
   Py_VISIT(traverse_module_state->__pyx_n_s_compile_and_train);
   Py_VISIT(traverse_module_state->__pyx_n_s_compile_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_complement_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_core_DocumentSearchSB);
@@ -2569,127 +2603,125 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_core_Image);
   Py_VISIT(traverse_module_state->__pyx_n_s_core_PDF);
   Py_VISIT(traverse_module_state->__pyx_n_s_core_Video);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_batch_pipeline);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_online_pipeline_multiling);
   Py_VISIT(traverse_module_state->__pyx_kp_u_csv);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detected_search_language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detected_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_document_search);
   Py_VISIT(traverse_module_state->__pyx_kp_u_docx);
   Py_VISIT(traverse_module_state->__pyx_n_s_download);
-  Py_VISIT(traverse_module_state->__pyx_n_u_en);
+  Py_VISIT(traverse_module_state->__pyx_n_s_download_dir);
   Py_VISIT(traverse_module_state->__pyx_n_s_endswith);
-  Py_VISIT(traverse_module_state->__pyx_n_u_english);
-  Py_VISIT(traverse_module_state->__pyx_n_s_environ);
-  Py_VISIT(traverse_module_state->__pyx_n_u_es);
   Py_VISIT(traverse_module_state->__pyx_n_s_exists);
   Py_VISIT(traverse_module_state->__pyx_n_s_file);
+  Py_VISIT(traverse_module_state->__pyx_n_s_file_index);
   Py_VISIT(traverse_module_state->__pyx_n_s_file_path);
-  Py_VISIT(traverse_module_state->__pyx_n_s_filename);
-  Py_VISIT(traverse_module_state->__pyx_n_s_format);
-  Py_VISIT(traverse_module_state->__pyx_n_s_get);
+  Py_VISIT(traverse_module_state->__pyx_n_s_id);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_info);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_ModelType);
   Py_VISIT(traverse_module_state->__pyx_n_s_init);
   Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_isExist);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_detect_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_join);
   Py_VISIT(traverse_module_state->__pyx_n_u_jpeg);
   Py_VISIT(traverse_module_state->__pyx_kp_u_jpeg_2);
   Py_VISIT(traverse_module_state->__pyx_kp_u_jpg);
-  Py_VISIT(traverse_module_state->__pyx_n_s_level);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lang_to_search);
   Py_VISIT(traverse_module_state->__pyx_n_s_load);
   Py_VISIT(traverse_module_state->__pyx_n_s_logging);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_makedirs);
   Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_model_not_supported);
   Py_VISIT(traverse_module_state->__pyx_n_s_modeldir);
   Py_VISIT(traverse_module_state->__pyx_kp_u_models);
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_kp_u_mp4);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_nltk);
   Py_VISIT(traverse_module_state->__pyx_n_s_os);
   Py_VISIT(traverse_module_state->__pyx_n_s_page);
   Py_VISIT(traverse_module_state->__pyx_n_s_path);
   Py_VISIT(traverse_module_state->__pyx_kp_u_pdf);
   Py_VISIT(traverse_module_state->__pyx_kp_u_png);
-  Py_VISIT(traverse_module_state->__pyx_n_u_portuguese);
   Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
-  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
   Py_VISIT(traverse_module_state->__pyx_n_u_punkt);
   Py_VISIT(traverse_module_state->__pyx_kp_u_python3_m_spacy_download_pt_core);
   Py_VISIT(traverse_module_state->__pyx_kp_u_python3_m_spacy_download_xx_ent);
   Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
   Py_VISIT(traverse_module_state->__pyx_n_s_query);
   Py_VISIT(traverse_module_state->__pyx_n_s_results_per_page);
   Py_VISIT(traverse_module_state->__pyx_n_s_return);
   Py_VISIT(traverse_module_state->__pyx_n_u_rslp);
-  Py_VISIT(traverse_module_state->__pyx_n_u_sb);
   Py_VISIT(traverse_module_state->__pyx_n_s_search);
   Py_VISIT(traverse_module_state->__pyx_n_s_search_documents);
   Py_VISIT(traverse_module_state->__pyx_n_s_self);
   Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
-  Py_VISIT(traverse_module_state->__pyx_n_u_spanish);
   Py_VISIT(traverse_module_state->__pyx_n_s_spec);
   Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_Process_pyx);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_starting_process_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_staticmethod);
   Py_VISIT(traverse_module_state->__pyx_n_u_stopwords);
   Py_VISIT(traverse_module_state->__pyx_n_s_str);
   Py_VISIT(traverse_module_state->__pyx_n_s_super);
-  Py_VISIT(traverse_module_state->__pyx_n_s_supported_languages);
   Py_VISIT(traverse_module_state->__pyx_n_s_system);
-  Py_VISIT(traverse_module_state->__pyx_n_u_td);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
   Py_VISIT(traverse_module_state->__pyx_n_s_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_train_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_train_model);
   Py_VISIT(traverse_module_state->__pyx_n_s_translate_to);
   Py_VISIT(traverse_module_state->__pyx_kp_u_txt);
   Py_VISIT(traverse_module_state->__pyx_n_s_type);
+  Py_VISIT(traverse_module_state->__pyx_n_s_value);
   Py_VISIT(traverse_module_state->__pyx_n_s_warning);
   Py_VISIT(traverse_module_state->__pyx_kp_u_wav);
   Py_VISIT(traverse_module_state->__pyx_n_u_wordnet);
   Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_Process);
   Py_VISIT(traverse_module_state->__pyx_int_1);
   Py_VISIT(traverse_module_state->__pyx_int_10);
-  Py_VISIT(traverse_module_state->__pyx_tuple_);
-  Py_VISIT(traverse_module_state->__pyx_tuple__3);
+  Py_VISIT(traverse_module_state->__pyx_tuple__2);
+  Py_VISIT(traverse_module_state->__pyx_tuple__4);
   Py_VISIT(traverse_module_state->__pyx_tuple__5);
   Py_VISIT(traverse_module_state->__pyx_tuple__6);
   Py_VISIT(traverse_module_state->__pyx_tuple__7);
   Py_VISIT(traverse_module_state->__pyx_tuple__8);
+  Py_VISIT(traverse_module_state->__pyx_tuple__9);
+  Py_VISIT(traverse_module_state->__pyx_tuple__10);
   Py_VISIT(traverse_module_state->__pyx_tuple__11);
-  Py_VISIT(traverse_module_state->__pyx_tuple__12);
   Py_VISIT(traverse_module_state->__pyx_tuple__14);
-  Py_VISIT(traverse_module_state->__pyx_tuple__15);
-  Py_VISIT(traverse_module_state->__pyx_tuple__17);
+  Py_VISIT(traverse_module_state->__pyx_tuple__16);
   Py_VISIT(traverse_module_state->__pyx_tuple__19);
   Py_VISIT(traverse_module_state->__pyx_tuple__20);
   Py_VISIT(traverse_module_state->__pyx_tuple__23);
   Py_VISIT(traverse_module_state->__pyx_tuple__25);
   Py_VISIT(traverse_module_state->__pyx_tuple__27);
   Py_VISIT(traverse_module_state->__pyx_tuple__28);
   Py_VISIT(traverse_module_state->__pyx_tuple__30);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__13);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__16);
+  Py_VISIT(traverse_module_state->__pyx_tuple__31);
+  Py_VISIT(traverse_module_state->__pyx_tuple__33);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__15);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__17);
   Py_VISIT(traverse_module_state->__pyx_codeobj__18);
   Py_VISIT(traverse_module_state->__pyx_codeobj__21);
   Py_VISIT(traverse_module_state->__pyx_codeobj__22);
   Py_VISIT(traverse_module_state->__pyx_codeobj__24);
   Py_VISIT(traverse_module_state->__pyx_codeobj__26);
   Py_VISIT(traverse_module_state->__pyx_codeobj__29);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__31);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__32);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2712,48 +2744,53 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_n_s_DEBUG __pyx_mstate_global->__pyx_n_s_DEBUG
-#define __pyx_n_u_DEBUG __pyx_mstate_global->__pyx_n_u_DEBUG
+#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
 #define __pyx_n_s_DocumentSearchSB __pyx_mstate_global->__pyx_n_s_DocumentSearchSB
 #define __pyx_n_s_DocumentSearchTD __pyx_mstate_global->__pyx_n_s_DocumentSearchTD
+#define __pyx_kp_u_Downloading_more_resources __pyx_mstate_global->__pyx_kp_u_Downloading_more_resources
+#define __pyx_kp_u_Downloading_resources __pyx_mstate_global->__pyx_kp_u_Downloading_resources
+#define __pyx_n_s_ENGLISH __pyx_mstate_global->__pyx_n_s_ENGLISH
 #define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
+#define __pyx_kp_u_Finish_Downloading_resources __pyx_mstate_global->__pyx_kp_u_Finish_Downloading_resources
 #define __pyx_n_s_Image __pyx_mstate_global->__pyx_n_s_Image
+#define __pyx_n_s_LanguageDetector __pyx_mstate_global->__pyx_n_s_LanguageDetector
+#define __pyx_kp_u_Language_detected __pyx_mstate_global->__pyx_kp_u_Language_detected
+#define __pyx_n_s_ModelType __pyx_mstate_global->__pyx_n_s_ModelType
 #define __pyx_n_s_None __pyx_mstate_global->__pyx_n_s_None
 #define __pyx_kp_u_Not_supported_document __pyx_mstate_global->__pyx_kp_u_Not_supported_document
 #define __pyx_kp_u_Not_supported_extension_for_docu __pyx_mstate_global->__pyx_kp_u_Not_supported_extension_for_docu
 #define __pyx_n_s_PDF __pyx_mstate_global->__pyx_n_s_PDF
 #define __pyx_n_s_Process __pyx_mstate_global->__pyx_n_s_Process
 #define __pyx_n_s_Process___init __pyx_mstate_global->__pyx_n_s_Process___init
 #define __pyx_n_s_Process_compile __pyx_mstate_global->__pyx_n_s_Process_compile
 #define __pyx_n_s_Process_compile_and_train __pyx_mstate_global->__pyx_n_s_Process_compile_and_train
 #define __pyx_n_s_Process_compile_doc __pyx_mstate_global->__pyx_n_s_Process_compile_doc
 #define __pyx_n_s_Process_create_batch_pipeline __pyx_mstate_global->__pyx_n_s_Process_create_batch_pipeline
 #define __pyx_n_s_Process_create_online_pipeline_m __pyx_mstate_global->__pyx_n_s_Process_create_online_pipeline_m
 #define __pyx_n_s_Process_load __pyx_mstate_global->__pyx_n_s_Process_load
 #define __pyx_n_s_Process_search __pyx_mstate_global->__pyx_n_s_Process_search
 #define __pyx_n_s_Process_train_doc __pyx_mstate_global->__pyx_n_s_Process_train_doc
+#define __pyx_kp_u_Query __pyx_mstate_global->__pyx_kp_u_Query
+#define __pyx_n_s_SB __pyx_mstate_global->__pyx_n_s_SB
+#define __pyx_n_s_TD __pyx_mstate_global->__pyx_n_s_TD
 #define __pyx_n_s_Video __pyx_mstate_global->__pyx_n_s_Video
-#define __pyx_n_s_WARNING __pyx_mstate_global->__pyx_n_s_WARNING
 #define __pyx_kp_u_Without_support_for_document_wit __pyx_mstate_global->__pyx_kp_u_Without_support_for_document_wit
-#define __pyx_n_s__10 __pyx_mstate_global->__pyx_n_s__10
-#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
-#define __pyx_n_s__32 __pyx_mstate_global->__pyx_n_s__32
-#define __pyx_kp_u__4 __pyx_mstate_global->__pyx_kp_u__4
-#define __pyx_kp_u__9 __pyx_mstate_global->__pyx_kp_u__9
+#define __pyx_kp_u__12 __pyx_mstate_global->__pyx_kp_u__12
+#define __pyx_n_s__13 __pyx_mstate_global->__pyx_n_s__13
+#define __pyx_kp_u__3 __pyx_mstate_global->__pyx_kp_u__3
+#define __pyx_n_s__34 __pyx_mstate_global->__pyx_n_s__34
 #define __pyx_n_s_annotations __pyx_mstate_global->__pyx_n_s_annotations
-#define __pyx_kp_u_asctime_s_levelname_s_message_s __pyx_mstate_global->__pyx_kp_u_asctime_s_levelname_s_message_s
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_kp_u_background_tasks_server_logs_doc __pyx_mstate_global->__pyx_kp_u_background_tasks_server_logs_doc
 #define __pyx_n_s_base_path __pyx_mstate_global->__pyx_n_s_base_path
-#define __pyx_n_s_basicConfig __pyx_mstate_global->__pyx_n_s_basicConfig
 #define __pyx_n_s_bool __pyx_mstate_global->__pyx_n_s_bool
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_compile __pyx_mstate_global->__pyx_n_s_compile
 #define __pyx_n_s_compile_and_train __pyx_mstate_global->__pyx_n_s_compile_and_train
 #define __pyx_n_s_compile_doc __pyx_mstate_global->__pyx_n_s_compile_doc
 #define __pyx_n_s_complement_path __pyx_mstate_global->__pyx_n_s_complement_path
 #define __pyx_n_s_core_DocumentSearchSB __pyx_mstate_global->__pyx_n_s_core_DocumentSearchSB
@@ -2762,146 +2799,189 @@
 #define __pyx_n_s_core_Image __pyx_mstate_global->__pyx_n_s_core_Image
 #define __pyx_n_s_core_PDF __pyx_mstate_global->__pyx_n_s_core_PDF
 #define __pyx_n_s_core_Video __pyx_mstate_global->__pyx_n_s_core_Video
 #define __pyx_n_s_create_batch_pipeline __pyx_mstate_global->__pyx_n_s_create_batch_pipeline
 #define __pyx_n_s_create_features __pyx_mstate_global->__pyx_n_s_create_features
 #define __pyx_n_s_create_online_pipeline_multiling __pyx_mstate_global->__pyx_n_s_create_online_pipeline_multiling
 #define __pyx_kp_u_csv __pyx_mstate_global->__pyx_kp_u_csv
-#define __pyx_n_s_detected_search_language __pyx_mstate_global->__pyx_n_s_detected_search_language
+#define __pyx_n_s_detect_lang __pyx_mstate_global->__pyx_n_s_detect_lang
+#define __pyx_n_s_detected_language __pyx_mstate_global->__pyx_n_s_detected_language
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
 #define __pyx_n_s_doc_2 __pyx_mstate_global->__pyx_n_s_doc_2
 #define __pyx_n_s_document_search __pyx_mstate_global->__pyx_n_s_document_search
 #define __pyx_kp_u_docx __pyx_mstate_global->__pyx_kp_u_docx
 #define __pyx_n_s_download __pyx_mstate_global->__pyx_n_s_download
-#define __pyx_n_u_en __pyx_mstate_global->__pyx_n_u_en
+#define __pyx_n_s_download_dir __pyx_mstate_global->__pyx_n_s_download_dir
 #define __pyx_n_s_endswith __pyx_mstate_global->__pyx_n_s_endswith
-#define __pyx_n_u_english __pyx_mstate_global->__pyx_n_u_english
-#define __pyx_n_s_environ __pyx_mstate_global->__pyx_n_s_environ
-#define __pyx_n_u_es __pyx_mstate_global->__pyx_n_u_es
 #define __pyx_n_s_exists __pyx_mstate_global->__pyx_n_s_exists
 #define __pyx_n_s_file __pyx_mstate_global->__pyx_n_s_file
+#define __pyx_n_s_file_index __pyx_mstate_global->__pyx_n_s_file_index
 #define __pyx_n_s_file_path __pyx_mstate_global->__pyx_n_s_file_path
-#define __pyx_n_s_filename __pyx_mstate_global->__pyx_n_s_filename
-#define __pyx_n_s_format __pyx_mstate_global->__pyx_n_s_format
-#define __pyx_n_s_get __pyx_mstate_global->__pyx_n_s_get
+#define __pyx_n_s_id __pyx_mstate_global->__pyx_n_s_id
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_info __pyx_mstate_global->__pyx_n_s_info
+#define __pyx_n_s_infra __pyx_mstate_global->__pyx_n_s_infra
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
+#define __pyx_n_s_infra_ModelType __pyx_mstate_global->__pyx_n_s_infra_ModelType
 #define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
 #define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_isExist __pyx_mstate_global->__pyx_n_s_isExist
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_detect_language __pyx_mstate_global->__pyx_n_s_is_detect_language
 #define __pyx_n_s_join __pyx_mstate_global->__pyx_n_s_join
 #define __pyx_n_u_jpeg __pyx_mstate_global->__pyx_n_u_jpeg
 #define __pyx_kp_u_jpeg_2 __pyx_mstate_global->__pyx_kp_u_jpeg_2
 #define __pyx_kp_u_jpg __pyx_mstate_global->__pyx_kp_u_jpg
-#define __pyx_n_s_level __pyx_mstate_global->__pyx_n_s_level
+#define __pyx_n_s_lang_to_search __pyx_mstate_global->__pyx_n_s_lang_to_search
 #define __pyx_n_s_load __pyx_mstate_global->__pyx_n_s_load
 #define __pyx_n_s_logging __pyx_mstate_global->__pyx_n_s_logging
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_makedirs __pyx_mstate_global->__pyx_n_s_makedirs
 #define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
-#define __pyx_kp_u_model_not_supported __pyx_mstate_global->__pyx_kp_u_model_not_supported
 #define __pyx_n_s_modeldir __pyx_mstate_global->__pyx_n_s_modeldir
 #define __pyx_kp_u_models __pyx_mstate_global->__pyx_kp_u_models
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_kp_u_mp4 __pyx_mstate_global->__pyx_kp_u_mp4
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
 #define __pyx_n_s_nltk __pyx_mstate_global->__pyx_n_s_nltk
 #define __pyx_n_s_os __pyx_mstate_global->__pyx_n_s_os
 #define __pyx_n_s_page __pyx_mstate_global->__pyx_n_s_page
 #define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
 #define __pyx_kp_u_pdf __pyx_mstate_global->__pyx_kp_u_pdf
 #define __pyx_kp_u_png __pyx_mstate_global->__pyx_kp_u_png
-#define __pyx_n_u_portuguese __pyx_mstate_global->__pyx_n_u_portuguese
 #define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
-#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
 #define __pyx_n_u_punkt __pyx_mstate_global->__pyx_n_u_punkt
 #define __pyx_kp_u_python3_m_spacy_download_pt_core __pyx_mstate_global->__pyx_kp_u_python3_m_spacy_download_pt_core
 #define __pyx_kp_u_python3_m_spacy_download_xx_ent __pyx_mstate_global->__pyx_kp_u_python3_m_spacy_download_xx_ent
 #define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
 #define __pyx_n_s_query __pyx_mstate_global->__pyx_n_s_query
 #define __pyx_n_s_results_per_page __pyx_mstate_global->__pyx_n_s_results_per_page
 #define __pyx_n_s_return __pyx_mstate_global->__pyx_n_s_return
 #define __pyx_n_u_rslp __pyx_mstate_global->__pyx_n_u_rslp
-#define __pyx_n_u_sb __pyx_mstate_global->__pyx_n_u_sb
 #define __pyx_n_s_search __pyx_mstate_global->__pyx_n_s_search
 #define __pyx_n_s_search_documents __pyx_mstate_global->__pyx_n_s_search_documents
 #define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
 #define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
-#define __pyx_n_u_spanish __pyx_mstate_global->__pyx_n_u_spanish
 #define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
 #define __pyx_kp_s_src_wrapper_Process_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_Process_pyx
+#define __pyx_kp_u_starting_process_pyx __pyx_mstate_global->__pyx_kp_u_starting_process_pyx
 #define __pyx_n_s_staticmethod __pyx_mstate_global->__pyx_n_s_staticmethod
 #define __pyx_n_u_stopwords __pyx_mstate_global->__pyx_n_u_stopwords
 #define __pyx_n_s_str __pyx_mstate_global->__pyx_n_s_str
 #define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
-#define __pyx_n_s_supported_languages __pyx_mstate_global->__pyx_n_s_supported_languages
 #define __pyx_n_s_system __pyx_mstate_global->__pyx_n_s_system
-#define __pyx_n_u_td __pyx_mstate_global->__pyx_n_u_td
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
 #define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
 #define __pyx_n_s_train_doc __pyx_mstate_global->__pyx_n_s_train_doc
 #define __pyx_n_s_train_model __pyx_mstate_global->__pyx_n_s_train_model
 #define __pyx_n_s_translate_to __pyx_mstate_global->__pyx_n_s_translate_to
 #define __pyx_kp_u_txt __pyx_mstate_global->__pyx_kp_u_txt
 #define __pyx_n_s_type __pyx_mstate_global->__pyx_n_s_type
+#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
 #define __pyx_n_s_warning __pyx_mstate_global->__pyx_n_s_warning
 #define __pyx_kp_u_wav __pyx_mstate_global->__pyx_kp_u_wav
 #define __pyx_n_u_wordnet __pyx_mstate_global->__pyx_n_u_wordnet
 #define __pyx_n_s_wrapper_Process __pyx_mstate_global->__pyx_n_s_wrapper_Process
 #define __pyx_int_1 __pyx_mstate_global->__pyx_int_1
 #define __pyx_int_10 __pyx_mstate_global->__pyx_int_10
-#define __pyx_tuple_ __pyx_mstate_global->__pyx_tuple_
-#define __pyx_tuple__3 __pyx_mstate_global->__pyx_tuple__3
+#define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
+#define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
 #define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
 #define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
 #define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
 #define __pyx_tuple__8 __pyx_mstate_global->__pyx_tuple__8
+#define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
+#define __pyx_tuple__10 __pyx_mstate_global->__pyx_tuple__10
 #define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
-#define __pyx_tuple__12 __pyx_mstate_global->__pyx_tuple__12
 #define __pyx_tuple__14 __pyx_mstate_global->__pyx_tuple__14
-#define __pyx_tuple__15 __pyx_mstate_global->__pyx_tuple__15
-#define __pyx_tuple__17 __pyx_mstate_global->__pyx_tuple__17
+#define __pyx_tuple__16 __pyx_mstate_global->__pyx_tuple__16
 #define __pyx_tuple__19 __pyx_mstate_global->__pyx_tuple__19
 #define __pyx_tuple__20 __pyx_mstate_global->__pyx_tuple__20
 #define __pyx_tuple__23 __pyx_mstate_global->__pyx_tuple__23
 #define __pyx_tuple__25 __pyx_mstate_global->__pyx_tuple__25
 #define __pyx_tuple__27 __pyx_mstate_global->__pyx_tuple__27
 #define __pyx_tuple__28 __pyx_mstate_global->__pyx_tuple__28
 #define __pyx_tuple__30 __pyx_mstate_global->__pyx_tuple__30
-#define __pyx_codeobj__13 __pyx_mstate_global->__pyx_codeobj__13
-#define __pyx_codeobj__16 __pyx_mstate_global->__pyx_codeobj__16
+#define __pyx_tuple__31 __pyx_mstate_global->__pyx_tuple__31
+#define __pyx_tuple__33 __pyx_mstate_global->__pyx_tuple__33
+#define __pyx_codeobj__15 __pyx_mstate_global->__pyx_codeobj__15
+#define __pyx_codeobj__17 __pyx_mstate_global->__pyx_codeobj__17
 #define __pyx_codeobj__18 __pyx_mstate_global->__pyx_codeobj__18
 #define __pyx_codeobj__21 __pyx_mstate_global->__pyx_codeobj__21
 #define __pyx_codeobj__22 __pyx_mstate_global->__pyx_codeobj__22
 #define __pyx_codeobj__24 __pyx_mstate_global->__pyx_codeobj__24
 #define __pyx_codeobj__26 __pyx_mstate_global->__pyx_codeobj__26
 #define __pyx_codeobj__29 __pyx_mstate_global->__pyx_codeobj__29
-#define __pyx_codeobj__31 __pyx_mstate_global->__pyx_codeobj__31
+#define __pyx_codeobj__32 __pyx_mstate_global->__pyx_codeobj__32
 /* #### Code section: module_code ### */
 
-/* "wrapper/Process.pyx":31
+/* "wrapper/Process.pyx":29
  *     document_search = None
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None, type='sb') -> None:             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None, type:ModelType=ModelType.SB) -> None:             # <<<<<<<<<<<<<<
  *         """
  *         Initialize the pipeline
  */
 
+static PyObject *__pyx_pf_7wrapper_7Process___defaults__(CYTHON_UNUSED PyObject *__pyx_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__defaults__", 0);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(((PyObject *)Py_False));
+  __Pyx_GIVEREF(((PyObject *)Py_False));
+  PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_False));
+  __Pyx_INCREF(((PyObject *)Py_None));
+  __Pyx_GIVEREF(((PyObject *)Py_None));
+  PyTuple_SET_ITEM(__pyx_t_1, 1, ((PyObject *)Py_None));
+  __Pyx_INCREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_type);
+  __Pyx_GIVEREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_type);
+  PyTuple_SET_ITEM(__pyx_t_1, 2, __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_type);
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, Py_None);
+  __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("wrapper.Process.__defaults__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process___init__, "Process.__init__(self, base_path, is_detect_language=False, translate_to=None, type=u'sb') -> None\n\n        Initialize the pipeline\n        Arguments:\n            base_path: the folder where the resouses are stored like files and compiled models\n            is_detect_language: if true, detect the document language for tokenization and stemmetization.\n            in this case, the compiled model for search in documents will be splitted by the language detected.\n            translate_to: the document text will be translated by one of the translated languages (pt, en or es)\n            type:sb or td\n        Returns:\n            None\n        ");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process___init__, "Process.__init__(self, base_path, is_detect_language=False, translate_to: DocLanguage = None, type: ModelType = ModelType.SB) -> None\n\n        Initialize the pipeline\n        Arguments:\n            base_path: the folder where the resouses are stored like files and compiled models\n            is_detect_language: if true, detect the document language for tokenization and stemmetization.\n            in this case, the compiled model for search in documents will be splitted by the language detected.\n            translate_to: the document text will be translated by one of the translated languages (pt, en or es)\n            type:sb or td\n        Returns:\n            None\n        ");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process___init__};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -2920,17 +3000,18 @@
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_base_path,&__pyx_n_s_is_detect_language,&__pyx_n_s_translate_to,&__pyx_n_s_type,0};
     PyObject* values[5] = {0,0,0,0,0};
+    __pyx_defaults *__pyx_dynamic_args = __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self);
     values[2] = ((PyObject *)((PyObject *)Py_False));
     values[3] = ((PyObject *)((PyObject *)Py_None));
-    values[4] = ((PyObject *)((PyObject*)__pyx_n_u_sb));
+    values[4] = __pyx_dynamic_args->__pyx_arg_type;
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
         CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
@@ -2943,48 +3024,48 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 29, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 29, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 5, 1); __PYX_ERR(0, 31, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 5, 1); __PYX_ERR(0, 29, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 29, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 29, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  4:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_type);
           if (value) { values[4] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 29, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 31, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 29, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
         CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
@@ -3000,15 +3081,15 @@
     __pyx_v_base_path = values[1];
     __pyx_v_is_detect_language = values[2];
     __pyx_v_translate_to = values[3];
     __pyx_v_type = values[4];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 5, __pyx_nargs); __PYX_ERR(0, 31, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 5, __pyx_nargs); __PYX_ERR(0, 29, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_7Process_7Process___init__(__pyx_self, __pyx_v_self, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to, __pyx_v_type);
 
@@ -3020,333 +3101,437 @@
 static PyObject *__pyx_pf_7wrapper_7Process_7Process___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to, PyObject *__pyx_v_type) {
   PyObject *__pyx_v_isExist = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  int __pyx_t_5;
+  int __pyx_t_4;
+  PyObject *__pyx_t_5 = NULL;
   int __pyx_t_6;
   int __pyx_t_7;
   PyObject *__pyx_t_8 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
 
-  /* "wrapper/Process.pyx":43
+  /* "wrapper/Process.pyx":41
  *             None
  *         """
+ *         logging.info('starting process.pyx')             # <<<<<<<<<<<<<<
+ *         self.modeldir = base_path + "/models"
+ *         isExist = os.path.exists(self.modeldir)
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_starting_process_pyx};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+  /* "wrapper/Process.pyx":42
+ *         """
+ *         logging.info('starting process.pyx')
  *         self.modeldir = base_path + "/models"             # <<<<<<<<<<<<<<
  *         isExist = os.path.exists(self.modeldir)
  *         if not isExist:
  */
-  __pyx_t_1 = PyNumber_Add(__pyx_v_base_path, __pyx_kp_u_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_t_1 = PyNumber_Add(__pyx_v_base_path, __pyx_kp_u_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_modeldir, __pyx_t_1) < 0) __PYX_ERR(0, 43, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_modeldir, __pyx_t_1) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":44
- *         """
+  /* "wrapper/Process.pyx":43
+ *         logging.info('starting process.pyx')
  *         self.modeldir = base_path + "/models"
  *         isExist = os.path.exists(self.modeldir)             # <<<<<<<<<<<<<<
  *         if not isExist:
  *             os.makedirs(self.modeldir)
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 44, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_path); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 43, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_exists); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 43, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 44, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_exists); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 43, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_4 = NULL;
-  __pyx_t_5 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_4)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_5 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_5)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_5);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_5 = 1;
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_3};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 44, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
+    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_2};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v_isExist = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":45
+  /* "wrapper/Process.pyx":44
  *         self.modeldir = base_path + "/models"
  *         isExist = os.path.exists(self.modeldir)
  *         if not isExist:             # <<<<<<<<<<<<<<
  *             os.makedirs(self.modeldir)
  *         self.base_path = base_path
  */
-  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_isExist); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_isExist); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 44, __pyx_L1_error)
   __pyx_t_7 = (!__pyx_t_6);
   if (__pyx_t_7) {
 
-    /* "wrapper/Process.pyx":46
+    /* "wrapper/Process.pyx":45
  *         isExist = os.path.exists(self.modeldir)
  *         if not isExist:
  *             os.makedirs(self.modeldir)             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  *         self.is_detect_language = is_detect_language
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_makedirs); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 46, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 45, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_makedirs); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 45, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_4 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_4)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 45, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_5);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_2};
-      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 46, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_3};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 45, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/Process.pyx":45
+    /* "wrapper/Process.pyx":44
  *         self.modeldir = base_path + "/models"
  *         isExist = os.path.exists(self.modeldir)
  *         if not isExist:             # <<<<<<<<<<<<<<
  *             os.makedirs(self.modeldir)
  *         self.base_path = base_path
  */
   }
 
-  /* "wrapper/Process.pyx":47
+  /* "wrapper/Process.pyx":46
  *         if not isExist:
  *             os.makedirs(self.modeldir)
  *         self.base_path = base_path             # <<<<<<<<<<<<<<
  *         self.is_detect_language = is_detect_language
  *         self.translate_to = translate_to
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 47, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 46, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":48
+  /* "wrapper/Process.pyx":47
  *             os.makedirs(self.modeldir)
  *         self.base_path = base_path
  *         self.is_detect_language = is_detect_language             # <<<<<<<<<<<<<<
  *         self.translate_to = translate_to
- *         if type == 'sb':
+ *         if type == ModelType.SB:
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language, __pyx_v_is_detect_language) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language, __pyx_v_is_detect_language) < 0) __PYX_ERR(0, 47, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":49
+  /* "wrapper/Process.pyx":48
  *         self.base_path = base_path
  *         self.is_detect_language = is_detect_language
  *         self.translate_to = translate_to             # <<<<<<<<<<<<<<
- *         if type == 'sb':
+ *         if type == ModelType.SB:
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_translate_to, __pyx_v_translate_to) < 0) __PYX_ERR(0, 49, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_translate_to, __pyx_v_translate_to) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":50
+  /* "wrapper/Process.pyx":49
  *         self.is_detect_language = is_detect_language
  *         self.translate_to = translate_to
- *         if type == 'sb':             # <<<<<<<<<<<<<<
+ *         if type == ModelType.SB:             # <<<<<<<<<<<<<<
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
- *         elif type == 'td':
+ *         elif type == ModelType.TD:
  */
-  __pyx_t_7 = (__Pyx_PyUnicode_Equals(__pyx_v_type, __pyx_n_u_sb, Py_EQ)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 50, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_SB); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = PyObject_RichCompare(__pyx_v_type, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_7) {
 
-    /* "wrapper/Process.pyx":51
+    /* "wrapper/Process.pyx":50
  *         self.translate_to = translate_to
- *         if type == 'sb':
+ *         if type == ModelType.SB:
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)             # <<<<<<<<<<<<<<
- *         elif type == 'td':
+ *         elif type == ModelType.TD:
  *             self.document_search = DocumentSearchTD(self.modeldir)
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_DocumentSearchSB); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 51, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DocumentSearchSB); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 50, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 50, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_8 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_3);
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_2);
       if (likely(__pyx_t_8)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
         __Pyx_INCREF(__pyx_t_8);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_t_2, __pyx_t_4};
-      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 2+__pyx_t_5);
+      PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_t_3, __pyx_t_5};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 50, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_search, __pyx_t_1) < 0) __PYX_ERR(0, 51, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_search, __pyx_t_1) < 0) __PYX_ERR(0, 50, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/Process.pyx":50
+    /* "wrapper/Process.pyx":49
  *         self.is_detect_language = is_detect_language
  *         self.translate_to = translate_to
- *         if type == 'sb':             # <<<<<<<<<<<<<<
+ *         if type == ModelType.SB:             # <<<<<<<<<<<<<<
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
- *         elif type == 'td':
+ *         elif type == ModelType.TD:
  */
     goto __pyx_L4;
   }
 
-  /* "wrapper/Process.pyx":52
- *         if type == 'sb':
+  /* "wrapper/Process.pyx":51
+ *         if type == ModelType.SB:
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
- *         elif type == 'td':             # <<<<<<<<<<<<<<
+ *         elif type == ModelType.TD:             # <<<<<<<<<<<<<<
  *             self.document_search = DocumentSearchTD(self.modeldir)
  *         else:
  */
-  __pyx_t_7 = (__Pyx_PyUnicode_Equals(__pyx_v_type, __pyx_n_u_td, Py_EQ)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 52, __pyx_L1_error)
-  if (likely(__pyx_t_7)) {
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_TD); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 51, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = PyObject_RichCompare(__pyx_v_type, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 51, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_7) {
 
-    /* "wrapper/Process.pyx":53
+    /* "wrapper/Process.pyx":52
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
- *         elif type == 'td':
+ *         elif type == ModelType.TD:
  *             self.document_search = DocumentSearchTD(self.modeldir)             # <<<<<<<<<<<<<<
  *         else:
- *             raise Exception("model not supported.")
+ *             self.document_search = None
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_DocumentSearchTD); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 53, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_2 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_2)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_2);
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DocumentSearchTD); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 52, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_modeldir); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 52, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_3 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_4};
-      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L1_error)
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_t_5};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_search, __pyx_t_1) < 0) __PYX_ERR(0, 53, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_search, __pyx_t_1) < 0) __PYX_ERR(0, 52, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/Process.pyx":52
- *         if type == 'sb':
+    /* "wrapper/Process.pyx":51
+ *         if type == ModelType.SB:
  *             self.document_search = DocumentSearchSB(self.modeldir, self.is_detect_language)
- *         elif type == 'td':             # <<<<<<<<<<<<<<
+ *         elif type == ModelType.TD:             # <<<<<<<<<<<<<<
  *             self.document_search = DocumentSearchTD(self.modeldir)
  *         else:
  */
     goto __pyx_L4;
   }
 
-  /* "wrapper/Process.pyx":55
+  /* "wrapper/Process.pyx":54
  *             self.document_search = DocumentSearchTD(self.modeldir)
  *         else:
- *             raise Exception("model not supported.")             # <<<<<<<<<<<<<<
+ *             self.document_search = None             # <<<<<<<<<<<<<<
  * 
  *     @staticmethod
  */
   /*else*/ {
-    __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 55, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __PYX_ERR(0, 55, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_search, Py_None) < 0) __PYX_ERR(0, 54, __pyx_L1_error)
   }
   __pyx_L4:;
 
-  /* "wrapper/Process.pyx":31
+  /* "wrapper/Process.pyx":29
  *     document_search = None
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None, type='sb') -> None:             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None, type:ModelType=ModelType.SB) -> None:             # <<<<<<<<<<<<<<
  *         """
  *         Initialize the pipeline
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_AddTraceback("wrapper.Process.Process.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_isExist);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":57
- *             raise Exception("model not supported.")
+/* "wrapper/Process.pyx":56
+ *             self.document_search = None
+ * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
+ */
+
+static PyObject *__pyx_pf_7wrapper_7Process_2__defaults__(CYTHON_UNUSED PyObject *__pyx_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__defaults__", 0);
+  __Pyx_XDECREF(__pyx_r);
+
+  /* "wrapper/Process.pyx":57
+ * 
+ *     @staticmethod
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):             # <<<<<<<<<<<<<<
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
+ * 
+ */
+  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(((PyObject *)Py_True));
+  __Pyx_GIVEREF(((PyObject *)Py_True));
+  PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_True));
+  __Pyx_INCREF(__Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_translate_to);
+  __Pyx_GIVEREF(__Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_translate_to);
+  PyTuple_SET_ITEM(__pyx_t_1, 1, __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_translate_to);
+
+  /* "wrapper/Process.pyx":56
+ *             self.document_search = None
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  */
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, Py_None);
+  __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("wrapper.Process.__defaults__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_3create_online_pipeline_multilingual(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_2create_online_pipeline_multilingual, "Process.create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to=u'en')");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_2create_online_pipeline_multilingual, "Process.create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to: DocLanguage = DocLanguage.ENGLISH)");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_3create_online_pipeline_multilingual = {"create_online_pipeline_multilingual", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_3create_online_pipeline_multilingual, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_2create_online_pipeline_multilingual};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_3create_online_pipeline_multilingual(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -3363,24 +3548,17 @@
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("create_online_pipeline_multilingual (wrapper)", 0);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_base_path,&__pyx_n_s_is_detect_language,&__pyx_n_s_translate_to,0};
     PyObject* values[3] = {0,0,0};
-
-    /* "wrapper/Process.pyx":58
- * 
- *     @staticmethod
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):             # <<<<<<<<<<<<<<
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
- * 
- */
+    __pyx_defaults1 *__pyx_dynamic_args = __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self);
     values[1] = ((PyObject *)((PyObject *)Py_True));
-    values[2] = ((PyObject *)((PyObject*)__pyx_n_u_en));
+    values[2] = __pyx_dynamic_args->__pyx_arg_translate_to;
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -3389,34 +3567,34 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 57, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 57, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 57, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_online_pipeline_multilingual") < 0)) __PYX_ERR(0, 57, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_online_pipeline_multilingual") < 0)) __PYX_ERR(0, 56, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -3427,108 +3605,108 @@
     }
     __pyx_v_base_path = values[0];
     __pyx_v_is_detect_language = values[1];
     __pyx_v_translate_to = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("create_online_pipeline_multilingual", 0, 1, 3, __pyx_nargs); __PYX_ERR(0, 57, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("create_online_pipeline_multilingual", 0, 1, 3, __pyx_nargs); __PYX_ERR(0, 56, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.create_online_pipeline_multilingual", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_7Process_7Process_2create_online_pipeline_multilingual(__pyx_self, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to);
 
-  /* "wrapper/Process.pyx":57
- *             raise Exception("model not supported.")
- * 
- *     @staticmethod             # <<<<<<<<<<<<<<
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
- */
-
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_2create_online_pipeline_multilingual(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("create_online_pipeline_multilingual", 0);
 
-  /* "wrapper/Process.pyx":59
+  /* "wrapper/Process.pyx":58
  *     @staticmethod
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')             # <<<<<<<<<<<<<<
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)             # <<<<<<<<<<<<<<
  * 
  *     @staticmethod
  */
   __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Process); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Process); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 58, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_SB); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 58, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
+  __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
       __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
+      __pyx_t_5 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[5] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to, __pyx_n_u_sb};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 4+__pyx_t_4);
+    PyObject *__pyx_callargs[5] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to, __pyx_t_4};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 4+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 59, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/Process.pyx":57
- *             raise Exception("model not supported.")
+  /* "wrapper/Process.pyx":56
+ *             self.document_search = None
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
   __Pyx_AddTraceback("wrapper.Process.Process.create_online_pipeline_multilingual", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":61
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+/* "wrapper/Process.pyx":60
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_5create_batch_pipeline(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -3557,19 +3735,19 @@
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("create_batch_pipeline (wrapper)", 0);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_base_path,&__pyx_n_s_is_detect_language,&__pyx_n_s_translate_to,0};
     PyObject* values[3] = {0,0,0};
 
-    /* "wrapper/Process.pyx":62
+    /* "wrapper/Process.pyx":61
  * 
  *     @staticmethod
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  * 
  */
     values[1] = ((PyObject *)((PyObject *)Py_False));
     values[2] = ((PyObject *)((PyObject *)Py_None));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
@@ -3582,34 +3760,34 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 61, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 60, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 61, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 60, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 61, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 60, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_batch_pipeline") < 0)) __PYX_ERR(0, 61, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_batch_pipeline") < 0)) __PYX_ERR(0, 60, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -3620,86 +3798,94 @@
     }
     __pyx_v_base_path = values[0];
     __pyx_v_is_detect_language = values[1];
     __pyx_v_translate_to = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("create_batch_pipeline", 0, 1, 3, __pyx_nargs); __PYX_ERR(0, 61, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("create_batch_pipeline", 0, 1, 3, __pyx_nargs); __PYX_ERR(0, 60, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.create_batch_pipeline", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_7Process_7Process_4create_batch_pipeline(__pyx_self, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to);
 
-  /* "wrapper/Process.pyx":61
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+  /* "wrapper/Process.pyx":60
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  */
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyObject *__pyx_pf_7wrapper_7Process_7Process_4create_batch_pipeline(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("create_batch_pipeline", 0);
 
-  /* "wrapper/Process.pyx":63
+  /* "wrapper/Process.pyx":62
  *     @staticmethod
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')             # <<<<<<<<<<<<<<
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)             # <<<<<<<<<<<<<<
  * 
- *     def compile_and_train(self, complement_path):
+ *     def compile_and_train(self, complement_path, file_index):
  */
   __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Process); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 63, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = PyTuple_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Process); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 62, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_v_base_path);
-  __Pyx_GIVEREF(__pyx_v_base_path);
-  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_base_path);
-  __Pyx_INCREF(__pyx_v_is_detect_language);
-  __Pyx_GIVEREF(__pyx_v_is_detect_language);
-  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_is_detect_language);
-  __Pyx_INCREF(__pyx_v_translate_to);
-  __Pyx_GIVEREF(__pyx_v_translate_to);
-  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_v_translate_to);
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 62, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_type, __pyx_n_u_td) < 0) __PYX_ERR(0, 63, __pyx_L1_error)
-  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 63, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_TD); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 62, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_r = __pyx_t_4;
-  __pyx_t_4 = 0;
+  __pyx_t_3 = NULL;
+  __pyx_t_5 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_5 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[5] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to, __pyx_t_4};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 4+__pyx_t_5);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 62, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/Process.pyx":61
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+  /* "wrapper/Process.pyx":60
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
@@ -3708,161 +3894,173 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":65
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+/* "wrapper/Process.pyx":64
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  * 
- *     def compile_and_train(self, complement_path):             # <<<<<<<<<<<<<<
- *         file = self.compile_doc(complement_path)
+ *     def compile_and_train(self, complement_path, file_index):             # <<<<<<<<<<<<<<
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_7compile_and_train(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_6compile_and_train, "Process.compile_and_train(self, complement_path)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_6compile_and_train, "Process.compile_and_train(self, complement_path, file_index)");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_7compile_and_train = {"compile_and_train", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_7compile_and_train, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_6compile_and_train};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_7compile_and_train(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_self = 0;
   PyObject *__pyx_v_complement_path = 0;
+  PyObject *__pyx_v_file_index = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("compile_and_train (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_complement_path,0};
-    PyObject* values[2] = {0,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_complement_path,&__pyx_n_s_file_index,0};
+    PyObject* values[3] = {0,0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 64, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_complement_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 64, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("compile_and_train", 1, 2, 2, 1); __PYX_ERR(0, 65, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("compile_and_train", 1, 3, 3, 1); __PYX_ERR(0, 64, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_file_index)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 64, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("compile_and_train", 1, 3, 3, 2); __PYX_ERR(0, 64, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile_and_train") < 0)) __PYX_ERR(0, 65, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile_and_train") < 0)) __PYX_ERR(0, 64, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 2)) {
+    } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+      values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v_self = values[0];
     __pyx_v_complement_path = values[1];
+    __pyx_v_file_index = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("compile_and_train", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 65, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("compile_and_train", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 64, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.compile_and_train", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_6compile_and_train(__pyx_self, __pyx_v_self, __pyx_v_complement_path);
+  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_6compile_and_train(__pyx_self, __pyx_v_self, __pyx_v_complement_path, __pyx_v_file_index);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_6compile_and_train(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path) {
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_6compile_and_train(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path, PyObject *__pyx_v_file_index) {
   PyObject *__pyx_v_file = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("compile_and_train", 0);
 
-  /* "wrapper/Process.pyx":66
+  /* "wrapper/Process.pyx":65
  * 
- *     def compile_and_train(self, complement_path):
- *         file = self.compile_doc(complement_path)             # <<<<<<<<<<<<<<
+ *     def compile_and_train(self, complement_path, file_index):
+ *         file = self.compile_doc(complement_path, file_index)             # <<<<<<<<<<<<<<
  *         self.document_search.train_model(file)
  *         return file
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_compile_doc); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_compile_doc); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
       __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_complement_path};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    PyObject *__pyx_callargs[3] = {__pyx_t_3, __pyx_v_complement_path, __pyx_v_file_index};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_v_file = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":67
- *     def compile_and_train(self, complement_path):
- *         file = self.compile_doc(complement_path)
+  /* "wrapper/Process.pyx":66
+ *     def compile_and_train(self, complement_path, file_index):
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)             # <<<<<<<<<<<<<<
  *         return file
  * 
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_search); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 67, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_search); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_train_model); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 67, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_train_model); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -3873,37 +4071,37 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_file};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 67, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":68
- *         file = self.compile_doc(complement_path)
+  /* "wrapper/Process.pyx":67
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)
  *         return file             # <<<<<<<<<<<<<<
  * 
- *     def compile_doc(self, complement_path):
+ *     def compile_doc(self, complement_path, file_index):
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_file);
   __pyx_r = __pyx_v_file;
   goto __pyx_L0;
 
-  /* "wrapper/Process.pyx":65
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+  /* "wrapper/Process.pyx":64
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  * 
- *     def compile_and_train(self, complement_path):             # <<<<<<<<<<<<<<
- *         file = self.compile_doc(complement_path)
+ *     def compile_and_train(self, complement_path, file_index):             # <<<<<<<<<<<<<<
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
@@ -3913,107 +4111,119 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_file);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":70
+/* "wrapper/Process.pyx":69
  *         return file
  * 
- *     def compile_doc(self, complement_path):             # <<<<<<<<<<<<<<
+ *     def compile_doc(self, complement_path, file_index):             # <<<<<<<<<<<<<<
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
- *         return file
+ *         file.id = file_index
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_9compile_doc(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_8compile_doc, "Process.compile_doc(self, complement_path)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_8compile_doc, "Process.compile_doc(self, complement_path, file_index)");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_9compile_doc = {"compile_doc", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_9compile_doc, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_8compile_doc};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_9compile_doc(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_self = 0;
   PyObject *__pyx_v_complement_path = 0;
+  PyObject *__pyx_v_file_index = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("compile_doc (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_complement_path,0};
-    PyObject* values[2] = {0,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_complement_path,&__pyx_n_s_file_index,0};
+    PyObject* values[3] = {0,0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 70, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_complement_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 70, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("compile_doc", 1, 3, 3, 1); __PYX_ERR(0, 69, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_file_index)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 69, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("compile_doc", 1, 2, 2, 1); __PYX_ERR(0, 70, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("compile_doc", 1, 3, 3, 2); __PYX_ERR(0, 69, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile_doc") < 0)) __PYX_ERR(0, 70, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile_doc") < 0)) __PYX_ERR(0, 69, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 2)) {
+    } else if (unlikely(__pyx_nargs != 3)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+      values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
     }
     __pyx_v_self = values[0];
     __pyx_v_complement_path = values[1];
+    __pyx_v_file_index = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("compile_doc", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 70, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("compile_doc", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 69, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.compile_doc", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_8compile_doc(__pyx_self, __pyx_v_self, __pyx_v_complement_path);
+  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_8compile_doc(__pyx_self, __pyx_v_self, __pyx_v_complement_path, __pyx_v_file_index);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_8compile_doc(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path) {
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_8compile_doc(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_complement_path, PyObject *__pyx_v_file_index) {
   PyObject *__pyx_v_file = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
@@ -4021,31 +4231,31 @@
   PyObject *__pyx_t_6 = NULL;
   int __pyx_t_7;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("compile_doc", 0);
 
-  /* "wrapper/Process.pyx":71
+  /* "wrapper/Process.pyx":70
  * 
- *     def compile_doc(self, complement_path):
+ *     def compile_doc(self, complement_path, file_index):
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)             # <<<<<<<<<<<<<<
+ *         file.id = file_index
  *         return file
- * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Process); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 71, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Process); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_compile); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 71, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_compile); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_base_path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 71, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_base_path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 71, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 71, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __pyx_t_6 = NULL;
   __pyx_t_7 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_6)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -4058,39 +4268,48 @@
   {
     PyObject *__pyx_callargs[5] = {__pyx_t_6, __pyx_t_2, __pyx_v_complement_path, __pyx_t_4, __pyx_t_5};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_7, 4+__pyx_t_7);
     __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 71, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 70, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v_file = __pyx_t_1;
   __pyx_t_1 = 0;
 
+  /* "wrapper/Process.pyx":71
+ *     def compile_doc(self, complement_path, file_index):
+ *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
+ *         file.id = file_index             # <<<<<<<<<<<<<<
+ *         return file
+ * 
+ */
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_file, __pyx_n_s_id, __pyx_v_file_index) < 0) __PYX_ERR(0, 71, __pyx_L1_error)
+
   /* "wrapper/Process.pyx":72
- *     def compile_doc(self, complement_path):
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
+ *         file.id = file_index
  *         return file             # <<<<<<<<<<<<<<
  * 
  *     def train_doc(self, file):
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_file);
   __pyx_r = __pyx_v_file;
   goto __pyx_L0;
 
-  /* "wrapper/Process.pyx":70
+  /* "wrapper/Process.pyx":69
  *         return file
  * 
- *     def compile_doc(self, complement_path):             # <<<<<<<<<<<<<<
+ *     def compile_doc(self, complement_path, file_index):             # <<<<<<<<<<<<<<
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
- *         return file
+ *         file.id = file_index
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
@@ -4245,15 +4464,15 @@
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "wrapper/Process.pyx":76
  *     def train_doc(self, file):
  *         self.document_search.train_model(file)
  *         return file             # <<<<<<<<<<<<<<
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_file);
   __pyx_r = __pyx_v_file;
   goto __pyx_L0;
 
   /* "wrapper/Process.pyx":74
@@ -4276,53 +4495,53 @@
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 /* "wrapper/Process.pyx":78
  *         return file
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
- * 
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_13search(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_12search, "Process.search(self, query, detected_search_language=None, page=1, results_per_page=10)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_12search, "Process.search(self, query, detected_language: DocLanguage = None, page=1, results_per_page=10)");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_13search = {"search", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_13search, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_12search};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_13search(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_self = 0;
   PyObject *__pyx_v_query = 0;
-  PyObject *__pyx_v_detected_search_language = 0;
+  PyObject *__pyx_v_detected_language = 0;
   PyObject *__pyx_v_page = 0;
   PyObject *__pyx_v_results_per_page = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("search (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_query,&__pyx_n_s_detected_search_language,&__pyx_n_s_page,&__pyx_n_s_results_per_page,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_query,&__pyx_n_s_detected_language,&__pyx_n_s_page,&__pyx_n_s_results_per_page,0};
     PyObject* values[5] = {0,0,0,0,0};
     values[2] = ((PyObject *)((PyObject *)Py_None));
     values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
     values[4] = ((PyObject *)((PyObject *)__pyx_int_10));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
@@ -4351,15 +4570,15 @@
         else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 78, __pyx_L3_error)
         else {
           __Pyx_RaiseArgtupleInvalid("search", 0, 2, 5, 1); __PYX_ERR(0, 78, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_detected_search_language);
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_detected_language);
           if (value) { values[2] = value; kw_args--; }
           else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 78, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_page);
@@ -4390,120 +4609,345 @@
         values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
         default: goto __pyx_L5_argtuple_error;
       }
     }
     __pyx_v_self = values[0];
     __pyx_v_query = values[1];
-    __pyx_v_detected_search_language = values[2];
+    __pyx_v_detected_language = values[2];
     __pyx_v_page = values[3];
     __pyx_v_results_per_page = values[4];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
   __Pyx_RaiseArgtupleInvalid("search", 0, 2, 5, __pyx_nargs); __PYX_ERR(0, 78, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.search", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_12search(__pyx_self, __pyx_v_self, __pyx_v_query, __pyx_v_detected_search_language, __pyx_v_page, __pyx_v_results_per_page);
+  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_12search(__pyx_self, __pyx_v_self, __pyx_v_query, __pyx_v_detected_language, __pyx_v_page, __pyx_v_results_per_page);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_12search(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_query, PyObject *__pyx_v_detected_search_language, PyObject *__pyx_v_page, PyObject *__pyx_v_results_per_page) {
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_12search(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_query, PyObject *__pyx_v_detected_language, PyObject *__pyx_v_page, PyObject *__pyx_v_results_per_page) {
+  PyObject *__pyx_v_lang_to_search = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
+  PyObject *(*__pyx_t_6)(PyObject *);
+  Py_ssize_t __pyx_t_7;
+  Py_UCS4 __pyx_t_8;
+  int __pyx_t_9;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("search", 0);
+  __Pyx_INCREF(__pyx_v_query);
+  __Pyx_INCREF(__pyx_v_detected_language);
 
   /* "wrapper/Process.pyx":79
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)             # <<<<<<<<<<<<<<
- * 
- *     @staticmethod
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)             # <<<<<<<<<<<<<<
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
+ *         lang_to_search = None
  */
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_search); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_search_documents); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 79, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_detect_lang); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 79, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = NULL;
+  __pyx_t_5 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_4)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_4);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_5 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_4, __pyx_v_query, __pyx_t_2, __pyx_v_detected_language};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 3+__pyx_t_5);
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 79, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
+    PyObject* sequence = __pyx_t_1;
+    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
+    if (unlikely(size != 2)) {
+      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
+      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
+      __PYX_ERR(0, 79, __pyx_L1_error)
+    }
+    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    if (likely(PyTuple_CheckExact(sequence))) {
+      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
+      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
+    } else {
+      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
+      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
+    }
+    __Pyx_INCREF(__pyx_t_3);
+    __Pyx_INCREF(__pyx_t_2);
+    #else
+    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 79, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    #endif
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  } else {
+    Py_ssize_t index = -1;
+    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 79, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4);
+    index = 0; __pyx_t_3 = __pyx_t_6(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GOTREF(__pyx_t_3);
+    index = 1; __pyx_t_2 = __pyx_t_6(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GOTREF(__pyx_t_2);
+    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_4), 2) < 0) __PYX_ERR(0, 79, __pyx_L1_error)
+    __pyx_t_6 = NULL;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    goto __pyx_L4_unpacking_done;
+    __pyx_L3_unpacking_failed:;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __pyx_t_6 = NULL;
+    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
+    __PYX_ERR(0, 79, __pyx_L1_error)
+    __pyx_L4_unpacking_done:;
+  }
+  __Pyx_DECREF_SET(__pyx_v_detected_language, __pyx_t_3);
+  __pyx_t_3 = 0;
+  __Pyx_DECREF_SET(__pyx_v_query, __pyx_t_2);
+  __pyx_t_2 = 0;
+
+  /* "wrapper/Process.pyx":80
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")             # <<<<<<<<<<<<<<
+ *         lang_to_search = None
+ *         if self.translate_to:
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = PyTuple_New(4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_7 = 0;
+  __pyx_t_8 = 127;
+  __Pyx_INCREF(__pyx_kp_u_Language_detected);
+  __pyx_t_7 += 19;
+  __Pyx_GIVEREF(__pyx_kp_u_Language_detected);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_Language_detected);
+  __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_v_detected_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_8 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) > __pyx_t_8) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) : __pyx_t_8;
+  __pyx_t_7 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_4);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_4);
   __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+  __Pyx_INCREF(__pyx_kp_u_Query);
+  __pyx_t_7 += 10;
+  __Pyx_GIVEREF(__pyx_kp_u_Query);
+  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_Query);
+  __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_v_query, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_8 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) > __pyx_t_8) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) : __pyx_t_8;
+  __pyx_t_7 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_4);
+  __Pyx_GIVEREF(__pyx_t_4);
+  PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_4);
+  __pyx_t_4 = 0;
+  __pyx_t_4 = __Pyx_PyUnicode_Join(__pyx_t_2, 4, __pyx_t_7, __pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 80, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_5 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
       __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+      __pyx_t_5 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[5] = {__pyx_t_2, __pyx_v_query, __pyx_v_detected_search_language, __pyx_v_page, __pyx_v_results_per_page};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 4+__pyx_t_4);
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_4};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 79, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 80, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+  /* "wrapper/Process.pyx":81
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
+ *         lang_to_search = None             # <<<<<<<<<<<<<<
+ *         if self.translate_to:
+ *             lang_to_search = self.translate_to.value
+ */
+  __Pyx_INCREF(Py_None);
+  __pyx_v_lang_to_search = Py_None;
+
+  /* "wrapper/Process.pyx":82
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
+ *         lang_to_search = None
+ *         if self.translate_to:             # <<<<<<<<<<<<<<
+ *             lang_to_search = self.translate_to.value
+ *         else:
+ */
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 82, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 82, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_9) {
+
+    /* "wrapper/Process.pyx":83
+ *         lang_to_search = None
+ *         if self.translate_to:
+ *             lang_to_search = self.translate_to.value             # <<<<<<<<<<<<<<
+ *         else:
+ *             lang_to_search = detected_language.value
+ */
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 83, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_value); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 83, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF_SET(__pyx_v_lang_to_search, __pyx_t_3);
+    __pyx_t_3 = 0;
+
+    /* "wrapper/Process.pyx":82
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
+ *         lang_to_search = None
+ *         if self.translate_to:             # <<<<<<<<<<<<<<
+ *             lang_to_search = self.translate_to.value
+ *         else:
+ */
+    goto __pyx_L5;
+  }
+
+  /* "wrapper/Process.pyx":85
+ *             lang_to_search = self.translate_to.value
+ *         else:
+ *             lang_to_search = detected_language.value             # <<<<<<<<<<<<<<
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
+ * 
+ */
+  /*else*/ {
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_detected_language, __pyx_n_s_value); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 85, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF_SET(__pyx_v_lang_to_search, __pyx_t_3);
+    __pyx_t_3 = 0;
+  }
+  __pyx_L5:;
+
+  /* "wrapper/Process.pyx":86
+ *         else:
+ *             lang_to_search = detected_language.value
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)             # <<<<<<<<<<<<<<
+ * 
+ *     @staticmethod
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_search); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_search_documents); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = NULL;
+  __pyx_t_5 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
+    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
+    if (likely(__pyx_t_1)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+      __Pyx_INCREF(__pyx_t_1);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_4, function);
+      __pyx_t_5 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[5] = {__pyx_t_1, __pyx_v_query, __pyx_v_lang_to_search, __pyx_v_page, __pyx_v_results_per_page};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 4+__pyx_t_5);
+    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 86, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  }
+  __pyx_r = __pyx_t_3;
+  __pyx_t_3 = 0;
   goto __pyx_L0;
 
   /* "wrapper/Process.pyx":78
  *         return file
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
- * 
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
   __Pyx_AddTraceback("wrapper.Process.Process.search", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_lang_to_search);
+  __Pyx_XDECREF(__pyx_v_query);
+  __Pyx_XDECREF(__pyx_v_detected_language);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":81
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
+/* "wrapper/Process.pyx":88
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_15compile(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_14compile, "Process.compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File");
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_14compile, "Process.compile(base_path, complement_path, is_detect_language=False, translate_to: DocLanguage = None) -> File");
 static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_15compile = {"compile", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_15compile, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_14compile};
 static PyObject *__pyx_pw_7wrapper_7Process_7Process_15compile(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -4522,18 +4966,18 @@
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("compile (wrapper)", 0);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_base_path,&__pyx_n_s_complement_path,&__pyx_n_s_is_detect_language,&__pyx_n_s_translate_to,0};
     PyObject* values[4] = {0,0,0,0};
 
-    /* "wrapper/Process.pyx":82
+    /* "wrapper/Process.pyx":89
  * 
  *     @staticmethod
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:             # <<<<<<<<<<<<<<
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:             # <<<<<<<<<<<<<<
  *         doc = None
  *         file_path = os.path.join(base_path, complement_path)
  */
     values[2] = ((PyObject *)((PyObject *)Py_False));
     values[3] = ((PyObject *)((PyObject *)Py_None));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
@@ -4549,41 +4993,41 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_complement_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("compile", 0, 2, 4, 1); __PYX_ERR(0, 81, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("compile", 0, 2, 4, 1); __PYX_ERR(0, 88, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 81, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 88, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile") < 0)) __PYX_ERR(0, 81, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "compile") < 0)) __PYX_ERR(0, 88, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
@@ -4596,27 +5040,27 @@
     __pyx_v_base_path = values[0];
     __pyx_v_complement_path = values[1];
     __pyx_v_is_detect_language = values[2];
     __pyx_v_translate_to = values[3];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("compile", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 81, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("compile", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 88, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.Process.Process.compile", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_7Process_7Process_14compile(__pyx_self, __pyx_v_base_path, __pyx_v_complement_path, __pyx_v_is_detect_language, __pyx_v_translate_to);
 
-  /* "wrapper/Process.pyx":81
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
+  /* "wrapper/Process.pyx":88
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  */
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
@@ -4635,37 +5079,37 @@
   Py_UCS4 __pyx_t_6;
   int __pyx_t_7;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("compile", 0);
 
-  /* "wrapper/Process.pyx":83
+  /* "wrapper/Process.pyx":90
  *     @staticmethod
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None             # <<<<<<<<<<<<<<
  *         file_path = os.path.join(base_path, complement_path)
  *         file_path = f'{base_path}/{complement_path}'
  */
   __Pyx_INCREF(Py_None);
   __pyx_v_doc = Py_None;
 
-  /* "wrapper/Process.pyx":84
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+  /* "wrapper/Process.pyx":91
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  *         file_path = os.path.join(base_path, complement_path)             # <<<<<<<<<<<<<<
  *         file_path = f'{base_path}/{complement_path}'
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 91, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_path); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_path); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 91, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_join); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_join); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 91, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
@@ -4676,162 +5120,162 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[3] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_complement_path};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 84, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 91, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __pyx_v_file_path = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":85
+  /* "wrapper/Process.pyx":92
  *         doc = None
  *         file_path = os.path.join(base_path, complement_path)
  *         file_path = f'{base_path}/{complement_path}'             # <<<<<<<<<<<<<<
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  *             text = ""
  */
-  __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 85, __pyx_L1_error)
+  __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_5 = 0;
   __pyx_t_6 = 127;
-  __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_base_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 85, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_base_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_6 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) > __pyx_t_6) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) : __pyx_t_6;
   __pyx_t_5 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_2);
   __Pyx_GIVEREF(__pyx_t_2);
   PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
   __pyx_t_2 = 0;
-  __Pyx_INCREF(__pyx_kp_u__2);
+  __Pyx_INCREF(__pyx_kp_u_);
   __pyx_t_5 += 1;
-  __Pyx_GIVEREF(__pyx_kp_u__2);
-  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_kp_u__2);
-  __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_complement_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 85, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_kp_u_);
+  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_kp_u_);
+  __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_complement_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_6 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) > __pyx_t_6) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) : __pyx_t_6;
   __pyx_t_5 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_2);
   __Pyx_GIVEREF(__pyx_t_2);
   PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_2);
   __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyUnicode_Join(__pyx_t_1, 3, __pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 85, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyUnicode_Join(__pyx_t_1, 3, __pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __Pyx_DECREF_SET(__pyx_v_file_path, __pyx_t_2);
   __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":86
+  /* "wrapper/Process.pyx":93
  *         file_path = os.path.join(base_path, complement_path)
  *         file_path = f'{base_path}/{complement_path}'
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):             # <<<<<<<<<<<<<<
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
     if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
       __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_1, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__3};
+    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__2};
     __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 86, __pyx_L1_error)
+    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 93, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   }
-  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 93, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   if (likely(__pyx_t_7)) {
 
-    /* "wrapper/Process.pyx":87
+    /* "wrapper/Process.pyx":94
  *         file_path = f'{base_path}/{complement_path}'
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  *             text = ""             # <<<<<<<<<<<<<<
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")
  */
-    __Pyx_INCREF(__pyx_kp_u__4);
-    __pyx_v_text = __pyx_kp_u__4;
+    __Pyx_INCREF(__pyx_kp_u__3);
+    __pyx_v_text = __pyx_kp_u__3;
 
-    /* "wrapper/Process.pyx":88
+    /* "wrapper/Process.pyx":95
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):             # <<<<<<<<<<<<<<
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")
  *                 doc = File(base_path, is_detect_language, translate_to)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 88, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 95, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_3)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
         __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_1, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__5};
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__4};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 95, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
-    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 88, __pyx_L1_error)
+    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 95, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     if (unlikely(__pyx_t_7)) {
 
-      /* "wrapper/Process.pyx":89
+      /* "wrapper/Process.pyx":96
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")             # <<<<<<<<<<<<<<
  *                 doc = File(base_path, is_detect_language, translate_to)
  *                 doc.create_features_base(file_path)
  */
-      __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple__6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 89, __pyx_L1_error)
+      __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_Raise(__pyx_t_2, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __PYX_ERR(0, 89, __pyx_L1_error)
+      __PYX_ERR(0, 96, __pyx_L1_error)
 
-      /* "wrapper/Process.pyx":88
+      /* "wrapper/Process.pyx":95
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):             # <<<<<<<<<<<<<<
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")
  *                 doc = File(base_path, is_detect_language, translate_to)
  */
     }
 
-    /* "wrapper/Process.pyx":92
+    /* "wrapper/Process.pyx":99
  *                 doc = File(base_path, is_detect_language, translate_to)
  *                 doc.create_features_base(file_path)
  *             if file_path.endswith('.pdf'):             # <<<<<<<<<<<<<<
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_3)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -4841,30 +5285,30 @@
         __pyx_t_4 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_pdf};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 92, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 99, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
-    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 92, __pyx_L1_error)
+    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 99, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     if (__pyx_t_7) {
 
-      /* "wrapper/Process.pyx":93
+      /* "wrapper/Process.pyx":100
  *                 doc.create_features_base(file_path)
  *             if file_path.endswith('.pdf'):
  *                 doc = PDF(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_PDF); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 93, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_PDF); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -4874,29 +5318,29 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[4] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 93, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF_SET(__pyx_v_doc, __pyx_t_2);
       __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":94
+      /* "wrapper/Process.pyx":101
  *             if file_path.endswith('.pdf'):
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)             # <<<<<<<<<<<<<<
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):
  *                 doc = Image(base_path, is_detect_language, translate_to)
  */
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 101, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -4906,71 +5350,71 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_file_path};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 94, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 101, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":92
+      /* "wrapper/Process.pyx":99
  *                 doc = File(base_path, is_detect_language, translate_to)
  *                 doc.create_features_base(file_path)
  *             if file_path.endswith('.pdf'):             # <<<<<<<<<<<<<<
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
       goto __pyx_L5;
     }
 
-    /* "wrapper/Process.pyx":95
+    /* "wrapper/Process.pyx":102
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):             # <<<<<<<<<<<<<<
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 95, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 102, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_3)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
         __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_1, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__7};
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__6};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 95, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 102, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
-    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 95, __pyx_L1_error)
+    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 102, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     if (__pyx_t_7) {
 
-      /* "wrapper/Process.pyx":96
+      /* "wrapper/Process.pyx":103
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):
  *                 doc = Image(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.mp4', '.wav')):
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Image); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Image); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 103, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -4980,29 +5424,29 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[4] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 103, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF_SET(__pyx_v_doc, __pyx_t_2);
       __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":97
+      /* "wrapper/Process.pyx":104
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)             # <<<<<<<<<<<<<<
  *             elif file_path.endswith(('.mp4', '.wav')):
  *                 doc = Video(base_path, is_detect_language, translate_to)
  */
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 97, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 104, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -5012,71 +5456,71 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_file_path};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 97, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 104, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":95
+      /* "wrapper/Process.pyx":102
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):             # <<<<<<<<<<<<<<
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
       goto __pyx_L5;
     }
 
-    /* "wrapper/Process.pyx":98
+    /* "wrapper/Process.pyx":105
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.mp4', '.wav')):             # <<<<<<<<<<<<<<
  *                 doc = Video(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 98, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 105, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_3)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
         __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_1, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__8};
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_tuple__7};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 98, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
-    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 98, __pyx_L1_error)
+    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 105, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     if (__pyx_t_7) {
 
-      /* "wrapper/Process.pyx":99
+      /* "wrapper/Process.pyx":106
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.mp4', '.wav')):
  *                 doc = Video(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  *                 doc.create_features(file_path)
  *                 return doc
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Video); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Video); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 106, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -5086,29 +5530,29 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[4] = {__pyx_t_3, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 99, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 106, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF_SET(__pyx_v_doc, __pyx_t_2);
       __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":100
+      /* "wrapper/Process.pyx":107
  *             elif file_path.endswith(('.mp4', '.wav')):
  *                 doc = Video(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)             # <<<<<<<<<<<<<<
  *                 return doc
  *         else:
  */
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_create_features); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 107, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __pyx_t_3 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_3)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -5118,63 +5562,63 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_file_path};
         __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L1_error)
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 107, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-      /* "wrapper/Process.pyx":101
+      /* "wrapper/Process.pyx":108
  *                 doc = Video(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *                 return doc             # <<<<<<<<<<<<<<
  *         else:
  *             logging.warning("Not supported document")
  */
       __Pyx_XDECREF(__pyx_r);
       __Pyx_INCREF(__pyx_v_doc);
       __pyx_r = __pyx_v_doc;
       goto __pyx_L0;
 
-      /* "wrapper/Process.pyx":98
+      /* "wrapper/Process.pyx":105
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.mp4', '.wav')):             # <<<<<<<<<<<<<<
  *                 doc = Video(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
     }
     __pyx_L5:;
 
-    /* "wrapper/Process.pyx":86
+    /* "wrapper/Process.pyx":93
  *         file_path = os.path.join(base_path, complement_path)
  *         file_path = f'{base_path}/{complement_path}'
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):             # <<<<<<<<<<<<<<
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  */
     goto __pyx_L3;
   }
 
-  /* "wrapper/Process.pyx":103
+  /* "wrapper/Process.pyx":110
  *                 return doc
  *         else:
  *             logging.warning("Not supported document")             # <<<<<<<<<<<<<<
  *             raise Exception(f"Not supported extension for document {complement_path}")
  * 
  */
   /*else*/ {
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 103, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 110, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_warning); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 103, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_warning); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 110, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __pyx_t_1 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
       __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
       if (likely(__pyx_t_1)) {
@@ -5185,58 +5629,58 @@
         __pyx_t_4 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_kp_u_Not_supported_document};
       __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 103, __pyx_L1_error)
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 110, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "wrapper/Process.pyx":104
+    /* "wrapper/Process.pyx":111
  *         else:
  *             logging.warning("Not supported document")
  *             raise Exception(f"Not supported extension for document {complement_path}")             # <<<<<<<<<<<<<<
  * 
  *         return doc
  */
-    __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_complement_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 104, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_complement_path, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Not_supported_extension_for_docu, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 104, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Not_supported_extension_for_docu, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 104, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     __Pyx_Raise(__pyx_t_2, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __PYX_ERR(0, 104, __pyx_L1_error)
+    __PYX_ERR(0, 111, __pyx_L1_error)
   }
   __pyx_L3:;
 
-  /* "wrapper/Process.pyx":106
+  /* "wrapper/Process.pyx":113
  *             raise Exception(f"Not supported extension for document {complement_path}")
  * 
  *         return doc             # <<<<<<<<<<<<<<
  * 
  *     @staticmethod
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_doc);
   __pyx_r = __pyx_v_doc;
   goto __pyx_L0;
 
-  /* "wrapper/Process.pyx":81
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
+  /* "wrapper/Process.pyx":88
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
@@ -5248,60 +5692,141 @@
   __Pyx_XDECREF(__pyx_v_file_path);
   __Pyx_XDECREF(__pyx_v_text);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/Process.pyx":108
+/* "wrapper/Process.pyx":115
  *         return doc
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_7Process_7Process_17load(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_16load, "Process.load()");
-static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_17load = {"load", (PyCFunction)__pyx_pw_7wrapper_7Process_7Process_17load, METH_NOARGS, __pyx_doc_7wrapper_7Process_7Process_16load};
-static PyObject *__pyx_pw_7wrapper_7Process_7Process_17load(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+static PyObject *__pyx_pw_7wrapper_7Process_7Process_17load(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_7Process_7Process_16load, "Process.load(download_dir=None)");
+static PyMethodDef __pyx_mdef_7wrapper_7Process_7Process_17load = {"load", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_7Process_7Process_17load, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_7Process_7Process_16load};
+static PyObject *__pyx_pw_7wrapper_7Process_7Process_17load(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_download_dir = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("load (wrapper)", 0);
-  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_16load(__pyx_self);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_download_dir,0};
+    PyObject* values[1] = {0};
+
+    /* "wrapper/Process.pyx":116
+ * 
+ *     @staticmethod
+ *     def load(download_dir=None):             # <<<<<<<<<<<<<<
+ *         logging.info("Downloading resources...")
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")
+ */
+    values[0] = ((PyObject *)((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_download_dir);
+          if (value) { values[0] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 115, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "load") < 0)) __PYX_ERR(0, 115, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_download_dir = values[0];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("load", 0, 0, 1, __pyx_nargs); __PYX_ERR(0, 115, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.Process.Process.load", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_7Process_7Process_16load(__pyx_self, __pyx_v_download_dir);
+
+  /* "wrapper/Process.pyx":115
+ *         return doc
+ * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
+ */
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_7Process_7Process_16load(CYTHON_UNUSED PyObject *__pyx_self) {
+static PyObject *__pyx_pf_7wrapper_7Process_7Process_16load(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_download_dir) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
+  int __pyx_t_5;
+  int __pyx_t_6;
+  int __pyx_t_7;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("load", 0);
 
-  /* "wrapper/Process.pyx":110
+  /* "wrapper/Process.pyx":117
  *     @staticmethod
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")             # <<<<<<<<<<<<<<
- *         os.system("python3 -m spacy download pt_core_news_sm")
- *         # Baixe os recursos do NLTK necessrios
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")             # <<<<<<<<<<<<<<
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 110, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 117, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_system); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 110, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 117, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -5309,33 +5834,33 @@
       __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_python3_m_spacy_download_xx_ent};
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_Downloading_resources};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 110, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 117, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":111
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")
- *         os.system("python3 -m spacy download pt_core_news_sm")             # <<<<<<<<<<<<<<
- *         # Baixe os recursos do NLTK necessrios
- *         nltk.download('punkt')
+  /* "wrapper/Process.pyx":118
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")             # <<<<<<<<<<<<<<
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")
+ *         if not download_dir or not os.path.exists(download_dir):
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 118, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_system); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_system); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 118, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
@@ -5343,33 +5868,33 @@
       __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_python3_m_spacy_download_pt_core};
+    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_python3_m_spacy_download_xx_ent};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 118, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":113
- *         os.system("python3 -m spacy download pt_core_news_sm")
- *         # Baixe os recursos do NLTK necessrios
- *         nltk.download('punkt')             # <<<<<<<<<<<<<<
- *         nltk.download('stopwords')
- *         nltk.download('wordnet')
+  /* "wrapper/Process.pyx":119
+ *         logging.info("Downloading resources...")
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")             # <<<<<<<<<<<<<<
+ *         if not download_dir or not os.path.exists(download_dir):
+ *             logging.info("Downloading more resources...")
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 113, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 119, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_download); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 113, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_system); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 119, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -5377,128 +5902,372 @@
       __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_punkt};
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_python3_m_spacy_download_pt_core};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 113, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 119, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/Process.pyx":114
- *         # Baixe os recursos do NLTK necessrios
- *         nltk.download('punkt')
- *         nltk.download('stopwords')             # <<<<<<<<<<<<<<
- *         nltk.download('wordnet')
- *         nltk.download('rslp')
+  /* "wrapper/Process.pyx":120
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")
+ *         if not download_dir or not os.path.exists(download_dir):             # <<<<<<<<<<<<<<
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_nltk); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 114, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_download_dir); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 120, __pyx_L1_error)
+  __pyx_t_7 = (!__pyx_t_6);
+  if (!__pyx_t_7) {
+  } else {
+    __pyx_t_5 = __pyx_t_7;
+    goto __pyx_L4_bool_binop_done;
+  }
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 120, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 114, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 120, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = NULL;
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_exists); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 120, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_download_dir};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 120, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 120, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_6 = (!__pyx_t_7);
+  __pyx_t_5 = __pyx_t_6;
+  __pyx_L4_bool_binop_done:;
+  if (__pyx_t_5) {
+
+    /* "wrapper/Process.pyx":121
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")
+ *         if not download_dir or not os.path.exists(download_dir):
+ *             logging.info("Downloading more resources...")             # <<<<<<<<<<<<<<
+ *             nltk.download('punkt', download_dir=download_dir)
+ *             nltk.download('stopwords', download_dir=download_dir)
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 121, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_info); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 121, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_3);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_Downloading_more_resources};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 121, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "wrapper/Process.pyx":122
+ *         if not download_dir or not os.path.exists(download_dir):
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_nltk); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 122, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_download_dir, __pyx_v_download_dir) < 0) __PYX_ERR(0, 122, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__8, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 122, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/Process.pyx":123
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)
+ *             nltk.download('stopwords', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('wordnet', download_dir=download_dir)
+ *             nltk.download('rslp', download_dir=download_dir)
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_nltk); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_download); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 123, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_download_dir, __pyx_v_download_dir) < 0) __PYX_ERR(0, 123, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_tuple__9, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 123, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+    /* "wrapper/Process.pyx":124
+ *             nltk.download('punkt', download_dir=download_dir)
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('rslp', download_dir=download_dir)
+ *         nltk.download('punkt')
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 124, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_download); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 124, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 124, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_download_dir, __pyx_v_download_dir) < 0) __PYX_ERR(0, 124, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__10, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 124, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "wrapper/Process.pyx":125
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)
+ *             nltk.download('rslp', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *         nltk.download('punkt')
+ *         nltk.download('stopwords')
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_nltk); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 125, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 125, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 125, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_download_dir, __pyx_v_download_dir) < 0) __PYX_ERR(0, 125, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__11, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 125, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/Process.pyx":120
+ *         os.system(f"python3 -m spacy download xx_ent_wiki_sm")
+ *         os.system(f"python3 -m spacy download pt_core_news_sm")
+ *         if not download_dir or not os.path.exists(download_dir):             # <<<<<<<<<<<<<<
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)
+ */
+  }
+
+  /* "wrapper/Process.pyx":126
+ *             nltk.download('wordnet', download_dir=download_dir)
+ *             nltk.download('rslp', download_dir=download_dir)
+ *         nltk.download('punkt')             # <<<<<<<<<<<<<<
+ *         nltk.download('stopwords')
+ *         nltk.download('wordnet')
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_nltk); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 126, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 126, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
+    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_1)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_1);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_n_u_stopwords};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 114, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
+    PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_n_u_punkt};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 126, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/Process.pyx":115
+  /* "wrapper/Process.pyx":127
+ *             nltk.download('rslp', download_dir=download_dir)
  *         nltk.download('punkt')
- *         nltk.download('stopwords')
- *         nltk.download('wordnet')             # <<<<<<<<<<<<<<
+ *         nltk.download('stopwords')             # <<<<<<<<<<<<<<
+ *         nltk.download('wordnet')
  *         nltk.download('rslp')
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 115, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_download); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 115, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_download); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
     if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
       __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __Pyx_DECREF_SET(__pyx_t_1, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_wordnet};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_stopwords};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 115, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 127, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/Process.pyx":128
+ *         nltk.download('punkt')
+ *         nltk.download('stopwords')
+ *         nltk.download('wordnet')             # <<<<<<<<<<<<<<
+ *         nltk.download('rslp')
+ *         logging.info("Finish Downloading resources...")
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_nltk); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 128, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_1)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_1);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_n_u_wordnet};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/Process.pyx":116
+  /* "wrapper/Process.pyx":129
  *         nltk.download('stopwords')
  *         nltk.download('wordnet')
  *         nltk.download('rslp')             # <<<<<<<<<<<<<<
+ *         logging.info("Finish Downloading resources...")
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_nltk); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 116, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_download); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 116, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 129, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_download); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 129, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_1, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_rslp};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 129, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = NULL;
+
+  /* "wrapper/Process.pyx":130
+ *         nltk.download('wordnet')
+ *         nltk.download('rslp')
+ *         logging.info("Finish Downloading resources...")             # <<<<<<<<<<<<<<
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_info); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
+    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_1)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_1);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_n_u_rslp};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 116, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
+    PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_kp_u_Finish_Downloading_resources};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 130, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/Process.pyx":108
+  /* "wrapper/Process.pyx":115
  *         return doc
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
@@ -5524,48 +6293,53 @@
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_n_s_DEBUG, __pyx_k_DEBUG, sizeof(__pyx_k_DEBUG), 0, 0, 1, 1},
-    {&__pyx_n_u_DEBUG, __pyx_k_DEBUG, sizeof(__pyx_k_DEBUG), 0, 1, 0, 1},
+    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_DocumentSearchSB, __pyx_k_DocumentSearchSB, sizeof(__pyx_k_DocumentSearchSB), 0, 0, 1, 1},
     {&__pyx_n_s_DocumentSearchTD, __pyx_k_DocumentSearchTD, sizeof(__pyx_k_DocumentSearchTD), 0, 0, 1, 1},
+    {&__pyx_kp_u_Downloading_more_resources, __pyx_k_Downloading_more_resources, sizeof(__pyx_k_Downloading_more_resources), 0, 1, 0, 0},
+    {&__pyx_kp_u_Downloading_resources, __pyx_k_Downloading_resources, sizeof(__pyx_k_Downloading_resources), 0, 1, 0, 0},
+    {&__pyx_n_s_ENGLISH, __pyx_k_ENGLISH, sizeof(__pyx_k_ENGLISH), 0, 0, 1, 1},
     {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
+    {&__pyx_kp_u_Finish_Downloading_resources, __pyx_k_Finish_Downloading_resources, sizeof(__pyx_k_Finish_Downloading_resources), 0, 1, 0, 0},
     {&__pyx_n_s_Image, __pyx_k_Image, sizeof(__pyx_k_Image), 0, 0, 1, 1},
+    {&__pyx_n_s_LanguageDetector, __pyx_k_LanguageDetector, sizeof(__pyx_k_LanguageDetector), 0, 0, 1, 1},
+    {&__pyx_kp_u_Language_detected, __pyx_k_Language_detected, sizeof(__pyx_k_Language_detected), 0, 1, 0, 0},
+    {&__pyx_n_s_ModelType, __pyx_k_ModelType, sizeof(__pyx_k_ModelType), 0, 0, 1, 1},
     {&__pyx_n_s_None, __pyx_k_None, sizeof(__pyx_k_None), 0, 0, 1, 1},
     {&__pyx_kp_u_Not_supported_document, __pyx_k_Not_supported_document, sizeof(__pyx_k_Not_supported_document), 0, 1, 0, 0},
     {&__pyx_kp_u_Not_supported_extension_for_docu, __pyx_k_Not_supported_extension_for_docu, sizeof(__pyx_k_Not_supported_extension_for_docu), 0, 1, 0, 0},
     {&__pyx_n_s_PDF, __pyx_k_PDF, sizeof(__pyx_k_PDF), 0, 0, 1, 1},
     {&__pyx_n_s_Process, __pyx_k_Process, sizeof(__pyx_k_Process), 0, 0, 1, 1},
     {&__pyx_n_s_Process___init, __pyx_k_Process___init, sizeof(__pyx_k_Process___init), 0, 0, 1, 1},
     {&__pyx_n_s_Process_compile, __pyx_k_Process_compile, sizeof(__pyx_k_Process_compile), 0, 0, 1, 1},
     {&__pyx_n_s_Process_compile_and_train, __pyx_k_Process_compile_and_train, sizeof(__pyx_k_Process_compile_and_train), 0, 0, 1, 1},
     {&__pyx_n_s_Process_compile_doc, __pyx_k_Process_compile_doc, sizeof(__pyx_k_Process_compile_doc), 0, 0, 1, 1},
     {&__pyx_n_s_Process_create_batch_pipeline, __pyx_k_Process_create_batch_pipeline, sizeof(__pyx_k_Process_create_batch_pipeline), 0, 0, 1, 1},
     {&__pyx_n_s_Process_create_online_pipeline_m, __pyx_k_Process_create_online_pipeline_m, sizeof(__pyx_k_Process_create_online_pipeline_m), 0, 0, 1, 1},
     {&__pyx_n_s_Process_load, __pyx_k_Process_load, sizeof(__pyx_k_Process_load), 0, 0, 1, 1},
     {&__pyx_n_s_Process_search, __pyx_k_Process_search, sizeof(__pyx_k_Process_search), 0, 0, 1, 1},
     {&__pyx_n_s_Process_train_doc, __pyx_k_Process_train_doc, sizeof(__pyx_k_Process_train_doc), 0, 0, 1, 1},
+    {&__pyx_kp_u_Query, __pyx_k_Query, sizeof(__pyx_k_Query), 0, 1, 0, 0},
+    {&__pyx_n_s_SB, __pyx_k_SB, sizeof(__pyx_k_SB), 0, 0, 1, 1},
+    {&__pyx_n_s_TD, __pyx_k_TD, sizeof(__pyx_k_TD), 0, 0, 1, 1},
     {&__pyx_n_s_Video, __pyx_k_Video, sizeof(__pyx_k_Video), 0, 0, 1, 1},
-    {&__pyx_n_s_WARNING, __pyx_k_WARNING, sizeof(__pyx_k_WARNING), 0, 0, 1, 1},
     {&__pyx_kp_u_Without_support_for_document_wit, __pyx_k_Without_support_for_document_wit, sizeof(__pyx_k_Without_support_for_document_wit), 0, 1, 0, 0},
-    {&__pyx_n_s__10, __pyx_k__10, sizeof(__pyx_k__10), 0, 0, 1, 1},
-    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
-    {&__pyx_n_s__32, __pyx_k__32, sizeof(__pyx_k__32), 0, 0, 1, 1},
-    {&__pyx_kp_u__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 1, 0, 0},
-    {&__pyx_kp_u__9, __pyx_k__9, sizeof(__pyx_k__9), 0, 1, 0, 0},
+    {&__pyx_kp_u__12, __pyx_k__12, sizeof(__pyx_k__12), 0, 1, 0, 0},
+    {&__pyx_n_s__13, __pyx_k__13, sizeof(__pyx_k__13), 0, 0, 1, 1},
+    {&__pyx_kp_u__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 1, 0, 0},
+    {&__pyx_n_s__34, __pyx_k__34, sizeof(__pyx_k__34), 0, 0, 1, 1},
     {&__pyx_n_s_annotations, __pyx_k_annotations, sizeof(__pyx_k_annotations), 0, 0, 1, 1},
-    {&__pyx_kp_u_asctime_s_levelname_s_message_s, __pyx_k_asctime_s_levelname_s_message_s, sizeof(__pyx_k_asctime_s_levelname_s_message_s), 0, 1, 0, 0},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_kp_u_background_tasks_server_logs_doc, __pyx_k_background_tasks_server_logs_doc, sizeof(__pyx_k_background_tasks_server_logs_doc), 0, 1, 0, 0},
     {&__pyx_n_s_base_path, __pyx_k_base_path, sizeof(__pyx_k_base_path), 0, 0, 1, 1},
-    {&__pyx_n_s_basicConfig, __pyx_k_basicConfig, sizeof(__pyx_k_basicConfig), 0, 0, 1, 1},
     {&__pyx_n_s_bool, __pyx_k_bool, sizeof(__pyx_k_bool), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_compile, __pyx_k_compile, sizeof(__pyx_k_compile), 0, 0, 1, 1},
     {&__pyx_n_s_compile_and_train, __pyx_k_compile_and_train, sizeof(__pyx_k_compile_and_train), 0, 0, 1, 1},
     {&__pyx_n_s_compile_doc, __pyx_k_compile_doc, sizeof(__pyx_k_compile_doc), 0, 0, 1, 1},
     {&__pyx_n_s_complement_path, __pyx_k_complement_path, sizeof(__pyx_k_complement_path), 0, 0, 1, 1},
     {&__pyx_n_s_core_DocumentSearchSB, __pyx_k_core_DocumentSearchSB, sizeof(__pyx_k_core_DocumentSearchSB), 0, 0, 1, 1},
@@ -5574,254 +6348,266 @@
     {&__pyx_n_s_core_Image, __pyx_k_core_Image, sizeof(__pyx_k_core_Image), 0, 0, 1, 1},
     {&__pyx_n_s_core_PDF, __pyx_k_core_PDF, sizeof(__pyx_k_core_PDF), 0, 0, 1, 1},
     {&__pyx_n_s_core_Video, __pyx_k_core_Video, sizeof(__pyx_k_core_Video), 0, 0, 1, 1},
     {&__pyx_n_s_create_batch_pipeline, __pyx_k_create_batch_pipeline, sizeof(__pyx_k_create_batch_pipeline), 0, 0, 1, 1},
     {&__pyx_n_s_create_features, __pyx_k_create_features, sizeof(__pyx_k_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_create_online_pipeline_multiling, __pyx_k_create_online_pipeline_multiling, sizeof(__pyx_k_create_online_pipeline_multiling), 0, 0, 1, 1},
     {&__pyx_kp_u_csv, __pyx_k_csv, sizeof(__pyx_k_csv), 0, 1, 0, 0},
-    {&__pyx_n_s_detected_search_language, __pyx_k_detected_search_language, sizeof(__pyx_k_detected_search_language), 0, 0, 1, 1},
+    {&__pyx_n_s_detect_lang, __pyx_k_detect_lang, sizeof(__pyx_k_detect_lang), 0, 0, 1, 1},
+    {&__pyx_n_s_detected_language, __pyx_k_detected_language, sizeof(__pyx_k_detected_language), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
     {&__pyx_n_s_doc_2, __pyx_k_doc_2, sizeof(__pyx_k_doc_2), 0, 0, 1, 1},
     {&__pyx_n_s_document_search, __pyx_k_document_search, sizeof(__pyx_k_document_search), 0, 0, 1, 1},
     {&__pyx_kp_u_docx, __pyx_k_docx, sizeof(__pyx_k_docx), 0, 1, 0, 0},
     {&__pyx_n_s_download, __pyx_k_download, sizeof(__pyx_k_download), 0, 0, 1, 1},
-    {&__pyx_n_u_en, __pyx_k_en, sizeof(__pyx_k_en), 0, 1, 0, 1},
+    {&__pyx_n_s_download_dir, __pyx_k_download_dir, sizeof(__pyx_k_download_dir), 0, 0, 1, 1},
     {&__pyx_n_s_endswith, __pyx_k_endswith, sizeof(__pyx_k_endswith), 0, 0, 1, 1},
-    {&__pyx_n_u_english, __pyx_k_english, sizeof(__pyx_k_english), 0, 1, 0, 1},
-    {&__pyx_n_s_environ, __pyx_k_environ, sizeof(__pyx_k_environ), 0, 0, 1, 1},
-    {&__pyx_n_u_es, __pyx_k_es, sizeof(__pyx_k_es), 0, 1, 0, 1},
     {&__pyx_n_s_exists, __pyx_k_exists, sizeof(__pyx_k_exists), 0, 0, 1, 1},
     {&__pyx_n_s_file, __pyx_k_file, sizeof(__pyx_k_file), 0, 0, 1, 1},
+    {&__pyx_n_s_file_index, __pyx_k_file_index, sizeof(__pyx_k_file_index), 0, 0, 1, 1},
     {&__pyx_n_s_file_path, __pyx_k_file_path, sizeof(__pyx_k_file_path), 0, 0, 1, 1},
-    {&__pyx_n_s_filename, __pyx_k_filename, sizeof(__pyx_k_filename), 0, 0, 1, 1},
-    {&__pyx_n_s_format, __pyx_k_format, sizeof(__pyx_k_format), 0, 0, 1, 1},
-    {&__pyx_n_s_get, __pyx_k_get, sizeof(__pyx_k_get), 0, 0, 1, 1},
+    {&__pyx_n_s_id, __pyx_k_id, sizeof(__pyx_k_id), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_info, __pyx_k_info, sizeof(__pyx_k_info), 0, 0, 1, 1},
+    {&__pyx_n_s_infra, __pyx_k_infra, sizeof(__pyx_k_infra), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_ModelType, __pyx_k_infra_ModelType, sizeof(__pyx_k_infra_ModelType), 0, 0, 1, 1},
     {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
     {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_isExist, __pyx_k_isExist, sizeof(__pyx_k_isExist), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_detect_language, __pyx_k_is_detect_language, sizeof(__pyx_k_is_detect_language), 0, 0, 1, 1},
     {&__pyx_n_s_join, __pyx_k_join, sizeof(__pyx_k_join), 0, 0, 1, 1},
     {&__pyx_n_u_jpeg, __pyx_k_jpeg, sizeof(__pyx_k_jpeg), 0, 1, 0, 1},
     {&__pyx_kp_u_jpeg_2, __pyx_k_jpeg_2, sizeof(__pyx_k_jpeg_2), 0, 1, 0, 0},
     {&__pyx_kp_u_jpg, __pyx_k_jpg, sizeof(__pyx_k_jpg), 0, 1, 0, 0},
-    {&__pyx_n_s_level, __pyx_k_level, sizeof(__pyx_k_level), 0, 0, 1, 1},
+    {&__pyx_n_s_lang_to_search, __pyx_k_lang_to_search, sizeof(__pyx_k_lang_to_search), 0, 0, 1, 1},
     {&__pyx_n_s_load, __pyx_k_load, sizeof(__pyx_k_load), 0, 0, 1, 1},
     {&__pyx_n_s_logging, __pyx_k_logging, sizeof(__pyx_k_logging), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_makedirs, __pyx_k_makedirs, sizeof(__pyx_k_makedirs), 0, 0, 1, 1},
     {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
-    {&__pyx_kp_u_model_not_supported, __pyx_k_model_not_supported, sizeof(__pyx_k_model_not_supported), 0, 1, 0, 0},
     {&__pyx_n_s_modeldir, __pyx_k_modeldir, sizeof(__pyx_k_modeldir), 0, 0, 1, 1},
     {&__pyx_kp_u_models, __pyx_k_models, sizeof(__pyx_k_models), 0, 1, 0, 0},
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_kp_u_mp4, __pyx_k_mp4, sizeof(__pyx_k_mp4), 0, 1, 0, 0},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
     {&__pyx_n_s_nltk, __pyx_k_nltk, sizeof(__pyx_k_nltk), 0, 0, 1, 1},
     {&__pyx_n_s_os, __pyx_k_os, sizeof(__pyx_k_os), 0, 0, 1, 1},
     {&__pyx_n_s_page, __pyx_k_page, sizeof(__pyx_k_page), 0, 0, 1, 1},
     {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
     {&__pyx_kp_u_pdf, __pyx_k_pdf, sizeof(__pyx_k_pdf), 0, 1, 0, 0},
     {&__pyx_kp_u_png, __pyx_k_png, sizeof(__pyx_k_png), 0, 1, 0, 0},
-    {&__pyx_n_u_portuguese, __pyx_k_portuguese, sizeof(__pyx_k_portuguese), 0, 1, 0, 1},
     {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
-    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
     {&__pyx_n_u_punkt, __pyx_k_punkt, sizeof(__pyx_k_punkt), 0, 1, 0, 1},
     {&__pyx_kp_u_python3_m_spacy_download_pt_core, __pyx_k_python3_m_spacy_download_pt_core, sizeof(__pyx_k_python3_m_spacy_download_pt_core), 0, 1, 0, 0},
     {&__pyx_kp_u_python3_m_spacy_download_xx_ent, __pyx_k_python3_m_spacy_download_xx_ent, sizeof(__pyx_k_python3_m_spacy_download_xx_ent), 0, 1, 0, 0},
     {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
     {&__pyx_n_s_query, __pyx_k_query, sizeof(__pyx_k_query), 0, 0, 1, 1},
     {&__pyx_n_s_results_per_page, __pyx_k_results_per_page, sizeof(__pyx_k_results_per_page), 0, 0, 1, 1},
     {&__pyx_n_s_return, __pyx_k_return, sizeof(__pyx_k_return), 0, 0, 1, 1},
     {&__pyx_n_u_rslp, __pyx_k_rslp, sizeof(__pyx_k_rslp), 0, 1, 0, 1},
-    {&__pyx_n_u_sb, __pyx_k_sb, sizeof(__pyx_k_sb), 0, 1, 0, 1},
     {&__pyx_n_s_search, __pyx_k_search, sizeof(__pyx_k_search), 0, 0, 1, 1},
     {&__pyx_n_s_search_documents, __pyx_k_search_documents, sizeof(__pyx_k_search_documents), 0, 0, 1, 1},
     {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
     {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
-    {&__pyx_n_u_spanish, __pyx_k_spanish, sizeof(__pyx_k_spanish), 0, 1, 0, 1},
     {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
     {&__pyx_kp_s_src_wrapper_Process_pyx, __pyx_k_src_wrapper_Process_pyx, sizeof(__pyx_k_src_wrapper_Process_pyx), 0, 0, 1, 0},
+    {&__pyx_kp_u_starting_process_pyx, __pyx_k_starting_process_pyx, sizeof(__pyx_k_starting_process_pyx), 0, 1, 0, 0},
     {&__pyx_n_s_staticmethod, __pyx_k_staticmethod, sizeof(__pyx_k_staticmethod), 0, 0, 1, 1},
     {&__pyx_n_u_stopwords, __pyx_k_stopwords, sizeof(__pyx_k_stopwords), 0, 1, 0, 1},
     {&__pyx_n_s_str, __pyx_k_str, sizeof(__pyx_k_str), 0, 0, 1, 1},
     {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
-    {&__pyx_n_s_supported_languages, __pyx_k_supported_languages, sizeof(__pyx_k_supported_languages), 0, 0, 1, 1},
     {&__pyx_n_s_system, __pyx_k_system, sizeof(__pyx_k_system), 0, 0, 1, 1},
-    {&__pyx_n_u_td, __pyx_k_td, sizeof(__pyx_k_td), 0, 1, 0, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
     {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
     {&__pyx_n_s_train_doc, __pyx_k_train_doc, sizeof(__pyx_k_train_doc), 0, 0, 1, 1},
     {&__pyx_n_s_train_model, __pyx_k_train_model, sizeof(__pyx_k_train_model), 0, 0, 1, 1},
     {&__pyx_n_s_translate_to, __pyx_k_translate_to, sizeof(__pyx_k_translate_to), 0, 0, 1, 1},
     {&__pyx_kp_u_txt, __pyx_k_txt, sizeof(__pyx_k_txt), 0, 1, 0, 0},
     {&__pyx_n_s_type, __pyx_k_type, sizeof(__pyx_k_type), 0, 0, 1, 1},
+    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
     {&__pyx_n_s_warning, __pyx_k_warning, sizeof(__pyx_k_warning), 0, 0, 1, 1},
     {&__pyx_kp_u_wav, __pyx_k_wav, sizeof(__pyx_k_wav), 0, 1, 0, 0},
     {&__pyx_n_u_wordnet, __pyx_k_wordnet, sizeof(__pyx_k_wordnet), 0, 1, 0, 1},
     {&__pyx_n_s_wrapper_Process, __pyx_k_wrapper_Process, sizeof(__pyx_k_wrapper_Process), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_staticmethod = __Pyx_GetBuiltinName(__pyx_n_s_staticmethod); if (!__pyx_builtin_staticmethod) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_builtin_staticmethod = __Pyx_GetBuiltinName(__pyx_n_s_staticmethod); if (!__pyx_builtin_staticmethod) __PYX_ERR(0, 56, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/Process.pyx":55
- *             self.document_search = DocumentSearchTD(self.modeldir)
- *         else:
- *             raise Exception("model not supported.")             # <<<<<<<<<<<<<<
- * 
- *     @staticmethod
- */
-  __pyx_tuple_ = PyTuple_Pack(1, __pyx_kp_u_model_not_supported); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 55, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple_);
-  __Pyx_GIVEREF(__pyx_tuple_);
-
-  /* "wrapper/Process.pyx":86
+  /* "wrapper/Process.pyx":93
  *         file_path = os.path.join(base_path, complement_path)
  *         file_path = f'{base_path}/{complement_path}'
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):             # <<<<<<<<<<<<<<
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  */
-  __pyx_tuple__3 = PyTuple_Pack(8, __pyx_kp_u_txt, __pyx_kp_u_csv, __pyx_kp_u_pdf, __pyx_kp_u_docx, __pyx_kp_u_jpg, __pyx_n_u_jpeg, __pyx_kp_u_png, __pyx_kp_u_mp4); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 86, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__3);
-  __Pyx_GIVEREF(__pyx_tuple__3);
+  __pyx_tuple__2 = PyTuple_Pack(8, __pyx_kp_u_txt, __pyx_kp_u_csv, __pyx_kp_u_pdf, __pyx_kp_u_docx, __pyx_kp_u_jpg, __pyx_n_u_jpeg, __pyx_kp_u_png, __pyx_kp_u_mp4); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 93, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__2);
+  __Pyx_GIVEREF(__pyx_tuple__2);
 
-  /* "wrapper/Process.pyx":88
+  /* "wrapper/Process.pyx":95
  *         if file_path.endswith(('.txt', '.csv', '.pdf', '.docx', '.jpg', 'jpeg', '.png', '.mp4')):
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):             # <<<<<<<<<<<<<<
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")
  *                 doc = File(base_path, is_detect_language, translate_to)
  */
-  __pyx_tuple__5 = PyTuple_Pack(3, __pyx_kp_u_txt, __pyx_kp_u_csv, __pyx_kp_u_docx); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 88, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__5);
-  __Pyx_GIVEREF(__pyx_tuple__5);
+  __pyx_tuple__4 = PyTuple_Pack(3, __pyx_kp_u_txt, __pyx_kp_u_csv, __pyx_kp_u_docx); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 95, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__4);
+  __Pyx_GIVEREF(__pyx_tuple__4);
 
-  /* "wrapper/Process.pyx":89
+  /* "wrapper/Process.pyx":96
  *             text = ""
  *             if file_path.endswith(('.txt', '.csv', '.docx')):
  *                 raise Exception(f"Without support for document with extension .txt, .csv or .docx.")             # <<<<<<<<<<<<<<
  *                 doc = File(base_path, is_detect_language, translate_to)
  *                 doc.create_features_base(file_path)
  */
-  __pyx_tuple__6 = PyTuple_Pack(1, __pyx_kp_u_Without_support_for_document_wit); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 89, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__6);
-  __Pyx_GIVEREF(__pyx_tuple__6);
+  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_kp_u_Without_support_for_document_wit); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 96, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__5);
+  __Pyx_GIVEREF(__pyx_tuple__5);
 
-  /* "wrapper/Process.pyx":95
+  /* "wrapper/Process.pyx":102
  *                 doc = PDF(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.jpg', '.png', '.jpeg')):             # <<<<<<<<<<<<<<
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
-  __pyx_tuple__7 = PyTuple_Pack(3, __pyx_kp_u_jpg, __pyx_kp_u_png, __pyx_kp_u_jpeg_2); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 95, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__7);
-  __Pyx_GIVEREF(__pyx_tuple__7);
+  __pyx_tuple__6 = PyTuple_Pack(3, __pyx_kp_u_jpg, __pyx_kp_u_png, __pyx_kp_u_jpeg_2); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 102, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__6);
+  __Pyx_GIVEREF(__pyx_tuple__6);
 
-  /* "wrapper/Process.pyx":98
+  /* "wrapper/Process.pyx":105
  *                 doc = Image(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  *             elif file_path.endswith(('.mp4', '.wav')):             # <<<<<<<<<<<<<<
  *                 doc = Video(base_path, is_detect_language, translate_to)
  *                 doc.create_features(file_path)
  */
-  __pyx_tuple__8 = PyTuple_Pack(2, __pyx_kp_u_mp4, __pyx_kp_u_wav); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 98, __pyx_L1_error)
+  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_kp_u_mp4, __pyx_kp_u_wav); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 105, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__7);
+  __Pyx_GIVEREF(__pyx_tuple__7);
+
+  /* "wrapper/Process.pyx":122
+ *         if not download_dir or not os.path.exists(download_dir):
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)
+ */
+  __pyx_tuple__8 = PyTuple_Pack(1, __pyx_n_u_punkt); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 122, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__8);
   __Pyx_GIVEREF(__pyx_tuple__8);
 
-  /* "wrapper/Process.pyx":14
- * 
- * level = logging.WARNING
- * if os.environ.get('DEBUG') and os.environ.get('DEBUG') == 1:             # <<<<<<<<<<<<<<
- *     level = logging.DEBUG
- * 
+  /* "wrapper/Process.pyx":123
+ *             logging.info("Downloading more resources...")
+ *             nltk.download('punkt', download_dir=download_dir)
+ *             nltk.download('stopwords', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('wordnet', download_dir=download_dir)
+ *             nltk.download('rslp', download_dir=download_dir)
+ */
+  __pyx_tuple__9 = PyTuple_Pack(1, __pyx_n_u_stopwords); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 123, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__9);
+  __Pyx_GIVEREF(__pyx_tuple__9);
+
+  /* "wrapper/Process.pyx":124
+ *             nltk.download('punkt', download_dir=download_dir)
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *             nltk.download('rslp', download_dir=download_dir)
+ *         nltk.download('punkt')
  */
-  __pyx_tuple__11 = PyTuple_Pack(1, __pyx_n_u_DEBUG); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_tuple__10 = PyTuple_Pack(1, __pyx_n_u_wordnet); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 124, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__10);
+  __Pyx_GIVEREF(__pyx_tuple__10);
+
+  /* "wrapper/Process.pyx":125
+ *             nltk.download('stopwords', download_dir=download_dir)
+ *             nltk.download('wordnet', download_dir=download_dir)
+ *             nltk.download('rslp', download_dir=download_dir)             # <<<<<<<<<<<<<<
+ *         nltk.download('punkt')
+ *         nltk.download('stopwords')
+ */
+  __pyx_tuple__11 = PyTuple_Pack(1, __pyx_n_u_rslp); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 125, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__11);
   __Pyx_GIVEREF(__pyx_tuple__11);
 
-  /* "wrapper/Process.pyx":31
+  /* "wrapper/Process.pyx":29
  *     document_search = None
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None, type='sb') -> None:             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None, type:ModelType=ModelType.SB) -> None:             # <<<<<<<<<<<<<<
  *         """
  *         Initialize the pipeline
  */
-  __pyx_tuple__12 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to, __pyx_n_s_type, __pyx_n_s_isExist); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__12);
-  __Pyx_GIVEREF(__pyx_tuple__12);
-  __pyx_codeobj__13 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_init, 31, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__13)) __PYX_ERR(0, 31, __pyx_L1_error)
-  __pyx_tuple__14 = PyTuple_Pack(3, ((PyObject *)Py_False), ((PyObject *)Py_None), ((PyObject*)__pyx_n_u_sb)); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_tuple__14 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to, __pyx_n_s_type, __pyx_n_s_isExist); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__14);
   __Pyx_GIVEREF(__pyx_tuple__14);
+  __pyx_codeobj__15 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__14, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_init, 29, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__15)) __PYX_ERR(0, 29, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":57
- *             raise Exception("model not supported.")
+  /* "wrapper/Process.pyx":56
+ *             self.document_search = None
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  */
-  __pyx_tuple__15 = PyTuple_Pack(3, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 57, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__15);
-  __Pyx_GIVEREF(__pyx_tuple__15);
-  __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_create_online_pipeline_multiling, 57, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 57, __pyx_L1_error)
-  __pyx_tuple__17 = PyTuple_Pack(2, ((PyObject *)Py_True), ((PyObject*)__pyx_n_u_en)); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 57, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__17);
-  __Pyx_GIVEREF(__pyx_tuple__17);
+  __pyx_tuple__16 = PyTuple_Pack(3, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__16);
+  __Pyx_GIVEREF(__pyx_tuple__16);
+  __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__16, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_create_online_pipeline_multiling, 56, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(0, 56, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":61
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+  /* "wrapper/Process.pyx":60
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  */
-  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_create_batch_pipeline, 61, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(0, 61, __pyx_L1_error)
-  __pyx_tuple__19 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 61, __pyx_L1_error)
+  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__16, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_create_batch_pipeline, 60, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __pyx_tuple__19 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__19);
   __Pyx_GIVEREF(__pyx_tuple__19);
 
-  /* "wrapper/Process.pyx":65
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+  /* "wrapper/Process.pyx":64
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  * 
- *     def compile_and_train(self, complement_path):             # <<<<<<<<<<<<<<
- *         file = self.compile_doc(complement_path)
+ *     def compile_and_train(self, complement_path, file_index):             # <<<<<<<<<<<<<<
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)
  */
-  __pyx_tuple__20 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_complement_path, __pyx_n_s_file); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__20 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_complement_path, __pyx_n_s_file_index, __pyx_n_s_file); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 64, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__20);
   __Pyx_GIVEREF(__pyx_tuple__20);
-  __pyx_codeobj__21 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__20, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile_and_train, 65, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__21)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_codeobj__21 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__20, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile_and_train, 64, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__21)) __PYX_ERR(0, 64, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":70
+  /* "wrapper/Process.pyx":69
  *         return file
  * 
- *     def compile_doc(self, complement_path):             # <<<<<<<<<<<<<<
+ *     def compile_doc(self, complement_path, file_index):             # <<<<<<<<<<<<<<
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
- *         return file
+ *         file.id = file_index
  */
-  __pyx_codeobj__22 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__20, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile_doc, 70, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__22)) __PYX_ERR(0, 70, __pyx_L1_error)
+  __pyx_codeobj__22 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__20, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile_doc, 69, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__22)) __PYX_ERR(0, 69, __pyx_L1_error)
 
   /* "wrapper/Process.pyx":74
  *         return file
  * 
  *     def train_doc(self, file):             # <<<<<<<<<<<<<<
  *         self.document_search.train_model(file)
  *         return file
@@ -5830,49 +6616,55 @@
   __Pyx_GOTREF(__pyx_tuple__23);
   __Pyx_GIVEREF(__pyx_tuple__23);
   __pyx_codeobj__24 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__23, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_train_doc, 74, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__24)) __PYX_ERR(0, 74, __pyx_L1_error)
 
   /* "wrapper/Process.pyx":78
  *         return file
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
- * 
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
  */
-  __pyx_tuple__25 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_query, __pyx_n_s_detected_search_language, __pyx_n_s_page, __pyx_n_s_results_per_page); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __pyx_tuple__25 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_query, __pyx_n_s_detected_language, __pyx_n_s_page, __pyx_n_s_results_per_page, __pyx_n_s_lang_to_search); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 78, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__25);
   __Pyx_GIVEREF(__pyx_tuple__25);
-  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_search, 78, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_search, 78, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 78, __pyx_L1_error)
   __pyx_tuple__27 = PyTuple_Pack(3, ((PyObject *)Py_None), ((PyObject *)__pyx_int_1), ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 78, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__27);
   __Pyx_GIVEREF(__pyx_tuple__27);
 
-  /* "wrapper/Process.pyx":81
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
+  /* "wrapper/Process.pyx":88
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  */
-  __pyx_tuple__28 = PyTuple_Pack(7, __pyx_n_s_base_path, __pyx_n_s_complement_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to, __pyx_n_s_doc, __pyx_n_s_file_path, __pyx_n_s_text); if (unlikely(!__pyx_tuple__28)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __pyx_tuple__28 = PyTuple_Pack(7, __pyx_n_s_base_path, __pyx_n_s_complement_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to, __pyx_n_s_doc, __pyx_n_s_file_path, __pyx_n_s_text); if (unlikely(!__pyx_tuple__28)) __PYX_ERR(0, 88, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__28);
   __Pyx_GIVEREF(__pyx_tuple__28);
-  __pyx_codeobj__29 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__28, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile, 81, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__29)) __PYX_ERR(0, 81, __pyx_L1_error)
-  __pyx_tuple__30 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __pyx_codeobj__29 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__28, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_compile, 88, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__29)) __PYX_ERR(0, 88, __pyx_L1_error)
+  __pyx_tuple__30 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(0, 88, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__30);
   __Pyx_GIVEREF(__pyx_tuple__30);
 
-  /* "wrapper/Process.pyx":108
+  /* "wrapper/Process.pyx":115
  *         return doc
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
  */
-  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(0, 0, 0, 0, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_load, 108, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 108, __pyx_L1_error)
+  __pyx_tuple__31 = PyTuple_Pack(1, __pyx_n_s_download_dir); if (unlikely(!__pyx_tuple__31)) __PYX_ERR(0, 115, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__31);
+  __Pyx_GIVEREF(__pyx_tuple__31);
+  __pyx_codeobj__32 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__31, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_Process_pyx, __pyx_n_s_load, 115, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__32)) __PYX_ERR(0, 115, __pyx_L1_error)
+  __pyx_tuple__33 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 115, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__33);
+  __Pyx_GIVEREF(__pyx_tuple__33);
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -6116,16 +6908,16 @@
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_t_5;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
@@ -6280,15 +7072,15 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/Process.pyx":3
  * from .core.File import File
  * from .core.Image import Image
  * from .core.Video import Video             # <<<<<<<<<<<<<<
  * from .core.PDF import PDF
- * import os
+ * from .infra.DocLanguage import DocLanguage
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_Video);
   __Pyx_GIVEREF(__pyx_n_s_Video);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Video);
   __pyx_t_3 = __Pyx_Import(__pyx_n_s_core_Video, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
@@ -6300,16 +7092,16 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/Process.pyx":4
  * from .core.Image import Image
  * from .core.Video import Video
  * from .core.PDF import PDF             # <<<<<<<<<<<<<<
- * import os
- * import nltk
+ * from .infra.DocLanguage import DocLanguage
+ * from .infra.ModelType import ModelType
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_PDF);
   __Pyx_GIVEREF(__pyx_n_s_PDF);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_PDF);
   __pyx_t_2 = __Pyx_Import(__pyx_n_s_core_PDF, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
@@ -6320,413 +7112,404 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_PDF, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/Process.pyx":5
  * from .core.Video import Video
  * from .core.PDF import PDF
- * import os             # <<<<<<<<<<<<<<
- * import nltk
- * # from .core.DocumentSearch import DocumentSearch
- */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_os, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+ * from .infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
+ * from .infra.ModelType import ModelType
+ * from .infra import LanguageDetector
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_os, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/Process.pyx":6
  * from .core.PDF import PDF
+ * from .infra.DocLanguage import DocLanguage
+ * from .infra.ModelType import ModelType             # <<<<<<<<<<<<<<
+ * from .infra import LanguageDetector
  * import os
- * import nltk             # <<<<<<<<<<<<<<
- * # from .core.DocumentSearch import DocumentSearch
- * from .core.DocumentSearchTD import DocumentSearchTD
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_nltk, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_ModelType);
+  __Pyx_GIVEREF(__pyx_n_s_ModelType);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_ModelType);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_ModelType, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_nltk, __pyx_t_2) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ModelType, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":8
+  /* "wrapper/Process.pyx":7
+ * from .infra.DocLanguage import DocLanguage
+ * from .infra.ModelType import ModelType
+ * from .infra import LanguageDetector             # <<<<<<<<<<<<<<
+ * import os
  * import nltk
- * # from .core.DocumentSearch import DocumentSearch
- * from .core.DocumentSearchTD import DocumentSearchTD             # <<<<<<<<<<<<<<
- * from .core.DocumentSearchSB import DocumentSearchSB
- * import logging
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_DocumentSearchTD);
-  __Pyx_GIVEREF(__pyx_n_s_DocumentSearchTD);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocumentSearchTD);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_core_DocumentSearchTD, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_LanguageDetector);
+  __Pyx_GIVEREF(__pyx_n_s_LanguageDetector);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_LanguageDetector);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocumentSearchTD); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocumentSearchTD, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LanguageDetector, __pyx_t_2) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
+  /* "wrapper/Process.pyx":8
+ * from .infra.ModelType import ModelType
+ * from .infra import LanguageDetector
+ * import os             # <<<<<<<<<<<<<<
+ * import nltk
+ * # from .core.DocumentSearch import DocumentSearch
+ */
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_os, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_os, __pyx_t_3) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
   /* "wrapper/Process.pyx":9
+ * from .infra import LanguageDetector
+ * import os
+ * import nltk             # <<<<<<<<<<<<<<
  * # from .core.DocumentSearch import DocumentSearch
  * from .core.DocumentSearchTD import DocumentSearchTD
- * from .core.DocumentSearchSB import DocumentSearchSB             # <<<<<<<<<<<<<<
+ */
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_nltk, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_nltk, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/Process.pyx":11
+ * import nltk
+ * # from .core.DocumentSearch import DocumentSearch
+ * from .core.DocumentSearchTD import DocumentSearchTD             # <<<<<<<<<<<<<<
+ * from .core.DocumentSearchSB import DocumentSearchSB
  * import logging
- * import os
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_DocumentSearchSB);
-  __Pyx_GIVEREF(__pyx_n_s_DocumentSearchSB);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocumentSearchSB);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_core_DocumentSearchSB, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocumentSearchTD);
+  __Pyx_GIVEREF(__pyx_n_s_DocumentSearchTD);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocumentSearchTD);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_core_DocumentSearchTD, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocumentSearchSB); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocumentSearchTD); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocumentSearchSB, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocumentSearchTD, __pyx_t_3) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":10
+  /* "wrapper/Process.pyx":12
+ * # from .core.DocumentSearch import DocumentSearch
  * from .core.DocumentSearchTD import DocumentSearchTD
- * from .core.DocumentSearchSB import DocumentSearchSB
- * import logging             # <<<<<<<<<<<<<<
+ * from .core.DocumentSearchSB import DocumentSearchSB             # <<<<<<<<<<<<<<
+ * import logging
  * import os
- * 
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_logging, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_logging, __pyx_t_2) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocumentSearchSB);
+  __Pyx_GIVEREF(__pyx_n_s_DocumentSearchSB);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocumentSearchSB);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_core_DocumentSearchSB, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-  /* "wrapper/Process.pyx":11
- * from .core.DocumentSearchSB import DocumentSearchSB
- * import logging
- * import os             # <<<<<<<<<<<<<<
- * 
- * level = logging.WARNING
- */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_os, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocumentSearchSB); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_os, __pyx_t_2) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocumentSearchSB, __pyx_t_2) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/Process.pyx":13
+ * from .core.DocumentSearchTD import DocumentSearchTD
+ * from .core.DocumentSearchSB import DocumentSearchSB
+ * import logging             # <<<<<<<<<<<<<<
  * import os
  * 
- * level = logging.WARNING             # <<<<<<<<<<<<<<
- * if os.environ.get('DEBUG') and os.environ.get('DEBUG') == 1:
- *     level = logging.DEBUG
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_WARNING); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_logging, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_level, __pyx_t_3) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_logging, __pyx_t_3) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/Process.pyx":14
+ * from .core.DocumentSearchSB import DocumentSearchSB
+ * import logging
+ * import os             # <<<<<<<<<<<<<<
  * 
- * level = logging.WARNING
- * if os.environ.get('DEBUG') and os.environ.get('DEBUG') == 1:             # <<<<<<<<<<<<<<
- *     level = logging.DEBUG
- * 
+ * # level = logging.WARNING
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_os); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_environ); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_get); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__11, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__pyx_t_5) {
-  } else {
-    __pyx_t_4 = __pyx_t_5;
-    goto __pyx_L3_bool_binop_done;
-  }
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_environ); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_get); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__11, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_os, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_5 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_3, __pyx_int_1, 1, 0)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 14, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_os, __pyx_t_3) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_4 = __pyx_t_5;
-  __pyx_L3_bool_binop_done:;
-  if (__pyx_t_4) {
-
-    /* "wrapper/Process.pyx":15
- * level = logging.WARNING
- * if os.environ.get('DEBUG') and os.environ.get('DEBUG') == 1:
- *     level = logging.DEBUG             # <<<<<<<<<<<<<<
- * 
- * logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')
- */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_DEBUG); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (PyDict_SetItem(__pyx_d, __pyx_n_s_level, __pyx_t_2) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-    /* "wrapper/Process.pyx":14
- * 
- * level = logging.WARNING
- * if os.environ.get('DEBUG') and os.environ.get('DEBUG') == 1:             # <<<<<<<<<<<<<<
- *     level = logging.DEBUG
- * 
- */
-  }
 
-  /* "wrapper/Process.pyx":17
- *     level = logging.DEBUG
- * 
- * logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')             # <<<<<<<<<<<<<<
- * 
- * class Process():
- */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_basicConfig); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_filename, __pyx_kp_u_background_tasks_server_logs_doc) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_level); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_level, __pyx_t_6) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_format, __pyx_kp_u_asctime_s_levelname_s_message_s) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
-  __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-
-  /* "wrapper/Process.pyx":19
- * logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')
+  /* "wrapper/Process.pyx":22
+ * # logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')
  * 
  * class Process():             # <<<<<<<<<<<<<<
  * 
- *     supported_languages = {
- */
-  __pyx_t_6 = __Pyx_Py3MetaclassPrepare((PyObject *) NULL, __pyx_empty_tuple, __pyx_n_s_Process, __pyx_n_s_Process, (PyObject *) NULL, __pyx_n_s_wrapper_Process, (PyObject *) NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 19, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_base_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_is_detect_language, __pyx_n_s_bool) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_translate_to, __pyx_n_s_str) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_annotations, __pyx_t_2) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-  /* "wrapper/Process.pyx":22
- * 
- *     supported_languages = {
- *         'pt':"portuguese",             # <<<<<<<<<<<<<<
- *         'en':"english",
- *         'es':'spanish'
+ *     base_path:str
  */
+  __pyx_t_3 = __Pyx_Py3MetaclassPrepare((PyObject *) NULL, __pyx_empty_tuple, __pyx_n_s_Process, __pyx_n_s_Process, (PyObject *) NULL, __pyx_n_s_wrapper_Process, (PyObject *) NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_2 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_pt, __pyx_n_u_portuguese) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_en, __pyx_n_u_english) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_es, __pyx_n_u_spanish) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_supported_languages, __pyx_t_2) < 0) __PYX_ERR(0, 21, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_base_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_is_detect_language, __pyx_n_s_bool) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_annotations, __pyx_t_2) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":29
+  /* "wrapper/Process.pyx":27
  *     is_detect_language:bool
- *     translate_to:str
+ *     translate_to:DocLanguage
  *     document_search = None             # <<<<<<<<<<<<<<
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None, type='sb') -> None:
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None, type:ModelType=ModelType.SB) -> None:
  */
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_document_search, Py_None) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_document_search, Py_None) < 0) __PYX_ERR(0, 27, __pyx_L1_error)
 
-  /* "wrapper/Process.pyx":31
+  /* "wrapper/Process.pyx":29
  *     document_search = None
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None, type='sb') -> None:             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None, type:ModelType=ModelType.SB) -> None:             # <<<<<<<<<<<<<<
  *         """
  *         Initialize the pipeline
  */
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 29, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_return, __pyx_n_s_None) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_1__init__, 0, __pyx_n_s_Process___init, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__13)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__14);
-  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_3, __pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_type, __pyx_n_s_ModelType) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_return, __pyx_n_s_None) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_1__init__, 0, __pyx_n_s_Process___init, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__15)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (!__Pyx_CyFunction_InitDefaults(__pyx_t_4, sizeof(__pyx_defaults), 1)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_ModelType); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_SB); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_t_4)->__pyx_arg_type = __pyx_t_6;
+  __Pyx_GIVEREF(__pyx_t_6);
+  __pyx_t_6 = 0;
+  __Pyx_CyFunction_SetDefaultsGetter(__pyx_t_4, __pyx_pf_7wrapper_7Process___defaults__);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_4, __pyx_t_2);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_init, __pyx_t_3) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_init, __pyx_t_4) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/Process.pyx":57
- *             raise Exception("model not supported.")
+  /* "wrapper/Process.pyx":56
+ *             self.document_search = None
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to='en'):
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_3create_online_pipeline_multilingual, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_create_online_pipeline_m, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 57, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__17);
-  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_3create_online_pipeline_multilingual, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_create_online_pipeline_m, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_create_online_pipeline_multiling, __pyx_t_2) < 0) __PYX_ERR(0, 57, __pyx_L1_error)
+  if (!__Pyx_CyFunction_InitDefaults(__pyx_t_2, sizeof(__pyx_defaults1), 1)) __PYX_ERR(0, 56, __pyx_L1_error)
+
+  /* "wrapper/Process.pyx":57
+ * 
+ *     @staticmethod
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):             # <<<<<<<<<<<<<<
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
+ * 
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 57, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_t_2)->__pyx_arg_translate_to = __pyx_t_5;
+  __Pyx_GIVEREF(__pyx_t_5);
+  __pyx_t_5 = 0;
+  __Pyx_CyFunction_SetDefaultsGetter(__pyx_t_2, __pyx_pf_7wrapper_7Process_2__defaults__);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+
+  /* "wrapper/Process.pyx":56
+ *             self.document_search = None
+ * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def create_online_pipeline_multilingual(base_path, is_detect_language=True, translate_to:DocLanguage=DocLanguage.ENGLISH):
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
+ */
+  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_create_online_pipeline_multiling, __pyx_t_4) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/Process.pyx":61
- *         return Process(base_path, is_detect_language, translate_to, 'sb')
+  /* "wrapper/Process.pyx":60
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.SB)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
  *     def create_batch_pipeline(base_path, is_detect_language=False, translate_to=None):
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_5create_batch_pipeline, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_create_batch_pipeline, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_5create_batch_pipeline, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_create_batch_pipeline, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__19);
+  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__19);
-  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_create_batch_pipeline, __pyx_t_2) < 0) __PYX_ERR(0, 60, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_create_batch_pipeline, __pyx_t_3) < 0) __PYX_ERR(0, 61, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/Process.pyx":65
- *         return Process(base_path, is_detect_language, translate_to, type='td')
+  /* "wrapper/Process.pyx":64
+ *         return Process(base_path, is_detect_language, translate_to, ModelType.TD)
  * 
- *     def compile_and_train(self, complement_path):             # <<<<<<<<<<<<<<
- *         file = self.compile_doc(complement_path)
+ *     def compile_and_train(self, complement_path, file_index):             # <<<<<<<<<<<<<<
+ *         file = self.compile_doc(complement_path, file_index)
  *         self.document_search.train_model(file)
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_7compile_and_train, 0, __pyx_n_s_Process_compile_and_train, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__21)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_compile_and_train, __pyx_t_3) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_7compile_and_train, 0, __pyx_n_s_Process_compile_and_train, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__21)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 64, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_compile_and_train, __pyx_t_2) < 0) __PYX_ERR(0, 64, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":70
+  /* "wrapper/Process.pyx":69
  *         return file
  * 
- *     def compile_doc(self, complement_path):             # <<<<<<<<<<<<<<
+ *     def compile_doc(self, complement_path, file_index):             # <<<<<<<<<<<<<<
  *         file = Process.compile(self.base_path, complement_path, self.is_detect_language, self.translate_to)
- *         return file
+ *         file.id = file_index
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_9compile_doc, 0, __pyx_n_s_Process_compile_doc, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__22)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 70, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_compile_doc, __pyx_t_3) < 0) __PYX_ERR(0, 70, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_9compile_doc, 0, __pyx_n_s_Process_compile_doc, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__22)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_compile_doc, __pyx_t_2) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/Process.pyx":74
  *         return file
  * 
  *     def train_doc(self, file):             # <<<<<<<<<<<<<<
  *         self.document_search.train_model(file)
  *         return file
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_11train_doc, 0, __pyx_n_s_Process_train_doc, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__24)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_train_doc, __pyx_t_3) < 0) __PYX_ERR(0, 74, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_11train_doc, 0, __pyx_n_s_Process_train_doc, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__24)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 74, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_train_doc, __pyx_t_2) < 0) __PYX_ERR(0, 74, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/Process.pyx":78
  *         return file
  * 
- *     def search(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
- * 
+ *     def search(self, query, detected_language:DocLanguage = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
+ *         detected_language, query = LanguageDetector.detect_lang(query, self.translate_to, detected_language)
+ *         logging.info(f"Language detected: {detected_language} - Query: {query}")
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_13search, 0, __pyx_n_s_Process_search, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__27);
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_search, __pyx_t_3) < 0) __PYX_ERR(0, 78, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_detected_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 78, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_13search, 0, __pyx_n_s_Process_search, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__27);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_4, __pyx_t_2);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_search, __pyx_t_4) < 0) __PYX_ERR(0, 78, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/Process.pyx":81
- *         return self.document_search.search_documents(query, detected_search_language, page, results_per_page)
+  /* "wrapper/Process.pyx":88
+ *         return self.document_search.search_documents(query, lang_to_search, page, results_per_page)
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def compile(base_path, complement_path, is_detect_language=False, translate_to=None) -> File:
+ *     def compile(base_path, complement_path, is_detect_language=False, translate_to:DocLanguage=None) -> File:
  *         doc = None
  */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 81, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_return, __pyx_n_s_File) < 0) __PYX_ERR(0, 81, __pyx_L1_error)
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_15compile, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_compile, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__29)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 88, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 88, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_return, __pyx_n_s_File) < 0) __PYX_ERR(0, 88, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_15compile, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_compile, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__29)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__30);
-  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_3);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 81, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 88, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_compile, __pyx_t_3) < 0) __PYX_ERR(0, 81, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_compile, __pyx_t_4) < 0) __PYX_ERR(0, 88, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/Process.pyx":108
+  /* "wrapper/Process.pyx":115
  *         return doc
  * 
  *     @staticmethod             # <<<<<<<<<<<<<<
- *     def load():
- *         os.system("python3 -m spacy download xx_ent_wiki_sm")
+ *     def load(download_dir=None):
+ *         logging.info("Downloading resources...")
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_17load, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_load, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 108, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 108, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_7Process_7Process_17load, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Process_load, NULL, __pyx_n_s_wrapper_Process, __pyx_d, ((PyObject *)__pyx_codeobj__32)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 115, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__33);
+  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 115, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  if (__Pyx_SetNameInClass(__pyx_t_6, __pyx_n_s_load, __pyx_t_2) < 0) __PYX_ERR(0, 108, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_load, __pyx_t_2) < 0) __PYX_ERR(0, 115, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/Process.pyx":19
- * logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')
+  /* "wrapper/Process.pyx":22
+ * # logging.basicConfig(filename='background_tasks/server/logs/docrx.log', level=level, format='%(asctime)s - %(levelname)s - %(message)s')
  * 
  * class Process():             # <<<<<<<<<<<<<<
  * 
- *     supported_languages = {
+ *     base_path:str
  */
-  __pyx_t_2 = __Pyx_Py3ClassCreate(((PyObject*)&PyType_Type), __pyx_n_s_Process, __pyx_empty_tuple, __pyx_t_6, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_Py3ClassCreate(((PyObject*)&PyType_Type), __pyx_n_s_Process, __pyx_empty_tuple, __pyx_t_3, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Process, __pyx_t_2) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Process, __pyx_t_2) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/Process.pyx":1
  * from .core.File import File             # <<<<<<<<<<<<<<
  * from .core.Image import Image
  * from .core.Video import Video
  */
-  __pyx_t_6 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_6) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
       __Pyx_AddTraceback("init wrapper.Process", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
@@ -7296,28 +8079,14 @@
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
     return -1;
 }
 
-/* PyObjectSetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_setattro))
-        return tp->tp_setattro(obj, attr_name, value);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_setattr))
-        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
-#endif
-    return PyObject_SetAttr(obj, attr_name, value);
-}
-#endif
-
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -7613,14 +8382,132 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
+/* PyObjectSetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_setattro))
+        return tp->tp_setattro(obj, attr_name, value);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_setattr))
+        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
+#endif
+    return PyObject_SetAttr(obj, attr_name, value);
+}
+#endif
+
+/* RaiseTooManyValuesToUnpack */
+static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
+    PyErr_Format(PyExc_ValueError,
+                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
+}
+
+/* RaiseNeedMoreValuesToUnpack */
+static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
+    PyErr_Format(PyExc_ValueError,
+                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
+                 index, (index == 1) ? "" : "s");
+}
+
+/* IterFinish */
+static CYTHON_INLINE int __Pyx_IterFinish(void) {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+    if (unlikely(exc_type)) {
+        if (unlikely(!__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))
+            return -1;
+        __Pyx_PyErr_Clear();
+        return 0;
+    }
+    return 0;
+}
+
+/* UnpackItemEndCheck */
+static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
+    if (unlikely(retval)) {
+        Py_DECREF(retval);
+        __Pyx_RaiseTooManyValuesError(expected);
+        return -1;
+    }
+    return __Pyx_IterFinish();
+}
+
+/* JoinPyUnicode */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char) {
+#if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyObject *result_uval;
+    int result_ukind, kind_shift;
+    Py_ssize_t i, char_pos;
+    void *result_udata;
+    CYTHON_MAYBE_UNUSED_VAR(max_char);
+#if CYTHON_PEP393_ENABLED
+    result_uval = PyUnicode_New(result_ulength, max_char);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = (max_char <= 255) ? PyUnicode_1BYTE_KIND : (max_char <= 65535) ? PyUnicode_2BYTE_KIND : PyUnicode_4BYTE_KIND;
+    kind_shift = (result_ukind == PyUnicode_4BYTE_KIND) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_DATA(result_uval);
+#else
+    result_uval = PyUnicode_FromUnicode(NULL, result_ulength);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = sizeof(Py_UNICODE);
+    kind_shift = (result_ukind == 4) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_AS_UNICODE(result_uval);
+#endif
+    assert(kind_shift == 2 || kind_shift == 1 || kind_shift == 0);
+    char_pos = 0;
+    for (i=0; i < value_count; i++) {
+        int ukind;
+        Py_ssize_t ulength;
+        void *udata;
+        PyObject *uval = PyTuple_GET_ITEM(value_tuple, i);
+        if (unlikely(__Pyx_PyUnicode_READY(uval)))
+            goto bad;
+        ulength = __Pyx_PyUnicode_GET_LENGTH(uval);
+        if (unlikely(!ulength))
+            continue;
+        if (unlikely((PY_SSIZE_T_MAX >> kind_shift) - ulength < char_pos))
+            goto overflow;
+        ukind = __Pyx_PyUnicode_KIND(uval);
+        udata = __Pyx_PyUnicode_DATA(uval);
+        if (!CYTHON_PEP393_ENABLED || ukind == result_ukind) {
+            memcpy((char *)result_udata + (char_pos << kind_shift), udata, (size_t) (ulength << kind_shift));
+        } else {
+            #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030300F0 || defined(_PyUnicode_FastCopyCharacters)
+            _PyUnicode_FastCopyCharacters(result_uval, char_pos, uval, 0, ulength);
+            #else
+            Py_ssize_t j;
+            for (j=0; j < ulength; j++) {
+                Py_UCS4 uchar = __Pyx_PyUnicode_READ(ukind, udata, j);
+                __Pyx_PyUnicode_WRITE(result_ukind, result_udata, char_pos+j, uchar);
+            }
+            #endif
+        }
+        char_pos += ulength;
+    }
+    return result_uval;
+overflow:
+    PyErr_SetString(PyExc_OverflowError, "join() result is too long for a Python string");
+bad:
+    Py_DECREF(result_uval);
+    return NULL;
+#else
+    CYTHON_UNUSED_VAR(max_char);
+    CYTHON_UNUSED_VAR(result_ulength);
+    CYTHON_UNUSED_VAR(value_count);
+    return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
+#endif
+}
+
 /* RaiseException */
 #if PY_MAJOR_VERSION < 3
 static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
     __Pyx_PyThreadState_declare
     CYTHON_UNUSED_VAR(cause);
     Py_XINCREF(type);
     if (!value || value == Py_None)
@@ -7774,81 +8661,14 @@
     }
 bad:
     Py_XDECREF(owned_instance);
     return;
 }
 #endif
 
-/* JoinPyUnicode */
-static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
-                                      Py_UCS4 max_char) {
-#if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    PyObject *result_uval;
-    int result_ukind, kind_shift;
-    Py_ssize_t i, char_pos;
-    void *result_udata;
-    CYTHON_MAYBE_UNUSED_VAR(max_char);
-#if CYTHON_PEP393_ENABLED
-    result_uval = PyUnicode_New(result_ulength, max_char);
-    if (unlikely(!result_uval)) return NULL;
-    result_ukind = (max_char <= 255) ? PyUnicode_1BYTE_KIND : (max_char <= 65535) ? PyUnicode_2BYTE_KIND : PyUnicode_4BYTE_KIND;
-    kind_shift = (result_ukind == PyUnicode_4BYTE_KIND) ? 2 : result_ukind - 1;
-    result_udata = PyUnicode_DATA(result_uval);
-#else
-    result_uval = PyUnicode_FromUnicode(NULL, result_ulength);
-    if (unlikely(!result_uval)) return NULL;
-    result_ukind = sizeof(Py_UNICODE);
-    kind_shift = (result_ukind == 4) ? 2 : result_ukind - 1;
-    result_udata = PyUnicode_AS_UNICODE(result_uval);
-#endif
-    assert(kind_shift == 2 || kind_shift == 1 || kind_shift == 0);
-    char_pos = 0;
-    for (i=0; i < value_count; i++) {
-        int ukind;
-        Py_ssize_t ulength;
-        void *udata;
-        PyObject *uval = PyTuple_GET_ITEM(value_tuple, i);
-        if (unlikely(__Pyx_PyUnicode_READY(uval)))
-            goto bad;
-        ulength = __Pyx_PyUnicode_GET_LENGTH(uval);
-        if (unlikely(!ulength))
-            continue;
-        if (unlikely((PY_SSIZE_T_MAX >> kind_shift) - ulength < char_pos))
-            goto overflow;
-        ukind = __Pyx_PyUnicode_KIND(uval);
-        udata = __Pyx_PyUnicode_DATA(uval);
-        if (!CYTHON_PEP393_ENABLED || ukind == result_ukind) {
-            memcpy((char *)result_udata + (char_pos << kind_shift), udata, (size_t) (ulength << kind_shift));
-        } else {
-            #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030300F0 || defined(_PyUnicode_FastCopyCharacters)
-            _PyUnicode_FastCopyCharacters(result_uval, char_pos, uval, 0, ulength);
-            #else
-            Py_ssize_t j;
-            for (j=0; j < ulength; j++) {
-                Py_UCS4 uchar = __Pyx_PyUnicode_READ(ukind, udata, j);
-                __Pyx_PyUnicode_WRITE(result_ukind, result_udata, char_pos+j, uchar);
-            }
-            #endif
-        }
-        char_pos += ulength;
-    }
-    return result_uval;
-overflow:
-    PyErr_SetString(PyExc_OverflowError, "join() result is too long for a Python string");
-bad:
-    Py_DECREF(result_uval);
-    return NULL;
-#else
-    CYTHON_UNUSED_VAR(max_char);
-    CYTHON_UNUSED_VAR(result_ulength);
-    CYTHON_UNUSED_VAR(value_count);
-    return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
-#endif
-}
-
 /* PyObjectCallOneArg */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
     PyObject *args[2] = {NULL, arg};
     return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
 
 /* Import */
@@ -7928,15 +8748,15 @@
         PyObject* module_dot = 0;
         PyObject* full_name = 0;
         PyErr_Clear();
         module_name_str = PyModule_GetName(module);
         if (unlikely(!module_name_str)) { goto modbad; }
         module_name = PyUnicode_FromString(module_name_str);
         if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__9);
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__12);
         if (unlikely(!module_dot)) { goto modbad; }
         full_name = PyUnicode_Concat(module_dot, name);
         if (unlikely(!full_name)) { goto modbad; }
         #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
         {
             PyObject *modules = PyImport_GetModuleDict();
             if (unlikely(!modules))
@@ -8036,15 +8856,15 @@
         return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
     }
     return module;
 }
 #endif
 static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
 #if PY_MAJOR_VERSION < 3
-    PyObject *module, *from_list, *star = __pyx_n_s__10;
+    PyObject *module, *from_list, *star = __pyx_n_s__13;
     CYTHON_UNUSED_VAR(parts_tuple);
     from_list = PyList_New(1);
     if (unlikely(!from_list))
         return NULL;
     Py_INCREF(star);
     PyList_SET_ITEM(from_list, 0, star);
     module = __Pyx_Import(name, from_list, 0);
@@ -8086,86 +8906,14 @@
     } else if (PyErr_Occurred()) {
         PyErr_Clear();
     }
 #endif
     return __Pyx__ImportDottedModule(name, parts_tuple);
 }
 
-/* PyIntCompare */
-static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace) {
-    CYTHON_MAYBE_UNUSED_VAR(intval);
-    CYTHON_UNUSED_VAR(inplace);
-    if (op1 == op2) {
-        return 1;
-    }
-    #if PY_MAJOR_VERSION < 3
-    if (likely(PyInt_CheckExact(op1))) {
-        const long b = intval;
-        long a = PyInt_AS_LONG(op1);
-        return (a == b);
-    }
-    #endif
-    #if CYTHON_USE_PYLONG_INTERNALS
-    if (likely(PyLong_CheckExact(op1))) {
-        int unequal;
-        unsigned long uintval;
-        Py_ssize_t size = __Pyx_PyLong_DigitCount(op1);
-        const digit* digits = __Pyx_PyLong_Digits(op1);
-        if (intval == 0) {
-            return (__Pyx_PyLong_IsZero(op1) == 1);
-        } else if (intval < 0) {
-            if (__Pyx_PyLong_IsNonNeg(op1))
-                return 0;
-            intval = -intval;
-        } else {
-            if (__Pyx_PyLong_IsNeg(op1))
-                return 0;
-        }
-        uintval = (unsigned long) intval;
-#if PyLong_SHIFT * 4 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 4)) {
-            unequal = (size != 5) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[4] != ((uintval >> (4 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 3 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 3)) {
-            unequal = (size != 4) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 2 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 2)) {
-            unequal = (size != 3) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 1 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 1)) {
-            unequal = (size != 2) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-            unequal = (size != 1) || (((unsigned long) digits[0]) != (uintval & (unsigned long) PyLong_MASK));
-        return (unequal == 0);
-    }
-    #endif
-    if (PyFloat_CheckExact(op1)) {
-        const long b = intval;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        double a = __pyx_PyFloat_AsDouble(op1);
-#else
-        double a = PyFloat_AS_DOUBLE(op1);
-#endif
-        return ((double)a == (double)b);
-    }
-    return __Pyx_PyObject_IsTrueAndDecref(
-        PyObject_RichCompare(op1, op2, Py_EQ));
-}
-
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
     CYTHON_UNUSED_VAR(type);
 #else
@@ -9809,15 +10557,15 @@
 static __Pyx_TypeName
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__32));
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__34));
     }
     return name;
 }
 #endif
 
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
```

### Comparing `docrx-0.0.11/src/wrapper/core/DocumentSearch.c` & `docrx-0.0.110/src/wrapper/core/DocumentSearch.c`

 * *Files identical despite different names*

### Comparing `docrx-0.0.11/src/wrapper/core/DocumentSearchSB.c` & `docrx-0.0.110/src/wrapper/core/DocumentSearchSB.c`

 * *Files 1% similar despite different names*

```diff
@@ -2107,14 +2107,15 @@
 static const char __pyx_k_numpy[] = "numpy";
 static const char __pyx_k_order[] = "order";
 static const char __pyx_k_query[] = "query";
 static const char __pyx_k_scipy[] = "scipy";
 static const char __pyx_k_score[] = "score";
 static const char __pyx_k_super[] = "super";
 static const char __pyx_k_torch[] = "torch";
+static const char __pyx_k_value[] = "value";
 static const char __pyx_k_append[] = "append";
 static const char __pyx_k_encode[] = "encode";
 static const char __pyx_k_exists[] = "exists";
 static const char __pyx_k_hstack[] = "hstack";
 static const char __pyx_k_import[] = "__import__";
 static const char __pyx_k_joblib[] = "joblib";
 static const char __pyx_k_main_2[] = "main";
@@ -2128,15 +2129,14 @@
 static const char __pyx_k_prepare[] = "__prepare__";
 static const char __pyx_k_basepath[] = "basepath";
 static const char __pyx_k_doc_name[] = "doc_name";
 static const char __pyx_k_language[] = "language";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_is_loaded[] = "is_loaded";
-static const char __pyx_k_languages[] = "languages";
 static const char __pyx_k_metaclass[] = "__metaclass__";
 static const char __pyx_k_page_size[] = "page_size";
 static const char __pyx_k_quicksort[] = "quicksort";
 static const char __pyx_k_start_idx[] = "start_idx";
 static const char __pyx_k_traceback[] = "traceback";
 static const char __pyx_k_csr_matrix[] = "csr_matrix";
 static const char __pyx_k_dictionary[] = "dictionary";
@@ -2155,14 +2155,15 @@
 static const char __pyx_k_translate_to[] = "translate_to";
 static const char __pyx_k_class_getitem[] = "__class_getitem__";
 static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_linear_kernel[] = "linear_kernel";
 static const char __pyx_k_DocumentSearch[] = "DocumentSearch";
 static const char __pyx_k_document_names[] = "document_names";
 static const char __pyx_k_model_filename[] = "model_filename";
+static const char __pyx_k_nltk_languages[] = "nltk_languages";
 static const char __pyx_k_sorted_indices[] = "sorted_indices";
 static const char __pyx_k_TfidfVectorizer[] = "TfidfVectorizer";
 static const char __pyx_k_query_embedding[] = "query_embedding";
 static const char __pyx_k_save_debug_json[] = "save_debug_json";
 static const char __pyx_k_DocumentSearchSB[] = "DocumentSearchSB";
 static const char __pyx_k_LanguageDetector[] = "LanguageDetector";
 static const char __pyx_k_multilang_models[] = "multilang_models";
@@ -2291,15 +2292,14 @@
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_loaded;
   PyObject *__pyx_n_s_joblib;
   PyObject *__pyx_n_s_kind;
   PyObject *__pyx_n_s_l;
   PyObject *__pyx_n_u_language;
   PyObject *__pyx_kp_u_language_not_detected;
-  PyObject *__pyx_n_s_languages;
   PyObject *__pyx_n_s_linear_kernel;
   PyObject *__pyx_n_s_load;
   PyObject *__pyx_n_s_load_model;
   PyObject *__pyx_n_s_loaded_model_data;
   PyObject *__pyx_n_s_logging;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_main_2;
@@ -2313,14 +2313,15 @@
   PyObject *__pyx_n_s_module;
   PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_multilang_models;
   PyObject *__pyx_n_u_multilang_models;
   PyObject *__pyx_n_u_name;
   PyObject *__pyx_n_s_name_2;
   PyObject *__pyx_n_s_nltk;
+  PyObject *__pyx_n_s_nltk_languages;
   PyObject *__pyx_n_s_np;
   PyObject *__pyx_n_s_numpy;
   PyObject *__pyx_n_s_order;
   PyObject *__pyx_n_s_os;
   PyObject *__pyx_n_s_page;
   PyObject *__pyx_n_s_page_number;
   PyObject *__pyx_n_s_page_size;
@@ -2356,14 +2357,15 @@
   PyObject *__pyx_n_s_test;
   PyObject *__pyx_n_s_text;
   PyObject *__pyx_n_s_torch;
   PyObject *__pyx_n_s_traceback;
   PyObject *__pyx_n_s_train_model;
   PyObject *__pyx_n_s_translate_to;
   PyObject *__pyx_n_s_util;
+  PyObject *__pyx_n_s_value;
   PyObject *__pyx_n_s_vstack;
   PyObject *__pyx_kp_u_without_model_or_documents_for_l;
   PyObject *__pyx_n_s_wrapper_core_DocumentSearchSB;
   PyObject *__pyx_int_0;
   PyObject *__pyx_int_1;
   PyObject *__pyx_int_10;
   PyObject *__pyx_int_neg_1;
@@ -2481,15 +2483,14 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_loaded);
   Py_CLEAR(clear_module_state->__pyx_n_s_joblib);
   Py_CLEAR(clear_module_state->__pyx_n_s_kind);
   Py_CLEAR(clear_module_state->__pyx_n_s_l);
   Py_CLEAR(clear_module_state->__pyx_n_u_language);
   Py_CLEAR(clear_module_state->__pyx_kp_u_language_not_detected);
-  Py_CLEAR(clear_module_state->__pyx_n_s_languages);
   Py_CLEAR(clear_module_state->__pyx_n_s_linear_kernel);
   Py_CLEAR(clear_module_state->__pyx_n_s_load);
   Py_CLEAR(clear_module_state->__pyx_n_s_load_model);
   Py_CLEAR(clear_module_state->__pyx_n_s_loaded_model_data);
   Py_CLEAR(clear_module_state->__pyx_n_s_logging);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_main_2);
@@ -2503,14 +2504,15 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_multilang_models);
   Py_CLEAR(clear_module_state->__pyx_n_u_multilang_models);
   Py_CLEAR(clear_module_state->__pyx_n_u_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_name_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_nltk);
+  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_languages);
   Py_CLEAR(clear_module_state->__pyx_n_s_np);
   Py_CLEAR(clear_module_state->__pyx_n_s_numpy);
   Py_CLEAR(clear_module_state->__pyx_n_s_order);
   Py_CLEAR(clear_module_state->__pyx_n_s_os);
   Py_CLEAR(clear_module_state->__pyx_n_s_page);
   Py_CLEAR(clear_module_state->__pyx_n_s_page_number);
   Py_CLEAR(clear_module_state->__pyx_n_s_page_size);
@@ -2546,14 +2548,15 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
   Py_CLEAR(clear_module_state->__pyx_n_s_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_torch);
   Py_CLEAR(clear_module_state->__pyx_n_s_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_train_model);
   Py_CLEAR(clear_module_state->__pyx_n_s_translate_to);
   Py_CLEAR(clear_module_state->__pyx_n_s_util);
+  Py_CLEAR(clear_module_state->__pyx_n_s_value);
   Py_CLEAR(clear_module_state->__pyx_n_s_vstack);
   Py_CLEAR(clear_module_state->__pyx_kp_u_without_model_or_documents_for_l);
   Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_DocumentSearchSB);
   Py_CLEAR(clear_module_state->__pyx_int_0);
   Py_CLEAR(clear_module_state->__pyx_int_1);
   Py_CLEAR(clear_module_state->__pyx_int_10);
   Py_CLEAR(clear_module_state->__pyx_int_neg_1);
@@ -2649,15 +2652,14 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_loaded);
   Py_VISIT(traverse_module_state->__pyx_n_s_joblib);
   Py_VISIT(traverse_module_state->__pyx_n_s_kind);
   Py_VISIT(traverse_module_state->__pyx_n_s_l);
   Py_VISIT(traverse_module_state->__pyx_n_u_language);
   Py_VISIT(traverse_module_state->__pyx_kp_u_language_not_detected);
-  Py_VISIT(traverse_module_state->__pyx_n_s_languages);
   Py_VISIT(traverse_module_state->__pyx_n_s_linear_kernel);
   Py_VISIT(traverse_module_state->__pyx_n_s_load);
   Py_VISIT(traverse_module_state->__pyx_n_s_load_model);
   Py_VISIT(traverse_module_state->__pyx_n_s_loaded_model_data);
   Py_VISIT(traverse_module_state->__pyx_n_s_logging);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_main_2);
@@ -2671,14 +2673,15 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_multilang_models);
   Py_VISIT(traverse_module_state->__pyx_n_u_multilang_models);
   Py_VISIT(traverse_module_state->__pyx_n_u_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_name_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_nltk);
+  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_languages);
   Py_VISIT(traverse_module_state->__pyx_n_s_np);
   Py_VISIT(traverse_module_state->__pyx_n_s_numpy);
   Py_VISIT(traverse_module_state->__pyx_n_s_order);
   Py_VISIT(traverse_module_state->__pyx_n_s_os);
   Py_VISIT(traverse_module_state->__pyx_n_s_page);
   Py_VISIT(traverse_module_state->__pyx_n_s_page_number);
   Py_VISIT(traverse_module_state->__pyx_n_s_page_size);
@@ -2714,14 +2717,15 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
   Py_VISIT(traverse_module_state->__pyx_n_s_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_torch);
   Py_VISIT(traverse_module_state->__pyx_n_s_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_train_model);
   Py_VISIT(traverse_module_state->__pyx_n_s_translate_to);
   Py_VISIT(traverse_module_state->__pyx_n_s_util);
+  Py_VISIT(traverse_module_state->__pyx_n_s_value);
   Py_VISIT(traverse_module_state->__pyx_n_s_vstack);
   Py_VISIT(traverse_module_state->__pyx_kp_u_without_model_or_documents_for_l);
   Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_DocumentSearchSB);
   Py_VISIT(traverse_module_state->__pyx_int_0);
   Py_VISIT(traverse_module_state->__pyx_int_1);
   Py_VISIT(traverse_module_state->__pyx_int_10);
   Py_VISIT(traverse_module_state->__pyx_int_neg_1);
@@ -2827,15 +2831,14 @@
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_loaded __pyx_mstate_global->__pyx_n_s_is_loaded
 #define __pyx_n_s_joblib __pyx_mstate_global->__pyx_n_s_joblib
 #define __pyx_n_s_kind __pyx_mstate_global->__pyx_n_s_kind
 #define __pyx_n_s_l __pyx_mstate_global->__pyx_n_s_l
 #define __pyx_n_u_language __pyx_mstate_global->__pyx_n_u_language
 #define __pyx_kp_u_language_not_detected __pyx_mstate_global->__pyx_kp_u_language_not_detected
-#define __pyx_n_s_languages __pyx_mstate_global->__pyx_n_s_languages
 #define __pyx_n_s_linear_kernel __pyx_mstate_global->__pyx_n_s_linear_kernel
 #define __pyx_n_s_load __pyx_mstate_global->__pyx_n_s_load
 #define __pyx_n_s_load_model __pyx_mstate_global->__pyx_n_s_load_model
 #define __pyx_n_s_loaded_model_data __pyx_mstate_global->__pyx_n_s_loaded_model_data
 #define __pyx_n_s_logging __pyx_mstate_global->__pyx_n_s_logging
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_main_2 __pyx_mstate_global->__pyx_n_s_main_2
@@ -2849,14 +2852,15 @@
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_multilang_models __pyx_mstate_global->__pyx_n_s_multilang_models
 #define __pyx_n_u_multilang_models __pyx_mstate_global->__pyx_n_u_multilang_models
 #define __pyx_n_u_name __pyx_mstate_global->__pyx_n_u_name
 #define __pyx_n_s_name_2 __pyx_mstate_global->__pyx_n_s_name_2
 #define __pyx_n_s_nltk __pyx_mstate_global->__pyx_n_s_nltk
+#define __pyx_n_s_nltk_languages __pyx_mstate_global->__pyx_n_s_nltk_languages
 #define __pyx_n_s_np __pyx_mstate_global->__pyx_n_s_np
 #define __pyx_n_s_numpy __pyx_mstate_global->__pyx_n_s_numpy
 #define __pyx_n_s_order __pyx_mstate_global->__pyx_n_s_order
 #define __pyx_n_s_os __pyx_mstate_global->__pyx_n_s_os
 #define __pyx_n_s_page __pyx_mstate_global->__pyx_n_s_page
 #define __pyx_n_s_page_number __pyx_mstate_global->__pyx_n_s_page_number
 #define __pyx_n_s_page_size __pyx_mstate_global->__pyx_n_s_page_size
@@ -2892,14 +2896,15 @@
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
 #define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
 #define __pyx_n_s_torch __pyx_mstate_global->__pyx_n_s_torch
 #define __pyx_n_s_traceback __pyx_mstate_global->__pyx_n_s_traceback
 #define __pyx_n_s_train_model __pyx_mstate_global->__pyx_n_s_train_model
 #define __pyx_n_s_translate_to __pyx_mstate_global->__pyx_n_s_translate_to
 #define __pyx_n_s_util __pyx_mstate_global->__pyx_n_s_util
+#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
 #define __pyx_n_s_vstack __pyx_mstate_global->__pyx_n_s_vstack
 #define __pyx_kp_u_without_model_or_documents_for_l __pyx_mstate_global->__pyx_kp_u_without_model_or_documents_for_l
 #define __pyx_n_s_wrapper_core_DocumentSearchSB __pyx_mstate_global->__pyx_n_s_wrapper_core_DocumentSearchSB
 #define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
 #define __pyx_int_1 __pyx_mstate_global->__pyx_int_1
 #define __pyx_int_10 __pyx_mstate_global->__pyx_int_10
 #define __pyx_int_neg_1 __pyx_mstate_global->__pyx_int_neg_1
@@ -3218,15 +3223,15 @@
 }
 
 /* "wrapper/core/DocumentSearchSB.pyx":38
  *         self.load_model()
  * 
  *     def train_model(self, doc:File):             # <<<<<<<<<<<<<<
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_3train_model(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -3314,449 +3319,455 @@
   PyObject *__pyx_v_model = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
-  int __pyx_t_5;
+  PyObject *__pyx_t_5 = NULL;
   int __pyx_t_6;
-  PyObject *__pyx_t_7 = NULL;
+  int __pyx_t_7;
   PyObject *__pyx_t_8 = NULL;
   int __pyx_t_9;
   int __pyx_t_10;
   PyObject *__pyx_t_11 = NULL;
   PyObject *__pyx_t_12 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("train_model", 0);
 
   /* "wrapper/core/DocumentSearchSB.pyx":39
  * 
  *     def train_model(self, doc:File):
  *         try :             # <<<<<<<<<<<<<<
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:
  */
   {
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
     __Pyx_ExceptionSave(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3);
     __Pyx_XGOTREF(__pyx_t_1);
     __Pyx_XGOTREF(__pyx_t_2);
     __Pyx_XGOTREF(__pyx_t_3);
     /*try:*/ {
 
       /* "wrapper/core/DocumentSearchSB.pyx":40
  *     def train_model(self, doc:File):
  *         try :
- *             detected_language = doc.detected_language             # <<<<<<<<<<<<<<
+ *             detected_language = doc.detected_language.value             # <<<<<<<<<<<<<<
  *             if self.supported_languages:
  *                 if doc.translate_to:
  */
       __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 40, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_v_detected_language = __pyx_t_4;
-      __pyx_t_4 = 0;
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_value); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 40, __pyx_L3_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __pyx_v_detected_language = __pyx_t_5;
+      __pyx_t_5 = 0;
 
       /* "wrapper/core/DocumentSearchSB.pyx":41
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:             # <<<<<<<<<<<<<<
  *                 if doc.translate_to:
- *                     detected_language = doc.translate_to
+ *                     detected_language = doc.translate_to.value
  */
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 41, __pyx_L3_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 41, __pyx_L3_error)
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (__pyx_t_5) {
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 41, __pyx_L3_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 41, __pyx_L3_error)
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (__pyx_t_6) {
 
         /* "wrapper/core/DocumentSearchSB.pyx":42
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:
  *                 if doc.translate_to:             # <<<<<<<<<<<<<<
- *                     detected_language = doc.translate_to
+ *                     detected_language = doc.translate_to.value
  *             else:
  */
-        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 42, __pyx_L3_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 42, __pyx_L3_error)
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-        if (__pyx_t_5) {
+        __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L3_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 42, __pyx_L3_error)
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (__pyx_t_6) {
 
           /* "wrapper/core/DocumentSearchSB.pyx":43
  *             if self.supported_languages:
  *                 if doc.translate_to:
- *                     detected_language = doc.translate_to             # <<<<<<<<<<<<<<
+ *                     detected_language = doc.translate_to.value             # <<<<<<<<<<<<<<
  *             else:
  *                 detected_language = self.model_main
  */
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 43, __pyx_L3_error)
+          __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 43, __pyx_L3_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_value); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 43, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
           __Pyx_DECREF_SET(__pyx_v_detected_language, __pyx_t_4);
           __pyx_t_4 = 0;
 
           /* "wrapper/core/DocumentSearchSB.pyx":42
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:
  *                 if doc.translate_to:             # <<<<<<<<<<<<<<
- *                     detected_language = doc.translate_to
+ *                     detected_language = doc.translate_to.value
  *             else:
  */
         }
 
         /* "wrapper/core/DocumentSearchSB.pyx":41
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:             # <<<<<<<<<<<<<<
  *                 if doc.translate_to:
- *                     detected_language = doc.translate_to
+ *                     detected_language = doc.translate_to.value
  */
         goto __pyx_L9;
       }
 
       /* "wrapper/core/DocumentSearchSB.pyx":45
- *                     detected_language = doc.translate_to
+ *                     detected_language = doc.translate_to.value
  *             else:
  *                 detected_language = self.model_main             # <<<<<<<<<<<<<<
  *             if doc and (detected_language not in self.document_names or doc.id not in self.document_names[detected_language]) and doc.text:
- *             # if doc and doc.text:
+ *                 self.load_model()
  */
       /*else*/ {
         __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_main); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 45, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF_SET(__pyx_v_detected_language, __pyx_t_4);
         __pyx_t_4 = 0;
       }
       __pyx_L9:;
 
       /* "wrapper/core/DocumentSearchSB.pyx":46
  *             else:
  *                 detected_language = self.model_main
  *             if doc and (detected_language not in self.document_names or doc.id not in self.document_names[detected_language]) and doc.text:             # <<<<<<<<<<<<<<
- *             # if doc and doc.text:
  *                 self.load_model()
+ * 
  */
-      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_doc); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
-      if (__pyx_t_6) {
+      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_doc); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
+      if (__pyx_t_7) {
       } else {
-        __pyx_t_5 = __pyx_t_6;
+        __pyx_t_6 = __pyx_t_7;
         goto __pyx_L12_bool_binop_done;
       }
       __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_4, Py_NE)); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
+      __pyx_t_7 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_4, Py_NE)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (!__pyx_t_6) {
+      if (!__pyx_t_7) {
       } else {
         goto __pyx_L14_next_and;
       }
       __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_id); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 46, __pyx_L3_error)
-      __Pyx_GOTREF(__pyx_t_7);
-      __pyx_t_8 = __Pyx_PyObject_GetItem(__pyx_t_7, __pyx_v_detected_language); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 46, __pyx_L3_error)
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 46, __pyx_L3_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_8 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_v_detected_language); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_8);
-      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_t_4, __pyx_t_8, Py_NE)); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __pyx_t_7 = (__Pyx_PySequence_ContainsTF(__pyx_t_4, __pyx_t_8, Py_NE)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      if (__pyx_t_6) {
+      if (__pyx_t_7) {
       } else {
-        __pyx_t_5 = __pyx_t_6;
+        __pyx_t_6 = __pyx_t_7;
         goto __pyx_L12_bool_binop_done;
       }
       __pyx_L14_next_and:;
       __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_text); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_8);
-      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
+      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 46, __pyx_L3_error)
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      __pyx_t_5 = __pyx_t_6;
+      __pyx_t_6 = __pyx_t_7;
       __pyx_L12_bool_binop_done:;
-      if (__pyx_t_5) {
+      if (__pyx_t_6) {
 
-        /* "wrapper/core/DocumentSearchSB.pyx":48
+        /* "wrapper/core/DocumentSearchSB.pyx":47
+ *                 detected_language = self.model_main
  *             if doc and (detected_language not in self.document_names or doc.id not in self.document_names[detected_language]) and doc.text:
- *             # if doc and doc.text:
  *                 self.load_model()             # <<<<<<<<<<<<<<
  * 
- *                 # TODO: add a transation db to manage this
+ *                 if detected_language not in self.multilang_models:
  */
-        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_load_model); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 48, __pyx_L3_error)
+        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_load_model); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 47, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_4);
-        __pyx_t_7 = NULL;
+        __pyx_t_5 = NULL;
         __pyx_t_9 = 0;
         if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
-          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
-          if (likely(__pyx_t_7)) {
+          __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+          if (likely(__pyx_t_5)) {
             PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-            __Pyx_INCREF(__pyx_t_7);
+            __Pyx_INCREF(__pyx_t_5);
             __Pyx_INCREF(function);
             __Pyx_DECREF_SET(__pyx_t_4, function);
             __pyx_t_9 = 1;
           }
         }
         {
-          PyObject *__pyx_callargs[1] = {__pyx_t_7, };
+          PyObject *__pyx_callargs[1] = {__pyx_t_5, };
           __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_9, 0+__pyx_t_9);
-          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 48, __pyx_L3_error)
+          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 47, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_8);
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         }
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-        /* "wrapper/core/DocumentSearchSB.pyx":61
- *                 #         logging.info(f'sb--removed document name for {detct_lng}')
+        /* "wrapper/core/DocumentSearchSB.pyx":49
+ *                 self.load_model()
  * 
  *                 if detected_language not in self.multilang_models:             # <<<<<<<<<<<<<<
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')
  *                     # model = SentenceTransformer('all-MiniLM-L6-v2')
  */
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 61, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 49, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_8, Py_NE)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 61, __pyx_L3_error)
+        __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_8, Py_NE)); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 49, __pyx_L3_error)
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        if (__pyx_t_5) {
+        if (__pyx_t_6) {
 
-          /* "wrapper/core/DocumentSearchSB.pyx":62
+          /* "wrapper/core/DocumentSearchSB.pyx":50
  * 
  *                 if detected_language not in self.multilang_models:
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')             # <<<<<<<<<<<<<<
  *                     # model = SentenceTransformer('all-MiniLM-L6-v2')
  *                     # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  */
-          __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 62, __pyx_L3_error)
+          __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 50, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_4);
-          __pyx_t_7 = NULL;
+          __pyx_t_5 = NULL;
           __pyx_t_9 = 0;
           if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
-            __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
-            if (likely(__pyx_t_7)) {
+            __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+            if (likely(__pyx_t_5)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-              __Pyx_INCREF(__pyx_t_7);
+              __Pyx_INCREF(__pyx_t_5);
               __Pyx_INCREF(function);
               __Pyx_DECREF_SET(__pyx_t_4, function);
               __pyx_t_9 = 1;
             }
           }
           {
-            PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_kp_u_sentence_transformers_paraphrase};
+            PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_sentence_transformers_paraphrase};
             __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
-            __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-            if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 62, __pyx_L3_error)
+            __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+            if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 50, __pyx_L3_error)
             __Pyx_GOTREF(__pyx_t_8);
             __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
           }
           __pyx_v_model = __pyx_t_8;
           __pyx_t_8 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":65
+          /* "wrapper/core/DocumentSearchSB.pyx":53
  *                     # model = SentenceTransformer('all-MiniLM-L6-v2')
  *                     # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  *                     self.multilang_models[detected_language] = model             # <<<<<<<<<<<<<<
  *                     self.document_names[detected_language] = []
  *                     self.embedded_documents[detected_language] = []
  */
-          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 65, __pyx_L3_error)
+          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 53, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_8);
-          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_detected_language, __pyx_v_model) < 0))) __PYX_ERR(0, 65, __pyx_L3_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_detected_language, __pyx_v_model) < 0))) __PYX_ERR(0, 53, __pyx_L3_error)
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":66
+          /* "wrapper/core/DocumentSearchSB.pyx":54
  *                     # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  *                     self.multilang_models[detected_language] = model
  *                     self.document_names[detected_language] = []             # <<<<<<<<<<<<<<
  *                     self.embedded_documents[detected_language] = []
  * 
  */
-          __pyx_t_8 = PyList_New(0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 66, __pyx_L3_error)
+          __pyx_t_8 = PyList_New(0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 54, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_8);
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 66, __pyx_L3_error)
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 54, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_4);
-          if (unlikely((PyObject_SetItem(__pyx_t_4, __pyx_v_detected_language, __pyx_t_8) < 0))) __PYX_ERR(0, 66, __pyx_L3_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_4, __pyx_v_detected_language, __pyx_t_8) < 0))) __PYX_ERR(0, 54, __pyx_L3_error)
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":67
+          /* "wrapper/core/DocumentSearchSB.pyx":55
  *                     self.multilang_models[detected_language] = model
  *                     self.document_names[detected_language] = []
  *                     self.embedded_documents[detected_language] = []             # <<<<<<<<<<<<<<
  * 
  *                 self.document_names[detected_language].append(doc.id)
  */
-          __pyx_t_8 = PyList_New(0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 67, __pyx_L3_error)
+          __pyx_t_8 = PyList_New(0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 55, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_8);
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 67, __pyx_L3_error)
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 55, __pyx_L3_error)
           __Pyx_GOTREF(__pyx_t_4);
-          if (unlikely((PyObject_SetItem(__pyx_t_4, __pyx_v_detected_language, __pyx_t_8) < 0))) __PYX_ERR(0, 67, __pyx_L3_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_4, __pyx_v_detected_language, __pyx_t_8) < 0))) __PYX_ERR(0, 55, __pyx_L3_error)
           __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":61
- *                 #         logging.info(f'sb--removed document name for {detct_lng}')
+          /* "wrapper/core/DocumentSearchSB.pyx":49
+ *                 self.load_model()
  * 
  *                 if detected_language not in self.multilang_models:             # <<<<<<<<<<<<<<
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')
  *                     # model = SentenceTransformer('all-MiniLM-L6-v2')
  */
         }
 
-        /* "wrapper/core/DocumentSearchSB.pyx":69
+        /* "wrapper/core/DocumentSearchSB.pyx":57
  *                     self.embedded_documents[detected_language] = []
  * 
  *                 self.document_names[detected_language].append(doc.id)             # <<<<<<<<<<<<<<
  *                 self.embedded_documents[detected_language].append(self.multilang_models[detected_language].encode(doc.text, convert_to_tensor=True))
  *             self.save_model()
  */
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 69, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 57, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 69, __pyx_L3_error)
+        __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 57, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_id); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 69, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_id); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 57, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_10 = __Pyx_PyObject_Append(__pyx_t_4, __pyx_t_8); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 69, __pyx_L3_error)
+        __pyx_t_10 = __Pyx_PyObject_Append(__pyx_t_4, __pyx_t_8); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 57, __pyx_L3_error)
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-        /* "wrapper/core/DocumentSearchSB.pyx":70
+        /* "wrapper/core/DocumentSearchSB.pyx":58
  * 
  *                 self.document_names[detected_language].append(doc.id)
  *                 self.embedded_documents[detected_language].append(self.multilang_models[detected_language].encode(doc.text, convert_to_tensor=True))             # <<<<<<<<<<<<<<
  *             self.save_model()
  *         except:
  */
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_7 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 70, __pyx_L3_error)
-        __Pyx_GOTREF(__pyx_t_7);
+        __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L3_error)
+        __Pyx_GOTREF(__pyx_t_5);
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_encode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_encode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_text); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 70, __pyx_L3_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_11 = PyTuple_New(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L3_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_11 = PyTuple_New(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_11);
-        __Pyx_GIVEREF(__pyx_t_7);
-        PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_7);
-        __pyx_t_7 = 0;
-        __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 70, __pyx_L3_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_convert_to_tensor, Py_True) < 0) __PYX_ERR(0, 70, __pyx_L3_error)
-        __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_11, __pyx_t_7); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 70, __pyx_L3_error)
+        __Pyx_GIVEREF(__pyx_t_5);
+        PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_5);
+        __pyx_t_5 = 0;
+        __pyx_t_5 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L3_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_convert_to_tensor, Py_True) < 0) __PYX_ERR(0, 58, __pyx_L3_error)
+        __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_11, __pyx_t_5); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_12);
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
         __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
-        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        __pyx_t_10 = __Pyx_PyObject_Append(__pyx_t_4, __pyx_t_12); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 70, __pyx_L3_error)
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __pyx_t_10 = __Pyx_PyObject_Append(__pyx_t_4, __pyx_t_12); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 58, __pyx_L3_error)
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
         /* "wrapper/core/DocumentSearchSB.pyx":46
  *             else:
  *                 detected_language = self.model_main
  *             if doc and (detected_language not in self.document_names or doc.id not in self.document_names[detected_language]) and doc.text:             # <<<<<<<<<<<<<<
- *             # if doc and doc.text:
  *                 self.load_model()
+ * 
  */
       }
 
-      /* "wrapper/core/DocumentSearchSB.pyx":71
+      /* "wrapper/core/DocumentSearchSB.pyx":59
  *                 self.document_names[detected_language].append(doc.id)
  *                 self.embedded_documents[detected_language].append(self.multilang_models[detected_language].encode(doc.text, convert_to_tensor=True))
  *             self.save_model()             # <<<<<<<<<<<<<<
  *         except:
  *             raise
  */
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_save_model); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 71, __pyx_L3_error)
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_save_model); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 59, __pyx_L3_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_7 = NULL;
+      __pyx_t_5 = NULL;
       __pyx_t_9 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
-        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
-        if (likely(__pyx_t_7)) {
+        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+        if (likely(__pyx_t_5)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-          __Pyx_INCREF(__pyx_t_7);
+          __Pyx_INCREF(__pyx_t_5);
           __Pyx_INCREF(function);
           __Pyx_DECREF_SET(__pyx_t_4, function);
           __pyx_t_9 = 1;
         }
       }
       {
-        PyObject *__pyx_callargs[1] = {__pyx_t_7, };
+        PyObject *__pyx_callargs[1] = {__pyx_t_5, };
         __pyx_t_12 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_9, 0+__pyx_t_9);
-        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-        if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 71, __pyx_L3_error)
+        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 59, __pyx_L3_error)
         __Pyx_GOTREF(__pyx_t_12);
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       }
       __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
 
       /* "wrapper/core/DocumentSearchSB.pyx":39
  * 
  *     def train_model(self, doc:File):
  *         try :             # <<<<<<<<<<<<<<
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:
  */
     }
     __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
     goto __pyx_L8_try_end;
     __pyx_L3_error:;
     __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
     __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
     __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-    /* "wrapper/core/DocumentSearchSB.pyx":72
+    /* "wrapper/core/DocumentSearchSB.pyx":60
  *                 self.embedded_documents[detected_language].append(self.multilang_models[detected_language].encode(doc.text, convert_to_tensor=True))
  *             self.save_model()
  *         except:             # <<<<<<<<<<<<<<
  *             raise
  * 
  */
     /*except:*/ {
       __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.train_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
-      if (__Pyx_GetException(&__pyx_t_12, &__pyx_t_4, &__pyx_t_7) < 0) __PYX_ERR(0, 72, __pyx_L5_except_error)
+      if (__Pyx_GetException(&__pyx_t_12, &__pyx_t_4, &__pyx_t_5) < 0) __PYX_ERR(0, 60, __pyx_L5_except_error)
       __Pyx_XGOTREF(__pyx_t_12);
       __Pyx_XGOTREF(__pyx_t_4);
-      __Pyx_XGOTREF(__pyx_t_7);
+      __Pyx_XGOTREF(__pyx_t_5);
 
-      /* "wrapper/core/DocumentSearchSB.pyx":73
+      /* "wrapper/core/DocumentSearchSB.pyx":61
  *             self.save_model()
  *         except:
  *             raise             # <<<<<<<<<<<<<<
  * 
  *     def save_model(self):
  */
       __Pyx_GIVEREF(__pyx_t_12);
       __Pyx_GIVEREF(__pyx_t_4);
-      __Pyx_XGIVEREF(__pyx_t_7);
-      __Pyx_ErrRestoreWithState(__pyx_t_12, __pyx_t_4, __pyx_t_7);
-      __pyx_t_12 = 0; __pyx_t_4 = 0; __pyx_t_7 = 0; 
-      __PYX_ERR(0, 73, __pyx_L5_except_error)
+      __Pyx_XGIVEREF(__pyx_t_5);
+      __Pyx_ErrRestoreWithState(__pyx_t_12, __pyx_t_4, __pyx_t_5);
+      __pyx_t_12 = 0; __pyx_t_4 = 0; __pyx_t_5 = 0; 
+      __PYX_ERR(0, 61, __pyx_L5_except_error)
     }
 
     /* "wrapper/core/DocumentSearchSB.pyx":39
  * 
  *     def train_model(self, doc:File):
  *         try :             # <<<<<<<<<<<<<<
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  *             if self.supported_languages:
  */
     __pyx_L5_except_error:;
     __Pyx_XGIVEREF(__pyx_t_1);
     __Pyx_XGIVEREF(__pyx_t_2);
     __Pyx_XGIVEREF(__pyx_t_3);
     __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
@@ -3765,37 +3776,37 @@
   }
 
   /* "wrapper/core/DocumentSearchSB.pyx":38
  *         self.load_model()
  * 
  *     def train_model(self, doc:File):             # <<<<<<<<<<<<<<
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_XDECREF(__pyx_t_11);
   __Pyx_XDECREF(__pyx_t_12);
   __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.train_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_detected_language);
   __Pyx_XDECREF(__pyx_v_model);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/DocumentSearchSB.pyx":75
+/* "wrapper/core/DocumentSearchSB.pyx":63
  *             raise
  * 
  *     def save_model(self):             # <<<<<<<<<<<<<<
  *         model_data = {
  *             'multilang_models':self.multilang_models,
  */
 
@@ -3838,31 +3849,31 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 75, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 63, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "save_model") < 0)) __PYX_ERR(0, 75, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "save_model") < 0)) __PYX_ERR(0, 63, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
     __pyx_v_self = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("save_model", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 75, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("save_model", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 63, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.save_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_4save_model(__pyx_self, __pyx_v_self);
 
@@ -3882,67 +3893,67 @@
   PyObject *__pyx_t_4 = NULL;
   int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("save_model", 0);
 
-  /* "wrapper/core/DocumentSearchSB.pyx":77
+  /* "wrapper/core/DocumentSearchSB.pyx":65
  *     def save_model(self):
  *         model_data = {
  *             'multilang_models':self.multilang_models,             # <<<<<<<<<<<<<<
  *             'embedded_documents': self.embedded_documents,
  *             'document_names': self.document_names
  */
-  __pyx_t_1 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_multilang_models, __pyx_t_2) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_multilang_models, __pyx_t_2) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":78
+  /* "wrapper/core/DocumentSearchSB.pyx":66
  *         model_data = {
  *             'multilang_models':self.multilang_models,
  *             'embedded_documents': self.embedded_documents,             # <<<<<<<<<<<<<<
  *             'document_names': self.document_names
  *         }
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_embedded_documents, __pyx_t_2) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_embedded_documents, __pyx_t_2) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":79
+  /* "wrapper/core/DocumentSearchSB.pyx":67
  *             'multilang_models':self.multilang_models,
  *             'embedded_documents': self.embedded_documents,
  *             'document_names': self.document_names             # <<<<<<<<<<<<<<
  *         }
  *         joblib.dump(model_data, self.model_filename)
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_document_names, __pyx_t_2) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_document_names, __pyx_t_2) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_v_model_data = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":81
+  /* "wrapper/core/DocumentSearchSB.pyx":69
  *             'document_names': self.document_names
  *         }
  *         joblib.dump(model_data, self.model_filename)             # <<<<<<<<<<<<<<
  * 
  *         dictionary = {
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_joblib); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_joblib); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 69, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_dump); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_dump); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 69, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 69, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_4)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -3953,61 +3964,61 @@
     }
   }
   {
     PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_model_data, __pyx_t_2};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 2+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 81, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 69, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":84
+  /* "wrapper/core/DocumentSearchSB.pyx":72
  * 
  *         dictionary = {
  *             "document_names": self.document_names             # <<<<<<<<<<<<<<
  *         }
  *         super().save_debug_json(dictionary, self.debug_model_filename)
  */
-  __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_document_names, __pyx_t_3) < 0) __PYX_ERR(0, 84, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_u_document_names, __pyx_t_3) < 0) __PYX_ERR(0, 72, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __pyx_v_dictionary = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":86
+  /* "wrapper/core/DocumentSearchSB.pyx":74
  *             "document_names": self.document_names
  *         }
  *         super().save_debug_json(dictionary, self.debug_model_filename)             # <<<<<<<<<<<<<<
  * 
  *         self.is_loaded = True
  */
   __pyx_t_3 = __Pyx_CyFunction_GetClassObj(__pyx_self);
-  if (!__pyx_t_3) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 86, __pyx_L1_error) }
+  if (!__pyx_t_3) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 74, __pyx_L1_error) }
   __Pyx_INCREF(__pyx_t_3);
-  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 74, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_GIVEREF(__pyx_t_3);
   PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
   __Pyx_INCREF(__pyx_v_self);
   __Pyx_GIVEREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_self);
   __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_2, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_2, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_save_debug_json); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_save_debug_json); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 74, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_debug_model_filename); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 86, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_debug_model_filename); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_4 = NULL;
   __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_4)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
@@ -4018,30 +4029,30 @@
     }
   }
   {
     PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_dictionary, __pyx_t_3};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 2+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":88
+  /* "wrapper/core/DocumentSearchSB.pyx":76
  *         super().save_debug_json(dictionary, self.debug_model_filename)
  * 
  *         self.is_loaded = True             # <<<<<<<<<<<<<<
  * 
  *     def load_model(self):
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded, Py_True) < 0) __PYX_ERR(0, 88, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded, Py_True) < 0) __PYX_ERR(0, 76, __pyx_L1_error)
 
-  /* "wrapper/core/DocumentSearchSB.pyx":75
+  /* "wrapper/core/DocumentSearchSB.pyx":63
  *             raise
  * 
  *     def save_model(self):             # <<<<<<<<<<<<<<
  *         model_data = {
  *             'multilang_models':self.multilang_models,
  */
 
@@ -4059,15 +4070,15 @@
   __Pyx_XDECREF(__pyx_v_model_data);
   __Pyx_XDECREF(__pyx_v_dictionary);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/DocumentSearchSB.pyx":90
+/* "wrapper/core/DocumentSearchSB.pyx":78
  *         self.is_loaded = True
  * 
  *     def load_model(self):             # <<<<<<<<<<<<<<
  *         if not self.is_loaded:
  *             try:
  */
 
@@ -4110,31 +4121,31 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 90, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 78, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "load_model") < 0)) __PYX_ERR(0, 90, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "load_model") < 0)) __PYX_ERR(0, 78, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
     __pyx_v_self = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("load_model", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 90, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("load_model", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 78, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.load_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_6load_model(__pyx_self, __pyx_v_self);
 
@@ -4163,29 +4174,29 @@
   Py_ssize_t __pyx_t_11;
   PyObject *(*__pyx_t_12)(PyObject *);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("load_model", 0);
 
-  /* "wrapper/core/DocumentSearchSB.pyx":91
+  /* "wrapper/core/DocumentSearchSB.pyx":79
  * 
  *     def load_model(self):
  *         if not self.is_loaded:             # <<<<<<<<<<<<<<
  *             try:
  *                 loaded_model_data = None
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 91, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 79, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 91, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 79, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_t_3 = (!__pyx_t_2);
   if (__pyx_t_3) {
 
-    /* "wrapper/core/DocumentSearchSB.pyx":92
+    /* "wrapper/core/DocumentSearchSB.pyx":80
  *     def load_model(self):
  *         if not self.is_loaded:
  *             try:             # <<<<<<<<<<<<<<
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):
  */
     {
@@ -4193,40 +4204,40 @@
       __Pyx_PyThreadState_assign
       __Pyx_ExceptionSave(&__pyx_t_4, &__pyx_t_5, &__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_4);
       __Pyx_XGOTREF(__pyx_t_5);
       __Pyx_XGOTREF(__pyx_t_6);
       /*try:*/ {
 
-        /* "wrapper/core/DocumentSearchSB.pyx":93
+        /* "wrapper/core/DocumentSearchSB.pyx":81
  *         if not self.is_loaded:
  *             try:
  *                 loaded_model_data = None             # <<<<<<<<<<<<<<
  *                 if os.path.exists(self.model_filename):
  *                     loaded_model_data = joblib.load(self.model_filename)
  */
         __Pyx_INCREF(Py_None);
         __pyx_v_loaded_model_data = Py_None;
 
-        /* "wrapper/core/DocumentSearchSB.pyx":94
+        /* "wrapper/core/DocumentSearchSB.pyx":82
  *             try:
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):             # <<<<<<<<<<<<<<
  *                     loaded_model_data = joblib.load(self.model_filename)
  *                 if loaded_model_data:
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_os); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 94, __pyx_L4_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_os); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 82, __pyx_L4_error)
         __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_path); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 94, __pyx_L4_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_path); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 82, __pyx_L4_error)
         __Pyx_GOTREF(__pyx_t_8);
         __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_exists); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 94, __pyx_L4_error)
+        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_exists); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 82, __pyx_L4_error)
         __Pyx_GOTREF(__pyx_t_7);
         __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 94, __pyx_L4_error)
+        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 82, __pyx_L4_error)
         __Pyx_GOTREF(__pyx_t_8);
         __pyx_t_9 = NULL;
         __pyx_t_10 = 0;
         if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
           __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_7);
           if (likely(__pyx_t_9)) {
             PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
@@ -4237,35 +4248,35 @@
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_9, __pyx_t_8};
           __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
           __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L4_error)
+          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 82, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
           __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         }
-        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 94, __pyx_L4_error)
+        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 82, __pyx_L4_error)
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         if (__pyx_t_3) {
 
-          /* "wrapper/core/DocumentSearchSB.pyx":95
+          /* "wrapper/core/DocumentSearchSB.pyx":83
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):
  *                     loaded_model_data = joblib.load(self.model_filename)             # <<<<<<<<<<<<<<
  *                 if loaded_model_data:
  *                     self.embedded_documents = loaded_model_data['embedded_documents']
  */
-          __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_joblib); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 95, __pyx_L4_error)
+          __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_joblib); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 83, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_7);
-          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_load); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 95, __pyx_L4_error)
+          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_load); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 83, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_8);
           __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 95, __pyx_L4_error)
+          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 83, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_7);
           __pyx_t_9 = NULL;
           __pyx_t_10 = 0;
           if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
             __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
             if (likely(__pyx_t_9)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
@@ -4276,95 +4287,95 @@
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_9, __pyx_t_7};
             __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
             __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
             __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-            if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 95, __pyx_L4_error)
+            if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 83, __pyx_L4_error)
             __Pyx_GOTREF(__pyx_t_1);
             __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
           }
           __Pyx_DECREF_SET(__pyx_v_loaded_model_data, __pyx_t_1);
           __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":94
+          /* "wrapper/core/DocumentSearchSB.pyx":82
  *             try:
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):             # <<<<<<<<<<<<<<
  *                     loaded_model_data = joblib.load(self.model_filename)
  *                 if loaded_model_data:
  */
         }
 
-        /* "wrapper/core/DocumentSearchSB.pyx":96
+        /* "wrapper/core/DocumentSearchSB.pyx":84
  *                 if os.path.exists(self.model_filename):
  *                     loaded_model_data = joblib.load(self.model_filename)
  *                 if loaded_model_data:             # <<<<<<<<<<<<<<
  *                     self.embedded_documents = loaded_model_data['embedded_documents']
  *                     self.document_names = loaded_model_data['document_names']
  */
-        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_loaded_model_data); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 96, __pyx_L4_error)
+        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_loaded_model_data); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 84, __pyx_L4_error)
         if (__pyx_t_3) {
 
-          /* "wrapper/core/DocumentSearchSB.pyx":97
+          /* "wrapper/core/DocumentSearchSB.pyx":85
  *                     loaded_model_data = joblib.load(self.model_filename)
  *                 if loaded_model_data:
  *                     self.embedded_documents = loaded_model_data['embedded_documents']             # <<<<<<<<<<<<<<
  *                     self.document_names = loaded_model_data['document_names']
  *                     self.multilang_models = loaded_model_data['multilang_models']
  */
-          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_embedded_documents); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 97, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_embedded_documents); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 85, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents, __pyx_t_1) < 0) __PYX_ERR(0, 97, __pyx_L4_error)
+          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents, __pyx_t_1) < 0) __PYX_ERR(0, 85, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":98
+          /* "wrapper/core/DocumentSearchSB.pyx":86
  *                 if loaded_model_data:
  *                     self.embedded_documents = loaded_model_data['embedded_documents']
  *                     self.document_names = loaded_model_data['document_names']             # <<<<<<<<<<<<<<
  *                     self.multilang_models = loaded_model_data['multilang_models']
  *                 else:
  */
-          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_document_names); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 98, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_document_names); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_names, __pyx_t_1) < 0) __PYX_ERR(0, 98, __pyx_L4_error)
+          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_document_names, __pyx_t_1) < 0) __PYX_ERR(0, 86, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":99
+          /* "wrapper/core/DocumentSearchSB.pyx":87
  *                     self.embedded_documents = loaded_model_data['embedded_documents']
  *                     self.document_names = loaded_model_data['document_names']
  *                     self.multilang_models = loaded_model_data['multilang_models']             # <<<<<<<<<<<<<<
  *                 else:
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')
  */
-          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_loaded_model_data, __pyx_n_u_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 87, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models, __pyx_t_1) < 0) __PYX_ERR(0, 99, __pyx_L4_error)
+          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models, __pyx_t_1) < 0) __PYX_ERR(0, 87, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":96
+          /* "wrapper/core/DocumentSearchSB.pyx":84
  *                 if os.path.exists(self.model_filename):
  *                     loaded_model_data = joblib.load(self.model_filename)
  *                 if loaded_model_data:             # <<<<<<<<<<<<<<
  *                     self.embedded_documents = loaded_model_data['embedded_documents']
  *                     self.document_names = loaded_model_data['document_names']
  */
           goto __pyx_L11;
         }
 
-        /* "wrapper/core/DocumentSearchSB.pyx":101
+        /* "wrapper/core/DocumentSearchSB.pyx":89
  *                     self.multilang_models = loaded_model_data['multilang_models']
  *                 else:
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')             # <<<<<<<<<<<<<<
  * 
  *                     main = self.model_main
  */
         /*else*/ {
-          __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 101, __pyx_L4_error)
+          __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 89, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_8);
           __pyx_t_7 = NULL;
           __pyx_t_10 = 0;
           if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
             __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
             if (likely(__pyx_t_7)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
@@ -4374,209 +4385,209 @@
               __pyx_t_10 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_kp_u_sentence_transformers_paraphrase};
             __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_10, 1+__pyx_t_10);
             __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-            if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 101, __pyx_L4_error)
+            if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 89, __pyx_L4_error)
             __Pyx_GOTREF(__pyx_t_1);
             __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
           }
           __pyx_v_model = __pyx_t_1;
           __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":103
+          /* "wrapper/core/DocumentSearchSB.pyx":91
  *                     model = SentenceTransformer('sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2')
  * 
  *                     main = self.model_main             # <<<<<<<<<<<<<<
  *                     self.multilang_models[main] = model
  *                     self.document_names[main] = []
  */
-          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_main); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 103, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_main); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 91, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
           __pyx_v_main = __pyx_t_1;
           __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":104
+          /* "wrapper/core/DocumentSearchSB.pyx":92
  * 
  *                     main = self.model_main
  *                     self.multilang_models[main] = model             # <<<<<<<<<<<<<<
  *                     self.document_names[main] = []
  *                     self.embedded_documents[main] = []
  */
-          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 104, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          if (unlikely((PyObject_SetItem(__pyx_t_1, __pyx_v_main, __pyx_v_model) < 0))) __PYX_ERR(0, 104, __pyx_L4_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_1, __pyx_v_main, __pyx_v_model) < 0))) __PYX_ERR(0, 92, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":105
+          /* "wrapper/core/DocumentSearchSB.pyx":93
  *                     main = self.model_main
  *                     self.multilang_models[main] = model
  *                     self.document_names[main] = []             # <<<<<<<<<<<<<<
  *                     self.embedded_documents[main] = []
  *                     if self.supported_languages:
  */
-          __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 105, __pyx_L4_error)
+          __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 93, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 105, __pyx_L4_error)
+          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 93, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_8);
-          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_main, __pyx_t_1) < 0))) __PYX_ERR(0, 105, __pyx_L4_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_main, __pyx_t_1) < 0))) __PYX_ERR(0, 93, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":106
+          /* "wrapper/core/DocumentSearchSB.pyx":94
  *                     self.multilang_models[main] = model
  *                     self.document_names[main] = []
  *                     self.embedded_documents[main] = []             # <<<<<<<<<<<<<<
  *                     if self.supported_languages:
- *                         for l in languages:
+ *                         for l in nltk_languages:
  */
-          __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 106, __pyx_L4_error)
+          __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 106, __pyx_L4_error)
+          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 94, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_8);
-          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_main, __pyx_t_1) < 0))) __PYX_ERR(0, 106, __pyx_L4_error)
+          if (unlikely((PyObject_SetItem(__pyx_t_8, __pyx_v_main, __pyx_t_1) < 0))) __PYX_ERR(0, 94, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-          /* "wrapper/core/DocumentSearchSB.pyx":107
+          /* "wrapper/core/DocumentSearchSB.pyx":95
  *                     self.document_names[main] = []
  *                     self.embedded_documents[main] = []
  *                     if self.supported_languages:             # <<<<<<<<<<<<<<
- *                         for l in languages:
+ *                         for l in nltk_languages:
  *                             # model = SentenceTransformer('all-MiniLM-L6-v2')
  */
-          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 107, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 95, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 107, __pyx_L4_error)
+          __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 95, __pyx_L4_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
           if (__pyx_t_3) {
 
-            /* "wrapper/core/DocumentSearchSB.pyx":108
+            /* "wrapper/core/DocumentSearchSB.pyx":96
  *                     self.embedded_documents[main] = []
  *                     if self.supported_languages:
- *                         for l in languages:             # <<<<<<<<<<<<<<
+ *                         for l in nltk_languages:             # <<<<<<<<<<<<<<
  *                             # model = SentenceTransformer('all-MiniLM-L6-v2')
  *                             # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 108, __pyx_L4_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L4_error)
             __Pyx_GOTREF(__pyx_t_1);
             if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
               __pyx_t_8 = __pyx_t_1; __Pyx_INCREF(__pyx_t_8); __pyx_t_11 = 0;
               __pyx_t_12 = NULL;
             } else {
-              __pyx_t_11 = -1; __pyx_t_8 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 108, __pyx_L4_error)
+              __pyx_t_11 = -1; __pyx_t_8 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 96, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_8);
-              __pyx_t_12 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 108, __pyx_L4_error)
+              __pyx_t_12 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 96, __pyx_L4_error)
             }
             __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
             for (;;) {
               if (likely(!__pyx_t_12)) {
                 if (likely(PyList_CheckExact(__pyx_t_8))) {
                   if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_8)) break;
                   #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                  __pyx_t_1 = PyList_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 108, __pyx_L4_error)
+                  __pyx_t_1 = PyList_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 96, __pyx_L4_error)
                   #else
-                  __pyx_t_1 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 108, __pyx_L4_error)
+                  __pyx_t_1 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L4_error)
                   __Pyx_GOTREF(__pyx_t_1);
                   #endif
                 } else {
                   if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_8)) break;
                   #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                  __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 108, __pyx_L4_error)
+                  __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 96, __pyx_L4_error)
                   #else
-                  __pyx_t_1 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 108, __pyx_L4_error)
+                  __pyx_t_1 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 96, __pyx_L4_error)
                   __Pyx_GOTREF(__pyx_t_1);
                   #endif
                 }
               } else {
                 __pyx_t_1 = __pyx_t_12(__pyx_t_8);
                 if (unlikely(!__pyx_t_1)) {
                   PyObject* exc_type = PyErr_Occurred();
                   if (exc_type) {
                     if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                    else __PYX_ERR(0, 108, __pyx_L4_error)
+                    else __PYX_ERR(0, 96, __pyx_L4_error)
                   }
                   break;
                 }
                 __Pyx_GOTREF(__pyx_t_1);
               }
               __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_1);
               __pyx_t_1 = 0;
 
-              /* "wrapper/core/DocumentSearchSB.pyx":111
+              /* "wrapper/core/DocumentSearchSB.pyx":99
  *                             # model = SentenceTransformer('all-MiniLM-L6-v2')
  *                             # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  *                             self.multilang_models[l] = model             # <<<<<<<<<<<<<<
  *                             self.document_names[l] = []
  *                             self.embedded_documents[l] = []
  */
-              __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L4_error)
+              __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_1);
-              if (unlikely((PyObject_SetItem(__pyx_t_1, __pyx_v_l, __pyx_v_model) < 0))) __PYX_ERR(0, 111, __pyx_L4_error)
+              if (unlikely((PyObject_SetItem(__pyx_t_1, __pyx_v_l, __pyx_v_model) < 0))) __PYX_ERR(0, 99, __pyx_L4_error)
               __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-              /* "wrapper/core/DocumentSearchSB.pyx":112
+              /* "wrapper/core/DocumentSearchSB.pyx":100
  *                             # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  *                             self.multilang_models[l] = model
  *                             self.document_names[l] = []             # <<<<<<<<<<<<<<
  *                             self.embedded_documents[l] = []
  * 
  */
-              __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 112, __pyx_L4_error)
+              __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_1);
-              __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 112, __pyx_L4_error)
+              __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 100, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_7);
-              if (unlikely((PyObject_SetItem(__pyx_t_7, __pyx_v_l, __pyx_t_1) < 0))) __PYX_ERR(0, 112, __pyx_L4_error)
+              if (unlikely((PyObject_SetItem(__pyx_t_7, __pyx_v_l, __pyx_t_1) < 0))) __PYX_ERR(0, 100, __pyx_L4_error)
               __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
               __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-              /* "wrapper/core/DocumentSearchSB.pyx":113
+              /* "wrapper/core/DocumentSearchSB.pyx":101
  *                             self.multilang_models[l] = model
  *                             self.document_names[l] = []
  *                             self.embedded_documents[l] = []             # <<<<<<<<<<<<<<
  * 
  *                     self.save_model()
  */
-              __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 113, __pyx_L4_error)
+              __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 101, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_1);
-              __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 113, __pyx_L4_error)
+              __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 101, __pyx_L4_error)
               __Pyx_GOTREF(__pyx_t_7);
-              if (unlikely((PyObject_SetItem(__pyx_t_7, __pyx_v_l, __pyx_t_1) < 0))) __PYX_ERR(0, 113, __pyx_L4_error)
+              if (unlikely((PyObject_SetItem(__pyx_t_7, __pyx_v_l, __pyx_t_1) < 0))) __PYX_ERR(0, 101, __pyx_L4_error)
               __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
               __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-              /* "wrapper/core/DocumentSearchSB.pyx":108
+              /* "wrapper/core/DocumentSearchSB.pyx":96
  *                     self.embedded_documents[main] = []
  *                     if self.supported_languages:
- *                         for l in languages:             # <<<<<<<<<<<<<<
+ *                         for l in nltk_languages:             # <<<<<<<<<<<<<<
  *                             # model = SentenceTransformer('all-MiniLM-L6-v2')
  *                             # model = SentenceTransformer('sentence-transformers/distiluse-base-multilingual-cased-v1')
  */
             }
             __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-            /* "wrapper/core/DocumentSearchSB.pyx":107
+            /* "wrapper/core/DocumentSearchSB.pyx":95
  *                     self.document_names[main] = []
  *                     self.embedded_documents[main] = []
  *                     if self.supported_languages:             # <<<<<<<<<<<<<<
- *                         for l in languages:
+ *                         for l in nltk_languages:
  *                             # model = SentenceTransformer('all-MiniLM-L6-v2')
  */
           }
 
-          /* "wrapper/core/DocumentSearchSB.pyx":115
+          /* "wrapper/core/DocumentSearchSB.pyx":103
  *                             self.embedded_documents[l] = []
  * 
  *                     self.save_model()             # <<<<<<<<<<<<<<
  *                 self.is_loaded = True
  *             except:
  */
-          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_save_model); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 115, __pyx_L4_error)
+          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_save_model); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 103, __pyx_L4_error)
           __Pyx_GOTREF(__pyx_t_1);
           __pyx_t_7 = NULL;
           __pyx_t_10 = 0;
           if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
             __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_1);
             if (likely(__pyx_t_7)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -4586,32 +4597,32 @@
               __pyx_t_10 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[1] = {__pyx_t_7, };
             __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_10, 0+__pyx_t_10);
             __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-            if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 115, __pyx_L4_error)
+            if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 103, __pyx_L4_error)
             __Pyx_GOTREF(__pyx_t_8);
             __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
           }
           __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
         }
         __pyx_L11:;
 
-        /* "wrapper/core/DocumentSearchSB.pyx":116
+        /* "wrapper/core/DocumentSearchSB.pyx":104
  * 
  *                     self.save_model()
  *                 self.is_loaded = True             # <<<<<<<<<<<<<<
  *             except:
  *                 raise
  */
-        if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded, Py_True) < 0) __PYX_ERR(0, 116, __pyx_L4_error)
+        if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded, Py_True) < 0) __PYX_ERR(0, 104, __pyx_L4_error)
 
-        /* "wrapper/core/DocumentSearchSB.pyx":92
+        /* "wrapper/core/DocumentSearchSB.pyx":80
  *     def load_model(self):
  *         if not self.is_loaded:
  *             try:             # <<<<<<<<<<<<<<
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):
  */
       }
@@ -4621,44 +4632,44 @@
       goto __pyx_L9_try_end;
       __pyx_L4_error:;
       __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
       __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
       __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
 
-      /* "wrapper/core/DocumentSearchSB.pyx":117
+      /* "wrapper/core/DocumentSearchSB.pyx":105
  *                     self.save_model()
  *                 self.is_loaded = True
  *             except:             # <<<<<<<<<<<<<<
  *                 raise
  *         return self.is_loaded
  */
       /*except:*/ {
         __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.load_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_8, &__pyx_t_1, &__pyx_t_7) < 0) __PYX_ERR(0, 117, __pyx_L6_except_error)
+        if (__Pyx_GetException(&__pyx_t_8, &__pyx_t_1, &__pyx_t_7) < 0) __PYX_ERR(0, 105, __pyx_L6_except_error)
         __Pyx_XGOTREF(__pyx_t_8);
         __Pyx_XGOTREF(__pyx_t_1);
         __Pyx_XGOTREF(__pyx_t_7);
 
-        /* "wrapper/core/DocumentSearchSB.pyx":118
+        /* "wrapper/core/DocumentSearchSB.pyx":106
  *                 self.is_loaded = True
  *             except:
  *                 raise             # <<<<<<<<<<<<<<
  *         return self.is_loaded
  * 
  */
         __Pyx_GIVEREF(__pyx_t_8);
         __Pyx_GIVEREF(__pyx_t_1);
         __Pyx_XGIVEREF(__pyx_t_7);
         __Pyx_ErrRestoreWithState(__pyx_t_8, __pyx_t_1, __pyx_t_7);
         __pyx_t_8 = 0; __pyx_t_1 = 0; __pyx_t_7 = 0; 
-        __PYX_ERR(0, 118, __pyx_L6_except_error)
+        __PYX_ERR(0, 106, __pyx_L6_except_error)
       }
 
-      /* "wrapper/core/DocumentSearchSB.pyx":92
+      /* "wrapper/core/DocumentSearchSB.pyx":80
  *     def load_model(self):
  *         if not self.is_loaded:
  *             try:             # <<<<<<<<<<<<<<
  *                 loaded_model_data = None
  *                 if os.path.exists(self.model_filename):
  */
       __pyx_L6_except_error:;
@@ -4666,38 +4677,38 @@
       __Pyx_XGIVEREF(__pyx_t_5);
       __Pyx_XGIVEREF(__pyx_t_6);
       __Pyx_ExceptionReset(__pyx_t_4, __pyx_t_5, __pyx_t_6);
       goto __pyx_L1_error;
       __pyx_L9_try_end:;
     }
 
-    /* "wrapper/core/DocumentSearchSB.pyx":91
+    /* "wrapper/core/DocumentSearchSB.pyx":79
  * 
  *     def load_model(self):
  *         if not self.is_loaded:             # <<<<<<<<<<<<<<
  *             try:
  *                 loaded_model_data = None
  */
   }
 
-  /* "wrapper/core/DocumentSearchSB.pyx":119
+  /* "wrapper/core/DocumentSearchSB.pyx":107
  *             except:
  *                 raise
  *         return self.is_loaded             # <<<<<<<<<<<<<<
  * 
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 119, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_loaded); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 107, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __pyx_r = __pyx_t_7;
   __pyx_t_7 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":90
+  /* "wrapper/core/DocumentSearchSB.pyx":78
  *         self.is_loaded = True
  * 
  *     def load_model(self):             # <<<<<<<<<<<<<<
  *         if not self.is_loaded:
  *             try:
  */
 
@@ -4715,15 +4726,15 @@
   __Pyx_XDECREF(__pyx_v_main);
   __Pyx_XDECREF(__pyx_v_l);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/DocumentSearchSB.pyx":121
+/* "wrapper/core/DocumentSearchSB.pyx":109
  *         return self.is_loaded
  * 
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
  * 
  *         detected_language = self.model_main
  */
 
@@ -4781,48 +4792,48 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 121, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_query)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 121, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("search_documents", 0, 2, 5, 1); __PYX_ERR(0, 121, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("search_documents", 0, 2, 5, 1); __PYX_ERR(0, 109, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_detected_search_language);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 121, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_page);
           if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 121, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  4:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_results_per_page);
           if (value) { values[4] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 121, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 109, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "search_documents") < 0)) __PYX_ERR(0, 121, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "search_documents") < 0)) __PYX_ERR(0, 109, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  5: values[4] = __Pyx_Arg_FASTCALL(__pyx_args, 4);
         CYTHON_FALLTHROUGH;
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
@@ -4838,15 +4849,15 @@
     __pyx_v_query = values[1];
     __pyx_v_detected_search_language = values[2];
     __pyx_v_page = values[3];
     __pyx_v_results_per_page = values[4];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("search_documents", 0, 2, 5, __pyx_nargs); __PYX_ERR(0, 121, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("search_documents", 0, 2, 5, __pyx_nargs); __PYX_ERR(0, 109, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.DocumentSearchSB.DocumentSearchSB.search_documents", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_8search_documents(__pyx_self, __pyx_v_self, __pyx_v_query, __pyx_v_detected_search_language, __pyx_v_page, __pyx_v_results_per_page);
 
@@ -4883,60 +4894,60 @@
   PyObject *(*__pyx_t_9)(PyObject *);
   int __pyx_t_10;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("search_documents", 0);
 
-  /* "wrapper/core/DocumentSearchSB.pyx":123
+  /* "wrapper/core/DocumentSearchSB.pyx":111
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):
  * 
  *         detected_language = self.model_main             # <<<<<<<<<<<<<<
  *         if self.supported_languages:
  *             if not detected_search_language:
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_main); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 123, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_main); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_v_detected_language = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":124
+  /* "wrapper/core/DocumentSearchSB.pyx":112
  * 
  *         detected_language = self.model_main
  *         if self.supported_languages:             # <<<<<<<<<<<<<<
  *             if not detected_search_language:
  *                 detected_language = LanguageDetector.detect_lang(query)
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 124, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_supported_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 112, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 124, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 112, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_2) {
 
-    /* "wrapper/core/DocumentSearchSB.pyx":125
+    /* "wrapper/core/DocumentSearchSB.pyx":113
  *         detected_language = self.model_main
  *         if self.supported_languages:
  *             if not detected_search_language:             # <<<<<<<<<<<<<<
  *                 detected_language = LanguageDetector.detect_lang(query)
  *             else:
  */
-    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_detected_search_language); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 125, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_detected_search_language); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 113, __pyx_L1_error)
     __pyx_t_3 = (!__pyx_t_2);
     if (__pyx_t_3) {
 
-      /* "wrapper/core/DocumentSearchSB.pyx":126
+      /* "wrapper/core/DocumentSearchSB.pyx":114
  *         if self.supported_languages:
  *             if not detected_search_language:
  *                 detected_language = LanguageDetector.detect_lang(query)             # <<<<<<<<<<<<<<
  *             else:
  *                 detected_language = detected_search_language
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 126, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 114, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_detect_lang); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 126, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_detect_lang); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 114, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       __pyx_t_4 = NULL;
       __pyx_t_6 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
         __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
         if (likely(__pyx_t_4)) {
@@ -4947,246 +4958,246 @@
           __pyx_t_6 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_v_query};
         __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 126, __pyx_L1_error)
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 114, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
       }
       __Pyx_DECREF_SET(__pyx_v_detected_language, __pyx_t_1);
       __pyx_t_1 = 0;
 
-      /* "wrapper/core/DocumentSearchSB.pyx":125
+      /* "wrapper/core/DocumentSearchSB.pyx":113
  *         detected_language = self.model_main
  *         if self.supported_languages:
  *             if not detected_search_language:             # <<<<<<<<<<<<<<
  *                 detected_language = LanguageDetector.detect_lang(query)
  *             else:
  */
       goto __pyx_L4;
     }
 
-    /* "wrapper/core/DocumentSearchSB.pyx":128
+    /* "wrapper/core/DocumentSearchSB.pyx":116
  *                 detected_language = LanguageDetector.detect_lang(query)
  *             else:
  *                 detected_language = detected_search_language             # <<<<<<<<<<<<<<
  * 
  *             if not detected_language:
  */
     /*else*/ {
       __Pyx_INCREF(__pyx_v_detected_search_language);
       __Pyx_DECREF_SET(__pyx_v_detected_language, __pyx_v_detected_search_language);
     }
     __pyx_L4:;
 
-    /* "wrapper/core/DocumentSearchSB.pyx":130
+    /* "wrapper/core/DocumentSearchSB.pyx":118
  *                 detected_language = detected_search_language
  * 
  *             if not detected_language:             # <<<<<<<<<<<<<<
  *                 raise Exception('language not detected')
  * 
  */
-    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_detected_language); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 130, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_detected_language); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 118, __pyx_L1_error)
     __pyx_t_2 = (!__pyx_t_3);
     if (unlikely(__pyx_t_2)) {
 
-      /* "wrapper/core/DocumentSearchSB.pyx":131
+      /* "wrapper/core/DocumentSearchSB.pyx":119
  * 
  *             if not detected_language:
  *                 raise Exception('language not detected')             # <<<<<<<<<<<<<<
  * 
  *             if detected_language not in self.multilang_models or len(self.document_names[detected_language]) == 0:
  */
-      __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 119, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_Raise(__pyx_t_1, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __PYX_ERR(0, 131, __pyx_L1_error)
+      __PYX_ERR(0, 119, __pyx_L1_error)
 
-      /* "wrapper/core/DocumentSearchSB.pyx":130
+      /* "wrapper/core/DocumentSearchSB.pyx":118
  *                 detected_language = detected_search_language
  * 
  *             if not detected_language:             # <<<<<<<<<<<<<<
  *                 raise Exception('language not detected')
  * 
  */
     }
 
-    /* "wrapper/core/DocumentSearchSB.pyx":133
+    /* "wrapper/core/DocumentSearchSB.pyx":121
  *                 raise Exception('language not detected')
  * 
  *             if detected_language not in self.multilang_models or len(self.document_names[detected_language]) == 0:             # <<<<<<<<<<<<<<
  *                 raise Exception(f'without model or documents for language {detected_language}')
  * 
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 133, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 121, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_1, Py_NE)); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 133, __pyx_L1_error)
+    __pyx_t_3 = (__Pyx_PySequence_ContainsTF(__pyx_v_detected_language, __pyx_t_1, Py_NE)); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 121, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     if (!__pyx_t_3) {
     } else {
       __pyx_t_2 = __pyx_t_3;
       goto __pyx_L7_bool_binop_done;
     }
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 133, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 121, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_1, __pyx_v_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 133, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_1, __pyx_v_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 121, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_7 = PyObject_Length(__pyx_t_5); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 133, __pyx_L1_error)
+    __pyx_t_7 = PyObject_Length(__pyx_t_5); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 121, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __pyx_t_3 = (__pyx_t_7 == 0);
     __pyx_t_2 = __pyx_t_3;
     __pyx_L7_bool_binop_done:;
     if (unlikely(__pyx_t_2)) {
 
-      /* "wrapper/core/DocumentSearchSB.pyx":134
+      /* "wrapper/core/DocumentSearchSB.pyx":122
  * 
  *             if detected_language not in self.multilang_models or len(self.document_names[detected_language]) == 0:
  *                 raise Exception(f'without model or documents for language {detected_language}')             # <<<<<<<<<<<<<<
  * 
  *         model = self.multilang_models[detected_language]
  */
-      __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_detected_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 134, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_detected_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 122, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_1 = __Pyx_PyUnicode_Concat(__pyx_kp_u_without_model_or_documents_for_l, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyUnicode_Concat(__pyx_kp_u_without_model_or_documents_for_l, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 134, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 122, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_Raise(__pyx_t_5, 0, 0, 0);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 134, __pyx_L1_error)
+      __PYX_ERR(0, 122, __pyx_L1_error)
 
-      /* "wrapper/core/DocumentSearchSB.pyx":133
+      /* "wrapper/core/DocumentSearchSB.pyx":121
  *                 raise Exception('language not detected')
  * 
  *             if detected_language not in self.multilang_models or len(self.document_names[detected_language]) == 0:             # <<<<<<<<<<<<<<
  *                 raise Exception(f'without model or documents for language {detected_language}')
  * 
  */
     }
 
-    /* "wrapper/core/DocumentSearchSB.pyx":124
+    /* "wrapper/core/DocumentSearchSB.pyx":112
  * 
  *         detected_language = self.model_main
  *         if self.supported_languages:             # <<<<<<<<<<<<<<
  *             if not detected_search_language:
  *                 detected_language = LanguageDetector.detect_lang(query)
  */
   }
 
-  /* "wrapper/core/DocumentSearchSB.pyx":136
+  /* "wrapper/core/DocumentSearchSB.pyx":124
  *                 raise Exception(f'without model or documents for language {detected_language}')
  * 
  *         model = self.multilang_models[detected_language]             # <<<<<<<<<<<<<<
  * 
  *         if not model:
  */
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_multilang_models); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 124, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_v_detected_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_v_detected_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 124, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __pyx_v_model = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":138
+  /* "wrapper/core/DocumentSearchSB.pyx":126
  *         model = self.multilang_models[detected_language]
  * 
  *         if not model:             # <<<<<<<<<<<<<<
  *             raise Exception(f'model not loaded for language {detected_language}')
  * 
  */
-  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_model); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 138, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_model); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 126, __pyx_L1_error)
   __pyx_t_3 = (!__pyx_t_2);
   if (unlikely(__pyx_t_3)) {
 
-    /* "wrapper/core/DocumentSearchSB.pyx":139
+    /* "wrapper/core/DocumentSearchSB.pyx":127
  * 
  *         if not model:
  *             raise Exception(f'model not loaded for language {detected_language}')             # <<<<<<<<<<<<<<
  * 
  *         embedded_documents = self.embedded_documents[detected_language]
  */
-    __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_detected_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_detected_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_model_not_loaded_for_language, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 139, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_model_not_loaded_for_language, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 127, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __Pyx_Raise(__pyx_t_1, 0, 0, 0);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __PYX_ERR(0, 139, __pyx_L1_error)
+    __PYX_ERR(0, 127, __pyx_L1_error)
 
-    /* "wrapper/core/DocumentSearchSB.pyx":138
+    /* "wrapper/core/DocumentSearchSB.pyx":126
  *         model = self.multilang_models[detected_language]
  * 
  *         if not model:             # <<<<<<<<<<<<<<
  *             raise Exception(f'model not loaded for language {detected_language}')
  * 
  */
   }
 
-  /* "wrapper/core/DocumentSearchSB.pyx":141
+  /* "wrapper/core/DocumentSearchSB.pyx":129
  *             raise Exception(f'model not loaded for language {detected_language}')
  * 
  *         embedded_documents = self.embedded_documents[detected_language]             # <<<<<<<<<<<<<<
  * 
  *         query_embedding = model.encode(query, convert_to_tensor=True)
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 141, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_embedded_documents); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 129, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_1, __pyx_v_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 141, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_1, __pyx_v_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 129, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_v_embedded_documents = __pyx_t_5;
   __pyx_t_5 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":143
+  /* "wrapper/core/DocumentSearchSB.pyx":131
  *         embedded_documents = self.embedded_documents[detected_language]
  * 
  *         query_embedding = model.encode(query, convert_to_tensor=True)             # <<<<<<<<<<<<<<
  * 
  *         cosine_similarities = np.inner(query_embedding, embedded_documents)
  */
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_model, __pyx_n_s_encode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_model, __pyx_n_s_encode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 131, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 131, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_INCREF(__pyx_v_query);
   __Pyx_GIVEREF(__pyx_v_query);
   PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_query);
-  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 143, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 131, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_convert_to_tensor, Py_True) < 0) __PYX_ERR(0, 143, __pyx_L1_error)
-  __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 143, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_convert_to_tensor, Py_True) < 0) __PYX_ERR(0, 131, __pyx_L1_error)
+  __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 131, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_8);
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __pyx_v_query_embedding = __pyx_t_8;
   __pyx_t_8 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":145
+  /* "wrapper/core/DocumentSearchSB.pyx":133
  *         query_embedding = model.encode(query, convert_to_tensor=True)
  * 
  *         cosine_similarities = np.inner(query_embedding, embedded_documents)             # <<<<<<<<<<<<<<
  * 
  *         # Sort documents by similarity scores (highest similarity first)
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_np); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 145, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_np); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 133, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_inner); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 145, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_inner); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 133, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __pyx_t_4 = NULL;
   __pyx_t_6 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
     __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
     if (likely(__pyx_t_4)) {
@@ -5197,278 +5208,278 @@
       __pyx_t_6 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_query_embedding, __pyx_v_embedded_documents};
     __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
     __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 145, __pyx_L1_error)
+    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 133, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_8);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   }
   __pyx_v_cosine_similarities = __pyx_t_8;
   __pyx_t_8 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":148
+  /* "wrapper/core/DocumentSearchSB.pyx":136
  * 
  *         # Sort documents by similarity scores (highest similarity first)
  *         sorted_indices = np.argsort(cosine_similarities, axis=None, kind='quicksort', order=None)[::-1]             # <<<<<<<<<<<<<<
  * 
  *         page_size = results_per_page
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_np); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_np); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_8);
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_argsort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_argsort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-  __pyx_t_8 = PyTuple_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __pyx_t_8 = PyTuple_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_8);
   __Pyx_INCREF(__pyx_v_cosine_similarities);
   __Pyx_GIVEREF(__pyx_v_cosine_similarities);
   PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_cosine_similarities);
-  __pyx_t_4 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_axis, Py_None) < 0) __PYX_ERR(0, 148, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_kind, __pyx_n_u_quicksort) < 0) __PYX_ERR(0, 148, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_order, Py_None) < 0) __PYX_ERR(0, 148, __pyx_L1_error)
-  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 148, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_axis, Py_None) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_kind, __pyx_n_u_quicksort) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_order, Py_None) < 0) __PYX_ERR(0, 136, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-  __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_slice__2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_slice__2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __pyx_v_sorted_indices = __pyx_t_4;
   __pyx_t_4 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":150
+  /* "wrapper/core/DocumentSearchSB.pyx":138
  *         sorted_indices = np.argsort(cosine_similarities, axis=None, kind='quicksort', order=None)[::-1]
  * 
  *         page_size = results_per_page             # <<<<<<<<<<<<<<
  *         page_number = page
  * 
  */
   __Pyx_INCREF(__pyx_v_results_per_page);
   __pyx_v_page_size = __pyx_v_results_per_page;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":151
+  /* "wrapper/core/DocumentSearchSB.pyx":139
  * 
  *         page_size = results_per_page
  *         page_number = page             # <<<<<<<<<<<<<<
  * 
  *         start_idx = (page_number - 1) * page_size
  */
   __Pyx_INCREF(__pyx_v_page);
   __pyx_v_page_number = __pyx_v_page;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":153
+  /* "wrapper/core/DocumentSearchSB.pyx":141
  *         page_number = page
  * 
  *         start_idx = (page_number - 1) * page_size             # <<<<<<<<<<<<<<
  *         end_idx = start_idx + page_size
  * 
  */
-  __pyx_t_4 = __Pyx_PyInt_SubtractObjC(__pyx_v_page_number, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 153, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyInt_SubtractObjC(__pyx_v_page_number, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 141, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  __pyx_t_5 = PyNumber_Multiply(__pyx_t_4, __pyx_v_page_size); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 153, __pyx_L1_error)
+  __pyx_t_5 = PyNumber_Multiply(__pyx_t_4, __pyx_v_page_size); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 141, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __pyx_v_start_idx = __pyx_t_5;
   __pyx_t_5 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":154
+  /* "wrapper/core/DocumentSearchSB.pyx":142
  * 
  *         start_idx = (page_number - 1) * page_size
  *         end_idx = start_idx + page_size             # <<<<<<<<<<<<<<
  * 
  *         sorted_documents = []
  */
-  __pyx_t_5 = PyNumber_Add(__pyx_v_start_idx, __pyx_v_page_size); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 154, __pyx_L1_error)
+  __pyx_t_5 = PyNumber_Add(__pyx_v_start_idx, __pyx_v_page_size); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 142, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __pyx_v_end_idx = __pyx_t_5;
   __pyx_t_5 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":156
+  /* "wrapper/core/DocumentSearchSB.pyx":144
  *         end_idx = start_idx + page_size
  * 
  *         sorted_documents = []             # <<<<<<<<<<<<<<
  * 
  *         for idx in sorted_indices[start_idx:end_idx]:
  */
-  __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 156, __pyx_L1_error)
+  __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 144, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __pyx_v_sorted_documents = ((PyObject*)__pyx_t_5);
   __pyx_t_5 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":158
+  /* "wrapper/core/DocumentSearchSB.pyx":146
  *         sorted_documents = []
  * 
  *         for idx in sorted_indices[start_idx:end_idx]:             # <<<<<<<<<<<<<<
  *             score = cosine_similarities[idx]
  *             if score > 0:
  */
-  __pyx_t_5 = __Pyx_PyObject_GetSlice(__pyx_v_sorted_indices, 0, 0, &__pyx_v_start_idx, &__pyx_v_end_idx, NULL, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 158, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetSlice(__pyx_v_sorted_indices, 0, 0, &__pyx_v_start_idx, &__pyx_v_end_idx, NULL, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 146, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
     __pyx_t_4 = __pyx_t_5; __Pyx_INCREF(__pyx_t_4); __pyx_t_7 = 0;
     __pyx_t_9 = NULL;
   } else {
-    __pyx_t_7 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 158, __pyx_L1_error)
+    __pyx_t_7 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 146, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 158, __pyx_L1_error)
+    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 146, __pyx_L1_error)
   }
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   for (;;) {
     if (likely(!__pyx_t_9)) {
       if (likely(PyList_CheckExact(__pyx_t_4))) {
         if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_4)) break;
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 158, __pyx_L1_error)
+        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 146, __pyx_L1_error)
         #else
-        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 158, __pyx_L1_error)
+        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 146, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_5);
         #endif
       } else {
         if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 158, __pyx_L1_error)
+        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 146, __pyx_L1_error)
         #else
-        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 158, __pyx_L1_error)
+        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 146, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_5);
         #endif
       }
     } else {
       __pyx_t_5 = __pyx_t_9(__pyx_t_4);
       if (unlikely(!__pyx_t_5)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 158, __pyx_L1_error)
+          else __PYX_ERR(0, 146, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_5);
     }
     __Pyx_XDECREF_SET(__pyx_v_idx, __pyx_t_5);
     __pyx_t_5 = 0;
 
-    /* "wrapper/core/DocumentSearchSB.pyx":159
+    /* "wrapper/core/DocumentSearchSB.pyx":147
  * 
  *         for idx in sorted_indices[start_idx:end_idx]:
  *             score = cosine_similarities[idx]             # <<<<<<<<<<<<<<
  *             if score > 0:
  *                 doc_name = self.document_names[detected_language][idx]
  */
-    __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_v_cosine_similarities, __pyx_v_idx); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 159, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_v_cosine_similarities, __pyx_v_idx); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 147, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_XDECREF_SET(__pyx_v_score, __pyx_t_5);
     __pyx_t_5 = 0;
 
-    /* "wrapper/core/DocumentSearchSB.pyx":160
+    /* "wrapper/core/DocumentSearchSB.pyx":148
  *         for idx in sorted_indices[start_idx:end_idx]:
  *             score = cosine_similarities[idx]
  *             if score > 0:             # <<<<<<<<<<<<<<
  *                 doc_name = self.document_names[detected_language][idx]
  *                 sorted_documents.append({"name": doc_name, "Score" : score, "language":detected_language})
  */
-    __pyx_t_5 = PyObject_RichCompare(__pyx_v_score, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 160, __pyx_L1_error)
-    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 160, __pyx_L1_error)
+    __pyx_t_5 = PyObject_RichCompare(__pyx_v_score, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 148, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 148, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     if (__pyx_t_3) {
 
-      /* "wrapper/core/DocumentSearchSB.pyx":161
+      /* "wrapper/core/DocumentSearchSB.pyx":149
  *             score = cosine_similarities[idx]
  *             if score > 0:
  *                 doc_name = self.document_names[detected_language][idx]             # <<<<<<<<<<<<<<
  *                 sorted_documents.append({"name": doc_name, "Score" : score, "language":detected_language})
  *             else:
  */
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 161, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_document_names); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 149, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_8 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_v_detected_language); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L1_error)
+      __pyx_t_8 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_v_detected_language); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 149, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_8);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_idx); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 161, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_t_8, __pyx_v_idx); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 149, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       __Pyx_XDECREF_SET(__pyx_v_doc_name, __pyx_t_5);
       __pyx_t_5 = 0;
 
-      /* "wrapper/core/DocumentSearchSB.pyx":162
+      /* "wrapper/core/DocumentSearchSB.pyx":150
  *             if score > 0:
  *                 doc_name = self.document_names[detected_language][idx]
  *                 sorted_documents.append({"name": doc_name, "Score" : score, "language":detected_language})             # <<<<<<<<<<<<<<
  *             else:
  *                 break
  */
-      __pyx_t_5 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 162, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 150, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_name, __pyx_v_doc_name) < 0) __PYX_ERR(0, 162, __pyx_L1_error)
-      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_Score, __pyx_v_score) < 0) __PYX_ERR(0, 162, __pyx_L1_error)
-      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_language, __pyx_v_detected_language) < 0) __PYX_ERR(0, 162, __pyx_L1_error)
-      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_sorted_documents, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 162, __pyx_L1_error)
+      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_name, __pyx_v_doc_name) < 0) __PYX_ERR(0, 150, __pyx_L1_error)
+      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_Score, __pyx_v_score) < 0) __PYX_ERR(0, 150, __pyx_L1_error)
+      if (PyDict_SetItem(__pyx_t_5, __pyx_n_u_language, __pyx_v_detected_language) < 0) __PYX_ERR(0, 150, __pyx_L1_error)
+      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_sorted_documents, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 150, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-      /* "wrapper/core/DocumentSearchSB.pyx":160
+      /* "wrapper/core/DocumentSearchSB.pyx":148
  *         for idx in sorted_indices[start_idx:end_idx]:
  *             score = cosine_similarities[idx]
  *             if score > 0:             # <<<<<<<<<<<<<<
  *                 doc_name = self.document_names[detected_language][idx]
  *                 sorted_documents.append({"name": doc_name, "Score" : score, "language":detected_language})
  */
       goto __pyx_L12;
     }
 
-    /* "wrapper/core/DocumentSearchSB.pyx":164
+    /* "wrapper/core/DocumentSearchSB.pyx":152
  *                 sorted_documents.append({"name": doc_name, "Score" : score, "language":detected_language})
  *             else:
  *                 break             # <<<<<<<<<<<<<<
  * 
  *         return query, sorted_documents
  */
     /*else*/ {
       goto __pyx_L11_break;
     }
     __pyx_L12:;
 
-    /* "wrapper/core/DocumentSearchSB.pyx":158
+    /* "wrapper/core/DocumentSearchSB.pyx":146
  *         sorted_documents = []
  * 
  *         for idx in sorted_indices[start_idx:end_idx]:             # <<<<<<<<<<<<<<
  *             score = cosine_similarities[idx]
  *             if score > 0:
  */
   }
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   goto __pyx_L13_for_end;
   __pyx_L11_break:;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   goto __pyx_L13_for_end;
   __pyx_L13_for_end:;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":166
+  /* "wrapper/core/DocumentSearchSB.pyx":154
  *                 break
  * 
  *         return query, sorted_documents             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 166, __pyx_L1_error)
+  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 154, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
   __Pyx_INCREF(__pyx_v_query);
   __Pyx_GIVEREF(__pyx_v_query);
   PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_query);
   __Pyx_INCREF(__pyx_v_sorted_documents);
   __Pyx_GIVEREF(__pyx_v_sorted_documents);
   PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_sorted_documents);
   __pyx_r = __pyx_t_4;
   __pyx_t_4 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":121
+  /* "wrapper/core/DocumentSearchSB.pyx":109
  *         return self.is_loaded
  * 
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
  * 
  *         detected_language = self.model_main
  */
 
@@ -5574,15 +5585,14 @@
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_loaded, __pyx_k_is_loaded, sizeof(__pyx_k_is_loaded), 0, 0, 1, 1},
     {&__pyx_n_s_joblib, __pyx_k_joblib, sizeof(__pyx_k_joblib), 0, 0, 1, 1},
     {&__pyx_n_s_kind, __pyx_k_kind, sizeof(__pyx_k_kind), 0, 0, 1, 1},
     {&__pyx_n_s_l, __pyx_k_l, sizeof(__pyx_k_l), 0, 0, 1, 1},
     {&__pyx_n_u_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 1, 0, 1},
     {&__pyx_kp_u_language_not_detected, __pyx_k_language_not_detected, sizeof(__pyx_k_language_not_detected), 0, 1, 0, 0},
-    {&__pyx_n_s_languages, __pyx_k_languages, sizeof(__pyx_k_languages), 0, 0, 1, 1},
     {&__pyx_n_s_linear_kernel, __pyx_k_linear_kernel, sizeof(__pyx_k_linear_kernel), 0, 0, 1, 1},
     {&__pyx_n_s_load, __pyx_k_load, sizeof(__pyx_k_load), 0, 0, 1, 1},
     {&__pyx_n_s_load_model, __pyx_k_load_model, sizeof(__pyx_k_load_model), 0, 0, 1, 1},
     {&__pyx_n_s_loaded_model_data, __pyx_k_loaded_model_data, sizeof(__pyx_k_loaded_model_data), 0, 0, 1, 1},
     {&__pyx_n_s_logging, __pyx_k_logging, sizeof(__pyx_k_logging), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_main_2, __pyx_k_main_2, sizeof(__pyx_k_main_2), 0, 0, 1, 1},
@@ -5596,14 +5606,15 @@
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_multilang_models, __pyx_k_multilang_models, sizeof(__pyx_k_multilang_models), 0, 0, 1, 1},
     {&__pyx_n_u_multilang_models, __pyx_k_multilang_models, sizeof(__pyx_k_multilang_models), 0, 1, 0, 1},
     {&__pyx_n_u_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 1, 0, 1},
     {&__pyx_n_s_name_2, __pyx_k_name_2, sizeof(__pyx_k_name_2), 0, 0, 1, 1},
     {&__pyx_n_s_nltk, __pyx_k_nltk, sizeof(__pyx_k_nltk), 0, 0, 1, 1},
+    {&__pyx_n_s_nltk_languages, __pyx_k_nltk_languages, sizeof(__pyx_k_nltk_languages), 0, 0, 1, 1},
     {&__pyx_n_s_np, __pyx_k_np, sizeof(__pyx_k_np), 0, 0, 1, 1},
     {&__pyx_n_s_numpy, __pyx_k_numpy, sizeof(__pyx_k_numpy), 0, 0, 1, 1},
     {&__pyx_n_s_order, __pyx_k_order, sizeof(__pyx_k_order), 0, 0, 1, 1},
     {&__pyx_n_s_os, __pyx_k_os, sizeof(__pyx_k_os), 0, 0, 1, 1},
     {&__pyx_n_s_page, __pyx_k_page, sizeof(__pyx_k_page), 0, 0, 1, 1},
     {&__pyx_n_s_page_number, __pyx_k_page_number, sizeof(__pyx_k_page_number), 0, 0, 1, 1},
     {&__pyx_n_s_page_size, __pyx_k_page_size, sizeof(__pyx_k_page_size), 0, 0, 1, 1},
@@ -5639,14 +5650,15 @@
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
     {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
     {&__pyx_n_s_torch, __pyx_k_torch, sizeof(__pyx_k_torch), 0, 0, 1, 1},
     {&__pyx_n_s_traceback, __pyx_k_traceback, sizeof(__pyx_k_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_train_model, __pyx_k_train_model, sizeof(__pyx_k_train_model), 0, 0, 1, 1},
     {&__pyx_n_s_translate_to, __pyx_k_translate_to, sizeof(__pyx_k_translate_to), 0, 0, 1, 1},
     {&__pyx_n_s_util, __pyx_k_util, sizeof(__pyx_k_util), 0, 0, 1, 1},
+    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
     {&__pyx_n_s_vstack, __pyx_k_vstack, sizeof(__pyx_k_vstack), 0, 0, 1, 1},
     {&__pyx_kp_u_without_model_or_documents_for_l, __pyx_k_without_model_or_documents_for_l, sizeof(__pyx_k_without_model_or_documents_for_l), 0, 1, 0, 0},
     {&__pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_k_wrapper_core_DocumentSearchSB, sizeof(__pyx_k_wrapper_core_DocumentSearchSB), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
@@ -5659,33 +5671,33 @@
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/core/DocumentSearchSB.pyx":131
+  /* "wrapper/core/DocumentSearchSB.pyx":119
  * 
  *             if not detected_language:
  *                 raise Exception('language not detected')             # <<<<<<<<<<<<<<
  * 
  *             if detected_language not in self.multilang_models or len(self.document_names[detected_language]) == 0:
  */
-  __pyx_tuple_ = PyTuple_Pack(1, __pyx_kp_u_language_not_detected); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 131, __pyx_L1_error)
+  __pyx_tuple_ = PyTuple_Pack(1, __pyx_kp_u_language_not_detected); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 119, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple_);
   __Pyx_GIVEREF(__pyx_tuple_);
 
-  /* "wrapper/core/DocumentSearchSB.pyx":148
+  /* "wrapper/core/DocumentSearchSB.pyx":136
  * 
  *         # Sort documents by similarity scores (highest similarity first)
  *         sorted_indices = np.argsort(cosine_similarities, axis=None, kind='quicksort', order=None)[::-1]             # <<<<<<<<<<<<<<
  * 
  *         page_size = results_per_page
  */
-  __pyx_slice__2 = PySlice_New(Py_None, Py_None, __pyx_int_neg_1); if (unlikely(!__pyx_slice__2)) __PYX_ERR(0, 148, __pyx_L1_error)
+  __pyx_slice__2 = PySlice_New(Py_None, Py_None, __pyx_int_neg_1); if (unlikely(!__pyx_slice__2)) __PYX_ERR(0, 136, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_slice__2);
   __Pyx_GIVEREF(__pyx_slice__2);
 
   /* "wrapper/core/DocumentSearchSB.pyx":25
  *     model_main = "main"
  * 
  *     def __init__(self, basepath, supported_languages = False):             # <<<<<<<<<<<<<<
@@ -5701,57 +5713,57 @@
   __Pyx_GIVEREF(__pyx_tuple__7);
 
   /* "wrapper/core/DocumentSearchSB.pyx":38
  *         self.load_model()
  * 
  *     def train_model(self, doc:File):             # <<<<<<<<<<<<<<
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  */
   __pyx_tuple__8 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_doc, __pyx_n_s_detected_language, __pyx_n_s_model); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__8);
   __Pyx_GIVEREF(__pyx_tuple__8);
   __pyx_codeobj__9 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__8, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_train_model, 38, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__9)) __PYX_ERR(0, 38, __pyx_L1_error)
 
-  /* "wrapper/core/DocumentSearchSB.pyx":75
+  /* "wrapper/core/DocumentSearchSB.pyx":63
  *             raise
  * 
  *     def save_model(self):             # <<<<<<<<<<<<<<
  *         model_data = {
  *             'multilang_models':self.multilang_models,
  */
-  __pyx_tuple__10 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_model_data, __pyx_n_s_dictionary); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 75, __pyx_L1_error)
+  __pyx_tuple__10 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_model_data, __pyx_n_s_dictionary); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 63, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__10);
   __Pyx_GIVEREF(__pyx_tuple__10);
-  __pyx_codeobj__11 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_save_model, 75, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__11)) __PYX_ERR(0, 75, __pyx_L1_error)
+  __pyx_codeobj__11 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_save_model, 63, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__11)) __PYX_ERR(0, 63, __pyx_L1_error)
 
-  /* "wrapper/core/DocumentSearchSB.pyx":90
+  /* "wrapper/core/DocumentSearchSB.pyx":78
  *         self.is_loaded = True
  * 
  *     def load_model(self):             # <<<<<<<<<<<<<<
  *         if not self.is_loaded:
  *             try:
  */
-  __pyx_tuple__12 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_loaded_model_data, __pyx_n_s_model, __pyx_n_s_main_2, __pyx_n_s_l); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_tuple__12 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_loaded_model_data, __pyx_n_s_model, __pyx_n_s_main_2, __pyx_n_s_l); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 78, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__12);
   __Pyx_GIVEREF(__pyx_tuple__12);
-  __pyx_codeobj__13 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_load_model, 90, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__13)) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_codeobj__13 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_load_model, 78, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__13)) __PYX_ERR(0, 78, __pyx_L1_error)
 
-  /* "wrapper/core/DocumentSearchSB.pyx":121
+  /* "wrapper/core/DocumentSearchSB.pyx":109
  *         return self.is_loaded
  * 
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
  * 
  *         detected_language = self.model_main
  */
-  __pyx_tuple__14 = PyTuple_Pack(19, __pyx_n_s_self, __pyx_n_s_query, __pyx_n_s_detected_search_language, __pyx_n_s_page, __pyx_n_s_results_per_page, __pyx_n_s_detected_language, __pyx_n_s_model, __pyx_n_s_embedded_documents, __pyx_n_s_query_embedding, __pyx_n_s_cosine_similarities, __pyx_n_s_sorted_indices, __pyx_n_s_page_size, __pyx_n_s_page_number, __pyx_n_s_start_idx, __pyx_n_s_end_idx, __pyx_n_s_sorted_documents, __pyx_n_s_idx, __pyx_n_s_score, __pyx_n_s_doc_name); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 121, __pyx_L1_error)
+  __pyx_tuple__14 = PyTuple_Pack(19, __pyx_n_s_self, __pyx_n_s_query, __pyx_n_s_detected_search_language, __pyx_n_s_page, __pyx_n_s_results_per_page, __pyx_n_s_detected_language, __pyx_n_s_model, __pyx_n_s_embedded_documents, __pyx_n_s_query_embedding, __pyx_n_s_cosine_similarities, __pyx_n_s_sorted_indices, __pyx_n_s_page_size, __pyx_n_s_page_number, __pyx_n_s_start_idx, __pyx_n_s_end_idx, __pyx_n_s_sorted_documents, __pyx_n_s_idx, __pyx_n_s_score, __pyx_n_s_doc_name); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 109, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__14);
   __Pyx_GIVEREF(__pyx_tuple__14);
-  __pyx_codeobj__15 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 19, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__14, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_search_documents, 121, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__15)) __PYX_ERR(0, 121, __pyx_L1_error)
-  __pyx_tuple__16 = PyTuple_Pack(3, ((PyObject *)Py_None), ((PyObject *)__pyx_int_1), ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 121, __pyx_L1_error)
+  __pyx_codeobj__15 = (PyObject*)__Pyx_PyCode_New(5, 0, 0, 19, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__14, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_DocumentSearchS, __pyx_n_s_search_documents, 109, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__15)) __PYX_ERR(0, 109, __pyx_L1_error)
+  __pyx_tuple__16 = PyTuple_Pack(3, ((PyObject *)Py_None), ((PyObject *)__pyx_int_1), ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 109, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__16);
   __Pyx_GIVEREF(__pyx_tuple__16);
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
@@ -6146,64 +6158,64 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":3
  * import os
  * import re
  * import nltk             # <<<<<<<<<<<<<<
  * import joblib
- * from ..infra.PreProcessing import languages, preprocess_text_for_stemmetization
+ * from ..infra.PreProcessing import nltk_languages, preprocess_text_for_stemmetization
  */
   __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_nltk, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_nltk, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":4
  * import re
  * import nltk
  * import joblib             # <<<<<<<<<<<<<<
- * from ..infra.PreProcessing import languages, preprocess_text_for_stemmetization
+ * from ..infra.PreProcessing import nltk_languages, preprocess_text_for_stemmetization
  * from sklearn.feature_extraction.text import TfidfVectorizer
  */
   __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_joblib, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_joblib, __pyx_t_2) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":5
  * import nltk
  * import joblib
- * from ..infra.PreProcessing import languages, preprocess_text_for_stemmetization             # <<<<<<<<<<<<<<
+ * from ..infra.PreProcessing import nltk_languages, preprocess_text_for_stemmetization             # <<<<<<<<<<<<<<
  * from sklearn.feature_extraction.text import TfidfVectorizer
  * from sklearn.metrics.pairwise import linear_kernel,cosine_similarity
  */
   __pyx_t_2 = PyList_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_languages);
-  __Pyx_GIVEREF(__pyx_n_s_languages);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_languages);
+  __Pyx_INCREF(__pyx_n_s_nltk_languages);
+  __Pyx_GIVEREF(__pyx_n_s_nltk_languages);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_nltk_languages);
   __Pyx_INCREF(__pyx_n_s_preprocess_text_for_stemmetizati);
   __Pyx_GIVEREF(__pyx_n_s_preprocess_text_for_stemmetizati);
   PyList_SET_ITEM(__pyx_t_2, 1, __pyx_n_s_preprocess_text_for_stemmetizati);
   __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_PreProcessing, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_languages); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_languages, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_nltk_languages, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_preprocess_text_for_stemmetizati, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":6
  * import joblib
- * from ..infra.PreProcessing import languages, preprocess_text_for_stemmetization
+ * from ..infra.PreProcessing import nltk_languages, preprocess_text_for_stemmetization
  * from sklearn.feature_extraction.text import TfidfVectorizer             # <<<<<<<<<<<<<<
  * from sklearn.metrics.pairwise import linear_kernel,cosine_similarity
  * from .File import File
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_TfidfVectorizer);
@@ -6215,15 +6227,15 @@
   __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_TfidfVectorizer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_TfidfVectorizer, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":7
- * from ..infra.PreProcessing import languages, preprocess_text_for_stemmetization
+ * from ..infra.PreProcessing import nltk_languages, preprocess_text_for_stemmetization
  * from sklearn.feature_extraction.text import TfidfVectorizer
  * from sklearn.metrics.pairwise import linear_kernel,cosine_similarity             # <<<<<<<<<<<<<<
  * from .File import File
  * from ..infra import LanguageDetector
  */
   __pyx_t_2 = PyList_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
@@ -6506,64 +6518,64 @@
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":38
  *         self.load_model()
  * 
  *     def train_model(self, doc:File):             # <<<<<<<<<<<<<<
  *         try :
- *             detected_language = doc.detected_language
+ *             detected_language = doc.detected_language.value
  */
   __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
   if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_doc, __pyx_n_s_File) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
   __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_3train_model, 0, __pyx_n_s_DocumentSearchSB_train_model, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__9)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_7, __pyx_t_6);
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
   if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_train_model, __pyx_t_7) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":75
+  /* "wrapper/core/DocumentSearchSB.pyx":63
  *             raise
  * 
  *     def save_model(self):             # <<<<<<<<<<<<<<
  *         model_data = {
  *             'multilang_models':self.multilang_models,
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_5save_model, 0, __pyx_n_s_DocumentSearchSB_save_model, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__11)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 75, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_5save_model, 0, __pyx_n_s_DocumentSearchSB_save_model, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__11)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __Pyx_INCREF(__pyx_t_7);
   PyList_Append(__pyx_t_3, __pyx_t_7);
   __Pyx_GIVEREF(__pyx_t_7);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_save_model, __pyx_t_7) < 0) __PYX_ERR(0, 75, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_save_model, __pyx_t_7) < 0) __PYX_ERR(0, 63, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":90
+  /* "wrapper/core/DocumentSearchSB.pyx":78
  *         self.is_loaded = True
  * 
  *     def load_model(self):             # <<<<<<<<<<<<<<
  *         if not self.is_loaded:
  *             try:
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_7load_model, 0, __pyx_n_s_DocumentSearchSB_load_model, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__13)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_7load_model, 0, __pyx_n_s_DocumentSearchSB_load_model, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__13)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 78, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_load_model, __pyx_t_7) < 0) __PYX_ERR(0, 90, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_load_model, __pyx_t_7) < 0) __PYX_ERR(0, 78, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "wrapper/core/DocumentSearchSB.pyx":121
+  /* "wrapper/core/DocumentSearchSB.pyx":109
  *         return self.is_loaded
  * 
  *     def search_documents(self, query, detected_search_language = None, page=1, results_per_page=10):             # <<<<<<<<<<<<<<
  * 
  *         detected_language = self.model_main
  */
-  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_9search_documents, 0, __pyx_n_s_DocumentSearchSB_search_document, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__15)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 121, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_16DocumentSearchSB_16DocumentSearchSB_9search_documents, 0, __pyx_n_s_DocumentSearchSB_search_document, NULL, __pyx_n_s_wrapper_core_DocumentSearchSB, __pyx_d, ((PyObject *)__pyx_codeobj__15)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 109, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_7);
   __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_tuple__16);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_search_documents, __pyx_t_7) < 0) __PYX_ERR(0, 121, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_search_documents, __pyx_t_7) < 0) __PYX_ERR(0, 109, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
   /* "wrapper/core/DocumentSearchSB.pyx":20
  * from .DocumentSearch import DocumentSearch
  * 
  * class DocumentSearchSB(DocumentSearch):             # <<<<<<<<<<<<<<
  *
```

### Comparing `docrx-0.0.11/src/wrapper/core/DocumentSearchTD.c` & `docrx-0.0.110/src/wrapper/core/DocumentSearchTD.c`

 * *Files identical despite different names*

### Comparing `docrx-0.0.11/src/wrapper/core/File.c` & `docrx-0.0.110/src/wrapper/core/File.c`

 * *Files 0% similar despite different names*

```diff
@@ -1354,14 +1354,19 @@
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
+struct __pyx_defaults;
+typedef struct __pyx_defaults __pyx_defaults;
+struct __pyx_defaults {
+  PyObject *__pyx_arg_lng;
+};
 /* #### Code section: utility_code_proto ### */
 
 /* --- Runtime support code (head) --- */
 /* Refnanny.proto */
 #ifndef CYTHON_REFNANNY
   #define CYTHON_REFNANNY 0
 #endif
@@ -1971,18 +1976,18 @@
 /* Implementation of "wrapper.core.File" */
 /* #### Code section: global_var ### */
 static PyObject *__pyx_builtin_print;
 /* #### Code section: string_decls ### */
 static const char __pyx_k_[] = ".";
 static const char __pyx_k_t[] = "t";
 static const char __pyx_k_id[] = "id";
-static const char __pyx_k_pt[] = "pt";
-static const char __pyx_k__14[] = "?";
+static const char __pyx_k__13[] = "?";
 static const char __pyx_k_doc[] = "__doc__";
 static const char __pyx_k_lng[] = "lng";
+static const char __pyx_k_ocr[] = "ocr";
 static const char __pyx_k_str[] = "str";
 static const char __pyx_k_File[] = "File";
 static const char __pyx_k_Text[] = "Text ";
 static const char __pyx_k_dict[] = "__dict__";
 static const char __pyx_k_init[] = "__init__";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
@@ -1995,21 +2000,25 @@
 static const char __pyx_k_print[] = "print";
 static const char __pyx_k_super[] = "super";
 static const char __pyx_k_import[] = "__import__";
 static const char __pyx_k_module[] = "__module__";
 static const char __pyx_k_tokens[] = "tokens";
 static const char __pyx_k_prepare[] = "__prepare__";
 static const char __pyx_k_summary[] = "summary";
+static const char __pyx_k_fix_text[] = "fix_text";
 static const char __pyx_k_list_NER[] = "list_NER";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_sentences[] = "sentences";
+static const char __pyx_k_PORTUGUESE[] = "PORTUGUESE";
 static const char __pyx_k_find_token[] = "find_token";
 static const char __pyx_k_query_text[] = "query_text";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_File___init[] = "File.__init__";
 static const char __pyx_k_annotations[] = "__annotations__";
 static const char __pyx_k_cleanedtext[] = "cleanedtext";
 static const char __pyx_k_detect_lang[] = "detect_lang";
 static const char __pyx_k_cleaned_text[] = "cleaned_text";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_query_tokens[] = "query_tokens";
@@ -2023,35 +2032,33 @@
 static const char __pyx_k_text_features[] = "text_features";
 static const char __pyx_k_extracted_text[] = "extracted_text";
 static const char __pyx_k_named_entities[] = "named_entities";
 static const char __pyx_k_File_find_token[] = "File.find_token";
 static const char __pyx_k_translated_text[] = "translated_text";
 static const char __pyx_k_LanguageDetector[] = "LanguageDetector";
 static const char __pyx_k_detected_language[] = "detected_language";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_not_translated_to[] = " not translated to ";
 static const char __pyx_k_wrapper_core_File[] = "wrapper.core.File";
 static const char __pyx_k_File_set_base_path[] = "File.set_base_path";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_infra_NERExtractor[] = "infra.NERExtractor";
 static const char __pyx_k_is_detect_language[] = "is_detect_language";
 static const char __pyx_k_create_features_base[] = "create_features_base";
-static const char __pyx_k_extract_text_features[] = "extract_text_features";
 static const char __pyx_k_extract_text_from_any[] = "extract_text_from_any";
-static const char __pyx_k_calc_cosine_similarity[] = "calc_cosine_similarity";
 static const char __pyx_k_extract_named_entities[] = "extract_named_entities";
 static const char __pyx_k_File_create_features_base[] = "File.create_features_base";
 static const char __pyx_k_src_wrapper_core_File_pyx[] = "src/wrapper/core/File.pyx";
-static const char __pyx_k_infra_TextFeatureExtractor[] = "infra.TextFeatureExtractor";
-static const char __pyx_k_infra_DocumentSimilarityCalculat[] = "infra.DocumentSimilarityCalculator";
 static const char __pyx_k_preprocess_text_for_stemmetizati[] = "preprocess_text_for_stemmetization";
 /* #### Code section: decls ### */
 static PyObject *__pyx_pf_7wrapper_4core_4File_4File___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_4File_4File_2set_base_path(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_4File_4File_4create_features_base(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_4File___defaults__(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_4File_4File_6find_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_query_text, PyObject *__pyx_v_lng); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_4File_4File_8list_NER(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
@@ -2076,71 +2083,72 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
   PyObject *__pyx_n_s_File;
   PyObject *__pyx_n_s_File___init;
   PyObject *__pyx_n_s_File_create_features_base;
   PyObject *__pyx_n_s_File_find_token;
   PyObject *__pyx_n_s_File_list_NER;
   PyObject *__pyx_n_s_File_set_base_path;
   PyObject *__pyx_n_s_LanguageDetector;
+  PyObject *__pyx_n_s_PORTUGUESE;
   PyObject *__pyx_n_s_PreProcessing;
   PyObject *__pyx_kp_u_Text;
   PyObject *__pyx_n_s_TextExtractor;
-  PyObject *__pyx_n_s__14;
+  PyObject *__pyx_n_s__13;
   PyObject *__pyx_n_s_annotations;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_base_path;
-  PyObject *__pyx_n_s_calc_cosine_similarity;
   PyObject *__pyx_n_s_cleaned_text;
   PyObject *__pyx_n_s_cleanedtext;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_create_features_base;
   PyObject *__pyx_n_s_detect_lang;
   PyObject *__pyx_kp_u_detected_lang;
   PyObject *__pyx_n_s_detected_language;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_doc;
   PyObject *__pyx_n_s_extract_named_entities;
-  PyObject *__pyx_n_s_extract_text_features;
   PyObject *__pyx_n_s_extract_text_from_any;
   PyObject *__pyx_n_s_extracted_text;
   PyObject *__pyx_n_s_find_token;
+  PyObject *__pyx_n_s_fix_text;
   PyObject *__pyx_n_s_found;
   PyObject *__pyx_n_s_id;
   PyObject *__pyx_n_s_import;
   PyObject *__pyx_n_s_infra;
-  PyObject *__pyx_n_s_infra_DocumentSimilarityCalculat;
+  PyObject *__pyx_n_s_infra_DocLanguage;
   PyObject *__pyx_n_s_infra_NERExtractor;
-  PyObject *__pyx_n_s_infra_TextFeatureExtractor;
   PyObject *__pyx_n_s_init;
   PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_detect_language;
   PyObject *__pyx_n_s_list_NER;
   PyObject *__pyx_n_s_lng;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_metaclass;
   PyObject *__pyx_n_s_module;
   PyObject *__pyx_n_s_name;
   PyObject *__pyx_n_s_named_entities;
   PyObject *__pyx_kp_u_not_translated_to;
+  PyObject *__pyx_n_s_ocr;
   PyObject *__pyx_n_s_path;
   PyObject *__pyx_n_s_prepare;
   PyObject *__pyx_n_s_preprocess_text_for_stemmetizati;
   PyObject *__pyx_n_s_print;
-  PyObject *__pyx_n_u_pt;
   PyObject *__pyx_n_s_qualname;
   PyObject *__pyx_n_s_query_text;
   PyObject *__pyx_n_s_query_tokens;
   PyObject *__pyx_n_s_self;
+  PyObject *__pyx_n_s_sentences;
   PyObject *__pyx_n_s_set_base_path;
   PyObject *__pyx_n_s_set_name;
   PyObject *__pyx_kp_s_src_wrapper_core_File_pyx;
   PyObject *__pyx_n_s_str;
   PyObject *__pyx_n_s_summary;
   PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_t;
@@ -2153,20 +2161,19 @@
   PyObject *__pyx_n_s_wrapper_core_File;
   PyObject *__pyx_tuple__2;
   PyObject *__pyx_tuple__4;
   PyObject *__pyx_tuple__5;
   PyObject *__pyx_tuple__7;
   PyObject *__pyx_tuple__9;
   PyObject *__pyx_tuple__11;
-  PyObject *__pyx_tuple__12;
   PyObject *__pyx_codeobj__3;
   PyObject *__pyx_codeobj__6;
   PyObject *__pyx_codeobj__8;
   PyObject *__pyx_codeobj__10;
-  PyObject *__pyx_codeobj__13;
+  PyObject *__pyx_codeobj__12;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2202,71 +2209,72 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_File);
   Py_CLEAR(clear_module_state->__pyx_n_s_File___init);
   Py_CLEAR(clear_module_state->__pyx_n_s_File_create_features_base);
   Py_CLEAR(clear_module_state->__pyx_n_s_File_find_token);
   Py_CLEAR(clear_module_state->__pyx_n_s_File_list_NER);
   Py_CLEAR(clear_module_state->__pyx_n_s_File_set_base_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_LanguageDetector);
+  Py_CLEAR(clear_module_state->__pyx_n_s_PORTUGUESE);
   Py_CLEAR(clear_module_state->__pyx_n_s_PreProcessing);
   Py_CLEAR(clear_module_state->__pyx_kp_u_Text);
   Py_CLEAR(clear_module_state->__pyx_n_s_TextExtractor);
-  Py_CLEAR(clear_module_state->__pyx_n_s__14);
+  Py_CLEAR(clear_module_state->__pyx_n_s__13);
   Py_CLEAR(clear_module_state->__pyx_n_s_annotations);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_base_path);
-  Py_CLEAR(clear_module_state->__pyx_n_s_calc_cosine_similarity);
   Py_CLEAR(clear_module_state->__pyx_n_s_cleaned_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_cleanedtext);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features_base);
   Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang);
   Py_CLEAR(clear_module_state->__pyx_kp_u_detected_lang);
   Py_CLEAR(clear_module_state->__pyx_n_s_detected_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_extract_named_entities);
-  Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_from_any);
   Py_CLEAR(clear_module_state->__pyx_n_s_extracted_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_find_token);
+  Py_CLEAR(clear_module_state->__pyx_n_s_fix_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_found);
   Py_CLEAR(clear_module_state->__pyx_n_s_id);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
   Py_CLEAR(clear_module_state->__pyx_n_s_infra);
-  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocumentSimilarityCalculat);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_infra_NERExtractor);
-  Py_CLEAR(clear_module_state->__pyx_n_s_infra_TextFeatureExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s_init);
   Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_detect_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_list_NER);
   Py_CLEAR(clear_module_state->__pyx_n_s_lng);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_named_entities);
   Py_CLEAR(clear_module_state->__pyx_kp_u_not_translated_to);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ocr);
   Py_CLEAR(clear_module_state->__pyx_n_s_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
   Py_CLEAR(clear_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
   Py_CLEAR(clear_module_state->__pyx_n_s_print);
-  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
   Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
   Py_CLEAR(clear_module_state->__pyx_n_s_query_text);
   Py_CLEAR(clear_module_state->__pyx_n_s_query_tokens);
   Py_CLEAR(clear_module_state->__pyx_n_s_self);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sentences);
   Py_CLEAR(clear_module_state->__pyx_n_s_set_base_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
   Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_File_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_str);
   Py_CLEAR(clear_module_state->__pyx_n_s_summary);
   Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_t);
@@ -2279,20 +2287,19 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_File);
   Py_CLEAR(clear_module_state->__pyx_tuple__2);
   Py_CLEAR(clear_module_state->__pyx_tuple__4);
   Py_CLEAR(clear_module_state->__pyx_tuple__5);
   Py_CLEAR(clear_module_state->__pyx_tuple__7);
   Py_CLEAR(clear_module_state->__pyx_tuple__9);
   Py_CLEAR(clear_module_state->__pyx_tuple__11);
-  Py_CLEAR(clear_module_state->__pyx_tuple__12);
   Py_CLEAR(clear_module_state->__pyx_codeobj__3);
   Py_CLEAR(clear_module_state->__pyx_codeobj__6);
   Py_CLEAR(clear_module_state->__pyx_codeobj__8);
   Py_CLEAR(clear_module_state->__pyx_codeobj__10);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__13);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__12);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2306,71 +2313,72 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_File);
   Py_VISIT(traverse_module_state->__pyx_n_s_File___init);
   Py_VISIT(traverse_module_state->__pyx_n_s_File_create_features_base);
   Py_VISIT(traverse_module_state->__pyx_n_s_File_find_token);
   Py_VISIT(traverse_module_state->__pyx_n_s_File_list_NER);
   Py_VISIT(traverse_module_state->__pyx_n_s_File_set_base_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_LanguageDetector);
+  Py_VISIT(traverse_module_state->__pyx_n_s_PORTUGUESE);
   Py_VISIT(traverse_module_state->__pyx_n_s_PreProcessing);
   Py_VISIT(traverse_module_state->__pyx_kp_u_Text);
   Py_VISIT(traverse_module_state->__pyx_n_s_TextExtractor);
-  Py_VISIT(traverse_module_state->__pyx_n_s__14);
+  Py_VISIT(traverse_module_state->__pyx_n_s__13);
   Py_VISIT(traverse_module_state->__pyx_n_s_annotations);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_base_path);
-  Py_VISIT(traverse_module_state->__pyx_n_s_calc_cosine_similarity);
   Py_VISIT(traverse_module_state->__pyx_n_s_cleaned_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_cleanedtext);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features_base);
   Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang);
   Py_VISIT(traverse_module_state->__pyx_kp_u_detected_lang);
   Py_VISIT(traverse_module_state->__pyx_n_s_detected_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_extract_named_entities);
-  Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_from_any);
   Py_VISIT(traverse_module_state->__pyx_n_s_extracted_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_find_token);
+  Py_VISIT(traverse_module_state->__pyx_n_s_fix_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_found);
   Py_VISIT(traverse_module_state->__pyx_n_s_id);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
   Py_VISIT(traverse_module_state->__pyx_n_s_infra);
-  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocumentSimilarityCalculat);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_infra_NERExtractor);
-  Py_VISIT(traverse_module_state->__pyx_n_s_infra_TextFeatureExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s_init);
   Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_detect_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_list_NER);
   Py_VISIT(traverse_module_state->__pyx_n_s_lng);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_named_entities);
   Py_VISIT(traverse_module_state->__pyx_kp_u_not_translated_to);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ocr);
   Py_VISIT(traverse_module_state->__pyx_n_s_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
   Py_VISIT(traverse_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
   Py_VISIT(traverse_module_state->__pyx_n_s_print);
-  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
   Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
   Py_VISIT(traverse_module_state->__pyx_n_s_query_text);
   Py_VISIT(traverse_module_state->__pyx_n_s_query_tokens);
   Py_VISIT(traverse_module_state->__pyx_n_s_self);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sentences);
   Py_VISIT(traverse_module_state->__pyx_n_s_set_base_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
   Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_File_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_str);
   Py_VISIT(traverse_module_state->__pyx_n_s_summary);
   Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_t);
@@ -2383,20 +2391,19 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_File);
   Py_VISIT(traverse_module_state->__pyx_tuple__2);
   Py_VISIT(traverse_module_state->__pyx_tuple__4);
   Py_VISIT(traverse_module_state->__pyx_tuple__5);
   Py_VISIT(traverse_module_state->__pyx_tuple__7);
   Py_VISIT(traverse_module_state->__pyx_tuple__9);
   Py_VISIT(traverse_module_state->__pyx_tuple__11);
-  Py_VISIT(traverse_module_state->__pyx_tuple__12);
   Py_VISIT(traverse_module_state->__pyx_codeobj__3);
   Py_VISIT(traverse_module_state->__pyx_codeobj__6);
   Py_VISIT(traverse_module_state->__pyx_codeobj__8);
   Py_VISIT(traverse_module_state->__pyx_codeobj__10);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__13);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__12);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2420,71 +2427,72 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
 #define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
 #define __pyx_n_s_File___init __pyx_mstate_global->__pyx_n_s_File___init
 #define __pyx_n_s_File_create_features_base __pyx_mstate_global->__pyx_n_s_File_create_features_base
 #define __pyx_n_s_File_find_token __pyx_mstate_global->__pyx_n_s_File_find_token
 #define __pyx_n_s_File_list_NER __pyx_mstate_global->__pyx_n_s_File_list_NER
 #define __pyx_n_s_File_set_base_path __pyx_mstate_global->__pyx_n_s_File_set_base_path
 #define __pyx_n_s_LanguageDetector __pyx_mstate_global->__pyx_n_s_LanguageDetector
+#define __pyx_n_s_PORTUGUESE __pyx_mstate_global->__pyx_n_s_PORTUGUESE
 #define __pyx_n_s_PreProcessing __pyx_mstate_global->__pyx_n_s_PreProcessing
 #define __pyx_kp_u_Text __pyx_mstate_global->__pyx_kp_u_Text
 #define __pyx_n_s_TextExtractor __pyx_mstate_global->__pyx_n_s_TextExtractor
-#define __pyx_n_s__14 __pyx_mstate_global->__pyx_n_s__14
+#define __pyx_n_s__13 __pyx_mstate_global->__pyx_n_s__13
 #define __pyx_n_s_annotations __pyx_mstate_global->__pyx_n_s_annotations
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_base_path __pyx_mstate_global->__pyx_n_s_base_path
-#define __pyx_n_s_calc_cosine_similarity __pyx_mstate_global->__pyx_n_s_calc_cosine_similarity
 #define __pyx_n_s_cleaned_text __pyx_mstate_global->__pyx_n_s_cleaned_text
 #define __pyx_n_s_cleanedtext __pyx_mstate_global->__pyx_n_s_cleanedtext
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_create_features_base __pyx_mstate_global->__pyx_n_s_create_features_base
 #define __pyx_n_s_detect_lang __pyx_mstate_global->__pyx_n_s_detect_lang
 #define __pyx_kp_u_detected_lang __pyx_mstate_global->__pyx_kp_u_detected_lang
 #define __pyx_n_s_detected_language __pyx_mstate_global->__pyx_n_s_detected_language
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
 #define __pyx_n_s_extract_named_entities __pyx_mstate_global->__pyx_n_s_extract_named_entities
-#define __pyx_n_s_extract_text_features __pyx_mstate_global->__pyx_n_s_extract_text_features
 #define __pyx_n_s_extract_text_from_any __pyx_mstate_global->__pyx_n_s_extract_text_from_any
 #define __pyx_n_s_extracted_text __pyx_mstate_global->__pyx_n_s_extracted_text
 #define __pyx_n_s_find_token __pyx_mstate_global->__pyx_n_s_find_token
+#define __pyx_n_s_fix_text __pyx_mstate_global->__pyx_n_s_fix_text
 #define __pyx_n_s_found __pyx_mstate_global->__pyx_n_s_found
 #define __pyx_n_s_id __pyx_mstate_global->__pyx_n_s_id
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
 #define __pyx_n_s_infra __pyx_mstate_global->__pyx_n_s_infra
-#define __pyx_n_s_infra_DocumentSimilarityCalculat __pyx_mstate_global->__pyx_n_s_infra_DocumentSimilarityCalculat
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
 #define __pyx_n_s_infra_NERExtractor __pyx_mstate_global->__pyx_n_s_infra_NERExtractor
-#define __pyx_n_s_infra_TextFeatureExtractor __pyx_mstate_global->__pyx_n_s_infra_TextFeatureExtractor
 #define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
 #define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_detect_language __pyx_mstate_global->__pyx_n_s_is_detect_language
 #define __pyx_n_s_list_NER __pyx_mstate_global->__pyx_n_s_list_NER
 #define __pyx_n_s_lng __pyx_mstate_global->__pyx_n_s_lng
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
 #define __pyx_n_s_named_entities __pyx_mstate_global->__pyx_n_s_named_entities
 #define __pyx_kp_u_not_translated_to __pyx_mstate_global->__pyx_kp_u_not_translated_to
+#define __pyx_n_s_ocr __pyx_mstate_global->__pyx_n_s_ocr
 #define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
 #define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
 #define __pyx_n_s_preprocess_text_for_stemmetizati __pyx_mstate_global->__pyx_n_s_preprocess_text_for_stemmetizati
 #define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
-#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
 #define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
 #define __pyx_n_s_query_text __pyx_mstate_global->__pyx_n_s_query_text
 #define __pyx_n_s_query_tokens __pyx_mstate_global->__pyx_n_s_query_tokens
 #define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
+#define __pyx_n_s_sentences __pyx_mstate_global->__pyx_n_s_sentences
 #define __pyx_n_s_set_base_path __pyx_mstate_global->__pyx_n_s_set_base_path
 #define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
 #define __pyx_kp_s_src_wrapper_core_File_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_File_pyx
 #define __pyx_n_s_str __pyx_mstate_global->__pyx_n_s_str
 #define __pyx_n_s_summary __pyx_mstate_global->__pyx_n_s_summary
 #define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_t __pyx_mstate_global->__pyx_n_s_t
@@ -2497,39 +2505,38 @@
 #define __pyx_n_s_wrapper_core_File __pyx_mstate_global->__pyx_n_s_wrapper_core_File
 #define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
 #define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
 #define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
 #define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
 #define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
 #define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
-#define __pyx_tuple__12 __pyx_mstate_global->__pyx_tuple__12
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
 #define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
 #define __pyx_codeobj__8 __pyx_mstate_global->__pyx_codeobj__8
 #define __pyx_codeobj__10 __pyx_mstate_global->__pyx_codeobj__10
-#define __pyx_codeobj__13 __pyx_mstate_global->__pyx_codeobj__13
+#define __pyx_codeobj__12 __pyx_mstate_global->__pyx_codeobj__12
 /* #### Code section: module_code ### */
 
-/* "wrapper/core/File.pyx":30
- *     is_detect_language=False
+/* "wrapper/core/File.pyx":26
+ *     ocr = False
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  *         self.translate_to = translate_to
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_4File_4File_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_4File_4File___init__, "File.__init__(self, base_path, is_detect_language=False, translate_to=None)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_4File_4File___init__, "File.__init__(self, base_path, is_detect_language=False, translate_to: DocLanguage = None)");
 static PyMethodDef __pyx_mdef_7wrapper_4core_4File_4File_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_4File_4File_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_4File_4File___init__};
 static PyObject *__pyx_pw_7wrapper_4core_4File_4File_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -2567,41 +2574,41 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 30, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 26, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 30, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 26, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, 1); __PYX_ERR(0, 30, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, 1); __PYX_ERR(0, 26, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 30, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 26, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 30, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 26, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 30, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 26, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
@@ -2614,15 +2621,15 @@
     __pyx_v_self = values[0];
     __pyx_v_base_path = values[1];
     __pyx_v_is_detect_language = values[2];
     __pyx_v_translate_to = values[3];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 30, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 26, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.File.File.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_4File_4File___init__(__pyx_self, __pyx_v_self, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to);
 
@@ -2637,59 +2644,59 @@
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
 
-  /* "wrapper/core/File.pyx":31
+  /* "wrapper/core/File.pyx":27
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  *         self.base_path = base_path             # <<<<<<<<<<<<<<
  *         self.translate_to = translate_to
  *         self.is_detect_language=is_detect_language
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 27, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":32
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+  /* "wrapper/core/File.pyx":28
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  *         self.base_path = base_path
  *         self.translate_to = translate_to             # <<<<<<<<<<<<<<
  *         self.is_detect_language=is_detect_language
  *         print(self.base_path)
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_translate_to, __pyx_v_translate_to) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_translate_to, __pyx_v_translate_to) < 0) __PYX_ERR(0, 28, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":33
+  /* "wrapper/core/File.pyx":29
  *         self.base_path = base_path
  *         self.translate_to = translate_to
  *         self.is_detect_language=is_detect_language             # <<<<<<<<<<<<<<
  *         print(self.base_path)
  * 
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language, __pyx_v_is_detect_language) < 0) __PYX_ERR(0, 33, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language, __pyx_v_is_detect_language) < 0) __PYX_ERR(0, 29, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":34
+  /* "wrapper/core/File.pyx":30
  *         self.translate_to = translate_to
  *         self.is_detect_language=is_detect_language
  *         print(self.base_path)             # <<<<<<<<<<<<<<
  * 
  *     def set_base_path(self, base_path):
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_base_path); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 34, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_base_path); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 30, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":30
- *     is_detect_language=False
+  /* "wrapper/core/File.pyx":26
+ *     ocr = False
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  *         self.translate_to = translate_to
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
@@ -2700,15 +2707,15 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/File.pyx":36
+/* "wrapper/core/File.pyx":32
  *         print(self.base_path)
  * 
  *     def set_base_path(self, base_path):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  * 
  */
 
@@ -2754,40 +2761,40 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 36, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 32, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 36, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 32, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("set_base_path", 1, 2, 2, 1); __PYX_ERR(0, 36, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("set_base_path", 1, 2, 2, 1); __PYX_ERR(0, 32, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "set_base_path") < 0)) __PYX_ERR(0, 36, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "set_base_path") < 0)) __PYX_ERR(0, 32, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_self = values[0];
     __pyx_v_base_path = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("set_base_path", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 36, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("set_base_path", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 32, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.File.File.set_base_path", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_4File_4File_2set_base_path(__pyx_self, __pyx_v_self, __pyx_v_base_path);
 
@@ -2800,24 +2807,24 @@
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("set_base_path", 0);
 
-  /* "wrapper/core/File.pyx":37
+  /* "wrapper/core/File.pyx":33
  * 
  *     def set_base_path(self, base_path):
  *         self.base_path = base_path             # <<<<<<<<<<<<<<
  * 
  *     def create_features_base(self, path):
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 37, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_base_path, __pyx_v_base_path) < 0) __PYX_ERR(0, 33, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":36
+  /* "wrapper/core/File.pyx":32
  *         print(self.base_path)
  * 
  *     def set_base_path(self, base_path):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  * 
  */
 
@@ -2829,15 +2836,15 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/File.pyx":39
+/* "wrapper/core/File.pyx":35
  *         self.base_path = base_path
  * 
  *     def create_features_base(self, path):             # <<<<<<<<<<<<<<
  *         self.path = path
  *         if not self.text:
  */
 
@@ -2883,40 +2890,40 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 39, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 35, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 39, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 35, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("create_features_base", 1, 2, 2, 1); __PYX_ERR(0, 39, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("create_features_base", 1, 2, 2, 1); __PYX_ERR(0, 35, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_features_base") < 0)) __PYX_ERR(0, 39, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_features_base") < 0)) __PYX_ERR(0, 35, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_self = values[0];
     __pyx_v_path = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("create_features_base", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 39, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("create_features_base", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 35, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.File.File.create_features_base", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_4File_4File_4create_features_base(__pyx_self, __pyx_v_self, __pyx_v_path);
 
@@ -2941,47 +2948,47 @@
   Py_ssize_t __pyx_t_10;
   Py_UCS4 __pyx_t_11;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("create_features_base", 0);
 
-  /* "wrapper/core/File.pyx":40
+  /* "wrapper/core/File.pyx":36
  * 
  *     def create_features_base(self, path):
  *         self.path = path             # <<<<<<<<<<<<<<
  *         if not self.text:
  *             self.text = TextExtractor.extract_text_from_any(path)
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_path, __pyx_v_path) < 0) __PYX_ERR(0, 40, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_path, __pyx_v_path) < 0) __PYX_ERR(0, 36, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":41
+  /* "wrapper/core/File.pyx":37
  *     def create_features_base(self, path):
  *         self.path = path
  *         if not self.text:             # <<<<<<<<<<<<<<
  *             self.text = TextExtractor.extract_text_from_any(path)
  *         if self.text:
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 41, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 37, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __pyx_t_3 = (!__pyx_t_2);
   if (__pyx_t_3) {
 
-    /* "wrapper/core/File.pyx":42
+    /* "wrapper/core/File.pyx":38
  *         self.path = path
  *         if not self.text:
  *             self.text = TextExtractor.extract_text_from_any(path)             # <<<<<<<<<<<<<<
  *         if self.text:
  *             self.extracted_text = self.text
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 42, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 38, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_extract_text_from_any); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_extract_text_from_any); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 38, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     __pyx_t_4 = NULL;
     __pyx_t_6 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
       __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
       if (likely(__pyx_t_4)) {
@@ -2992,544 +2999,541 @@
         __pyx_t_6 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_v_path};
       __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
       __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     }
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 38, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/core/File.pyx":41
+    /* "wrapper/core/File.pyx":37
  *     def create_features_base(self, path):
  *         self.path = path
  *         if not self.text:             # <<<<<<<<<<<<<<
  *             self.text = TextExtractor.extract_text_from_any(path)
  *         if self.text:
  */
   }
 
-  /* "wrapper/core/File.pyx":43
+  /* "wrapper/core/File.pyx":39
  *         if not self.text:
  *             self.text = TextExtractor.extract_text_from_any(path)
  *         if self.text:             # <<<<<<<<<<<<<<
  *             self.extracted_text = self.text
- *             #test
+ *             if self.is_detect_language or self.translate_to:
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 43, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 39, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_3) {
 
-    /* "wrapper/core/File.pyx":44
+    /* "wrapper/core/File.pyx":40
  *             self.text = TextExtractor.extract_text_from_any(path)
  *         if self.text:
  *             self.extracted_text = self.text             # <<<<<<<<<<<<<<
- *             #test
- *             self.is_detect_language = False
+ *             if self.is_detect_language or self.translate_to:
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 44, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 40, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_extracted_text, __pyx_t_1) < 0) __PYX_ERR(0, 44, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_extracted_text, __pyx_t_1) < 0) __PYX_ERR(0, 40, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/core/File.pyx":46
+    /* "wrapper/core/File.pyx":41
+ *         if self.text:
  *             self.extracted_text = self.text
- *             #test
- *             self.is_detect_language = False             # <<<<<<<<<<<<<<
- *             if self.is_detect_language or self.translate_to:
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
- */
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language, Py_False) < 0) __PYX_ERR(0, 46, __pyx_L1_error)
-
-    /* "wrapper/core/File.pyx":47
- *             #test
- *             self.is_detect_language = False
  *             if self.is_detect_language or self.translate_to:             # <<<<<<<<<<<<<<
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 47, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 47, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     if (!__pyx_t_2) {
     } else {
       __pyx_t_3 = __pyx_t_2;
       goto __pyx_L6_bool_binop_done;
     }
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 47, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 47, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __pyx_t_3 = __pyx_t_2;
     __pyx_L6_bool_binop_done:;
     if (__pyx_t_3) {
 
-      /* "wrapper/core/File.pyx":48
- *             self.is_detect_language = False
+      /* "wrapper/core/File.pyx":42
+ *             self.extracted_text = self.text
  *             if self.is_detect_language or self.translate_to:
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)             # <<<<<<<<<<<<<<
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)             # <<<<<<<<<<<<<<
  *                 if self.translate_to:
  *                     if not translated_text:
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 48, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_detect_lang); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_detect_lang); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 48, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 42, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_4);
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 48, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 48, __pyx_L1_error)
+      __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 42, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
-      __pyx_t_8 = NULL;
-      __pyx_t_6 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
-        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
-        if (likely(__pyx_t_8)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
-          __Pyx_INCREF(__pyx_t_8);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_4, function);
-          __pyx_t_6 = 1;
-        }
-      }
-      {
-        PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_t_5, __pyx_t_7};
-        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
-        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 48, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      }
+      __Pyx_GIVEREF(__pyx_t_1);
+      PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_1);
+      __Pyx_GIVEREF(__pyx_t_4);
+      PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_4);
+      __pyx_t_1 = 0;
+      __pyx_t_4 = 0;
+      __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_ocr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_fix_text, __pyx_t_1) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_7, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
         PyObject* sequence = __pyx_t_1;
         Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
-        if (unlikely(size != 2)) {
-          if (size > 2) __Pyx_RaiseTooManyValuesError(2);
+        if (unlikely(size != 3)) {
+          if (size > 3) __Pyx_RaiseTooManyValuesError(3);
           else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-          __PYX_ERR(0, 48, __pyx_L1_error)
+          __PYX_ERR(0, 42, __pyx_L1_error)
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
         if (likely(PyTuple_CheckExact(sequence))) {
           __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
           __pyx_t_7 = PyTuple_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyTuple_GET_ITEM(sequence, 2); 
         } else {
           __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
           __pyx_t_7 = PyList_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyList_GET_ITEM(sequence, 2); 
         }
         __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(__pyx_t_7);
+        __Pyx_INCREF(__pyx_t_5);
         #else
-        __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 48, __pyx_L1_error)
+        __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 42, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_4);
-        __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 48, __pyx_L1_error)
+        __pyx_t_7 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 42, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_7);
+        __pyx_t_5 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_5);
         #endif
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       } else {
         Py_ssize_t index = -1;
-        __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 48, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_8 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 42, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5);
-        index = 0; __pyx_t_4 = __pyx_t_9(__pyx_t_5); if (unlikely(!__pyx_t_4)) goto __pyx_L8_unpacking_failed;
+        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8);
+        index = 0; __pyx_t_4 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_4)) goto __pyx_L8_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_4);
-        index = 1; __pyx_t_7 = __pyx_t_9(__pyx_t_5); if (unlikely(!__pyx_t_7)) goto __pyx_L8_unpacking_failed;
+        index = 1; __pyx_t_7 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_7)) goto __pyx_L8_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_7);
-        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_5), 2) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
+        index = 2; __pyx_t_5 = __pyx_t_9(__pyx_t_8); if (unlikely(!__pyx_t_5)) goto __pyx_L8_unpacking_failed;
+        __Pyx_GOTREF(__pyx_t_5);
+        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 3) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
         __pyx_t_9 = NULL;
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
         goto __pyx_L9_unpacking_done;
         __pyx_L8_unpacking_failed:;
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
         __pyx_t_9 = NULL;
         if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-        __PYX_ERR(0, 48, __pyx_L1_error)
+        __PYX_ERR(0, 42, __pyx_L1_error)
         __pyx_L9_unpacking_done:;
       }
-      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_detected_language, __pyx_t_4) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_detected_language, __pyx_t_4) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
       __pyx_v_translated_text = __pyx_t_7;
       __pyx_t_7 = 0;
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_sentences, __pyx_t_5) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-      /* "wrapper/core/File.pyx":49
+      /* "wrapper/core/File.pyx":43
  *             if self.is_detect_language or self.translate_to:
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:             # <<<<<<<<<<<<<<
  *                     if not translated_text:
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')
  */
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 49, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 49, __pyx_L1_error)
+      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 43, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       if (__pyx_t_3) {
 
-        /* "wrapper/core/File.pyx":50
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+        /* "wrapper/core/File.pyx":44
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:
  *                     if not translated_text:             # <<<<<<<<<<<<<<
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')
  *                     else:
  */
-        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_translated_text); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 50, __pyx_L1_error)
+        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_translated_text); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 44, __pyx_L1_error)
         __pyx_t_2 = (!__pyx_t_3);
         if (unlikely(__pyx_t_2)) {
 
-          /* "wrapper/core/File.pyx":51
+          /* "wrapper/core/File.pyx":45
  *                 if self.translate_to:
  *                     if not translated_text:
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')             # <<<<<<<<<<<<<<
  *                     else:
  *                         self.text = translated_text
  */
-          __pyx_t_1 = PyTuple_New(6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __pyx_t_1 = PyTuple_New(6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 45, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_1);
           __pyx_t_10 = 0;
           __pyx_t_11 = 127;
           __Pyx_INCREF(__pyx_kp_u_Text);
           __pyx_t_10 += 5;
           __Pyx_GIVEREF(__pyx_kp_u_Text);
           PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_kp_u_Text);
-          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 45, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __pyx_t_7 = __Pyx_PyObject_FormatSimple(__pyx_t_5, __pyx_empty_unicode); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 45, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_7);
-          __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_7, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_4);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) : __pyx_t_11;
-          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_4);
-          __Pyx_GIVEREF(__pyx_t_4);
-          PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
-          __pyx_t_4 = 0;
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) : __pyx_t_11;
+          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_7);
+          __Pyx_GIVEREF(__pyx_t_7);
+          PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_7);
+          __pyx_t_7 = 0;
           __Pyx_INCREF(__pyx_kp_u_detected_lang);
           __pyx_t_10 += 15;
           __Pyx_GIVEREF(__pyx_kp_u_detected_lang);
           PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_kp_u_detected_lang);
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_4);
-          __pyx_t_7 = __Pyx_PyObject_FormatSimple(__pyx_t_4, __pyx_empty_unicode); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 45, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_7);
-          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) : __pyx_t_11;
-          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_7);
-          __Pyx_GIVEREF(__pyx_t_7);
-          PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_7);
-          __pyx_t_7 = 0;
+          __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_t_7, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 45, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) : __pyx_t_11;
+          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_5);
+          __Pyx_GIVEREF(__pyx_t_5);
+          PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_5);
+          __pyx_t_5 = 0;
           __Pyx_INCREF(__pyx_kp_u_not_translated_to);
           __pyx_t_10 += 19;
           __Pyx_GIVEREF(__pyx_kp_u_not_translated_to);
           PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_kp_u_not_translated_to);
-          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_translate_to); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 45, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __pyx_t_7 = __Pyx_PyObject_FormatSimple(__pyx_t_5, __pyx_empty_unicode); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 45, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_7);
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) : __pyx_t_11;
+          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_7);
+          __Pyx_GIVEREF(__pyx_t_7);
+          PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_t_7);
+          __pyx_t_7 = 0;
+          __pyx_t_7 = __Pyx_PyUnicode_Join(__pyx_t_1, 6, __pyx_t_10, __pyx_t_11); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 45, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_7);
-          __pyx_t_4 = __Pyx_PyObject_FormatSimple(__pyx_t_7, __pyx_empty_unicode); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_4);
-          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-          __pyx_t_11 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) > __pyx_t_11) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_4) : __pyx_t_11;
-          __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_4);
-          __Pyx_GIVEREF(__pyx_t_4);
-          PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_t_4);
-          __pyx_t_4 = 0;
-          __pyx_t_4 = __Pyx_PyUnicode_Join(__pyx_t_1, 6, __pyx_t_10, __pyx_t_11); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_4);
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-          __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 45, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
           __Pyx_Raise(__pyx_t_1, 0, 0, 0);
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-          __PYX_ERR(0, 51, __pyx_L1_error)
+          __PYX_ERR(0, 45, __pyx_L1_error)
 
-          /* "wrapper/core/File.pyx":50
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+          /* "wrapper/core/File.pyx":44
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:
  *                     if not translated_text:             # <<<<<<<<<<<<<<
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')
  *                     else:
  */
         }
 
-        /* "wrapper/core/File.pyx":53
+        /* "wrapper/core/File.pyx":47
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')
  *                     else:
  *                         self.text = translated_text             # <<<<<<<<<<<<<<
- * 
  *             if self.is_detect_language:
+ *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text, self.detected_language)
  */
         /*else*/ {
-          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_v_translated_text) < 0) __PYX_ERR(0, 53, __pyx_L1_error)
+          if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_v_translated_text) < 0) __PYX_ERR(0, 47, __pyx_L1_error)
         }
 
-        /* "wrapper/core/File.pyx":49
+        /* "wrapper/core/File.pyx":43
  *             if self.is_detect_language or self.translate_to:
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:             # <<<<<<<<<<<<<<
  *                     if not translated_text:
  *                         raise Exception(f'Text {self.text} detected lang {self.detected_language} not translated to {self.translate_to}')
  */
       }
 
-      /* "wrapper/core/File.pyx":47
- *             #test
- *             self.is_detect_language = False
+      /* "wrapper/core/File.pyx":41
+ *         if self.text:
+ *             self.extracted_text = self.text
  *             if self.is_detect_language or self.translate_to:             # <<<<<<<<<<<<<<
- *                 self.detected_language, translated_text = LanguageDetector.detect_lang(self.text, self.translate_to)
+ *                 self.detected_language, translated_text, self.sentences = LanguageDetector.detect_lang(self.text, self.translate_to, fix_text=self.ocr)
  *                 if self.translate_to:
  */
     }
 
-    /* "wrapper/core/File.pyx":55
+    /* "wrapper/core/File.pyx":48
+ *                     else:
  *                         self.text = translated_text
- * 
  *             if self.is_detect_language:             # <<<<<<<<<<<<<<
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text, self.detected_language)
  *             else:
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 55, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_detect_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 48, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 55, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 48, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     if (__pyx_t_2) {
 
-      /* "wrapper/core/File.pyx":56
- * 
+      /* "wrapper/core/File.pyx":49
+ *                         self.text = translated_text
  *             if self.is_detect_language:
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text, self.detected_language)             # <<<<<<<<<<<<<<
  *             else:
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text)
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 56, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_7);
-      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 56, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 49, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_7);
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 49, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_4);
       __pyx_t_8 = NULL;
       __pyx_t_6 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
-        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_7);
+      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
+        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
         if (likely(__pyx_t_8)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
           __Pyx_INCREF(__pyx_t_8);
           __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_7, function);
+          __Pyx_DECREF_SET(__pyx_t_5, function);
           __pyx_t_6 = 1;
         }
       }
       {
-        PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_t_4, __pyx_t_5};
-        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
+        PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_t_7, __pyx_t_4};
+        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
         __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 56, __pyx_L1_error)
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 49, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
       }
       if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
         PyObject* sequence = __pyx_t_1;
         Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
         if (unlikely(size != 2)) {
           if (size > 2) __Pyx_RaiseTooManyValuesError(2);
           else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-          __PYX_ERR(0, 56, __pyx_L1_error)
+          __PYX_ERR(0, 49, __pyx_L1_error)
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
         if (likely(PyTuple_CheckExact(sequence))) {
-          __pyx_t_7 = PyTuple_GET_ITEM(sequence, 0); 
-          __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
+          __pyx_t_4 = PyTuple_GET_ITEM(sequence, 1); 
         } else {
-          __pyx_t_7 = PyList_GET_ITEM(sequence, 0); 
-          __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
+          __pyx_t_4 = PyList_GET_ITEM(sequence, 1); 
         }
-        __Pyx_INCREF(__pyx_t_7);
         __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(__pyx_t_4);
         #else
-        __pyx_t_7 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 56, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 56, __pyx_L1_error)
+        __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 49, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_4 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 49, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_4);
         #endif
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       } else {
         Py_ssize_t index = -1;
-        __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4);
-        index = 0; __pyx_t_7 = __pyx_t_9(__pyx_t_4); if (unlikely(!__pyx_t_7)) goto __pyx_L13_unpacking_failed;
+        __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_7);
-        index = 1; __pyx_t_5 = __pyx_t_9(__pyx_t_4); if (unlikely(!__pyx_t_5)) goto __pyx_L13_unpacking_failed;
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_7);
+        index = 0; __pyx_t_5 = __pyx_t_9(__pyx_t_7); if (unlikely(!__pyx_t_5)) goto __pyx_L13_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_5);
-        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_4), 2) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+        index = 1; __pyx_t_4 = __pyx_t_9(__pyx_t_7); if (unlikely(!__pyx_t_4)) goto __pyx_L13_unpacking_failed;
+        __Pyx_GOTREF(__pyx_t_4);
+        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_7), 2) < 0) __PYX_ERR(0, 49, __pyx_L1_error)
         __pyx_t_9 = NULL;
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         goto __pyx_L14_unpacking_done;
         __pyx_L13_unpacking_failed:;
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         __pyx_t_9 = NULL;
         if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-        __PYX_ERR(0, 56, __pyx_L1_error)
+        __PYX_ERR(0, 49, __pyx_L1_error)
         __pyx_L14_unpacking_done:;
       }
-      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_tokens, __pyx_t_7) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_cleaned_text, __pyx_t_5) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 49, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_cleaned_text, __pyx_t_4) < 0) __PYX_ERR(0, 49, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-      /* "wrapper/core/File.pyx":55
+      /* "wrapper/core/File.pyx":48
+ *                     else:
  *                         self.text = translated_text
- * 
  *             if self.is_detect_language:             # <<<<<<<<<<<<<<
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text, self.detected_language)
  *             else:
  */
       goto __pyx_L12;
     }
 
-    /* "wrapper/core/File.pyx":58
+    /* "wrapper/core/File.pyx":51
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text, self.detected_language)
  *             else:
  *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text)             # <<<<<<<<<<<<<<
- *             # test
  * 
+ *         self.list_NER()
  */
     /*else*/ {
-      __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 58, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_7);
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 51, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_4 = NULL;
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_4);
+      __pyx_t_7 = NULL;
       __pyx_t_6 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
-        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_7);
-        if (likely(__pyx_t_4)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
-          __Pyx_INCREF(__pyx_t_4);
+      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+          __Pyx_INCREF(__pyx_t_7);
           __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_7, function);
+          __Pyx_DECREF_SET(__pyx_t_5, function);
           __pyx_t_6 = 1;
         }
       }
       {
-        PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_5};
-        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
-        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L1_error)
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_t_4};
+        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
       }
       if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
         PyObject* sequence = __pyx_t_1;
         Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
         if (unlikely(size != 2)) {
           if (size > 2) __Pyx_RaiseTooManyValuesError(2);
           else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-          __PYX_ERR(0, 58, __pyx_L1_error)
+          __PYX_ERR(0, 51, __pyx_L1_error)
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
         if (likely(PyTuple_CheckExact(sequence))) {
-          __pyx_t_7 = PyTuple_GET_ITEM(sequence, 0); 
-          __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
+          __pyx_t_4 = PyTuple_GET_ITEM(sequence, 1); 
         } else {
-          __pyx_t_7 = PyList_GET_ITEM(sequence, 0); 
-          __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
+          __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
+          __pyx_t_4 = PyList_GET_ITEM(sequence, 1); 
         }
-        __Pyx_INCREF(__pyx_t_7);
         __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(__pyx_t_4);
         #else
-        __pyx_t_7 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 58, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_7);
-        __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L1_error)
+        __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 51, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_4 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_4);
         #endif
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       } else {
         Py_ssize_t index = -1;
-        __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 58, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_4);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_4);
-        index = 0; __pyx_t_7 = __pyx_t_9(__pyx_t_4); if (unlikely(!__pyx_t_7)) goto __pyx_L15_unpacking_failed;
+        __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 51, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_7);
-        index = 1; __pyx_t_5 = __pyx_t_9(__pyx_t_4); if (unlikely(!__pyx_t_5)) goto __pyx_L15_unpacking_failed;
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_7);
+        index = 0; __pyx_t_5 = __pyx_t_9(__pyx_t_7); if (unlikely(!__pyx_t_5)) goto __pyx_L15_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_5);
-        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_4), 2) < 0) __PYX_ERR(0, 58, __pyx_L1_error)
+        index = 1; __pyx_t_4 = __pyx_t_9(__pyx_t_7); if (unlikely(!__pyx_t_4)) goto __pyx_L15_unpacking_failed;
+        __Pyx_GOTREF(__pyx_t_4);
+        if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_7), 2) < 0) __PYX_ERR(0, 51, __pyx_L1_error)
         __pyx_t_9 = NULL;
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         goto __pyx_L16_unpacking_done;
         __pyx_L15_unpacking_failed:;
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
         __pyx_t_9 = NULL;
         if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-        __PYX_ERR(0, 58, __pyx_L1_error)
+        __PYX_ERR(0, 51, __pyx_L1_error)
         __pyx_L16_unpacking_done:;
       }
-      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_tokens, __pyx_t_7) < 0) __PYX_ERR(0, 58, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_cleaned_text, __pyx_t_5) < 0) __PYX_ERR(0, 58, __pyx_L1_error)
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 51, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_cleaned_text, __pyx_t_4) < 0) __PYX_ERR(0, 51, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
     }
     __pyx_L12:;
 
-    /* "wrapper/core/File.pyx":43
+    /* "wrapper/core/File.pyx":39
  *         if not self.text:
  *             self.text = TextExtractor.extract_text_from_any(path)
  *         if self.text:             # <<<<<<<<<<<<<<
  *             self.extracted_text = self.text
- *             #test
+ *             if self.is_detect_language or self.translate_to:
  */
   }
 
-  /* "wrapper/core/File.pyx":62
+  /* "wrapper/core/File.pyx":53
+ *                 self.tokens, self.cleaned_text = PreProcessing.preprocess_text_for_stemmetization(self.text)
  * 
- *             # self.text_features = extract_text_features(self.tokens, self.base_path)
  *         self.list_NER()             # <<<<<<<<<<<<<<
  *         # self.summarize()
  * 
  */
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_list_NER); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 62, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_7 = NULL;
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_list_NER); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = NULL;
   __pyx_t_6 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
-    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
-    if (likely(__pyx_t_7)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-      __Pyx_INCREF(__pyx_t_7);
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
+    if (likely(__pyx_t_5)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+      __Pyx_INCREF(__pyx_t_5);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_5, function);
+      __Pyx_DECREF_SET(__pyx_t_4, function);
       __pyx_t_6 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[1] = {__pyx_t_7, };
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 0+__pyx_t_6);
-    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 62, __pyx_L1_error)
+    PyObject *__pyx_callargs[1] = {__pyx_t_5, };
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_6, 0+__pyx_t_6);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/File.pyx":39
+  /* "wrapper/core/File.pyx":35
  *         self.base_path = base_path
  * 
  *     def create_features_base(self, path):             # <<<<<<<<<<<<<<
  *         self.path = path
  *         if not self.text:
  */
 
@@ -3547,31 +3551,70 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_translated_text);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/File.pyx":65
+/* "wrapper/core/File.pyx":56
  *         # self.summarize()
  * 
- *     def find_token(self, query_text, lng='pt'):             # <<<<<<<<<<<<<<
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):             # <<<<<<<<<<<<<<
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  */
 
+static PyObject *__pyx_pf_7wrapper_4core_4File___defaults__(CYTHON_UNUSED PyObject *__pyx_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__defaults__", 0);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_lng);
+  __Pyx_GIVEREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_lng);
+  PyTuple_SET_ITEM(__pyx_t_1, 0, __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_lng);
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, Py_None);
+  __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("wrapper.core.File.__defaults__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_4File_4File_7find_token(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_4File_4File_6find_token, "File.find_token(self, query_text, lng=u'pt')");
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_4File_4File_6find_token, "File.find_token(self, query_text, lng: DocLanguage = DocLanguage.PORTUGUESE)");
 static PyMethodDef __pyx_mdef_7wrapper_4core_4File_4File_7find_token = {"find_token", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_4File_4File_7find_token, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_4File_4File_6find_token};
 static PyObject *__pyx_pw_7wrapper_4core_4File_4File_7find_token(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -3588,15 +3631,16 @@
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("find_token (wrapper)", 0);
   {
     PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_query_text,&__pyx_n_s_lng,0};
     PyObject* values[3] = {0,0,0};
-    values[2] = ((PyObject *)((PyObject*)__pyx_n_u_pt));
+    __pyx_defaults *__pyx_dynamic_args = __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self);
+    values[2] = __pyx_dynamic_args->__pyx_arg_lng;
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -3605,34 +3649,34 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_query_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("find_token", 0, 2, 3, 1); __PYX_ERR(0, 65, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("find_token", 0, 2, 3, 1); __PYX_ERR(0, 56, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_lng);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 56, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "find_token") < 0)) __PYX_ERR(0, 65, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "find_token") < 0)) __PYX_ERR(0, 56, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
@@ -3642,15 +3686,15 @@
     }
     __pyx_v_self = values[0];
     __pyx_v_query_text = values[1];
     __pyx_v_lng = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("find_token", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 65, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("find_token", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 56, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.File.File.find_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_4File_4File_6find_token(__pyx_self, __pyx_v_self, __pyx_v_query_text, __pyx_v_lng);
 
@@ -3676,24 +3720,24 @@
   PyObject *(*__pyx_t_8)(PyObject *);
   int __pyx_t_9;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("find_token", 0);
 
-  /* "wrapper/core/File.pyx":66
+  /* "wrapper/core/File.pyx":57
  * 
- *     def find_token(self, query_text, lng='pt'):
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)             # <<<<<<<<<<<<<<
  *         found = False
  *         for t in query_tokens:
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_preprocess_text_for_stemmetizati); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 57, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -3704,200 +3748,200 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[3] = {__pyx_t_2, __pyx_v_query_text, __pyx_v_lng};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
     PyObject* sequence = __pyx_t_1;
     Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
     if (unlikely(size != 2)) {
       if (size > 2) __Pyx_RaiseTooManyValuesError(2);
       else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-      __PYX_ERR(0, 66, __pyx_L1_error)
+      __PYX_ERR(0, 57, __pyx_L1_error)
     }
     #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
     if (likely(PyTuple_CheckExact(sequence))) {
       __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
       __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
     } else {
       __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
       __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
     }
     __Pyx_INCREF(__pyx_t_3);
     __Pyx_INCREF(__pyx_t_2);
     #else
-    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 57, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
     #endif
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   } else {
     Py_ssize_t index = -1;
-    __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 57, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5);
     index = 0; __pyx_t_3 = __pyx_t_6(__pyx_t_5); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
     __Pyx_GOTREF(__pyx_t_3);
     index = 1; __pyx_t_2 = __pyx_t_6(__pyx_t_5); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
     __Pyx_GOTREF(__pyx_t_2);
-    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 2) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
+    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 2) < 0) __PYX_ERR(0, 57, __pyx_L1_error)
     __pyx_t_6 = NULL;
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     goto __pyx_L4_unpacking_done;
     __pyx_L3_unpacking_failed:;
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __pyx_t_6 = NULL;
     if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-    __PYX_ERR(0, 66, __pyx_L1_error)
+    __PYX_ERR(0, 57, __pyx_L1_error)
     __pyx_L4_unpacking_done:;
   }
   __pyx_v_query_tokens = __pyx_t_3;
   __pyx_t_3 = 0;
   __pyx_v_cleanedtext = __pyx_t_2;
   __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":67
- *     def find_token(self, query_text, lng='pt'):
+  /* "wrapper/core/File.pyx":58
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False             # <<<<<<<<<<<<<<
  *         for t in query_tokens:
  *             if t in self.tokens:
  */
   __pyx_v_found = 0;
 
-  /* "wrapper/core/File.pyx":68
+  /* "wrapper/core/File.pyx":59
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  *         for t in query_tokens:             # <<<<<<<<<<<<<<
  *             if t in self.tokens:
  *                 found = True
  */
   if (likely(PyList_CheckExact(__pyx_v_query_tokens)) || PyTuple_CheckExact(__pyx_v_query_tokens)) {
     __pyx_t_1 = __pyx_v_query_tokens; __Pyx_INCREF(__pyx_t_1); __pyx_t_7 = 0;
     __pyx_t_8 = NULL;
   } else {
-    __pyx_t_7 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_query_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 68, __pyx_L1_error)
+    __pyx_t_7 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_query_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 59, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 68, __pyx_L1_error)
+    __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 59, __pyx_L1_error)
   }
   for (;;) {
     if (likely(!__pyx_t_8)) {
       if (likely(PyList_CheckExact(__pyx_t_1))) {
         if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_1)) break;
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 68, __pyx_L1_error)
+        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
         #else
-        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 68, __pyx_L1_error)
+        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         #endif
       } else {
         if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 68, __pyx_L1_error)
+        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
         #else
-        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 68, __pyx_L1_error)
+        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         #endif
       }
     } else {
       __pyx_t_2 = __pyx_t_8(__pyx_t_1);
       if (unlikely(!__pyx_t_2)) {
         PyObject* exc_type = PyErr_Occurred();
         if (exc_type) {
           if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 68, __pyx_L1_error)
+          else __PYX_ERR(0, 59, __pyx_L1_error)
         }
         break;
       }
       __Pyx_GOTREF(__pyx_t_2);
     }
     __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_2);
     __pyx_t_2 = 0;
 
-    /* "wrapper/core/File.pyx":69
+    /* "wrapper/core/File.pyx":60
  *         found = False
  *         for t in query_tokens:
  *             if t in self.tokens:             # <<<<<<<<<<<<<<
  *                 found = True
  *                 break
  */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_tokens); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 69, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_tokens); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_9 = (__Pyx_PySequence_ContainsTF(__pyx_v_t, __pyx_t_2, Py_EQ)); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 69, __pyx_L1_error)
+    __pyx_t_9 = (__Pyx_PySequence_ContainsTF(__pyx_v_t, __pyx_t_2, Py_EQ)); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 60, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     if (__pyx_t_9) {
 
-      /* "wrapper/core/File.pyx":70
+      /* "wrapper/core/File.pyx":61
  *         for t in query_tokens:
  *             if t in self.tokens:
  *                 found = True             # <<<<<<<<<<<<<<
  *                 break
  *         return found
  */
       __pyx_v_found = 1;
 
-      /* "wrapper/core/File.pyx":71
+      /* "wrapper/core/File.pyx":62
  *             if t in self.tokens:
  *                 found = True
  *                 break             # <<<<<<<<<<<<<<
  *         return found
  * 
  */
       goto __pyx_L6_break;
 
-      /* "wrapper/core/File.pyx":69
+      /* "wrapper/core/File.pyx":60
  *         found = False
  *         for t in query_tokens:
  *             if t in self.tokens:             # <<<<<<<<<<<<<<
  *                 found = True
  *                 break
  */
     }
 
-    /* "wrapper/core/File.pyx":68
+    /* "wrapper/core/File.pyx":59
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  *         for t in query_tokens:             # <<<<<<<<<<<<<<
  *             if t in self.tokens:
  *                 found = True
  */
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   goto __pyx_L8_for_end;
   __pyx_L6_break:;
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   goto __pyx_L8_for_end;
   __pyx_L8_for_end:;
 
-  /* "wrapper/core/File.pyx":72
+  /* "wrapper/core/File.pyx":63
  *                 found = True
  *                 break
  *         return found             # <<<<<<<<<<<<<<
  * 
  *     def list_NER(self):
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_found); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 72, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_found); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 63, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/core/File.pyx":65
+  /* "wrapper/core/File.pyx":56
  *         # self.summarize()
  * 
- *     def find_token(self, query_text, lng='pt'):             # <<<<<<<<<<<<<<
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):             # <<<<<<<<<<<<<<
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
@@ -3911,15 +3955,15 @@
   __Pyx_XDECREF(__pyx_v_cleanedtext);
   __Pyx_XDECREF(__pyx_v_t);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/File.pyx":74
+/* "wrapper/core/File.pyx":65
  *         return found
  * 
  *     def list_NER(self):             # <<<<<<<<<<<<<<
  *         self.named_entities = None
  *         if self.text:
  */
 
@@ -3962,31 +4006,31 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 74, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "list_NER") < 0)) __PYX_ERR(0, 74, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "list_NER") < 0)) __PYX_ERR(0, 65, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
     __pyx_v_self = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("list_NER", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 74, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("list_NER", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 65, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.File.File.list_NER", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_4File_4File_8list_NER(__pyx_self, __pyx_v_self);
 
@@ -4005,46 +4049,46 @@
   PyObject *__pyx_t_5 = NULL;
   int __pyx_t_6;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("list_NER", 0);
 
-  /* "wrapper/core/File.pyx":75
+  /* "wrapper/core/File.pyx":66
  * 
  *     def list_NER(self):
  *         self.named_entities = None             # <<<<<<<<<<<<<<
  *         if self.text:
- *             self.named_entities= extract_named_entities(self.text)
+ *             self.named_entities=extract_named_entities(self.text)
  */
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_named_entities, Py_None) < 0) __PYX_ERR(0, 75, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_named_entities, Py_None) < 0) __PYX_ERR(0, 66, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":76
+  /* "wrapper/core/File.pyx":67
  *     def list_NER(self):
  *         self.named_entities = None
  *         if self.text:             # <<<<<<<<<<<<<<
- *             self.named_entities= extract_named_entities(self.text)
+ *             self.named_entities=extract_named_entities(self.text)
  *         return self.named_entities
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 76, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 76, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 67, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_2) {
 
-    /* "wrapper/core/File.pyx":77
+    /* "wrapper/core/File.pyx":68
  *         self.named_entities = None
  *         if self.text:
- *             self.named_entities= extract_named_entities(self.text)             # <<<<<<<<<<<<<<
+ *             self.named_entities=extract_named_entities(self.text)             # <<<<<<<<<<<<<<
  *         return self.named_entities
  * 
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_extract_named_entities); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_extract_named_entities); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 68, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 77, __pyx_L1_error)
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 68, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_4);
     __pyx_t_5 = NULL;
     __pyx_t_6 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
       __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
       if (likely(__pyx_t_5)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -4055,45 +4099,45 @@
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_4};
       __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
       __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 77, __pyx_L1_error)
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 68, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_named_entities, __pyx_t_1) < 0) __PYX_ERR(0, 77, __pyx_L1_error)
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_named_entities, __pyx_t_1) < 0) __PYX_ERR(0, 68, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/core/File.pyx":76
+    /* "wrapper/core/File.pyx":67
  *     def list_NER(self):
  *         self.named_entities = None
  *         if self.text:             # <<<<<<<<<<<<<<
- *             self.named_entities= extract_named_entities(self.text)
+ *             self.named_entities=extract_named_entities(self.text)
  *         return self.named_entities
  */
   }
 
-  /* "wrapper/core/File.pyx":78
+  /* "wrapper/core/File.pyx":69
  *         if self.text:
- *             self.named_entities= extract_named_entities(self.text)
+ *             self.named_entities=extract_named_entities(self.text)
  *         return self.named_entities             # <<<<<<<<<<<<<<
  * 
  *     # def summarize(self):
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_named_entities); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 78, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_named_entities); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 69, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/core/File.pyx":74
+  /* "wrapper/core/File.pyx":65
  *         return found
  * 
  *     def list_NER(self):             # <<<<<<<<<<<<<<
  *         self.named_entities = None
  *         if self.text:
  */
 
@@ -4124,71 +4168,72 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
     {&__pyx_n_s_File___init, __pyx_k_File___init, sizeof(__pyx_k_File___init), 0, 0, 1, 1},
     {&__pyx_n_s_File_create_features_base, __pyx_k_File_create_features_base, sizeof(__pyx_k_File_create_features_base), 0, 0, 1, 1},
     {&__pyx_n_s_File_find_token, __pyx_k_File_find_token, sizeof(__pyx_k_File_find_token), 0, 0, 1, 1},
     {&__pyx_n_s_File_list_NER, __pyx_k_File_list_NER, sizeof(__pyx_k_File_list_NER), 0, 0, 1, 1},
     {&__pyx_n_s_File_set_base_path, __pyx_k_File_set_base_path, sizeof(__pyx_k_File_set_base_path), 0, 0, 1, 1},
     {&__pyx_n_s_LanguageDetector, __pyx_k_LanguageDetector, sizeof(__pyx_k_LanguageDetector), 0, 0, 1, 1},
+    {&__pyx_n_s_PORTUGUESE, __pyx_k_PORTUGUESE, sizeof(__pyx_k_PORTUGUESE), 0, 0, 1, 1},
     {&__pyx_n_s_PreProcessing, __pyx_k_PreProcessing, sizeof(__pyx_k_PreProcessing), 0, 0, 1, 1},
     {&__pyx_kp_u_Text, __pyx_k_Text, sizeof(__pyx_k_Text), 0, 1, 0, 0},
     {&__pyx_n_s_TextExtractor, __pyx_k_TextExtractor, sizeof(__pyx_k_TextExtractor), 0, 0, 1, 1},
-    {&__pyx_n_s__14, __pyx_k__14, sizeof(__pyx_k__14), 0, 0, 1, 1},
+    {&__pyx_n_s__13, __pyx_k__13, sizeof(__pyx_k__13), 0, 0, 1, 1},
     {&__pyx_n_s_annotations, __pyx_k_annotations, sizeof(__pyx_k_annotations), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_base_path, __pyx_k_base_path, sizeof(__pyx_k_base_path), 0, 0, 1, 1},
-    {&__pyx_n_s_calc_cosine_similarity, __pyx_k_calc_cosine_similarity, sizeof(__pyx_k_calc_cosine_similarity), 0, 0, 1, 1},
     {&__pyx_n_s_cleaned_text, __pyx_k_cleaned_text, sizeof(__pyx_k_cleaned_text), 0, 0, 1, 1},
     {&__pyx_n_s_cleanedtext, __pyx_k_cleanedtext, sizeof(__pyx_k_cleanedtext), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_create_features_base, __pyx_k_create_features_base, sizeof(__pyx_k_create_features_base), 0, 0, 1, 1},
     {&__pyx_n_s_detect_lang, __pyx_k_detect_lang, sizeof(__pyx_k_detect_lang), 0, 0, 1, 1},
     {&__pyx_kp_u_detected_lang, __pyx_k_detected_lang, sizeof(__pyx_k_detected_lang), 0, 1, 0, 0},
     {&__pyx_n_s_detected_language, __pyx_k_detected_language, sizeof(__pyx_k_detected_language), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
     {&__pyx_n_s_extract_named_entities, __pyx_k_extract_named_entities, sizeof(__pyx_k_extract_named_entities), 0, 0, 1, 1},
-    {&__pyx_n_s_extract_text_features, __pyx_k_extract_text_features, sizeof(__pyx_k_extract_text_features), 0, 0, 1, 1},
     {&__pyx_n_s_extract_text_from_any, __pyx_k_extract_text_from_any, sizeof(__pyx_k_extract_text_from_any), 0, 0, 1, 1},
     {&__pyx_n_s_extracted_text, __pyx_k_extracted_text, sizeof(__pyx_k_extracted_text), 0, 0, 1, 1},
     {&__pyx_n_s_find_token, __pyx_k_find_token, sizeof(__pyx_k_find_token), 0, 0, 1, 1},
+    {&__pyx_n_s_fix_text, __pyx_k_fix_text, sizeof(__pyx_k_fix_text), 0, 0, 1, 1},
     {&__pyx_n_s_found, __pyx_k_found, sizeof(__pyx_k_found), 0, 0, 1, 1},
     {&__pyx_n_s_id, __pyx_k_id, sizeof(__pyx_k_id), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
     {&__pyx_n_s_infra, __pyx_k_infra, sizeof(__pyx_k_infra), 0, 0, 1, 1},
-    {&__pyx_n_s_infra_DocumentSimilarityCalculat, __pyx_k_infra_DocumentSimilarityCalculat, sizeof(__pyx_k_infra_DocumentSimilarityCalculat), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_infra_NERExtractor, __pyx_k_infra_NERExtractor, sizeof(__pyx_k_infra_NERExtractor), 0, 0, 1, 1},
-    {&__pyx_n_s_infra_TextFeatureExtractor, __pyx_k_infra_TextFeatureExtractor, sizeof(__pyx_k_infra_TextFeatureExtractor), 0, 0, 1, 1},
     {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
     {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_detect_language, __pyx_k_is_detect_language, sizeof(__pyx_k_is_detect_language), 0, 0, 1, 1},
     {&__pyx_n_s_list_NER, __pyx_k_list_NER, sizeof(__pyx_k_list_NER), 0, 0, 1, 1},
     {&__pyx_n_s_lng, __pyx_k_lng, sizeof(__pyx_k_lng), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
     {&__pyx_n_s_named_entities, __pyx_k_named_entities, sizeof(__pyx_k_named_entities), 0, 0, 1, 1},
     {&__pyx_kp_u_not_translated_to, __pyx_k_not_translated_to, sizeof(__pyx_k_not_translated_to), 0, 1, 0, 0},
+    {&__pyx_n_s_ocr, __pyx_k_ocr, sizeof(__pyx_k_ocr), 0, 0, 1, 1},
     {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
     {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
     {&__pyx_n_s_preprocess_text_for_stemmetizati, __pyx_k_preprocess_text_for_stemmetizati, sizeof(__pyx_k_preprocess_text_for_stemmetizati), 0, 0, 1, 1},
     {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
-    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
     {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
     {&__pyx_n_s_query_text, __pyx_k_query_text, sizeof(__pyx_k_query_text), 0, 0, 1, 1},
     {&__pyx_n_s_query_tokens, __pyx_k_query_tokens, sizeof(__pyx_k_query_tokens), 0, 0, 1, 1},
     {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
+    {&__pyx_n_s_sentences, __pyx_k_sentences, sizeof(__pyx_k_sentences), 0, 0, 1, 1},
     {&__pyx_n_s_set_base_path, __pyx_k_set_base_path, sizeof(__pyx_k_set_base_path), 0, 0, 1, 1},
     {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
     {&__pyx_kp_s_src_wrapper_core_File_pyx, __pyx_k_src_wrapper_core_File_pyx, sizeof(__pyx_k_src_wrapper_core_File_pyx), 0, 0, 1, 0},
     {&__pyx_n_s_str, __pyx_k_str, sizeof(__pyx_k_str), 0, 0, 1, 1},
     {&__pyx_n_s_summary, __pyx_k_summary, sizeof(__pyx_k_summary), 0, 0, 1, 1},
     {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_t, __pyx_k_t, sizeof(__pyx_k_t), 0, 0, 1, 1},
@@ -4201,90 +4246,87 @@
     {&__pyx_n_s_wrapper_core_File, __pyx_k_wrapper_core_File, sizeof(__pyx_k_wrapper_core_File), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 34, __pyx_L1_error)
+  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 30, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/core/File.pyx":30
- *     is_detect_language=False
+  /* "wrapper/core/File.pyx":26
+ *     ocr = False
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  *         self.translate_to = translate_to
  */
-  __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
-  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_init, 30, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 30, __pyx_L1_error)
-  __pyx_tuple__4 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 30, __pyx_L1_error)
+  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_init, 26, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_tuple__4 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__4);
   __Pyx_GIVEREF(__pyx_tuple__4);
 
-  /* "wrapper/core/File.pyx":36
+  /* "wrapper/core/File.pyx":32
  *         print(self.base_path)
  * 
  *     def set_base_path(self, base_path):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  * 
  */
-  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_base_path); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_base_path); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
-  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_set_base_path, 36, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_set_base_path, 32, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 32, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":39
+  /* "wrapper/core/File.pyx":35
  *         self.base_path = base_path
  * 
  *     def create_features_base(self, path):             # <<<<<<<<<<<<<<
  *         self.path = path
  *         if not self.text:
  */
-  __pyx_tuple__7 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_path, __pyx_n_s_translated_text); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_tuple__7 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_path, __pyx_n_s_translated_text); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 35, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__7);
   __Pyx_GIVEREF(__pyx_tuple__7);
-  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_create_features_base, 39, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 39, __pyx_L1_error)
+  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_create_features_base, 35, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 35, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":65
+  /* "wrapper/core/File.pyx":56
  *         # self.summarize()
  * 
- *     def find_token(self, query_text, lng='pt'):             # <<<<<<<<<<<<<<
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):             # <<<<<<<<<<<<<<
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  */
-  __pyx_tuple__9 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_query_text, __pyx_n_s_lng, __pyx_n_s_query_tokens, __pyx_n_s_cleanedtext, __pyx_n_s_found, __pyx_n_s_t); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_tuple__9 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_query_text, __pyx_n_s_lng, __pyx_n_s_query_tokens, __pyx_n_s_cleanedtext, __pyx_n_s_found, __pyx_n_s_t); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 56, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__9);
   __Pyx_GIVEREF(__pyx_tuple__9);
-  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_find_token, 65, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __pyx_tuple__11 = PyTuple_Pack(1, ((PyObject*)__pyx_n_u_pt)); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__11);
-  __Pyx_GIVEREF(__pyx_tuple__11);
+  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_find_token, 56, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 56, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":74
+  /* "wrapper/core/File.pyx":65
  *         return found
  * 
  *     def list_NER(self):             # <<<<<<<<<<<<<<
  *         self.named_entities = None
  *         if self.text:
  */
-  __pyx_tuple__12 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 74, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__12);
-  __Pyx_GIVEREF(__pyx_tuple__12);
-  __pyx_codeobj__13 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__12, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_list_NER, 74, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__13)) __PYX_ERR(0, 74, __pyx_L1_error)
+  __pyx_tuple__11 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__11);
+  __Pyx_GIVEREF(__pyx_tuple__11);
+  __pyx_codeobj__12 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_File_pyx, __pyx_n_s_list_NER, 65, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__12)) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -4526,14 +4568,17 @@
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  PyObject *__pyx_t_6 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
@@ -4644,370 +4689,394 @@
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
   /* "wrapper/core/File.pyx":1
- * from ..infra.TextFeatureExtractor import extract_text_features             # <<<<<<<<<<<<<<
- * from ..infra.DocumentSimilarityCalculator import calc_cosine_similarity
- * from ..infra.NERExtractor import extract_named_entities
- */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_extract_text_features);
-  __Pyx_GIVEREF(__pyx_n_s_extract_text_features);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_extract_text_features);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_TextFeatureExtractor, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_extract_text_features); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_features, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/core/File.pyx":2
- * from ..infra.TextFeatureExtractor import extract_text_features
- * from ..infra.DocumentSimilarityCalculator import calc_cosine_similarity             # <<<<<<<<<<<<<<
- * from ..infra.NERExtractor import extract_named_entities
- * from ..infra import TextExtractor
- */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_calc_cosine_similarity);
-  __Pyx_GIVEREF(__pyx_n_s_calc_cosine_similarity);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_calc_cosine_similarity);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_DocumentSimilarityCalculat, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_calc_cosine_similarity); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_calc_cosine_similarity, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-  /* "wrapper/core/File.pyx":3
- * from ..infra.TextFeatureExtractor import extract_text_features
- * from ..infra.DocumentSimilarityCalculator import calc_cosine_similarity
  * from ..infra.NERExtractor import extract_named_entities             # <<<<<<<<<<<<<<
  * from ..infra import TextExtractor
  * from ..infra import PreProcessing
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_extract_named_entities);
   __Pyx_GIVEREF(__pyx_n_s_extract_named_entities);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_extract_named_entities);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_NERExtractor, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_NERExtractor, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_extract_named_entities); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_extract_named_entities); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_named_entities, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_named_entities, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/core/File.pyx":4
- * from ..infra.DocumentSimilarityCalculator import calc_cosine_similarity
+  /* "wrapper/core/File.pyx":2
  * from ..infra.NERExtractor import extract_named_entities
  * from ..infra import TextExtractor             # <<<<<<<<<<<<<<
  * from ..infra import PreProcessing
  * from ..infra import LanguageDetector
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_TextExtractor);
   __Pyx_GIVEREF(__pyx_n_s_TextExtractor);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_TextExtractor);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_TextExtractor, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_TextExtractor, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":5
+  /* "wrapper/core/File.pyx":3
  * from ..infra.NERExtractor import extract_named_entities
  * from ..infra import TextExtractor
  * from ..infra import PreProcessing             # <<<<<<<<<<<<<<
  * from ..infra import LanguageDetector
- * # from infra.wrapper.infra import AbsctractGenerator
+ * from ..infra.DocLanguage import DocLanguage
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_PreProcessing);
   __Pyx_GIVEREF(__pyx_n_s_PreProcessing);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PreProcessing);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_PreProcessing, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_PreProcessing, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/core/File.pyx":6
+  /* "wrapper/core/File.pyx":4
  * from ..infra import TextExtractor
  * from ..infra import PreProcessing
  * from ..infra import LanguageDetector             # <<<<<<<<<<<<<<
+ * from ..infra.DocLanguage import DocLanguage
  * # from infra.wrapper.infra import AbsctractGenerator
- * 
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_LanguageDetector);
   __Pyx_GIVEREF(__pyx_n_s_LanguageDetector);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_LanguageDetector);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_LanguageDetector); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LanguageDetector, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LanguageDetector, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":9
+  /* "wrapper/core/File.pyx":5
+ * from ..infra import PreProcessing
+ * from ..infra import LanguageDetector
+ * from ..infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
+ * # from infra.wrapper.infra import AbsctractGenerator
+ * 
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_2) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/core/File.pyx":8
  * # from infra.wrapper.infra import AbsctractGenerator
  * 
  * class File():             # <<<<<<<<<<<<<<
  * 
  *     id:str = None
  */
-  __pyx_t_2 = __Pyx_Py3MetaclassPrepare((PyObject *) NULL, __pyx_empty_tuple, __pyx_n_s_File, __pyx_n_s_File, (PyObject *) NULL, __pyx_n_s_wrapper_core_File, (PyObject *) NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_Py3MetaclassPrepare((PyObject *) NULL, __pyx_empty_tuple, __pyx_n_s_File, __pyx_n_s_File, (PyObject *) NULL, __pyx_n_s_wrapper_core_File, (PyObject *) NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_id, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_text, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_extracted_text, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_text_features, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_base_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_annotations, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_id, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_text, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_extracted_text, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_text_features, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_base_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_path, __pyx_n_s_str) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_detected_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_annotations, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":11
+  /* "wrapper/core/File.pyx":10
  * class File():
  * 
  *     id:str = None             # <<<<<<<<<<<<<<
  *     text:str = None
  *     extracted_text:str = None
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_id, Py_None) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_id, Py_None) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":12
+  /* "wrapper/core/File.pyx":11
  * 
  *     id:str = None
  *     text:str = None             # <<<<<<<<<<<<<<
  *     extracted_text:str = None
- *     # preprocessed_text
+ *     tokens = []
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_text, Py_None) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_text, Py_None) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":13
+  /* "wrapper/core/File.pyx":12
  *     id:str = None
  *     text:str = None
  *     extracted_text:str = None             # <<<<<<<<<<<<<<
- *     # preprocessed_text
  *     tokens = []
+ *     sentences=[]
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_extracted_text, Py_None) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_extracted_text, Py_None) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":15
+  /* "wrapper/core/File.pyx":13
+ *     text:str = None
  *     extracted_text:str = None
- *     # preprocessed_text
  *     tokens = []             # <<<<<<<<<<<<<<
+ *     sentences=[]
+ *     cleaned_text = None
+ */
+  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_tokens, __pyx_t_2) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/core/File.pyx":14
+ *     extracted_text:str = None
+ *     tokens = []
+ *     sentences=[]             # <<<<<<<<<<<<<<
  *     cleaned_text = None
  *     text_features:str = None
  */
-  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_tokens, __pyx_t_3) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_sentences, __pyx_t_2) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":16
- *     # preprocessed_text
+  /* "wrapper/core/File.pyx":15
  *     tokens = []
+ *     sentences=[]
  *     cleaned_text = None             # <<<<<<<<<<<<<<
  *     text_features:str = None
  *     base_path:str = None
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_cleaned_text, Py_None) < 0) __PYX_ERR(0, 16, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_cleaned_text, Py_None) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":17
- *     tokens = []
+  /* "wrapper/core/File.pyx":16
+ *     sentences=[]
  *     cleaned_text = None
  *     text_features:str = None             # <<<<<<<<<<<<<<
  *     base_path:str = None
  *     path:str = None
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_text_features, Py_None) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_text_features, Py_None) < 0) __PYX_ERR(0, 16, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":18
+  /* "wrapper/core/File.pyx":17
  *     cleaned_text = None
  *     text_features:str = None
  *     base_path:str = None             # <<<<<<<<<<<<<<
  *     path:str = None
  *     named_entities = []
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_base_path, Py_None) < 0) __PYX_ERR(0, 18, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_base_path, Py_None) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":19
+  /* "wrapper/core/File.pyx":18
  *     text_features:str = None
  *     base_path:str = None
  *     path:str = None             # <<<<<<<<<<<<<<
  *     named_entities = []
  *     summary = ()
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_path, Py_None) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_path, Py_None) < 0) __PYX_ERR(0, 18, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":20
+  /* "wrapper/core/File.pyx":19
  *     base_path:str = None
  *     path:str = None
  *     named_entities = []             # <<<<<<<<<<<<<<
  *     summary = ()
- *     detected_language = None
+ *     detected_language:DocLanguage = None
  */
-  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_named_entities, __pyx_t_3) < 0) __PYX_ERR(0, 20, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_named_entities, __pyx_t_2) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":21
+  /* "wrapper/core/File.pyx":20
  *     path:str = None
  *     named_entities = []
  *     summary = ()             # <<<<<<<<<<<<<<
- *     detected_language = None
- *     # if setted, will translate the text
+ *     detected_language:DocLanguage = None
+ *     translate_to:DocLanguage = None
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_summary, __pyx_empty_tuple) < 0) __PYX_ERR(0, 21, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_summary, __pyx_empty_tuple) < 0) __PYX_ERR(0, 20, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":22
+  /* "wrapper/core/File.pyx":21
  *     named_entities = []
  *     summary = ()
- *     detected_language = None             # <<<<<<<<<<<<<<
- *     # if setted, will translate the text
- *     translate_to = None
+ *     detected_language:DocLanguage = None             # <<<<<<<<<<<<<<
+ *     translate_to:DocLanguage = None
+ *     is_detect_language=False
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_detected_language, Py_None) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_detected_language, Py_None) < 0) __PYX_ERR(0, 21, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":24
- *     detected_language = None
- *     # if setted, will translate the text
- *     translate_to = None             # <<<<<<<<<<<<<<
- *     #if false don't detect the language and don't transform the text in tokens based
- *     # to detected language or translate_to option
+  /* "wrapper/core/File.pyx":22
+ *     summary = ()
+ *     detected_language:DocLanguage = None
+ *     translate_to:DocLanguage = None             # <<<<<<<<<<<<<<
+ *     is_detect_language=False
+ *     ocr = False
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_translate_to, Py_None) < 0) __PYX_ERR(0, 24, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_translate_to, Py_None) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":28
- *     # to detected language or translate_to option
- *     # if true detect the language
+  /* "wrapper/core/File.pyx":23
+ *     detected_language:DocLanguage = None
+ *     translate_to:DocLanguage = None
  *     is_detect_language=False             # <<<<<<<<<<<<<<
+ *     ocr = False
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
  */
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_is_detect_language, Py_False) < 0) __PYX_ERR(0, 28, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_is_detect_language, Py_False) < 0) __PYX_ERR(0, 23, __pyx_L1_error)
 
-  /* "wrapper/core/File.pyx":30
+  /* "wrapper/core/File.pyx":24
+ *     translate_to:DocLanguage = None
  *     is_detect_language=False
+ *     ocr = False             # <<<<<<<<<<<<<<
+ * 
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_ocr, Py_False) < 0) __PYX_ERR(0, 24, __pyx_L1_error)
+
+  /* "wrapper/core/File.pyx":26
+ *     ocr = False
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  *         self.translate_to = translate_to
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_1__init__, 0, __pyx_n_s_File___init, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 30, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__4);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_init, __pyx_t_3) < 0) __PYX_ERR(0, 30, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_1__init__, 0, __pyx_n_s_File___init, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__4);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_4, __pyx_t_2);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_init, __pyx_t_4) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/core/File.pyx":36
+  /* "wrapper/core/File.pyx":32
  *         print(self.base_path)
  * 
  *     def set_base_path(self, base_path):             # <<<<<<<<<<<<<<
  *         self.base_path = base_path
  * 
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_3set_base_path, 0, __pyx_n_s_File_set_base_path, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_set_base_path, __pyx_t_3) < 0) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_3set_base_path, 0, __pyx_n_s_File_set_base_path, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_set_base_path, __pyx_t_4) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/core/File.pyx":39
+  /* "wrapper/core/File.pyx":35
  *         self.base_path = base_path
  * 
  *     def create_features_base(self, path):             # <<<<<<<<<<<<<<
  *         self.path = path
  *         if not self.text:
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_5create_features_base, 0, __pyx_n_s_File_create_features_base, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 39, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_create_features_base, __pyx_t_3) < 0) __PYX_ERR(0, 39, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_5create_features_base, 0, __pyx_n_s_File_create_features_base, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 35, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_create_features_base, __pyx_t_4) < 0) __PYX_ERR(0, 35, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/core/File.pyx":65
+  /* "wrapper/core/File.pyx":56
  *         # self.summarize()
  * 
- *     def find_token(self, query_text, lng='pt'):             # <<<<<<<<<<<<<<
+ *     def find_token(self, query_text, lng:DocLanguage = DocLanguage.PORTUGUESE):             # <<<<<<<<<<<<<<
  *         query_tokens, cleanedtext = PreProcessing.preprocess_text_for_stemmetization(query_text, lng)
  *         found = False
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_7find_token, 0, __pyx_n_s_File_find_token, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__11);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_find_token, __pyx_t_3) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_lng, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_7find_token, 0, __pyx_n_s_File_find_token, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (!__Pyx_CyFunction_InitDefaults(__pyx_t_2, sizeof(__pyx_defaults), 1)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_PORTUGUESE); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_t_2)->__pyx_arg_lng = __pyx_t_6;
+  __Pyx_GIVEREF(__pyx_t_6);
+  __pyx_t_6 = 0;
+  __Pyx_CyFunction_SetDefaultsGetter(__pyx_t_2, __pyx_pf_7wrapper_4core_4File___defaults__);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_find_token, __pyx_t_2) < 0) __PYX_ERR(0, 56, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":74
+  /* "wrapper/core/File.pyx":65
  *         return found
  * 
  *     def list_NER(self):             # <<<<<<<<<<<<<<
  *         self.named_entities = None
  *         if self.text:
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_9list_NER, 0, __pyx_n_s_File_list_NER, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__13)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (__Pyx_SetNameInClass(__pyx_t_2, __pyx_n_s_list_NER, __pyx_t_3) < 0) __PYX_ERR(0, 74, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_4File_4File_9list_NER, 0, __pyx_n_s_File_list_NER, NULL, __pyx_n_s_wrapper_core_File, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_list_NER, __pyx_t_2) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/core/File.pyx":9
+  /* "wrapper/core/File.pyx":8
  * # from infra.wrapper.infra import AbsctractGenerator
  * 
  * class File():             # <<<<<<<<<<<<<<
  * 
  *     id:str = None
  */
-  __pyx_t_3 = __Pyx_Py3ClassCreate(((PyObject*)&PyType_Type), __pyx_n_s_File, __pyx_empty_tuple, __pyx_t_2, NULL, 0, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_Py3ClassCreate(((PyObject*)&PyType_Type), __pyx_n_s_File, __pyx_empty_tuple, __pyx_t_3, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/File.pyx":1
- * from ..infra.TextFeatureExtractor import extract_text_features             # <<<<<<<<<<<<<<
- * from ..infra.DocumentSimilarityCalculator import calc_cosine_similarity
- * from ..infra.NERExtractor import extract_named_entities
+ * from ..infra.NERExtractor import extract_named_entities             # <<<<<<<<<<<<<<
+ * from ..infra import TextExtractor
+ * from ..infra import PreProcessing
  */
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
       __Pyx_AddTraceback("init wrapper.core.File", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
@@ -7926,15 +7995,15 @@
 static __Pyx_TypeName
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__14));
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__13));
     }
     return name;
 }
 #endif
 
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
```

### Comparing `docrx-0.0.11/src/wrapper/core/Image.c` & `docrx-0.0.110/src/wrapper/core/Image.c`

 * *Files 1% similar despite different names*

```diff
@@ -1606,14 +1606,23 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
+/* PyObjectSetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
+#else
+#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
+#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
+#endif
+
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1653,23 +1662,14 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
-/* PyObjectSetAttrStr.proto */
-#if CYTHON_USE_TYPE_SLOTS
-#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
-#else
-#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
-#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
-#endif
-
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
 /* ImportFrom.proto */
 static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
 /* PyObjectCallOneArg.proto */
@@ -1930,14 +1930,15 @@
 /* Implementation of "wrapper.core.Image" */
 /* #### Code section: global_var ### */
 static PyObject *__pyx_builtin_super;
 /* #### Code section: string_decls ### */
 static const char __pyx_k_[] = ".";
 static const char __pyx_k__7[] = "?";
 static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_ocr[] = "ocr";
 static const char __pyx_k_File[] = "File";
 static const char __pyx_k_dict[] = "__dict__";
 static const char __pyx_k_init[] = "__init__";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_path[] = "path";
 static const char __pyx_k_self[] = "self";
@@ -1950,21 +1951,23 @@
 static const char __pyx_k_module[] = "__module__";
 static const char __pyx_k_objects[] = "objects";
 static const char __pyx_k_prepare[] = "__prepare__";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_mro_entries[] = "__mro_entries__";
 static const char __pyx_k_Image___init[] = "Image.__init__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_translate_to[] = "translate_to";
 static const char __pyx_k_TextExtractor[] = "TextExtractor";
 static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_create_features[] = "create_features";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_is_detect_language[] = "is_detect_language";
 static const char __pyx_k_wrapper_core_Image[] = "wrapper.core.Image";
 static const char __pyx_k_create_features_base[] = "create_features_base";
 static const char __pyx_k_ImageObjectsExtractor[] = "ImageObjectsExtractor";
 static const char __pyx_k_Image_create_features[] = "Image.create_features";
@@ -1999,14 +2002,15 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
   PyObject *__pyx_n_s_File;
   PyObject *__pyx_n_s_Image;
   PyObject *__pyx_n_s_ImageObjectsExtractor;
   PyObject *__pyx_n_s_Image___init;
   PyObject *__pyx_n_s_Image_create_features;
   PyObject *__pyx_n_s_TextExtractor;
   PyObject *__pyx_n_s__7;
@@ -2016,24 +2020,26 @@
   PyObject *__pyx_n_s_create_features;
   PyObject *__pyx_n_s_create_features_base;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_doc;
   PyObject *__pyx_n_s_extract_text_from_image;
   PyObject *__pyx_n_s_import;
   PyObject *__pyx_n_s_infra;
+  PyObject *__pyx_n_s_infra_DocLanguage;
   PyObject *__pyx_n_s_init;
   PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_detect_language;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_metaclass;
   PyObject *__pyx_n_s_module;
   PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
   PyObject *__pyx_n_s_objects;
+  PyObject *__pyx_n_s_ocr;
   PyObject *__pyx_n_s_path;
   PyObject *__pyx_n_s_prepare;
   PyObject *__pyx_n_s_qualname;
   PyObject *__pyx_n_s_self;
   PyObject *__pyx_n_s_set_name;
   PyObject *__pyx_kp_s_src_wrapper_core_Image_pyx;
   PyObject *__pyx_n_s_super;
@@ -2085,14 +2091,15 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_File);
   Py_CLEAR(clear_module_state->__pyx_n_s_Image);
   Py_CLEAR(clear_module_state->__pyx_n_s_ImageObjectsExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s_Image___init);
   Py_CLEAR(clear_module_state->__pyx_n_s_Image_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_TextExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s__7);
@@ -2102,24 +2109,26 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features_base);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_from_image);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
   Py_CLEAR(clear_module_state->__pyx_n_s_infra);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_init);
   Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_detect_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_objects);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ocr);
   Py_CLEAR(clear_module_state->__pyx_n_s_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
   Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
   Py_CLEAR(clear_module_state->__pyx_n_s_self);
   Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
   Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_Image_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_super);
@@ -2149,14 +2158,15 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_File);
   Py_VISIT(traverse_module_state->__pyx_n_s_Image);
   Py_VISIT(traverse_module_state->__pyx_n_s_ImageObjectsExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s_Image___init);
   Py_VISIT(traverse_module_state->__pyx_n_s_Image_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_TextExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s__7);
@@ -2166,24 +2176,26 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features_base);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_from_image);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
   Py_VISIT(traverse_module_state->__pyx_n_s_infra);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_init);
   Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_detect_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_objects);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ocr);
   Py_VISIT(traverse_module_state->__pyx_n_s_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
   Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
   Py_VISIT(traverse_module_state->__pyx_n_s_self);
   Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
   Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_Image_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_super);
@@ -2223,14 +2235,15 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
 #define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
 #define __pyx_n_s_Image __pyx_mstate_global->__pyx_n_s_Image
 #define __pyx_n_s_ImageObjectsExtractor __pyx_mstate_global->__pyx_n_s_ImageObjectsExtractor
 #define __pyx_n_s_Image___init __pyx_mstate_global->__pyx_n_s_Image___init
 #define __pyx_n_s_Image_create_features __pyx_mstate_global->__pyx_n_s_Image_create_features
 #define __pyx_n_s_TextExtractor __pyx_mstate_global->__pyx_n_s_TextExtractor
 #define __pyx_n_s__7 __pyx_mstate_global->__pyx_n_s__7
@@ -2240,24 +2253,26 @@
 #define __pyx_n_s_create_features __pyx_mstate_global->__pyx_n_s_create_features
 #define __pyx_n_s_create_features_base __pyx_mstate_global->__pyx_n_s_create_features_base
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
 #define __pyx_n_s_extract_text_from_image __pyx_mstate_global->__pyx_n_s_extract_text_from_image
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
 #define __pyx_n_s_infra __pyx_mstate_global->__pyx_n_s_infra
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
 #define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
 #define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_detect_language __pyx_mstate_global->__pyx_n_s_is_detect_language
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
 #define __pyx_n_s_objects __pyx_mstate_global->__pyx_n_s_objects
+#define __pyx_n_s_ocr __pyx_mstate_global->__pyx_n_s_ocr
 #define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
 #define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
 #define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
 #define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
 #define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
 #define __pyx_kp_s_src_wrapper_core_Image_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_Image_pyx
 #define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
@@ -2268,31 +2283,31 @@
 #define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
 #define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
 #define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
 #define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
 /* #### Code section: module_code ### */
 
-/* "wrapper/core/Image.pyx":9
+/* "wrapper/core/Image.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_5Image_5Image_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_5Image_5Image___init__, "Image.__init__(self, base_path, is_detect_language=False, translate_to=None)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_5Image_5Image___init__, "Image.__init__(self, base_path, is_detect_language=False, translate_to: DocLanguage = None)");
 static PyMethodDef __pyx_mdef_7wrapper_4core_5Image_5Image_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_5Image_5Image_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_5Image_5Image___init__};
 static PyObject *__pyx_pw_7wrapper_4core_5Image_5Image_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -2330,41 +2345,41 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, 1); __PYX_ERR(0, 9, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, 1); __PYX_ERR(0, 10, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_is_detect_language);
           if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  3:
         if (kw_args > 0) {
           PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
           if (value) { values[3] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 9, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 10, __pyx_L3_error)
       }
     } else {
       switch (__pyx_nargs) {
         case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
         CYTHON_FALLTHROUGH;
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
@@ -2377,15 +2392,15 @@
     __pyx_v_self = values[0];
     __pyx_v_base_path = values[1];
     __pyx_v_is_detect_language = values[2];
     __pyx_v_translate_to = values[3];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 9, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 10, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.Image.Image.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_5Image_5Image___init__(__pyx_self, __pyx_v_self, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to);
 
@@ -2402,36 +2417,36 @@
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
 
-  /* "wrapper/core/Image.pyx":10
+  /* "wrapper/core/Image.pyx":11
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):
  *         super().__init__(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  * 
  *     def create_features(self, path):
  */
   __pyx_t_2 = __Pyx_CyFunction_GetClassObj(__pyx_self);
-  if (!__pyx_t_2) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 10, __pyx_L1_error) }
+  if (!__pyx_t_2) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 11, __pyx_L1_error) }
   __Pyx_INCREF(__pyx_t_2);
-  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_GIVEREF(__pyx_t_2);
   PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
   __Pyx_INCREF(__pyx_v_self);
   __Pyx_GIVEREF(__pyx_v_self);
   PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_self);
   __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_init); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_init); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -2442,24 +2457,24 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_v_base_path, __pyx_v_is_detect_language, __pyx_v_translate_to};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 10, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/Image.pyx":9
+  /* "wrapper/core/Image.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
@@ -2471,20 +2486,20 @@
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/core/Image.pyx":12
+/* "wrapper/core/Image.pyx":13
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)
- *         self.create_features_base(path)
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_5Image_5Image_3create_features(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -2525,40 +2540,40 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 13, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 13, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("create_features", 1, 2, 2, 1); __PYX_ERR(0, 12, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("create_features", 1, 2, 2, 1); __PYX_ERR(0, 13, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_features") < 0)) __PYX_ERR(0, 12, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "create_features") < 0)) __PYX_ERR(0, 13, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_self = values[0];
     __pyx_v_path = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("create_features", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 12, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("create_features", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 13, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.core.Image.Image.create_features", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_4core_5Image_5Image_2create_features(__pyx_self, __pyx_v_self, __pyx_v_path);
 
@@ -2575,24 +2590,33 @@
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("create_features", 0);
 
-  /* "wrapper/core/Image.pyx":13
+  /* "wrapper/core/Image.pyx":14
  * 
  *     def create_features(self, path):
+ *         self.ocr = True             # <<<<<<<<<<<<<<
+ *         self.text = TextExtractor.extract_text_from_image(path)
+ *         self.create_features_base(path)
+ */
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_ocr, Py_True) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+
+  /* "wrapper/core/Image.pyx":15
+ *     def create_features(self, path):
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)             # <<<<<<<<<<<<<<
  *         self.create_features_base(path)
  *         # self.objects = ImageObjectsExtractor.identify_objects_in_image(path)
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_extract_text_from_image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_extract_text_from_image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -2603,28 +2627,28 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_path};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 13, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/Image.pyx":14
- *     def create_features(self, path):
+  /* "wrapper/core/Image.pyx":16
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)
  *         self.create_features_base(path)             # <<<<<<<<<<<<<<
  *         # self.objects = ImageObjectsExtractor.identify_objects_in_image(path)
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_create_features_base); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_create_features_base); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -2634,26 +2658,26 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_path};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/Image.pyx":12
+  /* "wrapper/core/Image.pyx":13
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)
- *         self.create_features_base(path)
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
@@ -2680,14 +2704,15 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
     {&__pyx_n_s_Image, __pyx_k_Image, sizeof(__pyx_k_Image), 0, 0, 1, 1},
     {&__pyx_n_s_ImageObjectsExtractor, __pyx_k_ImageObjectsExtractor, sizeof(__pyx_k_ImageObjectsExtractor), 0, 0, 1, 1},
     {&__pyx_n_s_Image___init, __pyx_k_Image___init, sizeof(__pyx_k_Image___init), 0, 0, 1, 1},
     {&__pyx_n_s_Image_create_features, __pyx_k_Image_create_features, sizeof(__pyx_k_Image_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_TextExtractor, __pyx_k_TextExtractor, sizeof(__pyx_k_TextExtractor), 0, 0, 1, 1},
     {&__pyx_n_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 1},
@@ -2697,24 +2722,26 @@
     {&__pyx_n_s_create_features, __pyx_k_create_features, sizeof(__pyx_k_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_create_features_base, __pyx_k_create_features_base, sizeof(__pyx_k_create_features_base), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
     {&__pyx_n_s_extract_text_from_image, __pyx_k_extract_text_from_image, sizeof(__pyx_k_extract_text_from_image), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
     {&__pyx_n_s_infra, __pyx_k_infra, sizeof(__pyx_k_infra), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
     {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_detect_language, __pyx_k_is_detect_language, sizeof(__pyx_k_is_detect_language), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
     {&__pyx_n_s_objects, __pyx_k_objects, sizeof(__pyx_k_objects), 0, 0, 1, 1},
+    {&__pyx_n_s_ocr, __pyx_k_ocr, sizeof(__pyx_k_ocr), 0, 0, 1, 1},
     {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
     {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
     {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
     {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
     {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
     {&__pyx_kp_s_src_wrapper_core_Image_pyx, __pyx_k_src_wrapper_core_Image_pyx, sizeof(__pyx_k_src_wrapper_core_Image_pyx), 0, 0, 1, 0},
     {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
@@ -2724,51 +2751,51 @@
     {&__pyx_n_s_wrapper_core_Image, __pyx_k_wrapper_core_Image, sizeof(__pyx_k_wrapper_core_Image), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_super = __Pyx_GetBuiltinName(__pyx_n_s_super); if (!__pyx_builtin_super) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_builtin_super = __Pyx_GetBuiltinName(__pyx_n_s_super); if (!__pyx_builtin_super) __PYX_ERR(0, 11, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/core/Image.pyx":9
+  /* "wrapper/core/Image.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
-  __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
-  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Image_pyx, __pyx_n_s_init, 9, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __pyx_tuple__4 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Image_pyx, __pyx_n_s_init, 10, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_tuple__4 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__4);
   __Pyx_GIVEREF(__pyx_tuple__4);
 
-  /* "wrapper/core/Image.pyx":12
+  /* "wrapper/core/Image.pyx":13
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)
- *         self.create_features_base(path)
  */
-  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_path); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_path); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 13, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
-  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Image_pyx, __pyx_n_s_create_features, 12, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Image_pyx, __pyx_n_s_create_features, 13, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 13, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -3013,14 +3040,15 @@
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
@@ -3153,15 +3181,15 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/Image.pyx":2
  * from .File import File
  * from ..infra import TextExtractor             # <<<<<<<<<<<<<<
  * from ..infra import ImageObjectsExtractor
- * 
+ * from ..infra.DocLanguage import DocLanguage
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_TextExtractor);
   __Pyx_GIVEREF(__pyx_n_s_TextExtractor);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_TextExtractor);
   __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
@@ -3173,16 +3201,16 @@
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/Image.pyx":3
  * from .File import File
  * from ..infra import TextExtractor
  * from ..infra import ImageObjectsExtractor             # <<<<<<<<<<<<<<
+ * from ..infra.DocLanguage import DocLanguage
  * 
- * class Image(File):
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_ImageObjectsExtractor);
   __Pyx_GIVEREF(__pyx_n_s_ImageObjectsExtractor);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_ImageObjectsExtractor);
   __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
@@ -3190,117 +3218,144 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_ImageObjectsExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_ImageObjectsExtractor, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/core/Image.pyx":5
+  /* "wrapper/core/Image.pyx":4
+ * from ..infra import TextExtractor
  * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
+ * 
+ * class Image(File):
+ */
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/core/Image.pyx":6
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class Image(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_File); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_File); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_GIVEREF(__pyx_t_3);
-  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
-  __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PEP560_update_bases(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_2);
+  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
+  __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PEP560_update_bases(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_4);
-  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_3, __pyx_n_s_Image, __pyx_n_s_Image, (PyObject *) NULL, __pyx_n_s_wrapper_core_Image, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_2, __pyx_n_s_Image, __pyx_n_s_Image, (PyObject *) NULL, __pyx_n_s_wrapper_core_Image, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  if (__pyx_t_3 != __pyx_t_2) {
-    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_2) < 0))) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (__pyx_t_2 != __pyx_t_3) {
+    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_3) < 0))) __PYX_ERR(0, 6, __pyx_L1_error)
   }
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
 
-  /* "wrapper/core/Image.pyx":7
+  /* "wrapper/core/Image.pyx":8
  * class Image(File):
  * 
  *     objects = []             # <<<<<<<<<<<<<<
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):
  */
-  __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 7, __pyx_L1_error)
+  __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_objects, __pyx_t_6) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_objects, __pyx_t_6) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-  /* "wrapper/core/Image.pyx":9
+  /* "wrapper/core/Image.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path,  is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path,  is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Image_5Image_1__init__, 0, __pyx_n_s_Image___init, NULL, __pyx_n_s_wrapper_core_Image, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_INCREF(__pyx_t_6);
-  PyList_Append(__pyx_t_2, __pyx_t_6);
-  __Pyx_GIVEREF(__pyx_t_6);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_6, __pyx_tuple__4);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_6) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Image_5Image_1__init__, 0, __pyx_n_s_Image___init, NULL, __pyx_n_s_wrapper_core_Image, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_INCREF(__pyx_t_7);
+  PyList_Append(__pyx_t_3, __pyx_t_7);
+  __Pyx_GIVEREF(__pyx_t_7);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_tuple__4);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_7, __pyx_t_6);
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_7) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "wrapper/core/Image.pyx":12
+  /* "wrapper/core/Image.pyx":13
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
+ *         self.ocr = True
  *         self.text = TextExtractor.extract_text_from_image(path)
- *         self.create_features_base(path)
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Image_5Image_3create_features, 0, __pyx_n_s_Image_create_features, NULL, __pyx_n_s_wrapper_core_Image, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 12, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_6) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Image_5Image_3create_features, 0, __pyx_n_s_Image_create_features, NULL, __pyx_n_s_wrapper_core_Image, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_7) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "wrapper/core/Image.pyx":5
- * from ..infra import ImageObjectsExtractor
+  /* "wrapper/core/Image.pyx":6
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class Image(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
-  __pyx_t_6 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_Image, __pyx_t_3, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_CyFunction_InitClassCell(__pyx_t_2, __pyx_t_6) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Image, __pyx_t_6) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_7 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_Image, __pyx_t_2, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_CyFunction_InitClassCell(__pyx_t_3, __pyx_t_7) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Image, __pyx_t_7) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/Image.pyx":1
  * from .File import File             # <<<<<<<<<<<<<<
  * from ..infra import TextExtractor
  * from ..infra import ImageObjectsExtractor
  */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
       __Pyx_AddTraceback("init wrapper.core.Image", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
@@ -4103,14 +4158,28 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
+/* PyObjectSetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_setattro))
+        return tp->tp_setattro(obj, attr_name, value);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_setattr))
+        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
+#endif
+    return PyObject_SetAttr(obj, attr_name, value);
+}
+#endif
+
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -4172,28 +4241,14 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
-/* PyObjectSetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_setattro))
-        return tp->tp_setattro(obj, attr_name, value);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_setattr))
-        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
-#endif
-    return PyObject_SetAttr(obj, attr_name, value);
-}
-#endif
-
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
     PyObject *py_import;
```

### Comparing `docrx-0.0.11/src/wrapper/core/PDF.c` & `docrx-0.0.110/src/wrapper/core/PDF.c`

 * *Files 0% similar despite different names*

```diff
@@ -1606,14 +1606,23 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
+/* PyObjectSetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
+#else
+#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
+#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
+#endif
+
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1653,23 +1662,14 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
-/* PyObjectSetAttrStr.proto */
-#if CYTHON_USE_TYPE_SLOTS
-#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
-#else
-#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
-#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
-#endif
-
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
 /* ImportFrom.proto */
 static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
 /* PyObjectCallOneArg.proto */
@@ -1931,14 +1931,15 @@
 /* #### Code section: global_var ### */
 static PyObject *__pyx_builtin_super;
 /* #### Code section: string_decls ### */
 static const char __pyx_k_[] = ".";
 static const char __pyx_k__7[] = "?";
 static const char __pyx_k_PDF[] = "PDF";
 static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_ocr[] = "ocr";
 static const char __pyx_k_File[] = "File";
 static const char __pyx_k_dict[] = "__dict__";
 static const char __pyx_k_init[] = "__init__";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_path[] = "path";
 static const char __pyx_k_self[] = "self";
@@ -1951,27 +1952,28 @@
 static const char __pyx_k_objects[] = "objects";
 static const char __pyx_k_prepare[] = "__prepare__";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_metaclass[] = "__metaclass__";
 static const char __pyx_k_PDF___init[] = "PDF.__init__";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_mro_entries[] = "__mro_entries__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_translate_to[] = "translate_to";
 static const char __pyx_k_TextExtractor[] = "TextExtractor";
 static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_create_features[] = "create_features";
 static const char __pyx_k_wrapper_core_PDF[] = "wrapper.core.PDF";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_is_detect_language[] = "is_detect_language";
 static const char __pyx_k_PDF_create_features[] = "PDF.create_features";
 static const char __pyx_k_create_features_base[] = "create_features_base";
-static const char __pyx_k_ImageObjectsExtractor[] = "ImageObjectsExtractor";
 static const char __pyx_k_extract_text_from_pdf[] = "extract_text_from_pdf";
 static const char __pyx_k_src_wrapper_core_PDF_pyx[] = "src/wrapper/core/PDF.pyx";
 /* #### Code section: decls ### */
 static PyObject *__pyx_pf_7wrapper_4core_3PDF_3PDF___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_3PDF_3PDF_2create_features(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
@@ -1999,16 +2001,16 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
   PyObject *__pyx_n_s_File;
-  PyObject *__pyx_n_s_ImageObjectsExtractor;
   PyObject *__pyx_n_s_PDF;
   PyObject *__pyx_n_s_PDF___init;
   PyObject *__pyx_n_s_PDF_create_features;
   PyObject *__pyx_n_s_TextExtractor;
   PyObject *__pyx_n_s__7;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_base_path;
@@ -2016,24 +2018,26 @@
   PyObject *__pyx_n_s_create_features;
   PyObject *__pyx_n_s_create_features_base;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_doc;
   PyObject *__pyx_n_s_extract_text_from_pdf;
   PyObject *__pyx_n_s_import;
   PyObject *__pyx_n_s_infra;
+  PyObject *__pyx_n_s_infra_DocLanguage;
   PyObject *__pyx_n_s_init;
   PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_detect_language;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_metaclass;
   PyObject *__pyx_n_s_module;
   PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
   PyObject *__pyx_n_s_objects;
+  PyObject *__pyx_n_s_ocr;
   PyObject *__pyx_n_s_path;
   PyObject *__pyx_n_s_prepare;
   PyObject *__pyx_n_s_qualname;
   PyObject *__pyx_n_s_self;
   PyObject *__pyx_n_s_set_name;
   PyObject *__pyx_kp_s_src_wrapper_core_PDF_pyx;
   PyObject *__pyx_n_s_super;
@@ -2085,16 +2089,16 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_File);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImageObjectsExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s_PDF);
   Py_CLEAR(clear_module_state->__pyx_n_s_PDF___init);
   Py_CLEAR(clear_module_state->__pyx_n_s_PDF_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_TextExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s__7);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_base_path);
@@ -2102,24 +2106,26 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features_base);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc);
   Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_from_pdf);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
   Py_CLEAR(clear_module_state->__pyx_n_s_infra);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_init);
   Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_detect_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_objects);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ocr);
   Py_CLEAR(clear_module_state->__pyx_n_s_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
   Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
   Py_CLEAR(clear_module_state->__pyx_n_s_self);
   Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
   Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_PDF_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_super);
@@ -2149,16 +2155,16 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_File);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImageObjectsExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s_PDF);
   Py_VISIT(traverse_module_state->__pyx_n_s_PDF___init);
   Py_VISIT(traverse_module_state->__pyx_n_s_PDF_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_TextExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s__7);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_base_path);
@@ -2166,24 +2172,26 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features_base);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc);
   Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_from_pdf);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
   Py_VISIT(traverse_module_state->__pyx_n_s_infra);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_init);
   Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_detect_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_objects);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ocr);
   Py_VISIT(traverse_module_state->__pyx_n_s_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
   Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
   Py_VISIT(traverse_module_state->__pyx_n_s_self);
   Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
   Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_PDF_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_super);
@@ -2223,16 +2231,16 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
 #define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
-#define __pyx_n_s_ImageObjectsExtractor __pyx_mstate_global->__pyx_n_s_ImageObjectsExtractor
 #define __pyx_n_s_PDF __pyx_mstate_global->__pyx_n_s_PDF
 #define __pyx_n_s_PDF___init __pyx_mstate_global->__pyx_n_s_PDF___init
 #define __pyx_n_s_PDF_create_features __pyx_mstate_global->__pyx_n_s_PDF_create_features
 #define __pyx_n_s_TextExtractor __pyx_mstate_global->__pyx_n_s_TextExtractor
 #define __pyx_n_s__7 __pyx_mstate_global->__pyx_n_s__7
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_base_path __pyx_mstate_global->__pyx_n_s_base_path
@@ -2240,24 +2248,26 @@
 #define __pyx_n_s_create_features __pyx_mstate_global->__pyx_n_s_create_features
 #define __pyx_n_s_create_features_base __pyx_mstate_global->__pyx_n_s_create_features_base
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
 #define __pyx_n_s_extract_text_from_pdf __pyx_mstate_global->__pyx_n_s_extract_text_from_pdf
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
 #define __pyx_n_s_infra __pyx_mstate_global->__pyx_n_s_infra
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
 #define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
 #define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_detect_language __pyx_mstate_global->__pyx_n_s_is_detect_language
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
 #define __pyx_n_s_objects __pyx_mstate_global->__pyx_n_s_objects
+#define __pyx_n_s_ocr __pyx_mstate_global->__pyx_n_s_ocr
 #define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
 #define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
 #define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
 #define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
 #define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
 #define __pyx_kp_s_src_wrapper_core_PDF_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_PDF_pyx
 #define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
@@ -2271,28 +2281,28 @@
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
 #define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
 /* #### Code section: module_code ### */
 
 /* "wrapper/core/PDF.pyx":9
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_3PDF_3PDF_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_3PDF_3PDF___init__, "PDF.__init__(self, base_path, is_detect_language=False, translate_to=None)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_3PDF_3PDF___init__, "PDF.__init__(self, base_path, is_detect_language=False, translate_to: DocLanguage = None)");
 static PyMethodDef __pyx_mdef_7wrapper_4core_3PDF_3PDF_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_3PDF_3PDF_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_3PDF_3PDF___init__};
 static PyObject *__pyx_pw_7wrapper_4core_3PDF_3PDF_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -2404,15 +2414,15 @@
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
 
   /* "wrapper/core/PDF.pyx":10
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  *         super().__init__(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  * 
  *     def create_features(self, path):
  */
   __pyx_t_2 = __Pyx_CyFunction_GetClassObj(__pyx_self);
   if (!__pyx_t_2) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 10, __pyx_L1_error) }
   __Pyx_INCREF(__pyx_t_2);
@@ -2451,15 +2461,15 @@
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "wrapper/core/PDF.pyx":9
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
@@ -2476,15 +2486,15 @@
 }
 
 /* "wrapper/core/PDF.pyx":12
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
  *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)
+ *         self.ocr = True
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_3PDF_3PDF_3create_features(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -2569,98 +2579,112 @@
 
 static PyObject *__pyx_pf_7wrapper_4core_3PDF_3PDF_2create_features(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("create_features", 0);
 
   /* "wrapper/core/PDF.pyx":14
  *     def create_features(self, path):
  *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)             # <<<<<<<<<<<<<<
+ *         self.ocr = True             # <<<<<<<<<<<<<<
+ *         self.text = TextExtractor.extract_text_from_pdf(path, self.base_path)
  *         self.create_features_base(path)
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_ocr, Py_True) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+
+  /* "wrapper/core/PDF.pyx":15
+ *         # self.path = path
+ *         self.ocr = True
+ *         self.text = TextExtractor.extract_text_from_pdf(path, self.base_path)             # <<<<<<<<<<<<<<
+ *         self.create_features_base(path)
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_TextExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_extract_text_from_pdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_extract_text_from_pdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_base_path); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = NULL;
+  __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_2)) {
+    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_4)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_4);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+      __pyx_t_5 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_path};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
+    PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_path, __pyx_t_2};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 2+__pyx_t_5);
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_text, __pyx_t_1) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/core/PDF.pyx":15
- *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)
+  /* "wrapper/core/PDF.pyx":16
+ *         self.ocr = True
+ *         self.text = TextExtractor.extract_text_from_pdf(path, self.base_path)
  *         self.create_features_base(path)             # <<<<<<<<<<<<<<
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_create_features_base); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_create_features_base); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
+  __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
       __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+      __pyx_t_5 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_path};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "wrapper/core/PDF.pyx":12
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
  *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)
+ *         self.ocr = True
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
   __Pyx_AddTraceback("wrapper.core.PDF.PDF.create_features", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
@@ -2678,16 +2702,16 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
-    {&__pyx_n_s_ImageObjectsExtractor, __pyx_k_ImageObjectsExtractor, sizeof(__pyx_k_ImageObjectsExtractor), 0, 0, 1, 1},
     {&__pyx_n_s_PDF, __pyx_k_PDF, sizeof(__pyx_k_PDF), 0, 0, 1, 1},
     {&__pyx_n_s_PDF___init, __pyx_k_PDF___init, sizeof(__pyx_k_PDF___init), 0, 0, 1, 1},
     {&__pyx_n_s_PDF_create_features, __pyx_k_PDF_create_features, sizeof(__pyx_k_PDF_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_TextExtractor, __pyx_k_TextExtractor, sizeof(__pyx_k_TextExtractor), 0, 0, 1, 1},
     {&__pyx_n_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_base_path, __pyx_k_base_path, sizeof(__pyx_k_base_path), 0, 0, 1, 1},
@@ -2695,24 +2719,26 @@
     {&__pyx_n_s_create_features, __pyx_k_create_features, sizeof(__pyx_k_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_create_features_base, __pyx_k_create_features_base, sizeof(__pyx_k_create_features_base), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
     {&__pyx_n_s_extract_text_from_pdf, __pyx_k_extract_text_from_pdf, sizeof(__pyx_k_extract_text_from_pdf), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
     {&__pyx_n_s_infra, __pyx_k_infra, sizeof(__pyx_k_infra), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
     {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_detect_language, __pyx_k_is_detect_language, sizeof(__pyx_k_is_detect_language), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
     {&__pyx_n_s_objects, __pyx_k_objects, sizeof(__pyx_k_objects), 0, 0, 1, 1},
+    {&__pyx_n_s_ocr, __pyx_k_ocr, sizeof(__pyx_k_ocr), 0, 0, 1, 1},
     {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
     {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
     {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
     {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
     {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
     {&__pyx_kp_s_src_wrapper_core_PDF_pyx, __pyx_k_src_wrapper_core_PDF_pyx, sizeof(__pyx_k_src_wrapper_core_PDF_pyx), 0, 0, 1, 0},
     {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
@@ -2736,15 +2762,15 @@
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
   /* "wrapper/core/PDF.pyx":9
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
   __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
   __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_PDF_pyx, __pyx_n_s_init, 9, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 9, __pyx_L1_error)
@@ -2753,15 +2779,15 @@
   __Pyx_GIVEREF(__pyx_tuple__4);
 
   /* "wrapper/core/PDF.pyx":12
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
  *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)
+ *         self.ocr = True
  */
   __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_path); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
   __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_PDF_pyx, __pyx_n_s_create_features, 12, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
@@ -3011,14 +3037,15 @@
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
@@ -3131,15 +3158,15 @@
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
   /* "wrapper/core/PDF.pyx":1
  * from .File import File             # <<<<<<<<<<<<<<
  * from ..infra import TextExtractor
- * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_File);
   __Pyx_GIVEREF(__pyx_n_s_File);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_File);
   __pyx_t_3 = __Pyx_Import(__pyx_n_s_File, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -3150,15 +3177,15 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/PDF.pyx":2
  * from .File import File
  * from ..infra import TextExtractor             # <<<<<<<<<<<<<<
- * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage
  * 
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_TextExtractor);
   __Pyx_GIVEREF(__pyx_n_s_TextExtractor);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_TextExtractor);
@@ -3170,34 +3197,34 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_TextExtractor, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/PDF.pyx":3
  * from .File import File
  * from ..infra import TextExtractor
- * from ..infra import ImageObjectsExtractor             # <<<<<<<<<<<<<<
+ * from ..infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
  * 
  * class PDF(File):
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_ImageObjectsExtractor);
-  __Pyx_GIVEREF(__pyx_n_s_ImageObjectsExtractor);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_ImageObjectsExtractor);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_2, 2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_ImageObjectsExtractor); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ImageObjectsExtractor, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/PDF.pyx":5
- * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class PDF(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
   __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_File); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
@@ -3220,70 +3247,75 @@
   __Pyx_GOTREF(__pyx_t_2);
 
   /* "wrapper/core/PDF.pyx":7
  * class PDF(File):
  * 
  *     objects = []             # <<<<<<<<<<<<<<
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  */
   __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
   if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_objects, __pyx_t_6) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
   /* "wrapper/core/PDF.pyx":9
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_3PDF_3PDF_1__init__, 0, __pyx_n_s_PDF___init, NULL, __pyx_n_s_wrapper_core_PDF, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_INCREF(__pyx_t_6);
-  PyList_Append(__pyx_t_2, __pyx_t_6);
-  __Pyx_GIVEREF(__pyx_t_6);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_6, __pyx_tuple__4);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_6) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_3PDF_3PDF_1__init__, 0, __pyx_n_s_PDF___init, NULL, __pyx_n_s_wrapper_core_PDF, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_INCREF(__pyx_t_7);
+  PyList_Append(__pyx_t_2, __pyx_t_7);
+  __Pyx_GIVEREF(__pyx_t_7);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_tuple__4);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_7, __pyx_t_6);
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_7) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
   /* "wrapper/core/PDF.pyx":12
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
  *         # self.path = path
- *         self.text = TextExtractor.extract_text_from_pdf(path)
+ *         self.ocr = True
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_3PDF_3PDF_3create_features, 0, __pyx_n_s_PDF_create_features, NULL, __pyx_n_s_wrapper_core_PDF, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 12, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_6) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_3PDF_3PDF_3create_features, 0, __pyx_n_s_PDF_create_features, NULL, __pyx_n_s_wrapper_core_PDF, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_7) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
   /* "wrapper/core/PDF.pyx":5
- * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class PDF(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
-  __pyx_t_6 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_PDF, __pyx_t_3, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_CyFunction_InitClassCell(__pyx_t_2, __pyx_t_6) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_PDF, __pyx_t_3, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_CyFunction_InitClassCell(__pyx_t_2, __pyx_t_7) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_PDF, __pyx_t_6) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_PDF, __pyx_t_7) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/PDF.pyx":1
  * from .File import File             # <<<<<<<<<<<<<<
  * from ..infra import TextExtractor
- * from ..infra import ImageObjectsExtractor
+ * from ..infra.DocLanguage import DocLanguage
  */
   __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
@@ -3291,14 +3323,15 @@
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
       __Pyx_AddTraceback("init wrapper.core.PDF", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
@@ -4101,14 +4134,28 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
+/* PyObjectSetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_setattro))
+        return tp->tp_setattro(obj, attr_name, value);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_setattr))
+        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
+#endif
+    return PyObject_SetAttr(obj, attr_name, value);
+}
+#endif
+
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -4170,28 +4217,14 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
-/* PyObjectSetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_setattro))
-        return tp->tp_setattro(obj, attr_name, value);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_setattr))
-        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
-#endif
-    return PyObject_SetAttr(obj, attr_name, value);
-}
-#endif
-
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
     PyObject *py_import;
```

### Comparing `docrx-0.0.11/src/wrapper/core/Video.c` & `docrx-0.0.110/src/wrapper/core/Video.c`

 * *Files 1% similar despite different names*

```diff
@@ -1949,31 +1949,31 @@
 static const char __pyx_k_module[] = "__module__";
 static const char __pyx_k_objects[] = "objects";
 static const char __pyx_k_prepare[] = "__prepare__";
 static const char __pyx_k_qualname[] = "__qualname__";
 static const char __pyx_k_set_name[] = "__set_name__";
 static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_mro_entries[] = "__mro_entries__";
 static const char __pyx_k_Video___init[] = "Video.__init__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
 static const char __pyx_k_translate_to[] = "translate_to";
 static const char __pyx_k_TextExtractor[] = "TextExtractor";
 static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_create_features[] = "create_features";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
 static const char __pyx_k_is_detect_language[] = "is_detect_language";
 static const char __pyx_k_wrapper_core_Video[] = "wrapper.core.Video";
 static const char __pyx_k_create_features_base[] = "create_features_base";
 static const char __pyx_k_VideoObjectsExtractor[] = "VideoObjectsExtractor";
 static const char __pyx_k_Video_create_features[] = "Video.create_features";
-static const char __pyx_k_extract_text_features[] = "extract_text_features";
 static const char __pyx_k_identify_objects_in_video[] = "identify_objects_in_video";
-static const char __pyx_k_infra_TextFeatureExtractor[] = "infra.TextFeatureExtractor";
 static const char __pyx_k_src_wrapper_core_Video_pyx[] = "src/wrapper/core/Video.pyx";
 /* #### Code section: decls ### */
 static PyObject *__pyx_pf_7wrapper_4core_5Video_5Video___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_base_path, PyObject *__pyx_v_is_detect_language, PyObject *__pyx_v_translate_to); /* proto */
 static PyObject *__pyx_pf_7wrapper_4core_5Video_5Video_2create_features(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
@@ -2000,33 +2000,33 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
   PyObject *__pyx_n_s_File;
   PyObject *__pyx_n_s_TextExtractor;
   PyObject *__pyx_n_s_Video;
   PyObject *__pyx_n_s_VideoObjectsExtractor;
   PyObject *__pyx_n_s_Video___init;
   PyObject *__pyx_n_s_Video_create_features;
   PyObject *__pyx_n_s__7;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_base_path;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_create_features;
   PyObject *__pyx_n_s_create_features_base;
   PyObject *__pyx_n_s_dict;
   PyObject *__pyx_n_s_doc;
-  PyObject *__pyx_n_s_extract_text_features;
   PyObject *__pyx_n_s_identify_objects_in_video;
   PyObject *__pyx_n_s_import;
   PyObject *__pyx_n_s_infra;
-  PyObject *__pyx_n_s_infra_TextFeatureExtractor;
+  PyObject *__pyx_n_s_infra_DocLanguage;
   PyObject *__pyx_n_s_init;
   PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_is_detect_language;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_metaclass;
   PyObject *__pyx_n_s_module;
@@ -2087,33 +2087,33 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_File);
   Py_CLEAR(clear_module_state->__pyx_n_s_TextExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s_Video);
   Py_CLEAR(clear_module_state->__pyx_n_s_VideoObjectsExtractor);
   Py_CLEAR(clear_module_state->__pyx_n_s_Video___init);
   Py_CLEAR(clear_module_state->__pyx_n_s_Video_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s__7);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_base_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_create_features_base);
   Py_CLEAR(clear_module_state->__pyx_n_s_dict);
   Py_CLEAR(clear_module_state->__pyx_n_s_doc);
-  Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_features);
   Py_CLEAR(clear_module_state->__pyx_n_s_identify_objects_in_video);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
   Py_CLEAR(clear_module_state->__pyx_n_s_infra);
-  Py_CLEAR(clear_module_state->__pyx_n_s_infra_TextFeatureExtractor);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_init);
   Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_detect_language);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_module);
@@ -2152,33 +2152,33 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_File);
   Py_VISIT(traverse_module_state->__pyx_n_s_TextExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s_Video);
   Py_VISIT(traverse_module_state->__pyx_n_s_VideoObjectsExtractor);
   Py_VISIT(traverse_module_state->__pyx_n_s_Video___init);
   Py_VISIT(traverse_module_state->__pyx_n_s_Video_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s__7);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_base_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_create_features_base);
   Py_VISIT(traverse_module_state->__pyx_n_s_dict);
   Py_VISIT(traverse_module_state->__pyx_n_s_doc);
-  Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_features);
   Py_VISIT(traverse_module_state->__pyx_n_s_identify_objects_in_video);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
   Py_VISIT(traverse_module_state->__pyx_n_s_infra);
-  Py_VISIT(traverse_module_state->__pyx_n_s_infra_TextFeatureExtractor);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_init);
   Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_detect_language);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_module);
@@ -2227,33 +2227,33 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
 #define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
 #define __pyx_n_s_TextExtractor __pyx_mstate_global->__pyx_n_s_TextExtractor
 #define __pyx_n_s_Video __pyx_mstate_global->__pyx_n_s_Video
 #define __pyx_n_s_VideoObjectsExtractor __pyx_mstate_global->__pyx_n_s_VideoObjectsExtractor
 #define __pyx_n_s_Video___init __pyx_mstate_global->__pyx_n_s_Video___init
 #define __pyx_n_s_Video_create_features __pyx_mstate_global->__pyx_n_s_Video_create_features
 #define __pyx_n_s__7 __pyx_mstate_global->__pyx_n_s__7
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_base_path __pyx_mstate_global->__pyx_n_s_base_path
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_create_features __pyx_mstate_global->__pyx_n_s_create_features
 #define __pyx_n_s_create_features_base __pyx_mstate_global->__pyx_n_s_create_features_base
 #define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
 #define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
-#define __pyx_n_s_extract_text_features __pyx_mstate_global->__pyx_n_s_extract_text_features
 #define __pyx_n_s_identify_objects_in_video __pyx_mstate_global->__pyx_n_s_identify_objects_in_video
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
 #define __pyx_n_s_infra __pyx_mstate_global->__pyx_n_s_infra
-#define __pyx_n_s_infra_TextFeatureExtractor __pyx_mstate_global->__pyx_n_s_infra_TextFeatureExtractor
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
 #define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
 #define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_is_detect_language __pyx_mstate_global->__pyx_n_s_is_detect_language
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
 #define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
@@ -2276,28 +2276,28 @@
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
 #define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
 /* #### Code section: module_code ### */
 
 /* "wrapper/core/Video.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_4core_5Video_5Video_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_5Video_5Video___init__, "Video.__init__(self, base_path, is_detect_language=False, translate_to=None)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_5Video_5Video___init__, "Video.__init__(self, base_path, is_detect_language=False, translate_to: DocLanguage = None)");
 static PyMethodDef __pyx_mdef_7wrapper_4core_5Video_5Video_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_5Video_5Video_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_5Video_5Video___init__};
 static PyObject *__pyx_pw_7wrapper_4core_5Video_5Video_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
@@ -2409,15 +2409,15 @@
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("__init__", 0);
 
   /* "wrapper/core/Video.pyx":11
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  *         super().__init__(base_path, is_detect_language, translate_to)             # <<<<<<<<<<<<<<
  * 
  *     def create_features(self, path):
  */
   __pyx_t_2 = __Pyx_CyFunction_GetClassObj(__pyx_self);
   if (!__pyx_t_2) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 11, __pyx_L1_error) }
   __Pyx_INCREF(__pyx_t_2);
@@ -2456,15 +2456,15 @@
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
   /* "wrapper/core/Video.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
@@ -2683,33 +2683,33 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
     {&__pyx_n_s_TextExtractor, __pyx_k_TextExtractor, sizeof(__pyx_k_TextExtractor), 0, 0, 1, 1},
     {&__pyx_n_s_Video, __pyx_k_Video, sizeof(__pyx_k_Video), 0, 0, 1, 1},
     {&__pyx_n_s_VideoObjectsExtractor, __pyx_k_VideoObjectsExtractor, sizeof(__pyx_k_VideoObjectsExtractor), 0, 0, 1, 1},
     {&__pyx_n_s_Video___init, __pyx_k_Video___init, sizeof(__pyx_k_Video___init), 0, 0, 1, 1},
     {&__pyx_n_s_Video_create_features, __pyx_k_Video_create_features, sizeof(__pyx_k_Video_create_features), 0, 0, 1, 1},
     {&__pyx_n_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_base_path, __pyx_k_base_path, sizeof(__pyx_k_base_path), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_create_features, __pyx_k_create_features, sizeof(__pyx_k_create_features), 0, 0, 1, 1},
     {&__pyx_n_s_create_features_base, __pyx_k_create_features_base, sizeof(__pyx_k_create_features_base), 0, 0, 1, 1},
     {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
     {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
-    {&__pyx_n_s_extract_text_features, __pyx_k_extract_text_features, sizeof(__pyx_k_extract_text_features), 0, 0, 1, 1},
     {&__pyx_n_s_identify_objects_in_video, __pyx_k_identify_objects_in_video, sizeof(__pyx_k_identify_objects_in_video), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
     {&__pyx_n_s_infra, __pyx_k_infra, sizeof(__pyx_k_infra), 0, 0, 1, 1},
-    {&__pyx_n_s_infra_TextFeatureExtractor, __pyx_k_infra_TextFeatureExtractor, sizeof(__pyx_k_infra_TextFeatureExtractor), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
     {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_is_detect_language, __pyx_k_is_detect_language, sizeof(__pyx_k_is_detect_language), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
     {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
@@ -2742,15 +2742,15 @@
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
   /* "wrapper/core/Video.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
   __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_base_path, __pyx_n_s_is_detect_language, __pyx_n_s_translate_to); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
   __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Video_pyx, __pyx_n_s_init, 10, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 10, __pyx_L1_error)
@@ -3017,14 +3017,15 @@
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
   PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
@@ -3157,15 +3158,15 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/Video.pyx":2
  * from .File import File
  * from ..infra import TextExtractor             # <<<<<<<<<<<<<<
  * from ..infra import VideoObjectsExtractor
- * from ..infra.TextFeatureExtractor import extract_text_features
+ * from ..infra.DocLanguage import DocLanguage
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_INCREF(__pyx_n_s_TextExtractor);
   __Pyx_GIVEREF(__pyx_n_s_TextExtractor);
   PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_TextExtractor);
   __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
@@ -3177,15 +3178,15 @@
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/Video.pyx":3
  * from .File import File
  * from ..infra import TextExtractor
  * from ..infra import VideoObjectsExtractor             # <<<<<<<<<<<<<<
- * from ..infra.TextFeatureExtractor import extract_text_features
+ * from ..infra.DocLanguage import DocLanguage
  * 
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_VideoObjectsExtractor);
   __Pyx_GIVEREF(__pyx_n_s_VideoObjectsExtractor);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_VideoObjectsExtractor);
@@ -3197,34 +3198,34 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_VideoObjectsExtractor, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/core/Video.pyx":4
  * from ..infra import TextExtractor
  * from ..infra import VideoObjectsExtractor
- * from ..infra.TextFeatureExtractor import extract_text_features             # <<<<<<<<<<<<<<
+ * from ..infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
  * 
  * class Video(File):
  */
   __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_extract_text_features);
-  __Pyx_GIVEREF(__pyx_n_s_extract_text_features);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_extract_text_features);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_TextFeatureExtractor, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_extract_text_features); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_features, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/Video.pyx":6
- * from ..infra.TextFeatureExtractor import extract_text_features
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class Video(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
   __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_File); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
@@ -3247,62 +3248,67 @@
   __Pyx_GOTREF(__pyx_t_3);
 
   /* "wrapper/core/Video.pyx":8
  * class Video(File):
  * 
  *     objects = []             # <<<<<<<<<<<<<<
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):
  */
   __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
   if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_objects, __pyx_t_6) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
   /* "wrapper/core/Video.pyx":10
  *     objects = []
  * 
- *     def __init__(self, base_path, is_detect_language=False, translate_to=None):             # <<<<<<<<<<<<<<
+ *     def __init__(self, base_path, is_detect_language=False, translate_to:DocLanguage=None):             # <<<<<<<<<<<<<<
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Video_5Video_1__init__, 0, __pyx_n_s_Video___init, NULL, __pyx_n_s_wrapper_core_Video, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
-  __Pyx_INCREF(__pyx_t_6);
-  PyList_Append(__pyx_t_3, __pyx_t_6);
-  __Pyx_GIVEREF(__pyx_t_6);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_6, __pyx_tuple__4);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_6) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Video_5Video_1__init__, 0, __pyx_n_s_Video___init, NULL, __pyx_n_s_wrapper_core_Video, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_INCREF(__pyx_t_7);
+  PyList_Append(__pyx_t_3, __pyx_t_7);
+  __Pyx_GIVEREF(__pyx_t_7);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_7, __pyx_tuple__4);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_7, __pyx_t_6);
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_7) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
   /* "wrapper/core/Video.pyx":13
  *         super().__init__(base_path, is_detect_language, translate_to)
  * 
  *     def create_features(self, path):             # <<<<<<<<<<<<<<
  *         self.create_features_base(path)
  *         self.objects = VideoObjectsExtractor.identify_objects_in_video(path)
  */
-  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Video_5Video_3create_features, 0, __pyx_n_s_Video_create_features, NULL, __pyx_n_s_wrapper_core_Video, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 13, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_6) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5Video_5Video_3create_features, 0, __pyx_n_s_Video_create_features, NULL, __pyx_n_s_wrapper_core_Video, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_create_features, __pyx_t_7) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
   /* "wrapper/core/Video.pyx":6
- * from ..infra.TextFeatureExtractor import extract_text_features
+ * from ..infra.DocLanguage import DocLanguage
  * 
  * class Video(File):             # <<<<<<<<<<<<<<
  * 
  *     objects = []
  */
-  __pyx_t_6 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_Video, __pyx_t_2, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  if (__Pyx_CyFunction_InitClassCell(__pyx_t_3, __pyx_t_6) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_Video, __pyx_t_2, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (__Pyx_CyFunction_InitClassCell(__pyx_t_3, __pyx_t_7) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Video, __pyx_t_6) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Video, __pyx_t_7) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/core/Video.pyx":1
  * from .File import File             # <<<<<<<<<<<<<<
  * from ..infra import TextExtractor
@@ -3318,14 +3324,15 @@
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
       __Pyx_AddTraceback("init wrapper.core.Video", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
```

### Comparing `docrx-0.0.11/src/wrapper/core/test2.c` & `docrx-0.0.110/src/wrapper/infra/ModelType.c`

 * *Files 14% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.core.test2",
+        "name": "wrapper.infra.ModelType",
         "sources": [
-            "src/wrapper/core/test2.pyx"
+            "src/wrapper/infra/ModelType.pyx"
         ]
     },
-    "module_name": "wrapper.core.test2"
+    "module_name": "wrapper.infra.ModelType"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__core__test2
-#define __PYX_HAVE_API__wrapper__core__test2
+#define __PYX_HAVE__wrapper__infra__ModelType
+#define __PYX_HAVE_API__wrapper__infra__ModelType
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/core/test2.pyx",
+  "src/wrapper/infra/ModelType.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1436,14 +1436,27 @@
 #define __Pyx_DECREF_SET(r, v) do {\
         PyObject *tmp = (PyObject *) r;\
         r = v; __Pyx_DECREF(tmp);\
     } while (0)
 #define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
 #define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)
 
+/* PyObjectGetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
+#else
+#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
+#endif
+
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+
 /* PyErrExceptionMatches.proto */
 #if CYTHON_FAST_THREAD_STATE
 #define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
 static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
 #else
 #define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
 #endif
@@ -1487,202 +1500,20 @@
 #define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
 #define __Pyx_ErrRestoreInState(tstate, type, value, tb)  PyErr_Restore(type, value, tb)
 #define __Pyx_ErrFetchInState(tstate, type, value, tb)  PyErr_Fetch(type, value, tb)
 #define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
 #define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
 #endif
 
-/* PyObjectGetAttrStr.proto */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
-#else
-#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
-#endif
-
 /* PyObjectGetAttrStrNoError.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name);
 
 /* GetBuiltinName.proto */
 static PyObject *__Pyx_GetBuiltinName(PyObject *name);
 
-/* TupleAndListFromArray.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
-static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
-#endif
-
-/* IncludeStringH.proto */
-#include <string.h>
-
-/* BytesEquals.proto */
-static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* UnicodeEquals.proto */
-static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* fastcall.proto */
-#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
-#define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
-#define __Pyx_KwValues_VARARGS(args, nargs) NULL
-#define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
-#define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
-#if CYTHON_METH_FASTCALL
-    #define __Pyx_Arg_FASTCALL(args, i) args[i]
-    #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
-    #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
-    static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
-    #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
-#else
-    #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
-    #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
-    #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
-    #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
-    #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
-#endif
-#if CYTHON_COMPILING_IN_CPYTHON
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
-#else
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#endif
-
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
-
-/* IncludeStructmemberH.proto */
-#include <structmember.h>
-
-/* FixUpExtensionType.proto */
-#if CYTHON_USE_TYPE_SPECS
-static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
-#endif
-
-/* FetchSharedCythonModule.proto */
-static PyObject *__Pyx_FetchSharedCythonABIModule(void);
-
-/* FetchCommonType.proto */
-#if !CYTHON_USE_TYPE_SPECS
-static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);
-#else
-static PyTypeObject* __Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases);
-#endif
-
-/* PyMethodNew.proto */
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_PyMethod_New(PyObject *func, PyObject *self, PyObject *typ) {
-    CYTHON_UNUSED_VAR(typ);
-    if (!self)
-        return __Pyx_NewRef(func);
-    return PyMethod_New(func, self);
-}
-#else
-    #define __Pyx_PyMethod_New PyMethod_New
-#endif
-
-/* PyVectorcallFastCallDict.proto */
-#if CYTHON_METH_FASTCALL
-static CYTHON_INLINE PyObject *__Pyx_PyVectorcall_FastCallDict(PyObject *func, __pyx_vectorcallfunc vc, PyObject *const *args, size_t nargs, PyObject *kw);
-#endif
-
-/* CythonFunctionShared.proto */
-#define __Pyx_CyFunction_USED
-#define __Pyx_CYFUNCTION_STATICMETHOD  0x01
-#define __Pyx_CYFUNCTION_CLASSMETHOD   0x02
-#define __Pyx_CYFUNCTION_CCLASS        0x04
-#define __Pyx_CYFUNCTION_COROUTINE     0x08
-#define __Pyx_CyFunction_GetClosure(f)\
-    (((__pyx_CyFunctionObject *) (f))->func_closure)
-#if PY_VERSION_HEX < 0x030900B1
-  #define __Pyx_CyFunction_GetClassObj(f)\
-      (((__pyx_CyFunctionObject *) (f))->func_classobj)
-#else
-  #define __Pyx_CyFunction_GetClassObj(f)\
-      ((PyObject*) ((PyCMethodObject *) (f))->mm_class)
-#endif
-#define __Pyx_CyFunction_SetClassObj(f, classobj)\
-    __Pyx__CyFunction_SetClassObj((__pyx_CyFunctionObject *) (f), (classobj))
-#define __Pyx_CyFunction_Defaults(type, f)\
-    ((type *)(((__pyx_CyFunctionObject *) (f))->defaults))
-#define __Pyx_CyFunction_SetDefaultsGetter(f, g)\
-    ((__pyx_CyFunctionObject *) (f))->defaults_getter = (g)
-typedef struct {
-#if PY_VERSION_HEX < 0x030900B1
-    PyCFunctionObject func;
-#else
-    PyCMethodObject func;
-#endif
-#if CYTHON_BACKPORT_VECTORCALL
-    __pyx_vectorcallfunc func_vectorcall;
-#endif
-#if PY_VERSION_HEX < 0x030500A0
-    PyObject *func_weakreflist;
-#endif
-    PyObject *func_dict;
-    PyObject *func_name;
-    PyObject *func_qualname;
-    PyObject *func_doc;
-    PyObject *func_globals;
-    PyObject *func_code;
-    PyObject *func_closure;
-#if PY_VERSION_HEX < 0x030900B1
-    PyObject *func_classobj;
-#endif
-    void *defaults;
-    int defaults_pyobjects;
-    size_t defaults_size;  // used by FusedFunction for copying defaults
-    int flags;
-    PyObject *defaults_tuple;
-    PyObject *defaults_kwdict;
-    PyObject *(*defaults_getter)(PyObject *);
-    PyObject *func_annotations;
-    PyObject *func_is_coroutine;
-} __pyx_CyFunctionObject;
-#define __Pyx_CyFunction_Check(obj)  __Pyx_TypeCheck(obj, __pyx_CyFunctionType)
-#define __Pyx_IsCyOrPyCFunction(obj)  __Pyx_TypeCheck2(obj, __pyx_CyFunctionType, &PyCFunction_Type)
-#define __Pyx_CyFunction_CheckExact(obj)  __Pyx_IS_TYPE(obj, __pyx_CyFunctionType)
-static PyObject *__Pyx_CyFunction_Init(__pyx_CyFunctionObject* op, PyMethodDef *ml,
-                                      int flags, PyObject* qualname,
-                                      PyObject *closure,
-                                      PyObject *module, PyObject *globals,
-                                      PyObject* code);
-static CYTHON_INLINE void __Pyx__CyFunction_SetClassObj(__pyx_CyFunctionObject* f, PyObject* classobj);
-static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *m,
-                                                         size_t size,
-                                                         int pyobjects);
-static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *m,
-                                                            PyObject *tuple);
-static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *m,
-                                                             PyObject *dict);
-static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *m,
-                                                              PyObject *dict);
-static int __pyx_CyFunction_init(PyObject *module);
-#if CYTHON_METH_FASTCALL
-static PyObject * __Pyx_CyFunction_Vectorcall_NOARGS(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames);
-static PyObject * __Pyx_CyFunction_Vectorcall_O(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames);
-static PyObject * __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames);
-static PyObject * __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS_METHOD(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames);
-#if CYTHON_BACKPORT_VECTORCALL
-#define __Pyx_CyFunction_func_vectorcall(f) (((__pyx_CyFunctionObject*)f)->func_vectorcall)
-#else
-#define __Pyx_CyFunction_func_vectorcall(f) (((PyCFunctionObject*)f)->vectorcall)
-#endif
-#endif
-
-/* CythonFunction.proto */
-static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
-                                      int flags, PyObject* qualname,
-                                      PyObject *closure,
-                                      PyObject *module, PyObject *globals,
-                                      PyObject* code);
-
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1701,14 +1532,125 @@
 static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version);
 #else
 #define __PYX_GET_DICT_VERSION(dict)  (0)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)
 #define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP)  (VAR) = (LOOKUP);
 #endif
 
+/* GetModuleGlobalName.proto */
+#if CYTHON_USE_DICT_VERSIONS
+#define __Pyx_GetModuleGlobalName(var, name)  do {\
+    static PY_UINT64_T __pyx_dict_version = 0;\
+    static PyObject *__pyx_dict_cached_value = NULL;\
+    (var) = (likely(__pyx_dict_version == __PYX_GET_DICT_VERSION(__pyx_d))) ?\
+        (likely(__pyx_dict_cached_value) ? __Pyx_NewRef(__pyx_dict_cached_value) : __Pyx_GetBuiltinName(name)) :\
+        __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
+} while(0)
+#define __Pyx_GetModuleGlobalNameUncached(var, name)  do {\
+    PY_UINT64_T __pyx_dict_version;\
+    PyObject *__pyx_dict_cached_value;\
+    (var) = __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
+} while(0)
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
+#else
+#define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
+#define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
+#endif
+
+/* PyFunctionFastCall.proto */
+#if CYTHON_FAST_PYCALL
+#if !CYTHON_VECTORCALL
+#define __Pyx_PyFunction_FastCall(func, args, nargs)\
+    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
+static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
+#endif
+#define __Pyx_BUILD_ASSERT_EXPR(cond)\
+    (sizeof(char [1 - 2*!(cond)]) - 1)
+#ifndef Py_MEMBER_SIZE
+#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
+#endif
+#if !CYTHON_VECTORCALL
+#if PY_VERSION_HEX >= 0x03080000
+  #include "frameobject.h"
+#if PY_VERSION_HEX >= 0x030b00a6
+  #ifndef Py_BUILD_CORE
+    #define Py_BUILD_CORE 1
+  #endif
+  #include "internal/pycore_frame.h"
+#endif
+  #define __Pxy_PyFrame_Initialize_Offsets()
+  #define __Pyx_PyFrame_GetLocalsplus(frame)  ((frame)->f_localsplus)
+#else
+  static size_t __pyx_pyframe_localsplus_offset = 0;
+  #include "frameobject.h"
+  #define __Pxy_PyFrame_Initialize_Offsets()\
+    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
+     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
+  #define __Pyx_PyFrame_GetLocalsplus(frame)\
+    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
+#endif
+#endif
+#endif
+
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
+#else
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
+#endif
+
+/* PyObjectCallMethO.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
+#endif
+
+/* PyObjectFastCall.proto */
+#define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
+static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
+
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+
+/* Py3UpdateBases.proto */
+static PyObject* __Pyx_PEP560_update_bases(PyObject *bases);
+
+/* CalculateMetaclass.proto */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);
+
+/* SetNameInClass.proto */
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
+#elif CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
+#else
+#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
+#endif
+
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
+
+/* PyObjectLookupSpecial.proto */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_LookupSpecialNoError(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 0)
+#define __Pyx_PyObject_LookupSpecial(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 1)
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error);
+#else
+#define __Pyx_PyObject_LookupSpecialNoError(o,n) __Pyx_PyObject_GetAttrStrNoError(o,n)
+#define __Pyx_PyObject_LookupSpecial(o,n) __Pyx_PyObject_GetAttrStr(o,n)
+#endif
+
+/* Py3ClassCreate.proto */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
+                                           PyObject *mkw, PyObject *modname, PyObject *doc);
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
+                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);
+
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -1781,38 +1723,48 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.core.test2" */
+/* Module declarations from "wrapper.infra.ModelType" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.core.test2"
-extern int __pyx_module_is_main_wrapper__core__test2;
-int __pyx_module_is_main_wrapper__core__test2 = 0;
+#define __Pyx_MODULE_NAME "wrapper.infra.ModelType"
+extern int __pyx_module_is_main_wrapper__infra__ModelType;
+int __pyx_module_is_main_wrapper__infra__ModelType = 0;
 
-/* Implementation of "wrapper.core.test2" */
+/* Implementation of "wrapper.infra.ModelType" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_print;
 /* #### Code section: string_decls ### */
-static const char __pyx_k__3[] = "?";
+static const char __pyx_k_[] = ".";
+static const char __pyx_k_SB[] = "SB";
+static const char __pyx_k_TD[] = "TD";
+static const char __pyx_k__2[] = "?";
+static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_Enum[] = "Enum";
+static const char __pyx_k_dict[] = "__dict__";
+static const char __pyx_k_enum[] = "enum";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_test[] = "__test__";
-static const char __pyx_k_print[] = "print";
-static const char __pyx_k_test2[] = "test2";
-static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
+static const char __pyx_k_super[] = "super";
+static const char __pyx_k_import[] = "__import__";
+static const char __pyx_k_module[] = "__module__";
+static const char __pyx_k_prepare[] = "__prepare__";
+static const char __pyx_k_qualname[] = "__qualname__";
+static const char __pyx_k_set_name[] = "__set_name__";
+static const char __pyx_k_ModelType[] = "ModelType";
+static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_mro_entries[] = "__mro_entries__";
+static const char __pyx_k_init_subclass[] = "__init_subclass__";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_wrapper_core_test2[] = "wrapper.core.test2";
-static const char __pyx_k_src_wrapper_core_test2_pyx[] = "src/wrapper/core/test2.pyx";
+static const char __pyx_k_wrapper_infra_ModelType[] = "wrapper.infra.ModelType";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_4core_5test2_test2(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -1834,28 +1786,39 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_n_s__3;
-  PyObject *__pyx_n_s_asyncio_coroutines;
+  PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_Enum;
+  PyObject *__pyx_n_s_ModelType;
+  PyObject *__pyx_n_s_SB;
+  PyObject *__pyx_n_u_SB;
+  PyObject *__pyx_n_s_TD;
+  PyObject *__pyx_n_u_TD;
+  PyObject *__pyx_n_s__2;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_is_coroutine;
+  PyObject *__pyx_n_s_dict;
+  PyObject *__pyx_n_s_doc;
+  PyObject *__pyx_n_s_enum;
+  PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_main;
+  PyObject *__pyx_n_s_metaclass;
+  PyObject *__pyx_n_s_module;
+  PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_print;
-  PyObject *__pyx_kp_s_src_wrapper_core_test2_pyx;
+  PyObject *__pyx_n_s_prepare;
+  PyObject *__pyx_n_s_qualname;
+  PyObject *__pyx_n_s_set_name;
+  PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_test2;
-  PyObject *__pyx_n_u_test2;
-  PyObject *__pyx_n_s_wrapper_core_test2;
-  PyObject *__pyx_tuple_;
-  PyObject *__pyx_codeobj__2;
+  PyObject *__pyx_n_s_wrapper_infra_ModelType;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -1890,28 +1853,39 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_n_s__3);
-  Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Enum);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ModelType);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SB);
+  Py_CLEAR(clear_module_state->__pyx_n_u_SB);
+  Py_CLEAR(clear_module_state->__pyx_n_s_TD);
+  Py_CLEAR(clear_module_state->__pyx_n_u_TD);
+  Py_CLEAR(clear_module_state->__pyx_n_s__2);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dict);
+  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
+  Py_CLEAR(clear_module_state->__pyx_n_s_enum);
+  Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
+  Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_module);
+  Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_print);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_test2_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
+  Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_test2);
-  Py_CLEAR(clear_module_state->__pyx_n_u_test2);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_test2);
-  Py_CLEAR(clear_module_state->__pyx_tuple_);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_ModelType);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -1924,28 +1898,39 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_n_s__3);
-  Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Enum);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ModelType);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SB);
+  Py_VISIT(traverse_module_state->__pyx_n_u_SB);
+  Py_VISIT(traverse_module_state->__pyx_n_s_TD);
+  Py_VISIT(traverse_module_state->__pyx_n_u_TD);
+  Py_VISIT(traverse_module_state->__pyx_n_s__2);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dict);
+  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
+  Py_VISIT(traverse_module_state->__pyx_n_s_enum);
+  Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
+  Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_module);
+  Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_print);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_test2_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
+  Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_test2);
-  Py_VISIT(traverse_module_state->__pyx_n_u_test2);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_test2);
-  Py_VISIT(traverse_module_state->__pyx_tuple_);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_ModelType);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -1968,86 +1953,41 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_n_s__3 __pyx_mstate_global->__pyx_n_s__3
-#define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
+#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_Enum __pyx_mstate_global->__pyx_n_s_Enum
+#define __pyx_n_s_ModelType __pyx_mstate_global->__pyx_n_s_ModelType
+#define __pyx_n_s_SB __pyx_mstate_global->__pyx_n_s_SB
+#define __pyx_n_u_SB __pyx_mstate_global->__pyx_n_u_SB
+#define __pyx_n_s_TD __pyx_mstate_global->__pyx_n_s_TD
+#define __pyx_n_u_TD __pyx_mstate_global->__pyx_n_u_TD
+#define __pyx_n_s__2 __pyx_mstate_global->__pyx_n_s__2
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
+#define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
+#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
+#define __pyx_n_s_enum __pyx_mstate_global->__pyx_n_s_enum
+#define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
+#define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
+#define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
+#define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
-#define __pyx_kp_s_src_wrapper_core_test2_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_test2_pyx
+#define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
+#define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
+#define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
+#define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_test2 __pyx_mstate_global->__pyx_n_s_test2
-#define __pyx_n_u_test2 __pyx_mstate_global->__pyx_n_u_test2
-#define __pyx_n_s_wrapper_core_test2 __pyx_mstate_global->__pyx_n_s_wrapper_core_test2
-#define __pyx_tuple_ __pyx_mstate_global->__pyx_tuple_
-#define __pyx_codeobj__2 __pyx_mstate_global->__pyx_codeobj__2
+#define __pyx_n_s_wrapper_infra_ModelType __pyx_mstate_global->__pyx_n_s_wrapper_infra_ModelType
 /* #### Code section: module_code ### */
 
-/* "wrapper/core/test2.pyx":1
- * def test2():             # <<<<<<<<<<<<<<
- *     print("test2")
- */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_4core_5test2_1test2(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_4core_5test2_test2, "test2()");
-static PyMethodDef __pyx_mdef_7wrapper_4core_5test2_1test2 = {"test2", (PyCFunction)__pyx_pw_7wrapper_4core_5test2_1test2, METH_NOARGS, __pyx_doc_7wrapper_4core_5test2_test2};
-static PyObject *__pyx_pw_7wrapper_4core_5test2_1test2(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("test2 (wrapper)", 0);
-  __pyx_r = __pyx_pf_7wrapper_4core_5test2_test2(__pyx_self);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_4core_5test2_test2(CYTHON_UNUSED PyObject *__pyx_self) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("test2", 0);
-
-  /* "wrapper/core/test2.pyx":2
- * def test2():
- *     print("test2")             # <<<<<<<<<<<<<<
- */
-  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-  /* "wrapper/core/test2.pyx":1
- * def test2():             # <<<<<<<<<<<<<<
- *     print("test2")
- */
-
-  /* function exit code */
-  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
-  goto __pyx_L0;
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("wrapper.core.test2.test2", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
 };
 #ifndef CYTHON_SMALL_CODE
 #if defined(__clang__)
     #define CYTHON_SMALL_CODE
 #elif defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 3))
@@ -2056,61 +1996,54 @@
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_n_s__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 0, 1, 1},
-    {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
+    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_Enum, __pyx_k_Enum, sizeof(__pyx_k_Enum), 0, 0, 1, 1},
+    {&__pyx_n_s_ModelType, __pyx_k_ModelType, sizeof(__pyx_k_ModelType), 0, 0, 1, 1},
+    {&__pyx_n_s_SB, __pyx_k_SB, sizeof(__pyx_k_SB), 0, 0, 1, 1},
+    {&__pyx_n_u_SB, __pyx_k_SB, sizeof(__pyx_k_SB), 0, 1, 0, 1},
+    {&__pyx_n_s_TD, __pyx_k_TD, sizeof(__pyx_k_TD), 0, 0, 1, 1},
+    {&__pyx_n_u_TD, __pyx_k_TD, sizeof(__pyx_k_TD), 0, 1, 0, 1},
+    {&__pyx_n_s__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
+    {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
+    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
+    {&__pyx_n_s_enum, __pyx_k_enum, sizeof(__pyx_k_enum), 0, 0, 1, 1},
+    {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
+    {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
+    {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
+    {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_core_test2_pyx, __pyx_k_src_wrapper_core_test2_pyx, sizeof(__pyx_k_src_wrapper_core_test2_pyx), 0, 0, 1, 0},
+    {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
+    {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
+    {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
+    {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_test2, __pyx_k_test2, sizeof(__pyx_k_test2), 0, 0, 1, 1},
-    {&__pyx_n_u_test2, __pyx_k_test2, sizeof(__pyx_k_test2), 0, 1, 0, 1},
-    {&__pyx_n_s_wrapper_core_test2, __pyx_k_wrapper_core_test2, sizeof(__pyx_k_wrapper_core_test2), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_infra_ModelType, __pyx_k_wrapper_infra_ModelType, sizeof(__pyx_k_wrapper_infra_ModelType), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 2, __pyx_L1_error)
   return 0;
-  __pyx_L1_error:;
-  return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
-
-  /* "wrapper/core/test2.pyx":2
- * def test2():
- *     print("test2")             # <<<<<<<<<<<<<<
- */
-  __pyx_tuple_ = PyTuple_Pack(1, __pyx_n_u_test2); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple_);
-  __Pyx_GIVEREF(__pyx_tuple_);
-
-  /* "wrapper/core/test2.pyx":1
- * def test2():             # <<<<<<<<<<<<<<
- *     print("test2")
- */
-  __pyx_codeobj__2 = (PyObject*)__Pyx_PyCode_New(0, 0, 0, 0, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_test2_pyx, __pyx_n_s_test2, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
-  __pyx_L1_error:;
-  __Pyx_RefNannyFinishContext();
-  return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
   return 0;
   __pyx_L1_error:;
@@ -2187,31 +2120,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_test2(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_ModelType(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_test2},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_ModelType},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "test2",
+      "ModelType",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -2251,19 +2184,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC inittest2(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC inittest2(void)
+__Pyx_PyMODINIT_FUNC initModelType(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initModelType(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_test2(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_test2(void)
+__Pyx_PyMODINIT_FUNC PyInit_ModelType(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_ModelType(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -2336,50 +2269,53 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_test2(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_ModelType(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'test2' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'ModelType' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("test2", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("ModelType", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to test2 pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to ModelType pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -2397,15 +2333,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_test2(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_ModelType(void)", 0);
   if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -2435,22 +2371,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__core__test2) {
+  if (__pyx_module_is_main_wrapper__infra__ModelType) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.core.test2")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.core.test2", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.infra.ModelType")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.ModelType", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -2463,49 +2399,123 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "wrapper/core/test2.pyx":1
- * def test2():             # <<<<<<<<<<<<<<
- *     print("test2")
+  /* "wrapper/infra/ModelType.pyx":1
+ * from enum import Enum             # <<<<<<<<<<<<<<
+ * 
+ * class ModelType(Enum):
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_Enum);
+  __Pyx_GIVEREF(__pyx_n_s_Enum);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Enum);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_enum, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Enum); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Enum, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/ModelType.pyx":3
+ * from enum import Enum
+ * 
+ * class ModelType(Enum):             # <<<<<<<<<<<<<<
+ *     SB = 'SB'
+ *     TD = 'TD'
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_5test2_1test2, 0, __pyx_n_s_test2, NULL, __pyx_n_s_wrapper_core_test2, __pyx_d, ((PyObject *)__pyx_codeobj__2)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Enum); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test2, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_3);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
+  __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_PEP560_update_bases(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_3, __pyx_n_s_ModelType, __pyx_n_s_ModelType, (PyObject *) NULL, __pyx_n_s_wrapper_infra_ModelType, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (__pyx_t_3 != __pyx_t_2) {
+    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_2) < 0))) __PYX_ERR(0, 3, __pyx_L1_error)
+  }
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+
+  /* "wrapper/infra/ModelType.pyx":4
+ * 
+ * class ModelType(Enum):
+ *     SB = 'SB'             # <<<<<<<<<<<<<<
+ *     TD = 'TD'
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_SB, __pyx_n_u_SB) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
+
+  /* "wrapper/infra/ModelType.pyx":5
+ * class ModelType(Enum):
+ *     SB = 'SB'
+ *     TD = 'TD'             # <<<<<<<<<<<<<<
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_TD, __pyx_n_u_TD) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+
+  /* "wrapper/infra/ModelType.pyx":3
+ * from enum import Enum
+ * 
+ * class ModelType(Enum):             # <<<<<<<<<<<<<<
+ *     SB = 'SB'
+ *     TD = 'TD'
+ */
+  __pyx_t_2 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_ModelType, __pyx_t_3, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_ModelType, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/ModelType.pyx":1
+ * from enum import Enum             # <<<<<<<<<<<<<<
+ * 
+ * class ModelType(Enum):
+ */
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.core.test2", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.infra.ModelType", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.core.test2");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.ModelType");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -2544,14 +2554,139 @@
 end:
     Py_XDECREF(p);
     Py_XDECREF(m);
     return (__Pyx_RefNannyAPIStruct *)r;
 }
 #endif
 
+/* PyObjectGetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro))
+        return tp->tp_getattro(obj, attr_name);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_getattr))
+        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
+#endif
+    return PyObject_GetAttr(obj, attr_name);
+}
+#endif
+
+/* Import */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
+    PyObject *module = 0;
+    PyObject *empty_dict = 0;
+    PyObject *empty_list = 0;
+    #if PY_MAJOR_VERSION < 3
+    PyObject *py_import;
+    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
+    if (unlikely(!py_import))
+        goto bad;
+    if (!from_list) {
+        empty_list = PyList_New(0);
+        if (unlikely(!empty_list))
+            goto bad;
+        from_list = empty_list;
+    }
+    #endif
+    empty_dict = PyDict_New();
+    if (unlikely(!empty_dict))
+        goto bad;
+    {
+        #if PY_MAJOR_VERSION >= 3
+        if (level == -1) {
+            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
+                #if CYTHON_COMPILING_IN_LIMITED_API
+                module = PyImport_ImportModuleLevelObject(
+                    name, empty_dict, empty_dict, from_list, 1);
+                #else
+                module = PyImport_ImportModuleLevelObject(
+                    name, __pyx_d, empty_dict, from_list, 1);
+                #endif
+                if (unlikely(!module)) {
+                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
+                        goto bad;
+                    PyErr_Clear();
+                }
+            }
+            level = 0;
+        }
+        #endif
+        if (!module) {
+            #if PY_MAJOR_VERSION < 3
+            PyObject *py_level = PyInt_FromLong(level);
+            if (unlikely(!py_level))
+                goto bad;
+            module = PyObject_CallFunctionObjArgs(py_import,
+                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
+            Py_DECREF(py_level);
+            #else
+            #if CYTHON_COMPILING_IN_LIMITED_API
+            module = PyImport_ImportModuleLevelObject(
+                name, empty_dict, empty_dict, from_list, level);
+            #else
+            module = PyImport_ImportModuleLevelObject(
+                name, __pyx_d, empty_dict, from_list, level);
+            #endif
+            #endif
+        }
+    }
+bad:
+    Py_XDECREF(empty_dict);
+    Py_XDECREF(empty_list);
+    #if PY_MAJOR_VERSION < 3
+    Py_XDECREF(py_import);
+    #endif
+    return module;
+}
+
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
 /* PyErrExceptionMatches */
 #if CYTHON_FAST_THREAD_STATE
 static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
     Py_ssize_t i, n;
     n = PyTuple_GET_SIZE(tuple);
 #if PY_MAJOR_VERSION >= 3
     for (i=0; i<n; i++) {
@@ -2644,28 +2779,14 @@
     tstate->curexc_type = 0;
     tstate->curexc_value = 0;
     tstate->curexc_traceback = 0;
 #endif
 }
 #endif
 
-/* PyObjectGetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro))
-        return tp->tp_getattro(obj, attr_name);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_getattr))
-        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
-#endif
-    return PyObject_GetAttr(obj, attr_name);
-}
-#endif
-
 /* PyObjectGetAttrStrNoError */
 static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
     __Pyx_PyThreadState_declare
     __Pyx_PyThreadState_assign
     if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
         __Pyx_PyErr_Clear();
 }
@@ -2694,218 +2815,197 @@
 #else
             "name '%.200s' is not defined", PyString_AS_STRING(name));
 #endif
     }
     return result;
 }
 
-/* TupleAndListFromArray */
+/* PyDictVersioning */
+#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
+}
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
+    PyObject **dictptr = NULL;
+    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
+    if (offset) {
 #if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE void __Pyx_copy_object_array(PyObject *const *CYTHON_RESTRICT src, PyObject** CYTHON_RESTRICT dest, Py_ssize_t length) {
-    PyObject *v;
-    Py_ssize_t i;
-    for (i = 0; i < length; i++) {
-        v = dest[i] = src[i];
-        Py_INCREF(v);
+        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
+#else
+        dictptr = _PyObject_GetDictPtr(obj);
+#endif
     }
+    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
 }
-static CYTHON_INLINE PyObject *
-__Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n)
-{
-    PyObject *res;
-    if (n <= 0) {
-        Py_INCREF(__pyx_empty_tuple);
-        return __pyx_empty_tuple;
-    }
-    res = PyTuple_New(n);
-    if (unlikely(res == NULL)) return NULL;
-    __Pyx_copy_object_array(src, ((PyTupleObject*)res)->ob_item, n);
-    return res;
-}
-static CYTHON_INLINE PyObject *
-__Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n)
-{
-    PyObject *res;
-    if (n <= 0) {
-        return PyList_New(0);
-    }
-    res = PyList_New(n);
-    if (unlikely(res == NULL)) return NULL;
-    __Pyx_copy_object_array(src, ((PyListObject*)res)->ob_item, n);
-    return res;
+static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
+        return 0;
+    return obj_dict_version == __Pyx_get_object_dict_version(obj);
 }
 #endif
 
-/* BytesEquals */
-static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals) {
-#if CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API
-    return PyObject_RichCompareBool(s1, s2, equals);
-#else
-    if (s1 == s2) {
-        return (equals == Py_EQ);
-    } else if (PyBytes_CheckExact(s1) & PyBytes_CheckExact(s2)) {
-        const char *ps1, *ps2;
-        Py_ssize_t length = PyBytes_GET_SIZE(s1);
-        if (length != PyBytes_GET_SIZE(s2))
-            return (equals == Py_NE);
-        ps1 = PyBytes_AS_STRING(s1);
-        ps2 = PyBytes_AS_STRING(s2);
-        if (ps1[0] != ps2[0]) {
-            return (equals == Py_NE);
-        } else if (length == 1) {
-            return (equals == Py_EQ);
-        } else {
-            int result;
-#if CYTHON_USE_UNICODE_INTERNALS && (PY_VERSION_HEX < 0x030B0000)
-            Py_hash_t hash1, hash2;
-            hash1 = ((PyBytesObject*)s1)->ob_shash;
-            hash2 = ((PyBytesObject*)s2)->ob_shash;
-            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
-                return (equals == Py_NE);
-            }
+/* GetModuleGlobalName */
+#if CYTHON_USE_DICT_VERSIONS
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
+#else
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
 #endif
-            result = memcmp(ps1, ps2, (size_t)length);
-            return (equals == Py_EQ) ? (result == 0) : (result != 0);
-        }
-    } else if ((s1 == Py_None) & PyBytes_CheckExact(s2)) {
-        return (equals == Py_NE);
-    } else if ((s2 == Py_None) & PyBytes_CheckExact(s1)) {
-        return (equals == Py_NE);
-    } else {
-        int result;
-        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
-        if (!py_result)
-            return -1;
-        result = __Pyx_PyObject_IsTrue(py_result);
-        Py_DECREF(py_result);
+{
+    PyObject *result;
+#if !CYTHON_AVOID_BORROWED_REFS
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    } else if (unlikely(PyErr_Occurred())) {
+        return NULL;
+    }
+#elif CYTHON_COMPILING_IN_LIMITED_API
+    if (unlikely(!__pyx_m)) {
+        return NULL;
+    }
+    result = PyObject_GetAttr(__pyx_m, name);
+    if (likely(result)) {
         return result;
     }
+#else
+    result = PyDict_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
 #endif
+#else
+    result = PyObject_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
+    PyErr_Clear();
+#endif
+    return __Pyx_GetBuiltinName(name);
 }
 
-/* UnicodeEquals */
-static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals) {
-#if CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_LIMITED_API
-    return PyObject_RichCompareBool(s1, s2, equals);
-#else
-#if PY_MAJOR_VERSION < 3
-    PyObject* owned_ref = NULL;
+/* PyFunctionFastCall */
+#if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
+static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
+                                               PyObject *globals) {
+    PyFrameObject *f;
+    PyThreadState *tstate = __Pyx_PyThreadState_Current;
+    PyObject **fastlocals;
+    Py_ssize_t i;
+    PyObject *result;
+    assert(globals != NULL);
+    /* XXX Perhaps we should create a specialized
+       PyFrame_New() that doesn't take locals, but does
+       take builtins without sanity checking them.
+       */
+    assert(tstate != NULL);
+    f = PyFrame_New(tstate, co, globals, NULL);
+    if (f == NULL) {
+        return NULL;
+    }
+    fastlocals = __Pyx_PyFrame_GetLocalsplus(f);
+    for (i = 0; i < na; i++) {
+        Py_INCREF(*args);
+        fastlocals[i] = *args++;
+    }
+    result = PyEval_EvalFrameEx(f,0);
+    ++tstate->recursion_depth;
+    Py_DECREF(f);
+    --tstate->recursion_depth;
+    return result;
+}
+static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs) {
+    PyCodeObject *co = (PyCodeObject *)PyFunction_GET_CODE(func);
+    PyObject *globals = PyFunction_GET_GLOBALS(func);
+    PyObject *argdefs = PyFunction_GET_DEFAULTS(func);
+    PyObject *closure;
+#if PY_MAJOR_VERSION >= 3
+    PyObject *kwdefs;
 #endif
-    int s1_is_unicode, s2_is_unicode;
-    if (s1 == s2) {
-        goto return_eq;
+    PyObject *kwtuple, **k;
+    PyObject **d;
+    Py_ssize_t nd;
+    Py_ssize_t nk;
+    PyObject *result;
+    assert(kwargs == NULL || PyDict_Check(kwargs));
+    nk = kwargs ? PyDict_Size(kwargs) : 0;
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object"))) {
+        return NULL;
     }
-    s1_is_unicode = PyUnicode_CheckExact(s1);
-    s2_is_unicode = PyUnicode_CheckExact(s2);
-#if PY_MAJOR_VERSION < 3
-    if ((s1_is_unicode & (!s2_is_unicode)) && PyString_CheckExact(s2)) {
-        owned_ref = PyUnicode_FromObject(s2);
-        if (unlikely(!owned_ref))
-            return -1;
-        s2 = owned_ref;
-        s2_is_unicode = 1;
-    } else if ((s2_is_unicode & (!s1_is_unicode)) && PyString_CheckExact(s1)) {
-        owned_ref = PyUnicode_FromObject(s1);
-        if (unlikely(!owned_ref))
-            return -1;
-        s1 = owned_ref;
-        s1_is_unicode = 1;
-    } else if (((!s2_is_unicode) & (!s1_is_unicode))) {
-        return __Pyx_PyBytes_Equals(s1, s2, equals);
-    }
-#endif
-    if (s1_is_unicode & s2_is_unicode) {
-        Py_ssize_t length;
-        int kind;
-        void *data1, *data2;
-        if (unlikely(__Pyx_PyUnicode_READY(s1) < 0) || unlikely(__Pyx_PyUnicode_READY(s2) < 0))
-            return -1;
-        length = __Pyx_PyUnicode_GET_LENGTH(s1);
-        if (length != __Pyx_PyUnicode_GET_LENGTH(s2)) {
-            goto return_ne;
-        }
-#if CYTHON_USE_UNICODE_INTERNALS
-        {
-            Py_hash_t hash1, hash2;
-        #if CYTHON_PEP393_ENABLED
-            hash1 = ((PyASCIIObject*)s1)->hash;
-            hash2 = ((PyASCIIObject*)s2)->hash;
-        #else
-            hash1 = ((PyUnicodeObject*)s1)->hash;
-            hash2 = ((PyUnicodeObject*)s2)->hash;
-        #endif
-            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
-                goto return_ne;
-            }
-        }
+    if (
+#if PY_MAJOR_VERSION >= 3
+            co->co_kwonlyargcount == 0 &&
 #endif
-        kind = __Pyx_PyUnicode_KIND(s1);
-        if (kind != __Pyx_PyUnicode_KIND(s2)) {
-            goto return_ne;
-        }
-        data1 = __Pyx_PyUnicode_DATA(s1);
-        data2 = __Pyx_PyUnicode_DATA(s2);
-        if (__Pyx_PyUnicode_READ(kind, data1, 0) != __Pyx_PyUnicode_READ(kind, data2, 0)) {
-            goto return_ne;
-        } else if (length == 1) {
-            goto return_eq;
-        } else {
-            int result = memcmp(data1, data2, (size_t)(length * kind));
-            #if PY_MAJOR_VERSION < 3
-            Py_XDECREF(owned_ref);
-            #endif
-            return (equals == Py_EQ) ? (result == 0) : (result != 0);
+            likely(kwargs == NULL || nk == 0) &&
+            co->co_flags == (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)) {
+        if (argdefs == NULL && co->co_argcount == nargs) {
+            result = __Pyx_PyFunction_FastCallNoKw(co, args, nargs, globals);
+            goto done;
+        }
+        else if (nargs == 0 && argdefs != NULL
+                 && co->co_argcount == Py_SIZE(argdefs)) {
+            /* function called with no arguments, but all parameters have
+               a default value: use default values as arguments .*/
+            args = &PyTuple_GET_ITEM(argdefs, 0);
+            result =__Pyx_PyFunction_FastCallNoKw(co, args, Py_SIZE(argdefs), globals);
+            goto done;
+        }
+    }
+    if (kwargs != NULL) {
+        Py_ssize_t pos, i;
+        kwtuple = PyTuple_New(2 * nk);
+        if (kwtuple == NULL) {
+            result = NULL;
+            goto done;
+        }
+        k = &PyTuple_GET_ITEM(kwtuple, 0);
+        pos = i = 0;
+        while (PyDict_Next(kwargs, &pos, &k[i], &k[i+1])) {
+            Py_INCREF(k[i]);
+            Py_INCREF(k[i+1]);
+            i += 2;
         }
-    } else if ((s1 == Py_None) & s2_is_unicode) {
-        goto return_ne;
-    } else if ((s2 == Py_None) & s1_is_unicode) {
-        goto return_ne;
-    } else {
-        int result;
-        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
-        #if PY_MAJOR_VERSION < 3
-        Py_XDECREF(owned_ref);
-        #endif
-        if (!py_result)
-            return -1;
-        result = __Pyx_PyObject_IsTrue(py_result);
-        Py_DECREF(py_result);
-        return result;
+        nk = i / 2;
     }
-return_eq:
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(owned_ref);
-    #endif
-    return (equals == Py_EQ);
-return_ne:
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(owned_ref);
-    #endif
-    return (equals == Py_NE);
+    else {
+        kwtuple = NULL;
+        k = NULL;
+    }
+    closure = PyFunction_GET_CLOSURE(func);
+#if PY_MAJOR_VERSION >= 3
+    kwdefs = PyFunction_GET_KW_DEFAULTS(func);
 #endif
-}
-
-/* fastcall */
-#if CYTHON_METH_FASTCALL
-static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s)
-{
-    Py_ssize_t i, n = PyTuple_GET_SIZE(kwnames);
-    for (i = 0; i < n; i++)
-    {
-        if (s == PyTuple_GET_ITEM(kwnames, i)) return kwvalues[i];
+    if (argdefs != NULL) {
+        d = &PyTuple_GET_ITEM(argdefs, 0);
+        nd = Py_SIZE(argdefs);
     }
-    for (i = 0; i < n; i++)
-    {
-        int eq = __Pyx_PyUnicode_Equals(s, PyTuple_GET_ITEM(kwnames, i), Py_EQ);
-        if (unlikely(eq != 0)) {
-            if (unlikely(eq < 0)) return NULL;  // error
-            return kwvalues[i];
-        }
+    else {
+        d = NULL;
+        nd = 0;
     }
-    return NULL;  // not found (no exception set)
+#if PY_MAJOR_VERSION >= 3
+    result = PyEval_EvalCodeEx((PyObject*)co, globals, (PyObject *)NULL,
+                               args, (int)nargs,
+                               k, (int)nk,
+                               d, (int)nd, kwdefs, closure);
+#else
+    result = PyEval_EvalCodeEx(co, globals, (PyObject *)NULL,
+                               args, (int)nargs,
+                               k, (int)nk,
+                               d, (int)nd, closure);
+#endif
+    Py_XDECREF(kwtuple);
+done:
+    Py_LeaveRecursiveCall();
+    return result;
 }
 #endif
 
 /* PyObjectCall */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
     PyObject *result;
@@ -2921,1161 +3021,460 @@
             PyExc_SystemError,
             "NULL result without error in PyObject_Call");
     }
     return result;
 }
 #endif
 
-/* FixUpExtensionType */
-#if CYTHON_USE_TYPE_SPECS
-static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
-#if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
-    CYTHON_UNUSED_VAR(spec);
-    CYTHON_UNUSED_VAR(type);
-#else
-    const PyType_Slot *slot = spec->slots;
-    while (slot && slot->slot && slot->slot != Py_tp_members)
-        slot++;
-    if (slot && slot->slot == Py_tp_members) {
-        int changed = 0;
-#if !(PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON)
-        const
-#endif
-            PyMemberDef *memb = (PyMemberDef*) slot->pfunc;
-        while (memb && memb->name) {
-            if (memb->name[0] == '_' && memb->name[1] == '_') {
-#if PY_VERSION_HEX < 0x030900b1
-                if (strcmp(memb->name, "__weaklistoffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-                    type->tp_weaklistoffset = memb->offset;
-                    changed = 1;
-                }
-                else if (strcmp(memb->name, "__dictoffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-                    type->tp_dictoffset = memb->offset;
-                    changed = 1;
-                }
-#if CYTHON_METH_FASTCALL
-                else if (strcmp(memb->name, "__vectorcalloffset__") == 0) {
-                    assert(memb->type == T_PYSSIZET);
-                    assert(memb->flags == READONLY);
-#if PY_VERSION_HEX >= 0x030800b4
-                    type->tp_vectorcall_offset = memb->offset;
-#else
-                    type->tp_print = (printfunc) memb->offset;
-#endif
-                    changed = 1;
-                }
-#endif
-#else
-                if ((0));
-#endif
-#if PY_VERSION_HEX <= 0x030900b1 && CYTHON_COMPILING_IN_CPYTHON
-                else if (strcmp(memb->name, "__module__") == 0) {
-                    PyObject *descr;
-                    assert(memb->type == T_OBJECT);
-                    assert(memb->flags == 0 || memb->flags == READONLY);
-                    descr = PyDescr_NewMember(type, memb);
-                    if (unlikely(!descr))
-                        return -1;
-                    if (unlikely(PyDict_SetItem(type->tp_dict, PyDescr_NAME(descr), descr) < 0)) {
-                        Py_DECREF(descr);
-                        return -1;
-                    }
-                    Py_DECREF(descr);
-                    changed = 1;
-                }
-#endif
-            }
-            memb++;
-        }
-        if (changed)
-            PyType_Modified(type);
+/* PyObjectCallMethO */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
+    PyObject *self, *result;
+    PyCFunction cfunc;
+    cfunc = PyCFunction_GET_FUNCTION(func);
+    self = PyCFunction_GET_SELF(func);
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    result = cfunc(self, arg);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
     }
-#endif
-    return 0;
+    return result;
 }
 #endif
 
-/* FetchSharedCythonModule */
-static PyObject *__Pyx_FetchSharedCythonABIModule(void) {
-    PyObject *abi_module = PyImport_AddModule((char*) __PYX_ABI_MODULE_NAME);
-    if (unlikely(!abi_module)) return NULL;
-    Py_INCREF(abi_module);
-    return abi_module;
-}
-
-/* FetchCommonType */
-static int __Pyx_VerifyCachedType(PyObject *cached_type,
-                               const char *name,
-                               Py_ssize_t basicsize,
-                               Py_ssize_t expected_basicsize) {
-    if (!PyType_Check(cached_type)) {
-        PyErr_Format(PyExc_TypeError,
-            "Shared Cython type %.200s is not a type object", name);
-        return -1;
-    }
-    if (basicsize != expected_basicsize) {
-        PyErr_Format(PyExc_TypeError,
-            "Shared Cython type %.200s has the wrong size, try recompiling",
-            name);
-        return -1;
-    }
-    return 0;
-}
-#if !CYTHON_USE_TYPE_SPECS
-static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
-    PyObject* abi_module;
-    const char* object_name;
-    PyTypeObject *cached_type = NULL;
-    abi_module = __Pyx_FetchSharedCythonABIModule();
-    if (!abi_module) return NULL;
-    object_name = strrchr(type->tp_name, '.');
-    object_name = object_name ? object_name+1 : type->tp_name;
-    cached_type = (PyTypeObject*) PyObject_GetAttrString(abi_module, object_name);
-    if (cached_type) {
-        if (__Pyx_VerifyCachedType(
-              (PyObject *)cached_type,
-              object_name,
-              cached_type->tp_basicsize,
-              type->tp_basicsize) < 0) {
-            goto bad;
-        }
-        goto done;
+/* PyObjectFastCall */
+static PyObject* __Pyx_PyObject_FastCall_fallback(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs) {
+    PyObject *argstuple;
+    PyObject *result;
+    size_t i;
+    argstuple = PyTuple_New((Py_ssize_t)nargs);
+    if (unlikely(!argstuple)) return NULL;
+    for (i = 0; i < nargs; i++) {
+        Py_INCREF(args[i]);
+        PyTuple_SET_ITEM(argstuple, (Py_ssize_t)i, args[i]);
     }
-    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
-    PyErr_Clear();
-    if (PyType_Ready(type) < 0) goto bad;
-    if (PyObject_SetAttrString(abi_module, object_name, (PyObject *)type) < 0)
-        goto bad;
-    Py_INCREF(type);
-    cached_type = type;
-done:
-    Py_DECREF(abi_module);
-    return cached_type;
-bad:
-    Py_XDECREF(cached_type);
-    cached_type = NULL;
-    goto done;
+    result = __Pyx_PyObject_Call(func, argstuple, kwargs);
+    Py_DECREF(argstuple);
+    return result;
 }
+static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t _nargs, PyObject *kwargs) {
+    Py_ssize_t nargs = __Pyx_PyVectorcall_NARGS(_nargs);
+#if CYTHON_COMPILING_IN_CPYTHON
+    if (nargs == 0 && kwargs == NULL) {
+#if defined(__Pyx_CyFunction_USED) && defined(NDEBUG)
+        if (__Pyx_IsCyOrPyCFunction(func))
 #else
-static PyTypeObject *__Pyx_FetchCommonTypeFromSpec(PyObject *module, PyType_Spec *spec, PyObject *bases) {
-    PyObject *abi_module, *cached_type = NULL;
-    const char* object_name = strrchr(spec->name, '.');
-    object_name = object_name ? object_name+1 : spec->name;
-    abi_module = __Pyx_FetchSharedCythonABIModule();
-    if (!abi_module) return NULL;
-    cached_type = PyObject_GetAttrString(abi_module, object_name);
-    if (cached_type) {
-        Py_ssize_t basicsize;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        PyObject *py_basicsize;
-        py_basicsize = PyObject_GetAttrString(cached_type, "__basicsize__");
-        if (unlikely(!py_basicsize)) goto bad;
-        basicsize = PyLong_AsSsize_t(py_basicsize);
-        Py_DECREF(py_basicsize);
-        py_basicsize = 0;
-        if (unlikely(basicsize == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
-#else
-        basicsize = likely(PyType_Check(cached_type)) ? ((PyTypeObject*) cached_type)->tp_basicsize : -1;
-#endif
-        if (__Pyx_VerifyCachedType(
-              cached_type,
-              object_name,
-              basicsize,
-              spec->basicsize) < 0) {
-            goto bad;
-        }
-        goto done;
-    }
-    if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
-    PyErr_Clear();
-    CYTHON_UNUSED_VAR(module);
-    cached_type = __Pyx_PyType_FromModuleAndSpec(abi_module, spec, bases);
-    if (unlikely(!cached_type)) goto bad;
-    if (unlikely(__Pyx_fix_up_extension_type_from_spec(spec, (PyTypeObject *) cached_type) < 0)) goto bad;
-    if (PyObject_SetAttrString(abi_module, object_name, cached_type) < 0) goto bad;
-done:
-    Py_DECREF(abi_module);
-    assert(cached_type == NULL || PyType_Check(cached_type));
-    return (PyTypeObject *) cached_type;
-bad:
-    Py_XDECREF(cached_type);
-    cached_type = NULL;
-    goto done;
-}
+        if (PyCFunction_Check(func))
 #endif
-
-/* PyVectorcallFastCallDict */
-#if CYTHON_METH_FASTCALL
-static PyObject *__Pyx_PyVectorcall_FastCallDict_kw(PyObject *func, __pyx_vectorcallfunc vc, PyObject *const *args, size_t nargs, PyObject *kw)
-{
-    PyObject *res = NULL;
-    PyObject *kwnames;
-    PyObject **newargs;
-    PyObject **kwvalues;
-    Py_ssize_t i, pos;
-    size_t j;
-    PyObject *key, *value;
-    unsigned long keys_are_strings;
-    Py_ssize_t nkw = PyDict_GET_SIZE(kw);
-    newargs = (PyObject **)PyMem_Malloc((nargs + (size_t)nkw) * sizeof(args[0]));
-    if (unlikely(newargs == NULL)) {
-        PyErr_NoMemory();
-        return NULL;
-    }
-    for (j = 0; j < nargs; j++) newargs[j] = args[j];
-    kwnames = PyTuple_New(nkw);
-    if (unlikely(kwnames == NULL)) {
-        PyMem_Free(newargs);
-        return NULL;
+        {
+            if (likely(PyCFunction_GET_FLAGS(func) & METH_NOARGS)) {
+                return __Pyx_PyObject_CallMethO(func, NULL);
+            }
+        }
     }
-    kwvalues = newargs + nargs;
-    pos = i = 0;
-    keys_are_strings = Py_TPFLAGS_UNICODE_SUBCLASS;
-    while (PyDict_Next(kw, &pos, &key, &value)) {
-        keys_are_strings &= Py_TYPE(key)->tp_flags;
-        Py_INCREF(key);
-        Py_INCREF(value);
-        PyTuple_SET_ITEM(kwnames, i, key);
-        kwvalues[i] = value;
-        i++;
-    }
-    if (unlikely(!keys_are_strings)) {
-        PyErr_SetString(PyExc_TypeError, "keywords must be strings");
-        goto cleanup;
-    }
-    res = vc(func, newargs, nargs, kwnames);
-cleanup:
-    Py_DECREF(kwnames);
-    for (i = 0; i < nkw; i++)
-        Py_DECREF(kwvalues[i]);
-    PyMem_Free(newargs);
-    return res;
-}
-static CYTHON_INLINE PyObject *__Pyx_PyVectorcall_FastCallDict(PyObject *func, __pyx_vectorcallfunc vc, PyObject *const *args, size_t nargs, PyObject *kw)
-{
-    if (likely(kw == NULL) || PyDict_GET_SIZE(kw) == 0) {
-        return vc(func, args, nargs, NULL);
+    else if (nargs == 1 && kwargs == NULL) {
+        if (PyCFunction_Check(func))
+        {
+            if (likely(PyCFunction_GET_FLAGS(func) & METH_O)) {
+                return __Pyx_PyObject_CallMethO(func, args[0]);
+            }
+        }
     }
-    return __Pyx_PyVectorcall_FastCallDict_kw(func, vc, args, nargs, kw);
-}
-#endif
-
-/* CythonFunctionShared */
-static CYTHON_INLINE void __Pyx__CyFunction_SetClassObj(__pyx_CyFunctionObject* f, PyObject* classobj) {
-#if PY_VERSION_HEX < 0x030900B1
-    __Pyx_Py_XDECREF_SET(
-        __Pyx_CyFunction_GetClassObj(f),
-            ((classobj) ? __Pyx_NewRef(classobj) : NULL));
-#else
-    __Pyx_Py_XDECREF_SET(
-        ((PyCMethodObject *) (f))->mm_class,
-        (PyTypeObject*)((classobj) ? __Pyx_NewRef(classobj) : NULL));
 #endif
-}
-static PyObject *
-__Pyx_CyFunction_get_doc(__pyx_CyFunctionObject *op, void *closure)
-{
-    CYTHON_UNUSED_VAR(closure);
-    if (unlikely(op->func_doc == NULL)) {
-        if (((PyCFunctionObject*)op)->m_ml->ml_doc) {
-#if PY_MAJOR_VERSION >= 3
-            op->func_doc = PyUnicode_FromString(((PyCFunctionObject*)op)->m_ml->ml_doc);
-#else
-            op->func_doc = PyString_FromString(((PyCFunctionObject*)op)->m_ml->ml_doc);
-#endif
-            if (unlikely(op->func_doc == NULL))
-                return NULL;
+    #if PY_VERSION_HEX < 0x030800B1
+    #if CYTHON_FAST_PYCCALL
+    if (PyCFunction_Check(func)) {
+        if (kwargs) {
+            return _PyCFunction_FastCallDict(func, args, nargs, kwargs);
         } else {
-            Py_INCREF(Py_None);
-            return Py_None;
+            return _PyCFunction_FastCallKeywords(func, args, nargs, NULL);
         }
     }
-    Py_INCREF(op->func_doc);
-    return op->func_doc;
-}
-static int
-__Pyx_CyFunction_set_doc(__pyx_CyFunctionObject *op, PyObject *value, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    if (value == NULL) {
-        value = Py_None;
-    }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->func_doc, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_name(__pyx_CyFunctionObject *op, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(op->func_name == NULL)) {
-#if PY_MAJOR_VERSION >= 3
-        op->func_name = PyUnicode_InternFromString(((PyCFunctionObject*)op)->m_ml->ml_name);
-#else
-        op->func_name = PyString_InternFromString(((PyCFunctionObject*)op)->m_ml->ml_name);
-#endif
-        if (unlikely(op->func_name == NULL))
-            return NULL;
-    }
-    Py_INCREF(op->func_name);
-    return op->func_name;
-}
-static int
-__Pyx_CyFunction_set_name(__pyx_CyFunctionObject *op, PyObject *value, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-#if PY_MAJOR_VERSION >= 3
-    if (unlikely(value == NULL || !PyUnicode_Check(value)))
-#else
-    if (unlikely(value == NULL || !PyString_Check(value)))
-#endif
-    {
-        PyErr_SetString(PyExc_TypeError,
-                        "__name__ must be set to a string object");
-        return -1;
+    #if PY_VERSION_HEX >= 0x030700A1
+    if (!kwargs && __Pyx_IS_TYPE(func, &PyMethodDescr_Type)) {
+        return _PyMethodDescr_FastCallKeywords(func, args, nargs, NULL);
     }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->func_name, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_qualname(__pyx_CyFunctionObject *op, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    Py_INCREF(op->func_qualname);
-    return op->func_qualname;
-}
-static int
-__Pyx_CyFunction_set_qualname(__pyx_CyFunctionObject *op, PyObject *value, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-#if PY_MAJOR_VERSION >= 3
-    if (unlikely(value == NULL || !PyUnicode_Check(value)))
-#else
-    if (unlikely(value == NULL || !PyString_Check(value)))
-#endif
-    {
-        PyErr_SetString(PyExc_TypeError,
-                        "__qualname__ must be set to a string object");
-        return -1;
+    #endif
+    #endif
+    #if CYTHON_FAST_PYCALL
+    if (PyFunction_Check(func)) {
+        return __Pyx_PyFunction_FastCallDict(func, args, nargs, kwargs);
     }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->func_qualname, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_dict(__pyx_CyFunctionObject *op, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(op->func_dict == NULL)) {
-        op->func_dict = PyDict_New();
-        if (unlikely(op->func_dict == NULL))
-            return NULL;
+    #endif
+    #endif
+    #if CYTHON_VECTORCALL
+    vectorcallfunc f = _PyVectorcall_Function(func);
+    if (f) {
+        return f(func, args, (size_t)nargs, kwargs);
     }
-    Py_INCREF(op->func_dict);
-    return op->func_dict;
-}
-static int
-__Pyx_CyFunction_set_dict(__pyx_CyFunctionObject *op, PyObject *value, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(value == NULL)) {
-        PyErr_SetString(PyExc_TypeError,
-               "function's dictionary may not be deleted");
-        return -1;
+    #elif defined(__Pyx_CyFunction_USED) && CYTHON_BACKPORT_VECTORCALL
+    if (__Pyx_CyFunction_CheckExact(func)) {
+        __pyx_vectorcallfunc f = __Pyx_CyFunction_func_vectorcall(func);
+        if (f) return f(func, args, (size_t)nargs, kwargs);
     }
-    if (unlikely(!PyDict_Check(value))) {
-        PyErr_SetString(PyExc_TypeError,
-               "setting function's dictionary to a non-dict");
-        return -1;
+    #endif
+    if (nargs == 0) {
+        return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->func_dict, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_globals(__pyx_CyFunctionObject *op, void *context)
-{
-    CYTHON_UNUSED_VAR(context);
-    Py_INCREF(op->func_globals);
-    return op->func_globals;
+    return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
-static PyObject *
-__Pyx_CyFunction_get_closure(__pyx_CyFunctionObject *op, void *context)
-{
-    CYTHON_UNUSED_VAR(op);
-    CYTHON_UNUSED_VAR(context);
-    Py_INCREF(Py_None);
-    return Py_None;
+
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
-static PyObject *
-__Pyx_CyFunction_get_code(__pyx_CyFunctionObject *op, void *context)
+
+/* Py3UpdateBases */
+static PyObject*
+__Pyx_PEP560_update_bases(PyObject *bases)
 {
-    PyObject* result = (op->func_code) ? op->func_code : Py_None;
-    CYTHON_UNUSED_VAR(context);
-    Py_INCREF(result);
-    return result;
-}
-static int
-__Pyx_CyFunction_init_defaults(__pyx_CyFunctionObject *op) {
-    int result = 0;
-    PyObject *res = op->defaults_getter((PyObject *) op);
-    if (unlikely(!res))
-        return -1;
-    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    op->defaults_tuple = PyTuple_GET_ITEM(res, 0);
-    Py_INCREF(op->defaults_tuple);
-    op->defaults_kwdict = PyTuple_GET_ITEM(res, 1);
-    Py_INCREF(op->defaults_kwdict);
-    #else
-    op->defaults_tuple = PySequence_ITEM(res, 0);
-    if (unlikely(!op->defaults_tuple)) result = -1;
-    else {
-        op->defaults_kwdict = PySequence_ITEM(res, 1);
-        if (unlikely(!op->defaults_kwdict)) result = -1;
+    Py_ssize_t i, j, size_bases;
+    PyObject *base, *meth, *new_base, *result, *new_bases = NULL;
+    size_bases = PyTuple_GET_SIZE(bases);
+    for (i = 0; i < size_bases; i++) {
+        base  = PyTuple_GET_ITEM(bases, i);
+        if (PyType_Check(base)) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        meth = __Pyx_PyObject_GetAttrStrNoError(base, __pyx_n_s_mro_entries);
+        if (!meth && PyErr_Occurred()) {
+            goto error;
+        }
+        if (!meth) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        new_base = __Pyx_PyObject_CallOneArg(meth, bases);
+        Py_DECREF(meth);
+        if (!new_base) {
+            goto error;
+        }
+        if (!PyTuple_Check(new_base)) {
+            PyErr_SetString(PyExc_TypeError,
+                            "__mro_entries__ must return a tuple");
+            Py_DECREF(new_base);
+            goto error;
+        }
+        if (!new_bases) {
+            if (!(new_bases = PyList_New(i))) {
+                goto error;
+            }
+            for (j = 0; j < i; j++) {
+                base = PyTuple_GET_ITEM(bases, j);
+                PyList_SET_ITEM(new_bases, j, base);
+                Py_INCREF(base);
+            }
+        }
+        j = PyList_GET_SIZE(new_bases);
+        if (PyList_SetSlice(new_bases, j, j, new_base) < 0) {
+            goto error;
+        }
+        Py_DECREF(new_base);
+    }
+    if (!new_bases) {
+        Py_INCREF(bases);
+        return bases;
     }
-    #endif
-    Py_DECREF(res);
+    result = PyList_AsTuple(new_bases);
+    Py_DECREF(new_bases);
     return result;
+error:
+    Py_XDECREF(new_bases);
+    return NULL;
 }
-static int
-__Pyx_CyFunction_set_defaults(__pyx_CyFunctionObject *op, PyObject* value, void *context) {
-    CYTHON_UNUSED_VAR(context);
-    if (!value) {
-        value = Py_None;
-    } else if (unlikely(value != Py_None && !PyTuple_Check(value))) {
+
+/* CalculateMetaclass */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
+    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
+    for (i=0; i < nbases; i++) {
+        PyTypeObject *tmptype;
+        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
+        tmptype = Py_TYPE(tmp);
+#if PY_MAJOR_VERSION < 3
+        if (tmptype == &PyClass_Type)
+            continue;
+#endif
+        if (!metaclass) {
+            metaclass = tmptype;
+            continue;
+        }
+        if (PyType_IsSubtype(metaclass, tmptype))
+            continue;
+        if (PyType_IsSubtype(tmptype, metaclass)) {
+            metaclass = tmptype;
+            continue;
+        }
         PyErr_SetString(PyExc_TypeError,
-                        "__defaults__ must be set to a tuple object");
-        return -1;
+                        "metaclass conflict: "
+                        "the metaclass of a derived class "
+                        "must be a (non-strict) subclass "
+                        "of the metaclasses of all its bases");
+        return NULL;
     }
-    PyErr_WarnEx(PyExc_RuntimeWarning, "changes to cyfunction.__defaults__ will not "
-                 "currently affect the values used in function calls", 1);
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->defaults_tuple, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_defaults(__pyx_CyFunctionObject *op, void *context) {
-    PyObject* result = op->defaults_tuple;
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(!result)) {
-        if (op->defaults_getter) {
-            if (unlikely(__Pyx_CyFunction_init_defaults(op) < 0)) return NULL;
-            result = op->defaults_tuple;
-        } else {
-            result = Py_None;
-        }
+    if (!metaclass) {
+#if PY_MAJOR_VERSION < 3
+        metaclass = &PyClass_Type;
+#else
+        metaclass = &PyType_Type;
+#endif
     }
-    Py_INCREF(result);
-    return result;
+    Py_INCREF((PyObject*) metaclass);
+    return (PyObject*) metaclass;
 }
-static int
-__Pyx_CyFunction_set_kwdefaults(__pyx_CyFunctionObject *op, PyObject* value, void *context) {
-    CYTHON_UNUSED_VAR(context);
-    if (!value) {
-        value = Py_None;
-    } else if (unlikely(value != Py_None && !PyDict_Check(value))) {
-        PyErr_SetString(PyExc_TypeError,
-                        "__kwdefaults__ must be set to a dict object");
-        return -1;
-    }
-    PyErr_WarnEx(PyExc_RuntimeWarning, "changes to cyfunction.__kwdefaults__ will not "
-                 "currently affect the values used in function calls", 1);
-    Py_INCREF(value);
-    __Pyx_Py_XDECREF_SET(op->defaults_kwdict, value);
-    return 0;
+
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
-static PyObject *
-__Pyx_CyFunction_get_kwdefaults(__pyx_CyFunctionObject *op, void *context) {
-    PyObject* result = op->defaults_kwdict;
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(!result)) {
-        if (op->defaults_getter) {
-            if (unlikely(__Pyx_CyFunction_init_defaults(op) < 0)) return NULL;
-            result = op->defaults_kwdict;
+
+/* PyObjectLookupSpecial */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error) {
+    PyObject *res;
+    PyTypeObject *tp = Py_TYPE(obj);
+#if PY_MAJOR_VERSION < 3
+    if (unlikely(PyInstance_Check(obj)))
+        return with_error ? __Pyx_PyObject_GetAttrStr(obj, attr_name) : __Pyx_PyObject_GetAttrStrNoError(obj, attr_name);
+#endif
+    res = _PyType_Lookup(tp, attr_name);
+    if (likely(res)) {
+        descrgetfunc f = Py_TYPE(res)->tp_descr_get;
+        if (!f) {
+            Py_INCREF(res);
         } else {
-            result = Py_None;
+            res = f(res, obj, (PyObject *)tp);
         }
+    } else if (with_error) {
+        PyErr_SetObject(PyExc_AttributeError, attr_name);
     }
-    Py_INCREF(result);
-    return result;
-}
-static int
-__Pyx_CyFunction_set_annotations(__pyx_CyFunctionObject *op, PyObject* value, void *context) {
-    CYTHON_UNUSED_VAR(context);
-    if (!value || value == Py_None) {
-        value = NULL;
-    } else if (unlikely(!PyDict_Check(value))) {
-        PyErr_SetString(PyExc_TypeError,
-                        "__annotations__ must be set to a dict object");
-        return -1;
-    }
-    Py_XINCREF(value);
-    __Pyx_Py_XDECREF_SET(op->func_annotations, value);
-    return 0;
-}
-static PyObject *
-__Pyx_CyFunction_get_annotations(__pyx_CyFunctionObject *op, void *context) {
-    PyObject* result = op->func_annotations;
-    CYTHON_UNUSED_VAR(context);
-    if (unlikely(!result)) {
-        result = PyDict_New();
-        if (unlikely(!result)) return NULL;
-        op->func_annotations = result;
-    }
-    Py_INCREF(result);
-    return result;
+    return res;
 }
-static PyObject *
-__Pyx_CyFunction_get_is_coroutine(__pyx_CyFunctionObject *op, void *context) {
-    int is_coroutine;
-    CYTHON_UNUSED_VAR(context);
-    if (op->func_is_coroutine) {
-        return __Pyx_NewRef(op->func_is_coroutine);
-    }
-    is_coroutine = op->flags & __Pyx_CYFUNCTION_COROUTINE;
-#if PY_VERSION_HEX >= 0x03050000
-    if (is_coroutine) {
-        PyObject *module, *fromlist, *marker = __pyx_n_s_is_coroutine;
-        fromlist = PyList_New(1);
-        if (unlikely(!fromlist)) return NULL;
-        Py_INCREF(marker);
-        PyList_SET_ITEM(fromlist, 0, marker);
-        module = PyImport_ImportModuleLevelObject(__pyx_n_s_asyncio_coroutines, NULL, NULL, fromlist, 0);
-        Py_DECREF(fromlist);
-        if (unlikely(!module)) goto ignore;
-        op->func_is_coroutine = __Pyx_PyObject_GetAttrStr(module, marker);
-        Py_DECREF(module);
-        if (likely(op->func_is_coroutine)) {
-            return __Pyx_NewRef(op->func_is_coroutine);
+#endif
+
+/* Py3ClassCreate */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
+                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
+    PyObject *ns;
+    if (metaclass) {
+        PyObject *prep = __Pyx_PyObject_GetAttrStrNoError(metaclass, __pyx_n_s_prepare);
+        if (prep) {
+            PyObject *pargs[3] = {NULL, name, bases};
+            ns = __Pyx_PyObject_FastCallDict(prep, pargs+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET, mkw);
+            Py_DECREF(prep);
+        } else {
+            if (unlikely(PyErr_Occurred()))
+                return NULL;
+            ns = PyDict_New();
         }
-ignore:
-        PyErr_Clear();
+    } else {
+        ns = PyDict_New();
     }
-#endif
-    op->func_is_coroutine = __Pyx_PyBool_FromLong(is_coroutine);
-    return __Pyx_NewRef(op->func_is_coroutine);
-}
-static PyGetSetDef __pyx_CyFunction_getsets[] = {
-    {(char *) "func_doc", (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
-    {(char *) "__doc__",  (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
-    {(char *) "func_name", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
-    {(char *) "__name__", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
-    {(char *) "__qualname__", (getter)__Pyx_CyFunction_get_qualname, (setter)__Pyx_CyFunction_set_qualname, 0, 0},
-    {(char *) "func_dict", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
-    {(char *) "__dict__", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
-    {(char *) "func_globals", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
-    {(char *) "__globals__", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
-    {(char *) "func_closure", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
-    {(char *) "__closure__", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
-    {(char *) "func_code", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
-    {(char *) "__code__", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
-    {(char *) "func_defaults", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
-    {(char *) "__defaults__", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
-    {(char *) "__kwdefaults__", (getter)__Pyx_CyFunction_get_kwdefaults, (setter)__Pyx_CyFunction_set_kwdefaults, 0, 0},
-    {(char *) "__annotations__", (getter)__Pyx_CyFunction_get_annotations, (setter)__Pyx_CyFunction_set_annotations, 0, 0},
-    {(char *) "_is_coroutine", (getter)__Pyx_CyFunction_get_is_coroutine, 0, 0, 0},
-    {0, 0, 0, 0, 0}
-};
-static PyMemberDef __pyx_CyFunction_members[] = {
-    {(char *) "__module__", T_OBJECT, offsetof(PyCFunctionObject, m_module), 0, 0},
-#if CYTHON_USE_TYPE_SPECS
-    {(char *) "__dictoffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_dict), READONLY, 0},
-#if CYTHON_METH_FASTCALL
-#if CYTHON_BACKPORT_VECTORCALL
-    {(char *) "__vectorcalloffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_vectorcall), READONLY, 0},
-#else
-    {(char *) "__vectorcalloffset__", T_PYSSIZET, offsetof(PyCFunctionObject, vectorcall), READONLY, 0},
-#endif
-#endif
-#if PY_VERSION_HEX < 0x030500A0
-    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(__pyx_CyFunctionObject, func_weakreflist), READONLY, 0},
-#else
-    {(char *) "__weaklistoffset__", T_PYSSIZET, offsetof(PyCFunctionObject, m_weakreflist), READONLY, 0},
-#endif
-#endif
-    {0, 0, 0,  0, 0}
-};
-static PyObject *
-__Pyx_CyFunction_reduce(__pyx_CyFunctionObject *m, PyObject *args)
-{
-    CYTHON_UNUSED_VAR(args);
-#if PY_MAJOR_VERSION >= 3
-    Py_INCREF(m->func_qualname);
-    return m->func_qualname;
-#else
-    return PyString_FromString(((PyCFunctionObject*)m)->m_ml->ml_name);
-#endif
-}
-static PyMethodDef __pyx_CyFunction_methods[] = {
-    {"__reduce__", (PyCFunction)__Pyx_CyFunction_reduce, METH_VARARGS, 0},
-    {0, 0, 0, 0}
-};
-#if PY_VERSION_HEX < 0x030500A0
-#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func_weakreflist)
-#else
-#define __Pyx_CyFunction_weakreflist(cyfunc) (((PyCFunctionObject*)cyfunc)->m_weakreflist)
-#endif
-static PyObject *__Pyx_CyFunction_Init(__pyx_CyFunctionObject *op, PyMethodDef *ml, int flags, PyObject* qualname,
-                                       PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
-    PyCFunctionObject *cf = (PyCFunctionObject*) op;
-    if (unlikely(op == NULL))
+    if (unlikely(!ns))
         return NULL;
-    op->flags = flags;
-    __Pyx_CyFunction_weakreflist(op) = NULL;
-    cf->m_ml = ml;
-    cf->m_self = (PyObject *) op;
-    Py_XINCREF(closure);
-    op->func_closure = closure;
-    Py_XINCREF(module);
-    cf->m_module = module;
-    op->func_dict = NULL;
-    op->func_name = NULL;
-    Py_INCREF(qualname);
-    op->func_qualname = qualname;
-    op->func_doc = NULL;
-#if PY_VERSION_HEX < 0x030900B1
-    op->func_classobj = NULL;
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
+#if PY_VERSION_HEX >= 0x03030000
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
 #else
-    ((PyCMethodObject*)op)->mm_class = NULL;
-#endif
-    op->func_globals = globals;
-    Py_INCREF(op->func_globals);
-    Py_XINCREF(code);
-    op->func_code = code;
-    op->defaults_pyobjects = 0;
-    op->defaults_size = 0;
-    op->defaults = NULL;
-    op->defaults_tuple = NULL;
-    op->defaults_kwdict = NULL;
-    op->defaults_getter = NULL;
-    op->func_annotations = NULL;
-    op->func_is_coroutine = NULL;
-#if CYTHON_METH_FASTCALL
-    switch (ml->ml_flags & (METH_VARARGS | METH_FASTCALL | METH_NOARGS | METH_O | METH_KEYWORDS | METH_METHOD)) {
-    case METH_NOARGS:
-        __Pyx_CyFunction_func_vectorcall(op) = __Pyx_CyFunction_Vectorcall_NOARGS;
-        break;
-    case METH_O:
-        __Pyx_CyFunction_func_vectorcall(op) = __Pyx_CyFunction_Vectorcall_O;
-        break;
-    case METH_METHOD | METH_FASTCALL | METH_KEYWORDS:
-        __Pyx_CyFunction_func_vectorcall(op) = __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS_METHOD;
-        break;
-    case METH_FASTCALL | METH_KEYWORDS:
-        __Pyx_CyFunction_func_vectorcall(op) = __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS;
-        break;
-    case METH_VARARGS | METH_KEYWORDS:
-        __Pyx_CyFunction_func_vectorcall(op) = NULL;
-        break;
-    default:
-        PyErr_SetString(PyExc_SystemError, "Bad call flags for CyFunction");
-        Py_DECREF(op);
-        return NULL;
-    }
+    CYTHON_MAYBE_UNUSED_VAR(qualname);
 #endif
-    return (PyObject *) op;
+    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
+    return ns;
+bad:
+    Py_DECREF(ns);
+    return NULL;
 }
-static int
-__Pyx_CyFunction_clear(__pyx_CyFunctionObject *m)
-{
-    Py_CLEAR(m->func_closure);
-    Py_CLEAR(((PyCFunctionObject*)m)->m_module);
-    Py_CLEAR(m->func_dict);
-    Py_CLEAR(m->func_name);
-    Py_CLEAR(m->func_qualname);
-    Py_CLEAR(m->func_doc);
-    Py_CLEAR(m->func_globals);
-    Py_CLEAR(m->func_code);
-#if PY_VERSION_HEX < 0x030900B1
-    Py_CLEAR(__Pyx_CyFunction_GetClassObj(m));
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+static int __Pyx_SetNamesPEP487(PyObject *type_obj) {
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *names_to_set, *key, *value, *set_name, *tmp;
+    Py_ssize_t i = 0;
+#if CYTHON_USE_TYPE_SLOTS
+    names_to_set = PyDict_Copy(type->tp_dict);
 #else
     {
-        PyObject *cls = (PyObject*) ((PyCMethodObject *) (m))->mm_class;
-        ((PyCMethodObject *) (m))->mm_class = NULL;
-        Py_XDECREF(cls);
-    }
-#endif
-    Py_CLEAR(m->defaults_tuple);
-    Py_CLEAR(m->defaults_kwdict);
-    Py_CLEAR(m->func_annotations);
-    Py_CLEAR(m->func_is_coroutine);
-    if (m->defaults) {
-        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
-        int i;
-        for (i = 0; i < m->defaults_pyobjects; i++)
-            Py_XDECREF(pydefaults[i]);
-        PyObject_Free(m->defaults);
-        m->defaults = NULL;
-    }
-    return 0;
-}
-static void __Pyx__CyFunction_dealloc(__pyx_CyFunctionObject *m)
-{
-    if (__Pyx_CyFunction_weakreflist(m) != NULL)
-        PyObject_ClearWeakRefs((PyObject *) m);
-    __Pyx_CyFunction_clear(m);
-    __Pyx_PyHeapTypeObject_GC_Del(m);
-}
-static void __Pyx_CyFunction_dealloc(__pyx_CyFunctionObject *m)
-{
-    PyObject_GC_UnTrack(m);
-    __Pyx__CyFunction_dealloc(m);
-}
-static int __Pyx_CyFunction_traverse(__pyx_CyFunctionObject *m, visitproc visit, void *arg)
-{
-    Py_VISIT(m->func_closure);
-    Py_VISIT(((PyCFunctionObject*)m)->m_module);
-    Py_VISIT(m->func_dict);
-    Py_VISIT(m->func_name);
-    Py_VISIT(m->func_qualname);
-    Py_VISIT(m->func_doc);
-    Py_VISIT(m->func_globals);
-    Py_VISIT(m->func_code);
-    Py_VISIT(__Pyx_CyFunction_GetClassObj(m));
-    Py_VISIT(m->defaults_tuple);
-    Py_VISIT(m->defaults_kwdict);
-    Py_VISIT(m->func_is_coroutine);
-    if (m->defaults) {
-        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
-        int i;
-        for (i = 0; i < m->defaults_pyobjects; i++)
-            Py_VISIT(pydefaults[i]);
+        PyObject *d = PyObject_GetAttr(type_obj, __pyx_n_s_dict);
+        names_to_set = NULL;
+        if (likely(d)) {
+            PyObject *names_to_set = PyDict_New();
+            int ret = likely(names_to_set) ? PyDict_Update(names_to_set, d) : -1;
+            Py_DECREF(d);
+            if (unlikely(ret < 0))
+                Py_CLEAR(names_to_set);
+        }
     }
-    return 0;
-}
-static PyObject*
-__Pyx_CyFunction_repr(__pyx_CyFunctionObject *op)
-{
+#endif
+    if (unlikely(names_to_set == NULL))
+        goto bad;
+    while (PyDict_Next(names_to_set, &i, &key, &value)) {
+        set_name = __Pyx_PyObject_LookupSpecialNoError(value, __pyx_n_s_set_name);
+        if (unlikely(set_name != NULL)) {
+            tmp = __Pyx_PyObject_Call2Args(set_name, type_obj, key);
+            Py_DECREF(set_name);
+            if (unlikely(tmp == NULL)) {
+                __Pyx_TypeName value_type_name =
+                    __Pyx_PyType_GetName(Py_TYPE(value));
+                __Pyx_TypeName type_name = __Pyx_PyType_GetName(type);
+                PyErr_Format(PyExc_RuntimeError,
 #if PY_MAJOR_VERSION >= 3
-    return PyUnicode_FromFormat("<cyfunction %U at %p>",
-                                op->func_qualname, (void *)op);
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %R " "in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name, key, type_name);
 #else
-    return PyString_FromFormat("<cyfunction %s at %p>",
-                               PyString_AsString(op->func_qualname), (void *)op);
-#endif
-}
-static PyObject * __Pyx_CyFunction_CallMethod(PyObject *func, PyObject *self, PyObject *arg, PyObject *kw) {
-    PyCFunctionObject* f = (PyCFunctionObject*)func;
-    PyCFunction meth = f->m_ml->ml_meth;
-    Py_ssize_t size;
-    switch (f->m_ml->ml_flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
-    case METH_VARARGS:
-        if (likely(kw == NULL || PyDict_Size(kw) == 0))
-            return (*meth)(self, arg);
-        break;
-    case METH_VARARGS | METH_KEYWORDS:
-        return (*(PyCFunctionWithKeywords)(void*)meth)(self, arg, kw);
-    case METH_NOARGS:
-        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
-            size = PyTuple_GET_SIZE(arg);
-            if (likely(size == 0))
-                return (*meth)(self, NULL);
-            PyErr_Format(PyExc_TypeError,
-                "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
-                f->m_ml->ml_name, size);
-            return NULL;
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %.100s in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name,
+                    PyString_Check(key) ? PyString_AS_STRING(key) : "?",
+                    type_name);
+#endif
+                goto bad;
+            } else {
+                Py_DECREF(tmp);
+            }
         }
-        break;
-    case METH_O:
-        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
-            size = PyTuple_GET_SIZE(arg);
-            if (likely(size == 1)) {
-                PyObject *result, *arg0;
-                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                arg0 = PyTuple_GET_ITEM(arg, 0);
-                #else
-                arg0 = PySequence_ITEM(arg, 0); if (unlikely(!arg0)) return NULL;
-                #endif
-                result = (*meth)(self, arg0);
-                #if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
-                Py_DECREF(arg0);
-                #endif
-                return result;
+        else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+    Py_DECREF(names_to_set);
+    return 0;
+bad:
+    Py_XDECREF(names_to_set);
+    return -1;
+}
+static PyObject *__Pyx_InitSubclassPEP487(PyObject *type_obj, PyObject *mkw) {
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *mro = type->tp_mro;
+    Py_ssize_t i, nbases;
+    if (unlikely(!mro)) goto done;
+    (void) &__Pyx_GetBuiltinName;
+    Py_INCREF(mro);
+    nbases = PyTuple_GET_SIZE(mro);
+    assert(PyTuple_GET_ITEM(mro, 0) == type_obj);
+    for (i = 1; i < nbases-1; i++) {
+        PyObject *base, *dict, *meth;
+        base = PyTuple_GET_ITEM(mro, i);
+        dict = ((PyTypeObject *)base)->tp_dict;
+        meth = __Pyx_PyDict_GetItemStrWithError(dict, __pyx_n_s_init_subclass);
+        if (unlikely(meth)) {
+            descrgetfunc f = Py_TYPE(meth)->tp_descr_get;
+            PyObject *res;
+            Py_INCREF(meth);
+            if (likely(f)) {
+                res = f(meth, NULL, type_obj);
+                Py_DECREF(meth);
+                if (unlikely(!res)) goto bad;
+                meth = res;
             }
-            PyErr_Format(PyExc_TypeError,
-                "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
-                f->m_ml->ml_name, size);
-            return NULL;
+            res = __Pyx_PyObject_FastCallDict(meth, NULL, 0, mkw);
+            Py_DECREF(meth);
+            if (unlikely(!res)) goto bad;
+            Py_DECREF(res);
+            goto done;
+        } else if (unlikely(PyErr_Occurred())) {
+            goto bad;
         }
-        break;
-    default:
-        PyErr_SetString(PyExc_SystemError, "Bad call flags for CyFunction");
-        return NULL;
     }
-    PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
-                 f->m_ml->ml_name);
+done:
+    Py_XDECREF(mro);
+    return type_obj;
+bad:
+    Py_XDECREF(mro);
+    Py_DECREF(type_obj);
     return NULL;
-}
-static CYTHON_INLINE PyObject *__Pyx_CyFunction_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    return __Pyx_CyFunction_CallMethod(func, ((PyCFunctionObject*)func)->m_self, arg, kw);
-}
-static PyObject *__Pyx_CyFunction_CallAsMethod(PyObject *func, PyObject *args, PyObject *kw) {
-    PyObject *result;
-    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *) func;
-#if CYTHON_METH_FASTCALL
-     __pyx_vectorcallfunc vc = __Pyx_CyFunction_func_vectorcall(cyfunc);
-    if (vc) {
-#if CYTHON_ASSUME_SAFE_MACROS
-        return __Pyx_PyVectorcall_FastCallDict(func, vc, &PyTuple_GET_ITEM(args, 0), (size_t)PyTuple_GET_SIZE(args), kw);
 #else
-        (void) &__Pyx_PyVectorcall_FastCallDict;
-        return PyVectorcall_Call(func, args, kw);
+    PyObject *super_type, *super, *func, *res;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    super_type = __Pyx_GetBuiltinName(__pyx_n_s_super);
+#else
+    super_type = (PyObject*) &PySuper_Type;
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    super = likely(super_type) ? __Pyx_PyObject_Call2Args(super_type, type_obj, type_obj) : NULL;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    Py_XDECREF(super_type);
 #endif
+    if (unlikely(!super)) {
+        Py_CLEAR(type_obj);
+        goto done;
     }
+    func = __Pyx_PyObject_GetAttrStrNoError(super, __pyx_n_s_init_subclass);
+    Py_DECREF(super);
+    if (likely(!func)) {
+        if (unlikely(PyErr_Occurred()))
+            Py_CLEAR(type_obj);
+        goto done;
+    }
+    res = __Pyx_PyObject_FastCallDict(func, NULL, 0, mkw);
+    Py_DECREF(func);
+    if (unlikely(!res))
+        Py_CLEAR(type_obj);
+    Py_XDECREF(res);
+done:
+    return type_obj;
 #endif
-    if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
-        Py_ssize_t argc;
-        PyObject *new_args;
-        PyObject *self;
-        argc = PyTuple_GET_SIZE(args);
-        new_args = PyTuple_GetSlice(args, 1, argc);
-        if (unlikely(!new_args))
-            return NULL;
-        self = PyTuple_GetItem(args, 0);
-        if (unlikely(!self)) {
-            Py_DECREF(new_args);
-#if PY_MAJOR_VERSION > 2
-            PyErr_Format(PyExc_TypeError,
-                         "unbound method %.200S() needs an argument",
-                         cyfunc->func_qualname);
-#else
-            PyErr_SetString(PyExc_TypeError,
-                            "unbound method needs an argument");
+}
 #endif
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
+                                      PyObject *dict, PyObject *mkw,
+                                      int calculate_metaclass, int allow_py2_metaclass) {
+    PyObject *result;
+    PyObject *owned_metaclass = NULL;
+    PyObject *margs[4] = {NULL, name, bases, dict};
+    if (allow_py2_metaclass) {
+        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
+        if (owned_metaclass) {
+            metaclass = owned_metaclass;
+        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
+            PyErr_Clear();
+        } else {
             return NULL;
         }
-        result = __Pyx_CyFunction_CallMethod(func, self, new_args, kw);
-        Py_DECREF(new_args);
-    } else {
-        result = __Pyx_CyFunction_Call(func, args, kw);
-    }
-    return result;
-}
-#if CYTHON_METH_FASTCALL
-static CYTHON_INLINE int __Pyx_CyFunction_Vectorcall_CheckArgs(__pyx_CyFunctionObject *cyfunc, Py_ssize_t nargs, PyObject *kwnames)
-{
-    int ret = 0;
-    if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
-        if (unlikely(nargs < 1)) {
-            PyErr_Format(PyExc_TypeError, "%.200s() needs an argument",
-                         ((PyCFunctionObject*)cyfunc)->m_ml->ml_name);
-            return -1;
-        }
-        ret = 1;
-    }
-    if (unlikely(kwnames) && unlikely(PyTuple_GET_SIZE(kwnames))) {
-        PyErr_Format(PyExc_TypeError,
-                     "%.200s() takes no keyword arguments", ((PyCFunctionObject*)cyfunc)->m_ml->ml_name);
-        return -1;
-    }
-    return ret;
-}
-static PyObject * __Pyx_CyFunction_Vectorcall_NOARGS(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames)
-{
-    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *)func;
-    PyMethodDef* def = ((PyCFunctionObject*)cyfunc)->m_ml;
-#if CYTHON_BACKPORT_VECTORCALL
-    Py_ssize_t nargs = (Py_ssize_t)nargsf;
-#else
-    Py_ssize_t nargs = PyVectorcall_NARGS(nargsf);
-#endif
-    PyObject *self;
-    switch (__Pyx_CyFunction_Vectorcall_CheckArgs(cyfunc, nargs, kwnames)) {
-    case 1:
-        self = args[0];
-        args += 1;
-        nargs -= 1;
-        break;
-    case 0:
-        self = ((PyCFunctionObject*)cyfunc)->m_self;
-        break;
-    default:
-        return NULL;
-    }
-    if (unlikely(nargs != 0)) {
-        PyErr_Format(PyExc_TypeError,
-            "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
-            def->ml_name, nargs);
-        return NULL;
-    }
-    return def->ml_meth(self, NULL);
-}
-static PyObject * __Pyx_CyFunction_Vectorcall_O(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames)
-{
-    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *)func;
-    PyMethodDef* def = ((PyCFunctionObject*)cyfunc)->m_ml;
-#if CYTHON_BACKPORT_VECTORCALL
-    Py_ssize_t nargs = (Py_ssize_t)nargsf;
-#else
-    Py_ssize_t nargs = PyVectorcall_NARGS(nargsf);
-#endif
-    PyObject *self;
-    switch (__Pyx_CyFunction_Vectorcall_CheckArgs(cyfunc, nargs, kwnames)) {
-    case 1:
-        self = args[0];
-        args += 1;
-        nargs -= 1;
-        break;
-    case 0:
-        self = ((PyCFunctionObject*)cyfunc)->m_self;
-        break;
-    default:
-        return NULL;
     }
-    if (unlikely(nargs != 1)) {
-        PyErr_Format(PyExc_TypeError,
-            "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
-            def->ml_name, nargs);
-        return NULL;
-    }
-    return def->ml_meth(self, args[0]);
-}
-static PyObject * __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames)
-{
-    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *)func;
-    PyMethodDef* def = ((PyCFunctionObject*)cyfunc)->m_ml;
-#if CYTHON_BACKPORT_VECTORCALL
-    Py_ssize_t nargs = (Py_ssize_t)nargsf;
-#else
-    Py_ssize_t nargs = PyVectorcall_NARGS(nargsf);
-#endif
-    PyObject *self;
-    switch (__Pyx_CyFunction_Vectorcall_CheckArgs(cyfunc, nargs, NULL)) {
-    case 1:
-        self = args[0];
-        args += 1;
-        nargs -= 1;
-        break;
-    case 0:
-        self = ((PyCFunctionObject*)cyfunc)->m_self;
-        break;
-    default:
-        return NULL;
-    }
-    return ((_PyCFunctionFastWithKeywords)(void(*)(void))def->ml_meth)(self, args, nargs, kwnames);
-}
-static PyObject * __Pyx_CyFunction_Vectorcall_FASTCALL_KEYWORDS_METHOD(PyObject *func, PyObject *const *args, size_t nargsf, PyObject *kwnames)
-{
-    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *)func;
-    PyMethodDef* def = ((PyCFunctionObject*)cyfunc)->m_ml;
-    PyTypeObject *cls = (PyTypeObject *) __Pyx_CyFunction_GetClassObj(cyfunc);
-#if CYTHON_BACKPORT_VECTORCALL
-    Py_ssize_t nargs = (Py_ssize_t)nargsf;
-#else
-    Py_ssize_t nargs = PyVectorcall_NARGS(nargsf);
-#endif
-    PyObject *self;
-    switch (__Pyx_CyFunction_Vectorcall_CheckArgs(cyfunc, nargs, NULL)) {
-    case 1:
-        self = args[0];
-        args += 1;
-        nargs -= 1;
-        break;
-    case 0:
-        self = ((PyCFunctionObject*)cyfunc)->m_self;
-        break;
-    default:
-        return NULL;
+    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
+        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
+        Py_XDECREF(owned_metaclass);
+        if (unlikely(!metaclass))
+            return NULL;
+        owned_metaclass = metaclass;
     }
-    return ((__Pyx_PyCMethod)(void(*)(void))def->ml_meth)(self, cls, args, (size_t)nargs, kwnames);
-}
-#endif
-#if CYTHON_USE_TYPE_SPECS
-static PyType_Slot __pyx_CyFunctionType_slots[] = {
-    {Py_tp_dealloc, (void *)__Pyx_CyFunction_dealloc},
-    {Py_tp_repr, (void *)__Pyx_CyFunction_repr},
-    {Py_tp_call, (void *)__Pyx_CyFunction_CallAsMethod},
-    {Py_tp_traverse, (void *)__Pyx_CyFunction_traverse},
-    {Py_tp_clear, (void *)__Pyx_CyFunction_clear},
-    {Py_tp_methods, (void *)__pyx_CyFunction_methods},
-    {Py_tp_members, (void *)__pyx_CyFunction_members},
-    {Py_tp_getset, (void *)__pyx_CyFunction_getsets},
-    {Py_tp_descr_get, (void *)__Pyx_PyMethod_New},
-    {0, 0},
-};
-static PyType_Spec __pyx_CyFunctionType_spec = {
-    __PYX_TYPE_MODULE_PREFIX "cython_function_or_method",
-    sizeof(__pyx_CyFunctionObject),
-    0,
-#ifdef Py_TPFLAGS_METHOD_DESCRIPTOR
-    Py_TPFLAGS_METHOD_DESCRIPTOR |
-#endif
-#if (defined(_Py_TPFLAGS_HAVE_VECTORCALL) && CYTHON_METH_FASTCALL)
-    _Py_TPFLAGS_HAVE_VECTORCALL |
-#endif
-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_BASETYPE,
-    __pyx_CyFunctionType_slots
-};
-#else
-static PyTypeObject __pyx_CyFunctionType_type = {
-    PyVarObject_HEAD_INIT(0, 0)
-    __PYX_TYPE_MODULE_PREFIX "cython_function_or_method",
-    sizeof(__pyx_CyFunctionObject),
-    0,
-    (destructor) __Pyx_CyFunction_dealloc,
-#if !CYTHON_METH_FASTCALL
-    0,
-#elif CYTHON_BACKPORT_VECTORCALL
-    (printfunc)offsetof(__pyx_CyFunctionObject, func_vectorcall),
+    result = __Pyx_PyObject_FastCallDict(metaclass, margs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET,
+#if PY_VERSION_HEX < 0x030600A4
+        (metaclass == (PyObject*)&PyType_Type) ? NULL : mkw
 #else
-    offsetof(PyCFunctionObject, vectorcall),
+        mkw
 #endif
-    0,
-    0,
-#if PY_MAJOR_VERSION < 3
-    0,
-#else
-    0,
-#endif
-    (reprfunc) __Pyx_CyFunction_repr,
-    0,
-    0,
-    0,
-    0,
-    __Pyx_CyFunction_CallAsMethod,
-    0,
-    0,
-    0,
-    0,
-#ifdef Py_TPFLAGS_METHOD_DESCRIPTOR
-    Py_TPFLAGS_METHOD_DESCRIPTOR |
-#endif
-#ifdef _Py_TPFLAGS_HAVE_VECTORCALL
-    _Py_TPFLAGS_HAVE_VECTORCALL |
-#endif
-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_BASETYPE,
-    0,
-    (traverseproc) __Pyx_CyFunction_traverse,
-    (inquiry) __Pyx_CyFunction_clear,
-    0,
-#if PY_VERSION_HEX < 0x030500A0
-    offsetof(__pyx_CyFunctionObject, func_weakreflist),
-#else
-    offsetof(PyCFunctionObject, m_weakreflist),
-#endif
-    0,
-    0,
-    __pyx_CyFunction_methods,
-    __pyx_CyFunction_members,
-    __pyx_CyFunction_getsets,
-    0,
-    0,
-    __Pyx_PyMethod_New,
-    0,
-    offsetof(__pyx_CyFunctionObject, func_dict),
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-    0,
-#if PY_VERSION_HEX >= 0x030400a1
-    0,
-#endif
-#if PY_VERSION_HEX >= 0x030800b1 && (!CYTHON_COMPILING_IN_PYPY || PYPY_VERSION_NUM >= 0x07030800)
-    0,
-#endif
-#if __PYX_NEED_TP_PRINT_SLOT
-    0,
-#endif
-#if PY_VERSION_HEX >= 0x030C0000
-    0,
-#endif
-#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX >= 0x03090000 && PY_VERSION_HEX < 0x030a0000
-    0,
-#endif
-};
-#endif
-static int __pyx_CyFunction_init(PyObject *module) {
-#if CYTHON_USE_TYPE_SPECS
-    __pyx_CyFunctionType = __Pyx_FetchCommonTypeFromSpec(module, &__pyx_CyFunctionType_spec, NULL);
-#else
-    CYTHON_UNUSED_VAR(module);
-    __pyx_CyFunctionType = __Pyx_FetchCommonType(&__pyx_CyFunctionType_type);
-#endif
-    if (unlikely(__pyx_CyFunctionType == NULL)) {
-        return -1;
-    }
-    return 0;
-}
-static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *func, size_t size, int pyobjects) {
-    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
-    m->defaults = PyObject_Malloc(size);
-    if (unlikely(!m->defaults))
-        return PyErr_NoMemory();
-    memset(m->defaults, 0, size);
-    m->defaults_pyobjects = pyobjects;
-    m->defaults_size = size;
-    return m->defaults;
-}
-static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *func, PyObject *tuple) {
-    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
-    m->defaults_tuple = tuple;
-    Py_INCREF(tuple);
-}
-static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *func, PyObject *dict) {
-    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
-    m->defaults_kwdict = dict;
-    Py_INCREF(dict);
-}
-static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *func, PyObject *dict) {
-    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
-    m->func_annotations = dict;
-    Py_INCREF(dict);
-}
-
-/* CythonFunction */
-static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml, int flags, PyObject* qualname,
-                                      PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
-    PyObject *op = __Pyx_CyFunction_Init(
-        PyObject_GC_New(__pyx_CyFunctionObject, __pyx_CyFunctionType),
-        ml, flags, qualname, closure, module, globals, code
     );
-    if (likely(op)) {
-        PyObject_GC_Track(op);
+    Py_XDECREF(owned_metaclass);
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+    if (likely(result) && likely(PyType_Check(result))) {
+        if (unlikely(__Pyx_SetNamesPEP487(result) < 0)) {
+            Py_CLEAR(result);
+        } else {
+            result = __Pyx_InitSubclassPEP487(result, mkw);
+        }
     }
-    return op;
-}
-
-/* PyDictVersioning */
-#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
-}
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
-    PyObject **dictptr = NULL;
-    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
-    if (offset) {
-#if CYTHON_COMPILING_IN_CPYTHON
-        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
 #else
-        dictptr = _PyObject_GetDictPtr(obj);
+    (void) &__Pyx_GetBuiltinName;
 #endif
-    }
-    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
-}
-static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
-        return 0;
-    return obj_dict_version == __Pyx_get_object_dict_version(obj);
+    return result;
 }
-#endif
 
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
@@ -4322,15 +3721,15 @@
 static __Pyx_TypeName
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__3));
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__2));
     }
     return name;
 }
 #endif
 
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
```

### Comparing `docrx-0.0.11/src/wrapper/infra/AbsctractGenerator.c` & `docrx-0.0.110/src/wrapper/infra/AbsctractGenerator.c`

 * *Files identical despite different names*

### Comparing `docrx-0.0.11/src/wrapper/infra/DocumentSimilarityCalculator.c` & `docrx-0.0.110/src/wrapper/infra/DocLanguage.c`

 * *Files 6% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.infra.DocumentSimilarityCalculator",
+        "name": "wrapper.infra.DocLanguage",
         "sources": [
-            "src/wrapper/infra/DocumentSimilarityCalculator.pyx"
+            "src/wrapper/infra/DocLanguage.pyx"
         ]
     },
-    "module_name": "wrapper.infra.DocumentSimilarityCalculator"
+    "module_name": "wrapper.infra.DocLanguage"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__infra__DocumentSimilarityCalculator
-#define __PYX_HAVE_API__wrapper__infra__DocumentSimilarityCalculator
+#define __PYX_HAVE__wrapper__infra__DocLanguage
+#define __PYX_HAVE_API__wrapper__infra__DocLanguage
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/infra/DocumentSimilarityCalculator.pyx",
+  "src/wrapper/infra/DocLanguage.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1436,69 +1436,14 @@
 #define __Pyx_DECREF_SET(r, v) do {\
         PyObject *tmp = (PyObject *) r;\
         r = v; __Pyx_DECREF(tmp);\
     } while (0)
 #define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
 #define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)
 
-/* TupleAndListFromArray.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
-static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
-#endif
-
-/* IncludeStringH.proto */
-#include <string.h>
-
-/* BytesEquals.proto */
-static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* UnicodeEquals.proto */
-static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* fastcall.proto */
-#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
-#define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
-#define __Pyx_KwValues_VARARGS(args, nargs) NULL
-#define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
-#define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
-#if CYTHON_METH_FASTCALL
-    #define __Pyx_Arg_FASTCALL(args, i) args[i]
-    #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
-    #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
-    static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
-    #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
-#else
-    #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
-    #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
-    #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
-    #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
-    #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
-#endif
-#if CYTHON_COMPILING_IN_CPYTHON
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
-#else
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#endif
-
-/* RaiseArgTupleInvalid.proto */
-static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
-    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
-
-/* RaiseDoubleKeywords.proto */
-static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
-
-/* ParseKeywords.proto */
-static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
-    PyObject **argnames[],
-    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
-    const char* function_name);
-
 /* PyErrExceptionMatches.proto */
 #if CYTHON_FAST_THREAD_STATE
 #define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
 static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
 #else
 #define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
 #endif
@@ -1555,14 +1500,69 @@
 
 /* PyObjectGetAttrStrNoError.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name);
 
 /* GetBuiltinName.proto */
 static PyObject *__Pyx_GetBuiltinName(PyObject *name);
 
+/* TupleAndListFromArray.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
+static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
+#endif
+
+/* IncludeStringH.proto */
+#include <string.h>
+
+/* BytesEquals.proto */
+static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);
+
+/* UnicodeEquals.proto */
+static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);
+
+/* fastcall.proto */
+#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
+#define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
+#define __Pyx_KwValues_VARARGS(args, nargs) NULL
+#define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
+#define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
+#if CYTHON_METH_FASTCALL
+    #define __Pyx_Arg_FASTCALL(args, i) args[i]
+    #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
+    #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
+    static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
+    #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
+#else
+    #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
+    #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
+    #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
+    #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
+    #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
+#endif
+#if CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
+#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
+#else
+#define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
+#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
+#endif
+
+/* RaiseDoubleKeywords.proto */
+static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
+
+/* ParseKeywords.proto */
+static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
+    const char* function_name);
+
+/* RaiseArgTupleInvalid.proto */
+static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
+    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
+
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1602,14 +1602,40 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
+/* PyObjectFormatSimple.proto */
+#if CYTHON_COMPILING_IN_PYPY
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#elif PY_MAJOR_VERSION < 3
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
+        PyObject_Format(s, f))
+#elif CYTHON_USE_TYPE_SLOTS
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
+        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
+        PyObject_Format(s, f))
+#else
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#endif
+
+/* JoinPyUnicode.proto */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char);
+
 /* PyFunctionFastCall.proto */
 #if CYTHON_FAST_PYCALL
 #if !CYTHON_VECTORCALL
 #define __Pyx_PyFunction_FastCall(func, args, nargs)\
     __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
 static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
 #endif
@@ -1653,35 +1679,42 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* GetItemInt.proto */
-#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
-    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
-               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
-#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
-                                                     int is_list, int wraparound, int boundscheck);
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+
+/* RaiseException.proto */
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
+
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+
+/* Py3UpdateBases.proto */
+static PyObject* __Pyx_PEP560_update_bases(PyObject *bases);
+
+/* CalculateMetaclass.proto */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);
+
+/* SetNameInClass.proto */
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
+#elif CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
+#else
+#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
+#endif
 
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
@@ -1801,19 +1834,32 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
-/* Import.proto */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+/* PyObjectLookupSpecial.proto */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_LookupSpecialNoError(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 0)
+#define __Pyx_PyObject_LookupSpecial(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 1)
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error);
+#else
+#define __Pyx_PyObject_LookupSpecialNoError(o,n) __Pyx_PyObject_GetAttrStrNoError(o,n)
+#define __Pyx_PyObject_LookupSpecial(o,n) __Pyx_PyObject_GetAttrStr(o,n)
+#endif
+
+/* Py3ClassCreate.proto */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
+                                           PyObject *mkw, PyObject *modname, PyObject *doc);
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
+                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);
 
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
@@ -1835,35 +1881,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -1887,51 +1933,67 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.infra.DocumentSimilarityCalculator" */
+/* Module declarations from "wrapper.infra.DocLanguage" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.infra.DocumentSimilarityCalculator"
-extern int __pyx_module_is_main_wrapper__infra__DocumentSimilarityCalculator;
-int __pyx_module_is_main_wrapper__infra__DocumentSimilarityCalculator = 0;
+#define __Pyx_MODULE_NAME "wrapper.infra.DocLanguage"
+extern int __pyx_module_is_main_wrapper__infra__DocLanguage;
+int __pyx_module_is_main_wrapper__infra__DocLanguage = 0;
 
-/* Implementation of "wrapper.infra.DocumentSimilarityCalculator" */
+/* Implementation of "wrapper.infra.DocLanguage" */
 /* #### Code section: global_var ### */
+static PyObject *__pyx_builtin_staticmethod;
+static PyObject *__pyx_builtin_ValueError;
 /* #### Code section: string_decls ### */
 static const char __pyx_k_[] = ".";
-static const char __pyx_k_x[] = "x";
-static const char __pyx_k__6[] = "?";
-static const char __pyx_k_key[] = "key";
+static const char __pyx_k__4[] = "?";
+static const char __pyx_k_en[] = "en";
+static const char __pyx_k_es[] = "es";
+static const char __pyx_k_pt[] = "pt";
+static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_Enum[] = "Enum";
+static const char __pyx_k_dict[] = "__dict__";
+static const char __pyx_k_enum[] = "enum";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
-static const char __pyx_k_sort[] = "sort";
 static const char __pyx_k_test[] = "__test__";
+static const char __pyx_k_super[] = "super";
 static const char __pyx_k_import[] = "__import__";
-static const char __pyx_k_reverse[] = "reverse";
+static const char __pyx_k_lingua[] = "lingua";
+static const char __pyx_k_module[] = "__module__";
+static const char __pyx_k_ENGLISH[] = "ENGLISH";
+static const char __pyx_k_SPANISH[] = "SPANISH";
+static const char __pyx_k_prepare[] = "__prepare__";
+static const char __pyx_k_Language[] = "Language";
+static const char __pyx_k_language[] = "language";
+static const char __pyx_k_qualname[] = "__qualname__";
+static const char __pyx_k_set_name[] = "__set_name__";
+static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_Language_2[] = "Language ";
+static const char __pyx_k_PORTUGUESE[] = "PORTUGUESE";
+static const char __pyx_k_ValueError[] = "ValueError";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
+static const char __pyx_k_mro_entries[] = "__mro_entries__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_similarities[] = "similarities";
-static const char __pyx_k_query_features[] = "query_features";
-static const char __pyx_k_cosine_similarity[] = "cosine_similarity";
-static const char __pyx_k_document_features[] = "document_features";
+static const char __pyx_k_staticmethod[] = "staticmethod";
+static const char __pyx_k_init_subclass[] = "__init_subclass__";
+static const char __pyx_k_not_supported[] = " not supported";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_order_similarities[] = "order_similarities";
-static const char __pyx_k_calc_cosine_similarity[] = "calc_cosine_similarity";
-static const char __pyx_k_sklearn_metrics_pairwise[] = "sklearn.metrics.pairwise";
-static const char __pyx_k_order_similarities_locals_lambda[] = "order_similarities.<locals>.<lambda>";
-static const char __pyx_k_src_wrapper_infra_DocumentSimila[] = "src/wrapper/infra/DocumentSimilarityCalculator.pyx";
-static const char __pyx_k_wrapper_infra_DocumentSimilarity[] = "wrapper.infra.DocumentSimilarityCalculator";
+static const char __pyx_k_get_language_from_lingua[] = "get_language_from_lingua";
+static const char __pyx_k_wrapper_infra_DocLanguage[] = "wrapper.infra.DocLanguage";
+static const char __pyx_k_DocLanguage_get_language_from_li[] = "DocLanguage.get_language_from_lingua";
+static const char __pyx_k_src_wrapper_infra_DocLanguage_py[] = "src/wrapper/infra/DocLanguage.pyx";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_calc_cosine_similarity(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_query_features, PyObject *__pyx_v_document_features); /* proto */
-static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_2order_similarities(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_similarities); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_11DocLanguage_11DocLanguage_get_language_from_lingua(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_language); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -1954,40 +2016,54 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
-  PyObject *__pyx_n_s__6;
+  PyObject *__pyx_n_s_DocLanguage;
+  PyObject *__pyx_n_s_DocLanguage_get_language_from_li;
+  PyObject *__pyx_n_s_ENGLISH;
+  PyObject *__pyx_n_s_Enum;
+  PyObject *__pyx_n_s_Language;
+  PyObject *__pyx_kp_u_Language_2;
+  PyObject *__pyx_n_s_PORTUGUESE;
+  PyObject *__pyx_n_s_SPANISH;
+  PyObject *__pyx_n_s_ValueError;
+  PyObject *__pyx_n_s__4;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_n_s_calc_cosine_similarity;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_cosine_similarity;
-  PyObject *__pyx_n_s_document_features;
+  PyObject *__pyx_n_s_dict;
+  PyObject *__pyx_n_s_doc;
+  PyObject *__pyx_n_u_en;
+  PyObject *__pyx_n_s_enum;
+  PyObject *__pyx_n_u_es;
+  PyObject *__pyx_n_s_get_language_from_lingua;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_is_coroutine;
-  PyObject *__pyx_n_s_key;
+  PyObject *__pyx_n_s_language;
+  PyObject *__pyx_n_s_lingua;
   PyObject *__pyx_n_s_main;
+  PyObject *__pyx_n_s_metaclass;
+  PyObject *__pyx_n_s_module;
+  PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_order_similarities;
-  PyObject *__pyx_n_s_order_similarities_locals_lambda;
-  PyObject *__pyx_n_s_query_features;
-  PyObject *__pyx_n_s_reverse;
-  PyObject *__pyx_n_s_similarities;
-  PyObject *__pyx_n_s_sklearn_metrics_pairwise;
-  PyObject *__pyx_n_s_sort;
-  PyObject *__pyx_kp_s_src_wrapper_infra_DocumentSimila;
+  PyObject *__pyx_kp_u_not_supported;
+  PyObject *__pyx_n_s_prepare;
+  PyObject *__pyx_n_u_pt;
+  PyObject *__pyx_n_s_qualname;
+  PyObject *__pyx_n_s_set_name;
+  PyObject *__pyx_kp_s_src_wrapper_infra_DocLanguage_py;
+  PyObject *__pyx_n_s_staticmethod;
+  PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_wrapper_infra_DocumentSimilarity;
-  PyObject *__pyx_n_s_x;
+  PyObject *__pyx_n_s_wrapper_infra_DocLanguage;
   PyObject *__pyx_tuple__2;
-  PyObject *__pyx_tuple__4;
   PyObject *__pyx_codeobj__3;
-  PyObject *__pyx_codeobj__5;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2023,40 +2099,54 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
-  Py_CLEAR(clear_module_state->__pyx_n_s__6);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage_get_language_from_li);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ENGLISH);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Enum);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Language);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Language_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_PORTUGUESE);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SPANISH);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ValueError);
+  Py_CLEAR(clear_module_state->__pyx_n_s__4);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_n_s_calc_cosine_similarity);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_cosine_similarity);
-  Py_CLEAR(clear_module_state->__pyx_n_s_document_features);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dict);
+  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
+  Py_CLEAR(clear_module_state->__pyx_n_u_en);
+  Py_CLEAR(clear_module_state->__pyx_n_s_enum);
+  Py_CLEAR(clear_module_state->__pyx_n_u_es);
+  Py_CLEAR(clear_module_state->__pyx_n_s_get_language_from_lingua);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
-  Py_CLEAR(clear_module_state->__pyx_n_s_key);
+  Py_CLEAR(clear_module_state->__pyx_n_s_language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lingua);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
+  Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_module);
+  Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_order_similarities);
-  Py_CLEAR(clear_module_state->__pyx_n_s_order_similarities_locals_lambda);
-  Py_CLEAR(clear_module_state->__pyx_n_s_query_features);
-  Py_CLEAR(clear_module_state->__pyx_n_s_reverse);
-  Py_CLEAR(clear_module_state->__pyx_n_s_similarities);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sklearn_metrics_pairwise);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sort);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_DocumentSimila);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_not_supported);
+  Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
+  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
+  Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_DocLanguage_py);
+  Py_CLEAR(clear_module_state->__pyx_n_s_staticmethod);
+  Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_DocumentSimilarity);
-  Py_CLEAR(clear_module_state->__pyx_n_s_x);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_DocLanguage);
   Py_CLEAR(clear_module_state->__pyx_tuple__2);
-  Py_CLEAR(clear_module_state->__pyx_tuple__4);
   Py_CLEAR(clear_module_state->__pyx_codeobj__3);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__5);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2070,40 +2160,54 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
-  Py_VISIT(traverse_module_state->__pyx_n_s__6);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage_get_language_from_li);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ENGLISH);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Enum);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Language);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Language_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_PORTUGUESE);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SPANISH);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ValueError);
+  Py_VISIT(traverse_module_state->__pyx_n_s__4);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_n_s_calc_cosine_similarity);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_cosine_similarity);
-  Py_VISIT(traverse_module_state->__pyx_n_s_document_features);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dict);
+  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
+  Py_VISIT(traverse_module_state->__pyx_n_u_en);
+  Py_VISIT(traverse_module_state->__pyx_n_s_enum);
+  Py_VISIT(traverse_module_state->__pyx_n_u_es);
+  Py_VISIT(traverse_module_state->__pyx_n_s_get_language_from_lingua);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
-  Py_VISIT(traverse_module_state->__pyx_n_s_key);
+  Py_VISIT(traverse_module_state->__pyx_n_s_language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lingua);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
+  Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_module);
+  Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_order_similarities);
-  Py_VISIT(traverse_module_state->__pyx_n_s_order_similarities_locals_lambda);
-  Py_VISIT(traverse_module_state->__pyx_n_s_query_features);
-  Py_VISIT(traverse_module_state->__pyx_n_s_reverse);
-  Py_VISIT(traverse_module_state->__pyx_n_s_similarities);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sklearn_metrics_pairwise);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sort);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_DocumentSimila);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_not_supported);
+  Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
+  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
+  Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_DocLanguage_py);
+  Py_VISIT(traverse_module_state->__pyx_n_s_staticmethod);
+  Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_DocumentSimilarity);
-  Py_VISIT(traverse_module_state->__pyx_n_s_x);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_DocLanguage);
   Py_VISIT(traverse_module_state->__pyx_tuple__2);
-  Py_VISIT(traverse_module_state->__pyx_tuple__4);
   Py_VISIT(traverse_module_state->__pyx_codeobj__3);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__5);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2127,462 +2231,330 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
-#define __pyx_n_s__6 __pyx_mstate_global->__pyx_n_s__6
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
+#define __pyx_n_s_DocLanguage_get_language_from_li __pyx_mstate_global->__pyx_n_s_DocLanguage_get_language_from_li
+#define __pyx_n_s_ENGLISH __pyx_mstate_global->__pyx_n_s_ENGLISH
+#define __pyx_n_s_Enum __pyx_mstate_global->__pyx_n_s_Enum
+#define __pyx_n_s_Language __pyx_mstate_global->__pyx_n_s_Language
+#define __pyx_kp_u_Language_2 __pyx_mstate_global->__pyx_kp_u_Language_2
+#define __pyx_n_s_PORTUGUESE __pyx_mstate_global->__pyx_n_s_PORTUGUESE
+#define __pyx_n_s_SPANISH __pyx_mstate_global->__pyx_n_s_SPANISH
+#define __pyx_n_s_ValueError __pyx_mstate_global->__pyx_n_s_ValueError
+#define __pyx_n_s__4 __pyx_mstate_global->__pyx_n_s__4
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_n_s_calc_cosine_similarity __pyx_mstate_global->__pyx_n_s_calc_cosine_similarity
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_cosine_similarity __pyx_mstate_global->__pyx_n_s_cosine_similarity
-#define __pyx_n_s_document_features __pyx_mstate_global->__pyx_n_s_document_features
+#define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
+#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
+#define __pyx_n_u_en __pyx_mstate_global->__pyx_n_u_en
+#define __pyx_n_s_enum __pyx_mstate_global->__pyx_n_s_enum
+#define __pyx_n_u_es __pyx_mstate_global->__pyx_n_u_es
+#define __pyx_n_s_get_language_from_lingua __pyx_mstate_global->__pyx_n_s_get_language_from_lingua
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
-#define __pyx_n_s_key __pyx_mstate_global->__pyx_n_s_key
+#define __pyx_n_s_language __pyx_mstate_global->__pyx_n_s_language
+#define __pyx_n_s_lingua __pyx_mstate_global->__pyx_n_s_lingua
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
+#define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
+#define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
+#define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_order_similarities __pyx_mstate_global->__pyx_n_s_order_similarities
-#define __pyx_n_s_order_similarities_locals_lambda __pyx_mstate_global->__pyx_n_s_order_similarities_locals_lambda
-#define __pyx_n_s_query_features __pyx_mstate_global->__pyx_n_s_query_features
-#define __pyx_n_s_reverse __pyx_mstate_global->__pyx_n_s_reverse
-#define __pyx_n_s_similarities __pyx_mstate_global->__pyx_n_s_similarities
-#define __pyx_n_s_sklearn_metrics_pairwise __pyx_mstate_global->__pyx_n_s_sklearn_metrics_pairwise
-#define __pyx_n_s_sort __pyx_mstate_global->__pyx_n_s_sort
-#define __pyx_kp_s_src_wrapper_infra_DocumentSimila __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_DocumentSimila
+#define __pyx_kp_u_not_supported __pyx_mstate_global->__pyx_kp_u_not_supported
+#define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
+#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
+#define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
+#define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
+#define __pyx_kp_s_src_wrapper_infra_DocLanguage_py __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_DocLanguage_py
+#define __pyx_n_s_staticmethod __pyx_mstate_global->__pyx_n_s_staticmethod
+#define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_wrapper_infra_DocumentSimilarity __pyx_mstate_global->__pyx_n_s_wrapper_infra_DocumentSimilarity
-#define __pyx_n_s_x __pyx_mstate_global->__pyx_n_s_x
+#define __pyx_n_s_wrapper_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_wrapper_infra_DocLanguage
 #define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
-#define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
-#define __pyx_codeobj__5 __pyx_mstate_global->__pyx_codeobj__5
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/DocumentSimilarityCalculator.pyx":3
- * from sklearn.metrics.pairwise import cosine_similarity
- * 
- * def calc_cosine_similarity(query_features, document_features):             # <<<<<<<<<<<<<<
- *     return cosine_similarity([query_features], [document_features])[0][0]
+/* "wrapper/infra/DocLanguage.pyx":9
+ *     PORTUGUESE = 'pt'
  * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_1calc_cosine_similarity(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_5infra_11DocLanguage_11DocLanguage_1get_language_from_lingua(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_28DocumentSimilarityCalculator_calc_cosine_similarity, "calc_cosine_similarity(query_features, document_features)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_1calc_cosine_similarity = {"calc_cosine_similarity", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_1calc_cosine_similarity, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_28DocumentSimilarityCalculator_calc_cosine_similarity};
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_1calc_cosine_similarity(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_11DocLanguage_11DocLanguage_get_language_from_lingua, "DocLanguage.get_language_from_lingua(language: Language)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_11DocLanguage_11DocLanguage_1get_language_from_lingua = {"get_language_from_lingua", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_11DocLanguage_11DocLanguage_1get_language_from_lingua, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_11DocLanguage_11DocLanguage_get_language_from_lingua};
+static PyObject *__pyx_pw_7wrapper_5infra_11DocLanguage_11DocLanguage_1get_language_from_lingua(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_query_features = 0;
-  PyObject *__pyx_v_document_features = 0;
+  PyObject *__pyx_v_language = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("calc_cosine_similarity (wrapper)", 0);
+  __Pyx_RefNannySetupContext("get_language_from_lingua (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_query_features,&__pyx_n_s_document_features,0};
-    PyObject* values[2] = {0,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_language,0};
+    PyObject* values[1] = {0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_query_features)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 3, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_document_features)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 3, __pyx_L3_error)
-        else {
-          __Pyx_RaiseArgtupleInvalid("calc_cosine_similarity", 1, 2, 2, 1); __PYX_ERR(0, 3, __pyx_L3_error)
-        }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "calc_cosine_similarity") < 0)) __PYX_ERR(0, 3, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "get_language_from_lingua") < 0)) __PYX_ERR(0, 9, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 2)) {
+    } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_query_features = values[0];
-    __pyx_v_document_features = values[1];
+    __pyx_v_language = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("calc_cosine_similarity", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 3, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("get_language_from_lingua", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 9, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.calc_cosine_similarity", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.infra.DocLanguage.DocLanguage.get_language_from_lingua", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_calc_cosine_similarity(__pyx_self, __pyx_v_query_features, __pyx_v_document_features);
+  __pyx_r = __pyx_pf_7wrapper_5infra_11DocLanguage_11DocLanguage_get_language_from_lingua(__pyx_self, __pyx_v_language);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_calc_cosine_similarity(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_query_features, PyObject *__pyx_v_document_features) {
+static PyObject *__pyx_pf_7wrapper_5infra_11DocLanguage_11DocLanguage_get_language_from_lingua(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_language) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  PyObject *__pyx_t_5 = NULL;
-  int __pyx_t_6;
+  int __pyx_t_3;
+  Py_ssize_t __pyx_t_4;
+  Py_UCS4 __pyx_t_5;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("calc_cosine_similarity", 0);
+  __Pyx_RefNannySetupContext("get_language_from_lingua", 0);
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":4
- * 
- * def calc_cosine_similarity(query_features, document_features):
- *     return cosine_similarity([query_features], [document_features])[0][0]             # <<<<<<<<<<<<<<
- * 
- * def order_similarities(similarities):
+  /* "wrapper/infra/DocLanguage.pyx":11
+ *     @staticmethod
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.ENGLISH
+ *         elif Language.SPANISH == language:
  */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cosine_similarity); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_v_query_features);
-  __Pyx_GIVEREF(__pyx_v_query_features);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_v_query_features);
-  __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_4);
-  __Pyx_INCREF(__pyx_v_document_features);
-  __Pyx_GIVEREF(__pyx_v_document_features);
-  PyList_SET_ITEM(__pyx_t_4, 0, __pyx_v_document_features);
-  __pyx_t_5 = NULL;
-  __pyx_t_6 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_5)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_5);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_6 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_language, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
-  goto __pyx_L0;
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 11, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_3) {
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":3
- * from sklearn.metrics.pairwise import cosine_similarity
- * 
- * def calc_cosine_similarity(query_features, document_features):             # <<<<<<<<<<<<<<
- *     return cosine_similarity([query_features], [document_features])[0][0]
- * 
+    /* "wrapper/infra/DocLanguage.pyx":12
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:
+ *             return DocLanguage.ENGLISH             # <<<<<<<<<<<<<<
+ *         elif Language.SPANISH == language:
+ *             return DocLanguage.SPANISH
  */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.calc_cosine_similarity", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/DocumentSimilarityCalculator.pyx":6
- *     return cosine_similarity([query_features], [document_features])[0][0]
- * 
- * def order_similarities(similarities):             # <<<<<<<<<<<<<<
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)
+    __Pyx_XDECREF(__pyx_r);
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_r = __pyx_t_2;
+    __pyx_t_2 = 0;
+    goto __pyx_L0;
+
+    /* "wrapper/infra/DocLanguage.pyx":11
+ *     @staticmethod
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.ENGLISH
+ *         elif Language.SPANISH == language:
  */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_3order_similarities(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_28DocumentSimilarityCalculator_2order_similarities, "order_similarities(similarities)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_3order_similarities = {"order_similarities", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_3order_similarities, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_28DocumentSimilarityCalculator_2order_similarities};
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_3order_similarities(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_similarities = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("order_similarities (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_similarities,0};
-    PyObject* values[1] = {0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_similarities)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 6, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "order_similarities") < 0)) __PYX_ERR(0, 6, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v_similarities = values[0];
   }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("order_similarities", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 6, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.order_similarities", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_2order_similarities(__pyx_self, __pyx_v_similarities);
 
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/DocumentSimilarityCalculator.pyx":8
- * def order_similarities(similarities):
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/DocLanguage.pyx":13
+ *         if Language.ENGLISH == language:
+ *             return DocLanguage.ENGLISH
+ *         elif Language.SPANISH == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.SPANISH
+ *         elif Language.PORTUGUESE == language:
  */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_18order_similarities_lambda(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-static PyMethodDef __pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_18order_similarities_lambda = {"lambda", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_18order_similarities_lambda, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_7wrapper_5infra_28DocumentSimilarityCalculator_18order_similarities_lambda(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_x = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("lambda (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_x,0};
-    PyObject* values[1] = {0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_x)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 8, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "lambda") < 0)) __PYX_ERR(0, 8, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v_x = values[0];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("lambda", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 8, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.order_similarities.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_lambda_funcdef_lambda(__pyx_self, __pyx_v_x);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("lambda", 0);
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_x, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Language); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_SPANISH); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 13, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
-  goto __pyx_L0;
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.order_similarities.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_v_language, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (__pyx_t_3) {
 
-/* "wrapper/infra/DocumentSimilarityCalculator.pyx":6
- *     return cosine_similarity([query_features], [document_features])[0][0]
- * 
- * def order_similarities(similarities):             # <<<<<<<<<<<<<<
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)
+    /* "wrapper/infra/DocLanguage.pyx":14
+ *             return DocLanguage.ENGLISH
+ *         elif Language.SPANISH == language:
+ *             return DocLanguage.SPANISH             # <<<<<<<<<<<<<<
+ *         elif Language.PORTUGUESE == language:
+ *             return DocLanguage.PORTUGUESE
  */
+    __Pyx_XDECREF(__pyx_r);
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_SPANISH); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_r = __pyx_t_1;
+    __pyx_t_1 = 0;
+    goto __pyx_L0;
+
+    /* "wrapper/infra/DocLanguage.pyx":13
+ *         if Language.ENGLISH == language:
+ *             return DocLanguage.ENGLISH
+ *         elif Language.SPANISH == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.SPANISH
+ *         elif Language.PORTUGUESE == language:
+ */
+  }
 
-static PyObject *__pyx_pf_7wrapper_5infra_28DocumentSimilarityCalculator_2order_similarities(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_similarities) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("order_similarities", 0);
-
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":8
- * def order_similarities(similarities):
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/DocLanguage.pyx":15
+ *         elif Language.SPANISH == language:
+ *             return DocLanguage.SPANISH
+ *         elif Language.PORTUGUESE == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.PORTUGUESE
+ *         else:
  */
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_similarities, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_PORTUGUESE); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_18order_similarities_lambda, 0, __pyx_n_s_order_similarities_locals_lambda, NULL, __pyx_n_s_wrapper_infra_DocumentSimilarity, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
-  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_language, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_r = __pyx_t_3;
-  __pyx_t_3 = 0;
-  goto __pyx_L0;
+  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_3 < 0))) __PYX_ERR(0, 15, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (likely(__pyx_t_3)) {
+
+    /* "wrapper/infra/DocLanguage.pyx":16
+ *             return DocLanguage.SPANISH
+ *         elif Language.PORTUGUESE == language:
+ *             return DocLanguage.PORTUGUESE             # <<<<<<<<<<<<<<
+ *         else:
+ *             raise ValueError(f'Language {language} not supported')
+ */
+    __Pyx_XDECREF(__pyx_r);
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_PORTUGUESE); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_r = __pyx_t_2;
+    __pyx_t_2 = 0;
+    goto __pyx_L0;
+
+    /* "wrapper/infra/DocLanguage.pyx":15
+ *         elif Language.SPANISH == language:
+ *             return DocLanguage.SPANISH
+ *         elif Language.PORTUGUESE == language:             # <<<<<<<<<<<<<<
+ *             return DocLanguage.PORTUGUESE
+ *         else:
+ */
+  }
+
+  /* "wrapper/infra/DocLanguage.pyx":18
+ *             return DocLanguage.PORTUGUESE
+ *         else:
+ *             raise ValueError(f'Language {language} not supported')             # <<<<<<<<<<<<<<
+ */
+  /*else*/ {
+    __pyx_t_2 = PyTuple_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_4 = 0;
+    __pyx_t_5 = 127;
+    __Pyx_INCREF(__pyx_kp_u_Language_2);
+    __pyx_t_4 += 9;
+    __Pyx_GIVEREF(__pyx_kp_u_Language_2);
+    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_Language_2);
+    __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_5 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_1) > __pyx_t_5) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_1) : __pyx_t_5;
+    __pyx_t_4 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_1);
+    __Pyx_GIVEREF(__pyx_t_1);
+    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_1);
+    __pyx_t_1 = 0;
+    __Pyx_INCREF(__pyx_kp_u_not_supported);
+    __pyx_t_4 += 14;
+    __Pyx_GIVEREF(__pyx_kp_u_not_supported);
+    PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_not_supported);
+    __pyx_t_1 = __Pyx_PyUnicode_Join(__pyx_t_2, 3, __pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __PYX_ERR(0, 18, __pyx_L1_error)
+  }
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":6
- *     return cosine_similarity([query_features], [document_features])[0][0]
+  /* "wrapper/infra/DocLanguage.pyx":9
+ *     PORTUGUESE = 'pt'
  * 
- * def order_similarities(similarities):             # <<<<<<<<<<<<<<
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("wrapper.infra.DocumentSimilarityCalculator.order_similarities", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.infra.DocLanguage.DocLanguage.get_language_from_lingua", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
@@ -2599,73 +2571,81 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
-    {&__pyx_n_s__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 0, 1, 1},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_s_DocLanguage_get_language_from_li, __pyx_k_DocLanguage_get_language_from_li, sizeof(__pyx_k_DocLanguage_get_language_from_li), 0, 0, 1, 1},
+    {&__pyx_n_s_ENGLISH, __pyx_k_ENGLISH, sizeof(__pyx_k_ENGLISH), 0, 0, 1, 1},
+    {&__pyx_n_s_Enum, __pyx_k_Enum, sizeof(__pyx_k_Enum), 0, 0, 1, 1},
+    {&__pyx_n_s_Language, __pyx_k_Language, sizeof(__pyx_k_Language), 0, 0, 1, 1},
+    {&__pyx_kp_u_Language_2, __pyx_k_Language_2, sizeof(__pyx_k_Language_2), 0, 1, 0, 0},
+    {&__pyx_n_s_PORTUGUESE, __pyx_k_PORTUGUESE, sizeof(__pyx_k_PORTUGUESE), 0, 0, 1, 1},
+    {&__pyx_n_s_SPANISH, __pyx_k_SPANISH, sizeof(__pyx_k_SPANISH), 0, 0, 1, 1},
+    {&__pyx_n_s_ValueError, __pyx_k_ValueError, sizeof(__pyx_k_ValueError), 0, 0, 1, 1},
+    {&__pyx_n_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_n_s_calc_cosine_similarity, __pyx_k_calc_cosine_similarity, sizeof(__pyx_k_calc_cosine_similarity), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_cosine_similarity, __pyx_k_cosine_similarity, sizeof(__pyx_k_cosine_similarity), 0, 0, 1, 1},
-    {&__pyx_n_s_document_features, __pyx_k_document_features, sizeof(__pyx_k_document_features), 0, 0, 1, 1},
+    {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
+    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
+    {&__pyx_n_u_en, __pyx_k_en, sizeof(__pyx_k_en), 0, 1, 0, 1},
+    {&__pyx_n_s_enum, __pyx_k_enum, sizeof(__pyx_k_enum), 0, 0, 1, 1},
+    {&__pyx_n_u_es, __pyx_k_es, sizeof(__pyx_k_es), 0, 1, 0, 1},
+    {&__pyx_n_s_get_language_from_lingua, __pyx_k_get_language_from_lingua, sizeof(__pyx_k_get_language_from_lingua), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
-    {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
+    {&__pyx_n_s_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 0, 1, 1},
+    {&__pyx_n_s_lingua, __pyx_k_lingua, sizeof(__pyx_k_lingua), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
+    {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
+    {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
+    {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_order_similarities, __pyx_k_order_similarities, sizeof(__pyx_k_order_similarities), 0, 0, 1, 1},
-    {&__pyx_n_s_order_similarities_locals_lambda, __pyx_k_order_similarities_locals_lambda, sizeof(__pyx_k_order_similarities_locals_lambda), 0, 0, 1, 1},
-    {&__pyx_n_s_query_features, __pyx_k_query_features, sizeof(__pyx_k_query_features), 0, 0, 1, 1},
-    {&__pyx_n_s_reverse, __pyx_k_reverse, sizeof(__pyx_k_reverse), 0, 0, 1, 1},
-    {&__pyx_n_s_similarities, __pyx_k_similarities, sizeof(__pyx_k_similarities), 0, 0, 1, 1},
-    {&__pyx_n_s_sklearn_metrics_pairwise, __pyx_k_sklearn_metrics_pairwise, sizeof(__pyx_k_sklearn_metrics_pairwise), 0, 0, 1, 1},
-    {&__pyx_n_s_sort, __pyx_k_sort, sizeof(__pyx_k_sort), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_infra_DocumentSimila, __pyx_k_src_wrapper_infra_DocumentSimila, sizeof(__pyx_k_src_wrapper_infra_DocumentSimila), 0, 0, 1, 0},
+    {&__pyx_kp_u_not_supported, __pyx_k_not_supported, sizeof(__pyx_k_not_supported), 0, 1, 0, 0},
+    {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
+    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
+    {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
+    {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
+    {&__pyx_kp_s_src_wrapper_infra_DocLanguage_py, __pyx_k_src_wrapper_infra_DocLanguage_py, sizeof(__pyx_k_src_wrapper_infra_DocLanguage_py), 0, 0, 1, 0},
+    {&__pyx_n_s_staticmethod, __pyx_k_staticmethod, sizeof(__pyx_k_staticmethod), 0, 0, 1, 1},
+    {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_infra_DocumentSimilarity, __pyx_k_wrapper_infra_DocumentSimilarity, sizeof(__pyx_k_wrapper_infra_DocumentSimilarity), 0, 0, 1, 1},
-    {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_infra_DocLanguage, __pyx_k_wrapper_infra_DocLanguage, sizeof(__pyx_k_wrapper_infra_DocLanguage), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
+  __pyx_builtin_staticmethod = __Pyx_GetBuiltinName(__pyx_n_s_staticmethod); if (!__pyx_builtin_staticmethod) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 18, __pyx_L1_error)
   return 0;
+  __pyx_L1_error:;
+  return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":3
- * from sklearn.metrics.pairwise import cosine_similarity
- * 
- * def calc_cosine_similarity(query_features, document_features):             # <<<<<<<<<<<<<<
- *     return cosine_similarity([query_features], [document_features])[0][0]
+  /* "wrapper/infra/DocLanguage.pyx":9
+ *     PORTUGUESE = 'pt'
  * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:
  */
-  __pyx_tuple__2 = PyTuple_Pack(2, __pyx_n_s_query_features, __pyx_n_s_document_features); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_tuple__2 = PyTuple_Pack(1, __pyx_n_s_language); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
-  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_DocumentSimila, __pyx_n_s_calc_cosine_similarity, 3, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 3, __pyx_L1_error)
-
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":6
- *     return cosine_similarity([query_features], [document_features])[0][0]
- * 
- * def order_similarities(similarities):             # <<<<<<<<<<<<<<
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)
- */
-  __pyx_tuple__4 = PyTuple_Pack(1, __pyx_n_s_similarities); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__4);
-  __Pyx_GIVEREF(__pyx_tuple__4);
-  __pyx_codeobj__5 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__4, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_DocumentSimila, __pyx_n_s_order_similarities, 6, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__5)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_DocLanguage_py, __pyx_n_s_get_language_from_lingua, 9, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -2747,31 +2727,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_DocumentSimilarityCalculator(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_DocLanguage(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_DocumentSimilarityCalculator},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_DocLanguage},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "DocumentSimilarityCalculator",
+      "DocLanguage",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -2811,19 +2791,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initDocumentSimilarityCalculator(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initDocumentSimilarityCalculator(void)
+__Pyx_PyMODINIT_FUNC initDocLanguage(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initDocLanguage(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_DocumentSimilarityCalculator(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_DocumentSimilarityCalculator(void)
+__Pyx_PyMODINIT_FUNC PyInit_DocLanguage(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_DocLanguage(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -2896,51 +2876,54 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_DocumentSimilarityCalculator(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_DocLanguage(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  PyObject *__pyx_t_6 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'DocumentSimilarityCalculator' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'DocLanguage' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("DocumentSimilarityCalculator", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("DocLanguage", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to DocumentSimilarityCalculator pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to DocLanguage pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -2958,15 +2941,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_DocumentSimilarityCalculator(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_DocLanguage(void)", 0);
   if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -2996,22 +2979,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__infra__DocumentSimilarityCalculator) {
+  if (__pyx_module_is_main_wrapper__infra__DocLanguage) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.infra.DocumentSimilarityCalculator")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.DocumentSimilarityCalculator", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.infra.DocLanguage")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.DocLanguage", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -3024,90 +3007,176 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":1
- * from sklearn.metrics.pairwise import cosine_similarity             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/DocLanguage.pyx":1
+ * from enum import Enum             # <<<<<<<<<<<<<<
+ * from lingua import Language
  * 
- * def calc_cosine_similarity(query_features, document_features):
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_cosine_similarity);
-  __Pyx_GIVEREF(__pyx_n_s_cosine_similarity);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_cosine_similarity);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sklearn_metrics_pairwise, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_Enum);
+  __Pyx_GIVEREF(__pyx_n_s_Enum);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Enum);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_enum, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_cosine_similarity); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Enum); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_cosine_similarity, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Enum, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":3
- * from sklearn.metrics.pairwise import cosine_similarity
+  /* "wrapper/infra/DocLanguage.pyx":2
+ * from enum import Enum
+ * from lingua import Language             # <<<<<<<<<<<<<<
  * 
- * def calc_cosine_similarity(query_features, document_features):             # <<<<<<<<<<<<<<
- *     return cosine_similarity([query_features], [document_features])[0][0]
+ * class DocLanguage(Enum):
+ */
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_Language);
+  __Pyx_GIVEREF(__pyx_n_s_Language);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_Language);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_lingua, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Language, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/DocLanguage.pyx":4
+ * from lingua import Language
  * 
+ * class DocLanguage(Enum):             # <<<<<<<<<<<<<<
+ *     ENGLISH = 'en'
+ *     SPANISH = 'es'
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_1calc_cosine_similarity, 0, __pyx_n_s_calc_cosine_similarity, NULL, __pyx_n_s_wrapper_infra_DocumentSimilarity, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Enum); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_calc_cosine_similarity, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_2);
+  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
+  __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PEP560_update_bases(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_2, __pyx_n_s_DocLanguage, __pyx_n_s_DocLanguage, (PyObject *) NULL, __pyx_n_s_wrapper_infra_DocLanguage, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (__pyx_t_2 != __pyx_t_3) {
+    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_3) < 0))) __PYX_ERR(0, 4, __pyx_L1_error)
+  }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":6
- *     return cosine_similarity([query_features], [document_features])[0][0]
+  /* "wrapper/infra/DocLanguage.pyx":5
+ * 
+ * class DocLanguage(Enum):
+ *     ENGLISH = 'en'             # <<<<<<<<<<<<<<
+ *     SPANISH = 'es'
+ *     PORTUGUESE = 'pt'
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_ENGLISH, __pyx_n_u_en) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+
+  /* "wrapper/infra/DocLanguage.pyx":6
+ * class DocLanguage(Enum):
+ *     ENGLISH = 'en'
+ *     SPANISH = 'es'             # <<<<<<<<<<<<<<
+ *     PORTUGUESE = 'pt'
+ * 
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_SPANISH, __pyx_n_u_es) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+
+  /* "wrapper/infra/DocLanguage.pyx":7
+ *     ENGLISH = 'en'
+ *     SPANISH = 'es'
+ *     PORTUGUESE = 'pt'             # <<<<<<<<<<<<<<
  * 
- * def order_similarities(similarities):             # <<<<<<<<<<<<<<
- *     # Ordenar os resultados com base na similaridade
- *     return similarities.sort(key=lambda x: x[1], reverse=True)
+ *     @staticmethod
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_28DocumentSimilarityCalculator_3order_similarities, 0, __pyx_n_s_order_similarities, NULL, __pyx_n_s_wrapper_infra_DocumentSimilarity, __pyx_d, ((PyObject *)__pyx_codeobj__5)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_PORTUGUESE, __pyx_n_u_pt) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+
+  /* "wrapper/infra/DocLanguage.pyx":9
+ *     PORTUGUESE = 'pt'
+ * 
+ *     @staticmethod             # <<<<<<<<<<<<<<
+ *     def get_language_from_lingua(language:Language):
+ *         if Language.ENGLISH == language:
+ */
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_order_similarities, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_n_s_Language) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_11DocLanguage_11DocLanguage_1get_language_from_lingua, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_DocLanguage_get_language_from_li, NULL, __pyx_n_s_wrapper_infra_DocLanguage, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_6, __pyx_t_3);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_get_language_from_lingua, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/DocumentSimilarityCalculator.pyx":1
- * from sklearn.metrics.pairwise import cosine_similarity             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/DocLanguage.pyx":4
+ * from lingua import Language
  * 
- * def calc_cosine_similarity(query_features, document_features):
+ * class DocLanguage(Enum):             # <<<<<<<<<<<<<<
+ *     ENGLISH = 'en'
+ *     SPANISH = 'es'
  */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_DocLanguage, __pyx_t_2, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/DocLanguage.pyx":1
+ * from enum import Enum             # <<<<<<<<<<<<<<
+ * from lingua import Language
+ * 
+ */
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.infra.DocumentSimilarityCalculator", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.infra.DocLanguage", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.DocumentSimilarityCalculator");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.DocLanguage");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -3146,14 +3215,164 @@
 end:
     Py_XDECREF(p);
     Py_XDECREF(m);
     return (__Pyx_RefNannyAPIStruct *)r;
 }
 #endif
 
+/* PyErrExceptionMatches */
+#if CYTHON_FAST_THREAD_STATE
+static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
+    Py_ssize_t i, n;
+    n = PyTuple_GET_SIZE(tuple);
+#if PY_MAJOR_VERSION >= 3
+    for (i=0; i<n; i++) {
+        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
+    }
+#endif
+    for (i=0; i<n; i++) {
+        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
+    }
+    return 0;
+}
+static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
+    int result;
+    PyObject *exc_type;
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *current_exception = tstate->current_exception;
+    if (unlikely(!current_exception)) return 0;
+    exc_type = (PyObject*) Py_TYPE(current_exception);
+    if (exc_type == err) return 1;
+#else
+    exc_type = tstate->curexc_type;
+    if (exc_type == err) return 1;
+    if (unlikely(!exc_type)) return 0;
+#endif
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_INCREF(exc_type);
+    #endif
+    if (unlikely(PyTuple_Check(err))) {
+        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
+    } else {
+        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
+    }
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_DECREF(exc_type);
+    #endif
+    return result;
+}
+#endif
+
+/* PyErrFetchRestore */
+#if CYTHON_FAST_THREAD_STATE
+static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *tmp_value;
+    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
+    if (value) {
+        #if CYTHON_COMPILING_IN_CPYTHON
+        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
+        #endif
+            PyException_SetTraceback(value, tb);
+    }
+    tmp_value = tstate->current_exception;
+    tstate->current_exception = value;
+    Py_XDECREF(tmp_value);
+#else
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+    tmp_type = tstate->curexc_type;
+    tmp_value = tstate->curexc_value;
+    tmp_tb = tstate->curexc_traceback;
+    tstate->curexc_type = type;
+    tstate->curexc_value = value;
+    tstate->curexc_traceback = tb;
+    Py_XDECREF(tmp_type);
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(tmp_tb);
+#endif
+}
+static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject* exc_value;
+    exc_value = tstate->current_exception;
+    tstate->current_exception = 0;
+    *value = exc_value;
+    *type = NULL;
+    *tb = NULL;
+    if (exc_value) {
+        *type = (PyObject*) Py_TYPE(exc_value);
+        Py_INCREF(*type);
+        #if CYTHON_COMPILING_IN_CPYTHON
+        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
+        Py_XINCREF(*tb);
+        #else
+        *tb = PyException_GetTraceback(exc_value);
+        #endif
+    }
+#else
+    *type = tstate->curexc_type;
+    *value = tstate->curexc_value;
+    *tb = tstate->curexc_traceback;
+    tstate->curexc_type = 0;
+    tstate->curexc_value = 0;
+    tstate->curexc_traceback = 0;
+#endif
+}
+#endif
+
+/* PyObjectGetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro))
+        return tp->tp_getattro(obj, attr_name);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_getattr))
+        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
+#endif
+    return PyObject_GetAttr(obj, attr_name);
+}
+#endif
+
+/* PyObjectGetAttrStrNoError */
+static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
+        __Pyx_PyErr_Clear();
+}
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
+    PyObject *result;
+#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
+        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
+    }
+#endif
+    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
+    if (unlikely(!result)) {
+        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
+    }
+    return result;
+}
+
+/* GetBuiltinName */
+static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
+    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
+    if (unlikely(!result) && !PyErr_Occurred()) {
+        PyErr_Format(PyExc_NameError,
+#if PY_MAJOR_VERSION >= 3
+            "name '%U' is not defined", name);
+#else
+            "name '%.200s' is not defined", PyString_AS_STRING(name));
+#endif
+    }
+    return result;
+}
+
 /* TupleAndListFromArray */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE void __Pyx_copy_object_array(PyObject *const *CYTHON_RESTRICT src, PyObject** CYTHON_RESTRICT dest, Py_ssize_t length) {
     PyObject *v;
     Py_ssize_t i;
     for (i = 0; i < length; i++) {
         v = dest[i] = src[i];
@@ -3353,40 +3572,14 @@
             return kwvalues[i];
         }
     }
     return NULL;  // not found (no exception set)
 }
 #endif
 
-/* RaiseArgTupleInvalid */
-static void __Pyx_RaiseArgtupleInvalid(
-    const char* func_name,
-    int exact,
-    Py_ssize_t num_min,
-    Py_ssize_t num_max,
-    Py_ssize_t num_found)
-{
-    Py_ssize_t num_expected;
-    const char *more_or_less;
-    if (num_found < num_min) {
-        num_expected = num_min;
-        more_or_less = "at least";
-    } else {
-        num_expected = num_max;
-        more_or_less = "at most";
-    }
-    if (exact) {
-        more_or_less = "exactly";
-    }
-    PyErr_Format(PyExc_TypeError,
-                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
-                 func_name, more_or_less, num_expected,
-                 (num_expected == 1) ? "" : "s", num_found);
-}
-
 /* RaiseDoubleKeywords */
 static void __Pyx_RaiseDoubleKeywordsError(
     const char* func_name,
     PyObject* kw_name)
 {
     PyErr_Format(PyExc_TypeError,
         #if PY_MAJOR_VERSION >= 3
@@ -3509,162 +3702,38 @@
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
     return -1;
 }
 
-/* PyErrExceptionMatches */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
-    Py_ssize_t i, n;
-    n = PyTuple_GET_SIZE(tuple);
-#if PY_MAJOR_VERSION >= 3
-    for (i=0; i<n; i++) {
-        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
-    }
-#endif
-    for (i=0; i<n; i++) {
-        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
-    }
-    return 0;
-}
-static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
-    int result;
-    PyObject *exc_type;
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *current_exception = tstate->current_exception;
-    if (unlikely(!current_exception)) return 0;
-    exc_type = (PyObject*) Py_TYPE(current_exception);
-    if (exc_type == err) return 1;
-#else
-    exc_type = tstate->curexc_type;
-    if (exc_type == err) return 1;
-    if (unlikely(!exc_type)) return 0;
-#endif
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_INCREF(exc_type);
-    #endif
-    if (unlikely(PyTuple_Check(err))) {
-        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
+/* RaiseArgTupleInvalid */
+static void __Pyx_RaiseArgtupleInvalid(
+    const char* func_name,
+    int exact,
+    Py_ssize_t num_min,
+    Py_ssize_t num_max,
+    Py_ssize_t num_found)
+{
+    Py_ssize_t num_expected;
+    const char *more_or_less;
+    if (num_found < num_min) {
+        num_expected = num_min;
+        more_or_less = "at least";
     } else {
-        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
-    }
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_DECREF(exc_type);
-    #endif
-    return result;
-}
-#endif
-
-/* PyErrFetchRestore */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *tmp_value;
-    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
-    if (value) {
-        #if CYTHON_COMPILING_IN_CPYTHON
-        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
-        #endif
-            PyException_SetTraceback(value, tb);
-    }
-    tmp_value = tstate->current_exception;
-    tstate->current_exception = value;
-    Py_XDECREF(tmp_value);
-#else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    tmp_type = tstate->curexc_type;
-    tmp_value = tstate->curexc_value;
-    tmp_tb = tstate->curexc_traceback;
-    tstate->curexc_type = type;
-    tstate->curexc_value = value;
-    tstate->curexc_traceback = tb;
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#endif
-}
-static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject* exc_value;
-    exc_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    *value = exc_value;
-    *type = NULL;
-    *tb = NULL;
-    if (exc_value) {
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        #if CYTHON_COMPILING_IN_CPYTHON
-        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
-        Py_XINCREF(*tb);
-        #else
-        *tb = PyException_GetTraceback(exc_value);
-        #endif
-    }
-#else
-    *type = tstate->curexc_type;
-    *value = tstate->curexc_value;
-    *tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-#endif
-}
-#endif
-
-/* PyObjectGetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro))
-        return tp->tp_getattro(obj, attr_name);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_getattr))
-        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
-#endif
-    return PyObject_GetAttr(obj, attr_name);
-}
-#endif
-
-/* PyObjectGetAttrStrNoError */
-static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
-        __Pyx_PyErr_Clear();
-}
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
-    PyObject *result;
-#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
-        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
-    }
-#endif
-    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
-    if (unlikely(!result)) {
-        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
+        num_expected = num_max;
+        more_or_less = "at most";
     }
-    return result;
-}
-
-/* GetBuiltinName */
-static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
-    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
-    if (unlikely(!result) && !PyErr_Occurred()) {
-        PyErr_Format(PyExc_NameError,
-#if PY_MAJOR_VERSION >= 3
-            "name '%U' is not defined", name);
-#else
-            "name '%.200s' is not defined", PyString_AS_STRING(name));
-#endif
+    if (exact) {
+        more_or_less = "exactly";
     }
-    return result;
+    PyErr_Format(PyExc_TypeError,
+                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                 func_name, more_or_less, num_expected,
+                 (num_expected == 1) ? "" : "s", num_found);
 }
 
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
@@ -3728,14 +3797,81 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
+/* JoinPyUnicode */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char) {
+#if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyObject *result_uval;
+    int result_ukind, kind_shift;
+    Py_ssize_t i, char_pos;
+    void *result_udata;
+    CYTHON_MAYBE_UNUSED_VAR(max_char);
+#if CYTHON_PEP393_ENABLED
+    result_uval = PyUnicode_New(result_ulength, max_char);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = (max_char <= 255) ? PyUnicode_1BYTE_KIND : (max_char <= 65535) ? PyUnicode_2BYTE_KIND : PyUnicode_4BYTE_KIND;
+    kind_shift = (result_ukind == PyUnicode_4BYTE_KIND) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_DATA(result_uval);
+#else
+    result_uval = PyUnicode_FromUnicode(NULL, result_ulength);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = sizeof(Py_UNICODE);
+    kind_shift = (result_ukind == 4) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_AS_UNICODE(result_uval);
+#endif
+    assert(kind_shift == 2 || kind_shift == 1 || kind_shift == 0);
+    char_pos = 0;
+    for (i=0; i < value_count; i++) {
+        int ukind;
+        Py_ssize_t ulength;
+        void *udata;
+        PyObject *uval = PyTuple_GET_ITEM(value_tuple, i);
+        if (unlikely(__Pyx_PyUnicode_READY(uval)))
+            goto bad;
+        ulength = __Pyx_PyUnicode_GET_LENGTH(uval);
+        if (unlikely(!ulength))
+            continue;
+        if (unlikely((PY_SSIZE_T_MAX >> kind_shift) - ulength < char_pos))
+            goto overflow;
+        ukind = __Pyx_PyUnicode_KIND(uval);
+        udata = __Pyx_PyUnicode_DATA(uval);
+        if (!CYTHON_PEP393_ENABLED || ukind == result_ukind) {
+            memcpy((char *)result_udata + (char_pos << kind_shift), udata, (size_t) (ulength << kind_shift));
+        } else {
+            #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030300F0 || defined(_PyUnicode_FastCopyCharacters)
+            _PyUnicode_FastCopyCharacters(result_uval, char_pos, uval, 0, ulength);
+            #else
+            Py_ssize_t j;
+            for (j=0; j < ulength; j++) {
+                Py_UCS4 uchar = __Pyx_PyUnicode_READ(ukind, udata, j);
+                __Pyx_PyUnicode_WRITE(result_ukind, result_udata, char_pos+j, uchar);
+            }
+            #endif
+        }
+        char_pos += ulength;
+    }
+    return result_uval;
+overflow:
+    PyErr_SetString(PyExc_OverflowError, "join() result is too long for a Python string");
+bad:
+    Py_DECREF(result_uval);
+    return NULL;
+#else
+    CYTHON_UNUSED_VAR(max_char);
+    CYTHON_UNUSED_VAR(result_ulength);
+    CYTHON_UNUSED_VAR(value_count);
+    return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
+#endif
+}
+
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -3962,107 +4098,397 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* GetItemInt */
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
-    PyObject *r;
-    if (unlikely(!j)) return NULL;
-    r = PyObject_GetItem(o, j);
-    Py_DECREF(j);
-    return r;
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyList_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
-        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyTuple_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
-        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
-                                                     CYTHON_NCP_UNUSED int wraparound,
-                                                     CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
-    if (is_list || PyList_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
-        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
-            PyObject *r = PyList_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    }
-    else if (PyTuple_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
-        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
-            PyObject *r = PyTuple_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* RaiseException */
+#if PY_MAJOR_VERSION < 3
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    __Pyx_PyThreadState_declare
+    CYTHON_UNUSED_VAR(cause);
+    Py_XINCREF(type);
+    if (!value || value == Py_None)
+        value = NULL;
+    else
+        Py_INCREF(value);
+    if (!tb || tb == Py_None)
+        tb = NULL;
+    else {
+        Py_INCREF(tb);
+        if (!PyTraceBack_Check(tb)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: arg 3 must be a traceback or None");
+            goto raise_error;
+        }
+    }
+    if (PyType_Check(type)) {
+#if CYTHON_COMPILING_IN_PYPY
+        if (!value) {
+            Py_INCREF(Py_None);
+            value = Py_None;
         }
+#endif
+        PyErr_NormalizeException(&type, &value, &tb);
     } else {
-        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
-        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
-        if (mm && mm->mp_subscript) {
-            PyObject *r, *key = PyInt_FromSsize_t(i);
-            if (unlikely(!key)) return NULL;
-            r = mm->mp_subscript(o, key);
-            Py_DECREF(key);
-            return r;
-        }
-        if (likely(sm && sm->sq_item)) {
-            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
-                Py_ssize_t l = sm->sq_length(o);
-                if (likely(l >= 0)) {
-                    i += l;
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto raise_error;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(type);
+        Py_INCREF(type);
+        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: exception class must be a subclass of BaseException");
+            goto raise_error;
+        }
+    }
+    __Pyx_PyThreadState_assign
+    __Pyx_ErrRestore(type, value, tb);
+    return;
+raise_error:
+    Py_XDECREF(value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
+    return;
+}
+#else
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    PyObject* owned_instance = NULL;
+    if (tb == Py_None) {
+        tb = 0;
+    } else if (tb && !PyTraceBack_Check(tb)) {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: arg 3 must be a traceback or None");
+        goto bad;
+    }
+    if (value == Py_None)
+        value = 0;
+    if (PyExceptionInstance_Check(type)) {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto bad;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(value);
+    } else if (PyExceptionClass_Check(type)) {
+        PyObject *instance_class = NULL;
+        if (value && PyExceptionInstance_Check(value)) {
+            instance_class = (PyObject*) Py_TYPE(value);
+            if (instance_class != type) {
+                int is_subclass = PyObject_IsSubclass(instance_class, type);
+                if (!is_subclass) {
+                    instance_class = NULL;
+                } else if (unlikely(is_subclass == -1)) {
+                    goto bad;
                 } else {
-                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                        return NULL;
+                    type = instance_class;
+                }
+            }
+        }
+        if (!instance_class) {
+            PyObject *args;
+            if (!value)
+                args = PyTuple_New(0);
+            else if (PyTuple_Check(value)) {
+                Py_INCREF(value);
+                args = value;
+            } else
+                args = PyTuple_Pack(1, value);
+            if (!args)
+                goto bad;
+            owned_instance = PyObject_Call(type, args, NULL);
+            Py_DECREF(args);
+            if (!owned_instance)
+                goto bad;
+            value = owned_instance;
+            if (!PyExceptionInstance_Check(value)) {
+                PyErr_Format(PyExc_TypeError,
+                             "calling %R should have returned an instance of "
+                             "BaseException, not %R",
+                             type, Py_TYPE(value));
+                goto bad;
+            }
+        }
+    } else {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: exception class must be a subclass of BaseException");
+        goto bad;
+    }
+    if (cause) {
+        PyObject *fixed_cause;
+        if (cause == Py_None) {
+            fixed_cause = NULL;
+        } else if (PyExceptionClass_Check(cause)) {
+            fixed_cause = PyObject_CallObject(cause, NULL);
+            if (fixed_cause == NULL)
+                goto bad;
+        } else if (PyExceptionInstance_Check(cause)) {
+            fixed_cause = cause;
+            Py_INCREF(fixed_cause);
+        } else {
+            PyErr_SetString(PyExc_TypeError,
+                            "exception causes must derive from "
+                            "BaseException");
+            goto bad;
+        }
+        PyException_SetCause(value, fixed_cause);
+    }
+    PyErr_SetObject(type, value);
+    if (tb) {
+      #if PY_VERSION_HEX >= 0x030C00A6
+        PyException_SetTraceback(value, tb);
+      #elif CYTHON_FAST_THREAD_STATE
+        PyThreadState *tstate = __Pyx_PyThreadState_Current;
+        PyObject* tmp_tb = tstate->curexc_traceback;
+        if (tb != tmp_tb) {
+            Py_INCREF(tb);
+            tstate->curexc_traceback = tb;
+            Py_XDECREF(tmp_tb);
+        }
+#else
+        PyObject *tmp_type, *tmp_value, *tmp_tb;
+        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
+        Py_INCREF(tb);
+        PyErr_Restore(tmp_type, tmp_value, tb);
+        Py_XDECREF(tmp_tb);
+#endif
+    }
+bad:
+    Py_XDECREF(owned_instance);
+    return;
+}
+#endif
+
+/* Import */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
+    PyObject *module = 0;
+    PyObject *empty_dict = 0;
+    PyObject *empty_list = 0;
+    #if PY_MAJOR_VERSION < 3
+    PyObject *py_import;
+    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
+    if (unlikely(!py_import))
+        goto bad;
+    if (!from_list) {
+        empty_list = PyList_New(0);
+        if (unlikely(!empty_list))
+            goto bad;
+        from_list = empty_list;
+    }
+    #endif
+    empty_dict = PyDict_New();
+    if (unlikely(!empty_dict))
+        goto bad;
+    {
+        #if PY_MAJOR_VERSION >= 3
+        if (level == -1) {
+            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
+                #if CYTHON_COMPILING_IN_LIMITED_API
+                module = PyImport_ImportModuleLevelObject(
+                    name, empty_dict, empty_dict, from_list, 1);
+                #else
+                module = PyImport_ImportModuleLevelObject(
+                    name, __pyx_d, empty_dict, from_list, 1);
+                #endif
+                if (unlikely(!module)) {
+                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
+                        goto bad;
                     PyErr_Clear();
                 }
             }
-            return sm->sq_item(o, i);
+            level = 0;
+        }
+        #endif
+        if (!module) {
+            #if PY_MAJOR_VERSION < 3
+            PyObject *py_level = PyInt_FromLong(level);
+            if (unlikely(!py_level))
+                goto bad;
+            module = PyObject_CallFunctionObjArgs(py_import,
+                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
+            Py_DECREF(py_level);
+            #else
+            #if CYTHON_COMPILING_IN_LIMITED_API
+            module = PyImport_ImportModuleLevelObject(
+                name, empty_dict, empty_dict, from_list, level);
+            #else
+            module = PyImport_ImportModuleLevelObject(
+                name, __pyx_d, empty_dict, from_list, level);
+            #endif
+            #endif
+        }
+    }
+bad:
+    Py_XDECREF(empty_dict);
+    Py_XDECREF(empty_list);
+    #if PY_MAJOR_VERSION < 3
+    Py_XDECREF(py_import);
+    #endif
+    return module;
+}
+
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
+/* Py3UpdateBases */
+static PyObject*
+__Pyx_PEP560_update_bases(PyObject *bases)
+{
+    Py_ssize_t i, j, size_bases;
+    PyObject *base, *meth, *new_base, *result, *new_bases = NULL;
+    size_bases = PyTuple_GET_SIZE(bases);
+    for (i = 0; i < size_bases; i++) {
+        base  = PyTuple_GET_ITEM(bases, i);
+        if (PyType_Check(base)) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        meth = __Pyx_PyObject_GetAttrStrNoError(base, __pyx_n_s_mro_entries);
+        if (!meth && PyErr_Occurred()) {
+            goto error;
+        }
+        if (!meth) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        new_base = __Pyx_PyObject_CallOneArg(meth, bases);
+        Py_DECREF(meth);
+        if (!new_base) {
+            goto error;
+        }
+        if (!PyTuple_Check(new_base)) {
+            PyErr_SetString(PyExc_TypeError,
+                            "__mro_entries__ must return a tuple");
+            Py_DECREF(new_base);
+            goto error;
+        }
+        if (!new_bases) {
+            if (!(new_bases = PyList_New(i))) {
+                goto error;
+            }
+            for (j = 0; j < i; j++) {
+                base = PyTuple_GET_ITEM(bases, j);
+                PyList_SET_ITEM(new_bases, j, base);
+                Py_INCREF(base);
+            }
         }
+        j = PyList_GET_SIZE(new_bases);
+        if (PyList_SetSlice(new_bases, j, j, new_base) < 0) {
+            goto error;
+        }
+        Py_DECREF(new_base);
+    }
+    if (!new_bases) {
+        Py_INCREF(bases);
+        return bases;
     }
-#else
-    if (is_list || PySequence_Check(o)) {
-        return PySequence_GetItem(o, i);
+    result = PyList_AsTuple(new_bases);
+    Py_DECREF(new_bases);
+    return result;
+error:
+    Py_XDECREF(new_bases);
+    return NULL;
+}
+
+/* CalculateMetaclass */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
+    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
+    for (i=0; i < nbases; i++) {
+        PyTypeObject *tmptype;
+        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
+        tmptype = Py_TYPE(tmp);
+#if PY_MAJOR_VERSION < 3
+        if (tmptype == &PyClass_Type)
+            continue;
+#endif
+        if (!metaclass) {
+            metaclass = tmptype;
+            continue;
+        }
+        if (PyType_IsSubtype(metaclass, tmptype))
+            continue;
+        if (PyType_IsSubtype(tmptype, metaclass)) {
+            metaclass = tmptype;
+            continue;
+        }
+        PyErr_SetString(PyExc_TypeError,
+                        "metaclass conflict: "
+                        "the metaclass of a derived class "
+                        "must be a (non-strict) subclass "
+                        "of the metaclasses of all its bases");
+        return NULL;
     }
+    if (!metaclass) {
+#if PY_MAJOR_VERSION < 3
+        metaclass = &PyClass_Type;
+#else
+        metaclass = &PyType_Type;
 #endif
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+    }
+    Py_INCREF((PyObject*) metaclass);
+    return (PyObject*) metaclass;
 }
 
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
@@ -5179,123 +5605,249 @@
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
-/* Import */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
-    PyObject *module = 0;
-    PyObject *empty_dict = 0;
-    PyObject *empty_list = 0;
-    #if PY_MAJOR_VERSION < 3
-    PyObject *py_import;
-    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
-    if (unlikely(!py_import))
-        goto bad;
-    if (!from_list) {
-        empty_list = PyList_New(0);
-        if (unlikely(!empty_list))
-            goto bad;
-        from_list = empty_list;
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* PyObjectLookupSpecial */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error) {
+    PyObject *res;
+    PyTypeObject *tp = Py_TYPE(obj);
+#if PY_MAJOR_VERSION < 3
+    if (unlikely(PyInstance_Check(obj)))
+        return with_error ? __Pyx_PyObject_GetAttrStr(obj, attr_name) : __Pyx_PyObject_GetAttrStrNoError(obj, attr_name);
+#endif
+    res = _PyType_Lookup(tp, attr_name);
+    if (likely(res)) {
+        descrgetfunc f = Py_TYPE(res)->tp_descr_get;
+        if (!f) {
+            Py_INCREF(res);
+        } else {
+            res = f(res, obj, (PyObject *)tp);
+        }
+    } else if (with_error) {
+        PyErr_SetObject(PyExc_AttributeError, attr_name);
     }
-    #endif
-    empty_dict = PyDict_New();
-    if (unlikely(!empty_dict))
-        goto bad;
+    return res;
+}
+#endif
+
+/* Py3ClassCreate */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
+                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
+    PyObject *ns;
+    if (metaclass) {
+        PyObject *prep = __Pyx_PyObject_GetAttrStrNoError(metaclass, __pyx_n_s_prepare);
+        if (prep) {
+            PyObject *pargs[3] = {NULL, name, bases};
+            ns = __Pyx_PyObject_FastCallDict(prep, pargs+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET, mkw);
+            Py_DECREF(prep);
+        } else {
+            if (unlikely(PyErr_Occurred()))
+                return NULL;
+            ns = PyDict_New();
+        }
+    } else {
+        ns = PyDict_New();
+    }
+    if (unlikely(!ns))
+        return NULL;
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
+#if PY_VERSION_HEX >= 0x03030000
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
+#else
+    CYTHON_MAYBE_UNUSED_VAR(qualname);
+#endif
+    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
+    return ns;
+bad:
+    Py_DECREF(ns);
+    return NULL;
+}
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+static int __Pyx_SetNamesPEP487(PyObject *type_obj) {
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *names_to_set, *key, *value, *set_name, *tmp;
+    Py_ssize_t i = 0;
+#if CYTHON_USE_TYPE_SLOTS
+    names_to_set = PyDict_Copy(type->tp_dict);
+#else
     {
-        #if PY_MAJOR_VERSION >= 3
-        if (level == -1) {
-            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
-                #if CYTHON_COMPILING_IN_LIMITED_API
-                module = PyImport_ImportModuleLevelObject(
-                    name, empty_dict, empty_dict, from_list, 1);
-                #else
-                module = PyImport_ImportModuleLevelObject(
-                    name, __pyx_d, empty_dict, from_list, 1);
-                #endif
-                if (unlikely(!module)) {
-                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
-                        goto bad;
-                    PyErr_Clear();
-                }
-            }
-            level = 0;
+        PyObject *d = PyObject_GetAttr(type_obj, __pyx_n_s_dict);
+        names_to_set = NULL;
+        if (likely(d)) {
+            PyObject *names_to_set = PyDict_New();
+            int ret = likely(names_to_set) ? PyDict_Update(names_to_set, d) : -1;
+            Py_DECREF(d);
+            if (unlikely(ret < 0))
+                Py_CLEAR(names_to_set);
         }
-        #endif
-        if (!module) {
-            #if PY_MAJOR_VERSION < 3
-            PyObject *py_level = PyInt_FromLong(level);
-            if (unlikely(!py_level))
+    }
+#endif
+    if (unlikely(names_to_set == NULL))
+        goto bad;
+    while (PyDict_Next(names_to_set, &i, &key, &value)) {
+        set_name = __Pyx_PyObject_LookupSpecialNoError(value, __pyx_n_s_set_name);
+        if (unlikely(set_name != NULL)) {
+            tmp = __Pyx_PyObject_Call2Args(set_name, type_obj, key);
+            Py_DECREF(set_name);
+            if (unlikely(tmp == NULL)) {
+                __Pyx_TypeName value_type_name =
+                    __Pyx_PyType_GetName(Py_TYPE(value));
+                __Pyx_TypeName type_name = __Pyx_PyType_GetName(type);
+                PyErr_Format(PyExc_RuntimeError,
+#if PY_MAJOR_VERSION >= 3
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %R " "in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name, key, type_name);
+#else
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %.100s in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name,
+                    PyString_Check(key) ? PyString_AS_STRING(key) : "?",
+                    type_name);
+#endif
                 goto bad;
-            module = PyObject_CallFunctionObjArgs(py_import,
-                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
-            Py_DECREF(py_level);
-            #else
-            #if CYTHON_COMPILING_IN_LIMITED_API
-            module = PyImport_ImportModuleLevelObject(
-                name, empty_dict, empty_dict, from_list, level);
-            #else
-            module = PyImport_ImportModuleLevelObject(
-                name, __pyx_d, empty_dict, from_list, level);
-            #endif
-            #endif
+            } else {
+                Py_DECREF(tmp);
+            }
+        }
+        else if (unlikely(PyErr_Occurred())) {
+            goto bad;
         }
     }
+    Py_DECREF(names_to_set);
+    return 0;
 bad:
-    Py_XDECREF(empty_dict);
-    Py_XDECREF(empty_list);
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(py_import);
-    #endif
-    return module;
+    Py_XDECREF(names_to_set);
+    return -1;
 }
-
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
+static PyObject *__Pyx_InitSubclassPEP487(PyObject *type_obj, PyObject *mkw) {
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *mro = type->tp_mro;
+    Py_ssize_t i, nbases;
+    if (unlikely(!mro)) goto done;
+    (void) &__Pyx_GetBuiltinName;
+    Py_INCREF(mro);
+    nbases = PyTuple_GET_SIZE(mro);
+    assert(PyTuple_GET_ITEM(mro, 0) == type_obj);
+    for (i = 1; i < nbases-1; i++) {
+        PyObject *base, *dict, *meth;
+        base = PyTuple_GET_ITEM(mro, i);
+        dict = ((PyTypeObject *)base)->tp_dict;
+        meth = __Pyx_PyDict_GetItemStrWithError(dict, __pyx_n_s_init_subclass);
+        if (unlikely(meth)) {
+            descrgetfunc f = Py_TYPE(meth)->tp_descr_get;
+            PyObject *res;
+            Py_INCREF(meth);
+            if (likely(f)) {
+                res = f(meth, NULL, type_obj);
+                Py_DECREF(meth);
+                if (unlikely(!res)) goto bad;
+                meth = res;
+            }
+            res = __Pyx_PyObject_FastCallDict(meth, NULL, 0, mkw);
+            Py_DECREF(meth);
+            if (unlikely(!res)) goto bad;
+            Py_DECREF(res);
+            goto done;
+        } else if (unlikely(PyErr_Occurred())) {
+            goto bad;
         }
-        #else
-        value = PyImport_GetModule(full_name);
-        #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
     }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
-        #else
-            "cannot import name %S", name);
-        #endif
+done:
+    Py_XDECREF(mro);
+    return type_obj;
+bad:
+    Py_XDECREF(mro);
+    Py_DECREF(type_obj);
+    return NULL;
+#else
+    PyObject *super_type, *super, *func, *res;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    super_type = __Pyx_GetBuiltinName(__pyx_n_s_super);
+#else
+    super_type = (PyObject*) &PySuper_Type;
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    super = likely(super_type) ? __Pyx_PyObject_Call2Args(super_type, type_obj, type_obj) : NULL;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    Py_XDECREF(super_type);
+#endif
+    if (unlikely(!super)) {
+        Py_CLEAR(type_obj);
+        goto done;
     }
-    return value;
+    func = __Pyx_PyObject_GetAttrStrNoError(super, __pyx_n_s_init_subclass);
+    Py_DECREF(super);
+    if (likely(!func)) {
+        if (unlikely(PyErr_Occurred()))
+            Py_CLEAR(type_obj);
+        goto done;
+    }
+    res = __Pyx_PyObject_FastCallDict(func, NULL, 0, mkw);
+    Py_DECREF(func);
+    if (unlikely(!res))
+        Py_CLEAR(type_obj);
+    Py_XDECREF(res);
+done:
+    return type_obj;
+#endif
+}
+#endif
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
+                                      PyObject *dict, PyObject *mkw,
+                                      int calculate_metaclass, int allow_py2_metaclass) {
+    PyObject *result;
+    PyObject *owned_metaclass = NULL;
+    PyObject *margs[4] = {NULL, name, bases, dict};
+    if (allow_py2_metaclass) {
+        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
+        if (owned_metaclass) {
+            metaclass = owned_metaclass;
+        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
+            PyErr_Clear();
+        } else {
+            return NULL;
+        }
+    }
+    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
+        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
+        Py_XDECREF(owned_metaclass);
+        if (unlikely(!metaclass))
+            return NULL;
+        owned_metaclass = metaclass;
+    }
+    result = __Pyx_PyObject_FastCallDict(metaclass, margs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET,
+#if PY_VERSION_HEX < 0x030600A4
+        (metaclass == (PyObject*)&PyType_Type) ? NULL : mkw
+#else
+        mkw
+#endif
+    );
+    Py_XDECREF(owned_metaclass);
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+    if (likely(result) && likely(PyType_Check(result))) {
+        if (unlikely(__Pyx_SetNamesPEP487(result) < 0)) {
+            Py_CLEAR(result);
+        } else {
+            result = __Pyx_InitSubclassPEP487(result, mkw);
+        }
+    }
+#else
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    return result;
 }
 
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
@@ -5534,14 +6086,29 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__4));
+    }
+    return name;
+}
+#endif
+
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -5572,29 +6139,14 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__6));
-    }
-    return name;
-}
-#endif
-
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
```

### Comparing `docrx-0.0.11/src/wrapper/infra/ImageObjectsExtractor.c` & `docrx-0.0.110/src/wrapper/infra/ImageObjectsExtractor.c`

 * *Files identical despite different names*

### Comparing `docrx-0.0.11/src/wrapper/infra/LanguageDetector.c` & `docrx-0.0.110/src/wrapper/infra/PreProcessing.c`

 * *Files 4% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.infra.LanguageDetector",
+        "name": "wrapper.infra.PreProcessing",
         "sources": [
-            "src/wrapper/infra/LanguageDetector.pyx"
+            "src/wrapper/infra/PreProcessing.pyx"
         ]
     },
-    "module_name": "wrapper.infra.LanguageDetector"
+    "module_name": "wrapper.infra.PreProcessing"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__infra__LanguageDetector
-#define __PYX_HAVE_API__wrapper__infra__LanguageDetector
+#define __PYX_HAVE__wrapper__infra__PreProcessing
+#define __PYX_HAVE_API__wrapper__infra__PreProcessing
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/infra/LanguageDetector.pyx",
+  "src/wrapper/infra/PreProcessing.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1555,35 +1555,67 @@
     PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
     const char* function_name);
 
 /* RaiseArgTupleInvalid.proto */
 static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
     Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
 
-/* GetItemInt.proto */
-#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
-    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
-               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
-#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
-                                                     int is_list, int wraparound, int boundscheck);
+/* PyFunctionFastCall.proto */
+#if CYTHON_FAST_PYCALL
+#if !CYTHON_VECTORCALL
+#define __Pyx_PyFunction_FastCall(func, args, nargs)\
+    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
+static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
+#endif
+#define __Pyx_BUILD_ASSERT_EXPR(cond)\
+    (sizeof(char [1 - 2*!(cond)]) - 1)
+#ifndef Py_MEMBER_SIZE
+#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
+#endif
+#if !CYTHON_VECTORCALL
+#if PY_VERSION_HEX >= 0x03080000
+  #include "frameobject.h"
+#if PY_VERSION_HEX >= 0x030b00a6
+  #ifndef Py_BUILD_CORE
+    #define Py_BUILD_CORE 1
+  #endif
+  #include "internal/pycore_frame.h"
+#endif
+  #define __Pxy_PyFrame_Initialize_Offsets()
+  #define __Pyx_PyFrame_GetLocalsplus(frame)  ((frame)->f_localsplus)
+#else
+  static size_t __pyx_pyframe_localsplus_offset = 0;
+  #include "frameobject.h"
+  #define __Pxy_PyFrame_Initialize_Offsets()\
+    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
+     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
+  #define __Pyx_PyFrame_GetLocalsplus(frame)\
+    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
+#endif
+#endif
+#endif
+
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
+#else
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
+#endif
+
+/* PyObjectCallMethO.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
+#endif
+
+/* PyObjectFastCall.proto */
+#define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
+static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
+
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
 
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
@@ -1624,65 +1656,43 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
+/* GetItemInt.proto */
+#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
+    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
+               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
+#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
+                                                     int is_list, int wraparound, int boundscheck);
 
-/* PyFunctionFastCall.proto */
-#if CYTHON_FAST_PYCALL
-#if !CYTHON_VECTORCALL
-#define __Pyx_PyFunction_FastCall(func, args, nargs)\
-    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
-static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
-#endif
-#define __Pyx_BUILD_ASSERT_EXPR(cond)\
-    (sizeof(char [1 - 2*!(cond)]) - 1)
-#ifndef Py_MEMBER_SIZE
-#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
-#endif
-#if !CYTHON_VECTORCALL
-#if PY_VERSION_HEX >= 0x03080000
-  #include "frameobject.h"
-#if PY_VERSION_HEX >= 0x030b00a6
-  #ifndef Py_BUILD_CORE
-    #define Py_BUILD_CORE 1
-  #endif
-  #include "internal/pycore_frame.h"
-#endif
-  #define __Pxy_PyFrame_Initialize_Offsets()
-  #define __Pyx_PyFrame_GetLocalsplus(frame)  ((frame)->f_localsplus)
+/* ObjectGetItem.proto */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key);
 #else
-  static size_t __pyx_pyframe_localsplus_offset = 0;
-  #include "frameobject.h"
-  #define __Pxy_PyFrame_Initialize_Offsets()\
-    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
-     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
-  #define __Pyx_PyFrame_GetLocalsplus(frame)\
-    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
-#endif
-#endif
+#define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
 #endif
 
-/* PyObjectCallMethO.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
-#endif
-
-/* PyObjectFastCall.proto */
-#define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
-static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
-
 /* ListCompAppend.proto */
 #if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
 static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
     PyListObject* L = (PyListObject*) list;
     Py_ssize_t len = Py_SIZE(list);
     if (likely(L->allocated > len)) {
         Py_INCREF(x);
@@ -1692,43 +1702,19 @@
     }
     return PyList_Append(list, x);
 }
 #else
 #define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* ListExtend.proto */
-static CYTHON_INLINE int __Pyx_PyList_Extend(PyObject* L, PyObject* v) {
-#if CYTHON_COMPILING_IN_CPYTHON
-    PyObject* none = _PyList_Extend((PyListObject*)L, v);
-    if (unlikely(!none))
-        return -1;
-    Py_DECREF(none);
-    return 0;
-#else
-    return PyList_SetSlice(L, PY_SSIZE_T_MAX, PY_SSIZE_T_MAX, v);
-#endif
-}
-
-/* ListAppend.proto */
-#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
-static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
-    PyListObject* L = (PyListObject*) list;
-    Py_ssize_t len = Py_SIZE(list);
-    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
-        Py_INCREF(x);
-        PyList_SET_ITEM(list, len, x);
-        __Pyx_SET_SIZE(list, len + 1);
-        return 0;
-    }
-    return PyList_Append(list, x);
+/* PySequenceContains.proto */
+static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
+    int result = PySequence_Contains(seq, item);
+    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
 }
-#else
-#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
-#endif
 
 /* PyObjectFormatSimple.proto */
 #if CYTHON_COMPILING_IN_PYPY
     #define __Pyx_PyObject_FormatSimple(s, f) (\
         likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
         PyObject_Format(s, f))
 #elif PY_MAJOR_VERSION < 3
@@ -1744,118 +1730,27 @@
         PyObject_Format(s, f))
 #else
     #define __Pyx_PyObject_FormatSimple(s, f) (\
         likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
         PyObject_Format(s, f))
 #endif
 
-/* JoinPyUnicode.proto */
-static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
-                                      Py_UCS4 max_char);
-
-/* GetTopmostException.proto */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
-#endif
-
-/* SaveResetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
-#else
-#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
-#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
-#endif
-
-/* GetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
-#endif
-
-/* PyIntBinop.proto */
-#if !CYTHON_COMPILING_IN_PYPY
-static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check);
-#else
-#define __Pyx_PyInt_SubtractObjC(op1, op2, intval, inplace, zerodivision_check)\
-    (inplace ? PyNumber_InPlaceSubtract(op1, op2) : PyNumber_Subtract(op1, op2))
-#endif
-
-/* PyIntCompare.proto */
-static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace);
-
-/* PyDictContains.proto */
-static CYTHON_INLINE int __Pyx_PyDict_ContainsTF(PyObject* item, PyObject* dict, int eq) {
-    int result = PyDict_Contains(dict, item);
-    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
-}
-
-/* DictGetItem.proto */
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
-#define __Pyx_PyObject_Dict_GetItem(obj, name)\
-    (likely(PyDict_CheckExact(obj)) ?\
-     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
-#else
-#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
-#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
-#endif
-
-/* PyObjectCall2Args.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
-
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
-
-/* PyObjectGetMethod.proto */
-static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);
-
-/* PyObjectCallMethod1.proto */
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);
-
-/* append.proto */
-static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);
-
 /* RaiseException.proto */
 static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
 
-/* py_dict_items.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d);
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
-/* UnpackUnboundCMethod.proto */
-typedef struct {
-    PyObject *type;
-    PyObject **method_name;
-    PyCFunction func;
-    PyObject *method;
-    int flag;
-} __Pyx_CachedCFunction;
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
-/* CallUnboundCMethod0.proto */
-static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self);
-#if CYTHON_COMPILING_IN_CPYTHON
-#define __Pyx_CallUnboundCMethod0(cfunc, self)\
-    (likely((cfunc)->func) ?\
-        (likely((cfunc)->flag == METH_NOARGS) ?  (*((cfunc)->func))(self, NULL) :\
-         (PY_VERSION_HEX >= 0x030600B1 && likely((cfunc)->flag == METH_FASTCALL) ?\
-            (PY_VERSION_HEX >= 0x030700A0 ?\
-                (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0) :\
-                (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL)) :\
-          (PY_VERSION_HEX >= 0x030700A0 && (cfunc)->flag == (METH_FASTCALL | METH_KEYWORDS) ?\
-            (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL) :\
-            (likely((cfunc)->flag == (METH_VARARGS | METH_KEYWORDS)) ?  ((*(PyCFunctionWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, __pyx_empty_tuple, NULL)) :\
-               ((cfunc)->flag == METH_VARARGS ?  (*((cfunc)->func))(self, __pyx_empty_tuple) :\
-               __Pyx__CallUnboundCMethod0(cfunc, self)))))) :\
-        __Pyx__CallUnboundCMethod0(cfunc, self))
-#else
-#define __Pyx_CallUnboundCMethod0(cfunc, self)  __Pyx__CallUnboundCMethod0(cfunc, self)
+/* ImportDottedModule.proto */
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
 #endif
 
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
@@ -1976,29 +1871,14 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
-/* PyUnicode_Unicode.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj);
-
-/* Import.proto */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
-
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
-
-/* ImportDottedModule.proto */
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
-#endif
-
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -2019,35 +1899,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -2071,114 +1951,100 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.infra.LanguageDetector" */
+/* Module declarations from "wrapper.infra.PreProcessing" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.infra.LanguageDetector"
-extern int __pyx_module_is_main_wrapper__infra__LanguageDetector;
-int __pyx_module_is_main_wrapper__infra__LanguageDetector = 0;
+#define __Pyx_MODULE_NAME "wrapper.infra.PreProcessing"
+extern int __pyx_module_is_main_wrapper__infra__PreProcessing;
+int __pyx_module_is_main_wrapper__infra__PreProcessing = 0;
 
-/* Implementation of "wrapper.infra.LanguageDetector" */
+/* Implementation of "wrapper.infra.PreProcessing" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_sorted;
+static PyObject *__pyx_builtin_print;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_[] = "\n";
-static const char __pyx_k_t[] = "t";
-static const char __pyx_k_x[] = "x";
-static const char __pyx_k__2[] = ".";
-static const char __pyx_k__3[] = "...";
-static const char __pyx_k__5[] = " ";
-static const char __pyx_k__6[] = "*";
-static const char __pyx_k_to[] = " to ";
-static const char __pyx_k__10[] = "?";
-static const char __pyx_k_arr[] = "arr";
-static const char __pyx_k_det[] = "det";
-static const char __pyx_k_key[] = "key";
-static const char __pyx_k_None[] = "None";
-static const char __pyx_k_dest[] = "dest";
-static const char __pyx_k_info[] = "info";
-static const char __pyx_k_lang[] = "lang";
+static const char __pyx_k_[] = "";
+static const char __pyx_k_W[] = "\\W+";
+static const char __pyx_k_c[] = "c";
+static const char __pyx_k_n[] = "\\n";
+static const char __pyx_k_s[] = "\\s+";
+static const char __pyx_k__2[] = " ";
+static const char __pyx_k__3[] = ".";
+static const char __pyx_k__4[] = "*";
+static const char __pyx_k_en[] = "en";
+static const char __pyx_k_es[] = "es";
+static const char __pyx_k_pt[] = "pt";
+static const char __pyx_k_re[] = "re";
+static const char __pyx_k_NFD[] = "NFD";
+static const char __pyx_k__21[] = "?";
+static const char __pyx_k_sub[] = "sub";
+static const char __pyx_k_w_s[] = "[^\\w\\s]";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_spec[] = "__spec__";
+static const char __pyx_k_stem[] = "stem";
 static const char __pyx_k_test[] = "__test__";
 static const char __pyx_k_text[] = "text";
-static const char __pyx_k_time[] = "time";
-static const char __pyx_k_debug[] = "debug";
-static const char __pyx_k_error[] = "error";
-static const char __pyx_k_items[] = "items";
-static const char __pyx_k_retry[] = "retry";
-static const char __pyx_k_sleep[] = "sleep";
+static const char __pyx_k_word[] = "word";
+static const char __pyx_k_lower[] = "lower";
+static const char __pyx_k_print[] = "print";
 static const char __pyx_k_split[] = "split";
-static const char __pyx_k_strip[] = "strip";
-static const char __pyx_k_append[] = "append";
-static const char __pyx_k_detect[] = "detect";
+static const char __pyx_k_value[] = "value";
+static const char __pyx_k_words[] = "words";
 static const char __pyx_k_import[] = "__import__";
-static const char __pyx_k_slited[] = "slited";
-static const char __pyx_k_sorted[] = "sorted";
-static const char __pyx_k_tokens[] = "tokens";
-static const char __pyx_k_error_2[] = " error";
-static const char __pyx_k_logging[] = "logging";
-static const char __pyx_k_reverse[] = "reverse";
-static const char __pyx_k_checking[] = "checking ";
-static const char __pyx_k_detected[] = "detected";
-static const char __pyx_k_fix_word[] = "fix_word";
-static const char __pyx_k_Translate[] = "Translate ";
-static const char __pyx_k_WordFixer[] = "WordFixer";
-static const char __pyx_k_norm_text[] = "norm_text";
-static const char __pyx_k_sentences[] = "sentences";
-static const char __pyx_k_traceback[] = "traceback";
-static const char __pyx_k_translate[] = "translate";
-static const char __pyx_k_Translator[] = "Translator";
-static const char __pyx_k_format_exc[] = "format_exc";
-static const char __pyx_k_translator[] = "translator";
-static const char __pyx_k_detect_lang[] = "detect_lang";
-static const char __pyx_k_googletrans[] = "googletrans";
-static const char __pyx_k_splitedText[] = "splitedText";
+static const char __pyx_k_english[] = "english";
+static const char __pyx_k_spanish[] = "spanish";
+static const char __pyx_k_stemmer[] = "stemmer";
+static const char __pyx_k_language[] = "language";
+static const char __pyx_k_combining[] = "combining";
+static const char __pyx_k_nltk_stem[] = "nltk.stem";
+static const char __pyx_k_normalize[] = "normalize";
+static const char __pyx_k_stopwords[] = "stopwords";
+static const char __pyx_k_portuguese[] = "portuguese";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
+static const char __pyx_k_RSLPStemmer[] = "RSLPStemmer";
+static const char __pyx_k_nltk_corpus[] = "nltk.corpus";
+static const char __pyx_k_unicodedata[] = "unicodedata";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_service_urls[] = "service_urls";
-static const char __pyx_k_total_tokens[] = "total_tokens";
-static const char __pyx_k_translate_to[] = "translate_to";
-static const char __pyx_k_Lang_detected[] = ". Lang detected ";
-static const char __pyx_k_PreProcessing[] = "PreProcessing";
-static const char __pyx_k_retrying_Left[] = "retrying. Left ";
-static const char __pyx_k_Checked_tokens[] = ". Checked tokens ";
-static const char __pyx_k_allSplitedText[] = "allSplitedText";
-static const char __pyx_k_from_sentences[] = " from sentences ";
+static const char __pyx_k_class_getitem[] = "__class_getitem__";
+static const char __pyx_k_lemantization[] = "lemantization";
+static const char __pyx_k_nltk_tokenize[] = "nltk.tokenize";
+static const char __pyx_k_sent_tokenize[] = "sent_tokenize";
+static const char __pyx_k_word_tokenize[] = "word_tokenize";
+static const char __pyx_k_nltk_languages[] = "nltk_languages";
 static const char __pyx_k_normalize_text[] = "normalize_text";
-static const char __pyx_k_Detected_object[] = ". Detected object ";
-static const char __pyx_k_Translated_text[] = "Translated text: \n ";
-static const char __pyx_k_translated_text[] = "translated_text";
-static const char __pyx_k_maxCheckedTokens[] = "maxCheckedTokens";
-static const char __pyx_k_Error_to_translate[] = "Error to translate ";
+static const char __pyx_k_remove_accents[] = "remove_accents";
+static const char __pyx_k_SnowballStemmer[] = "SnowballStemmer";
+static const char __pyx_k_normalized_text[] = "normalized_text";
+static const char __pyx_k_WordNetLemmatizer[] = "WordNetLemmatizer";
+static const char __pyx_k_extract_sentences[] = "extract_sentences";
+static const char __pyx_k_supportedLanguage[] = "supportedLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_detecteds_sentences[] = "detecteds_sentences";
-static const char __pyx_k_translate_google_com[] = "translate.google.com";
-static const char __pyx_k_translated_sentences[] = "translated_sentences";
-static const char __pyx_k_Language_not_detected[] = "Language not detected";
-static const char __pyx_k_Will_be_translated_to[] = ". Will be translated to ";
-static const char __pyx_k_Detected_Text_Language[] = "Detected Text Language ";
-static const char __pyx_k_translate_google_co_kr[] = "translate.google.co.kr";
-static const char __pyx_k_Error_to_concatenate_text[] = "Error to concatenate text ";
-static const char __pyx_k_detect_lang_locals_lambda[] = "detect_lang.<locals>.<lambda>";
-static const char __pyx_k_wrapper_infra_LanguageDetector[] = "wrapper.infra.LanguageDetector";
-static const char __pyx_k_Error_to_detect_language_for_sen[] = "Error to detect language for sentence ";
-static const char __pyx_k_It_doesn_t_have_readable_sentenc[] = "It doesn't have readable sentences for ";
-static const char __pyx_k_src_wrapper_infra_LanguageDetect[] = "src/wrapper/infra/LanguageDetector.pyx";
+static const char __pyx_k_remove_all_accents[] = "remove_all_accents";
+static const char __pyx_k_wrapper_infra_PreProcessing[] = "wrapper.infra.PreProcessing";
+static const char __pyx_k_remove_alphanumeric_character[] = "remove_alphanumeric_character";
+static const char __pyx_k_it_doesn_t_have_tokens_for_text[] = "it doesn't have tokens for text: ";
+static const char __pyx_k_src_wrapper_infra_PreProcessing[] = "src/wrapper/infra/PreProcessing.pyx";
+static const char __pyx_k_Not_Specified_the_language_for_t[] = "Not Specified the language for text ";
+static const char __pyx_k_preprocess_text_for_lemantizatio[] = "preprocess_text_for_lemantization";
+static const char __pyx_k_preprocess_text_for_stemmetizati[] = "preprocess_text_for_stemmetization";
 /* #### Code section: decls ### */
-static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to); /* proto */
-static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_items = {0, 0, 0, 0, 0};
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_stemmer); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_remove_all_accents); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_10extract_sentences(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_12preprocess_text_for_stemmetization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -2201,106 +2067,96 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
-  PyObject *__pyx_kp_u_Checked_tokens;
-  PyObject *__pyx_kp_u_Detected_Text_Language;
-  PyObject *__pyx_kp_u_Detected_object;
-  PyObject *__pyx_kp_u_Error_to_concatenate_text;
-  PyObject *__pyx_kp_u_Error_to_detect_language_for_sen;
-  PyObject *__pyx_kp_u_Error_to_translate;
-  PyObject *__pyx_kp_u_It_doesn_t_have_readable_sentenc;
-  PyObject *__pyx_kp_u_Lang_detected;
-  PyObject *__pyx_kp_u_Language_not_detected;
-  PyObject *__pyx_kp_u_None;
-  PyObject *__pyx_n_s_PreProcessing;
-  PyObject *__pyx_kp_u_Translate;
-  PyObject *__pyx_kp_u_Translated_text;
-  PyObject *__pyx_n_s_Translator;
-  PyObject *__pyx_kp_u_Will_be_translated_to;
-  PyObject *__pyx_n_s_WordFixer;
-  PyObject *__pyx_n_s__10;
+  PyObject *__pyx_n_s_DocLanguage;
+  PyObject *__pyx_n_u_NFD;
+  PyObject *__pyx_kp_u_Not_Specified_the_language_for_t;
+  PyObject *__pyx_n_s_RSLPStemmer;
+  PyObject *__pyx_n_s_SnowballStemmer;
+  PyObject *__pyx_kp_u_W;
+  PyObject *__pyx_n_s_WordNetLemmatizer;
   PyObject *__pyx_kp_u__2;
+  PyObject *__pyx_n_s__21;
   PyObject *__pyx_kp_u__3;
-  PyObject *__pyx_kp_u__5;
-  PyObject *__pyx_n_s__6;
-  PyObject *__pyx_n_s_allSplitedText;
-  PyObject *__pyx_n_s_append;
-  PyObject *__pyx_n_s_arr;
+  PyObject *__pyx_n_s__4;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_kp_u_checking;
+  PyObject *__pyx_n_s_c;
+  PyObject *__pyx_n_s_class_getitem;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_debug;
-  PyObject *__pyx_n_s_dest;
-  PyObject *__pyx_n_s_det;
-  PyObject *__pyx_n_s_detect;
-  PyObject *__pyx_n_s_detect_lang;
-  PyObject *__pyx_n_s_detect_lang_locals_lambda;
-  PyObject *__pyx_n_s_detected;
-  PyObject *__pyx_n_s_detecteds_sentences;
-  PyObject *__pyx_n_s_error;
-  PyObject *__pyx_kp_u_error_2;
-  PyObject *__pyx_n_s_fix_word;
-  PyObject *__pyx_n_s_format_exc;
-  PyObject *__pyx_kp_u_from_sentences;
-  PyObject *__pyx_n_s_googletrans;
+  PyObject *__pyx_n_s_combining;
+  PyObject *__pyx_n_u_en;
+  PyObject *__pyx_n_u_english;
+  PyObject *__pyx_n_u_es;
+  PyObject *__pyx_n_s_extract_sentences;
   PyObject *__pyx_n_s_import;
-  PyObject *__pyx_n_s_info;
   PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_is_coroutine;
-  PyObject *__pyx_n_s_items;
-  PyObject *__pyx_n_s_key;
-  PyObject *__pyx_n_s_lang;
-  PyObject *__pyx_n_s_logging;
+  PyObject *__pyx_kp_u_it_doesn_t_have_tokens_for_text;
+  PyObject *__pyx_n_s_language;
+  PyObject *__pyx_n_s_lemantization;
+  PyObject *__pyx_n_s_lower;
   PyObject *__pyx_n_s_main;
-  PyObject *__pyx_n_s_maxCheckedTokens;
+  PyObject *__pyx_kp_u_n;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_norm_text;
+  PyObject *__pyx_n_s_nltk_corpus;
+  PyObject *__pyx_n_s_nltk_languages;
+  PyObject *__pyx_n_s_nltk_stem;
+  PyObject *__pyx_n_s_nltk_tokenize;
+  PyObject *__pyx_n_s_normalize;
   PyObject *__pyx_n_s_normalize_text;
-  PyObject *__pyx_n_s_retry;
-  PyObject *__pyx_kp_u_retrying_Left;
-  PyObject *__pyx_n_s_reverse;
-  PyObject *__pyx_n_s_sentences;
-  PyObject *__pyx_n_s_service_urls;
-  PyObject *__pyx_n_s_sleep;
-  PyObject *__pyx_n_s_slited;
-  PyObject *__pyx_n_s_sorted;
+  PyObject *__pyx_n_s_normalized_text;
+  PyObject *__pyx_n_u_portuguese;
+  PyObject *__pyx_n_s_preprocess_text_for_lemantizatio;
+  PyObject *__pyx_n_s_preprocess_text_for_stemmetizati;
+  PyObject *__pyx_n_s_print;
+  PyObject *__pyx_n_u_pt;
+  PyObject *__pyx_n_s_re;
+  PyObject *__pyx_n_s_remove_accents;
+  PyObject *__pyx_n_s_remove_all_accents;
+  PyObject *__pyx_n_s_remove_alphanumeric_character;
+  PyObject *__pyx_kp_u_s;
+  PyObject *__pyx_n_s_sent_tokenize;
+  PyObject *__pyx_n_u_spanish;
   PyObject *__pyx_n_s_spec;
   PyObject *__pyx_n_s_split;
-  PyObject *__pyx_n_s_splitedText;
-  PyObject *__pyx_kp_s_src_wrapper_infra_LanguageDetect;
-  PyObject *__pyx_n_s_strip;
-  PyObject *__pyx_n_s_t;
+  PyObject *__pyx_kp_s_src_wrapper_infra_PreProcessing;
+  PyObject *__pyx_n_s_stem;
+  PyObject *__pyx_n_s_stemmer;
+  PyObject *__pyx_n_s_stopwords;
+  PyObject *__pyx_n_s_sub;
+  PyObject *__pyx_n_s_supportedLanguage;
   PyObject *__pyx_n_s_test;
   PyObject *__pyx_n_s_text;
-  PyObject *__pyx_n_s_time;
-  PyObject *__pyx_kp_u_to;
-  PyObject *__pyx_n_s_tokens;
-  PyObject *__pyx_n_s_total_tokens;
-  PyObject *__pyx_n_s_traceback;
-  PyObject *__pyx_n_s_translate;
-  PyObject *__pyx_kp_u_translate_google_co_kr;
-  PyObject *__pyx_kp_u_translate_google_com;
-  PyObject *__pyx_n_s_translate_to;
-  PyObject *__pyx_n_s_translated_sentences;
-  PyObject *__pyx_n_s_translated_text;
-  PyObject *__pyx_n_s_translator;
-  PyObject *__pyx_n_s_wrapper_infra_LanguageDetector;
-  PyObject *__pyx_n_s_x;
-  PyObject *__pyx_float_0_5;
-  PyObject *__pyx_int_0;
-  PyObject *__pyx_int_1;
-  PyObject *__pyx_int_4;
-  PyObject *__pyx_tuple__4;
+  PyObject *__pyx_n_s_unicodedata;
+  PyObject *__pyx_n_s_value;
+  PyObject *__pyx_kp_u_w_s;
+  PyObject *__pyx_n_s_word;
+  PyObject *__pyx_n_s_word_tokenize;
+  PyObject *__pyx_n_s_words;
+  PyObject *__pyx_n_s_wrapper_infra_PreProcessing;
+  PyObject *__pyx_tuple__5;
   PyObject *__pyx_tuple__7;
   PyObject *__pyx_tuple__9;
+  PyObject *__pyx_tuple__11;
+  PyObject *__pyx_tuple__13;
+  PyObject *__pyx_tuple__15;
+  PyObject *__pyx_tuple__16;
+  PyObject *__pyx_tuple__18;
+  PyObject *__pyx_tuple__20;
+  PyObject *__pyx_codeobj__6;
   PyObject *__pyx_codeobj__8;
+  PyObject *__pyx_codeobj__10;
+  PyObject *__pyx_codeobj__12;
+  PyObject *__pyx_codeobj__14;
+  PyObject *__pyx_codeobj__17;
+  PyObject *__pyx_codeobj__19;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2336,106 +2192,96 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Checked_tokens);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Detected_Text_Language);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Detected_object);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_concatenate_text);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_detect_language_for_sen);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_translate);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_It_doesn_t_have_readable_sentenc);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Lang_detected);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Language_not_detected);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_None);
-  Py_CLEAR(clear_module_state->__pyx_n_s_PreProcessing);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Translate);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Translated_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_Translator);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Will_be_translated_to);
-  Py_CLEAR(clear_module_state->__pyx_n_s_WordFixer);
-  Py_CLEAR(clear_module_state->__pyx_n_s__10);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_u_NFD);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Not_Specified_the_language_for_t);
+  Py_CLEAR(clear_module_state->__pyx_n_s_RSLPStemmer);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SnowballStemmer);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_W);
+  Py_CLEAR(clear_module_state->__pyx_n_s_WordNetLemmatizer);
   Py_CLEAR(clear_module_state->__pyx_kp_u__2);
+  Py_CLEAR(clear_module_state->__pyx_n_s__21);
   Py_CLEAR(clear_module_state->__pyx_kp_u__3);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__5);
-  Py_CLEAR(clear_module_state->__pyx_n_s__6);
-  Py_CLEAR(clear_module_state->__pyx_n_s_allSplitedText);
-  Py_CLEAR(clear_module_state->__pyx_n_s_append);
-  Py_CLEAR(clear_module_state->__pyx_n_s_arr);
+  Py_CLEAR(clear_module_state->__pyx_n_s__4);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_checking);
+  Py_CLEAR(clear_module_state->__pyx_n_s_c);
+  Py_CLEAR(clear_module_state->__pyx_n_s_class_getitem);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_debug);
-  Py_CLEAR(clear_module_state->__pyx_n_s_dest);
-  Py_CLEAR(clear_module_state->__pyx_n_s_det);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detect);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang_locals_lambda);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detected);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detecteds_sentences);
-  Py_CLEAR(clear_module_state->__pyx_n_s_error);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_error_2);
-  Py_CLEAR(clear_module_state->__pyx_n_s_fix_word);
-  Py_CLEAR(clear_module_state->__pyx_n_s_format_exc);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_from_sentences);
-  Py_CLEAR(clear_module_state->__pyx_n_s_googletrans);
+  Py_CLEAR(clear_module_state->__pyx_n_s_combining);
+  Py_CLEAR(clear_module_state->__pyx_n_u_en);
+  Py_CLEAR(clear_module_state->__pyx_n_u_english);
+  Py_CLEAR(clear_module_state->__pyx_n_u_es);
+  Py_CLEAR(clear_module_state->__pyx_n_s_extract_sentences);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
-  Py_CLEAR(clear_module_state->__pyx_n_s_info);
   Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
-  Py_CLEAR(clear_module_state->__pyx_n_s_items);
-  Py_CLEAR(clear_module_state->__pyx_n_s_key);
-  Py_CLEAR(clear_module_state->__pyx_n_s_lang);
-  Py_CLEAR(clear_module_state->__pyx_n_s_logging);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_it_doesn_t_have_tokens_for_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lemantization);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lower);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
-  Py_CLEAR(clear_module_state->__pyx_n_s_maxCheckedTokens);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_n);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_norm_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_corpus);
+  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_languages);
+  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_stem);
+  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_tokenize);
+  Py_CLEAR(clear_module_state->__pyx_n_s_normalize);
   Py_CLEAR(clear_module_state->__pyx_n_s_normalize_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_retry);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_retrying_Left);
-  Py_CLEAR(clear_module_state->__pyx_n_s_reverse);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sentences);
-  Py_CLEAR(clear_module_state->__pyx_n_s_service_urls);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sleep);
-  Py_CLEAR(clear_module_state->__pyx_n_s_slited);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sorted);
+  Py_CLEAR(clear_module_state->__pyx_n_s_normalized_text);
+  Py_CLEAR(clear_module_state->__pyx_n_u_portuguese);
+  Py_CLEAR(clear_module_state->__pyx_n_s_preprocess_text_for_lemantizatio);
+  Py_CLEAR(clear_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
+  Py_CLEAR(clear_module_state->__pyx_n_s_print);
+  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
+  Py_CLEAR(clear_module_state->__pyx_n_s_re);
+  Py_CLEAR(clear_module_state->__pyx_n_s_remove_accents);
+  Py_CLEAR(clear_module_state->__pyx_n_s_remove_all_accents);
+  Py_CLEAR(clear_module_state->__pyx_n_s_remove_alphanumeric_character);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_s);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sent_tokenize);
+  Py_CLEAR(clear_module_state->__pyx_n_u_spanish);
   Py_CLEAR(clear_module_state->__pyx_n_s_spec);
   Py_CLEAR(clear_module_state->__pyx_n_s_split);
-  Py_CLEAR(clear_module_state->__pyx_n_s_splitedText);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_LanguageDetect);
-  Py_CLEAR(clear_module_state->__pyx_n_s_strip);
-  Py_CLEAR(clear_module_state->__pyx_n_s_t);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_PreProcessing);
+  Py_CLEAR(clear_module_state->__pyx_n_s_stem);
+  Py_CLEAR(clear_module_state->__pyx_n_s_stemmer);
+  Py_CLEAR(clear_module_state->__pyx_n_s_stopwords);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sub);
+  Py_CLEAR(clear_module_state->__pyx_n_s_supportedLanguage);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
   Py_CLEAR(clear_module_state->__pyx_n_s_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_time);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_to);
-  Py_CLEAR(clear_module_state->__pyx_n_s_tokens);
-  Py_CLEAR(clear_module_state->__pyx_n_s_total_tokens);
-  Py_CLEAR(clear_module_state->__pyx_n_s_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_translate);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_translate_google_co_kr);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_translate_google_com);
-  Py_CLEAR(clear_module_state->__pyx_n_s_translate_to);
-  Py_CLEAR(clear_module_state->__pyx_n_s_translated_sentences);
-  Py_CLEAR(clear_module_state->__pyx_n_s_translated_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_translator);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_LanguageDetector);
-  Py_CLEAR(clear_module_state->__pyx_n_s_x);
-  Py_CLEAR(clear_module_state->__pyx_float_0_5);
-  Py_CLEAR(clear_module_state->__pyx_int_0);
-  Py_CLEAR(clear_module_state->__pyx_int_1);
-  Py_CLEAR(clear_module_state->__pyx_int_4);
-  Py_CLEAR(clear_module_state->__pyx_tuple__4);
+  Py_CLEAR(clear_module_state->__pyx_n_s_unicodedata);
+  Py_CLEAR(clear_module_state->__pyx_n_s_value);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_w_s);
+  Py_CLEAR(clear_module_state->__pyx_n_s_word);
+  Py_CLEAR(clear_module_state->__pyx_n_s_word_tokenize);
+  Py_CLEAR(clear_module_state->__pyx_n_s_words);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_PreProcessing);
+  Py_CLEAR(clear_module_state->__pyx_tuple__5);
   Py_CLEAR(clear_module_state->__pyx_tuple__7);
   Py_CLEAR(clear_module_state->__pyx_tuple__9);
+  Py_CLEAR(clear_module_state->__pyx_tuple__11);
+  Py_CLEAR(clear_module_state->__pyx_tuple__13);
+  Py_CLEAR(clear_module_state->__pyx_tuple__15);
+  Py_CLEAR(clear_module_state->__pyx_tuple__16);
+  Py_CLEAR(clear_module_state->__pyx_tuple__18);
+  Py_CLEAR(clear_module_state->__pyx_tuple__20);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__6);
   Py_CLEAR(clear_module_state->__pyx_codeobj__8);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__10);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__12);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__14);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__17);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__19);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2449,106 +2295,96 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Checked_tokens);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Detected_Text_Language);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Detected_object);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_concatenate_text);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_detect_language_for_sen);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_translate);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_It_doesn_t_have_readable_sentenc);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Lang_detected);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Language_not_detected);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_None);
-  Py_VISIT(traverse_module_state->__pyx_n_s_PreProcessing);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Translate);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Translated_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_Translator);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Will_be_translated_to);
-  Py_VISIT(traverse_module_state->__pyx_n_s_WordFixer);
-  Py_VISIT(traverse_module_state->__pyx_n_s__10);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_u_NFD);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Not_Specified_the_language_for_t);
+  Py_VISIT(traverse_module_state->__pyx_n_s_RSLPStemmer);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SnowballStemmer);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_W);
+  Py_VISIT(traverse_module_state->__pyx_n_s_WordNetLemmatizer);
   Py_VISIT(traverse_module_state->__pyx_kp_u__2);
+  Py_VISIT(traverse_module_state->__pyx_n_s__21);
   Py_VISIT(traverse_module_state->__pyx_kp_u__3);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__5);
-  Py_VISIT(traverse_module_state->__pyx_n_s__6);
-  Py_VISIT(traverse_module_state->__pyx_n_s_allSplitedText);
-  Py_VISIT(traverse_module_state->__pyx_n_s_append);
-  Py_VISIT(traverse_module_state->__pyx_n_s_arr);
+  Py_VISIT(traverse_module_state->__pyx_n_s__4);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_checking);
+  Py_VISIT(traverse_module_state->__pyx_n_s_c);
+  Py_VISIT(traverse_module_state->__pyx_n_s_class_getitem);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_debug);
-  Py_VISIT(traverse_module_state->__pyx_n_s_dest);
-  Py_VISIT(traverse_module_state->__pyx_n_s_det);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detect);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang_locals_lambda);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detected);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detecteds_sentences);
-  Py_VISIT(traverse_module_state->__pyx_n_s_error);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_error_2);
-  Py_VISIT(traverse_module_state->__pyx_n_s_fix_word);
-  Py_VISIT(traverse_module_state->__pyx_n_s_format_exc);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_from_sentences);
-  Py_VISIT(traverse_module_state->__pyx_n_s_googletrans);
+  Py_VISIT(traverse_module_state->__pyx_n_s_combining);
+  Py_VISIT(traverse_module_state->__pyx_n_u_en);
+  Py_VISIT(traverse_module_state->__pyx_n_u_english);
+  Py_VISIT(traverse_module_state->__pyx_n_u_es);
+  Py_VISIT(traverse_module_state->__pyx_n_s_extract_sentences);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
-  Py_VISIT(traverse_module_state->__pyx_n_s_info);
   Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
-  Py_VISIT(traverse_module_state->__pyx_n_s_items);
-  Py_VISIT(traverse_module_state->__pyx_n_s_key);
-  Py_VISIT(traverse_module_state->__pyx_n_s_lang);
-  Py_VISIT(traverse_module_state->__pyx_n_s_logging);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_it_doesn_t_have_tokens_for_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lemantization);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lower);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
-  Py_VISIT(traverse_module_state->__pyx_n_s_maxCheckedTokens);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_n);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_norm_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_corpus);
+  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_languages);
+  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_stem);
+  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_tokenize);
+  Py_VISIT(traverse_module_state->__pyx_n_s_normalize);
   Py_VISIT(traverse_module_state->__pyx_n_s_normalize_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_retry);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_retrying_Left);
-  Py_VISIT(traverse_module_state->__pyx_n_s_reverse);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sentences);
-  Py_VISIT(traverse_module_state->__pyx_n_s_service_urls);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sleep);
-  Py_VISIT(traverse_module_state->__pyx_n_s_slited);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sorted);
+  Py_VISIT(traverse_module_state->__pyx_n_s_normalized_text);
+  Py_VISIT(traverse_module_state->__pyx_n_u_portuguese);
+  Py_VISIT(traverse_module_state->__pyx_n_s_preprocess_text_for_lemantizatio);
+  Py_VISIT(traverse_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
+  Py_VISIT(traverse_module_state->__pyx_n_s_print);
+  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
+  Py_VISIT(traverse_module_state->__pyx_n_s_re);
+  Py_VISIT(traverse_module_state->__pyx_n_s_remove_accents);
+  Py_VISIT(traverse_module_state->__pyx_n_s_remove_all_accents);
+  Py_VISIT(traverse_module_state->__pyx_n_s_remove_alphanumeric_character);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_s);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sent_tokenize);
+  Py_VISIT(traverse_module_state->__pyx_n_u_spanish);
   Py_VISIT(traverse_module_state->__pyx_n_s_spec);
   Py_VISIT(traverse_module_state->__pyx_n_s_split);
-  Py_VISIT(traverse_module_state->__pyx_n_s_splitedText);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_LanguageDetect);
-  Py_VISIT(traverse_module_state->__pyx_n_s_strip);
-  Py_VISIT(traverse_module_state->__pyx_n_s_t);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_PreProcessing);
+  Py_VISIT(traverse_module_state->__pyx_n_s_stem);
+  Py_VISIT(traverse_module_state->__pyx_n_s_stemmer);
+  Py_VISIT(traverse_module_state->__pyx_n_s_stopwords);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sub);
+  Py_VISIT(traverse_module_state->__pyx_n_s_supportedLanguage);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
   Py_VISIT(traverse_module_state->__pyx_n_s_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_time);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_to);
-  Py_VISIT(traverse_module_state->__pyx_n_s_tokens);
-  Py_VISIT(traverse_module_state->__pyx_n_s_total_tokens);
-  Py_VISIT(traverse_module_state->__pyx_n_s_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_translate);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_translate_google_co_kr);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_translate_google_com);
-  Py_VISIT(traverse_module_state->__pyx_n_s_translate_to);
-  Py_VISIT(traverse_module_state->__pyx_n_s_translated_sentences);
-  Py_VISIT(traverse_module_state->__pyx_n_s_translated_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_translator);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_LanguageDetector);
-  Py_VISIT(traverse_module_state->__pyx_n_s_x);
-  Py_VISIT(traverse_module_state->__pyx_float_0_5);
-  Py_VISIT(traverse_module_state->__pyx_int_0);
-  Py_VISIT(traverse_module_state->__pyx_int_1);
-  Py_VISIT(traverse_module_state->__pyx_int_4);
-  Py_VISIT(traverse_module_state->__pyx_tuple__4);
+  Py_VISIT(traverse_module_state->__pyx_n_s_unicodedata);
+  Py_VISIT(traverse_module_state->__pyx_n_s_value);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_w_s);
+  Py_VISIT(traverse_module_state->__pyx_n_s_word);
+  Py_VISIT(traverse_module_state->__pyx_n_s_word_tokenize);
+  Py_VISIT(traverse_module_state->__pyx_n_s_words);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_PreProcessing);
+  Py_VISIT(traverse_module_state->__pyx_tuple__5);
   Py_VISIT(traverse_module_state->__pyx_tuple__7);
   Py_VISIT(traverse_module_state->__pyx_tuple__9);
+  Py_VISIT(traverse_module_state->__pyx_tuple__11);
+  Py_VISIT(traverse_module_state->__pyx_tuple__13);
+  Py_VISIT(traverse_module_state->__pyx_tuple__15);
+  Py_VISIT(traverse_module_state->__pyx_tuple__16);
+  Py_VISIT(traverse_module_state->__pyx_tuple__18);
+  Py_VISIT(traverse_module_state->__pyx_tuple__20);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__6);
   Py_VISIT(traverse_module_state->__pyx_codeobj__8);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__10);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__12);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__14);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__17);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__19);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2572,2211 +2408,2303 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
-#define __pyx_kp_u_Checked_tokens __pyx_mstate_global->__pyx_kp_u_Checked_tokens
-#define __pyx_kp_u_Detected_Text_Language __pyx_mstate_global->__pyx_kp_u_Detected_Text_Language
-#define __pyx_kp_u_Detected_object __pyx_mstate_global->__pyx_kp_u_Detected_object
-#define __pyx_kp_u_Error_to_concatenate_text __pyx_mstate_global->__pyx_kp_u_Error_to_concatenate_text
-#define __pyx_kp_u_Error_to_detect_language_for_sen __pyx_mstate_global->__pyx_kp_u_Error_to_detect_language_for_sen
-#define __pyx_kp_u_Error_to_translate __pyx_mstate_global->__pyx_kp_u_Error_to_translate
-#define __pyx_kp_u_It_doesn_t_have_readable_sentenc __pyx_mstate_global->__pyx_kp_u_It_doesn_t_have_readable_sentenc
-#define __pyx_kp_u_Lang_detected __pyx_mstate_global->__pyx_kp_u_Lang_detected
-#define __pyx_kp_u_Language_not_detected __pyx_mstate_global->__pyx_kp_u_Language_not_detected
-#define __pyx_kp_u_None __pyx_mstate_global->__pyx_kp_u_None
-#define __pyx_n_s_PreProcessing __pyx_mstate_global->__pyx_n_s_PreProcessing
-#define __pyx_kp_u_Translate __pyx_mstate_global->__pyx_kp_u_Translate
-#define __pyx_kp_u_Translated_text __pyx_mstate_global->__pyx_kp_u_Translated_text
-#define __pyx_n_s_Translator __pyx_mstate_global->__pyx_n_s_Translator
-#define __pyx_kp_u_Will_be_translated_to __pyx_mstate_global->__pyx_kp_u_Will_be_translated_to
-#define __pyx_n_s_WordFixer __pyx_mstate_global->__pyx_n_s_WordFixer
-#define __pyx_n_s__10 __pyx_mstate_global->__pyx_n_s__10
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
+#define __pyx_n_u_NFD __pyx_mstate_global->__pyx_n_u_NFD
+#define __pyx_kp_u_Not_Specified_the_language_for_t __pyx_mstate_global->__pyx_kp_u_Not_Specified_the_language_for_t
+#define __pyx_n_s_RSLPStemmer __pyx_mstate_global->__pyx_n_s_RSLPStemmer
+#define __pyx_n_s_SnowballStemmer __pyx_mstate_global->__pyx_n_s_SnowballStemmer
+#define __pyx_kp_u_W __pyx_mstate_global->__pyx_kp_u_W
+#define __pyx_n_s_WordNetLemmatizer __pyx_mstate_global->__pyx_n_s_WordNetLemmatizer
 #define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
+#define __pyx_n_s__21 __pyx_mstate_global->__pyx_n_s__21
 #define __pyx_kp_u__3 __pyx_mstate_global->__pyx_kp_u__3
-#define __pyx_kp_u__5 __pyx_mstate_global->__pyx_kp_u__5
-#define __pyx_n_s__6 __pyx_mstate_global->__pyx_n_s__6
-#define __pyx_n_s_allSplitedText __pyx_mstate_global->__pyx_n_s_allSplitedText
-#define __pyx_n_s_append __pyx_mstate_global->__pyx_n_s_append
-#define __pyx_n_s_arr __pyx_mstate_global->__pyx_n_s_arr
+#define __pyx_n_s__4 __pyx_mstate_global->__pyx_n_s__4
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_kp_u_checking __pyx_mstate_global->__pyx_kp_u_checking
+#define __pyx_n_s_c __pyx_mstate_global->__pyx_n_s_c
+#define __pyx_n_s_class_getitem __pyx_mstate_global->__pyx_n_s_class_getitem
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_debug __pyx_mstate_global->__pyx_n_s_debug
-#define __pyx_n_s_dest __pyx_mstate_global->__pyx_n_s_dest
-#define __pyx_n_s_det __pyx_mstate_global->__pyx_n_s_det
-#define __pyx_n_s_detect __pyx_mstate_global->__pyx_n_s_detect
-#define __pyx_n_s_detect_lang __pyx_mstate_global->__pyx_n_s_detect_lang
-#define __pyx_n_s_detect_lang_locals_lambda __pyx_mstate_global->__pyx_n_s_detect_lang_locals_lambda
-#define __pyx_n_s_detected __pyx_mstate_global->__pyx_n_s_detected
-#define __pyx_n_s_detecteds_sentences __pyx_mstate_global->__pyx_n_s_detecteds_sentences
-#define __pyx_n_s_error __pyx_mstate_global->__pyx_n_s_error
-#define __pyx_kp_u_error_2 __pyx_mstate_global->__pyx_kp_u_error_2
-#define __pyx_n_s_fix_word __pyx_mstate_global->__pyx_n_s_fix_word
-#define __pyx_n_s_format_exc __pyx_mstate_global->__pyx_n_s_format_exc
-#define __pyx_kp_u_from_sentences __pyx_mstate_global->__pyx_kp_u_from_sentences
-#define __pyx_n_s_googletrans __pyx_mstate_global->__pyx_n_s_googletrans
+#define __pyx_n_s_combining __pyx_mstate_global->__pyx_n_s_combining
+#define __pyx_n_u_en __pyx_mstate_global->__pyx_n_u_en
+#define __pyx_n_u_english __pyx_mstate_global->__pyx_n_u_english
+#define __pyx_n_u_es __pyx_mstate_global->__pyx_n_u_es
+#define __pyx_n_s_extract_sentences __pyx_mstate_global->__pyx_n_s_extract_sentences
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
-#define __pyx_n_s_info __pyx_mstate_global->__pyx_n_s_info
 #define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
-#define __pyx_n_s_items __pyx_mstate_global->__pyx_n_s_items
-#define __pyx_n_s_key __pyx_mstate_global->__pyx_n_s_key
-#define __pyx_n_s_lang __pyx_mstate_global->__pyx_n_s_lang
-#define __pyx_n_s_logging __pyx_mstate_global->__pyx_n_s_logging
+#define __pyx_kp_u_it_doesn_t_have_tokens_for_text __pyx_mstate_global->__pyx_kp_u_it_doesn_t_have_tokens_for_text
+#define __pyx_n_s_language __pyx_mstate_global->__pyx_n_s_language
+#define __pyx_n_s_lemantization __pyx_mstate_global->__pyx_n_s_lemantization
+#define __pyx_n_s_lower __pyx_mstate_global->__pyx_n_s_lower
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
-#define __pyx_n_s_maxCheckedTokens __pyx_mstate_global->__pyx_n_s_maxCheckedTokens
+#define __pyx_kp_u_n __pyx_mstate_global->__pyx_kp_u_n
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_norm_text __pyx_mstate_global->__pyx_n_s_norm_text
+#define __pyx_n_s_nltk_corpus __pyx_mstate_global->__pyx_n_s_nltk_corpus
+#define __pyx_n_s_nltk_languages __pyx_mstate_global->__pyx_n_s_nltk_languages
+#define __pyx_n_s_nltk_stem __pyx_mstate_global->__pyx_n_s_nltk_stem
+#define __pyx_n_s_nltk_tokenize __pyx_mstate_global->__pyx_n_s_nltk_tokenize
+#define __pyx_n_s_normalize __pyx_mstate_global->__pyx_n_s_normalize
 #define __pyx_n_s_normalize_text __pyx_mstate_global->__pyx_n_s_normalize_text
-#define __pyx_n_s_retry __pyx_mstate_global->__pyx_n_s_retry
-#define __pyx_kp_u_retrying_Left __pyx_mstate_global->__pyx_kp_u_retrying_Left
-#define __pyx_n_s_reverse __pyx_mstate_global->__pyx_n_s_reverse
-#define __pyx_n_s_sentences __pyx_mstate_global->__pyx_n_s_sentences
-#define __pyx_n_s_service_urls __pyx_mstate_global->__pyx_n_s_service_urls
-#define __pyx_n_s_sleep __pyx_mstate_global->__pyx_n_s_sleep
-#define __pyx_n_s_slited __pyx_mstate_global->__pyx_n_s_slited
-#define __pyx_n_s_sorted __pyx_mstate_global->__pyx_n_s_sorted
+#define __pyx_n_s_normalized_text __pyx_mstate_global->__pyx_n_s_normalized_text
+#define __pyx_n_u_portuguese __pyx_mstate_global->__pyx_n_u_portuguese
+#define __pyx_n_s_preprocess_text_for_lemantizatio __pyx_mstate_global->__pyx_n_s_preprocess_text_for_lemantizatio
+#define __pyx_n_s_preprocess_text_for_stemmetizati __pyx_mstate_global->__pyx_n_s_preprocess_text_for_stemmetizati
+#define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
+#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
+#define __pyx_n_s_re __pyx_mstate_global->__pyx_n_s_re
+#define __pyx_n_s_remove_accents __pyx_mstate_global->__pyx_n_s_remove_accents
+#define __pyx_n_s_remove_all_accents __pyx_mstate_global->__pyx_n_s_remove_all_accents
+#define __pyx_n_s_remove_alphanumeric_character __pyx_mstate_global->__pyx_n_s_remove_alphanumeric_character
+#define __pyx_kp_u_s __pyx_mstate_global->__pyx_kp_u_s
+#define __pyx_n_s_sent_tokenize __pyx_mstate_global->__pyx_n_s_sent_tokenize
+#define __pyx_n_u_spanish __pyx_mstate_global->__pyx_n_u_spanish
 #define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
 #define __pyx_n_s_split __pyx_mstate_global->__pyx_n_s_split
-#define __pyx_n_s_splitedText __pyx_mstate_global->__pyx_n_s_splitedText
-#define __pyx_kp_s_src_wrapper_infra_LanguageDetect __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_LanguageDetect
-#define __pyx_n_s_strip __pyx_mstate_global->__pyx_n_s_strip
-#define __pyx_n_s_t __pyx_mstate_global->__pyx_n_s_t
+#define __pyx_kp_s_src_wrapper_infra_PreProcessing __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_PreProcessing
+#define __pyx_n_s_stem __pyx_mstate_global->__pyx_n_s_stem
+#define __pyx_n_s_stemmer __pyx_mstate_global->__pyx_n_s_stemmer
+#define __pyx_n_s_stopwords __pyx_mstate_global->__pyx_n_s_stopwords
+#define __pyx_n_s_sub __pyx_mstate_global->__pyx_n_s_sub
+#define __pyx_n_s_supportedLanguage __pyx_mstate_global->__pyx_n_s_supportedLanguage
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
 #define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
-#define __pyx_n_s_time __pyx_mstate_global->__pyx_n_s_time
-#define __pyx_kp_u_to __pyx_mstate_global->__pyx_kp_u_to
-#define __pyx_n_s_tokens __pyx_mstate_global->__pyx_n_s_tokens
-#define __pyx_n_s_total_tokens __pyx_mstate_global->__pyx_n_s_total_tokens
-#define __pyx_n_s_traceback __pyx_mstate_global->__pyx_n_s_traceback
-#define __pyx_n_s_translate __pyx_mstate_global->__pyx_n_s_translate
-#define __pyx_kp_u_translate_google_co_kr __pyx_mstate_global->__pyx_kp_u_translate_google_co_kr
-#define __pyx_kp_u_translate_google_com __pyx_mstate_global->__pyx_kp_u_translate_google_com
-#define __pyx_n_s_translate_to __pyx_mstate_global->__pyx_n_s_translate_to
-#define __pyx_n_s_translated_sentences __pyx_mstate_global->__pyx_n_s_translated_sentences
-#define __pyx_n_s_translated_text __pyx_mstate_global->__pyx_n_s_translated_text
-#define __pyx_n_s_translator __pyx_mstate_global->__pyx_n_s_translator
-#define __pyx_n_s_wrapper_infra_LanguageDetector __pyx_mstate_global->__pyx_n_s_wrapper_infra_LanguageDetector
-#define __pyx_n_s_x __pyx_mstate_global->__pyx_n_s_x
-#define __pyx_float_0_5 __pyx_mstate_global->__pyx_float_0_5
-#define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
-#define __pyx_int_1 __pyx_mstate_global->__pyx_int_1
-#define __pyx_int_4 __pyx_mstate_global->__pyx_int_4
-#define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
+#define __pyx_n_s_unicodedata __pyx_mstate_global->__pyx_n_s_unicodedata
+#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
+#define __pyx_kp_u_w_s __pyx_mstate_global->__pyx_kp_u_w_s
+#define __pyx_n_s_word __pyx_mstate_global->__pyx_n_s_word
+#define __pyx_n_s_word_tokenize __pyx_mstate_global->__pyx_n_s_word_tokenize
+#define __pyx_n_s_words __pyx_mstate_global->__pyx_n_s_words
+#define __pyx_n_s_wrapper_infra_PreProcessing __pyx_mstate_global->__pyx_n_s_wrapper_infra_PreProcessing
+#define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
 #define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
 #define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
+#define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
+#define __pyx_tuple__13 __pyx_mstate_global->__pyx_tuple__13
+#define __pyx_tuple__15 __pyx_mstate_global->__pyx_tuple__15
+#define __pyx_tuple__16 __pyx_mstate_global->__pyx_tuple__16
+#define __pyx_tuple__18 __pyx_mstate_global->__pyx_tuple__18
+#define __pyx_tuple__20 __pyx_mstate_global->__pyx_tuple__20
+#define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
 #define __pyx_codeobj__8 __pyx_mstate_global->__pyx_codeobj__8
+#define __pyx_codeobj__10 __pyx_mstate_global->__pyx_codeobj__10
+#define __pyx_codeobj__12 __pyx_mstate_global->__pyx_codeobj__12
+#define __pyx_codeobj__14 __pyx_mstate_global->__pyx_codeobj__14
+#define __pyx_codeobj__17 __pyx_mstate_global->__pyx_codeobj__17
+#define __pyx_codeobj__19 __pyx_mstate_global->__pyx_codeobj__19
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/LanguageDetector.pyx":8
- * import logging
+/* "wrapper/infra/PreProcessing.pyx":14
+ * }
  * 
- * def detect_lang(text, translate_to=None):             # <<<<<<<<<<<<<<
- *     translator = Translator(service_urls=[
- *       'translate.google.com',
+ * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_16LanguageDetector_detect_lang, "detect_lang(text, translate_to=None)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_16LanguageDetector_1detect_lang = {"detect_lang", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_16LanguageDetector_detect_lang};
-static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character, "remove_alphanumeric_character(word)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character = {"remove_alphanumeric_character", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_text = 0;
-  PyObject *__pyx_v_translate_to = 0;
+  PyObject *__pyx_v_word = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("detect_lang (wrapper)", 0);
+  __Pyx_RefNannySetupContext("remove_alphanumeric_character (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_translate_to,0};
-    PyObject* values[2] = {0,0};
-    values[1] = ((PyObject *)((PyObject *)Py_None));
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_word,0};
+    PyObject* values[1] = {0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 8, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_word)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 14, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
-          if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 8, __pyx_L3_error)
-        }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "detect_lang") < 0)) __PYX_ERR(0, 8, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "remove_alphanumeric_character") < 0)) __PYX_ERR(0, 14, __pyx_L3_error)
       }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
     } else {
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        break;
-        default: goto __pyx_L5_argtuple_error;
-      }
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_text = values[0];
-    __pyx_v_translate_to = values[1];
+    __pyx_v_word = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("detect_lang", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 8, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("remove_alphanumeric_character", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 14, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_alphanumeric_character", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(__pyx_self, __pyx_v_text, __pyx_v_translate_to);
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(__pyx_self, __pyx_v_word);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/infra/LanguageDetector.pyx":65
- *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("remove_alphanumeric_character", 0);
+
+  /* "wrapper/infra/PreProcessing.pyx":15
  * 
- *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]             # <<<<<<<<<<<<<<
+ * def remove_alphanumeric_character(word):
+ *     print(word)             # <<<<<<<<<<<<<<
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):
+ */
+  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_word); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":16
+ * def remove_alphanumeric_character(word):
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)             # <<<<<<<<<<<<<<
+ * def lemantization(word, stemmer):
+ *     print(word)
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_W, __pyx_kp_u_, __pyx_v_word};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
+
+  /* "wrapper/infra/PreProcessing.pyx":14
+ * }
  * 
- *     if len(detected[1]) / len(splitedText) <= 0.5:
+ * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_alphanumeric_character", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/PreProcessing.pyx":17
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return stemmer.stem(word)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_11detect_lang_lambda(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-static PyMethodDef __pyx_mdef_7wrapper_5infra_16LanguageDetector_11detect_lang_lambda = {"lambda", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_16LanguageDetector_11detect_lang_lambda, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
-static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_11detect_lang_lambda(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_2lemantization, "lemantization(word, stemmer)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_3lemantization = {"lemantization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_2lemantization};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_x = 0;
+  PyObject *__pyx_v_word = 0;
+  PyObject *__pyx_v_stemmer = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("lambda (wrapper)", 0);
+  __Pyx_RefNannySetupContext("lemantization (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_x,0};
-    PyObject* values[1] = {0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_word,&__pyx_n_s_stemmer,0};
+    PyObject* values[2] = {0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_x)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 65, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_word)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 17, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_stemmer)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 17, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("lemantization", 1, 2, 2, 1); __PYX_ERR(0, 17, __pyx_L3_error)
+        }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "lambda") < 0)) __PYX_ERR(0, 65, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "lemantization") < 0)) __PYX_ERR(0, 17, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 1)) {
+    } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_x = values[0];
+    __pyx_v_word = values[0];
+    __pyx_v_stemmer = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("lambda", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 65, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("lemantization", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 17, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_lambda_funcdef_lambda(__pyx_self, __pyx_v_x);
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(__pyx_self, __pyx_v_word, __pyx_v_stemmer);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x) {
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_stemmer) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  Py_ssize_t __pyx_t_2;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("lambda", 0);
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_x, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_RefNannySetupContext("lemantization", 0);
+
+  /* "wrapper/infra/PreProcessing.pyx":18
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):
+ *     print(word)             # <<<<<<<<<<<<<<
+ *     return stemmer.stem(word)
+ * 
+ */
+  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_word); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 65, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
+
+  /* "wrapper/infra/PreProcessing.pyx":19
+ * def lemantization(word, stemmer):
+ *     print(word)
+ *     return stemmer.stem(word)             # <<<<<<<<<<<<<<
+ * 
+ * # Tokenizao, remoo de stop words e lematizao
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_stemmer, __pyx_n_s_stem); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_word};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
   __pyx_r = __pyx_t_1;
   __pyx_t_1 = 0;
   goto __pyx_L0;
 
+  /* "wrapper/infra/PreProcessing.pyx":17
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return stemmer.stem(word)
+ */
+
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/infra/LanguageDetector.pyx":8
- * import logging
- * 
- * def detect_lang(text, translate_to=None):             # <<<<<<<<<<<<<<
- *     translator = Translator(service_urls=[
- *       'translate.google.com',
- */
-
-static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to) {
-  PyObject *__pyx_v_translator = NULL;
-  PyObject *__pyx_v_norm_text = NULL;
-  PyObject *__pyx_v_sentences = NULL;
-  PyObject *__pyx_v_splitedText = NULL;
-  CYTHON_UNUSED long __pyx_v_total_tokens;
-  PyObject *__pyx_v_x = NULL;
-  PyObject *__pyx_v_arr = NULL;
-  PyObject *__pyx_v_detecteds_sentences = NULL;
-  PyObject *__pyx_v_allSplitedText = NULL;
-  PyObject *__pyx_v_tokens = NULL;
-  long __pyx_v_maxCheckedTokens;
-  PyObject *__pyx_v_slited = NULL;
-  PyObject *__pyx_v_retry = NULL;
-  PyObject *__pyx_v_det = NULL;
-  PyObject *__pyx_v_lang = NULL;
-  PyObject *__pyx_v_detected = NULL;
-  PyObject *__pyx_v_translated_sentences = NULL;
-  PyObject *__pyx_v_t = NULL;
-  PyObject *__pyx_v_translated_text = NULL;
-  PyObject *__pyx_7genexpr__pyx_v_x = NULL;
+/* "wrapper/infra/PreProcessing.pyx":23
+ * # Tokenizao, remoo de stop words e lematizao
+ * # for lsi, td-idf or multiwords?
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization, "preprocess_text_for_lemantization(text, language: DocLanguage)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization = {"preprocess_text_for_lemantization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_language = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("preprocess_text_for_lemantization (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_language,0};
+    PyObject* values[2] = {0,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 23, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 23, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("preprocess_text_for_lemantization", 1, 2, 2, 1); __PYX_ERR(0, 23, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "preprocess_text_for_lemantization") < 0)) __PYX_ERR(0, 23, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_text = values[0];
+    __pyx_v_language = values[1];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("preprocess_text_for_lemantization", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 23, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(__pyx_self, __pyx_v_text, __pyx_v_language);
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language) {
+  PyObject *__pyx_v_words = NULL;
+  PyObject *__pyx_v_stemmer = NULL;
+  PyObject *__pyx_7genexpr__pyx_v_word = NULL;
+  PyObject *__pyx_8genexpr1__pyx_v_word = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
-  Py_ssize_t __pyx_t_6;
-  PyObject *(*__pyx_t_7)(PyObject *);
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
+  PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
+  Py_ssize_t __pyx_t_8;
+  PyObject *(*__pyx_t_9)(PyObject *);
   int __pyx_t_10;
-  PyObject *__pyx_t_11 = NULL;
-  PyObject *__pyx_t_12 = NULL;
-  PyObject *__pyx_t_13 = NULL;
-  PyObject *__pyx_t_14 = NULL;
-  PyObject *__pyx_t_15 = NULL;
-  PyObject *__pyx_t_16 = NULL;
-  Py_ssize_t __pyx_t_17;
-  Py_UCS4 __pyx_t_18;
-  PyObject *__pyx_t_19 = NULL;
-  PyObject *__pyx_t_20 = NULL;
-  PyObject *__pyx_t_21 = NULL;
-  PyObject *__pyx_t_22 = NULL;
-  int __pyx_t_23;
-  int __pyx_t_24;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("detect_lang", 0);
+  __Pyx_RefNannySetupContext("preprocess_text_for_lemantization", 0);
+  __Pyx_INCREF(__pyx_v_text);
 
-  /* "wrapper/infra/LanguageDetector.pyx":9
- * 
- * def detect_lang(text, translate_to=None):
- *     translator = Translator(service_urls=[             # <<<<<<<<<<<<<<
- *       'translate.google.com',
- *       'translate.google.co.kr',
+  /* "wrapper/infra/PreProcessing.pyx":24
+ * # for lsi, td-idf or multiwords?
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):
+ *     text = text.lower()             # <<<<<<<<<<<<<<
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     words = word_tokenize(text, language=nltk_languages[language.value])
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Translator); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_lower); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":25
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)             # <<<<<<<<<<<<<<
+ *     words = word_tokenize(text, language=nltk_languages[language.value])
+ *     stemmer = RSLPStemmer()
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = PyList_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 25, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_kp_u_translate_google_com);
-  __Pyx_GIVEREF(__pyx_kp_u_translate_google_com);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_translate_google_com);
-  __Pyx_INCREF(__pyx_kp_u_translate_google_co_kr);
-  __Pyx_GIVEREF(__pyx_kp_u_translate_google_co_kr);
-  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_kp_u_translate_google_co_kr);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_service_urls, __pyx_t_3) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_w_s, __pyx_kp_u_, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 25, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":26
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     words = word_tokenize(text, language=nltk_languages[language.value])             # <<<<<<<<<<<<<<
+ *     stemmer = RSLPStemmer()
+ *     words = [lemantization(word, stemmer) for word in words]
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_v_text);
+  __Pyx_GIVEREF(__pyx_v_text);
+  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_text);
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __pyx_t_7 = __Pyx_PyObject_GetItem(__pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_t_7) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_v_translator = __pyx_t_3;
-  __pyx_t_3 = 0;
+  __pyx_v_words = __pyx_t_7;
+  __pyx_t_7 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":14
- *     ])
- *     # norm_text = normalize_text(text)
- *     norm_text = normalize_text(text, False)             # <<<<<<<<<<<<<<
- *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
- *     splitedText = []
+  /* "wrapper/infra/PreProcessing.pyx":27
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     words = word_tokenize(text, language=nltk_languages[language.value])
+ *     stemmer = RSLPStemmer()             # <<<<<<<<<<<<<<
+ *     words = [lemantization(word, stemmer) for word in words]
+ *     words = [word for word in words if word not in stopwords.words('portuguese')]
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_RSLPStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 27, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_1 = NULL;
+  __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_1)) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_1);
+      __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[3] = {__pyx_t_1, __pyx_v_text, Py_False};
-    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
+    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+    __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
-  __pyx_v_norm_text = __pyx_t_3;
-  __pyx_t_3 = 0;
+  __pyx_v_stemmer = __pyx_t_7;
+  __pyx_t_7 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":15
- *     # norm_text = normalize_text(text)
- *     norm_text = normalize_text(text, False)
- *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]             # <<<<<<<<<<<<<<
- *     splitedText = []
- *     total_tokens=0
+  /* "wrapper/infra/PreProcessing.pyx":28
+ *     words = word_tokenize(text, language=nltk_languages[language.value])
+ *     stemmer = RSLPStemmer()
+ *     words = [lemantization(word, stemmer) for word in words]             # <<<<<<<<<<<<<<
+ *     words = [word for word in words if word not in stopwords.words('portuguese')]
+ *     return words
  */
   { /* enter inner scope */
-    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L5_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_norm_text, __pyx_n_s_split); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L5_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
-      if (likely(__pyx_t_5)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-        __Pyx_INCREF(__pyx_t_5);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_1, function);
-        __pyx_t_4 = 1;
+    __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 28, __pyx_L5_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
+      __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_8 = 0;
+      __pyx_t_9 = NULL;
+    } else {
+      __pyx_t_8 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 28, __pyx_L5_error)
+    }
+    for (;;) {
+      if (likely(!__pyx_t_9)) {
+        if (likely(PyList_CheckExact(__pyx_t_2))) {
+          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 28, __pyx_L5_error)
+          #else
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L5_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          #endif
+        } else {
+          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 28, __pyx_L5_error)
+          #else
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L5_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          #endif
+        }
+      } else {
+        __pyx_t_3 = __pyx_t_9(__pyx_t_2);
+        if (unlikely(!__pyx_t_3)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 28, __pyx_L5_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_3);
+      }
+      __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_word, __pyx_t_3);
+      __pyx_t_3 = 0;
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_lemantization); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_6 = NULL;
+      __pyx_t_4 = 0;
+      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
+        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_1);
+        if (likely(__pyx_t_6)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+          __Pyx_INCREF(__pyx_t_6);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_1, function);
+          __pyx_t_4 = 1;
+        }
+      }
+      {
+        PyObject *__pyx_callargs[3] = {__pyx_t_6, __pyx_7genexpr__pyx_v_word, __pyx_v_stemmer};
+        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
+        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L5_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
+      if (unlikely(__Pyx_ListComp_Append(__pyx_t_7, (PyObject*)__pyx_t_3))) __PYX_ERR(0, 28, __pyx_L5_error)
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    {
-      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_};
-      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L5_error)
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word); __pyx_7genexpr__pyx_v_word = 0;
+    goto __pyx_L9_exit_scope;
+    __pyx_L5_error:;
+    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word); __pyx_7genexpr__pyx_v_word = 0;
+    goto __pyx_L1_error;
+    __pyx_L9_exit_scope:;
+  } /* exit inner scope */
+  __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_7);
+  __pyx_t_7 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":29
+ *     stemmer = RSLPStemmer()
+ *     words = [lemantization(word, stemmer) for word in words]
+ *     words = [word for word in words if word not in stopwords.words('portuguese')]             # <<<<<<<<<<<<<<
+ *     return words
+ * 
+ */
+  { /* enter inner scope */
+    __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 29, __pyx_L12_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
+      __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_8 = 0;
+      __pyx_t_9 = NULL;
+    } else {
+      __pyx_t_8 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 29, __pyx_L12_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 29, __pyx_L12_error)
     }
-    if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
-      __pyx_t_1 = __pyx_t_2; __Pyx_INCREF(__pyx_t_1); __pyx_t_6 = 0;
-      __pyx_t_7 = NULL;
-    } else {
-      __pyx_t_6 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L5_error)
+    for (;;) {
+      if (likely(!__pyx_t_9)) {
+        if (likely(PyList_CheckExact(__pyx_t_2))) {
+          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 29, __pyx_L12_error)
+          #else
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 29, __pyx_L12_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          #endif
+        } else {
+          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 29, __pyx_L12_error)
+          #else
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 29, __pyx_L12_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          #endif
+        }
+      } else {
+        __pyx_t_3 = __pyx_t_9(__pyx_t_2);
+        if (unlikely(!__pyx_t_3)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 29, __pyx_L12_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_3);
+      }
+      __Pyx_XDECREF_SET(__pyx_8genexpr1__pyx_v_word, __pyx_t_3);
+      __pyx_t_3 = 0;
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 29, __pyx_L12_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 15, __pyx_L5_error)
+      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_words); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 29, __pyx_L12_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __pyx_t_1 = NULL;
+      __pyx_t_4 = 0;
+      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
+        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_6);
+        if (likely(__pyx_t_1)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+          __Pyx_INCREF(__pyx_t_1);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_6, function);
+          __pyx_t_4 = 1;
+        }
+      }
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_n_u_portuguese};
+        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 29, __pyx_L12_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      }
+      __pyx_t_10 = (__Pyx_PySequence_ContainsTF(__pyx_8genexpr1__pyx_v_word, __pyx_t_3, Py_NE)); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 29, __pyx_L12_error)
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (__pyx_t_10) {
+        if (unlikely(__Pyx_ListComp_Append(__pyx_t_7, (PyObject*)__pyx_8genexpr1__pyx_v_word))) __PYX_ERR(0, 29, __pyx_L12_error)
+      }
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word); __pyx_8genexpr1__pyx_v_word = 0;
+    goto __pyx_L17_exit_scope;
+    __pyx_L12_error:;
+    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word); __pyx_8genexpr1__pyx_v_word = 0;
+    goto __pyx_L1_error;
+    __pyx_L17_exit_scope:;
+  } /* exit inner scope */
+  __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_7);
+  __pyx_t_7 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":30
+ *     words = [lemantization(word, stemmer) for word in words]
+ *     words = [word for word in words if word not in stopwords.words('portuguese')]
+ *     return words             # <<<<<<<<<<<<<<
+ * 
+ * def remove_accents(text):
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_words);
+  __pyx_r = __pyx_v_words;
+  goto __pyx_L0;
+
+  /* "wrapper/infra/PreProcessing.pyx":23
+ * # Tokenizao, remoo de stop words e lematizao
+ * # for lsi, td-idf or multiwords?
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_words);
+  __Pyx_XDECREF(__pyx_v_stemmer);
+  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word);
+  __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word);
+  __Pyx_XDECREF(__pyx_v_text);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/PreProcessing.pyx":32
+ *     return words
+ * 
+ * def remove_accents(text):             # <<<<<<<<<<<<<<
+ *     normalized_text = unicodedata.normalize('NFD', text)
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_6remove_accents, "remove_accents(text)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_7remove_accents = {"remove_accents", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_6remove_accents};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("remove_accents (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,0};
+    PyObject* values[1] = {0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 32, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "remove_accents") < 0)) __PYX_ERR(0, 32, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+    }
+    __pyx_v_text = values[0];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("remove_accents", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 32, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_accents", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(__pyx_self, __pyx_v_text);
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text) {
+  PyObject *__pyx_v_normalized_text = NULL;
+  PyObject *__pyx_8genexpr2__pyx_v_c = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  Py_ssize_t __pyx_t_5;
+  PyObject *(*__pyx_t_6)(PyObject *);
+  PyObject *__pyx_t_7 = NULL;
+  PyObject *__pyx_t_8 = NULL;
+  int __pyx_t_9;
+  int __pyx_t_10;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("remove_accents", 0);
+
+  /* "wrapper/infra/PreProcessing.pyx":33
+ * 
+ * def remove_accents(text):
+ *     normalized_text = unicodedata.normalize('NFD', text)             # <<<<<<<<<<<<<<
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ * 
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_unicodedata); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_normalize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[3] = {__pyx_t_2, __pyx_n_u_NFD, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __pyx_v_normalized_text = __pyx_t_1;
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":34
+ * def remove_accents(text):
+ *     normalized_text = unicodedata.normalize('NFD', text)
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])             # <<<<<<<<<<<<<<
+ * 
+ * def normalize_text(text, remove_all_accents=True):
+ */
+  __Pyx_XDECREF(__pyx_r);
+  { /* enter inner scope */
+    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 34, __pyx_L5_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    if (likely(PyList_CheckExact(__pyx_v_normalized_text)) || PyTuple_CheckExact(__pyx_v_normalized_text)) {
+      __pyx_t_3 = __pyx_v_normalized_text; __Pyx_INCREF(__pyx_t_3); __pyx_t_5 = 0;
+      __pyx_t_6 = NULL;
+    } else {
+      __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_normalized_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 34, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 34, __pyx_L5_error)
+    }
     for (;;) {
-      if (likely(!__pyx_t_7)) {
-        if (likely(PyList_CheckExact(__pyx_t_1))) {
-          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_1)) break;
+      if (likely(!__pyx_t_6)) {
+        if (likely(PyList_CheckExact(__pyx_t_3))) {
+          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_3)) break;
           #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_6); __Pyx_INCREF(__pyx_t_2); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L5_error)
+          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L5_error)
           #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L5_error)
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L5_error)
           __Pyx_GOTREF(__pyx_t_2);
           #endif
         } else {
-          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
+          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
           #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_6); __Pyx_INCREF(__pyx_t_2); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L5_error)
+          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L5_error)
           #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L5_error)
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L5_error)
           __Pyx_GOTREF(__pyx_t_2);
           #endif
         }
       } else {
-        __pyx_t_2 = __pyx_t_7(__pyx_t_1);
+        __pyx_t_2 = __pyx_t_6(__pyx_t_3);
         if (unlikely(!__pyx_t_2)) {
           PyObject* exc_type = PyErr_Occurred();
           if (exc_type) {
             if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 15, __pyx_L5_error)
+            else __PYX_ERR(0, 34, __pyx_L5_error)
           }
           break;
         }
         __Pyx_GOTREF(__pyx_t_2);
       }
-      __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_x, __pyx_t_2);
+      __Pyx_XDECREF_SET(__pyx_8genexpr2__pyx_v_c, __pyx_t_2);
       __pyx_t_2 = 0;
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 15, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_8 = NULL;
+      __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_unicodedata); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 34, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_7);
+      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_combining); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 34, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_8);
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      __pyx_t_7 = NULL;
       __pyx_t_4 = 0;
-      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
-        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
-        if (likely(__pyx_t_8)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-          __Pyx_INCREF(__pyx_t_8);
+      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
+        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
+        if (likely(__pyx_t_7)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+          __Pyx_INCREF(__pyx_t_7);
           __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_5, function);
+          __Pyx_DECREF_SET(__pyx_t_8, function);
           __pyx_t_4 = 1;
         }
       }
       {
-        PyObject *__pyx_callargs[1] = {__pyx_t_8, };
-        __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L5_error)
+        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_8genexpr2__pyx_v_c};
+        __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L5_error)
         __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
       }
-      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 15, __pyx_L5_error)
+      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 34, __pyx_L5_error)
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (__pyx_t_9) {
-        __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 15, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_5);
-        __pyx_t_8 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
-          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
-          if (likely(__pyx_t_8)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-            __Pyx_INCREF(__pyx_t_8);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_5, function);
-            __pyx_t_4 = 1;
-          }
-        }
-        {
-          PyObject *__pyx_callargs[1] = {__pyx_t_8, };
-          __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-          if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        }
-        if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 15, __pyx_L5_error)
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __pyx_t_10 = (!__pyx_t_9);
+      if (__pyx_t_10) {
+        if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_8genexpr2__pyx_v_c))) __PYX_ERR(0, 34, __pyx_L5_error)
       }
     }
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x); __pyx_7genexpr__pyx_v_x = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c); __pyx_8genexpr2__pyx_v_c = 0;
     goto __pyx_L10_exit_scope;
     __pyx_L5_error:;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x); __pyx_7genexpr__pyx_v_x = 0;
+    __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c); __pyx_8genexpr2__pyx_v_c = 0;
     goto __pyx_L1_error;
     __pyx_L10_exit_scope:;
   } /* exit inner scope */
-  __pyx_v_sentences = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = PyUnicode_Join(__pyx_kp_u_, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 34, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_3;
   __pyx_t_3 = 0;
+  goto __pyx_L0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":16
- *     norm_text = normalize_text(text, False)
- *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
- *     splitedText = []             # <<<<<<<<<<<<<<
- *     total_tokens=0
- *     for x in sentences:
+  /* "wrapper/infra/PreProcessing.pyx":32
+ *     return words
+ * 
+ * def remove_accents(text):             # <<<<<<<<<<<<<<
+ *     normalized_text = unicodedata.normalize('NFD', text)
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
  */
-  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_v_splitedText = ((PyObject*)__pyx_t_3);
-  __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":17
- *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
- *     splitedText = []
- *     total_tokens=0             # <<<<<<<<<<<<<<
- *     for x in sentences:
- *         arr = x.split('.')
- */
-  __pyx_v_total_tokens = 0;
-
-  /* "wrapper/infra/LanguageDetector.pyx":18
- *     splitedText = []
- *     total_tokens=0
- *     for x in sentences:             # <<<<<<<<<<<<<<
- *         arr = x.split('.')
- *         splitedText.extend(arr)
- */
-  __pyx_t_3 = __pyx_v_sentences; __Pyx_INCREF(__pyx_t_3); __pyx_t_6 = 0;
-  for (;;) {
-    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_3)) break;
-    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 18, __pyx_L1_error)
-    #else
-    __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_XDECREF(__pyx_t_8);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_accents", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_normalized_text);
+  __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/PreProcessing.pyx":36
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ * 
+ * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     if remove_all_accents:
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_8normalize_text, "normalize_text(text, remove_all_accents=True)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_9normalize_text = {"normalize_text", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_8normalize_text};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_remove_all_accents = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("normalize_text (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_remove_all_accents,0};
+    PyObject* values[2] = {0,0};
+    values[1] = ((PyObject *)((PyObject *)Py_True));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 36, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_remove_all_accents);
+          if (value) { values[1] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 36, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "normalize_text") < 0)) __PYX_ERR(0, 36, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_text = values[0];
+    __pyx_v_remove_all_accents = values[1];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("normalize_text", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 36, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.normalize_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(__pyx_self, __pyx_v_text, __pyx_v_remove_all_accents);
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_remove_all_accents) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  int __pyx_t_5;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("normalize_text", 0);
+  __Pyx_INCREF(__pyx_v_text);
+
+  /* "wrapper/infra/PreProcessing.pyx":37
+ * 
+ * def normalize_text(text, remove_all_accents=True):
+ *     text = text.lower()             # <<<<<<<<<<<<<<
+ *     if remove_all_accents:
+ *         text = remove_accents(text)
+ */
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_lower); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 37, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    #endif
-    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_1);
-    __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "wrapper/infra/LanguageDetector.pyx":19
- *     total_tokens=0
- *     for x in sentences:
- *         arr = x.split('.')             # <<<<<<<<<<<<<<
- *         splitedText.extend(arr)
- *     detecteds_sentences = {}
+  /* "wrapper/infra/PreProcessing.pyx":38
+ * def normalize_text(text, remove_all_accents=True):
+ *     text = text.lower()
+ *     if remove_all_accents:             # <<<<<<<<<<<<<<
+ *         text = remove_accents(text)
+ *     text = re.sub(r'[^\w\s]', '', text)
+ */
+  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_remove_all_accents); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 38, __pyx_L1_error)
+  if (__pyx_t_5) {
+
+    /* "wrapper/infra/PreProcessing.pyx":39
+ *     text = text.lower()
+ *     if remove_all_accents:
+ *         text = remove_accents(text)             # <<<<<<<<<<<<<<
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     text = re.sub(r'\n', ' ', text)
  */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_x, __pyx_n_s_split); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_remove_accents); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_5 = NULL;
+    __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_5)) {
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_2, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u__2};
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_text};
       __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    __Pyx_XDECREF_SET(__pyx_v_arr, __pyx_t_1);
+    __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
     __pyx_t_1 = 0;
 
-    /* "wrapper/infra/LanguageDetector.pyx":20
- *     for x in sentences:
- *         arr = x.split('.')
- *         splitedText.extend(arr)             # <<<<<<<<<<<<<<
- *     detecteds_sentences = {}
- * 
- */
-    __pyx_t_10 = __Pyx_PyList_Extend(__pyx_v_splitedText, __pyx_v_arr); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 20, __pyx_L1_error)
-
-    /* "wrapper/infra/LanguageDetector.pyx":18
- *     splitedText = []
- *     total_tokens=0
- *     for x in sentences:             # <<<<<<<<<<<<<<
- *         arr = x.split('.')
- *         splitedText.extend(arr)
+    /* "wrapper/infra/PreProcessing.pyx":38
+ * def normalize_text(text, remove_all_accents=True):
+ *     text = text.lower()
+ *     if remove_all_accents:             # <<<<<<<<<<<<<<
+ *         text = remove_accents(text)
+ *     text = re.sub(r'[^\w\s]', '', text)
  */
   }
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":21
- *         arr = x.split('.')
- *         splitedText.extend(arr)
- *     detecteds_sentences = {}             # <<<<<<<<<<<<<<
- * 
- *     allSplitedText = splitedText
- */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 21, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_v_detecteds_sentences = ((PyObject*)__pyx_t_3);
-  __pyx_t_3 = 0;
-
-  /* "wrapper/infra/LanguageDetector.pyx":23
- *     detecteds_sentences = {}
- * 
- *     allSplitedText = splitedText             # <<<<<<<<<<<<<<
- *     splitedText = []
- *     tokens = 0
+  /* "wrapper/infra/PreProcessing.pyx":40
+ *     if remove_all_accents:
+ *         text = remove_accents(text)
+ *     text = re.sub(r'[^\w\s]', '', text)             # <<<<<<<<<<<<<<
+ *     text = re.sub(r'\n', ' ', text)
+ *     text = re.sub(r'\s+', ' ', text)
  */
-  __Pyx_INCREF(__pyx_v_splitedText);
-  __pyx_v_allSplitedText = __pyx_v_splitedText;
-
-  /* "wrapper/infra/LanguageDetector.pyx":24
- * 
- *     allSplitedText = splitedText
- *     splitedText = []             # <<<<<<<<<<<<<<
- *     tokens = 0
- *     maxCheckedTokens = 4000
- */
-  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 40, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 40, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF_SET(__pyx_v_splitedText, ((PyObject*)__pyx_t_3));
-  __pyx_t_3 = 0;
-
-  /* "wrapper/infra/LanguageDetector.pyx":25
- *     allSplitedText = splitedText
- *     splitedText = []
- *     tokens = 0             # <<<<<<<<<<<<<<
- *     maxCheckedTokens = 4000
- *     for slited in allSplitedText:
- */
-  __Pyx_INCREF(__pyx_int_0);
-  __pyx_v_tokens = __pyx_int_0;
-
-  /* "wrapper/infra/LanguageDetector.pyx":26
- *     splitedText = []
- *     tokens = 0
- *     maxCheckedTokens = 4000             # <<<<<<<<<<<<<<
- *     for slited in allSplitedText:
- *         if tokens > maxCheckedTokens:
- */
-  __pyx_v_maxCheckedTokens = 0xFA0;
-
-  /* "wrapper/infra/LanguageDetector.pyx":27
- *     tokens = 0
- *     maxCheckedTokens = 4000
- *     for slited in allSplitedText:             # <<<<<<<<<<<<<<
- *         if tokens > maxCheckedTokens:
- *             break
- */
-  __pyx_t_3 = __pyx_v_allSplitedText; __Pyx_INCREF(__pyx_t_3); __pyx_t_6 = 0;
-  for (;;) {
-    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_3)) break;
-    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 27, __pyx_L1_error)
-    #else
-    __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 27, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_w_s, __pyx_kp_u_, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 40, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    #endif
-    __Pyx_XDECREF_SET(__pyx_v_slited, __pyx_t_1);
-    __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "wrapper/infra/LanguageDetector.pyx":28
- *     maxCheckedTokens = 4000
- *     for slited in allSplitedText:
- *         if tokens > maxCheckedTokens:             # <<<<<<<<<<<<<<
- *             break
- *         else:
+  /* "wrapper/infra/PreProcessing.pyx":41
+ *         text = remove_accents(text)
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     text = re.sub(r'\n', ' ', text)             # <<<<<<<<<<<<<<
+ *     text = re.sub(r'\s+', ' ', text)
+ *     return text
  */
-    __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_maxCheckedTokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_re); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_sub); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 41, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_3, __pyx_kp_u_n, __pyx_kp_u__2, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = PyObject_RichCompare(__pyx_v_tokens, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 28, __pyx_L1_error)
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (__pyx_t_9) {
-
-      /* "wrapper/infra/LanguageDetector.pyx":29
- *     for slited in allSplitedText:
- *         if tokens > maxCheckedTokens:
- *             break             # <<<<<<<<<<<<<<
- *         else:
- *             splitedText.append(slited)
- */
-      goto __pyx_L15_break;
-
-      /* "wrapper/infra/LanguageDetector.pyx":28
- *     maxCheckedTokens = 4000
- *     for slited in allSplitedText:
- *         if tokens > maxCheckedTokens:             # <<<<<<<<<<<<<<
- *             break
- *         else:
- */
-    }
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "wrapper/infra/LanguageDetector.pyx":31
- *             break
- *         else:
- *             splitedText.append(slited)             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/PreProcessing.pyx":42
+ *     text = re.sub(r'[^\w\s]', '', text)
+ *     text = re.sub(r'\n', ' ', text)
+ *     text = re.sub(r'\s+', ' ', text)             # <<<<<<<<<<<<<<
+ *     return text
  * 
- *         retry = 4
  */
-    /*else*/ {
-      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_splitedText, __pyx_v_slited); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 31, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 42, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_4 = 1;
     }
+  }
+  {
+    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_s, __pyx_kp_u__2, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
 
-    /* "wrapper/infra/LanguageDetector.pyx":33
- *             splitedText.append(slited)
- * 
- *         retry = 4             # <<<<<<<<<<<<<<
- *         det = None
- *         try:
- */
-    __Pyx_INCREF(__pyx_int_4);
-    __Pyx_XDECREF_SET(__pyx_v_retry, __pyx_int_4);
-
-    /* "wrapper/infra/LanguageDetector.pyx":34
+  /* "wrapper/infra/PreProcessing.pyx":43
+ *     text = re.sub(r'\n', ' ', text)
+ *     text = re.sub(r'\s+', ' ', text)
+ *     return text             # <<<<<<<<<<<<<<
  * 
- *         retry = 4
- *         det = None             # <<<<<<<<<<<<<<
- *         try:
- *             lang = None
+ * def extract_sentences(text, language:DocLanguage):
  */
-    __Pyx_INCREF(Py_None);
-    __Pyx_XDECREF_SET(__pyx_v_det, Py_None);
-
-    /* "wrapper/infra/LanguageDetector.pyx":35
- *         retry = 4
- *         det = None
- *         try:             # <<<<<<<<<<<<<<
- *             lang = None
- *             while (retry > 0):
- */
-    {
-      __Pyx_PyThreadState_declare
-      __Pyx_PyThreadState_assign
-      __Pyx_ExceptionSave(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
-      __Pyx_XGOTREF(__pyx_t_11);
-      __Pyx_XGOTREF(__pyx_t_12);
-      __Pyx_XGOTREF(__pyx_t_13);
-      /*try:*/ {
-
-        /* "wrapper/infra/LanguageDetector.pyx":36
- *         det = None
- *         try:
- *             lang = None             # <<<<<<<<<<<<<<
- *             while (retry > 0):
- *                 try:
- */
-        __Pyx_INCREF(Py_None);
-        __Pyx_XDECREF_SET(__pyx_v_lang, Py_None);
-
-        /* "wrapper/infra/LanguageDetector.pyx":37
- *         try:
- *             lang = None
- *             while (retry > 0):             # <<<<<<<<<<<<<<
- *                 try:
- *                     det = translator.detect(slited)
- */
-        while (1) {
-          __pyx_t_2 = PyObject_RichCompare(__pyx_v_retry, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 37, __pyx_L17_error)
-          __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 37, __pyx_L17_error)
-          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-          if (!__pyx_t_9) break;
-
-          /* "wrapper/infra/LanguageDetector.pyx":38
- *             lang = None
- *             while (retry > 0):
- *                 try:             # <<<<<<<<<<<<<<
- *                     det = translator.detect(slited)
- *                     lang = det.lang
- */
-          {
-            __Pyx_PyThreadState_declare
-            __Pyx_PyThreadState_assign
-            __Pyx_ExceptionSave(&__pyx_t_14, &__pyx_t_15, &__pyx_t_16);
-            __Pyx_XGOTREF(__pyx_t_14);
-            __Pyx_XGOTREF(__pyx_t_15);
-            __Pyx_XGOTREF(__pyx_t_16);
-            /*try:*/ {
-
-              /* "wrapper/infra/LanguageDetector.pyx":39
- *             while (retry > 0):
- *                 try:
- *                     det = translator.detect(slited)             # <<<<<<<<<<<<<<
- *                     lang = det.lang
- *                     tokens += len(slited)
- */
-              __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_translator, __pyx_n_s_detect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_1);
-              __pyx_t_5 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-                __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
-                if (likely(__pyx_t_5)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-                  __Pyx_INCREF(__pyx_t_5);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_1, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_v_slited};
-                __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-                if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L27_error)
-                __Pyx_GOTREF(__pyx_t_2);
-                __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-              }
-              __Pyx_DECREF_SET(__pyx_v_det, __pyx_t_2);
-              __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":40
- *                 try:
- *                     det = translator.detect(slited)
- *                     lang = det.lang             # <<<<<<<<<<<<<<
- *                     tokens += len(slited)
- *                     logging.debug(f'checking {slited}. Lang detected {lang}. Checked tokens {tokens}...')
- */
-              __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_det, __pyx_n_s_lang); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 40, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_2);
-              __Pyx_DECREF_SET(__pyx_v_lang, __pyx_t_2);
-              __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":41
- *                     det = translator.detect(slited)
- *                     lang = det.lang
- *                     tokens += len(slited)             # <<<<<<<<<<<<<<
- *                     logging.debug(f'checking {slited}. Lang detected {lang}. Checked tokens {tokens}...')
- *                     break
- */
-              __pyx_t_17 = PyObject_Length(__pyx_v_slited); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 41, __pyx_L27_error)
-              __pyx_t_2 = PyInt_FromSsize_t(__pyx_t_17); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 41, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_2);
-              __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_tokens, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_1);
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-              __Pyx_DECREF_SET(__pyx_v_tokens, __pyx_t_1);
-              __pyx_t_1 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":42
- *                     lang = det.lang
- *                     tokens += len(slited)
- *                     logging.debug(f'checking {slited}. Lang detected {lang}. Checked tokens {tokens}...')             # <<<<<<<<<<<<<<
- *                     break
- *                 except:
- */
-              __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_2);
-              __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_5);
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-              __pyx_t_2 = PyTuple_New(7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_2);
-              __pyx_t_17 = 0;
-              __pyx_t_18 = 127;
-              __Pyx_INCREF(__pyx_kp_u_checking);
-              __pyx_t_17 += 9;
-              __Pyx_GIVEREF(__pyx_kp_u_checking);
-              PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_checking);
-              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_8);
-              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
-              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
-              __Pyx_GIVEREF(__pyx_t_8);
-              PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_8);
-              __pyx_t_8 = 0;
-              __Pyx_INCREF(__pyx_kp_u_Lang_detected);
-              __pyx_t_17 += 16;
-              __Pyx_GIVEREF(__pyx_kp_u_Lang_detected);
-              PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_Lang_detected);
-              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_lang, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_8);
-              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
-              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
-              __Pyx_GIVEREF(__pyx_t_8);
-              PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_8);
-              __pyx_t_8 = 0;
-              __Pyx_INCREF(__pyx_kp_u_Checked_tokens);
-              __pyx_t_17 += 17;
-              __Pyx_GIVEREF(__pyx_kp_u_Checked_tokens);
-              PyTuple_SET_ITEM(__pyx_t_2, 4, __pyx_kp_u_Checked_tokens);
-              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_tokens, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_8);
-              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
-              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
-              __Pyx_GIVEREF(__pyx_t_8);
-              PyTuple_SET_ITEM(__pyx_t_2, 5, __pyx_t_8);
-              __pyx_t_8 = 0;
-              __Pyx_INCREF(__pyx_kp_u__3);
-              __pyx_t_17 += 3;
-              __Pyx_GIVEREF(__pyx_kp_u__3);
-              PyTuple_SET_ITEM(__pyx_t_2, 6, __pyx_kp_u__3);
-              __pyx_t_8 = __Pyx_PyUnicode_Join(__pyx_t_2, 7, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 42, __pyx_L27_error)
-              __Pyx_GOTREF(__pyx_t_8);
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-              __pyx_t_2 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
-                __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
-                if (likely(__pyx_t_2)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-                  __Pyx_INCREF(__pyx_t_2);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_5, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_8};
-                __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-                __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-                if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L27_error)
-                __Pyx_GOTREF(__pyx_t_1);
-                __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-              }
-              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":43
- *                     tokens += len(slited)
- *                     logging.debug(f'checking {slited}. Lang detected {lang}. Checked tokens {tokens}...')
- *                     break             # <<<<<<<<<<<<<<
- *                 except:
- *                     retry -= 1
- */
-              goto __pyx_L32_try_break;
-
-              /* "wrapper/infra/LanguageDetector.pyx":38
- *             lang = None
- *             while (retry > 0):
- *                 try:             # <<<<<<<<<<<<<<
- *                     det = translator.detect(slited)
- *                     lang = det.lang
- */
-            }
-            __pyx_L27_error:;
-            __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-            __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-            __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-            __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-
-            /* "wrapper/infra/LanguageDetector.pyx":44
- *                     logging.debug(f'checking {slited}. Lang detected {lang}. Checked tokens {tokens}...')
- *                     break
- *                 except:             # <<<<<<<<<<<<<<
- *                     retry -= 1
- *                     logging.debug(f'retrying. Left {retry}')
- */
-            /*except:*/ {
-              __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
-              if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_5, &__pyx_t_8) < 0) __PYX_ERR(0, 44, __pyx_L29_except_error)
-              __Pyx_XGOTREF(__pyx_t_1);
-              __Pyx_XGOTREF(__pyx_t_5);
-              __Pyx_XGOTREF(__pyx_t_8);
-
-              /* "wrapper/infra/LanguageDetector.pyx":45
- *                     break
- *                 except:
- *                     retry -= 1             # <<<<<<<<<<<<<<
- *                     logging.debug(f'retrying. Left {retry}')
- *                     logging.error(traceback.format_exc())
- */
-              __pyx_t_2 = __Pyx_PyInt_SubtractObjC(__pyx_v_retry, __pyx_int_1, 1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 45, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_2);
-              __Pyx_DECREF_SET(__pyx_v_retry, __pyx_t_2);
-              __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":46
- *                 except:
- *                     retry -= 1
- *                     logging.debug(f'retrying. Left {retry}')             # <<<<<<<<<<<<<<
- *                     logging.error(traceback.format_exc())
- *                     time.sleep(0.5)
- */
-              __Pyx_GetModuleGlobalName(__pyx_t_19, __pyx_n_s_logging); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 46, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_19);
-              __pyx_t_20 = __Pyx_PyObject_GetAttrStr(__pyx_t_19, __pyx_n_s_debug); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 46, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_20);
-              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
-              __pyx_t_19 = __Pyx_PyObject_FormatSimple(__pyx_v_retry, __pyx_empty_unicode); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 46, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_19);
-              __pyx_t_21 = __Pyx_PyUnicode_Concat(__pyx_kp_u_retrying_Left, __pyx_t_19); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 46, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_21);
-              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
-              __pyx_t_19 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_20))) {
-                __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_20);
-                if (likely(__pyx_t_19)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_20);
-                  __Pyx_INCREF(__pyx_t_19);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_20, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[2] = {__pyx_t_19, __pyx_t_21};
-                __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_20, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
-                __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
-                if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L29_except_error)
-                __Pyx_GOTREF(__pyx_t_2);
-                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-              }
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":47
- *                     retry -= 1
- *                     logging.debug(f'retrying. Left {retry}')
- *                     logging.error(traceback.format_exc())             # <<<<<<<<<<<<<<
- *                     time.sleep(0.5)
- *                     if retry == 0:
- */
-              __Pyx_GetModuleGlobalName(__pyx_t_20, __pyx_n_s_logging); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_20);
-              __pyx_t_21 = __Pyx_PyObject_GetAttrStr(__pyx_t_20, __pyx_n_s_error); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_21);
-              __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-              __Pyx_GetModuleGlobalName(__pyx_t_19, __pyx_n_s_traceback); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_19);
-              __pyx_t_22 = __Pyx_PyObject_GetAttrStr(__pyx_t_19, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_22)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_22);
-              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
-              __pyx_t_19 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_22))) {
-                __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_22);
-                if (likely(__pyx_t_19)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_22);
-                  __Pyx_INCREF(__pyx_t_19);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_22, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[1] = {__pyx_t_19, };
-                __pyx_t_20 = __Pyx_PyObject_FastCall(__pyx_t_22, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
-                if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-                __Pyx_GOTREF(__pyx_t_20);
-                __Pyx_DECREF(__pyx_t_22); __pyx_t_22 = 0;
-              }
-              __pyx_t_22 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_21))) {
-                __pyx_t_22 = PyMethod_GET_SELF(__pyx_t_21);
-                if (likely(__pyx_t_22)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_21);
-                  __Pyx_INCREF(__pyx_t_22);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_21, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[2] = {__pyx_t_22, __pyx_t_20};
-                __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_21, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
-                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-                if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 47, __pyx_L29_except_error)
-                __Pyx_GOTREF(__pyx_t_2);
-                __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
-              }
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":48
- *                     logging.debug(f'retrying. Left {retry}')
- *                     logging.error(traceback.format_exc())
- *                     time.sleep(0.5)             # <<<<<<<<<<<<<<
- *                     if retry == 0:
- *                         raise
- */
-              __Pyx_GetModuleGlobalName(__pyx_t_21, __pyx_n_s_time); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 48, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_21);
-              __pyx_t_20 = __Pyx_PyObject_GetAttrStr(__pyx_t_21, __pyx_n_s_sleep); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 48, __pyx_L29_except_error)
-              __Pyx_GOTREF(__pyx_t_20);
-              __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
-              __pyx_t_21 = NULL;
-              __pyx_t_4 = 0;
-              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_20))) {
-                __pyx_t_21 = PyMethod_GET_SELF(__pyx_t_20);
-                if (likely(__pyx_t_21)) {
-                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_20);
-                  __Pyx_INCREF(__pyx_t_21);
-                  __Pyx_INCREF(function);
-                  __Pyx_DECREF_SET(__pyx_t_20, function);
-                  __pyx_t_4 = 1;
-                }
-              }
-              {
-                PyObject *__pyx_callargs[2] = {__pyx_t_21, __pyx_float_0_5};
-                __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_20, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-                __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
-                if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 48, __pyx_L29_except_error)
-                __Pyx_GOTREF(__pyx_t_2);
-                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-              }
-              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-              /* "wrapper/infra/LanguageDetector.pyx":49
- *                     logging.error(traceback.format_exc())
- *                     time.sleep(0.5)
- *                     if retry == 0:             # <<<<<<<<<<<<<<
- *                         raise
- *             if not lang:
- */
-              __pyx_t_9 = (__Pyx_PyInt_BoolEqObjC(__pyx_v_retry, __pyx_int_0, 0, 0)); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 49, __pyx_L29_except_error)
-              if (unlikely(__pyx_t_9)) {
-
-                /* "wrapper/infra/LanguageDetector.pyx":50
- *                     time.sleep(0.5)
- *                     if retry == 0:
- *                         raise             # <<<<<<<<<<<<<<
- *             if not lang:
- *                 continue
- */
-                __Pyx_GIVEREF(__pyx_t_1);
-                __Pyx_GIVEREF(__pyx_t_5);
-                __Pyx_XGIVEREF(__pyx_t_8);
-                __Pyx_ErrRestoreWithState(__pyx_t_1, __pyx_t_5, __pyx_t_8);
-                __pyx_t_1 = 0; __pyx_t_5 = 0; __pyx_t_8 = 0; 
-                __PYX_ERR(0, 50, __pyx_L29_except_error)
-
-                /* "wrapper/infra/LanguageDetector.pyx":49
- *                     logging.error(traceback.format_exc())
- *                     time.sleep(0.5)
- *                     if retry == 0:             # <<<<<<<<<<<<<<
- *                         raise
- *             if not lang:
- */
-              }
-              __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-              __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-              __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-              goto __pyx_L28_exception_handled;
-            }
-
-            /* "wrapper/infra/LanguageDetector.pyx":38
- *             lang = None
- *             while (retry > 0):
- *                 try:             # <<<<<<<<<<<<<<
- *                     det = translator.detect(slited)
- *                     lang = det.lang
- */
-            __pyx_L29_except_error:;
-            __Pyx_XGIVEREF(__pyx_t_14);
-            __Pyx_XGIVEREF(__pyx_t_15);
-            __Pyx_XGIVEREF(__pyx_t_16);
-            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
-            goto __pyx_L17_error;
-            __pyx_L32_try_break:;
-            __Pyx_XGIVEREF(__pyx_t_14);
-            __Pyx_XGIVEREF(__pyx_t_15);
-            __Pyx_XGIVEREF(__pyx_t_16);
-            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
-            goto __pyx_L26_break;
-            __pyx_L28_exception_handled:;
-            __Pyx_XGIVEREF(__pyx_t_14);
-            __Pyx_XGIVEREF(__pyx_t_15);
-            __Pyx_XGIVEREF(__pyx_t_16);
-            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
-          }
-        }
-        __pyx_L26_break:;
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_INCREF(__pyx_v_text);
+  __pyx_r = __pyx_v_text;
+  goto __pyx_L0;
 
-        /* "wrapper/infra/LanguageDetector.pyx":51
- *                     if retry == 0:
- *                         raise
- *             if not lang:             # <<<<<<<<<<<<<<
- *                 continue
- *             if lang not in detecteds_sentences:
- */
-        __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_lang); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 51, __pyx_L17_error)
-        __pyx_t_23 = (!__pyx_t_9);
-        if (__pyx_t_23) {
-
-          /* "wrapper/infra/LanguageDetector.pyx":52
- *                         raise
- *             if not lang:
- *                 continue             # <<<<<<<<<<<<<<
- *             if lang not in detecteds_sentences:
- *                 detecteds_sentences[lang] = [slited]
- */
-          goto __pyx_L23_try_continue;
-
-          /* "wrapper/infra/LanguageDetector.pyx":51
- *                     if retry == 0:
- *                         raise
- *             if not lang:             # <<<<<<<<<<<<<<
- *                 continue
- *             if lang not in detecteds_sentences:
- */
-        }
-
-        /* "wrapper/infra/LanguageDetector.pyx":53
- *             if not lang:
- *                 continue
- *             if lang not in detecteds_sentences:             # <<<<<<<<<<<<<<
- *                 detecteds_sentences[lang] = [slited]
- *             else:
- */
-        __pyx_t_23 = (__Pyx_PyDict_ContainsTF(__pyx_v_lang, __pyx_v_detecteds_sentences, Py_NE)); if (unlikely((__pyx_t_23 < 0))) __PYX_ERR(0, 53, __pyx_L17_error)
-        if (__pyx_t_23) {
-
-          /* "wrapper/infra/LanguageDetector.pyx":54
- *                 continue
- *             if lang not in detecteds_sentences:
- *                 detecteds_sentences[lang] = [slited]             # <<<<<<<<<<<<<<
- *             else:
- *                 x = detecteds_sentences[lang]
- */
-          __pyx_t_8 = PyList_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 54, __pyx_L17_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_INCREF(__pyx_v_slited);
-          __Pyx_GIVEREF(__pyx_v_slited);
-          PyList_SET_ITEM(__pyx_t_8, 0, __pyx_v_slited);
-          if (unlikely((PyDict_SetItem(__pyx_v_detecteds_sentences, __pyx_v_lang, __pyx_t_8) < 0))) __PYX_ERR(0, 54, __pyx_L17_error)
-          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-
-          /* "wrapper/infra/LanguageDetector.pyx":53
- *             if not lang:
- *                 continue
- *             if lang not in detecteds_sentences:             # <<<<<<<<<<<<<<
- *                 detecteds_sentences[lang] = [slited]
- *             else:
- */
-          goto __pyx_L39;
-        }
-
-        /* "wrapper/infra/LanguageDetector.pyx":56
- *                 detecteds_sentences[lang] = [slited]
- *             else:
- *                 x = detecteds_sentences[lang]             # <<<<<<<<<<<<<<
- *                 x.append(slited)
- *                 detecteds_sentences[lang] = x
- */
-        /*else*/ {
-          __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_detecteds_sentences, __pyx_v_lang); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 56, __pyx_L17_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_8);
-          __pyx_t_8 = 0;
-
-          /* "wrapper/infra/LanguageDetector.pyx":57
- *             else:
- *                 x = detecteds_sentences[lang]
- *                 x.append(slited)             # <<<<<<<<<<<<<<
- *                 detecteds_sentences[lang] = x
- *         except:
- */
-          __pyx_t_10 = __Pyx_PyObject_Append(__pyx_v_x, __pyx_v_slited); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 57, __pyx_L17_error)
-
-          /* "wrapper/infra/LanguageDetector.pyx":58
- *                 x = detecteds_sentences[lang]
- *                 x.append(slited)
- *                 detecteds_sentences[lang] = x             # <<<<<<<<<<<<<<
- *         except:
- *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
- */
-          if (unlikely((PyDict_SetItem(__pyx_v_detecteds_sentences, __pyx_v_lang, __pyx_v_x) < 0))) __PYX_ERR(0, 58, __pyx_L17_error)
-        }
-        __pyx_L39:;
-
-        /* "wrapper/infra/LanguageDetector.pyx":35
- *         retry = 4
- *         det = None
- *         try:             # <<<<<<<<<<<<<<
- *             lang = None
- *             while (retry > 0):
- */
-      }
-      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
-      __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
-      __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-      goto __pyx_L24_try_end;
-      __pyx_L17_error:;
-      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
-      __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
-      __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-
-      /* "wrapper/infra/LanguageDetector.pyx":59
- *                 x.append(slited)
- *                 detecteds_sentences[lang] = x
- *         except:             # <<<<<<<<<<<<<<
- *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
- * 
- */
-      /*except:*/ {
-        __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_8, &__pyx_t_5, &__pyx_t_1) < 0) __PYX_ERR(0, 59, __pyx_L19_except_error)
-        __Pyx_XGOTREF(__pyx_t_8);
-        __Pyx_XGOTREF(__pyx_t_5);
-        __Pyx_XGOTREF(__pyx_t_1);
-
-        /* "wrapper/infra/LanguageDetector.pyx":60
- *                 detecteds_sentences[lang] = x
- *         except:
- *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/PreProcessing.pyx":36
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
  * 
- *     if len(detecteds_sentences) == 0:
- */
-        __pyx_t_2 = PyTuple_New(6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __pyx_t_17 = 0;
-        __pyx_t_18 = 127;
-        __Pyx_INCREF(__pyx_kp_u_Error_to_detect_language_for_sen);
-        __pyx_t_17 += 38;
-        __Pyx_GIVEREF(__pyx_kp_u_Error_to_detect_language_for_sen);
-        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_Error_to_detect_language_for_sen);
-        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_20);
-        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
-        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
-        __Pyx_GIVEREF(__pyx_t_20);
-        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_20);
-        __pyx_t_20 = 0;
-        __Pyx_INCREF(__pyx_kp_u_from_sentences);
-        __pyx_t_17 += 16;
-        __Pyx_GIVEREF(__pyx_kp_u_from_sentences);
-        PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_from_sentences);
-        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_splitedText, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_20);
-        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
-        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
-        __Pyx_GIVEREF(__pyx_t_20);
-        PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_20);
-        __pyx_t_20 = 0;
-        __Pyx_INCREF(__pyx_kp_u_Detected_object);
-        __pyx_t_17 += 18;
-        __Pyx_GIVEREF(__pyx_kp_u_Detected_object);
-        PyTuple_SET_ITEM(__pyx_t_2, 4, __pyx_kp_u_Detected_object);
-        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_det, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_20);
-        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
-        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
-        __Pyx_GIVEREF(__pyx_t_20);
-        PyTuple_SET_ITEM(__pyx_t_2, 5, __pyx_t_20);
-        __pyx_t_20 = 0;
-        __pyx_t_20 = __Pyx_PyUnicode_Join(__pyx_t_2, 6, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_20);
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_20); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L19_except_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-        __Pyx_Raise(__pyx_t_2, 0, 0, 0);
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        __PYX_ERR(0, 60, __pyx_L19_except_error)
-      }
-
-      /* "wrapper/infra/LanguageDetector.pyx":35
- *         retry = 4
- *         det = None
- *         try:             # <<<<<<<<<<<<<<
- *             lang = None
- *             while (retry > 0):
- */
-      __pyx_L19_except_error:;
-      __Pyx_XGIVEREF(__pyx_t_11);
-      __Pyx_XGIVEREF(__pyx_t_12);
-      __Pyx_XGIVEREF(__pyx_t_13);
-      __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
-      goto __pyx_L1_error;
-      __pyx_L23_try_continue:;
-      __Pyx_XGIVEREF(__pyx_t_11);
-      __Pyx_XGIVEREF(__pyx_t_12);
-      __Pyx_XGIVEREF(__pyx_t_13);
-      __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
-      goto __pyx_L14_continue;
-      __pyx_L24_try_end:;
-    }
-
-    /* "wrapper/infra/LanguageDetector.pyx":27
- *     tokens = 0
- *     maxCheckedTokens = 4000
- *     for slited in allSplitedText:             # <<<<<<<<<<<<<<
- *         if tokens > maxCheckedTokens:
- *             break
+ * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     if remove_all_accents:
  */
-    __pyx_L14_continue:;
-  }
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  goto __pyx_L42_for_end;
-  __pyx_L15_break:;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  goto __pyx_L42_for_end;
-  __pyx_L42_for_end:;
 
-  /* "wrapper/infra/LanguageDetector.pyx":62
- *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
- * 
- *     if len(detecteds_sentences) == 0:             # <<<<<<<<<<<<<<
- *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
- * 
- */
-  __pyx_t_6 = PyDict_Size(__pyx_v_detecteds_sentences); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 62, __pyx_L1_error)
-  __pyx_t_23 = (__pyx_t_6 == 0);
-  if (unlikely(__pyx_t_23)) {
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.normalize_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_text);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-    /* "wrapper/infra/LanguageDetector.pyx":63
+/* "wrapper/infra/PreProcessing.pyx":45
+ *     return text
  * 
- *     if len(detecteds_sentences) == 0:
- *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")             # <<<<<<<<<<<<<<
+ * def extract_sentences(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
  * 
- *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
  */
-    __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_6 = 0;
-    __pyx_t_18 = 127;
-    __Pyx_INCREF(__pyx_kp_u_It_doesn_t_have_readable_sentenc);
-    __pyx_t_6 += 39;
-    __Pyx_GIVEREF(__pyx_kp_u_It_doesn_t_have_readable_sentenc);
-    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_It_doesn_t_have_readable_sentenc);
-    __pyx_t_1 = __Pyx_PyObject_FormatSimple(__pyx_v_splitedText, __pyx_empty_unicode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 63, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_1) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_1) : __pyx_t_18;
-    __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_1);
-    __Pyx_GIVEREF(__pyx_t_1);
-    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1);
-    __pyx_t_1 = 0;
-    __Pyx_INCREF(__pyx_kp_u__2);
-    __pyx_t_6 += 1;
-    __Pyx_GIVEREF(__pyx_kp_u__2);
-    PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u__2);
-    __pyx_t_1 = __Pyx_PyUnicode_Join(__pyx_t_3, 3, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 63, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 63, __pyx_L1_error)
 
-    /* "wrapper/infra/LanguageDetector.pyx":62
- *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
- * 
- *     if len(detecteds_sentences) == 0:             # <<<<<<<<<<<<<<
- *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
- * 
- */
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_11extract_sentences(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_10extract_sentences, "extract_sentences(text, language: DocLanguage)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_11extract_sentences = {"extract_sentences", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_11extract_sentences, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_10extract_sentences};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_11extract_sentences(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_language = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("extract_sentences (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_language,0};
+    PyObject* values[2] = {0,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 45, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 45, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("extract_sentences", 1, 2, 2, 1); __PYX_ERR(0, 45, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_sentences") < 0)) __PYX_ERR(0, 45, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_text = values[0];
+    __pyx_v_language = values[1];
   }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("extract_sentences", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 45, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.extract_sentences", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_10extract_sentences(__pyx_self, __pyx_v_text, __pyx_v_language);
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-  /* "wrapper/infra/LanguageDetector.pyx":65
- *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_10extract_sentences(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  PyObject *__pyx_t_6 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("extract_sentences", 0);
+
+  /* "wrapper/infra/PreProcessing.pyx":46
  * 
- *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]             # <<<<<<<<<<<<<<
+ * def extract_sentences(text, language:DocLanguage):
+ *     return sent_tokenize(text, language=nltk_languages[language.value])             # <<<<<<<<<<<<<<
  * 
- *     if len(detected[1]) / len(splitedText) <= 0.5:
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):
  */
-  __pyx_t_3 = __Pyx_PyDict_Items(__pyx_v_detecteds_sentences); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_XDECREF(__pyx_r);
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_sent_tokenize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_GIVEREF(__pyx_t_3);
-  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
-  __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_v_text);
+  __Pyx_GIVEREF(__pyx_v_text);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_text);
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_16LanguageDetector_11detect_lang_lambda, 0, __pyx_n_s_detect_lang_locals_lambda, NULL, __pyx_n_s_wrapper_infra_LanguageDetector, __pyx_d, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 65, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_5) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyObject_GetItem(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 65, __pyx_L1_error)
-  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_t_6) < 0) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 65, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  __pyx_v_detected = __pyx_t_3;
-  __pyx_t_3 = 0;
+  __pyx_r = __pyx_t_6;
+  __pyx_t_6 = 0;
+  goto __pyx_L0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":67
- *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
+  /* "wrapper/infra/PreProcessing.pyx":45
+ *     return text
+ * 
+ * def extract_sentences(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
  * 
- *     if len(detected[1]) / len(splitedText) <= 0.5:             # <<<<<<<<<<<<<<
- *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
- *         logging.error("Language not detected")
  */
-  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 67, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_6 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 67, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_17 = PyList_GET_SIZE(__pyx_v_splitedText); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 67, __pyx_L1_error)
-  if (unlikely(__pyx_t_17 == 0)) {
-    PyErr_SetString(PyExc_ZeroDivisionError, "float division");
-    __PYX_ERR(0, 67, __pyx_L1_error)
-  }
-  __pyx_t_23 = ((((double)__pyx_t_6) / ((double)__pyx_t_17)) <= 0.5);
-  if (unlikely(__pyx_t_23)) {
 
-    /* "wrapper/infra/LanguageDetector.pyx":69
- *     if len(detected[1]) / len(splitedText) <= 0.5:
- *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
- *         logging.error("Language not detected")             # <<<<<<<<<<<<<<
- *         raise Exception("Language not detected")
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.extract_sentences", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/PreProcessing.pyx":48
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
  * 
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):             # <<<<<<<<<<<<<<
+ *     text = normalize_text(text)
+ *     words = None
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 69, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_error); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 69, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __pyx_t_5 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
-      if (likely(__pyx_t_5)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-        __Pyx_INCREF(__pyx_t_5);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_1, function);
-        __pyx_t_4 = 1;
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_13preprocess_text_for_stemmetization(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_12preprocess_text_for_stemmetization, "preprocess_text_for_stemmetization(text, language: DocLanguage = None)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_13preprocess_text_for_stemmetization = {"preprocess_text_for_stemmetization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_13preprocess_text_for_stemmetization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_12preprocess_text_for_stemmetization};
+static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_13preprocess_text_for_stemmetization(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_language = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("preprocess_text_for_stemmetization (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_language,0};
+    PyObject* values[2] = {0,0};
+    values[1] = ((PyObject *)((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 48, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language);
+          if (value) { values[1] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 48, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "preprocess_text_for_stemmetization") < 0)) __PYX_ERR(0, 48, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
       }
     }
-    {
-      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_Language_not_detected};
-      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 69, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    }
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_v_text = values[0];
+    __pyx_v_language = values[1];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("preprocess_text_for_stemmetization", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 48, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_stemmetization", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_12preprocess_text_for_stemmetization(__pyx_self, __pyx_v_text, __pyx_v_language);
 
-    /* "wrapper/infra/LanguageDetector.pyx":70
- *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
- *         logging.error("Language not detected")
- *         raise Exception("Language not detected")             # <<<<<<<<<<<<<<
- * 
- *     if translate_to and detected[0] != translate_to:
- */
-    __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple__4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 70, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __PYX_ERR(0, 70, __pyx_L1_error)
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-    /* "wrapper/infra/LanguageDetector.pyx":67
- *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
+static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_12preprocess_text_for_stemmetization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language) {
+  PyObject *__pyx_v_words = NULL;
+  PyObject *__pyx_v_supportedLanguage = NULL;
+  PyObject *__pyx_v_stemmer = NULL;
+  PyObject *__pyx_8genexpr3__pyx_v_word = NULL;
+  PyObject *__pyx_8genexpr4__pyx_v_word = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  int __pyx_t_5;
+  PyObject *__pyx_t_6 = NULL;
+  Py_ssize_t __pyx_t_7;
+  PyObject *(*__pyx_t_8)(PyObject *);
+  PyObject *__pyx_t_9 = NULL;
+  PyObject *__pyx_t_10 = NULL;
+  int __pyx_t_11;
+  int __pyx_t_12;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("preprocess_text_for_stemmetization", 0);
+  __Pyx_INCREF(__pyx_v_text);
+
+  /* "wrapper/infra/PreProcessing.pyx":49
  * 
- *     if len(detected[1]) / len(splitedText) <= 0.5:             # <<<<<<<<<<<<<<
- *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
- *         logging.error("Language not detected")
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):
+ *     text = normalize_text(text)             # <<<<<<<<<<<<<<
+ *     words = None
+ *     if language:
  */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
   }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_text};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 49, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_t_1 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":72
- *         raise Exception("Language not detected")
- * 
- *     if translate_to and detected[0] != translate_to:             # <<<<<<<<<<<<<<
- *         translated_sentences = []
- *         for slited in allSplitedText:
+  /* "wrapper/infra/PreProcessing.pyx":50
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):
+ *     text = normalize_text(text)
+ *     words = None             # <<<<<<<<<<<<<<
+ *     if language:
+ *         supportedLanguage = None
+ */
+  __Pyx_INCREF(Py_None);
+  __pyx_v_words = Py_None;
+
+  /* "wrapper/infra/PreProcessing.pyx":51
+ *     text = normalize_text(text)
+ *     words = None
+ *     if language:             # <<<<<<<<<<<<<<
+ *         supportedLanguage = None
+ *         if language.value in nltk_languages:
+ */
+  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_language); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 51, __pyx_L1_error)
+  if (__pyx_t_5) {
+
+    /* "wrapper/infra/PreProcessing.pyx":52
+ *     words = None
+ *     if language:
+ *         supportedLanguage = None             # <<<<<<<<<<<<<<
+ *         if language.value in nltk_languages:
+ *             supportedLanguage = nltk_languages[language.value]
  */
-  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_translate_to); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 72, __pyx_L1_error)
-  if (__pyx_t_9) {
-  } else {
-    __pyx_t_23 = __pyx_t_9;
-    goto __pyx_L46_bool_binop_done;
-  }
-  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 72, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_translate_to, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 72, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 72, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_23 = __pyx_t_9;
-  __pyx_L46_bool_binop_done:;
-  if (__pyx_t_23) {
-
-    /* "wrapper/infra/LanguageDetector.pyx":73
- * 
- *     if translate_to and detected[0] != translate_to:
- *         translated_sentences = []             # <<<<<<<<<<<<<<
- *         for slited in allSplitedText:
- *             try:
+    __Pyx_INCREF(Py_None);
+    __pyx_v_supportedLanguage = Py_None;
+
+    /* "wrapper/infra/PreProcessing.pyx":53
+ *     if language:
+ *         supportedLanguage = None
+ *         if language.value in nltk_languages:             # <<<<<<<<<<<<<<
+ *             supportedLanguage = nltk_languages[language.value]
+ *         else:
  */
-    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 73, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_v_translated_sentences = ((PyObject*)__pyx_t_1);
-    __pyx_t_1 = 0;
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 53, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_t_2, Py_EQ)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 53, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (likely(__pyx_t_5)) {
 
-    /* "wrapper/infra/LanguageDetector.pyx":74
- *     if translate_to and detected[0] != translate_to:
- *         translated_sentences = []
- *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
- *             try:
- *                 t = translator.translate(slited, dest=translate_to)
+      /* "wrapper/infra/PreProcessing.pyx":54
+ *         supportedLanguage = None
+ *         if language.value in nltk_languages:
+ *             supportedLanguage = nltk_languages[language.value]             # <<<<<<<<<<<<<<
+ *         else:
+ *             raise Exception(f"Not Specified the language for text {text}")
  */
-    __pyx_t_1 = __pyx_v_allSplitedText; __Pyx_INCREF(__pyx_t_1); __pyx_t_17 = 0;
-    for (;;) {
-      if (__pyx_t_17 >= PyList_GET_SIZE(__pyx_t_1)) break;
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_17); __Pyx_INCREF(__pyx_t_3); __pyx_t_17++; if (unlikely((0 < 0))) __PYX_ERR(0, 74, __pyx_L1_error)
-      #else
-      __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_17); __pyx_t_17++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_nltk_languages); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 54, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 54, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_3 = __Pyx_PyObject_GetItem(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 54, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
-      #endif
-      __Pyx_XDECREF_SET(__pyx_v_slited, __pyx_t_3);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __Pyx_DECREF_SET(__pyx_v_supportedLanguage, __pyx_t_3);
       __pyx_t_3 = 0;
 
-      /* "wrapper/infra/LanguageDetector.pyx":75
- *         translated_sentences = []
- *         for slited in allSplitedText:
- *             try:             # <<<<<<<<<<<<<<
- *                 t = translator.translate(slited, dest=translate_to)
- *             except:
+      /* "wrapper/infra/PreProcessing.pyx":53
+ *     if language:
+ *         supportedLanguage = None
+ *         if language.value in nltk_languages:             # <<<<<<<<<<<<<<
+ *             supportedLanguage = nltk_languages[language.value]
+ *         else:
  */
-      {
-        __Pyx_PyThreadState_declare
-        __Pyx_PyThreadState_assign
-        __Pyx_ExceptionSave(&__pyx_t_13, &__pyx_t_12, &__pyx_t_11);
-        __Pyx_XGOTREF(__pyx_t_13);
-        __Pyx_XGOTREF(__pyx_t_12);
-        __Pyx_XGOTREF(__pyx_t_11);
-        /*try:*/ {
-
-          /* "wrapper/infra/LanguageDetector.pyx":76
- *         for slited in allSplitedText:
- *             try:
- *                 t = translator.translate(slited, dest=translate_to)             # <<<<<<<<<<<<<<
- *             except:
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+      goto __pyx_L4;
+    }
+
+    /* "wrapper/infra/PreProcessing.pyx":56
+ *             supportedLanguage = nltk_languages[language.value]
+ *         else:
+ *             raise Exception(f"Not Specified the language for text {text}")             # <<<<<<<<<<<<<<
+ *         words = word_tokenize(text, language=supportedLanguage)
+ *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
  */
-          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_translator, __pyx_n_s_translate); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 76, __pyx_L50_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 76, __pyx_L50_error)
-          __Pyx_GOTREF(__pyx_t_5);
-          __Pyx_INCREF(__pyx_v_slited);
-          __Pyx_GIVEREF(__pyx_v_slited);
-          PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_slited);
-          __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 76, __pyx_L50_error)
-          __Pyx_GOTREF(__pyx_t_8);
-          if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_dest, __pyx_v_translate_to) < 0) __PYX_ERR(0, 76, __pyx_L50_error)
-          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, __pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 76, __pyx_L50_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_2);
-          __pyx_t_2 = 0;
-
-          /* "wrapper/infra/LanguageDetector.pyx":75
- *         translated_sentences = []
- *         for slited in allSplitedText:
- *             try:             # <<<<<<<<<<<<<<
- *                 t = translator.translate(slited, dest=translate_to)
- *             except:
- */
-        }
-        __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
-        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
-        goto __pyx_L57_try_end;
-        __pyx_L50_error:;
-        __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
-        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-        __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
-        __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
-        __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
-        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-
-        /* "wrapper/infra/LanguageDetector.pyx":77
- *             try:
- *                 t = translator.translate(slited, dest=translate_to)
- *             except:             # <<<<<<<<<<<<<<
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")
- *             if not t or not t.text:
- */
-        /*except:*/ {
-          __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
-          if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_8, &__pyx_t_5) < 0) __PYX_ERR(0, 77, __pyx_L52_except_error)
-          __Pyx_XGOTREF(__pyx_t_2);
-          __Pyx_XGOTREF(__pyx_t_8);
-          __Pyx_XGOTREF(__pyx_t_5);
-
-          /* "wrapper/infra/LanguageDetector.pyx":78
- *                 t = translator.translate(slited, dest=translate_to)
- *             except:
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")             # <<<<<<<<<<<<<<
- *             if not t or not t.text:
- *                 raise Exception(f'Translate {slited} to {translate_to} error')
+    /*else*/ {
+      __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 56, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_1 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Not_Specified_the_language_for_t, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 56, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 56, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __PYX_ERR(0, 56, __pyx_L1_error)
+    }
+    __pyx_L4:;
+
+    /* "wrapper/infra/PreProcessing.pyx":57
+ *         else:
+ *             raise Exception(f"Not Specified the language for text {text}")
+ *         words = word_tokenize(text, language=supportedLanguage)             # <<<<<<<<<<<<<<
+ *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
+ *         stemmer = SnowballStemmer(supportedLanguage)
  */
-          __pyx_t_3 = PyTuple_New(4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L52_except_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_6 = 0;
-          __pyx_t_18 = 127;
-          __Pyx_INCREF(__pyx_kp_u_Error_to_translate);
-          __pyx_t_6 += 19;
-          __Pyx_GIVEREF(__pyx_kp_u_Error_to_translate);
-          PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Error_to_translate);
-          __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 78, __pyx_L52_except_error)
-          __Pyx_GOTREF(__pyx_t_20);
-          __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
-          __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
-          __Pyx_GIVEREF(__pyx_t_20);
-          PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_20);
-          __pyx_t_20 = 0;
-          __Pyx_INCREF(__pyx_kp_u_to);
-          __pyx_t_6 += 4;
-          __Pyx_GIVEREF(__pyx_kp_u_to);
-          PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_to);
-          __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 78, __pyx_L52_except_error)
-          __Pyx_GOTREF(__pyx_t_20);
-          __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
-          __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
-          __Pyx_GIVEREF(__pyx_t_20);
-          PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_20);
-          __pyx_t_20 = 0;
-          __pyx_t_20 = __Pyx_PyUnicode_Join(__pyx_t_3, 4, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 78, __pyx_L52_except_error)
-          __Pyx_GOTREF(__pyx_t_20);
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_20); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L52_except_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
-          __Pyx_Raise(__pyx_t_3, 0, 0, 0);
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __PYX_ERR(0, 78, __pyx_L52_except_error)
-        }
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 57, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_INCREF(__pyx_v_text);
+    __Pyx_GIVEREF(__pyx_v_text);
+    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_text);
+    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_v_supportedLanguage) < 0) __PYX_ERR(0, 57, __pyx_L1_error)
+    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 57, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
+    __pyx_t_6 = 0;
 
-        /* "wrapper/infra/LanguageDetector.pyx":75
- *         translated_sentences = []
- *         for slited in allSplitedText:
- *             try:             # <<<<<<<<<<<<<<
- *                 t = translator.translate(slited, dest=translate_to)
- *             except:
- */
-        __pyx_L52_except_error:;
-        __Pyx_XGIVEREF(__pyx_t_13);
-        __Pyx_XGIVEREF(__pyx_t_12);
-        __Pyx_XGIVEREF(__pyx_t_11);
-        __Pyx_ExceptionReset(__pyx_t_13, __pyx_t_12, __pyx_t_11);
-        goto __pyx_L1_error;
-        __pyx_L57_try_end:;
-      }
-
-      /* "wrapper/infra/LanguageDetector.pyx":79
- *             except:
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")
- *             if not t or not t.text:             # <<<<<<<<<<<<<<
- *                 raise Exception(f'Translate {slited} to {translate_to} error')
- *             translated_sentences.append(t.text)
- */
-      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_t); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 79, __pyx_L1_error)
-      __pyx_t_24 = (!__pyx_t_9);
-      if (!__pyx_t_24) {
+    /* "wrapper/infra/PreProcessing.pyx":58
+ *             raise Exception(f"Not Specified the language for text {text}")
+ *         words = word_tokenize(text, language=supportedLanguage)
+ *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]             # <<<<<<<<<<<<<<
+ *         stemmer = SnowballStemmer(supportedLanguage)
+ *         words = [stemmer.stem(word) for word in words]
+ */
+    { /* enter inner scope */
+      __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 58, __pyx_L7_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
+        __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_7 = 0;
+        __pyx_t_8 = NULL;
       } else {
-        __pyx_t_23 = __pyx_t_24;
-        goto __pyx_L61_bool_binop_done;
+        __pyx_t_7 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 58, __pyx_L7_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 58, __pyx_L7_error)
       }
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 79, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_24 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_24 < 0))) __PYX_ERR(0, 79, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_9 = (!__pyx_t_24);
-      __pyx_t_23 = __pyx_t_9;
-      __pyx_L61_bool_binop_done:;
-      if (unlikely(__pyx_t_23)) {
-
-        /* "wrapper/infra/LanguageDetector.pyx":80
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")
- *             if not t or not t.text:
- *                 raise Exception(f'Translate {slited} to {translate_to} error')             # <<<<<<<<<<<<<<
- *             translated_sentences.append(t.text)
- *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
- */
-        __pyx_t_5 = PyTuple_New(5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 80, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_5);
-        __pyx_t_6 = 0;
-        __pyx_t_18 = 127;
-        __Pyx_INCREF(__pyx_kp_u_Translate);
-        __pyx_t_6 += 10;
-        __Pyx_GIVEREF(__pyx_kp_u_Translate);
-        PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_u_Translate);
-        __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 80, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
-        __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
-        __Pyx_GIVEREF(__pyx_t_8);
-        PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_INCREF(__pyx_kp_u_to);
-        __pyx_t_6 += 4;
-        __Pyx_GIVEREF(__pyx_kp_u_to);
-        PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_kp_u_to);
-        __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 80, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_8);
-        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
-        __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
-        __Pyx_GIVEREF(__pyx_t_8);
-        PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_8);
-        __pyx_t_8 = 0;
-        __Pyx_INCREF(__pyx_kp_u_error_2);
-        __pyx_t_6 += 6;
-        __Pyx_GIVEREF(__pyx_kp_u_error_2);
-        PyTuple_SET_ITEM(__pyx_t_5, 4, __pyx_kp_u_error_2);
-        __pyx_t_8 = __Pyx_PyUnicode_Join(__pyx_t_5, 5, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 80, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 80, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_5);
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-        __Pyx_Raise(__pyx_t_5, 0, 0, 0);
-        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-        __PYX_ERR(0, 80, __pyx_L1_error)
-
-        /* "wrapper/infra/LanguageDetector.pyx":79
- *             except:
- *                 raise Exception(f"Error to translate {slited} to {translate_to}")
- *             if not t or not t.text:             # <<<<<<<<<<<<<<
- *                 raise Exception(f'Translate {slited} to {translate_to} error')
- *             translated_sentences.append(t.text)
- */
+      for (;;) {
+        if (likely(!__pyx_t_8)) {
+          if (likely(PyList_CheckExact(__pyx_t_2))) {
+            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_2)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 58, __pyx_L7_error)
+            #else
+            __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L7_error)
+            __Pyx_GOTREF(__pyx_t_1);
+            #endif
+          } else {
+            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 58, __pyx_L7_error)
+            #else
+            __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L7_error)
+            __Pyx_GOTREF(__pyx_t_1);
+            #endif
+          }
+        } else {
+          __pyx_t_1 = __pyx_t_8(__pyx_t_2);
+          if (unlikely(!__pyx_t_1)) {
+            PyObject* exc_type = PyErr_Occurred();
+            if (exc_type) {
+              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+              else __PYX_ERR(0, 58, __pyx_L7_error)
+            }
+            break;
+          }
+          __Pyx_GOTREF(__pyx_t_1);
+        }
+        __Pyx_XDECREF_SET(__pyx_8genexpr3__pyx_v_word, __pyx_t_1);
+        __pyx_t_1 = 0;
+        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_8genexpr3__pyx_v_word, __pyx_n_s_lower); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 58, __pyx_L7_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __pyx_t_9 = NULL;
+        __pyx_t_4 = 0;
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_3);
+          if (likely(__pyx_t_9)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+            __Pyx_INCREF(__pyx_t_9);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_3, function);
+            __pyx_t_4 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[1] = {__pyx_t_9, };
+          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
+          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 58, __pyx_L7_error)
+          __Pyx_GOTREF(__pyx_t_1);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+        }
+        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 58, __pyx_L7_error)
+        __Pyx_GOTREF(__pyx_t_9);
+        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_words); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 58, __pyx_L7_error)
+        __Pyx_GOTREF(__pyx_t_10);
+        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
+        __pyx_t_9 = NULL;
+        __pyx_t_4 = 0;
+        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
+          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
+          if (likely(__pyx_t_9)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
+            __Pyx_INCREF(__pyx_t_9);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_10, function);
+            __pyx_t_4 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[2] = {__pyx_t_9, __pyx_v_supportedLanguage};
+          __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_10, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
+          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 58, __pyx_L7_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
+        }
+        __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_t_3, Py_NE)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 58, __pyx_L7_error)
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+        if (__pyx_t_5) {
+          if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_8genexpr3__pyx_v_word))) __PYX_ERR(0, 58, __pyx_L7_error)
+        }
       }
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word); __pyx_8genexpr3__pyx_v_word = 0;
+      goto __pyx_L12_exit_scope;
+      __pyx_L7_error:;
+      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word); __pyx_8genexpr3__pyx_v_word = 0;
+      goto __pyx_L1_error;
+      __pyx_L12_exit_scope:;
+    } /* exit inner scope */
+    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
+    __pyx_t_6 = 0;
 
-      /* "wrapper/infra/LanguageDetector.pyx":81
- *             if not t or not t.text:
- *                 raise Exception(f'Translate {slited} to {translate_to} error')
- *             translated_sentences.append(t.text)             # <<<<<<<<<<<<<<
- *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
- *     else:
- */
-      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 81, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_translated_sentences, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 81, __pyx_L1_error)
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-
-      /* "wrapper/infra/LanguageDetector.pyx":74
- *     if translate_to and detected[0] != translate_to:
- *         translated_sentences = []
- *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
- *             try:
- *                 t = translator.translate(slited, dest=translate_to)
- */
-    }
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-    /* "wrapper/infra/LanguageDetector.pyx":82
- *                 raise Exception(f'Translate {slited} to {translate_to} error')
- *             translated_sentences.append(t.text)
- *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')             # <<<<<<<<<<<<<<
+    /* "wrapper/infra/PreProcessing.pyx":59
+ *         words = word_tokenize(text, language=supportedLanguage)
+ *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
+ *         stemmer = SnowballStemmer(supportedLanguage)             # <<<<<<<<<<<<<<
+ *         words = [stemmer.stem(word) for word in words]
  *     else:
- *         translated_sentences = allSplitedText
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_info); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_8);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __pyx_t_5 = PyTuple_New(4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_17 = 0;
-    __pyx_t_18 = 127;
-    __Pyx_INCREF(__pyx_kp_u_Detected_Text_Language);
-    __pyx_t_17 += 23;
-    __Pyx_GIVEREF(__pyx_kp_u_Detected_Text_Language);
-    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_u_Detected_Text_Language);
-    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 82, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_SnowballStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_t_2, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_18;
-    __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_3);
-    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_3);
-    __pyx_t_3 = 0;
-    __Pyx_INCREF(__pyx_kp_u_Will_be_translated_to);
-    __pyx_t_17 += 24;
-    __Pyx_GIVEREF(__pyx_kp_u_Will_be_translated_to);
-    PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_kp_u_Will_be_translated_to);
-    __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_18;
-    __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
-    __Pyx_GIVEREF(__pyx_t_3);
-    PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_3);
-    __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyUnicode_Join(__pyx_t_5, 4, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 82, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __pyx_t_5 = NULL;
+    __pyx_t_3 = NULL;
     __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_8);
-      if (likely(__pyx_t_5)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
-        __Pyx_INCREF(__pyx_t_5);
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_3};
-      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 82, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_supportedLanguage};
+      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 59, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-    /* "wrapper/infra/LanguageDetector.pyx":72
- *         raise Exception("Language not detected")
- * 
- *     if translate_to and detected[0] != translate_to:             # <<<<<<<<<<<<<<
- *         translated_sentences = []
- *         for slited in allSplitedText:
- */
-    goto __pyx_L45;
-  }
+    __pyx_v_stemmer = __pyx_t_6;
+    __pyx_t_6 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":84
- *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
+    /* "wrapper/infra/PreProcessing.pyx":60
+ *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
+ *         stemmer = SnowballStemmer(supportedLanguage)
+ *         words = [stemmer.stem(word) for word in words]             # <<<<<<<<<<<<<<
  *     else:
- *         translated_sentences = allSplitedText             # <<<<<<<<<<<<<<
- *     try:
- *         translated_text = ' '.join(translated_sentences)
+ *         words = text.split()
  */
-  /*else*/ {
-    __Pyx_INCREF(__pyx_v_allSplitedText);
-    __pyx_v_translated_sentences = __pyx_v_allSplitedText;
-  }
-  __pyx_L45:;
+    { /* enter inner scope */
+      __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 60, __pyx_L15_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
+        __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_7 = 0;
+        __pyx_t_8 = NULL;
+      } else {
+        __pyx_t_7 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L15_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 60, __pyx_L15_error)
+      }
+      for (;;) {
+        if (likely(!__pyx_t_8)) {
+          if (likely(PyList_CheckExact(__pyx_t_2))) {
+            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_2)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 60, __pyx_L15_error)
+            #else
+            __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 60, __pyx_L15_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            #endif
+          } else {
+            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 60, __pyx_L15_error)
+            #else
+            __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 60, __pyx_L15_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            #endif
+          }
+        } else {
+          __pyx_t_3 = __pyx_t_8(__pyx_t_2);
+          if (unlikely(!__pyx_t_3)) {
+            PyObject* exc_type = PyErr_Occurred();
+            if (exc_type) {
+              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+              else __PYX_ERR(0, 60, __pyx_L15_error)
+            }
+            break;
+          }
+          __Pyx_GOTREF(__pyx_t_3);
+        }
+        __Pyx_XDECREF_SET(__pyx_8genexpr4__pyx_v_word, __pyx_t_3);
+        __pyx_t_3 = 0;
+        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_stemmer, __pyx_n_s_stem); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 60, __pyx_L15_error)
+        __Pyx_GOTREF(__pyx_t_1);
+        __pyx_t_10 = NULL;
+        __pyx_t_4 = 0;
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
+          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_1);
+          if (likely(__pyx_t_10)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+            __Pyx_INCREF(__pyx_t_10);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_1, function);
+            __pyx_t_4 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr4__pyx_v_word};
+          __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
+          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 60, __pyx_L15_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        }
+        if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_t_3))) __PYX_ERR(0, 60, __pyx_L15_error)
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      }
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word); __pyx_8genexpr4__pyx_v_word = 0;
+      goto __pyx_L19_exit_scope;
+      __pyx_L15_error:;
+      __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word); __pyx_8genexpr4__pyx_v_word = 0;
+      goto __pyx_L1_error;
+      __pyx_L19_exit_scope:;
+    } /* exit inner scope */
+    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
+    __pyx_t_6 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":85
- *     else:
- *         translated_sentences = allSplitedText
- *     try:             # <<<<<<<<<<<<<<
- *         translated_text = ' '.join(translated_sentences)
- *     except:
- */
-  {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    __Pyx_ExceptionSave(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
-    __Pyx_XGOTREF(__pyx_t_11);
-    __Pyx_XGOTREF(__pyx_t_12);
-    __Pyx_XGOTREF(__pyx_t_13);
-    /*try:*/ {
-
-      /* "wrapper/infra/LanguageDetector.pyx":86
- *         translated_sentences = allSplitedText
- *     try:
- *         translated_text = ' '.join(translated_sentences)             # <<<<<<<<<<<<<<
- *     except:
- *         raise Exception(f'Error to concatenate text {translated_sentences}')
+    /* "wrapper/infra/PreProcessing.pyx":51
+ *     text = normalize_text(text)
+ *     words = None
+ *     if language:             # <<<<<<<<<<<<<<
+ *         supportedLanguage = None
+ *         if language.value in nltk_languages:
  */
-      __pyx_t_1 = PyUnicode_Join(__pyx_kp_u__5, __pyx_v_translated_sentences); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L64_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_v_translated_text = ((PyObject*)__pyx_t_1);
-      __pyx_t_1 = 0;
+    goto __pyx_L3;
+  }
 
-      /* "wrapper/infra/LanguageDetector.pyx":85
+  /* "wrapper/infra/PreProcessing.pyx":62
+ *         words = [stemmer.stem(word) for word in words]
  *     else:
- *         translated_sentences = allSplitedText
- *     try:             # <<<<<<<<<<<<<<
- *         translated_text = ' '.join(translated_sentences)
- *     except:
+ *         words = text.split()             # <<<<<<<<<<<<<<
+ * 
+ *     if not words or len(words) == 0:
  */
+  /*else*/ {
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_split); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 62, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_3);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
+      }
     }
-    __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
-    __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
-    __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-    goto __pyx_L69_try_end;
-    __pyx_L64_error:;
-    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
-    __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
-    __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-
-    /* "wrapper/infra/LanguageDetector.pyx":87
- *     try:
- *         translated_text = ' '.join(translated_sentences)
- *     except:             # <<<<<<<<<<<<<<
- *         raise Exception(f'Error to concatenate text {translated_sentences}')
- * 
- */
-    /*except:*/ {
-      __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
-      if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_8, &__pyx_t_3) < 0) __PYX_ERR(0, 87, __pyx_L66_except_error)
-      __Pyx_XGOTREF(__pyx_t_1);
-      __Pyx_XGOTREF(__pyx_t_8);
-      __Pyx_XGOTREF(__pyx_t_3);
-
-      /* "wrapper/infra/LanguageDetector.pyx":88
- *         translated_text = ' '.join(translated_sentences)
- *     except:
- *         raise Exception(f'Error to concatenate text {translated_sentences}')             # <<<<<<<<<<<<<<
- * 
- *     logging.debug(f'Translated text: \n {translated_text}')
- */
-      __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_translated_sentences, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 88, __pyx_L66_except_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_2 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Error_to_concatenate_text, __pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L66_except_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 88, __pyx_L66_except_error)
-      __Pyx_GOTREF(__pyx_t_5);
+    {
+      PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 62, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __Pyx_Raise(__pyx_t_5, 0, 0, 0);
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      __PYX_ERR(0, 88, __pyx_L66_except_error)
     }
-
-    /* "wrapper/infra/LanguageDetector.pyx":85
- *     else:
- *         translated_sentences = allSplitedText
- *     try:             # <<<<<<<<<<<<<<
- *         translated_text = ' '.join(translated_sentences)
- *     except:
- */
-    __pyx_L66_except_error:;
-    __Pyx_XGIVEREF(__pyx_t_11);
-    __Pyx_XGIVEREF(__pyx_t_12);
-    __Pyx_XGIVEREF(__pyx_t_13);
-    __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
-    goto __pyx_L1_error;
-    __pyx_L69_try_end:;
+    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
+    __pyx_t_6 = 0;
   }
+  __pyx_L3:;
 
-  /* "wrapper/infra/LanguageDetector.pyx":90
- *         raise Exception(f'Error to concatenate text {translated_sentences}')
+  /* "wrapper/infra/PreProcessing.pyx":64
+ *         words = text.split()
  * 
- *     logging.debug(f'Translated text: \n {translated_text}')             # <<<<<<<<<<<<<<
+ *     if not words or len(words) == 0:             # <<<<<<<<<<<<<<
+ *         raise Exception(f"it doesn't have tokens for text: {text}")
  * 
- *     return detected[0], translated_text
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_logging); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 90, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_8);
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 90, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-  __pyx_t_8 = __Pyx_PyUnicode_Unicode(__pyx_v_translated_text); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 90, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_8);
-  __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Translated_text, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 90, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_5);
-  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-  __pyx_t_8 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
-    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_1);
-    if (likely(__pyx_t_8)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-      __Pyx_INCREF(__pyx_t_8);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_1, function);
-      __pyx_t_4 = 1;
-    }
+  __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_v_words); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_t_12 = (!__pyx_t_11);
+  if (!__pyx_t_12) {
+  } else {
+    __pyx_t_5 = __pyx_t_12;
+    goto __pyx_L21_bool_binop_done;
   }
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_5};
-    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_7 = PyObject_Length(__pyx_v_words); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 64, __pyx_L1_error)
+  __pyx_t_12 = (__pyx_t_7 == 0);
+  __pyx_t_5 = __pyx_t_12;
+  __pyx_L21_bool_binop_done:;
+  if (unlikely(__pyx_t_5)) {
+
+    /* "wrapper/infra/PreProcessing.pyx":65
+ * 
+ *     if not words or len(words) == 0:
+ *         raise Exception(f"it doesn't have tokens for text: {text}")             # <<<<<<<<<<<<<<
+ * 
+ *     return words, ' '.join(words)
+ */
+    __pyx_t_6 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 65, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_2 = __Pyx_PyUnicode_Concat(__pyx_kp_u_it_doesn_t_have_tokens_for_text, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 65, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __PYX_ERR(0, 65, __pyx_L1_error)
+
+    /* "wrapper/infra/PreProcessing.pyx":64
+ *         words = text.split()
+ * 
+ *     if not words or len(words) == 0:             # <<<<<<<<<<<<<<
+ *         raise Exception(f"it doesn't have tokens for text: {text}")
+ * 
+ */
   }
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":92
- *     logging.debug(f'Translated text: \n {translated_text}')
+  /* "wrapper/infra/PreProcessing.pyx":67
+ *         raise Exception(f"it doesn't have tokens for text: {text}")
  * 
- *     return detected[0], translated_text             # <<<<<<<<<<<<<<
+ *     return words, ' '.join(words)             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_GIVEREF(__pyx_t_3);
-  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
-  __Pyx_INCREF(__pyx_v_translated_text);
-  __Pyx_GIVEREF(__pyx_v_translated_text);
-  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_translated_text);
-  __pyx_t_3 = 0;
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __pyx_t_6 = PyUnicode_Join(__pyx_kp_u__2, __pyx_v_words); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 67, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 67, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_v_words);
+  __Pyx_GIVEREF(__pyx_v_words);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_words);
+  __Pyx_GIVEREF(__pyx_t_6);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_6);
+  __pyx_t_6 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":8
- * import logging
+  /* "wrapper/infra/PreProcessing.pyx":48
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
  * 
- * def detect_lang(text, translate_to=None):             # <<<<<<<<<<<<<<
- *     translator = Translator(service_urls=[
- *       'translate.google.com',
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):             # <<<<<<<<<<<<<<
+ *     text = normalize_text(text)
+ *     words = None
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_XDECREF(__pyx_t_19);
-  __Pyx_XDECREF(__pyx_t_20);
-  __Pyx_XDECREF(__pyx_t_21);
-  __Pyx_XDECREF(__pyx_t_22);
-  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_9);
+  __Pyx_XDECREF(__pyx_t_10);
+  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_stemmetization", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_translator);
-  __Pyx_XDECREF(__pyx_v_norm_text);
-  __Pyx_XDECREF(__pyx_v_sentences);
-  __Pyx_XDECREF(__pyx_v_splitedText);
-  __Pyx_XDECREF(__pyx_v_x);
-  __Pyx_XDECREF(__pyx_v_arr);
-  __Pyx_XDECREF(__pyx_v_detecteds_sentences);
-  __Pyx_XDECREF(__pyx_v_allSplitedText);
-  __Pyx_XDECREF(__pyx_v_tokens);
-  __Pyx_XDECREF(__pyx_v_slited);
-  __Pyx_XDECREF(__pyx_v_retry);
-  __Pyx_XDECREF(__pyx_v_det);
-  __Pyx_XDECREF(__pyx_v_lang);
-  __Pyx_XDECREF(__pyx_v_detected);
-  __Pyx_XDECREF(__pyx_v_translated_sentences);
-  __Pyx_XDECREF(__pyx_v_t);
-  __Pyx_XDECREF(__pyx_v_translated_text);
-  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x);
+  __Pyx_XDECREF(__pyx_v_words);
+  __Pyx_XDECREF(__pyx_v_supportedLanguage);
+  __Pyx_XDECREF(__pyx_v_stemmer);
+  __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word);
+  __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word);
+  __Pyx_XDECREF(__pyx_v_text);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
@@ -4791,156 +4719,196 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
-    {&__pyx_kp_u_Checked_tokens, __pyx_k_Checked_tokens, sizeof(__pyx_k_Checked_tokens), 0, 1, 0, 0},
-    {&__pyx_kp_u_Detected_Text_Language, __pyx_k_Detected_Text_Language, sizeof(__pyx_k_Detected_Text_Language), 0, 1, 0, 0},
-    {&__pyx_kp_u_Detected_object, __pyx_k_Detected_object, sizeof(__pyx_k_Detected_object), 0, 1, 0, 0},
-    {&__pyx_kp_u_Error_to_concatenate_text, __pyx_k_Error_to_concatenate_text, sizeof(__pyx_k_Error_to_concatenate_text), 0, 1, 0, 0},
-    {&__pyx_kp_u_Error_to_detect_language_for_sen, __pyx_k_Error_to_detect_language_for_sen, sizeof(__pyx_k_Error_to_detect_language_for_sen), 0, 1, 0, 0},
-    {&__pyx_kp_u_Error_to_translate, __pyx_k_Error_to_translate, sizeof(__pyx_k_Error_to_translate), 0, 1, 0, 0},
-    {&__pyx_kp_u_It_doesn_t_have_readable_sentenc, __pyx_k_It_doesn_t_have_readable_sentenc, sizeof(__pyx_k_It_doesn_t_have_readable_sentenc), 0, 1, 0, 0},
-    {&__pyx_kp_u_Lang_detected, __pyx_k_Lang_detected, sizeof(__pyx_k_Lang_detected), 0, 1, 0, 0},
-    {&__pyx_kp_u_Language_not_detected, __pyx_k_Language_not_detected, sizeof(__pyx_k_Language_not_detected), 0, 1, 0, 0},
-    {&__pyx_kp_u_None, __pyx_k_None, sizeof(__pyx_k_None), 0, 1, 0, 0},
-    {&__pyx_n_s_PreProcessing, __pyx_k_PreProcessing, sizeof(__pyx_k_PreProcessing), 0, 0, 1, 1},
-    {&__pyx_kp_u_Translate, __pyx_k_Translate, sizeof(__pyx_k_Translate), 0, 1, 0, 0},
-    {&__pyx_kp_u_Translated_text, __pyx_k_Translated_text, sizeof(__pyx_k_Translated_text), 0, 1, 0, 0},
-    {&__pyx_n_s_Translator, __pyx_k_Translator, sizeof(__pyx_k_Translator), 0, 0, 1, 1},
-    {&__pyx_kp_u_Will_be_translated_to, __pyx_k_Will_be_translated_to, sizeof(__pyx_k_Will_be_translated_to), 0, 1, 0, 0},
-    {&__pyx_n_s_WordFixer, __pyx_k_WordFixer, sizeof(__pyx_k_WordFixer), 0, 0, 1, 1},
-    {&__pyx_n_s__10, __pyx_k__10, sizeof(__pyx_k__10), 0, 0, 1, 1},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_u_NFD, __pyx_k_NFD, sizeof(__pyx_k_NFD), 0, 1, 0, 1},
+    {&__pyx_kp_u_Not_Specified_the_language_for_t, __pyx_k_Not_Specified_the_language_for_t, sizeof(__pyx_k_Not_Specified_the_language_for_t), 0, 1, 0, 0},
+    {&__pyx_n_s_RSLPStemmer, __pyx_k_RSLPStemmer, sizeof(__pyx_k_RSLPStemmer), 0, 0, 1, 1},
+    {&__pyx_n_s_SnowballStemmer, __pyx_k_SnowballStemmer, sizeof(__pyx_k_SnowballStemmer), 0, 0, 1, 1},
+    {&__pyx_kp_u_W, __pyx_k_W, sizeof(__pyx_k_W), 0, 1, 0, 0},
+    {&__pyx_n_s_WordNetLemmatizer, __pyx_k_WordNetLemmatizer, sizeof(__pyx_k_WordNetLemmatizer), 0, 0, 1, 1},
     {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
+    {&__pyx_n_s__21, __pyx_k__21, sizeof(__pyx_k__21), 0, 0, 1, 1},
     {&__pyx_kp_u__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 1, 0, 0},
-    {&__pyx_kp_u__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 1, 0, 0},
-    {&__pyx_n_s__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 0, 1, 1},
-    {&__pyx_n_s_allSplitedText, __pyx_k_allSplitedText, sizeof(__pyx_k_allSplitedText), 0, 0, 1, 1},
-    {&__pyx_n_s_append, __pyx_k_append, sizeof(__pyx_k_append), 0, 0, 1, 1},
-    {&__pyx_n_s_arr, __pyx_k_arr, sizeof(__pyx_k_arr), 0, 0, 1, 1},
+    {&__pyx_n_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_kp_u_checking, __pyx_k_checking, sizeof(__pyx_k_checking), 0, 1, 0, 0},
+    {&__pyx_n_s_c, __pyx_k_c, sizeof(__pyx_k_c), 0, 0, 1, 1},
+    {&__pyx_n_s_class_getitem, __pyx_k_class_getitem, sizeof(__pyx_k_class_getitem), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_debug, __pyx_k_debug, sizeof(__pyx_k_debug), 0, 0, 1, 1},
-    {&__pyx_n_s_dest, __pyx_k_dest, sizeof(__pyx_k_dest), 0, 0, 1, 1},
-    {&__pyx_n_s_det, __pyx_k_det, sizeof(__pyx_k_det), 0, 0, 1, 1},
-    {&__pyx_n_s_detect, __pyx_k_detect, sizeof(__pyx_k_detect), 0, 0, 1, 1},
-    {&__pyx_n_s_detect_lang, __pyx_k_detect_lang, sizeof(__pyx_k_detect_lang), 0, 0, 1, 1},
-    {&__pyx_n_s_detect_lang_locals_lambda, __pyx_k_detect_lang_locals_lambda, sizeof(__pyx_k_detect_lang_locals_lambda), 0, 0, 1, 1},
-    {&__pyx_n_s_detected, __pyx_k_detected, sizeof(__pyx_k_detected), 0, 0, 1, 1},
-    {&__pyx_n_s_detecteds_sentences, __pyx_k_detecteds_sentences, sizeof(__pyx_k_detecteds_sentences), 0, 0, 1, 1},
-    {&__pyx_n_s_error, __pyx_k_error, sizeof(__pyx_k_error), 0, 0, 1, 1},
-    {&__pyx_kp_u_error_2, __pyx_k_error_2, sizeof(__pyx_k_error_2), 0, 1, 0, 0},
-    {&__pyx_n_s_fix_word, __pyx_k_fix_word, sizeof(__pyx_k_fix_word), 0, 0, 1, 1},
-    {&__pyx_n_s_format_exc, __pyx_k_format_exc, sizeof(__pyx_k_format_exc), 0, 0, 1, 1},
-    {&__pyx_kp_u_from_sentences, __pyx_k_from_sentences, sizeof(__pyx_k_from_sentences), 0, 1, 0, 0},
-    {&__pyx_n_s_googletrans, __pyx_k_googletrans, sizeof(__pyx_k_googletrans), 0, 0, 1, 1},
+    {&__pyx_n_s_combining, __pyx_k_combining, sizeof(__pyx_k_combining), 0, 0, 1, 1},
+    {&__pyx_n_u_en, __pyx_k_en, sizeof(__pyx_k_en), 0, 1, 0, 1},
+    {&__pyx_n_u_english, __pyx_k_english, sizeof(__pyx_k_english), 0, 1, 0, 1},
+    {&__pyx_n_u_es, __pyx_k_es, sizeof(__pyx_k_es), 0, 1, 0, 1},
+    {&__pyx_n_s_extract_sentences, __pyx_k_extract_sentences, sizeof(__pyx_k_extract_sentences), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
-    {&__pyx_n_s_info, __pyx_k_info, sizeof(__pyx_k_info), 0, 0, 1, 1},
     {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
-    {&__pyx_n_s_items, __pyx_k_items, sizeof(__pyx_k_items), 0, 0, 1, 1},
-    {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
-    {&__pyx_n_s_lang, __pyx_k_lang, sizeof(__pyx_k_lang), 0, 0, 1, 1},
-    {&__pyx_n_s_logging, __pyx_k_logging, sizeof(__pyx_k_logging), 0, 0, 1, 1},
+    {&__pyx_kp_u_it_doesn_t_have_tokens_for_text, __pyx_k_it_doesn_t_have_tokens_for_text, sizeof(__pyx_k_it_doesn_t_have_tokens_for_text), 0, 1, 0, 0},
+    {&__pyx_n_s_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 0, 1, 1},
+    {&__pyx_n_s_lemantization, __pyx_k_lemantization, sizeof(__pyx_k_lemantization), 0, 0, 1, 1},
+    {&__pyx_n_s_lower, __pyx_k_lower, sizeof(__pyx_k_lower), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
-    {&__pyx_n_s_maxCheckedTokens, __pyx_k_maxCheckedTokens, sizeof(__pyx_k_maxCheckedTokens), 0, 0, 1, 1},
+    {&__pyx_kp_u_n, __pyx_k_n, sizeof(__pyx_k_n), 0, 1, 0, 0},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_norm_text, __pyx_k_norm_text, sizeof(__pyx_k_norm_text), 0, 0, 1, 1},
+    {&__pyx_n_s_nltk_corpus, __pyx_k_nltk_corpus, sizeof(__pyx_k_nltk_corpus), 0, 0, 1, 1},
+    {&__pyx_n_s_nltk_languages, __pyx_k_nltk_languages, sizeof(__pyx_k_nltk_languages), 0, 0, 1, 1},
+    {&__pyx_n_s_nltk_stem, __pyx_k_nltk_stem, sizeof(__pyx_k_nltk_stem), 0, 0, 1, 1},
+    {&__pyx_n_s_nltk_tokenize, __pyx_k_nltk_tokenize, sizeof(__pyx_k_nltk_tokenize), 0, 0, 1, 1},
+    {&__pyx_n_s_normalize, __pyx_k_normalize, sizeof(__pyx_k_normalize), 0, 0, 1, 1},
     {&__pyx_n_s_normalize_text, __pyx_k_normalize_text, sizeof(__pyx_k_normalize_text), 0, 0, 1, 1},
-    {&__pyx_n_s_retry, __pyx_k_retry, sizeof(__pyx_k_retry), 0, 0, 1, 1},
-    {&__pyx_kp_u_retrying_Left, __pyx_k_retrying_Left, sizeof(__pyx_k_retrying_Left), 0, 1, 0, 0},
-    {&__pyx_n_s_reverse, __pyx_k_reverse, sizeof(__pyx_k_reverse), 0, 0, 1, 1},
-    {&__pyx_n_s_sentences, __pyx_k_sentences, sizeof(__pyx_k_sentences), 0, 0, 1, 1},
-    {&__pyx_n_s_service_urls, __pyx_k_service_urls, sizeof(__pyx_k_service_urls), 0, 0, 1, 1},
-    {&__pyx_n_s_sleep, __pyx_k_sleep, sizeof(__pyx_k_sleep), 0, 0, 1, 1},
-    {&__pyx_n_s_slited, __pyx_k_slited, sizeof(__pyx_k_slited), 0, 0, 1, 1},
-    {&__pyx_n_s_sorted, __pyx_k_sorted, sizeof(__pyx_k_sorted), 0, 0, 1, 1},
+    {&__pyx_n_s_normalized_text, __pyx_k_normalized_text, sizeof(__pyx_k_normalized_text), 0, 0, 1, 1},
+    {&__pyx_n_u_portuguese, __pyx_k_portuguese, sizeof(__pyx_k_portuguese), 0, 1, 0, 1},
+    {&__pyx_n_s_preprocess_text_for_lemantizatio, __pyx_k_preprocess_text_for_lemantizatio, sizeof(__pyx_k_preprocess_text_for_lemantizatio), 0, 0, 1, 1},
+    {&__pyx_n_s_preprocess_text_for_stemmetizati, __pyx_k_preprocess_text_for_stemmetizati, sizeof(__pyx_k_preprocess_text_for_stemmetizati), 0, 0, 1, 1},
+    {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
+    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
+    {&__pyx_n_s_re, __pyx_k_re, sizeof(__pyx_k_re), 0, 0, 1, 1},
+    {&__pyx_n_s_remove_accents, __pyx_k_remove_accents, sizeof(__pyx_k_remove_accents), 0, 0, 1, 1},
+    {&__pyx_n_s_remove_all_accents, __pyx_k_remove_all_accents, sizeof(__pyx_k_remove_all_accents), 0, 0, 1, 1},
+    {&__pyx_n_s_remove_alphanumeric_character, __pyx_k_remove_alphanumeric_character, sizeof(__pyx_k_remove_alphanumeric_character), 0, 0, 1, 1},
+    {&__pyx_kp_u_s, __pyx_k_s, sizeof(__pyx_k_s), 0, 1, 0, 0},
+    {&__pyx_n_s_sent_tokenize, __pyx_k_sent_tokenize, sizeof(__pyx_k_sent_tokenize), 0, 0, 1, 1},
+    {&__pyx_n_u_spanish, __pyx_k_spanish, sizeof(__pyx_k_spanish), 0, 1, 0, 1},
     {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
     {&__pyx_n_s_split, __pyx_k_split, sizeof(__pyx_k_split), 0, 0, 1, 1},
-    {&__pyx_n_s_splitedText, __pyx_k_splitedText, sizeof(__pyx_k_splitedText), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_infra_LanguageDetect, __pyx_k_src_wrapper_infra_LanguageDetect, sizeof(__pyx_k_src_wrapper_infra_LanguageDetect), 0, 0, 1, 0},
-    {&__pyx_n_s_strip, __pyx_k_strip, sizeof(__pyx_k_strip), 0, 0, 1, 1},
-    {&__pyx_n_s_t, __pyx_k_t, sizeof(__pyx_k_t), 0, 0, 1, 1},
+    {&__pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_k_src_wrapper_infra_PreProcessing, sizeof(__pyx_k_src_wrapper_infra_PreProcessing), 0, 0, 1, 0},
+    {&__pyx_n_s_stem, __pyx_k_stem, sizeof(__pyx_k_stem), 0, 0, 1, 1},
+    {&__pyx_n_s_stemmer, __pyx_k_stemmer, sizeof(__pyx_k_stemmer), 0, 0, 1, 1},
+    {&__pyx_n_s_stopwords, __pyx_k_stopwords, sizeof(__pyx_k_stopwords), 0, 0, 1, 1},
+    {&__pyx_n_s_sub, __pyx_k_sub, sizeof(__pyx_k_sub), 0, 0, 1, 1},
+    {&__pyx_n_s_supportedLanguage, __pyx_k_supportedLanguage, sizeof(__pyx_k_supportedLanguage), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
     {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
-    {&__pyx_n_s_time, __pyx_k_time, sizeof(__pyx_k_time), 0, 0, 1, 1},
-    {&__pyx_kp_u_to, __pyx_k_to, sizeof(__pyx_k_to), 0, 1, 0, 0},
-    {&__pyx_n_s_tokens, __pyx_k_tokens, sizeof(__pyx_k_tokens), 0, 0, 1, 1},
-    {&__pyx_n_s_total_tokens, __pyx_k_total_tokens, sizeof(__pyx_k_total_tokens), 0, 0, 1, 1},
-    {&__pyx_n_s_traceback, __pyx_k_traceback, sizeof(__pyx_k_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_translate, __pyx_k_translate, sizeof(__pyx_k_translate), 0, 0, 1, 1},
-    {&__pyx_kp_u_translate_google_co_kr, __pyx_k_translate_google_co_kr, sizeof(__pyx_k_translate_google_co_kr), 0, 1, 0, 0},
-    {&__pyx_kp_u_translate_google_com, __pyx_k_translate_google_com, sizeof(__pyx_k_translate_google_com), 0, 1, 0, 0},
-    {&__pyx_n_s_translate_to, __pyx_k_translate_to, sizeof(__pyx_k_translate_to), 0, 0, 1, 1},
-    {&__pyx_n_s_translated_sentences, __pyx_k_translated_sentences, sizeof(__pyx_k_translated_sentences), 0, 0, 1, 1},
-    {&__pyx_n_s_translated_text, __pyx_k_translated_text, sizeof(__pyx_k_translated_text), 0, 0, 1, 1},
-    {&__pyx_n_s_translator, __pyx_k_translator, sizeof(__pyx_k_translator), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_infra_LanguageDetector, __pyx_k_wrapper_infra_LanguageDetector, sizeof(__pyx_k_wrapper_infra_LanguageDetector), 0, 0, 1, 1},
-    {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
+    {&__pyx_n_s_unicodedata, __pyx_k_unicodedata, sizeof(__pyx_k_unicodedata), 0, 0, 1, 1},
+    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
+    {&__pyx_kp_u_w_s, __pyx_k_w_s, sizeof(__pyx_k_w_s), 0, 1, 0, 0},
+    {&__pyx_n_s_word, __pyx_k_word, sizeof(__pyx_k_word), 0, 0, 1, 1},
+    {&__pyx_n_s_word_tokenize, __pyx_k_word_tokenize, sizeof(__pyx_k_word_tokenize), 0, 0, 1, 1},
+    {&__pyx_n_s_words, __pyx_k_words, sizeof(__pyx_k_words), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_infra_PreProcessing, __pyx_k_wrapper_infra_PreProcessing, sizeof(__pyx_k_wrapper_infra_PreProcessing), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_sorted = __Pyx_GetBuiltinName(__pyx_n_s_sorted); if (!__pyx_builtin_sorted) __PYX_ERR(0, 65, __pyx_L1_error)
+  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 15, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/LanguageDetector.pyx":70
- *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
- *         logging.error("Language not detected")
- *         raise Exception("Language not detected")             # <<<<<<<<<<<<<<
- * 
- *     if translate_to and detected[0] != translate_to:
- */
-  __pyx_tuple__4 = PyTuple_Pack(1, __pyx_kp_u_Language_not_detected); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 70, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__4);
-  __Pyx_GIVEREF(__pyx_tuple__4);
-
-  /* "wrapper/infra/LanguageDetector.pyx":8
- * import logging
+  /* "wrapper/infra/PreProcessing.pyx":14
+ * }
  * 
- * def detect_lang(text, translate_to=None):             # <<<<<<<<<<<<<<
- *     translator = Translator(service_urls=[
- *       'translate.google.com',
+ * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ */
+  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_n_s_word); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__5);
+  __Pyx_GIVEREF(__pyx_tuple__5);
+  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_remove_alphanumeric_character, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 14, __pyx_L1_error)
+
+  /* "wrapper/infra/PreProcessing.pyx":17
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return stemmer.stem(word)
  */
-  __pyx_tuple__7 = PyTuple_Pack(22, __pyx_n_s_text, __pyx_n_s_translate_to, __pyx_n_s_translator, __pyx_n_s_norm_text, __pyx_n_s_sentences, __pyx_n_s_splitedText, __pyx_n_s_total_tokens, __pyx_n_s_x, __pyx_n_s_arr, __pyx_n_s_detecteds_sentences, __pyx_n_s_allSplitedText, __pyx_n_s_tokens, __pyx_n_s_maxCheckedTokens, __pyx_n_s_slited, __pyx_n_s_retry, __pyx_n_s_det, __pyx_n_s_lang, __pyx_n_s_detected, __pyx_n_s_translated_sentences, __pyx_n_s_t, __pyx_n_s_translated_text, __pyx_n_s_x); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_n_s_word, __pyx_n_s_stemmer); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__7);
   __Pyx_GIVEREF(__pyx_tuple__7);
-  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 22, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_LanguageDetect, __pyx_n_s_detect_lang, 8, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 8, __pyx_L1_error)
-  __pyx_tuple__9 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_lemantization, 17, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 17, __pyx_L1_error)
+
+  /* "wrapper/infra/PreProcessing.pyx":23
+ * # Tokenizao, remoo de stop words e lematizao
+ * # for lsi, td-idf or multiwords?
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)
+ */
+  __pyx_tuple__9 = PyTuple_Pack(6, __pyx_n_s_text, __pyx_n_s_language, __pyx_n_s_words, __pyx_n_s_stemmer, __pyx_n_s_word, __pyx_n_s_word); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__9);
   __Pyx_GIVEREF(__pyx_tuple__9);
+  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_preprocess_text_for_lemantizatio, 23, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 23, __pyx_L1_error)
+
+  /* "wrapper/infra/PreProcessing.pyx":32
+ *     return words
+ * 
+ * def remove_accents(text):             # <<<<<<<<<<<<<<
+ *     normalized_text = unicodedata.normalize('NFD', text)
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ */
+  __pyx_tuple__11 = PyTuple_Pack(3, __pyx_n_s_text, __pyx_n_s_normalized_text, __pyx_n_s_c); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__11);
+  __Pyx_GIVEREF(__pyx_tuple__11);
+  __pyx_codeobj__12 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_remove_accents, 32, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__12)) __PYX_ERR(0, 32, __pyx_L1_error)
+
+  /* "wrapper/infra/PreProcessing.pyx":36
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ * 
+ * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     if remove_all_accents:
+ */
+  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_s_text, __pyx_n_s_remove_all_accents); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__13);
+  __Pyx_GIVEREF(__pyx_tuple__13);
+  __pyx_codeobj__14 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_normalize_text, 36, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__14)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __pyx_tuple__15 = PyTuple_Pack(1, ((PyObject *)Py_True)); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__15);
+  __Pyx_GIVEREF(__pyx_tuple__15);
+
+  /* "wrapper/infra/PreProcessing.pyx":45
+ *     return text
+ * 
+ * def extract_sentences(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
+ * 
+ */
+  __pyx_tuple__16 = PyTuple_Pack(2, __pyx_n_s_text, __pyx_n_s_language); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__16);
+  __Pyx_GIVEREF(__pyx_tuple__16);
+  __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__16, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_extract_sentences, 45, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(0, 45, __pyx_L1_error)
+
+  /* "wrapper/infra/PreProcessing.pyx":48
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
+ * 
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):             # <<<<<<<<<<<<<<
+ *     text = normalize_text(text)
+ *     words = None
+ */
+  __pyx_tuple__18 = PyTuple_Pack(7, __pyx_n_s_text, __pyx_n_s_language, __pyx_n_s_words, __pyx_n_s_supportedLanguage, __pyx_n_s_stemmer, __pyx_n_s_word, __pyx_n_s_word); if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__18);
+  __Pyx_GIVEREF(__pyx_tuple__18);
+  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__18, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_preprocess_text_for_stemmetizati, 48, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_tuple__20 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__20);
+  __Pyx_GIVEREF(__pyx_tuple__20);
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
-  __pyx_umethod_PyDict_Type_items.type = (PyObject*)&PyDict_Type;
-  __pyx_umethod_PyDict_Type_items.method_name = &__pyx_n_s_items;
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
-  __pyx_float_0_5 = PyFloat_FromDouble(0.5); if (unlikely(!__pyx_float_0_5)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_4 = PyInt_FromLong(4); if (unlikely(!__pyx_int_4)) __PYX_ERR(0, 1, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -5012,31 +4980,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_LanguageDetector(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_PreProcessing(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_LanguageDetector},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_PreProcessing},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "LanguageDetector",
+      "PreProcessing",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -5076,19 +5044,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initLanguageDetector(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initLanguageDetector(void)
+__Pyx_PyMODINIT_FUNC initPreProcessing(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initPreProcessing(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void)
+__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -5161,15 +5129,15 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_LanguageDetector(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_PreProcessing(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
@@ -5179,33 +5147,33 @@
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'LanguageDetector' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'PreProcessing' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("LanguageDetector", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("PreProcessing", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to LanguageDetector pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to PreProcessing pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -5223,15 +5191,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void)", 0);
   if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -5261,22 +5229,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__infra__LanguageDetector) {
+  if (__pyx_module_is_main_wrapper__infra__PreProcessing) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.infra.LanguageDetector")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.LanguageDetector", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.infra.PreProcessing")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.PreProcessing", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -5289,156 +5257,289 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "wrapper/infra/LanguageDetector.pyx":1
- * from .PreProcessing import normalize_text             # <<<<<<<<<<<<<<
- * from googletrans import Translator
- * from .WordFixer import fix_word
+  /* "wrapper/infra/PreProcessing.pyx":1
+ * from nltk.corpus import stopwords             # <<<<<<<<<<<<<<
+ * from nltk.tokenize import word_tokenize, sent_tokenize
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_normalize_text);
-  __Pyx_GIVEREF(__pyx_n_s_normalize_text);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_normalize_text);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_PreProcessing, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_stopwords);
+  __Pyx_GIVEREF(__pyx_n_s_stopwords);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_stopwords);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_nltk_corpus, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_normalize_text, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_stopwords, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":2
- * from .PreProcessing import normalize_text
- * from googletrans import Translator             # <<<<<<<<<<<<<<
- * from .WordFixer import fix_word
- * import traceback
+  /* "wrapper/infra/PreProcessing.pyx":2
+ * from nltk.corpus import stopwords
+ * from nltk.tokenize import word_tokenize, sent_tokenize             # <<<<<<<<<<<<<<
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
+ * import re
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_Translator);
-  __Pyx_GIVEREF(__pyx_n_s_Translator);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_Translator);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_googletrans, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_word_tokenize);
+  __Pyx_GIVEREF(__pyx_n_s_word_tokenize);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_word_tokenize);
+  __Pyx_INCREF(__pyx_n_s_sent_tokenize);
+  __Pyx_GIVEREF(__pyx_n_s_sent_tokenize);
+  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_n_s_sent_tokenize);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_nltk_tokenize, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Translator); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_word_tokenize, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_sent_tokenize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Translator, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_sent_tokenize, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":3
- * from .PreProcessing import normalize_text
- * from googletrans import Translator
- * from .WordFixer import fix_word             # <<<<<<<<<<<<<<
- * import traceback
- * import time
+  /* "wrapper/infra/PreProcessing.pyx":3
+ * from nltk.corpus import stopwords
+ * from nltk.tokenize import word_tokenize, sent_tokenize
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer             # <<<<<<<<<<<<<<
+ * import re
+ * import unicodedata
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_fix_word);
-  __Pyx_GIVEREF(__pyx_n_s_fix_word);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_fix_word);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_WordFixer, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_WordNetLemmatizer);
+  __Pyx_GIVEREF(__pyx_n_s_WordNetLemmatizer);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_WordNetLemmatizer);
+  __Pyx_INCREF(__pyx_n_s_RSLPStemmer);
+  __Pyx_GIVEREF(__pyx_n_s_RSLPStemmer);
+  PyList_SET_ITEM(__pyx_t_2, 1, __pyx_n_s_RSLPStemmer);
+  __Pyx_INCREF(__pyx_n_s_SnowballStemmer);
+  __Pyx_GIVEREF(__pyx_n_s_SnowballStemmer);
+  PyList_SET_ITEM(__pyx_t_2, 2, __pyx_n_s_SnowballStemmer);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_nltk_stem, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_fix_word); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_WordNetLemmatizer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_WordNetLemmatizer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_RSLPStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_RSLPStemmer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_SnowballStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_fix_word, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SnowballStemmer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":4
- * from googletrans import Translator
- * from .WordFixer import fix_word
- * import traceback             # <<<<<<<<<<<<<<
- * import time
- * import logging
+  /* "wrapper/infra/PreProcessing.pyx":4
+ * from nltk.tokenize import word_tokenize, sent_tokenize
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
+ * import re             # <<<<<<<<<<<<<<
+ * import unicodedata
+ * from .DocLanguage import DocLanguage
  */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_traceback, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_re, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_traceback, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_re, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":5
- * from .WordFixer import fix_word
- * import traceback
- * import time             # <<<<<<<<<<<<<<
- * import logging
+  /* "wrapper/infra/PreProcessing.pyx":5
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
+ * import re
+ * import unicodedata             # <<<<<<<<<<<<<<
+ * from .DocLanguage import DocLanguage
  * 
  */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_time, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_unicodedata, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_time, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_unicodedata, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":6
- * import traceback
- * import time
- * import logging             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/PreProcessing.pyx":6
+ * import re
+ * import unicodedata
+ * from .DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
  * 
- * def detect_lang(text, translate_to=None):
+ * nltk_languages = {
  */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_logging, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_logging, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_DocLanguage, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":9
+ * 
+ * nltk_languages = {
+ *     'pt':"portuguese",             # <<<<<<<<<<<<<<
+ *     'en':"english",
+ *     'es':'spanish'
+ */
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_pt, __pyx_n_u_portuguese) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_en, __pyx_n_u_english) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_u_es, __pyx_n_u_spanish) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_nltk_languages, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":8
- * import logging
+  /* "wrapper/infra/PreProcessing.pyx":14
+ * }
  * 
- * def detect_lang(text, translate_to=None):             # <<<<<<<<<<<<<<
- *     translator = Translator(service_urls=[
- *       'translate.google.com',
+ * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_16LanguageDetector_1detect_lang, 0, __pyx_n_s_detect_lang, NULL, __pyx_n_s_wrapper_infra_LanguageDetector, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character, 0, __pyx_n_s_remove_alphanumeric_character, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_remove_alphanumeric_character, __pyx_t_2) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":17
+ *     print(word)
+ *     return re.sub(r'\W+', '', word)
+ * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
+ *     print(word)
+ *     return stemmer.stem(word)
+ */
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_3lemantization, 0, __pyx_n_s_lemantization, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_lemantization, __pyx_t_2) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":23
+ * # Tokenizao, remoo de stop words e lematizao
+ * # for lsi, td-idf or multiwords?
+ * def preprocess_text_for_lemantization(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     text = re.sub(r'[^\w\s]', '', text)
+ */
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization, 0, __pyx_n_s_preprocess_text_for_lemantizatio, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__9);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_detect_lang, __pyx_t_3) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_3, __pyx_t_2);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_preprocess_text_for_lemantizatio, __pyx_t_3) < 0) __PYX_ERR(0, 23, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/LanguageDetector.pyx":1
- * from .PreProcessing import normalize_text             # <<<<<<<<<<<<<<
- * from googletrans import Translator
- * from .WordFixer import fix_word
+  /* "wrapper/infra/PreProcessing.pyx":32
+ *     return words
+ * 
+ * def remove_accents(text):             # <<<<<<<<<<<<<<
+ *     normalized_text = unicodedata.normalize('NFD', text)
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ */
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_7remove_accents, 0, __pyx_n_s_remove_accents, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_remove_accents, __pyx_t_3) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":36
+ *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ * 
+ * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
+ *     text = text.lower()
+ *     if remove_all_accents:
+ */
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_9normalize_text, 0, __pyx_n_s_normalize_text, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__14)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__15);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_normalize_text, __pyx_t_3) < 0) __PYX_ERR(0, 36, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":45
+ *     return text
+ * 
+ * def extract_sentences(text, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
+ * 
+ */
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 45, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_11extract_sentences, 0, __pyx_n_s_extract_sentences, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_3);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_sentences, __pyx_t_2) < 0) __PYX_ERR(0, 45, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":48
+ *     return sent_tokenize(text, language=nltk_languages[language.value])
+ * 
+ * def preprocess_text_for_stemmetization(text, language:DocLanguage = None):             # <<<<<<<<<<<<<<
+ *     text = normalize_text(text)
+ *     words = None
+ */
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_13preprocess_text_for_stemmetization, 0, __pyx_n_s_preprocess_text_for_stemmetizati, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 48, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__20);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_3, __pyx_t_2);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_preprocess_text_for_stemmetizati, __pyx_t_3) < 0) __PYX_ERR(0, 48, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/PreProcessing.pyx":1
+ * from nltk.corpus import stopwords             # <<<<<<<<<<<<<<
+ * from nltk.tokenize import word_tokenize, sent_tokenize
+ * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
  */
   __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.infra.LanguageDetector", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.infra.PreProcessing", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.LanguageDetector");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.PreProcessing");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -5990,198 +6091,14 @@
     }
     PyErr_Format(PyExc_TypeError,
                  "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
                  func_name, more_or_less, num_expected,
                  (num_expected == 1) ? "" : "s", num_found);
 }
 
-/* GetItemInt */
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
-    PyObject *r;
-    if (unlikely(!j)) return NULL;
-    r = PyObject_GetItem(o, j);
-    Py_DECREF(j);
-    return r;
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyList_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
-        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyTuple_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
-        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
-                                                     CYTHON_NCP_UNUSED int wraparound,
-                                                     CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
-    if (is_list || PyList_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
-        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
-            PyObject *r = PyList_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    }
-    else if (PyTuple_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
-        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
-            PyObject *r = PyTuple_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    } else {
-        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
-        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
-        if (mm && mm->mp_subscript) {
-            PyObject *r, *key = PyInt_FromSsize_t(i);
-            if (unlikely(!key)) return NULL;
-            r = mm->mp_subscript(o, key);
-            Py_DECREF(key);
-            return r;
-        }
-        if (likely(sm && sm->sq_item)) {
-            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
-                Py_ssize_t l = sm->sq_length(o);
-                if (likely(l >= 0)) {
-                    i += l;
-                } else {
-                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                        return NULL;
-                    PyErr_Clear();
-                }
-            }
-            return sm->sq_item(o, i);
-        }
-    }
-#else
-    if (is_list || PySequence_Check(o)) {
-        return PySequence_GetItem(o, i);
-    }
-#endif
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-}
-
-/* PyDictVersioning */
-#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
-}
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
-    PyObject **dictptr = NULL;
-    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
-    if (offset) {
-#if CYTHON_COMPILING_IN_CPYTHON
-        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
-#else
-        dictptr = _PyObject_GetDictPtr(obj);
-#endif
-    }
-    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
-}
-static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
-        return 0;
-    return obj_dict_version == __Pyx_get_object_dict_version(obj);
-}
-#endif
-
-/* GetModuleGlobalName */
-#if CYTHON_USE_DICT_VERSIONS
-static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
-#else
-static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
-#endif
-{
-    PyObject *result;
-#if !CYTHON_AVOID_BORROWED_REFS
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
-    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    } else if (unlikely(PyErr_Occurred())) {
-        return NULL;
-    }
-#elif CYTHON_COMPILING_IN_LIMITED_API
-    if (unlikely(!__pyx_m)) {
-        return NULL;
-    }
-    result = PyObject_GetAttr(__pyx_m, name);
-    if (likely(result)) {
-        return result;
-    }
-#else
-    result = PyDict_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
-#endif
-#else
-    result = PyObject_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
-    PyErr_Clear();
-#endif
-    return __Pyx_GetBuiltinName(name);
-}
-
-/* PyObjectCall */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    PyObject *result;
-    ternaryfunc call = Py_TYPE(func)->tp_call;
-    if (unlikely(!call))
-        return PyObject_Call(func, arg, kw);
-    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
-        return NULL;
-    result = (*call)(func, arg, kw);
-    Py_LeaveRecursiveCall();
-    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
-        PyErr_SetString(
-            PyExc_SystemError,
-            "NULL result without error in PyObject_Call");
-    }
-    return result;
-}
-#endif
-
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -6291,14 +6208,34 @@
     Py_XDECREF(kwtuple);
 done:
     Py_LeaveRecursiveCall();
     return result;
 }
 #endif
 
+/* PyObjectCall */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
+    PyObject *result;
+    ternaryfunc call = Py_TYPE(func)->tp_call;
+    if (unlikely(!call))
+        return PyObject_Call(func, arg, kw);
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    result = (*call)(func, arg, kw);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
+    }
+    return result;
+}
+#endif
+
 /* PyObjectCallMethO */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
     PyObject *self, *result;
     PyCFunction cfunc;
     cfunc = PyCFunction_GET_FUNCTION(func);
     self = PyCFunction_GET_SELF(func);
@@ -6388,630 +6325,231 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* JoinPyUnicode */
-static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
-                                      Py_UCS4 max_char) {
-#if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    PyObject *result_uval;
-    int result_ukind, kind_shift;
-    Py_ssize_t i, char_pos;
-    void *result_udata;
-    CYTHON_MAYBE_UNUSED_VAR(max_char);
-#if CYTHON_PEP393_ENABLED
-    result_uval = PyUnicode_New(result_ulength, max_char);
-    if (unlikely(!result_uval)) return NULL;
-    result_ukind = (max_char <= 255) ? PyUnicode_1BYTE_KIND : (max_char <= 65535) ? PyUnicode_2BYTE_KIND : PyUnicode_4BYTE_KIND;
-    kind_shift = (result_ukind == PyUnicode_4BYTE_KIND) ? 2 : result_ukind - 1;
-    result_udata = PyUnicode_DATA(result_uval);
-#else
-    result_uval = PyUnicode_FromUnicode(NULL, result_ulength);
-    if (unlikely(!result_uval)) return NULL;
-    result_ukind = sizeof(Py_UNICODE);
-    kind_shift = (result_ukind == 4) ? 2 : result_ukind - 1;
-    result_udata = PyUnicode_AS_UNICODE(result_uval);
-#endif
-    assert(kind_shift == 2 || kind_shift == 1 || kind_shift == 0);
-    char_pos = 0;
-    for (i=0; i < value_count; i++) {
-        int ukind;
-        Py_ssize_t ulength;
-        void *udata;
-        PyObject *uval = PyTuple_GET_ITEM(value_tuple, i);
-        if (unlikely(__Pyx_PyUnicode_READY(uval)))
-            goto bad;
-        ulength = __Pyx_PyUnicode_GET_LENGTH(uval);
-        if (unlikely(!ulength))
-            continue;
-        if (unlikely((PY_SSIZE_T_MAX >> kind_shift) - ulength < char_pos))
-            goto overflow;
-        ukind = __Pyx_PyUnicode_KIND(uval);
-        udata = __Pyx_PyUnicode_DATA(uval);
-        if (!CYTHON_PEP393_ENABLED || ukind == result_ukind) {
-            memcpy((char *)result_udata + (char_pos << kind_shift), udata, (size_t) (ulength << kind_shift));
-        } else {
-            #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030300F0 || defined(_PyUnicode_FastCopyCharacters)
-            _PyUnicode_FastCopyCharacters(result_uval, char_pos, uval, 0, ulength);
-            #else
-            Py_ssize_t j;
-            for (j=0; j < ulength; j++) {
-                Py_UCS4 uchar = __Pyx_PyUnicode_READ(ukind, udata, j);
-                __Pyx_PyUnicode_WRITE(result_ukind, result_udata, char_pos+j, uchar);
-            }
-            #endif
-        }
-        char_pos += ulength;
-    }
-    return result_uval;
-overflow:
-    PyErr_SetString(PyExc_OverflowError, "join() result is too long for a Python string");
-bad:
-    Py_DECREF(result_uval);
-    return NULL;
-#else
-    CYTHON_UNUSED_VAR(max_char);
-    CYTHON_UNUSED_VAR(result_ulength);
-    CYTHON_UNUSED_VAR(value_count);
-    return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
-#endif
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
 
-/* GetTopmostException */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem *
-__Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
-{
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    while ((exc_info->exc_value == NULL || exc_info->exc_value == Py_None) &&
-           exc_info->previous_item != NULL)
-    {
-        exc_info = exc_info->previous_item;
-    }
-    return exc_info;
+/* PyDictVersioning */
+#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
+    PyObject **dictptr = NULL;
+    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
+    if (offset) {
+#if CYTHON_COMPILING_IN_CPYTHON
+        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
+#else
+        dictptr = _PyObject_GetDictPtr(obj);
 #endif
-
-/* SaveResetException */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    PyObject *exc_value = exc_info->exc_value;
-    if (exc_value == NULL || exc_value == Py_None) {
-        *value = NULL;
-        *type = NULL;
-        *tb = NULL;
-    } else {
-        *value = exc_value;
-        Py_INCREF(*value);
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        *tb = PyException_GetTraceback(exc_value);
     }
-  #elif CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    *type = exc_info->exc_type;
-    *value = exc_info->exc_value;
-    *tb = exc_info->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #else
-    *type = tstate->exc_type;
-    *value = tstate->exc_value;
-    *tb = tstate->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #endif
+    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
 }
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    PyObject *tmp_value = exc_info->exc_value;
-    exc_info->exc_value = value;
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(type);
-    Py_XDECREF(tb);
-  #else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    #if CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    tmp_type = exc_info->exc_type;
-    tmp_value = exc_info->exc_value;
-    tmp_tb = exc_info->exc_traceback;
-    exc_info->exc_type = type;
-    exc_info->exc_value = value;
-    exc_info->exc_traceback = tb;
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = type;
-    tstate->exc_value = value;
-    tstate->exc_traceback = tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-  #endif
+static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
+        return 0;
+    return obj_dict_version == __Pyx_get_object_dict_version(obj);
 }
 #endif
 
-/* GetException */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb)
+/* GetModuleGlobalName */
+#if CYTHON_USE_DICT_VERSIONS
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
 #else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb)
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
 #endif
 {
-    PyObject *local_type = NULL, *local_value, *local_tb = NULL;
-#if CYTHON_FAST_THREAD_STATE
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-  #if PY_VERSION_HEX >= 0x030C00A6
-    local_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    if (likely(local_value)) {
-        local_type = (PyObject*) Py_TYPE(local_value);
-        Py_INCREF(local_type);
-        local_tb = PyException_GetTraceback(local_value);
+    PyObject *result;
+#if !CYTHON_AVOID_BORROWED_REFS
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    } else if (unlikely(PyErr_Occurred())) {
+        return NULL;
+    }
+#elif CYTHON_COMPILING_IN_LIMITED_API
+    if (unlikely(!__pyx_m)) {
+        return NULL;
+    }
+    result = PyObject_GetAttr(__pyx_m, name);
+    if (likely(result)) {
+        return result;
     }
-  #else
-    local_type = tstate->curexc_type;
-    local_value = tstate->curexc_value;
-    local_tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-  #endif
 #else
-    PyErr_Fetch(&local_type, &local_value, &local_tb);
+    result = PyDict_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
 #endif
-    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
-#if CYTHON_FAST_THREAD_STATE && PY_VERSION_HEX >= 0x030C00A6
-    if (unlikely(tstate->current_exception))
-#elif CYTHON_FAST_THREAD_STATE
-    if (unlikely(tstate->curexc_type))
 #else
-    if (unlikely(PyErr_Occurred()))
-#endif
-        goto bad;
-    #if PY_MAJOR_VERSION >= 3
-    if (local_tb) {
-        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
-            goto bad;
-    }
-    #endif
-    Py_XINCREF(local_tb);
-    Py_XINCREF(local_type);
-    Py_XINCREF(local_value);
-    *type = local_type;
-    *value = local_value;
-    *tb = local_tb;
-#if CYTHON_FAST_THREAD_STATE
-    #if CYTHON_USE_EXC_INFO_STACK
-    {
-        _PyErr_StackItem *exc_info = tstate->exc_info;
-      #if PY_VERSION_HEX >= 0x030B00a4
-        tmp_value = exc_info->exc_value;
-        exc_info->exc_value = local_value;
-        tmp_type = NULL;
-        tmp_tb = NULL;
-        Py_XDECREF(local_type);
-        Py_XDECREF(local_tb);
-      #else
-        tmp_type = exc_info->exc_type;
-        tmp_value = exc_info->exc_value;
-        tmp_tb = exc_info->exc_traceback;
-        exc_info->exc_type = local_type;
-        exc_info->exc_value = local_value;
-        exc_info->exc_traceback = local_tb;
-      #endif
+    result = PyObject_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
     }
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = local_type;
-    tstate->exc_value = local_value;
-    tstate->exc_traceback = local_tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#else
-    PyErr_SetExcInfo(local_type, local_value, local_tb);
+    PyErr_Clear();
 #endif
-    return 0;
-bad:
-    *type = 0;
-    *value = 0;
-    *tb = 0;
-    Py_XDECREF(local_type);
-    Py_XDECREF(local_value);
-    Py_XDECREF(local_tb);
-    return -1;
+    return __Pyx_GetBuiltinName(name);
 }
 
-/* PyIntBinop */
-#if !CYTHON_COMPILING_IN_PYPY
-static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check) {
-    CYTHON_MAYBE_UNUSED_VAR(intval);
-    CYTHON_MAYBE_UNUSED_VAR(inplace);
-    CYTHON_UNUSED_VAR(zerodivision_check);
-    #if PY_MAJOR_VERSION < 3
-    if (likely(PyInt_CheckExact(op1))) {
-        const long b = intval;
-        long x;
-        long a = PyInt_AS_LONG(op1);
-        
-            x = (long)((unsigned long)a - (unsigned long)b);
-            if (likely((x^a) >= 0 || (x^~b) >= 0))
-                return PyInt_FromLong(x);
-            return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
+/* GetItemInt */
+static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
+    PyObject *r;
+    if (unlikely(!j)) return NULL;
+    r = PyObject_GetItem(o, j);
+    Py_DECREF(j);
+    return r;
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyList_GET_SIZE(o);
     }
-    #endif
-    #if CYTHON_USE_PYLONG_INTERNALS
-    if (likely(PyLong_CheckExact(op1))) {
-        const long b = intval;
-        long a, x;
-#ifdef HAVE_LONG_LONG
-        const PY_LONG_LONG llb = intval;
-        PY_LONG_LONG lla, llx;
-#endif
-        if (unlikely(__Pyx_PyLong_IsZero(op1))) {
-            return PyLong_FromLong(-intval);
-        }
-        if (likely(__Pyx_PyLong_IsCompact(op1))) {
-            a = __Pyx_PyLong_CompactValue(op1);
-        } else {
-            const digit* digits = __Pyx_PyLong_Digits(op1);
-            const Py_ssize_t size = __Pyx_PyLong_SignedDigitCount(op1);
-            switch (size) {
-                case -2:
-                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
-                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
-                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 2:
-                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
-                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
-                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                case -3:
-                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
-                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
-                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 3:
-                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
-                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
-                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                case -4:
-                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
-                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
-                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 4:
-                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
-                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    #ifdef HAVE_LONG_LONG
-                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
-                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
-                        goto long_long;
-                    #endif
-                    }
-                    CYTHON_FALLTHROUGH;
-                default: return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
-            }
-        }
-                x = a - b;
-            return PyLong_FromLong(x);
-#ifdef HAVE_LONG_LONG
-        long_long:
-                llx = lla - llb;
-            return PyLong_FromLongLong(llx);
-#endif
-        
-        
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
+        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
     }
-    #endif
-    if (PyFloat_CheckExact(op1)) {
-        const long b = intval;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        double a = __pyx_PyFloat_AsDouble(op1);
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
 #else
-        double a = PyFloat_AS_DOUBLE(op1);
+    return PySequence_GetItem(o, i);
 #endif
-            double result;
-            
-            PyFPE_START_PROTECT("subtract", return NULL)
-            result = ((double)a) - (double)b;
-            PyFPE_END_PROTECT(result)
-            return PyFloat_FromDouble(result);
-    }
-    return (inplace ? PyNumber_InPlaceSubtract : PyNumber_Subtract)(op1, op2);
 }
-#endif
-
-/* PyIntCompare */
-static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace) {
-    CYTHON_MAYBE_UNUSED_VAR(intval);
-    CYTHON_UNUSED_VAR(inplace);
-    if (op1 == op2) {
-        return 1;
-    }
-    #if PY_MAJOR_VERSION < 3
-    if (likely(PyInt_CheckExact(op1))) {
-        const long b = intval;
-        long a = PyInt_AS_LONG(op1);
-        return (a == b);
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyTuple_GET_SIZE(o);
     }
-    #endif
-    #if CYTHON_USE_PYLONG_INTERNALS
-    if (likely(PyLong_CheckExact(op1))) {
-        int unequal;
-        unsigned long uintval;
-        Py_ssize_t size = __Pyx_PyLong_DigitCount(op1);
-        const digit* digits = __Pyx_PyLong_Digits(op1);
-        if (intval == 0) {
-            return (__Pyx_PyLong_IsZero(op1) == 1);
-        } else if (intval < 0) {
-            if (__Pyx_PyLong_IsNonNeg(op1))
-                return 0;
-            intval = -intval;
-        } else {
-            if (__Pyx_PyLong_IsNeg(op1))
-                return 0;
-        }
-        uintval = (unsigned long) intval;
-#if PyLong_SHIFT * 4 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 4)) {
-            unequal = (size != 5) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[4] != ((uintval >> (4 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 3 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 3)) {
-            unequal = (size != 4) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 2 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 2)) {
-            unequal = (size != 3) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-#if PyLong_SHIFT * 1 < SIZEOF_LONG*8
-        if (uintval >> (PyLong_SHIFT * 1)) {
-            unequal = (size != 2) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
-                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
-        } else
-#endif
-            unequal = (size != 1) || (((unsigned long) digits[0]) != (uintval & (unsigned long) PyLong_MASK));
-        return (unequal == 0);
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
+        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
     }
-    #endif
-    if (PyFloat_CheckExact(op1)) {
-        const long b = intval;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        double a = __pyx_PyFloat_AsDouble(op1);
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
 #else
-        double a = PyFloat_AS_DOUBLE(op1);
+    return PySequence_GetItem(o, i);
 #endif
-        return ((double)a == (double)b);
-    }
-    return __Pyx_PyObject_IsTrueAndDecref(
-        PyObject_RichCompare(op1, op2, Py_EQ));
 }
-
-/* DictGetItem */
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
-    PyObject *value;
-    value = PyDict_GetItemWithError(d, key);
-    if (unlikely(!value)) {
-        if (!PyErr_Occurred()) {
-            if (unlikely(PyTuple_Check(key))) {
-                PyObject* args = PyTuple_Pack(1, key);
-                if (likely(args)) {
-                    PyErr_SetObject(PyExc_KeyError, args);
-                    Py_DECREF(args);
-                }
-            } else {
-                PyErr_SetObject(PyExc_KeyError, key);
-            }
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
+                                                     CYTHON_NCP_UNUSED int wraparound,
+                                                     CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
+    if (is_list || PyList_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
+        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
+            PyObject *r = PyList_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
         }
-        return NULL;
-    }
-    Py_INCREF(value);
-    return value;
-}
-#endif
-
-/* PyObjectCall2Args */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
-    PyObject *args[3] = {NULL, arg1, arg2};
-    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* PyObjectGetMethod */
-static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
-    PyObject *attr;
-#if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
-    __Pyx_TypeName type_name;
-    PyTypeObject *tp = Py_TYPE(obj);
-    PyObject *descr;
-    descrgetfunc f = NULL;
-    PyObject **dictptr, *dict;
-    int meth_found = 0;
-    assert (*method == NULL);
-    if (unlikely(tp->tp_getattro != PyObject_GenericGetAttr)) {
-        attr = __Pyx_PyObject_GetAttrStr(obj, name);
-        goto try_unpack;
-    }
-    if (unlikely(tp->tp_dict == NULL) && unlikely(PyType_Ready(tp) < 0)) {
-        return 0;
     }
-    descr = _PyType_Lookup(tp, name);
-    if (likely(descr != NULL)) {
-        Py_INCREF(descr);
-#if defined(Py_TPFLAGS_METHOD_DESCRIPTOR) && Py_TPFLAGS_METHOD_DESCRIPTOR
-        if (__Pyx_PyType_HasFeature(Py_TYPE(descr), Py_TPFLAGS_METHOD_DESCRIPTOR))
-#elif PY_MAJOR_VERSION >= 3
-        #ifdef __Pyx_CyFunction_USED
-        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type) || __Pyx_CyFunction_Check(descr)))
-        #else
-        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type)))
-        #endif
-#else
-        #ifdef __Pyx_CyFunction_USED
-        if (likely(PyFunction_Check(descr) || __Pyx_CyFunction_Check(descr)))
-        #else
-        if (likely(PyFunction_Check(descr)))
-        #endif
-#endif
-        {
-            meth_found = 1;
-        } else {
-            f = Py_TYPE(descr)->tp_descr_get;
-            if (f != NULL && PyDescr_IsData(descr)) {
-                attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
-                Py_DECREF(descr);
-                goto try_unpack;
+    else if (PyTuple_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
+        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
+            PyObject *r = PyTuple_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
+        }
+    } else {
+        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
+        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
+        if (mm && mm->mp_subscript) {
+            PyObject *r, *key = PyInt_FromSsize_t(i);
+            if (unlikely(!key)) return NULL;
+            r = mm->mp_subscript(o, key);
+            Py_DECREF(key);
+            return r;
+        }
+        if (likely(sm && sm->sq_item)) {
+            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
+                Py_ssize_t l = sm->sq_length(o);
+                if (likely(l >= 0)) {
+                    i += l;
+                } else {
+                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
+                        return NULL;
+                    PyErr_Clear();
+                }
             }
+            return sm->sq_item(o, i);
         }
     }
-    dictptr = _PyObject_GetDictPtr(obj);
-    if (dictptr != NULL && (dict = *dictptr) != NULL) {
-        Py_INCREF(dict);
-        attr = __Pyx_PyDict_GetItemStr(dict, name);
-        if (attr != NULL) {
-            Py_INCREF(attr);
-            Py_DECREF(dict);
-            Py_XDECREF(descr);
-            goto try_unpack;
-        }
-        Py_DECREF(dict);
-    }
-    if (meth_found) {
-        *method = descr;
-        return 1;
-    }
-    if (f != NULL) {
-        attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
-        Py_DECREF(descr);
-        goto try_unpack;
-    }
-    if (likely(descr != NULL)) {
-        *method = descr;
-        return 0;
-    }
-    type_name = __Pyx_PyType_GetName(tp);
-    PyErr_Format(PyExc_AttributeError,
-#if PY_MAJOR_VERSION >= 3
-                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%U'",
-                 type_name, name);
 #else
-                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%.400s'",
-                 type_name, PyString_AS_STRING(name));
-#endif
-    __Pyx_DECREF_TypeName(type_name);
-    return 0;
-#else
-    attr = __Pyx_PyObject_GetAttrStr(obj, name);
-    goto try_unpack;
-#endif
-try_unpack:
-#if CYTHON_UNPACK_METHODS
-    if (likely(attr) && PyMethod_Check(attr) && likely(PyMethod_GET_SELF(attr) == obj)) {
-        PyObject *function = PyMethod_GET_FUNCTION(attr);
-        Py_INCREF(function);
-        Py_DECREF(attr);
-        *method = function;
-        return 1;
+    if (is_list || PySequence_Check(o)) {
+        return PySequence_GetItem(o, i);
     }
 #endif
-    *method = attr;
-    return 0;
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
 }
 
-/* PyObjectCallMethod1 */
-static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
-    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
-    Py_DECREF(method);
-    return result;
+/* ObjectGetItem */
+#if CYTHON_USE_TYPE_SLOTS
+static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject *index) {
+    PyObject *runerr = NULL;
+    Py_ssize_t key_value;
+    key_value = __Pyx_PyIndex_AsSsize_t(index);
+    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {
+        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);
+    }
+    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {
+        __Pyx_TypeName index_type_name = __Pyx_PyType_GetName(Py_TYPE(index));
+        PyErr_Clear();
+        PyErr_Format(PyExc_IndexError,
+            "cannot fit '" __Pyx_FMT_TYPENAME "' into an index-sized integer", index_type_name);
+        __Pyx_DECREF_TypeName(index_type_name);
+    }
+    return NULL;
 }
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
-    PyObject *method = NULL, *result;
-    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
-    if (likely(is_method)) {
-        result = __Pyx_PyObject_Call2Args(method, obj, arg);
-        Py_DECREF(method);
-        return result;
+static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject *key) {
+    __Pyx_TypeName obj_type_name;
+    if (likely(PyType_Check(obj))) {
+        PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(obj, __pyx_n_s_class_getitem);
+        if (meth) {
+            PyObject *result = __Pyx_PyObject_CallOneArg(meth, key);
+            Py_DECREF(meth);
+            return result;
+        }
     }
-    if (unlikely(!method)) return NULL;
-    return __Pyx__PyObject_CallMethod1(method, arg);
+    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+    PyErr_Format(PyExc_TypeError,
+        "'" __Pyx_FMT_TYPENAME "' object is not subscriptable", obj_type_name);
+    __Pyx_DECREF_TypeName(obj_type_name);
+    return NULL;
 }
-
-/* append */
-static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
-    if (likely(PyList_CheckExact(L))) {
-        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
-    } else {
-        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
-        if (unlikely(!retval))
-            return -1;
-        Py_DECREF(retval);
+static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key) {
+    PyTypeObject *tp = Py_TYPE(obj);
+    PyMappingMethods *mm = tp->tp_as_mapping;
+    PySequenceMethods *sm = tp->tp_as_sequence;
+    if (likely(mm && mm->mp_subscript)) {
+        return mm->mp_subscript(obj, key);
     }
-    return 0;
+    if (likely(sm && sm->sq_item)) {
+        return __Pyx_PyObject_GetIndex(obj, key);
+    }
+    return __Pyx_PyObject_GetItem_Slow(obj, key);
 }
+#endif
 
 /* RaiseException */
 #if PY_MAJOR_VERSION < 3
 static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
     __Pyx_PyThreadState_declare
     CYTHON_UNUSED_VAR(cause);
     Py_XINCREF(type);
@@ -7166,102 +6704,251 @@
     }
 bad:
     Py_XDECREF(owned_instance);
     return;
 }
 #endif
 
-/* UnpackUnboundCMethod */
-static PyObject *__Pyx_SelflessCall(PyObject *method, PyObject *args, PyObject *kwargs) {
-    PyObject *selfless_args = PyTuple_GetSlice(args, 1, PyTuple_Size(args));
-    if (unlikely(!selfless_args)) return NULL;
-    PyObject *result = PyObject_Call(method, selfless_args, kwargs);
-    Py_DECREF(selfless_args);
-    return result;
-}
-static PyMethodDef __Pyx_UnboundCMethod_Def = {
-     "CythonUnboundCMethod",
-     __PYX_REINTERPRET_FUNCION(PyCFunction, __Pyx_SelflessCall),
-     METH_VARARGS | METH_KEYWORDS,
-     NULL
-};
-static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
-    PyObject *method;
-    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
-    if (unlikely(!method))
-        return -1;
-    target->method = method;
-#if CYTHON_COMPILING_IN_CPYTHON
-    #if PY_MAJOR_VERSION >= 3
-    if (likely(__Pyx_TypeCheck(method, &PyMethodDescr_Type)))
-    #else
-    if (likely(!PyCFunction_Check(method)))
+/* Import */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
+    PyObject *module = 0;
+    PyObject *empty_dict = 0;
+    PyObject *empty_list = 0;
+    #if PY_MAJOR_VERSION < 3
+    PyObject *py_import;
+    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
+    if (unlikely(!py_import))
+        goto bad;
+    if (!from_list) {
+        empty_list = PyList_New(0);
+        if (unlikely(!empty_list))
+            goto bad;
+        from_list = empty_list;
+    }
     #endif
+    empty_dict = PyDict_New();
+    if (unlikely(!empty_dict))
+        goto bad;
     {
-        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
-        target->func = descr->d_method->ml_meth;
-        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_STACKLESS);
-    } else
+        #if PY_MAJOR_VERSION >= 3
+        if (level == -1) {
+            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
+                #if CYTHON_COMPILING_IN_LIMITED_API
+                module = PyImport_ImportModuleLevelObject(
+                    name, empty_dict, empty_dict, from_list, 1);
+                #else
+                module = PyImport_ImportModuleLevelObject(
+                    name, __pyx_d, empty_dict, from_list, 1);
+                #endif
+                if (unlikely(!module)) {
+                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
+                        goto bad;
+                    PyErr_Clear();
+                }
+            }
+            level = 0;
+        }
+        #endif
+        if (!module) {
+            #if PY_MAJOR_VERSION < 3
+            PyObject *py_level = PyInt_FromLong(level);
+            if (unlikely(!py_level))
+                goto bad;
+            module = PyObject_CallFunctionObjArgs(py_import,
+                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
+            Py_DECREF(py_level);
+            #else
+            #if CYTHON_COMPILING_IN_LIMITED_API
+            module = PyImport_ImportModuleLevelObject(
+                name, empty_dict, empty_dict, from_list, level);
+            #else
+            module = PyImport_ImportModuleLevelObject(
+                name, __pyx_d, empty_dict, from_list, level);
+            #endif
+            #endif
+        }
+    }
+bad:
+    Py_XDECREF(empty_dict);
+    Py_XDECREF(empty_list);
+    #if PY_MAJOR_VERSION < 3
+    Py_XDECREF(py_import);
+    #endif
+    return module;
+}
+
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__3);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
+/* ImportDottedModule */
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
+    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
+    if (unlikely(PyErr_Occurred())) {
+        PyErr_Clear();
+    }
+    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
+        partial_name = name;
+    } else {
+        slice = PySequence_GetSlice(parts_tuple, 0, count);
+        if (unlikely(!slice))
+            goto bad;
+        sep = PyUnicode_FromStringAndSize(".", 1);
+        if (unlikely(!sep))
+            goto bad;
+        partial_name = PyUnicode_Join(sep, slice);
+    }
+    PyErr_Format(
+#if PY_MAJOR_VERSION < 3
+        PyExc_ImportError,
+        "No module named '%s'", PyString_AS_STRING(partial_name));
+#else
+#if PY_VERSION_HEX >= 0x030600B1
+        PyExc_ModuleNotFoundError,
+#else
+        PyExc_ImportError,
+#endif
+        "No module named '%U'", partial_name);
 #endif
-#if defined(CYTHON_COMPILING_IN_PYPY)
-#elif PY_VERSION_HEX >= 0x03090000
-    if (PyCFunction_CheckExact(method))
+bad:
+    Py_XDECREF(sep);
+    Py_XDECREF(slice);
+    Py_XDECREF(partial_name);
+    return NULL;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
+    PyObject *imported_module;
+#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+    PyObject *modules = PyImport_GetModuleDict();
+    if (unlikely(!modules))
+        return NULL;
+    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
+    Py_XINCREF(imported_module);
 #else
-    if (PyCFunction_Check(method))
+    imported_module = PyImport_GetModule(name);
 #endif
-    {
-        PyObject *self;
-        int self_found;
-#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
-        self = PyObject_GetAttrString(method, "__self__");
-        if (!self) {
-            PyErr_Clear();
-        }
+    return imported_module;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
+    Py_ssize_t i, nparts;
+    nparts = PyTuple_GET_SIZE(parts_tuple);
+    for (i=1; i < nparts && module; i++) {
+        PyObject *part, *submodule;
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        part = PyTuple_GET_ITEM(parts_tuple, i);
 #else
-        self = PyCFunction_GET_SELF(method);
+        part = PySequence_ITEM(parts_tuple, i);
 #endif
-        self_found = (self && self != Py_None);
-#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
-        Py_XDECREF(self);
-#endif
-        if (self_found) {
-            PyObject *unbound_method = PyCFunction_New(&__Pyx_UnboundCMethod_Def, method);
-            if (unlikely(!unbound_method)) return -1;
-            Py_DECREF(method);
-            target->method = unbound_method;
-        }
+        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
+#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
+        Py_DECREF(part);
+#endif
+        Py_DECREF(module);
+        module = submodule;
     }
-    return 0;
+    if (unlikely(!module)) {
+        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
+    }
+    return module;
 }
-
-/* CallUnboundCMethod0 */
-static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self) {
-    PyObject *args, *result = NULL;
-    if (unlikely(!cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
-#if CYTHON_ASSUME_SAFE_MACROS
-    args = PyTuple_New(1);
-    if (unlikely(!args)) goto bad;
-    Py_INCREF(self);
-    PyTuple_SET_ITEM(args, 0, self);
+#endif
+static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if PY_MAJOR_VERSION < 3
+    PyObject *module, *from_list, *star = __pyx_n_s__4;
+    CYTHON_UNUSED_VAR(parts_tuple);
+    from_list = PyList_New(1);
+    if (unlikely(!from_list))
+        return NULL;
+    Py_INCREF(star);
+    PyList_SET_ITEM(from_list, 0, star);
+    module = __Pyx_Import(name, from_list, 0);
+    Py_DECREF(from_list);
+    return module;
 #else
-    args = PyTuple_Pack(1, self);
-    if (unlikely(!args)) goto bad;
+    PyObject *imported_module;
+    PyObject *module = __Pyx_Import(name, NULL, 0);
+    if (!parts_tuple || unlikely(!module))
+        return module;
+    imported_module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(imported_module)) {
+        Py_DECREF(module);
+        return imported_module;
+    }
+    PyErr_Clear();
+    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
 #endif
-    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
-    Py_DECREF(args);
-bad:
-    return result;
 }
-
-/* py_dict_items */
-static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d) {
-    if (PY_MAJOR_VERSION >= 3)
-        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_items, d);
-    else
-        return PyDict_Items(d);
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
+    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(module)) {
+        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
+        if (likely(spec)) {
+            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
+            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
+                Py_DECREF(spec);
+                spec = NULL;
+            }
+            Py_XDECREF(unsafe);
+        }
+        if (likely(!spec)) {
+            PyErr_Clear();
+            return module;
+        }
+        Py_DECREF(spec);
+        Py_DECREF(module);
+    } else if (PyErr_Occurred()) {
+        PyErr_Clear();
+    }
+#endif
+    return __Pyx__ImportDottedModule(name, parts_tuple);
 }
 
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
@@ -8378,260 +8065,14 @@
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
-/* PyUnicode_Unicode */
-static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj) {
-    if (unlikely(obj == Py_None))
-        obj = __pyx_kp_u_None;
-    return __Pyx_NewRef(obj);
-}
-
-/* Import */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
-    PyObject *module = 0;
-    PyObject *empty_dict = 0;
-    PyObject *empty_list = 0;
-    #if PY_MAJOR_VERSION < 3
-    PyObject *py_import;
-    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
-    if (unlikely(!py_import))
-        goto bad;
-    if (!from_list) {
-        empty_list = PyList_New(0);
-        if (unlikely(!empty_list))
-            goto bad;
-        from_list = empty_list;
-    }
-    #endif
-    empty_dict = PyDict_New();
-    if (unlikely(!empty_dict))
-        goto bad;
-    {
-        #if PY_MAJOR_VERSION >= 3
-        if (level == -1) {
-            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
-                #if CYTHON_COMPILING_IN_LIMITED_API
-                module = PyImport_ImportModuleLevelObject(
-                    name, empty_dict, empty_dict, from_list, 1);
-                #else
-                module = PyImport_ImportModuleLevelObject(
-                    name, __pyx_d, empty_dict, from_list, 1);
-                #endif
-                if (unlikely(!module)) {
-                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
-                        goto bad;
-                    PyErr_Clear();
-                }
-            }
-            level = 0;
-        }
-        #endif
-        if (!module) {
-            #if PY_MAJOR_VERSION < 3
-            PyObject *py_level = PyInt_FromLong(level);
-            if (unlikely(!py_level))
-                goto bad;
-            module = PyObject_CallFunctionObjArgs(py_import,
-                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
-            Py_DECREF(py_level);
-            #else
-            #if CYTHON_COMPILING_IN_LIMITED_API
-            module = PyImport_ImportModuleLevelObject(
-                name, empty_dict, empty_dict, from_list, level);
-            #else
-            module = PyImport_ImportModuleLevelObject(
-                name, __pyx_d, empty_dict, from_list, level);
-            #endif
-            #endif
-        }
-    }
-bad:
-    Py_XDECREF(empty_dict);
-    Py_XDECREF(empty_list);
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(py_import);
-    #endif
-    return module;
-}
-
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__2);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
-        }
-        #else
-        value = PyImport_GetModule(full_name);
-        #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
-    }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
-        #else
-            "cannot import name %S", name);
-        #endif
-    }
-    return value;
-}
-
-/* ImportDottedModule */
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
-    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
-    if (unlikely(PyErr_Occurred())) {
-        PyErr_Clear();
-    }
-    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
-        partial_name = name;
-    } else {
-        slice = PySequence_GetSlice(parts_tuple, 0, count);
-        if (unlikely(!slice))
-            goto bad;
-        sep = PyUnicode_FromStringAndSize(".", 1);
-        if (unlikely(!sep))
-            goto bad;
-        partial_name = PyUnicode_Join(sep, slice);
-    }
-    PyErr_Format(
-#if PY_MAJOR_VERSION < 3
-        PyExc_ImportError,
-        "No module named '%s'", PyString_AS_STRING(partial_name));
-#else
-#if PY_VERSION_HEX >= 0x030600B1
-        PyExc_ModuleNotFoundError,
-#else
-        PyExc_ImportError,
-#endif
-        "No module named '%U'", partial_name);
-#endif
-bad:
-    Py_XDECREF(sep);
-    Py_XDECREF(slice);
-    Py_XDECREF(partial_name);
-    return NULL;
-}
-#endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
-    PyObject *imported_module;
-#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-    PyObject *modules = PyImport_GetModuleDict();
-    if (unlikely(!modules))
-        return NULL;
-    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
-    Py_XINCREF(imported_module);
-#else
-    imported_module = PyImport_GetModule(name);
-#endif
-    return imported_module;
-}
-#endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
-    Py_ssize_t i, nparts;
-    nparts = PyTuple_GET_SIZE(parts_tuple);
-    for (i=1; i < nparts && module; i++) {
-        PyObject *part, *submodule;
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        part = PyTuple_GET_ITEM(parts_tuple, i);
-#else
-        part = PySequence_ITEM(parts_tuple, i);
-#endif
-        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
-#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
-        Py_DECREF(part);
-#endif
-        Py_DECREF(module);
-        module = submodule;
-    }
-    if (unlikely(!module)) {
-        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
-    }
-    return module;
-}
-#endif
-static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if PY_MAJOR_VERSION < 3
-    PyObject *module, *from_list, *star = __pyx_n_s__6;
-    CYTHON_UNUSED_VAR(parts_tuple);
-    from_list = PyList_New(1);
-    if (unlikely(!from_list))
-        return NULL;
-    Py_INCREF(star);
-    PyList_SET_ITEM(from_list, 0, star);
-    module = __Pyx_Import(name, from_list, 0);
-    Py_DECREF(from_list);
-    return module;
-#else
-    PyObject *imported_module;
-    PyObject *module = __Pyx_Import(name, NULL, 0);
-    if (!parts_tuple || unlikely(!module))
-        return module;
-    imported_module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(imported_module)) {
-        Py_DECREF(module);
-        return imported_module;
-    }
-    PyErr_Clear();
-    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
-#endif
-}
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
-    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(module)) {
-        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
-        if (likely(spec)) {
-            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
-            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
-                Py_DECREF(spec);
-                spec = NULL;
-            }
-            Py_XDECREF(unsafe);
-        }
-        if (likely(!spec)) {
-            PyErr_Clear();
-            return module;
-        }
-        Py_DECREF(spec);
-        Py_DECREF(module);
-    } else if (PyErr_Occurred()) {
-        PyErr_Clear();
-    }
-#endif
-    return __Pyx__ImportDottedModule(name, parts_tuple);
-}
-
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
     PyObject **cython_runtime_dict;
@@ -8868,14 +8309,29 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__21));
+    }
+    return name;
+}
+#endif
+
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -8906,29 +8362,14 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__10));
-    }
-    return name;
-}
-#endif
-
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
```

### Comparing `docrx-0.0.11/src/wrapper/infra/NERExtractor.c` & `docrx-0.0.110/src/wrapper/infra/NERExtractor.c`

 * *Files 2% similar despite different names*

```diff
@@ -2152,16 +2152,16 @@
 #define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
 /* #### Code section: module_code ### */
 
 /* "wrapper/infra/NERExtractor.pyx":3
  * import spacy
  * 
  * def extract_named_entities(text):             # <<<<<<<<<<<<<<
- *     # Usar o modelo pr-treinado do SpaCy para realizar Named Entity Recognition em portugus
- *     # nlp = spacy.load('pt_core_news_sm')
+ *     # Named Entity Recognition (portuguese...)
+ *     nlp = spacy.load('xx_ent_wiki_sm')
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_5infra_12NERExtractor_1extract_named_entities(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -2248,24 +2248,24 @@
   PyObject *__pyx_t_7 = NULL;
   PyObject *__pyx_t_8 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("extract_named_entities", 0);
 
-  /* "wrapper/infra/NERExtractor.pyx":6
- *     # Usar o modelo pr-treinado do SpaCy para realizar Named Entity Recognition em portugus
- *     # nlp = spacy.load('pt_core_news_sm')
+  /* "wrapper/infra/NERExtractor.pyx":5
+ * def extract_named_entities(text):
+ *     # Named Entity Recognition (portuguese...)
  *     nlp = spacy.load('xx_ent_wiki_sm')             # <<<<<<<<<<<<<<
  *     doc = nlp(text)
  *     named_entities = [(ent.text, ent.label_) for ent in doc.ents]
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_spacy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_spacy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_load); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_load); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -2276,23 +2276,23 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_xx_ent_wiki_sm};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v_nlp = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/infra/NERExtractor.pyx":7
- *     # nlp = spacy.load('pt_core_news_sm')
+  /* "wrapper/infra/NERExtractor.pyx":6
+ *     # Named Entity Recognition (portuguese...)
  *     nlp = spacy.load('xx_ent_wiki_sm')
  *     doc = nlp(text)             # <<<<<<<<<<<<<<
  *     named_entities = [(ent.text, ent.label_) for ent in doc.ents]
  *     return named_entities
  */
   __Pyx_INCREF(__pyx_v_nlp);
   __pyx_t_3 = __pyx_v_nlp; __pyx_t_2 = NULL;
@@ -2307,116 +2307,116 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_text};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v_doc = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/infra/NERExtractor.pyx":8
+  /* "wrapper/infra/NERExtractor.pyx":7
  *     nlp = spacy.load('xx_ent_wiki_sm')
  *     doc = nlp(text)
  *     named_entities = [(ent.text, ent.label_) for ent in doc.ents]             # <<<<<<<<<<<<<<
  *     return named_entities
  */
   { /* enter inner scope */
-    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 8, __pyx_L5_error)
+    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L5_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_ents); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L5_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_ents); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L5_error)
     __Pyx_GOTREF(__pyx_t_3);
     if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
       __pyx_t_2 = __pyx_t_3; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
       __pyx_t_6 = NULL;
     } else {
-      __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L5_error)
+      __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L5_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 8, __pyx_L5_error)
+      __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 7, __pyx_L5_error)
     }
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     for (;;) {
       if (likely(!__pyx_t_6)) {
         if (likely(PyList_CheckExact(__pyx_t_2))) {
           if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
           #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 8, __pyx_L5_error)
+          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 7, __pyx_L5_error)
           #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L5_error)
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L5_error)
           __Pyx_GOTREF(__pyx_t_3);
           #endif
         } else {
           if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
           #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 8, __pyx_L5_error)
+          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 7, __pyx_L5_error)
           #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L5_error)
+          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L5_error)
           __Pyx_GOTREF(__pyx_t_3);
           #endif
         }
       } else {
         __pyx_t_3 = __pyx_t_6(__pyx_t_2);
         if (unlikely(!__pyx_t_3)) {
           PyObject* exc_type = PyErr_Occurred();
           if (exc_type) {
             if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 8, __pyx_L5_error)
+            else __PYX_ERR(0, 7, __pyx_L5_error)
           }
           break;
         }
         __Pyx_GOTREF(__pyx_t_3);
       }
       __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_ent, __pyx_t_3);
       __pyx_t_3 = 0;
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_ent, __pyx_n_s_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L5_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_ent, __pyx_n_s_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L5_error)
       __Pyx_GOTREF(__pyx_t_3);
-      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_ent, __pyx_n_s_label); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 8, __pyx_L5_error)
+      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_ent, __pyx_n_s_label); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 7, __pyx_L5_error)
       __Pyx_GOTREF(__pyx_t_7);
-      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 8, __pyx_L5_error)
+      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 7, __pyx_L5_error)
       __Pyx_GOTREF(__pyx_t_8);
       __Pyx_GIVEREF(__pyx_t_3);
       PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3);
       __Pyx_GIVEREF(__pyx_t_7);
       PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_t_7);
       __pyx_t_3 = 0;
       __pyx_t_7 = 0;
-      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 8, __pyx_L5_error)
+      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 7, __pyx_L5_error)
       __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
     }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __Pyx_XDECREF(__pyx_7genexpr__pyx_v_ent); __pyx_7genexpr__pyx_v_ent = 0;
     goto __pyx_L9_exit_scope;
     __pyx_L5_error:;
     __Pyx_XDECREF(__pyx_7genexpr__pyx_v_ent); __pyx_7genexpr__pyx_v_ent = 0;
     goto __pyx_L1_error;
     __pyx_L9_exit_scope:;
   } /* exit inner scope */
   __pyx_v_named_entities = ((PyObject*)__pyx_t_1);
   __pyx_t_1 = 0;
 
-  /* "wrapper/infra/NERExtractor.pyx":9
+  /* "wrapper/infra/NERExtractor.pyx":8
  *     doc = nlp(text)
  *     named_entities = [(ent.text, ent.label_) for ent in doc.ents]
  *     return named_entities             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_named_entities);
   __pyx_r = __pyx_v_named_entities;
   goto __pyx_L0;
 
   /* "wrapper/infra/NERExtractor.pyx":3
  * import spacy
  * 
  * def extract_named_entities(text):             # <<<<<<<<<<<<<<
- *     # Usar o modelo pr-treinado do SpaCy para realizar Named Entity Recognition em portugus
- *     # nlp = spacy.load('pt_core_news_sm')
+ *     # Named Entity Recognition (portuguese...)
+ *     nlp = spacy.load('xx_ent_wiki_sm')
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
@@ -2488,16 +2488,16 @@
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
   /* "wrapper/infra/NERExtractor.pyx":3
  * import spacy
  * 
  * def extract_named_entities(text):             # <<<<<<<<<<<<<<
- *     # Usar o modelo pr-treinado do SpaCy para realizar Named Entity Recognition em portugus
- *     # nlp = spacy.load('pt_core_news_sm')
+ *     # Named Entity Recognition (portuguese...)
+ *     nlp = spacy.load('xx_ent_wiki_sm')
  */
   __pyx_tuple__2 = PyTuple_Pack(5, __pyx_n_s_text, __pyx_n_s_nlp, __pyx_n_s_doc, __pyx_n_s_named_entities, __pyx_n_s_ent); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
   __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_NERExtractor_p, __pyx_n_s_extract_named_entities, 3, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
@@ -2874,16 +2874,16 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_spacy, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/infra/NERExtractor.pyx":3
  * import spacy
  * 
  * def extract_named_entities(text):             # <<<<<<<<<<<<<<
- *     # Usar o modelo pr-treinado do SpaCy para realizar Named Entity Recognition em portugus
- *     # nlp = spacy.load('pt_core_news_sm')
+ *     # Named Entity Recognition (portuguese...)
+ *     nlp = spacy.load('xx_ent_wiki_sm')
  */
   __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_12NERExtractor_1extract_named_entities, 0, __pyx_n_s_extract_named_entities, NULL, __pyx_n_s_wrapper_infra_NERExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_named_entities, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /* "wrapper/infra/NERExtractor.pyx":1
```

### Comparing `docrx-0.0.11/src/wrapper/infra/PreProcessing.c` & `docrx-0.0.110/src/wrapper/infra/VideoObjectsExtractor.c`

 * *Files 5% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.infra.PreProcessing",
+        "name": "wrapper.infra.VideoObjectsExtractor",
         "sources": [
-            "src/wrapper/infra/PreProcessing.pyx"
+            "src/wrapper/infra/VideoObjectsExtractor.pyx"
         ]
     },
-    "module_name": "wrapper.infra.PreProcessing"
+    "module_name": "wrapper.infra.VideoObjectsExtractor"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__infra__PreProcessing
-#define __PYX_HAVE_API__wrapper__infra__PreProcessing
+#define __PYX_HAVE__wrapper__infra__VideoObjectsExtractor
+#define __PYX_HAVE_API__wrapper__infra__VideoObjectsExtractor
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/infra/PreProcessing.pyx",
+  "src/wrapper/infra/VideoObjectsExtractor.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1555,14 +1555,61 @@
     PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
     const char* function_name);
 
 /* RaiseArgTupleInvalid.proto */
 static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
     Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
 
+/* PyDictVersioning.proto */
+#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
+#define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
+#define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
+#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
+    (version_var) = __PYX_GET_DICT_VERSION(dict);\
+    (cache_var) = (value);
+#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP) {\
+    static PY_UINT64_T __pyx_dict_version = 0;\
+    static PyObject *__pyx_dict_cached_value = NULL;\
+    if (likely(__PYX_GET_DICT_VERSION(DICT) == __pyx_dict_version)) {\
+        (VAR) = __pyx_dict_cached_value;\
+    } else {\
+        (VAR) = __pyx_dict_cached_value = (LOOKUP);\
+        __pyx_dict_version = __PYX_GET_DICT_VERSION(DICT);\
+    }\
+}
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj);
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj);
+static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version);
+#else
+#define __PYX_GET_DICT_VERSION(dict)  (0)
+#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)
+#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP)  (VAR) = (LOOKUP);
+#endif
+
+/* GetModuleGlobalName.proto */
+#if CYTHON_USE_DICT_VERSIONS
+#define __Pyx_GetModuleGlobalName(var, name)  do {\
+    static PY_UINT64_T __pyx_dict_version = 0;\
+    static PyObject *__pyx_dict_cached_value = NULL;\
+    (var) = (likely(__pyx_dict_version == __PYX_GET_DICT_VERSION(__pyx_d))) ?\
+        (likely(__pyx_dict_cached_value) ? __Pyx_NewRef(__pyx_dict_cached_value) : __Pyx_GetBuiltinName(name)) :\
+        __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
+} while(0)
+#define __Pyx_GetModuleGlobalNameUncached(var, name)  do {\
+    PY_UINT64_T __pyx_dict_version;\
+    PyObject *__pyx_dict_cached_value;\
+    (var) = __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
+} while(0)
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
+#else
+#define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
+#define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
+#endif
+
 /* PyFunctionFastCall.proto */
 #if CYTHON_FAST_PYCALL
 #if !CYTHON_VECTORCALL
 #define __Pyx_PyFunction_FastCall(func, args, nargs)\
     __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
 static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
 #endif
@@ -1606,86 +1653,34 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+/* RaiseTooManyValuesToUnpack.proto */
+static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);
 
-/* PyDictVersioning.proto */
-#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
-#define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
-#define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
-#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
-    (version_var) = __PYX_GET_DICT_VERSION(dict);\
-    (cache_var) = (value);
-#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP) {\
-    static PY_UINT64_T __pyx_dict_version = 0;\
-    static PyObject *__pyx_dict_cached_value = NULL;\
-    if (likely(__PYX_GET_DICT_VERSION(DICT) == __pyx_dict_version)) {\
-        (VAR) = __pyx_dict_cached_value;\
-    } else {\
-        (VAR) = __pyx_dict_cached_value = (LOOKUP);\
-        __pyx_dict_version = __PYX_GET_DICT_VERSION(DICT);\
-    }\
-}
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj);
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj);
-static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version);
-#else
-#define __PYX_GET_DICT_VERSION(dict)  (0)
-#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)
-#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP)  (VAR) = (LOOKUP);
-#endif
+/* RaiseNeedMoreValuesToUnpack.proto */
+static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);
 
-/* GetModuleGlobalName.proto */
-#if CYTHON_USE_DICT_VERSIONS
-#define __Pyx_GetModuleGlobalName(var, name)  do {\
-    static PY_UINT64_T __pyx_dict_version = 0;\
-    static PyObject *__pyx_dict_cached_value = NULL;\
-    (var) = (likely(__pyx_dict_version == __PYX_GET_DICT_VERSION(__pyx_d))) ?\
-        (likely(__pyx_dict_cached_value) ? __Pyx_NewRef(__pyx_dict_cached_value) : __Pyx_GetBuiltinName(name)) :\
-        __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
-} while(0)
-#define __Pyx_GetModuleGlobalNameUncached(var, name)  do {\
-    PY_UINT64_T __pyx_dict_version;\
-    PyObject *__pyx_dict_cached_value;\
-    (var) = __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
-} while(0)
-static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
-#else
-#define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
-#define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
-static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
-#endif
+/* IterFinish.proto */
+static CYTHON_INLINE int __Pyx_IterFinish(void);
 
-/* ListCompAppend.proto */
-#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
-static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
-    PyListObject* L = (PyListObject*) list;
-    Py_ssize_t len = Py_SIZE(list);
-    if (likely(L->allocated > len)) {
-        Py_INCREF(x);
-        PyList_SET_ITEM(list, len, x);
-        __Pyx_SET_SIZE(list, len + 1);
-        return 0;
-    }
-    return PyList_Append(list, x);
-}
-#else
-#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
-#endif
+/* UnpackItemEndCheck.proto */
+static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);
 
-/* PySequenceContains.proto */
-static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
-    int result = PySequence_Contains(seq, item);
-    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
-}
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+
+/* SliceObject.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
+        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
+        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
+        int has_cstart, int has_cstop, int wraparound);
 
 /* GetItemInt.proto */
 #define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
     (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
     __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
     (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
                __Pyx_GetItemInt_Generic(o, to_py_func(i))))
@@ -1708,51 +1703,202 @@
 /* ObjectGetItem.proto */
 #if CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key);
 #else
 #define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
 #endif
 
-/* PyObjectFormatSimple.proto */
-#if CYTHON_COMPILING_IN_PYPY
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        PyObject_Format(s, f))
-#elif PY_MAJOR_VERSION < 3
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
-        PyObject_Format(s, f))
-#elif CYTHON_USE_TYPE_SLOTS
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
-        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
-        PyObject_Format(s, f))
-#else
-    #define __Pyx_PyObject_FormatSimple(s, f) (\
-        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
-        PyObject_Format(s, f))
+/* PyIntBinop.proto */
+#if !CYTHON_COMPILING_IN_PYPY
+static PyObject* __Pyx_PyInt_TrueDivideObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check);
+#else
+#define __Pyx_PyInt_TrueDivideObjC(op1, op2, intval, inplace, zerodivision_check)\
+    (inplace ? PyNumber_InPlaceTrueDivide(op1, op2) : PyNumber_TrueDivide(op1, op2))
+#endif
+
+/* ListAppend.proto */
+#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
+static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
+    PyListObject* L = (PyListObject*) list;
+    Py_ssize_t len = Py_SIZE(list);
+    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
+        Py_INCREF(x);
+        PyList_SET_ITEM(list, len, x);
+        __Pyx_SET_SIZE(list, len + 1);
+        return 0;
+    }
+    return PyList_Append(list, x);
+}
+#else
+#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* RaiseException.proto */
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
+/* pybytes_as_double.proto */
+static double __Pyx_SlowPyString_AsDouble(PyObject *obj);
+static double __Pyx__PyBytes_AsDouble(PyObject *obj, const char* start, Py_ssize_t length);
+static CYTHON_INLINE double __Pyx_PyBytes_AsDouble(PyObject *obj) {
+    return __Pyx__PyBytes_AsDouble(obj, PyBytes_AS_STRING(obj), PyBytes_GET_SIZE(obj));
+}
+static CYTHON_INLINE double __Pyx_PyByteArray_AsDouble(PyObject *obj) {
+    return __Pyx__PyBytes_AsDouble(obj, PyByteArray_AS_STRING(obj), PyByteArray_GET_SIZE(obj));
+}
+
+/* pyunicode_as_double.proto */
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+static const char* __Pyx__PyUnicode_AsDouble_Copy(const void* data, const int kind, char* buffer, Py_ssize_t start, Py_ssize_t end) {
+    int last_was_punctuation;
+    Py_ssize_t i;
+    last_was_punctuation = 1;
+    for (i=start; i <= end; i++) {
+        Py_UCS4 chr = PyUnicode_READ(kind, data, i);
+        int is_punctuation = (chr == '_') | (chr == '.');
+        *buffer = (char)chr;
+        buffer += (chr != '_');
+        if (unlikely(chr > 127)) goto parse_failure;
+        if (unlikely(last_was_punctuation & is_punctuation)) goto parse_failure;
+        last_was_punctuation = is_punctuation;
+    }
+    if (unlikely(last_was_punctuation)) goto parse_failure;
+    *buffer = '\0';
+    return buffer;
+parse_failure:
+    return NULL;
+}
+static double __Pyx__PyUnicode_AsDouble_inf_nan(const void* data, int kind, Py_ssize_t start, Py_ssize_t length) {
+    int matches = 1;
+    Py_UCS4 chr;
+    Py_UCS4 sign = PyUnicode_READ(kind, data, start);
+    int is_signed = (sign == '-') | (sign == '+');
+    start += is_signed;
+    length -= is_signed;
+    switch (PyUnicode_READ(kind, data, start)) {
+        #ifdef Py_NAN
+        case 'n':
+        case 'N':
+            if (unlikely(length != 3)) goto parse_failure;
+            chr = PyUnicode_READ(kind, data, start+1);
+            matches &= (chr == 'a') | (chr == 'A');
+            chr = PyUnicode_READ(kind, data, start+2);
+            matches &= (chr == 'n') | (chr == 'N');
+            if (unlikely(!matches)) goto parse_failure;
+            return (sign == '-') ? -Py_NAN : Py_NAN;
+        #endif
+        case 'i':
+        case 'I':
+            if (unlikely(length < 3)) goto parse_failure;
+            chr = PyUnicode_READ(kind, data, start+1);
+            matches &= (chr == 'n') | (chr == 'N');
+            chr = PyUnicode_READ(kind, data, start+2);
+            matches &= (chr == 'f') | (chr == 'F');
+            if (likely(length == 3 && matches))
+                return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
+            if (unlikely(length != 8)) goto parse_failure;
+            chr = PyUnicode_READ(kind, data, start+3);
+            matches &= (chr == 'i') | (chr == 'I');
+            chr = PyUnicode_READ(kind, data, start+4);
+            matches &= (chr == 'n') | (chr == 'N');
+            chr = PyUnicode_READ(kind, data, start+5);
+            matches &= (chr == 'i') | (chr == 'I');
+            chr = PyUnicode_READ(kind, data, start+6);
+            matches &= (chr == 't') | (chr == 'T');
+            chr = PyUnicode_READ(kind, data, start+7);
+            matches &= (chr == 'y') | (chr == 'Y');
+            if (unlikely(!matches)) goto parse_failure;
+            return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
+        case '.': case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
+            break;
+        default:
+            goto parse_failure;
+    }
+    return 0.0;
+parse_failure:
+    return -1.0;
+}
+static double __Pyx_PyUnicode_AsDouble_WithSpaces(PyObject *obj) {
+    double value;
+    const char *last;
+    char *end;
+    Py_ssize_t start, length = PyUnicode_GET_LENGTH(obj);
+    const int kind = PyUnicode_KIND(obj);
+    const void* data = PyUnicode_DATA(obj);
+    start = 0;
+    while (Py_UNICODE_ISSPACE(PyUnicode_READ(kind, data, start)))
+        start++;
+    while (start < length - 1 && Py_UNICODE_ISSPACE(PyUnicode_READ(kind, data, length - 1)))
+        length--;
+    length -= start;
+    if (unlikely(length <= 0)) goto fallback;
+    value = __Pyx__PyUnicode_AsDouble_inf_nan(data, kind, start, length);
+    if (unlikely(value == -1.0)) goto fallback;
+    if (value != 0.0) return value;
+    if (length < 40) {
+        char number[40];
+        last = __Pyx__PyUnicode_AsDouble_Copy(data, kind, number, start, start + length);
+        if (unlikely(!last)) goto fallback;
+        value = PyOS_string_to_double(number, &end, NULL);
+    } else {
+        char *number = (char*) PyMem_Malloc((length + 1) * sizeof(char));
+        if (unlikely(!number)) goto fallback;
+        last = __Pyx__PyUnicode_AsDouble_Copy(data, kind, number, start, start + length);
+        if (unlikely(!last)) {
+            PyMem_Free(number);
+            goto fallback;
+        }
+        value = PyOS_string_to_double(number, &end, NULL);
+        PyMem_Free(number);
+    }
+    if (likely(end == last) || (value == (double)-1 && PyErr_Occurred())) {
+        return value;
+    }
+fallback:
+    return __Pyx_SlowPyString_AsDouble(obj);
+}
+#endif
+static CYTHON_INLINE double __Pyx_PyUnicode_AsDouble(PyObject *obj) {
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+    if (unlikely(__Pyx_PyUnicode_READY(obj) == -1))
+        return (double)-1;
+    if (likely(PyUnicode_IS_ASCII(obj))) {
+        const char *s;
+        Py_ssize_t length;
+        s = PyUnicode_AsUTF8AndSize(obj, &length);
+        return __Pyx__PyBytes_AsDouble(obj, s, length);
+    }
+    return __Pyx_PyUnicode_AsDouble_WithSpaces(obj);
+#else
+    return __Pyx_SlowPyString_AsDouble(obj);
+#endif
+}
+
+/* pynumber_float.proto */
+static CYTHON_INLINE PyObject* __Pyx__PyNumber_Float(PyObject* obj);
+#define __Pyx_PyNumber_Float(x) (PyFloat_CheckExact(x) ? __Pyx_NewRef(x) : __Pyx__PyNumber_Float(x))
+
+/* PySequenceContains.proto */
+static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
+    int result = PySequence_Contains(seq, item);
+    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
+}
+
+/* PyObject_Str.proto */
+#define __Pyx_PyObject_Str(obj)\
+    (likely(PyString_CheckExact(obj)) ? __Pyx_NewRef(obj) : PyObject_Str(obj))
 
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
-
 /* ImportDottedModule.proto */
 static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
 #if PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
 #endif
 
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
 #endif
@@ -1899,35 +2045,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -1951,93 +2097,94 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.infra.PreProcessing" */
+/* Module declarations from "wrapper.infra.VideoObjectsExtractor" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.infra.PreProcessing"
-extern int __pyx_module_is_main_wrapper__infra__PreProcessing;
-int __pyx_module_is_main_wrapper__infra__PreProcessing = 0;
+#define __Pyx_MODULE_NAME "wrapper.infra.VideoObjectsExtractor"
+extern int __pyx_module_is_main_wrapper__infra__VideoObjectsExtractor;
+int __pyx_module_is_main_wrapper__infra__VideoObjectsExtractor = 0;
 
-/* Implementation of "wrapper.infra.PreProcessing" */
+/* Implementation of "wrapper.infra.VideoObjectsExtractor" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_print;
+static PyObject *__pyx_builtin_range;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_[] = "";
-static const char __pyx_k_W[] = "\\W+";
-static const char __pyx_k_c[] = "c";
-static const char __pyx_k__2[] = " ";
-static const char __pyx_k__3[] = ".";
+static const char __pyx_k_h[] = "h";
+static const char __pyx_k_i[] = "i";
+static const char __pyx_k_w[] = "w";
+static const char __pyx_k_x[] = "x";
+static const char __pyx_k_y[] = "y";
 static const char __pyx_k__4[] = "*";
-static const char __pyx_k_en[] = "en";
-static const char __pyx_k_es[] = "es";
-static const char __pyx_k_pt[] = "pt";
-static const char __pyx_k_re[] = "re";
-static const char __pyx_k_NFD[] = "NFD";
-static const char __pyx_k__19[] = "?";
-static const char __pyx_k_sub[] = "sub";
-static const char __pyx_k_w_s[] = "[^\\w\\s]";
+static const char __pyx_k__5[] = ".";
+static const char __pyx_k__8[] = "?";
+static const char __pyx_k_np[] = "np";
+static const char __pyx_k_cv2[] = "cv2";
+static const char __pyx_k_dnn[] = "dnn";
+static const char __pyx_k_get[] = "get";
+static const char __pyx_k_net[] = "net";
+static const char __pyx_k_out[] = "out";
+static const char __pyx_k_ret[] = "ret";
+static const char __pyx_k_blob[] = "blob";
+static const char __pyx_k_crop[] = "crop";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
+static const char __pyx_k_outs[] = "outs";
+static const char __pyx_k_read[] = "read";
 static const char __pyx_k_spec[] = "__spec__";
-static const char __pyx_k_stem[] = "stem";
 static const char __pyx_k_test[] = "__test__";
-static const char __pyx_k_text[] = "text";
-static const char __pyx_k_word[] = "word";
-static const char __pyx_k_lower[] = "lower";
-static const char __pyx_k_print[] = "print";
-static const char __pyx_k_split[] = "split";
-static const char __pyx_k_words[] = "words";
+static const char __pyx_k_boxes[] = "boxes";
+static const char __pyx_k_frame[] = "frame";
+static const char __pyx_k_label[] = "label";
+static const char __pyx_k_numpy[] = "numpy";
+static const char __pyx_k_range[] = "range";
+static const char __pyx_k_shape[] = "shape";
+static const char __pyx_k_width[] = "width";
+static const char __pyx_k_argmax[] = "argmax";
+static const char __pyx_k_height[] = "height";
 static const char __pyx_k_import[] = "__import__";
-static const char __pyx_k_english[] = "english";
-static const char __pyx_k_spanish[] = "spanish";
-static const char __pyx_k_stemmer[] = "stemmer";
-static const char __pyx_k_language[] = "language";
-static const char __pyx_k_combining[] = "combining";
-static const char __pyx_k_languages[] = "languages";
-static const char __pyx_k_nltk_stem[] = "nltk.stem";
-static const char __pyx_k_normalize[] = "normalize";
-static const char __pyx_k_stopwords[] = "stopwords";
-static const char __pyx_k_portuguese[] = "portuguese";
-static const char __pyx_k_RSLPStemmer[] = "RSLPStemmer";
-static const char __pyx_k_nltk_corpus[] = "nltk.corpus";
-static const char __pyx_k_unicodedata[] = "unicodedata";
+static const char __pyx_k_scores[] = "scores";
+static const char __pyx_k_classes[] = "classes";
+static const char __pyx_k_forward[] = "forward";
+static const char __pyx_k_indexes[] = "indexes";
+static const char __pyx_k_objects[] = "objects";
+static const char __pyx_k_release[] = "release";
+static const char __pyx_k_NMSBoxes[] = "NMSBoxes";
+static const char __pyx_k_center_x[] = "center_x";
+static const char __pyx_k_center_y[] = "center_y";
+static const char __pyx_k_channels[] = "channels";
+static const char __pyx_k_class_id[] = "class_id";
+static const char __pyx_k_setInput[] = "setInput";
+static const char __pyx_k_class_ids[] = "class_ids";
+static const char __pyx_k_detection[] = "detection";
+static const char __pyx_k_confidence[] = "confidence";
+static const char __pyx_k_get_layers[] = "get_layers";
+static const char __pyx_k_video_path[] = "video_path";
+static const char __pyx_k_confidences[] = "confidences";
+static const char __pyx_k_frame_count[] = "frame_count";
+static const char __pyx_k_VideoCapture[] = "VideoCapture";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
+static const char __pyx_k_blobFromImage[] = "blobFromImage";
 static const char __pyx_k_class_getitem[] = "__class_getitem__";
-static const char __pyx_k_lemantization[] = "lemantization";
-static const char __pyx_k_nltk_tokenize[] = "nltk.tokenize";
-static const char __pyx_k_word_tokenize[] = "word_tokenize";
-static const char __pyx_k_normalize_text[] = "normalize_text";
-static const char __pyx_k_remove_accents[] = "remove_accents";
-static const char __pyx_k_SnowballStemmer[] = "SnowballStemmer";
-static const char __pyx_k_normalized_text[] = "normalized_text";
-static const char __pyx_k_WordNetLemmatizer[] = "WordNetLemmatizer";
-static const char __pyx_k_supportedLanguage[] = "supportedLanguage";
+static const char __pyx_k_output_layers[] = "output_layers";
+static const char __pyx_k_video_capture[] = "video_capture";
+static const char __pyx_k_objects_per_frame[] = "objects_per_frame";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_remove_all_accents[] = "remove_all_accents";
-static const char __pyx_k_wrapper_infra_PreProcessing[] = "wrapper.infra.PreProcessing";
-static const char __pyx_k_remove_alphanumeric_character[] = "remove_alphanumeric_character";
-static const char __pyx_k_it_doesn_t_have_tokens_for_text[] = "it doesn't have tokens for text: ";
-static const char __pyx_k_src_wrapper_infra_PreProcessing[] = "src/wrapper/infra/PreProcessing.pyx";
-static const char __pyx_k_Not_Specified_the_language_for_t[] = "Not Specified the language for text ";
-static const char __pyx_k_preprocess_text_for_lemantizatio[] = "preprocess_text_for_lemantization";
-static const char __pyx_k_preprocess_text_for_stemmetizati[] = "preprocess_text_for_stemmetization";
+static const char __pyx_k_CAP_PROP_FRAME_COUNT[] = "CAP_PROP_FRAME_COUNT";
+static const char __pyx_k_ImageObjectsExtractor[] = "ImageObjectsExtractor";
+static const char __pyx_k_identify_objects_in_video[] = "identify_objects_in_video";
+static const char __pyx_k_src_wrapper_infra_VideoObjectsEx[] = "src/wrapper/infra/VideoObjectsExtractor.pyx";
+static const char __pyx_k_wrapper_infra_VideoObjectsExtrac[] = "wrapper.infra.VideoObjectsExtractor";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_stemmer); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_remove_all_accents); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_10preprocess_text_for_stemmetization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_video_path); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -2059,89 +2206,93 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_kp_u_;
-  PyObject *__pyx_n_u_NFD;
-  PyObject *__pyx_kp_u_Not_Specified_the_language_for_t;
-  PyObject *__pyx_n_s_RSLPStemmer;
-  PyObject *__pyx_n_s_SnowballStemmer;
-  PyObject *__pyx_kp_u_W;
-  PyObject *__pyx_n_s_WordNetLemmatizer;
-  PyObject *__pyx_n_s__19;
-  PyObject *__pyx_kp_u__2;
-  PyObject *__pyx_kp_u__3;
+  PyObject *__pyx_n_s_CAP_PROP_FRAME_COUNT;
+  PyObject *__pyx_n_s_ImageObjectsExtractor;
+  PyObject *__pyx_n_s_NMSBoxes;
+  PyObject *__pyx_n_s_VideoCapture;
   PyObject *__pyx_n_s__4;
+  PyObject *__pyx_kp_u__5;
+  PyObject *__pyx_n_s__8;
+  PyObject *__pyx_n_s_argmax;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_n_s_c;
+  PyObject *__pyx_n_s_blob;
+  PyObject *__pyx_n_s_blobFromImage;
+  PyObject *__pyx_n_s_boxes;
+  PyObject *__pyx_n_s_center_x;
+  PyObject *__pyx_n_s_center_y;
+  PyObject *__pyx_n_s_channels;
   PyObject *__pyx_n_s_class_getitem;
+  PyObject *__pyx_n_s_class_id;
+  PyObject *__pyx_n_s_class_ids;
+  PyObject *__pyx_n_s_classes;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_combining;
-  PyObject *__pyx_n_u_en;
-  PyObject *__pyx_n_u_english;
-  PyObject *__pyx_n_u_es;
+  PyObject *__pyx_n_s_confidence;
+  PyObject *__pyx_n_s_confidences;
+  PyObject *__pyx_n_s_crop;
+  PyObject *__pyx_n_s_cv2;
+  PyObject *__pyx_n_s_detection;
+  PyObject *__pyx_n_s_dnn;
+  PyObject *__pyx_n_s_forward;
+  PyObject *__pyx_n_s_frame;
+  PyObject *__pyx_n_s_frame_count;
+  PyObject *__pyx_n_s_get;
+  PyObject *__pyx_n_s_get_layers;
+  PyObject *__pyx_n_s_h;
+  PyObject *__pyx_n_s_height;
+  PyObject *__pyx_n_s_i;
+  PyObject *__pyx_n_s_identify_objects_in_video;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_indexes;
   PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_is_coroutine;
-  PyObject *__pyx_kp_u_it_doesn_t_have_tokens_for_text;
-  PyObject *__pyx_n_s_language;
-  PyObject *__pyx_n_s_languages;
-  PyObject *__pyx_n_s_lemantization;
-  PyObject *__pyx_n_s_lower;
+  PyObject *__pyx_n_s_label;
   PyObject *__pyx_n_s_main;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_nltk_corpus;
-  PyObject *__pyx_n_s_nltk_stem;
-  PyObject *__pyx_n_s_nltk_tokenize;
-  PyObject *__pyx_n_s_normalize;
-  PyObject *__pyx_n_s_normalize_text;
-  PyObject *__pyx_n_s_normalized_text;
-  PyObject *__pyx_n_u_portuguese;
-  PyObject *__pyx_n_s_preprocess_text_for_lemantizatio;
-  PyObject *__pyx_n_s_preprocess_text_for_stemmetizati;
-  PyObject *__pyx_n_s_print;
-  PyObject *__pyx_n_u_pt;
-  PyObject *__pyx_n_s_re;
-  PyObject *__pyx_n_s_remove_accents;
-  PyObject *__pyx_n_s_remove_all_accents;
-  PyObject *__pyx_n_s_remove_alphanumeric_character;
-  PyObject *__pyx_n_u_spanish;
+  PyObject *__pyx_n_s_net;
+  PyObject *__pyx_n_s_np;
+  PyObject *__pyx_n_s_numpy;
+  PyObject *__pyx_n_s_objects;
+  PyObject *__pyx_n_s_objects_per_frame;
+  PyObject *__pyx_n_s_out;
+  PyObject *__pyx_n_s_output_layers;
+  PyObject *__pyx_n_s_outs;
+  PyObject *__pyx_n_s_range;
+  PyObject *__pyx_n_s_read;
+  PyObject *__pyx_n_s_release;
+  PyObject *__pyx_n_s_ret;
+  PyObject *__pyx_n_s_scores;
+  PyObject *__pyx_n_s_setInput;
+  PyObject *__pyx_n_s_shape;
   PyObject *__pyx_n_s_spec;
-  PyObject *__pyx_n_s_split;
-  PyObject *__pyx_kp_s_src_wrapper_infra_PreProcessing;
-  PyObject *__pyx_n_s_stem;
-  PyObject *__pyx_n_s_stemmer;
-  PyObject *__pyx_n_s_stopwords;
-  PyObject *__pyx_n_s_sub;
-  PyObject *__pyx_n_s_supportedLanguage;
+  PyObject *__pyx_kp_s_src_wrapper_infra_VideoObjectsEx;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_text;
-  PyObject *__pyx_n_s_unicodedata;
-  PyObject *__pyx_kp_u_w_s;
-  PyObject *__pyx_n_s_word;
-  PyObject *__pyx_n_s_word_tokenize;
-  PyObject *__pyx_n_s_words;
-  PyObject *__pyx_n_s_wrapper_infra_PreProcessing;
-  PyObject *__pyx_tuple__5;
-  PyObject *__pyx_tuple__7;
-  PyObject *__pyx_tuple__9;
-  PyObject *__pyx_tuple__11;
-  PyObject *__pyx_tuple__13;
-  PyObject *__pyx_tuple__15;
-  PyObject *__pyx_tuple__16;
-  PyObject *__pyx_tuple__18;
-  PyObject *__pyx_codeobj__6;
-  PyObject *__pyx_codeobj__8;
-  PyObject *__pyx_codeobj__10;
-  PyObject *__pyx_codeobj__12;
-  PyObject *__pyx_codeobj__14;
-  PyObject *__pyx_codeobj__17;
+  PyObject *__pyx_n_s_video_capture;
+  PyObject *__pyx_n_s_video_path;
+  PyObject *__pyx_n_s_w;
+  PyObject *__pyx_n_s_width;
+  PyObject *__pyx_n_s_wrapper_infra_VideoObjectsExtrac;
+  PyObject *__pyx_n_s_x;
+  PyObject *__pyx_n_s_y;
+  PyObject *__pyx_float_0_4;
+  PyObject *__pyx_float_0_5;
+  PyObject *__pyx_float_0_00392;
+  PyObject *__pyx_int_0;
+  PyObject *__pyx_int_2;
+  PyObject *__pyx_int_5;
+  PyObject *__pyx_int_416;
+  PyObject *__pyx_tuple_;
+  PyObject *__pyx_slice__3;
+  PyObject *__pyx_tuple__2;
+  PyObject *__pyx_tuple__6;
+  PyObject *__pyx_codeobj__7;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2176,89 +2327,93 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_kp_u_);
-  Py_CLEAR(clear_module_state->__pyx_n_u_NFD);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Not_Specified_the_language_for_t);
-  Py_CLEAR(clear_module_state->__pyx_n_s_RSLPStemmer);
-  Py_CLEAR(clear_module_state->__pyx_n_s_SnowballStemmer);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_W);
-  Py_CLEAR(clear_module_state->__pyx_n_s_WordNetLemmatizer);
-  Py_CLEAR(clear_module_state->__pyx_n_s__19);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__3);
+  Py_CLEAR(clear_module_state->__pyx_n_s_CAP_PROP_FRAME_COUNT);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ImageObjectsExtractor);
+  Py_CLEAR(clear_module_state->__pyx_n_s_NMSBoxes);
+  Py_CLEAR(clear_module_state->__pyx_n_s_VideoCapture);
   Py_CLEAR(clear_module_state->__pyx_n_s__4);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__5);
+  Py_CLEAR(clear_module_state->__pyx_n_s__8);
+  Py_CLEAR(clear_module_state->__pyx_n_s_argmax);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_n_s_c);
+  Py_CLEAR(clear_module_state->__pyx_n_s_blob);
+  Py_CLEAR(clear_module_state->__pyx_n_s_blobFromImage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_boxes);
+  Py_CLEAR(clear_module_state->__pyx_n_s_center_x);
+  Py_CLEAR(clear_module_state->__pyx_n_s_center_y);
+  Py_CLEAR(clear_module_state->__pyx_n_s_channels);
   Py_CLEAR(clear_module_state->__pyx_n_s_class_getitem);
+  Py_CLEAR(clear_module_state->__pyx_n_s_class_id);
+  Py_CLEAR(clear_module_state->__pyx_n_s_class_ids);
+  Py_CLEAR(clear_module_state->__pyx_n_s_classes);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_combining);
-  Py_CLEAR(clear_module_state->__pyx_n_u_en);
-  Py_CLEAR(clear_module_state->__pyx_n_u_english);
-  Py_CLEAR(clear_module_state->__pyx_n_u_es);
+  Py_CLEAR(clear_module_state->__pyx_n_s_confidence);
+  Py_CLEAR(clear_module_state->__pyx_n_s_confidences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_crop);
+  Py_CLEAR(clear_module_state->__pyx_n_s_cv2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detection);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dnn);
+  Py_CLEAR(clear_module_state->__pyx_n_s_forward);
+  Py_CLEAR(clear_module_state->__pyx_n_s_frame);
+  Py_CLEAR(clear_module_state->__pyx_n_s_frame_count);
+  Py_CLEAR(clear_module_state->__pyx_n_s_get);
+  Py_CLEAR(clear_module_state->__pyx_n_s_get_layers);
+  Py_CLEAR(clear_module_state->__pyx_n_s_h);
+  Py_CLEAR(clear_module_state->__pyx_n_s_height);
+  Py_CLEAR(clear_module_state->__pyx_n_s_i);
+  Py_CLEAR(clear_module_state->__pyx_n_s_identify_objects_in_video);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_indexes);
   Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_it_doesn_t_have_tokens_for_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_language);
-  Py_CLEAR(clear_module_state->__pyx_n_s_languages);
-  Py_CLEAR(clear_module_state->__pyx_n_s_lemantization);
-  Py_CLEAR(clear_module_state->__pyx_n_s_lower);
+  Py_CLEAR(clear_module_state->__pyx_n_s_label);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_corpus);
-  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_stem);
-  Py_CLEAR(clear_module_state->__pyx_n_s_nltk_tokenize);
-  Py_CLEAR(clear_module_state->__pyx_n_s_normalize);
-  Py_CLEAR(clear_module_state->__pyx_n_s_normalize_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_normalized_text);
-  Py_CLEAR(clear_module_state->__pyx_n_u_portuguese);
-  Py_CLEAR(clear_module_state->__pyx_n_s_preprocess_text_for_lemantizatio);
-  Py_CLEAR(clear_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
-  Py_CLEAR(clear_module_state->__pyx_n_s_print);
-  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
-  Py_CLEAR(clear_module_state->__pyx_n_s_re);
-  Py_CLEAR(clear_module_state->__pyx_n_s_remove_accents);
-  Py_CLEAR(clear_module_state->__pyx_n_s_remove_all_accents);
-  Py_CLEAR(clear_module_state->__pyx_n_s_remove_alphanumeric_character);
-  Py_CLEAR(clear_module_state->__pyx_n_u_spanish);
+  Py_CLEAR(clear_module_state->__pyx_n_s_net);
+  Py_CLEAR(clear_module_state->__pyx_n_s_np);
+  Py_CLEAR(clear_module_state->__pyx_n_s_numpy);
+  Py_CLEAR(clear_module_state->__pyx_n_s_objects);
+  Py_CLEAR(clear_module_state->__pyx_n_s_objects_per_frame);
+  Py_CLEAR(clear_module_state->__pyx_n_s_out);
+  Py_CLEAR(clear_module_state->__pyx_n_s_output_layers);
+  Py_CLEAR(clear_module_state->__pyx_n_s_outs);
+  Py_CLEAR(clear_module_state->__pyx_n_s_range);
+  Py_CLEAR(clear_module_state->__pyx_n_s_read);
+  Py_CLEAR(clear_module_state->__pyx_n_s_release);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ret);
+  Py_CLEAR(clear_module_state->__pyx_n_s_scores);
+  Py_CLEAR(clear_module_state->__pyx_n_s_setInput);
+  Py_CLEAR(clear_module_state->__pyx_n_s_shape);
   Py_CLEAR(clear_module_state->__pyx_n_s_spec);
-  Py_CLEAR(clear_module_state->__pyx_n_s_split);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_PreProcessing);
-  Py_CLEAR(clear_module_state->__pyx_n_s_stem);
-  Py_CLEAR(clear_module_state->__pyx_n_s_stemmer);
-  Py_CLEAR(clear_module_state->__pyx_n_s_stopwords);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sub);
-  Py_CLEAR(clear_module_state->__pyx_n_s_supportedLanguage);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_unicodedata);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_w_s);
-  Py_CLEAR(clear_module_state->__pyx_n_s_word);
-  Py_CLEAR(clear_module_state->__pyx_n_s_word_tokenize);
-  Py_CLEAR(clear_module_state->__pyx_n_s_words);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_PreProcessing);
-  Py_CLEAR(clear_module_state->__pyx_tuple__5);
-  Py_CLEAR(clear_module_state->__pyx_tuple__7);
-  Py_CLEAR(clear_module_state->__pyx_tuple__9);
-  Py_CLEAR(clear_module_state->__pyx_tuple__11);
-  Py_CLEAR(clear_module_state->__pyx_tuple__13);
-  Py_CLEAR(clear_module_state->__pyx_tuple__15);
-  Py_CLEAR(clear_module_state->__pyx_tuple__16);
-  Py_CLEAR(clear_module_state->__pyx_tuple__18);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__6);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__8);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__10);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__12);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__14);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__17);
+  Py_CLEAR(clear_module_state->__pyx_n_s_video_capture);
+  Py_CLEAR(clear_module_state->__pyx_n_s_video_path);
+  Py_CLEAR(clear_module_state->__pyx_n_s_w);
+  Py_CLEAR(clear_module_state->__pyx_n_s_width);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_VideoObjectsExtrac);
+  Py_CLEAR(clear_module_state->__pyx_n_s_x);
+  Py_CLEAR(clear_module_state->__pyx_n_s_y);
+  Py_CLEAR(clear_module_state->__pyx_float_0_4);
+  Py_CLEAR(clear_module_state->__pyx_float_0_5);
+  Py_CLEAR(clear_module_state->__pyx_float_0_00392);
+  Py_CLEAR(clear_module_state->__pyx_int_0);
+  Py_CLEAR(clear_module_state->__pyx_int_2);
+  Py_CLEAR(clear_module_state->__pyx_int_5);
+  Py_CLEAR(clear_module_state->__pyx_int_416);
+  Py_CLEAR(clear_module_state->__pyx_tuple_);
+  Py_CLEAR(clear_module_state->__pyx_slice__3);
+  Py_CLEAR(clear_module_state->__pyx_tuple__2);
+  Py_CLEAR(clear_module_state->__pyx_tuple__6);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2271,89 +2426,93 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_kp_u_);
-  Py_VISIT(traverse_module_state->__pyx_n_u_NFD);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Not_Specified_the_language_for_t);
-  Py_VISIT(traverse_module_state->__pyx_n_s_RSLPStemmer);
-  Py_VISIT(traverse_module_state->__pyx_n_s_SnowballStemmer);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_W);
-  Py_VISIT(traverse_module_state->__pyx_n_s_WordNetLemmatizer);
-  Py_VISIT(traverse_module_state->__pyx_n_s__19);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__3);
+  Py_VISIT(traverse_module_state->__pyx_n_s_CAP_PROP_FRAME_COUNT);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ImageObjectsExtractor);
+  Py_VISIT(traverse_module_state->__pyx_n_s_NMSBoxes);
+  Py_VISIT(traverse_module_state->__pyx_n_s_VideoCapture);
   Py_VISIT(traverse_module_state->__pyx_n_s__4);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__5);
+  Py_VISIT(traverse_module_state->__pyx_n_s__8);
+  Py_VISIT(traverse_module_state->__pyx_n_s_argmax);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_n_s_c);
+  Py_VISIT(traverse_module_state->__pyx_n_s_blob);
+  Py_VISIT(traverse_module_state->__pyx_n_s_blobFromImage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_boxes);
+  Py_VISIT(traverse_module_state->__pyx_n_s_center_x);
+  Py_VISIT(traverse_module_state->__pyx_n_s_center_y);
+  Py_VISIT(traverse_module_state->__pyx_n_s_channels);
   Py_VISIT(traverse_module_state->__pyx_n_s_class_getitem);
+  Py_VISIT(traverse_module_state->__pyx_n_s_class_id);
+  Py_VISIT(traverse_module_state->__pyx_n_s_class_ids);
+  Py_VISIT(traverse_module_state->__pyx_n_s_classes);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_combining);
-  Py_VISIT(traverse_module_state->__pyx_n_u_en);
-  Py_VISIT(traverse_module_state->__pyx_n_u_english);
-  Py_VISIT(traverse_module_state->__pyx_n_u_es);
+  Py_VISIT(traverse_module_state->__pyx_n_s_confidence);
+  Py_VISIT(traverse_module_state->__pyx_n_s_confidences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_crop);
+  Py_VISIT(traverse_module_state->__pyx_n_s_cv2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detection);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dnn);
+  Py_VISIT(traverse_module_state->__pyx_n_s_forward);
+  Py_VISIT(traverse_module_state->__pyx_n_s_frame);
+  Py_VISIT(traverse_module_state->__pyx_n_s_frame_count);
+  Py_VISIT(traverse_module_state->__pyx_n_s_get);
+  Py_VISIT(traverse_module_state->__pyx_n_s_get_layers);
+  Py_VISIT(traverse_module_state->__pyx_n_s_h);
+  Py_VISIT(traverse_module_state->__pyx_n_s_height);
+  Py_VISIT(traverse_module_state->__pyx_n_s_i);
+  Py_VISIT(traverse_module_state->__pyx_n_s_identify_objects_in_video);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_indexes);
   Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_it_doesn_t_have_tokens_for_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_language);
-  Py_VISIT(traverse_module_state->__pyx_n_s_languages);
-  Py_VISIT(traverse_module_state->__pyx_n_s_lemantization);
-  Py_VISIT(traverse_module_state->__pyx_n_s_lower);
+  Py_VISIT(traverse_module_state->__pyx_n_s_label);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_corpus);
-  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_stem);
-  Py_VISIT(traverse_module_state->__pyx_n_s_nltk_tokenize);
-  Py_VISIT(traverse_module_state->__pyx_n_s_normalize);
-  Py_VISIT(traverse_module_state->__pyx_n_s_normalize_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_normalized_text);
-  Py_VISIT(traverse_module_state->__pyx_n_u_portuguese);
-  Py_VISIT(traverse_module_state->__pyx_n_s_preprocess_text_for_lemantizatio);
-  Py_VISIT(traverse_module_state->__pyx_n_s_preprocess_text_for_stemmetizati);
-  Py_VISIT(traverse_module_state->__pyx_n_s_print);
-  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
-  Py_VISIT(traverse_module_state->__pyx_n_s_re);
-  Py_VISIT(traverse_module_state->__pyx_n_s_remove_accents);
-  Py_VISIT(traverse_module_state->__pyx_n_s_remove_all_accents);
-  Py_VISIT(traverse_module_state->__pyx_n_s_remove_alphanumeric_character);
-  Py_VISIT(traverse_module_state->__pyx_n_u_spanish);
+  Py_VISIT(traverse_module_state->__pyx_n_s_net);
+  Py_VISIT(traverse_module_state->__pyx_n_s_np);
+  Py_VISIT(traverse_module_state->__pyx_n_s_numpy);
+  Py_VISIT(traverse_module_state->__pyx_n_s_objects);
+  Py_VISIT(traverse_module_state->__pyx_n_s_objects_per_frame);
+  Py_VISIT(traverse_module_state->__pyx_n_s_out);
+  Py_VISIT(traverse_module_state->__pyx_n_s_output_layers);
+  Py_VISIT(traverse_module_state->__pyx_n_s_outs);
+  Py_VISIT(traverse_module_state->__pyx_n_s_range);
+  Py_VISIT(traverse_module_state->__pyx_n_s_read);
+  Py_VISIT(traverse_module_state->__pyx_n_s_release);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ret);
+  Py_VISIT(traverse_module_state->__pyx_n_s_scores);
+  Py_VISIT(traverse_module_state->__pyx_n_s_setInput);
+  Py_VISIT(traverse_module_state->__pyx_n_s_shape);
   Py_VISIT(traverse_module_state->__pyx_n_s_spec);
-  Py_VISIT(traverse_module_state->__pyx_n_s_split);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_PreProcessing);
-  Py_VISIT(traverse_module_state->__pyx_n_s_stem);
-  Py_VISIT(traverse_module_state->__pyx_n_s_stemmer);
-  Py_VISIT(traverse_module_state->__pyx_n_s_stopwords);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sub);
-  Py_VISIT(traverse_module_state->__pyx_n_s_supportedLanguage);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_unicodedata);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_w_s);
-  Py_VISIT(traverse_module_state->__pyx_n_s_word);
-  Py_VISIT(traverse_module_state->__pyx_n_s_word_tokenize);
-  Py_VISIT(traverse_module_state->__pyx_n_s_words);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_PreProcessing);
-  Py_VISIT(traverse_module_state->__pyx_tuple__5);
-  Py_VISIT(traverse_module_state->__pyx_tuple__7);
-  Py_VISIT(traverse_module_state->__pyx_tuple__9);
-  Py_VISIT(traverse_module_state->__pyx_tuple__11);
-  Py_VISIT(traverse_module_state->__pyx_tuple__13);
-  Py_VISIT(traverse_module_state->__pyx_tuple__15);
-  Py_VISIT(traverse_module_state->__pyx_tuple__16);
-  Py_VISIT(traverse_module_state->__pyx_tuple__18);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__6);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__8);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__10);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__12);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__14);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__17);
+  Py_VISIT(traverse_module_state->__pyx_n_s_video_capture);
+  Py_VISIT(traverse_module_state->__pyx_n_s_video_path);
+  Py_VISIT(traverse_module_state->__pyx_n_s_w);
+  Py_VISIT(traverse_module_state->__pyx_n_s_width);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_VideoObjectsExtrac);
+  Py_VISIT(traverse_module_state->__pyx_n_s_x);
+  Py_VISIT(traverse_module_state->__pyx_n_s_y);
+  Py_VISIT(traverse_module_state->__pyx_float_0_4);
+  Py_VISIT(traverse_module_state->__pyx_float_0_5);
+  Py_VISIT(traverse_module_state->__pyx_float_0_00392);
+  Py_VISIT(traverse_module_state->__pyx_int_0);
+  Py_VISIT(traverse_module_state->__pyx_int_2);
+  Py_VISIT(traverse_module_state->__pyx_int_5);
+  Py_VISIT(traverse_module_state->__pyx_int_416);
+  Py_VISIT(traverse_module_state->__pyx_tuple_);
+  Py_VISIT(traverse_module_state->__pyx_slice__3);
+  Py_VISIT(traverse_module_state->__pyx_tuple__2);
+  Py_VISIT(traverse_module_state->__pyx_tuple__6);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2376,2031 +2535,1429 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
-#define __pyx_n_u_NFD __pyx_mstate_global->__pyx_n_u_NFD
-#define __pyx_kp_u_Not_Specified_the_language_for_t __pyx_mstate_global->__pyx_kp_u_Not_Specified_the_language_for_t
-#define __pyx_n_s_RSLPStemmer __pyx_mstate_global->__pyx_n_s_RSLPStemmer
-#define __pyx_n_s_SnowballStemmer __pyx_mstate_global->__pyx_n_s_SnowballStemmer
-#define __pyx_kp_u_W __pyx_mstate_global->__pyx_kp_u_W
-#define __pyx_n_s_WordNetLemmatizer __pyx_mstate_global->__pyx_n_s_WordNetLemmatizer
-#define __pyx_n_s__19 __pyx_mstate_global->__pyx_n_s__19
-#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
-#define __pyx_kp_u__3 __pyx_mstate_global->__pyx_kp_u__3
+#define __pyx_n_s_CAP_PROP_FRAME_COUNT __pyx_mstate_global->__pyx_n_s_CAP_PROP_FRAME_COUNT
+#define __pyx_n_s_ImageObjectsExtractor __pyx_mstate_global->__pyx_n_s_ImageObjectsExtractor
+#define __pyx_n_s_NMSBoxes __pyx_mstate_global->__pyx_n_s_NMSBoxes
+#define __pyx_n_s_VideoCapture __pyx_mstate_global->__pyx_n_s_VideoCapture
 #define __pyx_n_s__4 __pyx_mstate_global->__pyx_n_s__4
+#define __pyx_kp_u__5 __pyx_mstate_global->__pyx_kp_u__5
+#define __pyx_n_s__8 __pyx_mstate_global->__pyx_n_s__8
+#define __pyx_n_s_argmax __pyx_mstate_global->__pyx_n_s_argmax
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_n_s_c __pyx_mstate_global->__pyx_n_s_c
+#define __pyx_n_s_blob __pyx_mstate_global->__pyx_n_s_blob
+#define __pyx_n_s_blobFromImage __pyx_mstate_global->__pyx_n_s_blobFromImage
+#define __pyx_n_s_boxes __pyx_mstate_global->__pyx_n_s_boxes
+#define __pyx_n_s_center_x __pyx_mstate_global->__pyx_n_s_center_x
+#define __pyx_n_s_center_y __pyx_mstate_global->__pyx_n_s_center_y
+#define __pyx_n_s_channels __pyx_mstate_global->__pyx_n_s_channels
 #define __pyx_n_s_class_getitem __pyx_mstate_global->__pyx_n_s_class_getitem
+#define __pyx_n_s_class_id __pyx_mstate_global->__pyx_n_s_class_id
+#define __pyx_n_s_class_ids __pyx_mstate_global->__pyx_n_s_class_ids
+#define __pyx_n_s_classes __pyx_mstate_global->__pyx_n_s_classes
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_combining __pyx_mstate_global->__pyx_n_s_combining
-#define __pyx_n_u_en __pyx_mstate_global->__pyx_n_u_en
-#define __pyx_n_u_english __pyx_mstate_global->__pyx_n_u_english
-#define __pyx_n_u_es __pyx_mstate_global->__pyx_n_u_es
+#define __pyx_n_s_confidence __pyx_mstate_global->__pyx_n_s_confidence
+#define __pyx_n_s_confidences __pyx_mstate_global->__pyx_n_s_confidences
+#define __pyx_n_s_crop __pyx_mstate_global->__pyx_n_s_crop
+#define __pyx_n_s_cv2 __pyx_mstate_global->__pyx_n_s_cv2
+#define __pyx_n_s_detection __pyx_mstate_global->__pyx_n_s_detection
+#define __pyx_n_s_dnn __pyx_mstate_global->__pyx_n_s_dnn
+#define __pyx_n_s_forward __pyx_mstate_global->__pyx_n_s_forward
+#define __pyx_n_s_frame __pyx_mstate_global->__pyx_n_s_frame
+#define __pyx_n_s_frame_count __pyx_mstate_global->__pyx_n_s_frame_count
+#define __pyx_n_s_get __pyx_mstate_global->__pyx_n_s_get
+#define __pyx_n_s_get_layers __pyx_mstate_global->__pyx_n_s_get_layers
+#define __pyx_n_s_h __pyx_mstate_global->__pyx_n_s_h
+#define __pyx_n_s_height __pyx_mstate_global->__pyx_n_s_height
+#define __pyx_n_s_i __pyx_mstate_global->__pyx_n_s_i
+#define __pyx_n_s_identify_objects_in_video __pyx_mstate_global->__pyx_n_s_identify_objects_in_video
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_indexes __pyx_mstate_global->__pyx_n_s_indexes
 #define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
-#define __pyx_kp_u_it_doesn_t_have_tokens_for_text __pyx_mstate_global->__pyx_kp_u_it_doesn_t_have_tokens_for_text
-#define __pyx_n_s_language __pyx_mstate_global->__pyx_n_s_language
-#define __pyx_n_s_languages __pyx_mstate_global->__pyx_n_s_languages
-#define __pyx_n_s_lemantization __pyx_mstate_global->__pyx_n_s_lemantization
-#define __pyx_n_s_lower __pyx_mstate_global->__pyx_n_s_lower
+#define __pyx_n_s_label __pyx_mstate_global->__pyx_n_s_label
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_nltk_corpus __pyx_mstate_global->__pyx_n_s_nltk_corpus
-#define __pyx_n_s_nltk_stem __pyx_mstate_global->__pyx_n_s_nltk_stem
-#define __pyx_n_s_nltk_tokenize __pyx_mstate_global->__pyx_n_s_nltk_tokenize
-#define __pyx_n_s_normalize __pyx_mstate_global->__pyx_n_s_normalize
-#define __pyx_n_s_normalize_text __pyx_mstate_global->__pyx_n_s_normalize_text
-#define __pyx_n_s_normalized_text __pyx_mstate_global->__pyx_n_s_normalized_text
-#define __pyx_n_u_portuguese __pyx_mstate_global->__pyx_n_u_portuguese
-#define __pyx_n_s_preprocess_text_for_lemantizatio __pyx_mstate_global->__pyx_n_s_preprocess_text_for_lemantizatio
-#define __pyx_n_s_preprocess_text_for_stemmetizati __pyx_mstate_global->__pyx_n_s_preprocess_text_for_stemmetizati
-#define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
-#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
-#define __pyx_n_s_re __pyx_mstate_global->__pyx_n_s_re
-#define __pyx_n_s_remove_accents __pyx_mstate_global->__pyx_n_s_remove_accents
-#define __pyx_n_s_remove_all_accents __pyx_mstate_global->__pyx_n_s_remove_all_accents
-#define __pyx_n_s_remove_alphanumeric_character __pyx_mstate_global->__pyx_n_s_remove_alphanumeric_character
-#define __pyx_n_u_spanish __pyx_mstate_global->__pyx_n_u_spanish
+#define __pyx_n_s_net __pyx_mstate_global->__pyx_n_s_net
+#define __pyx_n_s_np __pyx_mstate_global->__pyx_n_s_np
+#define __pyx_n_s_numpy __pyx_mstate_global->__pyx_n_s_numpy
+#define __pyx_n_s_objects __pyx_mstate_global->__pyx_n_s_objects
+#define __pyx_n_s_objects_per_frame __pyx_mstate_global->__pyx_n_s_objects_per_frame
+#define __pyx_n_s_out __pyx_mstate_global->__pyx_n_s_out
+#define __pyx_n_s_output_layers __pyx_mstate_global->__pyx_n_s_output_layers
+#define __pyx_n_s_outs __pyx_mstate_global->__pyx_n_s_outs
+#define __pyx_n_s_range __pyx_mstate_global->__pyx_n_s_range
+#define __pyx_n_s_read __pyx_mstate_global->__pyx_n_s_read
+#define __pyx_n_s_release __pyx_mstate_global->__pyx_n_s_release
+#define __pyx_n_s_ret __pyx_mstate_global->__pyx_n_s_ret
+#define __pyx_n_s_scores __pyx_mstate_global->__pyx_n_s_scores
+#define __pyx_n_s_setInput __pyx_mstate_global->__pyx_n_s_setInput
+#define __pyx_n_s_shape __pyx_mstate_global->__pyx_n_s_shape
 #define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
-#define __pyx_n_s_split __pyx_mstate_global->__pyx_n_s_split
-#define __pyx_kp_s_src_wrapper_infra_PreProcessing __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_PreProcessing
-#define __pyx_n_s_stem __pyx_mstate_global->__pyx_n_s_stem
-#define __pyx_n_s_stemmer __pyx_mstate_global->__pyx_n_s_stemmer
-#define __pyx_n_s_stopwords __pyx_mstate_global->__pyx_n_s_stopwords
-#define __pyx_n_s_sub __pyx_mstate_global->__pyx_n_s_sub
-#define __pyx_n_s_supportedLanguage __pyx_mstate_global->__pyx_n_s_supportedLanguage
+#define __pyx_kp_s_src_wrapper_infra_VideoObjectsEx __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
-#define __pyx_n_s_unicodedata __pyx_mstate_global->__pyx_n_s_unicodedata
-#define __pyx_kp_u_w_s __pyx_mstate_global->__pyx_kp_u_w_s
-#define __pyx_n_s_word __pyx_mstate_global->__pyx_n_s_word
-#define __pyx_n_s_word_tokenize __pyx_mstate_global->__pyx_n_s_word_tokenize
-#define __pyx_n_s_words __pyx_mstate_global->__pyx_n_s_words
-#define __pyx_n_s_wrapper_infra_PreProcessing __pyx_mstate_global->__pyx_n_s_wrapper_infra_PreProcessing
-#define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
-#define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
-#define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
-#define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
-#define __pyx_tuple__13 __pyx_mstate_global->__pyx_tuple__13
-#define __pyx_tuple__15 __pyx_mstate_global->__pyx_tuple__15
-#define __pyx_tuple__16 __pyx_mstate_global->__pyx_tuple__16
-#define __pyx_tuple__18 __pyx_mstate_global->__pyx_tuple__18
-#define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
-#define __pyx_codeobj__8 __pyx_mstate_global->__pyx_codeobj__8
-#define __pyx_codeobj__10 __pyx_mstate_global->__pyx_codeobj__10
-#define __pyx_codeobj__12 __pyx_mstate_global->__pyx_codeobj__12
-#define __pyx_codeobj__14 __pyx_mstate_global->__pyx_codeobj__14
-#define __pyx_codeobj__17 __pyx_mstate_global->__pyx_codeobj__17
+#define __pyx_n_s_video_capture __pyx_mstate_global->__pyx_n_s_video_capture
+#define __pyx_n_s_video_path __pyx_mstate_global->__pyx_n_s_video_path
+#define __pyx_n_s_w __pyx_mstate_global->__pyx_n_s_w
+#define __pyx_n_s_width __pyx_mstate_global->__pyx_n_s_width
+#define __pyx_n_s_wrapper_infra_VideoObjectsExtrac __pyx_mstate_global->__pyx_n_s_wrapper_infra_VideoObjectsExtrac
+#define __pyx_n_s_x __pyx_mstate_global->__pyx_n_s_x
+#define __pyx_n_s_y __pyx_mstate_global->__pyx_n_s_y
+#define __pyx_float_0_4 __pyx_mstate_global->__pyx_float_0_4
+#define __pyx_float_0_5 __pyx_mstate_global->__pyx_float_0_5
+#define __pyx_float_0_00392 __pyx_mstate_global->__pyx_float_0_00392
+#define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
+#define __pyx_int_2 __pyx_mstate_global->__pyx_int_2
+#define __pyx_int_5 __pyx_mstate_global->__pyx_int_5
+#define __pyx_int_416 __pyx_mstate_global->__pyx_int_416
+#define __pyx_tuple_ __pyx_mstate_global->__pyx_tuple_
+#define __pyx_slice__3 __pyx_mstate_global->__pyx_slice__3
+#define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
+#define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
+#define __pyx_codeobj__7 __pyx_mstate_global->__pyx_codeobj__7
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/PreProcessing.pyx":13
- * }
- * 
- * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character, "remove_alphanumeric_character(word)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character = {"remove_alphanumeric_character", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_word = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("remove_alphanumeric_character (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_word,0};
-    PyObject* values[1] = {0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_word)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 13, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "remove_alphanumeric_character") < 0)) __PYX_ERR(0, 13, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v_word = values[0];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("remove_alphanumeric_character", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 13, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_alphanumeric_character", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(__pyx_self, __pyx_v_word);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_remove_alphanumeric_character(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("remove_alphanumeric_character", 0);
-
-  /* "wrapper/infra/PreProcessing.pyx":14
+/* "wrapper/infra/VideoObjectsExtractor.pyx":5
+ * import numpy as np
  * 
- * def remove_alphanumeric_character(word):
- *     print(word)             # <<<<<<<<<<<<<<
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):
- */
-  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_word); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":15
- * def remove_alphanumeric_character(word):
- *     print(word)
- *     return re.sub(r'\W+', '', word)             # <<<<<<<<<<<<<<
- * def lemantization(word, stemmer):
- *     print(word)
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 15, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_W, __pyx_kp_u_, __pyx_v_word};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  }
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
-  goto __pyx_L0;
-
-  /* "wrapper/infra/PreProcessing.pyx":13
- * }
+ * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
+ *     net, output_layers, classes = get_layers()
  * 
- * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_alphanumeric_character", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/PreProcessing.pyx":16
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return stemmer.stem(word)
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_2lemantization, "lemantization(word, stemmer)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_3lemantization = {"lemantization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_2lemantization};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_3lemantization(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video, "identify_objects_in_video(video_path)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video = {"identify_objects_in_video", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video};
+static PyObject *__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_word = 0;
-  PyObject *__pyx_v_stemmer = 0;
+  PyObject *__pyx_v_video_path = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("lemantization (wrapper)", 0);
+  __Pyx_RefNannySetupContext("identify_objects_in_video (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_word,&__pyx_n_s_stemmer,0};
-    PyObject* values[2] = {0,0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_word)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 16, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_stemmer)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 16, __pyx_L3_error)
-        else {
-          __Pyx_RaiseArgtupleInvalid("lemantization", 1, 2, 2, 1); __PYX_ERR(0, 16, __pyx_L3_error)
-        }
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "lemantization") < 0)) __PYX_ERR(0, 16, __pyx_L3_error)
-      }
-    } else if (unlikely(__pyx_nargs != 2)) {
-      goto __pyx_L5_argtuple_error;
-    } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-    }
-    __pyx_v_word = values[0];
-    __pyx_v_stemmer = values[1];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("lemantization", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 16, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(__pyx_self, __pyx_v_word, __pyx_v_stemmer);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_2lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_stemmer) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("lemantization", 0);
-
-  /* "wrapper/infra/PreProcessing.pyx":17
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):
- *     print(word)             # <<<<<<<<<<<<<<
- *     return stemmer.stem(word)
- * 
- */
-  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_word); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":18
- * def lemantization(word, stemmer):
- *     print(word)
- *     return stemmer.stem(word)             # <<<<<<<<<<<<<<
- * 
- * # Tokenizao, remoo de stop words e lematizao
- */
-  __Pyx_XDECREF(__pyx_r);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_stemmer, __pyx_n_s_stem); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_word};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __pyx_r = __pyx_t_1;
-  __pyx_t_1 = 0;
-  goto __pyx_L0;
-
-  /* "wrapper/infra/PreProcessing.pyx":16
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return stemmer.stem(word)
- */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/PreProcessing.pyx":22
- * # Tokenizao, remoo de stop words e lematizao
- * # for lsi, td-idf or multiwords?
- * def preprocess_text_for_lemantization(text):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization, "preprocess_text_for_lemantization(text)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization = {"preprocess_text_for_lemantization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_text = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("preprocess_text_for_lemantization (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_video_path,0};
     PyObject* values[1] = {0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 22, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_video_path)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 5, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "preprocess_text_for_lemantization") < 0)) __PYX_ERR(0, 22, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "identify_objects_in_video") < 0)) __PYX_ERR(0, 5, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
-    __pyx_v_text = values[0];
+    __pyx_v_video_path = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("preprocess_text_for_lemantization", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 22, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("identify_objects_in_video", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 5, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.infra.VideoObjectsExtractor.identify_objects_in_video", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(__pyx_self, __pyx_v_text);
+  __pyx_r = __pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(__pyx_self, __pyx_v_video_path);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_4preprocess_text_for_lemantization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text) {
-  PyObject *__pyx_v_words = NULL;
-  PyObject *__pyx_v_stemmer = NULL;
-  PyObject *__pyx_7genexpr__pyx_v_word = NULL;
-  PyObject *__pyx_8genexpr1__pyx_v_word = NULL;
+static PyObject *__pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_video_path) {
+  PyObject *__pyx_v_net = NULL;
+  PyObject *__pyx_v_output_layers = NULL;
+  PyObject *__pyx_v_classes = NULL;
+  PyObject *__pyx_v_video_capture = NULL;
+  PyObject *__pyx_v_frame_count = NULL;
+  PyObject *__pyx_v_objects_per_frame = NULL;
+  PyObject *__pyx_v_i = NULL;
+  PyObject *__pyx_v_ret = NULL;
+  PyObject *__pyx_v_frame = NULL;
+  PyObject *__pyx_v_height = NULL;
+  PyObject *__pyx_v_width = NULL;
+  CYTHON_UNUSED PyObject *__pyx_v_channels = NULL;
+  PyObject *__pyx_v_blob = NULL;
+  PyObject *__pyx_v_outs = NULL;
+  PyObject *__pyx_v_class_ids = NULL;
+  PyObject *__pyx_v_confidences = NULL;
+  PyObject *__pyx_v_boxes = NULL;
+  PyObject *__pyx_v_out = NULL;
+  PyObject *__pyx_v_detection = NULL;
+  PyObject *__pyx_v_scores = NULL;
+  PyObject *__pyx_v_class_id = NULL;
+  PyObject *__pyx_v_confidence = NULL;
+  PyObject *__pyx_v_center_x = NULL;
+  PyObject *__pyx_v_center_y = NULL;
+  PyObject *__pyx_v_w = NULL;
+  PyObject *__pyx_v_h = NULL;
+  PyObject *__pyx_v_x = NULL;
+  PyObject *__pyx_v_y = NULL;
+  PyObject *__pyx_v_indexes = NULL;
+  PyObject *__pyx_v_objects = NULL;
+  PyObject *__pyx_v_label = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
   int __pyx_t_4;
   PyObject *__pyx_t_5 = NULL;
-  Py_ssize_t __pyx_t_6;
+  PyObject *__pyx_t_6 = NULL;
   PyObject *(*__pyx_t_7)(PyObject *);
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
+  Py_ssize_t __pyx_t_8;
+  PyObject *(*__pyx_t_9)(PyObject *);
+  int __pyx_t_10;
+  int __pyx_t_11;
+  PyObject *__pyx_t_12 = NULL;
+  Py_ssize_t __pyx_t_13;
+  PyObject *(*__pyx_t_14)(PyObject *);
+  Py_ssize_t __pyx_t_15;
+  PyObject *(*__pyx_t_16)(PyObject *);
+  int __pyx_t_17;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("preprocess_text_for_lemantization", 0);
-  __Pyx_INCREF(__pyx_v_text);
+  __Pyx_RefNannySetupContext("identify_objects_in_video", 0);
 
-  /* "wrapper/infra/PreProcessing.pyx":23
- * # for lsi, td-idf or multiwords?
- * def preprocess_text_for_lemantization(text):
- *     text = text.lower()             # <<<<<<<<<<<<<<
- *     text = re.sub(r'[^\w\s]', '', text)
- *     words = word_tokenize(text, language='portuguese')
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":6
+ * 
+ * def identify_objects_in_video(video_path):
+ *     net, output_layers, classes = get_layers()             # <<<<<<<<<<<<<<
+ * 
+ *     # Usar OpenCV para extrair os frames do vdeo
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_lower); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_get_layers); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
       __Pyx_INCREF(__pyx_t_3);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_2, function);
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[1] = {__pyx_t_3, };
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 23, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
-  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
-  __pyx_t_1 = 0;
+  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
+    PyObject* sequence = __pyx_t_1;
+    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
+    if (unlikely(size != 3)) {
+      if (size > 3) __Pyx_RaiseTooManyValuesError(3);
+      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
+      __PYX_ERR(0, 6, __pyx_L1_error)
+    }
+    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    if (likely(PyTuple_CheckExact(sequence))) {
+      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
+      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
+      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 2); 
+    } else {
+      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
+      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
+      __pyx_t_5 = PyList_GET_ITEM(sequence, 2); 
+    }
+    __Pyx_INCREF(__pyx_t_2);
+    __Pyx_INCREF(__pyx_t_3);
+    __Pyx_INCREF(__pyx_t_5);
+    #else
+    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 6, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    #endif
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  } else {
+    Py_ssize_t index = -1;
+    __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 6, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6);
+    index = 0; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GOTREF(__pyx_t_2);
+    index = 1; __pyx_t_3 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GOTREF(__pyx_t_3);
+    index = 2; __pyx_t_5 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_5)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GOTREF(__pyx_t_5);
+    if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+    __pyx_t_7 = NULL;
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    goto __pyx_L4_unpacking_done;
+    __pyx_L3_unpacking_failed:;
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_7 = NULL;
+    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
+    __PYX_ERR(0, 6, __pyx_L1_error)
+    __pyx_L4_unpacking_done:;
+  }
+  __pyx_v_net = __pyx_t_2;
+  __pyx_t_2 = 0;
+  __pyx_v_output_layers = __pyx_t_3;
+  __pyx_t_3 = 0;
+  __pyx_v_classes = __pyx_t_5;
+  __pyx_t_5 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":24
- * def preprocess_text_for_lemantization(text):
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)             # <<<<<<<<<<<<<<
- *     words = word_tokenize(text, language='portuguese')
- *     stemmer = RSLPStemmer()
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":9
+ * 
+ *     # Usar OpenCV para extrair os frames do vdeo
+ *     video_capture = cv2.VideoCapture(video_path)             # <<<<<<<<<<<<<<
+ *     frame_count = int(video_capture.get(cv2.CAP_PROP_FRAME_COUNT))
+ * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 24, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_VideoCapture); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __pyx_t_5 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_2)) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_5)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_5);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_w_s, __pyx_kp_u_, __pyx_v_text};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)
+    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_v_video_path};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 9, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
+  __pyx_v_video_capture = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":25
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)
- *     words = word_tokenize(text, language='portuguese')             # <<<<<<<<<<<<<<
- *     stemmer = RSLPStemmer()
- *     words = [lemantization(word, stemmer) for word in words]
- */
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 25, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 25, __pyx_L1_error)
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":10
+ *     # Usar OpenCV para extrair os frames do vdeo
+ *     video_capture = cv2.VideoCapture(video_path)
+ *     frame_count = int(video_capture.get(cv2.CAP_PROP_FRAME_COUNT))             # <<<<<<<<<<<<<<
+ * 
+ *     # Inicializar algumas listas para armazenar os resultados em cada frame
+ */
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_get); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_v_text);
-  __Pyx_GIVEREF(__pyx_v_text);
-  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_text);
-  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 25, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_n_u_portuguese) < 0) __PYX_ERR(0, 25, __pyx_L1_error)
-  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_v_words = __pyx_t_5;
-  __pyx_t_5 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":26
- *     text = re.sub(r'[^\w\s]', '', text)
- *     words = word_tokenize(text, language='portuguese')
- *     stemmer = RSLPStemmer()             # <<<<<<<<<<<<<<
- *     words = [lemantization(word, stemmer) for word in words]
- *     words = [word for word in words if word not in stopwords.words('portuguese')]
- */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_RSLPStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_CAP_PROP_FRAME_COUNT); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __pyx_t_5 = NULL;
   __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_5)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_5);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __Pyx_DECREF_SET(__pyx_t_3, function);
       __pyx_t_4 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
-    __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 26, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
+    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_2};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 10, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  __pyx_v_stemmer = __pyx_t_5;
-  __pyx_t_5 = 0;
+  __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_v_frame_count = __pyx_t_3;
+  __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":27
- *     words = word_tokenize(text, language='portuguese')
- *     stemmer = RSLPStemmer()
- *     words = [lemantization(word, stemmer) for word in words]             # <<<<<<<<<<<<<<
- *     words = [word for word in words if word not in stopwords.words('portuguese')]
- *     return words
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":13
+ * 
+ *     # Inicializar algumas listas para armazenar os resultados em cada frame
+ *     objects_per_frame = []             # <<<<<<<<<<<<<<
+ * 
+ *     for i in range(frame_count):
  */
-  { /* enter inner scope */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 27, __pyx_L5_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
-      __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
-      __pyx_t_7 = NULL;
-    } else {
-      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 27, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 27, __pyx_L5_error)
-    }
-    for (;;) {
-      if (likely(!__pyx_t_7)) {
-        if (likely(PyList_CheckExact(__pyx_t_2))) {
-          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 27, __pyx_L5_error)
-          #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 27, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          #endif
-        } else {
-          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 27, __pyx_L5_error)
-          #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 27, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          #endif
-        }
-      } else {
-        __pyx_t_3 = __pyx_t_7(__pyx_t_2);
-        if (unlikely(!__pyx_t_3)) {
-          PyObject* exc_type = PyErr_Occurred();
-          if (exc_type) {
-            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 27, __pyx_L5_error)
-          }
-          break;
-        }
-        __Pyx_GOTREF(__pyx_t_3);
-      }
-      __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_word, __pyx_t_3);
-      __pyx_t_3 = 0;
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_lemantization); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 27, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_8 = NULL;
-      __pyx_t_4 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
-        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_1);
-        if (likely(__pyx_t_8)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-          __Pyx_INCREF(__pyx_t_8);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_1, function);
-          __pyx_t_4 = 1;
-        }
-      }
-      {
-        PyObject *__pyx_callargs[3] = {__pyx_t_8, __pyx_7genexpr__pyx_v_word, __pyx_v_stemmer};
-        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
-        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 27, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      }
-      if (unlikely(__Pyx_ListComp_Append(__pyx_t_5, (PyObject*)__pyx_t_3))) __PYX_ERR(0, 27, __pyx_L5_error)
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word); __pyx_7genexpr__pyx_v_word = 0;
-    goto __pyx_L9_exit_scope;
-    __pyx_L5_error:;
-    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word); __pyx_7genexpr__pyx_v_word = 0;
-    goto __pyx_L1_error;
-    __pyx_L9_exit_scope:;
-  } /* exit inner scope */
-  __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_5);
-  __pyx_t_5 = 0;
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_v_objects_per_frame = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":28
- *     stemmer = RSLPStemmer()
- *     words = [lemantization(word, stemmer) for word in words]
- *     words = [word for word in words if word not in stopwords.words('portuguese')]             # <<<<<<<<<<<<<<
- *     return words
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":15
+ *     objects_per_frame = []
  * 
+ *     for i in range(frame_count):             # <<<<<<<<<<<<<<
+ *         ret, frame = video_capture.read()
+ *         if not ret:
  */
-  { /* enter inner scope */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 28, __pyx_L12_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
-      __pyx_t_2 = __pyx_v_words; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
-      __pyx_t_7 = NULL;
-    } else {
-      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L12_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 28, __pyx_L12_error)
-    }
-    for (;;) {
-      if (likely(!__pyx_t_7)) {
-        if (likely(PyList_CheckExact(__pyx_t_2))) {
-          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 28, __pyx_L12_error)
-          #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L12_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          #endif
-        } else {
-          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 28, __pyx_L12_error)
-          #else
-          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L12_error)
-          __Pyx_GOTREF(__pyx_t_3);
-          #endif
-        }
+  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_v_frame_count); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
+    __pyx_t_1 = __pyx_t_3; __Pyx_INCREF(__pyx_t_1); __pyx_t_8 = 0;
+    __pyx_t_9 = NULL;
+  } else {
+    __pyx_t_8 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 15, __pyx_L1_error)
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  for (;;) {
+    if (likely(!__pyx_t_9)) {
+      if (likely(PyList_CheckExact(__pyx_t_1))) {
+        if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_1)) break;
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L1_error)
+        #else
+        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        #endif
       } else {
-        __pyx_t_3 = __pyx_t_7(__pyx_t_2);
-        if (unlikely(!__pyx_t_3)) {
-          PyObject* exc_type = PyErr_Occurred();
-          if (exc_type) {
-            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 28, __pyx_L12_error)
-          }
-          break;
-        }
+        if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
+        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L1_error)
+        #else
+        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
+        #endif
       }
-      __Pyx_XDECREF_SET(__pyx_8genexpr1__pyx_v_word, __pyx_t_3);
-      __pyx_t_3 = 0;
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L12_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_words); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 28, __pyx_L12_error)
-      __Pyx_GOTREF(__pyx_t_8);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __pyx_t_1 = NULL;
-      __pyx_t_4 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
-        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_8);
-        if (likely(__pyx_t_1)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
-          __Pyx_INCREF(__pyx_t_1);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_8, function);
-          __pyx_t_4 = 1;
+    } else {
+      __pyx_t_3 = __pyx_t_9(__pyx_t_1);
+      if (unlikely(!__pyx_t_3)) {
+        PyObject* exc_type = PyErr_Occurred();
+        if (exc_type) {
+          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+          else __PYX_ERR(0, 15, __pyx_L1_error)
         }
+        break;
       }
-      {
-        PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_n_u_portuguese};
-        __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L12_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      }
-      __pyx_t_9 = (__Pyx_PySequence_ContainsTF(__pyx_8genexpr1__pyx_v_word, __pyx_t_3, Py_NE)); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 28, __pyx_L12_error)
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (__pyx_t_9) {
-        if (unlikely(__Pyx_ListComp_Append(__pyx_t_5, (PyObject*)__pyx_8genexpr1__pyx_v_word))) __PYX_ERR(0, 28, __pyx_L12_error)
-      }
+      __Pyx_GOTREF(__pyx_t_3);
     }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word); __pyx_8genexpr1__pyx_v_word = 0;
-    goto __pyx_L17_exit_scope;
-    __pyx_L12_error:;
-    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word); __pyx_8genexpr1__pyx_v_word = 0;
-    goto __pyx_L1_error;
-    __pyx_L17_exit_scope:;
-  } /* exit inner scope */
-  __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_5);
-  __pyx_t_5 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":29
- *     words = [lemantization(word, stemmer) for word in words]
- *     words = [word for word in words if word not in stopwords.words('portuguese')]
- *     return words             # <<<<<<<<<<<<<<
- * 
- * def remove_accents(text):
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_words);
-  __pyx_r = __pyx_v_words;
-  goto __pyx_L0;
-
-  /* "wrapper/infra/PreProcessing.pyx":22
- * # Tokenizao, remoo de stop words e lematizao
- * # for lsi, td-idf or multiwords?
- * def preprocess_text_for_lemantization(text):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_lemantization", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_words);
-  __Pyx_XDECREF(__pyx_v_stemmer);
-  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_word);
-  __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_word);
-  __Pyx_XDECREF(__pyx_v_text);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
+    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
+    __pyx_t_3 = 0;
 
-/* "wrapper/infra/PreProcessing.pyx":31
- *     return words
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":16
  * 
- * def remove_accents(text):             # <<<<<<<<<<<<<<
- *     normalized_text = unicodedata.normalize('NFD', text)
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+ *     for i in range(frame_count):
+ *         ret, frame = video_capture.read()             # <<<<<<<<<<<<<<
+ *         if not ret:
+ *             break
  */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_6remove_accents, "remove_accents(text)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_7remove_accents = {"remove_accents", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_6remove_accents};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_7remove_accents(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_text = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("remove_accents (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,0};
-    PyObject* values[1] = {0};
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_read); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_5 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
       }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
+    }
+    {
+      PyObject *__pyx_callargs[1] = {__pyx_t_5, };
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    }
+    if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
+      PyObject* sequence = __pyx_t_3;
+      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
+      if (unlikely(size != 2)) {
+        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
+        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
+        __PYX_ERR(0, 16, __pyx_L1_error)
       }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "remove_accents") < 0)) __PYX_ERR(0, 31, __pyx_L3_error)
+      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+      if (likely(PyTuple_CheckExact(sequence))) {
+        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
+        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
+      } else {
+        __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
+        __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
       }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_5);
+      #else
+      __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 16, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      #endif
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-    }
-    __pyx_v_text = values[0];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("remove_accents", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 31, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_accents", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(__pyx_self, __pyx_v_text);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_6remove_accents(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text) {
-  PyObject *__pyx_v_normalized_text = NULL;
-  PyObject *__pyx_8genexpr2__pyx_v_c = NULL;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  Py_ssize_t __pyx_t_5;
-  PyObject *(*__pyx_t_6)(PyObject *);
-  PyObject *__pyx_t_7 = NULL;
-  PyObject *__pyx_t_8 = NULL;
-  int __pyx_t_9;
-  int __pyx_t_10;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("remove_accents", 0);
-
-  /* "wrapper/infra/PreProcessing.pyx":32
- * 
- * def remove_accents(text):
- *     normalized_text = unicodedata.normalize('NFD', text)             # <<<<<<<<<<<<<<
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+      Py_ssize_t index = -1;
+      __pyx_t_6 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 16, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6);
+      index = 0; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L7_unpacking_failed;
+      __Pyx_GOTREF(__pyx_t_2);
+      index = 1; __pyx_t_5 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_5)) goto __pyx_L7_unpacking_failed;
+      __Pyx_GOTREF(__pyx_t_5);
+      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 2) < 0) __PYX_ERR(0, 16, __pyx_L1_error)
+      __pyx_t_7 = NULL;
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      goto __pyx_L8_unpacking_done;
+      __pyx_L7_unpacking_failed:;
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      __pyx_t_7 = NULL;
+      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
+      __PYX_ERR(0, 16, __pyx_L1_error)
+      __pyx_L8_unpacking_done:;
+    }
+    __Pyx_XDECREF_SET(__pyx_v_ret, __pyx_t_2);
+    __pyx_t_2 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_frame, __pyx_t_5);
+    __pyx_t_5 = 0;
+
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":17
+ *     for i in range(frame_count):
+ *         ret, frame = video_capture.read()
+ *         if not ret:             # <<<<<<<<<<<<<<
+ *             break
  * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_unicodedata); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_normalize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[3] = {__pyx_t_2, __pyx_n_u_NFD, __pyx_v_text};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  }
-  __pyx_v_normalized_text = __pyx_t_1;
-  __pyx_t_1 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":33
- * def remove_accents(text):
- *     normalized_text = unicodedata.normalize('NFD', text)
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])             # <<<<<<<<<<<<<<
+    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_v_ret); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 17, __pyx_L1_error)
+    __pyx_t_11 = (!__pyx_t_10);
+    if (__pyx_t_11) {
+
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":18
+ *         ret, frame = video_capture.read()
+ *         if not ret:
+ *             break             # <<<<<<<<<<<<<<
  * 
- * def normalize_text(text, remove_all_accents=True):
+ *         height, width, channels = frame.shape
  */
-  __Pyx_XDECREF(__pyx_r);
-  { /* enter inner scope */
-    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L5_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    if (likely(PyList_CheckExact(__pyx_v_normalized_text)) || PyTuple_CheckExact(__pyx_v_normalized_text)) {
-      __pyx_t_3 = __pyx_v_normalized_text; __Pyx_INCREF(__pyx_t_3); __pyx_t_5 = 0;
-      __pyx_t_6 = NULL;
-    } else {
-      __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_normalized_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 33, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __pyx_t_6 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 33, __pyx_L5_error)
-    }
-    for (;;) {
-      if (likely(!__pyx_t_6)) {
-        if (likely(PyList_CheckExact(__pyx_t_3))) {
-          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_3)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 33, __pyx_L5_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        } else {
-          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_2); __pyx_t_5++; if (unlikely((0 < 0))) __PYX_ERR(0, 33, __pyx_L5_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        }
-      } else {
-        __pyx_t_2 = __pyx_t_6(__pyx_t_3);
-        if (unlikely(!__pyx_t_2)) {
-          PyObject* exc_type = PyErr_Occurred();
-          if (exc_type) {
-            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 33, __pyx_L5_error)
-          }
-          break;
-        }
-        __Pyx_GOTREF(__pyx_t_2);
-      }
-      __Pyx_XDECREF_SET(__pyx_8genexpr2__pyx_v_c, __pyx_t_2);
-      __pyx_t_2 = 0;
-      __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_unicodedata); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 33, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_7);
-      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_combining); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 33, __pyx_L5_error)
-      __Pyx_GOTREF(__pyx_t_8);
-      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
-      __pyx_t_7 = NULL;
-      __pyx_t_4 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
-        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
-        if (likely(__pyx_t_7)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
-          __Pyx_INCREF(__pyx_t_7);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_8, function);
-          __pyx_t_4 = 1;
-        }
-      }
-      {
-        PyObject *__pyx_callargs[2] = {__pyx_t_7, __pyx_8genexpr2__pyx_v_c};
-        __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      }
-      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 33, __pyx_L5_error)
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __pyx_t_10 = (!__pyx_t_9);
-      if (__pyx_t_10) {
-        if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_8genexpr2__pyx_v_c))) __PYX_ERR(0, 33, __pyx_L5_error)
-      }
-    }
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c); __pyx_8genexpr2__pyx_v_c = 0;
-    goto __pyx_L10_exit_scope;
-    __pyx_L5_error:;
-    __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c); __pyx_8genexpr2__pyx_v_c = 0;
-    goto __pyx_L1_error;
-    __pyx_L10_exit_scope:;
-  } /* exit inner scope */
-  __pyx_t_3 = PyUnicode_Join(__pyx_kp_u_, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 33, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_r = __pyx_t_3;
-  __pyx_t_3 = 0;
-  goto __pyx_L0;
+      goto __pyx_L6_break;
 
-  /* "wrapper/infra/PreProcessing.pyx":31
- *     return words
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":17
+ *     for i in range(frame_count):
+ *         ret, frame = video_capture.read()
+ *         if not ret:             # <<<<<<<<<<<<<<
+ *             break
  * 
- * def remove_accents(text):             # <<<<<<<<<<<<<<
- *     normalized_text = unicodedata.normalize('NFD', text)
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
  */
+    }
 
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_7);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.remove_accents", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_normalized_text);
-  __Pyx_XDECREF(__pyx_8genexpr2__pyx_v_c);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/PreProcessing.pyx":35
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":20
+ *             break
  * 
- * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     if remove_all_accents:
+ *         height, width, channels = frame.shape             # <<<<<<<<<<<<<<
+ *         # Pr-processar a imagem
+ *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)
  */
-
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_8normalize_text, "normalize_text(text, remove_all_accents=True)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_9normalize_text = {"normalize_text", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_8normalize_text};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_9normalize_text(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_text = 0;
-  PyObject *__pyx_v_remove_all_accents = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("normalize_text (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_remove_all_accents,0};
-    PyObject* values[2] = {0,0};
-    values[1] = ((PyObject *)((PyObject *)Py_True));
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 35, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_remove_all_accents);
-          if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 35, __pyx_L3_error)
-        }
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_frame, __pyx_n_s_shape); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
+      PyObject* sequence = __pyx_t_3;
+      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
+      if (unlikely(size != 3)) {
+        if (size > 3) __Pyx_RaiseTooManyValuesError(3);
+        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
+        __PYX_ERR(0, 20, __pyx_L1_error)
       }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "normalize_text") < 0)) __PYX_ERR(0, 35, __pyx_L3_error)
+      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+      if (likely(PyTuple_CheckExact(sequence))) {
+        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
+        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
+        __pyx_t_6 = PyTuple_GET_ITEM(sequence, 2); 
+      } else {
+        __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
+        __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
+        __pyx_t_6 = PyList_GET_ITEM(sequence, 2); 
       }
+      __Pyx_INCREF(__pyx_t_5);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_6);
+      #else
+      __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 20, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 20, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_t_6 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 20, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      #endif
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     } else {
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-    }
-    __pyx_v_text = values[0];
-    __pyx_v_remove_all_accents = values[1];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("normalize_text", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 35, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.normalize_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(__pyx_self, __pyx_v_text, __pyx_v_remove_all_accents);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_8normalize_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_remove_all_accents) {
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_t_5;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("normalize_text", 0);
-  __Pyx_INCREF(__pyx_v_text);
+      Py_ssize_t index = -1;
+      __pyx_t_12 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 20, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_12);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_12);
+      index = 0; __pyx_t_5 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_5)) goto __pyx_L10_unpacking_failed;
+      __Pyx_GOTREF(__pyx_t_5);
+      index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_2)) goto __pyx_L10_unpacking_failed;
+      __Pyx_GOTREF(__pyx_t_2);
+      index = 2; __pyx_t_6 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_6)) goto __pyx_L10_unpacking_failed;
+      __Pyx_GOTREF(__pyx_t_6);
+      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_12), 3) < 0) __PYX_ERR(0, 20, __pyx_L1_error)
+      __pyx_t_7 = NULL;
+      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+      goto __pyx_L11_unpacking_done;
+      __pyx_L10_unpacking_failed:;
+      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+      __pyx_t_7 = NULL;
+      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
+      __PYX_ERR(0, 20, __pyx_L1_error)
+      __pyx_L11_unpacking_done:;
+    }
+    __Pyx_XDECREF_SET(__pyx_v_height, __pyx_t_5);
+    __pyx_t_5 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_width, __pyx_t_2);
+    __pyx_t_2 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_channels, __pyx_t_6);
+    __pyx_t_6 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":36
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":22
+ *         height, width, channels = frame.shape
+ *         # Pr-processar a imagem
+ *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)             # <<<<<<<<<<<<<<
  * 
- * def normalize_text(text, remove_all_accents=True):
- *     text = text.lower()             # <<<<<<<<<<<<<<
- *     if remove_all_accents:
- *         text = remove_accents(text)
+ *         # Executar a inferncia no modelo
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_lower); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 36, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_dnn); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_blobFromImage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = PyTuple_New(5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_INCREF(__pyx_v_frame);
+    __Pyx_GIVEREF(__pyx_v_frame);
+    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_frame);
+    __Pyx_INCREF(__pyx_float_0_00392);
+    __Pyx_GIVEREF(__pyx_float_0_00392);
+    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_float_0_00392);
+    __Pyx_INCREF(__pyx_tuple_);
+    __Pyx_GIVEREF(__pyx_tuple_);
+    PyTuple_SET_ITEM(__pyx_t_6, 2, __pyx_tuple_);
+    __Pyx_INCREF(__pyx_tuple__2);
+    __Pyx_GIVEREF(__pyx_tuple__2);
+    PyTuple_SET_ITEM(__pyx_t_6, 3, __pyx_tuple__2);
+    __Pyx_INCREF(Py_True);
+    __Pyx_GIVEREF(Py_True);
+    PyTuple_SET_ITEM(__pyx_t_6, 4, Py_True);
+    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_crop, Py_False) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, __pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
-  __pyx_t_1 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_blob, __pyx_t_5);
+    __pyx_t_5 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":37
- * def normalize_text(text, remove_all_accents=True):
- *     text = text.lower()
- *     if remove_all_accents:             # <<<<<<<<<<<<<<
- *         text = remove_accents(text)
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_remove_all_accents); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 37, __pyx_L1_error)
-  if (__pyx_t_5) {
-
-    /* "wrapper/infra/PreProcessing.pyx":38
- *     text = text.lower()
- *     if remove_all_accents:
- *         text = remove_accents(text)             # <<<<<<<<<<<<<<
- *     text = re.sub(r'[^\w\s]', '', text)
- *     return text
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":25
+ * 
+ *         # Executar a inferncia no modelo
+ *         net.setInput(blob)             # <<<<<<<<<<<<<<
+ *         outs = net.forward(output_layers)
+ * 
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_remove_accents); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 38, __pyx_L1_error)
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_net, __pyx_n_s_setInput); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 25, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = NULL;
+    __pyx_t_6 = NULL;
     __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_3)) {
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_6)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_6);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_2, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_text};
-      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
+      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_blob};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 25, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
-    __pyx_t_1 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-    /* "wrapper/infra/PreProcessing.pyx":37
- * def normalize_text(text, remove_all_accents=True):
- *     text = text.lower()
- *     if remove_all_accents:             # <<<<<<<<<<<<<<
- *         text = remove_accents(text)
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-  }
-
-  /* "wrapper/infra/PreProcessing.pyx":39
- *     if remove_all_accents:
- *         text = remove_accents(text)
- *     text = re.sub(r'[^\w\s]', '', text)             # <<<<<<<<<<<<<<
- *     return text
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":26
+ *         # Executar a inferncia no modelo
+ *         net.setInput(blob)
+ *         outs = net.forward(output_layers)             # <<<<<<<<<<<<<<
  * 
+ *         # Inicializar algumas listas para armazenar os resultados por frame
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_re); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sub); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 39, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_net, __pyx_n_s_forward); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_6 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
+      }
     }
-  }
-  {
-    PyObject *__pyx_callargs[4] = {__pyx_t_2, __pyx_kp_u_w_s, __pyx_kp_u_, __pyx_v_text};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 3+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  }
-  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
-  __pyx_t_1 = 0;
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_output_layers};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 26, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    }
+    __Pyx_XDECREF_SET(__pyx_v_outs, __pyx_t_5);
+    __pyx_t_5 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":40
- *         text = remove_accents(text)
- *     text = re.sub(r'[^\w\s]', '', text)
- *     return text             # <<<<<<<<<<<<<<
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":29
  * 
- * def preprocess_text_for_stemmetization(text, language = None):
+ *         # Inicializar algumas listas para armazenar os resultados por frame
+ *         class_ids = []             # <<<<<<<<<<<<<<
+ *         confidences = []
+ *         boxes = []
  */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_text);
-  __pyx_r = __pyx_v_text;
-  goto __pyx_L0;
+    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 29, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_XDECREF_SET(__pyx_v_class_ids, ((PyObject*)__pyx_t_5));
+    __pyx_t_5 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":35
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":30
+ *         # Inicializar algumas listas para armazenar os resultados por frame
+ *         class_ids = []
+ *         confidences = []             # <<<<<<<<<<<<<<
+ *         boxes = []
  * 
- * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     if remove_all_accents:
  */
+    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 30, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_XDECREF_SET(__pyx_v_confidences, ((PyObject*)__pyx_t_5));
+    __pyx_t_5 = 0;
 
-  /* function exit code */
-  __pyx_L1_error:;
-  __Pyx_XDECREF(__pyx_t_1);
-  __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.normalize_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __pyx_r = NULL;
-  __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_text);
-  __Pyx_XGIVEREF(__pyx_r);
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-/* "wrapper/infra/PreProcessing.pyx":42
- *     return text
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":31
+ *         class_ids = []
+ *         confidences = []
+ *         boxes = []             # <<<<<<<<<<<<<<
  * 
- * def preprocess_text_for_stemmetization(text, language = None):             # <<<<<<<<<<<<<<
- *     text = normalize_text(text)
- *     words = None
+ *         # Interpretar os resultados
  */
+    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 31, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_XDECREF_SET(__pyx_v_boxes, ((PyObject*)__pyx_t_5));
+    __pyx_t_5 = 0;
 
-/* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_11preprocess_text_for_stemmetization(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13PreProcessing_10preprocess_text_for_stemmetization, "preprocess_text_for_stemmetization(text, language=None)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_13PreProcessing_11preprocess_text_for_stemmetization = {"preprocess_text_for_stemmetization", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13PreProcessing_11preprocess_text_for_stemmetization, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13PreProcessing_10preprocess_text_for_stemmetization};
-static PyObject *__pyx_pw_7wrapper_5infra_13PreProcessing_11preprocess_text_for_stemmetization(PyObject *__pyx_self, 
-#if CYTHON_METH_FASTCALL
-PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
-#else
-PyObject *__pyx_args, PyObject *__pyx_kwds
-#endif
-) {
-  PyObject *__pyx_v_text = 0;
-  PyObject *__pyx_v_language = 0;
-  #if !CYTHON_METH_FASTCALL
-  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
-  #endif
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  PyObject *__pyx_r = 0;
-  __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("preprocess_text_for_stemmetization (wrapper)", 0);
-  {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_language,0};
-    PyObject* values[2] = {0,0};
-    values[1] = ((PyObject *)((PyObject *)Py_None));
-    if (__pyx_kwds) {
-      Py_ssize_t kw_args;
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        CYTHON_FALLTHROUGH;
-        case  0: break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
-      switch (__pyx_nargs) {
-        case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 42, __pyx_L3_error)
-        else goto __pyx_L5_argtuple_error;
-        CYTHON_FALLTHROUGH;
-        case  1:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language);
-          if (value) { values[1] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 42, __pyx_L3_error)
-        }
-      }
-      if (unlikely(kw_args > 0)) {
-        const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "preprocess_text_for_stemmetization") < 0)) __PYX_ERR(0, 42, __pyx_L3_error)
-      }
-    } else {
-      switch (__pyx_nargs) {
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        CYTHON_FALLTHROUGH;
-        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-    }
-    __pyx_v_text = values[0];
-    __pyx_v_language = values[1];
-  }
-  goto __pyx_L4_argument_unpacking_done;
-  __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("preprocess_text_for_stemmetization", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 42, __pyx_L3_error)
-  __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_stemmetization", __pyx_clineno, __pyx_lineno, __pyx_filename);
-  __Pyx_RefNannyFinishContext();
-  return NULL;
-  __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13PreProcessing_10preprocess_text_for_stemmetization(__pyx_self, __pyx_v_text, __pyx_v_language);
-
-  /* function exit code */
-  __Pyx_RefNannyFinishContext();
-  return __pyx_r;
-}
-
-static PyObject *__pyx_pf_7wrapper_5infra_13PreProcessing_10preprocess_text_for_stemmetization(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_language) {
-  PyObject *__pyx_v_words = NULL;
-  PyObject *__pyx_v_supportedLanguage = NULL;
-  PyObject *__pyx_v_stemmer = NULL;
-  PyObject *__pyx_8genexpr3__pyx_v_word = NULL;
-  PyObject *__pyx_8genexpr4__pyx_v_word = NULL;
-  PyObject *__pyx_r = NULL;
-  __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
-  PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
-  int __pyx_t_5;
-  PyObject *__pyx_t_6 = NULL;
-  Py_ssize_t __pyx_t_7;
-  PyObject *(*__pyx_t_8)(PyObject *);
-  PyObject *__pyx_t_9 = NULL;
-  PyObject *__pyx_t_10 = NULL;
-  int __pyx_t_11;
-  int __pyx_t_12;
-  int __pyx_lineno = 0;
-  const char *__pyx_filename = NULL;
-  int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("preprocess_text_for_stemmetization", 0);
-  __Pyx_INCREF(__pyx_v_text);
-
-  /* "wrapper/infra/PreProcessing.pyx":43
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":34
  * 
- * def preprocess_text_for_stemmetization(text, language = None):
- *     text = normalize_text(text)             # <<<<<<<<<<<<<<
- *     words = None
- *     if language:
- */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 43, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
+ *         # Interpretar os resultados
+ *         for out in outs:             # <<<<<<<<<<<<<<
+ *             for detection in out:
+ *                 scores = detection[5:]
+ */
+    if (likely(PyList_CheckExact(__pyx_v_outs)) || PyTuple_CheckExact(__pyx_v_outs)) {
+      __pyx_t_5 = __pyx_v_outs; __Pyx_INCREF(__pyx_t_5); __pyx_t_13 = 0;
+      __pyx_t_14 = NULL;
+    } else {
+      __pyx_t_13 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_outs); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 34, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_14 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 34, __pyx_L1_error)
     }
-  }
-  {
-    PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_text};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_1);
-  __pyx_t_1 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":44
- * def preprocess_text_for_stemmetization(text, language = None):
- *     text = normalize_text(text)
- *     words = None             # <<<<<<<<<<<<<<
- *     if language:
- *         supportedLanguage = None
- */
-  __Pyx_INCREF(Py_None);
-  __pyx_v_words = Py_None;
-
-  /* "wrapper/infra/PreProcessing.pyx":45
- *     text = normalize_text(text)
- *     words = None
- *     if language:             # <<<<<<<<<<<<<<
- *         supportedLanguage = None
- *         if language in languages:
- */
-  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_language); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 45, __pyx_L1_error)
-  if (__pyx_t_5) {
-
-    /* "wrapper/infra/PreProcessing.pyx":46
- *     words = None
- *     if language:
- *         supportedLanguage = None             # <<<<<<<<<<<<<<
- *         if language in languages:
- *             supportedLanguage = languages[language]
- */
-    __Pyx_INCREF(Py_None);
-    __pyx_v_supportedLanguage = Py_None;
-
-    /* "wrapper/infra/PreProcessing.pyx":47
- *     if language:
- *         supportedLanguage = None
- *         if language in languages:             # <<<<<<<<<<<<<<
- *             supportedLanguage = languages[language]
- *         else:
- */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 47, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_language, __pyx_t_1, Py_EQ)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 47, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    if (likely(__pyx_t_5)) {
-
-      /* "wrapper/infra/PreProcessing.pyx":48
- *         supportedLanguage = None
- *         if language in languages:
- *             supportedLanguage = languages[language]             # <<<<<<<<<<<<<<
- *         else:
- *             raise Exception(f"Not Specified the language for text {text}")
- */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_languages); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 48, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_t_1, __pyx_v_language); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 48, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __Pyx_DECREF_SET(__pyx_v_supportedLanguage, __pyx_t_2);
+    for (;;) {
+      if (likely(!__pyx_t_14)) {
+        if (likely(PyList_CheckExact(__pyx_t_5))) {
+          if (__pyx_t_13 >= PyList_GET_SIZE(__pyx_t_5)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L1_error)
+          #else
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_2);
+          #endif
+        } else {
+          if (__pyx_t_13 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L1_error)
+          #else
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_2);
+          #endif
+        }
+      } else {
+        __pyx_t_2 = __pyx_t_14(__pyx_t_5);
+        if (unlikely(!__pyx_t_2)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 34, __pyx_L1_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_2);
+      }
+      __Pyx_XDECREF_SET(__pyx_v_out, __pyx_t_2);
       __pyx_t_2 = 0;
 
-      /* "wrapper/infra/PreProcessing.pyx":47
- *     if language:
- *         supportedLanguage = None
- *         if language in languages:             # <<<<<<<<<<<<<<
- *             supportedLanguage = languages[language]
- *         else:
- */
-      goto __pyx_L4;
-    }
-
-    /* "wrapper/infra/PreProcessing.pyx":50
- *             supportedLanguage = languages[language]
- *         else:
- *             raise Exception(f"Not Specified the language for text {text}")             # <<<<<<<<<<<<<<
- *         words = word_tokenize(text, language=supportedLanguage)
- *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
- */
-    /*else*/ {
-      __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_1 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Not_Specified_the_language_for_t, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 50, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __Pyx_Raise(__pyx_t_2, 0, 0, 0);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __PYX_ERR(0, 50, __pyx_L1_error)
-    }
-    __pyx_L4:;
-
-    /* "wrapper/infra/PreProcessing.pyx":51
- *         else:
- *             raise Exception(f"Not Specified the language for text {text}")
- *         words = word_tokenize(text, language=supportedLanguage)             # <<<<<<<<<<<<<<
- *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
- *         stemmer = SnowballStemmer(supportedLanguage)
- */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_INCREF(__pyx_v_text);
-    __Pyx_GIVEREF(__pyx_v_text);
-    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_text);
-    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_v_supportedLanguage) < 0) __PYX_ERR(0, 51, __pyx_L1_error)
-    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 51, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
-    __pyx_t_6 = 0;
-
-    /* "wrapper/infra/PreProcessing.pyx":52
- *             raise Exception(f"Not Specified the language for text {text}")
- *         words = word_tokenize(text, language=supportedLanguage)
- *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]             # <<<<<<<<<<<<<<
- *         stemmer = SnowballStemmer(supportedLanguage)
- *         words = [stemmer.stem(word) for word in words]
- */
-    { /* enter inner scope */
-      __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 52, __pyx_L7_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
-        __pyx_t_3 = __pyx_v_words; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
-        __pyx_t_8 = NULL;
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":35
+ *         # Interpretar os resultados
+ *         for out in outs:
+ *             for detection in out:             # <<<<<<<<<<<<<<
+ *                 scores = detection[5:]
+ *                 class_id = np.argmax(scores)
+ */
+      if (likely(PyList_CheckExact(__pyx_v_out)) || PyTuple_CheckExact(__pyx_v_out)) {
+        __pyx_t_2 = __pyx_v_out; __Pyx_INCREF(__pyx_t_2); __pyx_t_15 = 0;
+        __pyx_t_16 = NULL;
       } else {
-        __pyx_t_7 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 52, __pyx_L7_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 52, __pyx_L7_error)
+        __pyx_t_15 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_out); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 35, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_16 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 35, __pyx_L1_error)
       }
       for (;;) {
-        if (likely(!__pyx_t_8)) {
-          if (likely(PyList_CheckExact(__pyx_t_3))) {
-            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
+        if (likely(!__pyx_t_16)) {
+          if (likely(PyList_CheckExact(__pyx_t_2))) {
+            if (__pyx_t_15 >= PyList_GET_SIZE(__pyx_t_2)) break;
             #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 52, __pyx_L7_error)
+            __pyx_t_6 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_15); __Pyx_INCREF(__pyx_t_6); __pyx_t_15++; if (unlikely((0 < 0))) __PYX_ERR(0, 35, __pyx_L1_error)
             #else
-            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L7_error)
-            __Pyx_GOTREF(__pyx_t_1);
+            __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 35, __pyx_L1_error)
+            __Pyx_GOTREF(__pyx_t_6);
             #endif
           } else {
-            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
+            if (__pyx_t_15 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
             #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 52, __pyx_L7_error)
+            __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_15); __Pyx_INCREF(__pyx_t_6); __pyx_t_15++; if (unlikely((0 < 0))) __PYX_ERR(0, 35, __pyx_L1_error)
             #else
-            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L7_error)
-            __Pyx_GOTREF(__pyx_t_1);
+            __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 35, __pyx_L1_error)
+            __Pyx_GOTREF(__pyx_t_6);
             #endif
           }
         } else {
-          __pyx_t_1 = __pyx_t_8(__pyx_t_3);
-          if (unlikely(!__pyx_t_1)) {
+          __pyx_t_6 = __pyx_t_16(__pyx_t_2);
+          if (unlikely(!__pyx_t_6)) {
             PyObject* exc_type = PyErr_Occurred();
             if (exc_type) {
               if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 52, __pyx_L7_error)
+              else __PYX_ERR(0, 35, __pyx_L1_error)
             }
             break;
           }
-          __Pyx_GOTREF(__pyx_t_1);
+          __Pyx_GOTREF(__pyx_t_6);
         }
-        __Pyx_XDECREF_SET(__pyx_8genexpr3__pyx_v_word, __pyx_t_1);
-        __pyx_t_1 = 0;
-        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_8genexpr3__pyx_v_word, __pyx_n_s_lower); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 52, __pyx_L7_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __pyx_t_9 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_2);
-          if (likely(__pyx_t_9)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-            __Pyx_INCREF(__pyx_t_9);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_2, function);
-            __pyx_t_4 = 1;
-          }
-        }
-        {
-          PyObject *__pyx_callargs[1] = {__pyx_t_9, };
-          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
-          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 52, __pyx_L7_error)
-          __Pyx_GOTREF(__pyx_t_1);
-          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        }
-        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 52, __pyx_L7_error)
-        __Pyx_GOTREF(__pyx_t_9);
-        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_words); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 52, __pyx_L7_error)
-        __Pyx_GOTREF(__pyx_t_10);
-        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
-        __pyx_t_9 = NULL;
+        __Pyx_XDECREF_SET(__pyx_v_detection, __pyx_t_6);
+        __pyx_t_6 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":36
+ *         for out in outs:
+ *             for detection in out:
+ *                 scores = detection[5:]             # <<<<<<<<<<<<<<
+ *                 class_id = np.argmax(scores)
+ *                 confidence = scores[class_id]
+ */
+        __pyx_t_6 = __Pyx_PyObject_GetSlice(__pyx_v_detection, 5, 0, NULL, NULL, &__pyx_slice__3, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 36, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_6);
+        __Pyx_XDECREF_SET(__pyx_v_scores, __pyx_t_6);
+        __pyx_t_6 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":37
+ *             for detection in out:
+ *                 scores = detection[5:]
+ *                 class_id = np.argmax(scores)             # <<<<<<<<<<<<<<
+ *                 confidence = scores[class_id]
+ *                 if confidence > 0.5:
+ */
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_np); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 37, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_argmax); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 37, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_12);
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+        __pyx_t_3 = NULL;
         __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
-          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
-          if (likely(__pyx_t_9)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
-            __Pyx_INCREF(__pyx_t_9);
+        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
+          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_12);
+          if (likely(__pyx_t_3)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
+            __Pyx_INCREF(__pyx_t_3);
             __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_10, function);
+            __Pyx_DECREF_SET(__pyx_t_12, function);
             __pyx_t_4 = 1;
           }
         }
         {
-          PyObject *__pyx_callargs[2] = {__pyx_t_9, __pyx_v_supportedLanguage};
-          __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_10, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
-          if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 52, __pyx_L7_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
-        }
-        __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_t_2, Py_NE)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 52, __pyx_L7_error)
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        if (__pyx_t_5) {
-          if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_8genexpr3__pyx_v_word))) __PYX_ERR(0, 52, __pyx_L7_error)
+          PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_scores};
+          __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_12, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+          if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 37, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+        }
+        __Pyx_XDECREF_SET(__pyx_v_class_id, __pyx_t_6);
+        __pyx_t_6 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":38
+ *                 scores = detection[5:]
+ *                 class_id = np.argmax(scores)
+ *                 confidence = scores[class_id]             # <<<<<<<<<<<<<<
+ *                 if confidence > 0.5:
+ *                     # Coordenadas do bounding box
+ */
+        __pyx_t_6 = __Pyx_PyObject_GetItem(__pyx_v_scores, __pyx_v_class_id); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 38, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_6);
+        __Pyx_XDECREF_SET(__pyx_v_confidence, __pyx_t_6);
+        __pyx_t_6 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":39
+ *                 class_id = np.argmax(scores)
+ *                 confidence = scores[class_id]
+ *                 if confidence > 0.5:             # <<<<<<<<<<<<<<
+ *                     # Coordenadas do bounding box
+ *                     center_x = int(detection[0] * width)
+ */
+        __pyx_t_6 = PyObject_RichCompare(__pyx_v_confidence, __pyx_float_0_5, Py_GT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 39, __pyx_L1_error)
+        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 39, __pyx_L1_error)
+        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+        if (__pyx_t_11) {
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":41
+ *                 if confidence > 0.5:
+ *                     # Coordenadas do bounding box
+ *                     center_x = int(detection[0] * width)             # <<<<<<<<<<<<<<
+ *                     center_y = int(detection[1] * height)
+ *                     w = int(detection[2] * width)
+ */
+          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_width); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 41, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_center_x, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":42
+ *                     # Coordenadas do bounding box
+ *                     center_x = int(detection[0] * width)
+ *                     center_y = int(detection[1] * height)             # <<<<<<<<<<<<<<
+ *                     w = int(detection[2] * width)
+ *                     h = int(detection[3] * height)
+ */
+          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 42, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_height); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 42, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 42, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_center_y, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":43
+ *                     center_x = int(detection[0] * width)
+ *                     center_y = int(detection[1] * height)
+ *                     w = int(detection[2] * width)             # <<<<<<<<<<<<<<
+ *                     h = int(detection[3] * height)
+ * 
+ */
+          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 43, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_width); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 43, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 43, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_w, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":44
+ *                     center_y = int(detection[1] * height)
+ *                     w = int(detection[2] * width)
+ *                     h = int(detection[3] * height)             # <<<<<<<<<<<<<<
+ * 
+ *                     # Coordenadas do topo esquerdo
+ */
+          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 44, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_height); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 44, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 44, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_h, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":47
+ * 
+ *                     # Coordenadas do topo esquerdo
+ *                     x = int(center_x - w / 2)             # <<<<<<<<<<<<<<
+ *                     y = int(center_y - h / 2)
+ * 
+ */
+          __pyx_t_6 = __Pyx_PyInt_TrueDivideObjC(__pyx_v_w, __pyx_int_2, 2, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 47, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Subtract(__pyx_v_center_x, __pyx_t_6); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 47, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 47, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":48
+ *                     # Coordenadas do topo esquerdo
+ *                     x = int(center_x - w / 2)
+ *                     y = int(center_y - h / 2)             # <<<<<<<<<<<<<<
+ * 
+ *                     boxes.append([x, y, w, h])
+ */
+          __pyx_t_6 = __Pyx_PyInt_TrueDivideObjC(__pyx_v_h, __pyx_int_2, 2, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 48, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_12 = PyNumber_Subtract(__pyx_v_center_y, __pyx_t_6); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 48, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_12);
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 48, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_y, __pyx_t_6);
+          __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":50
+ *                     y = int(center_y - h / 2)
+ * 
+ *                     boxes.append([x, y, w, h])             # <<<<<<<<<<<<<<
+ *                     confidences.append(float(confidence))
+ *                     class_ids.append(class_id)
+ */
+          __pyx_t_6 = PyList_New(4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 50, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_INCREF(__pyx_v_x);
+          __Pyx_GIVEREF(__pyx_v_x);
+          PyList_SET_ITEM(__pyx_t_6, 0, __pyx_v_x);
+          __Pyx_INCREF(__pyx_v_y);
+          __Pyx_GIVEREF(__pyx_v_y);
+          PyList_SET_ITEM(__pyx_t_6, 1, __pyx_v_y);
+          __Pyx_INCREF(__pyx_v_w);
+          __Pyx_GIVEREF(__pyx_v_w);
+          PyList_SET_ITEM(__pyx_t_6, 2, __pyx_v_w);
+          __Pyx_INCREF(__pyx_v_h);
+          __Pyx_GIVEREF(__pyx_v_h);
+          PyList_SET_ITEM(__pyx_t_6, 3, __pyx_v_h);
+          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_boxes, __pyx_t_6); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 50, __pyx_L1_error)
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":51
+ * 
+ *                     boxes.append([x, y, w, h])
+ *                     confidences.append(float(confidence))             # <<<<<<<<<<<<<<
+ *                     class_ids.append(class_id)
+ * 
+ */
+          __pyx_t_6 = __Pyx_PyNumber_Float(__pyx_v_confidence); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 51, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_confidences, __pyx_t_6); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 51, __pyx_L1_error)
+          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":52
+ *                     boxes.append([x, y, w, h])
+ *                     confidences.append(float(confidence))
+ *                     class_ids.append(class_id)             # <<<<<<<<<<<<<<
+ * 
+ *         # Aplicar Non-Maximum Suppression para eliminar deteces redundantes
+ */
+          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_class_ids, __pyx_v_class_id); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 52, __pyx_L1_error)
+
+          /* "wrapper/infra/VideoObjectsExtractor.pyx":39
+ *                 class_id = np.argmax(scores)
+ *                 confidence = scores[class_id]
+ *                 if confidence > 0.5:             # <<<<<<<<<<<<<<
+ *                     # Coordenadas do bounding box
+ *                     center_x = int(detection[0] * width)
+ */
         }
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":35
+ *         # Interpretar os resultados
+ *         for out in outs:
+ *             for detection in out:             # <<<<<<<<<<<<<<
+ *                 scores = detection[5:]
+ *                 class_id = np.argmax(scores)
+ */
       }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word); __pyx_8genexpr3__pyx_v_word = 0;
-      goto __pyx_L12_exit_scope;
-      __pyx_L7_error:;
-      __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word); __pyx_8genexpr3__pyx_v_word = 0;
-      goto __pyx_L1_error;
-      __pyx_L12_exit_scope:;
-    } /* exit inner scope */
-    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
-    __pyx_t_6 = 0;
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "wrapper/infra/PreProcessing.pyx":53
- *         words = word_tokenize(text, language=supportedLanguage)
- *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
- *         stemmer = SnowballStemmer(supportedLanguage)             # <<<<<<<<<<<<<<
- *         words = [stemmer.stem(word) for word in words]
- *     else:
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":34
+ * 
+ *         # Interpretar os resultados
+ *         for out in outs:             # <<<<<<<<<<<<<<
+ *             for detection in out:
+ *                 scores = detection[5:]
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_SnowballStemmer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 53, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = NULL;
+    }
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":55
+ * 
+ *         # Aplicar Non-Maximum Suppression para eliminar deteces redundantes
+ *         indexes = cv2.dnn.NMSBoxes(boxes, confidences, 0.5, 0.4)             # <<<<<<<<<<<<<<
+ * 
+ *         # Lista de objetos identificados no frame
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_dnn); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 55, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_NMSBoxes); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = NULL;
     __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_2)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_2);
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_6);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_supportedLanguage};
-      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 53, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      PyObject *__pyx_callargs[5] = {__pyx_t_6, __pyx_v_boxes, __pyx_v_confidences, __pyx_float_0_5, __pyx_float_0_4};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 4+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 55, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    __pyx_v_stemmer = __pyx_t_6;
-    __pyx_t_6 = 0;
+    __Pyx_XDECREF_SET(__pyx_v_indexes, __pyx_t_5);
+    __pyx_t_5 = 0;
 
-    /* "wrapper/infra/PreProcessing.pyx":54
- *         words = [word for word in words if word.lower() not in stopwords.words(supportedLanguage)]
- *         stemmer = SnowballStemmer(supportedLanguage)
- *         words = [stemmer.stem(word) for word in words]             # <<<<<<<<<<<<<<
- *     else:
- *         words = text.split()
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":58
+ * 
+ *         # Lista de objetos identificados no frame
+ *         objects = []             # <<<<<<<<<<<<<<
+ *         for i in range(len(boxes)):
+ *             if i in indexes:
  */
-    { /* enter inner scope */
-      __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 54, __pyx_L15_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      if (likely(PyList_CheckExact(__pyx_v_words)) || PyTuple_CheckExact(__pyx_v_words)) {
-        __pyx_t_3 = __pyx_v_words; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
-        __pyx_t_8 = NULL;
-      } else {
-        __pyx_t_7 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_words); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 54, __pyx_L15_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_8 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 54, __pyx_L15_error)
-      }
-      for (;;) {
-        if (likely(!__pyx_t_8)) {
-          if (likely(PyList_CheckExact(__pyx_t_3))) {
-            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 54, __pyx_L15_error)
-            #else
-            __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 54, __pyx_L15_error)
-            __Pyx_GOTREF(__pyx_t_2);
-            #endif
-          } else {
-            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely((0 < 0))) __PYX_ERR(0, 54, __pyx_L15_error)
-            #else
-            __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 54, __pyx_L15_error)
-            __Pyx_GOTREF(__pyx_t_2);
-            #endif
-          }
+    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_XDECREF_SET(__pyx_v_objects, ((PyObject*)__pyx_t_5));
+    __pyx_t_5 = 0;
+
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":59
+ *         # Lista de objetos identificados no frame
+ *         objects = []
+ *         for i in range(len(boxes)):             # <<<<<<<<<<<<<<
+ *             if i in indexes:
+ *                 label = str(classes[class_ids[i]])
+ */
+    __pyx_t_13 = PyList_GET_SIZE(__pyx_v_boxes); if (unlikely(__pyx_t_13 == ((Py_ssize_t)-1))) __PYX_ERR(0, 59, __pyx_L1_error)
+    __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_13); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 59, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
+      __pyx_t_5 = __pyx_t_2; __Pyx_INCREF(__pyx_t_5); __pyx_t_13 = 0;
+      __pyx_t_14 = NULL;
+    } else {
+      __pyx_t_13 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 59, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_14 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 59, __pyx_L1_error)
+    }
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    for (;;) {
+      if (likely(!__pyx_t_14)) {
+        if (likely(PyList_CheckExact(__pyx_t_5))) {
+          if (__pyx_t_13 >= PyList_GET_SIZE(__pyx_t_5)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
+          #else
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_2);
+          #endif
         } else {
-          __pyx_t_2 = __pyx_t_8(__pyx_t_3);
-          if (unlikely(!__pyx_t_2)) {
-            PyObject* exc_type = PyErr_Occurred();
-            if (exc_type) {
-              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 54, __pyx_L15_error)
-            }
-            break;
-          }
+          if (__pyx_t_13 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
+          #else
+          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
           __Pyx_GOTREF(__pyx_t_2);
+          #endif
         }
-        __Pyx_XDECREF_SET(__pyx_8genexpr4__pyx_v_word, __pyx_t_2);
-        __pyx_t_2 = 0;
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_stemmer, __pyx_n_s_stem); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 54, __pyx_L15_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_10 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_1);
-          if (likely(__pyx_t_10)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-            __Pyx_INCREF(__pyx_t_10);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_1, function);
-            __pyx_t_4 = 1;
+      } else {
+        __pyx_t_2 = __pyx_t_14(__pyx_t_5);
+        if (unlikely(!__pyx_t_2)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 59, __pyx_L1_error)
           }
+          break;
         }
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_8genexpr4__pyx_v_word};
-          __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-          if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 54, __pyx_L15_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        }
-        if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 54, __pyx_L15_error)
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+        __Pyx_GOTREF(__pyx_t_2);
       }
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word); __pyx_8genexpr4__pyx_v_word = 0;
-      goto __pyx_L19_exit_scope;
-      __pyx_L15_error:;
-      __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word); __pyx_8genexpr4__pyx_v_word = 0;
-      goto __pyx_L1_error;
-      __pyx_L19_exit_scope:;
-    } /* exit inner scope */
-    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
-    __pyx_t_6 = 0;
+      __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_2);
+      __pyx_t_2 = 0;
 
-    /* "wrapper/infra/PreProcessing.pyx":45
- *     text = normalize_text(text)
- *     words = None
- *     if language:             # <<<<<<<<<<<<<<
- *         supportedLanguage = None
- *         if language in languages:
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":60
+ *         objects = []
+ *         for i in range(len(boxes)):
+ *             if i in indexes:             # <<<<<<<<<<<<<<
+ *                 label = str(classes[class_ids[i]])
+ *                 confidence = confidences[i]
+ */
+      __pyx_t_11 = (__Pyx_PySequence_ContainsTF(__pyx_v_i, __pyx_v_indexes, Py_EQ)); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 60, __pyx_L1_error)
+      if (__pyx_t_11) {
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":61
+ *         for i in range(len(boxes)):
+ *             if i in indexes:
+ *                 label = str(classes[class_ids[i]])             # <<<<<<<<<<<<<<
+ *                 confidence = confidences[i]
+ *                 objects.append((label, confidence))
  */
-    goto __pyx_L3;
-  }
+        __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_class_ids, __pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_6 = __Pyx_PyObject_GetItem(__pyx_v_classes, __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 61, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_6);
+        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+        __pyx_t_2 = __Pyx_PyObject_Str(__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+        __Pyx_XDECREF_SET(__pyx_v_label, __pyx_t_2);
+        __pyx_t_2 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":56
- *         words = [stemmer.stem(word) for word in words]
- *     else:
- *         words = text.split()             # <<<<<<<<<<<<<<
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":62
+ *             if i in indexes:
+ *                 label = str(classes[class_ids[i]])
+ *                 confidence = confidences[i]             # <<<<<<<<<<<<<<
+ *                 objects.append((label, confidence))
+ *         objects_per_frame.append(objects)
+ */
+        __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_confidences, __pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 62, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __Pyx_XDECREF_SET(__pyx_v_confidence, __pyx_t_2);
+        __pyx_t_2 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":63
+ *                 label = str(classes[class_ids[i]])
+ *                 confidence = confidences[i]
+ *                 objects.append((label, confidence))             # <<<<<<<<<<<<<<
+ *         objects_per_frame.append(objects)
  * 
- *     if not words or len(words) == 0:
  */
-  /*else*/ {
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_split); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 56, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_2 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_2)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_2);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_4 = 1;
+        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_2);
+        __Pyx_INCREF(__pyx_v_label);
+        __Pyx_GIVEREF(__pyx_v_label);
+        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_label);
+        __Pyx_INCREF(__pyx_v_confidence);
+        __Pyx_GIVEREF(__pyx_v_confidence);
+        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_confidence);
+        __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_objects, __pyx_t_2); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 63, __pyx_L1_error)
+        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+        /* "wrapper/infra/VideoObjectsExtractor.pyx":60
+ *         objects = []
+ *         for i in range(len(boxes)):
+ *             if i in indexes:             # <<<<<<<<<<<<<<
+ *                 label = str(classes[class_ids[i]])
+ *                 confidence = confidences[i]
+ */
       }
-    }
-    {
-      PyObject *__pyx_callargs[1] = {__pyx_t_2, };
-      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 56, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    }
-    __Pyx_DECREF_SET(__pyx_v_words, __pyx_t_6);
-    __pyx_t_6 = 0;
-  }
-  __pyx_L3:;
 
-  /* "wrapper/infra/PreProcessing.pyx":58
- *         words = text.split()
- * 
- *     if not words or len(words) == 0:             # <<<<<<<<<<<<<<
- *         raise Exception(f"it doesn't have tokens for text: {text}")
+      /* "wrapper/infra/VideoObjectsExtractor.pyx":59
+ *         # Lista de objetos identificados no frame
+ *         objects = []
+ *         for i in range(len(boxes)):             # <<<<<<<<<<<<<<
+ *             if i in indexes:
+ *                 label = str(classes[class_ids[i]])
+ */
+    }
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":64
+ *                 confidence = confidences[i]
+ *                 objects.append((label, confidence))
+ *         objects_per_frame.append(objects)             # <<<<<<<<<<<<<<
  * 
+ *     video_capture.release()
  */
-  __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_v_words); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 58, __pyx_L1_error)
-  __pyx_t_12 = (!__pyx_t_11);
-  if (!__pyx_t_12) {
-  } else {
-    __pyx_t_5 = __pyx_t_12;
-    goto __pyx_L21_bool_binop_done;
-  }
-  __pyx_t_7 = PyObject_Length(__pyx_v_words); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 58, __pyx_L1_error)
-  __pyx_t_12 = (__pyx_t_7 == 0);
-  __pyx_t_5 = __pyx_t_12;
-  __pyx_L21_bool_binop_done:;
-  if (unlikely(__pyx_t_5)) {
+    __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_objects_per_frame, __pyx_v_objects); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 64, __pyx_L1_error)
 
-    /* "wrapper/infra/PreProcessing.pyx":59
- * 
- *     if not words or len(words) == 0:
- *         raise Exception(f"it doesn't have tokens for text: {text}")             # <<<<<<<<<<<<<<
+    /* "wrapper/infra/VideoObjectsExtractor.pyx":15
+ *     objects_per_frame = []
  * 
- *     return words, ' '.join(words)
+ *     for i in range(frame_count):             # <<<<<<<<<<<<<<
+ *         ret, frame = video_capture.read()
+ *         if not ret:
  */
-    __pyx_t_6 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 59, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_it_doesn_t_have_tokens_for_text, __pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 59, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __pyx_t_6 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 59, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __PYX_ERR(0, 59, __pyx_L1_error)
+  }
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  goto __pyx_L23_for_end;
+  __pyx_L6_break:;
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  goto __pyx_L23_for_end;
+  __pyx_L23_for_end:;
 
-    /* "wrapper/infra/PreProcessing.pyx":58
- *         words = text.split()
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":66
+ *         objects_per_frame.append(objects)
  * 
- *     if not words or len(words) == 0:             # <<<<<<<<<<<<<<
- *         raise Exception(f"it doesn't have tokens for text: {text}")
+ *     video_capture.release()             # <<<<<<<<<<<<<<
  * 
+ *     return objects_per_frame
  */
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_release); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 66, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_5, function);
+      __pyx_t_4 = 1;
+    }
   }
+  {
+    PyObject *__pyx_callargs[1] = {__pyx_t_2, };
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":61
- *         raise Exception(f"it doesn't have tokens for text: {text}")
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":68
+ *     video_capture.release()
  * 
- *     return words, ' '.join(words)             # <<<<<<<<<<<<<<
+ *     return objects_per_frame             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
-  __pyx_t_6 = PyUnicode_Join(__pyx_kp_u__2, __pyx_v_words); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 61, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_6);
-  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_v_words);
-  __Pyx_GIVEREF(__pyx_v_words);
-  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_words);
-  __Pyx_GIVEREF(__pyx_t_6);
-  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_6);
-  __pyx_t_6 = 0;
-  __pyx_r = __pyx_t_3;
-  __pyx_t_3 = 0;
+  __Pyx_INCREF(__pyx_v_objects_per_frame);
+  __pyx_r = __pyx_v_objects_per_frame;
   goto __pyx_L0;
 
-  /* "wrapper/infra/PreProcessing.pyx":42
- *     return text
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
+ * import numpy as np
+ * 
+ * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
+ *     net, output_layers, classes = get_layers()
  * 
- * def preprocess_text_for_stemmetization(text, language = None):             # <<<<<<<<<<<<<<
- *     text = normalize_text(text)
- *     words = None
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_5);
   __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_9);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("wrapper.infra.PreProcessing.preprocess_text_for_stemmetization", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_12);
+  __Pyx_AddTraceback("wrapper.infra.VideoObjectsExtractor.identify_objects_in_video", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_words);
-  __Pyx_XDECREF(__pyx_v_supportedLanguage);
-  __Pyx_XDECREF(__pyx_v_stemmer);
-  __Pyx_XDECREF(__pyx_8genexpr3__pyx_v_word);
-  __Pyx_XDECREF(__pyx_8genexpr4__pyx_v_word);
-  __Pyx_XDECREF(__pyx_v_text);
+  __Pyx_XDECREF(__pyx_v_net);
+  __Pyx_XDECREF(__pyx_v_output_layers);
+  __Pyx_XDECREF(__pyx_v_classes);
+  __Pyx_XDECREF(__pyx_v_video_capture);
+  __Pyx_XDECREF(__pyx_v_frame_count);
+  __Pyx_XDECREF(__pyx_v_objects_per_frame);
+  __Pyx_XDECREF(__pyx_v_i);
+  __Pyx_XDECREF(__pyx_v_ret);
+  __Pyx_XDECREF(__pyx_v_frame);
+  __Pyx_XDECREF(__pyx_v_height);
+  __Pyx_XDECREF(__pyx_v_width);
+  __Pyx_XDECREF(__pyx_v_channels);
+  __Pyx_XDECREF(__pyx_v_blob);
+  __Pyx_XDECREF(__pyx_v_outs);
+  __Pyx_XDECREF(__pyx_v_class_ids);
+  __Pyx_XDECREF(__pyx_v_confidences);
+  __Pyx_XDECREF(__pyx_v_boxes);
+  __Pyx_XDECREF(__pyx_v_out);
+  __Pyx_XDECREF(__pyx_v_detection);
+  __Pyx_XDECREF(__pyx_v_scores);
+  __Pyx_XDECREF(__pyx_v_class_id);
+  __Pyx_XDECREF(__pyx_v_confidence);
+  __Pyx_XDECREF(__pyx_v_center_x);
+  __Pyx_XDECREF(__pyx_v_center_y);
+  __Pyx_XDECREF(__pyx_v_w);
+  __Pyx_XDECREF(__pyx_v_h);
+  __Pyx_XDECREF(__pyx_v_x);
+  __Pyx_XDECREF(__pyx_v_y);
+  __Pyx_XDECREF(__pyx_v_indexes);
+  __Pyx_XDECREF(__pyx_v_objects);
+  __Pyx_XDECREF(__pyx_v_label);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
@@ -4414,179 +3971,151 @@
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
-    {&__pyx_n_u_NFD, __pyx_k_NFD, sizeof(__pyx_k_NFD), 0, 1, 0, 1},
-    {&__pyx_kp_u_Not_Specified_the_language_for_t, __pyx_k_Not_Specified_the_language_for_t, sizeof(__pyx_k_Not_Specified_the_language_for_t), 0, 1, 0, 0},
-    {&__pyx_n_s_RSLPStemmer, __pyx_k_RSLPStemmer, sizeof(__pyx_k_RSLPStemmer), 0, 0, 1, 1},
-    {&__pyx_n_s_SnowballStemmer, __pyx_k_SnowballStemmer, sizeof(__pyx_k_SnowballStemmer), 0, 0, 1, 1},
-    {&__pyx_kp_u_W, __pyx_k_W, sizeof(__pyx_k_W), 0, 1, 0, 0},
-    {&__pyx_n_s_WordNetLemmatizer, __pyx_k_WordNetLemmatizer, sizeof(__pyx_k_WordNetLemmatizer), 0, 0, 1, 1},
-    {&__pyx_n_s__19, __pyx_k__19, sizeof(__pyx_k__19), 0, 0, 1, 1},
-    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
-    {&__pyx_kp_u__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 1, 0, 0},
+    {&__pyx_n_s_CAP_PROP_FRAME_COUNT, __pyx_k_CAP_PROP_FRAME_COUNT, sizeof(__pyx_k_CAP_PROP_FRAME_COUNT), 0, 0, 1, 1},
+    {&__pyx_n_s_ImageObjectsExtractor, __pyx_k_ImageObjectsExtractor, sizeof(__pyx_k_ImageObjectsExtractor), 0, 0, 1, 1},
+    {&__pyx_n_s_NMSBoxes, __pyx_k_NMSBoxes, sizeof(__pyx_k_NMSBoxes), 0, 0, 1, 1},
+    {&__pyx_n_s_VideoCapture, __pyx_k_VideoCapture, sizeof(__pyx_k_VideoCapture), 0, 0, 1, 1},
     {&__pyx_n_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 1},
+    {&__pyx_kp_u__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 1, 0, 0},
+    {&__pyx_n_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 1},
+    {&__pyx_n_s_argmax, __pyx_k_argmax, sizeof(__pyx_k_argmax), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_n_s_c, __pyx_k_c, sizeof(__pyx_k_c), 0, 0, 1, 1},
+    {&__pyx_n_s_blob, __pyx_k_blob, sizeof(__pyx_k_blob), 0, 0, 1, 1},
+    {&__pyx_n_s_blobFromImage, __pyx_k_blobFromImage, sizeof(__pyx_k_blobFromImage), 0, 0, 1, 1},
+    {&__pyx_n_s_boxes, __pyx_k_boxes, sizeof(__pyx_k_boxes), 0, 0, 1, 1},
+    {&__pyx_n_s_center_x, __pyx_k_center_x, sizeof(__pyx_k_center_x), 0, 0, 1, 1},
+    {&__pyx_n_s_center_y, __pyx_k_center_y, sizeof(__pyx_k_center_y), 0, 0, 1, 1},
+    {&__pyx_n_s_channels, __pyx_k_channels, sizeof(__pyx_k_channels), 0, 0, 1, 1},
     {&__pyx_n_s_class_getitem, __pyx_k_class_getitem, sizeof(__pyx_k_class_getitem), 0, 0, 1, 1},
+    {&__pyx_n_s_class_id, __pyx_k_class_id, sizeof(__pyx_k_class_id), 0, 0, 1, 1},
+    {&__pyx_n_s_class_ids, __pyx_k_class_ids, sizeof(__pyx_k_class_ids), 0, 0, 1, 1},
+    {&__pyx_n_s_classes, __pyx_k_classes, sizeof(__pyx_k_classes), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_combining, __pyx_k_combining, sizeof(__pyx_k_combining), 0, 0, 1, 1},
-    {&__pyx_n_u_en, __pyx_k_en, sizeof(__pyx_k_en), 0, 1, 0, 1},
-    {&__pyx_n_u_english, __pyx_k_english, sizeof(__pyx_k_english), 0, 1, 0, 1},
-    {&__pyx_n_u_es, __pyx_k_es, sizeof(__pyx_k_es), 0, 1, 0, 1},
+    {&__pyx_n_s_confidence, __pyx_k_confidence, sizeof(__pyx_k_confidence), 0, 0, 1, 1},
+    {&__pyx_n_s_confidences, __pyx_k_confidences, sizeof(__pyx_k_confidences), 0, 0, 1, 1},
+    {&__pyx_n_s_crop, __pyx_k_crop, sizeof(__pyx_k_crop), 0, 0, 1, 1},
+    {&__pyx_n_s_cv2, __pyx_k_cv2, sizeof(__pyx_k_cv2), 0, 0, 1, 1},
+    {&__pyx_n_s_detection, __pyx_k_detection, sizeof(__pyx_k_detection), 0, 0, 1, 1},
+    {&__pyx_n_s_dnn, __pyx_k_dnn, sizeof(__pyx_k_dnn), 0, 0, 1, 1},
+    {&__pyx_n_s_forward, __pyx_k_forward, sizeof(__pyx_k_forward), 0, 0, 1, 1},
+    {&__pyx_n_s_frame, __pyx_k_frame, sizeof(__pyx_k_frame), 0, 0, 1, 1},
+    {&__pyx_n_s_frame_count, __pyx_k_frame_count, sizeof(__pyx_k_frame_count), 0, 0, 1, 1},
+    {&__pyx_n_s_get, __pyx_k_get, sizeof(__pyx_k_get), 0, 0, 1, 1},
+    {&__pyx_n_s_get_layers, __pyx_k_get_layers, sizeof(__pyx_k_get_layers), 0, 0, 1, 1},
+    {&__pyx_n_s_h, __pyx_k_h, sizeof(__pyx_k_h), 0, 0, 1, 1},
+    {&__pyx_n_s_height, __pyx_k_height, sizeof(__pyx_k_height), 0, 0, 1, 1},
+    {&__pyx_n_s_i, __pyx_k_i, sizeof(__pyx_k_i), 0, 0, 1, 1},
+    {&__pyx_n_s_identify_objects_in_video, __pyx_k_identify_objects_in_video, sizeof(__pyx_k_identify_objects_in_video), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_indexes, __pyx_k_indexes, sizeof(__pyx_k_indexes), 0, 0, 1, 1},
     {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
-    {&__pyx_kp_u_it_doesn_t_have_tokens_for_text, __pyx_k_it_doesn_t_have_tokens_for_text, sizeof(__pyx_k_it_doesn_t_have_tokens_for_text), 0, 1, 0, 0},
-    {&__pyx_n_s_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 0, 1, 1},
-    {&__pyx_n_s_languages, __pyx_k_languages, sizeof(__pyx_k_languages), 0, 0, 1, 1},
-    {&__pyx_n_s_lemantization, __pyx_k_lemantization, sizeof(__pyx_k_lemantization), 0, 0, 1, 1},
-    {&__pyx_n_s_lower, __pyx_k_lower, sizeof(__pyx_k_lower), 0, 0, 1, 1},
+    {&__pyx_n_s_label, __pyx_k_label, sizeof(__pyx_k_label), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_nltk_corpus, __pyx_k_nltk_corpus, sizeof(__pyx_k_nltk_corpus), 0, 0, 1, 1},
-    {&__pyx_n_s_nltk_stem, __pyx_k_nltk_stem, sizeof(__pyx_k_nltk_stem), 0, 0, 1, 1},
-    {&__pyx_n_s_nltk_tokenize, __pyx_k_nltk_tokenize, sizeof(__pyx_k_nltk_tokenize), 0, 0, 1, 1},
-    {&__pyx_n_s_normalize, __pyx_k_normalize, sizeof(__pyx_k_normalize), 0, 0, 1, 1},
-    {&__pyx_n_s_normalize_text, __pyx_k_normalize_text, sizeof(__pyx_k_normalize_text), 0, 0, 1, 1},
-    {&__pyx_n_s_normalized_text, __pyx_k_normalized_text, sizeof(__pyx_k_normalized_text), 0, 0, 1, 1},
-    {&__pyx_n_u_portuguese, __pyx_k_portuguese, sizeof(__pyx_k_portuguese), 0, 1, 0, 1},
-    {&__pyx_n_s_preprocess_text_for_lemantizatio, __pyx_k_preprocess_text_for_lemantizatio, sizeof(__pyx_k_preprocess_text_for_lemantizatio), 0, 0, 1, 1},
-    {&__pyx_n_s_preprocess_text_for_stemmetizati, __pyx_k_preprocess_text_for_stemmetizati, sizeof(__pyx_k_preprocess_text_for_stemmetizati), 0, 0, 1, 1},
-    {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
-    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
-    {&__pyx_n_s_re, __pyx_k_re, sizeof(__pyx_k_re), 0, 0, 1, 1},
-    {&__pyx_n_s_remove_accents, __pyx_k_remove_accents, sizeof(__pyx_k_remove_accents), 0, 0, 1, 1},
-    {&__pyx_n_s_remove_all_accents, __pyx_k_remove_all_accents, sizeof(__pyx_k_remove_all_accents), 0, 0, 1, 1},
-    {&__pyx_n_s_remove_alphanumeric_character, __pyx_k_remove_alphanumeric_character, sizeof(__pyx_k_remove_alphanumeric_character), 0, 0, 1, 1},
-    {&__pyx_n_u_spanish, __pyx_k_spanish, sizeof(__pyx_k_spanish), 0, 1, 0, 1},
+    {&__pyx_n_s_net, __pyx_k_net, sizeof(__pyx_k_net), 0, 0, 1, 1},
+    {&__pyx_n_s_np, __pyx_k_np, sizeof(__pyx_k_np), 0, 0, 1, 1},
+    {&__pyx_n_s_numpy, __pyx_k_numpy, sizeof(__pyx_k_numpy), 0, 0, 1, 1},
+    {&__pyx_n_s_objects, __pyx_k_objects, sizeof(__pyx_k_objects), 0, 0, 1, 1},
+    {&__pyx_n_s_objects_per_frame, __pyx_k_objects_per_frame, sizeof(__pyx_k_objects_per_frame), 0, 0, 1, 1},
+    {&__pyx_n_s_out, __pyx_k_out, sizeof(__pyx_k_out), 0, 0, 1, 1},
+    {&__pyx_n_s_output_layers, __pyx_k_output_layers, sizeof(__pyx_k_output_layers), 0, 0, 1, 1},
+    {&__pyx_n_s_outs, __pyx_k_outs, sizeof(__pyx_k_outs), 0, 0, 1, 1},
+    {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
+    {&__pyx_n_s_read, __pyx_k_read, sizeof(__pyx_k_read), 0, 0, 1, 1},
+    {&__pyx_n_s_release, __pyx_k_release, sizeof(__pyx_k_release), 0, 0, 1, 1},
+    {&__pyx_n_s_ret, __pyx_k_ret, sizeof(__pyx_k_ret), 0, 0, 1, 1},
+    {&__pyx_n_s_scores, __pyx_k_scores, sizeof(__pyx_k_scores), 0, 0, 1, 1},
+    {&__pyx_n_s_setInput, __pyx_k_setInput, sizeof(__pyx_k_setInput), 0, 0, 1, 1},
+    {&__pyx_n_s_shape, __pyx_k_shape, sizeof(__pyx_k_shape), 0, 0, 1, 1},
     {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
-    {&__pyx_n_s_split, __pyx_k_split, sizeof(__pyx_k_split), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_k_src_wrapper_infra_PreProcessing, sizeof(__pyx_k_src_wrapper_infra_PreProcessing), 0, 0, 1, 0},
-    {&__pyx_n_s_stem, __pyx_k_stem, sizeof(__pyx_k_stem), 0, 0, 1, 1},
-    {&__pyx_n_s_stemmer, __pyx_k_stemmer, sizeof(__pyx_k_stemmer), 0, 0, 1, 1},
-    {&__pyx_n_s_stopwords, __pyx_k_stopwords, sizeof(__pyx_k_stopwords), 0, 0, 1, 1},
-    {&__pyx_n_s_sub, __pyx_k_sub, sizeof(__pyx_k_sub), 0, 0, 1, 1},
-    {&__pyx_n_s_supportedLanguage, __pyx_k_supportedLanguage, sizeof(__pyx_k_supportedLanguage), 0, 0, 1, 1},
+    {&__pyx_kp_s_src_wrapper_infra_VideoObjectsEx, __pyx_k_src_wrapper_infra_VideoObjectsEx, sizeof(__pyx_k_src_wrapper_infra_VideoObjectsEx), 0, 0, 1, 0},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
-    {&__pyx_n_s_unicodedata, __pyx_k_unicodedata, sizeof(__pyx_k_unicodedata), 0, 0, 1, 1},
-    {&__pyx_kp_u_w_s, __pyx_k_w_s, sizeof(__pyx_k_w_s), 0, 1, 0, 0},
-    {&__pyx_n_s_word, __pyx_k_word, sizeof(__pyx_k_word), 0, 0, 1, 1},
-    {&__pyx_n_s_word_tokenize, __pyx_k_word_tokenize, sizeof(__pyx_k_word_tokenize), 0, 0, 1, 1},
-    {&__pyx_n_s_words, __pyx_k_words, sizeof(__pyx_k_words), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_infra_PreProcessing, __pyx_k_wrapper_infra_PreProcessing, sizeof(__pyx_k_wrapper_infra_PreProcessing), 0, 0, 1, 1},
+    {&__pyx_n_s_video_capture, __pyx_k_video_capture, sizeof(__pyx_k_video_capture), 0, 0, 1, 1},
+    {&__pyx_n_s_video_path, __pyx_k_video_path, sizeof(__pyx_k_video_path), 0, 0, 1, 1},
+    {&__pyx_n_s_w, __pyx_k_w, sizeof(__pyx_k_w), 0, 0, 1, 1},
+    {&__pyx_n_s_width, __pyx_k_width, sizeof(__pyx_k_width), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_infra_VideoObjectsExtrac, __pyx_k_wrapper_infra_VideoObjectsExtrac, sizeof(__pyx_k_wrapper_infra_VideoObjectsExtrac), 0, 0, 1, 1},
+    {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
+    {&__pyx_n_s_y, __pyx_k_y, sizeof(__pyx_k_y), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 15, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/PreProcessing.pyx":13
- * }
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":22
+ *         height, width, channels = frame.shape
+ *         # Pr-processar a imagem
+ *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)             # <<<<<<<<<<<<<<
  * 
- * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- */
-  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_n_s_word); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 13, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__5);
-  __Pyx_GIVEREF(__pyx_tuple__5);
-  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_remove_alphanumeric_character, 13, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 13, __pyx_L1_error)
-
-  /* "wrapper/infra/PreProcessing.pyx":16
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return stemmer.stem(word)
- */
-  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_n_s_word, __pyx_n_s_stemmer); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__7);
-  __Pyx_GIVEREF(__pyx_tuple__7);
-  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_lemantization, 16, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 16, __pyx_L1_error)
-
-  /* "wrapper/infra/PreProcessing.pyx":22
- * # Tokenizao, remoo de stop words e lematizao
- * # for lsi, td-idf or multiwords?
- * def preprocess_text_for_lemantization(text):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-  __pyx_tuple__9 = PyTuple_Pack(5, __pyx_n_s_text, __pyx_n_s_words, __pyx_n_s_stemmer, __pyx_n_s_word, __pyx_n_s_word); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__9);
-  __Pyx_GIVEREF(__pyx_tuple__9);
-  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_preprocess_text_for_lemantizatio, 22, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 22, __pyx_L1_error)
-
-  /* "wrapper/infra/PreProcessing.pyx":31
- *     return words
- * 
- * def remove_accents(text):             # <<<<<<<<<<<<<<
- *     normalized_text = unicodedata.normalize('NFD', text)
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
- */
-  __pyx_tuple__11 = PyTuple_Pack(3, __pyx_n_s_text, __pyx_n_s_normalized_text, __pyx_n_s_c); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__11);
-  __Pyx_GIVEREF(__pyx_tuple__11);
-  __pyx_codeobj__12 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_remove_accents, 31, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__12)) __PYX_ERR(0, 31, __pyx_L1_error)
-
-  /* "wrapper/infra/PreProcessing.pyx":35
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
- * 
- * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     if remove_all_accents:
- */
-  __pyx_tuple__13 = PyTuple_Pack(2, __pyx_n_s_text, __pyx_n_s_remove_all_accents); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__13);
-  __Pyx_GIVEREF(__pyx_tuple__13);
-  __pyx_codeobj__14 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_normalize_text, 35, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__14)) __PYX_ERR(0, 35, __pyx_L1_error)
-  __pyx_tuple__15 = PyTuple_Pack(1, ((PyObject *)Py_True)); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__15);
-  __Pyx_GIVEREF(__pyx_tuple__15);
-
-  /* "wrapper/infra/PreProcessing.pyx":42
- *     return text
- * 
- * def preprocess_text_for_stemmetization(text, language = None):             # <<<<<<<<<<<<<<
- *     text = normalize_text(text)
- *     words = None
- */
-  __pyx_tuple__16 = PyTuple_Pack(7, __pyx_n_s_text, __pyx_n_s_language, __pyx_n_s_words, __pyx_n_s_supportedLanguage, __pyx_n_s_stemmer, __pyx_n_s_word, __pyx_n_s_word); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 42, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__16);
-  __Pyx_GIVEREF(__pyx_tuple__16);
-  __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__16, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_PreProcessing, __pyx_n_s_preprocess_text_for_stemmetizati, 42, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(0, 42, __pyx_L1_error)
-  __pyx_tuple__18 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 42, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__18);
-  __Pyx_GIVEREF(__pyx_tuple__18);
+ *         # Executar a inferncia no modelo
+ */
+  __pyx_tuple_ = PyTuple_Pack(2, __pyx_int_416, __pyx_int_416); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple_);
+  __Pyx_GIVEREF(__pyx_tuple_);
+  __pyx_tuple__2 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__2);
+  __Pyx_GIVEREF(__pyx_tuple__2);
+
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":36
+ *         for out in outs:
+ *             for detection in out:
+ *                 scores = detection[5:]             # <<<<<<<<<<<<<<
+ *                 class_id = np.argmax(scores)
+ *                 confidence = scores[class_id]
+ */
+  __pyx_slice__3 = PySlice_New(__pyx_int_5, Py_None, Py_None); if (unlikely(!__pyx_slice__3)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_slice__3);
+  __Pyx_GIVEREF(__pyx_slice__3);
+
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
+ * import numpy as np
+ * 
+ * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
+ *     net, output_layers, classes = get_layers()
+ * 
+ */
+  __pyx_tuple__6 = PyTuple_Pack(32, __pyx_n_s_video_path, __pyx_n_s_net, __pyx_n_s_output_layers, __pyx_n_s_classes, __pyx_n_s_video_capture, __pyx_n_s_frame_count, __pyx_n_s_objects_per_frame, __pyx_n_s_i, __pyx_n_s_ret, __pyx_n_s_frame, __pyx_n_s_height, __pyx_n_s_width, __pyx_n_s_channels, __pyx_n_s_blob, __pyx_n_s_outs, __pyx_n_s_class_ids, __pyx_n_s_confidences, __pyx_n_s_boxes, __pyx_n_s_out, __pyx_n_s_detection, __pyx_n_s_scores, __pyx_n_s_class_id, __pyx_n_s_confidence, __pyx_n_s_center_x, __pyx_n_s_center_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_indexes, __pyx_n_s_objects, __pyx_n_s_label); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__6);
+  __Pyx_GIVEREF(__pyx_tuple__6);
+  __pyx_codeobj__7 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 32, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__6, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_VideoObjectsEx, __pyx_n_s_identify_objects_in_video, 5, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__7)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
+  __pyx_float_0_4 = PyFloat_FromDouble(0.4); if (unlikely(!__pyx_float_0_4)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_float_0_5 = PyFloat_FromDouble(0.5); if (unlikely(!__pyx_float_0_5)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_float_0_00392 = PyFloat_FromDouble(0.00392); if (unlikely(!__pyx_float_0_00392)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_2 = PyInt_FromLong(2); if (unlikely(!__pyx_int_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_5 = PyInt_FromLong(5); if (unlikely(!__pyx_int_5)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_416 = PyInt_FromLong(416); if (unlikely(!__pyx_int_416)) __PYX_ERR(0, 1, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -4658,31 +4187,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_PreProcessing(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_VideoObjectsExtractor(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_PreProcessing},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_VideoObjectsExtractor},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "PreProcessing",
+      "VideoObjectsExtractor",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -4722,19 +4251,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initPreProcessing(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initPreProcessing(void)
+__Pyx_PyMODINIT_FUNC initVideoObjectsExtractor(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initVideoObjectsExtractor(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void)
+__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -4807,15 +4336,15 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_PreProcessing(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_VideoObjectsExtractor(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
@@ -4825,33 +4354,33 @@
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'PreProcessing' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'VideoObjectsExtractor' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("PreProcessing", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("VideoObjectsExtractor", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to PreProcessing pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to VideoObjectsExtractor pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -4869,15 +4398,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_PreProcessing(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void)", 0);
   if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -4907,22 +4436,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__infra__PreProcessing) {
+  if (__pyx_module_is_main_wrapper__infra__VideoObjectsExtractor) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.infra.PreProcessing")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.PreProcessing", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.infra.VideoObjectsExtractor")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.VideoObjectsExtractor", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -4935,234 +4464,101 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "wrapper/infra/PreProcessing.pyx":1
- * from nltk.corpus import stopwords             # <<<<<<<<<<<<<<
- * from nltk.tokenize import word_tokenize
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":1
+ * import cv2             # <<<<<<<<<<<<<<
+ * from .ImageObjectsExtractor import get_layers
+ * import numpy as np
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_stopwords);
-  __Pyx_GIVEREF(__pyx_n_s_stopwords);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_stopwords);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_nltk_corpus, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_stopwords); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_cv2, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_stopwords, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_cv2, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":2
- * from nltk.corpus import stopwords
- * from nltk.tokenize import word_tokenize             # <<<<<<<<<<<<<<
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
- * import re
- */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_word_tokenize);
-  __Pyx_GIVEREF(__pyx_n_s_word_tokenize);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_word_tokenize);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_nltk_tokenize, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_word_tokenize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_word_tokenize, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":3
- * from nltk.corpus import stopwords
- * from nltk.tokenize import word_tokenize
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer             # <<<<<<<<<<<<<<
- * import re
- * import unicodedata
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":2
+ * import cv2
+ * from .ImageObjectsExtractor import get_layers             # <<<<<<<<<<<<<<
+ * import numpy as np
+ * 
  */
-  __pyx_t_2 = PyList_New(3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_WordNetLemmatizer);
-  __Pyx_GIVEREF(__pyx_n_s_WordNetLemmatizer);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_WordNetLemmatizer);
-  __Pyx_INCREF(__pyx_n_s_RSLPStemmer);
-  __Pyx_GIVEREF(__pyx_n_s_RSLPStemmer);
-  PyList_SET_ITEM(__pyx_t_2, 1, __pyx_n_s_RSLPStemmer);
-  __Pyx_INCREF(__pyx_n_s_SnowballStemmer);
-  __Pyx_GIVEREF(__pyx_n_s_SnowballStemmer);
-  PyList_SET_ITEM(__pyx_t_2, 2, __pyx_n_s_SnowballStemmer);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_nltk_stem, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_get_layers);
+  __Pyx_GIVEREF(__pyx_n_s_get_layers);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_get_layers);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_ImageObjectsExtractor, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_WordNetLemmatizer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_get_layers); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_WordNetLemmatizer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_get_layers, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_RSLPStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_RSLPStemmer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_SnowballStemmer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SnowballStemmer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":4
- * from nltk.tokenize import word_tokenize
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
- * import re             # <<<<<<<<<<<<<<
- * import unicodedata
- * 
- */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_re, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_re, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":5
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
- * import re
- * import unicodedata             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":3
+ * import cv2
+ * from .ImageObjectsExtractor import get_layers
+ * import numpy as np             # <<<<<<<<<<<<<<
  * 
- * languages = {
+ * def identify_objects_in_video(video_path):
  */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_unicodedata, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_numpy, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_unicodedata, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_np, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":8
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
+ * import numpy as np
  * 
- * languages = {
- *     'pt':"portuguese",             # <<<<<<<<<<<<<<
- *     'en':"english",
- *     'es':'spanish'
- */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_u_pt, __pyx_n_u_portuguese) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_u_en, __pyx_n_u_english) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_3, __pyx_n_u_es, __pyx_n_u_spanish) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_languages, __pyx_t_3) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":13
- * }
+ * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
+ *     net, output_layers, classes = get_layers()
  * 
- * def remove_alphanumeric_character(word):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return re.sub(r'\W+', '', word)
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_1remove_alphanumeric_character, 0, __pyx_n_s_remove_alphanumeric_character, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video, 0, __pyx_n_s_identify_objects_in_video, NULL, __pyx_n_s_wrapper_infra_VideoObjectsExtrac, __pyx_d, ((PyObject *)__pyx_codeobj__7)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_remove_alphanumeric_character, __pyx_t_3) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_identify_objects_in_video, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/PreProcessing.pyx":16
- *     print(word)
- *     return re.sub(r'\W+', '', word)
- * def lemantization(word, stemmer):             # <<<<<<<<<<<<<<
- *     print(word)
- *     return stemmer.stem(word)
- */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_3lemantization, 0, __pyx_n_s_lemantization, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_lemantization, __pyx_t_3) < 0) __PYX_ERR(0, 16, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":22
- * # Tokenizao, remoo de stop words e lematizao
- * # for lsi, td-idf or multiwords?
- * def preprocess_text_for_lemantization(text):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     text = re.sub(r'[^\w\s]', '', text)
- */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_5preprocess_text_for_lemantization, 0, __pyx_n_s_preprocess_text_for_lemantizatio, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_preprocess_text_for_lemantizatio, __pyx_t_3) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":31
- *     return words
- * 
- * def remove_accents(text):             # <<<<<<<<<<<<<<
- *     normalized_text = unicodedata.normalize('NFD', text)
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
- */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_7remove_accents, 0, __pyx_n_s_remove_accents, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_remove_accents, __pyx_t_3) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":35
- *     return ''.join([c for c in normalized_text if not unicodedata.combining(c)])
- * 
- * def normalize_text(text, remove_all_accents=True):             # <<<<<<<<<<<<<<
- *     text = text.lower()
- *     if remove_all_accents:
- */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_9normalize_text, 0, __pyx_n_s_normalize_text, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__14)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__15);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_normalize_text, __pyx_t_3) < 0) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":42
- *     return text
- * 
- * def preprocess_text_for_stemmetization(text, language = None):             # <<<<<<<<<<<<<<
- *     text = normalize_text(text)
- *     words = None
- */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13PreProcessing_11preprocess_text_for_stemmetization, 0, __pyx_n_s_preprocess_text_for_stemmetizati, NULL, __pyx_n_s_wrapper_infra_PreProcessing, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 42, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__18);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_preprocess_text_for_stemmetizati, __pyx_t_3) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-
-  /* "wrapper/infra/PreProcessing.pyx":1
- * from nltk.corpus import stopwords             # <<<<<<<<<<<<<<
- * from nltk.tokenize import word_tokenize
- * from nltk.stem import WordNetLemmatizer, RSLPStemmer, SnowballStemmer
+  /* "wrapper/infra/VideoObjectsExtractor.pyx":1
+ * import cv2             # <<<<<<<<<<<<<<
+ * from .ImageObjectsExtractor import get_layers
+ * import numpy as np
  */
   __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.infra.PreProcessing", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.infra.VideoObjectsExtractor", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.PreProcessing");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.VideoObjectsExtractor");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -5714,14 +5110,83 @@
     }
     PyErr_Format(PyExc_TypeError,
                  "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
                  func_name, more_or_less, num_expected,
                  (num_expected == 1) ? "" : "s", num_found);
 }
 
+/* PyDictVersioning */
+#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
+}
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
+    PyObject **dictptr = NULL;
+    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
+    if (offset) {
+#if CYTHON_COMPILING_IN_CPYTHON
+        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
+#else
+        dictptr = _PyObject_GetDictPtr(obj);
+#endif
+    }
+    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
+}
+static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
+        return 0;
+    return obj_dict_version == __Pyx_get_object_dict_version(obj);
+}
+#endif
+
+/* GetModuleGlobalName */
+#if CYTHON_USE_DICT_VERSIONS
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
+#else
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
+#endif
+{
+    PyObject *result;
+#if !CYTHON_AVOID_BORROWED_REFS
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    } else if (unlikely(PyErr_Occurred())) {
+        return NULL;
+    }
+#elif CYTHON_COMPILING_IN_LIMITED_API
+    if (unlikely(!__pyx_m)) {
+        return NULL;
+    }
+    result = PyObject_GetAttr(__pyx_m, name);
+    if (likely(result)) {
+        return result;
+    }
+#else
+    result = PyDict_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
+#endif
+#else
+    result = PyObject_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
+    PyErr_Clear();
+#endif
+    return __Pyx_GetBuiltinName(name);
+}
+
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -5948,87 +5413,159 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+/* RaiseTooManyValuesToUnpack */
+static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
+    PyErr_Format(PyExc_ValueError,
+                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
 }
 
-/* PyDictVersioning */
-#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
+/* RaiseNeedMoreValuesToUnpack */
+static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
+    PyErr_Format(PyExc_ValueError,
+                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
+                 index, (index == 1) ? "" : "s");
 }
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
-    PyObject **dictptr = NULL;
-    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
-    if (offset) {
-#if CYTHON_COMPILING_IN_CPYTHON
-        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
-#else
-        dictptr = _PyObject_GetDictPtr(obj);
-#endif
+
+/* IterFinish */
+static CYTHON_INLINE int __Pyx_IterFinish(void) {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
+    if (unlikely(exc_type)) {
+        if (unlikely(!__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))
+            return -1;
+        __Pyx_PyErr_Clear();
+        return 0;
     }
-    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
+    return 0;
 }
-static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
-        return 0;
-    return obj_dict_version == __Pyx_get_object_dict_version(obj);
+
+/* UnpackItemEndCheck */
+static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
+    if (unlikely(retval)) {
+        Py_DECREF(retval);
+        __Pyx_RaiseTooManyValuesError(expected);
+        return -1;
+    }
+    return __Pyx_IterFinish();
 }
-#endif
 
-/* GetModuleGlobalName */
-#if CYTHON_USE_DICT_VERSIONS
-static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* SliceObject */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(PyObject* obj,
+        Py_ssize_t cstart, Py_ssize_t cstop,
+        PyObject** _py_start, PyObject** _py_stop, PyObject** _py_slice,
+        int has_cstart, int has_cstop, int wraparound) {
+    __Pyx_TypeName obj_type_name;
+#if CYTHON_USE_TYPE_SLOTS
+    PyMappingMethods* mp;
+#if PY_MAJOR_VERSION < 3
+    PySequenceMethods* ms = Py_TYPE(obj)->tp_as_sequence;
+    if (likely(ms && ms->sq_slice)) {
+        if (!has_cstart) {
+            if (_py_start && (*_py_start != Py_None)) {
+                cstart = __Pyx_PyIndex_AsSsize_t(*_py_start);
+                if ((cstart == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
+            } else
+                cstart = 0;
+        }
+        if (!has_cstop) {
+            if (_py_stop && (*_py_stop != Py_None)) {
+                cstop = __Pyx_PyIndex_AsSsize_t(*_py_stop);
+                if ((cstop == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
+            } else
+                cstop = PY_SSIZE_T_MAX;
+        }
+        if (wraparound && unlikely((cstart < 0) | (cstop < 0)) && likely(ms->sq_length)) {
+            Py_ssize_t l = ms->sq_length(obj);
+            if (likely(l >= 0)) {
+                if (cstop < 0) {
+                    cstop += l;
+                    if (cstop < 0) cstop = 0;
+                }
+                if (cstart < 0) {
+                    cstart += l;
+                    if (cstart < 0) cstart = 0;
+                }
+            } else {
+                if (!PyErr_ExceptionMatches(PyExc_OverflowError))
+                    goto bad;
+                PyErr_Clear();
+            }
+        }
+        return ms->sq_slice(obj, cstart, cstop);
+    }
 #else
-static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
+    CYTHON_UNUSED_VAR(wraparound);
 #endif
-{
-    PyObject *result;
-#if !CYTHON_AVOID_BORROWED_REFS
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
-    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    } else if (unlikely(PyErr_Occurred())) {
-        return NULL;
-    }
-#elif CYTHON_COMPILING_IN_LIMITED_API
-    if (unlikely(!__pyx_m)) {
-        return NULL;
-    }
-    result = PyObject_GetAttr(__pyx_m, name);
-    if (likely(result)) {
-        return result;
-    }
+    mp = Py_TYPE(obj)->tp_as_mapping;
+    if (likely(mp && mp->mp_subscript))
 #else
-    result = PyDict_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
+    CYTHON_UNUSED_VAR(wraparound);
 #endif
+    {
+        PyObject* result;
+        PyObject *py_slice, *py_start, *py_stop;
+        if (_py_slice) {
+            py_slice = *_py_slice;
+        } else {
+            PyObject* owned_start = NULL;
+            PyObject* owned_stop = NULL;
+            if (_py_start) {
+                py_start = *_py_start;
+            } else {
+                if (has_cstart) {
+                    owned_start = py_start = PyInt_FromSsize_t(cstart);
+                    if (unlikely(!py_start)) goto bad;
+                } else
+                    py_start = Py_None;
+            }
+            if (_py_stop) {
+                py_stop = *_py_stop;
+            } else {
+                if (has_cstop) {
+                    owned_stop = py_stop = PyInt_FromSsize_t(cstop);
+                    if (unlikely(!py_stop)) {
+                        Py_XDECREF(owned_start);
+                        goto bad;
+                    }
+                } else
+                    py_stop = Py_None;
+            }
+            py_slice = PySlice_New(py_start, py_stop, Py_None);
+            Py_XDECREF(owned_start);
+            Py_XDECREF(owned_stop);
+            if (unlikely(!py_slice)) goto bad;
+        }
+#if CYTHON_USE_TYPE_SLOTS
+        result = mp->mp_subscript(obj, py_slice);
 #else
-    result = PyObject_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
-    PyErr_Clear();
+        result = PyObject_GetItem(obj, py_slice);
 #endif
-    return __Pyx_GetBuiltinName(name);
+        if (!_py_slice) {
+            Py_DECREF(py_slice);
+        }
+        return result;
+    }
+    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
+    PyErr_Format(PyExc_TypeError,
+        "'" __Pyx_FMT_TYPENAME "' object is unsliceable", obj_type_name);
+    __Pyx_DECREF_TypeName(obj_type_name);
+bad:
+    return NULL;
 }
 
 /* GetItemInt */
 static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
     PyObject *r;
     if (unlikely(!j)) return NULL;
     r = PyObject_GetItem(o, j);
@@ -6166,174 +5703,253 @@
     if (likely(sm && sm->sq_item)) {
         return __Pyx_PyObject_GetIndex(obj, key);
     }
     return __Pyx_PyObject_GetItem_Slow(obj, key);
 }
 #endif
 
-/* RaiseException */
-#if PY_MAJOR_VERSION < 3
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
-    __Pyx_PyThreadState_declare
-    CYTHON_UNUSED_VAR(cause);
-    Py_XINCREF(type);
-    if (!value || value == Py_None)
-        value = NULL;
-    else
-        Py_INCREF(value);
-    if (!tb || tb == Py_None)
-        tb = NULL;
-    else {
-        Py_INCREF(tb);
-        if (!PyTraceBack_Check(tb)) {
-            PyErr_SetString(PyExc_TypeError,
-                "raise: arg 3 must be a traceback or None");
-            goto raise_error;
-        }
+/* PyIntBinop */
+#if !CYTHON_COMPILING_IN_PYPY
+static PyObject* __Pyx_PyInt_TrueDivideObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check) {
+    CYTHON_MAYBE_UNUSED_VAR(intval);
+    CYTHON_MAYBE_UNUSED_VAR(inplace);
+    CYTHON_UNUSED_VAR(zerodivision_check);
+    #if PY_MAJOR_VERSION < 3
+    if (likely(PyInt_CheckExact(op1))) {
+        const long b = intval;
+        long a = PyInt_AS_LONG(op1);
+        
+            if (8 * sizeof(long) <= 53 || likely(labs(a) <= ((PY_LONG_LONG)1 << 53))) {
+                return PyFloat_FromDouble((double)a / (double)b);
+            }
+            return PyInt_Type.tp_as_number->nb_true_divide(op1, op2);
     }
-    if (PyType_Check(type)) {
-#if CYTHON_COMPILING_IN_PYPY
-        if (!value) {
-            Py_INCREF(Py_None);
-            value = Py_None;
-        }
-#endif
-        PyErr_NormalizeException(&type, &value, &tb);
-    } else {
-        if (value) {
-            PyErr_SetString(PyExc_TypeError,
-                "instance exception may not have a separate value");
-            goto raise_error;
+    #endif
+    #if CYTHON_USE_PYLONG_INTERNALS
+    if (likely(PyLong_CheckExact(op1))) {
+        const long b = intval;
+        long a, x;
+        if (unlikely(__Pyx_PyLong_IsZero(op1))) {
         }
-        value = type;
-        type = (PyObject*) Py_TYPE(type);
-        Py_INCREF(type);
-        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
-            PyErr_SetString(PyExc_TypeError,
-                "raise: exception class must be a subclass of BaseException");
-            goto raise_error;
+        if (likely(__Pyx_PyLong_IsCompact(op1))) {
+            a = __Pyx_PyLong_CompactValue(op1);
+        } else {
+            const digit* digits = __Pyx_PyLong_Digits(op1);
+            const Py_ssize_t size = __Pyx_PyLong_SignedDigitCount(op1);
+            switch (size) {
+                case -2:
+                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT && 1 * PyLong_SHIFT < 53) {
+                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 2:
+                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT && 1 * PyLong_SHIFT < 53) {
+                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                case -3:
+                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT && 2 * PyLong_SHIFT < 53) {
+                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 3:
+                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT && 2 * PyLong_SHIFT < 53) {
+                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                case -4:
+                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT && 3 * PyLong_SHIFT < 53) {
+                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 4:
+                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT && 3 * PyLong_SHIFT < 53) {
+                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    }
+                    CYTHON_FALLTHROUGH;
+                default: return PyLong_Type.tp_as_number->nb_true_divide(op1, op2);
+            }
         }
+                if ((8 * sizeof(long) <= 53 || likely(labs(a) <= ((PY_LONG_LONG)1 << 53)))
+                        || __Pyx_PyLong_DigitCount(op1) <= 52 / PyLong_SHIFT) {
+                    return PyFloat_FromDouble((double)a / (double)b);
+                }
+                return PyLong_Type.tp_as_number->nb_true_divide(op1, op2);
+            return PyLong_FromLong(x);
+        
     }
-    __Pyx_PyThreadState_assign
-    __Pyx_ErrRestore(type, value, tb);
-    return;
-raise_error:
-    Py_XDECREF(value);
-    Py_XDECREF(type);
-    Py_XDECREF(tb);
-    return;
+    #endif
+    if (PyFloat_CheckExact(op1)) {
+        const long b = intval;
+#if CYTHON_COMPILING_IN_LIMITED_API
+        double a = __pyx_PyFloat_AsDouble(op1);
+#else
+        double a = PyFloat_AS_DOUBLE(op1);
+#endif
+            double result;
+            
+            PyFPE_START_PROTECT("divide", return NULL)
+            result = ((double)a) / (double)b;
+            PyFPE_END_PROTECT(result)
+            return PyFloat_FromDouble(result);
+    }
+    return (inplace ? PyNumber_InPlaceTrueDivide : PyNumber_TrueDivide)(op1, op2);
 }
+#endif
+
+/* pybytes_as_double */
+static double __Pyx_SlowPyString_AsDouble(PyObject *obj) {
+    PyObject *float_value;
+#if PY_MAJOR_VERSION >= 3
+    float_value = PyFloat_FromString(obj);
 #else
-static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
-    PyObject* owned_instance = NULL;
-    if (tb == Py_None) {
-        tb = 0;
-    } else if (tb && !PyTraceBack_Check(tb)) {
-        PyErr_SetString(PyExc_TypeError,
-            "raise: arg 3 must be a traceback or None");
-        goto bad;
+    float_value = PyFloat_FromString(obj, 0);
+#endif
+    if (likely(float_value)) {
+        double value = PyFloat_AS_DOUBLE(float_value);
+        Py_DECREF(float_value);
+        return value;
     }
-    if (value == Py_None)
-        value = 0;
-    if (PyExceptionInstance_Check(type)) {
-        if (value) {
-            PyErr_SetString(PyExc_TypeError,
-                "instance exception may not have a separate value");
-            goto bad;
-        }
-        value = type;
-        type = (PyObject*) Py_TYPE(value);
-    } else if (PyExceptionClass_Check(type)) {
-        PyObject *instance_class = NULL;
-        if (value && PyExceptionInstance_Check(value)) {
-            instance_class = (PyObject*) Py_TYPE(value);
-            if (instance_class != type) {
-                int is_subclass = PyObject_IsSubclass(instance_class, type);
-                if (!is_subclass) {
-                    instance_class = NULL;
-                } else if (unlikely(is_subclass == -1)) {
-                    goto bad;
-                } else {
-                    type = instance_class;
-                }
-            }
-        }
-        if (!instance_class) {
-            PyObject *args;
-            if (!value)
-                args = PyTuple_New(0);
-            else if (PyTuple_Check(value)) {
-                Py_INCREF(value);
-                args = value;
-            } else
-                args = PyTuple_Pack(1, value);
-            if (!args)
-                goto bad;
-            owned_instance = PyObject_Call(type, args, NULL);
-            Py_DECREF(args);
-            if (!owned_instance)
-                goto bad;
-            value = owned_instance;
-            if (!PyExceptionInstance_Check(value)) {
-                PyErr_Format(PyExc_TypeError,
-                             "calling %R should have returned an instance of "
-                             "BaseException, not %R",
-                             type, Py_TYPE(value));
-                goto bad;
-            }
+    return (double)-1;
+}
+static const char* __Pyx__PyBytes_AsDouble_Copy(const char* start, char* buffer, Py_ssize_t length) {
+    int last_was_punctuation = 1;
+    Py_ssize_t i;
+    for (i=0; i < length; i++) {
+        char chr = start[i];
+        int is_punctuation = (chr == '_') | (chr == '.') | (chr == 'e') | (chr == 'E');
+        *buffer = chr;
+        buffer += (chr != '_');
+        if (unlikely(last_was_punctuation & is_punctuation)) goto parse_failure;
+        last_was_punctuation = is_punctuation;
+    }
+    if (unlikely(last_was_punctuation)) goto parse_failure;
+    *buffer = '\0';
+    return buffer;
+parse_failure:
+    return NULL;
+}
+static double __Pyx__PyBytes_AsDouble_inf_nan(const char* start, Py_ssize_t length) {
+    int matches = 1;
+    char sign = start[0];
+    int is_signed = (sign == '+') | (sign == '-');
+    start += is_signed;
+    length -= is_signed;
+    switch (start[0]) {
+        #ifdef Py_NAN
+        case 'n':
+        case 'N':
+            if (unlikely(length != 3)) goto parse_failure;
+            matches &= (start[1] == 'a' || start[1] == 'A');
+            matches &= (start[2] == 'n' || start[2] == 'N');
+            if (unlikely(!matches)) goto parse_failure;
+            return (sign == '-') ? -Py_NAN : Py_NAN;
+        #endif
+        case 'i':
+        case 'I':
+            if (unlikely(length < 3)) goto parse_failure;
+            matches &= (start[1] == 'n' || start[1] == 'N');
+            matches &= (start[2] == 'f' || start[2] == 'F');
+            if (likely(length == 3 && matches))
+                return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
+            if (unlikely(length != 8)) goto parse_failure;
+            matches &= (start[3] == 'i' || start[3] == 'I');
+            matches &= (start[4] == 'n' || start[4] == 'N');
+            matches &= (start[5] == 'i' || start[5] == 'I');
+            matches &= (start[6] == 't' || start[6] == 'T');
+            matches &= (start[7] == 'y' || start[7] == 'Y');
+            if (unlikely(!matches)) goto parse_failure;
+            return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
+        case '.': case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
+            break;
+        default:
+            goto parse_failure;
+    }
+    return 0.0;
+parse_failure:
+    return -1.0;
+}
+static CYTHON_INLINE int __Pyx__PyBytes_AsDouble_IsSpace(char ch) {
+    return (ch == 0x20) | !((ch < 0x9) | (ch > 0xd));
+}
+CYTHON_UNUSED static double __Pyx__PyBytes_AsDouble(PyObject *obj, const char* start, Py_ssize_t length) {
+    double value;
+    Py_ssize_t i, digits;
+    const char *last = start + length;
+    char *end;
+    while (__Pyx__PyBytes_AsDouble_IsSpace(*start))
+        start++;
+    while (start < last - 1 && __Pyx__PyBytes_AsDouble_IsSpace(last[-1]))
+        last--;
+    length = last - start;
+    if (unlikely(length <= 0)) goto fallback;
+    value = __Pyx__PyBytes_AsDouble_inf_nan(start, length);
+    if (unlikely(value == -1.0)) goto fallback;
+    if (value != 0.0) return value;
+    digits = 0;
+    for (i=0; i < length; digits += start[i++] != '_');
+    if (likely(digits == length)) {
+        value = PyOS_string_to_double(start, &end, NULL);
+    } else if (digits < 40) {
+        char number[40];
+        last = __Pyx__PyBytes_AsDouble_Copy(start, number, length);
+        if (unlikely(!last)) goto fallback;
+        value = PyOS_string_to_double(number, &end, NULL);
+    } else {
+        char *number = (char*) PyMem_Malloc((digits + 1) * sizeof(char));
+        if (unlikely(!number)) goto fallback;
+        last = __Pyx__PyBytes_AsDouble_Copy(start, number, length);
+        if (unlikely(!last)) {
+            PyMem_Free(number);
+            goto fallback;
+        }
+        value = PyOS_string_to_double(number, &end, NULL);
+        PyMem_Free(number);
+    }
+    if (likely(end == last) || (value == (double)-1 && PyErr_Occurred())) {
+        return value;
+    }
+fallback:
+    return __Pyx_SlowPyString_AsDouble(obj);
+}
+
+/* pynumber_float */
+static CYTHON_INLINE PyObject* __Pyx__PyNumber_Float(PyObject* obj) {
+    double val;
+    if (PyLong_CheckExact(obj)) {
+#if CYTHON_USE_PYLONG_INTERNALS
+        if (likely(__Pyx_PyLong_IsCompact(obj))) {
+            val = (double) __Pyx_PyLong_CompactValue(obj);
+            goto no_error;
         }
+#endif
+        val = PyLong_AsDouble(obj);
+    } else if (PyUnicode_CheckExact(obj)) {
+        val = __Pyx_PyUnicode_AsDouble(obj);
+    } else if (PyBytes_CheckExact(obj)) {
+        val = __Pyx_PyBytes_AsDouble(obj);
+    } else if (PyByteArray_CheckExact(obj)) {
+        val = __Pyx_PyByteArray_AsDouble(obj);
     } else {
-        PyErr_SetString(PyExc_TypeError,
-            "raise: exception class must be a subclass of BaseException");
-        goto bad;
+        return PyNumber_Float(obj);
     }
-    if (cause) {
-        PyObject *fixed_cause;
-        if (cause == Py_None) {
-            fixed_cause = NULL;
-        } else if (PyExceptionClass_Check(cause)) {
-            fixed_cause = PyObject_CallObject(cause, NULL);
-            if (fixed_cause == NULL)
-                goto bad;
-        } else if (PyExceptionInstance_Check(cause)) {
-            fixed_cause = cause;
-            Py_INCREF(fixed_cause);
-        } else {
-            PyErr_SetString(PyExc_TypeError,
-                            "exception causes must derive from "
-                            "BaseException");
-            goto bad;
-        }
-        PyException_SetCause(value, fixed_cause);
+    if (unlikely(val == -1 && PyErr_Occurred())) {
+        return NULL;
     }
-    PyErr_SetObject(type, value);
-    if (tb) {
-      #if PY_VERSION_HEX >= 0x030C00A6
-        PyException_SetTraceback(value, tb);
-      #elif CYTHON_FAST_THREAD_STATE
-        PyThreadState *tstate = __Pyx_PyThreadState_Current;
-        PyObject* tmp_tb = tstate->curexc_traceback;
-        if (tb != tmp_tb) {
-            Py_INCREF(tb);
-            tstate->curexc_traceback = tb;
-            Py_XDECREF(tmp_tb);
-        }
-#else
-        PyObject *tmp_type, *tmp_value, *tmp_tb;
-        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
-        Py_INCREF(tb);
-        PyErr_Restore(tmp_type, tmp_value, tb);
-        Py_XDECREF(tmp_tb);
+#if CYTHON_USE_PYLONG_INTERNALS
+no_error:
 #endif
-    }
-bad:
-    Py_XDECREF(owned_instance);
-    return;
+    return PyFloat_FromDouble(val);
 }
-#endif
 
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
@@ -6395,57 +6011,14 @@
     Py_XDECREF(empty_list);
     #if PY_MAJOR_VERSION < 3
     Py_XDECREF(py_import);
     #endif
     return module;
 }
 
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__3);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
-        }
-        #else
-        value = PyImport_GetModule(full_name);
-        #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
-    }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
-        #else
-            "cannot import name %S", name);
-        #endif
-    }
-    return value;
-}
-
 /* ImportDottedModule */
 #if PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
     PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
     if (unlikely(PyErr_Occurred())) {
         PyErr_Clear();
     }
@@ -6566,14 +6139,57 @@
     } else if (PyErr_Occurred()) {
         PyErr_Clear();
     }
 #endif
     return __Pyx__ImportDottedModule(name, parts_tuple);
 }
 
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__5);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
     CYTHON_UNUSED_VAR(type);
 #else
@@ -7932,29 +7548,14 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__19));
-    }
-    return name;
-}
-#endif
-
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -7985,14 +7586,29 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__8));
+    }
+    return name;
+}
+#endif
+
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
```

### Comparing `docrx-0.0.11/src/wrapper/infra/TextExtractor.c` & `docrx-0.0.110/src/wrapper/infra/TextExtractor.c`

 * *Files 1% similar despite different names*

```diff
@@ -2088,14 +2088,15 @@
 static const char __pyx_k_csv_path[] = "csv_path";
 static const char __pyx_k_endswith[] = "endswith";
 static const char __pyx_k_get_text[] = "get_text";
 static const char __pyx_k_isOpened[] = "isOpened";
 static const char __pyx_k_ocrmypdf[] = "ocrmypdf ";
 static const char __pyx_k_page_num[] = "page_num";
 static const char __pyx_k_pdf_path[] = "pdf_path";
+static const char __pyx_k_base_path[] = "base_path";
 static const char __pyx_k_enumerate[] = "enumerate";
 static const char __pyx_k_file_path[] = "file_path";
 static const char __pyx_k_force_ocr[] = " --force-ocr";
 static const char __pyx_k_image_pil[] = "image_pil";
 static const char __pyx_k_imgblocks[] = "imgblocks";
 static const char __pyx_k_input_pdf[] = "input_pdf";
 static const char __pyx_k_traceback[] = "traceback";
@@ -2110,15 +2111,16 @@
 static const char __pyx_k_video_path[] = "video_path";
 static const char __pyx_k_entire_text[] = "entire_text";
 static const char __pyx_k_pytesseract[] = "pytesseract";
 static const char __pyx_k_VideoCapture[] = "VideoCapture";
 static const char __pyx_k_image_name_2[] = "image_name";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_output_pdf_2[] = "output pdf ";
+static const char __pyx_k_output_pdf_2[] = "/output.pdf";
+static const char __pyx_k_output_pdf_3[] = "output pdf ";
 static const char __pyx_k_pdf_document[] = "pdf_document";
 static const char __pyx_k_run_ocrmypdf[] = "run_ocrmypdf";
 static const char __pyx_k_class_getitem[] = "__class_getitem__";
 static const char __pyx_k_video_capture[] = "video_capture";
 static const char __pyx_k_Command_failed[] = "Command failed";
 static const char __pyx_k_capture_output[] = "capture_output";
 static const char __pyx_k_image_to_string[] = "image_to_string";
@@ -2133,22 +2135,21 @@
 static const char __pyx_k_extract_text_from_image[] = "extract_text_from_image";
 static const char __pyx_k_extract_text_from_pdf_2[] = "extract_text_from_pdf";
 static const char __pyx_k_extract_text_from_video[] = "extract_text_from_video";
 static const char __pyx_k_wrapper_infra_TextExtractor[] = "wrapper.infra.TextExtractor";
 static const char __pyx_k_Command_executed_successfully[] = "Command executed successfully";
 static const char __pyx_k_final_text_extracted_from_pdf[] = "final text extracted from pdf";
 static const char __pyx_k_src_wrapper_infra_TextExtractor[] = "src/wrapper/infra/TextExtractor.pyx";
-static const char __pyx_k_background_tasks_server_logs_out[] = "background_tasks/server/logs/output.pdf";
 static const char __pyx_k_trying_new_method_to_extract_tex[] = "trying new method to extract text from pdf";
 /* #### Code section: decls ### */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_extract_text_from_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_2extract_text_from_any(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_file_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_4extract_text_from_csv(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_csv_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_6run_ocrmypdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_input_pdf, PyObject *__pyx_v_output_pdf); /* proto */
-static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_pdf_path); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_pdf_path, PyObject *__pyx_v_base_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_10_extract_text_from_pdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_pdf_path); /* proto */
 static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_12extract_text_from_video(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_video_path); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
@@ -2195,15 +2196,15 @@
   PyObject *__pyx_n_u__4;
   PyObject *__pyx_kp_u__5;
   PyObject *__pyx_kp_u__6;
   PyObject *__pyx_kp_u__7;
   PyObject *__pyx_n_s__8;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_b;
-  PyObject *__pyx_kp_u_background_tasks_server_logs_out;
+  PyObject *__pyx_n_s_base_path;
   PyObject *__pyx_n_s_blocks;
   PyObject *__pyx_n_u_blocks;
   PyObject *__pyx_n_s_capture_output;
   PyObject *__pyx_n_s_class_getitem;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_close;
   PyObject *__pyx_n_s_csv_path;
@@ -2252,14 +2253,15 @@
   PyObject *__pyx_n_s_ocr_result;
   PyObject *__pyx_kp_u_ocrmypdf;
   PyObject *__pyx_kp_u_on_Page;
   PyObject *__pyx_n_s_open;
   PyObject *__pyx_n_s_output;
   PyObject *__pyx_n_s_output_pdf;
   PyObject *__pyx_kp_u_output_pdf_2;
+  PyObject *__pyx_kp_u_output_pdf_3;
   PyObject *__pyx_n_s_page;
   PyObject *__pyx_n_s_page_count;
   PyObject *__pyx_n_s_page_num;
   PyObject *__pyx_n_s_pdf_document;
   PyObject *__pyx_n_s_pdf_path;
   PyObject *__pyx_n_s_pytesseract;
   PyObject *__pyx_n_s_range;
@@ -2364,15 +2366,15 @@
   Py_CLEAR(clear_module_state->__pyx_n_u__4);
   Py_CLEAR(clear_module_state->__pyx_kp_u__5);
   Py_CLEAR(clear_module_state->__pyx_kp_u__6);
   Py_CLEAR(clear_module_state->__pyx_kp_u__7);
   Py_CLEAR(clear_module_state->__pyx_n_s__8);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_b);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_background_tasks_server_logs_out);
+  Py_CLEAR(clear_module_state->__pyx_n_s_base_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_blocks);
   Py_CLEAR(clear_module_state->__pyx_n_u_blocks);
   Py_CLEAR(clear_module_state->__pyx_n_s_capture_output);
   Py_CLEAR(clear_module_state->__pyx_n_s_class_getitem);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_close);
   Py_CLEAR(clear_module_state->__pyx_n_s_csv_path);
@@ -2421,14 +2423,15 @@
   Py_CLEAR(clear_module_state->__pyx_n_s_ocr_result);
   Py_CLEAR(clear_module_state->__pyx_kp_u_ocrmypdf);
   Py_CLEAR(clear_module_state->__pyx_kp_u_on_Page);
   Py_CLEAR(clear_module_state->__pyx_n_s_open);
   Py_CLEAR(clear_module_state->__pyx_n_s_output);
   Py_CLEAR(clear_module_state->__pyx_n_s_output_pdf);
   Py_CLEAR(clear_module_state->__pyx_kp_u_output_pdf_2);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_output_pdf_3);
   Py_CLEAR(clear_module_state->__pyx_n_s_page);
   Py_CLEAR(clear_module_state->__pyx_n_s_page_count);
   Py_CLEAR(clear_module_state->__pyx_n_s_page_num);
   Py_CLEAR(clear_module_state->__pyx_n_s_pdf_document);
   Py_CLEAR(clear_module_state->__pyx_n_s_pdf_path);
   Py_CLEAR(clear_module_state->__pyx_n_s_pytesseract);
   Py_CLEAR(clear_module_state->__pyx_n_s_range);
@@ -2511,15 +2514,15 @@
   Py_VISIT(traverse_module_state->__pyx_n_u__4);
   Py_VISIT(traverse_module_state->__pyx_kp_u__5);
   Py_VISIT(traverse_module_state->__pyx_kp_u__6);
   Py_VISIT(traverse_module_state->__pyx_kp_u__7);
   Py_VISIT(traverse_module_state->__pyx_n_s__8);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_b);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_background_tasks_server_logs_out);
+  Py_VISIT(traverse_module_state->__pyx_n_s_base_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_blocks);
   Py_VISIT(traverse_module_state->__pyx_n_u_blocks);
   Py_VISIT(traverse_module_state->__pyx_n_s_capture_output);
   Py_VISIT(traverse_module_state->__pyx_n_s_class_getitem);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_close);
   Py_VISIT(traverse_module_state->__pyx_n_s_csv_path);
@@ -2568,14 +2571,15 @@
   Py_VISIT(traverse_module_state->__pyx_n_s_ocr_result);
   Py_VISIT(traverse_module_state->__pyx_kp_u_ocrmypdf);
   Py_VISIT(traverse_module_state->__pyx_kp_u_on_Page);
   Py_VISIT(traverse_module_state->__pyx_n_s_open);
   Py_VISIT(traverse_module_state->__pyx_n_s_output);
   Py_VISIT(traverse_module_state->__pyx_n_s_output_pdf);
   Py_VISIT(traverse_module_state->__pyx_kp_u_output_pdf_2);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_output_pdf_3);
   Py_VISIT(traverse_module_state->__pyx_n_s_page);
   Py_VISIT(traverse_module_state->__pyx_n_s_page_count);
   Py_VISIT(traverse_module_state->__pyx_n_s_page_num);
   Py_VISIT(traverse_module_state->__pyx_n_s_pdf_document);
   Py_VISIT(traverse_module_state->__pyx_n_s_pdf_path);
   Py_VISIT(traverse_module_state->__pyx_n_s_pytesseract);
   Py_VISIT(traverse_module_state->__pyx_n_s_range);
@@ -2668,15 +2672,15 @@
 #define __pyx_n_u__4 __pyx_mstate_global->__pyx_n_u__4
 #define __pyx_kp_u__5 __pyx_mstate_global->__pyx_kp_u__5
 #define __pyx_kp_u__6 __pyx_mstate_global->__pyx_kp_u__6
 #define __pyx_kp_u__7 __pyx_mstate_global->__pyx_kp_u__7
 #define __pyx_n_s__8 __pyx_mstate_global->__pyx_n_s__8
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_b __pyx_mstate_global->__pyx_n_s_b
-#define __pyx_kp_u_background_tasks_server_logs_out __pyx_mstate_global->__pyx_kp_u_background_tasks_server_logs_out
+#define __pyx_n_s_base_path __pyx_mstate_global->__pyx_n_s_base_path
 #define __pyx_n_s_blocks __pyx_mstate_global->__pyx_n_s_blocks
 #define __pyx_n_u_blocks __pyx_mstate_global->__pyx_n_u_blocks
 #define __pyx_n_s_capture_output __pyx_mstate_global->__pyx_n_s_capture_output
 #define __pyx_n_s_class_getitem __pyx_mstate_global->__pyx_n_s_class_getitem
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_close __pyx_mstate_global->__pyx_n_s_close
 #define __pyx_n_s_csv_path __pyx_mstate_global->__pyx_n_s_csv_path
@@ -2725,14 +2729,15 @@
 #define __pyx_n_s_ocr_result __pyx_mstate_global->__pyx_n_s_ocr_result
 #define __pyx_kp_u_ocrmypdf __pyx_mstate_global->__pyx_kp_u_ocrmypdf
 #define __pyx_kp_u_on_Page __pyx_mstate_global->__pyx_kp_u_on_Page
 #define __pyx_n_s_open __pyx_mstate_global->__pyx_n_s_open
 #define __pyx_n_s_output __pyx_mstate_global->__pyx_n_s_output
 #define __pyx_n_s_output_pdf __pyx_mstate_global->__pyx_n_s_output_pdf
 #define __pyx_kp_u_output_pdf_2 __pyx_mstate_global->__pyx_kp_u_output_pdf_2
+#define __pyx_kp_u_output_pdf_3 __pyx_mstate_global->__pyx_kp_u_output_pdf_3
 #define __pyx_n_s_page __pyx_mstate_global->__pyx_n_s_page
 #define __pyx_n_s_page_count __pyx_mstate_global->__pyx_n_s_page_count
 #define __pyx_n_s_page_num __pyx_mstate_global->__pyx_n_s_page_num
 #define __pyx_n_s_pdf_document __pyx_mstate_global->__pyx_n_s_pdf_document
 #define __pyx_n_s_pdf_path __pyx_mstate_global->__pyx_n_s_pdf_path
 #define __pyx_n_s_pytesseract __pyx_mstate_global->__pyx_n_s_pytesseract
 #define __pyx_n_s_range __pyx_mstate_global->__pyx_n_s_range
@@ -3188,16 +3193,16 @@
   return __pyx_r;
 }
 
 /* "wrapper/infra/TextExtractor.pyx":31
  *     return text
  * 
  * def run_ocrmypdf(input_pdf, output_pdf):             # <<<<<<<<<<<<<<
- *     # Call ocrmypdf using subprocess
  *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
+ * 
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_5infra_13TextExtractor_7run_ocrmypdf(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
@@ -3293,100 +3298,100 @@
   int __pyx_t_7;
   int __pyx_t_8;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("run_ocrmypdf", 0);
 
-  /* "wrapper/infra/TextExtractor.pyx":33
+  /* "wrapper/infra/TextExtractor.pyx":32
+ * 
  * def run_ocrmypdf(input_pdf, output_pdf):
- *     # Call ocrmypdf using subprocess
  *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)             # <<<<<<<<<<<<<<
  * 
- *     # Check the result
+ *     if result.returncode == 0:
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_subprocess); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_subprocess); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_run); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_run); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_1 = PyTuple_New(5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_1 = PyTuple_New(5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_3 = 0;
   __pyx_t_4 = 127;
   __Pyx_INCREF(__pyx_kp_u_ocrmypdf);
   __pyx_t_3 += 9;
   __Pyx_GIVEREF(__pyx_kp_u_ocrmypdf);
   PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_kp_u_ocrmypdf);
-  __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_input_pdf, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_input_pdf, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __pyx_t_4 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) > __pyx_t_4) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) : __pyx_t_4;
   __pyx_t_3 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_5);
   __Pyx_GIVEREF(__pyx_t_5);
   PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_5);
   __pyx_t_5 = 0;
   __Pyx_INCREF(__pyx_kp_u_);
   __pyx_t_3 += 1;
   __Pyx_GIVEREF(__pyx_kp_u_);
   PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_kp_u_);
-  __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_output_pdf, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_output_pdf, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __pyx_t_4 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) > __pyx_t_4) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_5) : __pyx_t_4;
   __pyx_t_3 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_5);
   __Pyx_GIVEREF(__pyx_t_5);
   PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_5);
   __pyx_t_5 = 0;
   __Pyx_INCREF(__pyx_kp_u_force_ocr);
   __pyx_t_3 += 12;
   __Pyx_GIVEREF(__pyx_kp_u_force_ocr);
   PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_kp_u_force_ocr);
-  __pyx_t_5 = __Pyx_PyUnicode_Join(__pyx_t_1, 5, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyUnicode_Join(__pyx_t_1, 5, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __Pyx_GIVEREF(__pyx_t_5);
   PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_5);
   __pyx_t_5 = 0;
-  __pyx_t_5 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_shell, Py_True) < 0) __PYX_ERR(0, 33, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_capture_output, Py_True) < 0) __PYX_ERR(0, 33, __pyx_L1_error)
-  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_text, Py_True) < 0) __PYX_ERR(0, 33, __pyx_L1_error)
-  __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_1, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 33, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_shell, Py_True) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_capture_output, Py_True) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_text, Py_True) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_1, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 32, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   __pyx_v_result = __pyx_t_6;
   __pyx_t_6 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":36
+  /* "wrapper/infra/TextExtractor.pyx":34
+ *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
  * 
- *     # Check the result
  *     if result.returncode == 0:             # <<<<<<<<<<<<<<
  *         logging.debug("Command executed successfully")
  *         logging.debug("Output:")
  */
-  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_returncode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 36, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_returncode); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 34, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_6);
-  __pyx_t_7 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_6, __pyx_int_0, 0, 0)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 36, __pyx_L1_error)
+  __pyx_t_7 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_6, __pyx_int_0, 0, 0)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 34, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
   if (likely(__pyx_t_7)) {
 
-    /* "wrapper/infra/TextExtractor.pyx":37
- *     # Check the result
+    /* "wrapper/infra/TextExtractor.pyx":35
+ * 
  *     if result.returncode == 0:
  *         logging.debug("Command executed successfully")             # <<<<<<<<<<<<<<
  *         logging.debug("Output:")
  *         logging.debug(result.stdout)
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 37, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 35, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 37, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 35, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __pyx_t_5 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_5)) {
@@ -3397,30 +3402,30 @@
         __pyx_t_8 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_Command_executed_successfully};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 37, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 35, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":38
+    /* "wrapper/infra/TextExtractor.pyx":36
  *     if result.returncode == 0:
  *         logging.debug("Command executed successfully")
  *         logging.debug("Output:")             # <<<<<<<<<<<<<<
  *         logging.debug(result.stdout)
  *     else:
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 38, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 36, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 38, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 36, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __pyx_t_1 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
       __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_5);
       if (likely(__pyx_t_1)) {
@@ -3431,33 +3436,33 @@
         __pyx_t_8 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_kp_u_Output};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 38, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 36, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":39
+    /* "wrapper/infra/TextExtractor.pyx":37
  *         logging.debug("Command executed successfully")
  *         logging.debug("Output:")
  *         logging.debug(result.stdout)             # <<<<<<<<<<<<<<
  *     else:
  *         logging.debug("Command failed")
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 39, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_stdout); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 39, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_stdout); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 37, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __pyx_t_2 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_2)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -3468,41 +3473,41 @@
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_5};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 39, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 37, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":36
+    /* "wrapper/infra/TextExtractor.pyx":34
+ *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
  * 
- *     # Check the result
  *     if result.returncode == 0:             # <<<<<<<<<<<<<<
  *         logging.debug("Command executed successfully")
  *         logging.debug("Output:")
  */
     goto __pyx_L3;
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":41
+  /* "wrapper/infra/TextExtractor.pyx":39
  *         logging.debug(result.stdout)
  *     else:
  *         logging.debug("Command failed")             # <<<<<<<<<<<<<<
  *         logging.debug("Error:")
  *         logging.debug(result.stderr)
  */
   /*else*/ {
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 39, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     __pyx_t_1 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
       __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_5);
       if (likely(__pyx_t_1)) {
@@ -3513,30 +3518,30 @@
         __pyx_t_8 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_kp_u_Command_failed};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 39, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":42
+    /* "wrapper/infra/TextExtractor.pyx":40
  *     else:
  *         logging.debug("Command failed")
  *         logging.debug("Error:")             # <<<<<<<<<<<<<<
  *         logging.debug(result.stderr)
  *         raise 'Fail to process pdf'
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 42, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 40, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 40, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __pyx_t_5 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_5)) {
@@ -3547,33 +3552,33 @@
         __pyx_t_8 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_Error};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 42, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 40, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":43
+    /* "wrapper/infra/TextExtractor.pyx":41
  *         logging.debug("Command failed")
  *         logging.debug("Error:")
  *         logging.debug(result.stderr)             # <<<<<<<<<<<<<<
  *         raise 'Fail to process pdf'
  * 
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 43, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_stderr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 43, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_result, __pyx_n_s_stderr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 41, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_2 = NULL;
     __pyx_t_8 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
       __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
       if (likely(__pyx_t_2)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
@@ -3584,38 +3589,38 @@
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_1};
       __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_8, 1+__pyx_t_8);
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 43, __pyx_L1_error)
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_6);
       __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     }
     __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":44
+    /* "wrapper/infra/TextExtractor.pyx":42
  *         logging.debug("Error:")
  *         logging.debug(result.stderr)
  *         raise 'Fail to process pdf'             # <<<<<<<<<<<<<<
  * 
- * def extract_text_from_pdf(pdf_path):
+ * def extract_text_from_pdf(pdf_path, base_path):
  */
     __Pyx_Raise(__pyx_kp_u_Fail_to_process_pdf, 0, 0, 0);
-    __PYX_ERR(0, 44, __pyx_L1_error)
+    __PYX_ERR(0, 42, __pyx_L1_error)
   }
   __pyx_L3:;
 
   /* "wrapper/infra/TextExtractor.pyx":31
  *     return text
  * 
  * def run_ocrmypdf(input_pdf, output_pdf):             # <<<<<<<<<<<<<<
- *     # Call ocrmypdf using subprocess
  *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
+ * 
  */
 
   /* function exit code */
   __pyx_r = Py_None; __Pyx_INCREF(Py_None);
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
@@ -3627,95 +3632,107 @@
   __pyx_L0:;
   __Pyx_XDECREF(__pyx_v_result);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/infra/TextExtractor.pyx":46
+/* "wrapper/infra/TextExtractor.pyx":44
  *         raise 'Fail to process pdf'
  * 
- * def extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
- *     output = 'background_tasks/server/logs/output.pdf'
- *     # dirname = os.path.dirname(__file__)
+ * def extract_text_from_pdf(pdf_path, base_path):             # <<<<<<<<<<<<<<
+ *     output = base_path + '/output.pdf'
+ *     logging.debug(f'output pdf {output}')
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf, "extract_text_from_pdf(pdf_path)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf, "extract_text_from_pdf(pdf_path, base_path)");
 static PyMethodDef __pyx_mdef_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf = {"extract_text_from_pdf", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf};
 static PyObject *__pyx_pw_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
   PyObject *__pyx_v_pdf_path = 0;
+  PyObject *__pyx_v_base_path = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("extract_text_from_pdf (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pdf_path,0};
-    PyObject* values[1] = {0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pdf_path,&__pyx_n_s_base_path,0};
+    PyObject* values[2] = {0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pdf_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 46, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 44, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_base_path)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 44, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("extract_text_from_pdf", 1, 2, 2, 1); __PYX_ERR(0, 44, __pyx_L3_error)
+        }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_text_from_pdf") < 0)) __PYX_ERR(0, 46, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_text_from_pdf") < 0)) __PYX_ERR(0, 44, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 1)) {
+    } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
     __pyx_v_pdf_path = values[0];
+    __pyx_v_base_path = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("extract_text_from_pdf", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 46, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("extract_text_from_pdf", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 44, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.infra.TextExtractor.extract_text_from_pdf", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(__pyx_self, __pyx_v_pdf_path);
+  __pyx_r = __pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(__pyx_self, __pyx_v_pdf_path, __pyx_v_base_path);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_pdf_path) {
+static PyObject *__pyx_pf_7wrapper_5infra_13TextExtractor_8extract_text_from_pdf(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_pdf_path, PyObject *__pyx_v_base_path) {
   PyObject *__pyx_v_output = NULL;
   PyObject *__pyx_v_pdf_document = NULL;
   PyObject *__pyx_v_entire_text = NULL;
   PyObject *__pyx_v_page_num = NULL;
   PyObject *__pyx_v_page = NULL;
   PyObject *__pyx_v_text = NULL;
   PyObject *__pyx_r = NULL;
@@ -3744,82 +3761,87 @@
   PyObject *__pyx_t_22 = NULL;
   int __pyx_t_23;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("extract_text_from_pdf", 0);
 
-  /* "wrapper/infra/TextExtractor.pyx":47
+  /* "wrapper/infra/TextExtractor.pyx":45
  * 
- * def extract_text_from_pdf(pdf_path):
- *     output = 'background_tasks/server/logs/output.pdf'             # <<<<<<<<<<<<<<
- *     # dirname = os.path.dirname(__file__)
- *     # output = os.path.join(dirname, 'output.pdf')
- */
-  __Pyx_INCREF(__pyx_kp_u_background_tasks_server_logs_out);
-  __pyx_v_output = __pyx_kp_u_background_tasks_server_logs_out;
-
-  /* "wrapper/infra/TextExtractor.pyx":50
- *     # dirname = os.path.dirname(__file__)
- *     # output = os.path.join(dirname, 'output.pdf')
+ * def extract_text_from_pdf(pdf_path, base_path):
+ *     output = base_path + '/output.pdf'             # <<<<<<<<<<<<<<
+ *     logging.debug(f'output pdf {output}')
+ *     pdf_document = None
+ */
+  __pyx_t_1 = PyNumber_Add(__pyx_v_base_path, __pyx_kp_u_output_pdf_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 45, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_v_output = __pyx_t_1;
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/TextExtractor.pyx":46
+ * def extract_text_from_pdf(pdf_path, base_path):
+ *     output = base_path + '/output.pdf'
  *     logging.debug(f'output pdf {output}')             # <<<<<<<<<<<<<<
  *     pdf_document = None
  *     entire_text = ''
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_PyUnicode_Concat(__pyx_kp_u_output_pdf_2, __pyx_v_output); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 50, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_output, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 46, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_4 = NULL;
+  __pyx_t_4 = __Pyx_PyUnicode_Concat(__pyx_kp_u_output_pdf_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
   __pyx_t_5 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_4)) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_4);
+      __Pyx_INCREF(__pyx_t_2);
       __Pyx_INCREF(function);
       __Pyx_DECREF_SET(__pyx_t_3, function);
       __pyx_t_5 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_2};
+    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_4};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 50, __pyx_L1_error)
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 46, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":51
- *     # output = os.path.join(dirname, 'output.pdf')
+  /* "wrapper/infra/TextExtractor.pyx":47
+ *     output = base_path + '/output.pdf'
  *     logging.debug(f'output pdf {output}')
  *     pdf_document = None             # <<<<<<<<<<<<<<
  *     entire_text = ''
  *     try:
  */
   __Pyx_INCREF(Py_None);
   __pyx_v_pdf_document = Py_None;
 
-  /* "wrapper/infra/TextExtractor.pyx":52
+  /* "wrapper/infra/TextExtractor.pyx":48
  *     logging.debug(f'output pdf {output}')
  *     pdf_document = None
  *     entire_text = ''             # <<<<<<<<<<<<<<
  *     try:
  *         run_ocrmypdf(pdf_path, output)
  */
   __Pyx_INCREF(__pyx_kp_u__2);
   __pyx_v_entire_text = __pyx_kp_u__2;
 
-  /* "wrapper/infra/TextExtractor.pyx":53
+  /* "wrapper/infra/TextExtractor.pyx":49
  *     pdf_document = None
  *     entire_text = ''
  *     try:             # <<<<<<<<<<<<<<
  *         run_ocrmypdf(pdf_path, output)
  *         pdf_document = fitz.open(output)
  */
   /*try:*/ {
@@ -3828,273 +3850,273 @@
       __Pyx_PyThreadState_assign
       __Pyx_ExceptionSave(&__pyx_t_6, &__pyx_t_7, &__pyx_t_8);
       __Pyx_XGOTREF(__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_7);
       __Pyx_XGOTREF(__pyx_t_8);
       /*try:*/ {
 
-        /* "wrapper/infra/TextExtractor.pyx":54
+        /* "wrapper/infra/TextExtractor.pyx":50
  *     entire_text = ''
  *     try:
  *         run_ocrmypdf(pdf_path, output)             # <<<<<<<<<<<<<<
  *         pdf_document = fitz.open(output)
  * 
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_run_ocrmypdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 54, __pyx_L6_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_run_ocrmypdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 50, __pyx_L6_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_2 = NULL;
+        __pyx_t_4 = NULL;
         __pyx_t_5 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-          __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
-          if (likely(__pyx_t_2)) {
+          __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+          if (likely(__pyx_t_4)) {
             PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-            __Pyx_INCREF(__pyx_t_2);
+            __Pyx_INCREF(__pyx_t_4);
             __Pyx_INCREF(function);
             __Pyx_DECREF_SET(__pyx_t_3, function);
             __pyx_t_5 = 1;
           }
         }
         {
-          PyObject *__pyx_callargs[3] = {__pyx_t_2, __pyx_v_pdf_path, __pyx_v_output};
+          PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_pdf_path, __pyx_v_output};
           __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 2+__pyx_t_5);
-          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 54, __pyx_L6_error)
+          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 50, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_1);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         }
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":55
+        /* "wrapper/infra/TextExtractor.pyx":51
  *     try:
  *         run_ocrmypdf(pdf_path, output)
  *         pdf_document = fitz.open(output)             # <<<<<<<<<<<<<<
  * 
  *         for page_num in range(pdf_document.page_count):
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_fitz); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 55, __pyx_L6_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_fitz); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 51, __pyx_L6_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_open); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_open); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 51, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         __pyx_t_3 = NULL;
         __pyx_t_5 = 0;
-        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
+          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
           if (likely(__pyx_t_3)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
             __Pyx_INCREF(__pyx_t_3);
             __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_2, function);
+            __Pyx_DECREF_SET(__pyx_t_4, function);
             __pyx_t_5 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_output};
-          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
+          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 55, __pyx_L6_error)
+          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 51, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         }
         __Pyx_DECREF_SET(__pyx_v_pdf_document, __pyx_t_1);
         __pyx_t_1 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":57
+        /* "wrapper/infra/TextExtractor.pyx":53
  *         pdf_document = fitz.open(output)
  * 
  *         for page_num in range(pdf_document.page_count):             # <<<<<<<<<<<<<<
  *             page = pdf_document[page_num]
  * 
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_page_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L6_error)
+        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_page_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L6_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L6_error)
-        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_4);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
-          __pyx_t_1 = __pyx_t_2; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
+        if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
+          __pyx_t_1 = __pyx_t_4; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
           __pyx_t_10 = NULL;
         } else {
-          __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 57, __pyx_L6_error)
+          __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 53, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __pyx_t_10 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 57, __pyx_L6_error)
+          __pyx_t_10 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 53, __pyx_L6_error)
         }
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         for (;;) {
           if (likely(!__pyx_t_10)) {
             if (likely(PyList_CheckExact(__pyx_t_1))) {
               if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
               #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_2); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 57, __pyx_L6_error)
+              __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_4); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 53, __pyx_L6_error)
               #else
-              __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L6_error)
-              __Pyx_GOTREF(__pyx_t_2);
+              __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L6_error)
+              __Pyx_GOTREF(__pyx_t_4);
               #endif
             } else {
               if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
               #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_2); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 57, __pyx_L6_error)
+              __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_4); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 53, __pyx_L6_error)
               #else
-              __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 57, __pyx_L6_error)
-              __Pyx_GOTREF(__pyx_t_2);
+              __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 53, __pyx_L6_error)
+              __Pyx_GOTREF(__pyx_t_4);
               #endif
             }
           } else {
-            __pyx_t_2 = __pyx_t_10(__pyx_t_1);
-            if (unlikely(!__pyx_t_2)) {
+            __pyx_t_4 = __pyx_t_10(__pyx_t_1);
+            if (unlikely(!__pyx_t_4)) {
               PyObject* exc_type = PyErr_Occurred();
               if (exc_type) {
                 if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                else __PYX_ERR(0, 57, __pyx_L6_error)
+                else __PYX_ERR(0, 53, __pyx_L6_error)
               }
               break;
             }
-            __Pyx_GOTREF(__pyx_t_2);
+            __Pyx_GOTREF(__pyx_t_4);
           }
-          __Pyx_XDECREF_SET(__pyx_v_page_num, __pyx_t_2);
-          __pyx_t_2 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_page_num, __pyx_t_4);
+          __pyx_t_4 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":58
+          /* "wrapper/infra/TextExtractor.pyx":54
  * 
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]             # <<<<<<<<<<<<<<
  * 
  *             # Extract text from the page
  */
-          __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_pdf_document, __pyx_v_page_num); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 58, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_XDECREF_SET(__pyx_v_page, __pyx_t_2);
-          __pyx_t_2 = 0;
+          __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_v_pdf_document, __pyx_v_page_num); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 54, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_XDECREF_SET(__pyx_v_page, __pyx_t_4);
+          __pyx_t_4 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":61
+          /* "wrapper/infra/TextExtractor.pyx":57
  * 
  *             # Extract text from the page
  *             text = page.get_text("text")             # <<<<<<<<<<<<<<
  *             entire_text += text
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  */
-          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L6_error)
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 57, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_4 = NULL;
+          __pyx_t_2 = NULL;
           __pyx_t_5 = 0;
           if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
-            __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
-            if (likely(__pyx_t_4)) {
+            __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+            if (likely(__pyx_t_2)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-              __Pyx_INCREF(__pyx_t_4);
+              __Pyx_INCREF(__pyx_t_2);
               __Pyx_INCREF(function);
               __Pyx_DECREF_SET(__pyx_t_3, function);
               __pyx_t_5 = 1;
             }
           }
           {
-            PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_n_u_text};
-            __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-            __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L6_error)
-            __Pyx_GOTREF(__pyx_t_2);
+            PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_n_u_text};
+            __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
+            __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 57, __pyx_L6_error)
+            __Pyx_GOTREF(__pyx_t_4);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           }
-          __Pyx_XDECREF_SET(__pyx_v_text, __pyx_t_2);
-          __pyx_t_2 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_text, __pyx_t_4);
+          __pyx_t_4 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":62
+          /* "wrapper/infra/TextExtractor.pyx":58
  *             # Extract text from the page
  *             text = page.get_text("text")
  *             entire_text += text             # <<<<<<<<<<<<<<
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
- * 
+ *     except:
  */
-          __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_entire_text, __pyx_v_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 62, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          __Pyx_DECREF_SET(__pyx_v_entire_text, __pyx_t_2);
-          __pyx_t_2 = 0;
+          __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_entire_text, __pyx_v_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 58, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_4);
+          __Pyx_DECREF_SET(__pyx_v_entire_text, __pyx_t_4);
+          __pyx_t_4 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":63
+          /* "wrapper/infra/TextExtractor.pyx":59
  *             text = page.get_text("text")
  *             entire_text += text
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")             # <<<<<<<<<<<<<<
- * 
- *         # logging.debug(f"entire text:\n{entire_text}")
+ *     except:
+ *         logging.error(traceback.format_exc())
  */
-          __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 63, __pyx_L6_error)
-          __Pyx_GOTREF(__pyx_t_4);
+          __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_2);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __pyx_t_3 = PyTuple_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __pyx_t_3 = PyTuple_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
           __pyx_t_11 = 0;
           __pyx_t_12 = 127;
           __Pyx_INCREF(__pyx_kp_u_Page);
           __pyx_t_11 += 5;
           __Pyx_GIVEREF(__pyx_kp_u_Page);
           PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Page);
-          __pyx_t_13 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __pyx_t_13 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_13);
-          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_13, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_13, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
           __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
           __pyx_t_11 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
           __Pyx_GIVEREF(__pyx_t_14);
           PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_14);
           __pyx_t_14 = 0;
           __Pyx_INCREF(__pyx_kp_u_Text);
           __pyx_t_11 += 7;
           __Pyx_GIVEREF(__pyx_kp_u_Text);
           PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_Text);
-          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
           __pyx_t_11 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
           __Pyx_GIVEREF(__pyx_t_14);
           PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_14);
           __pyx_t_14 = 0;
           __Pyx_INCREF(__pyx_kp_u__3);
           __pyx_t_11 += 1;
           __Pyx_GIVEREF(__pyx_kp_u__3);
           PyTuple_SET_ITEM(__pyx_t_3, 4, __pyx_kp_u__3);
-          __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 5, __pyx_t_11, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 63, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 5, __pyx_t_11, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 59, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           __pyx_t_3 = NULL;
           __pyx_t_5 = 0;
-          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
-            __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
+          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+            __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
             if (likely(__pyx_t_3)) {
-              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
               __Pyx_INCREF(__pyx_t_3);
               __Pyx_INCREF(function);
-              __Pyx_DECREF_SET(__pyx_t_4, function);
+              __Pyx_DECREF_SET(__pyx_t_2, function);
               __pyx_t_5 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_t_14};
-            __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
+            __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
             __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L6_error)
-            __Pyx_GOTREF(__pyx_t_2);
-            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 59, __pyx_L6_error)
+            __Pyx_GOTREF(__pyx_t_4);
+            __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
           }
-          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":57
+          /* "wrapper/infra/TextExtractor.pyx":53
  *         pdf_document = fitz.open(output)
  * 
  *         for page_num in range(pdf_document.page_count):             # <<<<<<<<<<<<<<
  *             page = pdf_document[page_num]
  * 
  */
         }
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":53
+        /* "wrapper/infra/TextExtractor.pyx":49
  *     pdf_document = None
  *     entire_text = ''
  *     try:             # <<<<<<<<<<<<<<
  *         run_ocrmypdf(pdf_path, output)
  *         pdf_document = fitz.open(output)
  */
       }
@@ -4106,43 +4128,43 @@
       __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
       __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
       __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-      /* "wrapper/infra/TextExtractor.pyx":66
- * 
- *         # logging.debug(f"entire text:\n{entire_text}")
+      /* "wrapper/infra/TextExtractor.pyx":60
+ *             entire_text += text
+ *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  *     except:             # <<<<<<<<<<<<<<
  *         logging.error(traceback.format_exc())
  *         logging.info('trying new method to extract text from pdf')
  */
       /*except:*/ {
         __Pyx_AddTraceback("wrapper.infra.TextExtractor.extract_text_from_pdf", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_4) < 0) __PYX_ERR(0, 66, __pyx_L8_except_error)
+        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_4, &__pyx_t_2) < 0) __PYX_ERR(0, 60, __pyx_L8_except_error)
         __Pyx_XGOTREF(__pyx_t_1);
-        __Pyx_XGOTREF(__pyx_t_2);
         __Pyx_XGOTREF(__pyx_t_4);
+        __Pyx_XGOTREF(__pyx_t_2);
 
-        /* "wrapper/infra/TextExtractor.pyx":67
- *         # logging.debug(f"entire text:\n{entire_text}")
+        /* "wrapper/infra/TextExtractor.pyx":61
+ *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  *     except:
  *         logging.error(traceback.format_exc())             # <<<<<<<<<<<<<<
  *         logging.info('trying new method to extract text from pdf')
  *         entire_text = _extract_text_from_pdf(pdf_path)
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_error); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+        __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_error); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 61, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_13);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_15, __pyx_n_s_traceback); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_15, __pyx_n_s_traceback); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 61, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_15);
-        __pyx_t_16 = __Pyx_PyObject_GetAttrStr(__pyx_t_15, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+        __pyx_t_16 = __Pyx_PyObject_GetAttrStr(__pyx_t_15, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 61, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_16);
         __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
         __pyx_t_15 = NULL;
         __pyx_t_5 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_16))) {
           __pyx_t_15 = PyMethod_GET_SELF(__pyx_t_16);
           if (likely(__pyx_t_15)) {
@@ -4153,15 +4175,15 @@
             __pyx_t_5 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[1] = {__pyx_t_15, };
           __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_16, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
-          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_3);
           __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
         }
         __pyx_t_16 = NULL;
         __pyx_t_5 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
           __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_13);
@@ -4174,30 +4196,30 @@
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_16, __pyx_t_3};
           __pyx_t_14 = __Pyx_PyObject_FastCall(__pyx_t_13, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 67, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 61, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
         }
         __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":68
+        /* "wrapper/infra/TextExtractor.pyx":62
  *     except:
  *         logging.error(traceback.format_exc())
  *         logging.info('trying new method to extract text from pdf')             # <<<<<<<<<<<<<<
  *         entire_text = _extract_text_from_pdf(pdf_path)
  *     finally:
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_logging); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 68, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_logging); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 62, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_13);
-        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 68, __pyx_L8_except_error)
+        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_info); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 62, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_3);
         __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
         __pyx_t_13 = NULL;
         __pyx_t_5 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
           __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_3);
           if (likely(__pyx_t_13)) {
@@ -4208,28 +4230,28 @@
             __pyx_t_5 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_13, __pyx_kp_u_trying_new_method_to_extract_tex};
           __pyx_t_14 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 68, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 62, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         }
         __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":69
+        /* "wrapper/infra/TextExtractor.pyx":63
  *         logging.error(traceback.format_exc())
  *         logging.info('trying new method to extract text from pdf')
  *         entire_text = _extract_text_from_pdf(pdf_path)             # <<<<<<<<<<<<<<
  *     finally:
  *         if pdf_document:
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_extract_text_from_pdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 69, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_extract_text_from_pdf); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 63, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_3);
         __pyx_t_13 = NULL;
         __pyx_t_5 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
           __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_3);
           if (likely(__pyx_t_13)) {
             PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -4239,27 +4261,27 @@
             __pyx_t_5 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_13, __pyx_v_pdf_path};
           __pyx_t_14 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 69, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 63, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         }
         __Pyx_DECREF_SET(__pyx_v_entire_text, __pyx_t_14);
         __pyx_t_14 = 0;
         __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
         __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
         goto __pyx_L7_exception_handled;
       }
 
-      /* "wrapper/infra/TextExtractor.pyx":53
+      /* "wrapper/infra/TextExtractor.pyx":49
  *     pdf_document = None
  *     entire_text = ''
  *     try:             # <<<<<<<<<<<<<<
  *         run_ocrmypdf(pdf_path, output)
  *         pdf_document = fitz.open(output)
  */
       __pyx_L8_except_error:;
@@ -4273,58 +4295,58 @@
       __Pyx_XGIVEREF(__pyx_t_7);
       __Pyx_XGIVEREF(__pyx_t_8);
       __Pyx_ExceptionReset(__pyx_t_6, __pyx_t_7, __pyx_t_8);
       __pyx_L11_try_end:;
     }
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":71
+  /* "wrapper/infra/TextExtractor.pyx":65
  *         entire_text = _extract_text_from_pdf(pdf_path)
  *     finally:
  *         if pdf_document:             # <<<<<<<<<<<<<<
  *             pdf_document.close()
  *     return entire_text
  */
   /*finally:*/ {
     /*normal exit:*/{
-      __pyx_t_17 = __Pyx_PyObject_IsTrue(__pyx_v_pdf_document); if (unlikely((__pyx_t_17 < 0))) __PYX_ERR(0, 71, __pyx_L1_error)
+      __pyx_t_17 = __Pyx_PyObject_IsTrue(__pyx_v_pdf_document); if (unlikely((__pyx_t_17 < 0))) __PYX_ERR(0, 65, __pyx_L1_error)
       if (__pyx_t_17) {
 
-        /* "wrapper/infra/TextExtractor.pyx":72
+        /* "wrapper/infra/TextExtractor.pyx":66
  *     finally:
  *         if pdf_document:
  *             pdf_document.close()             # <<<<<<<<<<<<<<
  *     return entire_text
  * 
  */
-        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 72, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
+        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 66, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_4);
         __pyx_t_1 = NULL;
         __pyx_t_5 = 0;
-        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
+          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
           if (likely(__pyx_t_1)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
             __Pyx_INCREF(__pyx_t_1);
             __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_2, function);
+            __Pyx_DECREF_SET(__pyx_t_4, function);
             __pyx_t_5 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[1] = {__pyx_t_1, };
-          __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
+          __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
           __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-          if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 72, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_4);
-          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+          if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_2);
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
         }
-        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":71
+        /* "wrapper/infra/TextExtractor.pyx":65
  *         entire_text = _extract_text_from_pdf(pdf_path)
  *     finally:
  *         if pdf_document:             # <<<<<<<<<<<<<<
  *             pdf_document.close()
  *     return entire_text
  */
       }
@@ -4349,49 +4371,49 @@
       __Pyx_XGOTREF(__pyx_t_7);
       __Pyx_XGOTREF(__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_20);
       __Pyx_XGOTREF(__pyx_t_21);
       __Pyx_XGOTREF(__pyx_t_22);
       __pyx_t_5 = __pyx_lineno; __pyx_t_18 = __pyx_clineno; __pyx_t_19 = __pyx_filename;
       {
-        __pyx_t_17 = __Pyx_PyObject_IsTrue(__pyx_v_pdf_document); if (unlikely((__pyx_t_17 < 0))) __PYX_ERR(0, 71, __pyx_L19_error)
+        __pyx_t_17 = __Pyx_PyObject_IsTrue(__pyx_v_pdf_document); if (unlikely((__pyx_t_17 < 0))) __PYX_ERR(0, 65, __pyx_L19_error)
         if (__pyx_t_17) {
 
-          /* "wrapper/infra/TextExtractor.pyx":72
+          /* "wrapper/infra/TextExtractor.pyx":66
  *     finally:
  *         if pdf_document:
  *             pdf_document.close()             # <<<<<<<<<<<<<<
  *     return entire_text
  * 
  */
-          __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 72, __pyx_L19_error)
-          __Pyx_GOTREF(__pyx_t_2);
+          __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 66, __pyx_L19_error)
+          __Pyx_GOTREF(__pyx_t_4);
           __pyx_t_1 = NULL;
           __pyx_t_23 = 0;
-          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-            __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
+          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
+            __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
             if (likely(__pyx_t_1)) {
-              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
               __Pyx_INCREF(__pyx_t_1);
               __Pyx_INCREF(function);
-              __Pyx_DECREF_SET(__pyx_t_2, function);
+              __Pyx_DECREF_SET(__pyx_t_4, function);
               __pyx_t_23 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[1] = {__pyx_t_1, };
-            __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_23, 0+__pyx_t_23);
+            __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_23, 0+__pyx_t_23);
             __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-            if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 72, __pyx_L19_error)
-            __Pyx_GOTREF(__pyx_t_4);
-            __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 66, __pyx_L19_error)
+            __Pyx_GOTREF(__pyx_t_2);
+            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
           }
-          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":71
+          /* "wrapper/infra/TextExtractor.pyx":65
  *         entire_text = _extract_text_from_pdf(pdf_path)
  *     finally:
  *         if pdf_document:             # <<<<<<<<<<<<<<
  *             pdf_document.close()
  *     return entire_text
  */
         }
@@ -4421,32 +4443,32 @@
       __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
       __pyx_t_20 = 0; __pyx_t_21 = 0; __pyx_t_22 = 0;
       goto __pyx_L1_error;
     }
     __pyx_L5:;
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":73
+  /* "wrapper/infra/TextExtractor.pyx":67
  *         if pdf_document:
  *             pdf_document.close()
  *     return entire_text             # <<<<<<<<<<<<<<
  * 
- * #pymupdf
+ * 
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_entire_text);
   __pyx_r = __pyx_v_entire_text;
   goto __pyx_L0;
 
-  /* "wrapper/infra/TextExtractor.pyx":46
+  /* "wrapper/infra/TextExtractor.pyx":44
  *         raise 'Fail to process pdf'
  * 
- * def extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
- *     output = 'background_tasks/server/logs/output.pdf'
- *     # dirname = os.path.dirname(__file__)
+ * def extract_text_from_pdf(pdf_path, base_path):             # <<<<<<<<<<<<<<
+ *     output = base_path + '/output.pdf'
+ *     logging.debug(f'output pdf {output}')
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
@@ -4465,17 +4487,17 @@
   __Pyx_XDECREF(__pyx_v_page);
   __Pyx_XDECREF(__pyx_v_text);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/infra/TextExtractor.pyx":76
+/* "wrapper/infra/TextExtractor.pyx":70
+ * 
  * 
- * #pymupdf
  * def _extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_5infra_13TextExtractor_11_extract_text_from_pdf(PyObject *__pyx_self, 
@@ -4516,31 +4538,31 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_pdf_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 76, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 70, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_extract_text_from_pdf") < 0)) __PYX_ERR(0, 76, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "_extract_text_from_pdf") < 0)) __PYX_ERR(0, 70, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
     __pyx_v_pdf_path = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("_extract_text_from_pdf", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 76, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("_extract_text_from_pdf", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 70, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.infra.TextExtractor._extract_text_from_pdf", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_5infra_13TextExtractor_10_extract_text_from_pdf(__pyx_self, __pyx_v_pdf_path);
 
@@ -4592,24 +4614,24 @@
   PyObject *__pyx_t_25 = NULL;
   int __pyx_t_26;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("_extract_text_from_pdf", 0);
 
-  /* "wrapper/infra/TextExtractor.pyx":77
- * #pymupdf
+  /* "wrapper/infra/TextExtractor.pyx":71
+ * 
  * def _extract_text_from_pdf(pdf_path):
  *     pdf_document = fitz.open(pdf_path)             # <<<<<<<<<<<<<<
  *     text = ""
  *     try:
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_fitz); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_fitz); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_open); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 77, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_open); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 71, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
     if (likely(__pyx_t_2)) {
@@ -4620,32 +4642,32 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_pdf_path};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 77, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 71, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
   __pyx_v_pdf_document = __pyx_t_1;
   __pyx_t_1 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":78
+  /* "wrapper/infra/TextExtractor.pyx":72
  * def _extract_text_from_pdf(pdf_path):
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""             # <<<<<<<<<<<<<<
  *     try:
  *         for page_num in range(pdf_document.page_count):
  */
   __Pyx_INCREF(__pyx_kp_u__2);
   __pyx_v_text = __pyx_kp_u__2;
 
-  /* "wrapper/infra/TextExtractor.pyx":79
+  /* "wrapper/infra/TextExtractor.pyx":73
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  *     try:             # <<<<<<<<<<<<<<
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]
  */
   /*try:*/ {
@@ -4654,89 +4676,89 @@
       __Pyx_PyThreadState_assign
       __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
       __Pyx_XGOTREF(__pyx_t_5);
       __Pyx_XGOTREF(__pyx_t_6);
       __Pyx_XGOTREF(__pyx_t_7);
       /*try:*/ {
 
-        /* "wrapper/infra/TextExtractor.pyx":80
+        /* "wrapper/infra/TextExtractor.pyx":74
  *     text = ""
  *     try:
  *         for page_num in range(pdf_document.page_count):             # <<<<<<<<<<<<<<
  *             page = pdf_document[page_num]
  *             text += page.get_text("text")
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_page_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 80, __pyx_L6_error)
+        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_page_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L6_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L6_error)
+        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L6_error)
         __Pyx_GOTREF(__pyx_t_3);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
           __pyx_t_1 = __pyx_t_3; __Pyx_INCREF(__pyx_t_1); __pyx_t_8 = 0;
           __pyx_t_9 = NULL;
         } else {
-          __pyx_t_8 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 80, __pyx_L6_error)
+          __pyx_t_8 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 80, __pyx_L6_error)
+          __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 74, __pyx_L6_error)
         }
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         for (;;) {
           if (likely(!__pyx_t_9)) {
             if (likely(PyList_CheckExact(__pyx_t_1))) {
               if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_1)) break;
               #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 80, __pyx_L6_error)
+              __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 74, __pyx_L6_error)
               #else
-              __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L6_error)
+              __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_3);
               #endif
             } else {
               if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
               #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-              __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 80, __pyx_L6_error)
+              __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 74, __pyx_L6_error)
               #else
-              __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 80, __pyx_L6_error)
+              __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 74, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_3);
               #endif
             }
           } else {
             __pyx_t_3 = __pyx_t_9(__pyx_t_1);
             if (unlikely(!__pyx_t_3)) {
               PyObject* exc_type = PyErr_Occurred();
               if (exc_type) {
                 if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                else __PYX_ERR(0, 80, __pyx_L6_error)
+                else __PYX_ERR(0, 74, __pyx_L6_error)
               }
               break;
             }
             __Pyx_GOTREF(__pyx_t_3);
           }
           __Pyx_XDECREF_SET(__pyx_v_page_num, __pyx_t_3);
           __pyx_t_3 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":81
+          /* "wrapper/infra/TextExtractor.pyx":75
  *     try:
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]             # <<<<<<<<<<<<<<
  *             text += page.get_text("text")
  * 
  */
-          __pyx_t_3 = __Pyx_PyObject_GetItem(__pyx_v_pdf_document, __pyx_v_page_num); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 81, __pyx_L6_error)
+          __pyx_t_3 = __Pyx_PyObject_GetItem(__pyx_v_pdf_document, __pyx_v_page_num); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 75, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
           __Pyx_XDECREF_SET(__pyx_v_page, __pyx_t_3);
           __pyx_t_3 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":82
+          /* "wrapper/infra/TextExtractor.pyx":76
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]
  *             text += page.get_text("text")             # <<<<<<<<<<<<<<
  * 
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  */
-          __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 82, __pyx_L6_error)
+          __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 76, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_2);
           __pyx_t_10 = NULL;
           __pyx_t_4 = 0;
           if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
             __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_2);
             if (likely(__pyx_t_10)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
@@ -4746,70 +4768,70 @@
               __pyx_t_4 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_10, __pyx_n_u_text};
             __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
             __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-            if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 82, __pyx_L6_error)
+            if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 76, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
           }
-          __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 82, __pyx_L6_error)
+          __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 76, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_2);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_2);
           __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":84
+          /* "wrapper/infra/TextExtractor.pyx":78
  *             text += page.get_text("text")
  * 
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")             # <<<<<<<<<<<<<<
  *             dict = page.get_text("dict")
  *             blocks = dict['blocks']
  */
-          __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
-          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_10);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-          __pyx_t_3 = PyTuple_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_3 = PyTuple_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_3);
           __pyx_t_11 = 0;
           __pyx_t_12 = 127;
           __Pyx_INCREF(__pyx_kp_u_Page);
           __pyx_t_11 += 5;
           __Pyx_GIVEREF(__pyx_kp_u_Page);
           PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Page);
-          __pyx_t_13 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_13 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_13);
-          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_13, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_13, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
           __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
           __pyx_t_11 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
           __Pyx_GIVEREF(__pyx_t_14);
           PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_14);
           __pyx_t_14 = 0;
           __Pyx_INCREF(__pyx_kp_u_Text);
           __pyx_t_11 += 7;
           __Pyx_GIVEREF(__pyx_kp_u_Text);
           PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_Text);
-          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_text, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
           __pyx_t_11 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
           __Pyx_GIVEREF(__pyx_t_14);
           PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_14);
           __pyx_t_14 = 0;
           __Pyx_INCREF(__pyx_kp_u__3);
           __pyx_t_11 += 1;
           __Pyx_GIVEREF(__pyx_kp_u__3);
           PyTuple_SET_ITEM(__pyx_t_3, 4, __pyx_kp_u__3);
-          __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 5, __pyx_t_11, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 84, __pyx_L6_error)
+          __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 5, __pyx_t_11, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 78, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_14);
           __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
           __pyx_t_3 = NULL;
           __pyx_t_4 = 0;
           if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
             __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_10);
             if (likely(__pyx_t_3)) {
@@ -4821,28 +4843,28 @@
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_t_14};
             __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_10, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
             __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L6_error)
+            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 78, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_2);
             __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
           }
           __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":85
+          /* "wrapper/infra/TextExtractor.pyx":79
  * 
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  *             dict = page.get_text("dict")             # <<<<<<<<<<<<<<
  *             blocks = dict['blocks']
  *             imgblocks = [b for b in blocks if b["type"] == 1]
  */
-          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 85, __pyx_L6_error)
+          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_page, __pyx_n_s_get_text); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 79, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_10);
           __pyx_t_14 = NULL;
           __pyx_t_4 = 0;
           if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
             __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_10);
             if (likely(__pyx_t_14)) {
               PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
@@ -4852,141 +4874,141 @@
               __pyx_t_4 = 1;
             }
           }
           {
             PyObject *__pyx_callargs[2] = {__pyx_t_14, __pyx_n_u_dict};
             __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_10, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
             __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
-            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 85, __pyx_L6_error)
+            if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 79, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_2);
             __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
           }
           __Pyx_XDECREF_SET(__pyx_v_dict, __pyx_t_2);
           __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":86
+          /* "wrapper/infra/TextExtractor.pyx":80
  *             logging.debug(f"Page {page_num + 1} Text:\n{text}\n")
  *             dict = page.get_text("dict")
  *             blocks = dict['blocks']             # <<<<<<<<<<<<<<
  *             imgblocks = [b for b in blocks if b["type"] == 1]
  * 
  */
-          __pyx_t_2 = __Pyx_PyObject_Dict_GetItem(__pyx_v_dict, __pyx_n_u_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 86, __pyx_L6_error)
+          __pyx_t_2 = __Pyx_PyObject_Dict_GetItem(__pyx_v_dict, __pyx_n_u_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 80, __pyx_L6_error)
           __Pyx_GOTREF(__pyx_t_2);
           __Pyx_XDECREF_SET(__pyx_v_blocks, __pyx_t_2);
           __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":87
+          /* "wrapper/infra/TextExtractor.pyx":81
  *             dict = page.get_text("dict")
  *             blocks = dict['blocks']
  *             imgblocks = [b for b in blocks if b["type"] == 1]             # <<<<<<<<<<<<<<
  * 
  *             #extract images
  */
           { /* enter inner scope */
-            __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L16_error)
+            __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 81, __pyx_L16_error)
             __Pyx_GOTREF(__pyx_t_2);
             if (likely(PyList_CheckExact(__pyx_v_blocks)) || PyTuple_CheckExact(__pyx_v_blocks)) {
               __pyx_t_10 = __pyx_v_blocks; __Pyx_INCREF(__pyx_t_10); __pyx_t_11 = 0;
               __pyx_t_15 = NULL;
             } else {
-              __pyx_t_11 = -1; __pyx_t_10 = PyObject_GetIter(__pyx_v_blocks); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 87, __pyx_L16_error)
+              __pyx_t_11 = -1; __pyx_t_10 = PyObject_GetIter(__pyx_v_blocks); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 81, __pyx_L16_error)
               __Pyx_GOTREF(__pyx_t_10);
-              __pyx_t_15 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_10); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 87, __pyx_L16_error)
+              __pyx_t_15 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_10); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 81, __pyx_L16_error)
             }
             for (;;) {
               if (likely(!__pyx_t_15)) {
                 if (likely(PyList_CheckExact(__pyx_t_10))) {
                   if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_10)) break;
                   #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                  __pyx_t_14 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 87, __pyx_L16_error)
+                  __pyx_t_14 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 81, __pyx_L16_error)
                   #else
-                  __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 87, __pyx_L16_error)
+                  __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 81, __pyx_L16_error)
                   __Pyx_GOTREF(__pyx_t_14);
                   #endif
                 } else {
                   if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_10)) break;
                   #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-                  __pyx_t_14 = PyTuple_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 87, __pyx_L16_error)
+                  __pyx_t_14 = PyTuple_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 81, __pyx_L16_error)
                   #else
-                  __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 87, __pyx_L16_error)
+                  __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 81, __pyx_L16_error)
                   __Pyx_GOTREF(__pyx_t_14);
                   #endif
                 }
               } else {
                 __pyx_t_14 = __pyx_t_15(__pyx_t_10);
                 if (unlikely(!__pyx_t_14)) {
                   PyObject* exc_type = PyErr_Occurred();
                   if (exc_type) {
                     if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-                    else __PYX_ERR(0, 87, __pyx_L16_error)
+                    else __PYX_ERR(0, 81, __pyx_L16_error)
                   }
                   break;
                 }
                 __Pyx_GOTREF(__pyx_t_14);
               }
               __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_b, __pyx_t_14);
               __pyx_t_14 = 0;
-              __pyx_t_14 = __Pyx_PyObject_Dict_GetItem(__pyx_7genexpr__pyx_v_b, __pyx_n_u_type); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 87, __pyx_L16_error)
+              __pyx_t_14 = __Pyx_PyObject_Dict_GetItem(__pyx_7genexpr__pyx_v_b, __pyx_n_u_type); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 81, __pyx_L16_error)
               __Pyx_GOTREF(__pyx_t_14);
-              __pyx_t_16 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_14, __pyx_int_1, 1, 0)); if (unlikely((__pyx_t_16 < 0))) __PYX_ERR(0, 87, __pyx_L16_error)
+              __pyx_t_16 = (__Pyx_PyInt_BoolEqObjC(__pyx_t_14, __pyx_int_1, 1, 0)); if (unlikely((__pyx_t_16 < 0))) __PYX_ERR(0, 81, __pyx_L16_error)
               __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
               if (__pyx_t_16) {
-                if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_7genexpr__pyx_v_b))) __PYX_ERR(0, 87, __pyx_L16_error)
+                if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_7genexpr__pyx_v_b))) __PYX_ERR(0, 81, __pyx_L16_error)
               }
             }
             __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
             __Pyx_XDECREF(__pyx_7genexpr__pyx_v_b); __pyx_7genexpr__pyx_v_b = 0;
             goto __pyx_L21_exit_scope;
             __pyx_L16_error:;
             __Pyx_XDECREF(__pyx_7genexpr__pyx_v_b); __pyx_7genexpr__pyx_v_b = 0;
             goto __pyx_L6_error;
             __pyx_L21_exit_scope:;
           } /* exit inner scope */
           __Pyx_XDECREF_SET(__pyx_v_imgblocks, ((PyObject*)__pyx_t_2));
           __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":90
+          /* "wrapper/infra/TextExtractor.pyx":84
  * 
  *             #extract images
  *             for index, img in enumerate(imgblocks):             # <<<<<<<<<<<<<<
  *                 logging.debug('working on meta image')
  *                 logging.debug(img)
  */
           __Pyx_INCREF(__pyx_int_0);
           __pyx_t_2 = __pyx_int_0;
           __pyx_t_10 = __pyx_v_imgblocks; __Pyx_INCREF(__pyx_t_10); __pyx_t_11 = 0;
           for (;;) {
             if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_10)) break;
             #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_14 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 90, __pyx_L6_error)
+            __pyx_t_14 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_11); __Pyx_INCREF(__pyx_t_14); __pyx_t_11++; if (unlikely((0 < 0))) __PYX_ERR(0, 84, __pyx_L6_error)
             #else
-            __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 90, __pyx_L6_error)
+            __pyx_t_14 = PySequence_ITEM(__pyx_t_10, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 84, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             #endif
             __Pyx_XDECREF_SET(__pyx_v_img, __pyx_t_14);
             __pyx_t_14 = 0;
             __Pyx_INCREF(__pyx_t_2);
             __Pyx_XDECREF_SET(__pyx_v_index, __pyx_t_2);
-            __pyx_t_14 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 90, __pyx_L6_error)
+            __pyx_t_14 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 84, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __Pyx_DECREF(__pyx_t_2);
             __pyx_t_2 = __pyx_t_14;
             __pyx_t_14 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":91
+            /* "wrapper/infra/TextExtractor.pyx":85
  *             #extract images
  *             for index, img in enumerate(imgblocks):
  *                 logging.debug('working on meta image')             # <<<<<<<<<<<<<<
  *                 logging.debug(img)
  *                 image_name = f"{page_num}_{index}.{img['ext']}"
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 91, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 85, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
-            __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 91, __pyx_L6_error)
+            __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 85, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_13);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             __pyx_t_3 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
               __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_13);
               if (likely(__pyx_t_3)) {
@@ -4997,30 +5019,30 @@
                 __pyx_t_4 = 1;
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_working_on_meta_image};
               __pyx_t_14 = __Pyx_PyObject_FastCall(__pyx_t_13, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-              if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 91, __pyx_L6_error)
+              if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 85, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_14);
               __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
             }
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":92
+            /* "wrapper/infra/TextExtractor.pyx":86
  *             for index, img in enumerate(imgblocks):
  *                 logging.debug('working on meta image')
  *                 logging.debug(img)             # <<<<<<<<<<<<<<
  *                 image_name = f"{page_num}_{index}.{img['ext']}"
  *                 logging.debug(f'image name {image_name}...')
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_logging); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 92, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_logging); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 86, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_13);
-            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 86, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
             __pyx_t_13 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
               __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_3);
               if (likely(__pyx_t_13)) {
@@ -5031,82 +5053,82 @@
                 __pyx_t_4 = 1;
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_13, __pyx_v_img};
               __pyx_t_14 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-              if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 92, __pyx_L6_error)
+              if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 86, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_14);
               __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             }
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":93
+            /* "wrapper/infra/TextExtractor.pyx":87
  *                 logging.debug('working on meta image')
  *                 logging.debug(img)
  *                 image_name = f"{page_num}_{index}.{img['ext']}"             # <<<<<<<<<<<<<<
  *                 logging.debug(f'image name {image_name}...')
  * 
  */
-            __pyx_t_14 = PyTuple_New(5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_14 = PyTuple_New(5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __pyx_t_17 = 0;
             __pyx_t_12 = 127;
-            __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_page_num, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_page_num, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_12;
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
             __Pyx_GIVEREF(__pyx_t_3);
             PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_3);
             __pyx_t_3 = 0;
             __Pyx_INCREF(__pyx_n_u__4);
             __pyx_t_17 += 1;
             __Pyx_GIVEREF(__pyx_n_u__4);
             PyTuple_SET_ITEM(__pyx_t_14, 1, __pyx_n_u__4);
-            __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_index, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_index, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_12;
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
             __Pyx_GIVEREF(__pyx_t_3);
             PyTuple_SET_ITEM(__pyx_t_14, 2, __pyx_t_3);
             __pyx_t_3 = 0;
             __Pyx_INCREF(__pyx_kp_u__5);
             __pyx_t_17 += 1;
             __Pyx_GIVEREF(__pyx_kp_u__5);
             PyTuple_SET_ITEM(__pyx_t_14, 3, __pyx_kp_u__5);
-            __pyx_t_3 = __Pyx_PyObject_Dict_GetItem(__pyx_v_img, __pyx_n_u_ext); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_Dict_GetItem(__pyx_v_img, __pyx_n_u_ext); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
-            __pyx_t_13 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_13 = __Pyx_PyObject_FormatSimple(__pyx_t_3, __pyx_empty_unicode); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_13);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_13) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_13) : __pyx_t_12;
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_13);
             __Pyx_GIVEREF(__pyx_t_13);
             PyTuple_SET_ITEM(__pyx_t_14, 4, __pyx_t_13);
             __pyx_t_13 = 0;
-            __pyx_t_13 = __Pyx_PyUnicode_Join(__pyx_t_14, 5, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L6_error)
+            __pyx_t_13 = __Pyx_PyUnicode_Join(__pyx_t_14, 5, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 87, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_13);
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
             __Pyx_XDECREF_SET(__pyx_v_image_name, ((PyObject*)__pyx_t_13));
             __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":94
+            /* "wrapper/infra/TextExtractor.pyx":88
  *                 logging.debug(img)
  *                 image_name = f"{page_num}_{index}.{img['ext']}"
  *                 logging.debug(f'image name {image_name}...')             # <<<<<<<<<<<<<<
  * 
  *                 image_pil = Image.open(io.BytesIO(img['image']))
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_logging); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 94, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_logging); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 88, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
-            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 94, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 88, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-            __pyx_t_14 = PyTuple_New(3); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 94, __pyx_L6_error)
+            __pyx_t_14 = PyTuple_New(3); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 88, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __pyx_t_17 = 0;
             __pyx_t_12 = 127;
             __Pyx_INCREF(__pyx_kp_u_image_name);
             __pyx_t_17 += 11;
             __Pyx_GIVEREF(__pyx_kp_u_image_name);
             PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_kp_u_image_name);
@@ -5115,15 +5137,15 @@
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_v_image_name);
             __Pyx_GIVEREF(__pyx_v_image_name);
             PyTuple_SET_ITEM(__pyx_t_14, 1, __pyx_v_image_name);
             __Pyx_INCREF(__pyx_kp_u__6);
             __pyx_t_17 += 3;
             __Pyx_GIVEREF(__pyx_kp_u__6);
             PyTuple_SET_ITEM(__pyx_t_14, 2, __pyx_kp_u__6);
-            __pyx_t_18 = __Pyx_PyUnicode_Join(__pyx_t_14, 3, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 94, __pyx_L6_error)
+            __pyx_t_18 = __Pyx_PyUnicode_Join(__pyx_t_14, 3, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 88, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_18);
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
             __pyx_t_14 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
               __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_3);
               if (likely(__pyx_t_14)) {
@@ -5135,38 +5157,38 @@
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_14, __pyx_t_18};
               __pyx_t_13 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
               __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
-              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 94, __pyx_L6_error)
+              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 88, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_13);
               __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             }
             __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":96
+            /* "wrapper/infra/TextExtractor.pyx":90
  *                 logging.debug(f'image name {image_name}...')
  * 
  *                 image_pil = Image.open(io.BytesIO(img['image']))             # <<<<<<<<<<<<<<
  * 
- *                 # logging.debug(f'saving image {image_name}')
+ *                 ocr_result = pytesseract.image_to_string(image_pil)
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 96, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
-            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_open); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 96, __pyx_L6_error)
+            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_open); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 90, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_18);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-            __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_io); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 96, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_io); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 90, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
-            __pyx_t_19 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_BytesIO); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 96, __pyx_L6_error)
+            __pyx_t_19 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_BytesIO); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 90, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_19);
             __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-            __pyx_t_14 = __Pyx_PyObject_Dict_GetItem(__pyx_v_img, __pyx_n_u_image); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 96, __pyx_L6_error)
+            __pyx_t_14 = __Pyx_PyObject_Dict_GetItem(__pyx_v_img, __pyx_n_u_image); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 90, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __pyx_t_20 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_19))) {
               __pyx_t_20 = PyMethod_GET_SELF(__pyx_t_19);
               if (likely(__pyx_t_20)) {
                 PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_19);
@@ -5177,15 +5199,15 @@
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_20, __pyx_t_14};
               __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_19, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
               __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-              if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 96, __pyx_L6_error)
+              if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_3);
               __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
             }
             __pyx_t_19 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_18))) {
               __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_18);
@@ -5198,31 +5220,31 @@
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_19, __pyx_t_3};
               __pyx_t_13 = __Pyx_PyObject_FastCall(__pyx_t_18, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
               __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L6_error)
+              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 90, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_13);
               __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
             }
             __Pyx_XDECREF_SET(__pyx_v_image_pil, __pyx_t_13);
             __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":102
- *                 # image_pil.save(image_filename)
+            /* "wrapper/infra/TextExtractor.pyx":92
+ *                 image_pil = Image.open(io.BytesIO(img['image']))
  * 
  *                 ocr_result = pytesseract.image_to_string(image_pil)             # <<<<<<<<<<<<<<
  *                 text += ocr_result
  *                 logging.debug(f"OCR Result for Image {image_name} on Page {page_num + 1}:\n{ocr_result}\n")
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_18, __pyx_n_s_pytesseract); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 102, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_18, __pyx_n_s_pytesseract); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 92, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_18);
-            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_18, __pyx_n_s_image_to_string); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 102, __pyx_L6_error)
+            __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_18, __pyx_n_s_image_to_string); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 92, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
             __pyx_t_18 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
               __pyx_t_18 = PyMethod_GET_SELF(__pyx_t_3);
               if (likely(__pyx_t_18)) {
@@ -5233,46 +5255,46 @@
                 __pyx_t_4 = 1;
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_18, __pyx_v_image_pil};
               __pyx_t_13 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
-              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 102, __pyx_L6_error)
+              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 92, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_13);
               __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             }
             __Pyx_XDECREF_SET(__pyx_v_ocr_result, __pyx_t_13);
             __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":103
+            /* "wrapper/infra/TextExtractor.pyx":93
  * 
  *                 ocr_result = pytesseract.image_to_string(image_pil)
  *                 text += ocr_result             # <<<<<<<<<<<<<<
  *                 logging.debug(f"OCR Result for Image {image_name} on Page {page_num + 1}:\n{ocr_result}\n")
- * 
+ *     except:
  */
-            __pyx_t_13 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_v_ocr_result); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 103, __pyx_L6_error)
+            __pyx_t_13 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_v_ocr_result); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 93, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_13);
             __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_13);
             __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":104
+            /* "wrapper/infra/TextExtractor.pyx":94
  *                 ocr_result = pytesseract.image_to_string(image_pil)
  *                 text += ocr_result
  *                 logging.debug(f"OCR Result for Image {image_name} on Page {page_num + 1}:\n{ocr_result}\n")             # <<<<<<<<<<<<<<
- * 
- *             # Extract images
+ *     except:
+ *         logging.error(traceback.format_exc())
  */
-            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
-            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_debug); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_18);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-            __pyx_t_3 = PyTuple_New(7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_3 = PyTuple_New(7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_3);
             __pyx_t_17 = 0;
             __pyx_t_12 = 127;
             __Pyx_INCREF(__pyx_kp_u_OCR_Result_for_Image);
             __pyx_t_17 += 21;
             __Pyx_GIVEREF(__pyx_kp_u_OCR_Result_for_Image);
             PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_OCR_Result_for_Image);
@@ -5281,40 +5303,40 @@
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_v_image_name);
             __Pyx_GIVEREF(__pyx_v_image_name);
             PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_image_name);
             __Pyx_INCREF(__pyx_kp_u_on_Page);
             __pyx_t_17 += 9;
             __Pyx_GIVEREF(__pyx_kp_u_on_Page);
             PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_on_Page);
-            __pyx_t_19 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_19 = __Pyx_PyInt_AddObjC(__pyx_v_page_num, __pyx_int_1, 1, 0, 0); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_19);
-            __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_19, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_t_19, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
             __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
             __Pyx_GIVEREF(__pyx_t_14);
             PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_14);
             __pyx_t_14 = 0;
             __Pyx_INCREF(__pyx_kp_u__7);
             __pyx_t_17 += 2;
             __Pyx_GIVEREF(__pyx_kp_u__7);
             PyTuple_SET_ITEM(__pyx_t_3, 4, __pyx_kp_u__7);
-            __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_ocr_result, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_14 = __Pyx_PyObject_FormatSimple(__pyx_v_ocr_result, __pyx_empty_unicode); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __pyx_t_12 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) > __pyx_t_12) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_14) : __pyx_t_12;
             __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_14);
             __Pyx_GIVEREF(__pyx_t_14);
             PyTuple_SET_ITEM(__pyx_t_3, 5, __pyx_t_14);
             __pyx_t_14 = 0;
             __Pyx_INCREF(__pyx_kp_u__3);
             __pyx_t_17 += 1;
             __Pyx_GIVEREF(__pyx_kp_u__3);
             PyTuple_SET_ITEM(__pyx_t_3, 6, __pyx_kp_u__3);
-            __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 7, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 104, __pyx_L6_error)
+            __pyx_t_14 = __Pyx_PyUnicode_Join(__pyx_t_3, 7, __pyx_t_17, __pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 94, __pyx_L6_error)
             __Pyx_GOTREF(__pyx_t_14);
             __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
             __pyx_t_3 = NULL;
             __pyx_t_4 = 0;
             if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_18))) {
               __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_18);
               if (likely(__pyx_t_3)) {
@@ -5326,42 +5348,42 @@
               }
             }
             {
               PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_t_14};
               __pyx_t_13 = __Pyx_PyObject_FastCall(__pyx_t_18, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
               __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
               __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 104, __pyx_L6_error)
+              if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 94, __pyx_L6_error)
               __Pyx_GOTREF(__pyx_t_13);
               __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
             }
             __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
 
-            /* "wrapper/infra/TextExtractor.pyx":90
+            /* "wrapper/infra/TextExtractor.pyx":84
  * 
  *             #extract images
  *             for index, img in enumerate(imgblocks):             # <<<<<<<<<<<<<<
  *                 logging.debug('working on meta image')
  *                 logging.debug(img)
  */
           }
           __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
           __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-          /* "wrapper/infra/TextExtractor.pyx":80
+          /* "wrapper/infra/TextExtractor.pyx":74
  *     text = ""
  *     try:
  *         for page_num in range(pdf_document.page_count):             # <<<<<<<<<<<<<<
  *             page = pdf_document[page_num]
  *             text += page.get_text("text")
  */
         }
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":79
+        /* "wrapper/infra/TextExtractor.pyx":73
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  *     try:             # <<<<<<<<<<<<<<
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]
  */
       }
@@ -5376,43 +5398,43 @@
       __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
       __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
       __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
       __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
       __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-      /* "wrapper/infra/TextExtractor.pyx":122
- *             #     text += ocr_result
- *             #     logging.debug(f"OCR Result for Image {img_index + 1} on Page {page_num + 1}:\n{ocr_result}\n")
+      /* "wrapper/infra/TextExtractor.pyx":95
+ *                 text += ocr_result
+ *                 logging.debug(f"OCR Result for Image {image_name} on Page {page_num + 1}:\n{ocr_result}\n")
  *     except:             # <<<<<<<<<<<<<<
  *         logging.error(traceback.format_exc())
  *         raise
  */
       /*except:*/ {
         __Pyx_AddTraceback("wrapper.infra.TextExtractor._extract_text_from_pdf", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_10) < 0) __PYX_ERR(0, 122, __pyx_L8_except_error)
+        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_10) < 0) __PYX_ERR(0, 95, __pyx_L8_except_error)
         __Pyx_XGOTREF(__pyx_t_1);
         __Pyx_XGOTREF(__pyx_t_2);
         __Pyx_XGOTREF(__pyx_t_10);
 
-        /* "wrapper/infra/TextExtractor.pyx":123
- *             #     logging.debug(f"OCR Result for Image {img_index + 1} on Page {page_num + 1}:\n{ocr_result}\n")
+        /* "wrapper/infra/TextExtractor.pyx":96
+ *                 logging.debug(f"OCR Result for Image {image_name} on Page {page_num + 1}:\n{ocr_result}\n")
  *     except:
  *         logging.error(traceback.format_exc())             # <<<<<<<<<<<<<<
  *         raise
  *     finally:
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_18, __pyx_n_s_logging); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_18, __pyx_n_s_logging); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 96, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_18);
-        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_18, __pyx_n_s_error); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_18, __pyx_n_s_error); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 96, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_14);
         __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_traceback); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_traceback); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 96, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_19 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+        __pyx_t_19 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 96, __pyx_L8_except_error)
         __Pyx_GOTREF(__pyx_t_19);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
         __pyx_t_3 = NULL;
         __pyx_t_4 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_19))) {
           __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_19);
           if (likely(__pyx_t_3)) {
@@ -5423,15 +5445,15 @@
             __pyx_t_4 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[1] = {__pyx_t_3, };
           __pyx_t_18 = __Pyx_PyObject_FastCall(__pyx_t_19, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
           __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-          if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 96, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_18);
           __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
         }
         __pyx_t_19 = NULL;
         __pyx_t_4 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
           __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_14);
@@ -5444,36 +5466,36 @@
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_19, __pyx_t_18};
           __pyx_t_13 = __Pyx_PyObject_FastCall(__pyx_t_14, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
           __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
           __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
-          if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 123, __pyx_L8_except_error)
+          if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 96, __pyx_L8_except_error)
           __Pyx_GOTREF(__pyx_t_13);
           __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
         }
         __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":124
+        /* "wrapper/infra/TextExtractor.pyx":97
  *     except:
  *         logging.error(traceback.format_exc())
  *         raise             # <<<<<<<<<<<<<<
  *     finally:
  *         logging.debug('final text extracted from pdf')
  */
         __Pyx_GIVEREF(__pyx_t_1);
         __Pyx_GIVEREF(__pyx_t_2);
         __Pyx_XGIVEREF(__pyx_t_10);
         __Pyx_ErrRestoreWithState(__pyx_t_1, __pyx_t_2, __pyx_t_10);
         __pyx_t_1 = 0; __pyx_t_2 = 0; __pyx_t_10 = 0; 
-        __PYX_ERR(0, 124, __pyx_L8_except_error)
+        __PYX_ERR(0, 97, __pyx_L8_except_error)
       }
 
-      /* "wrapper/infra/TextExtractor.pyx":79
+      /* "wrapper/infra/TextExtractor.pyx":73
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  *     try:             # <<<<<<<<<<<<<<
  *         for page_num in range(pdf_document.page_count):
  *             page = pdf_document[page_num]
  */
       __pyx_L8_except_error:;
@@ -5482,26 +5504,26 @@
       __Pyx_XGIVEREF(__pyx_t_7);
       __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
       goto __pyx_L4_error;
       __pyx_L11_try_end:;
     }
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":126
+  /* "wrapper/infra/TextExtractor.pyx":99
  *         raise
  *     finally:
  *         logging.debug('final text extracted from pdf')             # <<<<<<<<<<<<<<
  *         logging.debug(text)
  *         pdf_document.close()
  */
   /*finally:*/ {
     /*normal exit:*/{
-      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 126, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 99, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 126, __pyx_L1_error)
+      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __pyx_t_2 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
         __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
         if (likely(__pyx_t_2)) {
@@ -5512,30 +5534,30 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_final_text_extracted_from_pdf};
         __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 126, __pyx_L1_error)
+        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 99, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_10);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       }
       __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
 
-      /* "wrapper/infra/TextExtractor.pyx":127
+      /* "wrapper/infra/TextExtractor.pyx":100
  *     finally:
  *         logging.debug('final text extracted from pdf')
  *         logging.debug(text)             # <<<<<<<<<<<<<<
  *         pdf_document.close()
  * 
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L1_error)
+      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __pyx_t_1 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
         __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
         if (likely(__pyx_t_1)) {
@@ -5546,28 +5568,28 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_v_text};
         __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 127, __pyx_L1_error)
+        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 100, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_10);
         __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       }
       __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
 
-      /* "wrapper/infra/TextExtractor.pyx":128
+      /* "wrapper/infra/TextExtractor.pyx":101
  *         logging.debug('final text extracted from pdf')
  *         logging.debug(text)
  *         pdf_document.close()             # <<<<<<<<<<<<<<
  * 
  *     return text
  */
-      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L1_error)
+      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 101, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
       __pyx_t_1 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
         __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
         if (likely(__pyx_t_1)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
@@ -5577,15 +5599,15 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[1] = {__pyx_t_1, };
         __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 128, __pyx_L1_error)
+        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 101, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_10);
         __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       }
       __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
       goto __pyx_L5;
     }
     __pyx_L4_error:;
@@ -5609,24 +5631,24 @@
       __Pyx_XGOTREF(__pyx_t_5);
       __Pyx_XGOTREF(__pyx_t_23);
       __Pyx_XGOTREF(__pyx_t_24);
       __Pyx_XGOTREF(__pyx_t_25);
       __pyx_t_4 = __pyx_lineno; __pyx_t_21 = __pyx_clineno; __pyx_t_22 = __pyx_filename;
       {
 
-        /* "wrapper/infra/TextExtractor.pyx":126
+        /* "wrapper/infra/TextExtractor.pyx":99
  *         raise
  *     finally:
  *         logging.debug('final text extracted from pdf')             # <<<<<<<<<<<<<<
  *         logging.debug(text)
  *         pdf_document.close()
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 126, __pyx_L29_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 99, __pyx_L29_error)
         __Pyx_GOTREF(__pyx_t_2);
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 126, __pyx_L29_error)
+        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L29_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
         __pyx_t_2 = NULL;
         __pyx_t_26 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
           __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
           if (likely(__pyx_t_2)) {
@@ -5637,30 +5659,30 @@
             __pyx_t_26 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_final_text_extracted_from_pdf};
           __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_26, 1+__pyx_t_26);
           __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 126, __pyx_L29_error)
+          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 99, __pyx_L29_error)
           __Pyx_GOTREF(__pyx_t_10);
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         }
         __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":127
+        /* "wrapper/infra/TextExtractor.pyx":100
  *     finally:
  *         logging.debug('final text extracted from pdf')
  *         logging.debug(text)             # <<<<<<<<<<<<<<
  *         pdf_document.close()
  * 
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L29_error)
+        __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 100, __pyx_L29_error)
         __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 127, __pyx_L29_error)
+        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 100, __pyx_L29_error)
         __Pyx_GOTREF(__pyx_t_2);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         __pyx_t_1 = NULL;
         __pyx_t_26 = 0;
         if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
           __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
           if (likely(__pyx_t_1)) {
@@ -5671,28 +5693,28 @@
             __pyx_t_26 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_v_text};
           __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_26, 1+__pyx_t_26);
           __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 127, __pyx_L29_error)
+          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 100, __pyx_L29_error)
           __Pyx_GOTREF(__pyx_t_10);
           __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
         }
         __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
 
-        /* "wrapper/infra/TextExtractor.pyx":128
+        /* "wrapper/infra/TextExtractor.pyx":101
  *         logging.debug('final text extracted from pdf')
  *         logging.debug(text)
  *         pdf_document.close()             # <<<<<<<<<<<<<<
  * 
  *     return text
  */
-        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L29_error)
+        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_pdf_document, __pyx_n_s_close); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 101, __pyx_L29_error)
         __Pyx_GOTREF(__pyx_t_2);
         __pyx_t_1 = NULL;
         __pyx_t_26 = 0;
         if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
           __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
           if (likely(__pyx_t_1)) {
             PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
@@ -5702,15 +5724,15 @@
             __pyx_t_26 = 1;
           }
         }
         {
           PyObject *__pyx_callargs[1] = {__pyx_t_1, };
           __pyx_t_10 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_26, 0+__pyx_t_26);
           __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 128, __pyx_L29_error)
+          if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 101, __pyx_L29_error)
           __Pyx_GOTREF(__pyx_t_10);
           __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
         }
         __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
       }
       if (PY_MAJOR_VERSION >= 3) {
         __Pyx_XGIVEREF(__pyx_t_23);
@@ -5737,29 +5759,29 @@
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
       __pyx_t_23 = 0; __pyx_t_24 = 0; __pyx_t_25 = 0;
       goto __pyx_L1_error;
     }
     __pyx_L5:;
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":130
+  /* "wrapper/infra/TextExtractor.pyx":103
  *         pdf_document.close()
  * 
  *     return text             # <<<<<<<<<<<<<<
  * 
  * def extract_text_from_video(video_path):
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_text);
   __pyx_r = __pyx_v_text;
   goto __pyx_L0;
 
-  /* "wrapper/infra/TextExtractor.pyx":76
+  /* "wrapper/infra/TextExtractor.pyx":70
+ * 
  * 
- * #pymupdf
  * def _extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  */
 
   /* function exit code */
   __pyx_L1_error:;
@@ -5789,15 +5811,15 @@
   __Pyx_XDECREF(__pyx_v_ocr_result);
   __Pyx_XDECREF(__pyx_7genexpr__pyx_v_b);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-/* "wrapper/infra/TextExtractor.pyx":132
+/* "wrapper/infra/TextExtractor.pyx":105
  *     return text
  * 
  * def extract_text_from_video(video_path):             # <<<<<<<<<<<<<<
  *     text = ""
  *     if video_path.endswith('.mp4'):
  */
 
@@ -5840,31 +5862,31 @@
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
         if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_video_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 132, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 105, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_text_from_video") < 0)) __PYX_ERR(0, 132, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_text_from_video") < 0)) __PYX_ERR(0, 105, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 1)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
     }
     __pyx_v_video_path = values[0];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("extract_text_from_video", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 132, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("extract_text_from_video", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 105, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.infra.TextExtractor.extract_text_from_video", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
   __pyx_r = __pyx_pf_7wrapper_5infra_13TextExtractor_12extract_text_from_video(__pyx_self, __pyx_v_video_path);
 
@@ -5889,32 +5911,32 @@
   PyObject *(*__pyx_t_7)(PyObject *);
   int __pyx_t_8;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("extract_text_from_video", 0);
 
-  /* "wrapper/infra/TextExtractor.pyx":133
+  /* "wrapper/infra/TextExtractor.pyx":106
  * 
  * def extract_text_from_video(video_path):
  *     text = ""             # <<<<<<<<<<<<<<
  *     if video_path.endswith('.mp4'):
  *         video_capture = cv2.VideoCapture(video_path)
  */
   __Pyx_INCREF(__pyx_kp_u__2);
   __pyx_v_text = __pyx_kp_u__2;
 
-  /* "wrapper/infra/TextExtractor.pyx":134
+  /* "wrapper/infra/TextExtractor.pyx":107
  * def extract_text_from_video(video_path):
  *     text = ""
  *     if video_path.endswith('.mp4'):             # <<<<<<<<<<<<<<
  *         video_capture = cv2.VideoCapture(video_path)
  *         while video_capture.isOpened():
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 134, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 107, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __pyx_t_3 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
     __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
     if (likely(__pyx_t_3)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
@@ -5924,32 +5946,32 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_kp_u_mp4};
     __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L1_error)
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 107, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   }
-  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 134, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 107, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   if (__pyx_t_5) {
 
-    /* "wrapper/infra/TextExtractor.pyx":135
+    /* "wrapper/infra/TextExtractor.pyx":108
  *     text = ""
  *     if video_path.endswith('.mp4'):
  *         video_capture = cv2.VideoCapture(video_path)             # <<<<<<<<<<<<<<
  *         while video_capture.isOpened():
  *             ret, frame = video_capture.read()
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 135, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 108, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_VideoCapture); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 135, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_VideoCapture); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 108, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     __pyx_t_2 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
       __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
       if (likely(__pyx_t_2)) {
@@ -5960,30 +5982,30 @@
         __pyx_t_4 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_video_path};
       __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 135, __pyx_L1_error)
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 108, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
     __pyx_v_video_capture = __pyx_t_1;
     __pyx_t_1 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":136
+    /* "wrapper/infra/TextExtractor.pyx":109
  *     if video_path.endswith('.mp4'):
  *         video_capture = cv2.VideoCapture(video_path)
  *         while video_capture.isOpened():             # <<<<<<<<<<<<<<
  *             ret, frame = video_capture.read()
  *             if not ret:
  */
     while (1) {
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_isOpened); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 136, __pyx_L1_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_isOpened); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 109, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __pyx_t_2 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
         __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
         if (likely(__pyx_t_2)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -5993,30 +6015,30 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[1] = {__pyx_t_2, };
         __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 136, __pyx_L1_error)
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 109, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
-      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 136, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 109, __pyx_L1_error)
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       if (!__pyx_t_5) break;
 
-      /* "wrapper/infra/TextExtractor.pyx":137
+      /* "wrapper/infra/TextExtractor.pyx":110
  *         video_capture = cv2.VideoCapture(video_path)
  *         while video_capture.isOpened():
  *             ret, frame = video_capture.read()             # <<<<<<<<<<<<<<
  *             if not ret:
  *                 break
  */
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_read); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 137, __pyx_L1_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_read); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 110, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __pyx_t_2 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
         __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
         if (likely(__pyx_t_2)) {
           PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
@@ -6026,108 +6048,108 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[1] = {__pyx_t_2, };
         __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 137, __pyx_L1_error)
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 110, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
       if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
         PyObject* sequence = __pyx_t_1;
         Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
         if (unlikely(size != 2)) {
           if (size > 2) __Pyx_RaiseTooManyValuesError(2);
           else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-          __PYX_ERR(0, 137, __pyx_L1_error)
+          __PYX_ERR(0, 110, __pyx_L1_error)
         }
         #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
         if (likely(PyTuple_CheckExact(sequence))) {
           __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
           __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
         } else {
           __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
           __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
         }
         __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(__pyx_t_2);
         #else
-        __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 137, __pyx_L1_error)
+        __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 110, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 137, __pyx_L1_error)
+        __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 110, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_2);
         #endif
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       } else {
         Py_ssize_t index = -1;
-        __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 137, __pyx_L1_error)
+        __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 110, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_6);
         __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
         __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6);
         index = 0; __pyx_t_3 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_3)) goto __pyx_L6_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_3);
         index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L6_unpacking_failed;
         __Pyx_GOTREF(__pyx_t_2);
-        if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 2) < 0) __PYX_ERR(0, 137, __pyx_L1_error)
+        if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 2) < 0) __PYX_ERR(0, 110, __pyx_L1_error)
         __pyx_t_7 = NULL;
         __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
         goto __pyx_L7_unpacking_done;
         __pyx_L6_unpacking_failed:;
         __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
         __pyx_t_7 = NULL;
         if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-        __PYX_ERR(0, 137, __pyx_L1_error)
+        __PYX_ERR(0, 110, __pyx_L1_error)
         __pyx_L7_unpacking_done:;
       }
       __Pyx_XDECREF_SET(__pyx_v_ret, __pyx_t_3);
       __pyx_t_3 = 0;
       __Pyx_XDECREF_SET(__pyx_v_frame, __pyx_t_2);
       __pyx_t_2 = 0;
 
-      /* "wrapper/infra/TextExtractor.pyx":138
+      /* "wrapper/infra/TextExtractor.pyx":111
  *         while video_capture.isOpened():
  *             ret, frame = video_capture.read()
  *             if not ret:             # <<<<<<<<<<<<<<
  *                 break
  *             text += pytesseract.image_to_string(frame)
  */
-      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_ret); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 138, __pyx_L1_error)
+      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_ret); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 111, __pyx_L1_error)
       __pyx_t_8 = (!__pyx_t_5);
       if (__pyx_t_8) {
 
-        /* "wrapper/infra/TextExtractor.pyx":139
+        /* "wrapper/infra/TextExtractor.pyx":112
  *             ret, frame = video_capture.read()
  *             if not ret:
  *                 break             # <<<<<<<<<<<<<<
  *             text += pytesseract.image_to_string(frame)
  *         video_capture.release()
  */
         goto __pyx_L5_break;
 
-        /* "wrapper/infra/TextExtractor.pyx":138
+        /* "wrapper/infra/TextExtractor.pyx":111
  *         while video_capture.isOpened():
  *             ret, frame = video_capture.read()
  *             if not ret:             # <<<<<<<<<<<<<<
  *                 break
  *             text += pytesseract.image_to_string(frame)
  */
       }
 
-      /* "wrapper/infra/TextExtractor.pyx":140
+      /* "wrapper/infra/TextExtractor.pyx":113
  *             if not ret:
  *                 break
  *             text += pytesseract.image_to_string(frame)             # <<<<<<<<<<<<<<
  *         video_capture.release()
  *     elif video_path.endswith('.wav'):
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_pytesseract); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 140, __pyx_L1_error)
+      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_pytesseract); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 113, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_image_to_string); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 140, __pyx_L1_error)
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_image_to_string); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 113, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
       __pyx_t_2 = NULL;
       __pyx_t_4 = 0;
       if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
         __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
         if (likely(__pyx_t_2)) {
@@ -6138,34 +6160,34 @@
           __pyx_t_4 = 1;
         }
       }
       {
         PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_frame};
         __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
         __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 140, __pyx_L1_error)
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 113, __pyx_L1_error)
         __Pyx_GOTREF(__pyx_t_1);
         __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
       }
-      __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 140, __pyx_L1_error)
+      __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_text, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 113, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_3);
       __pyx_t_3 = 0;
     }
     __pyx_L5_break:;
 
-    /* "wrapper/infra/TextExtractor.pyx":141
+    /* "wrapper/infra/TextExtractor.pyx":114
  *                 break
  *             text += pytesseract.image_to_string(frame)
  *         video_capture.release()             # <<<<<<<<<<<<<<
  *     elif video_path.endswith('.wav'):
  *         text = extract_text_from_any(video_path)
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_release); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 141, __pyx_L1_error)
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_release); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 114, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_2 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_2)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -6175,38 +6197,38 @@
         __pyx_t_4 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[1] = {__pyx_t_2, };
       __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 141, __pyx_L1_error)
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 114, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":134
+    /* "wrapper/infra/TextExtractor.pyx":107
  * def extract_text_from_video(video_path):
  *     text = ""
  *     if video_path.endswith('.mp4'):             # <<<<<<<<<<<<<<
  *         video_capture = cv2.VideoCapture(video_path)
  *         while video_capture.isOpened():
  */
     goto __pyx_L3;
   }
 
-  /* "wrapper/infra/TextExtractor.pyx":142
+  /* "wrapper/infra/TextExtractor.pyx":115
  *             text += pytesseract.image_to_string(frame)
  *         video_capture.release()
  *     elif video_path.endswith('.wav'):             # <<<<<<<<<<<<<<
  *         text = extract_text_from_any(video_path)
  *     return text
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 142, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_path, __pyx_n_s_endswith); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 115, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
   __pyx_t_2 = NULL;
   __pyx_t_4 = 0;
   if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
     __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
     if (likely(__pyx_t_2)) {
       PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -6216,29 +6238,29 @@
       __pyx_t_4 = 1;
     }
   }
   {
     PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_kp_u_wav};
     __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
     __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 142, __pyx_L1_error)
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 115, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
     __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
   }
-  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_8 < 0))) __PYX_ERR(0, 142, __pyx_L1_error)
+  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_8 < 0))) __PYX_ERR(0, 115, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   if (__pyx_t_8) {
 
-    /* "wrapper/infra/TextExtractor.pyx":143
+    /* "wrapper/infra/TextExtractor.pyx":116
  *         video_capture.release()
  *     elif video_path.endswith('.wav'):
  *         text = extract_text_from_any(video_path)             # <<<<<<<<<<<<<<
  *     return text
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_extract_text_from_any); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 143, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_extract_text_from_any); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 116, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
     __pyx_t_2 = NULL;
     __pyx_t_4 = 0;
     if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
       __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
       if (likely(__pyx_t_2)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
@@ -6248,42 +6270,42 @@
         __pyx_t_4 = 1;
       }
     }
     {
       PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_video_path};
       __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
       __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 143, __pyx_L1_error)
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 116, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
     }
     __Pyx_DECREF_SET(__pyx_v_text, __pyx_t_3);
     __pyx_t_3 = 0;
 
-    /* "wrapper/infra/TextExtractor.pyx":142
+    /* "wrapper/infra/TextExtractor.pyx":115
  *             text += pytesseract.image_to_string(frame)
  *         video_capture.release()
  *     elif video_path.endswith('.wav'):             # <<<<<<<<<<<<<<
  *         text = extract_text_from_any(video_path)
  *     return text
  */
   }
   __pyx_L3:;
 
-  /* "wrapper/infra/TextExtractor.pyx":144
+  /* "wrapper/infra/TextExtractor.pyx":117
  *     elif video_path.endswith('.wav'):
  *         text = extract_text_from_any(video_path)
  *     return text             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
   __Pyx_INCREF(__pyx_v_text);
   __pyx_r = __pyx_v_text;
   goto __pyx_L0;
 
-  /* "wrapper/infra/TextExtractor.pyx":132
+  /* "wrapper/infra/TextExtractor.pyx":105
  *     return text
  * 
  * def extract_text_from_video(video_path):             # <<<<<<<<<<<<<<
  *     text = ""
  *     if video_path.endswith('.mp4'):
  */
 
@@ -6340,15 +6362,15 @@
     {&__pyx_n_u__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 1, 0, 1},
     {&__pyx_kp_u__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 1, 0, 0},
     {&__pyx_kp_u__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 1, 0, 0},
     {&__pyx_kp_u__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 1, 0, 0},
     {&__pyx_n_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_b, __pyx_k_b, sizeof(__pyx_k_b), 0, 0, 1, 1},
-    {&__pyx_kp_u_background_tasks_server_logs_out, __pyx_k_background_tasks_server_logs_out, sizeof(__pyx_k_background_tasks_server_logs_out), 0, 1, 0, 0},
+    {&__pyx_n_s_base_path, __pyx_k_base_path, sizeof(__pyx_k_base_path), 0, 0, 1, 1},
     {&__pyx_n_s_blocks, __pyx_k_blocks, sizeof(__pyx_k_blocks), 0, 0, 1, 1},
     {&__pyx_n_u_blocks, __pyx_k_blocks, sizeof(__pyx_k_blocks), 0, 1, 0, 1},
     {&__pyx_n_s_capture_output, __pyx_k_capture_output, sizeof(__pyx_k_capture_output), 0, 0, 1, 1},
     {&__pyx_n_s_class_getitem, __pyx_k_class_getitem, sizeof(__pyx_k_class_getitem), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_close, __pyx_k_close, sizeof(__pyx_k_close), 0, 0, 1, 1},
     {&__pyx_n_s_csv_path, __pyx_k_csv_path, sizeof(__pyx_k_csv_path), 0, 0, 1, 1},
@@ -6397,14 +6419,15 @@
     {&__pyx_n_s_ocr_result, __pyx_k_ocr_result, sizeof(__pyx_k_ocr_result), 0, 0, 1, 1},
     {&__pyx_kp_u_ocrmypdf, __pyx_k_ocrmypdf, sizeof(__pyx_k_ocrmypdf), 0, 1, 0, 0},
     {&__pyx_kp_u_on_Page, __pyx_k_on_Page, sizeof(__pyx_k_on_Page), 0, 1, 0, 0},
     {&__pyx_n_s_open, __pyx_k_open, sizeof(__pyx_k_open), 0, 0, 1, 1},
     {&__pyx_n_s_output, __pyx_k_output, sizeof(__pyx_k_output), 0, 0, 1, 1},
     {&__pyx_n_s_output_pdf, __pyx_k_output_pdf, sizeof(__pyx_k_output_pdf), 0, 0, 1, 1},
     {&__pyx_kp_u_output_pdf_2, __pyx_k_output_pdf_2, sizeof(__pyx_k_output_pdf_2), 0, 1, 0, 0},
+    {&__pyx_kp_u_output_pdf_3, __pyx_k_output_pdf_3, sizeof(__pyx_k_output_pdf_3), 0, 1, 0, 0},
     {&__pyx_n_s_page, __pyx_k_page, sizeof(__pyx_k_page), 0, 0, 1, 1},
     {&__pyx_n_s_page_count, __pyx_k_page_count, sizeof(__pyx_k_page_count), 0, 0, 1, 1},
     {&__pyx_n_s_page_num, __pyx_k_page_num, sizeof(__pyx_k_page_num), 0, 0, 1, 1},
     {&__pyx_n_s_pdf_document, __pyx_k_pdf_document, sizeof(__pyx_k_pdf_document), 0, 0, 1, 1},
     {&__pyx_n_s_pdf_path, __pyx_k_pdf_path, sizeof(__pyx_k_pdf_path), 0, 0, 1, 1},
     {&__pyx_n_s_pytesseract, __pyx_k_pytesseract, sizeof(__pyx_k_pytesseract), 0, 0, 1, 1},
     {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
@@ -6434,16 +6457,16 @@
     {&__pyx_n_s_wrapper_infra_TextExtractor, __pyx_k_wrapper_infra_TextExtractor, sizeof(__pyx_k_wrapper_infra_TextExtractor), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 57, __pyx_L1_error)
-  __pyx_builtin_enumerate = __Pyx_GetBuiltinName(__pyx_n_s_enumerate); if (!__pyx_builtin_enumerate) __PYX_ERR(0, 90, __pyx_L1_error)
+  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 53, __pyx_L1_error)
+  __pyx_builtin_enumerate = __Pyx_GetBuiltinName(__pyx_n_s_enumerate); if (!__pyx_builtin_enumerate) __PYX_ERR(0, 84, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
@@ -6486,57 +6509,57 @@
   __Pyx_GIVEREF(__pyx_tuple__13);
   __pyx_codeobj__14 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__13, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_csv, 26, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__14)) __PYX_ERR(0, 26, __pyx_L1_error)
 
   /* "wrapper/infra/TextExtractor.pyx":31
  *     return text
  * 
  * def run_ocrmypdf(input_pdf, output_pdf):             # <<<<<<<<<<<<<<
- *     # Call ocrmypdf using subprocess
  *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
+ * 
  */
   __pyx_tuple__15 = PyTuple_Pack(3, __pyx_n_s_input_pdf, __pyx_n_s_output_pdf, __pyx_n_s_result); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__15);
   __Pyx_GIVEREF(__pyx_tuple__15);
   __pyx_codeobj__16 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__15, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_run_ocrmypdf, 31, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__16)) __PYX_ERR(0, 31, __pyx_L1_error)
 
-  /* "wrapper/infra/TextExtractor.pyx":46
+  /* "wrapper/infra/TextExtractor.pyx":44
  *         raise 'Fail to process pdf'
  * 
- * def extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
- *     output = 'background_tasks/server/logs/output.pdf'
- *     # dirname = os.path.dirname(__file__)
+ * def extract_text_from_pdf(pdf_path, base_path):             # <<<<<<<<<<<<<<
+ *     output = base_path + '/output.pdf'
+ *     logging.debug(f'output pdf {output}')
  */
-  __pyx_tuple__17 = PyTuple_Pack(7, __pyx_n_s_pdf_path, __pyx_n_s_output, __pyx_n_s_pdf_document, __pyx_n_s_entire_text, __pyx_n_s_page_num, __pyx_n_s_page, __pyx_n_s_text); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_tuple__17 = PyTuple_Pack(8, __pyx_n_s_pdf_path, __pyx_n_s_base_path, __pyx_n_s_output, __pyx_n_s_pdf_document, __pyx_n_s_entire_text, __pyx_n_s_page_num, __pyx_n_s_page, __pyx_n_s_text); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__17);
   __Pyx_GIVEREF(__pyx_tuple__17);
-  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__17, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_pdf_2, 46, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_codeobj__18 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__17, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_pdf_2, 44, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__18)) __PYX_ERR(0, 44, __pyx_L1_error)
 
-  /* "wrapper/infra/TextExtractor.pyx":76
+  /* "wrapper/infra/TextExtractor.pyx":70
+ * 
  * 
- * #pymupdf
  * def _extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  */
-  __pyx_tuple__19 = PyTuple_Pack(14, __pyx_n_s_pdf_path, __pyx_n_s_pdf_document, __pyx_n_s_text, __pyx_n_s_page_num, __pyx_n_s_page, __pyx_n_s_dict, __pyx_n_s_blocks, __pyx_n_s_imgblocks, __pyx_n_s_index, __pyx_n_s_img, __pyx_n_s_image_name_2, __pyx_n_s_image_pil, __pyx_n_s_ocr_result, __pyx_n_s_b); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 76, __pyx_L1_error)
+  __pyx_tuple__19 = PyTuple_Pack(14, __pyx_n_s_pdf_path, __pyx_n_s_pdf_document, __pyx_n_s_text, __pyx_n_s_page_num, __pyx_n_s_page, __pyx_n_s_dict, __pyx_n_s_blocks, __pyx_n_s_imgblocks, __pyx_n_s_index, __pyx_n_s_img, __pyx_n_s_image_name_2, __pyx_n_s_image_pil, __pyx_n_s_ocr_result, __pyx_n_s_b); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__19);
   __Pyx_GIVEREF(__pyx_tuple__19);
-  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 14, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__19, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_pdf, 76, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(0, 76, __pyx_L1_error)
+  __pyx_codeobj__20 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 14, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__19, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_pdf, 70, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__20)) __PYX_ERR(0, 70, __pyx_L1_error)
 
-  /* "wrapper/infra/TextExtractor.pyx":132
+  /* "wrapper/infra/TextExtractor.pyx":105
  *     return text
  * 
  * def extract_text_from_video(video_path):             # <<<<<<<<<<<<<<
  *     text = ""
  *     if video_path.endswith('.mp4'):
  */
-  __pyx_tuple__21 = PyTuple_Pack(5, __pyx_n_s_video_path, __pyx_n_s_text, __pyx_n_s_video_capture, __pyx_n_s_ret, __pyx_n_s_frame); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_tuple__21 = PyTuple_Pack(5, __pyx_n_s_video_path, __pyx_n_s_text, __pyx_n_s_video_capture, __pyx_n_s_ret, __pyx_n_s_frame); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 105, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__21);
   __Pyx_GIVEREF(__pyx_tuple__21);
-  __pyx_codeobj__22 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__21, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_video, 132, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__22)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_codeobj__22 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__21, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextExtractor, __pyx_n_s_extract_text_from_video, 105, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__22)) __PYX_ERR(0, 105, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -7041,56 +7064,56 @@
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_csv, __pyx_t_3) < 0) __PYX_ERR(0, 26, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/infra/TextExtractor.pyx":31
  *     return text
  * 
  * def run_ocrmypdf(input_pdf, output_pdf):             # <<<<<<<<<<<<<<
- *     # Call ocrmypdf using subprocess
  *     result = subprocess.run(f"ocrmypdf {input_pdf} {output_pdf} --force-ocr", shell=True, capture_output=True, text=True)
+ * 
  */
   __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_7run_ocrmypdf, 0, __pyx_n_s_run_ocrmypdf, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__16)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_run_ocrmypdf, __pyx_t_3) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":46
+  /* "wrapper/infra/TextExtractor.pyx":44
  *         raise 'Fail to process pdf'
  * 
- * def extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
- *     output = 'background_tasks/server/logs/output.pdf'
- *     # dirname = os.path.dirname(__file__)
+ * def extract_text_from_pdf(pdf_path, base_path):             # <<<<<<<<<<<<<<
+ *     output = base_path + '/output.pdf'
+ *     logging.debug(f'output pdf {output}')
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf, 0, __pyx_n_s_extract_text_from_pdf_2, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 46, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_9extract_text_from_pdf, 0, __pyx_n_s_extract_text_from_pdf_2, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__18)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_pdf_2, __pyx_t_3) < 0) __PYX_ERR(0, 46, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_pdf_2, __pyx_t_3) < 0) __PYX_ERR(0, 44, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":76
+  /* "wrapper/infra/TextExtractor.pyx":70
+ * 
  * 
- * #pymupdf
  * def _extract_text_from_pdf(pdf_path):             # <<<<<<<<<<<<<<
  *     pdf_document = fitz.open(pdf_path)
  *     text = ""
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_11_extract_text_from_pdf, 0, __pyx_n_s_extract_text_from_pdf, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 76, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_11_extract_text_from_pdf, 0, __pyx_n_s_extract_text_from_pdf, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__20)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_pdf, __pyx_t_3) < 0) __PYX_ERR(0, 76, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_pdf, __pyx_t_3) < 0) __PYX_ERR(0, 70, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/TextExtractor.pyx":132
+  /* "wrapper/infra/TextExtractor.pyx":105
  *     return text
  * 
  * def extract_text_from_video(video_path):             # <<<<<<<<<<<<<<
  *     text = ""
  *     if video_path.endswith('.mp4'):
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_13extract_text_from_video, 0, __pyx_n_s_extract_text_from_video, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__22)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 132, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_13TextExtractor_13extract_text_from_video, 0, __pyx_n_s_extract_text_from_video, NULL, __pyx_n_s_wrapper_infra_TextExtractor, __pyx_d, ((PyObject *)__pyx_codeobj__22)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 105, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_video, __pyx_t_3) < 0) __PYX_ERR(0, 132, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_from_video, __pyx_t_3) < 0) __PYX_ERR(0, 105, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/infra/TextExtractor.pyx":2
  * 
  * import io             # <<<<<<<<<<<<<<
  * import cv2
  * import pytesseract
```

### Comparing `docrx-0.0.11/src/wrapper/infra/TextFeatureExtractor.c` & `docrx-0.0.110/src/wrapper/core/Vectorizer.c`

 * *Files 3% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.infra.TextFeatureExtractor",
+        "name": "wrapper.core.Vectorizer",
         "sources": [
-            "src/wrapper/infra/TextFeatureExtractor.pyx"
+            "src/wrapper/core/Vectorizer.pyx"
         ]
     },
-    "module_name": "wrapper.infra.TextFeatureExtractor"
+    "module_name": "wrapper.core.Vectorizer"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__infra__TextFeatureExtractor
-#define __PYX_HAVE_API__wrapper__infra__TextFeatureExtractor
+#define __PYX_HAVE__wrapper__core__Vectorizer
+#define __PYX_HAVE_API__wrapper__core__Vectorizer
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/infra/TextFeatureExtractor.pyx",
+  "src/wrapper/core/Vectorizer.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1436,14 +1436,78 @@
 #define __Pyx_DECREF_SET(r, v) do {\
         PyObject *tmp = (PyObject *) r;\
         r = v; __Pyx_DECREF(tmp);\
     } while (0)
 #define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
 #define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)
 
+/* TupleAndListFromArray.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
+static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
+#endif
+
+/* IncludeStringH.proto */
+#include <string.h>
+
+/* BytesEquals.proto */
+static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);
+
+/* UnicodeEquals.proto */
+static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);
+
+/* fastcall.proto */
+#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
+#define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
+#define __Pyx_KwValues_VARARGS(args, nargs) NULL
+#define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
+#define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
+#if CYTHON_METH_FASTCALL
+    #define __Pyx_Arg_FASTCALL(args, i) args[i]
+    #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
+    #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
+    static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
+    #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
+#else
+    #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
+    #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
+    #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
+    #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
+    #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
+#endif
+#if CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
+#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
+#else
+#define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
+#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
+#endif
+
+/* RaiseArgTupleInvalid.proto */
+static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
+    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
+
+/* RaiseDoubleKeywords.proto */
+static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
+
+/* ParseKeywords.proto */
+static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
+    const char* function_name);
+
+/* PyObjectSetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
+#else
+#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
+#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
+#endif
+
 /* PyErrExceptionMatches.proto */
 #if CYTHON_FAST_THREAD_STATE
 #define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
 static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
 #else
 #define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
 #endif
@@ -1500,69 +1564,14 @@
 
 /* PyObjectGetAttrStrNoError.proto */
 static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name);
 
 /* GetBuiltinName.proto */
 static PyObject *__Pyx_GetBuiltinName(PyObject *name);
 
-/* TupleAndListFromArray.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
-static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
-#endif
-
-/* IncludeStringH.proto */
-#include <string.h>
-
-/* BytesEquals.proto */
-static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* UnicodeEquals.proto */
-static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);
-
-/* fastcall.proto */
-#define __Pyx_Arg_VARARGS(args, i) PyTuple_GET_ITEM(args, i)
-#define __Pyx_NumKwargs_VARARGS(kwds) PyDict_Size(kwds)
-#define __Pyx_KwValues_VARARGS(args, nargs) NULL
-#define __Pyx_GetKwValue_VARARGS(kw, kwvalues, s) __Pyx_PyDict_GetItemStrWithError(kw, s)
-#define __Pyx_KwargsAsDict_VARARGS(kw, kwvalues) PyDict_Copy(kw)
-#if CYTHON_METH_FASTCALL
-    #define __Pyx_Arg_FASTCALL(args, i) args[i]
-    #define __Pyx_NumKwargs_FASTCALL(kwds) PyTuple_GET_SIZE(kwds)
-    #define __Pyx_KwValues_FASTCALL(args, nargs) ((args) + (nargs))
-    static CYTHON_INLINE PyObject * __Pyx_GetKwValue_FASTCALL(PyObject *kwnames, PyObject *const *kwvalues, PyObject *s);
-    #define __Pyx_KwargsAsDict_FASTCALL(kw, kwvalues) _PyStack_AsDict(kwvalues, kw)
-#else
-    #define __Pyx_Arg_FASTCALL __Pyx_Arg_VARARGS
-    #define __Pyx_NumKwargs_FASTCALL __Pyx_NumKwargs_VARARGS
-    #define __Pyx_KwValues_FASTCALL __Pyx_KwValues_VARARGS
-    #define __Pyx_GetKwValue_FASTCALL __Pyx_GetKwValue_VARARGS
-    #define __Pyx_KwargsAsDict_FASTCALL __Pyx_KwargsAsDict_VARARGS
-#endif
-#if CYTHON_COMPILING_IN_CPYTHON
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
-#else
-#define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
-#endif
-
-/* RaiseArgTupleInvalid.proto */
-static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
-    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
-
-/* RaiseDoubleKeywords.proto */
-static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
-
-/* ParseKeywords.proto */
-static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
-    PyObject **argnames[],
-    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
-    const char* function_name);
-
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1653,74 +1662,36 @@
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* GetTopmostException.proto */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
-#endif
-
-/* SaveResetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
-#else
-#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
-#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
-#endif
-
-/* GetException.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
-#endif
-
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
-
-/* GetItemInt.proto */
-#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
-    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
-               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
-#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
-                                                     int is_list, int wraparound, int boundscheck);
-
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+
 /* ImportDottedModule.proto */
 static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
 #if PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
 #endif
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+/* SetNameInClass.proto */
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
+#elif CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
+#else
+#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
+#endif
 
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
@@ -1840,14 +1811,36 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
+/* CalculateMetaclass.proto */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);
+
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
+
+/* PyObjectLookupSpecial.proto */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_LookupSpecialNoError(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 0)
+#define __Pyx_PyObject_LookupSpecial(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 1)
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error);
+#else
+#define __Pyx_PyObject_LookupSpecialNoError(o,n) __Pyx_PyObject_GetAttrStrNoError(o,n)
+#define __Pyx_PyObject_LookupSpecial(o,n) __Pyx_PyObject_GetAttrStr(o,n)
+#endif
+
+/* Py3ClassCreate.proto */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
+                                           PyObject *mkw, PyObject *modname, PyObject *doc);
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
+                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);
+
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -1868,35 +1861,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -1920,58 +1913,76 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.infra.TextFeatureExtractor" */
+/* Module declarations from "wrapper.core.Vectorizer" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.infra.TextFeatureExtractor"
-extern int __pyx_module_is_main_wrapper__infra__TextFeatureExtractor;
-int __pyx_module_is_main_wrapper__infra__TextFeatureExtractor = 0;
+#define __Pyx_MODULE_NAME "wrapper.core.Vectorizer"
+extern int __pyx_module_is_main_wrapper__core__Vectorizer;
+int __pyx_module_is_main_wrapper__core__Vectorizer = 0;
 
-/* Implementation of "wrapper.infra.TextFeatureExtractor" */
+/* Implementation of "wrapper.core.Vectorizer" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_print;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_[] = "*";
-static const char __pyx_k__2[] = ".";
-static const char __pyx_k__6[] = "?";
+static const char __pyx_k_[] = ".";
+static const char __pyx_k__2[] = "*";
+static const char __pyx_k_os[] = "os";
+static const char __pyx_k__11[] = "?";
+static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_File[] = "File";
+static const char __pyx_k_None[] = "None";
+static const char __pyx_k_dict[] = "__dict__";
+static const char __pyx_k_dump[] = "dump";
+static const char __pyx_k_file[] = "file";
+static const char __pyx_k_init[] = "__init__";
+static const char __pyx_k_join[] = "join";
+static const char __pyx_k_load[] = "load";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_path[] = "path";
-static const char __pyx_k_save[] = "save";
+static const char __pyx_k_self[] = "self";
 static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
-static const char __pyx_k_text[] = "text";
-static const char __pyx_k_util[] = "util";
-static const char __pyx_k_print[] = "print";
+static const char __pyx_k_model[] = "model";
+static const char __pyx_k_super[] = "super";
 static const char __pyx_k_encode[] = "encode";
+static const char __pyx_k_exists[] = "exists";
 static const char __pyx_k_import[] = "__import__";
-static const char __pyx_k_models[] = "/models/";
-static const char __pyx_k_basepath[] = "basepath";
-static const char __pyx_k_traceback[] = "traceback";
-static const char __pyx_k_format_exc[] = "format_exc";
-static const char __pyx_k_model_name[] = "model_name";
+static const char __pyx_k_joblib[] = "joblib";
+static const char __pyx_k_module[] = "__module__";
+static const char __pyx_k_return[] = "return";
+static const char __pyx_k_prepare[] = "__prepare__";
+static const char __pyx_k_qualname[] = "__qualname__";
+static const char __pyx_k_set_name[] = "__set_name__";
+static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_Vectorizer[] = "Vectorizer";
+static const char __pyx_k_load_model[] = "load_model";
+static const char __pyx_k_save_model[] = "save_model";
+static const char __pyx_k_corpus_name[] = "corpus_name";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_text_features[] = "text_features";
-static const char __pyx_k_semantic_model[] = "semantic_model";
+static const char __pyx_k_init_subclass[] = "__init_subclass__";
+static const char __pyx_k_model_filename[] = "model_filename";
+static const char __pyx_k_Vectorizer___init[] = "Vectorizer.__init__";
+static const char __pyx_k_Vectorizer_encode[] = "Vectorizer.encode";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_SentenceTransformer[] = "SentenceTransformer";
-static const char __pyx_k_extract_text_features[] = "extract_text_features";
-static const char __pyx_k_sentence_transformers[] = "sentence_transformers";
-static const char __pyx_k_bert_base_multilingual_uncased[] = "bert-base-multilingual-uncased";
-static const char __pyx_k_src_wrapper_infra_TextFeatureExt[] = "src/wrapper/infra/TextFeatureExtractor.pyx";
-static const char __pyx_k_wrapper_infra_TextFeatureExtract[] = "wrapper.infra.TextFeatureExtractor";
+static const char __pyx_k_Vectorizer_load_model[] = "Vectorizer.load_model";
+static const char __pyx_k_Vectorizer_save_model[] = "Vectorizer.save_model";
+static const char __pyx_k_wrapper_core_Vectorizer[] = "wrapper.core.Vectorizer";
+static const char __pyx_k_src_wrapper_core_Vectorizer_pyx[] = "src/wrapper/core/Vectorizer.pyx";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_5infra_20TextFeatureExtractor_extract_text_features(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_basepath, PyObject *__pyx_v_model_name); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path, PyObject *__pyx_v_corpus_name); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_2encode(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_file); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_4load_model(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_6save_model(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_model); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -1993,48 +2004,69 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_n_s_;
-  PyObject *__pyx_n_s_SentenceTransformer;
-  PyObject *__pyx_kp_u__2;
-  PyObject *__pyx_n_s__6;
+  PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_File;
+  PyObject *__pyx_n_s_None;
+  PyObject *__pyx_n_s_Vectorizer;
+  PyObject *__pyx_n_s_Vectorizer___init;
+  PyObject *__pyx_n_s_Vectorizer_encode;
+  PyObject *__pyx_n_s_Vectorizer_load_model;
+  PyObject *__pyx_n_s_Vectorizer_save_model;
+  PyObject *__pyx_n_s__11;
+  PyObject *__pyx_n_s__2;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_n_s_basepath;
-  PyObject *__pyx_kp_u_bert_base_multilingual_uncased;
   PyObject *__pyx_n_s_cline_in_traceback;
+  PyObject *__pyx_n_s_corpus_name;
+  PyObject *__pyx_n_s_dict;
+  PyObject *__pyx_n_s_doc;
+  PyObject *__pyx_n_s_dump;
   PyObject *__pyx_n_s_encode;
-  PyObject *__pyx_n_s_extract_text_features;
-  PyObject *__pyx_n_s_format_exc;
+  PyObject *__pyx_n_s_exists;
+  PyObject *__pyx_n_s_file;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_init;
+  PyObject *__pyx_n_s_init_subclass;
   PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_is_coroutine;
+  PyObject *__pyx_n_s_joblib;
+  PyObject *__pyx_n_s_join;
+  PyObject *__pyx_n_s_load;
+  PyObject *__pyx_n_s_load_model;
   PyObject *__pyx_n_s_main;
-  PyObject *__pyx_n_s_model_name;
-  PyObject *__pyx_kp_u_models;
+  PyObject *__pyx_n_s_metaclass;
+  PyObject *__pyx_n_s_model;
+  PyObject *__pyx_n_s_model_filename;
+  PyObject *__pyx_n_s_module;
   PyObject *__pyx_n_s_name;
+  PyObject *__pyx_n_s_os;
   PyObject *__pyx_n_s_path;
-  PyObject *__pyx_n_s_print;
-  PyObject *__pyx_n_s_save;
-  PyObject *__pyx_n_s_semantic_model;
-  PyObject *__pyx_n_s_sentence_transformers;
+  PyObject *__pyx_n_s_prepare;
+  PyObject *__pyx_n_s_qualname;
+  PyObject *__pyx_n_s_return;
+  PyObject *__pyx_n_s_save_model;
+  PyObject *__pyx_n_s_self;
+  PyObject *__pyx_n_s_set_name;
   PyObject *__pyx_n_s_spec;
-  PyObject *__pyx_kp_s_src_wrapper_infra_TextFeatureExt;
+  PyObject *__pyx_kp_s_src_wrapper_core_Vectorizer_pyx;
+  PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_text;
-  PyObject *__pyx_n_s_text_features;
-  PyObject *__pyx_n_s_traceback;
-  PyObject *__pyx_n_s_util;
-  PyObject *__pyx_n_s_wrapper_infra_TextFeatureExtract;
+  PyObject *__pyx_n_s_wrapper_core_Vectorizer;
   PyObject *__pyx_tuple__3;
   PyObject *__pyx_tuple__5;
+  PyObject *__pyx_tuple__7;
+  PyObject *__pyx_tuple__9;
   PyObject *__pyx_codeobj__4;
+  PyObject *__pyx_codeobj__6;
+  PyObject *__pyx_codeobj__8;
+  PyObject *__pyx_codeobj__10;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2069,48 +2101,69 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_n_s_);
-  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformer);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
-  Py_CLEAR(clear_module_state->__pyx_n_s__6);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_File);
+  Py_CLEAR(clear_module_state->__pyx_n_s_None);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer___init);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer_encode);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer_load_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer_save_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s__11);
+  Py_CLEAR(clear_module_state->__pyx_n_s__2);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_n_s_basepath);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_bert_base_multilingual_uncased);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
+  Py_CLEAR(clear_module_state->__pyx_n_s_corpus_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dict);
+  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dump);
   Py_CLEAR(clear_module_state->__pyx_n_s_encode);
-  Py_CLEAR(clear_module_state->__pyx_n_s_extract_text_features);
-  Py_CLEAR(clear_module_state->__pyx_n_s_format_exc);
+  Py_CLEAR(clear_module_state->__pyx_n_s_exists);
+  Py_CLEAR(clear_module_state->__pyx_n_s_file);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
   Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
+  Py_CLEAR(clear_module_state->__pyx_n_s_joblib);
+  Py_CLEAR(clear_module_state->__pyx_n_s_join);
+  Py_CLEAR(clear_module_state->__pyx_n_s_load);
+  Py_CLEAR(clear_module_state->__pyx_n_s_load_model);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
-  Py_CLEAR(clear_module_state->__pyx_n_s_model_name);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_models);
+  Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s_model_filename);
+  Py_CLEAR(clear_module_state->__pyx_n_s_module);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_os);
   Py_CLEAR(clear_module_state->__pyx_n_s_path);
-  Py_CLEAR(clear_module_state->__pyx_n_s_print);
-  Py_CLEAR(clear_module_state->__pyx_n_s_save);
-  Py_CLEAR(clear_module_state->__pyx_n_s_semantic_model);
-  Py_CLEAR(clear_module_state->__pyx_n_s_sentence_transformers);
+  Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
+  Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_return);
+  Py_CLEAR(clear_module_state->__pyx_n_s_save_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s_self);
+  Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
   Py_CLEAR(clear_module_state->__pyx_n_s_spec);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_TextFeatureExt);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_Vectorizer_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_text);
-  Py_CLEAR(clear_module_state->__pyx_n_s_text_features);
-  Py_CLEAR(clear_module_state->__pyx_n_s_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_util);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_TextFeatureExtract);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_Vectorizer);
   Py_CLEAR(clear_module_state->__pyx_tuple__3);
   Py_CLEAR(clear_module_state->__pyx_tuple__5);
+  Py_CLEAR(clear_module_state->__pyx_tuple__7);
+  Py_CLEAR(clear_module_state->__pyx_tuple__9);
   Py_CLEAR(clear_module_state->__pyx_codeobj__4);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__6);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__8);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__10);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2123,48 +2176,69 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_n_s_);
-  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformer);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
-  Py_VISIT(traverse_module_state->__pyx_n_s__6);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_File);
+  Py_VISIT(traverse_module_state->__pyx_n_s_None);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer___init);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer_encode);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer_load_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer_save_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s__11);
+  Py_VISIT(traverse_module_state->__pyx_n_s__2);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_n_s_basepath);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_bert_base_multilingual_uncased);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
+  Py_VISIT(traverse_module_state->__pyx_n_s_corpus_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dict);
+  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dump);
   Py_VISIT(traverse_module_state->__pyx_n_s_encode);
-  Py_VISIT(traverse_module_state->__pyx_n_s_extract_text_features);
-  Py_VISIT(traverse_module_state->__pyx_n_s_format_exc);
+  Py_VISIT(traverse_module_state->__pyx_n_s_exists);
+  Py_VISIT(traverse_module_state->__pyx_n_s_file);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
   Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
+  Py_VISIT(traverse_module_state->__pyx_n_s_joblib);
+  Py_VISIT(traverse_module_state->__pyx_n_s_join);
+  Py_VISIT(traverse_module_state->__pyx_n_s_load);
+  Py_VISIT(traverse_module_state->__pyx_n_s_load_model);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
-  Py_VISIT(traverse_module_state->__pyx_n_s_model_name);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_models);
+  Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s_model_filename);
+  Py_VISIT(traverse_module_state->__pyx_n_s_module);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_os);
   Py_VISIT(traverse_module_state->__pyx_n_s_path);
-  Py_VISIT(traverse_module_state->__pyx_n_s_print);
-  Py_VISIT(traverse_module_state->__pyx_n_s_save);
-  Py_VISIT(traverse_module_state->__pyx_n_s_semantic_model);
-  Py_VISIT(traverse_module_state->__pyx_n_s_sentence_transformers);
+  Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
+  Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_return);
+  Py_VISIT(traverse_module_state->__pyx_n_s_save_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s_self);
+  Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
   Py_VISIT(traverse_module_state->__pyx_n_s_spec);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_TextFeatureExt);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_Vectorizer_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_text);
-  Py_VISIT(traverse_module_state->__pyx_n_s_text_features);
-  Py_VISIT(traverse_module_state->__pyx_n_s_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_util);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_TextFeatureExtract);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_Vectorizer);
   Py_VISIT(traverse_module_state->__pyx_tuple__3);
   Py_VISIT(traverse_module_state->__pyx_tuple__5);
+  Py_VISIT(traverse_module_state->__pyx_tuple__7);
+  Py_VISIT(traverse_module_state->__pyx_tuple__9);
   Py_VISIT(traverse_module_state->__pyx_codeobj__4);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__6);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__8);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__10);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2187,92 +2261,112 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_n_s_ __pyx_mstate_global->__pyx_n_s_
-#define __pyx_n_s_SentenceTransformer __pyx_mstate_global->__pyx_n_s_SentenceTransformer
-#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
-#define __pyx_n_s__6 __pyx_mstate_global->__pyx_n_s__6
+#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
+#define __pyx_n_s_None __pyx_mstate_global->__pyx_n_s_None
+#define __pyx_n_s_Vectorizer __pyx_mstate_global->__pyx_n_s_Vectorizer
+#define __pyx_n_s_Vectorizer___init __pyx_mstate_global->__pyx_n_s_Vectorizer___init
+#define __pyx_n_s_Vectorizer_encode __pyx_mstate_global->__pyx_n_s_Vectorizer_encode
+#define __pyx_n_s_Vectorizer_load_model __pyx_mstate_global->__pyx_n_s_Vectorizer_load_model
+#define __pyx_n_s_Vectorizer_save_model __pyx_mstate_global->__pyx_n_s_Vectorizer_save_model
+#define __pyx_n_s__11 __pyx_mstate_global->__pyx_n_s__11
+#define __pyx_n_s__2 __pyx_mstate_global->__pyx_n_s__2
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_n_s_basepath __pyx_mstate_global->__pyx_n_s_basepath
-#define __pyx_kp_u_bert_base_multilingual_uncased __pyx_mstate_global->__pyx_kp_u_bert_base_multilingual_uncased
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
+#define __pyx_n_s_corpus_name __pyx_mstate_global->__pyx_n_s_corpus_name
+#define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
+#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
+#define __pyx_n_s_dump __pyx_mstate_global->__pyx_n_s_dump
 #define __pyx_n_s_encode __pyx_mstate_global->__pyx_n_s_encode
-#define __pyx_n_s_extract_text_features __pyx_mstate_global->__pyx_n_s_extract_text_features
-#define __pyx_n_s_format_exc __pyx_mstate_global->__pyx_n_s_format_exc
+#define __pyx_n_s_exists __pyx_mstate_global->__pyx_n_s_exists
+#define __pyx_n_s_file __pyx_mstate_global->__pyx_n_s_file
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
+#define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
 #define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
+#define __pyx_n_s_joblib __pyx_mstate_global->__pyx_n_s_joblib
+#define __pyx_n_s_join __pyx_mstate_global->__pyx_n_s_join
+#define __pyx_n_s_load __pyx_mstate_global->__pyx_n_s_load
+#define __pyx_n_s_load_model __pyx_mstate_global->__pyx_n_s_load_model
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
-#define __pyx_n_s_model_name __pyx_mstate_global->__pyx_n_s_model_name
-#define __pyx_kp_u_models __pyx_mstate_global->__pyx_kp_u_models
+#define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
+#define __pyx_n_s_model __pyx_mstate_global->__pyx_n_s_model
+#define __pyx_n_s_model_filename __pyx_mstate_global->__pyx_n_s_model_filename
+#define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
+#define __pyx_n_s_os __pyx_mstate_global->__pyx_n_s_os
 #define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
-#define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
-#define __pyx_n_s_save __pyx_mstate_global->__pyx_n_s_save
-#define __pyx_n_s_semantic_model __pyx_mstate_global->__pyx_n_s_semantic_model
-#define __pyx_n_s_sentence_transformers __pyx_mstate_global->__pyx_n_s_sentence_transformers
+#define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
+#define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
+#define __pyx_n_s_return __pyx_mstate_global->__pyx_n_s_return
+#define __pyx_n_s_save_model __pyx_mstate_global->__pyx_n_s_save_model
+#define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
+#define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
 #define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
-#define __pyx_kp_s_src_wrapper_infra_TextFeatureExt __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_TextFeatureExt
+#define __pyx_kp_s_src_wrapper_core_Vectorizer_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_Vectorizer_pyx
+#define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
-#define __pyx_n_s_text_features __pyx_mstate_global->__pyx_n_s_text_features
-#define __pyx_n_s_traceback __pyx_mstate_global->__pyx_n_s_traceback
-#define __pyx_n_s_util __pyx_mstate_global->__pyx_n_s_util
-#define __pyx_n_s_wrapper_infra_TextFeatureExtract __pyx_mstate_global->__pyx_n_s_wrapper_infra_TextFeatureExtract
+#define __pyx_n_s_wrapper_core_Vectorizer __pyx_mstate_global->__pyx_n_s_wrapper_core_Vectorizer
 #define __pyx_tuple__3 __pyx_mstate_global->__pyx_tuple__3
 #define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
+#define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
+#define __pyx_tuple__9 __pyx_mstate_global->__pyx_tuple__9
 #define __pyx_codeobj__4 __pyx_mstate_global->__pyx_codeobj__4
+#define __pyx_codeobj__6 __pyx_mstate_global->__pyx_codeobj__6
+#define __pyx_codeobj__8 __pyx_mstate_global->__pyx_codeobj__8
+#define __pyx_codeobj__10 __pyx_mstate_global->__pyx_codeobj__10
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/TextFeatureExtractor.pyx":6
- * # dir = '/app/background_tasks/server/media/models/'
- * # dir = ''
- * def extract_text_features(text, basepath, model_name='bert-base-multilingual-uncased'):             # <<<<<<<<<<<<<<
- *     # Carregar o modelo pr-treinado
- *     # model_name = 'distiluse-base-multilingual-cased-v2'
+/* "wrapper/core/Vectorizer.pyx":9
+ *     model = None
+ * 
+ *     def __init__(self, path, corpus_name) -> None:             # <<<<<<<<<<<<<<
+ *         self.corpus_name = corpus_name
+ *         self.path = path
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_20TextFeatureExtractor_1extract_text_features(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_20TextFeatureExtractor_extract_text_features, "extract_text_features(text, basepath, model_name=u'bert-base-multilingual-uncased')");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_20TextFeatureExtractor_1extract_text_features = {"extract_text_features", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_20TextFeatureExtractor_1extract_text_features, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_20TextFeatureExtractor_extract_text_features};
-static PyObject *__pyx_pw_7wrapper_5infra_20TextFeatureExtractor_1extract_text_features(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer___init__, "Vectorizer.__init__(self, path, corpus_name) -> None");
+static PyMethodDef __pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer___init__};
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_text = 0;
-  PyObject *__pyx_v_basepath = 0;
-  PyObject *__pyx_v_model_name = 0;
+  PyObject *__pyx_v_self = 0;
+  PyObject *__pyx_v_path = 0;
+  PyObject *__pyx_v_corpus_name = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("extract_text_features (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_basepath,&__pyx_n_s_model_name,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_path,&__pyx_n_s_corpus_name,0};
     PyObject* values[3] = {0,0,0};
-    values[2] = ((PyObject *)((PyObject*)__pyx_kp_u_bert_base_multilingual_uncased));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
         CYTHON_FALLTHROUGH;
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
@@ -2280,404 +2374,639 @@
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 6, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
-        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_basepath)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 6, __pyx_L3_error)
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_path)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("extract_text_features", 0, 2, 3, 1); __PYX_ERR(0, 6, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("__init__", 1, 3, 3, 1); __PYX_ERR(0, 9, __pyx_L3_error)
         }
         CYTHON_FALLTHROUGH;
         case  2:
-        if (kw_args > 0) {
-          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_model_name);
-          if (value) { values[2] = value; kw_args--; }
-          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 6, __pyx_L3_error)
+        if (likely((values[2] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_corpus_name)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 9, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 1, 3, 3, 2); __PYX_ERR(0, 9, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "extract_text_features") < 0)) __PYX_ERR(0, 6, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 9, __pyx_L3_error)
       }
+    } else if (unlikely(__pyx_nargs != 3)) {
+      goto __pyx_L5_argtuple_error;
     } else {
-      switch (__pyx_nargs) {
-        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
-        CYTHON_FALLTHROUGH;
-        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
-        values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
-        break;
-        default: goto __pyx_L5_argtuple_error;
-      }
-    }
-    __pyx_v_text = values[0];
-    __pyx_v_basepath = values[1];
-    __pyx_v_model_name = values[2];
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+      values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+    }
+    __pyx_v_self = values[0];
+    __pyx_v_path = values[1];
+    __pyx_v_corpus_name = values[2];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("extract_text_features", 0, 2, 3, __pyx_nargs); __PYX_ERR(0, 6, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 1, 3, 3, __pyx_nargs); __PYX_ERR(0, 9, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.TextFeatureExtractor.extract_text_features", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_20TextFeatureExtractor_extract_text_features(__pyx_self, __pyx_v_text, __pyx_v_basepath, __pyx_v_model_name);
+  __pyx_r = __pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer___init__(__pyx_self, __pyx_v_self, __pyx_v_path, __pyx_v_corpus_name);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_20TextFeatureExtractor_extract_text_features(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_basepath, PyObject *__pyx_v_model_name) {
-  PyObject *__pyx_v_path = NULL;
-  PyObject *__pyx_v_semantic_model = NULL;
-  PyObject *__pyx_v_text_features = NULL;
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path, PyObject *__pyx_v_corpus_name) {
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
-  PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
-  int __pyx_t_7;
-  PyObject *__pyx_t_8 = NULL;
-  PyObject *__pyx_t_9 = NULL;
-  PyObject *__pyx_t_10 = NULL;
-  int __pyx_t_11;
-  int __pyx_t_12;
+  int __pyx_t_4;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("extract_text_features", 0);
+  __Pyx_RefNannySetupContext("__init__", 0);
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":9
- *     # Carregar o modelo pr-treinado
- *     # model_name = 'distiluse-base-multilingual-cased-v2'
- *     path = basepath + '/models/' + model_name             # <<<<<<<<<<<<<<
+  /* "wrapper/core/Vectorizer.pyx":10
  * 
- *     semantic_model = None
+ *     def __init__(self, path, corpus_name) -> None:
+ *         self.corpus_name = corpus_name             # <<<<<<<<<<<<<<
+ *         self.path = path
+ *         self.model_filename = os.path.join(path, corpus_name)
  */
-  __pyx_t_1 = PyNumber_Add(__pyx_v_basepath, __pyx_kp_u_models); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_v_model_name); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_v_path = __pyx_t_2;
-  __pyx_t_2 = 0;
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_corpus_name, __pyx_v_corpus_name) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":11
- *     path = basepath + '/models/' + model_name
+  /* "wrapper/core/Vectorizer.pyx":11
+ *     def __init__(self, path, corpus_name) -> None:
+ *         self.corpus_name = corpus_name
+ *         self.path = path             # <<<<<<<<<<<<<<
+ *         self.model_filename = os.path.join(path, corpus_name)
  * 
- *     semantic_model = None             # <<<<<<<<<<<<<<
- *     try:
- *         semantic_model = SentenceTransformer(path)
  */
-  __Pyx_INCREF(Py_None);
-  __pyx_v_semantic_model = Py_None;
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_path, __pyx_v_path) < 0) __PYX_ERR(0, 11, __pyx_L1_error)
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":12
+  /* "wrapper/core/Vectorizer.pyx":12
+ *         self.corpus_name = corpus_name
+ *         self.path = path
+ *         self.model_filename = os.path.join(path, corpus_name)             # <<<<<<<<<<<<<<
  * 
- *     semantic_model = None
- *     try:             # <<<<<<<<<<<<<<
- *         semantic_model = SentenceTransformer(path)
- *     except:
+ *     def encode(self, file:File):
  */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_path); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_join); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
   {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    __Pyx_ExceptionSave(&__pyx_t_3, &__pyx_t_4, &__pyx_t_5);
-    __Pyx_XGOTREF(__pyx_t_3);
-    __Pyx_XGOTREF(__pyx_t_4);
-    __Pyx_XGOTREF(__pyx_t_5);
-    /*try:*/ {
-
-      /* "wrapper/infra/TextFeatureExtractor.pyx":13
- *     semantic_model = None
- *     try:
- *         semantic_model = SentenceTransformer(path)             # <<<<<<<<<<<<<<
- *     except:
- *         print(traceback.format_exc())
- */
-      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 13, __pyx_L3_error)
-      __Pyx_GOTREF(__pyx_t_1);
-      __pyx_t_6 = NULL;
-      __pyx_t_7 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
-        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_1);
-        if (likely(__pyx_t_6)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-          __Pyx_INCREF(__pyx_t_6);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_1, function);
-          __pyx_t_7 = 1;
-        }
-      }
-      {
-        PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_path};
-        __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-        if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L3_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-      }
-      __Pyx_DECREF_SET(__pyx_v_semantic_model, __pyx_t_2);
-      __pyx_t_2 = 0;
+    PyObject *__pyx_callargs[3] = {__pyx_t_3, __pyx_v_path, __pyx_v_corpus_name};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_model_filename, __pyx_t_1) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-      /* "wrapper/infra/TextFeatureExtractor.pyx":12
+  /* "wrapper/core/Vectorizer.pyx":9
+ *     model = None
  * 
- *     semantic_model = None
- *     try:             # <<<<<<<<<<<<<<
- *         semantic_model = SentenceTransformer(path)
- *     except:
+ *     def __init__(self, path, corpus_name) -> None:             # <<<<<<<<<<<<<<
+ *         self.corpus_name = corpus_name
+ *         self.path = path
  */
-    }
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    goto __pyx_L8_try_end;
-    __pyx_L3_error:;
-    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-
-    /* "wrapper/infra/TextFeatureExtractor.pyx":14
- *     try:
- *         semantic_model = SentenceTransformer(path)
- *     except:             # <<<<<<<<<<<<<<
- *         print(traceback.format_exc())
+
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/core/Vectorizer.pyx":14
+ *         self.model_filename = os.path.join(path, corpus_name)
  * 
- */
-    /*except:*/ {
-      __Pyx_AddTraceback("wrapper.infra.TextFeatureExtractor.extract_text_features", __pyx_clineno, __pyx_lineno, __pyx_filename);
-      if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_1, &__pyx_t_6) < 0) __PYX_ERR(0, 14, __pyx_L5_except_error)
-      __Pyx_XGOTREF(__pyx_t_2);
-      __Pyx_XGOTREF(__pyx_t_1);
-      __Pyx_XGOTREF(__pyx_t_6);
-
-      /* "wrapper/infra/TextFeatureExtractor.pyx":15
- *         semantic_model = SentenceTransformer(path)
- *     except:
- *         print(traceback.format_exc())             # <<<<<<<<<<<<<<
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         pass
  * 
- *     if not semantic_model:
  */
-      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_traceback); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 15, __pyx_L5_except_error)
-      __Pyx_GOTREF(__pyx_t_9);
-      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 15, __pyx_L5_except_error)
-      __Pyx_GOTREF(__pyx_t_10);
-      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
-      __pyx_t_9 = NULL;
-      __pyx_t_7 = 0;
-      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
-        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
-        if (likely(__pyx_t_9)) {
-          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
-          __Pyx_INCREF(__pyx_t_9);
-          __Pyx_INCREF(function);
-          __Pyx_DECREF_SET(__pyx_t_10, function);
-          __pyx_t_7 = 1;
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_3encode(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_2encode, "Vectorizer.encode(self, file: File)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_3encode = {"encode", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_3encode, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_2encode};
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_3encode(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  CYTHON_UNUSED PyObject *__pyx_v_self = 0;
+  CYTHON_UNUSED PyObject *__pyx_v_file = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("encode (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_file,0};
+    PyObject* values[2] = {0,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 14, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_file)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 14, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("encode", 1, 2, 2, 1); __PYX_ERR(0, 14, __pyx_L3_error)
         }
       }
-      {
-        PyObject *__pyx_callargs[1] = {__pyx_t_9, };
-        __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_10, __pyx_callargs+1-__pyx_t_7, 0+__pyx_t_7);
-        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
-        if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 15, __pyx_L5_except_error)
-        __Pyx_GOTREF(__pyx_t_8);
-        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode") < 0)) __PYX_ERR(0, 14, __pyx_L3_error)
       }
-      __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_8); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 15, __pyx_L5_except_error)
-      __Pyx_GOTREF(__pyx_t_10);
-      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
-      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      goto __pyx_L4_exception_handled;
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
+    __pyx_v_self = values[0];
+    __pyx_v_file = values[1];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("encode", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 14, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.encode", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_2encode(__pyx_self, __pyx_v_self, __pyx_v_file);
 
-    /* "wrapper/infra/TextFeatureExtractor.pyx":12
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_2encode(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_file) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("encode", 0);
+
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/core/Vectorizer.pyx":17
+ *         pass
  * 
- *     semantic_model = None
- *     try:             # <<<<<<<<<<<<<<
- *         semantic_model = SentenceTransformer(path)
- *     except:
+ *     def load_model(self):             # <<<<<<<<<<<<<<
+ *         if os.path.exists(self.model_filename):
+ *             self.model = joblib.load(self.model_filename)
  */
-    __pyx_L5_except_error:;
-    __Pyx_XGIVEREF(__pyx_t_3);
-    __Pyx_XGIVEREF(__pyx_t_4);
-    __Pyx_XGIVEREF(__pyx_t_5);
-    __Pyx_ExceptionReset(__pyx_t_3, __pyx_t_4, __pyx_t_5);
-    goto __pyx_L1_error;
-    __pyx_L4_exception_handled:;
-    __Pyx_XGIVEREF(__pyx_t_3);
-    __Pyx_XGIVEREF(__pyx_t_4);
-    __Pyx_XGIVEREF(__pyx_t_5);
-    __Pyx_ExceptionReset(__pyx_t_3, __pyx_t_4, __pyx_t_5);
-    __pyx_L8_try_end:;
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_5load_model(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_4load_model, "Vectorizer.load_model(self)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_5load_model = {"load_model", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_5load_model, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_4load_model};
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_5load_model(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_self = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("load_model (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,0};
+    PyObject* values[1] = {0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 17, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "load_model") < 0)) __PYX_ERR(0, 17, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+    }
+    __pyx_v_self = values[0];
   }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("load_model", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 17, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.load_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_4load_model(__pyx_self, __pyx_v_self);
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":17
- *         print(traceback.format_exc())
- * 
- *     if not semantic_model:             # <<<<<<<<<<<<<<
- *         semantic_model = SentenceTransformer(model_name)
- *         semantic_model.save(path)
- */
-  __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_v_semantic_model); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 17, __pyx_L1_error)
-  __pyx_t_12 = (!__pyx_t_11);
-  if (__pyx_t_12) {
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-    /* "wrapper/infra/TextFeatureExtractor.pyx":18
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_4load_model(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
+  int __pyx_t_6;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("load_model", 0);
+
+  /* "wrapper/core/Vectorizer.pyx":18
  * 
- *     if not semantic_model:
- *         semantic_model = SentenceTransformer(model_name)             # <<<<<<<<<<<<<<
- *         semantic_model.save(path)
+ *     def load_model(self):
+ *         if os.path.exists(self.model_filename):             # <<<<<<<<<<<<<<
+ *             self.model = joblib.load(self.model_filename)
  * 
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = NULL;
-    __pyx_t_7 = 0;
-    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
-      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
-      if (likely(__pyx_t_2)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-        __Pyx_INCREF(__pyx_t_2);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_1, function);
-        __pyx_t_7 = 1;
-      }
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_os); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_path); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_exists); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_4 = NULL;
+  __pyx_t_5 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_4)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_4);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_5 = 1;
     }
-    {
-      PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_model_name};
-      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 18, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    }
-    __Pyx_DECREF_SET(__pyx_v_semantic_model, __pyx_t_6);
-    __pyx_t_6 = 0;
-
-    /* "wrapper/infra/TextFeatureExtractor.pyx":19
- *     if not semantic_model:
- *         semantic_model = SentenceTransformer(model_name)
- *         semantic_model.save(path)             # <<<<<<<<<<<<<<
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_3};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_6) {
+
+    /* "wrapper/core/Vectorizer.pyx":19
+ *     def load_model(self):
+ *         if os.path.exists(self.model_filename):
+ *             self.model = joblib.load(self.model_filename)             # <<<<<<<<<<<<<<
  * 
- *     # Obter a representao semntica do texto
+ *     def save_model(self, model):
  */
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_semantic_model, __pyx_n_s_save); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_2 = NULL;
-    __pyx_t_7 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
-      if (likely(__pyx_t_2)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-        __Pyx_INCREF(__pyx_t_2);
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_joblib); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_load); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_4 = NULL;
+    __pyx_t_5 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_4)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_1, function);
-        __pyx_t_7 = 1;
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_5 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_path};
-      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 19, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_2};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_model, __pyx_t_1) < 0) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "wrapper/core/Vectorizer.pyx":18
+ * 
+ *     def load_model(self):
+ *         if os.path.exists(self.model_filename):             # <<<<<<<<<<<<<<
+ *             self.model = joblib.load(self.model_filename)
+ * 
+ */
+  }
 
-    /* "wrapper/infra/TextFeatureExtractor.pyx":17
- *         print(traceback.format_exc())
+  /* "wrapper/core/Vectorizer.pyx":17
+ *         pass
  * 
- *     if not semantic_model:             # <<<<<<<<<<<<<<
- *         semantic_model = SentenceTransformer(model_name)
- *         semantic_model.save(path)
+ *     def load_model(self):             # <<<<<<<<<<<<<<
+ *         if os.path.exists(self.model_filename):
+ *             self.model = joblib.load(self.model_filename)
  */
+
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.load_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/core/Vectorizer.pyx":21
+ *             self.model = joblib.load(self.model_filename)
+ * 
+ *     def save_model(self, model):             # <<<<<<<<<<<<<<
+ *         self.model = model
+ *         joblib.dump(self.model, self.model_filename)
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_7save_model(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_6save_model, "Vectorizer.save_model(self, model)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_7save_model = {"save_model", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_7save_model, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_10Vectorizer_10Vectorizer_6save_model};
+static PyObject *__pyx_pw_7wrapper_4core_10Vectorizer_10Vectorizer_7save_model(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_self = 0;
+  PyObject *__pyx_v_model = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("save_model (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_model,0};
+    PyObject* values[2] = {0,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 21, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_model)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 21, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("save_model", 1, 2, 2, 1); __PYX_ERR(0, 21, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "save_model") < 0)) __PYX_ERR(0, 21, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_self = values[0];
+    __pyx_v_model = values[1];
   }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("save_model", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 21, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.save_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_6save_model(__pyx_self, __pyx_v_self, __pyx_v_model);
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":22
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_4core_10Vectorizer_10Vectorizer_6save_model(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_model) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  int __pyx_t_6;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("save_model", 0);
+
+  /* "wrapper/core/Vectorizer.pyx":22
+ * 
+ *     def save_model(self, model):
+ *         self.model = model             # <<<<<<<<<<<<<<
+ *         joblib.dump(self.model, self.model_filename)
  * 
- *     # Obter a representao semntica do texto
- *     text_features = semantic_model.encode(text)[0]             # <<<<<<<<<<<<<<
- *     return text_features
  */
-  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_semantic_model, __pyx_n_s_encode); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = NULL;
-  __pyx_t_7 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
-    if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-      __Pyx_INCREF(__pyx_t_2);
+  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_model, __pyx_v_model) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":23
+ *     def save_model(self, model):
+ *         self.model = model
+ *         joblib.dump(self.model, self.model_filename)             # <<<<<<<<<<<<<<
+ * 
+ * 
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_joblib); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_dump); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model_filename); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = NULL;
+  __pyx_t_6 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
+    if (likely(__pyx_t_5)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+      __Pyx_INCREF(__pyx_t_5);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_1, function);
-      __pyx_t_7 = 1;
+      __Pyx_DECREF_SET(__pyx_t_3, function);
+      __pyx_t_6 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_text};
-    __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_7, 1+__pyx_t_7);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    PyObject *__pyx_callargs[3] = {__pyx_t_5, __pyx_t_2, __pyx_t_4};
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 23, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   }
-  __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_6, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-  __pyx_v_text_features = __pyx_t_1;
-  __pyx_t_1 = 0;
-
-  /* "wrapper/infra/TextFeatureExtractor.pyx":23
- *     # Obter a representao semntica do texto
- *     text_features = semantic_model.encode(text)[0]
- *     return text_features             # <<<<<<<<<<<<<<
- */
-  __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_text_features);
-  __pyx_r = __pyx_v_text_features;
-  goto __pyx_L0;
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":6
- * # dir = '/app/background_tasks/server/media/models/'
- * # dir = ''
- * def extract_text_features(text, basepath, model_name='bert-base-multilingual-uncased'):             # <<<<<<<<<<<<<<
- *     # Carregar o modelo pr-treinado
- *     # model_name = 'distiluse-base-multilingual-cased-v2'
+  /* "wrapper/core/Vectorizer.pyx":21
+ *             self.model = joblib.load(self.model_filename)
+ * 
+ *     def save_model(self, model):             # <<<<<<<<<<<<<<
+ *         self.model = model
+ *         joblib.dump(self.model, self.model_filename)
  */
 
   /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_8);
-  __Pyx_XDECREF(__pyx_t_9);
-  __Pyx_XDECREF(__pyx_t_10);
-  __Pyx_AddTraceback("wrapper.infra.TextFeatureExtractor.extract_text_features", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_AddTraceback("wrapper.core.Vectorizer.Vectorizer.save_model", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_path);
-  __Pyx_XDECREF(__pyx_v_semantic_model);
-  __Pyx_XDECREF(__pyx_v_text_features);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
@@ -2691,86 +3020,132 @@
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_n_s_, __pyx_k_, sizeof(__pyx_k_), 0, 0, 1, 1},
-    {&__pyx_n_s_SentenceTransformer, __pyx_k_SentenceTransformer, sizeof(__pyx_k_SentenceTransformer), 0, 0, 1, 1},
-    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
-    {&__pyx_n_s__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 0, 1, 1},
+    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
+    {&__pyx_n_s_None, __pyx_k_None, sizeof(__pyx_k_None), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer, __pyx_k_Vectorizer, sizeof(__pyx_k_Vectorizer), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer___init, __pyx_k_Vectorizer___init, sizeof(__pyx_k_Vectorizer___init), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer_encode, __pyx_k_Vectorizer_encode, sizeof(__pyx_k_Vectorizer_encode), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer_load_model, __pyx_k_Vectorizer_load_model, sizeof(__pyx_k_Vectorizer_load_model), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer_save_model, __pyx_k_Vectorizer_save_model, sizeof(__pyx_k_Vectorizer_save_model), 0, 0, 1, 1},
+    {&__pyx_n_s__11, __pyx_k__11, sizeof(__pyx_k__11), 0, 0, 1, 1},
+    {&__pyx_n_s__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_n_s_basepath, __pyx_k_basepath, sizeof(__pyx_k_basepath), 0, 0, 1, 1},
-    {&__pyx_kp_u_bert_base_multilingual_uncased, __pyx_k_bert_base_multilingual_uncased, sizeof(__pyx_k_bert_base_multilingual_uncased), 0, 1, 0, 0},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
+    {&__pyx_n_s_corpus_name, __pyx_k_corpus_name, sizeof(__pyx_k_corpus_name), 0, 0, 1, 1},
+    {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
+    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
+    {&__pyx_n_s_dump, __pyx_k_dump, sizeof(__pyx_k_dump), 0, 0, 1, 1},
     {&__pyx_n_s_encode, __pyx_k_encode, sizeof(__pyx_k_encode), 0, 0, 1, 1},
-    {&__pyx_n_s_extract_text_features, __pyx_k_extract_text_features, sizeof(__pyx_k_extract_text_features), 0, 0, 1, 1},
-    {&__pyx_n_s_format_exc, __pyx_k_format_exc, sizeof(__pyx_k_format_exc), 0, 0, 1, 1},
+    {&__pyx_n_s_exists, __pyx_k_exists, sizeof(__pyx_k_exists), 0, 0, 1, 1},
+    {&__pyx_n_s_file, __pyx_k_file, sizeof(__pyx_k_file), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
+    {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
     {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
+    {&__pyx_n_s_joblib, __pyx_k_joblib, sizeof(__pyx_k_joblib), 0, 0, 1, 1},
+    {&__pyx_n_s_join, __pyx_k_join, sizeof(__pyx_k_join), 0, 0, 1, 1},
+    {&__pyx_n_s_load, __pyx_k_load, sizeof(__pyx_k_load), 0, 0, 1, 1},
+    {&__pyx_n_s_load_model, __pyx_k_load_model, sizeof(__pyx_k_load_model), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
-    {&__pyx_n_s_model_name, __pyx_k_model_name, sizeof(__pyx_k_model_name), 0, 0, 1, 1},
-    {&__pyx_kp_u_models, __pyx_k_models, sizeof(__pyx_k_models), 0, 1, 0, 0},
+    {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
+    {&__pyx_n_s_model, __pyx_k_model, sizeof(__pyx_k_model), 0, 0, 1, 1},
+    {&__pyx_n_s_model_filename, __pyx_k_model_filename, sizeof(__pyx_k_model_filename), 0, 0, 1, 1},
+    {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
+    {&__pyx_n_s_os, __pyx_k_os, sizeof(__pyx_k_os), 0, 0, 1, 1},
     {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
-    {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
-    {&__pyx_n_s_save, __pyx_k_save, sizeof(__pyx_k_save), 0, 0, 1, 1},
-    {&__pyx_n_s_semantic_model, __pyx_k_semantic_model, sizeof(__pyx_k_semantic_model), 0, 0, 1, 1},
-    {&__pyx_n_s_sentence_transformers, __pyx_k_sentence_transformers, sizeof(__pyx_k_sentence_transformers), 0, 0, 1, 1},
+    {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
+    {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
+    {&__pyx_n_s_return, __pyx_k_return, sizeof(__pyx_k_return), 0, 0, 1, 1},
+    {&__pyx_n_s_save_model, __pyx_k_save_model, sizeof(__pyx_k_save_model), 0, 0, 1, 1},
+    {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
+    {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
     {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_infra_TextFeatureExt, __pyx_k_src_wrapper_infra_TextFeatureExt, sizeof(__pyx_k_src_wrapper_infra_TextFeatureExt), 0, 0, 1, 0},
+    {&__pyx_kp_s_src_wrapper_core_Vectorizer_pyx, __pyx_k_src_wrapper_core_Vectorizer_pyx, sizeof(__pyx_k_src_wrapper_core_Vectorizer_pyx), 0, 0, 1, 0},
+    {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
-    {&__pyx_n_s_text_features, __pyx_k_text_features, sizeof(__pyx_k_text_features), 0, 0, 1, 1},
-    {&__pyx_n_s_traceback, __pyx_k_traceback, sizeof(__pyx_k_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_util, __pyx_k_util, sizeof(__pyx_k_util), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_infra_TextFeatureExtract, __pyx_k_wrapper_infra_TextFeatureExtract, sizeof(__pyx_k_wrapper_infra_TextFeatureExtract), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_core_Vectorizer, __pyx_k_wrapper_core_Vectorizer, sizeof(__pyx_k_wrapper_core_Vectorizer), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 15, __pyx_L1_error)
   return 0;
-  __pyx_L1_error:;
-  return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":6
- * # dir = '/app/background_tasks/server/media/models/'
- * # dir = ''
- * def extract_text_features(text, basepath, model_name='bert-base-multilingual-uncased'):             # <<<<<<<<<<<<<<
- *     # Carregar o modelo pr-treinado
- *     # model_name = 'distiluse-base-multilingual-cased-v2'
+  /* "wrapper/core/Vectorizer.pyx":9
+ *     model = None
+ * 
+ *     def __init__(self, path, corpus_name) -> None:             # <<<<<<<<<<<<<<
+ *         self.corpus_name = corpus_name
+ *         self.path = path
  */
-  __pyx_tuple__3 = PyTuple_Pack(6, __pyx_n_s_text, __pyx_n_s_basepath, __pyx_n_s_model_name, __pyx_n_s_path, __pyx_n_s_semantic_model, __pyx_n_s_text_features); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_tuple__3 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_path, __pyx_n_s_corpus_name); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__3);
   __Pyx_GIVEREF(__pyx_tuple__3);
-  __pyx_codeobj__4 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__3, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_TextFeatureExt, __pyx_n_s_extract_text_features, 6, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__4)) __PYX_ERR(0, 6, __pyx_L1_error)
-  __pyx_tuple__5 = PyTuple_Pack(1, ((PyObject*)__pyx_kp_u_bert_base_multilingual_uncased)); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_codeobj__4 = (PyObject*)__Pyx_PyCode_New(3, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__3, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Vectorizer_pyx, __pyx_n_s_init, 9, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__4)) __PYX_ERR(0, 9, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":14
+ *         self.model_filename = os.path.join(path, corpus_name)
+ * 
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         pass
+ * 
+ */
+  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_file); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 14, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
+  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Vectorizer_pyx, __pyx_n_s_encode, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 14, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":17
+ *         pass
+ * 
+ *     def load_model(self):             # <<<<<<<<<<<<<<
+ *         if os.path.exists(self.model_filename):
+ *             self.model = joblib.load(self.model_filename)
+ */
+  __pyx_tuple__7 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__7);
+  __Pyx_GIVEREF(__pyx_tuple__7);
+  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Vectorizer_pyx, __pyx_n_s_load_model, 17, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 17, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":21
+ *             self.model = joblib.load(self.model_filename)
+ * 
+ *     def save_model(self, model):             # <<<<<<<<<<<<<<
+ *         self.model = model
+ *         joblib.dump(self.model, self.model_filename)
+ */
+  __pyx_tuple__9 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_model); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 21, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__9);
+  __Pyx_GIVEREF(__pyx_tuple__9);
+  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_Vectorizer_pyx, __pyx_n_s_save_model, 21, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 21, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
-  if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 2, __pyx_L1_error);
+  if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -2842,31 +3217,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_TextFeatureExtractor(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_Vectorizer(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_TextFeatureExtractor},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_Vectorizer},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "TextFeatureExtractor",
+      "Vectorizer",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -2906,19 +3281,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initTextFeatureExtractor(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initTextFeatureExtractor(void)
+__Pyx_PyMODINIT_FUNC initVectorizer(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initVectorizer(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_TextFeatureExtractor(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_TextFeatureExtractor(void)
+__Pyx_PyMODINIT_FUNC PyInit_Vectorizer(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_Vectorizer(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -2991,228 +3366,309 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_TextFeatureExtractor(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_Vectorizer(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'TextFeatureExtractor' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'Vectorizer' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("TextFeatureExtractor", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
-  if (unlikely(!__pyx_m)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_m = Py_InitModule4("Vectorizer", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
-  __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to TextFeatureExtractor pseudovariable */
-    if (unlikely((add_module_result < 0))) __PYX_ERR(0, 2, __pyx_L1_error)
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to Vectorizer pseudovariable */
+    if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
-  if (unlikely(!__pyx_m)) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #endif
   CYTHON_UNUSED_VAR(__pyx_t_1);
-  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
   Py_INCREF(__pyx_d);
-  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
   Py_INCREF(__pyx_b);
-  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
   Py_INCREF(__pyx_cython_runtime);
-  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if CYTHON_REFNANNY
 __Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_TextFeatureExtractor(void)", 0);
-  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_Vectorizer(void)", 0);
+  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
-  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 2, __pyx_L1_error)
-  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pyx_CyFunction_USED
-  if (__pyx_CyFunction_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_CyFunction_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #ifdef __Pyx_FusedFunction_USED
-  if (__pyx_FusedFunction_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_FusedFunction_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #ifdef __Pyx_Coroutine_USED
-  if (__pyx_Coroutine_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_Coroutine_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #ifdef __Pyx_Generator_USED
-  if (__pyx_Generator_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_Generator_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #ifdef __Pyx_AsyncGen_USED
-  if (__pyx_AsyncGen_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_AsyncGen_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   #ifdef __Pyx_StopAsyncIteration_USED
-  if (__pyx_StopAsyncIteration_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_StopAsyncIteration_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
   /*--- Library function declarations ---*/
   /*--- Threads initialization code ---*/
   #if defined(WITH_THREAD) && PY_VERSION_HEX < 0x030700F0 && defined(__PYX_FORCE_INIT_THREADS) && __PYX_FORCE_INIT_THREADS
   PyEval_InitThreads();
   #endif
   /*--- Initialize various global constants etc. ---*/
-  if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
-  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
-  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__infra__TextFeatureExtractor) {
-    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__pyx_module_is_main_wrapper__core__Vectorizer) {
+    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
-    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 2, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.infra.TextFeatureExtractor")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.TextFeatureExtractor", __pyx_m) < 0))) __PYX_ERR(0, 2, __pyx_L1_error)
+    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.core.Vectorizer")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.core.Vectorizer", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
-  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
-  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Global type/function init code ---*/
   (void)__Pyx_modinit_global_init_code();
   (void)__Pyx_modinit_variable_export_code();
   (void)__Pyx_modinit_function_export_code();
   (void)__Pyx_modinit_type_init_code();
   (void)__Pyx_modinit_type_import_code();
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
-  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":2
+  /* "wrapper/core/Vectorizer.pyx":1
+ * from .File import File             # <<<<<<<<<<<<<<
+ * import joblib
+ * import os
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_File);
+  __Pyx_GIVEREF(__pyx_n_s_File);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_File);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_File, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_File); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/core/Vectorizer.pyx":2
+ * from .File import File
+ * import joblib             # <<<<<<<<<<<<<<
+ * import os
+ * 
+ */
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_joblib, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_joblib, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/core/Vectorizer.pyx":3
+ * from .File import File
+ * import joblib
+ * import os             # <<<<<<<<<<<<<<
+ * 
+ * # informal interface
+ */
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_os, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_os, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/core/Vectorizer.pyx":6
+ * 
+ * # informal interface
+ * class Vectorizer():             # <<<<<<<<<<<<<<
+ *     model = None
+ * 
+ */
+  __pyx_t_3 = __Pyx_Py3MetaclassPrepare((PyObject *) NULL, __pyx_empty_tuple, __pyx_n_s_Vectorizer, __pyx_n_s_Vectorizer, (PyObject *) NULL, __pyx_n_s_wrapper_core_Vectorizer, (PyObject *) NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+
+  /* "wrapper/core/Vectorizer.pyx":7
+ * # informal interface
+ * class Vectorizer():
+ *     model = None             # <<<<<<<<<<<<<<
+ * 
+ *     def __init__(self, path, corpus_name) -> None:
+ */
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_model, Py_None) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":9
+ *     model = None
  * 
- * import traceback             # <<<<<<<<<<<<<<
- * from sentence_transformers import SentenceTransformer, util
- * # dir = '/app/background_tasks/server/media/models/'
+ *     def __init__(self, path, corpus_name) -> None:             # <<<<<<<<<<<<<<
+ *         self.corpus_name = corpus_name
+ *         self.path = path
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_traceback, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_traceback, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_return, __pyx_n_s_None) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_1__init__, 0, __pyx_n_s_Vectorizer___init, NULL, __pyx_n_s_wrapper_core_Vectorizer, __pyx_d, ((PyObject *)__pyx_codeobj__4)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_4, __pyx_t_2);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_init, __pyx_t_4) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":3
+  /* "wrapper/core/Vectorizer.pyx":14
+ *         self.model_filename = os.path.join(path, corpus_name)
+ * 
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         pass
  * 
- * import traceback
- * from sentence_transformers import SentenceTransformer, util             # <<<<<<<<<<<<<<
- * # dir = '/app/background_tasks/server/media/models/'
- * # dir = ''
  */
-  __pyx_t_2 = PyList_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 14, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_file, __pyx_n_s_File) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_3encode, 0, __pyx_n_s_Vectorizer_encode, NULL, __pyx_n_s_wrapper_core_Vectorizer, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 14, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_SentenceTransformer);
-  __Pyx_GIVEREF(__pyx_n_s_SentenceTransformer);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_SentenceTransformer);
-  __Pyx_INCREF(__pyx_n_s_util);
-  __Pyx_GIVEREF(__pyx_n_s_util);
-  PyList_SET_ITEM(__pyx_t_2, 1, __pyx_n_s_util);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sentence_transformers, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_4);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_encode, __pyx_t_2) < 0) __PYX_ERR(0, 14, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":17
+ *         pass
+ * 
+ *     def load_model(self):             # <<<<<<<<<<<<<<
+ *         if os.path.exists(self.model_filename):
+ *             self.model = joblib.load(self.model_filename)
+ */
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_5load_model, 0, __pyx_n_s_Vectorizer_load_model, NULL, __pyx_n_s_wrapper_core_Vectorizer, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 17, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SentenceTransformer, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_load_model, __pyx_t_2) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_util); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+
+  /* "wrapper/core/Vectorizer.pyx":21
+ *             self.model = joblib.load(self.model_filename)
+ * 
+ *     def save_model(self, model):             # <<<<<<<<<<<<<<
+ *         self.model = model
+ *         joblib.dump(self.model, self.model_filename)
+ */
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_10Vectorizer_10Vectorizer_7save_model, 0, __pyx_n_s_Vectorizer_save_model, NULL, __pyx_n_s_wrapper_core_Vectorizer, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 21, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_util, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_3, __pyx_n_s_save_model, __pyx_t_2) < 0) __PYX_ERR(0, 21, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":6
- * # dir = '/app/background_tasks/server/media/models/'
- * # dir = ''
- * def extract_text_features(text, basepath, model_name='bert-base-multilingual-uncased'):             # <<<<<<<<<<<<<<
- *     # Carregar o modelo pr-treinado
- *     # model_name = 'distiluse-base-multilingual-cased-v2'
+  /* "wrapper/core/Vectorizer.pyx":6
+ * 
+ * # informal interface
+ * class Vectorizer():             # <<<<<<<<<<<<<<
+ *     model = None
+ * 
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_20TextFeatureExtractor_1extract_text_features, 0, __pyx_n_s_extract_text_features, NULL, __pyx_n_s_wrapper_infra_TextFeatureExtract, __pyx_d, ((PyObject *)__pyx_codeobj__4)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__5);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_extract_text_features, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_Py3ClassCreate(((PyObject*)&PyType_Type), __pyx_n_s_Vectorizer, __pyx_empty_tuple, __pyx_t_3, NULL, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Vectorizer, __pyx_t_2) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/TextFeatureExtractor.pyx":2
- * 
- * import traceback             # <<<<<<<<<<<<<<
- * from sentence_transformers import SentenceTransformer, util
- * # dir = '/app/background_tasks/server/media/models/'
+  /* "wrapper/core/Vectorizer.pyx":1
+ * from .File import File             # <<<<<<<<<<<<<<
+ * import joblib
+ * import os
  */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.infra.TextFeatureExtractor", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.core.Vectorizer", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.TextFeatureExtractor");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.core.Vectorizer");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -3251,164 +3707,14 @@
 end:
     Py_XDECREF(p);
     Py_XDECREF(m);
     return (__Pyx_RefNannyAPIStruct *)r;
 }
 #endif
 
-/* PyErrExceptionMatches */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
-    Py_ssize_t i, n;
-    n = PyTuple_GET_SIZE(tuple);
-#if PY_MAJOR_VERSION >= 3
-    for (i=0; i<n; i++) {
-        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
-    }
-#endif
-    for (i=0; i<n; i++) {
-        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
-    }
-    return 0;
-}
-static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
-    int result;
-    PyObject *exc_type;
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *current_exception = tstate->current_exception;
-    if (unlikely(!current_exception)) return 0;
-    exc_type = (PyObject*) Py_TYPE(current_exception);
-    if (exc_type == err) return 1;
-#else
-    exc_type = tstate->curexc_type;
-    if (exc_type == err) return 1;
-    if (unlikely(!exc_type)) return 0;
-#endif
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_INCREF(exc_type);
-    #endif
-    if (unlikely(PyTuple_Check(err))) {
-        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
-    } else {
-        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
-    }
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_DECREF(exc_type);
-    #endif
-    return result;
-}
-#endif
-
-/* PyErrFetchRestore */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *tmp_value;
-    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
-    if (value) {
-        #if CYTHON_COMPILING_IN_CPYTHON
-        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
-        #endif
-            PyException_SetTraceback(value, tb);
-    }
-    tmp_value = tstate->current_exception;
-    tstate->current_exception = value;
-    Py_XDECREF(tmp_value);
-#else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    tmp_type = tstate->curexc_type;
-    tmp_value = tstate->curexc_value;
-    tmp_tb = tstate->curexc_traceback;
-    tstate->curexc_type = type;
-    tstate->curexc_value = value;
-    tstate->curexc_traceback = tb;
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#endif
-}
-static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject* exc_value;
-    exc_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    *value = exc_value;
-    *type = NULL;
-    *tb = NULL;
-    if (exc_value) {
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        #if CYTHON_COMPILING_IN_CPYTHON
-        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
-        Py_XINCREF(*tb);
-        #else
-        *tb = PyException_GetTraceback(exc_value);
-        #endif
-    }
-#else
-    *type = tstate->curexc_type;
-    *value = tstate->curexc_value;
-    *tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-#endif
-}
-#endif
-
-/* PyObjectGetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro))
-        return tp->tp_getattro(obj, attr_name);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_getattr))
-        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
-#endif
-    return PyObject_GetAttr(obj, attr_name);
-}
-#endif
-
-/* PyObjectGetAttrStrNoError */
-static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
-        __Pyx_PyErr_Clear();
-}
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
-    PyObject *result;
-#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
-        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
-    }
-#endif
-    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
-    if (unlikely(!result)) {
-        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
-    }
-    return result;
-}
-
-/* GetBuiltinName */
-static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
-    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
-    if (unlikely(!result) && !PyErr_Occurred()) {
-        PyErr_Format(PyExc_NameError,
-#if PY_MAJOR_VERSION >= 3
-            "name '%U' is not defined", name);
-#else
-            "name '%.200s' is not defined", PyString_AS_STRING(name));
-#endif
-    }
-    return result;
-}
-
 /* TupleAndListFromArray */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE void __Pyx_copy_object_array(PyObject *const *CYTHON_RESTRICT src, PyObject** CYTHON_RESTRICT dest, Py_ssize_t length) {
     PyObject *v;
     Py_ssize_t i;
     for (i = 0; i < length; i++) {
         v = dest[i] = src[i];
@@ -3764,14 +4070,178 @@
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
     return -1;
 }
 
+/* PyObjectSetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_setattro))
+        return tp->tp_setattro(obj, attr_name, value);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_setattr))
+        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
+#endif
+    return PyObject_SetAttr(obj, attr_name, value);
+}
+#endif
+
+/* PyErrExceptionMatches */
+#if CYTHON_FAST_THREAD_STATE
+static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
+    Py_ssize_t i, n;
+    n = PyTuple_GET_SIZE(tuple);
+#if PY_MAJOR_VERSION >= 3
+    for (i=0; i<n; i++) {
+        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
+    }
+#endif
+    for (i=0; i<n; i++) {
+        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
+    }
+    return 0;
+}
+static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
+    int result;
+    PyObject *exc_type;
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *current_exception = tstate->current_exception;
+    if (unlikely(!current_exception)) return 0;
+    exc_type = (PyObject*) Py_TYPE(current_exception);
+    if (exc_type == err) return 1;
+#else
+    exc_type = tstate->curexc_type;
+    if (exc_type == err) return 1;
+    if (unlikely(!exc_type)) return 0;
+#endif
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_INCREF(exc_type);
+    #endif
+    if (unlikely(PyTuple_Check(err))) {
+        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
+    } else {
+        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
+    }
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_DECREF(exc_type);
+    #endif
+    return result;
+}
+#endif
+
+/* PyErrFetchRestore */
+#if CYTHON_FAST_THREAD_STATE
+static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *tmp_value;
+    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
+    if (value) {
+        #if CYTHON_COMPILING_IN_CPYTHON
+        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
+        #endif
+            PyException_SetTraceback(value, tb);
+    }
+    tmp_value = tstate->current_exception;
+    tstate->current_exception = value;
+    Py_XDECREF(tmp_value);
+#else
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+    tmp_type = tstate->curexc_type;
+    tmp_value = tstate->curexc_value;
+    tmp_tb = tstate->curexc_traceback;
+    tstate->curexc_type = type;
+    tstate->curexc_value = value;
+    tstate->curexc_traceback = tb;
+    Py_XDECREF(tmp_type);
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(tmp_tb);
+#endif
+}
+static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject* exc_value;
+    exc_value = tstate->current_exception;
+    tstate->current_exception = 0;
+    *value = exc_value;
+    *type = NULL;
+    *tb = NULL;
+    if (exc_value) {
+        *type = (PyObject*) Py_TYPE(exc_value);
+        Py_INCREF(*type);
+        #if CYTHON_COMPILING_IN_CPYTHON
+        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
+        Py_XINCREF(*tb);
+        #else
+        *tb = PyException_GetTraceback(exc_value);
+        #endif
+    }
+#else
+    *type = tstate->curexc_type;
+    *value = tstate->curexc_value;
+    *tb = tstate->curexc_traceback;
+    tstate->curexc_type = 0;
+    tstate->curexc_value = 0;
+    tstate->curexc_traceback = 0;
+#endif
+}
+#endif
+
+/* PyObjectGetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro))
+        return tp->tp_getattro(obj, attr_name);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_getattr))
+        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
+#endif
+    return PyObject_GetAttr(obj, attr_name);
+}
+#endif
+
+/* PyObjectGetAttrStrNoError */
+static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
+        __Pyx_PyErr_Clear();
+}
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
+    PyObject *result;
+#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
+        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
+    }
+#endif
+    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
+    if (unlikely(!result)) {
+        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
+    }
+    return result;
+}
+
+/* GetBuiltinName */
+static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
+    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
+    if (unlikely(!result) && !PyErr_Occurred()) {
+        PyErr_Format(PyExc_NameError,
+#if PY_MAJOR_VERSION >= 3
+            "name '%U' is not defined", name);
+#else
+            "name '%.200s' is not defined", PyString_AS_STRING(name));
+#endif
+    }
+    return result;
+}
+
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -4067,292 +4537,14 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* GetTopmostException */
-#if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
-static _PyErr_StackItem *
-__Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
-{
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    while ((exc_info->exc_value == NULL || exc_info->exc_value == Py_None) &&
-           exc_info->previous_item != NULL)
-    {
-        exc_info = exc_info->previous_item;
-    }
-    return exc_info;
-}
-#endif
-
-/* SaveResetException */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    PyObject *exc_value = exc_info->exc_value;
-    if (exc_value == NULL || exc_value == Py_None) {
-        *value = NULL;
-        *type = NULL;
-        *tb = NULL;
-    } else {
-        *value = exc_value;
-        Py_INCREF(*value);
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        *tb = PyException_GetTraceback(exc_value);
-    }
-  #elif CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
-    *type = exc_info->exc_type;
-    *value = exc_info->exc_value;
-    *tb = exc_info->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #else
-    *type = tstate->exc_type;
-    *value = tstate->exc_value;
-    *tb = tstate->exc_traceback;
-    Py_XINCREF(*type);
-    Py_XINCREF(*value);
-    Py_XINCREF(*tb);
-  #endif
-}
-static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-  #if CYTHON_USE_EXC_INFO_STACK && PY_VERSION_HEX >= 0x030B00a4
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    PyObject *tmp_value = exc_info->exc_value;
-    exc_info->exc_value = value;
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(type);
-    Py_XDECREF(tb);
-  #else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    #if CYTHON_USE_EXC_INFO_STACK
-    _PyErr_StackItem *exc_info = tstate->exc_info;
-    tmp_type = exc_info->exc_type;
-    tmp_value = exc_info->exc_value;
-    tmp_tb = exc_info->exc_traceback;
-    exc_info->exc_type = type;
-    exc_info->exc_value = value;
-    exc_info->exc_traceback = tb;
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = type;
-    tstate->exc_value = value;
-    tstate->exc_traceback = tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-  #endif
-}
-#endif
-
-/* GetException */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb)
-#else
-static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb)
-#endif
-{
-    PyObject *local_type = NULL, *local_value, *local_tb = NULL;
-#if CYTHON_FAST_THREAD_STATE
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-  #if PY_VERSION_HEX >= 0x030C00A6
-    local_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    if (likely(local_value)) {
-        local_type = (PyObject*) Py_TYPE(local_value);
-        Py_INCREF(local_type);
-        local_tb = PyException_GetTraceback(local_value);
-    }
-  #else
-    local_type = tstate->curexc_type;
-    local_value = tstate->curexc_value;
-    local_tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-  #endif
-#else
-    PyErr_Fetch(&local_type, &local_value, &local_tb);
-#endif
-    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
-#if CYTHON_FAST_THREAD_STATE && PY_VERSION_HEX >= 0x030C00A6
-    if (unlikely(tstate->current_exception))
-#elif CYTHON_FAST_THREAD_STATE
-    if (unlikely(tstate->curexc_type))
-#else
-    if (unlikely(PyErr_Occurred()))
-#endif
-        goto bad;
-    #if PY_MAJOR_VERSION >= 3
-    if (local_tb) {
-        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
-            goto bad;
-    }
-    #endif
-    Py_XINCREF(local_tb);
-    Py_XINCREF(local_type);
-    Py_XINCREF(local_value);
-    *type = local_type;
-    *value = local_value;
-    *tb = local_tb;
-#if CYTHON_FAST_THREAD_STATE
-    #if CYTHON_USE_EXC_INFO_STACK
-    {
-        _PyErr_StackItem *exc_info = tstate->exc_info;
-      #if PY_VERSION_HEX >= 0x030B00a4
-        tmp_value = exc_info->exc_value;
-        exc_info->exc_value = local_value;
-        tmp_type = NULL;
-        tmp_tb = NULL;
-        Py_XDECREF(local_type);
-        Py_XDECREF(local_tb);
-      #else
-        tmp_type = exc_info->exc_type;
-        tmp_value = exc_info->exc_value;
-        tmp_tb = exc_info->exc_traceback;
-        exc_info->exc_type = local_type;
-        exc_info->exc_value = local_value;
-        exc_info->exc_traceback = local_tb;
-      #endif
-    }
-    #else
-    tmp_type = tstate->exc_type;
-    tmp_value = tstate->exc_value;
-    tmp_tb = tstate->exc_traceback;
-    tstate->exc_type = local_type;
-    tstate->exc_value = local_value;
-    tstate->exc_traceback = local_tb;
-    #endif
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#else
-    PyErr_SetExcInfo(local_type, local_value, local_tb);
-#endif
-    return 0;
-bad:
-    *type = 0;
-    *value = 0;
-    *tb = 0;
-    Py_XDECREF(local_type);
-    Py_XDECREF(local_value);
-    Py_XDECREF(local_tb);
-    return -1;
-}
-
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* GetItemInt */
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
-    PyObject *r;
-    if (unlikely(!j)) return NULL;
-    r = PyObject_GetItem(o, j);
-    Py_DECREF(j);
-    return r;
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyList_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
-        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyTuple_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
-        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
-                                                     CYTHON_NCP_UNUSED int wraparound,
-                                                     CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
-    if (is_list || PyList_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
-        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
-            PyObject *r = PyList_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    }
-    else if (PyTuple_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
-        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
-            PyObject *r = PyTuple_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    } else {
-        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
-        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
-        if (mm && mm->mp_subscript) {
-            PyObject *r, *key = PyInt_FromSsize_t(i);
-            if (unlikely(!key)) return NULL;
-            r = mm->mp_subscript(o, key);
-            Py_DECREF(key);
-            return r;
-        }
-        if (likely(sm && sm->sq_item)) {
-            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
-                Py_ssize_t l = sm->sq_length(o);
-                if (likely(l >= 0)) {
-                    i += l;
-                } else {
-                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                        return NULL;
-                    PyErr_Clear();
-                }
-            }
-            return sm->sq_item(o, i);
-        }
-    }
-#else
-    if (is_list || PySequence_Check(o)) {
-        return PySequence_GetItem(o, i);
-    }
-#endif
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-}
-
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
     PyObject *py_import;
@@ -4413,14 +4605,57 @@
     Py_XDECREF(empty_list);
     #if PY_MAJOR_VERSION < 3
     Py_XDECREF(py_import);
     #endif
     return module;
 }
 
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
 /* ImportDottedModule */
 #if PY_MAJOR_VERSION >= 3
 static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
     PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
     if (unlikely(PyErr_Occurred())) {
         PyErr_Clear();
     }
@@ -4491,15 +4726,15 @@
         return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
     }
     return module;
 }
 #endif
 static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
 #if PY_MAJOR_VERSION < 3
-    PyObject *module, *from_list, *star = __pyx_n_s_;
+    PyObject *module, *from_list, *star = __pyx_n_s__2;
     CYTHON_UNUSED_VAR(parts_tuple);
     from_list = PyList_New(1);
     if (unlikely(!from_list))
         return NULL;
     Py_INCREF(star);
     PyList_SET_ITEM(from_list, 0, star);
     module = __Pyx_Import(name, from_list, 0);
@@ -4541,57 +4776,14 @@
     } else if (PyErr_Occurred()) {
         PyErr_Clear();
     }
 #endif
     return __Pyx__ImportDottedModule(name, parts_tuple);
 }
 
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__2);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
-        }
-        #else
-        value = PyImport_GetModule(full_name);
-        #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
-    }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
-        #else
-            "cannot import name %S", name);
-        #endif
-    }
-    return value;
-}
-
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
     CYTHON_UNUSED_VAR(type);
 #else
@@ -5706,14 +5898,290 @@
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
+/* CalculateMetaclass */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
+    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
+    for (i=0; i < nbases; i++) {
+        PyTypeObject *tmptype;
+        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
+        tmptype = Py_TYPE(tmp);
+#if PY_MAJOR_VERSION < 3
+        if (tmptype == &PyClass_Type)
+            continue;
+#endif
+        if (!metaclass) {
+            metaclass = tmptype;
+            continue;
+        }
+        if (PyType_IsSubtype(metaclass, tmptype))
+            continue;
+        if (PyType_IsSubtype(tmptype, metaclass)) {
+            metaclass = tmptype;
+            continue;
+        }
+        PyErr_SetString(PyExc_TypeError,
+                        "metaclass conflict: "
+                        "the metaclass of a derived class "
+                        "must be a (non-strict) subclass "
+                        "of the metaclasses of all its bases");
+        return NULL;
+    }
+    if (!metaclass) {
+#if PY_MAJOR_VERSION < 3
+        metaclass = &PyClass_Type;
+#else
+        metaclass = &PyType_Type;
+#endif
+    }
+    Py_INCREF((PyObject*) metaclass);
+    return (PyObject*) metaclass;
+}
+
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* PyObjectLookupSpecial */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error) {
+    PyObject *res;
+    PyTypeObject *tp = Py_TYPE(obj);
+#if PY_MAJOR_VERSION < 3
+    if (unlikely(PyInstance_Check(obj)))
+        return with_error ? __Pyx_PyObject_GetAttrStr(obj, attr_name) : __Pyx_PyObject_GetAttrStrNoError(obj, attr_name);
+#endif
+    res = _PyType_Lookup(tp, attr_name);
+    if (likely(res)) {
+        descrgetfunc f = Py_TYPE(res)->tp_descr_get;
+        if (!f) {
+            Py_INCREF(res);
+        } else {
+            res = f(res, obj, (PyObject *)tp);
+        }
+    } else if (with_error) {
+        PyErr_SetObject(PyExc_AttributeError, attr_name);
+    }
+    return res;
+}
+#endif
+
+/* Py3ClassCreate */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
+                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
+    PyObject *ns;
+    if (metaclass) {
+        PyObject *prep = __Pyx_PyObject_GetAttrStrNoError(metaclass, __pyx_n_s_prepare);
+        if (prep) {
+            PyObject *pargs[3] = {NULL, name, bases};
+            ns = __Pyx_PyObject_FastCallDict(prep, pargs+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET, mkw);
+            Py_DECREF(prep);
+        } else {
+            if (unlikely(PyErr_Occurred()))
+                return NULL;
+            ns = PyDict_New();
+        }
+    } else {
+        ns = PyDict_New();
+    }
+    if (unlikely(!ns))
+        return NULL;
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
+#if PY_VERSION_HEX >= 0x03030000
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
+#else
+    CYTHON_MAYBE_UNUSED_VAR(qualname);
+#endif
+    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
+    return ns;
+bad:
+    Py_DECREF(ns);
+    return NULL;
+}
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+static int __Pyx_SetNamesPEP487(PyObject *type_obj) {
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *names_to_set, *key, *value, *set_name, *tmp;
+    Py_ssize_t i = 0;
+#if CYTHON_USE_TYPE_SLOTS
+    names_to_set = PyDict_Copy(type->tp_dict);
+#else
+    {
+        PyObject *d = PyObject_GetAttr(type_obj, __pyx_n_s_dict);
+        names_to_set = NULL;
+        if (likely(d)) {
+            PyObject *names_to_set = PyDict_New();
+            int ret = likely(names_to_set) ? PyDict_Update(names_to_set, d) : -1;
+            Py_DECREF(d);
+            if (unlikely(ret < 0))
+                Py_CLEAR(names_to_set);
+        }
+    }
+#endif
+    if (unlikely(names_to_set == NULL))
+        goto bad;
+    while (PyDict_Next(names_to_set, &i, &key, &value)) {
+        set_name = __Pyx_PyObject_LookupSpecialNoError(value, __pyx_n_s_set_name);
+        if (unlikely(set_name != NULL)) {
+            tmp = __Pyx_PyObject_Call2Args(set_name, type_obj, key);
+            Py_DECREF(set_name);
+            if (unlikely(tmp == NULL)) {
+                __Pyx_TypeName value_type_name =
+                    __Pyx_PyType_GetName(Py_TYPE(value));
+                __Pyx_TypeName type_name = __Pyx_PyType_GetName(type);
+                PyErr_Format(PyExc_RuntimeError,
+#if PY_MAJOR_VERSION >= 3
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %R " "in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name, key, type_name);
+#else
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %.100s in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name,
+                    PyString_Check(key) ? PyString_AS_STRING(key) : "?",
+                    type_name);
+#endif
+                goto bad;
+            } else {
+                Py_DECREF(tmp);
+            }
+        }
+        else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+    Py_DECREF(names_to_set);
+    return 0;
+bad:
+    Py_XDECREF(names_to_set);
+    return -1;
+}
+static PyObject *__Pyx_InitSubclassPEP487(PyObject *type_obj, PyObject *mkw) {
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *mro = type->tp_mro;
+    Py_ssize_t i, nbases;
+    if (unlikely(!mro)) goto done;
+    (void) &__Pyx_GetBuiltinName;
+    Py_INCREF(mro);
+    nbases = PyTuple_GET_SIZE(mro);
+    assert(PyTuple_GET_ITEM(mro, 0) == type_obj);
+    for (i = 1; i < nbases-1; i++) {
+        PyObject *base, *dict, *meth;
+        base = PyTuple_GET_ITEM(mro, i);
+        dict = ((PyTypeObject *)base)->tp_dict;
+        meth = __Pyx_PyDict_GetItemStrWithError(dict, __pyx_n_s_init_subclass);
+        if (unlikely(meth)) {
+            descrgetfunc f = Py_TYPE(meth)->tp_descr_get;
+            PyObject *res;
+            Py_INCREF(meth);
+            if (likely(f)) {
+                res = f(meth, NULL, type_obj);
+                Py_DECREF(meth);
+                if (unlikely(!res)) goto bad;
+                meth = res;
+            }
+            res = __Pyx_PyObject_FastCallDict(meth, NULL, 0, mkw);
+            Py_DECREF(meth);
+            if (unlikely(!res)) goto bad;
+            Py_DECREF(res);
+            goto done;
+        } else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+done:
+    Py_XDECREF(mro);
+    return type_obj;
+bad:
+    Py_XDECREF(mro);
+    Py_DECREF(type_obj);
+    return NULL;
+#else
+    PyObject *super_type, *super, *func, *res;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    super_type = __Pyx_GetBuiltinName(__pyx_n_s_super);
+#else
+    super_type = (PyObject*) &PySuper_Type;
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    super = likely(super_type) ? __Pyx_PyObject_Call2Args(super_type, type_obj, type_obj) : NULL;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    Py_XDECREF(super_type);
+#endif
+    if (unlikely(!super)) {
+        Py_CLEAR(type_obj);
+        goto done;
+    }
+    func = __Pyx_PyObject_GetAttrStrNoError(super, __pyx_n_s_init_subclass);
+    Py_DECREF(super);
+    if (likely(!func)) {
+        if (unlikely(PyErr_Occurred()))
+            Py_CLEAR(type_obj);
+        goto done;
+    }
+    res = __Pyx_PyObject_FastCallDict(func, NULL, 0, mkw);
+    Py_DECREF(func);
+    if (unlikely(!res))
+        Py_CLEAR(type_obj);
+    Py_XDECREF(res);
+done:
+    return type_obj;
+#endif
+}
+#endif
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
+                                      PyObject *dict, PyObject *mkw,
+                                      int calculate_metaclass, int allow_py2_metaclass) {
+    PyObject *result;
+    PyObject *owned_metaclass = NULL;
+    PyObject *margs[4] = {NULL, name, bases, dict};
+    if (allow_py2_metaclass) {
+        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
+        if (owned_metaclass) {
+            metaclass = owned_metaclass;
+        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
+            PyErr_Clear();
+        } else {
+            return NULL;
+        }
+    }
+    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
+        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
+        Py_XDECREF(owned_metaclass);
+        if (unlikely(!metaclass))
+            return NULL;
+        owned_metaclass = metaclass;
+    }
+    result = __Pyx_PyObject_FastCallDict(metaclass, margs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET,
+#if PY_VERSION_HEX < 0x030600A4
+        (metaclass == (PyObject*)&PyType_Type) ? NULL : mkw
+#else
+        mkw
+#endif
+    );
+    Py_XDECREF(owned_metaclass);
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+    if (likely(result) && likely(PyType_Check(result))) {
+        if (unlikely(__Pyx_SetNamesPEP487(result) < 0)) {
+            Py_CLEAR(result);
+        } else {
+            result = __Pyx_InitSubclassPEP487(result, mkw);
+        }
+    }
+#else
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    return result;
+}
+
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
     PyObject **cython_runtime_dict;
@@ -5950,14 +6418,29 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__11));
+    }
+    return name;
+}
+#endif
+
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -5988,29 +6471,14 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__6));
-    }
-    return name;
-}
-#endif
-
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
```

### Comparing `docrx-0.0.11/src/wrapper/infra/VideoObjectsExtractor.c` & `docrx-0.0.110/src/wrapper/core/SentenceTransformerVectorizer.c`

 * *Files 11% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "wrapper.infra.VideoObjectsExtractor",
+        "name": "wrapper.core.SentenceTransformerVectorizer",
         "sources": [
-            "src/wrapper/infra/VideoObjectsExtractor.pyx"
+            "src/wrapper/core/SentenceTransformerVectorizer.pyx"
         ]
     },
-    "module_name": "wrapper.infra.VideoObjectsExtractor"
+    "module_name": "wrapper.core.SentenceTransformerVectorizer"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__wrapper__infra__VideoObjectsExtractor
-#define __PYX_HAVE_API__wrapper__infra__VideoObjectsExtractor
+#define __PYX_HAVE__wrapper__core__SentenceTransformerVectorizer
+#define __PYX_HAVE_API__wrapper__core__SentenceTransformerVectorizer
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,22 +1346,32 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "src/wrapper/infra/VideoObjectsExtractor.pyx",
+  "src/wrapper/core/SentenceTransformerVectorizer.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
+struct __pyx_defaults;
+typedef struct __pyx_defaults __pyx_defaults;
+struct __pyx_defaults1;
+typedef struct __pyx_defaults1 __pyx_defaults1;
+struct __pyx_defaults {
+  PyObject *__pyx_arg_vect_lang;
+};
+struct __pyx_defaults1 {
+  PyObject *__pyx_arg_vect_lang;
+};
 /* #### Code section: utility_code_proto ### */
 
 /* --- Runtime support code (head) --- */
 /* Refnanny.proto */
 #ifndef CYTHON_REFNANNY
   #define CYTHON_REFNANNY 0
 #endif
@@ -1542,27 +1552,27 @@
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
 #else
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #endif
 
+/* RaiseArgTupleInvalid.proto */
+static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
+    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
+
 /* RaiseDoubleKeywords.proto */
 static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
 
 /* ParseKeywords.proto */
 static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
     PyObject **argnames[],
     PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
     const char* function_name);
 
-/* RaiseArgTupleInvalid.proto */
-static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
-    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
-
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1602,14 +1612,21 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
+#else
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
+#endif
+
 /* PyFunctionFastCall.proto */
 #if CYTHON_FAST_PYCALL
 #if !CYTHON_VECTORCALL
 #define __Pyx_PyFunction_FastCall(func, args, nargs)\
     __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
 static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
 #endif
@@ -1637,268 +1654,80 @@
      (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
   #define __Pyx_PyFrame_GetLocalsplus(frame)\
     (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
 #endif
 #endif
 #endif
 
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
-
 /* PyObjectCallMethO.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* RaiseTooManyValuesToUnpack.proto */
-static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);
-
-/* RaiseNeedMoreValuesToUnpack.proto */
-static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);
-
-/* IterFinish.proto */
-static CYTHON_INLINE int __Pyx_IterFinish(void);
-
-/* UnpackItemEndCheck.proto */
-static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);
-
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
-
-/* SliceObject.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
-        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
-        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
-        int has_cstart, int has_cstop, int wraparound);
-
-/* GetItemInt.proto */
-#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
-    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
-               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
-#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
-    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
-    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
-    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              int wraparound, int boundscheck);
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
-                                                     int is_list, int wraparound, int boundscheck);
-
-/* ObjectGetItem.proto */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key);
-#else
-#define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
-#endif
-
-/* PyIntBinop.proto */
-#if !CYTHON_COMPILING_IN_PYPY
-static PyObject* __Pyx_PyInt_TrueDivideObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check);
-#else
-#define __Pyx_PyInt_TrueDivideObjC(op1, op2, intval, inplace, zerodivision_check)\
-    (inplace ? PyNumber_InPlaceTrueDivide(op1, op2) : PyNumber_TrueDivide(op1, op2))
+/* PyObjectFormatSimple.proto */
+#if CYTHON_COMPILING_IN_PYPY
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#elif PY_MAJOR_VERSION < 3
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
+        PyObject_Format(s, f))
+#elif CYTHON_USE_TYPE_SLOTS
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
+        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
+        PyObject_Format(s, f))
+#else
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
 #endif
 
-/* ListAppend.proto */
-#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
-static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
-    PyListObject* L = (PyListObject*) list;
-    Py_ssize_t len = Py_SIZE(list);
-    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
-        Py_INCREF(x);
-        PyList_SET_ITEM(list, len, x);
-        __Pyx_SET_SIZE(list, len + 1);
-        return 0;
-    }
-    return PyList_Append(list, x);
-}
+/* PyObjectSetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
 #else
-#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
+#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
+#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
 #endif
 
-/* pybytes_as_double.proto */
-static double __Pyx_SlowPyString_AsDouble(PyObject *obj);
-static double __Pyx__PyBytes_AsDouble(PyObject *obj, const char* start, Py_ssize_t length);
-static CYTHON_INLINE double __Pyx_PyBytes_AsDouble(PyObject *obj) {
-    return __Pyx__PyBytes_AsDouble(obj, PyBytes_AS_STRING(obj), PyBytes_GET_SIZE(obj));
-}
-static CYTHON_INLINE double __Pyx_PyByteArray_AsDouble(PyObject *obj) {
-    return __Pyx__PyBytes_AsDouble(obj, PyByteArray_AS_STRING(obj), PyByteArray_GET_SIZE(obj));
-}
-
-/* pyunicode_as_double.proto */
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-static const char* __Pyx__PyUnicode_AsDouble_Copy(const void* data, const int kind, char* buffer, Py_ssize_t start, Py_ssize_t end) {
-    int last_was_punctuation;
-    Py_ssize_t i;
-    last_was_punctuation = 1;
-    for (i=start; i <= end; i++) {
-        Py_UCS4 chr = PyUnicode_READ(kind, data, i);
-        int is_punctuation = (chr == '_') | (chr == '.');
-        *buffer = (char)chr;
-        buffer += (chr != '_');
-        if (unlikely(chr > 127)) goto parse_failure;
-        if (unlikely(last_was_punctuation & is_punctuation)) goto parse_failure;
-        last_was_punctuation = is_punctuation;
-    }
-    if (unlikely(last_was_punctuation)) goto parse_failure;
-    *buffer = '\0';
-    return buffer;
-parse_failure:
-    return NULL;
-}
-static double __Pyx__PyUnicode_AsDouble_inf_nan(const void* data, int kind, Py_ssize_t start, Py_ssize_t length) {
-    int matches = 1;
-    Py_UCS4 chr;
-    Py_UCS4 sign = PyUnicode_READ(kind, data, start);
-    int is_signed = (sign == '-') | (sign == '+');
-    start += is_signed;
-    length -= is_signed;
-    switch (PyUnicode_READ(kind, data, start)) {
-        #ifdef Py_NAN
-        case 'n':
-        case 'N':
-            if (unlikely(length != 3)) goto parse_failure;
-            chr = PyUnicode_READ(kind, data, start+1);
-            matches &= (chr == 'a') | (chr == 'A');
-            chr = PyUnicode_READ(kind, data, start+2);
-            matches &= (chr == 'n') | (chr == 'N');
-            if (unlikely(!matches)) goto parse_failure;
-            return (sign == '-') ? -Py_NAN : Py_NAN;
-        #endif
-        case 'i':
-        case 'I':
-            if (unlikely(length < 3)) goto parse_failure;
-            chr = PyUnicode_READ(kind, data, start+1);
-            matches &= (chr == 'n') | (chr == 'N');
-            chr = PyUnicode_READ(kind, data, start+2);
-            matches &= (chr == 'f') | (chr == 'F');
-            if (likely(length == 3 && matches))
-                return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
-            if (unlikely(length != 8)) goto parse_failure;
-            chr = PyUnicode_READ(kind, data, start+3);
-            matches &= (chr == 'i') | (chr == 'I');
-            chr = PyUnicode_READ(kind, data, start+4);
-            matches &= (chr == 'n') | (chr == 'N');
-            chr = PyUnicode_READ(kind, data, start+5);
-            matches &= (chr == 'i') | (chr == 'I');
-            chr = PyUnicode_READ(kind, data, start+6);
-            matches &= (chr == 't') | (chr == 'T');
-            chr = PyUnicode_READ(kind, data, start+7);
-            matches &= (chr == 'y') | (chr == 'Y');
-            if (unlikely(!matches)) goto parse_failure;
-            return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
-        case '.': case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
-            break;
-        default:
-            goto parse_failure;
-    }
-    return 0.0;
-parse_failure:
-    return -1.0;
-}
-static double __Pyx_PyUnicode_AsDouble_WithSpaces(PyObject *obj) {
-    double value;
-    const char *last;
-    char *end;
-    Py_ssize_t start, length = PyUnicode_GET_LENGTH(obj);
-    const int kind = PyUnicode_KIND(obj);
-    const void* data = PyUnicode_DATA(obj);
-    start = 0;
-    while (Py_UNICODE_ISSPACE(PyUnicode_READ(kind, data, start)))
-        start++;
-    while (start < length - 1 && Py_UNICODE_ISSPACE(PyUnicode_READ(kind, data, length - 1)))
-        length--;
-    length -= start;
-    if (unlikely(length <= 0)) goto fallback;
-    value = __Pyx__PyUnicode_AsDouble_inf_nan(data, kind, start, length);
-    if (unlikely(value == -1.0)) goto fallback;
-    if (value != 0.0) return value;
-    if (length < 40) {
-        char number[40];
-        last = __Pyx__PyUnicode_AsDouble_Copy(data, kind, number, start, start + length);
-        if (unlikely(!last)) goto fallback;
-        value = PyOS_string_to_double(number, &end, NULL);
-    } else {
-        char *number = (char*) PyMem_Malloc((length + 1) * sizeof(char));
-        if (unlikely(!number)) goto fallback;
-        last = __Pyx__PyUnicode_AsDouble_Copy(data, kind, number, start, start + length);
-        if (unlikely(!last)) {
-            PyMem_Free(number);
-            goto fallback;
-        }
-        value = PyOS_string_to_double(number, &end, NULL);
-        PyMem_Free(number);
-    }
-    if (likely(end == last) || (value == (double)-1 && PyErr_Occurred())) {
-        return value;
-    }
-fallback:
-    return __Pyx_SlowPyString_AsDouble(obj);
-}
-#endif
-static CYTHON_INLINE double __Pyx_PyUnicode_AsDouble(PyObject *obj) {
-#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
-    if (unlikely(__Pyx_PyUnicode_READY(obj) == -1))
-        return (double)-1;
-    if (likely(PyUnicode_IS_ASCII(obj))) {
-        const char *s;
-        Py_ssize_t length;
-        s = PyUnicode_AsUTF8AndSize(obj, &length);
-        return __Pyx__PyBytes_AsDouble(obj, s, length);
-    }
-    return __Pyx_PyUnicode_AsDouble_WithSpaces(obj);
-#else
-    return __Pyx_SlowPyString_AsDouble(obj);
-#endif
-}
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
-/* pynumber_float.proto */
-static CYTHON_INLINE PyObject* __Pyx__PyNumber_Float(PyObject* obj);
-#define __Pyx_PyNumber_Float(x) (PyFloat_CheckExact(x) ? __Pyx_NewRef(x) : __Pyx__PyNumber_Float(x))
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
-/* PySequenceContains.proto */
-static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
-    int result = PySequence_Contains(seq, item);
-    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
-}
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
 
-/* PyObject_Str.proto */
-#define __Pyx_PyObject_Str(obj)\
-    (likely(PyString_CheckExact(obj)) ? __Pyx_NewRef(obj) : PyObject_Str(obj))
+/* Py3UpdateBases.proto */
+static PyObject* __Pyx_PEP560_update_bases(PyObject *bases);
 
-/* Import.proto */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+/* CalculateMetaclass.proto */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);
 
-/* ImportDottedModule.proto */
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
+/* SetNameInClass.proto */
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
+#elif CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_SetNameInClass(ns, name, value)\
+    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
+#else
+#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
 #endif
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
-
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
 #endif
@@ -2017,14 +1846,40 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
+/* ClassMethod.proto */
+#include "descrobject.h"
+CYTHON_UNUSED static PyObject* __Pyx_Method_ClassMethod(PyObject *method);
+
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
+
+/* PyObjectLookupSpecial.proto */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+#define __Pyx_PyObject_LookupSpecialNoError(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 0)
+#define __Pyx_PyObject_LookupSpecial(obj, attr_name)  __Pyx__PyObject_LookupSpecial(obj, attr_name, 1)
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error);
+#else
+#define __Pyx_PyObject_LookupSpecialNoError(o,n) __Pyx_PyObject_GetAttrStrNoError(o,n)
+#define __Pyx_PyObject_LookupSpecial(o,n) __Pyx_PyObject_GetAttrStr(o,n)
+#endif
+
+/* Py3ClassCreate.proto */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
+                                           PyObject *mkw, PyObject *modname, PyObject *doc);
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
+                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);
+
+/* CyFunctionClassCell.proto */
+static int __Pyx_CyFunction_InitClassCell(PyObject *cyfunctions, PyObject *classobj);
+
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -2045,35 +1900,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -2097,94 +1952,82 @@
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "wrapper.infra.VideoObjectsExtractor" */
+/* Module declarations from "wrapper.core.SentenceTransformerVectorizer" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "wrapper.infra.VideoObjectsExtractor"
-extern int __pyx_module_is_main_wrapper__infra__VideoObjectsExtractor;
-int __pyx_module_is_main_wrapper__infra__VideoObjectsExtractor = 0;
+#define __Pyx_MODULE_NAME "wrapper.core.SentenceTransformerVectorizer"
+extern int __pyx_module_is_main_wrapper__core__SentenceTransformerVectorizer;
+int __pyx_module_is_main_wrapper__core__SentenceTransformerVectorizer = 0;
 
-/* Implementation of "wrapper.infra.VideoObjectsExtractor" */
+/* Implementation of "wrapper.core.SentenceTransformerVectorizer" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_range;
+static PyObject *__pyx_builtin_super;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_h[] = "h";
-static const char __pyx_k_i[] = "i";
-static const char __pyx_k_w[] = "w";
-static const char __pyx_k_x[] = "x";
-static const char __pyx_k_y[] = "y";
-static const char __pyx_k__4[] = "*";
-static const char __pyx_k__5[] = ".";
+static const char __pyx_k_[] = ".";
 static const char __pyx_k__8[] = "?";
-static const char __pyx_k_np[] = "np";
-static const char __pyx_k_cv2[] = "cv2";
-static const char __pyx_k_dnn[] = "dnn";
-static const char __pyx_k_get[] = "get";
-static const char __pyx_k_net[] = "net";
-static const char __pyx_k_out[] = "out";
-static const char __pyx_k_ret[] = "ret";
-static const char __pyx_k_blob[] = "blob";
-static const char __pyx_k_crop[] = "crop";
+static const char __pyx_k_cls[] = "cls";
+static const char __pyx_k_doc[] = "__doc__";
+static const char __pyx_k_File[] = "File";
+static const char __pyx_k_dict[] = "__dict__";
+static const char __pyx_k_file[] = "file";
+static const char __pyx_k_init[] = "__init__";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
-static const char __pyx_k_outs[] = "outs";
-static const char __pyx_k_read[] = "read";
-static const char __pyx_k_spec[] = "__spec__";
+static const char __pyx_k_path[] = "path";
+static const char __pyx_k_self[] = "self";
 static const char __pyx_k_test[] = "__test__";
-static const char __pyx_k_boxes[] = "boxes";
-static const char __pyx_k_frame[] = "frame";
-static const char __pyx_k_label[] = "label";
-static const char __pyx_k_numpy[] = "numpy";
-static const char __pyx_k_range[] = "range";
-static const char __pyx_k_shape[] = "shape";
-static const char __pyx_k_width[] = "width";
-static const char __pyx_k_argmax[] = "argmax";
-static const char __pyx_k_height[] = "height";
+static const char __pyx_k_text[] = "text";
+static const char __pyx_k_model[] = "model";
+static const char __pyx_k_super[] = "super";
+static const char __pyx_k_corpus[] = "corpus";
+static const char __pyx_k_encode[] = "encode";
 static const char __pyx_k_import[] = "__import__";
-static const char __pyx_k_scores[] = "scores";
-static const char __pyx_k_classes[] = "classes";
-static const char __pyx_k_forward[] = "forward";
-static const char __pyx_k_indexes[] = "indexes";
-static const char __pyx_k_objects[] = "objects";
-static const char __pyx_k_release[] = "release";
-static const char __pyx_k_NMSBoxes[] = "NMSBoxes";
-static const char __pyx_k_center_x[] = "center_x";
-static const char __pyx_k_center_y[] = "center_y";
-static const char __pyx_k_channels[] = "channels";
-static const char __pyx_k_class_id[] = "class_id";
-static const char __pyx_k_setInput[] = "setInput";
-static const char __pyx_k_class_ids[] = "class_ids";
-static const char __pyx_k_detection[] = "detection";
-static const char __pyx_k_confidence[] = "confidence";
-static const char __pyx_k_get_layers[] = "get_layers";
-static const char __pyx_k_video_path[] = "video_path";
-static const char __pyx_k_confidences[] = "confidences";
-static const char __pyx_k_frame_count[] = "frame_count";
-static const char __pyx_k_VideoCapture[] = "VideoCapture";
-static const char __pyx_k_initializing[] = "_initializing";
+static const char __pyx_k_module[] = "__module__";
+static const char __pyx_k_ENGLISH[] = "ENGLISH";
+static const char __pyx_k_prepare[] = "__prepare__";
+static const char __pyx_k_instance[] = "_instance";
+static const char __pyx_k_qualname[] = "__qualname__";
+static const char __pyx_k_set_name[] = "__set_name__";
+static const char __pyx_k_metaclass[] = "__metaclass__";
+static const char __pyx_k_vect_lang[] = "vect_lang";
+static const char __pyx_k_Vectorizer[] = "Vectorizer";
+static const char __pyx_k_instance_2[] = "instance";
+static const char __pyx_k_load_model[] = "load_model";
+static const char __pyx_k_save_model[] = "save_model";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
+static const char __pyx_k_corpus_name[] = "corpus_name";
+static const char __pyx_k_mro_entries[] = "__mro_entries__";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_blobFromImage[] = "blobFromImage";
-static const char __pyx_k_class_getitem[] = "__class_getitem__";
-static const char __pyx_k_output_layers[] = "output_layers";
-static const char __pyx_k_video_capture[] = "video_capture";
-static const char __pyx_k_objects_per_frame[] = "objects_per_frame";
+static const char __pyx_k_init_subclass[] = "__init_subclass__";
+static const char __pyx_k_all_MiniLM_L6_v2[] = "all-MiniLM-L6-v2";
+static const char __pyx_k_convert_to_tensor[] = "convert_to_tensor";
+static const char __pyx_k_infra_DocLanguage[] = "infra.DocLanguage";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_CAP_PROP_FRAME_COUNT[] = "CAP_PROP_FRAME_COUNT";
-static const char __pyx_k_ImageObjectsExtractor[] = "ImageObjectsExtractor";
-static const char __pyx_k_identify_objects_in_video[] = "identify_objects_in_video";
-static const char __pyx_k_src_wrapper_infra_VideoObjectsEx[] = "src/wrapper/infra/VideoObjectsExtractor.pyx";
-static const char __pyx_k_wrapper_infra_VideoObjectsExtrac[] = "wrapper.infra.VideoObjectsExtractor";
+static const char __pyx_k_SentenceTransformer[] = "SentenceTransformer";
+static const char __pyx_k_sentence_transformers[] = "sentence-transformers/";
+static const char __pyx_k_sentence_transformers_2[] = "sentence_transformers";
+static const char __pyx_k_SentenceTransformerVectorizer[] = "SentenceTransformerVectorizer";
+static const char __pyx_k_SentenceTransformerVectorizer_2[] = "SentenceTransformerVectorizer.__init__";
+static const char __pyx_k_SentenceTransformerVectorizer_en[] = "SentenceTransformerVectorizer.encode";
+static const char __pyx_k_SentenceTransformerVectorizer_in[] = "SentenceTransformerVectorizer.instance";
+static const char __pyx_k_paraphrase_multilingual_MiniLM_L[] = "paraphrase-multilingual-MiniLM-L12-v2";
+static const char __pyx_k_src_wrapper_core_SentenceTransfo[] = "src/wrapper/core/SentenceTransformerVectorizer.pyx";
+static const char __pyx_k_wrapper_core_SentenceTransformer[] = "wrapper.core.SentenceTransformerVectorizer";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_video_path); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer___defaults__(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path, PyObject *__pyx_v_vect_lang, PyObject *__pyx_v_corpus_name); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_2__defaults__(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_2instance(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_cls, PyObject *__pyx_v_path, PyObject *__pyx_v_vect_lang, PyObject *__pyx_v_corpus_name); /* proto */
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_4encode(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_file); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -2206,92 +2049,70 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_n_s_CAP_PROP_FRAME_COUNT;
-  PyObject *__pyx_n_s_ImageObjectsExtractor;
-  PyObject *__pyx_n_s_NMSBoxes;
-  PyObject *__pyx_n_s_VideoCapture;
-  PyObject *__pyx_n_s__4;
-  PyObject *__pyx_kp_u__5;
+  PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
+  PyObject *__pyx_n_s_ENGLISH;
+  PyObject *__pyx_n_s_File;
+  PyObject *__pyx_n_s_SentenceTransformer;
+  PyObject *__pyx_n_s_SentenceTransformerVectorizer;
+  PyObject *__pyx_n_s_SentenceTransformerVectorizer_2;
+  PyObject *__pyx_n_s_SentenceTransformerVectorizer_en;
+  PyObject *__pyx_n_s_SentenceTransformerVectorizer_in;
+  PyObject *__pyx_n_s_Vectorizer;
   PyObject *__pyx_n_s__8;
-  PyObject *__pyx_n_s_argmax;
+  PyObject *__pyx_kp_u_all_MiniLM_L6_v2;
   PyObject *__pyx_n_s_asyncio_coroutines;
-  PyObject *__pyx_n_s_blob;
-  PyObject *__pyx_n_s_blobFromImage;
-  PyObject *__pyx_n_s_boxes;
-  PyObject *__pyx_n_s_center_x;
-  PyObject *__pyx_n_s_center_y;
-  PyObject *__pyx_n_s_channels;
-  PyObject *__pyx_n_s_class_getitem;
-  PyObject *__pyx_n_s_class_id;
-  PyObject *__pyx_n_s_class_ids;
-  PyObject *__pyx_n_s_classes;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_confidence;
-  PyObject *__pyx_n_s_confidences;
-  PyObject *__pyx_n_s_crop;
-  PyObject *__pyx_n_s_cv2;
-  PyObject *__pyx_n_s_detection;
-  PyObject *__pyx_n_s_dnn;
-  PyObject *__pyx_n_s_forward;
-  PyObject *__pyx_n_s_frame;
-  PyObject *__pyx_n_s_frame_count;
-  PyObject *__pyx_n_s_get;
-  PyObject *__pyx_n_s_get_layers;
-  PyObject *__pyx_n_s_h;
-  PyObject *__pyx_n_s_height;
-  PyObject *__pyx_n_s_i;
-  PyObject *__pyx_n_s_identify_objects_in_video;
+  PyObject *__pyx_n_s_cls;
+  PyObject *__pyx_n_s_convert_to_tensor;
+  PyObject *__pyx_n_s_corpus;
+  PyObject *__pyx_n_s_corpus_name;
+  PyObject *__pyx_n_s_dict;
+  PyObject *__pyx_n_s_doc;
+  PyObject *__pyx_n_s_encode;
+  PyObject *__pyx_n_s_file;
   PyObject *__pyx_n_s_import;
-  PyObject *__pyx_n_s_indexes;
-  PyObject *__pyx_n_s_initializing;
+  PyObject *__pyx_n_s_infra_DocLanguage;
+  PyObject *__pyx_n_s_init;
+  PyObject *__pyx_n_s_init_subclass;
+  PyObject *__pyx_n_s_instance;
+  PyObject *__pyx_n_s_instance_2;
   PyObject *__pyx_n_s_is_coroutine;
-  PyObject *__pyx_n_s_label;
+  PyObject *__pyx_n_s_load_model;
   PyObject *__pyx_n_s_main;
+  PyObject *__pyx_n_s_metaclass;
+  PyObject *__pyx_n_s_model;
+  PyObject *__pyx_n_s_module;
+  PyObject *__pyx_n_s_mro_entries;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_net;
-  PyObject *__pyx_n_s_np;
-  PyObject *__pyx_n_s_numpy;
-  PyObject *__pyx_n_s_objects;
-  PyObject *__pyx_n_s_objects_per_frame;
-  PyObject *__pyx_n_s_out;
-  PyObject *__pyx_n_s_output_layers;
-  PyObject *__pyx_n_s_outs;
-  PyObject *__pyx_n_s_range;
-  PyObject *__pyx_n_s_read;
-  PyObject *__pyx_n_s_release;
-  PyObject *__pyx_n_s_ret;
-  PyObject *__pyx_n_s_scores;
-  PyObject *__pyx_n_s_setInput;
-  PyObject *__pyx_n_s_shape;
-  PyObject *__pyx_n_s_spec;
-  PyObject *__pyx_kp_s_src_wrapper_infra_VideoObjectsEx;
+  PyObject *__pyx_kp_u_paraphrase_multilingual_MiniLM_L;
+  PyObject *__pyx_n_s_path;
+  PyObject *__pyx_n_s_prepare;
+  PyObject *__pyx_n_s_qualname;
+  PyObject *__pyx_n_s_save_model;
+  PyObject *__pyx_n_s_self;
+  PyObject *__pyx_kp_u_sentence_transformers;
+  PyObject *__pyx_n_s_sentence_transformers_2;
+  PyObject *__pyx_n_s_set_name;
+  PyObject *__pyx_kp_s_src_wrapper_core_SentenceTransfo;
+  PyObject *__pyx_n_s_super;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_video_capture;
-  PyObject *__pyx_n_s_video_path;
-  PyObject *__pyx_n_s_w;
-  PyObject *__pyx_n_s_width;
-  PyObject *__pyx_n_s_wrapper_infra_VideoObjectsExtrac;
-  PyObject *__pyx_n_s_x;
-  PyObject *__pyx_n_s_y;
-  PyObject *__pyx_float_0_4;
-  PyObject *__pyx_float_0_5;
-  PyObject *__pyx_float_0_00392;
-  PyObject *__pyx_int_0;
-  PyObject *__pyx_int_2;
-  PyObject *__pyx_int_5;
-  PyObject *__pyx_int_416;
-  PyObject *__pyx_tuple_;
-  PyObject *__pyx_slice__3;
+  PyObject *__pyx_n_s_text;
+  PyObject *__pyx_n_s_vect_lang;
+  PyObject *__pyx_n_s_wrapper_core_SentenceTransformer;
   PyObject *__pyx_tuple__2;
+  PyObject *__pyx_tuple__4;
   PyObject *__pyx_tuple__6;
+  PyObject *__pyx_codeobj__3;
+  PyObject *__pyx_codeobj__5;
   PyObject *__pyx_codeobj__7;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
@@ -2327,92 +2148,70 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_n_s_CAP_PROP_FRAME_COUNT);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ImageObjectsExtractor);
-  Py_CLEAR(clear_module_state->__pyx_n_s_NMSBoxes);
-  Py_CLEAR(clear_module_state->__pyx_n_s_VideoCapture);
-  Py_CLEAR(clear_module_state->__pyx_n_s__4);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__5);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ENGLISH);
+  Py_CLEAR(clear_module_state->__pyx_n_s_File);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformer);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformerVectorizer);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformerVectorizer_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformerVectorizer_en);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SentenceTransformerVectorizer_in);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Vectorizer);
   Py_CLEAR(clear_module_state->__pyx_n_s__8);
-  Py_CLEAR(clear_module_state->__pyx_n_s_argmax);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_all_MiniLM_L6_v2);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_CLEAR(clear_module_state->__pyx_n_s_blob);
-  Py_CLEAR(clear_module_state->__pyx_n_s_blobFromImage);
-  Py_CLEAR(clear_module_state->__pyx_n_s_boxes);
-  Py_CLEAR(clear_module_state->__pyx_n_s_center_x);
-  Py_CLEAR(clear_module_state->__pyx_n_s_center_y);
-  Py_CLEAR(clear_module_state->__pyx_n_s_channels);
-  Py_CLEAR(clear_module_state->__pyx_n_s_class_getitem);
-  Py_CLEAR(clear_module_state->__pyx_n_s_class_id);
-  Py_CLEAR(clear_module_state->__pyx_n_s_class_ids);
-  Py_CLEAR(clear_module_state->__pyx_n_s_classes);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_confidence);
-  Py_CLEAR(clear_module_state->__pyx_n_s_confidences);
-  Py_CLEAR(clear_module_state->__pyx_n_s_crop);
-  Py_CLEAR(clear_module_state->__pyx_n_s_cv2);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detection);
-  Py_CLEAR(clear_module_state->__pyx_n_s_dnn);
-  Py_CLEAR(clear_module_state->__pyx_n_s_forward);
-  Py_CLEAR(clear_module_state->__pyx_n_s_frame);
-  Py_CLEAR(clear_module_state->__pyx_n_s_frame_count);
-  Py_CLEAR(clear_module_state->__pyx_n_s_get);
-  Py_CLEAR(clear_module_state->__pyx_n_s_get_layers);
-  Py_CLEAR(clear_module_state->__pyx_n_s_h);
-  Py_CLEAR(clear_module_state->__pyx_n_s_height);
-  Py_CLEAR(clear_module_state->__pyx_n_s_i);
-  Py_CLEAR(clear_module_state->__pyx_n_s_identify_objects_in_video);
+  Py_CLEAR(clear_module_state->__pyx_n_s_cls);
+  Py_CLEAR(clear_module_state->__pyx_n_s_convert_to_tensor);
+  Py_CLEAR(clear_module_state->__pyx_n_s_corpus);
+  Py_CLEAR(clear_module_state->__pyx_n_s_corpus_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dict);
+  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
+  Py_CLEAR(clear_module_state->__pyx_n_s_encode);
+  Py_CLEAR(clear_module_state->__pyx_n_s_file);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
-  Py_CLEAR(clear_module_state->__pyx_n_s_indexes);
-  Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
+  Py_CLEAR(clear_module_state->__pyx_n_s_infra_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init);
+  Py_CLEAR(clear_module_state->__pyx_n_s_init_subclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_instance);
+  Py_CLEAR(clear_module_state->__pyx_n_s_instance_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
-  Py_CLEAR(clear_module_state->__pyx_n_s_label);
+  Py_CLEAR(clear_module_state->__pyx_n_s_load_model);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
+  Py_CLEAR(clear_module_state->__pyx_n_s_metaclass);
+  Py_CLEAR(clear_module_state->__pyx_n_s_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s_module);
+  Py_CLEAR(clear_module_state->__pyx_n_s_mro_entries);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_net);
-  Py_CLEAR(clear_module_state->__pyx_n_s_np);
-  Py_CLEAR(clear_module_state->__pyx_n_s_numpy);
-  Py_CLEAR(clear_module_state->__pyx_n_s_objects);
-  Py_CLEAR(clear_module_state->__pyx_n_s_objects_per_frame);
-  Py_CLEAR(clear_module_state->__pyx_n_s_out);
-  Py_CLEAR(clear_module_state->__pyx_n_s_output_layers);
-  Py_CLEAR(clear_module_state->__pyx_n_s_outs);
-  Py_CLEAR(clear_module_state->__pyx_n_s_range);
-  Py_CLEAR(clear_module_state->__pyx_n_s_read);
-  Py_CLEAR(clear_module_state->__pyx_n_s_release);
-  Py_CLEAR(clear_module_state->__pyx_n_s_ret);
-  Py_CLEAR(clear_module_state->__pyx_n_s_scores);
-  Py_CLEAR(clear_module_state->__pyx_n_s_setInput);
-  Py_CLEAR(clear_module_state->__pyx_n_s_shape);
-  Py_CLEAR(clear_module_state->__pyx_n_s_spec);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_paraphrase_multilingual_MiniLM_L);
+  Py_CLEAR(clear_module_state->__pyx_n_s_path);
+  Py_CLEAR(clear_module_state->__pyx_n_s_prepare);
+  Py_CLEAR(clear_module_state->__pyx_n_s_qualname);
+  Py_CLEAR(clear_module_state->__pyx_n_s_save_model);
+  Py_CLEAR(clear_module_state->__pyx_n_s_self);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_sentence_transformers);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sentence_transformers_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_set_name);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_core_SentenceTransfo);
+  Py_CLEAR(clear_module_state->__pyx_n_s_super);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_video_capture);
-  Py_CLEAR(clear_module_state->__pyx_n_s_video_path);
-  Py_CLEAR(clear_module_state->__pyx_n_s_w);
-  Py_CLEAR(clear_module_state->__pyx_n_s_width);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_VideoObjectsExtrac);
-  Py_CLEAR(clear_module_state->__pyx_n_s_x);
-  Py_CLEAR(clear_module_state->__pyx_n_s_y);
-  Py_CLEAR(clear_module_state->__pyx_float_0_4);
-  Py_CLEAR(clear_module_state->__pyx_float_0_5);
-  Py_CLEAR(clear_module_state->__pyx_float_0_00392);
-  Py_CLEAR(clear_module_state->__pyx_int_0);
-  Py_CLEAR(clear_module_state->__pyx_int_2);
-  Py_CLEAR(clear_module_state->__pyx_int_5);
-  Py_CLEAR(clear_module_state->__pyx_int_416);
-  Py_CLEAR(clear_module_state->__pyx_tuple_);
-  Py_CLEAR(clear_module_state->__pyx_slice__3);
+  Py_CLEAR(clear_module_state->__pyx_n_s_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_vect_lang);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_SentenceTransformer);
   Py_CLEAR(clear_module_state->__pyx_tuple__2);
+  Py_CLEAR(clear_module_state->__pyx_tuple__4);
   Py_CLEAR(clear_module_state->__pyx_tuple__6);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__3);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__5);
   Py_CLEAR(clear_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
@@ -2426,92 +2225,70 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_n_s_CAP_PROP_FRAME_COUNT);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ImageObjectsExtractor);
-  Py_VISIT(traverse_module_state->__pyx_n_s_NMSBoxes);
-  Py_VISIT(traverse_module_state->__pyx_n_s_VideoCapture);
-  Py_VISIT(traverse_module_state->__pyx_n_s__4);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__5);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ENGLISH);
+  Py_VISIT(traverse_module_state->__pyx_n_s_File);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformer);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformerVectorizer);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformerVectorizer_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformerVectorizer_en);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SentenceTransformerVectorizer_in);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Vectorizer);
   Py_VISIT(traverse_module_state->__pyx_n_s__8);
-  Py_VISIT(traverse_module_state->__pyx_n_s_argmax);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_all_MiniLM_L6_v2);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
-  Py_VISIT(traverse_module_state->__pyx_n_s_blob);
-  Py_VISIT(traverse_module_state->__pyx_n_s_blobFromImage);
-  Py_VISIT(traverse_module_state->__pyx_n_s_boxes);
-  Py_VISIT(traverse_module_state->__pyx_n_s_center_x);
-  Py_VISIT(traverse_module_state->__pyx_n_s_center_y);
-  Py_VISIT(traverse_module_state->__pyx_n_s_channels);
-  Py_VISIT(traverse_module_state->__pyx_n_s_class_getitem);
-  Py_VISIT(traverse_module_state->__pyx_n_s_class_id);
-  Py_VISIT(traverse_module_state->__pyx_n_s_class_ids);
-  Py_VISIT(traverse_module_state->__pyx_n_s_classes);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_confidence);
-  Py_VISIT(traverse_module_state->__pyx_n_s_confidences);
-  Py_VISIT(traverse_module_state->__pyx_n_s_crop);
-  Py_VISIT(traverse_module_state->__pyx_n_s_cv2);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detection);
-  Py_VISIT(traverse_module_state->__pyx_n_s_dnn);
-  Py_VISIT(traverse_module_state->__pyx_n_s_forward);
-  Py_VISIT(traverse_module_state->__pyx_n_s_frame);
-  Py_VISIT(traverse_module_state->__pyx_n_s_frame_count);
-  Py_VISIT(traverse_module_state->__pyx_n_s_get);
-  Py_VISIT(traverse_module_state->__pyx_n_s_get_layers);
-  Py_VISIT(traverse_module_state->__pyx_n_s_h);
-  Py_VISIT(traverse_module_state->__pyx_n_s_height);
-  Py_VISIT(traverse_module_state->__pyx_n_s_i);
-  Py_VISIT(traverse_module_state->__pyx_n_s_identify_objects_in_video);
+  Py_VISIT(traverse_module_state->__pyx_n_s_cls);
+  Py_VISIT(traverse_module_state->__pyx_n_s_convert_to_tensor);
+  Py_VISIT(traverse_module_state->__pyx_n_s_corpus);
+  Py_VISIT(traverse_module_state->__pyx_n_s_corpus_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dict);
+  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
+  Py_VISIT(traverse_module_state->__pyx_n_s_encode);
+  Py_VISIT(traverse_module_state->__pyx_n_s_file);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
-  Py_VISIT(traverse_module_state->__pyx_n_s_indexes);
-  Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
+  Py_VISIT(traverse_module_state->__pyx_n_s_infra_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init);
+  Py_VISIT(traverse_module_state->__pyx_n_s_init_subclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_instance);
+  Py_VISIT(traverse_module_state->__pyx_n_s_instance_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
-  Py_VISIT(traverse_module_state->__pyx_n_s_label);
+  Py_VISIT(traverse_module_state->__pyx_n_s_load_model);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
+  Py_VISIT(traverse_module_state->__pyx_n_s_metaclass);
+  Py_VISIT(traverse_module_state->__pyx_n_s_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s_module);
+  Py_VISIT(traverse_module_state->__pyx_n_s_mro_entries);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_net);
-  Py_VISIT(traverse_module_state->__pyx_n_s_np);
-  Py_VISIT(traverse_module_state->__pyx_n_s_numpy);
-  Py_VISIT(traverse_module_state->__pyx_n_s_objects);
-  Py_VISIT(traverse_module_state->__pyx_n_s_objects_per_frame);
-  Py_VISIT(traverse_module_state->__pyx_n_s_out);
-  Py_VISIT(traverse_module_state->__pyx_n_s_output_layers);
-  Py_VISIT(traverse_module_state->__pyx_n_s_outs);
-  Py_VISIT(traverse_module_state->__pyx_n_s_range);
-  Py_VISIT(traverse_module_state->__pyx_n_s_read);
-  Py_VISIT(traverse_module_state->__pyx_n_s_release);
-  Py_VISIT(traverse_module_state->__pyx_n_s_ret);
-  Py_VISIT(traverse_module_state->__pyx_n_s_scores);
-  Py_VISIT(traverse_module_state->__pyx_n_s_setInput);
-  Py_VISIT(traverse_module_state->__pyx_n_s_shape);
-  Py_VISIT(traverse_module_state->__pyx_n_s_spec);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_paraphrase_multilingual_MiniLM_L);
+  Py_VISIT(traverse_module_state->__pyx_n_s_path);
+  Py_VISIT(traverse_module_state->__pyx_n_s_prepare);
+  Py_VISIT(traverse_module_state->__pyx_n_s_qualname);
+  Py_VISIT(traverse_module_state->__pyx_n_s_save_model);
+  Py_VISIT(traverse_module_state->__pyx_n_s_self);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_sentence_transformers);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sentence_transformers_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_set_name);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_core_SentenceTransfo);
+  Py_VISIT(traverse_module_state->__pyx_n_s_super);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_video_capture);
-  Py_VISIT(traverse_module_state->__pyx_n_s_video_path);
-  Py_VISIT(traverse_module_state->__pyx_n_s_w);
-  Py_VISIT(traverse_module_state->__pyx_n_s_width);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_VideoObjectsExtrac);
-  Py_VISIT(traverse_module_state->__pyx_n_s_x);
-  Py_VISIT(traverse_module_state->__pyx_n_s_y);
-  Py_VISIT(traverse_module_state->__pyx_float_0_4);
-  Py_VISIT(traverse_module_state->__pyx_float_0_5);
-  Py_VISIT(traverse_module_state->__pyx_float_0_00392);
-  Py_VISIT(traverse_module_state->__pyx_int_0);
-  Py_VISIT(traverse_module_state->__pyx_int_2);
-  Py_VISIT(traverse_module_state->__pyx_int_5);
-  Py_VISIT(traverse_module_state->__pyx_int_416);
-  Py_VISIT(traverse_module_state->__pyx_tuple_);
-  Py_VISIT(traverse_module_state->__pyx_slice__3);
+  Py_VISIT(traverse_module_state->__pyx_n_s_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_vect_lang);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_SentenceTransformer);
   Py_VISIT(traverse_module_state->__pyx_tuple__2);
+  Py_VISIT(traverse_module_state->__pyx_tuple__4);
   Py_VISIT(traverse_module_state->__pyx_tuple__6);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__3);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__5);
   Py_VISIT(traverse_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
@@ -2535,1429 +2312,961 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_n_s_CAP_PROP_FRAME_COUNT __pyx_mstate_global->__pyx_n_s_CAP_PROP_FRAME_COUNT
-#define __pyx_n_s_ImageObjectsExtractor __pyx_mstate_global->__pyx_n_s_ImageObjectsExtractor
-#define __pyx_n_s_NMSBoxes __pyx_mstate_global->__pyx_n_s_NMSBoxes
-#define __pyx_n_s_VideoCapture __pyx_mstate_global->__pyx_n_s_VideoCapture
-#define __pyx_n_s__4 __pyx_mstate_global->__pyx_n_s__4
-#define __pyx_kp_u__5 __pyx_mstate_global->__pyx_kp_u__5
+#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
+#define __pyx_n_s_ENGLISH __pyx_mstate_global->__pyx_n_s_ENGLISH
+#define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
+#define __pyx_n_s_SentenceTransformer __pyx_mstate_global->__pyx_n_s_SentenceTransformer
+#define __pyx_n_s_SentenceTransformerVectorizer __pyx_mstate_global->__pyx_n_s_SentenceTransformerVectorizer
+#define __pyx_n_s_SentenceTransformerVectorizer_2 __pyx_mstate_global->__pyx_n_s_SentenceTransformerVectorizer_2
+#define __pyx_n_s_SentenceTransformerVectorizer_en __pyx_mstate_global->__pyx_n_s_SentenceTransformerVectorizer_en
+#define __pyx_n_s_SentenceTransformerVectorizer_in __pyx_mstate_global->__pyx_n_s_SentenceTransformerVectorizer_in
+#define __pyx_n_s_Vectorizer __pyx_mstate_global->__pyx_n_s_Vectorizer
 #define __pyx_n_s__8 __pyx_mstate_global->__pyx_n_s__8
-#define __pyx_n_s_argmax __pyx_mstate_global->__pyx_n_s_argmax
+#define __pyx_kp_u_all_MiniLM_L6_v2 __pyx_mstate_global->__pyx_kp_u_all_MiniLM_L6_v2
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
-#define __pyx_n_s_blob __pyx_mstate_global->__pyx_n_s_blob
-#define __pyx_n_s_blobFromImage __pyx_mstate_global->__pyx_n_s_blobFromImage
-#define __pyx_n_s_boxes __pyx_mstate_global->__pyx_n_s_boxes
-#define __pyx_n_s_center_x __pyx_mstate_global->__pyx_n_s_center_x
-#define __pyx_n_s_center_y __pyx_mstate_global->__pyx_n_s_center_y
-#define __pyx_n_s_channels __pyx_mstate_global->__pyx_n_s_channels
-#define __pyx_n_s_class_getitem __pyx_mstate_global->__pyx_n_s_class_getitem
-#define __pyx_n_s_class_id __pyx_mstate_global->__pyx_n_s_class_id
-#define __pyx_n_s_class_ids __pyx_mstate_global->__pyx_n_s_class_ids
-#define __pyx_n_s_classes __pyx_mstate_global->__pyx_n_s_classes
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_confidence __pyx_mstate_global->__pyx_n_s_confidence
-#define __pyx_n_s_confidences __pyx_mstate_global->__pyx_n_s_confidences
-#define __pyx_n_s_crop __pyx_mstate_global->__pyx_n_s_crop
-#define __pyx_n_s_cv2 __pyx_mstate_global->__pyx_n_s_cv2
-#define __pyx_n_s_detection __pyx_mstate_global->__pyx_n_s_detection
-#define __pyx_n_s_dnn __pyx_mstate_global->__pyx_n_s_dnn
-#define __pyx_n_s_forward __pyx_mstate_global->__pyx_n_s_forward
-#define __pyx_n_s_frame __pyx_mstate_global->__pyx_n_s_frame
-#define __pyx_n_s_frame_count __pyx_mstate_global->__pyx_n_s_frame_count
-#define __pyx_n_s_get __pyx_mstate_global->__pyx_n_s_get
-#define __pyx_n_s_get_layers __pyx_mstate_global->__pyx_n_s_get_layers
-#define __pyx_n_s_h __pyx_mstate_global->__pyx_n_s_h
-#define __pyx_n_s_height __pyx_mstate_global->__pyx_n_s_height
-#define __pyx_n_s_i __pyx_mstate_global->__pyx_n_s_i
-#define __pyx_n_s_identify_objects_in_video __pyx_mstate_global->__pyx_n_s_identify_objects_in_video
+#define __pyx_n_s_cls __pyx_mstate_global->__pyx_n_s_cls
+#define __pyx_n_s_convert_to_tensor __pyx_mstate_global->__pyx_n_s_convert_to_tensor
+#define __pyx_n_s_corpus __pyx_mstate_global->__pyx_n_s_corpus
+#define __pyx_n_s_corpus_name __pyx_mstate_global->__pyx_n_s_corpus_name
+#define __pyx_n_s_dict __pyx_mstate_global->__pyx_n_s_dict
+#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
+#define __pyx_n_s_encode __pyx_mstate_global->__pyx_n_s_encode
+#define __pyx_n_s_file __pyx_mstate_global->__pyx_n_s_file
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
-#define __pyx_n_s_indexes __pyx_mstate_global->__pyx_n_s_indexes
-#define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
+#define __pyx_n_s_infra_DocLanguage __pyx_mstate_global->__pyx_n_s_infra_DocLanguage
+#define __pyx_n_s_init __pyx_mstate_global->__pyx_n_s_init
+#define __pyx_n_s_init_subclass __pyx_mstate_global->__pyx_n_s_init_subclass
+#define __pyx_n_s_instance __pyx_mstate_global->__pyx_n_s_instance
+#define __pyx_n_s_instance_2 __pyx_mstate_global->__pyx_n_s_instance_2
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
-#define __pyx_n_s_label __pyx_mstate_global->__pyx_n_s_label
+#define __pyx_n_s_load_model __pyx_mstate_global->__pyx_n_s_load_model
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
+#define __pyx_n_s_metaclass __pyx_mstate_global->__pyx_n_s_metaclass
+#define __pyx_n_s_model __pyx_mstate_global->__pyx_n_s_model
+#define __pyx_n_s_module __pyx_mstate_global->__pyx_n_s_module
+#define __pyx_n_s_mro_entries __pyx_mstate_global->__pyx_n_s_mro_entries
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_net __pyx_mstate_global->__pyx_n_s_net
-#define __pyx_n_s_np __pyx_mstate_global->__pyx_n_s_np
-#define __pyx_n_s_numpy __pyx_mstate_global->__pyx_n_s_numpy
-#define __pyx_n_s_objects __pyx_mstate_global->__pyx_n_s_objects
-#define __pyx_n_s_objects_per_frame __pyx_mstate_global->__pyx_n_s_objects_per_frame
-#define __pyx_n_s_out __pyx_mstate_global->__pyx_n_s_out
-#define __pyx_n_s_output_layers __pyx_mstate_global->__pyx_n_s_output_layers
-#define __pyx_n_s_outs __pyx_mstate_global->__pyx_n_s_outs
-#define __pyx_n_s_range __pyx_mstate_global->__pyx_n_s_range
-#define __pyx_n_s_read __pyx_mstate_global->__pyx_n_s_read
-#define __pyx_n_s_release __pyx_mstate_global->__pyx_n_s_release
-#define __pyx_n_s_ret __pyx_mstate_global->__pyx_n_s_ret
-#define __pyx_n_s_scores __pyx_mstate_global->__pyx_n_s_scores
-#define __pyx_n_s_setInput __pyx_mstate_global->__pyx_n_s_setInput
-#define __pyx_n_s_shape __pyx_mstate_global->__pyx_n_s_shape
-#define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
-#define __pyx_kp_s_src_wrapper_infra_VideoObjectsEx __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_VideoObjectsEx
+#define __pyx_kp_u_paraphrase_multilingual_MiniLM_L __pyx_mstate_global->__pyx_kp_u_paraphrase_multilingual_MiniLM_L
+#define __pyx_n_s_path __pyx_mstate_global->__pyx_n_s_path
+#define __pyx_n_s_prepare __pyx_mstate_global->__pyx_n_s_prepare
+#define __pyx_n_s_qualname __pyx_mstate_global->__pyx_n_s_qualname
+#define __pyx_n_s_save_model __pyx_mstate_global->__pyx_n_s_save_model
+#define __pyx_n_s_self __pyx_mstate_global->__pyx_n_s_self
+#define __pyx_kp_u_sentence_transformers __pyx_mstate_global->__pyx_kp_u_sentence_transformers
+#define __pyx_n_s_sentence_transformers_2 __pyx_mstate_global->__pyx_n_s_sentence_transformers_2
+#define __pyx_n_s_set_name __pyx_mstate_global->__pyx_n_s_set_name
+#define __pyx_kp_s_src_wrapper_core_SentenceTransfo __pyx_mstate_global->__pyx_kp_s_src_wrapper_core_SentenceTransfo
+#define __pyx_n_s_super __pyx_mstate_global->__pyx_n_s_super
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_video_capture __pyx_mstate_global->__pyx_n_s_video_capture
-#define __pyx_n_s_video_path __pyx_mstate_global->__pyx_n_s_video_path
-#define __pyx_n_s_w __pyx_mstate_global->__pyx_n_s_w
-#define __pyx_n_s_width __pyx_mstate_global->__pyx_n_s_width
-#define __pyx_n_s_wrapper_infra_VideoObjectsExtrac __pyx_mstate_global->__pyx_n_s_wrapper_infra_VideoObjectsExtrac
-#define __pyx_n_s_x __pyx_mstate_global->__pyx_n_s_x
-#define __pyx_n_s_y __pyx_mstate_global->__pyx_n_s_y
-#define __pyx_float_0_4 __pyx_mstate_global->__pyx_float_0_4
-#define __pyx_float_0_5 __pyx_mstate_global->__pyx_float_0_5
-#define __pyx_float_0_00392 __pyx_mstate_global->__pyx_float_0_00392
-#define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
-#define __pyx_int_2 __pyx_mstate_global->__pyx_int_2
-#define __pyx_int_5 __pyx_mstate_global->__pyx_int_5
-#define __pyx_int_416 __pyx_mstate_global->__pyx_int_416
-#define __pyx_tuple_ __pyx_mstate_global->__pyx_tuple_
-#define __pyx_slice__3 __pyx_mstate_global->__pyx_slice__3
+#define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
+#define __pyx_n_s_vect_lang __pyx_mstate_global->__pyx_n_s_vect_lang
+#define __pyx_n_s_wrapper_core_SentenceTransformer __pyx_mstate_global->__pyx_n_s_wrapper_core_SentenceTransformer
 #define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
+#define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
 #define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
+#define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
+#define __pyx_codeobj__5 __pyx_mstate_global->__pyx_codeobj__5
 #define __pyx_codeobj__7 __pyx_mstate_global->__pyx_codeobj__7
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/VideoObjectsExtractor.pyx":5
- * import numpy as np
- * 
- * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
- *     net, output_layers, classes = get_layers()
+/* "wrapper/core/SentenceTransformerVectorizer.pyx":12
+ *     _instance = None
  * 
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):             # <<<<<<<<<<<<<<
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:
  */
 
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer___defaults__(CYTHON_UNUSED PyObject *__pyx_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__defaults__", 0);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_vect_lang);
+  __Pyx_GIVEREF(__Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_vect_lang);
+  PyTuple_SET_ITEM(__pyx_t_1, 0, __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self)->__pyx_arg_vect_lang);
+  __Pyx_INCREF(((PyObject *)Py_None));
+  __Pyx_GIVEREF(((PyObject *)Py_None));
+  PyTuple_SET_ITEM(__pyx_t_1, 1, ((PyObject *)Py_None));
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, Py_None);
+  __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.__defaults__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
 /* Python wrapper */
-static PyObject *__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video(PyObject *__pyx_self, 
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video, "identify_objects_in_video(video_path)");
-static PyMethodDef __pyx_mdef_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video = {"identify_objects_in_video", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video};
-static PyObject *__pyx_pw_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video(PyObject *__pyx_self, 
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer___init__, "SentenceTransformerVectorizer.__init__(self, path, vect_lang: DocLanguage = DocLanguage.ENGLISH, corpus_name=None)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_1__init__ = {"__init__", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_1__init__, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer___init__};
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_1__init__(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_video_path = 0;
+  PyObject *__pyx_v_self = 0;
+  PyObject *__pyx_v_path = 0;
+  PyObject *__pyx_v_vect_lang = 0;
+  PyObject *__pyx_v_corpus_name = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("identify_objects_in_video (wrapper)", 0);
+  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_video_path,0};
-    PyObject* values[1] = {0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_path,&__pyx_n_s_vect_lang,&__pyx_n_s_corpus_name,0};
+    PyObject* values[4] = {0,0,0,0};
+    __pyx_defaults *__pyx_dynamic_args = __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_self);
+    values[2] = __pyx_dynamic_args->__pyx_arg_vect_lang;
+    values[3] = ((PyObject *)((PyObject *)Py_None));
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_video_path)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 5, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_path)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, 1); __PYX_ERR(0, 12, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_vect_lang);
+          if (value) { values[2] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_corpus_name);
+          if (value) { values[3] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 12, __pyx_L3_error)
+        }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "identify_objects_in_video") < 0)) __PYX_ERR(0, 5, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "__init__") < 0)) __PYX_ERR(0, 12, __pyx_L3_error)
       }
-    } else if (unlikely(__pyx_nargs != 1)) {
-      goto __pyx_L5_argtuple_error;
     } else {
-      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
     }
-    __pyx_v_video_path = values[0];
+    __pyx_v_self = values[0];
+    __pyx_v_path = values[1];
+    __pyx_v_vect_lang = values[2];
+    __pyx_v_corpus_name = values[3];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("identify_objects_in_video", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 5, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("__init__", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 12, __pyx_L3_error)
   __pyx_L3_error:;
-  __Pyx_AddTraceback("wrapper.infra.VideoObjectsExtractor.identify_objects_in_video", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(__pyx_self, __pyx_v_video_path);
+  __pyx_r = __pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer___init__(__pyx_self, __pyx_v_self, __pyx_v_path, __pyx_v_vect_lang, __pyx_v_corpus_name);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_21VideoObjectsExtractor_identify_objects_in_video(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_video_path) {
-  PyObject *__pyx_v_net = NULL;
-  PyObject *__pyx_v_output_layers = NULL;
-  PyObject *__pyx_v_classes = NULL;
-  PyObject *__pyx_v_video_capture = NULL;
-  PyObject *__pyx_v_frame_count = NULL;
-  PyObject *__pyx_v_objects_per_frame = NULL;
-  PyObject *__pyx_v_i = NULL;
-  PyObject *__pyx_v_ret = NULL;
-  PyObject *__pyx_v_frame = NULL;
-  PyObject *__pyx_v_height = NULL;
-  PyObject *__pyx_v_width = NULL;
-  CYTHON_UNUSED PyObject *__pyx_v_channels = NULL;
-  PyObject *__pyx_v_blob = NULL;
-  PyObject *__pyx_v_outs = NULL;
-  PyObject *__pyx_v_class_ids = NULL;
-  PyObject *__pyx_v_confidences = NULL;
-  PyObject *__pyx_v_boxes = NULL;
-  PyObject *__pyx_v_out = NULL;
-  PyObject *__pyx_v_detection = NULL;
-  PyObject *__pyx_v_scores = NULL;
-  PyObject *__pyx_v_class_id = NULL;
-  PyObject *__pyx_v_confidence = NULL;
-  PyObject *__pyx_v_center_x = NULL;
-  PyObject *__pyx_v_center_y = NULL;
-  PyObject *__pyx_v_w = NULL;
-  PyObject *__pyx_v_h = NULL;
-  PyObject *__pyx_v_x = NULL;
-  PyObject *__pyx_v_y = NULL;
-  PyObject *__pyx_v_indexes = NULL;
-  PyObject *__pyx_v_objects = NULL;
-  PyObject *__pyx_v_label = NULL;
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_path, PyObject *__pyx_v_vect_lang, PyObject *__pyx_v_corpus_name) {
+  PyObject *__pyx_v_corpus = NULL;
+  PyObject *__pyx_v_model = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
+  int __pyx_t_1;
+  int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
+  PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
-  PyObject *__pyx_t_6 = NULL;
-  PyObject *(*__pyx_t_7)(PyObject *);
-  Py_ssize_t __pyx_t_8;
-  PyObject *(*__pyx_t_9)(PyObject *);
-  int __pyx_t_10;
-  int __pyx_t_11;
-  PyObject *__pyx_t_12 = NULL;
-  Py_ssize_t __pyx_t_13;
-  PyObject *(*__pyx_t_14)(PyObject *);
-  Py_ssize_t __pyx_t_15;
-  PyObject *(*__pyx_t_16)(PyObject *);
-  int __pyx_t_17;
+  int __pyx_t_6;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("identify_objects_in_video", 0);
+  __Pyx_RefNannySetupContext("__init__", 0);
+  __Pyx_INCREF(__pyx_v_corpus_name);
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":6
- * 
- * def identify_objects_in_video(video_path):
- *     net, output_layers, classes = get_layers()             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":13
  * 
- *     # Usar OpenCV para extrair os frames do vdeo
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):
+ *         if not corpus_name:             # <<<<<<<<<<<<<<
+ *             if vect_lang == DocLanguage.ENGLISH:
+ *                 corpus_name = 'all-MiniLM-L6-v2'
+ */
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_corpus_name); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 13, __pyx_L1_error)
+  __pyx_t_2 = (!__pyx_t_1);
+  if (__pyx_t_2) {
+
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":14
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:             # <<<<<<<<<<<<<<
+ *                 corpus_name = 'all-MiniLM-L6-v2'
+ *             else:
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_get_layers); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
-    }
-  }
-  {
-    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  }
-  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
-    PyObject* sequence = __pyx_t_1;
-    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
-    if (unlikely(size != 3)) {
-      if (size > 3) __Pyx_RaiseTooManyValuesError(3);
-      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-      __PYX_ERR(0, 6, __pyx_L1_error)
-    }
-    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    if (likely(PyTuple_CheckExact(sequence))) {
-      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
-      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
-      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 2); 
-    } else {
-      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
-      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
-      __pyx_t_5 = PyList_GET_ITEM(sequence, 2); 
-    }
-    __Pyx_INCREF(__pyx_t_2);
-    __Pyx_INCREF(__pyx_t_3);
-    __Pyx_INCREF(__pyx_t_5);
-    #else
-    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_5 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    #endif
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  } else {
-    Py_ssize_t index = -1;
-    __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 6, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6);
-    index = 0; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
-    __Pyx_GOTREF(__pyx_t_2);
-    index = 1; __pyx_t_3 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    index = 2; __pyx_t_5 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_5)) goto __pyx_L3_unpacking_failed;
-    __Pyx_GOTREF(__pyx_t_5);
-    if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
-    __pyx_t_7 = NULL;
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    goto __pyx_L4_unpacking_done;
-    __pyx_L3_unpacking_failed:;
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __pyx_t_7 = NULL;
-    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-    __PYX_ERR(0, 6, __pyx_L1_error)
-    __pyx_L4_unpacking_done:;
-  }
-  __pyx_v_net = __pyx_t_2;
-  __pyx_t_2 = 0;
-  __pyx_v_output_layers = __pyx_t_3;
-  __pyx_t_3 = 0;
-  __pyx_v_classes = __pyx_t_5;
-  __pyx_t_5 = 0;
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = PyObject_RichCompare(__pyx_v_vect_lang, __pyx_t_4, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (__pyx_t_2) {
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":9
- * 
- *     # Usar OpenCV para extrair os frames do vdeo
- *     video_capture = cv2.VideoCapture(video_path)             # <<<<<<<<<<<<<<
- *     frame_count = int(video_capture.get(cv2.CAP_PROP_FRAME_COUNT))
- * 
+      /* "wrapper/core/SentenceTransformerVectorizer.pyx":15
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:
+ *                 corpus_name = 'all-MiniLM-L6-v2'             # <<<<<<<<<<<<<<
+ *             else:
+ *                 corpus_name = 'paraphrase-multilingual-MiniLM-L12-v2'
+ */
+      __Pyx_INCREF(__pyx_kp_u_all_MiniLM_L6_v2);
+      __Pyx_DECREF_SET(__pyx_v_corpus_name, __pyx_kp_u_all_MiniLM_L6_v2);
+
+      /* "wrapper/core/SentenceTransformerVectorizer.pyx":14
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:             # <<<<<<<<<<<<<<
+ *                 corpus_name = 'all-MiniLM-L6-v2'
+ *             else:
+ */
+      goto __pyx_L4;
+    }
+
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":17
+ *                 corpus_name = 'all-MiniLM-L6-v2'
+ *             else:
+ *                 corpus_name = 'paraphrase-multilingual-MiniLM-L12-v2'             # <<<<<<<<<<<<<<
+ *         super().__init__(path, corpus_name)
+ *         self.load_model()
+ */
+    /*else*/ {
+      __Pyx_INCREF(__pyx_kp_u_paraphrase_multilingual_MiniLM_L);
+      __Pyx_DECREF_SET(__pyx_v_corpus_name, __pyx_kp_u_paraphrase_multilingual_MiniLM_L);
+    }
+    __pyx_L4:;
+
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":13
+ * 
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):
+ *         if not corpus_name:             # <<<<<<<<<<<<<<
+ *             if vect_lang == DocLanguage.ENGLISH:
+ *                 corpus_name = 'all-MiniLM-L6-v2'
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 9, __pyx_L1_error)
+  }
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":18
+ *             else:
+ *                 corpus_name = 'paraphrase-multilingual-MiniLM-L12-v2'
+ *         super().__init__(path, corpus_name)             # <<<<<<<<<<<<<<
+ *         self.load_model()
+ *         if not self.model:
+ */
+  __pyx_t_4 = __Pyx_CyFunction_GetClassObj(__pyx_self);
+  if (!__pyx_t_4) { PyErr_SetString(PyExc_SystemError, "super(): empty __class__ cell"); __PYX_ERR(0, 18, __pyx_L1_error) }
+  __Pyx_INCREF(__pyx_t_4);
+  __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 18, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_VideoCapture); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 9, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  __pyx_t_5 = NULL;
+  __Pyx_GIVEREF(__pyx_t_4);
+  PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4);
+  __Pyx_INCREF(__pyx_v_self);
+  __Pyx_GIVEREF(__pyx_v_self);
+  PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_self);
   __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_5)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_5);
+  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_5, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_init); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 18, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __pyx_t_4 = NULL;
+  __pyx_t_6 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
+    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
+    if (likely(__pyx_t_4)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+      __Pyx_INCREF(__pyx_t_4);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+      __Pyx_DECREF_SET(__pyx_t_5, function);
+      __pyx_t_6 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_v_video_path};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 9, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_v_path, __pyx_v_corpus_name};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 2+__pyx_t_6);
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   }
-  __pyx_v_video_capture = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":10
- *     # Usar OpenCV para extrair os frames do vdeo
- *     video_capture = cv2.VideoCapture(video_path)
- *     frame_count = int(video_capture.get(cv2.CAP_PROP_FRAME_COUNT))             # <<<<<<<<<<<<<<
- * 
- *     # Inicializar algumas listas para armazenar os resultados em cada frame
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":19
+ *                 corpus_name = 'paraphrase-multilingual-MiniLM-L12-v2'
+ *         super().__init__(path, corpus_name)
+ *         self.load_model()             # <<<<<<<<<<<<<<
+ *         if not self.model:
+ *             corpus = f'sentence-transformers/{corpus_name}'
  */
-  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_get); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_load_model); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 19, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_CAP_PROP_FRAME_COUNT); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-  __pyx_t_5 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
-    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
-    if (likely(__pyx_t_5)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-      __Pyx_INCREF(__pyx_t_5);
+  __pyx_t_4 = NULL;
+  __pyx_t_6 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
+    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
+    if (likely(__pyx_t_4)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+      __Pyx_INCREF(__pyx_t_4);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_3, function);
-      __pyx_t_4 = 1;
+      __Pyx_DECREF_SET(__pyx_t_5, function);
+      __pyx_t_6 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_2};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 10, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    PyObject *__pyx_callargs[1] = {__pyx_t_4, };
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_6, 0+__pyx_t_6);
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
   }
-  __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  __pyx_v_frame_count = __pyx_t_3;
-  __pyx_t_3 = 0;
-
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":13
- * 
- *     # Inicializar algumas listas para armazenar os resultados em cada frame
- *     objects_per_frame = []             # <<<<<<<<<<<<<<
- * 
- *     for i in range(frame_count):
- */
-  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  __pyx_v_objects_per_frame = ((PyObject*)__pyx_t_3);
-  __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":15
- *     objects_per_frame = []
- * 
- *     for i in range(frame_count):             # <<<<<<<<<<<<<<
- *         ret, frame = video_capture.read()
- *         if not ret:
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":20
+ *         super().__init__(path, corpus_name)
+ *         self.load_model()
+ *         if not self.model:             # <<<<<<<<<<<<<<
+ *             corpus = f'sentence-transformers/{corpus_name}'
+ *             model = SentenceTransformer(corpus)
  */
-  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_v_frame_count); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
-    __pyx_t_1 = __pyx_t_3; __Pyx_INCREF(__pyx_t_1); __pyx_t_8 = 0;
-    __pyx_t_9 = NULL;
-  } else {
-    __pyx_t_8 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 15, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_9 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 15, __pyx_L1_error)
-  }
+  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 20, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  for (;;) {
-    if (likely(!__pyx_t_9)) {
-      if (likely(PyList_CheckExact(__pyx_t_1))) {
-        if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_1)) break;
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L1_error)
-        #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        #endif
-      } else {
-        if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely((0 < 0))) __PYX_ERR(0, 15, __pyx_L1_error)
-        #else
-        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        #endif
-      }
-    } else {
-      __pyx_t_3 = __pyx_t_9(__pyx_t_1);
-      if (unlikely(!__pyx_t_3)) {
-        PyObject* exc_type = PyErr_Occurred();
-        if (exc_type) {
-          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 15, __pyx_L1_error)
-        }
-        break;
-      }
-      __Pyx_GOTREF(__pyx_t_3);
-    }
-    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
-    __pyx_t_3 = 0;
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":16
- * 
- *     for i in range(frame_count):
- *         ret, frame = video_capture.read()             # <<<<<<<<<<<<<<
- *         if not ret:
- *             break
- */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_read); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_5 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_5)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_5);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_2, function);
-        __pyx_t_4 = 1;
-      }
-    }
-    {
-      PyObject *__pyx_callargs[1] = {__pyx_t_5, };
-      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_3);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    }
-    if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
-      PyObject* sequence = __pyx_t_3;
-      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
-      if (unlikely(size != 2)) {
-        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
-        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-        __PYX_ERR(0, 16, __pyx_L1_error)
-      }
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      if (likely(PyTuple_CheckExact(sequence))) {
-        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
-        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
-      } else {
-        __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
-        __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
-      }
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_5);
-      #else
-      __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 16, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 16, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      #endif
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    } else {
-      Py_ssize_t index = -1;
-      __pyx_t_6 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 16, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_6);
-      index = 0; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L7_unpacking_failed;
-      __Pyx_GOTREF(__pyx_t_2);
-      index = 1; __pyx_t_5 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_5)) goto __pyx_L7_unpacking_failed;
-      __Pyx_GOTREF(__pyx_t_5);
-      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 2) < 0) __PYX_ERR(0, 16, __pyx_L1_error)
-      __pyx_t_7 = NULL;
-      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-      goto __pyx_L8_unpacking_done;
-      __pyx_L7_unpacking_failed:;
-      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-      __pyx_t_7 = NULL;
-      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-      __PYX_ERR(0, 16, __pyx_L1_error)
-      __pyx_L8_unpacking_done:;
-    }
-    __Pyx_XDECREF_SET(__pyx_v_ret, __pyx_t_2);
-    __pyx_t_2 = 0;
-    __Pyx_XDECREF_SET(__pyx_v_frame, __pyx_t_5);
-    __pyx_t_5 = 0;
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":17
- *     for i in range(frame_count):
- *         ret, frame = video_capture.read()
- *         if not ret:             # <<<<<<<<<<<<<<
- *             break
- * 
- */
-    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_v_ret); if (unlikely((__pyx_t_10 < 0))) __PYX_ERR(0, 17, __pyx_L1_error)
-    __pyx_t_11 = (!__pyx_t_10);
-    if (__pyx_t_11) {
-
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":18
- *         ret, frame = video_capture.read()
- *         if not ret:
- *             break             # <<<<<<<<<<<<<<
- * 
- *         height, width, channels = frame.shape
- */
-      goto __pyx_L6_break;
-
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":17
- *     for i in range(frame_count):
- *         ret, frame = video_capture.read()
- *         if not ret:             # <<<<<<<<<<<<<<
- *             break
- * 
- */
-    }
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":20
- *             break
- * 
- *         height, width, channels = frame.shape             # <<<<<<<<<<<<<<
- *         # Pr-processar a imagem
- *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)
- */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_frame, __pyx_n_s_shape); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    if ((likely(PyTuple_CheckExact(__pyx_t_3))) || (PyList_CheckExact(__pyx_t_3))) {
-      PyObject* sequence = __pyx_t_3;
-      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
-      if (unlikely(size != 3)) {
-        if (size > 3) __Pyx_RaiseTooManyValuesError(3);
-        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
-        __PYX_ERR(0, 20, __pyx_L1_error)
-      }
-      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-      if (likely(PyTuple_CheckExact(sequence))) {
-        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
-        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
-        __pyx_t_6 = PyTuple_GET_ITEM(sequence, 2); 
-      } else {
-        __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
-        __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
-        __pyx_t_6 = PyList_GET_ITEM(sequence, 2); 
-      }
-      __Pyx_INCREF(__pyx_t_5);
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_6);
-      #else
-      __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 20, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 20, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __pyx_t_6 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 20, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_6);
-      #endif
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    } else {
-      Py_ssize_t index = -1;
-      __pyx_t_12 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 20, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_12);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_12);
-      index = 0; __pyx_t_5 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_5)) goto __pyx_L10_unpacking_failed;
-      __Pyx_GOTREF(__pyx_t_5);
-      index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_2)) goto __pyx_L10_unpacking_failed;
-      __Pyx_GOTREF(__pyx_t_2);
-      index = 2; __pyx_t_6 = __pyx_t_7(__pyx_t_12); if (unlikely(!__pyx_t_6)) goto __pyx_L10_unpacking_failed;
-      __Pyx_GOTREF(__pyx_t_6);
-      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_12), 3) < 0) __PYX_ERR(0, 20, __pyx_L1_error)
-      __pyx_t_7 = NULL;
-      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-      goto __pyx_L11_unpacking_done;
-      __pyx_L10_unpacking_failed:;
-      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-      __pyx_t_7 = NULL;
-      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
-      __PYX_ERR(0, 20, __pyx_L1_error)
-      __pyx_L11_unpacking_done:;
-    }
-    __Pyx_XDECREF_SET(__pyx_v_height, __pyx_t_5);
-    __pyx_t_5 = 0;
-    __Pyx_XDECREF_SET(__pyx_v_width, __pyx_t_2);
-    __pyx_t_2 = 0;
-    __Pyx_XDECREF_SET(__pyx_v_channels, __pyx_t_6);
-    __pyx_t_6 = 0;
+  __pyx_t_1 = (!__pyx_t_2);
+  if (__pyx_t_1) {
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":22
- *         height, width, channels = frame.shape
- *         # Pr-processar a imagem
- *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)             # <<<<<<<<<<<<<<
- * 
- *         # Executar a inferncia no modelo
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":21
+ *         self.load_model()
+ *         if not self.model:
+ *             corpus = f'sentence-transformers/{corpus_name}'             # <<<<<<<<<<<<<<
+ *             model = SentenceTransformer(corpus)
+ *             self.save_model(model)
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_corpus_name, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 21, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_dnn); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_blobFromImage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __pyx_t_6 = PyTuple_New(5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_INCREF(__pyx_v_frame);
-    __Pyx_GIVEREF(__pyx_v_frame);
-    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_frame);
-    __Pyx_INCREF(__pyx_float_0_00392);
-    __Pyx_GIVEREF(__pyx_float_0_00392);
-    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_float_0_00392);
-    __Pyx_INCREF(__pyx_tuple_);
-    __Pyx_GIVEREF(__pyx_tuple_);
-    PyTuple_SET_ITEM(__pyx_t_6, 2, __pyx_tuple_);
-    __Pyx_INCREF(__pyx_tuple__2);
-    __Pyx_GIVEREF(__pyx_tuple__2);
-    PyTuple_SET_ITEM(__pyx_t_6, 3, __pyx_tuple__2);
-    __Pyx_INCREF(Py_True);
-    __Pyx_GIVEREF(Py_True);
-    PyTuple_SET_ITEM(__pyx_t_6, 4, Py_True);
-    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 22, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_crop, Py_False) < 0) __PYX_ERR(0, 22, __pyx_L1_error)
-    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, __pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_sentence_transformers, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 21, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __Pyx_XDECREF_SET(__pyx_v_blob, __pyx_t_5);
+    __pyx_v_corpus = ((PyObject*)__pyx_t_5);
     __pyx_t_5 = 0;
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":25
- * 
- *         # Executar a inferncia no modelo
- *         net.setInput(blob)             # <<<<<<<<<<<<<<
- *         outs = net.forward(output_layers)
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":22
+ *         if not self.model:
+ *             corpus = f'sentence-transformers/{corpus_name}'
+ *             model = SentenceTransformer(corpus)             # <<<<<<<<<<<<<<
+ *             self.save_model(model)
  * 
  */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_net, __pyx_n_s_setInput); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 25, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_6 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_6)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_6);
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = NULL;
+    __pyx_t_6 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_4)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_2, function);
-        __pyx_t_4 = 1;
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_6 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_blob};
-      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 25, __pyx_L1_error)
+      PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_v_corpus};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 22, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_v_model = __pyx_t_5;
+    __pyx_t_5 = 0;
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":26
- *         # Executar a inferncia no modelo
- *         net.setInput(blob)
- *         outs = net.forward(output_layers)             # <<<<<<<<<<<<<<
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":23
+ *             corpus = f'sentence-transformers/{corpus_name}'
+ *             model = SentenceTransformer(corpus)
+ *             self.save_model(model)             # <<<<<<<<<<<<<<
  * 
- *         # Inicializar algumas listas para armazenar os resultados por frame
+ *     @classmethod
  */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_net, __pyx_n_s_forward); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 26, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_6 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_6)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_6);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_save_model); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 23, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = NULL;
+    __pyx_t_6 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_4)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_2, function);
-        __pyx_t_4 = 1;
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_6 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_output_layers};
-      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 26, __pyx_L1_error)
+      PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_v_model};
+      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_6, 1+__pyx_t_6);
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 23, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_5);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_XDECREF_SET(__pyx_v_outs, __pyx_t_5);
-    __pyx_t_5 = 0;
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":29
- * 
- *         # Inicializar algumas listas para armazenar os resultados por frame
- *         class_ids = []             # <<<<<<<<<<<<<<
- *         confidences = []
- *         boxes = []
- */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 29, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __Pyx_XDECREF_SET(__pyx_v_class_ids, ((PyObject*)__pyx_t_5));
-    __pyx_t_5 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":30
- *         # Inicializar algumas listas para armazenar os resultados por frame
- *         class_ids = []
- *         confidences = []             # <<<<<<<<<<<<<<
- *         boxes = []
- * 
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":20
+ *         super().__init__(path, corpus_name)
+ *         self.load_model()
+ *         if not self.model:             # <<<<<<<<<<<<<<
+ *             corpus = f'sentence-transformers/{corpus_name}'
+ *             model = SentenceTransformer(corpus)
  */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 30, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __Pyx_XDECREF_SET(__pyx_v_confidences, ((PyObject*)__pyx_t_5));
-    __pyx_t_5 = 0;
+  }
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":31
- *         class_ids = []
- *         confidences = []
- *         boxes = []             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":12
+ *     _instance = None
  * 
- *         # Interpretar os resultados
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):             # <<<<<<<<<<<<<<
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:
  */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 31, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __Pyx_XDECREF_SET(__pyx_v_boxes, ((PyObject*)__pyx_t_5));
-    __pyx_t_5 = 0;
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":34
- * 
- *         # Interpretar os resultados
- *         for out in outs:             # <<<<<<<<<<<<<<
- *             for detection in out:
- *                 scores = detection[5:]
- */
-    if (likely(PyList_CheckExact(__pyx_v_outs)) || PyTuple_CheckExact(__pyx_v_outs)) {
-      __pyx_t_5 = __pyx_v_outs; __Pyx_INCREF(__pyx_t_5); __pyx_t_13 = 0;
-      __pyx_t_14 = NULL;
-    } else {
-      __pyx_t_13 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_outs); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 34, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_14 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 34, __pyx_L1_error)
-    }
-    for (;;) {
-      if (likely(!__pyx_t_14)) {
-        if (likely(PyList_CheckExact(__pyx_t_5))) {
-          if (__pyx_t_13 >= PyList_GET_SIZE(__pyx_t_5)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L1_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        } else {
-          if (__pyx_t_13 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 34, __pyx_L1_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 34, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        }
-      } else {
-        __pyx_t_2 = __pyx_t_14(__pyx_t_5);
-        if (unlikely(!__pyx_t_2)) {
-          PyObject* exc_type = PyErr_Occurred();
-          if (exc_type) {
-            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 34, __pyx_L1_error)
-          }
-          break;
-        }
-        __Pyx_GOTREF(__pyx_t_2);
-      }
-      __Pyx_XDECREF_SET(__pyx_v_out, __pyx_t_2);
-      __pyx_t_2 = 0;
-
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":35
- *         # Interpretar os resultados
- *         for out in outs:
- *             for detection in out:             # <<<<<<<<<<<<<<
- *                 scores = detection[5:]
- *                 class_id = np.argmax(scores)
- */
-      if (likely(PyList_CheckExact(__pyx_v_out)) || PyTuple_CheckExact(__pyx_v_out)) {
-        __pyx_t_2 = __pyx_v_out; __Pyx_INCREF(__pyx_t_2); __pyx_t_15 = 0;
-        __pyx_t_16 = NULL;
-      } else {
-        __pyx_t_15 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_out); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 35, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __pyx_t_16 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 35, __pyx_L1_error)
-      }
-      for (;;) {
-        if (likely(!__pyx_t_16)) {
-          if (likely(PyList_CheckExact(__pyx_t_2))) {
-            if (__pyx_t_15 >= PyList_GET_SIZE(__pyx_t_2)) break;
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_6 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_15); __Pyx_INCREF(__pyx_t_6); __pyx_t_15++; if (unlikely((0 < 0))) __PYX_ERR(0, 35, __pyx_L1_error)
-            #else
-            __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 35, __pyx_L1_error)
-            __Pyx_GOTREF(__pyx_t_6);
-            #endif
-          } else {
-            if (__pyx_t_15 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
-            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-            __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_15); __Pyx_INCREF(__pyx_t_6); __pyx_t_15++; if (unlikely((0 < 0))) __PYX_ERR(0, 35, __pyx_L1_error)
-            #else
-            __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 35, __pyx_L1_error)
-            __Pyx_GOTREF(__pyx_t_6);
-            #endif
-          }
-        } else {
-          __pyx_t_6 = __pyx_t_16(__pyx_t_2);
-          if (unlikely(!__pyx_t_6)) {
-            PyObject* exc_type = PyErr_Occurred();
-            if (exc_type) {
-              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-              else __PYX_ERR(0, 35, __pyx_L1_error)
-            }
-            break;
-          }
-          __Pyx_GOTREF(__pyx_t_6);
-        }
-        __Pyx_XDECREF_SET(__pyx_v_detection, __pyx_t_6);
-        __pyx_t_6 = 0;
 
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":36
- *         for out in outs:
- *             for detection in out:
- *                 scores = detection[5:]             # <<<<<<<<<<<<<<
- *                 class_id = np.argmax(scores)
- *                 confidence = scores[class_id]
- */
-        __pyx_t_6 = __Pyx_PyObject_GetSlice(__pyx_v_detection, 5, 0, NULL, NULL, &__pyx_slice__3, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 36, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_6);
-        __Pyx_XDECREF_SET(__pyx_v_scores, __pyx_t_6);
-        __pyx_t_6 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":37
- *             for detection in out:
- *                 scores = detection[5:]
- *                 class_id = np.argmax(scores)             # <<<<<<<<<<<<<<
- *                 confidence = scores[class_id]
- *                 if confidence > 0.5:
- */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_np); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 37, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_argmax); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 37, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_12);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __pyx_t_3 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
-          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_12);
-          if (likely(__pyx_t_3)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
-            __Pyx_INCREF(__pyx_t_3);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_12, function);
-            __pyx_t_4 = 1;
-          }
-        }
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_v_scores};
-          __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_12, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-          if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 37, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-        }
-        __Pyx_XDECREF_SET(__pyx_v_class_id, __pyx_t_6);
-        __pyx_t_6 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":38
- *                 scores = detection[5:]
- *                 class_id = np.argmax(scores)
- *                 confidence = scores[class_id]             # <<<<<<<<<<<<<<
- *                 if confidence > 0.5:
- *                     # Coordenadas do bounding box
- */
-        __pyx_t_6 = __Pyx_PyObject_GetItem(__pyx_v_scores, __pyx_v_class_id); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 38, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_6);
-        __Pyx_XDECREF_SET(__pyx_v_confidence, __pyx_t_6);
-        __pyx_t_6 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":39
- *                 class_id = np.argmax(scores)
- *                 confidence = scores[class_id]
- *                 if confidence > 0.5:             # <<<<<<<<<<<<<<
- *                     # Coordenadas do bounding box
- *                     center_x = int(detection[0] * width)
- */
-        __pyx_t_6 = PyObject_RichCompare(__pyx_v_confidence, __pyx_float_0_5, Py_GT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 39, __pyx_L1_error)
-        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 39, __pyx_L1_error)
-        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-        if (__pyx_t_11) {
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":41
- *                 if confidence > 0.5:
- *                     # Coordenadas do bounding box
- *                     center_x = int(detection[0] * width)             # <<<<<<<<<<<<<<
- *                     center_y = int(detection[1] * height)
- *                     w = int(detection[2] * width)
- */
-          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_width); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 41, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_center_x, __pyx_t_6);
-          __pyx_t_6 = 0;
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":42
- *                     # Coordenadas do bounding box
- *                     center_x = int(detection[0] * width)
- *                     center_y = int(detection[1] * height)             # <<<<<<<<<<<<<<
- *                     w = int(detection[2] * width)
- *                     h = int(detection[3] * height)
- */
-          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 42, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_height); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 42, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 42, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_center_y, __pyx_t_6);
-          __pyx_t_6 = 0;
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":43
- *                     center_x = int(detection[0] * width)
- *                     center_y = int(detection[1] * height)
- *                     w = int(detection[2] * width)             # <<<<<<<<<<<<<<
- *                     h = int(detection[3] * height)
- * 
- */
-          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 43, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_width); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 43, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 43, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_w, __pyx_t_6);
-          __pyx_t_6 = 0;
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":44
- *                     center_y = int(detection[1] * height)
- *                     w = int(detection[2] * width)
- *                     h = int(detection[3] * height)             # <<<<<<<<<<<<<<
- * 
- *                     # Coordenadas do topo esquerdo
- */
-          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_detection, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 44, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Multiply(__pyx_t_6, __pyx_v_height); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 44, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 44, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_h, __pyx_t_6);
-          __pyx_t_6 = 0;
+  /* function exit code */
+  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+  goto __pyx_L0;
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_corpus);
+  __Pyx_XDECREF(__pyx_v_model);
+  __Pyx_XDECREF(__pyx_v_corpus_name);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":47
- * 
- *                     # Coordenadas do topo esquerdo
- *                     x = int(center_x - w / 2)             # <<<<<<<<<<<<<<
- *                     y = int(center_y - h / 2)
- * 
- */
-          __pyx_t_6 = __Pyx_PyInt_TrueDivideObjC(__pyx_v_w, __pyx_int_2, 2, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 47, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Subtract(__pyx_v_center_x, __pyx_t_6); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 47, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 47, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_6);
-          __pyx_t_6 = 0;
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":48
- *                     # Coordenadas do topo esquerdo
- *                     x = int(center_x - w / 2)
- *                     y = int(center_y - h / 2)             # <<<<<<<<<<<<<<
+/* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
  * 
- *                     boxes.append([x, y, w, h])
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
  */
-          __pyx_t_6 = __Pyx_PyInt_TrueDivideObjC(__pyx_v_h, __pyx_int_2, 2, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 48, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_12 = PyNumber_Subtract(__pyx_v_center_y, __pyx_t_6); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 48, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_12);
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-          __pyx_t_6 = __Pyx_PyNumber_Int(__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 48, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
-          __Pyx_XDECREF_SET(__pyx_v_y, __pyx_t_6);
-          __pyx_t_6 = 0;
 
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":50
- *                     y = int(center_y - h / 2)
- * 
- *                     boxes.append([x, y, w, h])             # <<<<<<<<<<<<<<
- *                     confidences.append(float(confidence))
- *                     class_ids.append(class_id)
- */
-          __pyx_t_6 = PyList_New(4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 50, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __Pyx_INCREF(__pyx_v_x);
-          __Pyx_GIVEREF(__pyx_v_x);
-          PyList_SET_ITEM(__pyx_t_6, 0, __pyx_v_x);
-          __Pyx_INCREF(__pyx_v_y);
-          __Pyx_GIVEREF(__pyx_v_y);
-          PyList_SET_ITEM(__pyx_t_6, 1, __pyx_v_y);
-          __Pyx_INCREF(__pyx_v_w);
-          __Pyx_GIVEREF(__pyx_v_w);
-          PyList_SET_ITEM(__pyx_t_6, 2, __pyx_v_w);
-          __Pyx_INCREF(__pyx_v_h);
-          __Pyx_GIVEREF(__pyx_v_h);
-          PyList_SET_ITEM(__pyx_t_6, 3, __pyx_v_h);
-          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_boxes, __pyx_t_6); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 50, __pyx_L1_error)
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_2__defaults__(CYTHON_UNUSED PyObject *__pyx_self) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("__defaults__", 0);
+  __Pyx_XDECREF(__pyx_r);
 
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":51
- * 
- *                     boxes.append([x, y, w, h])
- *                     confidences.append(float(confidence))             # <<<<<<<<<<<<<<
- *                     class_ids.append(class_id)
- * 
- */
-          __pyx_t_6 = __Pyx_PyNumber_Float(__pyx_v_confidence); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_6);
-          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_confidences, __pyx_t_6); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 51, __pyx_L1_error)
-          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":52
- *                     boxes.append([x, y, w, h])
- *                     confidences.append(float(confidence))
- *                     class_ids.append(class_id)             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":26
  * 
- *         # Aplicar Non-Maximum Suppression para eliminar deteces redundantes
+ *     @classmethod
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):             # <<<<<<<<<<<<<<
+ *         if cls._instance is None:
+ *             cls._instance = cls(path, vect_lang, corpus_name)
+ */
+  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_INCREF(__Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_vect_lang);
+  __Pyx_GIVEREF(__Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_vect_lang);
+  PyTuple_SET_ITEM(__pyx_t_1, 0, __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self)->__pyx_arg_vect_lang);
+  __Pyx_INCREF(((PyObject *)Py_None));
+  __Pyx_GIVEREF(((PyObject *)Py_None));
+  PyTuple_SET_ITEM(__pyx_t_1, 1, ((PyObject *)Py_None));
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
+ * 
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
  */
-          __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_class_ids, __pyx_v_class_id); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 52, __pyx_L1_error)
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
+  __Pyx_INCREF(Py_None);
+  __Pyx_GIVEREF(Py_None);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, Py_None);
+  __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
+  goto __pyx_L0;
 
-          /* "wrapper/infra/VideoObjectsExtractor.pyx":39
- *                 class_id = np.argmax(scores)
- *                 confidence = scores[class_id]
- *                 if confidence > 0.5:             # <<<<<<<<<<<<<<
- *                     # Coordenadas do bounding box
- *                     center_x = int(detection[0] * width)
- */
-        }
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.__defaults__", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":35
- *         # Interpretar os resultados
- *         for out in outs:
- *             for detection in out:             # <<<<<<<<<<<<<<
- *                 scores = detection[5:]
- *                 class_id = np.argmax(scores)
- */
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_3instance(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_2instance, "SentenceTransformerVectorizer.instance(cls, path, vect_lang: DocLanguage = DocLanguage.ENGLISH, corpus_name=None)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_3instance = {"instance", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_3instance, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_2instance};
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_3instance(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_cls = 0;
+  PyObject *__pyx_v_path = 0;
+  PyObject *__pyx_v_vect_lang = 0;
+  PyObject *__pyx_v_corpus_name = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("instance (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_cls,&__pyx_n_s_path,&__pyx_n_s_vect_lang,&__pyx_n_s_corpus_name,0};
+    PyObject* values[4] = {0,0,0,0};
+    __pyx_defaults1 *__pyx_dynamic_args = __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_self);
+    values[2] = __pyx_dynamic_args->__pyx_arg_vect_lang;
+    values[3] = ((PyObject *)((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_cls)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 25, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_path)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 25, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("instance", 0, 2, 4, 1); __PYX_ERR(0, 25, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_vect_lang);
+          if (value) { values[2] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 25, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_corpus_name);
+          if (value) { values[3] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 25, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "instance") < 0)) __PYX_ERR(0, 25, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
       }
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":34
- * 
- *         # Interpretar os resultados
- *         for out in outs:             # <<<<<<<<<<<<<<
- *             for detection in out:
- *                 scores = detection[5:]
- */
     }
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_v_cls = values[0];
+    __pyx_v_path = values[1];
+    __pyx_v_vect_lang = values[2];
+    __pyx_v_corpus_name = values[3];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("instance", 0, 2, 4, __pyx_nargs); __PYX_ERR(0, 25, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.instance", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_2instance(__pyx_self, __pyx_v_cls, __pyx_v_path, __pyx_v_vect_lang, __pyx_v_corpus_name);
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":55
- * 
- *         # Aplicar Non-Maximum Suppression para eliminar deteces redundantes
- *         indexes = cv2.dnn.NMSBoxes(boxes, confidences, 0.5, 0.4)             # <<<<<<<<<<<<<<
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_2instance(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_cls, PyObject *__pyx_v_path, PyObject *__pyx_v_vect_lang, PyObject *__pyx_v_corpus_name) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  int __pyx_t_2;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_5;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("instance", 0);
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":27
+ *     @classmethod
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:             # <<<<<<<<<<<<<<
+ *             cls._instance = cls(path, vect_lang, corpus_name)
+ *         return cls._instance
+ */
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_cls, __pyx_n_s_instance); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 27, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = (__pyx_t_1 == Py_None);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  if (__pyx_t_2) {
+
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":28
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
+ *             cls._instance = cls(path, vect_lang, corpus_name)             # <<<<<<<<<<<<<<
+ *         return cls._instance
  * 
- *         # Lista de objetos identificados no frame
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_dnn); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 55, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_6);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_NMSBoxes); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-    __pyx_t_6 = NULL;
-    __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
-      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
-      if (likely(__pyx_t_6)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-        __Pyx_INCREF(__pyx_t_6);
+    __Pyx_INCREF(__pyx_v_cls);
+    __pyx_t_3 = __pyx_v_cls; __pyx_t_4 = NULL;
+    __pyx_t_5 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_4)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+        __Pyx_INCREF(__pyx_t_4);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_2, function);
-        __pyx_t_4 = 1;
+        __Pyx_DECREF_SET(__pyx_t_3, function);
+        __pyx_t_5 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[5] = {__pyx_t_6, __pyx_v_boxes, __pyx_v_confidences, __pyx_float_0_5, __pyx_float_0_4};
-      __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 4+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
-      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 55, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+      PyObject *__pyx_callargs[4] = {__pyx_t_4, __pyx_v_path, __pyx_v_vect_lang, __pyx_v_corpus_name};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 3+__pyx_t_5);
+      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __Pyx_XDECREF_SET(__pyx_v_indexes, __pyx_t_5);
-    __pyx_t_5 = 0;
-
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":58
- * 
- *         # Lista de objetos identificados no frame
- *         objects = []             # <<<<<<<<<<<<<<
- *         for i in range(len(boxes)):
- *             if i in indexes:
- */
-    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 58, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __Pyx_XDECREF_SET(__pyx_v_objects, ((PyObject*)__pyx_t_5));
-    __pyx_t_5 = 0;
+    if (__Pyx_PyObject_SetAttrStr(__pyx_v_cls, __pyx_n_s_instance, __pyx_t_1) < 0) __PYX_ERR(0, 28, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":59
- *         # Lista de objetos identificados no frame
- *         objects = []
- *         for i in range(len(boxes)):             # <<<<<<<<<<<<<<
- *             if i in indexes:
- *                 label = str(classes[class_ids[i]])
+    /* "wrapper/core/SentenceTransformerVectorizer.pyx":27
+ *     @classmethod
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:             # <<<<<<<<<<<<<<
+ *             cls._instance = cls(path, vect_lang, corpus_name)
+ *         return cls._instance
  */
-    __pyx_t_13 = PyList_GET_SIZE(__pyx_v_boxes); if (unlikely(__pyx_t_13 == ((Py_ssize_t)-1))) __PYX_ERR(0, 59, __pyx_L1_error)
-    __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_13); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 59, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-    if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
-      __pyx_t_5 = __pyx_t_2; __Pyx_INCREF(__pyx_t_5); __pyx_t_13 = 0;
-      __pyx_t_14 = NULL;
-    } else {
-      __pyx_t_13 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 59, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_5);
-      __pyx_t_14 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_5); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 59, __pyx_L1_error)
-    }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-    for (;;) {
-      if (likely(!__pyx_t_14)) {
-        if (likely(PyList_CheckExact(__pyx_t_5))) {
-          if (__pyx_t_13 >= PyList_GET_SIZE(__pyx_t_5)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        } else {
-          if (__pyx_t_13 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
-          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_13); __Pyx_INCREF(__pyx_t_2); __pyx_t_13++; if (unlikely((0 < 0))) __PYX_ERR(0, 59, __pyx_L1_error)
-          #else
-          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_13); __pyx_t_13++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 59, __pyx_L1_error)
-          __Pyx_GOTREF(__pyx_t_2);
-          #endif
-        }
-      } else {
-        __pyx_t_2 = __pyx_t_14(__pyx_t_5);
-        if (unlikely(!__pyx_t_2)) {
-          PyObject* exc_type = PyErr_Occurred();
-          if (exc_type) {
-            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-            else __PYX_ERR(0, 59, __pyx_L1_error)
-          }
-          break;
-        }
-        __Pyx_GOTREF(__pyx_t_2);
-      }
-      __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_2);
-      __pyx_t_2 = 0;
+  }
 
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":60
- *         objects = []
- *         for i in range(len(boxes)):
- *             if i in indexes:             # <<<<<<<<<<<<<<
- *                 label = str(classes[class_ids[i]])
- *                 confidence = confidences[i]
- */
-      __pyx_t_11 = (__Pyx_PySequence_ContainsTF(__pyx_v_i, __pyx_v_indexes, Py_EQ)); if (unlikely((__pyx_t_11 < 0))) __PYX_ERR(0, 60, __pyx_L1_error)
-      if (__pyx_t_11) {
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":61
- *         for i in range(len(boxes)):
- *             if i in indexes:
- *                 label = str(classes[class_ids[i]])             # <<<<<<<<<<<<<<
- *                 confidence = confidences[i]
- *                 objects.append((label, confidence))
- */
-        __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_class_ids, __pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __pyx_t_6 = __Pyx_PyObject_GetItem(__pyx_v_classes, __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 61, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_6);
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-        __pyx_t_2 = __Pyx_PyObject_Str(__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
-        __Pyx_XDECREF_SET(__pyx_v_label, __pyx_t_2);
-        __pyx_t_2 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":62
- *             if i in indexes:
- *                 label = str(classes[class_ids[i]])
- *                 confidence = confidences[i]             # <<<<<<<<<<<<<<
- *                 objects.append((label, confidence))
- *         objects_per_frame.append(objects)
- */
-        __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_confidences, __pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 62, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_XDECREF_SET(__pyx_v_confidence, __pyx_t_2);
-        __pyx_t_2 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":63
- *                 label = str(classes[class_ids[i]])
- *                 confidence = confidences[i]
- *                 objects.append((label, confidence))             # <<<<<<<<<<<<<<
- *         objects_per_frame.append(objects)
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":29
+ *         if cls._instance is None:
+ *             cls._instance = cls(path, vect_lang, corpus_name)
+ *         return cls._instance             # <<<<<<<<<<<<<<
  * 
+ *     def encode(self, file:File):
  */
-        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 63, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_2);
-        __Pyx_INCREF(__pyx_v_label);
-        __Pyx_GIVEREF(__pyx_v_label);
-        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_label);
-        __Pyx_INCREF(__pyx_v_confidence);
-        __Pyx_GIVEREF(__pyx_v_confidence);
-        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_confidence);
-        __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_objects, __pyx_t_2); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 63, __pyx_L1_error)
-        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-
-        /* "wrapper/infra/VideoObjectsExtractor.pyx":60
- *         objects = []
- *         for i in range(len(boxes)):
- *             if i in indexes:             # <<<<<<<<<<<<<<
- *                 label = str(classes[class_ids[i]])
- *                 confidence = confidences[i]
- */
-      }
-
-      /* "wrapper/infra/VideoObjectsExtractor.pyx":59
- *         # Lista de objetos identificados no frame
- *         objects = []
- *         for i in range(len(boxes)):             # <<<<<<<<<<<<<<
- *             if i in indexes:
- *                 label = str(classes[class_ids[i]])
- */
-    }
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_cls, __pyx_n_s_instance); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 29, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":64
- *                 confidence = confidences[i]
- *                 objects.append((label, confidence))
- *         objects_per_frame.append(objects)             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
  * 
- *     video_capture.release()
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
  */
-    __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_objects_per_frame, __pyx_v_objects); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 64, __pyx_L1_error)
 
-    /* "wrapper/infra/VideoObjectsExtractor.pyx":15
- *     objects_per_frame = []
- * 
- *     for i in range(frame_count):             # <<<<<<<<<<<<<<
- *         ret, frame = video_capture.read()
- *         if not ret:
- */
-  }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  goto __pyx_L23_for_end;
-  __pyx_L6_break:;
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  goto __pyx_L23_for_end;
-  __pyx_L23_for_end:;
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.instance", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":66
- *         objects_per_frame.append(objects)
- * 
- *     video_capture.release()             # <<<<<<<<<<<<<<
+/* "wrapper/core/SentenceTransformerVectorizer.pyx":31
+ *         return cls._instance
  * 
- *     return objects_per_frame
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         return self.model.encode(file.text, convert_to_tensor=False)
  */
-  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_video_capture, __pyx_n_s_release); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 66, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_5);
-  __pyx_t_2 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
-    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
-    if (likely(__pyx_t_2)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-      __Pyx_INCREF(__pyx_t_2);
-      __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_5, function);
-      __pyx_t_4 = 1;
-    }
-  }
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_5encode(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_4encode, "SentenceTransformerVectorizer.encode(self, file: File)");
+static PyMethodDef __pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_5encode = {"encode", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_5encode, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_4encode};
+static PyObject *__pyx_pw_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_5encode(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_self = 0;
+  PyObject *__pyx_v_file = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("encode (wrapper)", 0);
   {
-    PyObject *__pyx_callargs[1] = {__pyx_t_2, };
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 66, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_file,0};
+    PyObject* values[2] = {0,0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_self)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_file)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 31, __pyx_L3_error)
+        else {
+          __Pyx_RaiseArgtupleInvalid("encode", 1, 2, 2, 1); __PYX_ERR(0, 31, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "encode") < 0)) __PYX_ERR(0, 31, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 2)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+      values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+    }
+    __pyx_v_self = values[0];
+    __pyx_v_file = values[1];
   }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("encode", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 31, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.encode", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_4encode(__pyx_self, __pyx_v_self, __pyx_v_file);
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":68
- *     video_capture.release()
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_4encode(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_file) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("encode", 0);
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":32
  * 
- *     return objects_per_frame             # <<<<<<<<<<<<<<
+ *     def encode(self, file:File):
+ *         return self.model.encode(file.text, convert_to_tensor=False)             # <<<<<<<<<<<<<<
  */
   __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_objects_per_frame);
-  __pyx_r = __pyx_v_objects_per_frame;
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_model); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_encode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_file, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_GIVEREF(__pyx_t_1);
+  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
+  __pyx_t_1 = 0;
+  __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_convert_to_tensor, Py_False) < 0) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_r = __pyx_t_4;
+  __pyx_t_4 = 0;
   goto __pyx_L0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
- * import numpy as np
- * 
- * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
- *     net, output_layers, classes = get_layers()
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":31
+ *         return cls._instance
  * 
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         return self.model.encode(file.text, convert_to_tensor=False)
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_6);
-  __Pyx_XDECREF(__pyx_t_12);
-  __Pyx_AddTraceback("wrapper.infra.VideoObjectsExtractor.identify_objects_in_video", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_AddTraceback("wrapper.core.SentenceTransformerVectorizer.SentenceTransformerVectorizer.encode", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_net);
-  __Pyx_XDECREF(__pyx_v_output_layers);
-  __Pyx_XDECREF(__pyx_v_classes);
-  __Pyx_XDECREF(__pyx_v_video_capture);
-  __Pyx_XDECREF(__pyx_v_frame_count);
-  __Pyx_XDECREF(__pyx_v_objects_per_frame);
-  __Pyx_XDECREF(__pyx_v_i);
-  __Pyx_XDECREF(__pyx_v_ret);
-  __Pyx_XDECREF(__pyx_v_frame);
-  __Pyx_XDECREF(__pyx_v_height);
-  __Pyx_XDECREF(__pyx_v_width);
-  __Pyx_XDECREF(__pyx_v_channels);
-  __Pyx_XDECREF(__pyx_v_blob);
-  __Pyx_XDECREF(__pyx_v_outs);
-  __Pyx_XDECREF(__pyx_v_class_ids);
-  __Pyx_XDECREF(__pyx_v_confidences);
-  __Pyx_XDECREF(__pyx_v_boxes);
-  __Pyx_XDECREF(__pyx_v_out);
-  __Pyx_XDECREF(__pyx_v_detection);
-  __Pyx_XDECREF(__pyx_v_scores);
-  __Pyx_XDECREF(__pyx_v_class_id);
-  __Pyx_XDECREF(__pyx_v_confidence);
-  __Pyx_XDECREF(__pyx_v_center_x);
-  __Pyx_XDECREF(__pyx_v_center_y);
-  __Pyx_XDECREF(__pyx_v_w);
-  __Pyx_XDECREF(__pyx_v_h);
-  __Pyx_XDECREF(__pyx_v_x);
-  __Pyx_XDECREF(__pyx_v_y);
-  __Pyx_XDECREF(__pyx_v_indexes);
-  __Pyx_XDECREF(__pyx_v_objects);
-  __Pyx_XDECREF(__pyx_v_label);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
@@ -3971,151 +3280,126 @@
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_n_s_CAP_PROP_FRAME_COUNT, __pyx_k_CAP_PROP_FRAME_COUNT, sizeof(__pyx_k_CAP_PROP_FRAME_COUNT), 0, 0, 1, 1},
-    {&__pyx_n_s_ImageObjectsExtractor, __pyx_k_ImageObjectsExtractor, sizeof(__pyx_k_ImageObjectsExtractor), 0, 0, 1, 1},
-    {&__pyx_n_s_NMSBoxes, __pyx_k_NMSBoxes, sizeof(__pyx_k_NMSBoxes), 0, 0, 1, 1},
-    {&__pyx_n_s_VideoCapture, __pyx_k_VideoCapture, sizeof(__pyx_k_VideoCapture), 0, 0, 1, 1},
-    {&__pyx_n_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 1},
-    {&__pyx_kp_u__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 1, 0, 0},
+    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_s_ENGLISH, __pyx_k_ENGLISH, sizeof(__pyx_k_ENGLISH), 0, 0, 1, 1},
+    {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
+    {&__pyx_n_s_SentenceTransformer, __pyx_k_SentenceTransformer, sizeof(__pyx_k_SentenceTransformer), 0, 0, 1, 1},
+    {&__pyx_n_s_SentenceTransformerVectorizer, __pyx_k_SentenceTransformerVectorizer, sizeof(__pyx_k_SentenceTransformerVectorizer), 0, 0, 1, 1},
+    {&__pyx_n_s_SentenceTransformerVectorizer_2, __pyx_k_SentenceTransformerVectorizer_2, sizeof(__pyx_k_SentenceTransformerVectorizer_2), 0, 0, 1, 1},
+    {&__pyx_n_s_SentenceTransformerVectorizer_en, __pyx_k_SentenceTransformerVectorizer_en, sizeof(__pyx_k_SentenceTransformerVectorizer_en), 0, 0, 1, 1},
+    {&__pyx_n_s_SentenceTransformerVectorizer_in, __pyx_k_SentenceTransformerVectorizer_in, sizeof(__pyx_k_SentenceTransformerVectorizer_in), 0, 0, 1, 1},
+    {&__pyx_n_s_Vectorizer, __pyx_k_Vectorizer, sizeof(__pyx_k_Vectorizer), 0, 0, 1, 1},
     {&__pyx_n_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 1},
-    {&__pyx_n_s_argmax, __pyx_k_argmax, sizeof(__pyx_k_argmax), 0, 0, 1, 1},
+    {&__pyx_kp_u_all_MiniLM_L6_v2, __pyx_k_all_MiniLM_L6_v2, sizeof(__pyx_k_all_MiniLM_L6_v2), 0, 1, 0, 0},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
-    {&__pyx_n_s_blob, __pyx_k_blob, sizeof(__pyx_k_blob), 0, 0, 1, 1},
-    {&__pyx_n_s_blobFromImage, __pyx_k_blobFromImage, sizeof(__pyx_k_blobFromImage), 0, 0, 1, 1},
-    {&__pyx_n_s_boxes, __pyx_k_boxes, sizeof(__pyx_k_boxes), 0, 0, 1, 1},
-    {&__pyx_n_s_center_x, __pyx_k_center_x, sizeof(__pyx_k_center_x), 0, 0, 1, 1},
-    {&__pyx_n_s_center_y, __pyx_k_center_y, sizeof(__pyx_k_center_y), 0, 0, 1, 1},
-    {&__pyx_n_s_channels, __pyx_k_channels, sizeof(__pyx_k_channels), 0, 0, 1, 1},
-    {&__pyx_n_s_class_getitem, __pyx_k_class_getitem, sizeof(__pyx_k_class_getitem), 0, 0, 1, 1},
-    {&__pyx_n_s_class_id, __pyx_k_class_id, sizeof(__pyx_k_class_id), 0, 0, 1, 1},
-    {&__pyx_n_s_class_ids, __pyx_k_class_ids, sizeof(__pyx_k_class_ids), 0, 0, 1, 1},
-    {&__pyx_n_s_classes, __pyx_k_classes, sizeof(__pyx_k_classes), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_confidence, __pyx_k_confidence, sizeof(__pyx_k_confidence), 0, 0, 1, 1},
-    {&__pyx_n_s_confidences, __pyx_k_confidences, sizeof(__pyx_k_confidences), 0, 0, 1, 1},
-    {&__pyx_n_s_crop, __pyx_k_crop, sizeof(__pyx_k_crop), 0, 0, 1, 1},
-    {&__pyx_n_s_cv2, __pyx_k_cv2, sizeof(__pyx_k_cv2), 0, 0, 1, 1},
-    {&__pyx_n_s_detection, __pyx_k_detection, sizeof(__pyx_k_detection), 0, 0, 1, 1},
-    {&__pyx_n_s_dnn, __pyx_k_dnn, sizeof(__pyx_k_dnn), 0, 0, 1, 1},
-    {&__pyx_n_s_forward, __pyx_k_forward, sizeof(__pyx_k_forward), 0, 0, 1, 1},
-    {&__pyx_n_s_frame, __pyx_k_frame, sizeof(__pyx_k_frame), 0, 0, 1, 1},
-    {&__pyx_n_s_frame_count, __pyx_k_frame_count, sizeof(__pyx_k_frame_count), 0, 0, 1, 1},
-    {&__pyx_n_s_get, __pyx_k_get, sizeof(__pyx_k_get), 0, 0, 1, 1},
-    {&__pyx_n_s_get_layers, __pyx_k_get_layers, sizeof(__pyx_k_get_layers), 0, 0, 1, 1},
-    {&__pyx_n_s_h, __pyx_k_h, sizeof(__pyx_k_h), 0, 0, 1, 1},
-    {&__pyx_n_s_height, __pyx_k_height, sizeof(__pyx_k_height), 0, 0, 1, 1},
-    {&__pyx_n_s_i, __pyx_k_i, sizeof(__pyx_k_i), 0, 0, 1, 1},
-    {&__pyx_n_s_identify_objects_in_video, __pyx_k_identify_objects_in_video, sizeof(__pyx_k_identify_objects_in_video), 0, 0, 1, 1},
+    {&__pyx_n_s_cls, __pyx_k_cls, sizeof(__pyx_k_cls), 0, 0, 1, 1},
+    {&__pyx_n_s_convert_to_tensor, __pyx_k_convert_to_tensor, sizeof(__pyx_k_convert_to_tensor), 0, 0, 1, 1},
+    {&__pyx_n_s_corpus, __pyx_k_corpus, sizeof(__pyx_k_corpus), 0, 0, 1, 1},
+    {&__pyx_n_s_corpus_name, __pyx_k_corpus_name, sizeof(__pyx_k_corpus_name), 0, 0, 1, 1},
+    {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
+    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
+    {&__pyx_n_s_encode, __pyx_k_encode, sizeof(__pyx_k_encode), 0, 0, 1, 1},
+    {&__pyx_n_s_file, __pyx_k_file, sizeof(__pyx_k_file), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
-    {&__pyx_n_s_indexes, __pyx_k_indexes, sizeof(__pyx_k_indexes), 0, 0, 1, 1},
-    {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
+    {&__pyx_n_s_infra_DocLanguage, __pyx_k_infra_DocLanguage, sizeof(__pyx_k_infra_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
+    {&__pyx_n_s_init_subclass, __pyx_k_init_subclass, sizeof(__pyx_k_init_subclass), 0, 0, 1, 1},
+    {&__pyx_n_s_instance, __pyx_k_instance, sizeof(__pyx_k_instance), 0, 0, 1, 1},
+    {&__pyx_n_s_instance_2, __pyx_k_instance_2, sizeof(__pyx_k_instance_2), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
-    {&__pyx_n_s_label, __pyx_k_label, sizeof(__pyx_k_label), 0, 0, 1, 1},
+    {&__pyx_n_s_load_model, __pyx_k_load_model, sizeof(__pyx_k_load_model), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
+    {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
+    {&__pyx_n_s_model, __pyx_k_model, sizeof(__pyx_k_model), 0, 0, 1, 1},
+    {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
+    {&__pyx_n_s_mro_entries, __pyx_k_mro_entries, sizeof(__pyx_k_mro_entries), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_net, __pyx_k_net, sizeof(__pyx_k_net), 0, 0, 1, 1},
-    {&__pyx_n_s_np, __pyx_k_np, sizeof(__pyx_k_np), 0, 0, 1, 1},
-    {&__pyx_n_s_numpy, __pyx_k_numpy, sizeof(__pyx_k_numpy), 0, 0, 1, 1},
-    {&__pyx_n_s_objects, __pyx_k_objects, sizeof(__pyx_k_objects), 0, 0, 1, 1},
-    {&__pyx_n_s_objects_per_frame, __pyx_k_objects_per_frame, sizeof(__pyx_k_objects_per_frame), 0, 0, 1, 1},
-    {&__pyx_n_s_out, __pyx_k_out, sizeof(__pyx_k_out), 0, 0, 1, 1},
-    {&__pyx_n_s_output_layers, __pyx_k_output_layers, sizeof(__pyx_k_output_layers), 0, 0, 1, 1},
-    {&__pyx_n_s_outs, __pyx_k_outs, sizeof(__pyx_k_outs), 0, 0, 1, 1},
-    {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
-    {&__pyx_n_s_read, __pyx_k_read, sizeof(__pyx_k_read), 0, 0, 1, 1},
-    {&__pyx_n_s_release, __pyx_k_release, sizeof(__pyx_k_release), 0, 0, 1, 1},
-    {&__pyx_n_s_ret, __pyx_k_ret, sizeof(__pyx_k_ret), 0, 0, 1, 1},
-    {&__pyx_n_s_scores, __pyx_k_scores, sizeof(__pyx_k_scores), 0, 0, 1, 1},
-    {&__pyx_n_s_setInput, __pyx_k_setInput, sizeof(__pyx_k_setInput), 0, 0, 1, 1},
-    {&__pyx_n_s_shape, __pyx_k_shape, sizeof(__pyx_k_shape), 0, 0, 1, 1},
-    {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
-    {&__pyx_kp_s_src_wrapper_infra_VideoObjectsEx, __pyx_k_src_wrapper_infra_VideoObjectsEx, sizeof(__pyx_k_src_wrapper_infra_VideoObjectsEx), 0, 0, 1, 0},
+    {&__pyx_kp_u_paraphrase_multilingual_MiniLM_L, __pyx_k_paraphrase_multilingual_MiniLM_L, sizeof(__pyx_k_paraphrase_multilingual_MiniLM_L), 0, 1, 0, 0},
+    {&__pyx_n_s_path, __pyx_k_path, sizeof(__pyx_k_path), 0, 0, 1, 1},
+    {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
+    {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
+    {&__pyx_n_s_save_model, __pyx_k_save_model, sizeof(__pyx_k_save_model), 0, 0, 1, 1},
+    {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
+    {&__pyx_kp_u_sentence_transformers, __pyx_k_sentence_transformers, sizeof(__pyx_k_sentence_transformers), 0, 1, 0, 0},
+    {&__pyx_n_s_sentence_transformers_2, __pyx_k_sentence_transformers_2, sizeof(__pyx_k_sentence_transformers_2), 0, 0, 1, 1},
+    {&__pyx_n_s_set_name, __pyx_k_set_name, sizeof(__pyx_k_set_name), 0, 0, 1, 1},
+    {&__pyx_kp_s_src_wrapper_core_SentenceTransfo, __pyx_k_src_wrapper_core_SentenceTransfo, sizeof(__pyx_k_src_wrapper_core_SentenceTransfo), 0, 0, 1, 0},
+    {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_video_capture, __pyx_k_video_capture, sizeof(__pyx_k_video_capture), 0, 0, 1, 1},
-    {&__pyx_n_s_video_path, __pyx_k_video_path, sizeof(__pyx_k_video_path), 0, 0, 1, 1},
-    {&__pyx_n_s_w, __pyx_k_w, sizeof(__pyx_k_w), 0, 0, 1, 1},
-    {&__pyx_n_s_width, __pyx_k_width, sizeof(__pyx_k_width), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_infra_VideoObjectsExtrac, __pyx_k_wrapper_infra_VideoObjectsExtrac, sizeof(__pyx_k_wrapper_infra_VideoObjectsExtrac), 0, 0, 1, 1},
-    {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
-    {&__pyx_n_s_y, __pyx_k_y, sizeof(__pyx_k_y), 0, 0, 1, 1},
+    {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
+    {&__pyx_n_s_vect_lang, __pyx_k_vect_lang, sizeof(__pyx_k_vect_lang), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_core_SentenceTransformer, __pyx_k_wrapper_core_SentenceTransformer, sizeof(__pyx_k_wrapper_core_SentenceTransformer), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 15, __pyx_L1_error)
+  __pyx_builtin_super = __Pyx_GetBuiltinName(__pyx_n_s_super); if (!__pyx_builtin_super) __PYX_ERR(0, 18, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":22
- *         height, width, channels = frame.shape
- *         # Pr-processar a imagem
- *         blob = cv2.dnn.blobFromImage(frame, 0.00392, (416, 416), (0, 0, 0), True, crop=False)             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":12
+ *     _instance = None
  * 
- *         # Executar a inferncia no modelo
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):             # <<<<<<<<<<<<<<
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:
  */
-  __pyx_tuple_ = PyTuple_Pack(2, __pyx_int_416, __pyx_int_416); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 22, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple_);
-  __Pyx_GIVEREF(__pyx_tuple_);
-  __pyx_tuple__2 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 22, __pyx_L1_error)
+  __pyx_tuple__2 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_path, __pyx_n_s_vect_lang, __pyx_n_s_corpus_name, __pyx_n_s_corpus, __pyx_n_s_model); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 12, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__2);
   __Pyx_GIVEREF(__pyx_tuple__2);
+  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_SentenceTransfo, __pyx_n_s_init, 12, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 12, __pyx_L1_error)
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":36
- *         for out in outs:
- *             for detection in out:
- *                 scores = detection[5:]             # <<<<<<<<<<<<<<
- *                 class_id = np.argmax(scores)
- *                 confidence = scores[class_id]
- */
-  __pyx_slice__3 = PySlice_New(__pyx_int_5, Py_None, Py_None); if (unlikely(!__pyx_slice__3)) __PYX_ERR(0, 36, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_slice__3);
-  __Pyx_GIVEREF(__pyx_slice__3);
-
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
- * import numpy as np
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
  * 
- * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
- *     net, output_layers, classes = get_layers()
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
+ */
+  __pyx_tuple__4 = PyTuple_Pack(4, __pyx_n_s_cls, __pyx_n_s_path, __pyx_n_s_vect_lang, __pyx_n_s_corpus_name); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__4);
+  __Pyx_GIVEREF(__pyx_tuple__4);
+  __pyx_codeobj__5 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__4, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_SentenceTransfo, __pyx_n_s_instance_2, 25, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__5)) __PYX_ERR(0, 25, __pyx_L1_error)
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":31
+ *         return cls._instance
  * 
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         return self.model.encode(file.text, convert_to_tensor=False)
  */
-  __pyx_tuple__6 = PyTuple_Pack(32, __pyx_n_s_video_path, __pyx_n_s_net, __pyx_n_s_output_layers, __pyx_n_s_classes, __pyx_n_s_video_capture, __pyx_n_s_frame_count, __pyx_n_s_objects_per_frame, __pyx_n_s_i, __pyx_n_s_ret, __pyx_n_s_frame, __pyx_n_s_height, __pyx_n_s_width, __pyx_n_s_channels, __pyx_n_s_blob, __pyx_n_s_outs, __pyx_n_s_class_ids, __pyx_n_s_confidences, __pyx_n_s_boxes, __pyx_n_s_out, __pyx_n_s_detection, __pyx_n_s_scores, __pyx_n_s_class_id, __pyx_n_s_confidence, __pyx_n_s_center_x, __pyx_n_s_center_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_indexes, __pyx_n_s_objects, __pyx_n_s_label); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_tuple__6 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_file); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__6);
   __Pyx_GIVEREF(__pyx_tuple__6);
-  __pyx_codeobj__7 = (PyObject*)__Pyx_PyCode_New(1, 0, 0, 32, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__6, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_VideoObjectsEx, __pyx_n_s_identify_objects_in_video, 5, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__7)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_codeobj__7 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__6, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_core_SentenceTransfo, __pyx_n_s_encode, 31, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__7)) __PYX_ERR(0, 31, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
-  if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
-  __pyx_float_0_4 = PyFloat_FromDouble(0.4); if (unlikely(!__pyx_float_0_4)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_float_0_5 = PyFloat_FromDouble(0.5); if (unlikely(!__pyx_float_0_5)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_float_0_00392 = PyFloat_FromDouble(0.00392); if (unlikely(!__pyx_float_0_00392)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_2 = PyInt_FromLong(2); if (unlikely(!__pyx_int_2)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_5 = PyInt_FromLong(5); if (unlikely(!__pyx_int_5)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_int_416 = PyInt_FromLong(416); if (unlikely(!__pyx_int_416)) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 2, __pyx_L1_error);
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -4187,31 +3471,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_VideoObjectsExtractor(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_SentenceTransformerVectorizer(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_VideoObjectsExtractor},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_SentenceTransformerVectorizer},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "VideoObjectsExtractor",
+      "SentenceTransformerVectorizer",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -4251,19 +3535,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initVideoObjectsExtractor(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initVideoObjectsExtractor(void)
+__Pyx_PyMODINIT_FUNC initSentenceTransformerVectorizer(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initSentenceTransformerVectorizer(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void)
+__Pyx_PyMODINIT_FUNC PyInit_SentenceTransformerVectorizer(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_SentenceTransformerVectorizer(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -4336,229 +3620,416 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_VideoObjectsExtractor(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_SentenceTransformerVectorizer(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
   PyObject *__pyx_t_1 = NULL;
   PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
+  PyObject *__pyx_t_4 = NULL;
+  PyObject *__pyx_t_5 = NULL;
+  PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
+  PyObject *__pyx_t_8 = NULL;
+  PyObject *__pyx_t_9 = NULL;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'VideoObjectsExtractor' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'SentenceTransformerVectorizer' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("VideoObjectsExtractor", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
-  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_m = Py_InitModule4("SentenceTransformerVectorizer", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  if (unlikely(!__pyx_m)) __PYX_ERR(0, 2, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
-  __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to VideoObjectsExtractor pseudovariable */
-    if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to SentenceTransformerVectorizer pseudovariable */
+    if (unlikely((add_module_result < 0))) __PYX_ERR(0, 2, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
-  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (unlikely(!__pyx_m)) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #endif
   CYTHON_UNUSED_VAR(__pyx_t_1);
-  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 2, __pyx_L1_error)
   Py_INCREF(__pyx_d);
-  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 2, __pyx_L1_error)
   Py_INCREF(__pyx_b);
-  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 2, __pyx_L1_error)
   Py_INCREF(__pyx_cython_runtime);
-  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #if CYTHON_REFNANNY
 __Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_VideoObjectsExtractor(void)", 0);
-  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_SentenceTransformerVectorizer(void)", 0);
+  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
-  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 2, __pyx_L1_error)
   #ifdef __Pyx_CyFunction_USED
-  if (__pyx_CyFunction_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_CyFunction_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #ifdef __Pyx_FusedFunction_USED
-  if (__pyx_FusedFunction_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_FusedFunction_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #ifdef __Pyx_Coroutine_USED
-  if (__pyx_Coroutine_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_Coroutine_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #ifdef __Pyx_Generator_USED
-  if (__pyx_Generator_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_Generator_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #ifdef __Pyx_AsyncGen_USED
-  if (__pyx_AsyncGen_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_AsyncGen_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   #ifdef __Pyx_StopAsyncIteration_USED
-  if (__pyx_StopAsyncIteration_init(__pyx_m) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_StopAsyncIteration_init(__pyx_m) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
   /*--- Library function declarations ---*/
   /*--- Threads initialization code ---*/
   #if defined(WITH_THREAD) && PY_VERSION_HEX < 0x030700F0 && defined(__PYX_FORCE_INIT_THREADS) && __PYX_FORCE_INIT_THREADS
   PyEval_InitThreads();
   #endif
   /*--- Initialize various global constants etc. ---*/
-  if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   stringtab_initialized = 1;
-  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
-  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_wrapper__infra__VideoObjectsExtractor) {
-    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__pyx_module_is_main_wrapper__core__SentenceTransformerVectorizer) {
+    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
-    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "wrapper.infra.VideoObjectsExtractor")) {
-      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.VideoObjectsExtractor", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 2, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.core.SentenceTransformerVectorizer")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.core.SentenceTransformerVectorizer", __pyx_m) < 0))) __PYX_ERR(0, 2, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
-  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   /*--- Constants init code ---*/
-  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   /*--- Global type/function init code ---*/
   (void)__Pyx_modinit_global_init_code();
   (void)__Pyx_modinit_variable_export_code();
   (void)__Pyx_modinit_function_export_code();
   (void)__Pyx_modinit_type_init_code();
   (void)__Pyx_modinit_type_import_code();
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
-  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   #endif
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":1
- * import cv2             # <<<<<<<<<<<<<<
- * from .ImageObjectsExtractor import get_layers
- * import numpy as np
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":2
+ * 
+ * from .Vectorizer import Vectorizer             # <<<<<<<<<<<<<<
+ * from sentence_transformers import SentenceTransformer
+ * from .File import File
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_cv2, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_cv2, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_Vectorizer);
+  __Pyx_GIVEREF(__pyx_n_s_Vectorizer);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_Vectorizer);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_Vectorizer, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Vectorizer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Vectorizer, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":2
- * import cv2
- * from .ImageObjectsExtractor import get_layers             # <<<<<<<<<<<<<<
- * import numpy as np
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":3
  * 
+ * from .Vectorizer import Vectorizer
+ * from sentence_transformers import SentenceTransformer             # <<<<<<<<<<<<<<
+ * from .File import File
+ * from ..infra.DocLanguage import DocLanguage
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_SentenceTransformer);
+  __Pyx_GIVEREF(__pyx_n_s_SentenceTransformer);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_SentenceTransformer);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sentence_transformers_2, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_get_layers);
-  __Pyx_GIVEREF(__pyx_n_s_get_layers);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_get_layers);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_ImageObjectsExtractor, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_SentenceTransformer); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SentenceTransformer, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_get_layers); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":4
+ * from .Vectorizer import Vectorizer
+ * from sentence_transformers import SentenceTransformer
+ * from .File import File             # <<<<<<<<<<<<<<
+ * from ..infra.DocLanguage import DocLanguage
+ * 
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_File);
+  __Pyx_GIVEREF(__pyx_n_s_File);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_File);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_File, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_File); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_get_layers, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_2) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":3
- * import cv2
- * from .ImageObjectsExtractor import get_layers
- * import numpy as np             # <<<<<<<<<<<<<<
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":5
+ * from sentence_transformers import SentenceTransformer
+ * from .File import File
+ * from ..infra.DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
  * 
- * def identify_objects_in_video(video_path):
+ * # singleton pattern
  */
-  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_numpy, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_np, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_infra_DocLanguage, __pyx_t_3, 2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":5
- * import numpy as np
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":8
  * 
- * def identify_objects_in_video(video_path):             # <<<<<<<<<<<<<<
- *     net, output_layers, classes = get_layers()
+ * # singleton pattern
+ * class SentenceTransformerVectorizer(Vectorizer):             # <<<<<<<<<<<<<<
  * 
+ *     _instance = None
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_21VideoObjectsExtractor_1identify_objects_in_video, 0, __pyx_n_s_identify_objects_in_video, NULL, __pyx_n_s_wrapper_infra_VideoObjectsExtrac, __pyx_d, ((PyObject *)__pyx_codeobj__7)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Vectorizer); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_identify_objects_in_video, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_2);
+  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
+  __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_PEP560_update_bases(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_4 = __Pyx_CalculateMetaclass(NULL, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_4);
+  __pyx_t_5 = __Pyx_Py3MetaclassPrepare(__pyx_t_4, __pyx_t_2, __pyx_n_s_SentenceTransformerVectorizer, __pyx_n_s_SentenceTransformerVectorizer, (PyObject *) NULL, __pyx_n_s_wrapper_core_SentenceTransformer, (PyObject *) NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (__pyx_t_2 != __pyx_t_3) {
+    if (unlikely((PyDict_SetItemString(__pyx_t_5, "__orig_bases__", __pyx_t_3) < 0))) __PYX_ERR(0, 8, __pyx_L1_error)
+  }
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
 
-  /* "wrapper/infra/VideoObjectsExtractor.pyx":1
- * import cv2             # <<<<<<<<<<<<<<
- * from .ImageObjectsExtractor import get_layers
- * import numpy as np
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":10
+ * class SentenceTransformerVectorizer(Vectorizer):
+ * 
+ *     _instance = None             # <<<<<<<<<<<<<<
+ * 
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):
  */
-  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_instance, Py_None) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":12
+ *     _instance = None
+ * 
+ *     def __init__(self, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None ):             # <<<<<<<<<<<<<<
+ *         if not corpus_name:
+ *             if vect_lang == DocLanguage.ENGLISH:
+ */
+  __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_vect_lang, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  __pyx_t_7 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_1__init__, 0, __pyx_n_s_SentenceTransformerVectorizer_2, NULL, __pyx_n_s_wrapper_core_SentenceTransformer, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_INCREF(__pyx_t_7);
+  PyList_Append(__pyx_t_3, __pyx_t_7);
+  __Pyx_GIVEREF(__pyx_t_7);
+  if (!__Pyx_CyFunction_InitDefaults(__pyx_t_7, sizeof(__pyx_defaults), 1)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_9);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __Pyx_CyFunction_Defaults(__pyx_defaults, __pyx_t_7)->__pyx_arg_vect_lang = __pyx_t_9;
+  __Pyx_GIVEREF(__pyx_t_9);
+  __pyx_t_9 = 0;
+  __Pyx_CyFunction_SetDefaultsGetter(__pyx_t_7, __pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer___defaults__);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_7, __pyx_t_6);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_init, __pyx_t_7) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
+ * 
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
+ */
+  __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_vect_lang, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_3instance, __Pyx_CYFUNCTION_CLASSMETHOD, __pyx_n_s_SentenceTransformerVectorizer_in, NULL, __pyx_n_s_wrapper_core_SentenceTransformer, __pyx_d, ((PyObject *)__pyx_codeobj__5)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  if (!__Pyx_CyFunction_InitDefaults(__pyx_t_6, sizeof(__pyx_defaults1), 1)) __PYX_ERR(0, 25, __pyx_L1_error)
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":26
+ * 
+ *     @classmethod
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):             # <<<<<<<<<<<<<<
+ *         if cls._instance is None:
+ *             cls._instance = cls(path, vect_lang, corpus_name)
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_9);
+  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 26, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
+  __Pyx_CyFunction_Defaults(__pyx_defaults1, __pyx_t_6)->__pyx_arg_vect_lang = __pyx_t_8;
+  __Pyx_GIVEREF(__pyx_t_8);
+  __pyx_t_8 = 0;
+  __Pyx_CyFunction_SetDefaultsGetter(__pyx_t_6, __pyx_pf_7wrapper_4core_29SentenceTransformerVectorizer_2__defaults__);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_6, __pyx_t_7);
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":25
+ *             self.save_model(model)
+ * 
+ *     @classmethod             # <<<<<<<<<<<<<<
+ *     def instance(cls, path, vect_lang:DocLanguage = DocLanguage.ENGLISH, corpus_name = None):
+ *         if cls._instance is None:
+ */
+  __pyx_t_7 = __Pyx_Method_ClassMethod(__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_instance_2, __pyx_t_7) < 0) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":31
+ *         return cls._instance
+ * 
+ *     def encode(self, file:File):             # <<<<<<<<<<<<<<
+ *         return self.model.encode(file.text, convert_to_tensor=False)
+ */
+  __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_file, __pyx_n_s_File) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
+  __pyx_t_6 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_4core_29SentenceTransformerVectorizer_29SentenceTransformerVectorizer_5encode, 0, __pyx_n_s_SentenceTransformerVectorizer_en, NULL, __pyx_n_s_wrapper_core_SentenceTransformer, __pyx_d, ((PyObject *)__pyx_codeobj__7)); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 31, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_6, __pyx_t_7);
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+  if (__Pyx_SetNameInClass(__pyx_t_5, __pyx_n_s_encode, __pyx_t_6) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":8
+ * 
+ * # singleton pattern
+ * class SentenceTransformerVectorizer(Vectorizer):             # <<<<<<<<<<<<<<
+ * 
+ *     _instance = None
+ */
+  __pyx_t_6 = __Pyx_Py3ClassCreate(__pyx_t_4, __pyx_n_s_SentenceTransformerVectorizer, __pyx_t_2, __pyx_t_5, NULL, 0, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  if (__Pyx_CyFunction_InitClassCell(__pyx_t_3, __pyx_t_6) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_SentenceTransformerVectorizer, __pyx_t_6) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/core/SentenceTransformerVectorizer.pyx":2
+ * 
+ * from .Vectorizer import Vectorizer             # <<<<<<<<<<<<<<
+ * from sentence_transformers import SentenceTransformer
+ * from .File import File
+ */
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_XDECREF(__pyx_t_8);
+  __Pyx_XDECREF(__pyx_t_9);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init wrapper.infra.VideoObjectsExtractor", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.core.SentenceTransformerVectorizer", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.VideoObjectsExtractor");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.core.SentenceTransformerVectorizer");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -4954,14 +4425,40 @@
             return kwvalues[i];
         }
     }
     return NULL;  // not found (no exception set)
 }
 #endif
 
+/* RaiseArgTupleInvalid */
+static void __Pyx_RaiseArgtupleInvalid(
+    const char* func_name,
+    int exact,
+    Py_ssize_t num_min,
+    Py_ssize_t num_max,
+    Py_ssize_t num_found)
+{
+    Py_ssize_t num_expected;
+    const char *more_or_less;
+    if (num_found < num_min) {
+        num_expected = num_min;
+        more_or_less = "at least";
+    } else {
+        num_expected = num_max;
+        more_or_less = "at most";
+    }
+    if (exact) {
+        more_or_less = "exactly";
+    }
+    PyErr_Format(PyExc_TypeError,
+                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                 func_name, more_or_less, num_expected,
+                 (num_expected == 1) ? "" : "s", num_found);
+}
+
 /* RaiseDoubleKeywords */
 static void __Pyx_RaiseDoubleKeywordsError(
     const char* func_name,
     PyObject* kw_name)
 {
     PyErr_Format(PyExc_TypeError,
         #if PY_MAJOR_VERSION >= 3
@@ -5084,40 +4581,14 @@
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
     return -1;
 }
 
-/* RaiseArgTupleInvalid */
-static void __Pyx_RaiseArgtupleInvalid(
-    const char* func_name,
-    int exact,
-    Py_ssize_t num_min,
-    Py_ssize_t num_max,
-    Py_ssize_t num_found)
-{
-    Py_ssize_t num_expected;
-    const char *more_or_less;
-    if (num_found < num_min) {
-        num_expected = num_min;
-        more_or_less = "at least";
-    } else {
-        num_expected = num_max;
-        more_or_less = "at most";
-    }
-    if (exact) {
-        more_or_less = "exactly";
-    }
-    PyErr_Format(PyExc_TypeError,
-                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
-                 func_name, more_or_less, num_expected,
-                 (num_expected == 1) ? "" : "s", num_found);
-}
-
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -5179,14 +4650,34 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
+/* PyObjectCall */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
+    PyObject *result;
+    ternaryfunc call = Py_TYPE(func)->tp_call;
+    if (unlikely(!call))
+        return PyObject_Call(func, arg, kw);
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    result = (*call)(func, arg, kw);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
+    }
+    return result;
+}
+#endif
+
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -5296,34 +4787,14 @@
     Py_XDECREF(kwtuple);
 done:
     Py_LeaveRecursiveCall();
     return result;
 }
 #endif
 
-/* PyObjectCall */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    PyObject *result;
-    ternaryfunc call = Py_TYPE(func)->tp_call;
-    if (unlikely(!call))
-        return PyObject_Call(func, arg, kw);
-    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
-        return NULL;
-    result = (*call)(func, arg, kw);
-    Py_LeaveRecursiveCall();
-    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
-        PyErr_SetString(
-            PyExc_SystemError,
-            "NULL result without error in PyObject_Call");
-    }
-    return result;
-}
-#endif
-
 /* PyObjectCallMethO */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
     PyObject *self, *result;
     PyCFunction cfunc;
     cfunc = PyCFunction_GET_FUNCTION(func);
     self = PyCFunction_GET_SELF(func);
@@ -5413,543 +4884,27 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* RaiseTooManyValuesToUnpack */
-static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
-    PyErr_Format(PyExc_ValueError,
-                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
-}
-
-/* RaiseNeedMoreValuesToUnpack */
-static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
-    PyErr_Format(PyExc_ValueError,
-                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
-                 index, (index == 1) ? "" : "s");
-}
-
-/* IterFinish */
-static CYTHON_INLINE int __Pyx_IterFinish(void) {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    PyObject* exc_type = __Pyx_PyErr_CurrentExceptionType();
-    if (unlikely(exc_type)) {
-        if (unlikely(!__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)))
-            return -1;
-        __Pyx_PyErr_Clear();
-        return 0;
-    }
-    return 0;
-}
-
-/* UnpackItemEndCheck */
-static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
-    if (unlikely(retval)) {
-        Py_DECREF(retval);
-        __Pyx_RaiseTooManyValuesError(expected);
-        return -1;
-    }
-    return __Pyx_IterFinish();
-}
-
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* SliceObject */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(PyObject* obj,
-        Py_ssize_t cstart, Py_ssize_t cstop,
-        PyObject** _py_start, PyObject** _py_stop, PyObject** _py_slice,
-        int has_cstart, int has_cstop, int wraparound) {
-    __Pyx_TypeName obj_type_name;
+/* PyObjectSetAttrStr */
 #if CYTHON_USE_TYPE_SLOTS
-    PyMappingMethods* mp;
+static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_setattro))
+        return tp->tp_setattro(obj, attr_name, value);
 #if PY_MAJOR_VERSION < 3
-    PySequenceMethods* ms = Py_TYPE(obj)->tp_as_sequence;
-    if (likely(ms && ms->sq_slice)) {
-        if (!has_cstart) {
-            if (_py_start && (*_py_start != Py_None)) {
-                cstart = __Pyx_PyIndex_AsSsize_t(*_py_start);
-                if ((cstart == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
-            } else
-                cstart = 0;
-        }
-        if (!has_cstop) {
-            if (_py_stop && (*_py_stop != Py_None)) {
-                cstop = __Pyx_PyIndex_AsSsize_t(*_py_stop);
-                if ((cstop == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
-            } else
-                cstop = PY_SSIZE_T_MAX;
-        }
-        if (wraparound && unlikely((cstart < 0) | (cstop < 0)) && likely(ms->sq_length)) {
-            Py_ssize_t l = ms->sq_length(obj);
-            if (likely(l >= 0)) {
-                if (cstop < 0) {
-                    cstop += l;
-                    if (cstop < 0) cstop = 0;
-                }
-                if (cstart < 0) {
-                    cstart += l;
-                    if (cstart < 0) cstart = 0;
-                }
-            } else {
-                if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                    goto bad;
-                PyErr_Clear();
-            }
-        }
-        return ms->sq_slice(obj, cstart, cstop);
-    }
-#else
-    CYTHON_UNUSED_VAR(wraparound);
-#endif
-    mp = Py_TYPE(obj)->tp_as_mapping;
-    if (likely(mp && mp->mp_subscript))
-#else
-    CYTHON_UNUSED_VAR(wraparound);
-#endif
-    {
-        PyObject* result;
-        PyObject *py_slice, *py_start, *py_stop;
-        if (_py_slice) {
-            py_slice = *_py_slice;
-        } else {
-            PyObject* owned_start = NULL;
-            PyObject* owned_stop = NULL;
-            if (_py_start) {
-                py_start = *_py_start;
-            } else {
-                if (has_cstart) {
-                    owned_start = py_start = PyInt_FromSsize_t(cstart);
-                    if (unlikely(!py_start)) goto bad;
-                } else
-                    py_start = Py_None;
-            }
-            if (_py_stop) {
-                py_stop = *_py_stop;
-            } else {
-                if (has_cstop) {
-                    owned_stop = py_stop = PyInt_FromSsize_t(cstop);
-                    if (unlikely(!py_stop)) {
-                        Py_XDECREF(owned_start);
-                        goto bad;
-                    }
-                } else
-                    py_stop = Py_None;
-            }
-            py_slice = PySlice_New(py_start, py_stop, Py_None);
-            Py_XDECREF(owned_start);
-            Py_XDECREF(owned_stop);
-            if (unlikely(!py_slice)) goto bad;
-        }
-#if CYTHON_USE_TYPE_SLOTS
-        result = mp->mp_subscript(obj, py_slice);
-#else
-        result = PyObject_GetItem(obj, py_slice);
-#endif
-        if (!_py_slice) {
-            Py_DECREF(py_slice);
-        }
-        return result;
-    }
-    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
-    PyErr_Format(PyExc_TypeError,
-        "'" __Pyx_FMT_TYPENAME "' object is unsliceable", obj_type_name);
-    __Pyx_DECREF_TypeName(obj_type_name);
-bad:
-    return NULL;
-}
-
-/* GetItemInt */
-static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
-    PyObject *r;
-    if (unlikely(!j)) return NULL;
-    r = PyObject_GetItem(o, j);
-    Py_DECREF(j);
-    return r;
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyList_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
-        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
-                                                              CYTHON_NCP_UNUSED int wraparound,
-                                                              CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-    Py_ssize_t wrapped_i = i;
-    if (wraparound & unlikely(i < 0)) {
-        wrapped_i += PyTuple_GET_SIZE(o);
-    }
-    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
-        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
-        Py_INCREF(r);
-        return r;
-    }
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-#else
-    return PySequence_GetItem(o, i);
-#endif
-}
-static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
-                                                     CYTHON_NCP_UNUSED int wraparound,
-                                                     CYTHON_NCP_UNUSED int boundscheck) {
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
-    if (is_list || PyList_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
-        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
-            PyObject *r = PyList_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    }
-    else if (PyTuple_CheckExact(o)) {
-        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
-        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
-            PyObject *r = PyTuple_GET_ITEM(o, n);
-            Py_INCREF(r);
-            return r;
-        }
-    } else {
-        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
-        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
-        if (mm && mm->mp_subscript) {
-            PyObject *r, *key = PyInt_FromSsize_t(i);
-            if (unlikely(!key)) return NULL;
-            r = mm->mp_subscript(o, key);
-            Py_DECREF(key);
-            return r;
-        }
-        if (likely(sm && sm->sq_item)) {
-            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
-                Py_ssize_t l = sm->sq_length(o);
-                if (likely(l >= 0)) {
-                    i += l;
-                } else {
-                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
-                        return NULL;
-                    PyErr_Clear();
-                }
-            }
-            return sm->sq_item(o, i);
-        }
-    }
-#else
-    if (is_list || PySequence_Check(o)) {
-        return PySequence_GetItem(o, i);
-    }
-#endif
-    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
-}
-
-/* ObjectGetItem */
-#if CYTHON_USE_TYPE_SLOTS
-static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject *index) {
-    PyObject *runerr = NULL;
-    Py_ssize_t key_value;
-    key_value = __Pyx_PyIndex_AsSsize_t(index);
-    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {
-        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);
-    }
-    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {
-        __Pyx_TypeName index_type_name = __Pyx_PyType_GetName(Py_TYPE(index));
-        PyErr_Clear();
-        PyErr_Format(PyExc_IndexError,
-            "cannot fit '" __Pyx_FMT_TYPENAME "' into an index-sized integer", index_type_name);
-        __Pyx_DECREF_TypeName(index_type_name);
-    }
-    return NULL;
-}
-static PyObject *__Pyx_PyObject_GetItem_Slow(PyObject *obj, PyObject *key) {
-    __Pyx_TypeName obj_type_name;
-    if (likely(PyType_Check(obj))) {
-        PyObject *meth = __Pyx_PyObject_GetAttrStrNoError(obj, __pyx_n_s_class_getitem);
-        if (meth) {
-            PyObject *result = __Pyx_PyObject_CallOneArg(meth, key);
-            Py_DECREF(meth);
-            return result;
-        }
-    }
-    obj_type_name = __Pyx_PyType_GetName(Py_TYPE(obj));
-    PyErr_Format(PyExc_TypeError,
-        "'" __Pyx_FMT_TYPENAME "' object is not subscriptable", obj_type_name);
-    __Pyx_DECREF_TypeName(obj_type_name);
-    return NULL;
-}
-static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject *key) {
-    PyTypeObject *tp = Py_TYPE(obj);
-    PyMappingMethods *mm = tp->tp_as_mapping;
-    PySequenceMethods *sm = tp->tp_as_sequence;
-    if (likely(mm && mm->mp_subscript)) {
-        return mm->mp_subscript(obj, key);
-    }
-    if (likely(sm && sm->sq_item)) {
-        return __Pyx_PyObject_GetIndex(obj, key);
-    }
-    return __Pyx_PyObject_GetItem_Slow(obj, key);
-}
-#endif
-
-/* PyIntBinop */
-#if !CYTHON_COMPILING_IN_PYPY
-static PyObject* __Pyx_PyInt_TrueDivideObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check) {
-    CYTHON_MAYBE_UNUSED_VAR(intval);
-    CYTHON_MAYBE_UNUSED_VAR(inplace);
-    CYTHON_UNUSED_VAR(zerodivision_check);
-    #if PY_MAJOR_VERSION < 3
-    if (likely(PyInt_CheckExact(op1))) {
-        const long b = intval;
-        long a = PyInt_AS_LONG(op1);
-        
-            if (8 * sizeof(long) <= 53 || likely(labs(a) <= ((PY_LONG_LONG)1 << 53))) {
-                return PyFloat_FromDouble((double)a / (double)b);
-            }
-            return PyInt_Type.tp_as_number->nb_true_divide(op1, op2);
-    }
-    #endif
-    #if CYTHON_USE_PYLONG_INTERNALS
-    if (likely(PyLong_CheckExact(op1))) {
-        const long b = intval;
-        long a, x;
-        if (unlikely(__Pyx_PyLong_IsZero(op1))) {
-        }
-        if (likely(__Pyx_PyLong_IsCompact(op1))) {
-            a = __Pyx_PyLong_CompactValue(op1);
-        } else {
-            const digit* digits = __Pyx_PyLong_Digits(op1);
-            const Py_ssize_t size = __Pyx_PyLong_SignedDigitCount(op1);
-            switch (size) {
-                case -2:
-                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT && 1 * PyLong_SHIFT < 53) {
-                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 2:
-                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT && 1 * PyLong_SHIFT < 53) {
-                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                case -3:
-                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT && 2 * PyLong_SHIFT < 53) {
-                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 3:
-                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT && 2 * PyLong_SHIFT < 53) {
-                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                case -4:
-                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT && 3 * PyLong_SHIFT < 53) {
-                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                case 4:
-                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT && 3 * PyLong_SHIFT < 53) {
-                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
-                        break;
-                    }
-                    CYTHON_FALLTHROUGH;
-                default: return PyLong_Type.tp_as_number->nb_true_divide(op1, op2);
-            }
-        }
-                if ((8 * sizeof(long) <= 53 || likely(labs(a) <= ((PY_LONG_LONG)1 << 53)))
-                        || __Pyx_PyLong_DigitCount(op1) <= 52 / PyLong_SHIFT) {
-                    return PyFloat_FromDouble((double)a / (double)b);
-                }
-                return PyLong_Type.tp_as_number->nb_true_divide(op1, op2);
-            return PyLong_FromLong(x);
-        
-    }
-    #endif
-    if (PyFloat_CheckExact(op1)) {
-        const long b = intval;
-#if CYTHON_COMPILING_IN_LIMITED_API
-        double a = __pyx_PyFloat_AsDouble(op1);
-#else
-        double a = PyFloat_AS_DOUBLE(op1);
-#endif
-            double result;
-            
-            PyFPE_START_PROTECT("divide", return NULL)
-            result = ((double)a) / (double)b;
-            PyFPE_END_PROTECT(result)
-            return PyFloat_FromDouble(result);
-    }
-    return (inplace ? PyNumber_InPlaceTrueDivide : PyNumber_TrueDivide)(op1, op2);
-}
+    if (likely(tp->tp_setattr))
+        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
 #endif
-
-/* pybytes_as_double */
-static double __Pyx_SlowPyString_AsDouble(PyObject *obj) {
-    PyObject *float_value;
-#if PY_MAJOR_VERSION >= 3
-    float_value = PyFloat_FromString(obj);
-#else
-    float_value = PyFloat_FromString(obj, 0);
-#endif
-    if (likely(float_value)) {
-        double value = PyFloat_AS_DOUBLE(float_value);
-        Py_DECREF(float_value);
-        return value;
-    }
-    return (double)-1;
-}
-static const char* __Pyx__PyBytes_AsDouble_Copy(const char* start, char* buffer, Py_ssize_t length) {
-    int last_was_punctuation = 1;
-    Py_ssize_t i;
-    for (i=0; i < length; i++) {
-        char chr = start[i];
-        int is_punctuation = (chr == '_') | (chr == '.') | (chr == 'e') | (chr == 'E');
-        *buffer = chr;
-        buffer += (chr != '_');
-        if (unlikely(last_was_punctuation & is_punctuation)) goto parse_failure;
-        last_was_punctuation = is_punctuation;
-    }
-    if (unlikely(last_was_punctuation)) goto parse_failure;
-    *buffer = '\0';
-    return buffer;
-parse_failure:
-    return NULL;
+    return PyObject_SetAttr(obj, attr_name, value);
 }
-static double __Pyx__PyBytes_AsDouble_inf_nan(const char* start, Py_ssize_t length) {
-    int matches = 1;
-    char sign = start[0];
-    int is_signed = (sign == '+') | (sign == '-');
-    start += is_signed;
-    length -= is_signed;
-    switch (start[0]) {
-        #ifdef Py_NAN
-        case 'n':
-        case 'N':
-            if (unlikely(length != 3)) goto parse_failure;
-            matches &= (start[1] == 'a' || start[1] == 'A');
-            matches &= (start[2] == 'n' || start[2] == 'N');
-            if (unlikely(!matches)) goto parse_failure;
-            return (sign == '-') ? -Py_NAN : Py_NAN;
-        #endif
-        case 'i':
-        case 'I':
-            if (unlikely(length < 3)) goto parse_failure;
-            matches &= (start[1] == 'n' || start[1] == 'N');
-            matches &= (start[2] == 'f' || start[2] == 'F');
-            if (likely(length == 3 && matches))
-                return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
-            if (unlikely(length != 8)) goto parse_failure;
-            matches &= (start[3] == 'i' || start[3] == 'I');
-            matches &= (start[4] == 'n' || start[4] == 'N');
-            matches &= (start[5] == 'i' || start[5] == 'I');
-            matches &= (start[6] == 't' || start[6] == 'T');
-            matches &= (start[7] == 'y' || start[7] == 'Y');
-            if (unlikely(!matches)) goto parse_failure;
-            return (sign == '-') ? -Py_HUGE_VAL : Py_HUGE_VAL;
-        case '.': case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
-            break;
-        default:
-            goto parse_failure;
-    }
-    return 0.0;
-parse_failure:
-    return -1.0;
-}
-static CYTHON_INLINE int __Pyx__PyBytes_AsDouble_IsSpace(char ch) {
-    return (ch == 0x20) | !((ch < 0x9) | (ch > 0xd));
-}
-CYTHON_UNUSED static double __Pyx__PyBytes_AsDouble(PyObject *obj, const char* start, Py_ssize_t length) {
-    double value;
-    Py_ssize_t i, digits;
-    const char *last = start + length;
-    char *end;
-    while (__Pyx__PyBytes_AsDouble_IsSpace(*start))
-        start++;
-    while (start < last - 1 && __Pyx__PyBytes_AsDouble_IsSpace(last[-1]))
-        last--;
-    length = last - start;
-    if (unlikely(length <= 0)) goto fallback;
-    value = __Pyx__PyBytes_AsDouble_inf_nan(start, length);
-    if (unlikely(value == -1.0)) goto fallback;
-    if (value != 0.0) return value;
-    digits = 0;
-    for (i=0; i < length; digits += start[i++] != '_');
-    if (likely(digits == length)) {
-        value = PyOS_string_to_double(start, &end, NULL);
-    } else if (digits < 40) {
-        char number[40];
-        last = __Pyx__PyBytes_AsDouble_Copy(start, number, length);
-        if (unlikely(!last)) goto fallback;
-        value = PyOS_string_to_double(number, &end, NULL);
-    } else {
-        char *number = (char*) PyMem_Malloc((digits + 1) * sizeof(char));
-        if (unlikely(!number)) goto fallback;
-        last = __Pyx__PyBytes_AsDouble_Copy(start, number, length);
-        if (unlikely(!last)) {
-            PyMem_Free(number);
-            goto fallback;
-        }
-        value = PyOS_string_to_double(number, &end, NULL);
-        PyMem_Free(number);
-    }
-    if (likely(end == last) || (value == (double)-1 && PyErr_Occurred())) {
-        return value;
-    }
-fallback:
-    return __Pyx_SlowPyString_AsDouble(obj);
-}
-
-/* pynumber_float */
-static CYTHON_INLINE PyObject* __Pyx__PyNumber_Float(PyObject* obj) {
-    double val;
-    if (PyLong_CheckExact(obj)) {
-#if CYTHON_USE_PYLONG_INTERNALS
-        if (likely(__Pyx_PyLong_IsCompact(obj))) {
-            val = (double) __Pyx_PyLong_CompactValue(obj);
-            goto no_error;
-        }
 #endif
-        val = PyLong_AsDouble(obj);
-    } else if (PyUnicode_CheckExact(obj)) {
-        val = __Pyx_PyUnicode_AsDouble(obj);
-    } else if (PyBytes_CheckExact(obj)) {
-        val = __Pyx_PyBytes_AsDouble(obj);
-    } else if (PyByteArray_CheckExact(obj)) {
-        val = __Pyx_PyByteArray_AsDouble(obj);
-    } else {
-        return PyNumber_Float(obj);
-    }
-    if (unlikely(val == -1 && PyErr_Occurred())) {
-        return NULL;
-    }
-#if CYTHON_USE_PYLONG_INTERNALS
-no_error:
-#endif
-    return PyFloat_FromDouble(val);
-}
 
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
@@ -6011,156 +4966,28 @@
     Py_XDECREF(empty_list);
     #if PY_MAJOR_VERSION < 3
     Py_XDECREF(py_import);
     #endif
     return module;
 }
 
-/* ImportDottedModule */
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
-    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
-    if (unlikely(PyErr_Occurred())) {
-        PyErr_Clear();
-    }
-    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
-        partial_name = name;
-    } else {
-        slice = PySequence_GetSlice(parts_tuple, 0, count);
-        if (unlikely(!slice))
-            goto bad;
-        sep = PyUnicode_FromStringAndSize(".", 1);
-        if (unlikely(!sep))
-            goto bad;
-        partial_name = PyUnicode_Join(sep, slice);
-    }
-    PyErr_Format(
-#if PY_MAJOR_VERSION < 3
-        PyExc_ImportError,
-        "No module named '%s'", PyString_AS_STRING(partial_name));
-#else
-#if PY_VERSION_HEX >= 0x030600B1
-        PyExc_ModuleNotFoundError,
-#else
-        PyExc_ImportError,
-#endif
-        "No module named '%U'", partial_name);
-#endif
-bad:
-    Py_XDECREF(sep);
-    Py_XDECREF(slice);
-    Py_XDECREF(partial_name);
-    return NULL;
-}
-#endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
-    PyObject *imported_module;
-#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-    PyObject *modules = PyImport_GetModuleDict();
-    if (unlikely(!modules))
-        return NULL;
-    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
-    Py_XINCREF(imported_module);
-#else
-    imported_module = PyImport_GetModule(name);
-#endif
-    return imported_module;
-}
-#endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
-    Py_ssize_t i, nparts;
-    nparts = PyTuple_GET_SIZE(parts_tuple);
-    for (i=1; i < nparts && module; i++) {
-        PyObject *part, *submodule;
-#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        part = PyTuple_GET_ITEM(parts_tuple, i);
-#else
-        part = PySequence_ITEM(parts_tuple, i);
-#endif
-        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
-#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
-        Py_DECREF(part);
-#endif
-        Py_DECREF(module);
-        module = submodule;
-    }
-    if (unlikely(!module)) {
-        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
-    }
-    return module;
-}
-#endif
-static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if PY_MAJOR_VERSION < 3
-    PyObject *module, *from_list, *star = __pyx_n_s__4;
-    CYTHON_UNUSED_VAR(parts_tuple);
-    from_list = PyList_New(1);
-    if (unlikely(!from_list))
-        return NULL;
-    Py_INCREF(star);
-    PyList_SET_ITEM(from_list, 0, star);
-    module = __Pyx_Import(name, from_list, 0);
-    Py_DECREF(from_list);
-    return module;
-#else
-    PyObject *imported_module;
-    PyObject *module = __Pyx_Import(name, NULL, 0);
-    if (!parts_tuple || unlikely(!module))
-        return module;
-    imported_module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(imported_module)) {
-        Py_DECREF(module);
-        return imported_module;
-    }
-    PyErr_Clear();
-    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
-#endif
-}
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
-    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(module)) {
-        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
-        if (likely(spec)) {
-            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
-            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
-                Py_DECREF(spec);
-                spec = NULL;
-            }
-            Py_XDECREF(unsafe);
-        }
-        if (likely(!spec)) {
-            PyErr_Clear();
-            return module;
-        }
-        Py_DECREF(spec);
-        Py_DECREF(module);
-    } else if (PyErr_Occurred()) {
-        PyErr_Clear();
-    }
-#endif
-    return __Pyx__ImportDottedModule(name, parts_tuple);
-}
-
 /* ImportFrom */
 static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
     PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
     if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
         const char* module_name_str = 0;
         PyObject* module_name = 0;
         PyObject* module_dot = 0;
         PyObject* full_name = 0;
         PyErr_Clear();
         module_name_str = PyModule_GetName(module);
         if (unlikely(!module_name_str)) { goto modbad; }
         module_name = PyUnicode_FromString(module_name_str);
         if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__5);
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
         if (unlikely(!module_dot)) { goto modbad; }
         full_name = PyUnicode_Concat(module_dot, name);
         if (unlikely(!full_name)) { goto modbad; }
         #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
         {
             PyObject *modules = PyImport_GetModuleDict();
             if (unlikely(!modules))
@@ -6182,14 +5009,127 @@
         #else
             "cannot import name %S", name);
         #endif
     }
     return value;
 }
 
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* Py3UpdateBases */
+static PyObject*
+__Pyx_PEP560_update_bases(PyObject *bases)
+{
+    Py_ssize_t i, j, size_bases;
+    PyObject *base, *meth, *new_base, *result, *new_bases = NULL;
+    size_bases = PyTuple_GET_SIZE(bases);
+    for (i = 0; i < size_bases; i++) {
+        base  = PyTuple_GET_ITEM(bases, i);
+        if (PyType_Check(base)) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        meth = __Pyx_PyObject_GetAttrStrNoError(base, __pyx_n_s_mro_entries);
+        if (!meth && PyErr_Occurred()) {
+            goto error;
+        }
+        if (!meth) {
+            if (new_bases) {
+                if (PyList_Append(new_bases, base) < 0) {
+                    goto error;
+                }
+            }
+            continue;
+        }
+        new_base = __Pyx_PyObject_CallOneArg(meth, bases);
+        Py_DECREF(meth);
+        if (!new_base) {
+            goto error;
+        }
+        if (!PyTuple_Check(new_base)) {
+            PyErr_SetString(PyExc_TypeError,
+                            "__mro_entries__ must return a tuple");
+            Py_DECREF(new_base);
+            goto error;
+        }
+        if (!new_bases) {
+            if (!(new_bases = PyList_New(i))) {
+                goto error;
+            }
+            for (j = 0; j < i; j++) {
+                base = PyTuple_GET_ITEM(bases, j);
+                PyList_SET_ITEM(new_bases, j, base);
+                Py_INCREF(base);
+            }
+        }
+        j = PyList_GET_SIZE(new_bases);
+        if (PyList_SetSlice(new_bases, j, j, new_base) < 0) {
+            goto error;
+        }
+        Py_DECREF(new_base);
+    }
+    if (!new_bases) {
+        Py_INCREF(bases);
+        return bases;
+    }
+    result = PyList_AsTuple(new_bases);
+    Py_DECREF(new_bases);
+    return result;
+error:
+    Py_XDECREF(new_bases);
+    return NULL;
+}
+
+/* CalculateMetaclass */
+static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
+    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
+    for (i=0; i < nbases; i++) {
+        PyTypeObject *tmptype;
+        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
+        tmptype = Py_TYPE(tmp);
+#if PY_MAJOR_VERSION < 3
+        if (tmptype == &PyClass_Type)
+            continue;
+#endif
+        if (!metaclass) {
+            metaclass = tmptype;
+            continue;
+        }
+        if (PyType_IsSubtype(metaclass, tmptype))
+            continue;
+        if (PyType_IsSubtype(tmptype, metaclass)) {
+            metaclass = tmptype;
+            continue;
+        }
+        PyErr_SetString(PyExc_TypeError,
+                        "metaclass conflict: "
+                        "the metaclass of a derived class "
+                        "must be a (non-strict) subclass "
+                        "of the metaclasses of all its bases");
+        return NULL;
+    }
+    if (!metaclass) {
+#if PY_MAJOR_VERSION < 3
+        metaclass = &PyClass_Type;
+#else
+        metaclass = &PyType_Type;
+#endif
+    }
+    Py_INCREF((PyObject*) metaclass);
+    return (PyObject*) metaclass;
+}
+
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
     CYTHON_UNUSED_VAR(type);
 #else
@@ -7304,14 +6244,312 @@
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
+/* ClassMethod */
+static PyObject* __Pyx_Method_ClassMethod(PyObject *method) {
+#if CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM <= 0x05080000
+    if (PyObject_TypeCheck(method, &PyWrapperDescr_Type)) {
+        return PyClassMethod_New(method);
+    }
+#else
+#if CYTHON_COMPILING_IN_PYPY
+    if (PyMethodDescr_Check(method))
+#else
+    #if PY_MAJOR_VERSION == 2
+    static PyTypeObject *methoddescr_type = NULL;
+    if (unlikely(methoddescr_type == NULL)) {
+       PyObject *meth = PyObject_GetAttrString((PyObject*)&PyList_Type, "append");
+       if (unlikely(!meth)) return NULL;
+       methoddescr_type = Py_TYPE(meth);
+       Py_DECREF(meth);
+    }
+    #else
+    PyTypeObject *methoddescr_type = &PyMethodDescr_Type;
+    #endif
+    if (__Pyx_TypeCheck(method, methoddescr_type))
+#endif
+    {
+        PyMethodDescrObject *descr = (PyMethodDescrObject *)method;
+        #if PY_VERSION_HEX < 0x03020000
+        PyTypeObject *d_type = descr->d_type;
+        #else
+        PyTypeObject *d_type = descr->d_common.d_type;
+        #endif
+        return PyDescr_NewClassMethod(d_type, descr->d_method);
+    }
+#endif
+    else if (PyMethod_Check(method)) {
+        return PyClassMethod_New(PyMethod_GET_FUNCTION(method));
+    }
+    else {
+        return PyClassMethod_New(method);
+    }
+}
+
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* PyObjectLookupSpecial */
+#if CYTHON_USE_PYTYPE_LOOKUP && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx__PyObject_LookupSpecial(PyObject* obj, PyObject* attr_name, int with_error) {
+    PyObject *res;
+    PyTypeObject *tp = Py_TYPE(obj);
+#if PY_MAJOR_VERSION < 3
+    if (unlikely(PyInstance_Check(obj)))
+        return with_error ? __Pyx_PyObject_GetAttrStr(obj, attr_name) : __Pyx_PyObject_GetAttrStrNoError(obj, attr_name);
+#endif
+    res = _PyType_Lookup(tp, attr_name);
+    if (likely(res)) {
+        descrgetfunc f = Py_TYPE(res)->tp_descr_get;
+        if (!f) {
+            Py_INCREF(res);
+        } else {
+            res = f(res, obj, (PyObject *)tp);
+        }
+    } else if (with_error) {
+        PyErr_SetObject(PyExc_AttributeError, attr_name);
+    }
+    return res;
+}
+#endif
+
+/* Py3ClassCreate */
+static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
+                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
+    PyObject *ns;
+    if (metaclass) {
+        PyObject *prep = __Pyx_PyObject_GetAttrStrNoError(metaclass, __pyx_n_s_prepare);
+        if (prep) {
+            PyObject *pargs[3] = {NULL, name, bases};
+            ns = __Pyx_PyObject_FastCallDict(prep, pargs+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET, mkw);
+            Py_DECREF(prep);
+        } else {
+            if (unlikely(PyErr_Occurred()))
+                return NULL;
+            ns = PyDict_New();
+        }
+    } else {
+        ns = PyDict_New();
+    }
+    if (unlikely(!ns))
+        return NULL;
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
+#if PY_VERSION_HEX >= 0x03030000
+    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
+#else
+    CYTHON_MAYBE_UNUSED_VAR(qualname);
+#endif
+    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
+    return ns;
+bad:
+    Py_DECREF(ns);
+    return NULL;
+}
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+static int __Pyx_SetNamesPEP487(PyObject *type_obj) {
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *names_to_set, *key, *value, *set_name, *tmp;
+    Py_ssize_t i = 0;
+#if CYTHON_USE_TYPE_SLOTS
+    names_to_set = PyDict_Copy(type->tp_dict);
+#else
+    {
+        PyObject *d = PyObject_GetAttr(type_obj, __pyx_n_s_dict);
+        names_to_set = NULL;
+        if (likely(d)) {
+            PyObject *names_to_set = PyDict_New();
+            int ret = likely(names_to_set) ? PyDict_Update(names_to_set, d) : -1;
+            Py_DECREF(d);
+            if (unlikely(ret < 0))
+                Py_CLEAR(names_to_set);
+        }
+    }
+#endif
+    if (unlikely(names_to_set == NULL))
+        goto bad;
+    while (PyDict_Next(names_to_set, &i, &key, &value)) {
+        set_name = __Pyx_PyObject_LookupSpecialNoError(value, __pyx_n_s_set_name);
+        if (unlikely(set_name != NULL)) {
+            tmp = __Pyx_PyObject_Call2Args(set_name, type_obj, key);
+            Py_DECREF(set_name);
+            if (unlikely(tmp == NULL)) {
+                __Pyx_TypeName value_type_name =
+                    __Pyx_PyType_GetName(Py_TYPE(value));
+                __Pyx_TypeName type_name = __Pyx_PyType_GetName(type);
+                PyErr_Format(PyExc_RuntimeError,
+#if PY_MAJOR_VERSION >= 3
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %R " "in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name, key, type_name);
+#else
+                    "Error calling __set_name__ on '" __Pyx_FMT_TYPENAME "' instance %.100s in '" __Pyx_FMT_TYPENAME "'",
+                    value_type_name,
+                    PyString_Check(key) ? PyString_AS_STRING(key) : "?",
+                    type_name);
+#endif
+                goto bad;
+            } else {
+                Py_DECREF(tmp);
+            }
+        }
+        else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+    Py_DECREF(names_to_set);
+    return 0;
+bad:
+    Py_XDECREF(names_to_set);
+    return -1;
+}
+static PyObject *__Pyx_InitSubclassPEP487(PyObject *type_obj, PyObject *mkw) {
+#if CYTHON_USE_TYPE_SLOTS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyTypeObject *type = (PyTypeObject*) type_obj;
+    PyObject *mro = type->tp_mro;
+    Py_ssize_t i, nbases;
+    if (unlikely(!mro)) goto done;
+    (void) &__Pyx_GetBuiltinName;
+    Py_INCREF(mro);
+    nbases = PyTuple_GET_SIZE(mro);
+    assert(PyTuple_GET_ITEM(mro, 0) == type_obj);
+    for (i = 1; i < nbases-1; i++) {
+        PyObject *base, *dict, *meth;
+        base = PyTuple_GET_ITEM(mro, i);
+        dict = ((PyTypeObject *)base)->tp_dict;
+        meth = __Pyx_PyDict_GetItemStrWithError(dict, __pyx_n_s_init_subclass);
+        if (unlikely(meth)) {
+            descrgetfunc f = Py_TYPE(meth)->tp_descr_get;
+            PyObject *res;
+            Py_INCREF(meth);
+            if (likely(f)) {
+                res = f(meth, NULL, type_obj);
+                Py_DECREF(meth);
+                if (unlikely(!res)) goto bad;
+                meth = res;
+            }
+            res = __Pyx_PyObject_FastCallDict(meth, NULL, 0, mkw);
+            Py_DECREF(meth);
+            if (unlikely(!res)) goto bad;
+            Py_DECREF(res);
+            goto done;
+        } else if (unlikely(PyErr_Occurred())) {
+            goto bad;
+        }
+    }
+done:
+    Py_XDECREF(mro);
+    return type_obj;
+bad:
+    Py_XDECREF(mro);
+    Py_DECREF(type_obj);
+    return NULL;
+#else
+    PyObject *super_type, *super, *func, *res;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    super_type = __Pyx_GetBuiltinName(__pyx_n_s_super);
+#else
+    super_type = (PyObject*) &PySuper_Type;
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    super = likely(super_type) ? __Pyx_PyObject_Call2Args(super_type, type_obj, type_obj) : NULL;
+#if CYTHON_COMPILING_IN_PYPY && !defined(PySuper_Type)
+    Py_XDECREF(super_type);
+#endif
+    if (unlikely(!super)) {
+        Py_CLEAR(type_obj);
+        goto done;
+    }
+    func = __Pyx_PyObject_GetAttrStrNoError(super, __pyx_n_s_init_subclass);
+    Py_DECREF(super);
+    if (likely(!func)) {
+        if (unlikely(PyErr_Occurred()))
+            Py_CLEAR(type_obj);
+        goto done;
+    }
+    res = __Pyx_PyObject_FastCallDict(func, NULL, 0, mkw);
+    Py_DECREF(func);
+    if (unlikely(!res))
+        Py_CLEAR(type_obj);
+    Py_XDECREF(res);
+done:
+    return type_obj;
+#endif
+}
+#endif
+static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
+                                      PyObject *dict, PyObject *mkw,
+                                      int calculate_metaclass, int allow_py2_metaclass) {
+    PyObject *result;
+    PyObject *owned_metaclass = NULL;
+    PyObject *margs[4] = {NULL, name, bases, dict};
+    if (allow_py2_metaclass) {
+        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
+        if (owned_metaclass) {
+            metaclass = owned_metaclass;
+        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
+            PyErr_Clear();
+        } else {
+            return NULL;
+        }
+    }
+    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
+        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
+        Py_XDECREF(owned_metaclass);
+        if (unlikely(!metaclass))
+            return NULL;
+        owned_metaclass = metaclass;
+    }
+    result = __Pyx_PyObject_FastCallDict(metaclass, margs+1, 3 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET,
+#if PY_VERSION_HEX < 0x030600A4
+        (metaclass == (PyObject*)&PyType_Type) ? NULL : mkw
+#else
+        mkw
+#endif
+    );
+    Py_XDECREF(owned_metaclass);
+#if PY_VERSION_HEX < 0x030600A4 && CYTHON_PEP487_INIT_SUBCLASS
+    if (likely(result) && likely(PyType_Check(result))) {
+        if (unlikely(__Pyx_SetNamesPEP487(result) < 0)) {
+            Py_CLEAR(result);
+        } else {
+            result = __Pyx_InitSubclassPEP487(result, mkw);
+        }
+    }
+#else
+    (void) &__Pyx_GetBuiltinName;
+#endif
+    return result;
+}
+
+/* CyFunctionClassCell */
+static int __Pyx_CyFunction_InitClassCell(PyObject *cyfunctions, PyObject *classobj) {
+    Py_ssize_t i, count = PyList_GET_SIZE(cyfunctions);
+    for (i = 0; i < count; i++) {
+        __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *)
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            PyList_GET_ITEM(cyfunctions, i);
+#else
+            PySequence_ITEM(cyfunctions, i);
+        if (unlikely(!m))
+            return -1;
+#endif
+        __Pyx_CyFunction_SetClassObj(m, classobj);
+#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
+        Py_DECREF((PyObject*)m);
+#endif
+    }
+    return 0;
+}
+
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
     PyObject **cython_runtime_dict;
@@ -7548,14 +6786,29 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__8));
+    }
+    return name;
+}
+#endif
+
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -7586,29 +6839,14 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__8));
-    }
-    return name;
-}
-#endif
-
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
```

### Comparing `docrx-0.0.11/src/wrapper/infra/WordFixer.c` & `docrx-0.0.110/src/wrapper/infra/WordFixer.c`

 * *Files 8% similar despite different names*

```diff
@@ -1436,14 +1436,78 @@
 #define __Pyx_DECREF_SET(r, v) do {\
         PyObject *tmp = (PyObject *) r;\
         r = v; __Pyx_DECREF(tmp);\
     } while (0)
 #define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
 #define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)
 
+/* PyErrExceptionMatches.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
+static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
+#else
+#define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
+#endif
+
+/* PyThreadStateGet.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_PyThreadState_declare  PyThreadState *__pyx_tstate;
+#define __Pyx_PyThreadState_assign  __pyx_tstate = __Pyx_PyThreadState_Current;
+#if PY_VERSION_HEX >= 0x030C00A6
+#define __Pyx_PyErr_Occurred()  (__pyx_tstate->current_exception != NULL)
+#define __Pyx_PyErr_CurrentExceptionType()  (__pyx_tstate->current_exception ? (PyObject*) Py_TYPE(__pyx_tstate->current_exception) : (PyObject*) NULL)
+#else
+#define __Pyx_PyErr_Occurred()  (__pyx_tstate->curexc_type != NULL)
+#define __Pyx_PyErr_CurrentExceptionType()  (__pyx_tstate->curexc_type)
+#endif
+#else
+#define __Pyx_PyThreadState_declare
+#define __Pyx_PyThreadState_assign
+#define __Pyx_PyErr_Occurred()  (PyErr_Occurred() != NULL)
+#define __Pyx_PyErr_CurrentExceptionType()  PyErr_Occurred()
+#endif
+
+/* PyErrFetchRestore.proto */
+#if CYTHON_FAST_THREAD_STATE
+#define __Pyx_PyErr_Clear() __Pyx_ErrRestore(NULL, NULL, NULL)
+#define __Pyx_ErrRestoreWithState(type, value, tb)  __Pyx_ErrRestoreInState(PyThreadState_GET(), type, value, tb)
+#define __Pyx_ErrFetchWithState(type, value, tb)    __Pyx_ErrFetchInState(PyThreadState_GET(), type, value, tb)
+#define __Pyx_ErrRestore(type, value, tb)  __Pyx_ErrRestoreInState(__pyx_tstate, type, value, tb)
+#define __Pyx_ErrFetch(type, value, tb)    __Pyx_ErrFetchInState(__pyx_tstate, type, value, tb)
+static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
+static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX < 0x030C00A6
+#define __Pyx_PyErr_SetNone(exc) (Py_INCREF(exc), __Pyx_ErrRestore((exc), NULL, NULL))
+#else
+#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
+#endif
+#else
+#define __Pyx_PyErr_Clear() PyErr_Clear()
+#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
+#define __Pyx_ErrRestoreWithState(type, value, tb)  PyErr_Restore(type, value, tb)
+#define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
+#define __Pyx_ErrRestoreInState(tstate, type, value, tb)  PyErr_Restore(type, value, tb)
+#define __Pyx_ErrFetchInState(tstate, type, value, tb)  PyErr_Fetch(type, value, tb)
+#define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
+#define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
+#endif
+
+/* PyObjectGetAttrStr.proto */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
+#else
+#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
+#endif
+
+/* PyObjectGetAttrStrNoError.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name);
+
+/* GetBuiltinName.proto */
+static PyObject *__Pyx_GetBuiltinName(PyObject *name);
+
 /* TupleAndListFromArray.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyList_FromArray(PyObject *const *src, Py_ssize_t n);
 static CYTHON_INLINE PyObject* __Pyx_PyTuple_FromArray(PyObject *const *src, Py_ssize_t n);
 #endif
 
 /* IncludeStringH.proto */
@@ -1491,77 +1555,64 @@
 
 /* ParseKeywords.proto */
 static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
     PyObject **argnames[],
     PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
     const char* function_name);
 
-/* PyErrExceptionMatches.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
-static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
-#else
-#define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
+/* PyFunctionFastCall.proto */
+#if CYTHON_FAST_PYCALL
+#if !CYTHON_VECTORCALL
+#define __Pyx_PyFunction_FastCall(func, args, nargs)\
+    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
+static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
 #endif
-
-/* PyThreadStateGet.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_PyThreadState_declare  PyThreadState *__pyx_tstate;
-#define __Pyx_PyThreadState_assign  __pyx_tstate = __Pyx_PyThreadState_Current;
-#if PY_VERSION_HEX >= 0x030C00A6
-#define __Pyx_PyErr_Occurred()  (__pyx_tstate->current_exception != NULL)
-#define __Pyx_PyErr_CurrentExceptionType()  (__pyx_tstate->current_exception ? (PyObject*) Py_TYPE(__pyx_tstate->current_exception) : (PyObject*) NULL)
-#else
-#define __Pyx_PyErr_Occurred()  (__pyx_tstate->curexc_type != NULL)
-#define __Pyx_PyErr_CurrentExceptionType()  (__pyx_tstate->curexc_type)
+#define __Pyx_BUILD_ASSERT_EXPR(cond)\
+    (sizeof(char [1 - 2*!(cond)]) - 1)
+#ifndef Py_MEMBER_SIZE
+#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
 #endif
-#else
-#define __Pyx_PyThreadState_declare
-#define __Pyx_PyThreadState_assign
-#define __Pyx_PyErr_Occurred()  (PyErr_Occurred() != NULL)
-#define __Pyx_PyErr_CurrentExceptionType()  PyErr_Occurred()
+#if !CYTHON_VECTORCALL
+#if PY_VERSION_HEX >= 0x03080000
+  #include "frameobject.h"
+#if PY_VERSION_HEX >= 0x030b00a6
+  #ifndef Py_BUILD_CORE
+    #define Py_BUILD_CORE 1
+  #endif
+  #include "internal/pycore_frame.h"
 #endif
-
-/* PyErrFetchRestore.proto */
-#if CYTHON_FAST_THREAD_STATE
-#define __Pyx_PyErr_Clear() __Pyx_ErrRestore(NULL, NULL, NULL)
-#define __Pyx_ErrRestoreWithState(type, value, tb)  __Pyx_ErrRestoreInState(PyThreadState_GET(), type, value, tb)
-#define __Pyx_ErrFetchWithState(type, value, tb)    __Pyx_ErrFetchInState(PyThreadState_GET(), type, value, tb)
-#define __Pyx_ErrRestore(type, value, tb)  __Pyx_ErrRestoreInState(__pyx_tstate, type, value, tb)
-#define __Pyx_ErrFetch(type, value, tb)    __Pyx_ErrFetchInState(__pyx_tstate, type, value, tb)
-static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
-static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX < 0x030C00A6
-#define __Pyx_PyErr_SetNone(exc) (Py_INCREF(exc), __Pyx_ErrRestore((exc), NULL, NULL))
+  #define __Pxy_PyFrame_Initialize_Offsets()
+  #define __Pyx_PyFrame_GetLocalsplus(frame)  ((frame)->f_localsplus)
 #else
-#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
+  static size_t __pyx_pyframe_localsplus_offset = 0;
+  #include "frameobject.h"
+  #define __Pxy_PyFrame_Initialize_Offsets()\
+    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
+     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
+  #define __Pyx_PyFrame_GetLocalsplus(frame)\
+    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
+#endif
 #endif
-#else
-#define __Pyx_PyErr_Clear() PyErr_Clear()
-#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
-#define __Pyx_ErrRestoreWithState(type, value, tb)  PyErr_Restore(type, value, tb)
-#define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
-#define __Pyx_ErrRestoreInState(tstate, type, value, tb)  PyErr_Restore(type, value, tb)
-#define __Pyx_ErrFetchInState(tstate, type, value, tb)  PyErr_Fetch(type, value, tb)
-#define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
-#define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
 #endif
 
-/* PyObjectGetAttrStr.proto */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
 #else
-#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
 #endif
 
-/* PyObjectGetAttrStrNoError.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name);
+/* PyObjectCallMethO.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
+#endif
 
-/* GetBuiltinName.proto */
-static PyObject *__Pyx_GetBuiltinName(PyObject *name);
+/* PyObjectFastCall.proto */
+#define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
+static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
@@ -1602,77 +1653,74 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
+/* PyObjectFormatSimple.proto */
+#if CYTHON_COMPILING_IN_PYPY
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#elif PY_MAJOR_VERSION < 3
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
+        PyObject_Format(s, f))
+#elif CYTHON_USE_TYPE_SLOTS
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
+        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
+        PyObject_Format(s, f))
+#else
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#endif
+
 /* PySequenceContains.proto */
 static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
     int result = PySequence_Contains(seq, item);
     return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
 }
 
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
-
-/* PyFunctionFastCall.proto */
-#if CYTHON_FAST_PYCALL
-#if !CYTHON_VECTORCALL
-#define __Pyx_PyFunction_FastCall(func, args, nargs)\
-    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
-static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
-#endif
-#define __Pyx_BUILD_ASSERT_EXPR(cond)\
-    (sizeof(char [1 - 2*!(cond)]) - 1)
-#ifndef Py_MEMBER_SIZE
-#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
-#endif
-#if !CYTHON_VECTORCALL
-#if PY_VERSION_HEX >= 0x03080000
-  #include "frameobject.h"
-#if PY_VERSION_HEX >= 0x030b00a6
-  #ifndef Py_BUILD_CORE
-    #define Py_BUILD_CORE 1
-  #endif
-  #include "internal/pycore_frame.h"
-#endif
-  #define __Pxy_PyFrame_Initialize_Offsets()
-  #define __Pyx_PyFrame_GetLocalsplus(frame)  ((frame)->f_localsplus)
+/* ListAppend.proto */
+#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
+static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
+    PyListObject* L = (PyListObject*) list;
+    Py_ssize_t len = Py_SIZE(list);
+    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
+        Py_INCREF(x);
+        PyList_SET_ITEM(list, len, x);
+        __Pyx_SET_SIZE(list, len + 1);
+        return 0;
+    }
+    return PyList_Append(list, x);
+}
 #else
-  static size_t __pyx_pyframe_localsplus_offset = 0;
-  #include "frameobject.h"
-  #define __Pxy_PyFrame_Initialize_Offsets()\
-    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
-     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
-  #define __Pyx_PyFrame_GetLocalsplus(frame)\
-    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
-#endif
-#endif
-#endif
-
-/* PyObjectCallMethO.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
+#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* PyObjectFastCall.proto */
-#define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
-static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
+/* RaiseException.proto */
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
 
 /* Import.proto */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
 
 /* ImportFrom.proto */
 static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
 
+/* ImportDottedModule.proto */
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
+#endif
+
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
 #endif
@@ -1880,47 +1928,67 @@
 /* #### Code section: before_global_var ### */
 #define __Pyx_MODULE_NAME "wrapper.infra.WordFixer"
 extern int __pyx_module_is_main_wrapper__infra__WordFixer;
 int __pyx_module_is_main_wrapper__infra__WordFixer = 0;
 
 /* Implementation of "wrapper.infra.WordFixer" */
 /* #### Code section: global_var ### */
+static PyObject *__pyx_builtin_ValueError;
 /* #### Code section: string_decls ### */
-static const char __pyx_k_[] = ".";
-static const char __pyx_k__4[] = "?";
+static const char __pyx_k_[] = "";
+static const char __pyx_k__2[] = " ";
+static const char __pyx_k__4[] = ".";
+static const char __pyx_k__5[] = "*";
+static const char __pyx_k__8[] = "?";
 static const char __pyx_k_ar[] = "ar";
 static const char __pyx_k_de[] = "de";
 static const char __pyx_k_en[] = "en";
 static const char __pyx_k_es[] = "es";
 static const char __pyx_k_eu[] = "eu";
 static const char __pyx_k_fr[] = "fr";
 static const char __pyx_k_lv[] = "lv";
 static const char __pyx_k_pt[] = "pt";
 static const char __pyx_k_ru[] = "ru";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
+static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
 static const char __pyx_k_word[] = "word";
-static const char __pyx_k_lower[] = "lower";
+static const char __pyx_k_debug[] = "debug";
 static const char __pyx_k_spell[] = "spell";
+static const char __pyx_k_split[] = "split";
+static const char __pyx_k_strip[] = "strip";
+static const char __pyx_k_value[] = "value";
+static const char __pyx_k_words[] = "words: ";
 static const char __pyx_k_import[] = "__import__";
+static const char __pyx_k_logging[] = "logging";
+static const char __pyx_k_unknown[] = "unknown";
+static const char __pyx_k_words_2[] = "words";
 static const char __pyx_k_fix_word[] = "fix_word";
 static const char __pyx_k_language[] = "language";
+static const char __pyx_k_sentence[] = "sentence";
 static const char __pyx_k_corrected[] = "corrected";
+static const char __pyx_k_new_words[] = "new_words";
 static const char __pyx_k_supported[] = "supported";
+static const char __pyx_k_ValueError[] = "ValueError";
 static const char __pyx_k_correction[] = "correction";
+static const char __pyx_k_misspelled[] = "misspelled";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
 static const char __pyx_k_SpellChecker[] = "SpellChecker";
+static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
+static const char __pyx_k_new_sentence[] = "new_sentence";
 static const char __pyx_k_spellchecker[] = "spellchecker";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
+static const char __pyx_k_Language_not_supported[] = "Language not supported";
 static const char __pyx_k_wrapper_infra_WordFixer[] = "wrapper.infra.WordFixer";
 static const char __pyx_k_src_wrapper_infra_WordFixer_pyx[] = "src/wrapper/infra/WordFixer.pyx";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_7wrapper_5infra_9WordFixer_fix_word(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_language); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_9WordFixer_fix_word(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_sentence, PyObject *__pyx_v_language); /* proto */
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -1943,45 +2011,65 @@
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
   PyObject *__pyx_kp_u_;
+  PyObject *__pyx_n_s_DocLanguage;
+  PyObject *__pyx_kp_u_Language_not_supported;
   PyObject *__pyx_n_s_SpellChecker;
-  PyObject *__pyx_n_s__4;
+  PyObject *__pyx_n_s_ValueError;
+  PyObject *__pyx_kp_u__2;
+  PyObject *__pyx_kp_u__4;
+  PyObject *__pyx_n_s__5;
+  PyObject *__pyx_n_s__8;
   PyObject *__pyx_n_u_ar;
   PyObject *__pyx_n_s_asyncio_coroutines;
   PyObject *__pyx_n_s_cline_in_traceback;
   PyObject *__pyx_n_s_corrected;
   PyObject *__pyx_n_s_correction;
   PyObject *__pyx_n_u_de;
+  PyObject *__pyx_n_s_debug;
   PyObject *__pyx_n_u_en;
   PyObject *__pyx_n_u_es;
   PyObject *__pyx_n_u_eu;
   PyObject *__pyx_n_s_fix_word;
   PyObject *__pyx_n_u_fr;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_is_coroutine;
   PyObject *__pyx_n_s_language;
-  PyObject *__pyx_n_s_lower;
+  PyObject *__pyx_n_s_logging;
   PyObject *__pyx_n_u_lv;
   PyObject *__pyx_n_s_main;
+  PyObject *__pyx_n_s_misspelled;
   PyObject *__pyx_n_s_name;
+  PyObject *__pyx_n_s_new_sentence;
+  PyObject *__pyx_n_s_new_words;
   PyObject *__pyx_n_u_pt;
   PyObject *__pyx_n_u_ru;
+  PyObject *__pyx_n_s_sentence;
+  PyObject *__pyx_n_s_spec;
   PyObject *__pyx_n_s_spell;
   PyObject *__pyx_n_s_spellchecker;
+  PyObject *__pyx_n_s_split;
   PyObject *__pyx_kp_s_src_wrapper_infra_WordFixer_pyx;
+  PyObject *__pyx_n_s_strip;
   PyObject *__pyx_n_s_supported;
   PyObject *__pyx_n_s_test;
+  PyObject *__pyx_n_s_unknown;
+  PyObject *__pyx_n_s_value;
   PyObject *__pyx_n_s_word;
+  PyObject *__pyx_kp_u_words;
+  PyObject *__pyx_n_s_words_2;
   PyObject *__pyx_n_s_wrapper_infra_WordFixer;
-  PyObject *__pyx_tuple__2;
-  PyObject *__pyx_codeobj__3;
+  PyObject *__pyx_tuple__3;
+  PyObject *__pyx_tuple__6;
+  PyObject *__pyx_codeobj__7;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2017,45 +2105,65 @@
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
   Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Language_not_supported);
   Py_CLEAR(clear_module_state->__pyx_n_s_SpellChecker);
-  Py_CLEAR(clear_module_state->__pyx_n_s__4);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ValueError);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__4);
+  Py_CLEAR(clear_module_state->__pyx_n_s__5);
+  Py_CLEAR(clear_module_state->__pyx_n_s__8);
   Py_CLEAR(clear_module_state->__pyx_n_u_ar);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
   Py_CLEAR(clear_module_state->__pyx_n_s_corrected);
   Py_CLEAR(clear_module_state->__pyx_n_s_correction);
   Py_CLEAR(clear_module_state->__pyx_n_u_de);
+  Py_CLEAR(clear_module_state->__pyx_n_s_debug);
   Py_CLEAR(clear_module_state->__pyx_n_u_en);
   Py_CLEAR(clear_module_state->__pyx_n_u_es);
   Py_CLEAR(clear_module_state->__pyx_n_u_eu);
   Py_CLEAR(clear_module_state->__pyx_n_s_fix_word);
   Py_CLEAR(clear_module_state->__pyx_n_u_fr);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
   Py_CLEAR(clear_module_state->__pyx_n_s_language);
-  Py_CLEAR(clear_module_state->__pyx_n_s_lower);
+  Py_CLEAR(clear_module_state->__pyx_n_s_logging);
   Py_CLEAR(clear_module_state->__pyx_n_u_lv);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
+  Py_CLEAR(clear_module_state->__pyx_n_s_misspelled);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
+  Py_CLEAR(clear_module_state->__pyx_n_s_new_sentence);
+  Py_CLEAR(clear_module_state->__pyx_n_s_new_words);
   Py_CLEAR(clear_module_state->__pyx_n_u_pt);
   Py_CLEAR(clear_module_state->__pyx_n_u_ru);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sentence);
+  Py_CLEAR(clear_module_state->__pyx_n_s_spec);
   Py_CLEAR(clear_module_state->__pyx_n_s_spell);
   Py_CLEAR(clear_module_state->__pyx_n_s_spellchecker);
+  Py_CLEAR(clear_module_state->__pyx_n_s_split);
   Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_WordFixer_pyx);
+  Py_CLEAR(clear_module_state->__pyx_n_s_strip);
   Py_CLEAR(clear_module_state->__pyx_n_s_supported);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
+  Py_CLEAR(clear_module_state->__pyx_n_s_unknown);
+  Py_CLEAR(clear_module_state->__pyx_n_s_value);
   Py_CLEAR(clear_module_state->__pyx_n_s_word);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_words);
+  Py_CLEAR(clear_module_state->__pyx_n_s_words_2);
   Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_WordFixer);
-  Py_CLEAR(clear_module_state->__pyx_tuple__2);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__3);
+  Py_CLEAR(clear_module_state->__pyx_tuple__3);
+  Py_CLEAR(clear_module_state->__pyx_tuple__6);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2069,45 +2177,65 @@
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
   Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Language_not_supported);
   Py_VISIT(traverse_module_state->__pyx_n_s_SpellChecker);
-  Py_VISIT(traverse_module_state->__pyx_n_s__4);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ValueError);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__4);
+  Py_VISIT(traverse_module_state->__pyx_n_s__5);
+  Py_VISIT(traverse_module_state->__pyx_n_s__8);
   Py_VISIT(traverse_module_state->__pyx_n_u_ar);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
   Py_VISIT(traverse_module_state->__pyx_n_s_corrected);
   Py_VISIT(traverse_module_state->__pyx_n_s_correction);
   Py_VISIT(traverse_module_state->__pyx_n_u_de);
+  Py_VISIT(traverse_module_state->__pyx_n_s_debug);
   Py_VISIT(traverse_module_state->__pyx_n_u_en);
   Py_VISIT(traverse_module_state->__pyx_n_u_es);
   Py_VISIT(traverse_module_state->__pyx_n_u_eu);
   Py_VISIT(traverse_module_state->__pyx_n_s_fix_word);
   Py_VISIT(traverse_module_state->__pyx_n_u_fr);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
   Py_VISIT(traverse_module_state->__pyx_n_s_language);
-  Py_VISIT(traverse_module_state->__pyx_n_s_lower);
+  Py_VISIT(traverse_module_state->__pyx_n_s_logging);
   Py_VISIT(traverse_module_state->__pyx_n_u_lv);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
+  Py_VISIT(traverse_module_state->__pyx_n_s_misspelled);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
+  Py_VISIT(traverse_module_state->__pyx_n_s_new_sentence);
+  Py_VISIT(traverse_module_state->__pyx_n_s_new_words);
   Py_VISIT(traverse_module_state->__pyx_n_u_pt);
   Py_VISIT(traverse_module_state->__pyx_n_u_ru);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sentence);
+  Py_VISIT(traverse_module_state->__pyx_n_s_spec);
   Py_VISIT(traverse_module_state->__pyx_n_s_spell);
   Py_VISIT(traverse_module_state->__pyx_n_s_spellchecker);
+  Py_VISIT(traverse_module_state->__pyx_n_s_split);
   Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_WordFixer_pyx);
+  Py_VISIT(traverse_module_state->__pyx_n_s_strip);
   Py_VISIT(traverse_module_state->__pyx_n_s_supported);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
+  Py_VISIT(traverse_module_state->__pyx_n_s_unknown);
+  Py_VISIT(traverse_module_state->__pyx_n_s_value);
   Py_VISIT(traverse_module_state->__pyx_n_s_word);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_words);
+  Py_VISIT(traverse_module_state->__pyx_n_s_words_2);
   Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_WordFixer);
-  Py_VISIT(traverse_module_state->__pyx_tuple__2);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__3);
+  Py_VISIT(traverse_module_state->__pyx_tuple__3);
+  Py_VISIT(traverse_module_state->__pyx_tuple__6);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__7);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2131,356 +2259,679 @@
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
 #define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
+#define __pyx_kp_u_Language_not_supported __pyx_mstate_global->__pyx_kp_u_Language_not_supported
 #define __pyx_n_s_SpellChecker __pyx_mstate_global->__pyx_n_s_SpellChecker
-#define __pyx_n_s__4 __pyx_mstate_global->__pyx_n_s__4
+#define __pyx_n_s_ValueError __pyx_mstate_global->__pyx_n_s_ValueError
+#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
+#define __pyx_kp_u__4 __pyx_mstate_global->__pyx_kp_u__4
+#define __pyx_n_s__5 __pyx_mstate_global->__pyx_n_s__5
+#define __pyx_n_s__8 __pyx_mstate_global->__pyx_n_s__8
 #define __pyx_n_u_ar __pyx_mstate_global->__pyx_n_u_ar
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
 #define __pyx_n_s_corrected __pyx_mstate_global->__pyx_n_s_corrected
 #define __pyx_n_s_correction __pyx_mstate_global->__pyx_n_s_correction
 #define __pyx_n_u_de __pyx_mstate_global->__pyx_n_u_de
+#define __pyx_n_s_debug __pyx_mstate_global->__pyx_n_s_debug
 #define __pyx_n_u_en __pyx_mstate_global->__pyx_n_u_en
 #define __pyx_n_u_es __pyx_mstate_global->__pyx_n_u_es
 #define __pyx_n_u_eu __pyx_mstate_global->__pyx_n_u_eu
 #define __pyx_n_s_fix_word __pyx_mstate_global->__pyx_n_s_fix_word
 #define __pyx_n_u_fr __pyx_mstate_global->__pyx_n_u_fr
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
 #define __pyx_n_s_language __pyx_mstate_global->__pyx_n_s_language
-#define __pyx_n_s_lower __pyx_mstate_global->__pyx_n_s_lower
+#define __pyx_n_s_logging __pyx_mstate_global->__pyx_n_s_logging
 #define __pyx_n_u_lv __pyx_mstate_global->__pyx_n_u_lv
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
+#define __pyx_n_s_misspelled __pyx_mstate_global->__pyx_n_s_misspelled
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
+#define __pyx_n_s_new_sentence __pyx_mstate_global->__pyx_n_s_new_sentence
+#define __pyx_n_s_new_words __pyx_mstate_global->__pyx_n_s_new_words
 #define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
 #define __pyx_n_u_ru __pyx_mstate_global->__pyx_n_u_ru
+#define __pyx_n_s_sentence __pyx_mstate_global->__pyx_n_s_sentence
+#define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
 #define __pyx_n_s_spell __pyx_mstate_global->__pyx_n_s_spell
 #define __pyx_n_s_spellchecker __pyx_mstate_global->__pyx_n_s_spellchecker
+#define __pyx_n_s_split __pyx_mstate_global->__pyx_n_s_split
 #define __pyx_kp_s_src_wrapper_infra_WordFixer_pyx __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_WordFixer_pyx
+#define __pyx_n_s_strip __pyx_mstate_global->__pyx_n_s_strip
 #define __pyx_n_s_supported __pyx_mstate_global->__pyx_n_s_supported
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
+#define __pyx_n_s_unknown __pyx_mstate_global->__pyx_n_s_unknown
+#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
 #define __pyx_n_s_word __pyx_mstate_global->__pyx_n_s_word
+#define __pyx_kp_u_words __pyx_mstate_global->__pyx_kp_u_words
+#define __pyx_n_s_words_2 __pyx_mstate_global->__pyx_n_s_words_2
 #define __pyx_n_s_wrapper_infra_WordFixer __pyx_mstate_global->__pyx_n_s_wrapper_infra_WordFixer
-#define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
-#define __pyx_codeobj__3 __pyx_mstate_global->__pyx_codeobj__3
+#define __pyx_tuple__3 __pyx_mstate_global->__pyx_tuple__3
+#define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
+#define __pyx_codeobj__7 __pyx_mstate_global->__pyx_codeobj__7
 /* #### Code section: module_code ### */
 
-/* "wrapper/infra/WordFixer.pyx":15
- * supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+/* "wrapper/infra/WordFixer.pyx":5
+ * import logging
  * 
- * def fix_word(word, language):             # <<<<<<<<<<<<<<
- *     corrected = None
- *     if language in supported:
+ * def fix_word(sentence, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     sentence = sentence.strip()
+ *     new_words = []
  */
 
 /* Python wrapper */
 static PyObject *__pyx_pw_7wrapper_5infra_9WordFixer_1fix_word(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ); /*proto*/
-PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_9WordFixer_fix_word, "fix_word(word, language)");
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_9WordFixer_fix_word, "fix_word(sentence, language: DocLanguage)");
 static PyMethodDef __pyx_mdef_7wrapper_5infra_9WordFixer_1fix_word = {"fix_word", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_9WordFixer_1fix_word, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_9WordFixer_fix_word};
 static PyObject *__pyx_pw_7wrapper_5infra_9WordFixer_1fix_word(PyObject *__pyx_self, 
 #if CYTHON_METH_FASTCALL
 PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
 #else
 PyObject *__pyx_args, PyObject *__pyx_kwds
 #endif
 ) {
-  PyObject *__pyx_v_word = 0;
+  PyObject *__pyx_v_sentence = 0;
   PyObject *__pyx_v_language = 0;
   #if !CYTHON_METH_FASTCALL
   CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
   #endif
   CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("fix_word (wrapper)", 0);
   {
-    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_word,&__pyx_n_s_language,0};
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_sentence,&__pyx_n_s_language,0};
     PyObject* values[2] = {0,0};
     if (__pyx_kwds) {
       Py_ssize_t kw_args;
       switch (__pyx_nargs) {
         case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
         CYTHON_FALLTHROUGH;
         case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         CYTHON_FALLTHROUGH;
         case  0: break;
         default: goto __pyx_L5_argtuple_error;
       }
       kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
       switch (__pyx_nargs) {
         case  0:
-        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_word)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 15, __pyx_L3_error)
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_sentence)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 5, __pyx_L3_error)
         else goto __pyx_L5_argtuple_error;
         CYTHON_FALLTHROUGH;
         case  1:
         if (likely((values[1] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_language)) != 0)) kw_args--;
-        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 15, __pyx_L3_error)
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 5, __pyx_L3_error)
         else {
-          __Pyx_RaiseArgtupleInvalid("fix_word", 1, 2, 2, 1); __PYX_ERR(0, 15, __pyx_L3_error)
+          __Pyx_RaiseArgtupleInvalid("fix_word", 1, 2, 2, 1); __PYX_ERR(0, 5, __pyx_L3_error)
         }
       }
       if (unlikely(kw_args > 0)) {
         const Py_ssize_t kwd_pos_args = __pyx_nargs;
-        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "fix_word") < 0)) __PYX_ERR(0, 15, __pyx_L3_error)
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "fix_word") < 0)) __PYX_ERR(0, 5, __pyx_L3_error)
       }
     } else if (unlikely(__pyx_nargs != 2)) {
       goto __pyx_L5_argtuple_error;
     } else {
       values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
       values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
     }
-    __pyx_v_word = values[0];
+    __pyx_v_sentence = values[0];
     __pyx_v_language = values[1];
   }
   goto __pyx_L4_argument_unpacking_done;
   __pyx_L5_argtuple_error:;
-  __Pyx_RaiseArgtupleInvalid("fix_word", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 15, __pyx_L3_error)
+  __Pyx_RaiseArgtupleInvalid("fix_word", 1, 2, 2, __pyx_nargs); __PYX_ERR(0, 5, __pyx_L3_error)
   __pyx_L3_error:;
   __Pyx_AddTraceback("wrapper.infra.WordFixer.fix_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __Pyx_RefNannyFinishContext();
   return NULL;
   __pyx_L4_argument_unpacking_done:;
-  __pyx_r = __pyx_pf_7wrapper_5infra_9WordFixer_fix_word(__pyx_self, __pyx_v_word, __pyx_v_language);
+  __pyx_r = __pyx_pf_7wrapper_5infra_9WordFixer_fix_word(__pyx_self, __pyx_v_sentence, __pyx_v_language);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_7wrapper_5infra_9WordFixer_fix_word(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_word, PyObject *__pyx_v_language) {
+static PyObject *__pyx_pf_7wrapper_5infra_9WordFixer_fix_word(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_sentence, PyObject *__pyx_v_language) {
+  PyObject *__pyx_v_new_words = NULL;
+  PyObject *__pyx_v_new_sentence = NULL;
+  PyObject *__pyx_v_words = NULL;
+  PyObject *__pyx_v_supported = NULL;
   PyObject *__pyx_v_corrected = NULL;
   PyObject *__pyx_v_spell = NULL;
+  PyObject *__pyx_v_misspelled = NULL;
+  PyObject *__pyx_v_word = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
   PyObject *__pyx_t_1 = NULL;
-  int __pyx_t_2;
+  PyObject *__pyx_t_2 = NULL;
   PyObject *__pyx_t_3 = NULL;
-  PyObject *__pyx_t_4 = NULL;
+  int __pyx_t_4;
   int __pyx_t_5;
   int __pyx_t_6;
   int __pyx_t_7;
   PyObject *__pyx_t_8 = NULL;
+  Py_ssize_t __pyx_t_9;
+  PyObject *(*__pyx_t_10)(PyObject *);
+  int __pyx_t_11;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannySetupContext("fix_word", 0);
+  __Pyx_INCREF(__pyx_v_sentence);
 
-  /* "wrapper/infra/WordFixer.pyx":16
+  /* "wrapper/infra/WordFixer.pyx":6
  * 
- * def fix_word(word, language):
- *     corrected = None             # <<<<<<<<<<<<<<
- *     if language in supported:
- *         spell = SpellChecker(language=language)
- */
-  __Pyx_INCREF(Py_None);
-  __pyx_v_corrected = Py_None;
-
-  /* "wrapper/infra/WordFixer.pyx":17
- * def fix_word(word, language):
- *     corrected = None
- *     if language in supported:             # <<<<<<<<<<<<<<
- *         spell = SpellChecker(language=language)
- *         corrected = spell.correction(word)
+ * def fix_word(sentence, language:DocLanguage):
+ *     sentence = sentence.strip()             # <<<<<<<<<<<<<<
+ *     new_words = []
+ *     new_sentence = ''
+ */
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_sentence, __pyx_n_s_strip); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 6, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_3)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_3);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 6, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF_SET(__pyx_v_sentence, __pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/WordFixer.pyx":7
+ * def fix_word(sentence, language:DocLanguage):
+ *     sentence = sentence.strip()
+ *     new_words = []             # <<<<<<<<<<<<<<
+ *     new_sentence = ''
+ *     if not sentence or sentence == '':
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_supported); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 17, __pyx_L1_error)
+  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_1);
-  __pyx_t_2 = (__Pyx_PySequence_ContainsTF(__pyx_v_language, __pyx_t_1, Py_EQ)); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  if (__pyx_t_2) {
-
-    /* "wrapper/infra/WordFixer.pyx":18
- *     corrected = None
- *     if language in supported:
- *         spell = SpellChecker(language=language)             # <<<<<<<<<<<<<<
- *         corrected = spell.correction(word)
- *         if not corrected or corrected.lower() != word.lower():
+  __pyx_v_new_words = ((PyObject*)__pyx_t_1);
+  __pyx_t_1 = 0;
+
+  /* "wrapper/infra/WordFixer.pyx":8
+ *     sentence = sentence.strip()
+ *     new_words = []
+ *     new_sentence = ''             # <<<<<<<<<<<<<<
+ *     if not sentence or sentence == '':
+ *         new_sentence = ''
  */
-    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_SpellChecker); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_v_language) < 0) __PYX_ERR(0, 18, __pyx_L1_error)
-    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 18, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_4);
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_v_spell = __pyx_t_4;
-    __pyx_t_4 = 0;
+  __Pyx_INCREF(__pyx_kp_u_);
+  __pyx_v_new_sentence = __pyx_kp_u_;
 
-    /* "wrapper/infra/WordFixer.pyx":19
- *     if language in supported:
- *         spell = SpellChecker(language=language)
- *         corrected = spell.correction(word)             # <<<<<<<<<<<<<<
- *         if not corrected or corrected.lower() != word.lower():
- *             corrected = None
+  /* "wrapper/infra/WordFixer.pyx":9
+ *     new_words = []
+ *     new_sentence = ''
+ *     if not sentence or sentence == '':             # <<<<<<<<<<<<<<
+ *         new_sentence = ''
+ *     else:
  */
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_spell, __pyx_n_s_correction); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_1)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_1);
+  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_sentence); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_7 = (!__pyx_t_6);
+  if (!__pyx_t_7) {
+  } else {
+    __pyx_t_5 = __pyx_t_7;
+    goto __pyx_L4_bool_binop_done;
+  }
+  __pyx_t_7 = (__Pyx_PyUnicode_Equals(__pyx_v_sentence, __pyx_kp_u_, Py_EQ)); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_5 = __pyx_t_7;
+  __pyx_L4_bool_binop_done:;
+  if (__pyx_t_5) {
+
+    /* "wrapper/infra/WordFixer.pyx":10
+ *     new_sentence = ''
+ *     if not sentence or sentence == '':
+ *         new_sentence = ''             # <<<<<<<<<<<<<<
+ *     else:
+ *         words = sentence.split()
+ */
+    __Pyx_INCREF(__pyx_kp_u_);
+    __Pyx_DECREF_SET(__pyx_v_new_sentence, __pyx_kp_u_);
+
+    /* "wrapper/infra/WordFixer.pyx":9
+ *     new_words = []
+ *     new_sentence = ''
+ *     if not sentence or sentence == '':             # <<<<<<<<<<<<<<
+ *         new_sentence = ''
+ *     else:
+ */
+    goto __pyx_L3;
+  }
+
+  /* "wrapper/infra/WordFixer.pyx":12
+ *         new_sentence = ''
+ *     else:
+ *         words = sentence.split()             # <<<<<<<<<<<<<<
+ *         logging.debug(f'words: {words}')
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+ */
+  /*else*/ {
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_sentence, __pyx_n_s_split); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_3);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_v_word};
-      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 1+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 19, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
-      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    }
-    __Pyx_DECREF_SET(__pyx_v_corrected, __pyx_t_4);
-    __pyx_t_4 = 0;
-
-    /* "wrapper/infra/WordFixer.pyx":20
- *         spell = SpellChecker(language=language)
- *         corrected = spell.correction(word)
- *         if not corrected or corrected.lower() != word.lower():             # <<<<<<<<<<<<<<
- *             corrected = None
- *     return corrected
- */
-    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_corrected); if (unlikely((__pyx_t_6 < 0))) __PYX_ERR(0, 20, __pyx_L1_error)
-    __pyx_t_7 = (!__pyx_t_6);
-    if (!__pyx_t_7) {
-    } else {
-      __pyx_t_2 = __pyx_t_7;
-      goto __pyx_L5_bool_binop_done;
-    }
-    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_corrected, __pyx_n_s_lower); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
+      PyObject *__pyx_callargs[1] = {__pyx_t_3, };
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    }
+    __pyx_v_words = __pyx_t_1;
+    __pyx_t_1 = 0;
+
+    /* "wrapper/infra/WordFixer.pyx":13
+ *     else:
+ *         words = sentence.split()
+ *         logging.debug(f'words: {words}')             # <<<<<<<<<<<<<<
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+ *         corrected = None
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_logging); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_debug); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_3);
-    __pyx_t_1 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
-      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
-      if (likely(__pyx_t_1)) {
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_words, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_8 = __Pyx_PyUnicode_Concat(__pyx_kp_u_words, __pyx_t_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_2 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
+      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
+      if (likely(__pyx_t_2)) {
         PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-        __Pyx_INCREF(__pyx_t_1);
+        __Pyx_INCREF(__pyx_t_2);
         __Pyx_INCREF(function);
         __Pyx_DECREF_SET(__pyx_t_3, function);
-        __pyx_t_5 = 1;
+        __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[1] = {__pyx_t_1, };
-      __pyx_t_4 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 20, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_4);
+      PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_t_8};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 13, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
       __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
     }
-    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_word, __pyx_n_s_lower); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 20, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+    /* "wrapper/infra/WordFixer.pyx":14
+ *         words = sentence.split()
+ *         logging.debug(f'words: {words}')
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']             # <<<<<<<<<<<<<<
+ *         corrected = None
+ *         if language.value in supported:
+ */
+    __pyx_t_1 = PyList_New(9); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_8 = NULL;
-    __pyx_t_5 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_1);
-      if (likely(__pyx_t_8)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-        __Pyx_INCREF(__pyx_t_8);
-        __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_1, function);
-        __pyx_t_5 = 1;
-      }
-    }
-    {
-      PyObject *__pyx_callargs[1] = {__pyx_t_8, };
-      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_5, 0+__pyx_t_5);
-      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
+    __Pyx_INCREF(__pyx_n_u_en);
+    __Pyx_GIVEREF(__pyx_n_u_en);
+    PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_u_en);
+    __Pyx_INCREF(__pyx_n_u_es);
+    __Pyx_GIVEREF(__pyx_n_u_es);
+    PyList_SET_ITEM(__pyx_t_1, 1, __pyx_n_u_es);
+    __Pyx_INCREF(__pyx_n_u_fr);
+    __Pyx_GIVEREF(__pyx_n_u_fr);
+    PyList_SET_ITEM(__pyx_t_1, 2, __pyx_n_u_fr);
+    __Pyx_INCREF(__pyx_n_u_pt);
+    __Pyx_GIVEREF(__pyx_n_u_pt);
+    PyList_SET_ITEM(__pyx_t_1, 3, __pyx_n_u_pt);
+    __Pyx_INCREF(__pyx_n_u_de);
+    __Pyx_GIVEREF(__pyx_n_u_de);
+    PyList_SET_ITEM(__pyx_t_1, 4, __pyx_n_u_de);
+    __Pyx_INCREF(__pyx_n_u_ru);
+    __Pyx_GIVEREF(__pyx_n_u_ru);
+    PyList_SET_ITEM(__pyx_t_1, 5, __pyx_n_u_ru);
+    __Pyx_INCREF(__pyx_n_u_ar);
+    __Pyx_GIVEREF(__pyx_n_u_ar);
+    PyList_SET_ITEM(__pyx_t_1, 6, __pyx_n_u_ar);
+    __Pyx_INCREF(__pyx_n_u_eu);
+    __Pyx_GIVEREF(__pyx_n_u_eu);
+    PyList_SET_ITEM(__pyx_t_1, 7, __pyx_n_u_eu);
+    __Pyx_INCREF(__pyx_n_u_lv);
+    __Pyx_GIVEREF(__pyx_n_u_lv);
+    PyList_SET_ITEM(__pyx_t_1, 8, __pyx_n_u_lv);
+    __pyx_v_supported = ((PyObject*)__pyx_t_1);
+    __pyx_t_1 = 0;
+
+    /* "wrapper/infra/WordFixer.pyx":15
+ *         logging.debug(f'words: {words}')
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+ *         corrected = None             # <<<<<<<<<<<<<<
+ *         if language.value in supported:
+ *             spell = SpellChecker(language=language.value)
+ */
+    __Pyx_INCREF(Py_None);
+    __pyx_v_corrected = Py_None;
+
+    /* "wrapper/infra/WordFixer.pyx":16
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+ *         corrected = None
+ *         if language.value in supported:             # <<<<<<<<<<<<<<
+ *             spell = SpellChecker(language=language.value)
+ *             misspelled = spell.unknown(words)
+ */
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_t_1, __pyx_v_supported, Py_EQ)); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (likely(__pyx_t_5)) {
+
+      /* "wrapper/infra/WordFixer.pyx":17
+ *         corrected = None
+ *         if language.value in supported:
+ *             spell = SpellChecker(language=language.value)             # <<<<<<<<<<<<<<
+ *             misspelled = spell.unknown(words)
+ *             for word in misspelled:
+ */
+      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_SpellChecker); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 17, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 17, __pyx_L1_error)
       __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_language, __pyx_n_s_value); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 17, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_8);
+      if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_language, __pyx_t_8) < 0) __PYX_ERR(0, 17, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+      __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 17, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_8);
       __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    }
-    __pyx_t_1 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 20, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
-    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_7 < 0))) __PYX_ERR(0, 20, __pyx_L1_error)
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-    __pyx_t_2 = __pyx_t_7;
-    __pyx_L5_bool_binop_done:;
-    if (__pyx_t_2) {
-
-      /* "wrapper/infra/WordFixer.pyx":21
- *         corrected = spell.correction(word)
- *         if not corrected or corrected.lower() != word.lower():
- *             corrected = None             # <<<<<<<<<<<<<<
- *     return corrected
- * 
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __pyx_v_spell = __pyx_t_8;
+      __pyx_t_8 = 0;
+
+      /* "wrapper/infra/WordFixer.pyx":18
+ *         if language.value in supported:
+ *             spell = SpellChecker(language=language.value)
+ *             misspelled = spell.unknown(words)             # <<<<<<<<<<<<<<
+ *             for word in misspelled:
+ *                 corrected = spell.correction(word)
+ */
+      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_spell, __pyx_n_s_unknown); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_1 = NULL;
+      __pyx_t_4 = 0;
+      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
+        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
+        if (likely(__pyx_t_1)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
+          __Pyx_INCREF(__pyx_t_1);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_3, function);
+          __pyx_t_4 = 1;
+        }
+      }
+      {
+        PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_v_words};
+        __pyx_t_8 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+        if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 18, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      }
+      __pyx_v_misspelled = __pyx_t_8;
+      __pyx_t_8 = 0;
+
+      /* "wrapper/infra/WordFixer.pyx":19
+ *             spell = SpellChecker(language=language.value)
+ *             misspelled = spell.unknown(words)
+ *             for word in misspelled:             # <<<<<<<<<<<<<<
+ *                 corrected = spell.correction(word)
+ *                 if not corrected:
+ */
+      if (likely(PyList_CheckExact(__pyx_v_misspelled)) || PyTuple_CheckExact(__pyx_v_misspelled)) {
+        __pyx_t_8 = __pyx_v_misspelled; __Pyx_INCREF(__pyx_t_8); __pyx_t_9 = 0;
+        __pyx_t_10 = NULL;
+      } else {
+        __pyx_t_9 = -1; __pyx_t_8 = PyObject_GetIter(__pyx_v_misspelled); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 19, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
+        __pyx_t_10 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 19, __pyx_L1_error)
+      }
+      for (;;) {
+        if (likely(!__pyx_t_10)) {
+          if (likely(PyList_CheckExact(__pyx_t_8))) {
+            if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_8)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_3 = PyList_GET_ITEM(__pyx_t_8, __pyx_t_9); __Pyx_INCREF(__pyx_t_3); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 19, __pyx_L1_error)
+            #else
+            __pyx_t_3 = PySequence_ITEM(__pyx_t_8, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            #endif
+          } else {
+            if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_8)) break;
+            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+            __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_8, __pyx_t_9); __Pyx_INCREF(__pyx_t_3); __pyx_t_9++; if (unlikely((0 < 0))) __PYX_ERR(0, 19, __pyx_L1_error)
+            #else
+            __pyx_t_3 = PySequence_ITEM(__pyx_t_8, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            #endif
+          }
+        } else {
+          __pyx_t_3 = __pyx_t_10(__pyx_t_8);
+          if (unlikely(!__pyx_t_3)) {
+            PyObject* exc_type = PyErr_Occurred();
+            if (exc_type) {
+              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+              else __PYX_ERR(0, 19, __pyx_L1_error)
+            }
+            break;
+          }
+          __Pyx_GOTREF(__pyx_t_3);
+        }
+        __Pyx_XDECREF_SET(__pyx_v_word, __pyx_t_3);
+        __pyx_t_3 = 0;
+
+        /* "wrapper/infra/WordFixer.pyx":20
+ *             misspelled = spell.unknown(words)
+ *             for word in misspelled:
+ *                 corrected = spell.correction(word)             # <<<<<<<<<<<<<<
+ *                 if not corrected:
+ *                     new_words.append(word)
  */
-      __Pyx_INCREF(Py_None);
-      __Pyx_DECREF_SET(__pyx_v_corrected, Py_None);
+        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_spell, __pyx_n_s_correction); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 20, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_1);
+        __pyx_t_2 = NULL;
+        __pyx_t_4 = 0;
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
+          __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
+          if (likely(__pyx_t_2)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+            __Pyx_INCREF(__pyx_t_2);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_1, function);
+            __pyx_t_4 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[2] = {__pyx_t_2, __pyx_v_word};
+          __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        }
+        __Pyx_DECREF_SET(__pyx_v_corrected, __pyx_t_3);
+        __pyx_t_3 = 0;
+
+        /* "wrapper/infra/WordFixer.pyx":21
+ *             for word in misspelled:
+ *                 corrected = spell.correction(word)
+ *                 if not corrected:             # <<<<<<<<<<<<<<
+ *                     new_words.append(word)
+ *                 else:
+ */
+        __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_corrected); if (unlikely((__pyx_t_5 < 0))) __PYX_ERR(0, 21, __pyx_L1_error)
+        __pyx_t_7 = (!__pyx_t_5);
+        if (__pyx_t_7) {
+
+          /* "wrapper/infra/WordFixer.pyx":22
+ *                 corrected = spell.correction(word)
+ *                 if not corrected:
+ *                     new_words.append(word)             # <<<<<<<<<<<<<<
+ *                 else:
+ *                     new_words.append(corrected)
+ */
+          __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_new_words, __pyx_v_word); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 22, __pyx_L1_error)
+
+          /* "wrapper/infra/WordFixer.pyx":21
+ *             for word in misspelled:
+ *                 corrected = spell.correction(word)
+ *                 if not corrected:             # <<<<<<<<<<<<<<
+ *                     new_words.append(word)
+ *                 else:
+ */
+          goto __pyx_L9;
+        }
+
+        /* "wrapper/infra/WordFixer.pyx":24
+ *                     new_words.append(word)
+ *                 else:
+ *                     new_words.append(corrected)             # <<<<<<<<<<<<<<
+ *             new_sentence = ' '.join(new_words)
+ *         else:
+ */
+        /*else*/ {
+          __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_new_words, __pyx_v_corrected); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 24, __pyx_L1_error)
+        }
+        __pyx_L9:;
+
+        /* "wrapper/infra/WordFixer.pyx":19
+ *             spell = SpellChecker(language=language.value)
+ *             misspelled = spell.unknown(words)
+ *             for word in misspelled:             # <<<<<<<<<<<<<<
+ *                 corrected = spell.correction(word)
+ *                 if not corrected:
+ */
+      }
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-      /* "wrapper/infra/WordFixer.pyx":20
- *         spell = SpellChecker(language=language)
- *         corrected = spell.correction(word)
- *         if not corrected or corrected.lower() != word.lower():             # <<<<<<<<<<<<<<
- *             corrected = None
- *     return corrected
+      /* "wrapper/infra/WordFixer.pyx":25
+ *                 else:
+ *                     new_words.append(corrected)
+ *             new_sentence = ' '.join(new_words)             # <<<<<<<<<<<<<<
+ *         else:
+ *             raise ValueError('Language not supported')
+ */
+      __pyx_t_8 = PyUnicode_Join(__pyx_kp_u__2, __pyx_v_new_words); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 25, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_8);
+      __Pyx_DECREF_SET(__pyx_v_new_sentence, ((PyObject*)__pyx_t_8));
+      __pyx_t_8 = 0;
+
+      /* "wrapper/infra/WordFixer.pyx":16
+ *         supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+ *         corrected = None
+ *         if language.value in supported:             # <<<<<<<<<<<<<<
+ *             spell = SpellChecker(language=language.value)
+ *             misspelled = spell.unknown(words)
  */
+      goto __pyx_L6;
     }
 
-    /* "wrapper/infra/WordFixer.pyx":17
- * def fix_word(word, language):
- *     corrected = None
- *     if language in supported:             # <<<<<<<<<<<<<<
- *         spell = SpellChecker(language=language)
- *         corrected = spell.correction(word)
+    /* "wrapper/infra/WordFixer.pyx":27
+ *             new_sentence = ' '.join(new_words)
+ *         else:
+ *             raise ValueError('Language not supported')             # <<<<<<<<<<<<<<
+ *     return new_sentence
+ * 
  */
+    /*else*/ {
+      __pyx_t_8 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__3, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 27, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_8);
+      __Pyx_Raise(__pyx_t_8, 0, 0, 0);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+      __PYX_ERR(0, 27, __pyx_L1_error)
+    }
+    __pyx_L6:;
   }
+  __pyx_L3:;
 
-  /* "wrapper/infra/WordFixer.pyx":22
- *         if not corrected or corrected.lower() != word.lower():
- *             corrected = None
- *     return corrected             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/WordFixer.pyx":28
+ *         else:
+ *             raise ValueError('Language not supported')
+ *     return new_sentence             # <<<<<<<<<<<<<<
  * 
  */
   __Pyx_XDECREF(__pyx_r);
-  __Pyx_INCREF(__pyx_v_corrected);
-  __pyx_r = __pyx_v_corrected;
+  __Pyx_INCREF(__pyx_v_new_sentence);
+  __pyx_r = __pyx_v_new_sentence;
   goto __pyx_L0;
 
-  /* "wrapper/infra/WordFixer.pyx":15
- * supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+  /* "wrapper/infra/WordFixer.pyx":5
+ * import logging
  * 
- * def fix_word(word, language):             # <<<<<<<<<<<<<<
- *     corrected = None
- *     if language in supported:
+ * def fix_word(sentence, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     sentence = sentence.strip()
+ *     new_words = []
  */
 
   /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
-  __Pyx_XDECREF(__pyx_t_4);
   __Pyx_XDECREF(__pyx_t_8);
   __Pyx_AddTraceback("wrapper.infra.WordFixer.fix_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_new_words);
+  __Pyx_XDECREF(__pyx_v_new_sentence);
+  __Pyx_XDECREF(__pyx_v_words);
+  __Pyx_XDECREF(__pyx_v_supported);
   __Pyx_XDECREF(__pyx_v_corrected);
   __Pyx_XDECREF(__pyx_v_spell);
+  __Pyx_XDECREF(__pyx_v_misspelled);
+  __Pyx_XDECREF(__pyx_v_word);
+  __Pyx_XDECREF(__pyx_v_sentence);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
@@ -2495,68 +2946,101 @@
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
     {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_kp_u_Language_not_supported, __pyx_k_Language_not_supported, sizeof(__pyx_k_Language_not_supported), 0, 1, 0, 0},
     {&__pyx_n_s_SpellChecker, __pyx_k_SpellChecker, sizeof(__pyx_k_SpellChecker), 0, 0, 1, 1},
-    {&__pyx_n_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 1},
+    {&__pyx_n_s_ValueError, __pyx_k_ValueError, sizeof(__pyx_k_ValueError), 0, 0, 1, 1},
+    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
+    {&__pyx_kp_u__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 1, 0, 0},
+    {&__pyx_n_s__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 0, 1, 1},
+    {&__pyx_n_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 1},
     {&__pyx_n_u_ar, __pyx_k_ar, sizeof(__pyx_k_ar), 0, 1, 0, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
     {&__pyx_n_s_corrected, __pyx_k_corrected, sizeof(__pyx_k_corrected), 0, 0, 1, 1},
     {&__pyx_n_s_correction, __pyx_k_correction, sizeof(__pyx_k_correction), 0, 0, 1, 1},
     {&__pyx_n_u_de, __pyx_k_de, sizeof(__pyx_k_de), 0, 1, 0, 1},
+    {&__pyx_n_s_debug, __pyx_k_debug, sizeof(__pyx_k_debug), 0, 0, 1, 1},
     {&__pyx_n_u_en, __pyx_k_en, sizeof(__pyx_k_en), 0, 1, 0, 1},
     {&__pyx_n_u_es, __pyx_k_es, sizeof(__pyx_k_es), 0, 1, 0, 1},
     {&__pyx_n_u_eu, __pyx_k_eu, sizeof(__pyx_k_eu), 0, 1, 0, 1},
     {&__pyx_n_s_fix_word, __pyx_k_fix_word, sizeof(__pyx_k_fix_word), 0, 0, 1, 1},
     {&__pyx_n_u_fr, __pyx_k_fr, sizeof(__pyx_k_fr), 0, 1, 0, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
     {&__pyx_n_s_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 0, 1, 1},
-    {&__pyx_n_s_lower, __pyx_k_lower, sizeof(__pyx_k_lower), 0, 0, 1, 1},
+    {&__pyx_n_s_logging, __pyx_k_logging, sizeof(__pyx_k_logging), 0, 0, 1, 1},
     {&__pyx_n_u_lv, __pyx_k_lv, sizeof(__pyx_k_lv), 0, 1, 0, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
+    {&__pyx_n_s_misspelled, __pyx_k_misspelled, sizeof(__pyx_k_misspelled), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
+    {&__pyx_n_s_new_sentence, __pyx_k_new_sentence, sizeof(__pyx_k_new_sentence), 0, 0, 1, 1},
+    {&__pyx_n_s_new_words, __pyx_k_new_words, sizeof(__pyx_k_new_words), 0, 0, 1, 1},
     {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
     {&__pyx_n_u_ru, __pyx_k_ru, sizeof(__pyx_k_ru), 0, 1, 0, 1},
+    {&__pyx_n_s_sentence, __pyx_k_sentence, sizeof(__pyx_k_sentence), 0, 0, 1, 1},
+    {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
     {&__pyx_n_s_spell, __pyx_k_spell, sizeof(__pyx_k_spell), 0, 0, 1, 1},
     {&__pyx_n_s_spellchecker, __pyx_k_spellchecker, sizeof(__pyx_k_spellchecker), 0, 0, 1, 1},
+    {&__pyx_n_s_split, __pyx_k_split, sizeof(__pyx_k_split), 0, 0, 1, 1},
     {&__pyx_kp_s_src_wrapper_infra_WordFixer_pyx, __pyx_k_src_wrapper_infra_WordFixer_pyx, sizeof(__pyx_k_src_wrapper_infra_WordFixer_pyx), 0, 0, 1, 0},
+    {&__pyx_n_s_strip, __pyx_k_strip, sizeof(__pyx_k_strip), 0, 0, 1, 1},
     {&__pyx_n_s_supported, __pyx_k_supported, sizeof(__pyx_k_supported), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
+    {&__pyx_n_s_unknown, __pyx_k_unknown, sizeof(__pyx_k_unknown), 0, 0, 1, 1},
+    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
     {&__pyx_n_s_word, __pyx_k_word, sizeof(__pyx_k_word), 0, 0, 1, 1},
+    {&__pyx_kp_u_words, __pyx_k_words, sizeof(__pyx_k_words), 0, 1, 0, 0},
+    {&__pyx_n_s_words_2, __pyx_k_words_2, sizeof(__pyx_k_words_2), 0, 0, 1, 1},
     {&__pyx_n_s_wrapper_infra_WordFixer, __pyx_k_wrapper_infra_WordFixer, sizeof(__pyx_k_wrapper_infra_WordFixer), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
+  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 27, __pyx_L1_error)
   return 0;
+  __pyx_L1_error:;
+  return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "wrapper/infra/WordFixer.pyx":15
- * supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+  /* "wrapper/infra/WordFixer.pyx":27
+ *             new_sentence = ' '.join(new_words)
+ *         else:
+ *             raise ValueError('Language not supported')             # <<<<<<<<<<<<<<
+ *     return new_sentence
  * 
- * def fix_word(word, language):             # <<<<<<<<<<<<<<
- *     corrected = None
- *     if language in supported:
- */
-  __pyx_tuple__2 = PyTuple_Pack(4, __pyx_n_s_word, __pyx_n_s_language, __pyx_n_s_corrected, __pyx_n_s_spell); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 15, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__2);
-  __Pyx_GIVEREF(__pyx_tuple__2);
-  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_WordFixer_pyx, __pyx_n_s_fix_word, 15, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 15, __pyx_L1_error)
+ */
+  __pyx_tuple__3 = PyTuple_Pack(1, __pyx_kp_u_Language_not_supported); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 27, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__3);
+  __Pyx_GIVEREF(__pyx_tuple__3);
+
+  /* "wrapper/infra/WordFixer.pyx":5
+ * import logging
+ * 
+ * def fix_word(sentence, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     sentence = sentence.strip()
+ *     new_words = []
+ */
+  __pyx_tuple__6 = PyTuple_Pack(10, __pyx_n_s_sentence, __pyx_n_s_language, __pyx_n_s_new_words, __pyx_n_s_new_sentence, __pyx_n_s_words_2, __pyx_n_s_supported, __pyx_n_s_corrected, __pyx_n_s_spell, __pyx_n_s_misspelled, __pyx_n_s_word); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__6);
+  __Pyx_GIVEREF(__pyx_tuple__6);
+  __pyx_codeobj__7 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 10, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__6, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_WordFixer_pyx, __pyx_n_s_fix_word, 5, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__7)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
@@ -2917,16 +3401,16 @@
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
   /* "wrapper/infra/WordFixer.pyx":1
  * from spellchecker import SpellChecker             # <<<<<<<<<<<<<<
- * 
- * # currently supported dictionaries are:
+ * from .DocLanguage import DocLanguage
+ * import logging
  */
   __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_INCREF(__pyx_n_s_SpellChecker);
   __Pyx_GIVEREF(__pyx_n_s_SpellChecker);
   PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_SpellChecker);
   __pyx_t_3 = __Pyx_Import(__pyx_n_s_spellchecker, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -2934,69 +3418,67 @@
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_SpellChecker); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_SpellChecker, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "wrapper/infra/WordFixer.pyx":13
- * # Basque - eu
- * # Latvian - lv
- * supported = ['en','es','fr','pt','de','ru','ar','eu','lv']             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/WordFixer.pyx":2
+ * from spellchecker import SpellChecker
+ * from .DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
+ * import logging
  * 
- * def fix_word(word, language):
  */
-  __pyx_t_3 = PyList_New(9); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_DocLanguage, __pyx_t_3, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_u_en);
-  __Pyx_GIVEREF(__pyx_n_u_en);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_u_en);
-  __Pyx_INCREF(__pyx_n_u_es);
-  __Pyx_GIVEREF(__pyx_n_u_es);
-  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_n_u_es);
-  __Pyx_INCREF(__pyx_n_u_fr);
-  __Pyx_GIVEREF(__pyx_n_u_fr);
-  PyList_SET_ITEM(__pyx_t_3, 2, __pyx_n_u_fr);
-  __Pyx_INCREF(__pyx_n_u_pt);
-  __Pyx_GIVEREF(__pyx_n_u_pt);
-  PyList_SET_ITEM(__pyx_t_3, 3, __pyx_n_u_pt);
-  __Pyx_INCREF(__pyx_n_u_de);
-  __Pyx_GIVEREF(__pyx_n_u_de);
-  PyList_SET_ITEM(__pyx_t_3, 4, __pyx_n_u_de);
-  __Pyx_INCREF(__pyx_n_u_ru);
-  __Pyx_GIVEREF(__pyx_n_u_ru);
-  PyList_SET_ITEM(__pyx_t_3, 5, __pyx_n_u_ru);
-  __Pyx_INCREF(__pyx_n_u_ar);
-  __Pyx_GIVEREF(__pyx_n_u_ar);
-  PyList_SET_ITEM(__pyx_t_3, 6, __pyx_n_u_ar);
-  __Pyx_INCREF(__pyx_n_u_eu);
-  __Pyx_GIVEREF(__pyx_n_u_eu);
-  PyList_SET_ITEM(__pyx_t_3, 7, __pyx_n_u_eu);
-  __Pyx_INCREF(__pyx_n_u_lv);
-  __Pyx_GIVEREF(__pyx_n_u_lv);
-  PyList_SET_ITEM(__pyx_t_3, 8, __pyx_n_u_lv);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_supported, __pyx_t_3) < 0) __PYX_ERR(0, 13, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+  /* "wrapper/infra/WordFixer.pyx":3
+ * from spellchecker import SpellChecker
+ * from .DocLanguage import DocLanguage
+ * import logging             # <<<<<<<<<<<<<<
+ * 
+ * def fix_word(sentence, language:DocLanguage):
+ */
+  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_logging, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_logging, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "wrapper/infra/WordFixer.pyx":15
- * supported = ['en','es','fr','pt','de','ru','ar','eu','lv']
+  /* "wrapper/infra/WordFixer.pyx":5
+ * import logging
  * 
- * def fix_word(word, language):             # <<<<<<<<<<<<<<
- *     corrected = None
- *     if language in supported:
+ * def fix_word(sentence, language:DocLanguage):             # <<<<<<<<<<<<<<
+ *     sentence = sentence.strip()
+ *     new_words = []
  */
-  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_9WordFixer_1fix_word, 0, __pyx_n_s_fix_word, NULL, __pyx_n_s_wrapper_infra_WordFixer, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_9WordFixer_1fix_word, 0, __pyx_n_s_fix_word, NULL, __pyx_n_s_wrapper_infra_WordFixer, __pyx_d, ((PyObject *)__pyx_codeobj__7)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_fix_word, __pyx_t_3) < 0) __PYX_ERR(0, 15, __pyx_L1_error)
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_3, __pyx_t_2);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_fix_word, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /* "wrapper/infra/WordFixer.pyx":1
  * from spellchecker import SpellChecker             # <<<<<<<<<<<<<<
- * 
- * # currently supported dictionaries are:
+ * from .DocLanguage import DocLanguage
+ * import logging
  */
   __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_3) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
   /*--- Wrapped vars code ---*/
@@ -3064,14 +3546,164 @@
 end:
     Py_XDECREF(p);
     Py_XDECREF(m);
     return (__Pyx_RefNannyAPIStruct *)r;
 }
 #endif
 
+/* PyErrExceptionMatches */
+#if CYTHON_FAST_THREAD_STATE
+static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
+    Py_ssize_t i, n;
+    n = PyTuple_GET_SIZE(tuple);
+#if PY_MAJOR_VERSION >= 3
+    for (i=0; i<n; i++) {
+        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
+    }
+#endif
+    for (i=0; i<n; i++) {
+        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
+    }
+    return 0;
+}
+static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
+    int result;
+    PyObject *exc_type;
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *current_exception = tstate->current_exception;
+    if (unlikely(!current_exception)) return 0;
+    exc_type = (PyObject*) Py_TYPE(current_exception);
+    if (exc_type == err) return 1;
+#else
+    exc_type = tstate->curexc_type;
+    if (exc_type == err) return 1;
+    if (unlikely(!exc_type)) return 0;
+#endif
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_INCREF(exc_type);
+    #endif
+    if (unlikely(PyTuple_Check(err))) {
+        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
+    } else {
+        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
+    }
+    #if CYTHON_AVOID_BORROWED_REFS
+    Py_DECREF(exc_type);
+    #endif
+    return result;
+}
+#endif
+
+/* PyErrFetchRestore */
+#if CYTHON_FAST_THREAD_STATE
+static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject *tmp_value;
+    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
+    if (value) {
+        #if CYTHON_COMPILING_IN_CPYTHON
+        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
+        #endif
+            PyException_SetTraceback(value, tb);
+    }
+    tmp_value = tstate->current_exception;
+    tstate->current_exception = value;
+    Py_XDECREF(tmp_value);
+#else
+    PyObject *tmp_type, *tmp_value, *tmp_tb;
+    tmp_type = tstate->curexc_type;
+    tmp_value = tstate->curexc_value;
+    tmp_tb = tstate->curexc_traceback;
+    tstate->curexc_type = type;
+    tstate->curexc_value = value;
+    tstate->curexc_traceback = tb;
+    Py_XDECREF(tmp_type);
+    Py_XDECREF(tmp_value);
+    Py_XDECREF(tmp_tb);
+#endif
+}
+static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
+#if PY_VERSION_HEX >= 0x030C00A6
+    PyObject* exc_value;
+    exc_value = tstate->current_exception;
+    tstate->current_exception = 0;
+    *value = exc_value;
+    *type = NULL;
+    *tb = NULL;
+    if (exc_value) {
+        *type = (PyObject*) Py_TYPE(exc_value);
+        Py_INCREF(*type);
+        #if CYTHON_COMPILING_IN_CPYTHON
+        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
+        Py_XINCREF(*tb);
+        #else
+        *tb = PyException_GetTraceback(exc_value);
+        #endif
+    }
+#else
+    *type = tstate->curexc_type;
+    *value = tstate->curexc_value;
+    *tb = tstate->curexc_traceback;
+    tstate->curexc_type = 0;
+    tstate->curexc_value = 0;
+    tstate->curexc_traceback = 0;
+#endif
+}
+#endif
+
+/* PyObjectGetAttrStr */
+#if CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro))
+        return tp->tp_getattro(obj, attr_name);
+#if PY_MAJOR_VERSION < 3
+    if (likely(tp->tp_getattr))
+        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
+#endif
+    return PyObject_GetAttr(obj, attr_name);
+}
+#endif
+
+/* PyObjectGetAttrStrNoError */
+static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
+        __Pyx_PyErr_Clear();
+}
+static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
+    PyObject *result;
+#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
+    PyTypeObject* tp = Py_TYPE(obj);
+    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
+        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
+    }
+#endif
+    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
+    if (unlikely(!result)) {
+        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
+    }
+    return result;
+}
+
+/* GetBuiltinName */
+static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
+    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
+    if (unlikely(!result) && !PyErr_Occurred()) {
+        PyErr_Format(PyExc_NameError,
+#if PY_MAJOR_VERSION >= 3
+            "name '%U' is not defined", name);
+#else
+            "name '%.200s' is not defined", PyString_AS_STRING(name));
+#endif
+    }
+    return result;
+}
+
 /* TupleAndListFromArray */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE void __Pyx_copy_object_array(PyObject *const *CYTHON_RESTRICT src, PyObject** CYTHON_RESTRICT dest, Py_ssize_t length) {
     PyObject *v;
     Py_ssize_t i;
     for (i = 0; i < length; i++) {
         v = dest[i] = src[i];
@@ -3427,253 +4059,14 @@
         "%s() got an unexpected keyword argument '%U'",
         function_name, key);
     #endif
 bad:
     return -1;
 }
 
-/* PyErrExceptionMatches */
-#if CYTHON_FAST_THREAD_STATE
-static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
-    Py_ssize_t i, n;
-    n = PyTuple_GET_SIZE(tuple);
-#if PY_MAJOR_VERSION >= 3
-    for (i=0; i<n; i++) {
-        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
-    }
-#endif
-    for (i=0; i<n; i++) {
-        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
-    }
-    return 0;
-}
-static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
-    int result;
-    PyObject *exc_type;
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *current_exception = tstate->current_exception;
-    if (unlikely(!current_exception)) return 0;
-    exc_type = (PyObject*) Py_TYPE(current_exception);
-    if (exc_type == err) return 1;
-#else
-    exc_type = tstate->curexc_type;
-    if (exc_type == err) return 1;
-    if (unlikely(!exc_type)) return 0;
-#endif
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_INCREF(exc_type);
-    #endif
-    if (unlikely(PyTuple_Check(err))) {
-        result = __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
-    } else {
-        result = __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
-    }
-    #if CYTHON_AVOID_BORROWED_REFS
-    Py_DECREF(exc_type);
-    #endif
-    return result;
-}
-#endif
-
-/* PyErrFetchRestore */
-#if CYTHON_FAST_THREAD_STATE
-static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject *tmp_value;
-    assert(type == NULL || (value != NULL && type == (PyObject*) Py_TYPE(value)));
-    if (value) {
-        #if CYTHON_COMPILING_IN_CPYTHON
-        if (unlikely(((PyBaseExceptionObject*) value)->traceback != tb))
-        #endif
-            PyException_SetTraceback(value, tb);
-    }
-    tmp_value = tstate->current_exception;
-    tstate->current_exception = value;
-    Py_XDECREF(tmp_value);
-#else
-    PyObject *tmp_type, *tmp_value, *tmp_tb;
-    tmp_type = tstate->curexc_type;
-    tmp_value = tstate->curexc_value;
-    tmp_tb = tstate->curexc_traceback;
-    tstate->curexc_type = type;
-    tstate->curexc_value = value;
-    tstate->curexc_traceback = tb;
-    Py_XDECREF(tmp_type);
-    Py_XDECREF(tmp_value);
-    Py_XDECREF(tmp_tb);
-#endif
-}
-static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
-#if PY_VERSION_HEX >= 0x030C00A6
-    PyObject* exc_value;
-    exc_value = tstate->current_exception;
-    tstate->current_exception = 0;
-    *value = exc_value;
-    *type = NULL;
-    *tb = NULL;
-    if (exc_value) {
-        *type = (PyObject*) Py_TYPE(exc_value);
-        Py_INCREF(*type);
-        #if CYTHON_COMPILING_IN_CPYTHON
-        *tb = ((PyBaseExceptionObject*) exc_value)->traceback;
-        Py_XINCREF(*tb);
-        #else
-        *tb = PyException_GetTraceback(exc_value);
-        #endif
-    }
-#else
-    *type = tstate->curexc_type;
-    *value = tstate->curexc_value;
-    *tb = tstate->curexc_traceback;
-    tstate->curexc_type = 0;
-    tstate->curexc_value = 0;
-    tstate->curexc_traceback = 0;
-#endif
-}
-#endif
-
-/* PyObjectGetAttrStr */
-#if CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro))
-        return tp->tp_getattro(obj, attr_name);
-#if PY_MAJOR_VERSION < 3
-    if (likely(tp->tp_getattr))
-        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
-#endif
-    return PyObject_GetAttr(obj, attr_name);
-}
-#endif
-
-/* PyObjectGetAttrStrNoError */
-static void __Pyx_PyObject_GetAttrStr_ClearAttributeError(void) {
-    __Pyx_PyThreadState_declare
-    __Pyx_PyThreadState_assign
-    if (likely(__Pyx_PyErr_ExceptionMatches(PyExc_AttributeError)))
-        __Pyx_PyErr_Clear();
-}
-static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStrNoError(PyObject* obj, PyObject* attr_name) {
-    PyObject *result;
-#if CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_TYPE_SLOTS && PY_VERSION_HEX >= 0x030700B1
-    PyTypeObject* tp = Py_TYPE(obj);
-    if (likely(tp->tp_getattro == PyObject_GenericGetAttr)) {
-        return _PyObject_GenericGetAttrWithDict(obj, attr_name, NULL, 1);
-    }
-#endif
-    result = __Pyx_PyObject_GetAttrStr(obj, attr_name);
-    if (unlikely(!result)) {
-        __Pyx_PyObject_GetAttrStr_ClearAttributeError();
-    }
-    return result;
-}
-
-/* GetBuiltinName */
-static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
-    PyObject* result = __Pyx_PyObject_GetAttrStrNoError(__pyx_b, name);
-    if (unlikely(!result) && !PyErr_Occurred()) {
-        PyErr_Format(PyExc_NameError,
-#if PY_MAJOR_VERSION >= 3
-            "name '%U' is not defined", name);
-#else
-            "name '%.200s' is not defined", PyString_AS_STRING(name));
-#endif
-    }
-    return result;
-}
-
-/* PyDictVersioning */
-#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
-}
-static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
-    PyObject **dictptr = NULL;
-    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
-    if (offset) {
-#if CYTHON_COMPILING_IN_CPYTHON
-        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
-#else
-        dictptr = _PyObject_GetDictPtr(obj);
-#endif
-    }
-    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
-}
-static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
-    PyObject *dict = Py_TYPE(obj)->tp_dict;
-    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
-        return 0;
-    return obj_dict_version == __Pyx_get_object_dict_version(obj);
-}
-#endif
-
-/* GetModuleGlobalName */
-#if CYTHON_USE_DICT_VERSIONS
-static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
-#else
-static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
-#endif
-{
-    PyObject *result;
-#if !CYTHON_AVOID_BORROWED_REFS
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
-    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    } else if (unlikely(PyErr_Occurred())) {
-        return NULL;
-    }
-#elif CYTHON_COMPILING_IN_LIMITED_API
-    if (unlikely(!__pyx_m)) {
-        return NULL;
-    }
-    result = PyObject_GetAttr(__pyx_m, name);
-    if (likely(result)) {
-        return result;
-    }
-#else
-    result = PyDict_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
-#endif
-#else
-    result = PyObject_GetItem(__pyx_d, name);
-    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
-    if (likely(result)) {
-        return __Pyx_NewRef(result);
-    }
-    PyErr_Clear();
-#endif
-    return __Pyx_GetBuiltinName(name);
-}
-
-/* PyObjectCall */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    PyObject *result;
-    ternaryfunc call = Py_TYPE(func)->tp_call;
-    if (unlikely(!call))
-        return PyObject_Call(func, arg, kw);
-    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
-        return NULL;
-    result = (*call)(func, arg, kw);
-    Py_LeaveRecursiveCall();
-    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
-        PyErr_SetString(
-            PyExc_SystemError,
-            "NULL result without error in PyObject_Call");
-    }
-    return result;
-}
-#endif
-
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -3783,14 +4176,34 @@
     Py_XDECREF(kwtuple);
 done:
     Py_LeaveRecursiveCall();
     return result;
 }
 #endif
 
+/* PyObjectCall */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
+    PyObject *result;
+    ternaryfunc call = Py_TYPE(func)->tp_call;
+    if (unlikely(!call))
+        return PyObject_Call(func, arg, kw);
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    result = (*call)(func, arg, kw);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
+    }
+    return result;
+}
+#endif
+
 /* PyObjectCallMethO */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
     PyObject *self, *result;
     PyCFunction cfunc;
     cfunc = PyCFunction_GET_FUNCTION(func);
     self = PyCFunction_GET_SELF(func);
@@ -3880,14 +4293,244 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
+/* PyDictVersioning */
+#if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
+}
+static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
+    PyObject **dictptr = NULL;
+    Py_ssize_t offset = Py_TYPE(obj)->tp_dictoffset;
+    if (offset) {
+#if CYTHON_COMPILING_IN_CPYTHON
+        dictptr = (likely(offset > 0)) ? (PyObject **) ((char *)obj + offset) : _PyObject_GetDictPtr(obj);
+#else
+        dictptr = _PyObject_GetDictPtr(obj);
+#endif
+    }
+    return (dictptr && *dictptr) ? __PYX_GET_DICT_VERSION(*dictptr) : 0;
+}
+static CYTHON_INLINE int __Pyx_object_dict_version_matches(PyObject* obj, PY_UINT64_T tp_dict_version, PY_UINT64_T obj_dict_version) {
+    PyObject *dict = Py_TYPE(obj)->tp_dict;
+    if (unlikely(!dict) || unlikely(tp_dict_version != __PYX_GET_DICT_VERSION(dict)))
+        return 0;
+    return obj_dict_version == __Pyx_get_object_dict_version(obj);
+}
+#endif
+
+/* GetModuleGlobalName */
+#if CYTHON_USE_DICT_VERSIONS
+static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
+#else
+static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
+#endif
+{
+    PyObject *result;
+#if !CYTHON_AVOID_BORROWED_REFS
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
+    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    } else if (unlikely(PyErr_Occurred())) {
+        return NULL;
+    }
+#elif CYTHON_COMPILING_IN_LIMITED_API
+    if (unlikely(!__pyx_m)) {
+        return NULL;
+    }
+    result = PyObject_GetAttr(__pyx_m, name);
+    if (likely(result)) {
+        return result;
+    }
+#else
+    result = PyDict_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
+#endif
+#else
+    result = PyObject_GetItem(__pyx_d, name);
+    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
+    if (likely(result)) {
+        return __Pyx_NewRef(result);
+    }
+    PyErr_Clear();
+#endif
+    return __Pyx_GetBuiltinName(name);
+}
+
+/* RaiseException */
+#if PY_MAJOR_VERSION < 3
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    __Pyx_PyThreadState_declare
+    CYTHON_UNUSED_VAR(cause);
+    Py_XINCREF(type);
+    if (!value || value == Py_None)
+        value = NULL;
+    else
+        Py_INCREF(value);
+    if (!tb || tb == Py_None)
+        tb = NULL;
+    else {
+        Py_INCREF(tb);
+        if (!PyTraceBack_Check(tb)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: arg 3 must be a traceback or None");
+            goto raise_error;
+        }
+    }
+    if (PyType_Check(type)) {
+#if CYTHON_COMPILING_IN_PYPY
+        if (!value) {
+            Py_INCREF(Py_None);
+            value = Py_None;
+        }
+#endif
+        PyErr_NormalizeException(&type, &value, &tb);
+    } else {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto raise_error;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(type);
+        Py_INCREF(type);
+        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: exception class must be a subclass of BaseException");
+            goto raise_error;
+        }
+    }
+    __Pyx_PyThreadState_assign
+    __Pyx_ErrRestore(type, value, tb);
+    return;
+raise_error:
+    Py_XDECREF(value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
+    return;
+}
+#else
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    PyObject* owned_instance = NULL;
+    if (tb == Py_None) {
+        tb = 0;
+    } else if (tb && !PyTraceBack_Check(tb)) {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: arg 3 must be a traceback or None");
+        goto bad;
+    }
+    if (value == Py_None)
+        value = 0;
+    if (PyExceptionInstance_Check(type)) {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto bad;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(value);
+    } else if (PyExceptionClass_Check(type)) {
+        PyObject *instance_class = NULL;
+        if (value && PyExceptionInstance_Check(value)) {
+            instance_class = (PyObject*) Py_TYPE(value);
+            if (instance_class != type) {
+                int is_subclass = PyObject_IsSubclass(instance_class, type);
+                if (!is_subclass) {
+                    instance_class = NULL;
+                } else if (unlikely(is_subclass == -1)) {
+                    goto bad;
+                } else {
+                    type = instance_class;
+                }
+            }
+        }
+        if (!instance_class) {
+            PyObject *args;
+            if (!value)
+                args = PyTuple_New(0);
+            else if (PyTuple_Check(value)) {
+                Py_INCREF(value);
+                args = value;
+            } else
+                args = PyTuple_Pack(1, value);
+            if (!args)
+                goto bad;
+            owned_instance = PyObject_Call(type, args, NULL);
+            Py_DECREF(args);
+            if (!owned_instance)
+                goto bad;
+            value = owned_instance;
+            if (!PyExceptionInstance_Check(value)) {
+                PyErr_Format(PyExc_TypeError,
+                             "calling %R should have returned an instance of "
+                             "BaseException, not %R",
+                             type, Py_TYPE(value));
+                goto bad;
+            }
+        }
+    } else {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: exception class must be a subclass of BaseException");
+        goto bad;
+    }
+    if (cause) {
+        PyObject *fixed_cause;
+        if (cause == Py_None) {
+            fixed_cause = NULL;
+        } else if (PyExceptionClass_Check(cause)) {
+            fixed_cause = PyObject_CallObject(cause, NULL);
+            if (fixed_cause == NULL)
+                goto bad;
+        } else if (PyExceptionInstance_Check(cause)) {
+            fixed_cause = cause;
+            Py_INCREF(fixed_cause);
+        } else {
+            PyErr_SetString(PyExc_TypeError,
+                            "exception causes must derive from "
+                            "BaseException");
+            goto bad;
+        }
+        PyException_SetCause(value, fixed_cause);
+    }
+    PyErr_SetObject(type, value);
+    if (tb) {
+      #if PY_VERSION_HEX >= 0x030C00A6
+        PyException_SetTraceback(value, tb);
+      #elif CYTHON_FAST_THREAD_STATE
+        PyThreadState *tstate = __Pyx_PyThreadState_Current;
+        PyObject* tmp_tb = tstate->curexc_traceback;
+        if (tb != tmp_tb) {
+            Py_INCREF(tb);
+            tstate->curexc_traceback = tb;
+            Py_XDECREF(tmp_tb);
+        }
+#else
+        PyObject *tmp_type, *tmp_value, *tmp_tb;
+        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
+        Py_INCREF(tb);
+        PyErr_Restore(tmp_type, tmp_value, tb);
+        Py_XDECREF(tmp_tb);
+#endif
+    }
+bad:
+    Py_XDECREF(owned_instance);
+    return;
+}
+#endif
+
 /* Import */
 static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
     PyObject *module = 0;
     PyObject *empty_dict = 0;
     PyObject *empty_list = 0;
     #if PY_MAJOR_VERSION < 3
     PyObject *py_import;
@@ -3961,15 +4604,15 @@
         PyObject* module_dot = 0;
         PyObject* full_name = 0;
         PyErr_Clear();
         module_name_str = PyModule_GetName(module);
         if (unlikely(!module_name_str)) { goto modbad; }
         module_name = PyUnicode_FromString(module_name_str);
         if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u_);
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__4);
         if (unlikely(!module_dot)) { goto modbad; }
         full_name = PyUnicode_Concat(module_dot, name);
         if (unlikely(!full_name)) { goto modbad; }
         #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
         {
             PyObject *modules = PyImport_GetModuleDict();
             if (unlikely(!modules))
@@ -3991,14 +4634,142 @@
         #else
             "cannot import name %S", name);
         #endif
     }
     return value;
 }
 
+/* ImportDottedModule */
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
+    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
+    if (unlikely(PyErr_Occurred())) {
+        PyErr_Clear();
+    }
+    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
+        partial_name = name;
+    } else {
+        slice = PySequence_GetSlice(parts_tuple, 0, count);
+        if (unlikely(!slice))
+            goto bad;
+        sep = PyUnicode_FromStringAndSize(".", 1);
+        if (unlikely(!sep))
+            goto bad;
+        partial_name = PyUnicode_Join(sep, slice);
+    }
+    PyErr_Format(
+#if PY_MAJOR_VERSION < 3
+        PyExc_ImportError,
+        "No module named '%s'", PyString_AS_STRING(partial_name));
+#else
+#if PY_VERSION_HEX >= 0x030600B1
+        PyExc_ModuleNotFoundError,
+#else
+        PyExc_ImportError,
+#endif
+        "No module named '%U'", partial_name);
+#endif
+bad:
+    Py_XDECREF(sep);
+    Py_XDECREF(slice);
+    Py_XDECREF(partial_name);
+    return NULL;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
+    PyObject *imported_module;
+#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+    PyObject *modules = PyImport_GetModuleDict();
+    if (unlikely(!modules))
+        return NULL;
+    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
+    Py_XINCREF(imported_module);
+#else
+    imported_module = PyImport_GetModule(name);
+#endif
+    return imported_module;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
+    Py_ssize_t i, nparts;
+    nparts = PyTuple_GET_SIZE(parts_tuple);
+    for (i=1; i < nparts && module; i++) {
+        PyObject *part, *submodule;
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        part = PyTuple_GET_ITEM(parts_tuple, i);
+#else
+        part = PySequence_ITEM(parts_tuple, i);
+#endif
+        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
+#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
+        Py_DECREF(part);
+#endif
+        Py_DECREF(module);
+        module = submodule;
+    }
+    if (unlikely(!module)) {
+        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
+    }
+    return module;
+}
+#endif
+static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if PY_MAJOR_VERSION < 3
+    PyObject *module, *from_list, *star = __pyx_n_s__5;
+    CYTHON_UNUSED_VAR(parts_tuple);
+    from_list = PyList_New(1);
+    if (unlikely(!from_list))
+        return NULL;
+    Py_INCREF(star);
+    PyList_SET_ITEM(from_list, 0, star);
+    module = __Pyx_Import(name, from_list, 0);
+    Py_DECREF(from_list);
+    return module;
+#else
+    PyObject *imported_module;
+    PyObject *module = __Pyx_Import(name, NULL, 0);
+    if (!parts_tuple || unlikely(!module))
+        return module;
+    imported_module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(imported_module)) {
+        Py_DECREF(module);
+        return imported_module;
+    }
+    PyErr_Clear();
+    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
+#endif
+}
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
+    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(module)) {
+        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
+        if (likely(spec)) {
+            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
+            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
+                Py_DECREF(spec);
+                spec = NULL;
+            }
+            Py_XDECREF(unsafe);
+        }
+        if (likely(!spec)) {
+            PyErr_Clear();
+            return module;
+        }
+        Py_DECREF(spec);
+        Py_DECREF(module);
+    } else if (PyErr_Occurred()) {
+        PyErr_Clear();
+    }
+#endif
+    return __Pyx__ImportDottedModule(name, parts_tuple);
+}
+
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
     CYTHON_UNUSED_VAR(type);
 #else
@@ -5366,15 +6137,15 @@
 static __Pyx_TypeName
 __Pyx_PyType_GetName(PyTypeObject* tp)
 {
     PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
                                                __pyx_n_s_name);
     if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
         PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__4));
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__8));
     }
     return name;
 }
 #endif
 
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
```

### Comparing `docrx-0.0.11/tests/ProcessPDFImageTest.c` & `docrx-0.0.110/src/wrapper/infra/LanguageDetector.c`

 * *Files 25% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 /* Generated by Cython 3.0.0 */
 
 /* BEGIN: Cython Metadata
 {
     "distutils": {
-        "name": "tests.ProcessPDFImageTest",
+        "name": "wrapper.infra.LanguageDetector",
         "sources": [
-            "tests/ProcessPDFImageTest.pyx"
+            "src/wrapper/infra/LanguageDetector.pyx"
         ]
     },
-    "module_name": "tests.ProcessPDFImageTest"
+    "module_name": "wrapper.infra.LanguageDetector"
 }
 END: Cython Metadata */
 
 #ifndef PY_SSIZE_T_CLEAN
 #define PY_SSIZE_T_CLEAN
 #endif /* PY_SSIZE_T_CLEAN */
 #if defined(CYTHON_LIMITED_API) && 0
@@ -1081,16 +1081,16 @@
   #ifdef __cplusplus
     #define __PYX_EXTERN_C extern "C"
   #else
     #define __PYX_EXTERN_C extern
   #endif
 #endif
 
-#define __PYX_HAVE__tests__ProcessPDFImageTest
-#define __PYX_HAVE_API__tests__ProcessPDFImageTest
+#define __PYX_HAVE__wrapper__infra__LanguageDetector
+#define __PYX_HAVE_API__wrapper__infra__LanguageDetector
 /* Early includes */
 #ifdef _OPENMP
 #include <omp.h>
 #endif /* _OPENMP */
 
 #if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
 #define CYTHON_WITHOUT_ASSERTIONS
@@ -1346,15 +1346,15 @@
 static int __pyx_clineno = 0;
 static const char * __pyx_cfilenm = __FILE__;
 static const char *__pyx_filename;
 
 /* #### Code section: filename_table ### */
 
 static const char *__pyx_f[] = {
-  "tests/ProcessPDFImageTest.pyx",
+  "src/wrapper/infra/LanguageDetector.pyx",
 };
 /* #### Code section: utility_code_proto_before_types ### */
 /* #### Code section: numeric_typedefs ### */
 /* #### Code section: complex_type_declarations ### */
 /* #### Code section: type_declarations ### */
 
 /*--- Type declarations ---*/
@@ -1542,14 +1542,27 @@
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_VARARGS(args, start), stop - start)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) __Pyx_PyTuple_FromArray(&__Pyx_Arg_FASTCALL(args, start), stop - start)
 #else
 #define __Pyx_ArgsSlice_VARARGS(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #define __Pyx_ArgsSlice_FASTCALL(args, start, stop) PyTuple_GetSlice(args, start, stop)
 #endif
 
+/* RaiseDoubleKeywords.proto */
+static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);
+
+/* ParseKeywords.proto */
+static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,
+    const char* function_name);
+
+/* RaiseArgTupleInvalid.proto */
+static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
+    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);
+
 /* PyDictVersioning.proto */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 #define __PYX_DICT_VERSION_INIT  ((PY_UINT64_T) -1)
 #define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
 #define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
     (version_var) = __PYX_GET_DICT_VERSION(dict);\
     (cache_var) = (value);
@@ -1589,14 +1602,21 @@
 static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
 #else
 #define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 #define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
 static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
 #endif
 
+/* PyObjectCall.proto */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
+#else
+#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
+#endif
+
 /* PyFunctionFastCall.proto */
 #if CYTHON_FAST_PYCALL
 #if !CYTHON_VECTORCALL
 #define __Pyx_PyFunction_FastCall(func, args, nargs)\
     __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
 static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, Py_ssize_t nargs, PyObject *kwargs);
 #endif
@@ -1624,62 +1644,62 @@
      (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
   #define __Pyx_PyFrame_GetLocalsplus(frame)\
     (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
 #endif
 #endif
 #endif
 
-/* PyObjectCall.proto */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
-#else
-#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
-#endif
-
 /* PyObjectCallMethO.proto */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
 #endif
 
 /* PyObjectFastCall.proto */
 #define __Pyx_PyObject_FastCall(func, args, nargs)  __Pyx_PyObject_FastCallDict(func, args, (size_t)(nargs), NULL)
 static CYTHON_INLINE PyObject* __Pyx_PyObject_FastCallDict(PyObject *func, PyObject **args, size_t nargs, PyObject *kwargs);
 
-/* PyObjectCallOneArg.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+/* PyObjectFormatSimple.proto */
+#if CYTHON_COMPILING_IN_PYPY
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#elif PY_MAJOR_VERSION < 3
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyString_CheckExact(s)) ? PyUnicode_FromEncodedObject(s, NULL, "strict") :\
+        PyObject_Format(s, f))
+#elif CYTHON_USE_TYPE_SLOTS
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        likely(PyLong_CheckExact(s)) ? PyLong_Type.tp_repr(s) :\
+        likely(PyFloat_CheckExact(s)) ? PyFloat_Type.tp_repr(s) :\
+        PyObject_Format(s, f))
+#else
+    #define __Pyx_PyObject_FormatSimple(s, f) (\
+        likely(PyUnicode_CheckExact(s)) ? (Py_INCREF(s), s) :\
+        PyObject_Format(s, f))
+#endif
 
-/* ListAppend.proto */
+/* ListCompAppend.proto */
 #if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
-static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
+static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
     PyListObject* L = (PyListObject*) list;
     Py_ssize_t len = Py_SIZE(list);
-    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
+    if (likely(L->allocated > len)) {
         Py_INCREF(x);
         PyList_SET_ITEM(list, len, x);
         __Pyx_SET_SIZE(list, len + 1);
         return 0;
     }
     return PyList_Append(list, x);
 }
 #else
-#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
+#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* PyObjectCall2Args.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
-
-/* PyObjectGetMethod.proto */
-static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);
-
-/* PyObjectCallMethod1.proto */
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);
-
-/* append.proto */
-static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);
-
 /* GetTopmostException.proto */
 #if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
 static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
 #endif
 
 /* SaveResetException.proto */
 #if CYTHON_FAST_THREAD_STATE
@@ -1696,25 +1716,150 @@
 #if CYTHON_FAST_THREAD_STATE
 #define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
 static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
 #else
 static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
 #endif
 
-/* Import.proto */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+/* JoinPyUnicode.proto */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char);
 
-/* ImportDottedModule.proto */
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
+/* PyObjectCallOneArg.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);
+
+/* RaiseException.proto */
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);
+
+/* ListAppend.proto */
+#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
+static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
+    PyListObject* L = (PyListObject*) list;
+    Py_ssize_t len = Py_SIZE(list);
+    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
+        Py_INCREF(x);
+        PyList_SET_ITEM(list, len, x);
+        __Pyx_SET_SIZE(list, len + 1);
+        return 0;
+    }
+    return PyList_Append(list, x);
+}
+#else
+#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
 #endif
 
-/* ImportFrom.proto */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+/* PyUnicode_Unicode.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj);
+
+/* GetItemInt.proto */
+#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
+    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
+               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
+#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
+    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
+    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
+    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              int wraparound, int boundscheck);
+static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
+                                                     int is_list, int wraparound, int boundscheck);
+
+/* ListExtend.proto */
+static CYTHON_INLINE int __Pyx_PyList_Extend(PyObject* L, PyObject* v) {
+#if CYTHON_COMPILING_IN_CPYTHON
+    PyObject* none = _PyList_Extend((PyListObject*)L, v);
+    if (unlikely(!none))
+        return -1;
+    Py_DECREF(none);
+    return 0;
+#else
+    return PyList_SetSlice(L, PY_SSIZE_T_MAX, PY_SSIZE_T_MAX, v);
+#endif
+}
+
+/* PyIntBinop.proto */
+#if !CYTHON_COMPILING_IN_PYPY
+static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check);
+#else
+#define __Pyx_PyInt_SubtractObjC(op1, op2, intval, inplace, zerodivision_check)\
+    (inplace ? PyNumber_InPlaceSubtract(op1, op2) : PyNumber_Subtract(op1, op2))
+#endif
+
+/* PyIntCompare.proto */
+static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace);
+
+/* PyDictContains.proto */
+static CYTHON_INLINE int __Pyx_PyDict_ContainsTF(PyObject* item, PyObject* dict, int eq) {
+    int result = PyDict_Contains(dict, item);
+    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
+}
+
+/* DictGetItem.proto */
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
+#define __Pyx_PyObject_Dict_GetItem(obj, name)\
+    (likely(PyDict_CheckExact(obj)) ?\
+     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
+#else
+#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
+#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
+#endif
+
+/* PyObjectCall2Args.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);
+
+/* PyObjectGetMethod.proto */
+static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);
+
+/* PyObjectCallMethod1.proto */
+static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);
+
+/* append.proto */
+static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);
+
+/* py_dict_items.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d);
+
+/* UnpackUnboundCMethod.proto */
+typedef struct {
+    PyObject *type;
+    PyObject **method_name;
+    PyCFunction func;
+    PyObject *method;
+    int flag;
+} __Pyx_CachedCFunction;
+
+/* CallUnboundCMethod0.proto */
+static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self);
+#if CYTHON_COMPILING_IN_CPYTHON
+#define __Pyx_CallUnboundCMethod0(cfunc, self)\
+    (likely((cfunc)->func) ?\
+        (likely((cfunc)->flag == METH_NOARGS) ?  (*((cfunc)->func))(self, NULL) :\
+         (PY_VERSION_HEX >= 0x030600B1 && likely((cfunc)->flag == METH_FASTCALL) ?\
+            (PY_VERSION_HEX >= 0x030700A0 ?\
+                (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0) :\
+                (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL)) :\
+          (PY_VERSION_HEX >= 0x030700A0 && (cfunc)->flag == (METH_FASTCALL | METH_KEYWORDS) ?\
+            (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL) :\
+            (likely((cfunc)->flag == (METH_VARARGS | METH_KEYWORDS)) ?  ((*(PyCFunctionWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, __pyx_empty_tuple, NULL)) :\
+               ((cfunc)->flag == METH_VARARGS ?  (*((cfunc)->func))(self, __pyx_empty_tuple) :\
+               __Pyx__CallUnboundCMethod0(cfunc, self)))))) :\
+        __Pyx__CallUnboundCMethod0(cfunc, self))
+#else
+#define __Pyx_CallUnboundCMethod0(cfunc, self)  __Pyx__CallUnboundCMethod0(cfunc, self)
+#endif
 
 /* IncludeStructmemberH.proto */
 #include <structmember.h>
 
 /* FixUpExtensionType.proto */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type);
@@ -1834,14 +1979,26 @@
 /* CythonFunction.proto */
 static PyObject *__Pyx_CyFunction_New(PyMethodDef *ml,
                                       int flags, PyObject* qualname,
                                       PyObject *closure,
                                       PyObject *module, PyObject *globals,
                                       PyObject* code);
 
+/* Import.proto */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);
+
+/* ImportFrom.proto */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);
+
+/* ImportDottedModule.proto */
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple);
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple);
+#endif
+
 /* CLineInTraceback.proto */
 #ifdef CYTHON_CLINE_IN_TRACEBACK
 #define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
 #else
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
 #endif
 
@@ -1862,35 +2019,35 @@
 static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);
 #endif
 
 /* AddTraceback.proto */
 static void __Pyx_AddTraceback(const char *funcname, int c_line,
                                int py_line, const char *filename);
 
+/* GCCDiagnostics.proto */
+#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
+#define __Pyx_HAS_GCC_DIAGNOSTIC
+#endif
+
+/* CIntToPy.proto */
+static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
+
 /* FormatTypeName.proto */
 #if CYTHON_COMPILING_IN_LIMITED_API
 typedef PyObject *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%U"
 static __Pyx_TypeName __Pyx_PyType_GetName(PyTypeObject* tp);
 #define __Pyx_DECREF_TypeName(obj) Py_XDECREF(obj)
 #else
 typedef const char *__Pyx_TypeName;
 #define __Pyx_FMT_TYPENAME "%.200s"
 #define __Pyx_PyType_GetName(tp) ((tp)->tp_name)
 #define __Pyx_DECREF_TypeName(obj)
 #endif
 
-/* GCCDiagnostics.proto */
-#if !defined(__INTEL_COMPILER) && defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
-#define __Pyx_HAS_GCC_DIAGNOSTIC
-#endif
-
-/* CIntToPy.proto */
-static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);
-
 /* CIntFromPy.proto */
 static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);
 
 /* CIntFromPy.proto */
 static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);
 
 /* FastTypeChecks.proto */
@@ -1906,89 +2063,149 @@
 #define __Pyx_TypeCheck2(obj, type1, type2) (PyObject_TypeCheck(obj, (PyTypeObject *)type1) || PyObject_TypeCheck(obj, (PyTypeObject *)type2))
 #define __Pyx_PyErr_GivenExceptionMatches(err, type) PyErr_GivenExceptionMatches(err, type)
 #define __Pyx_PyErr_GivenExceptionMatches2(err, type1, type2) (PyErr_GivenExceptionMatches(err, type1) || PyErr_GivenExceptionMatches(err, type2))
 #endif
 #define __Pyx_PyErr_ExceptionMatches2(err1, err2)  __Pyx_PyErr_GivenExceptionMatches2(__Pyx_PyErr_CurrentExceptionType(), err1, err2)
 #define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)
 
-/* CStringEquals.proto */
-static CYTHON_INLINE int __Pyx_StrEq(const char *, const char *);
-
 /* CheckBinaryVersion.proto */
 static int __Pyx_check_binary_version(void);
 
 /* InitStrings.proto */
 static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);
 
 /* #### Code section: module_declarations ### */
 
-/* Module declarations from "tests.ProcessPDFImageTest" */
+/* Module declarations from "wrapper.infra.LanguageDetector" */
 /* #### Code section: typeinfo ### */
 /* #### Code section: before_global_var ### */
-#define __Pyx_MODULE_NAME "tests.ProcessPDFImageTest"
-extern int __pyx_module_is_main_tests__ProcessPDFImageTest;
-int __pyx_module_is_main_tests__ProcessPDFImageTest = 0;
+#define __Pyx_MODULE_NAME "wrapper.infra.LanguageDetector"
+extern int __pyx_module_is_main_wrapper__infra__LanguageDetector;
+int __pyx_module_is_main_wrapper__infra__LanguageDetector = 0;
 
-/* Implementation of "tests.ProcessPDFImageTest" */
+/* Implementation of "wrapper.infra.LanguageDetector" */
 /* #### Code section: global_var ### */
-static PyObject *__pyx_builtin_print;
+static PyObject *__pyx_builtin_sorted;
 /* #### Code section: string_decls ### */
-static const char __pyx_k__8[] = "*";
-static const char __pyx_k__9[] = ".";
-static const char __pyx_k_pt[] = "pt";
-static const char __pyx_k__12[] = "?";
-static const char __pyx_k_dir[] = "dir";
-static const char __pyx_k_doc[] = "doc";
-static const char __pyx_k_run[] = "run";
-static const char __pyx_k_File[] = "File";
-static const char __pyx_k_file[] = "file";
-static const char __pyx_k_load[] = "load";
+static const char __pyx_k_[] = " ";
+static const char __pyx_k_t[] = "t";
+static const char __pyx_k_x[] = "x";
+static const char __pyx_k__2[] = "\n";
+static const char __pyx_k__3[] = ".";
+static const char __pyx_k__4[] = "...";
+static const char __pyx_k__6[] = "";
+static const char __pyx_k__7[] = "*";
+static const char __pyx_k_to[] = " to ";
+static const char __pyx_k__14[] = "?";
+static const char __pyx_k_arr[] = "arr";
+static const char __pyx_k_det[] = "det";
+static const char __pyx_k_key[] = "key";
+static const char __pyx_k_None[] = "None";
+static const char __pyx_k_dest[] = "dest";
+static const char __pyx_k_info[] = "info";
+static const char __pyx_k_lang[] = "lang";
 static const char __pyx_k_main[] = "__main__";
 static const char __pyx_k_name[] = "__name__";
 static const char __pyx_k_spec[] = "__spec__";
 static const char __pyx_k_test[] = "__test__";
 static const char __pyx_k_text[] = "text";
-static const char __pyx_k_files[] = "files";
-static const char __pyx_k_print[] = "print";
-static const char __pyx_k_start[] = "start";
-static const char __pyx_k_Tokens[] = "Tokens";
+static const char __pyx_k_time[] = "time";
+static const char __pyx_k_build[] = "build";
+static const char __pyx_k_debug[] = "debug";
+static const char __pyx_k_error[] = "error";
+static const char __pyx_k_items[] = "items";
+static const char __pyx_k_retry[] = "retry";
+static const char __pyx_k_sleep[] = "sleep";
+static const char __pyx_k_split[] = "split";
+static const char __pyx_k_strip[] = "strip";
+static const char __pyx_k_value[] = "value";
+static const char __pyx_k_FRENCH[] = "FRENCH";
+static const char __pyx_k_GERMAN[] = "GERMAN";
 static const char __pyx_k_append[] = "append";
+static const char __pyx_k_detect[] = "detect";
 static const char __pyx_k_import[] = "__import__";
+static const char __pyx_k_lingua[] = "lingua";
+static const char __pyx_k_result[] = "result: ";
+static const char __pyx_k_slited[] = "slited";
+static const char __pyx_k_sorted[] = "sorted";
 static const char __pyx_k_tokens[] = "tokens";
-static const char __pyx_k_summary[] = "summary";
-static const char __pyx_k_dcsearch[] = "dcsearch";
+static const char __pyx_k_ENGLISH[] = "ENGLISH";
+static const char __pyx_k_SPANISH[] = "SPANISH";
+static const char __pyx_k_error_2[] = " error";
+static const char __pyx_k_logging[] = "logging";
+static const char __pyx_k_reverse[] = "reverse";
+static const char __pyx_k_Language[] = "Language";
+static const char __pyx_k_checking[] = "checking: \"";
+static const char __pyx_k_detected[] = "detected";
+static const char __pyx_k_detector[] = "detector";
+static const char __pyx_k_fix_text[] = "fix_text";
+static const char __pyx_k_fix_word[] = "fix_word";
 static const char __pyx_k_language[] = "language";
+static const char __pyx_k_Translate[] = "Translate ";
+static const char __pyx_k_WordFixer[] = "WordFixer";
+static const char __pyx_k_languages[] = "languages";
+static const char __pyx_k_norm_text[] = "norm_text";
+static const char __pyx_k_sentences[] = "sentences";
 static const char __pyx_k_traceback[] = "traceback";
-static const char __pyx_k_find_token[] = "find_token";
+static const char __pyx_k_translate[] = "translate";
+static const char __pyx_k_PORTUGUESE[] = "PORTUGUESE";
+static const char __pyx_k_Translator[] = "Translator";
 static const char __pyx_k_format_exc[] = "format_exc";
-static const char __pyx_k_train_model[] = "train_model";
+static const char __pyx_k_translator[] = "translator";
+static const char __pyx_k_DocLanguage[] = "DocLanguage";
+static const char __pyx_k_detect_lang[] = "detect_lang";
+static const char __pyx_k_googletrans[] = "googletrans";
+static const char __pyx_k_splitedText[] = "splitedText";
 static const char __pyx_k_initializing[] = "_initializing";
 static const char __pyx_k_is_coroutine[] = "_is_coroutine";
-static const char __pyx_k_031_810_827_59[] = "031.810.827-59";
-static const char __pyx_k_DocumentSearch[] = "DocumentSearch";
-static const char __pyx_k_named_entities[] = "named_entities";
-static const char __pyx_k_wrapper_Process[] = "wrapper.Process";
-static const char __pyx_k_Processing_image[] = "Processing image";
-static const char __pyx_k_home_tiago_media[] = "/home/tiago/media";
-static const char __pyx_k_search_documents[] = "search_documents";
-static const char __pyx_k_detected_language[] = "detected_language";
-static const char __pyx_k_res_onus_pag1_pdf[] = "res/onus/pag1.pdf";
-static const char __pyx_k_res_onus_pag2_pdf[] = "res/onus/pag2.pdf";
-static const char __pyx_k_res_onus_pag3_pdf[] = "res/onus/pag3.pdf";
-static const char __pyx_k_wrapper_core_File[] = "wrapper.core.File";
+static const char __pyx_k_service_urls[] = "service_urls";
+static const char __pyx_k_total_tokens[] = "total_tokens";
+static const char __pyx_k_translate_to[] = "translate_to";
+static const char __pyx_k_Lang_detected[] = "\". Lang detected ";
+static const char __pyx_k_PreProcessing[] = "PreProcessing";
+static const char __pyx_k_retrying_Left[] = "retrying. Left ";
+static const char __pyx_k_Checked_tokens[] = ". Checked tokens ";
+static const char __pyx_k_allSplitedText[] = "allSplitedText";
+static const char __pyx_k_from_languages[] = "from_languages";
+static const char __pyx_k_from_sentences[] = " from sentences ";
+static const char __pyx_k_normalize_text[] = "normalize_text";
+static const char __pyx_k_Detected_object[] = ". Detected object ";
+static const char __pyx_k_Translated_text[] = "Translated text: \n ";
+static const char __pyx_k_translated_text[] = "translated_text";
+static const char __pyx_k_maxCheckedTokens[] = "maxCheckedTokens";
+static const char __pyx_k_detected_language[] = "detected language: ";
+static const char __pyx_k_extract_sentences[] = "extract_sentences";
+static const char __pyx_k_original_language[] = "original_language";
+static const char __pyx_k_Error_to_translate[] = "Error to translate ";
 static const char __pyx_k_asyncio_coroutines[] = "asyncio.coroutines";
 static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
-static const char __pyx_k_wrapper_core_Image[] = "wrapper.core.Image";
-static const char __pyx_k_tests_ProcessPDFImageTest[] = "tests.ProcessPDFImageTest";
-static const char __pyx_k_wrapper_core_DocumentSearch[] = "wrapper.core.DocumentSearch";
-static const char __pyx_k_res_docs_with_img_pdf_img_pdf[] = "res/docs_with_img/pdf_img.pdf";
-static const char __pyx_k_tests_ProcessPDFImageTest_pyx[] = "tests/ProcessPDFImageTest.pyx";
-static const char __pyx_k_regime_de_comunho_de_bens_031_81[] = "regime de comunh\303\243o de bens 031.810.827-59";
+static const char __pyx_k_detect_language_of[] = "detect_language_of";
+static const char __pyx_k_Translating_text_to[] = "Translating text to ";
+static const char __pyx_k_detecteds_sentences[] = "detecteds_sentences";
+static const char __pyx_k_extracted_sentences[] = "extracted sentences: ";
+static const char __pyx_k_translate_google_com[] = "translate.google.com";
+static const char __pyx_k_translated_sentences[] = "translated_sentences";
+static const char __pyx_k_Language_not_detected[] = "Language not detected";
+static const char __pyx_k_Will_be_translated_to[] = ". Will be translated to ";
+static const char __pyx_k_Detected_Text_Language[] = "Detected Text Language ";
+static const char __pyx_k_translate_google_co_kr[] = "translate.google.co.kr";
+static const char __pyx_k_LanguageDetectorBuilder[] = "LanguageDetectorBuilder";
+static const char __pyx_k_get_language_from_lingua[] = "get_language_from_lingua";
+static const char __pyx_k_Error_to_concatenate_text[] = "Error to concatenate text ";
+static const char __pyx_k_wrapper_infra_LanguageDetector[] = "wrapper.infra.LanguageDetector";
+static const char __pyx_k_detect_lang_by_google_translate[] = "detect_lang_by_google_translate.<locals>.<lambda>";
+static const char __pyx_k_Error_to_detect_language_for_sen[] = "Error to detect language for sentence ";
+static const char __pyx_k_It_doesn_t_have_readable_sentenc[] = "It doesn't have readable sentences for ";
+static const char __pyx_k_src_wrapper_infra_LanguageDetect[] = "src/wrapper/infra/LanguageDetector.pyx";
+static const char __pyx_k_detect_lang_by_google_translate_2[] = "detect_lang_by_google_translate";
 /* #### Code section: decls ### */
-static PyObject *__pyx_pf_5tests_19ProcessPDFImageTest_start(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to, PyObject *__pyx_v_original_language, CYTHON_UNUSED PyObject *__pyx_v_fix_text); /* proto */
+static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x); /* proto */
+static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_2detect_lang_by_google_translate(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to); /* proto */
+static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_items = {0, 0, 0, 0, 0};
 /* #### Code section: late_includes ### */
 /* #### Code section: module_state ### */
 typedef struct {
   PyObject *__pyx_d;
   PyObject *__pyx_b;
   PyObject *__pyx_cython_runtime;
   PyObject *__pyx_empty_tuple;
@@ -2010,77 +2227,136 @@
   PyTypeObject *__pyx_CoroutineAwaitType;
   #endif
   #ifdef __Pyx_Coroutine_USED
   PyTypeObject *__pyx_CoroutineType;
   #endif
   #if CYTHON_USE_MODULE_STATE
   #endif
-  PyObject *__pyx_kp_u_031_810_827_59;
-  PyObject *__pyx_n_s_DocumentSearch;
-  PyObject *__pyx_n_s_File;
-  PyObject *__pyx_kp_u_Processing_image;
-  PyObject *__pyx_n_u_Tokens;
-  PyObject *__pyx_n_s__12;
-  PyObject *__pyx_n_s__8;
-  PyObject *__pyx_kp_u__9;
+  PyObject *__pyx_kp_u_;
+  PyObject *__pyx_kp_u_Checked_tokens;
+  PyObject *__pyx_kp_u_Detected_Text_Language;
+  PyObject *__pyx_kp_u_Detected_object;
+  PyObject *__pyx_n_s_DocLanguage;
+  PyObject *__pyx_n_s_ENGLISH;
+  PyObject *__pyx_kp_u_Error_to_concatenate_text;
+  PyObject *__pyx_kp_u_Error_to_detect_language_for_sen;
+  PyObject *__pyx_kp_u_Error_to_translate;
+  PyObject *__pyx_n_s_FRENCH;
+  PyObject *__pyx_n_s_GERMAN;
+  PyObject *__pyx_kp_u_It_doesn_t_have_readable_sentenc;
+  PyObject *__pyx_kp_u_Lang_detected;
+  PyObject *__pyx_n_s_Language;
+  PyObject *__pyx_n_s_LanguageDetectorBuilder;
+  PyObject *__pyx_kp_u_Language_not_detected;
+  PyObject *__pyx_kp_u_None;
+  PyObject *__pyx_n_s_PORTUGUESE;
+  PyObject *__pyx_n_s_PreProcessing;
+  PyObject *__pyx_n_s_SPANISH;
+  PyObject *__pyx_kp_u_Translate;
+  PyObject *__pyx_kp_u_Translated_text;
+  PyObject *__pyx_kp_u_Translating_text_to;
+  PyObject *__pyx_n_s_Translator;
+  PyObject *__pyx_kp_u_Will_be_translated_to;
+  PyObject *__pyx_n_s_WordFixer;
+  PyObject *__pyx_n_s__14;
+  PyObject *__pyx_kp_u__2;
+  PyObject *__pyx_kp_u__3;
+  PyObject *__pyx_kp_u__4;
+  PyObject *__pyx_n_s__6;
+  PyObject *__pyx_n_s__7;
+  PyObject *__pyx_n_s_allSplitedText;
   PyObject *__pyx_n_s_append;
+  PyObject *__pyx_n_s_arr;
   PyObject *__pyx_n_s_asyncio_coroutines;
+  PyObject *__pyx_n_s_build;
+  PyObject *__pyx_kp_u_checking;
   PyObject *__pyx_n_s_cline_in_traceback;
-  PyObject *__pyx_n_s_dcsearch;
-  PyObject *__pyx_n_s_detected_language;
-  PyObject *__pyx_n_s_dir;
-  PyObject *__pyx_n_s_doc;
-  PyObject *__pyx_n_s_file;
-  PyObject *__pyx_n_s_files;
-  PyObject *__pyx_n_s_find_token;
+  PyObject *__pyx_n_s_debug;
+  PyObject *__pyx_n_s_dest;
+  PyObject *__pyx_n_s_det;
+  PyObject *__pyx_n_s_detect;
+  PyObject *__pyx_n_s_detect_lang;
+  PyObject *__pyx_n_s_detect_lang_by_google_translate;
+  PyObject *__pyx_n_s_detect_lang_by_google_translate_2;
+  PyObject *__pyx_n_s_detect_language_of;
+  PyObject *__pyx_n_s_detected;
+  PyObject *__pyx_kp_u_detected_language;
+  PyObject *__pyx_n_s_detecteds_sentences;
+  PyObject *__pyx_n_s_detector;
+  PyObject *__pyx_n_s_error;
+  PyObject *__pyx_kp_u_error_2;
+  PyObject *__pyx_n_s_extract_sentences;
+  PyObject *__pyx_kp_u_extracted_sentences;
+  PyObject *__pyx_n_s_fix_text;
+  PyObject *__pyx_n_s_fix_word;
   PyObject *__pyx_n_s_format_exc;
-  PyObject *__pyx_kp_u_home_tiago_media;
+  PyObject *__pyx_n_s_from_languages;
+  PyObject *__pyx_kp_u_from_sentences;
+  PyObject *__pyx_n_s_get_language_from_lingua;
+  PyObject *__pyx_n_s_googletrans;
   PyObject *__pyx_n_s_import;
+  PyObject *__pyx_n_s_info;
   PyObject *__pyx_n_s_initializing;
   PyObject *__pyx_n_s_is_coroutine;
-  PyObject *__pyx_n_u_language;
-  PyObject *__pyx_n_s_load;
+  PyObject *__pyx_n_s_items;
+  PyObject *__pyx_n_s_key;
+  PyObject *__pyx_n_s_lang;
+  PyObject *__pyx_n_s_language;
+  PyObject *__pyx_n_s_languages;
+  PyObject *__pyx_n_s_lingua;
+  PyObject *__pyx_n_s_logging;
   PyObject *__pyx_n_s_main;
+  PyObject *__pyx_n_s_maxCheckedTokens;
   PyObject *__pyx_n_s_name;
-  PyObject *__pyx_n_s_named_entities;
-  PyObject *__pyx_n_u_named_entities;
-  PyObject *__pyx_n_s_print;
-  PyObject *__pyx_n_u_pt;
-  PyObject *__pyx_kp_u_regime_de_comunho_de_bens_031_81;
-  PyObject *__pyx_kp_u_res_docs_with_img_pdf_img_pdf;
-  PyObject *__pyx_kp_u_res_onus_pag1_pdf;
-  PyObject *__pyx_kp_u_res_onus_pag2_pdf;
-  PyObject *__pyx_kp_u_res_onus_pag3_pdf;
-  PyObject *__pyx_n_s_run;
-  PyObject *__pyx_n_s_search_documents;
+  PyObject *__pyx_n_s_norm_text;
+  PyObject *__pyx_n_s_normalize_text;
+  PyObject *__pyx_n_s_original_language;
+  PyObject *__pyx_kp_u_result;
+  PyObject *__pyx_n_s_retry;
+  PyObject *__pyx_kp_u_retrying_Left;
+  PyObject *__pyx_n_s_reverse;
+  PyObject *__pyx_n_s_sentences;
+  PyObject *__pyx_n_s_service_urls;
+  PyObject *__pyx_n_s_sleep;
+  PyObject *__pyx_n_s_slited;
+  PyObject *__pyx_n_s_sorted;
   PyObject *__pyx_n_s_spec;
-  PyObject *__pyx_n_s_start;
-  PyObject *__pyx_n_s_summary;
-  PyObject *__pyx_n_u_summary;
+  PyObject *__pyx_n_s_split;
+  PyObject *__pyx_n_s_splitedText;
+  PyObject *__pyx_kp_s_src_wrapper_infra_LanguageDetect;
+  PyObject *__pyx_n_s_strip;
+  PyObject *__pyx_n_s_t;
   PyObject *__pyx_n_s_test;
-  PyObject *__pyx_n_s_tests_ProcessPDFImageTest;
-  PyObject *__pyx_kp_s_tests_ProcessPDFImageTest_pyx;
   PyObject *__pyx_n_s_text;
-  PyObject *__pyx_n_u_text;
+  PyObject *__pyx_n_s_time;
+  PyObject *__pyx_kp_u_to;
   PyObject *__pyx_n_s_tokens;
+  PyObject *__pyx_n_s_total_tokens;
   PyObject *__pyx_n_s_traceback;
-  PyObject *__pyx_n_s_train_model;
-  PyObject *__pyx_n_s_wrapper_Process;
-  PyObject *__pyx_n_s_wrapper_core_DocumentSearch;
-  PyObject *__pyx_n_s_wrapper_core_File;
-  PyObject *__pyx_n_s_wrapper_core_Image;
-  PyObject *__pyx_tuple_;
-  PyObject *__pyx_tuple__2;
-  PyObject *__pyx_tuple__3;
-  PyObject *__pyx_tuple__4;
+  PyObject *__pyx_n_s_translate;
+  PyObject *__pyx_kp_u_translate_google_co_kr;
+  PyObject *__pyx_kp_u_translate_google_com;
+  PyObject *__pyx_n_s_translate_to;
+  PyObject *__pyx_n_s_translated_sentences;
+  PyObject *__pyx_n_s_translated_text;
+  PyObject *__pyx_n_s_translator;
+  PyObject *__pyx_n_s_value;
+  PyObject *__pyx_n_s_wrapper_infra_LanguageDetector;
+  PyObject *__pyx_n_s_x;
+  PyObject *__pyx_float_0_5;
+  PyObject *__pyx_int_0;
+  PyObject *__pyx_int_1;
+  PyObject *__pyx_int_4;
   PyObject *__pyx_tuple__5;
-  PyObject *__pyx_tuple__6;
-  PyObject *__pyx_tuple__7;
+  PyObject *__pyx_tuple__8;
   PyObject *__pyx_tuple__10;
-  PyObject *__pyx_codeobj__11;
+  PyObject *__pyx_tuple__11;
+  PyObject *__pyx_tuple__13;
+  PyObject *__pyx_codeobj__9;
+  PyObject *__pyx_codeobj__12;
 } __pyx_mstate;
 
 #if CYTHON_USE_MODULE_STATE
 #ifdef __cplusplus
 namespace {
   extern struct PyModuleDef __pyx_moduledef;
 } /* anonymous namespace */
@@ -2115,77 +2391,136 @@
   Py_CLEAR(clear_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_CLEAR(clear_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_CLEAR(clear_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_CLEAR(clear_module_state->__pyx_kp_u_031_810_827_59);
-  Py_CLEAR(clear_module_state->__pyx_n_s_DocumentSearch);
-  Py_CLEAR(clear_module_state->__pyx_n_s_File);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_Processing_image);
-  Py_CLEAR(clear_module_state->__pyx_n_u_Tokens);
-  Py_CLEAR(clear_module_state->__pyx_n_s__12);
-  Py_CLEAR(clear_module_state->__pyx_n_s__8);
-  Py_CLEAR(clear_module_state->__pyx_kp_u__9);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Checked_tokens);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Detected_Text_Language);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Detected_object);
+  Py_CLEAR(clear_module_state->__pyx_n_s_DocLanguage);
+  Py_CLEAR(clear_module_state->__pyx_n_s_ENGLISH);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_concatenate_text);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_detect_language_for_sen);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Error_to_translate);
+  Py_CLEAR(clear_module_state->__pyx_n_s_FRENCH);
+  Py_CLEAR(clear_module_state->__pyx_n_s_GERMAN);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_It_doesn_t_have_readable_sentenc);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Lang_detected);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_LanguageDetectorBuilder);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Language_not_detected);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_None);
+  Py_CLEAR(clear_module_state->__pyx_n_s_PORTUGUESE);
+  Py_CLEAR(clear_module_state->__pyx_n_s_PreProcessing);
+  Py_CLEAR(clear_module_state->__pyx_n_s_SPANISH);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Translate);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Translated_text);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Translating_text_to);
+  Py_CLEAR(clear_module_state->__pyx_n_s_Translator);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_Will_be_translated_to);
+  Py_CLEAR(clear_module_state->__pyx_n_s_WordFixer);
+  Py_CLEAR(clear_module_state->__pyx_n_s__14);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__2);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__3);
+  Py_CLEAR(clear_module_state->__pyx_kp_u__4);
+  Py_CLEAR(clear_module_state->__pyx_n_s__6);
+  Py_CLEAR(clear_module_state->__pyx_n_s__7);
+  Py_CLEAR(clear_module_state->__pyx_n_s_allSplitedText);
   Py_CLEAR(clear_module_state->__pyx_n_s_append);
+  Py_CLEAR(clear_module_state->__pyx_n_s_arr);
   Py_CLEAR(clear_module_state->__pyx_n_s_asyncio_coroutines);
+  Py_CLEAR(clear_module_state->__pyx_n_s_build);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_checking);
   Py_CLEAR(clear_module_state->__pyx_n_s_cline_in_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_dcsearch);
-  Py_CLEAR(clear_module_state->__pyx_n_s_detected_language);
-  Py_CLEAR(clear_module_state->__pyx_n_s_dir);
-  Py_CLEAR(clear_module_state->__pyx_n_s_doc);
-  Py_CLEAR(clear_module_state->__pyx_n_s_file);
-  Py_CLEAR(clear_module_state->__pyx_n_s_files);
-  Py_CLEAR(clear_module_state->__pyx_n_s_find_token);
+  Py_CLEAR(clear_module_state->__pyx_n_s_debug);
+  Py_CLEAR(clear_module_state->__pyx_n_s_dest);
+  Py_CLEAR(clear_module_state->__pyx_n_s_det);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang_by_google_translate);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect_lang_by_google_translate_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detect_language_of);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detected);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_detected_language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detecteds_sentences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_detector);
+  Py_CLEAR(clear_module_state->__pyx_n_s_error);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_error_2);
+  Py_CLEAR(clear_module_state->__pyx_n_s_extract_sentences);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_extracted_sentences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_fix_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_fix_word);
   Py_CLEAR(clear_module_state->__pyx_n_s_format_exc);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_home_tiago_media);
+  Py_CLEAR(clear_module_state->__pyx_n_s_from_languages);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_from_sentences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_get_language_from_lingua);
+  Py_CLEAR(clear_module_state->__pyx_n_s_googletrans);
   Py_CLEAR(clear_module_state->__pyx_n_s_import);
+  Py_CLEAR(clear_module_state->__pyx_n_s_info);
   Py_CLEAR(clear_module_state->__pyx_n_s_initializing);
   Py_CLEAR(clear_module_state->__pyx_n_s_is_coroutine);
-  Py_CLEAR(clear_module_state->__pyx_n_u_language);
-  Py_CLEAR(clear_module_state->__pyx_n_s_load);
+  Py_CLEAR(clear_module_state->__pyx_n_s_items);
+  Py_CLEAR(clear_module_state->__pyx_n_s_key);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lang);
+  Py_CLEAR(clear_module_state->__pyx_n_s_language);
+  Py_CLEAR(clear_module_state->__pyx_n_s_languages);
+  Py_CLEAR(clear_module_state->__pyx_n_s_lingua);
+  Py_CLEAR(clear_module_state->__pyx_n_s_logging);
   Py_CLEAR(clear_module_state->__pyx_n_s_main);
+  Py_CLEAR(clear_module_state->__pyx_n_s_maxCheckedTokens);
   Py_CLEAR(clear_module_state->__pyx_n_s_name);
-  Py_CLEAR(clear_module_state->__pyx_n_s_named_entities);
-  Py_CLEAR(clear_module_state->__pyx_n_u_named_entities);
-  Py_CLEAR(clear_module_state->__pyx_n_s_print);
-  Py_CLEAR(clear_module_state->__pyx_n_u_pt);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_regime_de_comunho_de_bens_031_81);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_res_docs_with_img_pdf_img_pdf);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_res_onus_pag1_pdf);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_res_onus_pag2_pdf);
-  Py_CLEAR(clear_module_state->__pyx_kp_u_res_onus_pag3_pdf);
-  Py_CLEAR(clear_module_state->__pyx_n_s_run);
-  Py_CLEAR(clear_module_state->__pyx_n_s_search_documents);
+  Py_CLEAR(clear_module_state->__pyx_n_s_norm_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_normalize_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_original_language);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_result);
+  Py_CLEAR(clear_module_state->__pyx_n_s_retry);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_retrying_Left);
+  Py_CLEAR(clear_module_state->__pyx_n_s_reverse);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sentences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_service_urls);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sleep);
+  Py_CLEAR(clear_module_state->__pyx_n_s_slited);
+  Py_CLEAR(clear_module_state->__pyx_n_s_sorted);
   Py_CLEAR(clear_module_state->__pyx_n_s_spec);
-  Py_CLEAR(clear_module_state->__pyx_n_s_start);
-  Py_CLEAR(clear_module_state->__pyx_n_s_summary);
-  Py_CLEAR(clear_module_state->__pyx_n_u_summary);
+  Py_CLEAR(clear_module_state->__pyx_n_s_split);
+  Py_CLEAR(clear_module_state->__pyx_n_s_splitedText);
+  Py_CLEAR(clear_module_state->__pyx_kp_s_src_wrapper_infra_LanguageDetect);
+  Py_CLEAR(clear_module_state->__pyx_n_s_strip);
+  Py_CLEAR(clear_module_state->__pyx_n_s_t);
   Py_CLEAR(clear_module_state->__pyx_n_s_test);
-  Py_CLEAR(clear_module_state->__pyx_n_s_tests_ProcessPDFImageTest);
-  Py_CLEAR(clear_module_state->__pyx_kp_s_tests_ProcessPDFImageTest_pyx);
   Py_CLEAR(clear_module_state->__pyx_n_s_text);
-  Py_CLEAR(clear_module_state->__pyx_n_u_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_time);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_to);
   Py_CLEAR(clear_module_state->__pyx_n_s_tokens);
+  Py_CLEAR(clear_module_state->__pyx_n_s_total_tokens);
   Py_CLEAR(clear_module_state->__pyx_n_s_traceback);
-  Py_CLEAR(clear_module_state->__pyx_n_s_train_model);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_Process);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_DocumentSearch);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_File);
-  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_core_Image);
-  Py_CLEAR(clear_module_state->__pyx_tuple_);
-  Py_CLEAR(clear_module_state->__pyx_tuple__2);
-  Py_CLEAR(clear_module_state->__pyx_tuple__3);
-  Py_CLEAR(clear_module_state->__pyx_tuple__4);
+  Py_CLEAR(clear_module_state->__pyx_n_s_translate);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_translate_google_co_kr);
+  Py_CLEAR(clear_module_state->__pyx_kp_u_translate_google_com);
+  Py_CLEAR(clear_module_state->__pyx_n_s_translate_to);
+  Py_CLEAR(clear_module_state->__pyx_n_s_translated_sentences);
+  Py_CLEAR(clear_module_state->__pyx_n_s_translated_text);
+  Py_CLEAR(clear_module_state->__pyx_n_s_translator);
+  Py_CLEAR(clear_module_state->__pyx_n_s_value);
+  Py_CLEAR(clear_module_state->__pyx_n_s_wrapper_infra_LanguageDetector);
+  Py_CLEAR(clear_module_state->__pyx_n_s_x);
+  Py_CLEAR(clear_module_state->__pyx_float_0_5);
+  Py_CLEAR(clear_module_state->__pyx_int_0);
+  Py_CLEAR(clear_module_state->__pyx_int_1);
+  Py_CLEAR(clear_module_state->__pyx_int_4);
   Py_CLEAR(clear_module_state->__pyx_tuple__5);
-  Py_CLEAR(clear_module_state->__pyx_tuple__6);
-  Py_CLEAR(clear_module_state->__pyx_tuple__7);
+  Py_CLEAR(clear_module_state->__pyx_tuple__8);
   Py_CLEAR(clear_module_state->__pyx_tuple__10);
-  Py_CLEAR(clear_module_state->__pyx_codeobj__11);
+  Py_CLEAR(clear_module_state->__pyx_tuple__11);
+  Py_CLEAR(clear_module_state->__pyx_tuple__13);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__9);
+  Py_CLEAR(clear_module_state->__pyx_codeobj__12);
   return 0;
 }
 #endif
 /* #### Code section: module_state_traverse ### */
 #if CYTHON_USE_MODULE_STATE
 static int __pyx_m_traverse(PyObject *m, visitproc visit, void *arg) {
   __pyx_mstate *traverse_module_state = __pyx_mstate(m);
@@ -2198,77 +2533,136 @@
   Py_VISIT(traverse_module_state->__pyx_empty_unicode);
   #ifdef __Pyx_CyFunction_USED
   Py_VISIT(traverse_module_state->__pyx_CyFunctionType);
   #endif
   #ifdef __Pyx_FusedFunction_USED
   Py_VISIT(traverse_module_state->__pyx_FusedFunctionType);
   #endif
-  Py_VISIT(traverse_module_state->__pyx_kp_u_031_810_827_59);
-  Py_VISIT(traverse_module_state->__pyx_n_s_DocumentSearch);
-  Py_VISIT(traverse_module_state->__pyx_n_s_File);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_Processing_image);
-  Py_VISIT(traverse_module_state->__pyx_n_u_Tokens);
-  Py_VISIT(traverse_module_state->__pyx_n_s__12);
-  Py_VISIT(traverse_module_state->__pyx_n_s__8);
-  Py_VISIT(traverse_module_state->__pyx_kp_u__9);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Checked_tokens);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Detected_Text_Language);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Detected_object);
+  Py_VISIT(traverse_module_state->__pyx_n_s_DocLanguage);
+  Py_VISIT(traverse_module_state->__pyx_n_s_ENGLISH);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_concatenate_text);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_detect_language_for_sen);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Error_to_translate);
+  Py_VISIT(traverse_module_state->__pyx_n_s_FRENCH);
+  Py_VISIT(traverse_module_state->__pyx_n_s_GERMAN);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_It_doesn_t_have_readable_sentenc);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Lang_detected);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_LanguageDetectorBuilder);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Language_not_detected);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_None);
+  Py_VISIT(traverse_module_state->__pyx_n_s_PORTUGUESE);
+  Py_VISIT(traverse_module_state->__pyx_n_s_PreProcessing);
+  Py_VISIT(traverse_module_state->__pyx_n_s_SPANISH);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Translate);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Translated_text);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Translating_text_to);
+  Py_VISIT(traverse_module_state->__pyx_n_s_Translator);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_Will_be_translated_to);
+  Py_VISIT(traverse_module_state->__pyx_n_s_WordFixer);
+  Py_VISIT(traverse_module_state->__pyx_n_s__14);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__2);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__3);
+  Py_VISIT(traverse_module_state->__pyx_kp_u__4);
+  Py_VISIT(traverse_module_state->__pyx_n_s__6);
+  Py_VISIT(traverse_module_state->__pyx_n_s__7);
+  Py_VISIT(traverse_module_state->__pyx_n_s_allSplitedText);
   Py_VISIT(traverse_module_state->__pyx_n_s_append);
+  Py_VISIT(traverse_module_state->__pyx_n_s_arr);
   Py_VISIT(traverse_module_state->__pyx_n_s_asyncio_coroutines);
+  Py_VISIT(traverse_module_state->__pyx_n_s_build);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_checking);
   Py_VISIT(traverse_module_state->__pyx_n_s_cline_in_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_dcsearch);
-  Py_VISIT(traverse_module_state->__pyx_n_s_detected_language);
-  Py_VISIT(traverse_module_state->__pyx_n_s_dir);
-  Py_VISIT(traverse_module_state->__pyx_n_s_doc);
-  Py_VISIT(traverse_module_state->__pyx_n_s_file);
-  Py_VISIT(traverse_module_state->__pyx_n_s_files);
-  Py_VISIT(traverse_module_state->__pyx_n_s_find_token);
+  Py_VISIT(traverse_module_state->__pyx_n_s_debug);
+  Py_VISIT(traverse_module_state->__pyx_n_s_dest);
+  Py_VISIT(traverse_module_state->__pyx_n_s_det);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang_by_google_translate);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect_lang_by_google_translate_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detect_language_of);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detected);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_detected_language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detecteds_sentences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_detector);
+  Py_VISIT(traverse_module_state->__pyx_n_s_error);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_error_2);
+  Py_VISIT(traverse_module_state->__pyx_n_s_extract_sentences);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_extracted_sentences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_fix_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_fix_word);
   Py_VISIT(traverse_module_state->__pyx_n_s_format_exc);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_home_tiago_media);
+  Py_VISIT(traverse_module_state->__pyx_n_s_from_languages);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_from_sentences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_get_language_from_lingua);
+  Py_VISIT(traverse_module_state->__pyx_n_s_googletrans);
   Py_VISIT(traverse_module_state->__pyx_n_s_import);
+  Py_VISIT(traverse_module_state->__pyx_n_s_info);
   Py_VISIT(traverse_module_state->__pyx_n_s_initializing);
   Py_VISIT(traverse_module_state->__pyx_n_s_is_coroutine);
-  Py_VISIT(traverse_module_state->__pyx_n_u_language);
-  Py_VISIT(traverse_module_state->__pyx_n_s_load);
+  Py_VISIT(traverse_module_state->__pyx_n_s_items);
+  Py_VISIT(traverse_module_state->__pyx_n_s_key);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lang);
+  Py_VISIT(traverse_module_state->__pyx_n_s_language);
+  Py_VISIT(traverse_module_state->__pyx_n_s_languages);
+  Py_VISIT(traverse_module_state->__pyx_n_s_lingua);
+  Py_VISIT(traverse_module_state->__pyx_n_s_logging);
   Py_VISIT(traverse_module_state->__pyx_n_s_main);
+  Py_VISIT(traverse_module_state->__pyx_n_s_maxCheckedTokens);
   Py_VISIT(traverse_module_state->__pyx_n_s_name);
-  Py_VISIT(traverse_module_state->__pyx_n_s_named_entities);
-  Py_VISIT(traverse_module_state->__pyx_n_u_named_entities);
-  Py_VISIT(traverse_module_state->__pyx_n_s_print);
-  Py_VISIT(traverse_module_state->__pyx_n_u_pt);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_regime_de_comunho_de_bens_031_81);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_res_docs_with_img_pdf_img_pdf);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_res_onus_pag1_pdf);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_res_onus_pag2_pdf);
-  Py_VISIT(traverse_module_state->__pyx_kp_u_res_onus_pag3_pdf);
-  Py_VISIT(traverse_module_state->__pyx_n_s_run);
-  Py_VISIT(traverse_module_state->__pyx_n_s_search_documents);
+  Py_VISIT(traverse_module_state->__pyx_n_s_norm_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_normalize_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_original_language);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_result);
+  Py_VISIT(traverse_module_state->__pyx_n_s_retry);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_retrying_Left);
+  Py_VISIT(traverse_module_state->__pyx_n_s_reverse);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sentences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_service_urls);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sleep);
+  Py_VISIT(traverse_module_state->__pyx_n_s_slited);
+  Py_VISIT(traverse_module_state->__pyx_n_s_sorted);
   Py_VISIT(traverse_module_state->__pyx_n_s_spec);
-  Py_VISIT(traverse_module_state->__pyx_n_s_start);
-  Py_VISIT(traverse_module_state->__pyx_n_s_summary);
-  Py_VISIT(traverse_module_state->__pyx_n_u_summary);
+  Py_VISIT(traverse_module_state->__pyx_n_s_split);
+  Py_VISIT(traverse_module_state->__pyx_n_s_splitedText);
+  Py_VISIT(traverse_module_state->__pyx_kp_s_src_wrapper_infra_LanguageDetect);
+  Py_VISIT(traverse_module_state->__pyx_n_s_strip);
+  Py_VISIT(traverse_module_state->__pyx_n_s_t);
   Py_VISIT(traverse_module_state->__pyx_n_s_test);
-  Py_VISIT(traverse_module_state->__pyx_n_s_tests_ProcessPDFImageTest);
-  Py_VISIT(traverse_module_state->__pyx_kp_s_tests_ProcessPDFImageTest_pyx);
   Py_VISIT(traverse_module_state->__pyx_n_s_text);
-  Py_VISIT(traverse_module_state->__pyx_n_u_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_time);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_to);
   Py_VISIT(traverse_module_state->__pyx_n_s_tokens);
+  Py_VISIT(traverse_module_state->__pyx_n_s_total_tokens);
   Py_VISIT(traverse_module_state->__pyx_n_s_traceback);
-  Py_VISIT(traverse_module_state->__pyx_n_s_train_model);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_Process);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_DocumentSearch);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_File);
-  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_core_Image);
-  Py_VISIT(traverse_module_state->__pyx_tuple_);
-  Py_VISIT(traverse_module_state->__pyx_tuple__2);
-  Py_VISIT(traverse_module_state->__pyx_tuple__3);
-  Py_VISIT(traverse_module_state->__pyx_tuple__4);
+  Py_VISIT(traverse_module_state->__pyx_n_s_translate);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_translate_google_co_kr);
+  Py_VISIT(traverse_module_state->__pyx_kp_u_translate_google_com);
+  Py_VISIT(traverse_module_state->__pyx_n_s_translate_to);
+  Py_VISIT(traverse_module_state->__pyx_n_s_translated_sentences);
+  Py_VISIT(traverse_module_state->__pyx_n_s_translated_text);
+  Py_VISIT(traverse_module_state->__pyx_n_s_translator);
+  Py_VISIT(traverse_module_state->__pyx_n_s_value);
+  Py_VISIT(traverse_module_state->__pyx_n_s_wrapper_infra_LanguageDetector);
+  Py_VISIT(traverse_module_state->__pyx_n_s_x);
+  Py_VISIT(traverse_module_state->__pyx_float_0_5);
+  Py_VISIT(traverse_module_state->__pyx_int_0);
+  Py_VISIT(traverse_module_state->__pyx_int_1);
+  Py_VISIT(traverse_module_state->__pyx_int_4);
   Py_VISIT(traverse_module_state->__pyx_tuple__5);
-  Py_VISIT(traverse_module_state->__pyx_tuple__6);
-  Py_VISIT(traverse_module_state->__pyx_tuple__7);
+  Py_VISIT(traverse_module_state->__pyx_tuple__8);
   Py_VISIT(traverse_module_state->__pyx_tuple__10);
-  Py_VISIT(traverse_module_state->__pyx_codeobj__11);
+  Py_VISIT(traverse_module_state->__pyx_tuple__11);
+  Py_VISIT(traverse_module_state->__pyx_tuple__13);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__9);
+  Py_VISIT(traverse_module_state->__pyx_codeobj__12);
   return 0;
 }
 #endif
 /* #### Code section: module_state_defines ### */
 #define __pyx_d __pyx_mstate_global->__pyx_d
 #define __pyx_b __pyx_mstate_global->__pyx_b
 #define __pyx_cython_runtime __pyx_mstate_global->__pyx_cython_runtime
@@ -2291,1005 +2685,3824 @@
 #define __pyx_CoroutineAwaitType __pyx_mstate_global->__pyx_CoroutineAwaitType
 #endif
 #ifdef __Pyx_Coroutine_USED
 #define __pyx_CoroutineType __pyx_mstate_global->__pyx_CoroutineType
 #endif
 #if CYTHON_USE_MODULE_STATE
 #endif
-#define __pyx_kp_u_031_810_827_59 __pyx_mstate_global->__pyx_kp_u_031_810_827_59
-#define __pyx_n_s_DocumentSearch __pyx_mstate_global->__pyx_n_s_DocumentSearch
-#define __pyx_n_s_File __pyx_mstate_global->__pyx_n_s_File
-#define __pyx_kp_u_Processing_image __pyx_mstate_global->__pyx_kp_u_Processing_image
-#define __pyx_n_u_Tokens __pyx_mstate_global->__pyx_n_u_Tokens
-#define __pyx_n_s__12 __pyx_mstate_global->__pyx_n_s__12
-#define __pyx_n_s__8 __pyx_mstate_global->__pyx_n_s__8
-#define __pyx_kp_u__9 __pyx_mstate_global->__pyx_kp_u__9
+#define __pyx_kp_u_ __pyx_mstate_global->__pyx_kp_u_
+#define __pyx_kp_u_Checked_tokens __pyx_mstate_global->__pyx_kp_u_Checked_tokens
+#define __pyx_kp_u_Detected_Text_Language __pyx_mstate_global->__pyx_kp_u_Detected_Text_Language
+#define __pyx_kp_u_Detected_object __pyx_mstate_global->__pyx_kp_u_Detected_object
+#define __pyx_n_s_DocLanguage __pyx_mstate_global->__pyx_n_s_DocLanguage
+#define __pyx_n_s_ENGLISH __pyx_mstate_global->__pyx_n_s_ENGLISH
+#define __pyx_kp_u_Error_to_concatenate_text __pyx_mstate_global->__pyx_kp_u_Error_to_concatenate_text
+#define __pyx_kp_u_Error_to_detect_language_for_sen __pyx_mstate_global->__pyx_kp_u_Error_to_detect_language_for_sen
+#define __pyx_kp_u_Error_to_translate __pyx_mstate_global->__pyx_kp_u_Error_to_translate
+#define __pyx_n_s_FRENCH __pyx_mstate_global->__pyx_n_s_FRENCH
+#define __pyx_n_s_GERMAN __pyx_mstate_global->__pyx_n_s_GERMAN
+#define __pyx_kp_u_It_doesn_t_have_readable_sentenc __pyx_mstate_global->__pyx_kp_u_It_doesn_t_have_readable_sentenc
+#define __pyx_kp_u_Lang_detected __pyx_mstate_global->__pyx_kp_u_Lang_detected
+#define __pyx_n_s_Language __pyx_mstate_global->__pyx_n_s_Language
+#define __pyx_n_s_LanguageDetectorBuilder __pyx_mstate_global->__pyx_n_s_LanguageDetectorBuilder
+#define __pyx_kp_u_Language_not_detected __pyx_mstate_global->__pyx_kp_u_Language_not_detected
+#define __pyx_kp_u_None __pyx_mstate_global->__pyx_kp_u_None
+#define __pyx_n_s_PORTUGUESE __pyx_mstate_global->__pyx_n_s_PORTUGUESE
+#define __pyx_n_s_PreProcessing __pyx_mstate_global->__pyx_n_s_PreProcessing
+#define __pyx_n_s_SPANISH __pyx_mstate_global->__pyx_n_s_SPANISH
+#define __pyx_kp_u_Translate __pyx_mstate_global->__pyx_kp_u_Translate
+#define __pyx_kp_u_Translated_text __pyx_mstate_global->__pyx_kp_u_Translated_text
+#define __pyx_kp_u_Translating_text_to __pyx_mstate_global->__pyx_kp_u_Translating_text_to
+#define __pyx_n_s_Translator __pyx_mstate_global->__pyx_n_s_Translator
+#define __pyx_kp_u_Will_be_translated_to __pyx_mstate_global->__pyx_kp_u_Will_be_translated_to
+#define __pyx_n_s_WordFixer __pyx_mstate_global->__pyx_n_s_WordFixer
+#define __pyx_n_s__14 __pyx_mstate_global->__pyx_n_s__14
+#define __pyx_kp_u__2 __pyx_mstate_global->__pyx_kp_u__2
+#define __pyx_kp_u__3 __pyx_mstate_global->__pyx_kp_u__3
+#define __pyx_kp_u__4 __pyx_mstate_global->__pyx_kp_u__4
+#define __pyx_n_s__6 __pyx_mstate_global->__pyx_n_s__6
+#define __pyx_n_s__7 __pyx_mstate_global->__pyx_n_s__7
+#define __pyx_n_s_allSplitedText __pyx_mstate_global->__pyx_n_s_allSplitedText
 #define __pyx_n_s_append __pyx_mstate_global->__pyx_n_s_append
+#define __pyx_n_s_arr __pyx_mstate_global->__pyx_n_s_arr
 #define __pyx_n_s_asyncio_coroutines __pyx_mstate_global->__pyx_n_s_asyncio_coroutines
+#define __pyx_n_s_build __pyx_mstate_global->__pyx_n_s_build
+#define __pyx_kp_u_checking __pyx_mstate_global->__pyx_kp_u_checking
 #define __pyx_n_s_cline_in_traceback __pyx_mstate_global->__pyx_n_s_cline_in_traceback
-#define __pyx_n_s_dcsearch __pyx_mstate_global->__pyx_n_s_dcsearch
-#define __pyx_n_s_detected_language __pyx_mstate_global->__pyx_n_s_detected_language
-#define __pyx_n_s_dir __pyx_mstate_global->__pyx_n_s_dir
-#define __pyx_n_s_doc __pyx_mstate_global->__pyx_n_s_doc
-#define __pyx_n_s_file __pyx_mstate_global->__pyx_n_s_file
-#define __pyx_n_s_files __pyx_mstate_global->__pyx_n_s_files
-#define __pyx_n_s_find_token __pyx_mstate_global->__pyx_n_s_find_token
+#define __pyx_n_s_debug __pyx_mstate_global->__pyx_n_s_debug
+#define __pyx_n_s_dest __pyx_mstate_global->__pyx_n_s_dest
+#define __pyx_n_s_det __pyx_mstate_global->__pyx_n_s_det
+#define __pyx_n_s_detect __pyx_mstate_global->__pyx_n_s_detect
+#define __pyx_n_s_detect_lang __pyx_mstate_global->__pyx_n_s_detect_lang
+#define __pyx_n_s_detect_lang_by_google_translate __pyx_mstate_global->__pyx_n_s_detect_lang_by_google_translate
+#define __pyx_n_s_detect_lang_by_google_translate_2 __pyx_mstate_global->__pyx_n_s_detect_lang_by_google_translate_2
+#define __pyx_n_s_detect_language_of __pyx_mstate_global->__pyx_n_s_detect_language_of
+#define __pyx_n_s_detected __pyx_mstate_global->__pyx_n_s_detected
+#define __pyx_kp_u_detected_language __pyx_mstate_global->__pyx_kp_u_detected_language
+#define __pyx_n_s_detecteds_sentences __pyx_mstate_global->__pyx_n_s_detecteds_sentences
+#define __pyx_n_s_detector __pyx_mstate_global->__pyx_n_s_detector
+#define __pyx_n_s_error __pyx_mstate_global->__pyx_n_s_error
+#define __pyx_kp_u_error_2 __pyx_mstate_global->__pyx_kp_u_error_2
+#define __pyx_n_s_extract_sentences __pyx_mstate_global->__pyx_n_s_extract_sentences
+#define __pyx_kp_u_extracted_sentences __pyx_mstate_global->__pyx_kp_u_extracted_sentences
+#define __pyx_n_s_fix_text __pyx_mstate_global->__pyx_n_s_fix_text
+#define __pyx_n_s_fix_word __pyx_mstate_global->__pyx_n_s_fix_word
 #define __pyx_n_s_format_exc __pyx_mstate_global->__pyx_n_s_format_exc
-#define __pyx_kp_u_home_tiago_media __pyx_mstate_global->__pyx_kp_u_home_tiago_media
+#define __pyx_n_s_from_languages __pyx_mstate_global->__pyx_n_s_from_languages
+#define __pyx_kp_u_from_sentences __pyx_mstate_global->__pyx_kp_u_from_sentences
+#define __pyx_n_s_get_language_from_lingua __pyx_mstate_global->__pyx_n_s_get_language_from_lingua
+#define __pyx_n_s_googletrans __pyx_mstate_global->__pyx_n_s_googletrans
 #define __pyx_n_s_import __pyx_mstate_global->__pyx_n_s_import
+#define __pyx_n_s_info __pyx_mstate_global->__pyx_n_s_info
 #define __pyx_n_s_initializing __pyx_mstate_global->__pyx_n_s_initializing
 #define __pyx_n_s_is_coroutine __pyx_mstate_global->__pyx_n_s_is_coroutine
-#define __pyx_n_u_language __pyx_mstate_global->__pyx_n_u_language
-#define __pyx_n_s_load __pyx_mstate_global->__pyx_n_s_load
+#define __pyx_n_s_items __pyx_mstate_global->__pyx_n_s_items
+#define __pyx_n_s_key __pyx_mstate_global->__pyx_n_s_key
+#define __pyx_n_s_lang __pyx_mstate_global->__pyx_n_s_lang
+#define __pyx_n_s_language __pyx_mstate_global->__pyx_n_s_language
+#define __pyx_n_s_languages __pyx_mstate_global->__pyx_n_s_languages
+#define __pyx_n_s_lingua __pyx_mstate_global->__pyx_n_s_lingua
+#define __pyx_n_s_logging __pyx_mstate_global->__pyx_n_s_logging
 #define __pyx_n_s_main __pyx_mstate_global->__pyx_n_s_main
+#define __pyx_n_s_maxCheckedTokens __pyx_mstate_global->__pyx_n_s_maxCheckedTokens
 #define __pyx_n_s_name __pyx_mstate_global->__pyx_n_s_name
-#define __pyx_n_s_named_entities __pyx_mstate_global->__pyx_n_s_named_entities
-#define __pyx_n_u_named_entities __pyx_mstate_global->__pyx_n_u_named_entities
-#define __pyx_n_s_print __pyx_mstate_global->__pyx_n_s_print
-#define __pyx_n_u_pt __pyx_mstate_global->__pyx_n_u_pt
-#define __pyx_kp_u_regime_de_comunho_de_bens_031_81 __pyx_mstate_global->__pyx_kp_u_regime_de_comunho_de_bens_031_81
-#define __pyx_kp_u_res_docs_with_img_pdf_img_pdf __pyx_mstate_global->__pyx_kp_u_res_docs_with_img_pdf_img_pdf
-#define __pyx_kp_u_res_onus_pag1_pdf __pyx_mstate_global->__pyx_kp_u_res_onus_pag1_pdf
-#define __pyx_kp_u_res_onus_pag2_pdf __pyx_mstate_global->__pyx_kp_u_res_onus_pag2_pdf
-#define __pyx_kp_u_res_onus_pag3_pdf __pyx_mstate_global->__pyx_kp_u_res_onus_pag3_pdf
-#define __pyx_n_s_run __pyx_mstate_global->__pyx_n_s_run
-#define __pyx_n_s_search_documents __pyx_mstate_global->__pyx_n_s_search_documents
+#define __pyx_n_s_norm_text __pyx_mstate_global->__pyx_n_s_norm_text
+#define __pyx_n_s_normalize_text __pyx_mstate_global->__pyx_n_s_normalize_text
+#define __pyx_n_s_original_language __pyx_mstate_global->__pyx_n_s_original_language
+#define __pyx_kp_u_result __pyx_mstate_global->__pyx_kp_u_result
+#define __pyx_n_s_retry __pyx_mstate_global->__pyx_n_s_retry
+#define __pyx_kp_u_retrying_Left __pyx_mstate_global->__pyx_kp_u_retrying_Left
+#define __pyx_n_s_reverse __pyx_mstate_global->__pyx_n_s_reverse
+#define __pyx_n_s_sentences __pyx_mstate_global->__pyx_n_s_sentences
+#define __pyx_n_s_service_urls __pyx_mstate_global->__pyx_n_s_service_urls
+#define __pyx_n_s_sleep __pyx_mstate_global->__pyx_n_s_sleep
+#define __pyx_n_s_slited __pyx_mstate_global->__pyx_n_s_slited
+#define __pyx_n_s_sorted __pyx_mstate_global->__pyx_n_s_sorted
 #define __pyx_n_s_spec __pyx_mstate_global->__pyx_n_s_spec
-#define __pyx_n_s_start __pyx_mstate_global->__pyx_n_s_start
-#define __pyx_n_s_summary __pyx_mstate_global->__pyx_n_s_summary
-#define __pyx_n_u_summary __pyx_mstate_global->__pyx_n_u_summary
+#define __pyx_n_s_split __pyx_mstate_global->__pyx_n_s_split
+#define __pyx_n_s_splitedText __pyx_mstate_global->__pyx_n_s_splitedText
+#define __pyx_kp_s_src_wrapper_infra_LanguageDetect __pyx_mstate_global->__pyx_kp_s_src_wrapper_infra_LanguageDetect
+#define __pyx_n_s_strip __pyx_mstate_global->__pyx_n_s_strip
+#define __pyx_n_s_t __pyx_mstate_global->__pyx_n_s_t
 #define __pyx_n_s_test __pyx_mstate_global->__pyx_n_s_test
-#define __pyx_n_s_tests_ProcessPDFImageTest __pyx_mstate_global->__pyx_n_s_tests_ProcessPDFImageTest
-#define __pyx_kp_s_tests_ProcessPDFImageTest_pyx __pyx_mstate_global->__pyx_kp_s_tests_ProcessPDFImageTest_pyx
 #define __pyx_n_s_text __pyx_mstate_global->__pyx_n_s_text
-#define __pyx_n_u_text __pyx_mstate_global->__pyx_n_u_text
+#define __pyx_n_s_time __pyx_mstate_global->__pyx_n_s_time
+#define __pyx_kp_u_to __pyx_mstate_global->__pyx_kp_u_to
 #define __pyx_n_s_tokens __pyx_mstate_global->__pyx_n_s_tokens
+#define __pyx_n_s_total_tokens __pyx_mstate_global->__pyx_n_s_total_tokens
 #define __pyx_n_s_traceback __pyx_mstate_global->__pyx_n_s_traceback
-#define __pyx_n_s_train_model __pyx_mstate_global->__pyx_n_s_train_model
-#define __pyx_n_s_wrapper_Process __pyx_mstate_global->__pyx_n_s_wrapper_Process
-#define __pyx_n_s_wrapper_core_DocumentSearch __pyx_mstate_global->__pyx_n_s_wrapper_core_DocumentSearch
-#define __pyx_n_s_wrapper_core_File __pyx_mstate_global->__pyx_n_s_wrapper_core_File
-#define __pyx_n_s_wrapper_core_Image __pyx_mstate_global->__pyx_n_s_wrapper_core_Image
-#define __pyx_tuple_ __pyx_mstate_global->__pyx_tuple_
-#define __pyx_tuple__2 __pyx_mstate_global->__pyx_tuple__2
-#define __pyx_tuple__3 __pyx_mstate_global->__pyx_tuple__3
-#define __pyx_tuple__4 __pyx_mstate_global->__pyx_tuple__4
+#define __pyx_n_s_translate __pyx_mstate_global->__pyx_n_s_translate
+#define __pyx_kp_u_translate_google_co_kr __pyx_mstate_global->__pyx_kp_u_translate_google_co_kr
+#define __pyx_kp_u_translate_google_com __pyx_mstate_global->__pyx_kp_u_translate_google_com
+#define __pyx_n_s_translate_to __pyx_mstate_global->__pyx_n_s_translate_to
+#define __pyx_n_s_translated_sentences __pyx_mstate_global->__pyx_n_s_translated_sentences
+#define __pyx_n_s_translated_text __pyx_mstate_global->__pyx_n_s_translated_text
+#define __pyx_n_s_translator __pyx_mstate_global->__pyx_n_s_translator
+#define __pyx_n_s_value __pyx_mstate_global->__pyx_n_s_value
+#define __pyx_n_s_wrapper_infra_LanguageDetector __pyx_mstate_global->__pyx_n_s_wrapper_infra_LanguageDetector
+#define __pyx_n_s_x __pyx_mstate_global->__pyx_n_s_x
+#define __pyx_float_0_5 __pyx_mstate_global->__pyx_float_0_5
+#define __pyx_int_0 __pyx_mstate_global->__pyx_int_0
+#define __pyx_int_1 __pyx_mstate_global->__pyx_int_1
+#define __pyx_int_4 __pyx_mstate_global->__pyx_int_4
 #define __pyx_tuple__5 __pyx_mstate_global->__pyx_tuple__5
-#define __pyx_tuple__6 __pyx_mstate_global->__pyx_tuple__6
-#define __pyx_tuple__7 __pyx_mstate_global->__pyx_tuple__7
+#define __pyx_tuple__8 __pyx_mstate_global->__pyx_tuple__8
 #define __pyx_tuple__10 __pyx_mstate_global->__pyx_tuple__10
-#define __pyx_codeobj__11 __pyx_mstate_global->__pyx_codeobj__11
+#define __pyx_tuple__11 __pyx_mstate_global->__pyx_tuple__11
+#define __pyx_tuple__13 __pyx_mstate_global->__pyx_tuple__13
+#define __pyx_codeobj__9 __pyx_mstate_global->__pyx_codeobj__9
+#define __pyx_codeobj__12 __pyx_mstate_global->__pyx_codeobj__12
 /* #### Code section: module_code ### */
 
-/* "tests/ProcessPDFImageTest.pyx":9
- * dir = '/home/tiago/media'
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():             # <<<<<<<<<<<<<<
- *     load()
- *     dcsearch = DocumentSearch(dir)
+/* "wrapper/infra/LanguageDetector.pyx":10
+ * from .DocLanguage import DocLanguage
+ * 
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):             # <<<<<<<<<<<<<<
+ *     detected = original_language
+ *     if not original_language:
  */
 
 /* Python wrapper */
-static PyObject *__pyx_pw_5tests_19ProcessPDFImageTest_1start(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
-PyDoc_STRVAR(__pyx_doc_5tests_19ProcessPDFImageTest_start, "start()");
-static PyMethodDef __pyx_mdef_5tests_19ProcessPDFImageTest_1start = {"start", (PyCFunction)__pyx_pw_5tests_19ProcessPDFImageTest_1start, METH_NOARGS, __pyx_doc_5tests_19ProcessPDFImageTest_start};
-static PyObject *__pyx_pw_5tests_19ProcessPDFImageTest_1start(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
-  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_VARARGS(__pyx_args, __pyx_nargs);
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_16LanguageDetector_detect_lang, "detect_lang(text, translate_to: DocLanguage = None, original_language: DocLanguage = None, fix_text=None)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_16LanguageDetector_1detect_lang = {"detect_lang", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_16LanguageDetector_detect_lang};
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_1detect_lang(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_translate_to = 0;
+  PyObject *__pyx_v_original_language = 0;
+  CYTHON_UNUSED PyObject *__pyx_v_fix_text = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
   PyObject *__pyx_r = 0;
   __Pyx_RefNannyDeclarations
-  __Pyx_RefNannySetupContext("start (wrapper)", 0);
-  __pyx_r = __pyx_pf_5tests_19ProcessPDFImageTest_start(__pyx_self);
+  __Pyx_RefNannySetupContext("detect_lang (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_translate_to,&__pyx_n_s_original_language,&__pyx_n_s_fix_text,0};
+    PyObject* values[4] = {0,0,0,0};
+    values[1] = ((PyObject *)((PyObject *)Py_None));
+    values[2] = ((PyObject *)((PyObject *)Py_None));
+    values[3] = ((PyObject *)((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
+          if (value) { values[1] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  2:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_original_language);
+          if (value) { values[2] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
+        }
+        CYTHON_FALLTHROUGH;
+        case  3:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_fix_text);
+          if (value) { values[3] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 10, __pyx_L3_error)
+        }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "detect_lang") < 0)) __PYX_ERR(0, 10, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  4: values[3] = __Pyx_Arg_FASTCALL(__pyx_args, 3);
+        CYTHON_FALLTHROUGH;
+        case  3: values[2] = __Pyx_Arg_FASTCALL(__pyx_args, 2);
+        CYTHON_FALLTHROUGH;
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+    }
+    __pyx_v_text = values[0];
+    __pyx_v_translate_to = values[1];
+    __pyx_v_original_language = values[2];
+    __pyx_v_fix_text = values[3];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("detect_lang", 0, 1, 4, __pyx_nargs); __PYX_ERR(0, 10, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(__pyx_self, __pyx_v_text, __pyx_v_translate_to, __pyx_v_original_language, __pyx_v_fix_text);
 
   /* function exit code */
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
-static PyObject *__pyx_pf_5tests_19ProcessPDFImageTest_start(CYTHON_UNUSED PyObject *__pyx_self) {
-  PyObject *__pyx_v_dcsearch = NULL;
-  PyObject *__pyx_v_file = NULL;
-  PyObject *__pyx_v_doc = NULL;
+static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_detect_lang(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to, PyObject *__pyx_v_original_language, CYTHON_UNUSED PyObject *__pyx_v_fix_text) {
+  PyObject *__pyx_v_detected = NULL;
+  PyObject *__pyx_v_languages = NULL;
+  PyObject *__pyx_v_detector = NULL;
+  PyObject *__pyx_v_language = NULL;
+  PyObject *__pyx_v_translated_sentences = NULL;
+  PyObject *__pyx_v_allSplitedText = NULL;
+  PyObject *__pyx_v_translator = NULL;
+  PyObject *__pyx_v_slited = NULL;
+  PyObject *__pyx_v_t = NULL;
+  PyObject *__pyx_v_translated_text = NULL;
+  PyObject *__pyx_7genexpr__pyx_v_x = NULL;
   PyObject *__pyx_r = NULL;
   __Pyx_RefNannyDeclarations
-  PyObject *__pyx_t_1 = NULL;
-  PyObject *__pyx_t_2 = NULL;
+  int __pyx_t_1;
+  int __pyx_t_2;
   PyObject *__pyx_t_3 = NULL;
-  int __pyx_t_4;
+  PyObject *__pyx_t_4 = NULL;
   PyObject *__pyx_t_5 = NULL;
-  Py_ssize_t __pyx_t_6;
-  PyObject *(*__pyx_t_7)(PyObject *);
+  PyObject *__pyx_t_6 = NULL;
+  PyObject *__pyx_t_7 = NULL;
   PyObject *__pyx_t_8 = NULL;
-  PyObject *__pyx_t_9 = NULL;
-  PyObject *__pyx_t_10 = NULL;
-  PyObject *__pyx_t_11 = NULL;
-  int __pyx_t_12;
+  int __pyx_t_9;
+  Py_ssize_t __pyx_t_10;
+  PyObject *(*__pyx_t_11)(PyObject *);
+  PyObject *__pyx_t_12 = NULL;
   PyObject *__pyx_t_13 = NULL;
   PyObject *__pyx_t_14 = NULL;
-  int __pyx_t_15;
+  PyObject *__pyx_t_15 = NULL;
+  Py_ssize_t __pyx_t_16;
+  Py_UCS4 __pyx_t_17;
+  PyObject *__pyx_t_18 = NULL;
+  int __pyx_t_19;
+  int __pyx_t_20;
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
-  __Pyx_RefNannySetupContext("start", 0);
+  __Pyx_RefNannySetupContext("detect_lang", 0);
 
-  /* "tests/ProcessPDFImageTest.pyx":10
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():
- *     load()             # <<<<<<<<<<<<<<
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:
+  /* "wrapper/infra/LanguageDetector.pyx":11
+ * 
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):
+ *     detected = original_language             # <<<<<<<<<<<<<<
+ *     if not original_language:
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]
+ */
+  __Pyx_INCREF(__pyx_v_original_language);
+  __pyx_v_detected = __pyx_v_original_language;
+
+  /* "wrapper/infra/LanguageDetector.pyx":12
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):
+ *     detected = original_language
+ *     if not original_language:             # <<<<<<<<<<<<<<
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()
+ */
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_original_language); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 12, __pyx_L1_error)
+  __pyx_t_2 = (!__pyx_t_1);
+  if (__pyx_t_2) {
+
+    /* "wrapper/infra/LanguageDetector.pyx":13
+ *     detected = original_language
+ *     if not original_language:
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]             # <<<<<<<<<<<<<<
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()
+ *         language = detector.detect_language_of(text)
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_ENGLISH); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_4);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_FRENCH); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_GERMAN); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_SPANISH); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_PORTUGUESE); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = PyList_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 13, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_GIVEREF(__pyx_t_4);
+    PyList_SET_ITEM(__pyx_t_3, 0, __pyx_t_4);
+    __Pyx_GIVEREF(__pyx_t_5);
+    PyList_SET_ITEM(__pyx_t_3, 1, __pyx_t_5);
+    __Pyx_GIVEREF(__pyx_t_6);
+    PyList_SET_ITEM(__pyx_t_3, 2, __pyx_t_6);
+    __Pyx_GIVEREF(__pyx_t_7);
+    PyList_SET_ITEM(__pyx_t_3, 3, __pyx_t_7);
+    __Pyx_GIVEREF(__pyx_t_8);
+    PyList_SET_ITEM(__pyx_t_3, 4, __pyx_t_8);
+    __pyx_t_4 = 0;
+    __pyx_t_5 = 0;
+    __pyx_t_6 = 0;
+    __pyx_t_7 = 0;
+    __pyx_t_8 = 0;
+    __pyx_v_languages = ((PyObject*)__pyx_t_3);
+    __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":14
+ *     if not original_language:
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()             # <<<<<<<<<<<<<<
+ *         language = detector.detect_language_of(text)
+ *         logging.debug(f"result: {language}")
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_LanguageDetectorBuilder); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_from_languages); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = PySequence_Tuple(__pyx_v_languages); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_8, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_build); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 14, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_8);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[1] = {__pyx_t_6, };
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_9, 0+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 14, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    }
+    __pyx_v_detector = __pyx_t_3;
+    __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":15
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()
+ *         language = detector.detect_language_of(text)             # <<<<<<<<<<<<<<
+ *         logging.debug(f"result: {language}")
+ *         detected = DocLanguage.get_language_from_lingua(language)
+ */
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_detector, __pyx_n_s_detect_language_of); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 15, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __pyx_t_6 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_8);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_text};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 15, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    }
+    __pyx_v_language = __pyx_t_3;
+    __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":16
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()
+ *         language = detector.detect_language_of(text)
+ *         logging.debug(f"result: {language}")             # <<<<<<<<<<<<<<
+ *         detected = DocLanguage.get_language_from_lingua(language)
+ *         logging.debug(f"detected language: {detected.value}")
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_logging); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_debug); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_language, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __pyx_t_7 = __Pyx_PyUnicode_Concat(__pyx_kp_u_result, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 16, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_8)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_8);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_7};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":17
+ *         language = detector.detect_language_of(text)
+ *         logging.debug(f"result: {language}")
+ *         detected = DocLanguage.get_language_from_lingua(language)             # <<<<<<<<<<<<<<
+ *         logging.debug(f"detected language: {detected.value}")
+ * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_load); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_3 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_3)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_3);
+    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 17, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_get_language_from_lingua); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 17, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
+      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
+      if (likely(__pyx_t_6)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
+        __Pyx_INCREF(__pyx_t_6);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_7, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_6, __pyx_v_language};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 17, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    }
+    __Pyx_DECREF_SET(__pyx_v_detected, __pyx_t_3);
+    __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":18
+ *         logging.debug(f"result: {language}")
+ *         detected = DocLanguage.get_language_from_lingua(language)
+ *         logging.debug(f"detected language: {detected.value}")             # <<<<<<<<<<<<<<
+ * 
+ *     translated_sentences = []
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_logging); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_debug); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_detected, __pyx_n_s_value); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_t_7, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __pyx_t_7 = __Pyx_PyUnicode_Concat(__pyx_kp_u_detected_language, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 18, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
+      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
+      if (likely(__pyx_t_8)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+        __Pyx_INCREF(__pyx_t_8);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_6, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_7};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":12
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):
+ *     detected = original_language
+ *     if not original_language:             # <<<<<<<<<<<<<<
+ *         languages = [Language.ENGLISH, Language.FRENCH, Language.GERMAN, Language.SPANISH, Language.PORTUGUESE]
+ *         detector = LanguageDetectorBuilder.from_languages(*languages).build()
+ */
+  }
+
+  /* "wrapper/infra/LanguageDetector.pyx":20
+ *         logging.debug(f"detected language: {detected.value}")
+ * 
+ *     translated_sentences = []             # <<<<<<<<<<<<<<
+ *     # norm_text = PreProcessing.normalize_text(text, False)
+ *     # allSplitedText = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ */
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_v_translated_sentences = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":23
+ *     # norm_text = PreProcessing.normalize_text(text, False)
+ *     # allSplitedText = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ *     allSplitedText = [PreProcessing.normalize_text(x.strip(), False) for x in PreProcessing.extract_sentences(text, detected) if x.strip()]             # <<<<<<<<<<<<<<
+ *     logging.debug(f"extracted sentences: {allSplitedText}")
+ *     if translate_to and detected != translate_to:
+ */
+  { /* enter inner scope */
+    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 23, __pyx_L6_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L6_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_extract_sentences); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 23, __pyx_L6_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __pyx_t_7 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
+      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
+      if (likely(__pyx_t_7)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+        __Pyx_INCREF(__pyx_t_7);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[3] = {__pyx_t_7, __pyx_v_text, __pyx_v_detected};
+      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_9, 2+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 23, __pyx_L6_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    }
+    if (likely(PyList_CheckExact(__pyx_t_6)) || PyTuple_CheckExact(__pyx_t_6)) {
+      __pyx_t_8 = __pyx_t_6; __Pyx_INCREF(__pyx_t_8); __pyx_t_10 = 0;
+      __pyx_t_11 = NULL;
+    } else {
+      __pyx_t_10 = -1; __pyx_t_8 = PyObject_GetIter(__pyx_t_6); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 23, __pyx_L6_error)
+      __Pyx_GOTREF(__pyx_t_8);
+      __pyx_t_11 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_8); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 23, __pyx_L6_error)
+    }
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    for (;;) {
+      if (likely(!__pyx_t_11)) {
+        if (likely(PyList_CheckExact(__pyx_t_8))) {
+          if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_8)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_8, __pyx_t_10); __Pyx_INCREF(__pyx_t_6); __pyx_t_10++; if (unlikely((0 < 0))) __PYX_ERR(0, 23, __pyx_L6_error)
+          #else
+          __pyx_t_6 = PySequence_ITEM(__pyx_t_8, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 23, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          #endif
+        } else {
+          if (__pyx_t_10 >= PyTuple_GET_SIZE(__pyx_t_8)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_8, __pyx_t_10); __Pyx_INCREF(__pyx_t_6); __pyx_t_10++; if (unlikely((0 < 0))) __PYX_ERR(0, 23, __pyx_L6_error)
+          #else
+          __pyx_t_6 = PySequence_ITEM(__pyx_t_8, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 23, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          #endif
+        }
+      } else {
+        __pyx_t_6 = __pyx_t_11(__pyx_t_8);
+        if (unlikely(!__pyx_t_6)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 23, __pyx_L6_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_6);
+      }
+      __Pyx_XDECREF_SET(__pyx_7genexpr__pyx_v_x, __pyx_t_6);
+      __pyx_t_6 = 0;
+      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L6_error)
+      __Pyx_GOTREF(__pyx_t_7);
+      __pyx_t_5 = NULL;
+      __pyx_t_9 = 0;
+      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
+        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_7);
+        if (likely(__pyx_t_5)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
+          __Pyx_INCREF(__pyx_t_5);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_7, function);
+          __pyx_t_9 = 1;
+        }
+      }
+      {
+        PyObject *__pyx_callargs[1] = {__pyx_t_5, };
+        __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_7, __pyx_callargs+1-__pyx_t_9, 0+__pyx_t_9);
+        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+        if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 23, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_6);
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      }
+      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 23, __pyx_L6_error)
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (__pyx_t_2) {
+        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_7);
+        __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 23, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+        __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_7genexpr__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 23, __pyx_L6_error)
+        __Pyx_GOTREF(__pyx_t_4);
+        __pyx_t_12 = NULL;
+        __pyx_t_9 = 0;
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
+          __pyx_t_12 = PyMethod_GET_SELF(__pyx_t_4);
+          if (likely(__pyx_t_12)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
+            __Pyx_INCREF(__pyx_t_12);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_4, function);
+            __pyx_t_9 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[1] = {__pyx_t_12, };
+          __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_4, __pyx_callargs+1-__pyx_t_9, 0+__pyx_t_9);
+          __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+          if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 23, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_7);
+          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+        }
+        __pyx_t_4 = NULL;
+        __pyx_t_9 = 0;
+        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
+          __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
+          if (likely(__pyx_t_4)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+            __Pyx_INCREF(__pyx_t_4);
+            __Pyx_INCREF(function);
+            __Pyx_DECREF_SET(__pyx_t_5, function);
+            __pyx_t_9 = 1;
+          }
+        }
+        {
+          PyObject *__pyx_callargs[3] = {__pyx_t_4, __pyx_t_7, Py_False};
+          __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_9, 2+__pyx_t_9);
+          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+          if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 23, __pyx_L6_error)
+          __Pyx_GOTREF(__pyx_t_6);
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        }
+        if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_6))) __PYX_ERR(0, 23, __pyx_L6_error)
+        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      }
+    }
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x); __pyx_7genexpr__pyx_v_x = 0;
+    goto __pyx_L11_exit_scope;
+    __pyx_L6_error:;
+    __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x); __pyx_7genexpr__pyx_v_x = 0;
+    goto __pyx_L1_error;
+    __pyx_L11_exit_scope:;
+  } /* exit inner scope */
+  __pyx_v_allSplitedText = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":24
+ *     # allSplitedText = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ *     allSplitedText = [PreProcessing.normalize_text(x.strip(), False) for x in PreProcessing.extract_sentences(text, detected) if x.strip()]
+ *     logging.debug(f"extracted sentences: {allSplitedText}")             # <<<<<<<<<<<<<<
+ *     if translate_to and detected != translate_to:
+ *         logging.debug(f"Translating text to {translate_to.value}")
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_logging); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_debug); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_allSplitedText, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_extracted_sentences, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 24, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = NULL;
+  __pyx_t_9 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
+    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
+    if (likely(__pyx_t_8)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+      __Pyx_INCREF(__pyx_t_8);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
+      __Pyx_DECREF_SET(__pyx_t_6, function);
+      __pyx_t_9 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_5};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 24, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":25
+ *     allSplitedText = [PreProcessing.normalize_text(x.strip(), False) for x in PreProcessing.extract_sentences(text, detected) if x.strip()]
+ *     logging.debug(f"extracted sentences: {allSplitedText}")
+ *     if translate_to and detected != translate_to:             # <<<<<<<<<<<<<<
+ *         logging.debug(f"Translating text to {translate_to.value}")
+ *         translator = Translator(service_urls=[
+ */
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_translate_to); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 25, __pyx_L1_error)
+  if (__pyx_t_1) {
+  } else {
+    __pyx_t_2 = __pyx_t_1;
+    goto __pyx_L13_bool_binop_done;
+  }
+  __pyx_t_3 = PyObject_RichCompare(__pyx_v_detected, __pyx_v_translate_to, Py_NE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 25, __pyx_L1_error)
+  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 25, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_2 = __pyx_t_1;
+  __pyx_L13_bool_binop_done:;
+  if (__pyx_t_2) {
+
+    /* "wrapper/infra/LanguageDetector.pyx":26
+ *     logging.debug(f"extracted sentences: {allSplitedText}")
+ *     if translate_to and detected != translate_to:
+ *         logging.debug(f"Translating text to {translate_to.value}")             # <<<<<<<<<<<<<<
+ *         translator = Translator(service_urls=[
+ *             'translate.google.com',
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_logging); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_translate_to, __pyx_n_s_value); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_t_6, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Translating_text_to, __pyx_t_8); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 26, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __pyx_t_8 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
+      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
+      if (likely(__pyx_t_8)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+        __Pyx_INCREF(__pyx_t_8);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_5, function);
+        __pyx_t_9 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_6};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 26, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":27
+ *     if translate_to and detected != translate_to:
+ *         logging.debug(f"Translating text to {translate_to.value}")
+ *         translator = Translator(service_urls=[             # <<<<<<<<<<<<<<
+ *             'translate.google.com',
+ *             'translate.google.co.kr',
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Translator); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_5 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_6 = PyList_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_INCREF(__pyx_kp_u_translate_google_com);
+    __Pyx_GIVEREF(__pyx_kp_u_translate_google_com);
+    PyList_SET_ITEM(__pyx_t_6, 0, __pyx_kp_u_translate_google_com);
+    __Pyx_INCREF(__pyx_kp_u_translate_google_co_kr);
+    __Pyx_GIVEREF(__pyx_kp_u_translate_google_co_kr);
+    PyList_SET_ITEM(__pyx_t_6, 1, __pyx_kp_u_translate_google_co_kr);
+    if (PyDict_SetItem(__pyx_t_5, __pyx_n_s_service_urls, __pyx_t_6) < 0) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_empty_tuple, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 27, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_6);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_v_translator = __pyx_t_6;
+    __pyx_t_6 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":31
+ *             'translate.google.co.kr',
+ *         ])
+ *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *             if slited:
+ *                 try:
+ */
+    __pyx_t_6 = __pyx_v_allSplitedText; __Pyx_INCREF(__pyx_t_6); __pyx_t_10 = 0;
+    for (;;) {
+      if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_6)) break;
+      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+      __pyx_t_5 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_10); __Pyx_INCREF(__pyx_t_5); __pyx_t_10++; if (unlikely((0 < 0))) __PYX_ERR(0, 31, __pyx_L1_error)
+      #else
+      __pyx_t_5 = PySequence_ITEM(__pyx_t_6, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 31, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      #endif
+      __Pyx_XDECREF_SET(__pyx_v_slited, __pyx_t_5);
+      __pyx_t_5 = 0;
+
+      /* "wrapper/infra/LanguageDetector.pyx":32
+ *         ])
+ *         for slited in allSplitedText:
+ *             if slited:             # <<<<<<<<<<<<<<
+ *                 try:
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ */
+      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_slited); if (unlikely((__pyx_t_2 < 0))) __PYX_ERR(0, 32, __pyx_L1_error)
+      if (__pyx_t_2) {
+
+        /* "wrapper/infra/LanguageDetector.pyx":33
+ *         for slited in allSplitedText:
+ *             if slited:
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ *                 except:
+ */
+        {
+          __Pyx_PyThreadState_declare
+          __Pyx_PyThreadState_assign
+          __Pyx_ExceptionSave(&__pyx_t_13, &__pyx_t_14, &__pyx_t_15);
+          __Pyx_XGOTREF(__pyx_t_13);
+          __Pyx_XGOTREF(__pyx_t_14);
+          __Pyx_XGOTREF(__pyx_t_15);
+          /*try:*/ {
+
+            /* "wrapper/infra/LanguageDetector.pyx":34
+ *             if slited:
+ *                 try:
+ *                     t = translator.translate(slited, dest=translate_to.value)             # <<<<<<<<<<<<<<
+ *                 except:
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")
+ */
+            __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_translator, __pyx_n_s_translate); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_GOTREF(__pyx_t_5);
+            __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_GOTREF(__pyx_t_3);
+            __Pyx_INCREF(__pyx_v_slited);
+            __Pyx_GIVEREF(__pyx_v_slited);
+            PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_slited);
+            __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_GOTREF(__pyx_t_8);
+            __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_translate_to, __pyx_n_s_value); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_GOTREF(__pyx_t_7);
+            if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_dest, __pyx_t_7) < 0) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+            __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_3, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 34, __pyx_L18_error)
+            __Pyx_GOTREF(__pyx_t_7);
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+            __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+            __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+            __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_7);
+            __pyx_t_7 = 0;
+
+            /* "wrapper/infra/LanguageDetector.pyx":33
+ *         for slited in allSplitedText:
+ *             if slited:
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ *                 except:
+ */
+          }
+          __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
+          __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
+          __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
+          goto __pyx_L25_try_end;
+          __pyx_L18_error:;
+          __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+          /* "wrapper/infra/LanguageDetector.pyx":35
+ *                 try:
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ *                 except:             # <<<<<<<<<<<<<<
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")
+ */
+          /*except:*/ {
+            __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+            if (__Pyx_GetException(&__pyx_t_7, &__pyx_t_8, &__pyx_t_3) < 0) __PYX_ERR(0, 35, __pyx_L20_except_error)
+            __Pyx_XGOTREF(__pyx_t_7);
+            __Pyx_XGOTREF(__pyx_t_8);
+            __Pyx_XGOTREF(__pyx_t_3);
+
+            /* "wrapper/infra/LanguageDetector.pyx":36
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ *                 except:
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")             # <<<<<<<<<<<<<<
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")
+ *                 if not t or not t.text:
+ */
+            __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_logging); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_4);
+            __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_error); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_12);
+            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+            __pyx_t_4 = PyTuple_New(4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_4);
+            __pyx_t_16 = 0;
+            __pyx_t_17 = 127;
+            __Pyx_INCREF(__pyx_kp_u_Error_to_translate);
+            __pyx_t_16 += 19;
+            __Pyx_GIVEREF(__pyx_kp_u_Error_to_translate);
+            PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_kp_u_Error_to_translate);
+            __pyx_t_18 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_18);
+            __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_18) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_18) : __pyx_t_17;
+            __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_18);
+            __Pyx_GIVEREF(__pyx_t_18);
+            PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_18);
+            __pyx_t_18 = 0;
+            __Pyx_INCREF(__pyx_kp_u_to);
+            __pyx_t_16 += 4;
+            __Pyx_GIVEREF(__pyx_kp_u_to);
+            PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_kp_u_to);
+            __pyx_t_18 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_18);
+            __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_18) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_18) : __pyx_t_17;
+            __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_18);
+            __Pyx_GIVEREF(__pyx_t_18);
+            PyTuple_SET_ITEM(__pyx_t_4, 3, __pyx_t_18);
+            __pyx_t_18 = 0;
+            __pyx_t_18 = __Pyx_PyUnicode_Join(__pyx_t_4, 4, __pyx_t_16, __pyx_t_17); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_18);
+            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
+            __pyx_t_4 = NULL;
+            __pyx_t_9 = 0;
+            if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
+              __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_12);
+              if (likely(__pyx_t_4)) {
+                PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
+                __Pyx_INCREF(__pyx_t_4);
+                __Pyx_INCREF(function);
+                __Pyx_DECREF_SET(__pyx_t_12, function);
+                __pyx_t_9 = 1;
+              }
+            }
+            {
+              PyObject *__pyx_callargs[2] = {__pyx_t_4, __pyx_t_18};
+              __pyx_t_5 = __Pyx_PyObject_FastCall(__pyx_t_12, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+              __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+              __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
+              if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 36, __pyx_L20_except_error)
+              __Pyx_GOTREF(__pyx_t_5);
+              __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+            }
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+            /* "wrapper/infra/LanguageDetector.pyx":37
+ *                 except:
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")             # <<<<<<<<<<<<<<
+ *                 if not t or not t.text:
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')
+ */
+            __pyx_t_5 = PyTuple_New(4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 37, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_5);
+            __pyx_t_16 = 0;
+            __pyx_t_17 = 127;
+            __Pyx_INCREF(__pyx_kp_u_Error_to_translate);
+            __pyx_t_16 += 19;
+            __Pyx_GIVEREF(__pyx_kp_u_Error_to_translate);
+            PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_u_Error_to_translate);
+            __pyx_t_12 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 37, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_12);
+            __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_12) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_12) : __pyx_t_17;
+            __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_12);
+            __Pyx_GIVEREF(__pyx_t_12);
+            PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_12);
+            __pyx_t_12 = 0;
+            __Pyx_INCREF(__pyx_kp_u_to);
+            __pyx_t_16 += 4;
+            __Pyx_GIVEREF(__pyx_kp_u_to);
+            PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_kp_u_to);
+            __pyx_t_12 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 37, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_12);
+            __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_12) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_12) : __pyx_t_17;
+            __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_12);
+            __Pyx_GIVEREF(__pyx_t_12);
+            PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_12);
+            __pyx_t_12 = 0;
+            __pyx_t_12 = __Pyx_PyUnicode_Join(__pyx_t_5, 4, __pyx_t_16, __pyx_t_17); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 37, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_12);
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+            __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_12); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 37, __pyx_L20_except_error)
+            __Pyx_GOTREF(__pyx_t_5);
+            __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
+            __Pyx_Raise(__pyx_t_5, 0, 0, 0);
+            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+            __PYX_ERR(0, 37, __pyx_L20_except_error)
+          }
+
+          /* "wrapper/infra/LanguageDetector.pyx":33
+ *         for slited in allSplitedText:
+ *             if slited:
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ *                 except:
+ */
+          __pyx_L20_except_error:;
+          __Pyx_XGIVEREF(__pyx_t_13);
+          __Pyx_XGIVEREF(__pyx_t_14);
+          __Pyx_XGIVEREF(__pyx_t_15);
+          __Pyx_ExceptionReset(__pyx_t_13, __pyx_t_14, __pyx_t_15);
+          goto __pyx_L1_error;
+          __pyx_L25_try_end:;
+        }
+
+        /* "wrapper/infra/LanguageDetector.pyx":38
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")
+ *                 if not t or not t.text:             # <<<<<<<<<<<<<<
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')
+ *                 translated_sentences.append(t.text)
+ */
+        __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_t); if (unlikely((__pyx_t_1 < 0))) __PYX_ERR(0, 38, __pyx_L1_error)
+        __pyx_t_19 = (!__pyx_t_1);
+        if (!__pyx_t_19) {
+        } else {
+          __pyx_t_2 = __pyx_t_19;
+          goto __pyx_L29_bool_binop_done;
+        }
+        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 38, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __pyx_t_19 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely((__pyx_t_19 < 0))) __PYX_ERR(0, 38, __pyx_L1_error)
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+        __pyx_t_1 = (!__pyx_t_19);
+        __pyx_t_2 = __pyx_t_1;
+        __pyx_L29_bool_binop_done:;
+        if (unlikely(__pyx_t_2)) {
+
+          /* "wrapper/infra/LanguageDetector.pyx":39
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")
+ *                 if not t or not t.text:
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')             # <<<<<<<<<<<<<<
+ *                 translated_sentences.append(t.text)
+ *         logging.info(f'Detected Text Language {detected}. Will be translated to {translate_to}')
+ */
+          __pyx_t_3 = PyTuple_New(5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 39, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_16 = 0;
+          __pyx_t_17 = 127;
+          __Pyx_INCREF(__pyx_kp_u_Translate);
+          __pyx_t_16 += 10;
+          __Pyx_GIVEREF(__pyx_kp_u_Translate);
+          PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Translate);
+          __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 39, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_17;
+          __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+          __Pyx_GIVEREF(__pyx_t_8);
+          PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_8);
+          __pyx_t_8 = 0;
+          __Pyx_INCREF(__pyx_kp_u_to);
+          __pyx_t_16 += 4;
+          __Pyx_GIVEREF(__pyx_kp_u_to);
+          PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_to);
+          __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 39, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_17;
+          __pyx_t_16 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+          __Pyx_GIVEREF(__pyx_t_8);
+          PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_8);
+          __pyx_t_8 = 0;
+          __Pyx_INCREF(__pyx_kp_u_error_2);
+          __pyx_t_16 += 6;
+          __Pyx_GIVEREF(__pyx_kp_u_error_2);
+          PyTuple_SET_ITEM(__pyx_t_3, 4, __pyx_kp_u_error_2);
+          __pyx_t_8 = __Pyx_PyUnicode_Join(__pyx_t_3, 5, __pyx_t_16, __pyx_t_17); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 39, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 39, __pyx_L1_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+          __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __PYX_ERR(0, 39, __pyx_L1_error)
+
+          /* "wrapper/infra/LanguageDetector.pyx":38
+ *                     logging.error(f"Error to translate {slited} to {translate_to}")
+ *                     raise Exception(f"Error to translate {slited} to {translate_to}")
+ *                 if not t or not t.text:             # <<<<<<<<<<<<<<
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')
+ *                 translated_sentences.append(t.text)
+ */
+        }
+
+        /* "wrapper/infra/LanguageDetector.pyx":40
+ *                 if not t or not t.text:
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')
+ *                 translated_sentences.append(t.text)             # <<<<<<<<<<<<<<
+ *         logging.info(f'Detected Text Language {detected}. Will be translated to {translate_to}')
+ *     else:
+ */
+        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 40, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_3);
+        __pyx_t_20 = __Pyx_PyList_Append(__pyx_v_translated_sentences, __pyx_t_3); if (unlikely(__pyx_t_20 == ((int)-1))) __PYX_ERR(0, 40, __pyx_L1_error)
+        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+        /* "wrapper/infra/LanguageDetector.pyx":32
+ *         ])
+ *         for slited in allSplitedText:
+ *             if slited:             # <<<<<<<<<<<<<<
+ *                 try:
+ *                     t = translator.translate(slited, dest=translate_to.value)
+ */
+      }
+
+      /* "wrapper/infra/LanguageDetector.pyx":31
+ *             'translate.google.co.kr',
+ *         ])
+ *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *             if slited:
+ *                 try:
+ */
+    }
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":41
+ *                     raise Exception(f'Translate {slited} to {translate_to} error')
+ *                 translated_sentences.append(t.text)
+ *         logging.info(f'Detected Text Language {detected}. Will be translated to {translate_to}')             # <<<<<<<<<<<<<<
+ *     else:
+ *         translated_sentences = allSplitedText
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_logging); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_info); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = PyTuple_New(4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_10 = 0;
+    __pyx_t_17 = 127;
+    __Pyx_INCREF(__pyx_kp_u_Detected_Text_Language);
+    __pyx_t_10 += 23;
+    __Pyx_GIVEREF(__pyx_kp_u_Detected_Text_Language);
+    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Detected_Text_Language);
+    __pyx_t_7 = __Pyx_PyObject_FormatSimple(__pyx_v_detected, __pyx_empty_unicode); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) : __pyx_t_17;
+    __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_7);
+    __Pyx_GIVEREF(__pyx_t_7);
+    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_7);
+    __pyx_t_7 = 0;
+    __Pyx_INCREF(__pyx_kp_u_Will_be_translated_to);
+    __pyx_t_10 += 24;
+    __Pyx_GIVEREF(__pyx_kp_u_Will_be_translated_to);
+    PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_Will_be_translated_to);
+    __pyx_t_7 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __pyx_t_17 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) > __pyx_t_17) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_7) : __pyx_t_17;
+    __pyx_t_10 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_7);
+    __Pyx_GIVEREF(__pyx_t_7);
+    PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_7);
+    __pyx_t_7 = 0;
+    __pyx_t_7 = __Pyx_PyUnicode_Join(__pyx_t_3, 4, __pyx_t_10, __pyx_t_17); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 41, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = NULL;
+    __pyx_t_9 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
+      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_8);
+      if (likely(__pyx_t_3)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+        __Pyx_INCREF(__pyx_t_3);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __pyx_t_9 = 1;
+      }
     }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_3, __pyx_t_7};
+      __pyx_t_6 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
+      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 41, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":25
+ *     allSplitedText = [PreProcessing.normalize_text(x.strip(), False) for x in PreProcessing.extract_sentences(text, detected) if x.strip()]
+ *     logging.debug(f"extracted sentences: {allSplitedText}")
+ *     if translate_to and detected != translate_to:             # <<<<<<<<<<<<<<
+ *         logging.debug(f"Translating text to {translate_to.value}")
+ *         translator = Translator(service_urls=[
+ */
+    goto __pyx_L12;
   }
+
+  /* "wrapper/infra/LanguageDetector.pyx":43
+ *         logging.info(f'Detected Text Language {detected}. Will be translated to {translate_to}')
+ *     else:
+ *         translated_sentences = allSplitedText             # <<<<<<<<<<<<<<
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)
+ */
+  /*else*/ {
+    __Pyx_INCREF(__pyx_v_allSplitedText);
+    __Pyx_DECREF_SET(__pyx_v_translated_sentences, __pyx_v_allSplitedText);
+  }
+  __pyx_L12:;
+
+  /* "wrapper/infra/LanguageDetector.pyx":44
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ */
   {
-    PyObject *__pyx_callargs[1] = {__pyx_t_3, };
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    __Pyx_ExceptionSave(&__pyx_t_15, &__pyx_t_14, &__pyx_t_13);
+    __Pyx_XGOTREF(__pyx_t_15);
+    __Pyx_XGOTREF(__pyx_t_14);
+    __Pyx_XGOTREF(__pyx_t_13);
+    /*try:*/ {
+
+      /* "wrapper/infra/LanguageDetector.pyx":45
+ *         translated_sentences = allSplitedText
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)             # <<<<<<<<<<<<<<
+ *     except:
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ */
+      __pyx_t_6 = PyUnicode_Join(__pyx_kp_u_, __pyx_v_translated_sentences); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 45, __pyx_L32_error)
+      __Pyx_GOTREF(__pyx_t_6);
+      __pyx_v_translated_text = ((PyObject*)__pyx_t_6);
+      __pyx_t_6 = 0;
+
+      /* "wrapper/infra/LanguageDetector.pyx":44
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ */
+    }
+    __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
+    __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
+    __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
+    goto __pyx_L37_try_end;
+    __pyx_L32_error:;
+    __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+    __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
     __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 10, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
+    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
+    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":46
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:             # <<<<<<<<<<<<<<
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ * 
+ */
+    /*except:*/ {
+      __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      if (__Pyx_GetException(&__pyx_t_6, &__pyx_t_8, &__pyx_t_7) < 0) __PYX_ERR(0, 46, __pyx_L34_except_error)
+      __Pyx_XGOTREF(__pyx_t_6);
+      __Pyx_XGOTREF(__pyx_t_8);
+      __Pyx_XGOTREF(__pyx_t_7);
+
+      /* "wrapper/infra/LanguageDetector.pyx":47
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')             # <<<<<<<<<<<<<<
+ * 
+ *     logging.debug(f'Translated text: \n {translated_text}')
+ */
+      __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_translated_sentences, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 47, __pyx_L34_except_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Error_to_concatenate_text, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 47, __pyx_L34_except_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 47, __pyx_L34_except_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __PYX_ERR(0, 47, __pyx_L34_except_error)
+    }
+
+    /* "wrapper/infra/LanguageDetector.pyx":44
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ */
+    __pyx_L34_except_error:;
+    __Pyx_XGIVEREF(__pyx_t_15);
+    __Pyx_XGIVEREF(__pyx_t_14);
+    __Pyx_XGIVEREF(__pyx_t_13);
+    __Pyx_ExceptionReset(__pyx_t_15, __pyx_t_14, __pyx_t_13);
+    goto __pyx_L1_error;
+    __pyx_L37_try_end:;
   }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":11
- * def start():
- *     load()
- *     dcsearch = DocumentSearch(dir)             # <<<<<<<<<<<<<<
- *     for file in files:
- *         try:
+  /* "wrapper/infra/LanguageDetector.pyx":49
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ * 
+ *     logging.debug(f'Translated text: \n {translated_text}')             # <<<<<<<<<<<<<<
+ * 
+ *     return detected, translated_text, translated_sentences
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_DocumentSearch); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 11, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_dir); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 11, __pyx_L1_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_logging); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_debug); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_6);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = __Pyx_PyUnicode_Unicode(__pyx_v_translated_text); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 49, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_3 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Translated_text, __pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 49, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __pyx_t_5 = NULL;
-  __pyx_t_4 = 0;
-  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
-    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
-    if (likely(__pyx_t_5)) {
-      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
-      __Pyx_INCREF(__pyx_t_5);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = NULL;
+  __pyx_t_9 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
+    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
+    if (likely(__pyx_t_8)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
+      __Pyx_INCREF(__pyx_t_8);
       __Pyx_INCREF(function);
-      __Pyx_DECREF_SET(__pyx_t_2, function);
-      __pyx_t_4 = 1;
+      __Pyx_DECREF_SET(__pyx_t_6, function);
+      __pyx_t_9 = 1;
     }
   }
   {
-    PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_3};
-    __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_3};
+    __pyx_t_7 = __Pyx_PyObject_FastCall(__pyx_t_6, __pyx_callargs+1-__pyx_t_9, 1+__pyx_t_9);
+    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
     __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 11, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_7);
+    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
   }
-  __pyx_v_dcsearch = __pyx_t_1;
-  __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":12
- *     load()
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:             # <<<<<<<<<<<<<<
- *         try:
- *             print('Processing image')
+  /* "wrapper/infra/LanguageDetector.pyx":51
+ *     logging.debug(f'Translated text: \n {translated_text}')
+ * 
+ *     return detected, translated_text, translated_sentences             # <<<<<<<<<<<<<<
+ * 
+ * 
  */
-  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_files); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_1);
-  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
-    __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
-    __pyx_t_7 = NULL;
-  } else {
-    __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 12, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 12, __pyx_L1_error)
-  }
-  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-  for (;;) {
-    if (likely(!__pyx_t_7)) {
-      if (likely(PyList_CheckExact(__pyx_t_2))) {
-        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 12, __pyx_L1_error)
-        #else
-        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        #endif
-      } else {
-        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
-        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 12, __pyx_L1_error)
-        #else
-        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 12, __pyx_L1_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        #endif
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_7 = PyTuple_New(3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 51, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_7);
+  __Pyx_INCREF(__pyx_v_detected);
+  __Pyx_GIVEREF(__pyx_v_detected);
+  PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_detected);
+  __Pyx_INCREF(__pyx_v_translated_text);
+  __Pyx_GIVEREF(__pyx_v_translated_text);
+  PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_translated_text);
+  __Pyx_INCREF(__pyx_v_translated_sentences);
+  __Pyx_GIVEREF(__pyx_v_translated_sentences);
+  PyTuple_SET_ITEM(__pyx_t_7, 2, __pyx_v_translated_sentences);
+  __pyx_r = __pyx_t_7;
+  __pyx_t_7 = 0;
+  goto __pyx_L0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":10
+ * from .DocLanguage import DocLanguage
+ * 
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):             # <<<<<<<<<<<<<<
+ *     detected = original_language
+ *     if not original_language:
+ */
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_3);
+  __Pyx_XDECREF(__pyx_t_4);
+  __Pyx_XDECREF(__pyx_t_5);
+  __Pyx_XDECREF(__pyx_t_6);
+  __Pyx_XDECREF(__pyx_t_7);
+  __Pyx_XDECREF(__pyx_t_8);
+  __Pyx_XDECREF(__pyx_t_12);
+  __Pyx_XDECREF(__pyx_t_18);
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XDECREF(__pyx_v_detected);
+  __Pyx_XDECREF(__pyx_v_languages);
+  __Pyx_XDECREF(__pyx_v_detector);
+  __Pyx_XDECREF(__pyx_v_language);
+  __Pyx_XDECREF(__pyx_v_translated_sentences);
+  __Pyx_XDECREF(__pyx_v_allSplitedText);
+  __Pyx_XDECREF(__pyx_v_translator);
+  __Pyx_XDECREF(__pyx_v_slited);
+  __Pyx_XDECREF(__pyx_v_t);
+  __Pyx_XDECREF(__pyx_v_translated_text);
+  __Pyx_XDECREF(__pyx_7genexpr__pyx_v_x);
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/LanguageDetector.pyx":54
+ * 
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):             # <<<<<<<<<<<<<<
+ *     translator = Translator(service_urls=[
+ *       'translate.google.com',
+ */
+
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_3detect_lang_by_google_translate(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+PyDoc_STRVAR(__pyx_doc_7wrapper_5infra_16LanguageDetector_2detect_lang_by_google_translate, "detect_lang_by_google_translate(text, translate_to=None)");
+static PyMethodDef __pyx_mdef_7wrapper_5infra_16LanguageDetector_3detect_lang_by_google_translate = {"detect_lang_by_google_translate", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_16LanguageDetector_3detect_lang_by_google_translate, __Pyx_METH_FASTCALL|METH_KEYWORDS, __pyx_doc_7wrapper_5infra_16LanguageDetector_2detect_lang_by_google_translate};
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_3detect_lang_by_google_translate(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_text = 0;
+  PyObject *__pyx_v_translate_to = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("detect_lang_by_google_translate (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text,&__pyx_n_s_translate_to,0};
+    PyObject* values[2] = {0,0};
+    values[1] = ((PyObject *)((PyObject *)Py_None));
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
       }
-    } else {
-      __pyx_t_1 = __pyx_t_7(__pyx_t_2);
-      if (unlikely(!__pyx_t_1)) {
-        PyObject* exc_type = PyErr_Occurred();
-        if (exc_type) {
-          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
-          else __PYX_ERR(0, 12, __pyx_L1_error)
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_text)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 54, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+        CYTHON_FALLTHROUGH;
+        case  1:
+        if (kw_args > 0) {
+          PyObject* value = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_translate_to);
+          if (value) { values[1] = value; kw_args--; }
+          else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 54, __pyx_L3_error)
         }
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "detect_lang_by_google_translate") < 0)) __PYX_ERR(0, 54, __pyx_L3_error)
+      }
+    } else {
+      switch (__pyx_nargs) {
+        case  2: values[1] = __Pyx_Arg_FASTCALL(__pyx_args, 1);
+        CYTHON_FALLTHROUGH;
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
         break;
+        default: goto __pyx_L5_argtuple_error;
       }
-      __Pyx_GOTREF(__pyx_t_1);
     }
-    __Pyx_XDECREF_SET(__pyx_v_file, __pyx_t_1);
-    __pyx_t_1 = 0;
+    __pyx_v_text = values[0];
+    __pyx_v_translate_to = values[1];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("detect_lang_by_google_translate", 0, 1, 2, __pyx_nargs); __PYX_ERR(0, 54, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_pf_7wrapper_5infra_16LanguageDetector_2detect_lang_by_google_translate(__pyx_self, __pyx_v_text, __pyx_v_translate_to);
 
-    /* "tests/ProcessPDFImageTest.pyx":13
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:
- *         try:             # <<<<<<<<<<<<<<
- *             print('Processing image')
- *             doc:File = None
- */
-    {
-      __Pyx_PyThreadState_declare
-      __Pyx_PyThreadState_assign
-      __Pyx_ExceptionSave(&__pyx_t_8, &__pyx_t_9, &__pyx_t_10);
-      __Pyx_XGOTREF(__pyx_t_8);
-      __Pyx_XGOTREF(__pyx_t_9);
-      __Pyx_XGOTREF(__pyx_t_10);
-      /*try:*/ {
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
 
-        /* "tests/ProcessPDFImageTest.pyx":14
- *     for file in files:
- *         try:
- *             print('Processing image')             # <<<<<<<<<<<<<<
- *             doc:File = None
- *             doc = run(dir, file)
+/* "wrapper/infra/LanguageDetector.pyx":111
+ *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+ * 
+ *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]             # <<<<<<<<<<<<<<
+ * 
+ *     if len(detected[1]) / len(splitedText) <= 0.5:
  */
-        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple_, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":15
- *         try:
- *             print('Processing image')
- *             doc:File = None             # <<<<<<<<<<<<<<
- *             doc = run(dir, file)
- *             print("text")
+/* Python wrapper */
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_31detect_lang_by_google_translate_lambda(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+); /*proto*/
+static PyMethodDef __pyx_mdef_7wrapper_5infra_16LanguageDetector_31detect_lang_by_google_translate_lambda = {"lambda", (PyCFunction)(void*)(__Pyx_PyCFunction_FastCallWithKeywords)__pyx_pw_7wrapper_5infra_16LanguageDetector_31detect_lang_by_google_translate_lambda, __Pyx_METH_FASTCALL|METH_KEYWORDS, 0};
+static PyObject *__pyx_pw_7wrapper_5infra_16LanguageDetector_31detect_lang_by_google_translate_lambda(PyObject *__pyx_self, 
+#if CYTHON_METH_FASTCALL
+PyObject *const *__pyx_args, Py_ssize_t __pyx_nargs, PyObject *__pyx_kwds
+#else
+PyObject *__pyx_args, PyObject *__pyx_kwds
+#endif
+) {
+  PyObject *__pyx_v_x = 0;
+  #if !CYTHON_METH_FASTCALL
+  CYTHON_UNUSED const Py_ssize_t __pyx_nargs = PyTuple_GET_SIZE(__pyx_args);
+  #endif
+  CYTHON_UNUSED PyObject *const *__pyx_kwvalues = __Pyx_KwValues_FASTCALL(__pyx_args, __pyx_nargs);
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  PyObject *__pyx_r = 0;
+  __Pyx_RefNannyDeclarations
+  __Pyx_RefNannySetupContext("lambda (wrapper)", 0);
+  {
+    PyObject **__pyx_pyargnames[] = {&__pyx_n_s_x,0};
+    PyObject* values[1] = {0};
+    if (__pyx_kwds) {
+      Py_ssize_t kw_args;
+      switch (__pyx_nargs) {
+        case  1: values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+        CYTHON_FALLTHROUGH;
+        case  0: break;
+        default: goto __pyx_L5_argtuple_error;
+      }
+      kw_args = __Pyx_NumKwargs_FASTCALL(__pyx_kwds);
+      switch (__pyx_nargs) {
+        case  0:
+        if (likely((values[0] = __Pyx_GetKwValue_FASTCALL(__pyx_kwds, __pyx_kwvalues, __pyx_n_s_x)) != 0)) kw_args--;
+        else if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 111, __pyx_L3_error)
+        else goto __pyx_L5_argtuple_error;
+      }
+      if (unlikely(kw_args > 0)) {
+        const Py_ssize_t kwd_pos_args = __pyx_nargs;
+        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_kwvalues, __pyx_pyargnames, 0, values + 0, kwd_pos_args, "lambda") < 0)) __PYX_ERR(0, 111, __pyx_L3_error)
+      }
+    } else if (unlikely(__pyx_nargs != 1)) {
+      goto __pyx_L5_argtuple_error;
+    } else {
+      values[0] = __Pyx_Arg_FASTCALL(__pyx_args, 0);
+    }
+    __pyx_v_x = values[0];
+  }
+  goto __pyx_L4_argument_unpacking_done;
+  __pyx_L5_argtuple_error:;
+  __Pyx_RaiseArgtupleInvalid("lambda", 1, 1, 1, __pyx_nargs); __PYX_ERR(0, 111, __pyx_L3_error)
+  __pyx_L3_error:;
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_RefNannyFinishContext();
+  return NULL;
+  __pyx_L4_argument_unpacking_done:;
+  __pyx_r = __pyx_lambda_funcdef_lambda(__pyx_self, __pyx_v_x);
+
+  /* function exit code */
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x) {
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  Py_ssize_t __pyx_t_2;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("lambda", 0);
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_x, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_r = __pyx_t_1;
+  __pyx_t_1 = 0;
+  goto __pyx_L0;
+
+  /* function exit code */
+  __pyx_L1_error:;
+  __Pyx_XDECREF(__pyx_t_1);
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __pyx_r = NULL;
+  __pyx_L0:;
+  __Pyx_XGIVEREF(__pyx_r);
+  __Pyx_RefNannyFinishContext();
+  return __pyx_r;
+}
+
+/* "wrapper/infra/LanguageDetector.pyx":54
+ * 
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):             # <<<<<<<<<<<<<<
+ *     translator = Translator(service_urls=[
+ *       'translate.google.com',
+ */
+
+static PyObject *__pyx_pf_7wrapper_5infra_16LanguageDetector_2detect_lang_by_google_translate(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text, PyObject *__pyx_v_translate_to) {
+  PyObject *__pyx_v_translator = NULL;
+  PyObject *__pyx_v_norm_text = NULL;
+  PyObject *__pyx_v_sentences = NULL;
+  PyObject *__pyx_v_splitedText = NULL;
+  CYTHON_UNUSED long __pyx_v_total_tokens;
+  PyObject *__pyx_v_x = NULL;
+  PyObject *__pyx_v_arr = NULL;
+  PyObject *__pyx_v_detecteds_sentences = NULL;
+  PyObject *__pyx_v_allSplitedText = NULL;
+  PyObject *__pyx_v_tokens = NULL;
+  long __pyx_v_maxCheckedTokens;
+  PyObject *__pyx_v_slited = NULL;
+  PyObject *__pyx_v_retry = NULL;
+  PyObject *__pyx_v_det = NULL;
+  PyObject *__pyx_v_lang = NULL;
+  PyObject *__pyx_v_detected = NULL;
+  PyObject *__pyx_v_translated_sentences = NULL;
+  PyObject *__pyx_v_t = NULL;
+  PyObject *__pyx_v_translated_text = NULL;
+  PyObject *__pyx_8genexpr1__pyx_v_x = NULL;
+  PyObject *__pyx_r = NULL;
+  __Pyx_RefNannyDeclarations
+  PyObject *__pyx_t_1 = NULL;
+  PyObject *__pyx_t_2 = NULL;
+  PyObject *__pyx_t_3 = NULL;
+  int __pyx_t_4;
+  PyObject *__pyx_t_5 = NULL;
+  Py_ssize_t __pyx_t_6;
+  PyObject *(*__pyx_t_7)(PyObject *);
+  PyObject *__pyx_t_8 = NULL;
+  int __pyx_t_9;
+  int __pyx_t_10;
+  PyObject *__pyx_t_11 = NULL;
+  PyObject *__pyx_t_12 = NULL;
+  PyObject *__pyx_t_13 = NULL;
+  PyObject *__pyx_t_14 = NULL;
+  PyObject *__pyx_t_15 = NULL;
+  PyObject *__pyx_t_16 = NULL;
+  Py_ssize_t __pyx_t_17;
+  Py_UCS4 __pyx_t_18;
+  PyObject *__pyx_t_19 = NULL;
+  PyObject *__pyx_t_20 = NULL;
+  PyObject *__pyx_t_21 = NULL;
+  PyObject *__pyx_t_22 = NULL;
+  int __pyx_t_23;
+  int __pyx_t_24;
+  int __pyx_lineno = 0;
+  const char *__pyx_filename = NULL;
+  int __pyx_clineno = 0;
+  __Pyx_RefNannySetupContext("detect_lang_by_google_translate", 0);
+
+  /* "wrapper/infra/LanguageDetector.pyx":55
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):
+ *     translator = Translator(service_urls=[             # <<<<<<<<<<<<<<
+ *       'translate.google.com',
+ *       'translate.google.co.kr',
  */
-        __Pyx_INCREF(Py_None);
-        __Pyx_XDECREF_SET(__pyx_v_doc, Py_None);
+  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Translator); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 55, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 55, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_3 = PyList_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 55, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_kp_u_translate_google_com);
+  __Pyx_GIVEREF(__pyx_kp_u_translate_google_com);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_translate_google_com);
+  __Pyx_INCREF(__pyx_kp_u_translate_google_co_kr);
+  __Pyx_GIVEREF(__pyx_kp_u_translate_google_co_kr);
+  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_kp_u_translate_google_co_kr);
+  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_service_urls, __pyx_t_3) < 0) __PYX_ERR(0, 55, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 55, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_v_translator = __pyx_t_3;
+  __pyx_t_3 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":16
- *             print('Processing image')
- *             doc:File = None
- *             doc = run(dir, file)             # <<<<<<<<<<<<<<
- *             print("text")
- *             print(doc.text)
+  /* "wrapper/infra/LanguageDetector.pyx":60
+ *     ])
+ *     # norm_text = normalize_text(text)
+ *     norm_text = PreProcessing.normalize_text(text, False)             # <<<<<<<<<<<<<<
+ *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ *     splitedText = []
  */
-        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_run); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 16, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_dir); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 16, __pyx_L5_error)
+  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_normalize_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 60, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_1);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
+    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
+    if (likely(__pyx_t_2)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+      __Pyx_INCREF(__pyx_t_2);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_1, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[3] = {__pyx_t_2, __pyx_v_text, Py_False};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 60, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  }
+  __pyx_v_norm_text = __pyx_t_3;
+  __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":61
+ *     # norm_text = normalize_text(text)
+ *     norm_text = PreProcessing.normalize_text(text, False)
+ *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]             # <<<<<<<<<<<<<<
+ *     splitedText = []
+ *     total_tokens=0
+ */
+  { /* enter inner scope */
+    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 61, __pyx_L5_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_norm_text, __pyx_n_s_split); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L5_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_5 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
+        __pyx_t_4 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u__2};
+      __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 61, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    }
+    if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
+      __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
+      __pyx_t_7 = NULL;
+    } else {
+      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 61, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_t_7 = __Pyx_PyObject_GetIterNextFunc(__pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 61, __pyx_L5_error)
+    }
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    for (;;) {
+      if (likely(!__pyx_t_7)) {
+        if (likely(PyList_CheckExact(__pyx_t_2))) {
+          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 61, __pyx_L5_error)
+          #else
+          __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 61, __pyx_L5_error)
+          __Pyx_GOTREF(__pyx_t_1);
+          #endif
+        } else {
+          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
+          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+          __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 61, __pyx_L5_error)
+          #else
+          __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 61, __pyx_L5_error)
+          __Pyx_GOTREF(__pyx_t_1);
+          #endif
+        }
+      } else {
+        __pyx_t_1 = __pyx_t_7(__pyx_t_2);
+        if (unlikely(!__pyx_t_1)) {
+          PyObject* exc_type = PyErr_Occurred();
+          if (exc_type) {
+            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
+            else __PYX_ERR(0, 61, __pyx_L5_error)
+          }
+          break;
+        }
+        __Pyx_GOTREF(__pyx_t_1);
+      }
+      __Pyx_XDECREF_SET(__pyx_8genexpr1__pyx_v_x, __pyx_t_1);
+      __pyx_t_1 = 0;
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_8genexpr1__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 61, __pyx_L5_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_8 = NULL;
+      __pyx_t_4 = 0;
+      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
+        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
+        if (likely(__pyx_t_8)) {
+          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+          __Pyx_INCREF(__pyx_t_8);
+          __Pyx_INCREF(function);
+          __Pyx_DECREF_SET(__pyx_t_5, function);
+          __pyx_t_4 = 1;
+        }
+      }
+      {
+        PyObject *__pyx_callargs[1] = {__pyx_t_8, };
+        __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 61, __pyx_L5_error)
+        __Pyx_GOTREF(__pyx_t_1);
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      }
+      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 61, __pyx_L5_error)
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      if (__pyx_t_9) {
+        __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_8genexpr1__pyx_v_x, __pyx_n_s_strip); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 61, __pyx_L5_error)
         __Pyx_GOTREF(__pyx_t_5);
-        __pyx_t_11 = NULL;
+        __pyx_t_8 = NULL;
         __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
-          __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_3);
-          if (likely(__pyx_t_11)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
-            __Pyx_INCREF(__pyx_t_11);
+        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
+          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
+          if (likely(__pyx_t_8)) {
+            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+            __Pyx_INCREF(__pyx_t_8);
             __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_3, function);
+            __Pyx_DECREF_SET(__pyx_t_5, function);
             __pyx_t_4 = 1;
           }
         }
         {
-          PyObject *__pyx_callargs[3] = {__pyx_t_11, __pyx_t_5, __pyx_v_file};
-          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_3, __pyx_callargs+1-__pyx_t_4, 2+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
-          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
-          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 16, __pyx_L5_error)
+          PyObject *__pyx_callargs[1] = {__pyx_t_8, };
+          __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 61, __pyx_L5_error)
           __Pyx_GOTREF(__pyx_t_1);
-          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
         }
-        __Pyx_DECREF_SET(__pyx_v_doc, __pyx_t_1);
-        __pyx_t_1 = 0;
+        if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_1))) __PYX_ERR(0, 61, __pyx_L5_error)
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      }
+    }
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_x); __pyx_8genexpr1__pyx_v_x = 0;
+    goto __pyx_L10_exit_scope;
+    __pyx_L5_error:;
+    __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_x); __pyx_8genexpr1__pyx_v_x = 0;
+    goto __pyx_L1_error;
+    __pyx_L10_exit_scope:;
+  } /* exit inner scope */
+  __pyx_v_sentences = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":62
+ *     norm_text = PreProcessing.normalize_text(text, False)
+ *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ *     splitedText = []             # <<<<<<<<<<<<<<
+ *     total_tokens=0
+ *     for x in sentences:
+ */
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 62, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_v_splitedText = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":17
- *             doc:File = None
- *             doc = run(dir, file)
- *             print("text")             # <<<<<<<<<<<<<<
- *             print(doc.text)
- *             print("named_entities")
+  /* "wrapper/infra/LanguageDetector.pyx":63
+ *     sentences = [x.strip() for x in norm_text.split('\n') if x.strip()]
+ *     splitedText = []
+ *     total_tokens=0             # <<<<<<<<<<<<<<
+ *     for x in sentences:
+ *         arr = x.split('.')
+ */
+  __pyx_v_total_tokens = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":64
+ *     splitedText = []
+ *     total_tokens=0
+ *     for x in sentences:             # <<<<<<<<<<<<<<
+ *         arr = x.split('.')
+ *         splitedText.extend(arr)
  */
-        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 17, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_3 = __pyx_v_sentences; __Pyx_INCREF(__pyx_t_3); __pyx_t_6 = 0;
+  for (;;) {
+    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_3)) break;
+    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_6); __Pyx_INCREF(__pyx_t_2); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 64, __pyx_L1_error)
+    #else
+    __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 64, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    #endif
+    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_2);
+    __pyx_t_2 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":18
- *             doc = run(dir, file)
- *             print("text")
- *             print(doc.text)             # <<<<<<<<<<<<<<
- *             print("named_entities")
- *             print(doc.named_entities)
+    /* "wrapper/infra/LanguageDetector.pyx":65
+ *     total_tokens=0
+ *     for x in sentences:
+ *         arr = x.split('.')             # <<<<<<<<<<<<<<
+ *         splitedText.extend(arr)
+ *     detecteds_sentences = {}
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_text); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_x, __pyx_n_s_split); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 65, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_5 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_1, function);
+        __pyx_t_4 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u__3};
+      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 65, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    }
+    __Pyx_XDECREF_SET(__pyx_v_arr, __pyx_t_2);
+    __pyx_t_2 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":19
- *             print("text")
- *             print(doc.text)
- *             print("named_entities")             # <<<<<<<<<<<<<<
- *             print(doc.named_entities)
- *             print("summary")
+    /* "wrapper/infra/LanguageDetector.pyx":66
+ *     for x in sentences:
+ *         arr = x.split('.')
+ *         splitedText.extend(arr)             # <<<<<<<<<<<<<<
+ *     detecteds_sentences = {}
+ * 
  */
-        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__3, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_10 = __Pyx_PyList_Extend(__pyx_v_splitedText, __pyx_v_arr); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 66, __pyx_L1_error)
 
-        /* "tests/ProcessPDFImageTest.pyx":20
- *             print(doc.text)
- *             print("named_entities")
- *             print(doc.named_entities)             # <<<<<<<<<<<<<<
- *             print("summary")
- *             print(doc.summary)
+    /* "wrapper/infra/LanguageDetector.pyx":64
+ *     splitedText = []
+ *     total_tokens=0
+ *     for x in sentences:             # <<<<<<<<<<<<<<
+ *         arr = x.split('.')
+ *         splitedText.extend(arr)
  */
-        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_named_entities); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 20, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":21
- *             print("named_entities")
- *             print(doc.named_entities)
- *             print("summary")             # <<<<<<<<<<<<<<
- *             print(doc.summary)
- *             print("Tokens")
+  /* "wrapper/infra/LanguageDetector.pyx":67
+ *         arr = x.split('.')
+ *         splitedText.extend(arr)
+ *     detecteds_sentences = {}             # <<<<<<<<<<<<<<
+ * 
+ *     allSplitedText = splitedText
  */
-        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 21, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 67, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_v_detecteds_sentences = ((PyObject*)__pyx_t_3);
+  __pyx_t_3 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":22
- *             print(doc.named_entities)
- *             print("summary")
- *             print(doc.summary)             # <<<<<<<<<<<<<<
- *             print("Tokens")
- *             print(doc.tokens)
+  /* "wrapper/infra/LanguageDetector.pyx":69
+ *     detecteds_sentences = {}
+ * 
+ *     allSplitedText = splitedText             # <<<<<<<<<<<<<<
+ *     splitedText = []
+ *     tokens = 0
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_summary); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 22, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __Pyx_INCREF(__pyx_v_splitedText);
+  __pyx_v_allSplitedText = __pyx_v_splitedText;
 
-        /* "tests/ProcessPDFImageTest.pyx":23
- *             print("summary")
- *             print(doc.summary)
- *             print("Tokens")             # <<<<<<<<<<<<<<
- *             print(doc.tokens)
- *             print("language")
+  /* "wrapper/infra/LanguageDetector.pyx":70
+ * 
+ *     allSplitedText = splitedText
+ *     splitedText = []             # <<<<<<<<<<<<<<
+ *     tokens = 0
+ *     maxCheckedTokens = 4000
  */
-        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 23, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 70, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF_SET(__pyx_v_splitedText, ((PyObject*)__pyx_t_3));
+  __pyx_t_3 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":24
- *             print(doc.summary)
- *             print("Tokens")
- *             print(doc.tokens)             # <<<<<<<<<<<<<<
- *             print("language")
- *             print(doc.detected_language)
+  /* "wrapper/infra/LanguageDetector.pyx":71
+ *     allSplitedText = splitedText
+ *     splitedText = []
+ *     tokens = 0             # <<<<<<<<<<<<<<
+ *     maxCheckedTokens = 4000
+ *     for slited in allSplitedText:
+ */
+  __Pyx_INCREF(__pyx_int_0);
+  __pyx_v_tokens = __pyx_int_0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":72
+ *     splitedText = []
+ *     tokens = 0
+ *     maxCheckedTokens = 4000             # <<<<<<<<<<<<<<
+ *     for slited in allSplitedText:
+ *         if tokens > maxCheckedTokens:
+ */
+  __pyx_v_maxCheckedTokens = 0xFA0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":73
+ *     tokens = 0
+ *     maxCheckedTokens = 4000
+ *     for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *         if tokens > maxCheckedTokens:
+ *             break
  */
-        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_tokens); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 24, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+  __pyx_t_3 = __pyx_v_allSplitedText; __Pyx_INCREF(__pyx_t_3); __pyx_t_6 = 0;
+  for (;;) {
+    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_3)) break;
+    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_6); __Pyx_INCREF(__pyx_t_2); __pyx_t_6++; if (unlikely((0 < 0))) __PYX_ERR(0, 73, __pyx_L1_error)
+    #else
+    __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 73, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    #endif
+    __Pyx_XDECREF_SET(__pyx_v_slited, __pyx_t_2);
+    __pyx_t_2 = 0;
 
-        /* "tests/ProcessPDFImageTest.pyx":25
- *             print("Tokens")
- *             print(doc.tokens)
- *             print("language")             # <<<<<<<<<<<<<<
- *             print(doc.detected_language)
- *             # print(img.text_features)
+    /* "wrapper/infra/LanguageDetector.pyx":74
+ *     maxCheckedTokens = 4000
+ *     for slited in allSplitedText:
+ *         if tokens > maxCheckedTokens:             # <<<<<<<<<<<<<<
+ *             break
+ *         else:
  */
-        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 25, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_maxCheckedTokens); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 74, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_1 = PyObject_RichCompare(__pyx_v_tokens, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 74, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 74, __pyx_L1_error)
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    if (__pyx_t_9) {
+
+      /* "wrapper/infra/LanguageDetector.pyx":75
+ *     for slited in allSplitedText:
+ *         if tokens > maxCheckedTokens:
+ *             break             # <<<<<<<<<<<<<<
+ *         else:
+ *             splitedText.append(slited)
+ */
+      goto __pyx_L15_break;
+
+      /* "wrapper/infra/LanguageDetector.pyx":74
+ *     maxCheckedTokens = 4000
+ *     for slited in allSplitedText:
+ *         if tokens > maxCheckedTokens:             # <<<<<<<<<<<<<<
+ *             break
+ *         else:
+ */
+    }
 
-        /* "tests/ProcessPDFImageTest.pyx":26
- *             print(doc.tokens)
- *             print("language")
- *             print(doc.detected_language)             # <<<<<<<<<<<<<<
- *             # print(img.text_features)
- *             print(doc.find_token("031.810.827-59"))
+    /* "wrapper/infra/LanguageDetector.pyx":77
+ *             break
+ *         else:
+ *             splitedText.append(slited)             # <<<<<<<<<<<<<<
+ * 
+ *         retry = 4
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_detected_language); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 26, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 26, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_3);
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    /*else*/ {
+      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_splitedText, __pyx_v_slited); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 77, __pyx_L1_error)
+    }
 
-        /* "tests/ProcessPDFImageTest.pyx":28
- *             print(doc.detected_language)
- *             # print(img.text_features)
- *             print(doc.find_token("031.810.827-59"))             # <<<<<<<<<<<<<<
- *             dcsearch.files.append(doc)
- *         except:
+    /* "wrapper/infra/LanguageDetector.pyx":79
+ *             splitedText.append(slited)
+ * 
+ *         retry = 4             # <<<<<<<<<<<<<<
+ *         det = None
+ *         try:
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_doc, __pyx_n_s_find_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_5 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
-          __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
-          if (likely(__pyx_t_5)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
-            __Pyx_INCREF(__pyx_t_5);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_1, function);
-            __pyx_t_4 = 1;
-          }
-        }
-        {
-          PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_031_810_827_59};
-          __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_1, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L5_error)
-          __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_INCREF(__pyx_int_4);
+    __Pyx_XDECREF_SET(__pyx_v_retry, __pyx_int_4);
+
+    /* "wrapper/infra/LanguageDetector.pyx":80
+ * 
+ *         retry = 4
+ *         det = None             # <<<<<<<<<<<<<<
+ *         try:
+ *             lang = None
+ */
+    __Pyx_INCREF(Py_None);
+    __Pyx_XDECREF_SET(__pyx_v_det, Py_None);
+
+    /* "wrapper/infra/LanguageDetector.pyx":81
+ *         retry = 4
+ *         det = None
+ *         try:             # <<<<<<<<<<<<<<
+ *             lang = None
+ *             while (retry > 0):
+ */
+    {
+      __Pyx_PyThreadState_declare
+      __Pyx_PyThreadState_assign
+      __Pyx_ExceptionSave(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
+      __Pyx_XGOTREF(__pyx_t_11);
+      __Pyx_XGOTREF(__pyx_t_12);
+      __Pyx_XGOTREF(__pyx_t_13);
+      /*try:*/ {
+
+        /* "wrapper/infra/LanguageDetector.pyx":82
+ *         det = None
+ *         try:
+ *             lang = None             # <<<<<<<<<<<<<<
+ *             while (retry > 0):
+ *                 try:
+ */
+        __Pyx_INCREF(Py_None);
+        __Pyx_XDECREF_SET(__pyx_v_lang, Py_None);
+
+        /* "wrapper/infra/LanguageDetector.pyx":83
+ *         try:
+ *             lang = None
+ *             while (retry > 0):             # <<<<<<<<<<<<<<
+ *                 try:
+ *                     det = translator.detect(slited)
+ */
+        while (1) {
+          __pyx_t_1 = PyObject_RichCompare(__pyx_v_retry, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 83, __pyx_L17_error)
+          __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 83, __pyx_L17_error)
           __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+          if (!__pyx_t_9) break;
+
+          /* "wrapper/infra/LanguageDetector.pyx":84
+ *             lang = None
+ *             while (retry > 0):
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     det = translator.detect(slited)
+ *                     lang = det.lang
+ */
+          {
+            __Pyx_PyThreadState_declare
+            __Pyx_PyThreadState_assign
+            __Pyx_ExceptionSave(&__pyx_t_14, &__pyx_t_15, &__pyx_t_16);
+            __Pyx_XGOTREF(__pyx_t_14);
+            __Pyx_XGOTREF(__pyx_t_15);
+            __Pyx_XGOTREF(__pyx_t_16);
+            /*try:*/ {
+
+              /* "wrapper/infra/LanguageDetector.pyx":85
+ *             while (retry > 0):
+ *                 try:
+ *                     det = translator.detect(slited)             # <<<<<<<<<<<<<<
+ *                     lang = det.lang
+ *                     tokens += len(slited)
+ */
+              __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_translator, __pyx_n_s_detect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 85, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_2);
+              __pyx_t_5 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
+                __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
+                if (likely(__pyx_t_5)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+                  __Pyx_INCREF(__pyx_t_5);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_2, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_v_slited};
+                __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+                if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 85, __pyx_L27_error)
+                __Pyx_GOTREF(__pyx_t_1);
+                __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+              }
+              __Pyx_DECREF_SET(__pyx_v_det, __pyx_t_1);
+              __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":86
+ *                 try:
+ *                     det = translator.detect(slited)
+ *                     lang = det.lang             # <<<<<<<<<<<<<<
+ *                     tokens += len(slited)
+ *                     logging.debug(f'checking: "{slited}". Lang detected {lang}. Checked tokens {tokens}...')
+ */
+              __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_det, __pyx_n_s_lang); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 86, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_1);
+              __Pyx_DECREF_SET(__pyx_v_lang, __pyx_t_1);
+              __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":87
+ *                     det = translator.detect(slited)
+ *                     lang = det.lang
+ *                     tokens += len(slited)             # <<<<<<<<<<<<<<
+ *                     logging.debug(f'checking: "{slited}". Lang detected {lang}. Checked tokens {tokens}...')
+ *                     break
+ */
+              __pyx_t_17 = PyObject_Length(__pyx_v_slited); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 87, __pyx_L27_error)
+              __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_17); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 87, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_1);
+              __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_tokens, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 87, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_2);
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+              __Pyx_DECREF_SET(__pyx_v_tokens, __pyx_t_2);
+              __pyx_t_2 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":88
+ *                     lang = det.lang
+ *                     tokens += len(slited)
+ *                     logging.debug(f'checking: "{slited}". Lang detected {lang}. Checked tokens {tokens}...')             # <<<<<<<<<<<<<<
+ *                     break
+ *                 except:
+ */
+              __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_logging); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_1);
+              __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_debug); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_5);
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+              __pyx_t_1 = PyTuple_New(7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_1);
+              __pyx_t_17 = 0;
+              __pyx_t_18 = 127;
+              __Pyx_INCREF(__pyx_kp_u_checking);
+              __pyx_t_17 += 11;
+              __Pyx_GIVEREF(__pyx_kp_u_checking);
+              PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_kp_u_checking);
+              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_8);
+              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
+              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+              __Pyx_GIVEREF(__pyx_t_8);
+              PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_8);
+              __pyx_t_8 = 0;
+              __Pyx_INCREF(__pyx_kp_u_Lang_detected);
+              __pyx_t_17 += 17;
+              __Pyx_GIVEREF(__pyx_kp_u_Lang_detected);
+              PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_kp_u_Lang_detected);
+              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_lang, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_8);
+              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
+              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+              __Pyx_GIVEREF(__pyx_t_8);
+              PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_8);
+              __pyx_t_8 = 0;
+              __Pyx_INCREF(__pyx_kp_u_Checked_tokens);
+              __pyx_t_17 += 17;
+              __Pyx_GIVEREF(__pyx_kp_u_Checked_tokens);
+              PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_kp_u_Checked_tokens);
+              __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_tokens, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_8);
+              __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
+              __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+              __Pyx_GIVEREF(__pyx_t_8);
+              PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_t_8);
+              __pyx_t_8 = 0;
+              __Pyx_INCREF(__pyx_kp_u__4);
+              __pyx_t_17 += 3;
+              __Pyx_GIVEREF(__pyx_kp_u__4);
+              PyTuple_SET_ITEM(__pyx_t_1, 6, __pyx_kp_u__4);
+              __pyx_t_8 = __Pyx_PyUnicode_Join(__pyx_t_1, 7, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 88, __pyx_L27_error)
+              __Pyx_GOTREF(__pyx_t_8);
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+              __pyx_t_1 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
+                __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_5);
+                if (likely(__pyx_t_1)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
+                  __Pyx_INCREF(__pyx_t_1);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_5, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[2] = {__pyx_t_1, __pyx_t_8};
+                __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+                __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+                if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 88, __pyx_L27_error)
+                __Pyx_GOTREF(__pyx_t_2);
+                __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+              }
+              __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":89
+ *                     tokens += len(slited)
+ *                     logging.debug(f'checking: "{slited}". Lang detected {lang}. Checked tokens {tokens}...')
+ *                     break             # <<<<<<<<<<<<<<
+ *                 except:
+ *                     retry -= 1
+ */
+              goto __pyx_L32_try_break;
+
+              /* "wrapper/infra/LanguageDetector.pyx":84
+ *             lang = None
+ *             while (retry > 0):
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     det = translator.detect(slited)
+ *                     lang = det.lang
+ */
+            }
+            __pyx_L27_error:;
+            __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+            __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+            __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+            __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+            /* "wrapper/infra/LanguageDetector.pyx":90
+ *                     logging.debug(f'checking: "{slited}". Lang detected {lang}. Checked tokens {tokens}...')
+ *                     break
+ *                 except:             # <<<<<<<<<<<<<<
+ *                     retry -= 1
+ *                     logging.debug(f'retrying. Left {retry}')
+ */
+            /*except:*/ {
+              __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
+              if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_5, &__pyx_t_8) < 0) __PYX_ERR(0, 90, __pyx_L29_except_error)
+              __Pyx_XGOTREF(__pyx_t_2);
+              __Pyx_XGOTREF(__pyx_t_5);
+              __Pyx_XGOTREF(__pyx_t_8);
+
+              /* "wrapper/infra/LanguageDetector.pyx":91
+ *                     break
+ *                 except:
+ *                     retry -= 1             # <<<<<<<<<<<<<<
+ *                     logging.debug(f'retrying. Left {retry}')
+ *                     logging.error(traceback.format_exc())
+ */
+              __pyx_t_1 = __Pyx_PyInt_SubtractObjC(__pyx_v_retry, __pyx_int_1, 1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 91, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_1);
+              __Pyx_DECREF_SET(__pyx_v_retry, __pyx_t_1);
+              __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":92
+ *                 except:
+ *                     retry -= 1
+ *                     logging.debug(f'retrying. Left {retry}')             # <<<<<<<<<<<<<<
+ *                     logging.error(traceback.format_exc())
+ *                     time.sleep(0.5)
+ */
+              __Pyx_GetModuleGlobalName(__pyx_t_19, __pyx_n_s_logging); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 92, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_19);
+              __pyx_t_20 = __Pyx_PyObject_GetAttrStr(__pyx_t_19, __pyx_n_s_debug); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 92, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_20);
+              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
+              __pyx_t_19 = __Pyx_PyObject_FormatSimple(__pyx_v_retry, __pyx_empty_unicode); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 92, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_19);
+              __pyx_t_21 = __Pyx_PyUnicode_Concat(__pyx_kp_u_retrying_Left, __pyx_t_19); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 92, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_21);
+              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
+              __pyx_t_19 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_20))) {
+                __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_20);
+                if (likely(__pyx_t_19)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_20);
+                  __Pyx_INCREF(__pyx_t_19);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_20, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[2] = {__pyx_t_19, __pyx_t_21};
+                __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_20, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
+                __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
+                if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 92, __pyx_L29_except_error)
+                __Pyx_GOTREF(__pyx_t_1);
+                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+              }
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":93
+ *                     retry -= 1
+ *                     logging.debug(f'retrying. Left {retry}')
+ *                     logging.error(traceback.format_exc())             # <<<<<<<<<<<<<<
+ *                     time.sleep(0.5)
+ *                     if retry == 0:
+ */
+              __Pyx_GetModuleGlobalName(__pyx_t_20, __pyx_n_s_logging); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_20);
+              __pyx_t_21 = __Pyx_PyObject_GetAttrStr(__pyx_t_20, __pyx_n_s_error); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_21);
+              __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+              __Pyx_GetModuleGlobalName(__pyx_t_19, __pyx_n_s_traceback); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_19);
+              __pyx_t_22 = __Pyx_PyObject_GetAttrStr(__pyx_t_19, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_22)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_22);
+              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
+              __pyx_t_19 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_22))) {
+                __pyx_t_19 = PyMethod_GET_SELF(__pyx_t_22);
+                if (likely(__pyx_t_19)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_22);
+                  __Pyx_INCREF(__pyx_t_19);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_22, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[1] = {__pyx_t_19, };
+                __pyx_t_20 = __Pyx_PyObject_FastCall(__pyx_t_22, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
+                if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+                __Pyx_GOTREF(__pyx_t_20);
+                __Pyx_DECREF(__pyx_t_22); __pyx_t_22 = 0;
+              }
+              __pyx_t_22 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_21))) {
+                __pyx_t_22 = PyMethod_GET_SELF(__pyx_t_21);
+                if (likely(__pyx_t_22)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_21);
+                  __Pyx_INCREF(__pyx_t_22);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_21, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[2] = {__pyx_t_22, __pyx_t_20};
+                __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_21, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
+                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+                if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 93, __pyx_L29_except_error)
+                __Pyx_GOTREF(__pyx_t_1);
+                __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
+              }
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":94
+ *                     logging.debug(f'retrying. Left {retry}')
+ *                     logging.error(traceback.format_exc())
+ *                     time.sleep(0.5)             # <<<<<<<<<<<<<<
+ *                     if retry == 0:
+ *                         raise
+ */
+              __Pyx_GetModuleGlobalName(__pyx_t_21, __pyx_n_s_time); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 94, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_21);
+              __pyx_t_20 = __Pyx_PyObject_GetAttrStr(__pyx_t_21, __pyx_n_s_sleep); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 94, __pyx_L29_except_error)
+              __Pyx_GOTREF(__pyx_t_20);
+              __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
+              __pyx_t_21 = NULL;
+              __pyx_t_4 = 0;
+              if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_20))) {
+                __pyx_t_21 = PyMethod_GET_SELF(__pyx_t_20);
+                if (likely(__pyx_t_21)) {
+                  PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_20);
+                  __Pyx_INCREF(__pyx_t_21);
+                  __Pyx_INCREF(function);
+                  __Pyx_DECREF_SET(__pyx_t_20, function);
+                  __pyx_t_4 = 1;
+                }
+              }
+              {
+                PyObject *__pyx_callargs[2] = {__pyx_t_21, __pyx_float_0_5};
+                __pyx_t_1 = __Pyx_PyObject_FastCall(__pyx_t_20, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+                __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
+                if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 94, __pyx_L29_except_error)
+                __Pyx_GOTREF(__pyx_t_1);
+                __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+              }
+              __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+
+              /* "wrapper/infra/LanguageDetector.pyx":95
+ *                     logging.error(traceback.format_exc())
+ *                     time.sleep(0.5)
+ *                     if retry == 0:             # <<<<<<<<<<<<<<
+ *                         raise
+ *             if not lang:
+ */
+              __pyx_t_9 = (__Pyx_PyInt_BoolEqObjC(__pyx_v_retry, __pyx_int_0, 0, 0)); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 95, __pyx_L29_except_error)
+              if (unlikely(__pyx_t_9)) {
+
+                /* "wrapper/infra/LanguageDetector.pyx":96
+ *                     time.sleep(0.5)
+ *                     if retry == 0:
+ *                         raise             # <<<<<<<<<<<<<<
+ *             if not lang:
+ *                 continue
+ */
+                __Pyx_GIVEREF(__pyx_t_2);
+                __Pyx_GIVEREF(__pyx_t_5);
+                __Pyx_XGIVEREF(__pyx_t_8);
+                __Pyx_ErrRestoreWithState(__pyx_t_2, __pyx_t_5, __pyx_t_8);
+                __pyx_t_2 = 0; __pyx_t_5 = 0; __pyx_t_8 = 0; 
+                __PYX_ERR(0, 96, __pyx_L29_except_error)
+
+                /* "wrapper/infra/LanguageDetector.pyx":95
+ *                     logging.error(traceback.format_exc())
+ *                     time.sleep(0.5)
+ *                     if retry == 0:             # <<<<<<<<<<<<<<
+ *                         raise
+ *             if not lang:
+ */
+              }
+              __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+              __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+              __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+              goto __pyx_L28_exception_handled;
+            }
+
+            /* "wrapper/infra/LanguageDetector.pyx":84
+ *             lang = None
+ *             while (retry > 0):
+ *                 try:             # <<<<<<<<<<<<<<
+ *                     det = translator.detect(slited)
+ *                     lang = det.lang
+ */
+            __pyx_L29_except_error:;
+            __Pyx_XGIVEREF(__pyx_t_14);
+            __Pyx_XGIVEREF(__pyx_t_15);
+            __Pyx_XGIVEREF(__pyx_t_16);
+            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
+            goto __pyx_L17_error;
+            __pyx_L32_try_break:;
+            __Pyx_XGIVEREF(__pyx_t_14);
+            __Pyx_XGIVEREF(__pyx_t_15);
+            __Pyx_XGIVEREF(__pyx_t_16);
+            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
+            goto __pyx_L26_break;
+            __pyx_L28_exception_handled:;
+            __Pyx_XGIVEREF(__pyx_t_14);
+            __Pyx_XGIVEREF(__pyx_t_15);
+            __Pyx_XGIVEREF(__pyx_t_16);
+            __Pyx_ExceptionReset(__pyx_t_14, __pyx_t_15, __pyx_t_16);
+          }
         }
-        __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __pyx_L26_break:;
 
-        /* "tests/ProcessPDFImageTest.pyx":29
- *             # print(img.text_features)
- *             print(doc.find_token("031.810.827-59"))
- *             dcsearch.files.append(doc)             # <<<<<<<<<<<<<<
+        /* "wrapper/infra/LanguageDetector.pyx":97
+ *                     if retry == 0:
+ *                         raise
+ *             if not lang:             # <<<<<<<<<<<<<<
+ *                 continue
+ *             if lang not in detecteds_sentences:
+ */
+        __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_lang); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 97, __pyx_L17_error)
+        __pyx_t_23 = (!__pyx_t_9);
+        if (__pyx_t_23) {
+
+          /* "wrapper/infra/LanguageDetector.pyx":98
+ *                         raise
+ *             if not lang:
+ *                 continue             # <<<<<<<<<<<<<<
+ *             if lang not in detecteds_sentences:
+ *                 detecteds_sentences[lang] = [slited]
+ */
+          goto __pyx_L23_try_continue;
+
+          /* "wrapper/infra/LanguageDetector.pyx":97
+ *                     if retry == 0:
+ *                         raise
+ *             if not lang:             # <<<<<<<<<<<<<<
+ *                 continue
+ *             if lang not in detecteds_sentences:
+ */
+        }
+
+        /* "wrapper/infra/LanguageDetector.pyx":99
+ *             if not lang:
+ *                 continue
+ *             if lang not in detecteds_sentences:             # <<<<<<<<<<<<<<
+ *                 detecteds_sentences[lang] = [slited]
+ *             else:
+ */
+        __pyx_t_23 = (__Pyx_PyDict_ContainsTF(__pyx_v_lang, __pyx_v_detecteds_sentences, Py_NE)); if (unlikely((__pyx_t_23 < 0))) __PYX_ERR(0, 99, __pyx_L17_error)
+        if (__pyx_t_23) {
+
+          /* "wrapper/infra/LanguageDetector.pyx":100
+ *                 continue
+ *             if lang not in detecteds_sentences:
+ *                 detecteds_sentences[lang] = [slited]             # <<<<<<<<<<<<<<
+ *             else:
+ *                 x = detecteds_sentences[lang]
+ */
+          __pyx_t_8 = PyList_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 100, __pyx_L17_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          __Pyx_INCREF(__pyx_v_slited);
+          __Pyx_GIVEREF(__pyx_v_slited);
+          PyList_SET_ITEM(__pyx_t_8, 0, __pyx_v_slited);
+          if (unlikely((PyDict_SetItem(__pyx_v_detecteds_sentences, __pyx_v_lang, __pyx_t_8) < 0))) __PYX_ERR(0, 100, __pyx_L17_error)
+          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+          /* "wrapper/infra/LanguageDetector.pyx":99
+ *             if not lang:
+ *                 continue
+ *             if lang not in detecteds_sentences:             # <<<<<<<<<<<<<<
+ *                 detecteds_sentences[lang] = [slited]
+ *             else:
+ */
+          goto __pyx_L39;
+        }
+
+        /* "wrapper/infra/LanguageDetector.pyx":102
+ *                 detecteds_sentences[lang] = [slited]
+ *             else:
+ *                 x = detecteds_sentences[lang]             # <<<<<<<<<<<<<<
+ *                 x.append(slited)
+ *                 detecteds_sentences[lang] = x
+ */
+        /*else*/ {
+          __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_detecteds_sentences, __pyx_v_lang); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 102, __pyx_L17_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_8);
+          __pyx_t_8 = 0;
+
+          /* "wrapper/infra/LanguageDetector.pyx":103
+ *             else:
+ *                 x = detecteds_sentences[lang]
+ *                 x.append(slited)             # <<<<<<<<<<<<<<
+ *                 detecteds_sentences[lang] = x
  *         except:
- *             print(traceback.format_exc())
  */
-        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_dcsearch, __pyx_n_s_files); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 29, __pyx_L5_error)
-        __Pyx_GOTREF(__pyx_t_1);
-        __pyx_t_12 = __Pyx_PyObject_Append(__pyx_t_1, __pyx_v_doc); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 29, __pyx_L5_error)
-        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+          __pyx_t_10 = __Pyx_PyObject_Append(__pyx_v_x, __pyx_v_slited); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 103, __pyx_L17_error)
 
-        /* "tests/ProcessPDFImageTest.pyx":13
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:
+          /* "wrapper/infra/LanguageDetector.pyx":104
+ *                 x = detecteds_sentences[lang]
+ *                 x.append(slited)
+ *                 detecteds_sentences[lang] = x             # <<<<<<<<<<<<<<
+ *         except:
+ *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
+ */
+          if (unlikely((PyDict_SetItem(__pyx_v_detecteds_sentences, __pyx_v_lang, __pyx_v_x) < 0))) __PYX_ERR(0, 104, __pyx_L17_error)
+        }
+        __pyx_L39:;
+
+        /* "wrapper/infra/LanguageDetector.pyx":81
+ *         retry = 4
+ *         det = None
  *         try:             # <<<<<<<<<<<<<<
- *             print('Processing image')
- *             doc:File = None
+ *             lang = None
+ *             while (retry > 0):
  */
       }
-      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
-      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
-      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
-      goto __pyx_L12_try_end;
-      __pyx_L5_error:;
-      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
       __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
-      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+      __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+      __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
+      goto __pyx_L24_try_end;
+      __pyx_L17_error:;
+      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
+      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+      __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
+      __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
+      __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
       __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
 
-      /* "tests/ProcessPDFImageTest.pyx":30
- *             print(doc.find_token("031.810.827-59"))
- *             dcsearch.files.append(doc)
+      /* "wrapper/infra/LanguageDetector.pyx":105
+ *                 x.append(slited)
+ *                 detecteds_sentences[lang] = x
  *         except:             # <<<<<<<<<<<<<<
- *             print(traceback.format_exc())
- *     if dcsearch.files:
+ *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
+ * 
  */
       /*except:*/ {
-        __Pyx_AddTraceback("tests.ProcessPDFImageTest.start", __pyx_clineno, __pyx_lineno, __pyx_filename);
-        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_3, &__pyx_t_5) < 0) __PYX_ERR(0, 30, __pyx_L7_except_error)
-        __Pyx_XGOTREF(__pyx_t_1);
-        __Pyx_XGOTREF(__pyx_t_3);
+        __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
+        if (__Pyx_GetException(&__pyx_t_8, &__pyx_t_5, &__pyx_t_2) < 0) __PYX_ERR(0, 105, __pyx_L19_except_error)
+        __Pyx_XGOTREF(__pyx_t_8);
         __Pyx_XGOTREF(__pyx_t_5);
+        __Pyx_XGOTREF(__pyx_t_2);
 
-        /* "tests/ProcessPDFImageTest.pyx":31
- *             dcsearch.files.append(doc)
+        /* "wrapper/infra/LanguageDetector.pyx":106
+ *                 detecteds_sentences[lang] = x
  *         except:
- *             print(traceback.format_exc())             # <<<<<<<<<<<<<<
- *     if dcsearch.files:
- *         dcsearch.train_model()
- */
-        __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_traceback); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 31, __pyx_L7_except_error)
-        __Pyx_GOTREF(__pyx_t_13);
-        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_format_exc); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 31, __pyx_L7_except_error)
-        __Pyx_GOTREF(__pyx_t_14);
-        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
-        __pyx_t_13 = NULL;
-        __pyx_t_4 = 0;
-        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
-          __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_14);
-          if (likely(__pyx_t_13)) {
-            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
-            __Pyx_INCREF(__pyx_t_13);
-            __Pyx_INCREF(function);
-            __Pyx_DECREF_SET(__pyx_t_14, function);
-            __pyx_t_4 = 1;
-          }
-        }
-        {
-          PyObject *__pyx_callargs[1] = {__pyx_t_13, };
-          __pyx_t_11 = __Pyx_PyObject_FastCall(__pyx_t_14, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-          __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
-          if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 31, __pyx_L7_except_error)
-          __Pyx_GOTREF(__pyx_t_11);
-          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-        }
-        __pyx_t_14 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_11); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 31, __pyx_L7_except_error)
-        __Pyx_GOTREF(__pyx_t_14);
-        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
-        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
-        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
-        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
-        goto __pyx_L6_exception_handled;
+ *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")             # <<<<<<<<<<<<<<
+ * 
+ *     if len(detecteds_sentences) == 0:
+ */
+        __pyx_t_1 = PyTuple_New(6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_1);
+        __pyx_t_17 = 0;
+        __pyx_t_18 = 127;
+        __Pyx_INCREF(__pyx_kp_u_Error_to_detect_language_for_sen);
+        __pyx_t_17 += 38;
+        __Pyx_GIVEREF(__pyx_kp_u_Error_to_detect_language_for_sen);
+        PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_kp_u_Error_to_detect_language_for_sen);
+        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_20);
+        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
+        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
+        __Pyx_GIVEREF(__pyx_t_20);
+        PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_20);
+        __pyx_t_20 = 0;
+        __Pyx_INCREF(__pyx_kp_u_from_sentences);
+        __pyx_t_17 += 16;
+        __Pyx_GIVEREF(__pyx_kp_u_from_sentences);
+        PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_kp_u_from_sentences);
+        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_splitedText, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_20);
+        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
+        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
+        __Pyx_GIVEREF(__pyx_t_20);
+        PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_20);
+        __pyx_t_20 = 0;
+        __Pyx_INCREF(__pyx_kp_u_Detected_object);
+        __pyx_t_17 += 18;
+        __Pyx_GIVEREF(__pyx_kp_u_Detected_object);
+        PyTuple_SET_ITEM(__pyx_t_1, 4, __pyx_kp_u_Detected_object);
+        __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_det, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_20);
+        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
+        __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
+        __Pyx_GIVEREF(__pyx_t_20);
+        PyTuple_SET_ITEM(__pyx_t_1, 5, __pyx_t_20);
+        __pyx_t_20 = 0;
+        __pyx_t_20 = __Pyx_PyUnicode_Join(__pyx_t_1, 6, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_20);
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_20); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 106, __pyx_L19_except_error)
+        __Pyx_GOTREF(__pyx_t_1);
+        __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+        __Pyx_Raise(__pyx_t_1, 0, 0, 0);
+        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __PYX_ERR(0, 106, __pyx_L19_except_error)
       }
 
-      /* "tests/ProcessPDFImageTest.pyx":13
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:
+      /* "wrapper/infra/LanguageDetector.pyx":81
+ *         retry = 4
+ *         det = None
  *         try:             # <<<<<<<<<<<<<<
- *             print('Processing image')
- *             doc:File = None
+ *             lang = None
+ *             while (retry > 0):
  */
-      __pyx_L7_except_error:;
-      __Pyx_XGIVEREF(__pyx_t_8);
-      __Pyx_XGIVEREF(__pyx_t_9);
-      __Pyx_XGIVEREF(__pyx_t_10);
-      __Pyx_ExceptionReset(__pyx_t_8, __pyx_t_9, __pyx_t_10);
+      __pyx_L19_except_error:;
+      __Pyx_XGIVEREF(__pyx_t_11);
+      __Pyx_XGIVEREF(__pyx_t_12);
+      __Pyx_XGIVEREF(__pyx_t_13);
+      __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
       goto __pyx_L1_error;
-      __pyx_L6_exception_handled:;
-      __Pyx_XGIVEREF(__pyx_t_8);
-      __Pyx_XGIVEREF(__pyx_t_9);
-      __Pyx_XGIVEREF(__pyx_t_10);
-      __Pyx_ExceptionReset(__pyx_t_8, __pyx_t_9, __pyx_t_10);
-      __pyx_L12_try_end:;
-    }
+      __pyx_L23_try_continue:;
+      __Pyx_XGIVEREF(__pyx_t_11);
+      __Pyx_XGIVEREF(__pyx_t_12);
+      __Pyx_XGIVEREF(__pyx_t_13);
+      __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
+      goto __pyx_L14_continue;
+      __pyx_L24_try_end:;
+    }
+
+    /* "wrapper/infra/LanguageDetector.pyx":73
+ *     tokens = 0
+ *     maxCheckedTokens = 4000
+ *     for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *         if tokens > maxCheckedTokens:
+ *             break
+ */
+    __pyx_L14_continue:;
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  goto __pyx_L42_for_end;
+  __pyx_L15_break:;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  goto __pyx_L42_for_end;
+  __pyx_L42_for_end:;
 
-    /* "tests/ProcessPDFImageTest.pyx":12
- *     load()
- *     dcsearch = DocumentSearch(dir)
- *     for file in files:             # <<<<<<<<<<<<<<
- *         try:
- *             print('Processing image')
+  /* "wrapper/infra/LanguageDetector.pyx":108
+ *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
+ * 
+ *     if len(detecteds_sentences) == 0:             # <<<<<<<<<<<<<<
+ *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+ * 
+ */
+  __pyx_t_6 = PyDict_Size(__pyx_v_detecteds_sentences); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 108, __pyx_L1_error)
+  __pyx_t_23 = (__pyx_t_6 == 0);
+  if (unlikely(__pyx_t_23)) {
+
+    /* "wrapper/infra/LanguageDetector.pyx":109
+ * 
+ *     if len(detecteds_sentences) == 0:
+ *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")             # <<<<<<<<<<<<<<
+ * 
+ *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
+ */
+    __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 109, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_6 = 0;
+    __pyx_t_18 = 127;
+    __Pyx_INCREF(__pyx_kp_u_It_doesn_t_have_readable_sentenc);
+    __pyx_t_6 += 39;
+    __Pyx_GIVEREF(__pyx_kp_u_It_doesn_t_have_readable_sentenc);
+    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_It_doesn_t_have_readable_sentenc);
+    __pyx_t_2 = __Pyx_PyObject_FormatSimple(__pyx_v_splitedText, __pyx_empty_unicode); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 109, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_2) : __pyx_t_18;
+    __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_2);
+    __Pyx_GIVEREF(__pyx_t_2);
+    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_2);
+    __pyx_t_2 = 0;
+    __Pyx_INCREF(__pyx_kp_u__3);
+    __pyx_t_6 += 1;
+    __Pyx_GIVEREF(__pyx_kp_u__3);
+    PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u__3);
+    __pyx_t_2 = __Pyx_PyUnicode_Join(__pyx_t_3, 3, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 109, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 109, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 109, __pyx_L1_error)
+
+    /* "wrapper/infra/LanguageDetector.pyx":108
+ *             raise Exception(f"Error to detect language for sentence {slited} from sentences {splitedText}. Detected object {det}")
+ * 
+ *     if len(detecteds_sentences) == 0:             # <<<<<<<<<<<<<<
+ *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+ * 
  */
   }
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":32
- *         except:
- *             print(traceback.format_exc())
- *     if dcsearch.files:             # <<<<<<<<<<<<<<
- *         dcsearch.train_model()
- *         # dcsearch.search_documents("good work", 'en')
+  /* "wrapper/infra/LanguageDetector.pyx":111
+ *         raise Exception(f"It doesn't have readable sentences for {splitedText}.")
+ * 
+ *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]             # <<<<<<<<<<<<<<
+ * 
+ *     if len(detected[1]) / len(splitedText) <= 0.5:
  */
-  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_dcsearch, __pyx_n_s_files); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyDict_Items(__pyx_v_detecteds_sentences); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_15 < 0))) __PYX_ERR(0, 32, __pyx_L1_error)
+  __Pyx_GIVEREF(__pyx_t_3);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
+  __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_5 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_16LanguageDetector_31detect_lang_by_google_translate_lambda, 0, __pyx_n_s_detect_lang_by_google_translate, NULL, __pyx_n_s_wrapper_infra_LanguageDetector, __pyx_d, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_5) < 0) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 111, __pyx_L1_error)
+  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__pyx_t_15) {
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+  __pyx_v_detected = __pyx_t_3;
+  __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":113
+ *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
+ * 
+ *     if len(detected[1]) / len(splitedText) <= 0.5:             # <<<<<<<<<<<<<<
+ *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
+ *         logging.error("Language not detected")
+ */
+  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 113, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_6 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 113, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_17 = PyList_GET_SIZE(__pyx_v_splitedText); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 113, __pyx_L1_error)
+  if (unlikely(__pyx_t_17 == 0)) {
+    PyErr_SetString(PyExc_ZeroDivisionError, "float division");
+    __PYX_ERR(0, 113, __pyx_L1_error)
+  }
+  __pyx_t_23 = ((((double)__pyx_t_6) / ((double)__pyx_t_17)) <= 0.5);
+  if (unlikely(__pyx_t_23)) {
 
-    /* "tests/ProcessPDFImageTest.pyx":33
- *             print(traceback.format_exc())
- *     if dcsearch.files:
- *         dcsearch.train_model()             # <<<<<<<<<<<<<<
- *         # dcsearch.search_documents("good work", 'en')
- *         dcsearch.search_documents("regime de comunho de bens 031.810.827-59", 'pt')
+    /* "wrapper/infra/LanguageDetector.pyx":115
+ *     if len(detected[1]) / len(splitedText) <= 0.5:
+ *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
+ *         logging.error("Language not detected")             # <<<<<<<<<<<<<<
+ *         raise Exception("Language not detected")
+ * 
  */
-    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_dcsearch, __pyx_n_s_train_model); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 115, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_3 = NULL;
+    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_error); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 115, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_2);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = NULL;
     __pyx_t_4 = 0;
-    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
-      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_5);
-      if (likely(__pyx_t_3)) {
-        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
-        __Pyx_INCREF(__pyx_t_3);
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+        __Pyx_INCREF(__pyx_t_5);
         __Pyx_INCREF(function);
-        __Pyx_DECREF_SET(__pyx_t_5, function);
+        __Pyx_DECREF_SET(__pyx_t_2, function);
         __pyx_t_4 = 1;
       }
     }
     {
-      PyObject *__pyx_callargs[1] = {__pyx_t_3, };
-      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_5, __pyx_callargs+1-__pyx_t_4, 0+__pyx_t_4);
-      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
-      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 33, __pyx_L1_error)
-      __Pyx_GOTREF(__pyx_t_2);
-      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_kp_u_Language_not_detected};
+      __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 115, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
     }
-    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":116
+ *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
+ *         logging.error("Language not detected")
+ *         raise Exception("Language not detected")             # <<<<<<<<<<<<<<
+ * 
+ *     if translate_to and detected[0] != translate_to:
+ */
+    __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 116, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __PYX_ERR(0, 116, __pyx_L1_error)
+
+    /* "wrapper/infra/LanguageDetector.pyx":113
+ *     detected = sorted(detecteds_sentences.items(), key=lambda x:len(x[1]), reverse=True)[0]
+ * 
+ *     if len(detected[1]) / len(splitedText) <= 0.5:             # <<<<<<<<<<<<<<
+ *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
+ *         logging.error("Language not detected")
+ */
+  }
 
-    /* "tests/ProcessPDFImageTest.pyx":35
- *         dcsearch.train_model()
- *         # dcsearch.search_documents("good work", 'en')
- *         dcsearch.search_documents("regime de comunho de bens 031.810.827-59", 'pt')             # <<<<<<<<<<<<<<
- *         # dcsearch.search_documents("regime de comunho de bens", 'pt')
+  /* "wrapper/infra/LanguageDetector.pyx":118
+ *         raise Exception("Language not detected")
  * 
+ *     if translate_to and detected[0] != translate_to:             # <<<<<<<<<<<<<<
+ *         translated_sentences = []
+ *         for slited in allSplitedText:
  */
-    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_dcsearch, __pyx_n_s_search_documents); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 35, __pyx_L1_error)
+  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_translate_to); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 118, __pyx_L1_error)
+  if (__pyx_t_9) {
+  } else {
+    __pyx_t_23 = __pyx_t_9;
+    goto __pyx_L46_bool_binop_done;
+  }
+  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 118, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_v_translate_to, Py_NE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 118, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 118, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_23 = __pyx_t_9;
+  __pyx_L46_bool_binop_done:;
+  if (__pyx_t_23) {
+
+    /* "wrapper/infra/LanguageDetector.pyx":119
+ * 
+ *     if translate_to and detected[0] != translate_to:
+ *         translated_sentences = []             # <<<<<<<<<<<<<<
+ *         for slited in allSplitedText:
+ *             try:
+ */
+    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 119, __pyx_L1_error)
     __Pyx_GOTREF(__pyx_t_2);
-    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__7, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 35, __pyx_L1_error)
-    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_v_translated_sentences = ((PyObject*)__pyx_t_2);
+    __pyx_t_2 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":120
+ *     if translate_to and detected[0] != translate_to:
+ *         translated_sentences = []
+ *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *             try:
+ *                 t = translator.translate(slited, dest=translate_to)
+ */
+    __pyx_t_2 = __pyx_v_allSplitedText; __Pyx_INCREF(__pyx_t_2); __pyx_t_17 = 0;
+    for (;;) {
+      if (__pyx_t_17 >= PyList_GET_SIZE(__pyx_t_2)) break;
+      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+      __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_17); __Pyx_INCREF(__pyx_t_3); __pyx_t_17++; if (unlikely((0 < 0))) __PYX_ERR(0, 120, __pyx_L1_error)
+      #else
+      __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_17); __pyx_t_17++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 120, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_3);
+      #endif
+      __Pyx_XDECREF_SET(__pyx_v_slited, __pyx_t_3);
+      __pyx_t_3 = 0;
+
+      /* "wrapper/infra/LanguageDetector.pyx":121
+ *         translated_sentences = []
+ *         for slited in allSplitedText:
+ *             try:             # <<<<<<<<<<<<<<
+ *                 t = translator.translate(slited, dest=translate_to)
+ *             except:
+ */
+      {
+        __Pyx_PyThreadState_declare
+        __Pyx_PyThreadState_assign
+        __Pyx_ExceptionSave(&__pyx_t_13, &__pyx_t_12, &__pyx_t_11);
+        __Pyx_XGOTREF(__pyx_t_13);
+        __Pyx_XGOTREF(__pyx_t_12);
+        __Pyx_XGOTREF(__pyx_t_11);
+        /*try:*/ {
+
+          /* "wrapper/infra/LanguageDetector.pyx":122
+ *         for slited in allSplitedText:
+ *             try:
+ *                 t = translator.translate(slited, dest=translate_to)             # <<<<<<<<<<<<<<
+ *             except:
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+ */
+          __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_translator, __pyx_n_s_translate); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 122, __pyx_L50_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 122, __pyx_L50_error)
+          __Pyx_GOTREF(__pyx_t_5);
+          __Pyx_INCREF(__pyx_v_slited);
+          __Pyx_GIVEREF(__pyx_v_slited);
+          PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_slited);
+          __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 122, __pyx_L50_error)
+          __Pyx_GOTREF(__pyx_t_8);
+          if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_dest, __pyx_v_translate_to) < 0) __PYX_ERR(0, 122, __pyx_L50_error)
+          __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, __pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L50_error)
+          __Pyx_GOTREF(__pyx_t_1);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+          __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_1);
+          __pyx_t_1 = 0;
+
+          /* "wrapper/infra/LanguageDetector.pyx":121
+ *         translated_sentences = []
+ *         for slited in allSplitedText:
+ *             try:             # <<<<<<<<<<<<<<
+ *                 t = translator.translate(slited, dest=translate_to)
+ *             except:
+ */
+        }
+        __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
+        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
+        goto __pyx_L57_try_end;
+        __pyx_L50_error:;
+        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+        __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
+        __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
+        __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
+        __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
+        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+        /* "wrapper/infra/LanguageDetector.pyx":123
+ *             try:
+ *                 t = translator.translate(slited, dest=translate_to)
+ *             except:             # <<<<<<<<<<<<<<
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+ *             if not t or not t.text:
+ */
+        /*except:*/ {
+          __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
+          if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_8, &__pyx_t_5) < 0) __PYX_ERR(0, 123, __pyx_L52_except_error)
+          __Pyx_XGOTREF(__pyx_t_1);
+          __Pyx_XGOTREF(__pyx_t_8);
+          __Pyx_XGOTREF(__pyx_t_5);
+
+          /* "wrapper/infra/LanguageDetector.pyx":124
+ *                 t = translator.translate(slited, dest=translate_to)
+ *             except:
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")             # <<<<<<<<<<<<<<
+ *             if not t or not t.text:
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')
+ */
+          __pyx_t_3 = PyTuple_New(4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 124, __pyx_L52_except_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __pyx_t_6 = 0;
+          __pyx_t_18 = 127;
+          __Pyx_INCREF(__pyx_kp_u_Error_to_translate);
+          __pyx_t_6 += 19;
+          __Pyx_GIVEREF(__pyx_kp_u_Error_to_translate);
+          PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_kp_u_Error_to_translate);
+          __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 124, __pyx_L52_except_error)
+          __Pyx_GOTREF(__pyx_t_20);
+          __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
+          __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
+          __Pyx_GIVEREF(__pyx_t_20);
+          PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_20);
+          __pyx_t_20 = 0;
+          __Pyx_INCREF(__pyx_kp_u_to);
+          __pyx_t_6 += 4;
+          __Pyx_GIVEREF(__pyx_kp_u_to);
+          PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_kp_u_to);
+          __pyx_t_20 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 124, __pyx_L52_except_error)
+          __Pyx_GOTREF(__pyx_t_20);
+          __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_20) : __pyx_t_18;
+          __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_20);
+          __Pyx_GIVEREF(__pyx_t_20);
+          PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_20);
+          __pyx_t_20 = 0;
+          __pyx_t_20 = __Pyx_PyUnicode_Join(__pyx_t_3, 4, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 124, __pyx_L52_except_error)
+          __Pyx_GOTREF(__pyx_t_20);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_20); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 124, __pyx_L52_except_error)
+          __Pyx_GOTREF(__pyx_t_3);
+          __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
+          __Pyx_Raise(__pyx_t_3, 0, 0, 0);
+          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+          __PYX_ERR(0, 124, __pyx_L52_except_error)
+        }
+
+        /* "wrapper/infra/LanguageDetector.pyx":121
+ *         translated_sentences = []
+ *         for slited in allSplitedText:
+ *             try:             # <<<<<<<<<<<<<<
+ *                 t = translator.translate(slited, dest=translate_to)
+ *             except:
+ */
+        __pyx_L52_except_error:;
+        __Pyx_XGIVEREF(__pyx_t_13);
+        __Pyx_XGIVEREF(__pyx_t_12);
+        __Pyx_XGIVEREF(__pyx_t_11);
+        __Pyx_ExceptionReset(__pyx_t_13, __pyx_t_12, __pyx_t_11);
+        goto __pyx_L1_error;
+        __pyx_L57_try_end:;
+      }
+
+      /* "wrapper/infra/LanguageDetector.pyx":125
+ *             except:
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+ *             if not t or not t.text:             # <<<<<<<<<<<<<<
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')
+ *             translated_sentences.append(t.text)
+ */
+      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_t); if (unlikely((__pyx_t_9 < 0))) __PYX_ERR(0, 125, __pyx_L1_error)
+      __pyx_t_24 = (!__pyx_t_9);
+      if (!__pyx_t_24) {
+      } else {
+        __pyx_t_23 = __pyx_t_24;
+        goto __pyx_L61_bool_binop_done;
+      }
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 125, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_24 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely((__pyx_t_24 < 0))) __PYX_ERR(0, 125, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __pyx_t_9 = (!__pyx_t_24);
+      __pyx_t_23 = __pyx_t_9;
+      __pyx_L61_bool_binop_done:;
+      if (unlikely(__pyx_t_23)) {
+
+        /* "wrapper/infra/LanguageDetector.pyx":126
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+ *             if not t or not t.text:
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')             # <<<<<<<<<<<<<<
+ *             translated_sentences.append(t.text)
+ *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
+ */
+        __pyx_t_5 = PyTuple_New(5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 126, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        __pyx_t_6 = 0;
+        __pyx_t_18 = 127;
+        __Pyx_INCREF(__pyx_kp_u_Translate);
+        __pyx_t_6 += 10;
+        __Pyx_GIVEREF(__pyx_kp_u_Translate);
+        PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_u_Translate);
+        __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_slited, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 126, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
+        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
+        __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+        __Pyx_GIVEREF(__pyx_t_8);
+        PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_8);
+        __pyx_t_8 = 0;
+        __Pyx_INCREF(__pyx_kp_u_to);
+        __pyx_t_6 += 4;
+        __Pyx_GIVEREF(__pyx_kp_u_to);
+        PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_kp_u_to);
+        __pyx_t_8 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 126, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
+        __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_8) : __pyx_t_18;
+        __pyx_t_6 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_8);
+        __Pyx_GIVEREF(__pyx_t_8);
+        PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_8);
+        __pyx_t_8 = 0;
+        __Pyx_INCREF(__pyx_kp_u_error_2);
+        __pyx_t_6 += 6;
+        __Pyx_GIVEREF(__pyx_kp_u_error_2);
+        PyTuple_SET_ITEM(__pyx_t_5, 4, __pyx_kp_u_error_2);
+        __pyx_t_8 = __Pyx_PyUnicode_Join(__pyx_t_5, 5, __pyx_t_6, __pyx_t_18); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 126, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_8);
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 126, __pyx_L1_error)
+        __Pyx_GOTREF(__pyx_t_5);
+        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+        __Pyx_Raise(__pyx_t_5, 0, 0, 0);
+        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+        __PYX_ERR(0, 126, __pyx_L1_error)
+
+        /* "wrapper/infra/LanguageDetector.pyx":125
+ *             except:
+ *                 raise Exception(f"Error to translate {slited} to {translate_to}")
+ *             if not t or not t.text:             # <<<<<<<<<<<<<<
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')
+ *             translated_sentences.append(t.text)
+ */
+      }
+
+      /* "wrapper/infra/LanguageDetector.pyx":127
+ *             if not t or not t.text:
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')
+ *             translated_sentences.append(t.text)             # <<<<<<<<<<<<<<
+ *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
+ *     else:
+ */
+      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_text); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 127, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_translated_sentences, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 127, __pyx_L1_error)
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+
+      /* "wrapper/infra/LanguageDetector.pyx":120
+ *     if translate_to and detected[0] != translate_to:
+ *         translated_sentences = []
+ *         for slited in allSplitedText:             # <<<<<<<<<<<<<<
+ *             try:
+ *                 t = translator.translate(slited, dest=translate_to)
+ */
+    }
     __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":128
+ *                 raise Exception(f'Translate {slited} to {translate_to} error')
+ *             translated_sentences.append(t.text)
+ *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')             # <<<<<<<<<<<<<<
+ *     else:
+ *         translated_sentences = allSplitedText
+ */
+    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_logging); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_info); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_8);
     __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = PyTuple_New(4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_17 = 0;
+    __pyx_t_18 = 127;
+    __Pyx_INCREF(__pyx_kp_u_Detected_Text_Language);
+    __pyx_t_17 += 23;
+    __Pyx_GIVEREF(__pyx_kp_u_Detected_Text_Language);
+    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_u_Detected_Text_Language);
+    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_1);
+    __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_t_1, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_18;
+    __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
+    __Pyx_GIVEREF(__pyx_t_3);
+    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_3);
+    __pyx_t_3 = 0;
+    __Pyx_INCREF(__pyx_kp_u_Will_be_translated_to);
+    __pyx_t_17 += 24;
+    __Pyx_GIVEREF(__pyx_kp_u_Will_be_translated_to);
+    PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_kp_u_Will_be_translated_to);
+    __pyx_t_3 = __Pyx_PyObject_FormatSimple(__pyx_v_translate_to, __pyx_empty_unicode); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __pyx_t_18 = (__Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) > __pyx_t_18) ? __Pyx_PyUnicode_MAX_CHAR_VALUE(__pyx_t_3) : __pyx_t_18;
+    __pyx_t_17 += __Pyx_PyUnicode_GET_LENGTH(__pyx_t_3);
+    __Pyx_GIVEREF(__pyx_t_3);
+    PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_3);
+    __pyx_t_3 = 0;
+    __pyx_t_3 = __Pyx_PyUnicode_Join(__pyx_t_5, 4, __pyx_t_17, __pyx_t_18); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 128, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __pyx_t_5 = NULL;
+    __pyx_t_4 = 0;
+    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
+      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_8);
+      if (likely(__pyx_t_5)) {
+        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
+        __Pyx_INCREF(__pyx_t_5);
+        __Pyx_INCREF(function);
+        __Pyx_DECREF_SET(__pyx_t_8, function);
+        __pyx_t_4 = 1;
+      }
+    }
+    {
+      PyObject *__pyx_callargs[2] = {__pyx_t_5, __pyx_t_3};
+      __pyx_t_2 = __Pyx_PyObject_FastCall(__pyx_t_8, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L1_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+    }
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-    /* "tests/ProcessPDFImageTest.pyx":32
- *         except:
- *             print(traceback.format_exc())
- *     if dcsearch.files:             # <<<<<<<<<<<<<<
- *         dcsearch.train_model()
- *         # dcsearch.search_documents("good work", 'en')
+    /* "wrapper/infra/LanguageDetector.pyx":118
+ *         raise Exception("Language not detected")
+ * 
+ *     if translate_to and detected[0] != translate_to:             # <<<<<<<<<<<<<<
+ *         translated_sentences = []
+ *         for slited in allSplitedText:
  */
+    goto __pyx_L45;
   }
 
-  /* "tests/ProcessPDFImageTest.pyx":9
- * dir = '/home/tiago/media'
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():             # <<<<<<<<<<<<<<
- *     load()
- *     dcsearch = DocumentSearch(dir)
+  /* "wrapper/infra/LanguageDetector.pyx":130
+ *         logging.info(f'Detected Text Language {detected[0]}. Will be translated to {translate_to}')
+ *     else:
+ *         translated_sentences = allSplitedText             # <<<<<<<<<<<<<<
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)
+ */
+  /*else*/ {
+    __Pyx_INCREF(__pyx_v_allSplitedText);
+    __pyx_v_translated_sentences = __pyx_v_allSplitedText;
+  }
+  __pyx_L45:;
+
+  /* "wrapper/infra/LanguageDetector.pyx":131
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
  */
+  {
+    __Pyx_PyThreadState_declare
+    __Pyx_PyThreadState_assign
+    __Pyx_ExceptionSave(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
+    __Pyx_XGOTREF(__pyx_t_11);
+    __Pyx_XGOTREF(__pyx_t_12);
+    __Pyx_XGOTREF(__pyx_t_13);
+    /*try:*/ {
+
+      /* "wrapper/infra/LanguageDetector.pyx":132
+ *         translated_sentences = allSplitedText
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)             # <<<<<<<<<<<<<<
+ *     except:
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ */
+      __pyx_t_2 = PyUnicode_Join(__pyx_kp_u_, __pyx_v_translated_sentences); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 132, __pyx_L64_error)
+      __Pyx_GOTREF(__pyx_t_2);
+      __pyx_v_translated_text = ((PyObject*)__pyx_t_2);
+      __pyx_t_2 = 0;
 
-  /* function exit code */
-  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
+      /* "wrapper/infra/LanguageDetector.pyx":131
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ */
+    }
+    __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
+    __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
+    __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
+    goto __pyx_L69_try_end;
+    __pyx_L64_error:;
+    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __Pyx_XDECREF(__pyx_t_19); __pyx_t_19 = 0;
+    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
+    __Pyx_XDECREF(__pyx_t_20); __pyx_t_20 = 0;
+    __Pyx_XDECREF(__pyx_t_21); __pyx_t_21 = 0;
+    __Pyx_XDECREF(__pyx_t_22); __pyx_t_22 = 0;
+    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
+    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
+    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+
+    /* "wrapper/infra/LanguageDetector.pyx":133
+ *     try:
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:             # <<<<<<<<<<<<<<
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ * 
+ */
+    /*except:*/ {
+      __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_8, &__pyx_t_3) < 0) __PYX_ERR(0, 133, __pyx_L66_except_error)
+      __Pyx_XGOTREF(__pyx_t_2);
+      __Pyx_XGOTREF(__pyx_t_8);
+      __Pyx_XGOTREF(__pyx_t_3);
+
+      /* "wrapper/infra/LanguageDetector.pyx":134
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')             # <<<<<<<<<<<<<<
+ * 
+ *     logging.debug(f'Translated text: \n {translated_text}')
+ */
+      __pyx_t_5 = __Pyx_PyObject_FormatSimple(__pyx_v_translated_sentences, __pyx_empty_unicode); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 134, __pyx_L66_except_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __pyx_t_1 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Error_to_concatenate_text, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 134, __pyx_L66_except_error)
+      __Pyx_GOTREF(__pyx_t_1);
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])), __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 134, __pyx_L66_except_error)
+      __Pyx_GOTREF(__pyx_t_5);
+      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+      __Pyx_Raise(__pyx_t_5, 0, 0, 0);
+      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+      __PYX_ERR(0, 134, __pyx_L66_except_error)
+    }
+
+    /* "wrapper/infra/LanguageDetector.pyx":131
+ *     else:
+ *         translated_sentences = allSplitedText
+ *     try:             # <<<<<<<<<<<<<<
+ *         translated_text = ' '.join(translated_sentences)
+ *     except:
+ */
+    __pyx_L66_except_error:;
+    __Pyx_XGIVEREF(__pyx_t_11);
+    __Pyx_XGIVEREF(__pyx_t_12);
+    __Pyx_XGIVEREF(__pyx_t_13);
+    __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
+    goto __pyx_L1_error;
+    __pyx_L69_try_end:;
+  }
+
+  /* "wrapper/infra/LanguageDetector.pyx":136
+ *         raise Exception(f'Error to concatenate text {translated_sentences}')
+ * 
+ *     logging.debug(f'Translated text: \n {translated_text}')             # <<<<<<<<<<<<<<
+ * 
+ *     return detected[0], translated_text
+ */
+  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_logging); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_debug); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = __Pyx_PyUnicode_Unicode(__pyx_v_translated_text); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_8);
+  __pyx_t_5 = __Pyx_PyUnicode_Concat(__pyx_kp_u_Translated_text, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 136, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_5);
+  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
+  __pyx_t_8 = NULL;
+  __pyx_t_4 = 0;
+  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
+    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_2);
+    if (likely(__pyx_t_8)) {
+      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
+      __Pyx_INCREF(__pyx_t_8);
+      __Pyx_INCREF(function);
+      __Pyx_DECREF_SET(__pyx_t_2, function);
+      __pyx_t_4 = 1;
+    }
+  }
+  {
+    PyObject *__pyx_callargs[2] = {__pyx_t_8, __pyx_t_5};
+    __pyx_t_3 = __Pyx_PyObject_FastCall(__pyx_t_2, __pyx_callargs+1-__pyx_t_4, 1+__pyx_t_4);
+    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
+    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 136, __pyx_L1_error)
+    __Pyx_GOTREF(__pyx_t_3);
+    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  }
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":138
+ *     logging.debug(f'Translated text: \n {translated_text}')
+ * 
+ *     return detected[0], translated_text             # <<<<<<<<<<<<<<
+ */
+  __Pyx_XDECREF(__pyx_r);
+  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_detected, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 138, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 138, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_GIVEREF(__pyx_t_3);
+  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
+  __Pyx_INCREF(__pyx_v_translated_text);
+  __Pyx_GIVEREF(__pyx_v_translated_text);
+  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_translated_text);
+  __pyx_t_3 = 0;
+  __pyx_r = __pyx_t_2;
+  __pyx_t_2 = 0;
   goto __pyx_L0;
+
+  /* "wrapper/infra/LanguageDetector.pyx":54
+ * 
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):             # <<<<<<<<<<<<<<
+ *     translator = Translator(service_urls=[
+ *       'translate.google.com',
+ */
+
+  /* function exit code */
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_1);
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   __Pyx_XDECREF(__pyx_t_5);
-  __Pyx_XDECREF(__pyx_t_11);
-  __Pyx_XDECREF(__pyx_t_13);
-  __Pyx_XDECREF(__pyx_t_14);
-  __Pyx_AddTraceback("tests.ProcessPDFImageTest.start", __pyx_clineno, __pyx_lineno, __pyx_filename);
+  __Pyx_XDECREF(__pyx_t_8);
+  __Pyx_XDECREF(__pyx_t_19);
+  __Pyx_XDECREF(__pyx_t_20);
+  __Pyx_XDECREF(__pyx_t_21);
+  __Pyx_XDECREF(__pyx_t_22);
+  __Pyx_AddTraceback("wrapper.infra.LanguageDetector.detect_lang_by_google_translate", __pyx_clineno, __pyx_lineno, __pyx_filename);
   __pyx_r = NULL;
   __pyx_L0:;
-  __Pyx_XDECREF(__pyx_v_dcsearch);
-  __Pyx_XDECREF(__pyx_v_file);
-  __Pyx_XDECREF(__pyx_v_doc);
+  __Pyx_XDECREF(__pyx_v_translator);
+  __Pyx_XDECREF(__pyx_v_norm_text);
+  __Pyx_XDECREF(__pyx_v_sentences);
+  __Pyx_XDECREF(__pyx_v_splitedText);
+  __Pyx_XDECREF(__pyx_v_x);
+  __Pyx_XDECREF(__pyx_v_arr);
+  __Pyx_XDECREF(__pyx_v_detecteds_sentences);
+  __Pyx_XDECREF(__pyx_v_allSplitedText);
+  __Pyx_XDECREF(__pyx_v_tokens);
+  __Pyx_XDECREF(__pyx_v_slited);
+  __Pyx_XDECREF(__pyx_v_retry);
+  __Pyx_XDECREF(__pyx_v_det);
+  __Pyx_XDECREF(__pyx_v_lang);
+  __Pyx_XDECREF(__pyx_v_detected);
+  __Pyx_XDECREF(__pyx_v_translated_sentences);
+  __Pyx_XDECREF(__pyx_v_t);
+  __Pyx_XDECREF(__pyx_v_translated_text);
+  __Pyx_XDECREF(__pyx_8genexpr1__pyx_v_x);
   __Pyx_XGIVEREF(__pyx_r);
   __Pyx_RefNannyFinishContext();
   return __pyx_r;
 }
 
 static PyMethodDef __pyx_methods[] = {
   {0, 0, 0, 0}
 };
-
-static int __pyx_import_star_set(PyObject *o, PyObject* py_name, char *name) {
-  static const char* internal_type_names[] = {
-    0
-  };
-  const char** type_name = internal_type_names;
-  while (*type_name) {
-    if (__Pyx_StrEq(name, *type_name)) {
-      PyErr_Format(PyExc_TypeError, "Cannot overwrite C type %s", name);
-      goto bad;
-    }
-    type_name++;
-  }
-  if (0);
-  else {
-    if (PyObject_SetAttr(__pyx_m, py_name, o) < 0) goto bad;
-  }
-  return 0;
-  bad:
-  return -1;
-}
-
-static int
-__Pyx_import_all_from(PyObject *locals, PyObject *v)
-{
-    PyObject *all = PyObject_GetAttrString(v, "__all__");
-    PyObject *dict, *name, *value;
-    int skip_leading_underscores = 0;
-    int pos, err;
-    if (all == NULL) {
-        if (!PyErr_ExceptionMatches(PyExc_AttributeError))
-            return -1;
-        PyErr_Clear();
-        dict = PyObject_GetAttrString(v, "__dict__");
-        if (dict == NULL) {
-            if (!PyErr_ExceptionMatches(PyExc_AttributeError))
-                return -1;
-            PyErr_SetString(PyExc_ImportError,
-            "from-import-* object has no __dict__ and no __all__");
-            return -1;
-        }
-#if PY_MAJOR_VERSION < 3
-        all = PyObject_CallMethod(dict, (char *)"keys", NULL);
-#else
-        all = PyMapping_Keys(dict);
-#endif
-        Py_DECREF(dict);
-        if (all == NULL)
-            return -1;
-        skip_leading_underscores = 1;
-    }
-    for (pos = 0, err = 0; ; pos++) {
-        name = PySequence_GetItem(all, pos);
-        if (name == NULL) {
-            if (!PyErr_ExceptionMatches(PyExc_IndexError))
-                err = -1;
-            else
-                PyErr_Clear();
-            break;
-        }
-        if (skip_leading_underscores &&
-#if PY_MAJOR_VERSION < 3
-            likely(PyString_Check(name)) &&
-            PyString_AS_STRING(name)[0] == '_')
-#else
-            likely(PyUnicode_Check(name)) &&
-            likely(__Pyx_PyUnicode_GET_LENGTH(name)) &&
-            __Pyx_PyUnicode_READ_CHAR(name, 0) == '_')
-#endif
-        {
-            Py_DECREF(name);
-            continue;
-        }
-        value = PyObject_GetAttr(v, name);
-        if (value == NULL)
-            err = -1;
-        else if (PyDict_CheckExact(locals))
-            err = PyDict_SetItem(locals, name, value);
-        else
-            err = PyObject_SetItem(locals, name, value);
-        Py_DECREF(name);
-        Py_XDECREF(value);
-        if (err != 0)
-            break;
-    }
-    Py_DECREF(all);
-    return err;
-}
-static int __pyx_import_star(PyObject* m) {
-    int i;
-    int ret = -1;
-    char* s;
-    PyObject *locals = 0;
-    PyObject *list = 0;
-#if PY_MAJOR_VERSION >= 3
-    PyObject *utf8_name = 0;
-#endif
-    PyObject *name;
-    PyObject *item;
-    locals = PyDict_New();              if (!locals) goto bad;
-    if (__Pyx_import_all_from(locals, m) < 0) goto bad;
-    list = PyDict_Items(locals);        if (!list) goto bad;
-    for(i=0; i<PyList_GET_SIZE(list); i++) {
-        name = PyTuple_GET_ITEM(PyList_GET_ITEM(list, i), 0);
-        item = PyTuple_GET_ITEM(PyList_GET_ITEM(list, i), 1);
-#if PY_MAJOR_VERSION >= 3
-        utf8_name = PyUnicode_AsUTF8String(name);
-        if (!utf8_name) goto bad;
-        s = PyBytes_AS_STRING(utf8_name);
-        if (__pyx_import_star_set(item, name, s) < 0) goto bad;
-        Py_DECREF(utf8_name); utf8_name = 0;
-#else
-        s = PyString_AsString(name);
-        if (!s) goto bad;
-        if (__pyx_import_star_set(item, name, s) < 0) goto bad;
-#endif
-    }
-    ret = 0;
-bad:
-    Py_XDECREF(locals);
-    Py_XDECREF(list);
-#if PY_MAJOR_VERSION >= 3
-    Py_XDECREF(utf8_name);
-#endif
-    return ret;
-}
-
-
 #ifndef CYTHON_SMALL_CODE
 #if defined(__clang__)
     #define CYTHON_SMALL_CODE
 #elif defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 3))
     #define CYTHON_SMALL_CODE __attribute__((cold))
 #else
     #define CYTHON_SMALL_CODE
 #endif
 #endif
 /* #### Code section: pystring_table ### */
 
 static int __Pyx_CreateStringTabAndInitStrings(void) {
   __Pyx_StringTabEntry __pyx_string_tab[] = {
-    {&__pyx_kp_u_031_810_827_59, __pyx_k_031_810_827_59, sizeof(__pyx_k_031_810_827_59), 0, 1, 0, 0},
-    {&__pyx_n_s_DocumentSearch, __pyx_k_DocumentSearch, sizeof(__pyx_k_DocumentSearch), 0, 0, 1, 1},
-    {&__pyx_n_s_File, __pyx_k_File, sizeof(__pyx_k_File), 0, 0, 1, 1},
-    {&__pyx_kp_u_Processing_image, __pyx_k_Processing_image, sizeof(__pyx_k_Processing_image), 0, 1, 0, 0},
-    {&__pyx_n_u_Tokens, __pyx_k_Tokens, sizeof(__pyx_k_Tokens), 0, 1, 0, 1},
-    {&__pyx_n_s__12, __pyx_k__12, sizeof(__pyx_k__12), 0, 0, 1, 1},
-    {&__pyx_n_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 1},
-    {&__pyx_kp_u__9, __pyx_k__9, sizeof(__pyx_k__9), 0, 1, 0, 0},
+    {&__pyx_kp_u_, __pyx_k_, sizeof(__pyx_k_), 0, 1, 0, 0},
+    {&__pyx_kp_u_Checked_tokens, __pyx_k_Checked_tokens, sizeof(__pyx_k_Checked_tokens), 0, 1, 0, 0},
+    {&__pyx_kp_u_Detected_Text_Language, __pyx_k_Detected_Text_Language, sizeof(__pyx_k_Detected_Text_Language), 0, 1, 0, 0},
+    {&__pyx_kp_u_Detected_object, __pyx_k_Detected_object, sizeof(__pyx_k_Detected_object), 0, 1, 0, 0},
+    {&__pyx_n_s_DocLanguage, __pyx_k_DocLanguage, sizeof(__pyx_k_DocLanguage), 0, 0, 1, 1},
+    {&__pyx_n_s_ENGLISH, __pyx_k_ENGLISH, sizeof(__pyx_k_ENGLISH), 0, 0, 1, 1},
+    {&__pyx_kp_u_Error_to_concatenate_text, __pyx_k_Error_to_concatenate_text, sizeof(__pyx_k_Error_to_concatenate_text), 0, 1, 0, 0},
+    {&__pyx_kp_u_Error_to_detect_language_for_sen, __pyx_k_Error_to_detect_language_for_sen, sizeof(__pyx_k_Error_to_detect_language_for_sen), 0, 1, 0, 0},
+    {&__pyx_kp_u_Error_to_translate, __pyx_k_Error_to_translate, sizeof(__pyx_k_Error_to_translate), 0, 1, 0, 0},
+    {&__pyx_n_s_FRENCH, __pyx_k_FRENCH, sizeof(__pyx_k_FRENCH), 0, 0, 1, 1},
+    {&__pyx_n_s_GERMAN, __pyx_k_GERMAN, sizeof(__pyx_k_GERMAN), 0, 0, 1, 1},
+    {&__pyx_kp_u_It_doesn_t_have_readable_sentenc, __pyx_k_It_doesn_t_have_readable_sentenc, sizeof(__pyx_k_It_doesn_t_have_readable_sentenc), 0, 1, 0, 0},
+    {&__pyx_kp_u_Lang_detected, __pyx_k_Lang_detected, sizeof(__pyx_k_Lang_detected), 0, 1, 0, 0},
+    {&__pyx_n_s_Language, __pyx_k_Language, sizeof(__pyx_k_Language), 0, 0, 1, 1},
+    {&__pyx_n_s_LanguageDetectorBuilder, __pyx_k_LanguageDetectorBuilder, sizeof(__pyx_k_LanguageDetectorBuilder), 0, 0, 1, 1},
+    {&__pyx_kp_u_Language_not_detected, __pyx_k_Language_not_detected, sizeof(__pyx_k_Language_not_detected), 0, 1, 0, 0},
+    {&__pyx_kp_u_None, __pyx_k_None, sizeof(__pyx_k_None), 0, 1, 0, 0},
+    {&__pyx_n_s_PORTUGUESE, __pyx_k_PORTUGUESE, sizeof(__pyx_k_PORTUGUESE), 0, 0, 1, 1},
+    {&__pyx_n_s_PreProcessing, __pyx_k_PreProcessing, sizeof(__pyx_k_PreProcessing), 0, 0, 1, 1},
+    {&__pyx_n_s_SPANISH, __pyx_k_SPANISH, sizeof(__pyx_k_SPANISH), 0, 0, 1, 1},
+    {&__pyx_kp_u_Translate, __pyx_k_Translate, sizeof(__pyx_k_Translate), 0, 1, 0, 0},
+    {&__pyx_kp_u_Translated_text, __pyx_k_Translated_text, sizeof(__pyx_k_Translated_text), 0, 1, 0, 0},
+    {&__pyx_kp_u_Translating_text_to, __pyx_k_Translating_text_to, sizeof(__pyx_k_Translating_text_to), 0, 1, 0, 0},
+    {&__pyx_n_s_Translator, __pyx_k_Translator, sizeof(__pyx_k_Translator), 0, 0, 1, 1},
+    {&__pyx_kp_u_Will_be_translated_to, __pyx_k_Will_be_translated_to, sizeof(__pyx_k_Will_be_translated_to), 0, 1, 0, 0},
+    {&__pyx_n_s_WordFixer, __pyx_k_WordFixer, sizeof(__pyx_k_WordFixer), 0, 0, 1, 1},
+    {&__pyx_n_s__14, __pyx_k__14, sizeof(__pyx_k__14), 0, 0, 1, 1},
+    {&__pyx_kp_u__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 1, 0, 0},
+    {&__pyx_kp_u__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 1, 0, 0},
+    {&__pyx_kp_u__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 1, 0, 0},
+    {&__pyx_n_s__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 0, 1, 1},
+    {&__pyx_n_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 1},
+    {&__pyx_n_s_allSplitedText, __pyx_k_allSplitedText, sizeof(__pyx_k_allSplitedText), 0, 0, 1, 1},
     {&__pyx_n_s_append, __pyx_k_append, sizeof(__pyx_k_append), 0, 0, 1, 1},
+    {&__pyx_n_s_arr, __pyx_k_arr, sizeof(__pyx_k_arr), 0, 0, 1, 1},
     {&__pyx_n_s_asyncio_coroutines, __pyx_k_asyncio_coroutines, sizeof(__pyx_k_asyncio_coroutines), 0, 0, 1, 1},
+    {&__pyx_n_s_build, __pyx_k_build, sizeof(__pyx_k_build), 0, 0, 1, 1},
+    {&__pyx_kp_u_checking, __pyx_k_checking, sizeof(__pyx_k_checking), 0, 1, 0, 0},
     {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_dcsearch, __pyx_k_dcsearch, sizeof(__pyx_k_dcsearch), 0, 0, 1, 1},
-    {&__pyx_n_s_detected_language, __pyx_k_detected_language, sizeof(__pyx_k_detected_language), 0, 0, 1, 1},
-    {&__pyx_n_s_dir, __pyx_k_dir, sizeof(__pyx_k_dir), 0, 0, 1, 1},
-    {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
-    {&__pyx_n_s_file, __pyx_k_file, sizeof(__pyx_k_file), 0, 0, 1, 1},
-    {&__pyx_n_s_files, __pyx_k_files, sizeof(__pyx_k_files), 0, 0, 1, 1},
-    {&__pyx_n_s_find_token, __pyx_k_find_token, sizeof(__pyx_k_find_token), 0, 0, 1, 1},
+    {&__pyx_n_s_debug, __pyx_k_debug, sizeof(__pyx_k_debug), 0, 0, 1, 1},
+    {&__pyx_n_s_dest, __pyx_k_dest, sizeof(__pyx_k_dest), 0, 0, 1, 1},
+    {&__pyx_n_s_det, __pyx_k_det, sizeof(__pyx_k_det), 0, 0, 1, 1},
+    {&__pyx_n_s_detect, __pyx_k_detect, sizeof(__pyx_k_detect), 0, 0, 1, 1},
+    {&__pyx_n_s_detect_lang, __pyx_k_detect_lang, sizeof(__pyx_k_detect_lang), 0, 0, 1, 1},
+    {&__pyx_n_s_detect_lang_by_google_translate, __pyx_k_detect_lang_by_google_translate, sizeof(__pyx_k_detect_lang_by_google_translate), 0, 0, 1, 1},
+    {&__pyx_n_s_detect_lang_by_google_translate_2, __pyx_k_detect_lang_by_google_translate_2, sizeof(__pyx_k_detect_lang_by_google_translate_2), 0, 0, 1, 1},
+    {&__pyx_n_s_detect_language_of, __pyx_k_detect_language_of, sizeof(__pyx_k_detect_language_of), 0, 0, 1, 1},
+    {&__pyx_n_s_detected, __pyx_k_detected, sizeof(__pyx_k_detected), 0, 0, 1, 1},
+    {&__pyx_kp_u_detected_language, __pyx_k_detected_language, sizeof(__pyx_k_detected_language), 0, 1, 0, 0},
+    {&__pyx_n_s_detecteds_sentences, __pyx_k_detecteds_sentences, sizeof(__pyx_k_detecteds_sentences), 0, 0, 1, 1},
+    {&__pyx_n_s_detector, __pyx_k_detector, sizeof(__pyx_k_detector), 0, 0, 1, 1},
+    {&__pyx_n_s_error, __pyx_k_error, sizeof(__pyx_k_error), 0, 0, 1, 1},
+    {&__pyx_kp_u_error_2, __pyx_k_error_2, sizeof(__pyx_k_error_2), 0, 1, 0, 0},
+    {&__pyx_n_s_extract_sentences, __pyx_k_extract_sentences, sizeof(__pyx_k_extract_sentences), 0, 0, 1, 1},
+    {&__pyx_kp_u_extracted_sentences, __pyx_k_extracted_sentences, sizeof(__pyx_k_extracted_sentences), 0, 1, 0, 0},
+    {&__pyx_n_s_fix_text, __pyx_k_fix_text, sizeof(__pyx_k_fix_text), 0, 0, 1, 1},
+    {&__pyx_n_s_fix_word, __pyx_k_fix_word, sizeof(__pyx_k_fix_word), 0, 0, 1, 1},
     {&__pyx_n_s_format_exc, __pyx_k_format_exc, sizeof(__pyx_k_format_exc), 0, 0, 1, 1},
-    {&__pyx_kp_u_home_tiago_media, __pyx_k_home_tiago_media, sizeof(__pyx_k_home_tiago_media), 0, 1, 0, 0},
+    {&__pyx_n_s_from_languages, __pyx_k_from_languages, sizeof(__pyx_k_from_languages), 0, 0, 1, 1},
+    {&__pyx_kp_u_from_sentences, __pyx_k_from_sentences, sizeof(__pyx_k_from_sentences), 0, 1, 0, 0},
+    {&__pyx_n_s_get_language_from_lingua, __pyx_k_get_language_from_lingua, sizeof(__pyx_k_get_language_from_lingua), 0, 0, 1, 1},
+    {&__pyx_n_s_googletrans, __pyx_k_googletrans, sizeof(__pyx_k_googletrans), 0, 0, 1, 1},
     {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
+    {&__pyx_n_s_info, __pyx_k_info, sizeof(__pyx_k_info), 0, 0, 1, 1},
     {&__pyx_n_s_initializing, __pyx_k_initializing, sizeof(__pyx_k_initializing), 0, 0, 1, 1},
     {&__pyx_n_s_is_coroutine, __pyx_k_is_coroutine, sizeof(__pyx_k_is_coroutine), 0, 0, 1, 1},
-    {&__pyx_n_u_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 1, 0, 1},
-    {&__pyx_n_s_load, __pyx_k_load, sizeof(__pyx_k_load), 0, 0, 1, 1},
+    {&__pyx_n_s_items, __pyx_k_items, sizeof(__pyx_k_items), 0, 0, 1, 1},
+    {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
+    {&__pyx_n_s_lang, __pyx_k_lang, sizeof(__pyx_k_lang), 0, 0, 1, 1},
+    {&__pyx_n_s_language, __pyx_k_language, sizeof(__pyx_k_language), 0, 0, 1, 1},
+    {&__pyx_n_s_languages, __pyx_k_languages, sizeof(__pyx_k_languages), 0, 0, 1, 1},
+    {&__pyx_n_s_lingua, __pyx_k_lingua, sizeof(__pyx_k_lingua), 0, 0, 1, 1},
+    {&__pyx_n_s_logging, __pyx_k_logging, sizeof(__pyx_k_logging), 0, 0, 1, 1},
     {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
+    {&__pyx_n_s_maxCheckedTokens, __pyx_k_maxCheckedTokens, sizeof(__pyx_k_maxCheckedTokens), 0, 0, 1, 1},
     {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
-    {&__pyx_n_s_named_entities, __pyx_k_named_entities, sizeof(__pyx_k_named_entities), 0, 0, 1, 1},
-    {&__pyx_n_u_named_entities, __pyx_k_named_entities, sizeof(__pyx_k_named_entities), 0, 1, 0, 1},
-    {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
-    {&__pyx_n_u_pt, __pyx_k_pt, sizeof(__pyx_k_pt), 0, 1, 0, 1},
-    {&__pyx_kp_u_regime_de_comunho_de_bens_031_81, __pyx_k_regime_de_comunho_de_bens_031_81, sizeof(__pyx_k_regime_de_comunho_de_bens_031_81), 0, 1, 0, 0},
-    {&__pyx_kp_u_res_docs_with_img_pdf_img_pdf, __pyx_k_res_docs_with_img_pdf_img_pdf, sizeof(__pyx_k_res_docs_with_img_pdf_img_pdf), 0, 1, 0, 0},
-    {&__pyx_kp_u_res_onus_pag1_pdf, __pyx_k_res_onus_pag1_pdf, sizeof(__pyx_k_res_onus_pag1_pdf), 0, 1, 0, 0},
-    {&__pyx_kp_u_res_onus_pag2_pdf, __pyx_k_res_onus_pag2_pdf, sizeof(__pyx_k_res_onus_pag2_pdf), 0, 1, 0, 0},
-    {&__pyx_kp_u_res_onus_pag3_pdf, __pyx_k_res_onus_pag3_pdf, sizeof(__pyx_k_res_onus_pag3_pdf), 0, 1, 0, 0},
-    {&__pyx_n_s_run, __pyx_k_run, sizeof(__pyx_k_run), 0, 0, 1, 1},
-    {&__pyx_n_s_search_documents, __pyx_k_search_documents, sizeof(__pyx_k_search_documents), 0, 0, 1, 1},
+    {&__pyx_n_s_norm_text, __pyx_k_norm_text, sizeof(__pyx_k_norm_text), 0, 0, 1, 1},
+    {&__pyx_n_s_normalize_text, __pyx_k_normalize_text, sizeof(__pyx_k_normalize_text), 0, 0, 1, 1},
+    {&__pyx_n_s_original_language, __pyx_k_original_language, sizeof(__pyx_k_original_language), 0, 0, 1, 1},
+    {&__pyx_kp_u_result, __pyx_k_result, sizeof(__pyx_k_result), 0, 1, 0, 0},
+    {&__pyx_n_s_retry, __pyx_k_retry, sizeof(__pyx_k_retry), 0, 0, 1, 1},
+    {&__pyx_kp_u_retrying_Left, __pyx_k_retrying_Left, sizeof(__pyx_k_retrying_Left), 0, 1, 0, 0},
+    {&__pyx_n_s_reverse, __pyx_k_reverse, sizeof(__pyx_k_reverse), 0, 0, 1, 1},
+    {&__pyx_n_s_sentences, __pyx_k_sentences, sizeof(__pyx_k_sentences), 0, 0, 1, 1},
+    {&__pyx_n_s_service_urls, __pyx_k_service_urls, sizeof(__pyx_k_service_urls), 0, 0, 1, 1},
+    {&__pyx_n_s_sleep, __pyx_k_sleep, sizeof(__pyx_k_sleep), 0, 0, 1, 1},
+    {&__pyx_n_s_slited, __pyx_k_slited, sizeof(__pyx_k_slited), 0, 0, 1, 1},
+    {&__pyx_n_s_sorted, __pyx_k_sorted, sizeof(__pyx_k_sorted), 0, 0, 1, 1},
     {&__pyx_n_s_spec, __pyx_k_spec, sizeof(__pyx_k_spec), 0, 0, 1, 1},
-    {&__pyx_n_s_start, __pyx_k_start, sizeof(__pyx_k_start), 0, 0, 1, 1},
-    {&__pyx_n_s_summary, __pyx_k_summary, sizeof(__pyx_k_summary), 0, 0, 1, 1},
-    {&__pyx_n_u_summary, __pyx_k_summary, sizeof(__pyx_k_summary), 0, 1, 0, 1},
+    {&__pyx_n_s_split, __pyx_k_split, sizeof(__pyx_k_split), 0, 0, 1, 1},
+    {&__pyx_n_s_splitedText, __pyx_k_splitedText, sizeof(__pyx_k_splitedText), 0, 0, 1, 1},
+    {&__pyx_kp_s_src_wrapper_infra_LanguageDetect, __pyx_k_src_wrapper_infra_LanguageDetect, sizeof(__pyx_k_src_wrapper_infra_LanguageDetect), 0, 0, 1, 0},
+    {&__pyx_n_s_strip, __pyx_k_strip, sizeof(__pyx_k_strip), 0, 0, 1, 1},
+    {&__pyx_n_s_t, __pyx_k_t, sizeof(__pyx_k_t), 0, 0, 1, 1},
     {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
-    {&__pyx_n_s_tests_ProcessPDFImageTest, __pyx_k_tests_ProcessPDFImageTest, sizeof(__pyx_k_tests_ProcessPDFImageTest), 0, 0, 1, 1},
-    {&__pyx_kp_s_tests_ProcessPDFImageTest_pyx, __pyx_k_tests_ProcessPDFImageTest_pyx, sizeof(__pyx_k_tests_ProcessPDFImageTest_pyx), 0, 0, 1, 0},
     {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
-    {&__pyx_n_u_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 1, 0, 1},
+    {&__pyx_n_s_time, __pyx_k_time, sizeof(__pyx_k_time), 0, 0, 1, 1},
+    {&__pyx_kp_u_to, __pyx_k_to, sizeof(__pyx_k_to), 0, 1, 0, 0},
     {&__pyx_n_s_tokens, __pyx_k_tokens, sizeof(__pyx_k_tokens), 0, 0, 1, 1},
+    {&__pyx_n_s_total_tokens, __pyx_k_total_tokens, sizeof(__pyx_k_total_tokens), 0, 0, 1, 1},
     {&__pyx_n_s_traceback, __pyx_k_traceback, sizeof(__pyx_k_traceback), 0, 0, 1, 1},
-    {&__pyx_n_s_train_model, __pyx_k_train_model, sizeof(__pyx_k_train_model), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_Process, __pyx_k_wrapper_Process, sizeof(__pyx_k_wrapper_Process), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_core_DocumentSearch, __pyx_k_wrapper_core_DocumentSearch, sizeof(__pyx_k_wrapper_core_DocumentSearch), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_core_File, __pyx_k_wrapper_core_File, sizeof(__pyx_k_wrapper_core_File), 0, 0, 1, 1},
-    {&__pyx_n_s_wrapper_core_Image, __pyx_k_wrapper_core_Image, sizeof(__pyx_k_wrapper_core_Image), 0, 0, 1, 1},
+    {&__pyx_n_s_translate, __pyx_k_translate, sizeof(__pyx_k_translate), 0, 0, 1, 1},
+    {&__pyx_kp_u_translate_google_co_kr, __pyx_k_translate_google_co_kr, sizeof(__pyx_k_translate_google_co_kr), 0, 1, 0, 0},
+    {&__pyx_kp_u_translate_google_com, __pyx_k_translate_google_com, sizeof(__pyx_k_translate_google_com), 0, 1, 0, 0},
+    {&__pyx_n_s_translate_to, __pyx_k_translate_to, sizeof(__pyx_k_translate_to), 0, 0, 1, 1},
+    {&__pyx_n_s_translated_sentences, __pyx_k_translated_sentences, sizeof(__pyx_k_translated_sentences), 0, 0, 1, 1},
+    {&__pyx_n_s_translated_text, __pyx_k_translated_text, sizeof(__pyx_k_translated_text), 0, 0, 1, 1},
+    {&__pyx_n_s_translator, __pyx_k_translator, sizeof(__pyx_k_translator), 0, 0, 1, 1},
+    {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
+    {&__pyx_n_s_wrapper_infra_LanguageDetector, __pyx_k_wrapper_infra_LanguageDetector, sizeof(__pyx_k_wrapper_infra_LanguageDetector), 0, 0, 1, 1},
+    {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
     {0, 0, 0, 0, 0, 0, 0}
   };
   return __Pyx_InitStrings(__pyx_string_tab);
 }
 /* #### Code section: cached_builtins ### */
 static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
-  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 14, __pyx_L1_error)
+  __pyx_builtin_sorted = __Pyx_GetBuiltinName(__pyx_n_s_sorted); if (!__pyx_builtin_sorted) __PYX_ERR(0, 111, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: cached_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
   __Pyx_RefNannyDeclarations
   __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);
 
-  /* "tests/ProcessPDFImageTest.pyx":14
- *     for file in files:
- *         try:
- *             print('Processing image')             # <<<<<<<<<<<<<<
- *             doc:File = None
- *             doc = run(dir, file)
- */
-  __pyx_tuple_ = PyTuple_Pack(1, __pyx_kp_u_Processing_image); if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 14, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple_);
-  __Pyx_GIVEREF(__pyx_tuple_);
-
-  /* "tests/ProcessPDFImageTest.pyx":17
- *             doc:File = None
- *             doc = run(dir, file)
- *             print("text")             # <<<<<<<<<<<<<<
- *             print(doc.text)
- *             print("named_entities")
- */
-  __pyx_tuple__2 = PyTuple_Pack(1, __pyx_n_u_text); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 17, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__2);
-  __Pyx_GIVEREF(__pyx_tuple__2);
-
-  /* "tests/ProcessPDFImageTest.pyx":19
- *             print("text")
- *             print(doc.text)
- *             print("named_entities")             # <<<<<<<<<<<<<<
- *             print(doc.named_entities)
- *             print("summary")
- */
-  __pyx_tuple__3 = PyTuple_Pack(1, __pyx_n_u_named_entities); if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 19, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__3);
-  __Pyx_GIVEREF(__pyx_tuple__3);
-
-  /* "tests/ProcessPDFImageTest.pyx":21
- *             print("named_entities")
- *             print(doc.named_entities)
- *             print("summary")             # <<<<<<<<<<<<<<
- *             print(doc.summary)
- *             print("Tokens")
- */
-  __pyx_tuple__4 = PyTuple_Pack(1, __pyx_n_u_summary); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 21, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__4);
-  __Pyx_GIVEREF(__pyx_tuple__4);
-
-  /* "tests/ProcessPDFImageTest.pyx":23
- *             print("summary")
- *             print(doc.summary)
- *             print("Tokens")             # <<<<<<<<<<<<<<
- *             print(doc.tokens)
- *             print("language")
+  /* "wrapper/infra/LanguageDetector.pyx":116
+ *         # raise Exception(f"The language detected corresponds for less than 50% of the sentences in the text. The detected sentences {detecteds_sentences}.")
+ *         logging.error("Language not detected")
+ *         raise Exception("Language not detected")             # <<<<<<<<<<<<<<
+ * 
+ *     if translate_to and detected[0] != translate_to:
  */
-  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_n_u_Tokens); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 23, __pyx_L1_error)
+  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_kp_u_Language_not_detected); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 116, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__5);
   __Pyx_GIVEREF(__pyx_tuple__5);
 
-  /* "tests/ProcessPDFImageTest.pyx":25
- *             print("Tokens")
- *             print(doc.tokens)
- *             print("language")             # <<<<<<<<<<<<<<
- *             print(doc.detected_language)
- *             # print(img.text_features)
- */
-  __pyx_tuple__6 = PyTuple_Pack(1, __pyx_n_u_language); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 25, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__6);
-  __Pyx_GIVEREF(__pyx_tuple__6);
-
-  /* "tests/ProcessPDFImageTest.pyx":35
- *         dcsearch.train_model()
- *         # dcsearch.search_documents("good work", 'en')
- *         dcsearch.search_documents("regime de comunho de bens 031.810.827-59", 'pt')             # <<<<<<<<<<<<<<
- *         # dcsearch.search_documents("regime de comunho de bens", 'pt')
- * 
- */
-  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_kp_u_regime_de_comunho_de_bens_031_81, __pyx_n_u_pt); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 35, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_tuple__7);
-  __Pyx_GIVEREF(__pyx_tuple__7);
-
-  /* "tests/ProcessPDFImageTest.pyx":9
- * dir = '/home/tiago/media'
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():             # <<<<<<<<<<<<<<
- *     load()
- *     dcsearch = DocumentSearch(dir)
- */
-  __pyx_tuple__10 = PyTuple_Pack(3, __pyx_n_s_dcsearch, __pyx_n_s_file, __pyx_n_s_doc); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 9, __pyx_L1_error)
+  /* "wrapper/infra/LanguageDetector.pyx":10
+ * from .DocLanguage import DocLanguage
+ * 
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):             # <<<<<<<<<<<<<<
+ *     detected = original_language
+ *     if not original_language:
+ */
+  __pyx_tuple__8 = PyTuple_Pack(15, __pyx_n_s_text, __pyx_n_s_translate_to, __pyx_n_s_original_language, __pyx_n_s_fix_text, __pyx_n_s_detected, __pyx_n_s_languages, __pyx_n_s_detector, __pyx_n_s_language, __pyx_n_s_translated_sentences, __pyx_n_s_allSplitedText, __pyx_n_s_translator, __pyx_n_s_slited, __pyx_n_s_t, __pyx_n_s_translated_text, __pyx_n_s_x); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__8);
+  __Pyx_GIVEREF(__pyx_tuple__8);
+  __pyx_codeobj__9 = (PyObject*)__Pyx_PyCode_New(4, 0, 0, 15, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__8, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_LanguageDetect, __pyx_n_s_detect_lang, 10, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__9)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_tuple__10 = PyTuple_Pack(3, ((PyObject *)Py_None), ((PyObject *)Py_None), ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_tuple__10);
   __Pyx_GIVEREF(__pyx_tuple__10);
-  __pyx_codeobj__11 = (PyObject*)__Pyx_PyCode_New(0, 0, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_tests_ProcessPDFImageTest_pyx, __pyx_n_s_start, 9, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__11)) __PYX_ERR(0, 9, __pyx_L1_error)
+
+  /* "wrapper/infra/LanguageDetector.pyx":54
+ * 
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):             # <<<<<<<<<<<<<<
+ *     translator = Translator(service_urls=[
+ *       'translate.google.com',
+ */
+  __pyx_tuple__11 = PyTuple_Pack(22, __pyx_n_s_text, __pyx_n_s_translate_to, __pyx_n_s_translator, __pyx_n_s_norm_text, __pyx_n_s_sentences, __pyx_n_s_splitedText, __pyx_n_s_total_tokens, __pyx_n_s_x, __pyx_n_s_arr, __pyx_n_s_detecteds_sentences, __pyx_n_s_allSplitedText, __pyx_n_s_tokens, __pyx_n_s_maxCheckedTokens, __pyx_n_s_slited, __pyx_n_s_retry, __pyx_n_s_det, __pyx_n_s_lang, __pyx_n_s_detected, __pyx_n_s_translated_sentences, __pyx_n_s_t, __pyx_n_s_translated_text, __pyx_n_s_x); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__11);
+  __Pyx_GIVEREF(__pyx_tuple__11);
+  __pyx_codeobj__12 = (PyObject*)__Pyx_PyCode_New(2, 0, 0, 22, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__11, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_wrapper_infra_LanguageDetect, __pyx_n_s_detect_lang_by_google_translate_2, 54, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__12)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __pyx_tuple__13 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 54, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_tuple__13);
+  __Pyx_GIVEREF(__pyx_tuple__13);
   __Pyx_RefNannyFinishContext();
   return 0;
   __pyx_L1_error:;
   __Pyx_RefNannyFinishContext();
   return -1;
 }
 /* #### Code section: init_constants ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitConstants(void) {
+  __pyx_umethod_PyDict_Type_items.type = (PyObject*)&PyDict_Type;
+  __pyx_umethod_PyDict_Type_items.method_name = &__pyx_n_s_items;
   if (__Pyx_CreateStringTabAndInitStrings() < 0) __PYX_ERR(0, 1, __pyx_L1_error);
+  __pyx_float_0_5 = PyFloat_FromDouble(0.5); if (unlikely(!__pyx_float_0_5)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_int_4 = PyInt_FromLong(4); if (unlikely(!__pyx_int_4)) __PYX_ERR(0, 1, __pyx_L1_error)
   return 0;
   __pyx_L1_error:;
   return -1;
 }
 /* #### Code section: init_globals ### */
 
 static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
@@ -3361,31 +6574,31 @@
   return 0;
 }
 
 
 #if PY_MAJOR_VERSION >= 3
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
-static int __pyx_pymod_exec_ProcessPDFImageTest(PyObject* module); /*proto*/
+static int __pyx_pymod_exec_LanguageDetector(PyObject* module); /*proto*/
 static PyModuleDef_Slot __pyx_moduledef_slots[] = {
   {Py_mod_create, (void*)__pyx_pymod_create},
-  {Py_mod_exec, (void*)__pyx_pymod_exec_ProcessPDFImageTest},
+  {Py_mod_exec, (void*)__pyx_pymod_exec_LanguageDetector},
   {0, NULL}
 };
 #endif
 
 #ifdef __cplusplus
 namespace {
   struct PyModuleDef __pyx_moduledef =
   #else
   static struct PyModuleDef __pyx_moduledef =
   #endif
   {
       PyModuleDef_HEAD_INIT,
-      "ProcessPDFImageTest",
+      "LanguageDetector",
       0, /* m_doc */
     #if CYTHON_PEP489_MULTI_PHASE_INIT
       0, /* m_size */
     #elif CYTHON_USE_MODULE_STATE
       sizeof(__pyx_mstate), /* m_size */
     #else
       -1, /* m_size */
@@ -3425,19 +6638,19 @@
 #else
 #define __Pyx_PyMODINIT_FUNC PyObject *
 #endif
 #endif
 
 
 #if PY_MAJOR_VERSION < 3
-__Pyx_PyMODINIT_FUNC initProcessPDFImageTest(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC initProcessPDFImageTest(void)
+__Pyx_PyMODINIT_FUNC initLanguageDetector(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC initLanguageDetector(void)
 #else
-__Pyx_PyMODINIT_FUNC PyInit_ProcessPDFImageTest(void) CYTHON_SMALL_CODE; /*proto*/
-__Pyx_PyMODINIT_FUNC PyInit_ProcessPDFImageTest(void)
+__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void) CYTHON_SMALL_CODE; /*proto*/
+__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void)
 #if CYTHON_PEP489_MULTI_PHASE_INIT
 {
   return PyModuleDef_Init(&__pyx_moduledef);
 }
 static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
     #if PY_VERSION_HEX >= 0x030700A1
     static PY_INT64_T main_interpreter_id = -1;
@@ -3510,15 +6723,15 @@
     return module;
 bad:
     Py_XDECREF(module);
     return NULL;
 }
 
 
-static CYTHON_SMALL_CODE int __pyx_pymod_exec_ProcessPDFImageTest(PyObject *__pyx_pyinit_module)
+static CYTHON_SMALL_CODE int __pyx_pymod_exec_LanguageDetector(PyObject *__pyx_pyinit_module)
 #endif
 #endif
 {
   int stringtab_initialized = 0;
   #if CYTHON_USE_MODULE_STATE
   int pystate_addmodule_run = 0;
   #endif
@@ -3528,33 +6741,33 @@
   int __pyx_lineno = 0;
   const char *__pyx_filename = NULL;
   int __pyx_clineno = 0;
   __Pyx_RefNannyDeclarations
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   if (__pyx_m) {
     if (__pyx_m == __pyx_pyinit_module) return 0;
-    PyErr_SetString(PyExc_RuntimeError, "Module 'ProcessPDFImageTest' has already been imported. Re-initialisation is not supported.");
+    PyErr_SetString(PyExc_RuntimeError, "Module 'LanguageDetector' has already been imported. Re-initialisation is not supported.");
     return -1;
   }
   #elif PY_MAJOR_VERSION >= 3
   if (__pyx_m) return __Pyx_NewRef(__pyx_m);
   #endif
   /*--- Module creation code ---*/
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   __pyx_m = __pyx_pyinit_module;
   Py_INCREF(__pyx_m);
   #else
   #if PY_MAJOR_VERSION < 3
-  __pyx_m = Py_InitModule4("ProcessPDFImageTest", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
+  __pyx_m = Py_InitModule4("LanguageDetector", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #elif CYTHON_USE_MODULE_STATE
   __pyx_t_1 = PyModule_Create(&__pyx_moduledef); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
   {
     int add_module_result = PyState_AddModule(__pyx_t_1, &__pyx_moduledef);
-    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to ProcessPDFImageTest pseudovariable */
+    __pyx_t_1 = 0; /* transfer ownership from __pyx_t_1 to LanguageDetector pseudovariable */
     if (unlikely((add_module_result < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     pystate_addmodule_run = 1;
   }
   #else
   __pyx_m = PyModule_Create(&__pyx_moduledef);
   if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
@@ -3572,15 +6785,15 @@
 if (!__Pyx_RefNanny) {
   PyErr_Clear();
   __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
   if (!__Pyx_RefNanny)
       Py_FatalError("failed to import 'refnanny' module");
 }
 #endif
-  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_ProcessPDFImageTest(void)", 0);
+  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_LanguageDetector(void)", 0);
   if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #ifdef __Pxy_PyFrame_Initialize_Offsets
   __Pxy_PyFrame_Initialize_Offsets();
   #endif
   __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
   __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -3610,22 +6823,22 @@
   /*--- Initialize various global constants etc. ---*/
   if (__Pyx_InitConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   stringtab_initialized = 1;
   if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
   if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
-  if (__pyx_module_is_main_tests__ProcessPDFImageTest) {
+  if (__pyx_module_is_main_wrapper__infra__LanguageDetector) {
     if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   }
   #if PY_MAJOR_VERSION >= 3
   {
     PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
-    if (!PyDict_GetItemString(modules, "tests.ProcessPDFImageTest")) {
-      if (unlikely((PyDict_SetItemString(modules, "tests.ProcessPDFImageTest", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
+    if (!PyDict_GetItemString(modules, "wrapper.infra.LanguageDetector")) {
+      if (unlikely((PyDict_SetItemString(modules, "wrapper.infra.LanguageDetector", __pyx_m) < 0))) __PYX_ERR(0, 1, __pyx_L1_error)
     }
   }
   #endif
   /*--- Builtin init code ---*/
   if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   /*--- Constants init code ---*/
   if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
@@ -3638,189 +6851,224 @@
   (void)__Pyx_modinit_variable_import_code();
   (void)__Pyx_modinit_function_import_code();
   /*--- Execution code ---*/
   #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
   if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   #endif
 
-  /* "tests/ProcessPDFImageTest.pyx":1
- * import traceback             # <<<<<<<<<<<<<<
- * from wrapper.Process import run, load
- * from wrapper.core.File import File
+  /* "wrapper/infra/LanguageDetector.pyx":1
+ * from . import PreProcessing             # <<<<<<<<<<<<<<
+ * from googletrans import Translator
+ * from .WordFixer import fix_word
  */
-  __pyx_t_2 = __Pyx_ImportDottedModule(__pyx_n_s_traceback, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_traceback, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_PreProcessing);
+  __Pyx_GIVEREF(__pyx_n_s_PreProcessing);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PreProcessing);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s__6, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PreProcessing); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_PreProcessing, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":2
+  /* "wrapper/infra/LanguageDetector.pyx":2
+ * from . import PreProcessing
+ * from googletrans import Translator             # <<<<<<<<<<<<<<
+ * from .WordFixer import fix_word
  * import traceback
- * from wrapper.Process import run, load             # <<<<<<<<<<<<<<
- * from wrapper.core.File import File
- * from wrapper.core.Image import *
  */
-  __pyx_t_2 = PyList_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_INCREF(__pyx_n_s_Translator);
+  __Pyx_GIVEREF(__pyx_n_s_Translator);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_Translator);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_googletrans, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s_run);
-  __Pyx_GIVEREF(__pyx_n_s_run);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_run);
-  __Pyx_INCREF(__pyx_n_s_load);
-  __Pyx_GIVEREF(__pyx_n_s_load);
-  PyList_SET_ITEM(__pyx_t_2, 1, __pyx_n_s_load);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_wrapper_Process, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Translator); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Translator, __pyx_t_3) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_run); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+
+  /* "wrapper/infra/LanguageDetector.pyx":3
+ * from . import PreProcessing
+ * from googletrans import Translator
+ * from .WordFixer import fix_word             # <<<<<<<<<<<<<<
+ * import traceback
+ * import time
+ */
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_run, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_fix_word);
+  __Pyx_GIVEREF(__pyx_n_s_fix_word);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_fix_word);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_WordFixer, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_load); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_fix_word); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_load, __pyx_t_2) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_fix_word, __pyx_t_2) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":3
- * import traceback
- * from wrapper.Process import run, load
- * from wrapper.core.File import File             # <<<<<<<<<<<<<<
- * from wrapper.core.Image import *
- * from wrapper.core.DocumentSearch import DocumentSearch
+  /* "wrapper/infra/LanguageDetector.pyx":4
+ * from googletrans import Translator
+ * from .WordFixer import fix_word
+ * import traceback             # <<<<<<<<<<<<<<
+ * import time
+ * import logging
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_traceback, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_File);
-  __Pyx_GIVEREF(__pyx_n_s_File);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_File);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_wrapper_core_File, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_traceback, __pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_File); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3, __pyx_L1_error)
+
+  /* "wrapper/infra/LanguageDetector.pyx":5
+ * from .WordFixer import fix_word
+ * import traceback
+ * import time             # <<<<<<<<<<<<<<
+ * import logging
+ * from lingua import Language, LanguageDetectorBuilder
+ */
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_time, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_File, __pyx_t_3) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_time, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":4
- * from wrapper.Process import run, load
- * from wrapper.core.File import File
- * from wrapper.core.Image import *             # <<<<<<<<<<<<<<
- * from wrapper.core.DocumentSearch import DocumentSearch
- * 
+  /* "wrapper/infra/LanguageDetector.pyx":6
+ * import traceback
+ * import time
+ * import logging             # <<<<<<<<<<<<<<
+ * from lingua import Language, LanguageDetectorBuilder
+ * from .DocLanguage import DocLanguage
  */
-  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4, __pyx_L1_error)
-  __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_n_s__8);
-  __Pyx_GIVEREF(__pyx_n_s__8);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s__8);
-  __pyx_t_3 = __Pyx_Import(__pyx_n_s_wrapper_core_Image, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportDottedModule(__pyx_n_s_logging, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
-  if (__pyx_import_star(__pyx_t_3) < 0) __PYX_ERR(0, 4, __pyx_L1_error);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_logging, __pyx_t_3) < 0) __PYX_ERR(0, 6, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":5
- * from wrapper.core.File import File
- * from wrapper.core.Image import *
- * from wrapper.core.DocumentSearch import DocumentSearch             # <<<<<<<<<<<<<<
+  /* "wrapper/infra/LanguageDetector.pyx":7
+ * import time
+ * import logging
+ * from lingua import Language, LanguageDetectorBuilder             # <<<<<<<<<<<<<<
+ * from .DocLanguage import DocLanguage
  * 
- * dir = '/home/tiago/media'
  */
-  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = PyList_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  __Pyx_INCREF(__pyx_n_s_DocumentSearch);
-  __Pyx_GIVEREF(__pyx_n_s_DocumentSearch);
-  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DocumentSearch);
-  __pyx_t_2 = __Pyx_Import(__pyx_n_s_wrapper_core_DocumentSearch, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __Pyx_INCREF(__pyx_n_s_Language);
+  __Pyx_GIVEREF(__pyx_n_s_Language);
+  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_Language);
+  __Pyx_INCREF(__pyx_n_s_LanguageDetectorBuilder);
+  __Pyx_GIVEREF(__pyx_n_s_LanguageDetectorBuilder);
+  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_n_s_LanguageDetectorBuilder);
+  __pyx_t_2 = __Pyx_Import(__pyx_n_s_lingua, __pyx_t_3, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
-  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DocumentSearch); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Language); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_3);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocumentSearch, __pyx_t_3) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Language, __pyx_t_3) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_LanguageDetectorBuilder); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 7, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LanguageDetectorBuilder, __pyx_t_3) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":7
- * from wrapper.core.DocumentSearch import DocumentSearch
+  /* "wrapper/infra/LanguageDetector.pyx":8
+ * import logging
+ * from lingua import Language, LanguageDetectorBuilder
+ * from .DocLanguage import DocLanguage             # <<<<<<<<<<<<<<
  * 
- * dir = '/home/tiago/media'             # <<<<<<<<<<<<<<
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):
  */
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_dir, __pyx_kp_u_home_tiago_media) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
+  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  __Pyx_INCREF(__pyx_n_s_DocLanguage);
+  __Pyx_GIVEREF(__pyx_n_s_DocLanguage);
+  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DocLanguage);
+  __pyx_t_3 = __Pyx_Import(__pyx_n_s_DocLanguage, __pyx_t_2, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_DocLanguage); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_2);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DocLanguage, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":8
+  /* "wrapper/infra/LanguageDetector.pyx":10
+ * from .DocLanguage import DocLanguage
  * 
- * dir = '/home/tiago/media'
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']             # <<<<<<<<<<<<<<
- * def start():
- *     load()
+ * def detect_lang(text, translate_to:DocLanguage=None, original_language:DocLanguage=None, fix_text = None):             # <<<<<<<<<<<<<<
+ *     detected = original_language
+ *     if not original_language:
  */
-  __pyx_t_2 = PyList_New(4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 8, __pyx_L1_error)
+  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 10, __pyx_L1_error)
+  __Pyx_GOTREF(__pyx_t_3);
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_translate_to, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_original_language, __pyx_n_s_DocLanguage) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_16LanguageDetector_1detect_lang, 0, __pyx_n_s_detect_lang, NULL, __pyx_n_s_wrapper_infra_LanguageDetector, __pyx_d, ((PyObject *)__pyx_codeobj__9)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  __Pyx_INCREF(__pyx_kp_u_res_onus_pag1_pdf);
-  __Pyx_GIVEREF(__pyx_kp_u_res_onus_pag1_pdf);
-  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_kp_u_res_onus_pag1_pdf);
-  __Pyx_INCREF(__pyx_kp_u_res_onus_pag2_pdf);
-  __Pyx_GIVEREF(__pyx_kp_u_res_onus_pag2_pdf);
-  PyList_SET_ITEM(__pyx_t_2, 1, __pyx_kp_u_res_onus_pag2_pdf);
-  __Pyx_INCREF(__pyx_kp_u_res_onus_pag3_pdf);
-  __Pyx_GIVEREF(__pyx_kp_u_res_onus_pag3_pdf);
-  PyList_SET_ITEM(__pyx_t_2, 2, __pyx_kp_u_res_onus_pag3_pdf);
-  __Pyx_INCREF(__pyx_kp_u_res_docs_with_img_pdf_img_pdf);
-  __Pyx_GIVEREF(__pyx_kp_u_res_docs_with_img_pdf_img_pdf);
-  PyList_SET_ITEM(__pyx_t_2, 3, __pyx_kp_u_res_docs_with_img_pdf_img_pdf);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_files, __pyx_t_2) < 0) __PYX_ERR(0, 8, __pyx_L1_error)
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__10);
+  __Pyx_CyFunction_SetAnnotationsDict(__pyx_t_2, __pyx_t_3);
+  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_detect_lang, __pyx_t_2) < 0) __PYX_ERR(0, 10, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":9
- * dir = '/home/tiago/media'
- * files = ['res/onus/pag1.pdf', 'res/onus/pag2.pdf', 'res/onus/pag3.pdf', 'res/docs_with_img/pdf_img.pdf']
- * def start():             # <<<<<<<<<<<<<<
- *     load()
- *     dcsearch = DocumentSearch(dir)
+  /* "wrapper/infra/LanguageDetector.pyx":54
+ * 
+ * 
+ * def detect_lang_by_google_translate(text, translate_to=None):             # <<<<<<<<<<<<<<
+ *     translator = Translator(service_urls=[
+ *       'translate.google.com',
  */
-  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_5tests_19ProcessPDFImageTest_1start, 0, __pyx_n_s_start, NULL, __pyx_n_s_tests_ProcessPDFImageTest, __pyx_d, ((PyObject *)__pyx_codeobj__11)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
+  __pyx_t_2 = __Pyx_CyFunction_New(&__pyx_mdef_7wrapper_5infra_16LanguageDetector_3detect_lang_by_google_translate, 0, __pyx_n_s_detect_lang_by_google_translate_2, NULL, __pyx_n_s_wrapper_infra_LanguageDetector, __pyx_d, ((PyObject *)__pyx_codeobj__12)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
-  if (PyDict_SetItem(__pyx_d, __pyx_n_s_start, __pyx_t_2) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
+  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_2, __pyx_tuple__13);
+  if (PyDict_SetItem(__pyx_d, __pyx_n_s_detect_lang_by_google_translate_2, __pyx_t_2) < 0) __PYX_ERR(0, 54, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
-  /* "tests/ProcessPDFImageTest.pyx":1
- * import traceback             # <<<<<<<<<<<<<<
- * from wrapper.Process import run, load
- * from wrapper.core.File import File
+  /* "wrapper/infra/LanguageDetector.pyx":1
+ * from . import PreProcessing             # <<<<<<<<<<<<<<
+ * from googletrans import Translator
+ * from .WordFixer import fix_word
  */
   __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_GOTREF(__pyx_t_2);
   if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
   __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
 
   /*--- Wrapped vars code ---*/
 
   goto __pyx_L0;
   __pyx_L1_error:;
   __Pyx_XDECREF(__pyx_t_2);
   __Pyx_XDECREF(__pyx_t_3);
   if (__pyx_m) {
     if (__pyx_d && stringtab_initialized) {
-      __Pyx_AddTraceback("init tests.ProcessPDFImageTest", __pyx_clineno, __pyx_lineno, __pyx_filename);
+      __Pyx_AddTraceback("init wrapper.infra.LanguageDetector", __pyx_clineno, __pyx_lineno, __pyx_filename);
     }
     #if !CYTHON_USE_MODULE_STATE
     Py_CLEAR(__pyx_m);
     #else
     Py_DECREF(__pyx_m);
     if (pystate_addmodule_run) {
       PyObject *tp, *value, *tb;
       PyErr_Fetch(&tp, &value, &tb);
       PyState_RemoveModule(&__pyx_moduledef);
       PyErr_Restore(tp, value, tb);
     }
     #endif
   } else if (!PyErr_Occurred()) {
-    PyErr_SetString(PyExc_ImportError, "init tests.ProcessPDFImageTest");
+    PyErr_SetString(PyExc_ImportError, "init wrapper.infra.LanguageDetector");
   }
   __pyx_L0:;
   __Pyx_RefNannyFinishContext();
   #if CYTHON_PEP489_MULTI_PHASE_INIT
   return (__pyx_m != NULL) ? 0 : -1;
   #elif PY_MAJOR_VERSION >= 3
   return __pyx_m;
@@ -4216,14 +7464,170 @@
             return kwvalues[i];
         }
     }
     return NULL;  // not found (no exception set)
 }
 #endif
 
+/* RaiseDoubleKeywords */
+static void __Pyx_RaiseDoubleKeywordsError(
+    const char* func_name,
+    PyObject* kw_name)
+{
+    PyErr_Format(PyExc_TypeError,
+        #if PY_MAJOR_VERSION >= 3
+        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
+        #else
+        "%s() got multiple values for keyword argument '%s'", func_name,
+        PyString_AsString(kw_name));
+        #endif
+}
+
+/* ParseKeywords */
+static int __Pyx_ParseOptionalKeywords(
+    PyObject *kwds,
+    PyObject *const *kwvalues,
+    PyObject **argnames[],
+    PyObject *kwds2,
+    PyObject *values[],
+    Py_ssize_t num_pos_args,
+    const char* function_name)
+{
+    PyObject *key = 0, *value = 0;
+    Py_ssize_t pos = 0;
+    PyObject*** name;
+    PyObject*** first_kw_arg = argnames + num_pos_args;
+    int kwds_is_tuple = CYTHON_METH_FASTCALL && likely(PyTuple_Check(kwds));
+    while (1) {
+        if (kwds_is_tuple) {
+            if (pos >= PyTuple_GET_SIZE(kwds)) break;
+            key = PyTuple_GET_ITEM(kwds, pos);
+            value = kwvalues[pos];
+            pos++;
+        }
+        else
+        {
+            if (!PyDict_Next(kwds, &pos, &key, &value)) break;
+        }
+        name = first_kw_arg;
+        while (*name && (**name != key)) name++;
+        if (*name) {
+            values[name-argnames] = value;
+            continue;
+        }
+        name = first_kw_arg;
+        #if PY_MAJOR_VERSION < 3
+        if (likely(PyString_Check(key))) {
+            while (*name) {
+                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
+                        && _PyString_Eq(**name, key)) {
+                    values[name-argnames] = value;
+                    break;
+                }
+                name++;
+            }
+            if (*name) continue;
+            else {
+                PyObject*** argname = argnames;
+                while (argname != first_kw_arg) {
+                    if ((**argname == key) || (
+                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
+                             && _PyString_Eq(**argname, key))) {
+                        goto arg_passed_twice;
+                    }
+                    argname++;
+                }
+            }
+        } else
+        #endif
+        if (likely(PyUnicode_Check(key))) {
+            while (*name) {
+                int cmp = (
+                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
+                    (__Pyx_PyUnicode_GET_LENGTH(**name) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
+                #endif
+                    PyUnicode_Compare(**name, key)
+                );
+                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
+                if (cmp == 0) {
+                    values[name-argnames] = value;
+                    break;
+                }
+                name++;
+            }
+            if (*name) continue;
+            else {
+                PyObject*** argname = argnames;
+                while (argname != first_kw_arg) {
+                    int cmp = (**argname == key) ? 0 :
+                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
+                        (__Pyx_PyUnicode_GET_LENGTH(**argname) != __Pyx_PyUnicode_GET_LENGTH(key)) ? 1 :
+                    #endif
+                        PyUnicode_Compare(**argname, key);
+                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
+                    if (cmp == 0) goto arg_passed_twice;
+                    argname++;
+                }
+            }
+        } else
+            goto invalid_keyword_type;
+        if (kwds2) {
+            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
+        } else {
+            goto invalid_keyword;
+        }
+    }
+    return 0;
+arg_passed_twice:
+    __Pyx_RaiseDoubleKeywordsError(function_name, key);
+    goto bad;
+invalid_keyword_type:
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() keywords must be strings", function_name);
+    goto bad;
+invalid_keyword:
+    #if PY_MAJOR_VERSION < 3
+    PyErr_Format(PyExc_TypeError,
+        "%.200s() got an unexpected keyword argument '%.200s'",
+        function_name, PyString_AsString(key));
+    #else
+    PyErr_Format(PyExc_TypeError,
+        "%s() got an unexpected keyword argument '%U'",
+        function_name, key);
+    #endif
+bad:
+    return -1;
+}
+
+/* RaiseArgTupleInvalid */
+static void __Pyx_RaiseArgtupleInvalid(
+    const char* func_name,
+    int exact,
+    Py_ssize_t num_min,
+    Py_ssize_t num_max,
+    Py_ssize_t num_found)
+{
+    Py_ssize_t num_expected;
+    const char *more_or_less;
+    if (num_found < num_min) {
+        num_expected = num_min;
+        more_or_less = "at least";
+    } else {
+        num_expected = num_max;
+        more_or_less = "at most";
+    }
+    if (exact) {
+        more_or_less = "exactly";
+    }
+    PyErr_Format(PyExc_TypeError,
+                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
+                 func_name, more_or_less, num_expected,
+                 (num_expected == 1) ? "" : "s", num_found);
+}
+
 /* PyDictVersioning */
 #if CYTHON_USE_DICT_VERSIONS && CYTHON_USE_TYPE_SLOTS
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_tp_dict_version(PyObject *obj) {
     PyObject *dict = Py_TYPE(obj)->tp_dict;
     return likely(dict) ? __PYX_GET_DICT_VERSION(dict) : 0;
 }
 static CYTHON_INLINE PY_UINT64_T __Pyx_get_object_dict_version(PyObject *obj) {
@@ -4285,14 +7689,34 @@
         return __Pyx_NewRef(result);
     }
     PyErr_Clear();
 #endif
     return __Pyx_GetBuiltinName(name);
 }
 
+/* PyObjectCall */
+#if CYTHON_COMPILING_IN_CPYTHON
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
+    PyObject *result;
+    ternaryfunc call = Py_TYPE(func)->tp_call;
+    if (unlikely(!call))
+        return PyObject_Call(func, arg, kw);
+    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
+        return NULL;
+    result = (*call)(func, arg, kw);
+    Py_LeaveRecursiveCall();
+    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
+        PyErr_SetString(
+            PyExc_SystemError,
+            "NULL result without error in PyObject_Call");
+    }
+    return result;
+}
+#endif
+
 /* PyFunctionFastCall */
 #if CYTHON_FAST_PYCALL && !CYTHON_VECTORCALL
 static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                                PyObject *globals) {
     PyFrameObject *f;
     PyThreadState *tstate = __Pyx_PyThreadState_Current;
     PyObject **fastlocals;
@@ -4402,34 +7826,14 @@
     Py_XDECREF(kwtuple);
 done:
     Py_LeaveRecursiveCall();
     return result;
 }
 #endif
 
-/* PyObjectCall */
-#if CYTHON_COMPILING_IN_CPYTHON
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
-    PyObject *result;
-    ternaryfunc call = Py_TYPE(func)->tp_call;
-    if (unlikely(!call))
-        return PyObject_Call(func, arg, kw);
-    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
-        return NULL;
-    result = (*call)(func, arg, kw);
-    Py_LeaveRecursiveCall();
-    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
-        PyErr_SetString(
-            PyExc_SystemError,
-            "NULL result without error in PyObject_Call");
-    }
-    return result;
-}
-#endif
-
 /* PyObjectCallMethO */
 #if CYTHON_COMPILING_IN_CPYTHON
 static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
     PyObject *self, *result;
     PyCFunction cfunc;
     cfunc = PyCFunction_GET_FUNCTION(func);
     self = PyCFunction_GET_SELF(func);
@@ -4519,158 +7923,14 @@
     #endif
     if (nargs == 0) {
         return __Pyx_PyObject_Call(func, __pyx_empty_tuple, kwargs);
     }
     return __Pyx_PyObject_FastCall_fallback(func, args, (size_t)nargs, kwargs);
 }
 
-/* PyObjectCallOneArg */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
-    PyObject *args[2] = {NULL, arg};
-    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* PyObjectCall2Args */
-static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
-    PyObject *args[3] = {NULL, arg1, arg2};
-    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
-}
-
-/* PyObjectGetMethod */
-static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
-    PyObject *attr;
-#if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
-    __Pyx_TypeName type_name;
-    PyTypeObject *tp = Py_TYPE(obj);
-    PyObject *descr;
-    descrgetfunc f = NULL;
-    PyObject **dictptr, *dict;
-    int meth_found = 0;
-    assert (*method == NULL);
-    if (unlikely(tp->tp_getattro != PyObject_GenericGetAttr)) {
-        attr = __Pyx_PyObject_GetAttrStr(obj, name);
-        goto try_unpack;
-    }
-    if (unlikely(tp->tp_dict == NULL) && unlikely(PyType_Ready(tp) < 0)) {
-        return 0;
-    }
-    descr = _PyType_Lookup(tp, name);
-    if (likely(descr != NULL)) {
-        Py_INCREF(descr);
-#if defined(Py_TPFLAGS_METHOD_DESCRIPTOR) && Py_TPFLAGS_METHOD_DESCRIPTOR
-        if (__Pyx_PyType_HasFeature(Py_TYPE(descr), Py_TPFLAGS_METHOD_DESCRIPTOR))
-#elif PY_MAJOR_VERSION >= 3
-        #ifdef __Pyx_CyFunction_USED
-        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type) || __Pyx_CyFunction_Check(descr)))
-        #else
-        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type)))
-        #endif
-#else
-        #ifdef __Pyx_CyFunction_USED
-        if (likely(PyFunction_Check(descr) || __Pyx_CyFunction_Check(descr)))
-        #else
-        if (likely(PyFunction_Check(descr)))
-        #endif
-#endif
-        {
-            meth_found = 1;
-        } else {
-            f = Py_TYPE(descr)->tp_descr_get;
-            if (f != NULL && PyDescr_IsData(descr)) {
-                attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
-                Py_DECREF(descr);
-                goto try_unpack;
-            }
-        }
-    }
-    dictptr = _PyObject_GetDictPtr(obj);
-    if (dictptr != NULL && (dict = *dictptr) != NULL) {
-        Py_INCREF(dict);
-        attr = __Pyx_PyDict_GetItemStr(dict, name);
-        if (attr != NULL) {
-            Py_INCREF(attr);
-            Py_DECREF(dict);
-            Py_XDECREF(descr);
-            goto try_unpack;
-        }
-        Py_DECREF(dict);
-    }
-    if (meth_found) {
-        *method = descr;
-        return 1;
-    }
-    if (f != NULL) {
-        attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
-        Py_DECREF(descr);
-        goto try_unpack;
-    }
-    if (likely(descr != NULL)) {
-        *method = descr;
-        return 0;
-    }
-    type_name = __Pyx_PyType_GetName(tp);
-    PyErr_Format(PyExc_AttributeError,
-#if PY_MAJOR_VERSION >= 3
-                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%U'",
-                 type_name, name);
-#else
-                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%.400s'",
-                 type_name, PyString_AS_STRING(name));
-#endif
-    __Pyx_DECREF_TypeName(type_name);
-    return 0;
-#else
-    attr = __Pyx_PyObject_GetAttrStr(obj, name);
-    goto try_unpack;
-#endif
-try_unpack:
-#if CYTHON_UNPACK_METHODS
-    if (likely(attr) && PyMethod_Check(attr) && likely(PyMethod_GET_SELF(attr) == obj)) {
-        PyObject *function = PyMethod_GET_FUNCTION(attr);
-        Py_INCREF(function);
-        Py_DECREF(attr);
-        *method = function;
-        return 1;
-    }
-#endif
-    *method = attr;
-    return 0;
-}
-
-/* PyObjectCallMethod1 */
-static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
-    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
-    Py_DECREF(method);
-    return result;
-}
-static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
-    PyObject *method = NULL, *result;
-    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
-    if (likely(is_method)) {
-        result = __Pyx_PyObject_Call2Args(method, obj, arg);
-        Py_DECREF(method);
-        return result;
-    }
-    if (unlikely(!method)) return NULL;
-    return __Pyx__PyObject_CallMethod1(method, arg);
-}
-
-/* append */
-static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
-    if (likely(PyList_CheckExact(L))) {
-        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
-    } else {
-        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
-        if (unlikely(!retval))
-            return -1;
-        Py_DECREF(retval);
-    }
-    return 0;
-}
-
 /* GetTopmostException */
 #if CYTHON_USE_EXC_INFO_STACK && CYTHON_FAST_THREAD_STATE
 static _PyErr_StackItem *
 __Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
 {
     _PyErr_StackItem *exc_info = tstate->exc_info;
     while ((exc_info->exc_value == NULL || exc_info->exc_value == Py_None) &&
@@ -4840,251 +8100,805 @@
     *tb = 0;
     Py_XDECREF(local_type);
     Py_XDECREF(local_value);
     Py_XDECREF(local_tb);
     return -1;
 }
 
-/* Import */
-static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
-    PyObject *module = 0;
-    PyObject *empty_dict = 0;
-    PyObject *empty_list = 0;
-    #if PY_MAJOR_VERSION < 3
-    PyObject *py_import;
-    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
-    if (unlikely(!py_import))
-        goto bad;
-    if (!from_list) {
-        empty_list = PyList_New(0);
-        if (unlikely(!empty_list))
+/* JoinPyUnicode */
+static PyObject* __Pyx_PyUnicode_Join(PyObject* value_tuple, Py_ssize_t value_count, Py_ssize_t result_ulength,
+                                      Py_UCS4 max_char) {
+#if CYTHON_USE_UNICODE_INTERNALS && CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    PyObject *result_uval;
+    int result_ukind, kind_shift;
+    Py_ssize_t i, char_pos;
+    void *result_udata;
+    CYTHON_MAYBE_UNUSED_VAR(max_char);
+#if CYTHON_PEP393_ENABLED
+    result_uval = PyUnicode_New(result_ulength, max_char);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = (max_char <= 255) ? PyUnicode_1BYTE_KIND : (max_char <= 65535) ? PyUnicode_2BYTE_KIND : PyUnicode_4BYTE_KIND;
+    kind_shift = (result_ukind == PyUnicode_4BYTE_KIND) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_DATA(result_uval);
+#else
+    result_uval = PyUnicode_FromUnicode(NULL, result_ulength);
+    if (unlikely(!result_uval)) return NULL;
+    result_ukind = sizeof(Py_UNICODE);
+    kind_shift = (result_ukind == 4) ? 2 : result_ukind - 1;
+    result_udata = PyUnicode_AS_UNICODE(result_uval);
+#endif
+    assert(kind_shift == 2 || kind_shift == 1 || kind_shift == 0);
+    char_pos = 0;
+    for (i=0; i < value_count; i++) {
+        int ukind;
+        Py_ssize_t ulength;
+        void *udata;
+        PyObject *uval = PyTuple_GET_ITEM(value_tuple, i);
+        if (unlikely(__Pyx_PyUnicode_READY(uval)))
             goto bad;
-        from_list = empty_list;
-    }
-    #endif
-    empty_dict = PyDict_New();
-    if (unlikely(!empty_dict))
-        goto bad;
-    {
-        #if PY_MAJOR_VERSION >= 3
-        if (level == -1) {
-            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
-                #if CYTHON_COMPILING_IN_LIMITED_API
-                module = PyImport_ImportModuleLevelObject(
-                    name, empty_dict, empty_dict, from_list, 1);
-                #else
-                module = PyImport_ImportModuleLevelObject(
-                    name, __pyx_d, empty_dict, from_list, 1);
-                #endif
-                if (unlikely(!module)) {
-                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
-                        goto bad;
-                    PyErr_Clear();
-                }
-            }
-            level = 0;
-        }
-        #endif
-        if (!module) {
-            #if PY_MAJOR_VERSION < 3
-            PyObject *py_level = PyInt_FromLong(level);
-            if (unlikely(!py_level))
-                goto bad;
-            module = PyObject_CallFunctionObjArgs(py_import,
-                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
-            Py_DECREF(py_level);
-            #else
-            #if CYTHON_COMPILING_IN_LIMITED_API
-            module = PyImport_ImportModuleLevelObject(
-                name, empty_dict, empty_dict, from_list, level);
+        ulength = __Pyx_PyUnicode_GET_LENGTH(uval);
+        if (unlikely(!ulength))
+            continue;
+        if (unlikely((PY_SSIZE_T_MAX >> kind_shift) - ulength < char_pos))
+            goto overflow;
+        ukind = __Pyx_PyUnicode_KIND(uval);
+        udata = __Pyx_PyUnicode_DATA(uval);
+        if (!CYTHON_PEP393_ENABLED || ukind == result_ukind) {
+            memcpy((char *)result_udata + (char_pos << kind_shift), udata, (size_t) (ulength << kind_shift));
+        } else {
+            #if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030300F0 || defined(_PyUnicode_FastCopyCharacters)
+            _PyUnicode_FastCopyCharacters(result_uval, char_pos, uval, 0, ulength);
             #else
-            module = PyImport_ImportModuleLevelObject(
-                name, __pyx_d, empty_dict, from_list, level);
-            #endif
+            Py_ssize_t j;
+            for (j=0; j < ulength; j++) {
+                Py_UCS4 uchar = __Pyx_PyUnicode_READ(ukind, udata, j);
+                __Pyx_PyUnicode_WRITE(result_ukind, result_udata, char_pos+j, uchar);
+            }
             #endif
         }
+        char_pos += ulength;
     }
+    return result_uval;
+overflow:
+    PyErr_SetString(PyExc_OverflowError, "join() result is too long for a Python string");
 bad:
-    Py_XDECREF(empty_dict);
-    Py_XDECREF(empty_list);
-    #if PY_MAJOR_VERSION < 3
-    Py_XDECREF(py_import);
-    #endif
-    return module;
+    Py_DECREF(result_uval);
+    return NULL;
+#else
+    CYTHON_UNUSED_VAR(max_char);
+    CYTHON_UNUSED_VAR(result_ulength);
+    CYTHON_UNUSED_VAR(value_count);
+    return PyUnicode_Join(__pyx_empty_unicode, value_tuple);
+#endif
 }
 
-/* ImportDottedModule */
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
-    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
-    if (unlikely(PyErr_Occurred())) {
-        PyErr_Clear();
+/* PyObjectCallOneArg */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
+    PyObject *args[2] = {NULL, arg};
+    return __Pyx_PyObject_FastCall(func, args+1, 1 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
+}
+
+/* RaiseException */
+#if PY_MAJOR_VERSION < 3
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    __Pyx_PyThreadState_declare
+    CYTHON_UNUSED_VAR(cause);
+    Py_XINCREF(type);
+    if (!value || value == Py_None)
+        value = NULL;
+    else
+        Py_INCREF(value);
+    if (!tb || tb == Py_None)
+        tb = NULL;
+    else {
+        Py_INCREF(tb);
+        if (!PyTraceBack_Check(tb)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: arg 3 must be a traceback or None");
+            goto raise_error;
+        }
     }
-    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
-        partial_name = name;
+    if (PyType_Check(type)) {
+#if CYTHON_COMPILING_IN_PYPY
+        if (!value) {
+            Py_INCREF(Py_None);
+            value = Py_None;
+        }
+#endif
+        PyErr_NormalizeException(&type, &value, &tb);
     } else {
-        slice = PySequence_GetSlice(parts_tuple, 0, count);
-        if (unlikely(!slice))
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
+            goto raise_error;
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(type);
+        Py_INCREF(type);
+        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
+            PyErr_SetString(PyExc_TypeError,
+                "raise: exception class must be a subclass of BaseException");
+            goto raise_error;
+        }
+    }
+    __Pyx_PyThreadState_assign
+    __Pyx_ErrRestore(type, value, tb);
+    return;
+raise_error:
+    Py_XDECREF(value);
+    Py_XDECREF(type);
+    Py_XDECREF(tb);
+    return;
+}
+#else
+static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
+    PyObject* owned_instance = NULL;
+    if (tb == Py_None) {
+        tb = 0;
+    } else if (tb && !PyTraceBack_Check(tb)) {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: arg 3 must be a traceback or None");
+        goto bad;
+    }
+    if (value == Py_None)
+        value = 0;
+    if (PyExceptionInstance_Check(type)) {
+        if (value) {
+            PyErr_SetString(PyExc_TypeError,
+                "instance exception may not have a separate value");
             goto bad;
-        sep = PyUnicode_FromStringAndSize(".", 1);
-        if (unlikely(!sep))
+        }
+        value = type;
+        type = (PyObject*) Py_TYPE(value);
+    } else if (PyExceptionClass_Check(type)) {
+        PyObject *instance_class = NULL;
+        if (value && PyExceptionInstance_Check(value)) {
+            instance_class = (PyObject*) Py_TYPE(value);
+            if (instance_class != type) {
+                int is_subclass = PyObject_IsSubclass(instance_class, type);
+                if (!is_subclass) {
+                    instance_class = NULL;
+                } else if (unlikely(is_subclass == -1)) {
+                    goto bad;
+                } else {
+                    type = instance_class;
+                }
+            }
+        }
+        if (!instance_class) {
+            PyObject *args;
+            if (!value)
+                args = PyTuple_New(0);
+            else if (PyTuple_Check(value)) {
+                Py_INCREF(value);
+                args = value;
+            } else
+                args = PyTuple_Pack(1, value);
+            if (!args)
+                goto bad;
+            owned_instance = PyObject_Call(type, args, NULL);
+            Py_DECREF(args);
+            if (!owned_instance)
+                goto bad;
+            value = owned_instance;
+            if (!PyExceptionInstance_Check(value)) {
+                PyErr_Format(PyExc_TypeError,
+                             "calling %R should have returned an instance of "
+                             "BaseException, not %R",
+                             type, Py_TYPE(value));
+                goto bad;
+            }
+        }
+    } else {
+        PyErr_SetString(PyExc_TypeError,
+            "raise: exception class must be a subclass of BaseException");
+        goto bad;
+    }
+    if (cause) {
+        PyObject *fixed_cause;
+        if (cause == Py_None) {
+            fixed_cause = NULL;
+        } else if (PyExceptionClass_Check(cause)) {
+            fixed_cause = PyObject_CallObject(cause, NULL);
+            if (fixed_cause == NULL)
+                goto bad;
+        } else if (PyExceptionInstance_Check(cause)) {
+            fixed_cause = cause;
+            Py_INCREF(fixed_cause);
+        } else {
+            PyErr_SetString(PyExc_TypeError,
+                            "exception causes must derive from "
+                            "BaseException");
             goto bad;
-        partial_name = PyUnicode_Join(sep, slice);
+        }
+        PyException_SetCause(value, fixed_cause);
     }
-    PyErr_Format(
-#if PY_MAJOR_VERSION < 3
-        PyExc_ImportError,
-        "No module named '%s'", PyString_AS_STRING(partial_name));
-#else
-#if PY_VERSION_HEX >= 0x030600B1
-        PyExc_ModuleNotFoundError,
-#else
-        PyExc_ImportError,
-#endif
-        "No module named '%U'", partial_name);
+    PyErr_SetObject(type, value);
+    if (tb) {
+      #if PY_VERSION_HEX >= 0x030C00A6
+        PyException_SetTraceback(value, tb);
+      #elif CYTHON_FAST_THREAD_STATE
+        PyThreadState *tstate = __Pyx_PyThreadState_Current;
+        PyObject* tmp_tb = tstate->curexc_traceback;
+        if (tb != tmp_tb) {
+            Py_INCREF(tb);
+            tstate->curexc_traceback = tb;
+            Py_XDECREF(tmp_tb);
+        }
+#else
+        PyObject *tmp_type, *tmp_value, *tmp_tb;
+        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
+        Py_INCREF(tb);
+        PyErr_Restore(tmp_type, tmp_value, tb);
+        Py_XDECREF(tmp_tb);
 #endif
+    }
 bad:
-    Py_XDECREF(sep);
-    Py_XDECREF(slice);
-    Py_XDECREF(partial_name);
-    return NULL;
+    Py_XDECREF(owned_instance);
+    return;
 }
 #endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
-    PyObject *imported_module;
-#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-    PyObject *modules = PyImport_GetModuleDict();
-    if (unlikely(!modules))
-        return NULL;
-    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
-    Py_XINCREF(imported_module);
+
+/* PyUnicode_Unicode */
+static CYTHON_INLINE PyObject* __Pyx_PyUnicode_Unicode(PyObject *obj) {
+    if (unlikely(obj == Py_None))
+        obj = __pyx_kp_u_None;
+    return __Pyx_NewRef(obj);
+}
+
+/* GetItemInt */
+static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
+    PyObject *r;
+    if (unlikely(!j)) return NULL;
+    r = PyObject_GetItem(o, j);
+    Py_DECREF(j);
+    return r;
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyList_GET_SIZE(o);
+    }
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
+        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
+    }
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
 #else
-    imported_module = PyImport_GetModule(name);
+    return PySequence_GetItem(o, i);
 #endif
-    return imported_module;
 }
-#endif
-#if PY_MAJOR_VERSION >= 3
-static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
-    Py_ssize_t i, nparts;
-    nparts = PyTuple_GET_SIZE(parts_tuple);
-    for (i=1; i < nparts && module; i++) {
-        PyObject *part, *submodule;
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
+                                                              CYTHON_NCP_UNUSED int wraparound,
+                                                              CYTHON_NCP_UNUSED int boundscheck) {
 #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
-        part = PyTuple_GET_ITEM(parts_tuple, i);
+    Py_ssize_t wrapped_i = i;
+    if (wraparound & unlikely(i < 0)) {
+        wrapped_i += PyTuple_GET_SIZE(o);
+    }
+    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
+        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
+        Py_INCREF(r);
+        return r;
+    }
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+#else
+    return PySequence_GetItem(o, i);
+#endif
+}
+static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
+                                                     CYTHON_NCP_UNUSED int wraparound,
+                                                     CYTHON_NCP_UNUSED int boundscheck) {
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
+    if (is_list || PyList_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
+        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
+            PyObject *r = PyList_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
+        }
+    }
+    else if (PyTuple_CheckExact(o)) {
+        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
+        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
+            PyObject *r = PyTuple_GET_ITEM(o, n);
+            Py_INCREF(r);
+            return r;
+        }
+    } else {
+        PyMappingMethods *mm = Py_TYPE(o)->tp_as_mapping;
+        PySequenceMethods *sm = Py_TYPE(o)->tp_as_sequence;
+        if (mm && mm->mp_subscript) {
+            PyObject *r, *key = PyInt_FromSsize_t(i);
+            if (unlikely(!key)) return NULL;
+            r = mm->mp_subscript(o, key);
+            Py_DECREF(key);
+            return r;
+        }
+        if (likely(sm && sm->sq_item)) {
+            if (wraparound && unlikely(i < 0) && likely(sm->sq_length)) {
+                Py_ssize_t l = sm->sq_length(o);
+                if (likely(l >= 0)) {
+                    i += l;
+                } else {
+                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
+                        return NULL;
+                    PyErr_Clear();
+                }
+            }
+            return sm->sq_item(o, i);
+        }
+    }
 #else
-        part = PySequence_ITEM(parts_tuple, i);
+    if (is_list || PySequence_Check(o)) {
+        return PySequence_GetItem(o, i);
+    }
 #endif
-        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
-#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
-        Py_DECREF(part);
+    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
+}
+
+/* PyIntBinop */
+#if !CYTHON_COMPILING_IN_PYPY
+static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace, int zerodivision_check) {
+    CYTHON_MAYBE_UNUSED_VAR(intval);
+    CYTHON_MAYBE_UNUSED_VAR(inplace);
+    CYTHON_UNUSED_VAR(zerodivision_check);
+    #if PY_MAJOR_VERSION < 3
+    if (likely(PyInt_CheckExact(op1))) {
+        const long b = intval;
+        long x;
+        long a = PyInt_AS_LONG(op1);
+        
+            x = (long)((unsigned long)a - (unsigned long)b);
+            if (likely((x^a) >= 0 || (x^~b) >= 0))
+                return PyInt_FromLong(x);
+            return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
+    }
+    #endif
+    #if CYTHON_USE_PYLONG_INTERNALS
+    if (likely(PyLong_CheckExact(op1))) {
+        const long b = intval;
+        long a, x;
+#ifdef HAVE_LONG_LONG
+        const PY_LONG_LONG llb = intval;
+        PY_LONG_LONG lla, llx;
 #endif
-        Py_DECREF(module);
-        module = submodule;
+        if (unlikely(__Pyx_PyLong_IsZero(op1))) {
+            return PyLong_FromLong(-intval);
+        }
+        if (likely(__Pyx_PyLong_IsCompact(op1))) {
+            a = __Pyx_PyLong_CompactValue(op1);
+        } else {
+            const digit* digits = __Pyx_PyLong_Digits(op1);
+            const Py_ssize_t size = __Pyx_PyLong_SignedDigitCount(op1);
+            switch (size) {
+                case -2:
+                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
+                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
+                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 2:
+                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
+                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
+                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                case -3:
+                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
+                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
+                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 3:
+                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
+                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
+                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                case -4:
+                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
+                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
+                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                case 4:
+                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
+                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
+                        break;
+                    #ifdef HAVE_LONG_LONG
+                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
+                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
+                        goto long_long;
+                    #endif
+                    }
+                    CYTHON_FALLTHROUGH;
+                default: return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
+            }
+        }
+                x = a - b;
+            return PyLong_FromLong(x);
+#ifdef HAVE_LONG_LONG
+        long_long:
+                llx = lla - llb;
+            return PyLong_FromLongLong(llx);
+#endif
+        
+        
     }
-    if (unlikely(!module)) {
-        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
+    #endif
+    if (PyFloat_CheckExact(op1)) {
+        const long b = intval;
+#if CYTHON_COMPILING_IN_LIMITED_API
+        double a = __pyx_PyFloat_AsDouble(op1);
+#else
+        double a = PyFloat_AS_DOUBLE(op1);
+#endif
+            double result;
+            
+            PyFPE_START_PROTECT("subtract", return NULL)
+            result = ((double)a) - (double)b;
+            PyFPE_END_PROTECT(result)
+            return PyFloat_FromDouble(result);
     }
-    return module;
+    return (inplace ? PyNumber_InPlaceSubtract : PyNumber_Subtract)(op1, op2);
 }
 #endif
-static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if PY_MAJOR_VERSION < 3
-    PyObject *module, *from_list, *star = __pyx_n_s__8;
-    CYTHON_UNUSED_VAR(parts_tuple);
-    from_list = PyList_New(1);
-    if (unlikely(!from_list))
-        return NULL;
-    Py_INCREF(star);
-    PyList_SET_ITEM(from_list, 0, star);
-    module = __Pyx_Import(name, from_list, 0);
-    Py_DECREF(from_list);
-    return module;
-#else
-    PyObject *imported_module;
-    PyObject *module = __Pyx_Import(name, NULL, 0);
-    if (!parts_tuple || unlikely(!module))
-        return module;
-    imported_module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(imported_module)) {
-        Py_DECREF(module);
-        return imported_module;
+
+/* PyIntCompare */
+static CYTHON_INLINE int __Pyx_PyInt_BoolEqObjC(PyObject *op1, PyObject *op2, long intval, long inplace) {
+    CYTHON_MAYBE_UNUSED_VAR(intval);
+    CYTHON_UNUSED_VAR(inplace);
+    if (op1 == op2) {
+        return 1;
     }
-    PyErr_Clear();
-    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
+    #if PY_MAJOR_VERSION < 3
+    if (likely(PyInt_CheckExact(op1))) {
+        const long b = intval;
+        long a = PyInt_AS_LONG(op1);
+        return (a == b);
+    }
+    #endif
+    #if CYTHON_USE_PYLONG_INTERNALS
+    if (likely(PyLong_CheckExact(op1))) {
+        int unequal;
+        unsigned long uintval;
+        Py_ssize_t size = __Pyx_PyLong_DigitCount(op1);
+        const digit* digits = __Pyx_PyLong_Digits(op1);
+        if (intval == 0) {
+            return (__Pyx_PyLong_IsZero(op1) == 1);
+        } else if (intval < 0) {
+            if (__Pyx_PyLong_IsNonNeg(op1))
+                return 0;
+            intval = -intval;
+        } else {
+            if (__Pyx_PyLong_IsNeg(op1))
+                return 0;
+        }
+        uintval = (unsigned long) intval;
+#if PyLong_SHIFT * 4 < SIZEOF_LONG*8
+        if (uintval >> (PyLong_SHIFT * 4)) {
+            unequal = (size != 5) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
+                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[4] != ((uintval >> (4 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
+        } else
+#endif
+#if PyLong_SHIFT * 3 < SIZEOF_LONG*8
+        if (uintval >> (PyLong_SHIFT * 3)) {
+            unequal = (size != 4) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
+                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
+        } else
+#endif
+#if PyLong_SHIFT * 2 < SIZEOF_LONG*8
+        if (uintval >> (PyLong_SHIFT * 2)) {
+            unequal = (size != 3) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
+                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
+        } else
+#endif
+#if PyLong_SHIFT * 1 < SIZEOF_LONG*8
+        if (uintval >> (PyLong_SHIFT * 1)) {
+            unequal = (size != 2) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
+                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
+        } else
 #endif
+            unequal = (size != 1) || (((unsigned long) digits[0]) != (uintval & (unsigned long) PyLong_MASK));
+        return (unequal == 0);
+    }
+    #endif
+    if (PyFloat_CheckExact(op1)) {
+        const long b = intval;
+#if CYTHON_COMPILING_IN_LIMITED_API
+        double a = __pyx_PyFloat_AsDouble(op1);
+#else
+        double a = PyFloat_AS_DOUBLE(op1);
+#endif
+        return ((double)a == (double)b);
+    }
+    return __Pyx_PyObject_IsTrueAndDecref(
+        PyObject_RichCompare(op1, op2, Py_EQ));
 }
-static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
-#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
-    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
-    if (likely(module)) {
-        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
-        if (likely(spec)) {
-            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
-            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
-                Py_DECREF(spec);
-                spec = NULL;
+
+/* DictGetItem */
+#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
+static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
+    PyObject *value;
+    value = PyDict_GetItemWithError(d, key);
+    if (unlikely(!value)) {
+        if (!PyErr_Occurred()) {
+            if (unlikely(PyTuple_Check(key))) {
+                PyObject* args = PyTuple_Pack(1, key);
+                if (likely(args)) {
+                    PyErr_SetObject(PyExc_KeyError, args);
+                    Py_DECREF(args);
+                }
+            } else {
+                PyErr_SetObject(PyExc_KeyError, key);
             }
-            Py_XDECREF(unsafe);
         }
-        if (likely(!spec)) {
-            PyErr_Clear();
-            return module;
-        }
-        Py_DECREF(spec);
-        Py_DECREF(module);
-    } else if (PyErr_Occurred()) {
-        PyErr_Clear();
+        return NULL;
     }
+    Py_INCREF(value);
+    return value;
+}
 #endif
-    return __Pyx__ImportDottedModule(name, parts_tuple);
+
+/* PyObjectCall2Args */
+static CYTHON_INLINE PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
+    PyObject *args[3] = {NULL, arg1, arg2};
+    return __Pyx_PyObject_FastCall(function, args+1, 2 | __Pyx_PY_VECTORCALL_ARGUMENTS_OFFSET);
 }
 
-/* ImportFrom */
-static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
-    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
-    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
-        const char* module_name_str = 0;
-        PyObject* module_name = 0;
-        PyObject* module_dot = 0;
-        PyObject* full_name = 0;
-        PyErr_Clear();
-        module_name_str = PyModule_GetName(module);
-        if (unlikely(!module_name_str)) { goto modbad; }
-        module_name = PyUnicode_FromString(module_name_str);
-        if (unlikely(!module_name)) { goto modbad; }
-        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__9);
-        if (unlikely(!module_dot)) { goto modbad; }
-        full_name = PyUnicode_Concat(module_dot, name);
-        if (unlikely(!full_name)) { goto modbad; }
-        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
-        {
-            PyObject *modules = PyImport_GetModuleDict();
-            if (unlikely(!modules))
-                goto modbad;
-            value = PyObject_GetItem(modules, full_name);
-        }
+/* PyObjectGetMethod */
+static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
+    PyObject *attr;
+#if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
+    __Pyx_TypeName type_name;
+    PyTypeObject *tp = Py_TYPE(obj);
+    PyObject *descr;
+    descrgetfunc f = NULL;
+    PyObject **dictptr, *dict;
+    int meth_found = 0;
+    assert (*method == NULL);
+    if (unlikely(tp->tp_getattro != PyObject_GenericGetAttr)) {
+        attr = __Pyx_PyObject_GetAttrStr(obj, name);
+        goto try_unpack;
+    }
+    if (unlikely(tp->tp_dict == NULL) && unlikely(PyType_Ready(tp) < 0)) {
+        return 0;
+    }
+    descr = _PyType_Lookup(tp, name);
+    if (likely(descr != NULL)) {
+        Py_INCREF(descr);
+#if defined(Py_TPFLAGS_METHOD_DESCRIPTOR) && Py_TPFLAGS_METHOD_DESCRIPTOR
+        if (__Pyx_PyType_HasFeature(Py_TYPE(descr), Py_TPFLAGS_METHOD_DESCRIPTOR))
+#elif PY_MAJOR_VERSION >= 3
+        #ifdef __Pyx_CyFunction_USED
+        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type) || __Pyx_CyFunction_Check(descr)))
         #else
-        value = PyImport_GetModule(full_name);
+        if (likely(PyFunction_Check(descr) || __Pyx_IS_TYPE(descr, &PyMethodDescr_Type)))
         #endif
-      modbad:
-        Py_XDECREF(full_name);
-        Py_XDECREF(module_dot);
-        Py_XDECREF(module_name);
-    }
-    if (unlikely(!value)) {
-        PyErr_Format(PyExc_ImportError,
-        #if PY_MAJOR_VERSION < 3
-            "cannot import name %.230s", PyString_AS_STRING(name));
+#else
+        #ifdef __Pyx_CyFunction_USED
+        if (likely(PyFunction_Check(descr) || __Pyx_CyFunction_Check(descr)))
         #else
-            "cannot import name %S", name);
+        if (likely(PyFunction_Check(descr)))
         #endif
+#endif
+        {
+            meth_found = 1;
+        } else {
+            f = Py_TYPE(descr)->tp_descr_get;
+            if (f != NULL && PyDescr_IsData(descr)) {
+                attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
+                Py_DECREF(descr);
+                goto try_unpack;
+            }
+        }
     }
-    return value;
+    dictptr = _PyObject_GetDictPtr(obj);
+    if (dictptr != NULL && (dict = *dictptr) != NULL) {
+        Py_INCREF(dict);
+        attr = __Pyx_PyDict_GetItemStr(dict, name);
+        if (attr != NULL) {
+            Py_INCREF(attr);
+            Py_DECREF(dict);
+            Py_XDECREF(descr);
+            goto try_unpack;
+        }
+        Py_DECREF(dict);
+    }
+    if (meth_found) {
+        *method = descr;
+        return 1;
+    }
+    if (f != NULL) {
+        attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
+        Py_DECREF(descr);
+        goto try_unpack;
+    }
+    if (likely(descr != NULL)) {
+        *method = descr;
+        return 0;
+    }
+    type_name = __Pyx_PyType_GetName(tp);
+    PyErr_Format(PyExc_AttributeError,
+#if PY_MAJOR_VERSION >= 3
+                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%U'",
+                 type_name, name);
+#else
+                 "'" __Pyx_FMT_TYPENAME "' object has no attribute '%.400s'",
+                 type_name, PyString_AS_STRING(name));
+#endif
+    __Pyx_DECREF_TypeName(type_name);
+    return 0;
+#else
+    attr = __Pyx_PyObject_GetAttrStr(obj, name);
+    goto try_unpack;
+#endif
+try_unpack:
+#if CYTHON_UNPACK_METHODS
+    if (likely(attr) && PyMethod_Check(attr) && likely(PyMethod_GET_SELF(attr) == obj)) {
+        PyObject *function = PyMethod_GET_FUNCTION(attr);
+        Py_INCREF(function);
+        Py_DECREF(attr);
+        *method = function;
+        return 1;
+    }
+#endif
+    *method = attr;
+    return 0;
+}
+
+/* PyObjectCallMethod1 */
+static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
+    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
+    Py_DECREF(method);
+    return result;
+}
+static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
+    PyObject *method = NULL, *result;
+    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
+    if (likely(is_method)) {
+        result = __Pyx_PyObject_Call2Args(method, obj, arg);
+        Py_DECREF(method);
+        return result;
+    }
+    if (unlikely(!method)) return NULL;
+    return __Pyx__PyObject_CallMethod1(method, arg);
+}
+
+/* append */
+static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
+    if (likely(PyList_CheckExact(L))) {
+        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
+    } else {
+        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
+        if (unlikely(!retval))
+            return -1;
+        Py_DECREF(retval);
+    }
+    return 0;
+}
+
+/* UnpackUnboundCMethod */
+static PyObject *__Pyx_SelflessCall(PyObject *method, PyObject *args, PyObject *kwargs) {
+    PyObject *selfless_args = PyTuple_GetSlice(args, 1, PyTuple_Size(args));
+    if (unlikely(!selfless_args)) return NULL;
+    PyObject *result = PyObject_Call(method, selfless_args, kwargs);
+    Py_DECREF(selfless_args);
+    return result;
+}
+static PyMethodDef __Pyx_UnboundCMethod_Def = {
+     "CythonUnboundCMethod",
+     __PYX_REINTERPRET_FUNCION(PyCFunction, __Pyx_SelflessCall),
+     METH_VARARGS | METH_KEYWORDS,
+     NULL
+};
+static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
+    PyObject *method;
+    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
+    if (unlikely(!method))
+        return -1;
+    target->method = method;
+#if CYTHON_COMPILING_IN_CPYTHON
+    #if PY_MAJOR_VERSION >= 3
+    if (likely(__Pyx_TypeCheck(method, &PyMethodDescr_Type)))
+    #else
+    if (likely(!PyCFunction_Check(method)))
+    #endif
+    {
+        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
+        target->func = descr->d_method->ml_meth;
+        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_STACKLESS);
+    } else
+#endif
+#if defined(CYTHON_COMPILING_IN_PYPY)
+#elif PY_VERSION_HEX >= 0x03090000
+    if (PyCFunction_CheckExact(method))
+#else
+    if (PyCFunction_Check(method))
+#endif
+    {
+        PyObject *self;
+        int self_found;
+#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
+        self = PyObject_GetAttrString(method, "__self__");
+        if (!self) {
+            PyErr_Clear();
+        }
+#else
+        self = PyCFunction_GET_SELF(method);
+#endif
+        self_found = (self && self != Py_None);
+#if CYTHON_COMPILING_IN_LIMITED_API || CYTHON_COMPILING_IN_PYPY
+        Py_XDECREF(self);
+#endif
+        if (self_found) {
+            PyObject *unbound_method = PyCFunction_New(&__Pyx_UnboundCMethod_Def, method);
+            if (unlikely(!unbound_method)) return -1;
+            Py_DECREF(method);
+            target->method = unbound_method;
+        }
+    }
+    return 0;
+}
+
+/* CallUnboundCMethod0 */
+static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self) {
+    PyObject *args, *result = NULL;
+    if (unlikely(!cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
+#if CYTHON_ASSUME_SAFE_MACROS
+    args = PyTuple_New(1);
+    if (unlikely(!args)) goto bad;
+    Py_INCREF(self);
+    PyTuple_SET_ITEM(args, 0, self);
+#else
+    args = PyTuple_Pack(1, self);
+    if (unlikely(!args)) goto bad;
+#endif
+    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
+    Py_DECREF(args);
+bad:
+    return result;
+}
+
+/* py_dict_items */
+static CYTHON_INLINE PyObject* __Pyx_PyDict_Items(PyObject* d) {
+    if (PY_MAJOR_VERSION >= 3)
+        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_items, d);
+    else
+        return PyDict_Items(d);
 }
 
 /* FixUpExtensionType */
 #if CYTHON_USE_TYPE_SPECS
 static int __Pyx_fix_up_extension_type_from_spec(PyType_Spec *spec, PyTypeObject *type) {
 #if PY_VERSION_HEX > 0x030900B1 || CYTHON_COMPILING_IN_LIMITED_API
     CYTHON_UNUSED_VAR(spec);
@@ -6201,14 +10015,253 @@
     );
     if (likely(op)) {
         PyObject_GC_Track(op);
     }
     return op;
 }
 
+/* Import */
+static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
+    PyObject *module = 0;
+    PyObject *empty_dict = 0;
+    PyObject *empty_list = 0;
+    #if PY_MAJOR_VERSION < 3
+    PyObject *py_import;
+    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
+    if (unlikely(!py_import))
+        goto bad;
+    if (!from_list) {
+        empty_list = PyList_New(0);
+        if (unlikely(!empty_list))
+            goto bad;
+        from_list = empty_list;
+    }
+    #endif
+    empty_dict = PyDict_New();
+    if (unlikely(!empty_dict))
+        goto bad;
+    {
+        #if PY_MAJOR_VERSION >= 3
+        if (level == -1) {
+            if ((1) && (strchr(__Pyx_MODULE_NAME, '.'))) {
+                #if CYTHON_COMPILING_IN_LIMITED_API
+                module = PyImport_ImportModuleLevelObject(
+                    name, empty_dict, empty_dict, from_list, 1);
+                #else
+                module = PyImport_ImportModuleLevelObject(
+                    name, __pyx_d, empty_dict, from_list, 1);
+                #endif
+                if (unlikely(!module)) {
+                    if (unlikely(!PyErr_ExceptionMatches(PyExc_ImportError)))
+                        goto bad;
+                    PyErr_Clear();
+                }
+            }
+            level = 0;
+        }
+        #endif
+        if (!module) {
+            #if PY_MAJOR_VERSION < 3
+            PyObject *py_level = PyInt_FromLong(level);
+            if (unlikely(!py_level))
+                goto bad;
+            module = PyObject_CallFunctionObjArgs(py_import,
+                name, __pyx_d, empty_dict, from_list, py_level, (PyObject *)NULL);
+            Py_DECREF(py_level);
+            #else
+            #if CYTHON_COMPILING_IN_LIMITED_API
+            module = PyImport_ImportModuleLevelObject(
+                name, empty_dict, empty_dict, from_list, level);
+            #else
+            module = PyImport_ImportModuleLevelObject(
+                name, __pyx_d, empty_dict, from_list, level);
+            #endif
+            #endif
+        }
+    }
+bad:
+    Py_XDECREF(empty_dict);
+    Py_XDECREF(empty_list);
+    #if PY_MAJOR_VERSION < 3
+    Py_XDECREF(py_import);
+    #endif
+    return module;
+}
+
+/* ImportFrom */
+static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
+    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
+    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+        const char* module_name_str = 0;
+        PyObject* module_name = 0;
+        PyObject* module_dot = 0;
+        PyObject* full_name = 0;
+        PyErr_Clear();
+        module_name_str = PyModule_GetName(module);
+        if (unlikely(!module_name_str)) { goto modbad; }
+        module_name = PyUnicode_FromString(module_name_str);
+        if (unlikely(!module_name)) { goto modbad; }
+        module_dot = PyUnicode_Concat(module_name, __pyx_kp_u__3);
+        if (unlikely(!module_dot)) { goto modbad; }
+        full_name = PyUnicode_Concat(module_dot, name);
+        if (unlikely(!full_name)) { goto modbad; }
+        #if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+        {
+            PyObject *modules = PyImport_GetModuleDict();
+            if (unlikely(!modules))
+                goto modbad;
+            value = PyObject_GetItem(modules, full_name);
+        }
+        #else
+        value = PyImport_GetModule(full_name);
+        #endif
+      modbad:
+        Py_XDECREF(full_name);
+        Py_XDECREF(module_dot);
+        Py_XDECREF(module_name);
+    }
+    if (unlikely(!value)) {
+        PyErr_Format(PyExc_ImportError,
+        #if PY_MAJOR_VERSION < 3
+            "cannot import name %.230s", PyString_AS_STRING(name));
+        #else
+            "cannot import name %S", name);
+        #endif
+    }
+    return value;
+}
+
+/* ImportDottedModule */
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Error(PyObject *name, PyObject *parts_tuple, Py_ssize_t count) {
+    PyObject *partial_name = NULL, *slice = NULL, *sep = NULL;
+    if (unlikely(PyErr_Occurred())) {
+        PyErr_Clear();
+    }
+    if (likely(PyTuple_GET_SIZE(parts_tuple) == count)) {
+        partial_name = name;
+    } else {
+        slice = PySequence_GetSlice(parts_tuple, 0, count);
+        if (unlikely(!slice))
+            goto bad;
+        sep = PyUnicode_FromStringAndSize(".", 1);
+        if (unlikely(!sep))
+            goto bad;
+        partial_name = PyUnicode_Join(sep, slice);
+    }
+    PyErr_Format(
+#if PY_MAJOR_VERSION < 3
+        PyExc_ImportError,
+        "No module named '%s'", PyString_AS_STRING(partial_name));
+#else
+#if PY_VERSION_HEX >= 0x030600B1
+        PyExc_ModuleNotFoundError,
+#else
+        PyExc_ImportError,
+#endif
+        "No module named '%U'", partial_name);
+#endif
+bad:
+    Py_XDECREF(sep);
+    Py_XDECREF(slice);
+    Py_XDECREF(partial_name);
+    return NULL;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx__ImportDottedModule_Lookup(PyObject *name) {
+    PyObject *imported_module;
+#if PY_VERSION_HEX < 0x030700A1 || (CYTHON_COMPILING_IN_PYPY && PYPY_VERSION_NUM  < 0x07030400)
+    PyObject *modules = PyImport_GetModuleDict();
+    if (unlikely(!modules))
+        return NULL;
+    imported_module = __Pyx_PyDict_GetItemStr(modules, name);
+    Py_XINCREF(imported_module);
+#else
+    imported_module = PyImport_GetModule(name);
+#endif
+    return imported_module;
+}
+#endif
+#if PY_MAJOR_VERSION >= 3
+static PyObject *__Pyx_ImportDottedModule_WalkParts(PyObject *module, PyObject *name, PyObject *parts_tuple) {
+    Py_ssize_t i, nparts;
+    nparts = PyTuple_GET_SIZE(parts_tuple);
+    for (i=1; i < nparts && module; i++) {
+        PyObject *part, *submodule;
+#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
+        part = PyTuple_GET_ITEM(parts_tuple, i);
+#else
+        part = PySequence_ITEM(parts_tuple, i);
+#endif
+        submodule = __Pyx_PyObject_GetAttrStrNoError(module, part);
+#if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
+        Py_DECREF(part);
+#endif
+        Py_DECREF(module);
+        module = submodule;
+    }
+    if (unlikely(!module)) {
+        return __Pyx__ImportDottedModule_Error(name, parts_tuple, i);
+    }
+    return module;
+}
+#endif
+static PyObject *__Pyx__ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if PY_MAJOR_VERSION < 3
+    PyObject *module, *from_list, *star = __pyx_n_s__7;
+    CYTHON_UNUSED_VAR(parts_tuple);
+    from_list = PyList_New(1);
+    if (unlikely(!from_list))
+        return NULL;
+    Py_INCREF(star);
+    PyList_SET_ITEM(from_list, 0, star);
+    module = __Pyx_Import(name, from_list, 0);
+    Py_DECREF(from_list);
+    return module;
+#else
+    PyObject *imported_module;
+    PyObject *module = __Pyx_Import(name, NULL, 0);
+    if (!parts_tuple || unlikely(!module))
+        return module;
+    imported_module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(imported_module)) {
+        Py_DECREF(module);
+        return imported_module;
+    }
+    PyErr_Clear();
+    return __Pyx_ImportDottedModule_WalkParts(module, name, parts_tuple);
+#endif
+}
+static PyObject *__Pyx_ImportDottedModule(PyObject *name, PyObject *parts_tuple) {
+#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030400B1
+    PyObject *module = __Pyx__ImportDottedModule_Lookup(name);
+    if (likely(module)) {
+        PyObject *spec = __Pyx_PyObject_GetAttrStrNoError(module, __pyx_n_s_spec);
+        if (likely(spec)) {
+            PyObject *unsafe = __Pyx_PyObject_GetAttrStrNoError(spec, __pyx_n_s_initializing);
+            if (likely(!unsafe || !__Pyx_PyObject_IsTrue(unsafe))) {
+                Py_DECREF(spec);
+                spec = NULL;
+            }
+            Py_XDECREF(unsafe);
+        }
+        if (likely(!spec)) {
+            PyErr_Clear();
+            return module;
+        }
+        Py_DECREF(spec);
+        Py_DECREF(module);
+    } else if (PyErr_Occurred()) {
+        PyErr_Clear();
+    }
+#endif
+    return __Pyx__ImportDottedModule(name, parts_tuple);
+}
+
 /* CLineInTraceback */
 #ifndef CYTHON_CLINE_IN_TRACEBACK
 static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
     PyObject *use_cline;
     PyObject *ptype, *pvalue, *ptraceback;
 #if CYTHON_COMPILING_IN_CPYTHON
     PyObject **cython_runtime_dict;
@@ -6445,29 +10498,14 @@
     PyTraceBack_Here(py_frame);
 bad:
     Py_XDECREF(py_code);
     Py_XDECREF(py_frame);
 }
 #endif
 
-/* FormatTypeName */
-#if CYTHON_COMPILING_IN_LIMITED_API
-static __Pyx_TypeName
-__Pyx_PyType_GetName(PyTypeObject* tp)
-{
-    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
-                                               __pyx_n_s_name);
-    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
-        PyErr_Clear();
-        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__12));
-    }
-    return name;
-}
-#endif
-
 /* CIntToPy */
 static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
 #ifdef __Pyx_HAS_GCC_DIAGNOSTIC
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #endif
     const long neg_one = (long) -1, const_zero = (long) 0;
@@ -6498,14 +10536,29 @@
         int one = 1; int little = (int)*(unsigned char *)&one;
         unsigned char *bytes = (unsigned char *)&value;
         return _PyLong_FromByteArray(bytes, sizeof(long),
                                      little, !is_unsigned);
     }
 }
 
+/* FormatTypeName */
+#if CYTHON_COMPILING_IN_LIMITED_API
+static __Pyx_TypeName
+__Pyx_PyType_GetName(PyTypeObject* tp)
+{
+    PyObject *name = __Pyx_PyObject_GetAttrStr((PyObject *)tp,
+                                               __pyx_n_s_name);
+    if (unlikely(name == NULL) || unlikely(!PyUnicode_Check(name))) {
+        PyErr_Clear();
+        Py_XSETREF(name, __Pyx_NewRef(__pyx_n_s__14));
+    }
+    return name;
+}
+#endif
+
 /* CIntFromPyVerify */
 #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
 #define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
     __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
 #define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
     {\
@@ -7182,20 +11235,14 @@
     if (likely(PyExceptionClass_Check(err))) {
         return __Pyx_inner_PyErr_GivenExceptionMatches2(err, exc_type1, exc_type2);
     }
     return (PyErr_GivenExceptionMatches(err, exc_type1) || PyErr_GivenExceptionMatches(err, exc_type2));
 }
 #endif
 
-/* CStringEquals */
-static CYTHON_INLINE int __Pyx_StrEq(const char *s1, const char *s2) {
-    while (*s1 != '\0' && *s1 == *s2) { s1++; s2++; }
-    return *s1 == *s2;
-}
-
 /* CheckBinaryVersion */
 static int __Pyx_check_binary_version(void) {
     char ctversion[5];
     int same=1, i, found_dot;
     const char* rt_from_call = Py_GetVersion();
     PyOS_snprintf(ctversion, 5, "%d.%d", PY_MAJOR_VERSION, PY_MINOR_VERSION);
     found_dot = 0;
```

