# Comparing `tmp/fpdf2-2.7.8.tar.gz` & `tmp/fpdf2-2.7.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "fpdf2-2.7.8.tar", last modified: Sat Feb 10 04:30:39 2024, max compression
+gzip compressed data, was "fpdf2-2.7.9.tar", last modified: Fri May 17 15:59:06 2024, max compression
```

## Comparing `fpdf2-2.7.8.tar` & `fpdf2-2.7.9.tar`

### file list

```diff
@@ -1,46 +1,46 @@
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-02-10 04:30:39.731746 fpdf2-2.7.8/
--rw-r--r--   0 runner    (1001) docker     (127)    58280 2024-02-10 04:30:22.000000 fpdf2-2.7.8/CHANGELOG.md
--rw-r--r--   0 runner    (1001) docker     (127)      545 2024-02-10 04:30:22.000000 fpdf2-2.7.8/CONTRIBUTING.md
--rw-r--r--   0 runner    (1001) docker     (127)       87 2024-02-10 04:30:22.000000 fpdf2-2.7.8/CONTRIBUTORS.md
--rw-r--r--   0 runner    (1001) docker     (127)     7632 2024-02-10 04:30:22.000000 fpdf2-2.7.8/LICENSE
--rw-r--r--   0 runner    (1001) docker     (127)    57214 2024-02-10 04:30:39.731746 fpdf2-2.7.8/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)    55700 2024-02-10 04:30:22.000000 fpdf2-2.7.8/README.md
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-02-10 04:30:39.731746 fpdf2-2.7.8/fpdf/
--rw-r--r--   0 runner    (1001) docker     (127)     2286 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3547 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/actions.py
--rw-r--r--   0 runner    (1001) docker     (127)     5680 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/annotations.py
--rw-r--r--   0 runner    (1001) docker     (127)    31143 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/bidi.py
--rw-r--r--   0 runner    (1001) docker     (127)     2875 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/deprecation.py
--rw-r--r--   0 runner    (1001) docker     (127)   148555 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/drawing.py
--rw-r--r--   0 runner    (1001) docker     (127)    21772 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/encryption.py
--rw-r--r--   0 runner    (1001) docker     (127)    27404 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/enums.py
--rw-r--r--   0 runner    (1001) docker     (127)     1760 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/errors.py
--rw-r--r--   0 runner    (1001) docker     (127)    60233 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/fonts.py
--rw-r--r--   0 runner    (1001) docker     (127)   199827 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/fpdf.py
--rw-r--r--   0 runner    (1001) docker     (127)    10799 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/graphics_state.py
--rw-r--r--   0 runner    (1001) docker     (127)    32526 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/html.py
--rw-r--r--   0 runner    (1001) docker     (127)     2981 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/image_datastructures.py
--rw-r--r--   0 runner    (1001) docker     (127)    21224 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/image_parsing.py
--rw-r--r--   0 runner    (1001) docker     (127)    26135 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/line_break.py
--rw-r--r--   0 runner    (1001) docker     (127)    12348 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/linearization.py
--rw-r--r--   0 runner    (1001) docker     (127)     3284 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/outline.py
--rw-r--r--   0 runner    (1001) docker     (127)    38218 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/output.py
--rw-r--r--   0 runner    (1001) docker     (127)     2709 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/prefs.py
--rw-r--r--   0 runner    (1001) docker     (127)     2765 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/recorder.py
--rw-r--r--   0 runner    (1001) docker     (127)     3696 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/sign.py
--rw-r--r--   0 runner    (1001) docker     (127)     5659 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/structure_tree.py
--rw-r--r--   0 runner    (1001) docker     (127)    38235 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/svg.py
--rw-r--r--   0 runner    (1001) docker     (127)    12101 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/syntax.py
--rw-r--r--   0 runner    (1001) docker     (127)    36563 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/table.py
--rw-r--r--   0 runner    (1001) docker     (127)    22574 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/template.py
--rw-r--r--   0 runner    (1001) docker     (127)    21895 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/text_region.py
--rw-r--r--   0 runner    (1001) docker     (127)     4446 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/transitions.py
--rw-r--r--   0 runner    (1001) docker     (127)     7852 2024-02-10 04:30:22.000000 fpdf2-2.7.8/fpdf/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-02-10 04:30:39.731746 fpdf2-2.7.8/fpdf2.egg-info/
--rw-r--r--   0 runner    (1001) docker     (127)    57214 2024-02-10 04:30:39.000000 fpdf2-2.7.8/fpdf2.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)      739 2024-02-10 04:30:39.000000 fpdf2-2.7.8/fpdf2.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (127)        1 2024-02-10 04:30:39.000000 fpdf2-2.7.8/fpdf2.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (127)       51 2024-02-10 04:30:39.000000 fpdf2-2.7.8/fpdf2.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (127)        5 2024-02-10 04:30:39.000000 fpdf2-2.7.8/fpdf2.egg-info/top_level.txt
--rw-r--r--   0 runner    (1001) docker     (127)     1591 2024-02-10 04:30:39.731746 fpdf2-2.7.8/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (127)      352 2024-02-10 04:30:22.000000 fpdf2-2.7.8/setup.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-05-17 15:59:06.026498 fpdf2-2.7.9/
+-rw-r--r--   0 runner    (1001) docker     (127)    60906 2024-05-17 15:58:53.000000 fpdf2-2.7.9/CHANGELOG.md
+-rw-r--r--   0 runner    (1001) docker     (127)      545 2024-05-17 15:58:53.000000 fpdf2-2.7.9/CONTRIBUTING.md
+-rw-r--r--   0 runner    (1001) docker     (127)       87 2024-05-17 15:58:53.000000 fpdf2-2.7.9/CONTRIBUTORS.md
+-rw-r--r--   0 runner    (1001) docker     (127)     7632 2024-05-17 15:58:53.000000 fpdf2-2.7.9/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (127)    58291 2024-05-17 15:59:06.026498 fpdf2-2.7.9/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)    56777 2024-05-17 15:58:53.000000 fpdf2-2.7.9/README.md
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-05-17 15:59:06.022498 fpdf2-2.7.9/fpdf/
+-rw-r--r--   0 runner    (1001) docker     (127)     2286 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3547 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/actions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5680 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/annotations.py
+-rw-r--r--   0 runner    (1001) docker     (127)    31863 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/bidi.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2875 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/deprecation.py
+-rw-r--r--   0 runner    (1001) docker     (127)   148913 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/drawing.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21772 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/encryption.py
+-rw-r--r--   0 runner    (1001) docker     (127)    28607 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/enums.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1760 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/errors.py
+-rw-r--r--   0 runner    (1001) docker     (127)    60329 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/fonts.py
+-rw-r--r--   0 runner    (1001) docker     (127)   201637 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/fpdf.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10799 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/graphics_state.py
+-rw-r--r--   0 runner    (1001) docker     (127)    40930 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/html.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2981 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/image_datastructures.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21316 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/image_parsing.py
+-rw-r--r--   0 runner    (1001) docker     (127)    26255 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/line_break.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12348 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/linearization.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3284 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/outline.py
+-rw-r--r--   0 runner    (1001) docker     (127)    38218 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/output.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2709 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/prefs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2765 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/recorder.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3696 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/sign.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5659 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/structure_tree.py
+-rw-r--r--   0 runner    (1001) docker     (127)    37836 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/svg.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12101 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/syntax.py
+-rw-r--r--   0 runner    (1001) docker     (127)    36974 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/table.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22574 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/template.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22309 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/text_region.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4446 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/transitions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8307 2024-05-17 15:58:53.000000 fpdf2-2.7.9/fpdf/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-05-17 15:59:06.026498 fpdf2-2.7.9/fpdf2.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (127)    58291 2024-05-17 15:59:05.000000 fpdf2-2.7.9/fpdf2.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)      739 2024-05-17 15:59:05.000000 fpdf2-2.7.9/fpdf2.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        1 2024-05-17 15:59:05.000000 fpdf2-2.7.9/fpdf2.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       51 2024-05-17 15:59:05.000000 fpdf2-2.7.9/fpdf2.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        5 2024-05-17 15:59:05.000000 fpdf2-2.7.9/fpdf2.egg-info/top_level.txt
+-rw-r--r--   0 runner    (1001) docker     (127)     1591 2024-05-17 15:59:06.026498 fpdf2-2.7.9/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (127)      352 2024-05-17 15:58:53.000000 fpdf2-2.7.9/setup.py
```

### Comparing `fpdf2-2.7.8/CHANGELOG.md` & `fpdf2-2.7.9/CHANGELOG.md`

 * *Files 1% similar despite different names*

```diff
@@ -12,21 +12,45 @@
 
 Hence, every time you use a newer version of `fpdf2`, we strongly encourage you to execute your scripts
 with the `-Wd` option (_cf._ [documentation](https://docs.python.org/3/using/cmdline.html#cmdoption-W)) 
 in order to get warned about deprecated features used in your code.
 
 This can also be enabled programmatically with `warnings.simplefilter('default', DeprecationWarning)`.
 
-## [2.7.9] - Not released yet
+## [2.8.0] - Not released yet
 ### Added
 
 ### Fixed
 
 ### Changed
 
+### Deprecated
+
+
+## [2.7.9] - 2024-05-17
+### Added
+* new optional parameter `repeat_headings` for [`FPDF.table()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.table) that indicates whether to print table headings on every page
+* support for overriding paragraph direction on bidirectional text
+* new optional `li_prefix_color` parameter for [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html)
+* support for `start` & `type` attributes of `<ol>` tags, and `type` attribute of `<ul>` tags, when using [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html)
+* [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html) now accepts a `tag_styles` parameter to control the font, color & size of HTML elements: `<a>`, `<blockquote>`, `<li>`...
+* [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html) now accepts a `tag_indents` parameter to control, for example, the indent of `<blockquote>` elements
+* [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html) now honors `line-height` attributes on `<ol>` & `<li>` elements, or the same CSS property in `style` attributes on those tags
+* allow to define custom `cell_fill_mode` logic for tables: [_Set cells background_ - documentation section](https://py-pdf.github.io/fpdf2/Tables.html#set-cells-background). Also added 2 new values: `TableCellFillMode.EVEN_ROWS` & `TableCellFillMode.EVEN_COLUMNS`: [documentation](https://py-pdf.github.io/fpdf2/fpdf/enums.html#fpdf.enums.TableCellFillMode)
+### Fixed
+* a bug when rendering vector images with dashed lines that caused a warning message in Adobe Acrobat Reader
+* ordering RTL fragments on bidirectional texts
+* fixed type hint of member `level` in class [`OutlineSection`](https://py-pdf.github.io/fpdf2/fpdf/outline.html#fpdf.outline.OutlineSection) from `str` to `int`.
+* SVG clipping paths being incorrectly painted - _cf._ [issue #1147](https://github.com/py-pdf/fpdf2/issues/1147)]
+* new translation of the tutorial in [Polski](https://py-pdf.github.io/fpdf2/Tutorial-pl.html) - thanks to @DarekRepos
+### Changed
+* improved the performance of `FPDF.start_section()` - _cf._ [issue #1092](https://github.com/py-pdf/fpdf2/issues/1092)
+### Deprecated
+* The `dd_tag_indent` & `li_tag_indent` parameters of `FPDF.write_html()` are replaced by the new `tag_indents` generic parameter.
+* The `heading_sizes` & `pre_code_font` parameters of `FPDF.write_html()` are replaced by the new `tag_styles` generic parameter.
 
 ## [2.7.8] - 2024-02-09
 ### Added
 * support for `<path>` elements in SVG `<clipPath>` elements
 * support for `bidirectional` text shaping - thanks to @andersonhc
 * documentation on how to combine `fpdf2` with [mistletoe](https://pypi.org/project/kaleido/) in order to [generate PDF documents from Markdown (link)](https://py-pdf.github.io/fpdf2/CombineWithMistletoeoToUseMarkdown.html)
 * tutorial in Dutch: [Handleiding](https://py-pdf.github.io/fpdf2/Tutorial-nl.md) - thanks to @Polderrider
@@ -43,15 +67,15 @@
 * [`FPDF.write_html()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.write_html) now properly honors `align=` attributes in `<th>` tags
 * fixed problem using bold italic standard fonts in markdown - thanks to @Alan-Collins
 ### Changed
 * refactored [`FPDF.multi_cell()`](https://py-pdf.github.io/fpdf2/fpdf/fpdf.html#fpdf.fpdf.FPDF.multi_cell) to generate fewer PDF component objects - thanks to @mjasperse
 * outer table borders are now drawn continuously for nonzero `gutter_width`/`gutter_height`, with spacing applied inside the border similar to HTML tables - thanks to @mjasperse - cf. [#1071](https://github.com/py-pdf/fpdf2/issues/1071)
 * removed the requirement that all rows in a `Table` have the same number of columns - thanks to @mjasperse
 ### Deprecated
-- font aliases (`Arial` → `Helvetica`, `CourierNew` → `Courer`, `TimesNewRoman` → `Times`). They will be removed in a later release.
+- font aliases (`Arial` → `Helvetica`, `CourierNew` → `Courier`, `TimesNewRoman` → `Times`). They will be removed in a later release.
 
 ## [2.7.7] - 2023-12-10
 ### Added
 * Basic support for `<image>` elements in SVG vector graphics inserted
 * SVG importing now supports clipping paths, and `<defs>` tags anywhere in the SVG file - thanks to @afriedman412 - cf. [#968](https://github.com/py-pdf/fpdf2/pull/968)
 * [`FPDF.fonts.FontFace`](https://py-pdf.github.io/fpdf2/fpdf/fonts.html#fpdf.fonts.FontFace): Now has a static `combine` method that allows overriding a default FontFace (e.g. for specific cells in a table). Unspecified properties of the override FontFace retain the values of the default - thanks to @TedBrookings - cf. [#979](https://github.com/py-pdf/fpdf2/pull/979)
 * [`TextColumns()`](https://py-pdf.github.io/fpdf2/TextColumns.html) can now have images inserted (both raster and vector) - thanks to @gmischler
```

### Comparing `fpdf2-2.7.8/CONTRIBUTING.md` & `fpdf2-2.7.9/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/LICENSE` & `fpdf2-2.7.9/LICENSE`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/PKG-INFO` & `fpdf2-2.7.9/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: fpdf2
-Version: 2.7.8
+Version: 2.7.9
 Summary: Simple & fast PDF generation for Python
 Home-page: https://py-pdf.github.io/fpdf2/
-Download-URL: https://github.com/py-pdf/fpdf2/tarball/2.7.8
+Download-URL: https://github.com/py-pdf/fpdf2/tarball/2.7.9
 Author: Olivier PLATHEY ported by Max
 Maintainer: Lucas Cimon
 License: LGPLv3+
 Project-URL: Documentation, https://py-pdf.github.io/fpdf2/
 Project-URL: Code, https://github.com/py-pdf/fpdf2
 Project-URL: Issue tracker, https://github.com/py-pdf/fpdf2/issues
 Keywords: pdf,unicode,png,jpg,ttf,barcode
@@ -136,15 +136,15 @@
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-twitter-03A9F4?logo=twitter)](https://twitter.com/share?url=https://github.com/py-pdf/fpdf2&t=fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-facebook-1976D2?logo=facebook)](https://www.facebook.com/sharer/sharer.php?u=https://github.com/py-pdf/fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-linkedin-3949AB?logo=linkedin)](https://www.linkedin.com/shareArticle?url=https://github.com/py-pdf/fpdf2&title=fpdf2)
 
 ## Documentation
 
 - [Documentation Home](https://py-pdf.github.io/fpdf2/)
-- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html)
+- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html) - [Polski](https://py-pdf.github.io/fpdf2/Tutorial-pl.html)
 - Release notes: [CHANGELOG.md](https://github.com/py-pdf/fpdf2/blob/master/CHANGELOG.md) 
 - A series of blog posts: [fpdf2 tag @ ludochaordic](https://chezsoi.org/lucas/blog/tag/fpdf2.html)
 
 You can also have a look at the `tests/`, they're great usage examples!
 
 ## Development
 
@@ -234,15 +234,15 @@
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://www.nuttapat.me"><img src="https://avatars.githubusercontent.com/u/2115896?v=4?s=100" width="100px;" alt="Nuttapat Koonarangsri"/><br /><sub><b>Nuttapat Koonarangsri</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=hackinteach" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ahackinteach" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/sokratisvas"><img src="https://avatars.githubusercontent.com/u/77175483?v=4?s=100" width="100px;" alt="Sokratis Vasiliou"/><br /><sub><b>Sokratis Vasiliou</b></sub></a><br /><a href="#translation-sokratisvas" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/semaeostomea"><img src="https://avatars.githubusercontent.com/u/100974908?v=4?s=100" width="100px;" alt="semaeostomea"/><br /><sub><b>semaeostomea</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Jmillan-Dev"><img src="https://avatars.githubusercontent.com/u/39383390?v=4?s=100" width="100px;" alt="Josué Millán Zamora"/><br /><sub><b>Josué Millán Zamora</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Jmillan-Dev" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/me-suzy"><img src="https://avatars.githubusercontent.com/u/2770489?v=4?s=100" width="100px;" alt="me-suzy"/><br /><sub><b>me-suzy</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ame-suzy" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/dmail00"><img src="https://avatars.githubusercontent.com/u/79044603?v=4?s=100" width="100px;" alt="dmail00"/><br /><sub><b>dmail00</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Admail00" title="Bug reports">🐛</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=dmail00" title="Code">💻</a></td>
-      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a> <a href="#research-GerardoAllende" title="Research">🔬</a></td>
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://nicholasjin.github.io/"><img src="https://avatars.githubusercontent.com/u/15252734?v=4?s=100" width="100px;" alt="Nicholas Jin"/><br /><sub><b>Nicholas Jin</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anicholasjin" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://portfolio-yk-jp.vercel.app/"><img src="https://avatars.githubusercontent.com/u/69574727?v=4?s=100" width="100px;" alt="Yusuke"/><br /><sub><b>Yusuke</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=yk-jp" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Tillrzhtgrfho"><img src="https://avatars.githubusercontent.com/u/86628355?v=4?s=100" width="100px;" alt="Tillrzhtgrfho"/><br /><sub><b>Tillrzhtgrfho</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3ATillrzhtgrfho" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="http://dario.icu/"><img src="https://avatars.githubusercontent.com/u/35274810?v=4?s=100" width="100px;" alt="Dario Ackermann"/><br /><sub><b>Dario Ackermann</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Adarioackermann" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/TzviGreenfeld"><img src="https://avatars.githubusercontent.com/u/43534411?v=4?s=100" width="100px;" alt="Tzvi Greenfeld"/><br /><sub><b>Tzvi Greenfeld</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=TzviGreenfeld" title="Documentation">📖</a> <a href="#translation-TzviGreenfeld" title="Translation">🌍</a></td>
@@ -305,14 +305,19 @@
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Polderrider"><img src="https://avatars.githubusercontent.com/u/51285379?v=4?s=100" width="100px;" alt="Polderrider"/><br /><sub><b>Polderrider</b></sub></a><br /><a href="#translation-Polderrider" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/valholl"><img src="https://avatars.githubusercontent.com/u/301204?v=4?s=100" width="100px;" alt="Elena ``of Valhalla''"/><br /><sub><b>Elena ``of Valhalla''</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=valholl" title="Tests">⚠️</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/nocalla"><img src="https://avatars.githubusercontent.com/u/16230431?v=4?s=100" width="100px;" alt="Niall O'Callaghan"/><br /><sub><b>Niall O'Callaghan</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anocalla" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/jsid72"><img src="https://avatars.githubusercontent.com/u/51690199?v=4?s=100" width="100px;" alt="jsid72"/><br /><sub><b>jsid72</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ajsid72" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://www.linkedin.com/in/alan-collins/"><img src="https://avatars.githubusercontent.com/u/38288262?v=4?s=100" width="100px;" alt="Alan Collins"/><br /><sub><b>Alan Collins</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Alan-Collins" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/hyperstown"><img src="https://avatars.githubusercontent.com/u/64496017?v=4?s=100" width="100px;" alt="hyperstown"/><br /><sub><b>hyperstown</b></sub></a><br /><a href="#content-hyperstown" title="Content">🖋</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Clock-Speed"><img src="https://avatars.githubusercontent.com/u/55024400?v=4?s=100" width="100px;" alt="Clock-Speed"/><br /><sub><b>Clock-Speed</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Clock-Speed" title="Code">💻</a></td>
+    </tr>
+    <tr>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/DarekRepos"><img src="https://avatars.githubusercontent.com/u/32545344?v=4?s=100" width="100px;" alt="Darek"/><br /><sub><b>Darek</b></sub></a><br /><a href="#translation-DarekRepos" title="Translation">🌍</a></td>
     </tr>
   </tbody>
 </table>
 
 <!-- markdownlint-restore -->
 <!-- prettier-ignore-end -->
```

### Comparing `fpdf2-2.7.8/README.md` & `fpdf2-2.7.9/README.md`

 * *Files 0% similar despite different names*

```diff
@@ -100,15 +100,15 @@
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-twitter-03A9F4?logo=twitter)](https://twitter.com/share?url=https://github.com/py-pdf/fpdf2&t=fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-facebook-1976D2?logo=facebook)](https://www.facebook.com/sharer/sharer.php?u=https://github.com/py-pdf/fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-linkedin-3949AB?logo=linkedin)](https://www.linkedin.com/shareArticle?url=https://github.com/py-pdf/fpdf2&title=fpdf2)
 
 ## Documentation
 
 - [Documentation Home](https://py-pdf.github.io/fpdf2/)
-- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html)
+- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html) - [Polski](https://py-pdf.github.io/fpdf2/Tutorial-pl.html)
 - Release notes: [CHANGELOG.md](https://github.com/py-pdf/fpdf2/blob/master/CHANGELOG.md) 
 - A series of blog posts: [fpdf2 tag @ ludochaordic](https://chezsoi.org/lucas/blog/tag/fpdf2.html)
 
 You can also have a look at the `tests/`, they're great usage examples!
 
 ## Development
 
@@ -198,15 +198,15 @@
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://www.nuttapat.me"><img src="https://avatars.githubusercontent.com/u/2115896?v=4?s=100" width="100px;" alt="Nuttapat Koonarangsri"/><br /><sub><b>Nuttapat Koonarangsri</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=hackinteach" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ahackinteach" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/sokratisvas"><img src="https://avatars.githubusercontent.com/u/77175483?v=4?s=100" width="100px;" alt="Sokratis Vasiliou"/><br /><sub><b>Sokratis Vasiliou</b></sub></a><br /><a href="#translation-sokratisvas" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/semaeostomea"><img src="https://avatars.githubusercontent.com/u/100974908?v=4?s=100" width="100px;" alt="semaeostomea"/><br /><sub><b>semaeostomea</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Jmillan-Dev"><img src="https://avatars.githubusercontent.com/u/39383390?v=4?s=100" width="100px;" alt="Josué Millán Zamora"/><br /><sub><b>Josué Millán Zamora</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Jmillan-Dev" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/me-suzy"><img src="https://avatars.githubusercontent.com/u/2770489?v=4?s=100" width="100px;" alt="me-suzy"/><br /><sub><b>me-suzy</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ame-suzy" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/dmail00"><img src="https://avatars.githubusercontent.com/u/79044603?v=4?s=100" width="100px;" alt="dmail00"/><br /><sub><b>dmail00</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Admail00" title="Bug reports">🐛</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=dmail00" title="Code">💻</a></td>
-      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a> <a href="#research-GerardoAllende" title="Research">🔬</a></td>
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://nicholasjin.github.io/"><img src="https://avatars.githubusercontent.com/u/15252734?v=4?s=100" width="100px;" alt="Nicholas Jin"/><br /><sub><b>Nicholas Jin</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anicholasjin" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://portfolio-yk-jp.vercel.app/"><img src="https://avatars.githubusercontent.com/u/69574727?v=4?s=100" width="100px;" alt="Yusuke"/><br /><sub><b>Yusuke</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=yk-jp" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Tillrzhtgrfho"><img src="https://avatars.githubusercontent.com/u/86628355?v=4?s=100" width="100px;" alt="Tillrzhtgrfho"/><br /><sub><b>Tillrzhtgrfho</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3ATillrzhtgrfho" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="http://dario.icu/"><img src="https://avatars.githubusercontent.com/u/35274810?v=4?s=100" width="100px;" alt="Dario Ackermann"/><br /><sub><b>Dario Ackermann</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Adarioackermann" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/TzviGreenfeld"><img src="https://avatars.githubusercontent.com/u/43534411?v=4?s=100" width="100px;" alt="Tzvi Greenfeld"/><br /><sub><b>Tzvi Greenfeld</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=TzviGreenfeld" title="Documentation">📖</a> <a href="#translation-TzviGreenfeld" title="Translation">🌍</a></td>
@@ -269,14 +269,19 @@
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Polderrider"><img src="https://avatars.githubusercontent.com/u/51285379?v=4?s=100" width="100px;" alt="Polderrider"/><br /><sub><b>Polderrider</b></sub></a><br /><a href="#translation-Polderrider" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/valholl"><img src="https://avatars.githubusercontent.com/u/301204?v=4?s=100" width="100px;" alt="Elena ``of Valhalla''"/><br /><sub><b>Elena ``of Valhalla''</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=valholl" title="Tests">⚠️</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/nocalla"><img src="https://avatars.githubusercontent.com/u/16230431?v=4?s=100" width="100px;" alt="Niall O'Callaghan"/><br /><sub><b>Niall O'Callaghan</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anocalla" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/jsid72"><img src="https://avatars.githubusercontent.com/u/51690199?v=4?s=100" width="100px;" alt="jsid72"/><br /><sub><b>jsid72</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ajsid72" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://www.linkedin.com/in/alan-collins/"><img src="https://avatars.githubusercontent.com/u/38288262?v=4?s=100" width="100px;" alt="Alan Collins"/><br /><sub><b>Alan Collins</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Alan-Collins" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/hyperstown"><img src="https://avatars.githubusercontent.com/u/64496017?v=4?s=100" width="100px;" alt="hyperstown"/><br /><sub><b>hyperstown</b></sub></a><br /><a href="#content-hyperstown" title="Content">🖋</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Clock-Speed"><img src="https://avatars.githubusercontent.com/u/55024400?v=4?s=100" width="100px;" alt="Clock-Speed"/><br /><sub><b>Clock-Speed</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Clock-Speed" title="Code">💻</a></td>
+    </tr>
+    <tr>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/DarekRepos"><img src="https://avatars.githubusercontent.com/u/32545344?v=4?s=100" width="100px;" alt="Darek"/><br /><sub><b>Darek</b></sub></a><br /><a href="#translation-DarekRepos" title="Translation">🌍</a></td>
     </tr>
   </tbody>
 </table>
 
 <!-- markdownlint-restore -->
 <!-- prettier-ignore-end -->
```

### Comparing `fpdf2-2.7.8/fpdf/__init__.py` & `fpdf2-2.7.9/fpdf/__init__.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/actions.py` & `fpdf2-2.7.9/fpdf/actions.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/annotations.py` & `fpdf2-2.7.9/fpdf/annotations.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/bidi.py` & `fpdf2-2.7.9/fpdf/bidi.py`

 * *Files 3% similar despite different names*

```diff
@@ -4,14 +4,16 @@
 
 import unicodedata
 from collections import deque
 from dataclasses import dataclass, replace
 from operator import itemgetter
 from typing import List, Tuple
 
+from .enums import TextDirection
+
 MAX_DEPTH = 125
 
 # BidiBrackets 15.1.0 2023-01-18
 # Loaded from https://www.unicode.org/Public/UNIDATA/BidiBrackets.txt
 # This table can be dropped when the information is added on "unicodedata"
 BIDI_BRACKETS = {
     "(": {"pair": ")", "type": "o"},
@@ -414,38 +416,38 @@
             else:
                 if bidi_char.bidi_class in ("L", "EN", "AN"):
                     bidi_char.embedding_level += 1
 
 
 def auto_detect_base_direction(
     string: str, stop_at_pdi: bool = False, debug: bool = False
-) -> str:
+) -> TextDirection:
     """
     This function applies rules P2 and P3 to detect the direction of a paragraph, retuning
     the first strong direction and skipping over isolate sequences.
     P1 must be applied before calling this function (breaking into paragraphs)
     stop_at_pdi can be set to True to get the direction of a single isolate sequence
     """
     # Auto-LTR (standard BIDI) uses the first L/R/AL character, and is LTR if none is found.
     isolate = 0
     for char in string:
         bidi_class = unicodedata.bidirectional(char)
         if debug and bidi_class.isupper():
             bidi_class = "R"
         if bidi_class == "PDI" and isolate == 0 and stop_at_pdi:
-            return "L"
+            return TextDirection.LTR
         if bidi_class in ("LRI", "RLI", "FSI"):
             isolate += 1
         if bidi_class == "PDI" and isolate > 0:
             isolate -= 1
         if bidi_class in ("R", "AL") and isolate == 0:
-            return "R"
+            return TextDirection.RTL
         if bidi_class == "L" and isolate == 0:
-            return "L"
-    return "L"
+            return TextDirection.LTR
+    return TextDirection.LTR
 
 
 def calculate_isolate_runs(paragraph: List[BidiCharacter]) -> List[IsolatingRun]:
     # BD13 and X10
     level_run = []
     lr = []
     lr_embedding_level = paragraph[0].embedding_level
@@ -516,23 +518,27 @@
         "text",
         "base_direction",
         "debug",
         "base_embedding_level",
         "characters",
     )
 
-    def __init__(self, text: str, base_direction: str = None, debug: bool = False):
+    def __init__(
+        self, text: str, base_direction: TextDirection = None, debug: bool = False
+    ):
         self.text = text
         self.base_direction = (
             auto_detect_base_direction(self.text, debug)
             if not base_direction
             else base_direction
         )
         self.debug = debug
-        self.base_embedding_level = 0 if self.base_direction == "L" else 1  # base level
+        self.base_embedding_level = (
+            0 if self.base_direction == TextDirection.LTR else 1
+        )  # base level
         self.characters: List[BidiCharacter] = []
         self.get_bidi_characters()
 
     def get_characters(self) -> List[BidiCharacter]:
         return self.characters
 
     def get_characters_with_embedding_level(self) -> List[BidiCharacter]:
@@ -578,15 +584,15 @@
 
             if bidi_char.bidi_class == "FSI":
                 bidi_char.bidi_class = (
                     "LRI"
                     if auto_detect_base_direction(
                         self.text[index + 1 :], stop_at_pdi=True, debug=self.debug
                     )
-                    == "L"
+                    == TextDirection.LTR
                     else "RLI"
                 )
 
             if bidi_char.bidi_class in ("RLE", "LRE", "RLO", "LRO", "RLI", "LRI"):
                 # X2 - X5: calculate explicit embeddings and explicit overrides
                 if bidi_char.bidi_class[0] == "R":
                     new_embedding_level = (
@@ -696,20 +702,38 @@
         if len(self.characters) == 0:
             return ()
         current_fragment = ""
         current_direction = ""
         for c in self.characters:
             if c.get_direction_from_level() != current_direction:
                 if current_fragment:
-                    bidi_fragments.append((current_fragment, current_direction))
+                    bidi_fragments.append(
+                        (
+                            current_fragment,
+                            (
+                                TextDirection.RTL
+                                if current_direction == "R"
+                                else TextDirection.LTR
+                            ),
+                        )
+                    )
                 current_fragment = ""
                 current_direction = c.get_direction_from_level()
             current_fragment += c.character
         if current_fragment:
-            bidi_fragments.append((current_fragment, current_direction))
+            bidi_fragments.append(
+                (
+                    current_fragment,
+                    (
+                        TextDirection.RTL
+                        if current_direction == "R"
+                        else TextDirection.LTR
+                    ),
+                )
+            )
         return tuple(bidi_fragments)
 
     def reorder_resolved_levels(self):
         before_separator = True
         end_of_line = True
         max_level = 0
         min_odd_level = 999
```

### Comparing `fpdf2-2.7.8/fpdf/deprecation.py` & `fpdf2-2.7.9/fpdf/deprecation.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/drawing.py` & `fpdf2-2.7.9/fpdf/drawing.py`

 * *Files 0% similar despite different names*

```diff
@@ -428,8858 +428,8881 @@
 00001ab0: 2020 636c 732c 205f 6368 6563 6b5f 7261    cls, _check_ra
 00001ac0: 6e67 6528 7229 2c20 5f63 6865 636b 5f72  nge(r), _check_r
 00001ad0: 616e 6765 2867 292c 205f 6368 6563 6b5f  ange(g), _check_
 00001ae0: 7261 6e67 6528 6229 2c20 610a 2020 2020  range(b), a.    
 00001af0: 2020 2020 290a 0a20 2020 2040 7072 6f70      )..    @prop
 00001b00: 6572 7479 0a20 2020 2064 6566 2063 6f6c  erty.    def col
 00001b10: 6f72 7328 7365 6c66 293a 0a20 2020 2020  ors(self):.     
-00001b20: 2020 2022 2222 5468 6520 636f 6c6f 7220     """The color 
-00001b30: 636f 6d70 6f6e 656e 7473 2061 7320 6120  components as a 
-00001b40: 7475 706c 6520 696e 206f 7264 6572 2060  tuple in order `
-00001b50: 2872 2c20 672c 2062 2960 2077 6974 6820  (r, g, b)` with 
-00001b60: 616c 7068 6120 6f6d 6974 7465 642e 2222  alpha omitted.""
-00001b70: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00001b80: 2073 656c 665b 3a2d 315d 0a0a 2020 2020   self[:-1]..    
-00001b90: 6465 6620 7365 7269 616c 697a 6528 7365  def serialize(se
-00001ba0: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
-00001bb0: 2020 2020 7265 7475 726e 2022 2022 2e6a      return " ".j
-00001bc0: 6f69 6e28 6e75 6d62 6572 5f74 6f5f 7374  oin(number_to_st
-00001bd0: 7228 7661 6c29 2066 6f72 2076 616c 2069  r(val) for val i
-00001be0: 6e20 7365 6c66 2e63 6f6c 6f72 7329 202b  n self.colors) +
-00001bf0: 2066 2220 7b73 656c 662e 4f50 4552 4154   f" {self.OPERAT
-00001c00: 4f52 7d22 0a0a 0a5f 5f70 646f 635f 5f5b  OR}"...__pdoc__[
-00001c10: 2244 6576 6963 6552 4742 2e4f 5045 5241  "DeviceRGB.OPERA
-00001c20: 544f 5222 5d20 3d20 4661 6c73 650a 5f5f  TOR"] = False.__
-00001c30: 7064 6f63 5f5f 5b22 4465 7669 6365 5247  pdoc__["DeviceRG
-00001c40: 422e 7222 5d20 3d20 2254 6865 2072 6564  B.r"] = "The red
-00001c50: 2063 6f6c 6f72 2063 6f6d 706f 6e65 6e74   color component
-00001c60: 2e20 4d75 7374 2062 6520 696e 2074 6865  . Must be in the
-00001c70: 2069 6e74 6572 7661 6c20 5b30 2c20 315d   interval [0, 1]
-00001c80: 2e22 0a5f 5f70 646f 635f 5f5b 2244 6576  .".__pdoc__["Dev
-00001c90: 6963 6552 4742 2e67 225d 203d 2022 5468  iceRGB.g"] = "Th
-00001ca0: 6520 6772 6565 6e20 636f 6c6f 7220 636f  e green color co
-00001cb0: 6d70 6f6e 656e 742e 204d 7573 7420 6265  mponent. Must be
-00001cc0: 2069 6e20 7468 6520 696e 7465 7276 616c   in the interval
-00001cd0: 205b 302c 2031 5d2e 220a 5f5f 7064 6f63   [0, 1].".__pdoc
-00001ce0: 5f5f 5b22 4465 7669 6365 5247 422e 6222  __["DeviceRGB.b"
-00001cf0: 5d20 3d20 2254 6865 2062 6c75 6520 636f  ] = "The blue co
-00001d00: 6c6f 7220 636f 6d70 6f6e 656e 742e 204d  lor component. M
-00001d10: 7573 7420 6265 2069 6e20 7468 6520 696e  ust be in the in
-00001d20: 7465 7276 616c 205b 302c 2031 5d2e 220a  terval [0, 1].".
-00001d30: 5f5f 7064 6f63 5f5f 5b0a 2020 2020 2244  __pdoc__[.    "D
-00001d40: 6576 6963 6552 4742 2e61 220a 5d20 3d20  eviceRGB.a".] = 
-00001d50: 2222 220a 5468 6520 616c 7068 6120 636f  """.The alpha co
-00001d60: 6c6f 7220 636f 6d70 6f6e 656e 7420 2869  lor component (i
-00001d70: 2e65 2e20 6f70 6163 6974 7929 2e20 4d75  .e. opacity). Mu
-00001d80: 7374 2062 6520 604e 6f6e 6560 206f 7220  st be `None` or 
-00001d90: 696e 2074 6865 2069 6e74 6572 7661 6c20  in the interval 
-00001da0: 5b30 2c20 315d 2e0a 0a41 6e20 616c 7068  [0, 1]...An alph
-00001db0: 6120 7661 6c75 6520 6f66 2030 206d 616b  a value of 0 mak
-00001dc0: 6573 2074 6865 2063 6f6c 6f72 2066 756c  es the color ful
-00001dd0: 6c79 2074 7261 6e73 7061 7265 6e74 2c20  ly transparent, 
-00001de0: 616e 6420 6120 7661 6c75 6520 6f66 2031  and a value of 1
-00001df0: 206d 616b 6573 2069 7420 6675 6c6c 790a   makes it fully.
-00001e00: 6f70 6171 7565 2e20 4966 2060 4e6f 6e65  opaque. If `None
-00001e10: 602c 2074 6865 2063 6f6c 6f72 2077 696c  `, the color wil
-00001e20: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
-00001e30: 2061 7320 6e6f 7420 7370 6563 6966 7969   as not specifyi
-00001e40: 6e67 2061 2070 6172 7469 6375 6c61 720a  ng a particular.
-00001e50: 7472 616e 7370 6172 656e 6379 2072 6174  transparency rat
-00001e60: 6865 7220 7468 616e 2073 7065 6369 6679  her than specify
-00001e70: 696e 6720 6675 6c6c 7920 7472 616e 7370  ing fully transp
-00001e80: 6172 656e 7420 6f72 2066 756c 6c79 206f  arent or fully o
-00001e90: 7061 7175 652e 0a22 2222 0a0a 0a23 2074  paque.."""...# t
-00001ea0: 6869 7320 7765 6972 6420 696e 6865 7269  his weird inheri
-00001eb0: 7461 6e63 6520 6973 2075 7365 6420 6265  tance is used be
-00001ec0: 6361 7573 6520 666f 7220 736f 6d65 2072  cause for some r
-00001ed0: 6561 736f 6e20 6e6f 726d 616c 204e 616d  eason normal Nam
-00001ee0: 6564 5475 706c 6520 7573 6167 6520 646f  edTuple usage do
-00001ef0: 6573 6e27 740a 2320 616c 6c6f 7720 6f76  esn't.# allow ov
-00001f00: 6572 7269 6469 6e67 205f 5f6e 6577 5f5f  erriding __new__
-00001f10: 2c20 6576 656e 2074 686f 7567 6820 6974  , even though it
-00001f20: 2077 6f72 6b73 206a 7573 7420 6173 2065   works just as e
-00001f30: 7870 6563 7465 6420 7468 6973 2077 6179  xpected this way
-00001f40: 2e0a 636c 6173 7320 4465 7669 6365 4772  ..class DeviceGr
-00001f50: 6179 280a 2020 2020 4e61 6d65 6454 7570  ay(.    NamedTup
-00001f60: 6c65 280a 2020 2020 2020 2020 2244 6576  le(.        "Dev
-00001f70: 6963 6547 7261 7922 2c0a 2020 2020 2020  iceGray",.      
-00001f80: 2020 5b28 2267 222c 204e 756d 6265 7229    [("g", Number)
-00001f90: 2c20 2822 6122 2c20 4f70 7469 6f6e 616c  , ("a", Optional
-00001fa0: 5b4e 756d 6265 725d 295d 2c0a 2020 2020  [Number])],.    
-00001fb0: 290a 293a 0a20 2020 2022 2222 4120 636c  ).):.    """A cl
-00001fc0: 6173 7320 7265 7072 6573 656e 7469 6e67  ass representing
-00001fd0: 2061 2050 4446 2044 6576 6963 6547 7261   a PDF DeviceGra
-00001fe0: 7920 636f 6c6f 722e 2222 220a 0a20 2020  y color."""..   
-00001ff0: 204f 5045 5241 544f 5220 3d20 2267 220a   OPERATOR = "g".
-00002000: 2020 2020 2222 2254 6865 2050 4446 2064      """The PDF d
-00002010: 7261 7769 6e67 206f 7065 7261 746f 7220  rawing operator 
-00002020: 7573 6564 2074 6f20 7370 6563 6966 7920  used to specify 
-00002030: 7468 6973 2074 7970 6520 6f66 2063 6f6c  this type of col
-00002040: 6f72 2e22 2222 0a0a 2020 2020 6465 6620  or."""..    def 
-00002050: 5f5f 6e65 775f 5f28 636c 732c 2067 2c20  __new__(cls, g, 
-00002060: 613d 4e6f 6e65 293a 0a20 2020 2020 2020  a=None):.       
-00002070: 2069 6620 6120 6973 206e 6f74 204e 6f6e   if a is not Non
-00002080: 653a 0a20 2020 2020 2020 2020 2020 205f  e:.            _
-00002090: 6368 6563 6b5f 7261 6e67 6528 6129 0a0a  check_range(a)..
-000020a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000020b0: 7570 6572 2829 2e5f 5f6e 6577 5f5f 2863  uper().__new__(c
-000020c0: 6c73 2c20 5f63 6865 636b 5f72 616e 6765  ls, _check_range
-000020d0: 2867 292c 2061 290a 0a20 2020 2040 7072  (g), a)..    @pr
-000020e0: 6f70 6572 7479 0a20 2020 2064 6566 2063  operty.    def c
-000020f0: 6f6c 6f72 7328 7365 6c66 293a 0a20 2020  olors(self):.   
-00002100: 2020 2020 2022 2222 5468 6520 636f 6c6f       """The colo
-00002110: 7220 636f 6d70 6f6e 656e 7473 2061 7320  r components as 
-00002120: 6120 7475 706c 6520 696e 206f 7264 6572  a tuple in order
-00002130: 2028 672c 2920 7769 7468 2061 6c70 6861   (g,) with alpha
-00002140: 206f 6d69 7474 6564 2e22 2222 0a20 2020   omitted.""".   
-00002150: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00002160: 5b3a 2d31 5d0a 0a20 2020 2064 6566 2073  [:-1]..    def s
-00002170: 6572 6961 6c69 7a65 2873 656c 6629 202d  erialize(self) -
-00002180: 3e20 7374 723a 0a20 2020 2020 2020 2072  > str:.        r
-00002190: 6574 7572 6e20 2220 222e 6a6f 696e 286e  eturn " ".join(n
-000021a0: 756d 6265 725f 746f 5f73 7472 2876 616c  umber_to_str(val
-000021b0: 2920 666f 7220 7661 6c20 696e 2073 656c  ) for val in sel
-000021c0: 662e 636f 6c6f 7273 2920 2b20 6622 207b  f.colors) + f" {
-000021d0: 7365 6c66 2e4f 5045 5241 544f 527d 220a  self.OPERATOR}".
-000021e0: 0a0a 5f5f 7064 6f63 5f5f 5b22 4465 7669  ..__pdoc__["Devi
-000021f0: 6365 4772 6179 2e4f 5045 5241 544f 5222  ceGray.OPERATOR"
-00002200: 5d20 3d20 4661 6c73 650a 5f5f 7064 6f63  ] = False.__pdoc
-00002210: 5f5f 5b0a 2020 2020 2244 6576 6963 6547  __[.    "DeviceG
-00002220: 7261 792e 6722 0a5d 203d 2022 2222 0a54  ray.g".] = """.T
-00002230: 6865 2067 7261 7920 636f 6c6f 7220 636f  he gray color co
-00002240: 6d70 6f6e 656e 742e 204d 7573 7420 6265  mponent. Must be
-00002250: 2069 6e20 7468 6520 696e 7465 7276 616c   in the interval
-00002260: 205b 302c 2031 5d2e 0a0a 4120 7661 6c75   [0, 1]...A valu
-00002270: 6520 6f66 2030 2072 6570 7265 7365 6e74  e of 0 represent
-00002280: 7320 626c 6163 6b20 616e 6420 6120 7661  s black and a va
-00002290: 6c75 6520 6f66 2031 2072 6570 7265 7365  lue of 1 represe
-000022a0: 6e74 7320 7768 6974 652e 0a22 2222 0a5f  nts white.."""._
-000022b0: 5f70 646f 635f 5f5b 0a20 2020 2022 4465  _pdoc__[.    "De
-000022c0: 7669 6365 4772 6179 2e61 220a 5d20 3d20  viceGray.a".] = 
-000022d0: 2222 220a 5468 6520 616c 7068 6120 636f  """.The alpha co
-000022e0: 6c6f 7220 636f 6d70 6f6e 656e 7420 2869  lor component (i
-000022f0: 2e65 2e20 6f70 6163 6974 7929 2e20 4d75  .e. opacity). Mu
-00002300: 7374 2062 6520 604e 6f6e 6560 206f 7220  st be `None` or 
-00002310: 696e 2074 6865 2069 6e74 6572 7661 6c20  in the interval 
-00002320: 5b30 2c20 315d 2e0a 0a41 6e20 616c 7068  [0, 1]...An alph
-00002330: 6120 7661 6c75 6520 6f66 2030 206d 616b  a value of 0 mak
-00002340: 6573 2074 6865 2063 6f6c 6f72 2066 756c  es the color ful
-00002350: 6c79 2074 7261 6e73 7061 7265 6e74 2c20  ly transparent, 
-00002360: 616e 6420 6120 7661 6c75 6520 6f66 2031  and a value of 1
-00002370: 206d 616b 6573 2069 7420 6675 6c6c 790a   makes it fully.
-00002380: 6f70 6171 7565 2e20 4966 2060 4e6f 6e65  opaque. If `None
-00002390: 602c 2074 6865 2063 6f6c 6f72 2077 696c  `, the color wil
-000023a0: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
-000023b0: 2061 7320 6e6f 7420 7370 6563 6966 7969   as not specifyi
-000023c0: 6e67 2061 2070 6172 7469 6375 6c61 720a  ng a particular.
-000023d0: 7472 616e 7370 6172 656e 6379 2072 6174  transparency rat
-000023e0: 6865 7220 7468 616e 2073 7065 6369 6679  her than specify
-000023f0: 696e 6720 6675 6c6c 7920 7472 616e 7370  ing fully transp
-00002400: 6172 656e 7420 6f72 2066 756c 6c79 206f  arent or fully o
-00002410: 7061 7175 652e 0a22 2222 0a0a 0a23 2074  paque.."""...# t
-00002420: 6869 7320 7765 6972 6420 696e 6865 7269  his weird inheri
-00002430: 7461 6e63 6520 6973 2075 7365 6420 6265  tance is used be
-00002440: 6361 7573 6520 666f 7220 736f 6d65 2072  cause for some r
-00002450: 6561 736f 6e20 6e6f 726d 616c 204e 616d  eason normal Nam
-00002460: 6564 5475 706c 6520 7573 6167 6520 646f  edTuple usage do
-00002470: 6573 6e27 740a 2320 616c 6c6f 7720 6f76  esn't.# allow ov
-00002480: 6572 7269 6469 6e67 205f 5f6e 6577 5f5f  erriding __new__
-00002490: 2c20 6576 656e 2074 686f 7567 6820 6974  , even though it
-000024a0: 2077 6f72 6b73 206a 7573 7420 6173 2065   works just as e
-000024b0: 7870 6563 7465 6420 7468 6973 2077 6179  xpected this way
-000024c0: 2e0a 636c 6173 7320 4465 7669 6365 434d  ..class DeviceCM
-000024d0: 594b 280a 2020 2020 4e61 6d65 6454 7570  YK(.    NamedTup
-000024e0: 6c65 280a 2020 2020 2020 2020 2244 6576  le(.        "Dev
-000024f0: 6963 6543 4d59 4b22 2c0a 2020 2020 2020  iceCMYK",.      
-00002500: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
-00002510: 2822 6322 2c20 4e75 6d62 6572 292c 0a20  ("c", Number),. 
-00002520: 2020 2020 2020 2020 2020 2028 226d 222c             ("m",
-00002530: 204e 756d 6265 7229 2c0a 2020 2020 2020   Number),.      
-00002540: 2020 2020 2020 2822 7922 2c20 4e75 6d62        ("y", Numb
-00002550: 6572 292c 0a20 2020 2020 2020 2020 2020  er),.           
-00002560: 2028 226b 222c 204e 756d 6265 7229 2c0a   ("k", Number),.
-00002570: 2020 2020 2020 2020 2020 2020 2822 6122              ("a"
-00002580: 2c20 4f70 7469 6f6e 616c 5b4e 756d 6265  , Optional[Numbe
-00002590: 725d 292c 0a20 2020 2020 2020 205d 2c0a  r]),.        ],.
-000025a0: 2020 2020 290a 293a 0a20 2020 2022 2222      ).):.    """
-000025b0: 4120 636c 6173 7320 7265 7072 6573 656e  A class represen
-000025c0: 7469 6e67 2061 2050 4446 2044 6576 6963  ting a PDF Devic
-000025d0: 6543 4d59 4b20 636f 6c6f 722e 2222 220a  eCMYK color.""".
-000025e0: 0a20 2020 204f 5045 5241 544f 5220 3d20  .    OPERATOR = 
-000025f0: 226b 220a 2020 2020 2222 2254 6865 2050  "k".    """The P
-00002600: 4446 2064 7261 7769 6e67 206f 7065 7261  DF drawing opera
-00002610: 746f 7220 7573 6564 2074 6f20 7370 6563  tor used to spec
-00002620: 6966 7920 7468 6973 2074 7970 6520 6f66  ify this type of
-00002630: 2063 6f6c 6f72 2e22 2222 0a0a 2020 2020   color."""..    
-00002640: 6465 6620 5f5f 6e65 775f 5f28 636c 732c  def __new__(cls,
-00002650: 2063 2c20 6d2c 2079 2c20 6b2c 2061 3d4e   c, m, y, k, a=N
-00002660: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00002670: 2061 2069 7320 6e6f 7420 4e6f 6e65 3a0a   a is not None:.
-00002680: 2020 2020 2020 2020 2020 2020 5f63 6865              _che
-00002690: 636b 5f72 616e 6765 2861 290a 0a20 2020  ck_range(a)..   
-000026a0: 2020 2020 2072 6574 7572 6e20 7375 7065       return supe
-000026b0: 7228 292e 5f5f 6e65 775f 5f28 0a20 2020  r().__new__(.   
-000026c0: 2020 2020 2020 2020 2063 6c73 2c20 5f63           cls, _c
-000026d0: 6865 636b 5f72 616e 6765 2863 292c 205f  heck_range(c), _
-000026e0: 6368 6563 6b5f 7261 6e67 6528 6d29 2c20  check_range(m), 
-000026f0: 5f63 6865 636b 5f72 616e 6765 2879 292c  _check_range(y),
-00002700: 205f 6368 6563 6b5f 7261 6e67 6528 6b29   _check_range(k)
-00002710: 2c20 610a 2020 2020 2020 2020 290a 0a20  , a.        ).. 
-00002720: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-00002730: 2064 6566 2063 6f6c 6f72 7328 7365 6c66   def colors(self
-00002740: 293a 0a20 2020 2020 2020 2022 2222 5468  ):.        """Th
-00002750: 6520 636f 6c6f 7220 636f 6d70 6f6e 656e  e color componen
-00002760: 7473 2061 7320 6120 7475 706c 6520 696e  ts as a tuple in
-00002770: 206f 7264 6572 2028 632c 206d 2c20 792c   order (c, m, y,
-00002780: 206b 2920 7769 7468 2061 6c70 6861 206f   k) with alpha o
-00002790: 6d69 7474 6564 2e22 2222 0a0a 2020 2020  mitted."""..    
-000027a0: 2020 2020 7265 7475 726e 2073 656c 665b      return self[
-000027b0: 3a2d 315d 0a0a 2020 2020 6465 6620 7365  :-1]..    def se
-000027c0: 7269 616c 697a 6528 7365 6c66 2920 2d3e  rialize(self) ->
-000027d0: 2073 7472 3a0a 2020 2020 2020 2020 7265   str:.        re
-000027e0: 7475 726e 2022 2022 2e6a 6f69 6e28 6e75  turn " ".join(nu
-000027f0: 6d62 6572 5f74 6f5f 7374 7228 7661 6c29  mber_to_str(val)
-00002800: 2066 6f72 2076 616c 2069 6e20 7365 6c66   for val in self
-00002810: 2e63 6f6c 6f72 7329 202b 2066 2220 7b73  .colors) + f" {s
-00002820: 656c 662e 4f50 4552 4154 4f52 7d22 0a0a  elf.OPERATOR}"..
-00002830: 0a5f 5f70 646f 635f 5f5b 2244 6576 6963  .__pdoc__["Devic
-00002840: 6543 4d59 4b2e 4f50 4552 4154 4f52 225d  eCMYK.OPERATOR"]
-00002850: 203d 2046 616c 7365 0a5f 5f70 646f 635f   = False.__pdoc_
-00002860: 5f5b 2244 6576 6963 6543 4d59 4b2e 6322  _["DeviceCMYK.c"
-00002870: 5d20 3d20 2254 6865 2063 7961 6e20 636f  ] = "The cyan co
-00002880: 6c6f 7220 636f 6d70 6f6e 656e 742e 204d  lor component. M
-00002890: 7573 7420 6265 2069 6e20 7468 6520 696e  ust be in the in
-000028a0: 7465 7276 616c 205b 302c 2031 5d2e 220a  terval [0, 1].".
-000028b0: 5f5f 7064 6f63 5f5f 5b22 4465 7669 6365  __pdoc__["Device
-000028c0: 434d 594b 2e6d 225d 203d 2028 0a20 2020  CMYK.m"] = (.   
-000028d0: 2022 5468 6520 6d61 6765 6e74 6120 636f   "The magenta co
-000028e0: 6c6f 7220 636f 6d70 6f6e 656e 742e 204d  lor component. M
-000028f0: 7573 7420 6265 2069 6e20 7468 6520 696e  ust be in the in
-00002900: 7465 7276 616c 205b 302c 2031 5d2e 220a  terval [0, 1].".
-00002910: 290a 5f5f 7064 6f63 5f5f 5b22 4465 7669  ).__pdoc__["Devi
-00002920: 6365 434d 594b 2e79 225d 203d 2022 5468  ceCMYK.y"] = "Th
-00002930: 6520 7965 6c6c 6f77 2063 6f6c 6f72 2063  e yellow color c
-00002940: 6f6d 706f 6e65 6e74 2e20 4d75 7374 2062  omponent. Must b
-00002950: 6520 696e 2074 6865 2069 6e74 6572 7661  e in the interva
-00002960: 6c20 5b30 2c20 315d 2e22 0a5f 5f70 646f  l [0, 1].".__pdo
-00002970: 635f 5f5b 2244 6576 6963 6543 4d59 4b2e  c__["DeviceCMYK.
-00002980: 6b22 5d20 3d20 2254 6865 2062 6c61 636b  k"] = "The black
-00002990: 2063 6f6c 6f72 2063 6f6d 706f 6e65 6e74   color component
-000029a0: 2e20 4d75 7374 2062 6520 696e 2074 6865  . Must be in the
-000029b0: 2069 6e74 6572 7661 6c20 5b30 2c20 315d   interval [0, 1]
-000029c0: 2e22 0a5f 5f70 646f 635f 5f5b 0a20 2020  .".__pdoc__[.   
-000029d0: 2022 4465 7669 6365 434d 594b 2e61 220a   "DeviceCMYK.a".
-000029e0: 5d20 3d20 2222 220a 5468 6520 616c 7068  ] = """.The alph
-000029f0: 6120 636f 6c6f 7220 636f 6d70 6f6e 656e  a color componen
-00002a00: 7420 2869 2e65 2e20 6f70 6163 6974 7929  t (i.e. opacity)
-00002a10: 2e20 4d75 7374 2062 6520 604e 6f6e 6560  . Must be `None`
-00002a20: 206f 7220 696e 2074 6865 2069 6e74 6572   or in the inter
-00002a30: 7661 6c20 5b30 2c20 315d 2e0a 0a41 6e20  val [0, 1]...An 
-00002a40: 616c 7068 6120 7661 6c75 6520 6f66 2030  alpha value of 0
-00002a50: 206d 616b 6573 2074 6865 2063 6f6c 6f72   makes the color
-00002a60: 2066 756c 6c79 2074 7261 6e73 7061 7265   fully transpare
-00002a70: 6e74 2c20 616e 6420 6120 7661 6c75 6520  nt, and a value 
-00002a80: 6f66 2031 206d 616b 6573 2069 7420 6675  of 1 makes it fu
-00002a90: 6c6c 790a 6f70 6171 7565 2e20 4966 2060  lly.opaque. If `
-00002aa0: 4e6f 6e65 602c 2074 6865 2063 6f6c 6f72  None`, the color
-00002ab0: 2077 696c 6c20 6265 2069 6e74 6572 7072   will be interpr
-00002ac0: 6574 6564 2061 7320 6e6f 7420 7370 6563  eted as not spec
-00002ad0: 6966 7969 6e67 2061 2070 6172 7469 6375  ifying a particu
-00002ae0: 6c61 720a 7472 616e 7370 6172 656e 6379  lar.transparency
-00002af0: 2072 6174 6865 7220 7468 616e 2073 7065   rather than spe
-00002b00: 6369 6679 696e 6720 6675 6c6c 7920 7472  cifying fully tr
-00002b10: 616e 7370 6172 656e 7420 6f72 2066 756c  ansparent or ful
-00002b20: 6c79 206f 7061 7175 652e 0a22 2222 0a0a  ly opaque.."""..
-00002b30: 0a64 6566 2072 6762 3828 722c 2067 2c20  .def rgb8(r, g, 
-00002b40: 622c 2061 3d4e 6f6e 6529 3a0a 2020 2020  b, a=None):.    
-00002b50: 2222 220a 2020 2020 5072 6f64 7563 6520  """.    Produce 
-00002b60: 6120 4465 7669 6365 5247 4220 636f 6c6f  a DeviceRGB colo
-00002b70: 7220 6672 6f6d 2074 6865 2067 6976 656e  r from the given
-00002b80: 2038 2d62 6974 2052 4742 2076 616c 7565   8-bit RGB value
-00002b90: 732e 0a0a 2020 2020 4172 6773 3a0a 2020  s...    Args:.  
-00002ba0: 2020 2020 2020 7220 284e 756d 6265 7229        r (Number)
-00002bb0: 3a20 7265 6420 636f 6c6f 7220 636f 6d70  : red color comp
-00002bc0: 6f6e 656e 742e 204d 7573 7420 6265 2069  onent. Must be i
-00002bd0: 6e20 7468 6520 696e 7465 7276 616c 205b  n the interval [
-00002be0: 302c 2032 3535 5d2e 0a20 2020 2020 2020  0, 255]..       
-00002bf0: 2067 2028 4e75 6d62 6572 293a 2067 7265   g (Number): gre
-00002c00: 656e 2063 6f6c 6f72 2063 6f6d 706f 6e65  en color compone
-00002c10: 6e74 2e20 4d75 7374 2062 6520 696e 2074  nt. Must be in t
-00002c20: 6865 2069 6e74 6572 7661 6c20 5b30 2c20  he interval [0, 
-00002c30: 3235 355d 2e0a 2020 2020 2020 2020 6220  255]..        b 
-00002c40: 284e 756d 6265 7229 3a20 626c 7565 2063  (Number): blue c
-00002c50: 6f6c 6f72 2063 6f6d 706f 6e65 6e74 2e20  olor component. 
-00002c60: 4d75 7374 2062 6520 696e 2074 6865 2069  Must be in the i
-00002c70: 6e74 6572 7661 6c20 5b30 2c20 3235 355d  nterval [0, 255]
-00002c80: 2e0a 2020 2020 2020 2020 6120 284f 7074  ..        a (Opt
-00002c90: 696f 6e61 6c5b 4e75 6d62 6572 5d29 3a20  ional[Number]): 
-00002ca0: 616c 7068 6120 636f 6d70 6f6e 656e 742e  alpha component.
-00002cb0: 204d 7573 7420 6265 2060 4e6f 6e65 6020   Must be `None` 
-00002cc0: 6f72 2069 6e20 7468 6520 696e 7465 7276  or in the interv
-00002cd0: 616c 0a20 2020 2020 2020 2020 2020 205b  al.            [
-00002ce0: 302c 2032 3535 5d2e 2030 2069 7320 6675  0, 255]. 0 is fu
-00002cf0: 6c6c 7920 7472 616e 7370 6172 656e 742c  lly transparent,
-00002d00: 2032 3535 2069 7320 6675 6c6c 7920 6f70   255 is fully op
-00002d10: 6171 7565 0a0a 2020 2020 5265 7475 726e  aque..    Return
-00002d20: 733a 0a20 2020 2020 2020 2044 6576 6963  s:.        Devic
-00002d30: 6552 4742 2063 6f6c 6f72 2072 6570 7265  eRGB color repre
-00002d40: 7365 6e74 6174 696f 6e2e 0a0a 2020 2020  sentation...    
-00002d50: 5261 6973 6573 3a0a 2020 2020 2020 2020  Raises:.        
-00002d60: 5661 6c75 6545 7272 6f72 3a20 6966 2061  ValueError: if a
-00002d70: 6e79 2063 6f6d 706f 6e65 6e74 7320 6172  ny components ar
-00002d80: 6520 6e6f 7420 696e 2074 6865 6972 2076  e not in their v
-00002d90: 616c 6964 2069 6e74 6572 7661 6c2e 0a20  alid interval.. 
-00002da0: 2020 2022 2222 0a20 2020 2069 6620 6120     """.    if a 
-00002db0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00002dc0: 2020 2020 2061 202f 3d20 3235 352e 300a       a /= 255.0.
-00002dd0: 0a20 2020 2072 6574 7572 6e20 4465 7669  .    return Devi
-00002de0: 6365 5247 4228 7220 2f20 3235 352e 302c  ceRGB(r / 255.0,
-00002df0: 2067 202f 2032 3535 2e30 2c20 6220 2f20   g / 255.0, b / 
-00002e00: 3235 352e 302c 2061 290a 0a0a 6465 6620  255.0, a)...def 
-00002e10: 6772 6179 3828 672c 2061 3d4e 6f6e 6529  gray8(g, a=None)
-00002e20: 3a0a 2020 2020 2222 220a 2020 2020 5072  :.    """.    Pr
-00002e30: 6f64 7563 6520 6120 4465 7669 6365 4772  oduce a DeviceGr
-00002e40: 6179 2063 6f6c 6f72 2066 726f 6d20 7468  ay color from th
-00002e50: 6520 6769 7665 6e20 382d 6269 7420 6772  e given 8-bit gr
-00002e60: 6179 2076 616c 7565 2e0a 0a20 2020 2041  ay value...    A
-00002e70: 7267 733a 0a20 2020 2020 2020 2067 2028  rgs:.        g (
-00002e80: 4e75 6d62 6572 293a 2067 7261 7920 636f  Number): gray co
-00002e90: 6c6f 7220 636f 6d70 6f6e 656e 742e 204d  lor component. M
-00002ea0: 7573 7420 6265 2069 6e20 7468 6520 696e  ust be in the in
-00002eb0: 7465 7276 616c 205b 302c 2032 3535 5d2e  terval [0, 255].
-00002ec0: 2030 2069 7320 626c 6163 6b2c 0a20 2020   0 is black,.   
-00002ed0: 2020 2020 2020 2020 2032 3535 2069 7320           255 is 
-00002ee0: 7768 6974 652e 0a20 2020 2020 2020 2061  white..        a
-00002ef0: 2028 4f70 7469 6f6e 616c 5b4e 756d 6265   (Optional[Numbe
-00002f00: 725d 293a 2061 6c70 6861 2063 6f6d 706f  r]): alpha compo
-00002f10: 6e65 6e74 2e20 4d75 7374 2062 6520 604e  nent. Must be `N
-00002f20: 6f6e 6560 206f 7220 696e 2074 6865 2069  one` or in the i
-00002f30: 6e74 6572 7661 6c0a 2020 2020 2020 2020  nterval.        
-00002f40: 2020 2020 5b30 2c20 3235 355d 2e20 3020      [0, 255]. 0 
-00002f50: 6973 2066 756c 6c79 2074 7261 6e73 7061  is fully transpa
-00002f60: 7265 6e74 2c20 3235 3520 6973 2066 756c  rent, 255 is ful
-00002f70: 6c79 206f 7061 7175 650a 0a20 2020 2052  ly opaque..    R
-00002f80: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-00002f90: 4465 7669 6365 4772 6179 2063 6f6c 6f72  DeviceGray color
-00002fa0: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
-00002fb0: 0a0a 2020 2020 5261 6973 6573 3a0a 2020  ..    Raises:.  
-00002fc0: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
-00002fd0: 3a20 6966 2061 6e79 2063 6f6d 706f 6e65  : if any compone
-00002fe0: 6e74 7320 6172 6520 6e6f 7420 696e 2074  nts are not in t
-00002ff0: 6865 6972 2076 616c 6964 2069 6e74 6572  heir valid inter
-00003000: 7661 6c2e 0a20 2020 2022 2222 0a20 2020  val..    """.   
-00003010: 2069 6620 6120 6973 206e 6f74 204e 6f6e   if a is not Non
-00003020: 653a 0a20 2020 2020 2020 2061 202f 3d20  e:.        a /= 
-00003030: 3235 352e 300a 0a20 2020 2072 6574 7572  255.0..    retur
-00003040: 6e20 4465 7669 6365 4772 6179 2867 202f  n DeviceGray(g /
-00003050: 2032 3535 2e30 2c20 6129 0a0a 0a64 6566   255.0, a)...def
-00003060: 2063 6f6e 7665 7274 5f74 6f5f 6465 7669   convert_to_devi
-00003070: 6365 5f63 6f6c 6f72 2872 2c20 673d 2d31  ce_color(r, g=-1
-00003080: 2c20 623d 2d31 293a 0a20 2020 2069 6620  , b=-1):.    if 
-00003090: 6973 696e 7374 616e 6365 2872 2c20 2844  isinstance(r, (D
-000030a0: 6576 6963 6547 7261 792c 2044 6576 6963  eviceGray, Devic
-000030b0: 6552 4742 2929 3a0a 2020 2020 2020 2020  eRGB)):.        
-000030c0: 2320 4e6f 7465 3a20 696e 2074 6869 7320  # Note: in this 
-000030d0: 6361 7365 2c20 7220 6973 2061 6c73 6f20  case, r is also 
-000030e0: 6120 5365 7175 656e 6365 0a20 2020 2020  a Sequence.     
-000030f0: 2020 2072 6574 7572 6e20 720a 2020 2020     return r.    
-00003100: 6966 2069 7369 6e73 7461 6e63 6528 722c  if isinstance(r,
-00003110: 2073 7472 2920 616e 6420 722e 7374 6172   str) and r.star
-00003120: 7473 7769 7468 2822 2322 293a 0a20 2020  tswith("#"):.   
-00003130: 2020 2020 2072 6574 7572 6e20 636f 6c6f       return colo
-00003140: 725f 6672 6f6d 5f68 6578 5f73 7472 696e  r_from_hex_strin
-00003150: 6728 7229 0a20 2020 2069 6620 6973 696e  g(r).    if isin
-00003160: 7374 616e 6365 2872 2c20 5365 7175 656e  stance(r, Sequen
-00003170: 6365 293a 0a20 2020 2020 2020 2072 2c20  ce):.        r, 
-00003180: 672c 2062 203d 2072 0a20 2020 2069 6620  g, b = r.    if 
-00003190: 2872 2c20 672c 2062 2920 3d3d 2028 302c  (r, g, b) == (0,
-000031a0: 2030 2c20 3029 206f 7220 6720 3d3d 202d   0, 0) or g == -
-000031b0: 313a 0a20 2020 2020 2020 2072 6574 7572  1:.        retur
-000031c0: 6e20 4465 7669 6365 4772 6179 2872 202f  n DeviceGray(r /
-000031d0: 2032 3535 290a 2020 2020 7265 7475 726e   255).    return
-000031e0: 2044 6576 6963 6552 4742 2872 202f 2032   DeviceRGB(r / 2
-000031f0: 3535 2c20 6720 2f20 3235 352c 2062 202f  55, g / 255, b /
-00003200: 2032 3535 290a 0a0a 6465 6620 636d 796b   255)...def cmyk
-00003210: 3828 632c 206d 2c20 792c 206b 2c20 613d  8(c, m, y, k, a=
-00003220: 4e6f 6e65 293a 0a20 2020 2022 2222 0a20  None):.    """. 
-00003230: 2020 2050 726f 6475 6365 2061 2044 6576     Produce a Dev
-00003240: 6963 6543 4d59 4b20 636f 6c6f 7220 6672  iceCMYK color fr
-00003250: 6f6d 2074 6865 2067 6976 656e 2038 2d62  om the given 8-b
-00003260: 6974 2043 4d59 4b20 7661 6c75 6573 2e0a  it CMYK values..
-00003270: 0a20 2020 2041 7267 733a 0a20 2020 2020  .    Args:.     
-00003280: 2020 2063 2028 4e75 6d62 6572 293a 2072     c (Number): r
-00003290: 6564 2063 6f6c 6f72 2063 6f6d 706f 6e65  ed color compone
-000032a0: 6e74 2e20 4d75 7374 2062 6520 696e 2074  nt. Must be in t
-000032b0: 6865 2069 6e74 6572 7661 6c20 5b30 2c20  he interval [0, 
-000032c0: 3235 355d 2e0a 2020 2020 2020 2020 6d20  255]..        m 
-000032d0: 284e 756d 6265 7229 3a20 6772 6565 6e20  (Number): green 
-000032e0: 636f 6c6f 7220 636f 6d70 6f6e 656e 742e  color component.
-000032f0: 204d 7573 7420 6265 2069 6e20 7468 6520   Must be in the 
-00003300: 696e 7465 7276 616c 205b 302c 2032 3535  interval [0, 255
-00003310: 5d2e 0a20 2020 2020 2020 2079 2028 4e75  ]..        y (Nu
-00003320: 6d62 6572 293a 2062 6c75 6520 636f 6c6f  mber): blue colo
-00003330: 7220 636f 6d70 6f6e 656e 742e 204d 7573  r component. Mus
-00003340: 7420 6265 2069 6e20 7468 6520 696e 7465  t be in the inte
-00003350: 7276 616c 205b 302c 2032 3535 5d2e 0a20  rval [0, 255].. 
-00003360: 2020 2020 2020 206b 2028 4e75 6d62 6572         k (Number
-00003370: 293a 2062 6c75 6520 636f 6c6f 7220 636f  ): blue color co
-00003380: 6d70 6f6e 656e 742e 204d 7573 7420 6265  mponent. Must be
-00003390: 2069 6e20 7468 6520 696e 7465 7276 616c   in the interval
-000033a0: 205b 302c 2032 3535 5d2e 0a20 2020 2020   [0, 255]..     
-000033b0: 2020 2061 2028 4f70 7469 6f6e 616c 5b4e     a (Optional[N
-000033c0: 756d 6265 725d 293a 2061 6c70 6861 2063  umber]): alpha c
-000033d0: 6f6d 706f 6e65 6e74 2e20 4d75 7374 2062  omponent. Must b
-000033e0: 6520 604e 6f6e 6560 206f 7220 696e 2074  e `None` or in t
-000033f0: 6865 2069 6e74 6572 7661 6c0a 2020 2020  he interval.    
-00003400: 2020 2020 2020 2020 5b30 2c20 3235 355d          [0, 255]
-00003410: 2e20 3020 6973 2066 756c 6c79 2074 7261  . 0 is fully tra
-00003420: 6e73 7061 7265 6e74 2c20 3235 3520 6973  nsparent, 255 is
-00003430: 2066 756c 6c79 206f 7061 7175 650a 0a20   fully opaque.. 
-00003440: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00003450: 2020 2020 4465 7669 6365 434d 594b 2063      DeviceCMYK c
-00003460: 6f6c 6f72 2072 6570 7265 7365 6e74 6174  olor representat
-00003470: 696f 6e2e 0a0a 2020 2020 5261 6973 6573  ion...    Raises
-00003480: 3a0a 2020 2020 2020 2020 5661 6c75 6545  :.        ValueE
-00003490: 7272 6f72 3a20 6966 2061 6e79 2063 6f6d  rror: if any com
-000034a0: 706f 6e65 6e74 7320 6172 6520 6e6f 7420  ponents are not 
-000034b0: 696e 2074 6865 6972 2076 616c 6964 2069  in their valid i
-000034c0: 6e74 6572 7661 6c2e 0a20 2020 2022 2222  nterval..    """
-000034d0: 0a20 2020 2069 6620 6120 6973 206e 6f74  .    if a is not
-000034e0: 204e 6f6e 653a 0a20 2020 2020 2020 2061   None:.        a
-000034f0: 202f 3d20 3235 352e 300a 0a20 2020 2072   /= 255.0..    r
-00003500: 6574 7572 6e20 4465 7669 6365 434d 594b  eturn DeviceCMYK
-00003510: 2863 202f 2032 3535 2e30 2c20 6d20 2f20  (c / 255.0, m / 
-00003520: 3235 352e 302c 2079 202f 2032 3535 2e30  255.0, y / 255.0
-00003530: 2c20 6b20 2f20 3235 352e 302c 2061 290a  , k / 255.0, a).
-00003540: 0a0a 6465 6620 636f 6c6f 725f 6672 6f6d  ..def color_from
-00003550: 5f68 6578 5f73 7472 696e 6728 6865 7873  _hex_string(hexs
-00003560: 7472 293a 0a20 2020 2022 2222 0a20 2020  tr):.    """.   
-00003570: 2050 6172 7365 2061 6e20 5247 4220 636f   Parse an RGB co
-00003580: 6c6f 7220 6672 6f6d 2061 2063 7373 2d73  lor from a css-s
-00003590: 7479 6c65 2038 2d62 6974 2068 6578 6164  tyle 8-bit hexad
-000035a0: 6563 696d 616c 2063 6f6c 6f72 2073 7472  ecimal color str
-000035b0: 696e 672e 0a0a 2020 2020 4172 6773 3a0a  ing...    Args:.
-000035c0: 2020 2020 2020 2020 6865 7873 7472 2028          hexstr (
-000035d0: 7374 7229 3a20 6f66 2074 6865 2066 6f72  str): of the for
-000035e0: 6d20 6023 5247 4260 2c20 6023 5247 4241  m `#RGB`, `#RGBA
-000035f0: 602c 2060 2352 5247 4742 4260 2c20 6f72  `, `#RRGGBB`, or
-00003600: 2060 2352 5247 4742 4241 4160 2e20 4d75   `#RRGGBBAA`. Mu
-00003610: 7374 0a20 2020 2020 2020 2020 2020 2069  st.            i
-00003620: 6e63 6c75 6465 2074 6865 206c 6561 6469  nclude the leadi
-00003630: 6e67 206f 6374 6f74 686f 7270 2e20 466f  ng octothorp. Fo
-00003640: 726d 7320 6f6d 6974 7469 6e67 2074 6865  rms omitting the
-00003650: 2061 6c70 6861 2066 6965 6c64 2061 7265   alpha field are
-00003660: 0a20 2020 2020 2020 2020 2020 2069 6e74  .            int
-00003670: 6572 7072 6574 6564 2061 7320 6e6f 7420  erpreted as not 
-00003680: 7370 6563 6966 7969 6e67 2074 6865 206f  specifying the o
-00003690: 7061 6369 7479 2c20 736f 2069 7420 7769  pacity, so it wi
-000036a0: 6c6c 206e 6f74 2062 6520 6578 706c 6963  ll not be explic
-000036b0: 6974 6c79 2073 6574 2e0a 0a20 2020 2020  itly set...     
-000036c0: 2020 2020 2020 2041 6e20 616c 7068 6120         An alpha 
-000036d0: 7661 6c75 6520 6f66 2060 3030 6020 6973  value of `00` is
-000036e0: 2066 756c 6c79 2074 7261 6e73 7061 7265   fully transpare
-000036f0: 6e74 2061 6e64 2060 4646 6020 6973 2066  nt and `FF` is f
-00003700: 756c 6c79 206f 7061 7175 652e 0a0a 2020  ully opaque...  
-00003710: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-00003720: 2020 2044 6576 6963 6552 4742 2072 6570     DeviceRGB rep
-00003730: 7265 7365 6e74 6174 696f 6e20 6f66 2074  resentation of t
-00003740: 6865 2063 6f6c 6f72 2e0a 2020 2020 2222  he color..    ""
-00003750: 220a 2020 2020 6966 206e 6f74 2069 7369  ".    if not isi
-00003760: 6e73 7461 6e63 6528 6865 7873 7472 2c20  nstance(hexstr, 
-00003770: 7374 7229 3a0a 2020 2020 2020 2020 7261  str):.        ra
-00003780: 6973 6520 5479 7065 4572 726f 7228 6622  ise TypeError(f"
-00003790: 7b68 6578 7374 727d 2069 7320 6e6f 7420  {hexstr} is not 
-000037a0: 6f66 2074 7970 6520 7374 7222 290a 0a20  of type str").. 
-000037b0: 2020 2069 6620 6e6f 7420 6865 7873 7472     if not hexstr
-000037c0: 2e73 7461 7274 7377 6974 6828 2223 2229  .startswith("#")
-000037d0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-000037e0: 5661 6c75 6545 7272 6f72 2866 227b 6865  ValueError(f"{he
-000037f0: 7873 7472 7d20 646f 6573 206e 6f74 2073  xstr} does not s
-00003800: 7461 7274 2077 6974 6820 2322 290a 0a20  tart with #").. 
-00003810: 2020 2068 6c65 6e20 3d20 6c65 6e28 6865     hlen = len(he
-00003820: 7873 7472 290a 0a20 2020 2069 6620 686c  xstr)..    if hl
-00003830: 656e 203d 3d20 343a 0a20 2020 2020 2020  en == 4:.       
-00003840: 2072 6574 7572 6e20 7267 6238 282a 5b69   return rgb8(*[i
-00003850: 6e74 2863 6861 7220 2a20 322c 2062 6173  nt(char * 2, bas
-00003860: 653d 3136 2920 666f 7220 6368 6172 2069  e=16) for char i
-00003870: 6e20 6865 7873 7472 5b31 3a5d 5d2c 2061  n hexstr[1:]], a
-00003880: 3d4e 6f6e 6529 0a0a 2020 2020 6966 2068  =None)..    if h
-00003890: 6c65 6e20 3d3d 2035 3a0a 2020 2020 2020  len == 5:.      
-000038a0: 2020 7265 7475 726e 2072 6762 3828 2a5b    return rgb8(*[
-000038b0: 696e 7428 6368 6172 202a 2032 2c20 6261  int(char * 2, ba
-000038c0: 7365 3d31 3629 2066 6f72 2063 6861 7220  se=16) for char 
-000038d0: 696e 2068 6578 7374 725b 313a 5d5d 290a  in hexstr[1:]]).
-000038e0: 0a20 2020 2069 6620 686c 656e 203d 3d20  .    if hlen == 
-000038f0: 373a 0a20 2020 2020 2020 2072 6574 7572  7:.        retur
-00003900: 6e20 7267 6238 280a 2020 2020 2020 2020  n rgb8(.        
-00003910: 2020 2020 2a5b 696e 7428 6865 7873 7472      *[int(hexstr
-00003920: 5b69 6478 203a 2069 6478 202b 2032 5d2c  [idx : idx + 2],
-00003930: 2062 6173 653d 3136 2920 666f 7220 6964   base=16) for id
-00003940: 7820 696e 2072 616e 6765 2831 2c20 686c  x in range(1, hl
-00003950: 656e 2c20 3229 5d2c 2061 3d4e 6f6e 650a  en, 2)], a=None.
-00003960: 2020 2020 2020 2020 290a 0a20 2020 2069          )..    i
-00003970: 6620 686c 656e 203d 3d20 393a 0a20 2020  f hlen == 9:.   
-00003980: 2020 2020 2072 6574 7572 6e20 7267 6238       return rgb8
-00003990: 282a 5b69 6e74 2868 6578 7374 725b 6964  (*[int(hexstr[id
-000039a0: 7820 3a20 6964 7820 2b20 325d 2c20 6261  x : idx + 2], ba
-000039b0: 7365 3d31 3629 2066 6f72 2069 6478 2069  se=16) for idx i
-000039c0: 6e20 7261 6e67 6528 312c 2068 6c65 6e2c  n range(1, hlen,
-000039d0: 2032 295d 290a 0a20 2020 2072 6169 7365   2)])..    raise
-000039e0: 2056 616c 7565 4572 726f 7228 6622 7b68   ValueError(f"{h
-000039f0: 6578 7374 727d 2063 6f75 6c64 206e 6f74  exstr} could not
-00003a00: 2062 6520 696e 7465 7270 7265 7465 6420   be interpreted 
-00003a10: 6173 2061 2052 4742 2841 2920 6865 7820  as a RGB(A) hex 
-00003a20: 7374 7269 6e67 2229 0a0a 0a64 6566 2063  string")...def c
-00003a30: 6f6c 6f72 5f66 726f 6d5f 7267 625f 7374  olor_from_rgb_st
-00003a40: 7269 6e67 2872 6762 7374 7229 3a0a 2020  ring(rgbstr):.  
-00003a50: 2020 2222 220a 2020 2020 5061 7273 6520    """.    Parse 
-00003a60: 616e 2052 4742 2063 6f6c 6f72 2066 726f  an RGB color fro
-00003a70: 6d20 6120 6373 732d 7374 796c 6520 7267  m a css-style rg
-00003a80: 6228 522c 2047 2c20 422c 2041 2920 636f  b(R, G, B, A) co
-00003a90: 6c6f 7220 7374 7269 6e67 2e0a 0a20 2020  lor string...   
-00003aa0: 2041 7267 733a 0a20 2020 2020 2020 2072   Args:.        r
-00003ab0: 6762 7374 7220 2873 7472 293a 206f 6620  gbstr (str): of 
-00003ac0: 7468 6520 666f 726d 2060 7267 6228 522c  the form `rgb(R,
-00003ad0: 2047 2c20 4229 6020 6f72 2060 7267 6228   G, B)` or `rgb(
-00003ae0: 522c 2047 2c20 422c 2041 2960 2e0a 0a20  R, G, B, A)`... 
-00003af0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00003b00: 2020 2020 4465 7669 6365 5247 4220 7265      DeviceRGB re
-00003b10: 7072 6573 656e 7461 7469 6f6e 206f 6620  presentation of 
-00003b20: 7468 6520 636f 6c6f 722e 0a20 2020 2022  the color..    "
-00003b30: 2222 0a20 2020 2069 6620 6e6f 7420 6973  "".    if not is
-00003b40: 696e 7374 616e 6365 2872 6762 7374 722c  instance(rgbstr,
-00003b50: 2073 7472 293a 0a20 2020 2020 2020 2072   str):.        r
-00003b60: 6169 7365 2054 7970 6545 7272 6f72 2866  aise TypeError(f
-00003b70: 227b 7267 6273 7472 7d20 6973 206e 6f74  "{rgbstr} is not
-00003b80: 206f 6620 7479 7065 2073 7472 2229 0a0a   of type str")..
-00003b90: 2020 2020 7267 6273 7472 203d 2072 6762      rgbstr = rgb
-00003ba0: 7374 722e 7265 706c 6163 6528 2220 222c  str.replace(" ",
-00003bb0: 2022 2229 0a0a 2020 2020 6966 206e 6f74   "")..    if not
-00003bc0: 2072 6762 7374 722e 7374 6172 7473 7769   rgbstr.startswi
-00003bd0: 7468 2822 7267 6228 2229 206f 7220 6e6f  th("rgb(") or no
-00003be0: 7420 7267 6273 7472 2e65 6e64 7377 6974  t rgbstr.endswit
-00003bf0: 6828 2229 2229 3a0a 2020 2020 2020 2020  h(")"):.        
-00003c00: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-00003c10: 2866 227b 7267 6273 7472 7d20 646f 6573  (f"{rgbstr} does
-00003c20: 206e 6f74 2066 6f6c 6c6f 7720 7468 6520   not follow the 
-00003c30: 6578 7065 6374 6564 2072 6762 282e 2e2e  expected rgb(...
-00003c40: 2920 666f 726d 6174 2229 0a0a 2020 2020  ) format")..    
-00003c50: 7267 6273 7472 203d 2072 6762 7374 725b  rgbstr = rgbstr[
-00003c60: 343a 2d31 5d0a 2020 2020 636f 6c6f 7273  4:-1].    colors
-00003c70: 203d 2072 6762 7374 722e 7370 6c69 7428   = rgbstr.split(
-00003c80: 222c 2229 0a0a 2020 2020 6966 206c 656e  ",")..    if len
-00003c90: 2863 6f6c 6f72 7329 203d 3d20 333a 0a20  (colors) == 3:. 
-00003ca0: 2020 2020 2020 2072 6574 7572 6e20 7267         return rg
-00003cb0: 6238 282a 5b69 6e74 2863 2920 666f 7220  b8(*[int(c) for 
-00003cc0: 6320 696e 2063 6f6c 6f72 735d 2c20 613d  c in colors], a=
-00003cd0: 4e6f 6e65 290a 0a20 2020 2069 6620 6c65  None)..    if le
-00003ce0: 6e28 636f 6c6f 7273 2920 3d3d 2034 3a0a  n(colors) == 4:.
-00003cf0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00003d00: 6762 3828 2a5b 696e 7428 6329 2066 6f72  gb8(*[int(c) for
-00003d10: 2063 2069 6e20 636f 6c6f 7273 5d29 0a0a   c in colors])..
-00003d20: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00003d30: 7272 6f72 2866 227b 7267 6273 7472 7d20  rror(f"{rgbstr} 
-00003d40: 636f 756c 6420 6e6f 7420 6265 2069 6e74  could not be int
-00003d50: 6572 7072 6574 6564 2061 7320 6120 7267  erpreted as a rg
-00003d60: 6228 522c 2047 2c20 425b 2c20 415d 2920  b(R, G, B[, A]) 
-00003d70: 636f 6c6f 7222 290a 0a0a 636c 6173 7320  color")...class 
-00003d80: 506f 696e 7428 4e61 6d65 6454 7570 6c65  Point(NamedTuple
-00003d90: 293a 0a20 2020 2022 2222 0a20 2020 2041  ):.    """.    A
-00003da0: 6e20 782d 7920 636f 6f72 6469 6e61 7465  n x-y coordinate
-00003db0: 2070 6169 7220 7769 7468 696e 2074 6865   pair within the
-00003dc0: 2074 776f 2d64 696d 656e 7369 6f6e 616c   two-dimensional
-00003dd0: 2063 6f6f 7264 696e 6174 6520 6672 616d   coordinate fram
-00003de0: 652e 0a20 2020 2022 2222 0a0a 2020 2020  e..    """..    
-00003df0: 783a 204e 756d 6265 720a 2020 2020 2222  x: Number.    ""
-00003e00: 2254 6865 2061 6273 6369 7373 6120 6f66  "The abscissa of
-00003e10: 2074 6865 2070 6f69 6e74 2e22 2222 0a0a   the point."""..
-00003e20: 2020 2020 793a 204e 756d 6265 720a 2020      y: Number.  
-00003e30: 2020 2222 2254 6865 206f 7264 696e 6174    """The ordinat
-00003e40: 6520 6f66 2074 6865 2070 6f69 6e74 2e22  e of the point."
-00003e50: 2222 0a0a 2020 2020 6465 6620 7265 6e64  ""..    def rend
-00003e60: 6572 2873 656c 6629 3a0a 2020 2020 2020  er(self):.      
-00003e70: 2020 2222 2252 656e 6465 7220 7468 6520    """Render the 
-00003e80: 706f 696e 7420 746f 2074 6865 2073 7472  point to the str
-00003e90: 696e 6720 6022 7820 7922 6020 666f 7220  ing `"x y"` for 
-00003ea0: 656d 6974 7469 6e67 2074 6f20 6120 5044  emitting to a PD
-00003eb0: 462e 2222 220a 0a20 2020 2020 2020 2072  F."""..        r
-00003ec0: 6574 7572 6e20 6622 7b6e 756d 6265 725f  eturn f"{number_
-00003ed0: 746f 5f73 7472 2873 656c 662e 7829 7d20  to_str(self.x)} 
-00003ee0: 7b6e 756d 6265 725f 746f 5f73 7472 2873  {number_to_str(s
-00003ef0: 656c 662e 7929 7d22 0a0a 2020 2020 6465  elf.y)}"..    de
-00003f00: 6620 646f 7428 7365 6c66 2c20 6f74 6865  f dot(self, othe
-00003f10: 7229 3a0a 2020 2020 2020 2020 2222 220a  r):.        """.
-00003f20: 2020 2020 2020 2020 436f 6d70 7574 6520          Compute 
-00003f30: 7468 6520 646f 7420 7072 6f64 7563 7420  the dot product 
-00003f40: 6f66 2074 776f 2070 6f69 6e74 732e 0a0a  of two points...
-00003f50: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00003f60: 2020 2020 2020 2020 2020 6f74 6865 7220            other 
-00003f70: 2850 6f69 6e74 293a 2074 6865 2070 6f69  (Point): the poi
-00003f80: 6e74 2077 6974 6820 7768 6963 6820 746f  nt with which to
-00003f90: 2063 6f6d 7075 7465 2074 6865 2064 6f74   compute the dot
-00003fa0: 2070 726f 6475 6374 2e0a 0a20 2020 2020   product...     
-00003fb0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00003fc0: 2020 2020 2020 2020 5468 6520 7363 616c          The scal
-00003fd0: 6172 2072 6573 756c 7420 6f66 2074 6865  ar result of the
-00003fe0: 2064 6f74 2070 726f 6475 6374 2063 6f6d   dot product com
-00003ff0: 7075 7461 7469 6f6e 2e0a 0a20 2020 2020  putation...     
-00004000: 2020 2052 6169 7365 733a 0a20 2020 2020     Raises:.     
-00004010: 2020 2020 2020 2054 7970 6545 7272 6f72         TypeError
-00004020: 3a20 6966 2060 6f74 6865 7260 2069 7320  : if `other` is 
-00004030: 6e6f 7420 6120 6050 6f69 6e74 602e 0a20  not a `Point`.. 
-00004040: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00004050: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00004060: 616e 6365 286f 7468 6572 2c20 506f 696e  ance(other, Poin
-00004070: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00004080: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
-00004090: 6622 6361 6e6e 6f74 2064 6f74 2077 6974  f"cannot dot wit
-000040a0: 6820 7b6f 7468 6572 2172 7d22 290a 0a20  h {other!r}").. 
-000040b0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000040c0: 6c66 2e78 202a 206f 7468 6572 2e78 202b  lf.x * other.x +
-000040d0: 2073 656c 662e 7920 2a20 6f74 6865 722e   self.y * other.
-000040e0: 790a 0a20 2020 2064 6566 2061 6e67 6c65  y..    def angle
-000040f0: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
-00004100: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00004110: 2020 2043 6f6d 7075 7465 2074 6865 2061     Compute the a
-00004120: 6e67 6c65 2062 6574 7765 656e 2074 776f  ngle between two
-00004130: 2070 6f69 6e74 7320 2869 6e74 6572 7072   points (interpr
-00004140: 6574 6564 2061 7320 7665 6374 6f72 7320  eted as vectors 
-00004150: 6672 6f6d 2074 6865 206f 7269 6769 6e29  from the origin)
-00004160: 2e0a 0a20 2020 2020 2020 2054 6865 2072  ...        The r
-00004170: 6574 7572 6e20 7661 6c75 6520 6973 2069  eturn value is i
-00004180: 6e20 7468 6520 696e 7465 7276 616c 2028  n the interval (
-00004190: 2d70 692c 2070 695d 2e20 5369 676e 2069  -pi, pi]. Sign i
-000041a0: 7320 6465 7065 6e64 656e 7420 6f6e 206f  s dependent on o
-000041b0: 7264 6572 696e 672c 0a20 2020 2020 2020  rdering,.       
-000041c0: 2077 6974 6820 636c 6f63 6b77 6973 6520   with clockwise 
-000041d0: 616e 676c 6520 7472 6176 656c 2063 6f6e  angle travel con
-000041e0: 7369 6465 7265 6420 746f 2062 6520 706f  sidered to be po
-000041f0: 7369 7469 7665 2064 7565 2074 6f20 7468  sitive due to th
-00004200: 6520 6f72 6965 6e74 6174 696f 6e20 6f66  e orientation of
-00004210: 0a20 2020 2020 2020 2074 6865 2063 6f6f  .        the coo
-00004220: 7264 696e 6174 6520 6672 616d 6520 6261  rdinate frame ba
-00004230: 7369 7320 7665 6374 6f72 7320 2869 2e65  sis vectors (i.e
-00004240: 2e20 7468 6520 616e 676c 6520 6265 7477  . the angle betw
-00004250: 6565 6e20 6028 312c 2030 2960 2061 6e64  een `(1, 0)` and
-00004260: 2060 2830 2c20 3129 600a 2020 2020 2020   `(0, 1)`.      
-00004270: 2020 6973 2060 2b70 692f 3260 2c20 7468    is `+pi/2`, th
-00004280: 6520 616e 676c 6520 6265 7477 6565 6e20  e angle between 
-00004290: 6028 312c 2030 2960 2061 6e64 2060 2830  `(1, 0)` and `(0
-000042a0: 2c20 2d31 2960 2069 7320 602d 7069 2f32  , -1)` is `-pi/2
-000042b0: 602c 2061 6e64 2074 6865 2061 6e67 6c65  `, and the angle
-000042c0: 0a20 2020 2020 2020 2062 6574 7765 656e  .        between
-000042d0: 2060 2830 2c20 2d31 2960 2061 6e64 2060   `(0, -1)` and `
-000042e0: 2831 2c20 3029 6020 6973 2060 2b70 692f  (1, 0)` is `+pi/
-000042f0: 3260 292e 0a0a 2020 2020 2020 2020 4172  2`)...        Ar
-00004300: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-00004310: 6f74 6865 7220 2850 6f69 6e74 293a 2074  other (Point): t
-00004320: 6865 2070 6f69 6e74 2074 6f20 636f 6d70  he point to comp
-00004330: 7574 6520 7468 6520 616e 676c 6520 7377  ute the angle sw
-00004340: 6565 7020 746f 7761 7264 2e0a 0a20 2020  eep toward...   
-00004350: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00004360: 2020 2020 2020 2020 2020 5468 6520 7363            The sc
-00004370: 616c 6172 2061 6e67 6c65 2062 6574 7765  alar angle betwe
-00004380: 656e 2074 6865 2074 776f 2070 6f69 6e74  en the two point
-00004390: 7320 2a2a 696e 2072 6164 6961 6e73 2a2a  s **in radians**
-000043a0: 2e0a 0a20 2020 2020 2020 2052 6169 7365  ...        Raise
-000043b0: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
-000043c0: 7970 6545 7272 6f72 3a20 6966 2060 6f74  ypeError: if `ot
-000043d0: 6865 7260 2069 7320 6e6f 7420 6120 6050  her` is not a `P
-000043e0: 6f69 6e74 602e 0a20 2020 2020 2020 2022  oint`..        "
-000043f0: 2222 0a0a 2020 2020 2020 2020 6966 206e  ""..        if n
-00004400: 6f74 2069 7369 6e73 7461 6e63 6528 6f74  ot isinstance(ot
-00004410: 6865 722c 2050 6f69 6e74 293a 0a20 2020  her, Point):.   
-00004420: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
-00004430: 7970 6545 7272 6f72 2866 2263 616e 6e6f  ypeError(f"canno
-00004440: 7420 636f 6d70 7574 6520 616e 676c 6520  t compute angle 
-00004450: 7769 7468 207b 6f74 6865 7221 727d 2229  with {other!r}")
-00004460: 0a0a 2020 2020 2020 2020 7369 676e 6966  ..        signif
-00004470: 6965 7220 3d20 2873 656c 662e 7820 2a20  ier = (self.x * 
-00004480: 6f74 6865 722e 7929 202d 2028 7365 6c66  other.y) - (self
-00004490: 2e79 202a 206f 7468 6572 2e78 290a 2020  .y * other.x).  
-000044a0: 2020 2020 2020 7369 676e 203d 2028 7369        sign = (si
-000044b0: 676e 6966 6965 7220 3e3d 2030 2920 2d20  gnifier >= 0) - 
-000044c0: 2873 6967 6e69 6669 6572 203c 2030 290a  (signifier < 0).
-000044d0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000044e0: 6967 6e20 2a20 6d61 7468 2e61 636f 7328  ign * math.acos(
-000044f0: 726f 756e 6428 7365 6c66 2e64 6f74 286f  round(self.dot(o
-00004500: 7468 6572 2920 2f20 2873 656c 662e 6d61  ther) / (self.ma
-00004510: 6728 2920 2a20 6f74 6865 722e 6d61 6728  g() * other.mag(
-00004520: 2929 2c20 3829 290a 0a20 2020 2064 6566  )), 8))..    def
-00004530: 206d 6167 2873 656c 6629 3a0a 2020 2020   mag(self):.    
-00004540: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00004550: 436f 6d70 7574 6520 7468 6520 4361 7274  Compute the Cart
-00004560: 6573 6961 6e20 6469 7374 616e 6365 2066  esian distance f
-00004570: 726f 6d20 7468 6973 2070 6f69 6e74 2074  rom this point t
-00004580: 6f20 7468 6520 6f72 6967 696e 0a0a 2020  o the origin..  
-00004590: 2020 2020 2020 5468 6973 2069 7320 7468        This is th
-000045a0: 6520 7361 6d65 2061 7320 636f 6d70 7574  e same as comput
-000045b0: 696e 6720 7468 6520 6d61 676e 6974 7564  ing the magnitud
-000045c0: 6520 6f66 2074 6865 2076 6563 746f 7220  e of the vector 
-000045d0: 7265 7072 6573 656e 7465 6420 6279 2074  represented by t
-000045e0: 6869 730a 2020 2020 2020 2020 706f 696e  his.        poin
-000045f0: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
-00004600: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-00004610: 2054 6865 2073 6361 6c61 7220 7265 7375   The scalar resu
-00004620: 6c74 206f 6620 7468 6520 6469 7374 616e  lt of the distan
-00004630: 6365 2063 6f6d 7075 7461 7469 6f6e 2e0a  ce computation..
-00004640: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-00004650: 2020 2020 2072 6574 7572 6e20 2873 656c       return (sel
-00004660: 662e 782a 2a32 202b 2073 656c 662e 792a  f.x**2 + self.y*
-00004670: 2a32 2920 2a2a 2030 2e35 0a0a 2020 2020  *2) ** 0.5..    
-00004680: 4066 6f72 6365 5f64 6f63 756d 656e 740a  @force_document.
-00004690: 2020 2020 6465 6620 5f5f 6164 645f 5f28      def __add__(
-000046a0: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
-000046b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000046c0: 2020 5072 6f64 7563 6520 7468 6520 7375    Produce the su
-000046d0: 6d20 6f66 2074 776f 2070 6f69 6e74 732e  m of two points.
-000046e0: 0a0a 2020 2020 2020 2020 4164 6469 6e67  ..        Adding
-000046f0: 2074 776f 2070 6f69 6e74 7320 6973 2074   two points is t
-00004700: 6865 2073 616d 6520 6173 2074 7261 6e73  he same as trans
-00004710: 6c61 7469 6e67 2074 6865 2073 6f75 7263  lating the sourc
-00004720: 6520 706f 696e 7420 6279 2069 6e74 6572  e point by inter
-00004730: 7072 6574 696e 670a 2020 2020 2020 2020  preting.        
-00004740: 7468 6520 6f74 6865 7220 706f 696e 7427  the other point'
-00004750: 7320 7820 616e 6420 7920 636f 6f72 6469  s x and y coordi
-00004760: 6e61 7465 7320 6173 2064 6973 7461 6e63  nates as distanc
-00004770: 6573 2e0a 0a20 2020 2020 2020 2041 7267  es...        Arg
-00004780: 733a 0a20 2020 2020 2020 2020 2020 206f  s:.            o
-00004790: 7468 6572 2028 506f 696e 7429 3a20 7269  ther (Point): ri
-000047a0: 6768 742d 6861 6e64 2073 6964 6520 6f66  ght-hand side of
-000047b0: 2074 6865 2069 6e66 6978 2061 6464 6974   the infix addit
-000047c0: 696f 6e20 6f70 6572 6174 696f 6e0a 0a20  ion operation.. 
-000047d0: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-000047e0: 2020 2020 2020 2020 2020 2020 4120 506f              A Po
-000047f0: 696e 7420 7768 6963 6820 6973 2074 6865  int which is the
-00004800: 2073 756d 206f 6620 7468 6520 7477 6f20   sum of the two 
-00004810: 736f 7572 6365 2070 6f69 6e74 732e 0a20  source points.. 
-00004820: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00004830: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00004840: 286f 7468 6572 2c20 506f 696e 7429 3a0a  (other, Point):.
-00004850: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00004860: 726e 2050 6f69 6e74 2878 3d73 656c 662e  rn Point(x=self.
-00004870: 7820 2b20 6f74 6865 722e 782c 2079 3d73  x + other.x, y=s
-00004880: 656c 662e 7920 2b20 6f74 6865 722e 7929  elf.y + other.y)
-00004890: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000048a0: 204e 6f74 496d 706c 656d 656e 7465 640a   NotImplemented.
-000048b0: 0a20 2020 2040 666f 7263 655f 646f 6375  .    @force_docu
-000048c0: 6d65 6e74 0a20 2020 2064 6566 205f 5f73  ment.    def __s
-000048d0: 7562 5f5f 2873 656c 662c 206f 7468 6572  ub__(self, other
-000048e0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-000048f0: 2020 2020 2020 2050 726f 6475 6365 2074         Produce t
-00004900: 6865 2064 6966 6665 7265 6e63 6520 6265  he difference be
-00004910: 7477 6565 6e20 7477 6f20 706f 696e 7473  tween two points
-00004920: 2e0a 0a20 2020 2020 2020 2055 6e6c 696b  ...        Unlik
-00004930: 6520 6164 6469 7469 6f6e 2c20 7468 6973  e addition, this
-00004940: 2069 7320 6e6f 7420 6120 636f 6d6d 7574   is not a commut
-00004950: 6174 6976 6520 6f70 6572 6174 696f 6e21  ative operation!
-00004960: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-00004970: 2020 2020 2020 2020 2020 2020 6f74 6865              othe
-00004980: 7220 2850 6f69 6e74 293a 2072 6967 6874  r (Point): right
-00004990: 2d68 616e 6420 7369 6465 206f 6620 7468  -hand side of th
-000049a0: 6520 696e 6669 7820 7375 6274 7261 6374  e infix subtract
-000049b0: 696f 6e20 6f70 6572 6174 696f 6e0a 0a20  ion operation.. 
-000049c0: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-000049d0: 2020 2020 2020 2020 2020 2020 4120 506f              A Po
-000049e0: 696e 7420 7768 6963 6820 6973 2074 6865  int which is the
-000049f0: 2064 6966 6665 7265 6e63 6520 6f66 2074   difference of t
-00004a00: 6865 2074 776f 2073 6f75 7263 6520 706f  he two source po
-00004a10: 696e 7473 2e0a 2020 2020 2020 2020 2222  ints..        ""
-00004a20: 220a 2020 2020 2020 2020 6966 2069 7369  ".        if isi
-00004a30: 6e73 7461 6e63 6528 6f74 6865 722c 2050  nstance(other, P
-00004a40: 6f69 6e74 293a 0a20 2020 2020 2020 2020  oint):.         
-00004a50: 2020 2072 6574 7572 6e20 506f 696e 7428     return Point(
-00004a60: 783d 7365 6c66 2e78 202d 206f 7468 6572  x=self.x - other
-00004a70: 2e78 2c20 793d 7365 6c66 2e79 202d 206f  .x, y=self.y - o
-00004a80: 7468 6572 2e79 290a 0a20 2020 2020 2020  ther.y)..       
-00004a90: 2072 6574 7572 6e20 4e6f 7449 6d70 6c65   return NotImple
-00004aa0: 6d65 6e74 6564 0a0a 2020 2020 4066 6f72  mented..    @for
-00004ab0: 6365 5f64 6f63 756d 656e 740a 2020 2020  ce_document.    
-00004ac0: 6465 6620 5f5f 6e65 675f 5f28 7365 6c66  def __neg__(self
-00004ad0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00004ae0: 2020 2020 2020 2050 726f 6475 6365 2061         Produce a
-00004af0: 2070 6f69 6e74 2062 7920 6e65 6761 7469   point by negati
-00004b00: 6e67 2074 6869 7320 706f 696e 7427 7320  ng this point's 
-00004b10: 636f 6f72 6469 6e61 7465 732e 0a0a 2020  coordinates...  
-00004b20: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
-00004b30: 2020 2020 2020 2020 2020 2041 2050 6f69             A Poi
-00004b40: 6e74 2077 686f 7365 2063 6f6f 7264 696e  nt whose coordin
-00004b50: 6174 6573 2061 7265 2074 6869 7320 706f  ates are this po
-00004b60: 696e 7473 2063 6f6f 7264 696e 6174 6573  ints coordinates
-00004b70: 206e 6567 6174 6564 2e0a 2020 2020 2020   negated..      
-00004b80: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-00004b90: 7475 726e 2050 6f69 6e74 2878 3d2d 7365  turn Point(x=-se
-00004ba0: 6c66 2e78 2c20 793d 2d73 656c 662e 7929  lf.x, y=-self.y)
-00004bb0: 0a0a 2020 2020 4066 6f72 6365 5f64 6f63  ..    @force_doc
-00004bc0: 756d 656e 740a 2020 2020 6465 6620 5f5f  ument.    def __
-00004bd0: 6d75 6c5f 5f28 7365 6c66 2c20 6f74 6865  mul__(self, othe
-00004be0: 7229 3a0a 2020 2020 2020 2020 2222 220a  r):.        """.
-00004bf0: 2020 2020 2020 2020 4d75 6c74 6970 6c79          Multiply
-00004c00: 2061 2070 6f69 6e74 2062 7920 6120 7363   a point by a sc
-00004c10: 616c 6172 2076 616c 7565 2e0a 0a20 2020  alar value...   
-00004c20: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00004c30: 2020 2020 2020 206f 7468 6572 2028 4e75         other (Nu
-00004c40: 6d62 6572 293a 2074 6865 2073 6361 6c61  mber): the scala
-00004c50: 7220 7661 6c75 6520 6279 2077 6869 6368  r value by which
-00004c60: 2074 6f20 6d75 6c74 6970 6c79 2074 6865   to multiply the
-00004c70: 2070 6f69 6e74 2773 0a20 2020 2020 2020   point's.       
-00004c80: 2020 2020 2020 2020 2063 6f6f 7264 696e           coordin
-00004c90: 6174 6573 2e0a 0a20 2020 2020 2020 2052  ates...        R
-00004ca0: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-00004cb0: 2020 2020 4120 506f 696e 7420 7768 6f73      A Point whos
-00004cc0: 6520 636f 6f72 6469 6e61 7465 7320 6172  e coordinates ar
-00004cd0: 6520 7468 6520 7265 7375 6c74 206f 6620  e the result of 
-00004ce0: 7468 6520 6d75 6c74 6970 6c69 6361 7469  the multiplicati
-00004cf0: 6f6e 2e0a 2020 2020 2020 2020 2222 220a  on..        """.
-00004d00: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00004d10: 7461 6e63 6528 6f74 6865 722c 204e 756d  tance(other, Num
-00004d20: 6265 7243 6c61 7373 293a 0a20 2020 2020  berClass):.     
-00004d30: 2020 2020 2020 2072 6574 7572 6e20 506f         return Po
-00004d40: 696e 7428 7365 6c66 2e78 202a 206f 7468  int(self.x * oth
-00004d50: 6572 2c20 7365 6c66 2e79 202a 206f 7468  er, self.y * oth
-00004d60: 6572 290a 0a20 2020 2020 2020 2072 6574  er)..        ret
-00004d70: 7572 6e20 4e6f 7449 6d70 6c65 6d65 6e74  urn NotImplement
-00004d80: 6564 0a0a 2020 2020 5f5f 726d 756c 5f5f  ed..    __rmul__
-00004d90: 203d 205f 5f6d 756c 5f5f 0a0a 2020 2020   = __mul__..    
-00004da0: 4066 6f72 6365 5f64 6f63 756d 656e 740a  @force_document.
-00004db0: 2020 2020 6465 6620 5f5f 7472 7565 6469      def __truedi
-00004dc0: 765f 5f28 7365 6c66 2c20 6f74 6865 7229  v__(self, other)
-00004dd0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00004de0: 2020 2020 2020 4469 7669 6465 2061 2070        Divide a p
-00004df0: 6f69 6e74 2062 7920 6120 7363 616c 6172  oint by a scalar
-00004e00: 2076 616c 7565 2e0a 0a20 2020 2020 2020   value...       
-00004e10: 202e 2e20 6e6f 7465 3a3a 0a0a 2020 2020   .. note::..    
-00004e20: 2020 2020 2020 2020 4265 6361 7573 6520          Because 
-00004e30: 6469 7669 7369 6f6e 2069 7320 6e6f 7420  division is not 
-00004e40: 636f 6d6d 7574 6174 6976 652c 2060 506f  commutative, `Po
-00004e50: 696e 7420 2f20 7363 616c 6172 6020 6973  int / scalar` is
-00004e60: 2069 6d70 6c65 6d65 6e74 6564 2c20 6275   implemented, bu
-00004e70: 740a 2020 2020 2020 2020 2020 2020 6073  t.            `s
-00004e80: 6361 6c61 7220 2f20 506f 696e 7460 2069  calar / Point` i
-00004e90: 7320 6e6f 6e73 656e 7369 6361 6c20 616e  s nonsensical an
-00004ea0: 6420 6e6f 7420 696d 706c 656d 656e 7465  d not implemente
-00004eb0: 642e 0a0a 2020 2020 2020 2020 4172 6773  d...        Args
-00004ec0: 3a0a 2020 2020 2020 2020 2020 2020 6f74  :.            ot
-00004ed0: 6865 7220 284e 756d 6265 7229 3a20 7468  her (Number): th
-00004ee0: 6520 7363 616c 6172 2076 616c 7565 2062  e scalar value b
-00004ef0: 7920 7768 6963 6820 746f 2064 6976 6964  y which to divid
-00004f00: 6520 7468 6520 706f 696e 7427 7320 636f  e the point's co
-00004f10: 6f72 6469 6e61 7465 732e 0a0a 2020 2020  ordinates...    
-00004f20: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-00004f30: 2020 2020 2020 2020 2041 2050 6f69 6e74           A Point
-00004f40: 2077 686f 7365 2063 6f6f 7264 696e 6174   whose coordinat
-00004f50: 6573 2061 7265 2074 6865 2072 6573 756c  es are the resul
-00004f60: 7420 6f66 2074 6865 2064 6976 6973 696f  t of the divisio
-00004f70: 6e2e 0a20 2020 2020 2020 2022 2222 0a20  n..        """. 
-00004f80: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00004f90: 616e 6365 286f 7468 6572 2c20 4e75 6d62  ance(other, Numb
-00004fa0: 6572 436c 6173 7329 3a0a 2020 2020 2020  erClass):.      
-00004fb0: 2020 2020 2020 7265 7475 726e 2050 6f69        return Poi
-00004fc0: 6e74 2873 656c 662e 7820 2f20 6f74 6865  nt(self.x / othe
-00004fd0: 722c 2073 656c 662e 7920 2f20 6f74 6865  r, self.y / othe
-00004fe0: 7229 0a0a 2020 2020 2020 2020 7265 7475  r)..        retu
-00004ff0: 726e 204e 6f74 496d 706c 656d 656e 7465  rn NotImplemente
-00005000: 640a 0a20 2020 2040 666f 7263 655f 646f  d..    @force_do
-00005010: 6375 6d65 6e74 0a20 2020 2064 6566 205f  cument.    def _
-00005020: 5f66 6c6f 6f72 6469 765f 5f28 7365 6c66  _floordiv__(self
-00005030: 2c20 6f74 6865 7229 3a0a 2020 2020 2020  , other):.      
-00005040: 2020 2222 220a 2020 2020 2020 2020 4469    """.        Di
-00005050: 7669 6465 2061 2070 6f69 6e74 2062 7920  vide a point by 
-00005060: 6120 7363 616c 6172 2076 616c 7565 2075  a scalar value u
-00005070: 7369 6e67 2069 6e74 6567 6572 2064 6976  sing integer div
-00005080: 6973 696f 6e2e 0a0a 2020 2020 2020 2020  ision...        
-00005090: 2e2e 206e 6f74 653a 3a0a 0a20 2020 2020  .. note::..     
-000050a0: 2020 2020 2020 2042 6563 6175 7365 2064         Because d
-000050b0: 6976 6973 696f 6e20 6973 206e 6f74 2063  ivision is not c
-000050c0: 6f6d 6d75 7461 7469 7665 2c20 6050 6f69  ommutative, `Poi
-000050d0: 6e74 202f 2f20 7363 616c 6172 6020 6973  nt // scalar` is
-000050e0: 2069 6d70 6c65 6d65 6e74 6564 2c20 6275   implemented, bu
-000050f0: 740a 2020 2020 2020 2020 2020 2020 6073  t.            `s
-00005100: 6361 6c61 7220 2f2f 2050 6f69 6e74 6020  calar // Point` 
-00005110: 6973 206e 6f6e 7365 6e73 6963 616c 2061  is nonsensical a
-00005120: 6e64 206e 6f74 2069 6d70 6c65 6d65 6e74  nd not implement
-00005130: 6564 2e0a 0a20 2020 2020 2020 2041 7267  ed...        Arg
-00005140: 733a 0a20 2020 2020 2020 2020 2020 206f  s:.            o
-00005150: 7468 6572 2028 4e75 6d62 6572 293a 2074  ther (Number): t
-00005160: 6865 2073 6361 6c61 7220 7661 6c75 6520  he scalar value 
-00005170: 6279 2077 6869 6368 2074 6f20 6469 7669  by which to divi
-00005180: 6465 2074 6865 2070 6f69 6e74 2773 2063  de the point's c
-00005190: 6f6f 7264 696e 6174 6573 2e0a 0a20 2020  oordinates...   
-000051a0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-000051b0: 2020 2020 2020 2020 2020 4120 506f 696e            A Poin
-000051c0: 7420 7768 6f73 6520 636f 6f72 6469 6e61  t whose coordina
-000051d0: 7465 7320 6172 6520 7468 6520 7265 7375  tes are the resu
-000051e0: 6c74 206f 6620 7468 6520 6469 7669 7369  lt of the divisi
-000051f0: 6f6e 2e0a 2020 2020 2020 2020 2222 220a  on..        """.
-00005200: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00005210: 7461 6e63 6528 6f74 6865 722c 204e 756d  tance(other, Num
-00005220: 6265 7243 6c61 7373 293a 0a20 2020 2020  berClass):.     
-00005230: 2020 2020 2020 2072 6574 7572 6e20 506f         return Po
-00005240: 696e 7428 7365 6c66 2e78 202f 2f20 6f74  int(self.x // ot
-00005250: 6865 722c 2073 656c 662e 7920 2f2f 206f  her, self.y // o
-00005260: 7468 6572 290a 0a20 2020 2020 2020 2072  ther)..        r
-00005270: 6574 7572 6e20 4e6f 7449 6d70 6c65 6d65  eturn NotImpleme
-00005280: 6e74 6564 0a0a 2020 2020 2320 6e6f 205f  nted..    # no _
-00005290: 5f72 2874 7275 657c 666c 6f6f 7229 6469  _r(true|floor)di
-000052a0: 765f 5f20 6265 6361 7573 6520 6469 7669  v__ because divi
-000052b0: 7369 6f6e 2069 7320 6e6f 7420 636f 6d6d  sion is not comm
-000052c0: 7574 6174 6976 6521 0a0a 2020 2020 4066  utative!..    @f
-000052d0: 6f72 6365 5f64 6f63 756d 656e 740a 2020  orce_document.  
-000052e0: 2020 6465 6620 5f5f 6d61 746d 756c 5f5f    def __matmul__
-000052f0: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
-00005300: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00005310: 2020 2054 7261 6e73 666f 726d 2061 2070     Transform a p
-00005320: 6f69 6e74 2077 6974 6820 7468 6520 6769  oint with the gi
-00005330: 7665 6e20 7472 616e 7366 6f72 6d20 6d61  ven transform ma
-00005340: 7472 6978 2e0a 0a20 2020 2020 2020 202e  trix...        .
-00005350: 2e20 6e6f 7465 3a3a 0a20 2020 2020 2020  . note::.       
-00005360: 2020 2020 2054 6869 7320 6f70 6572 6174       This operat
-00005370: 6f72 2069 7320 6f6e 6c79 2069 6d70 6c65  or is only imple
-00005380: 6d65 6e74 6564 2066 6f72 2054 7261 6e73  mented for Trans
-00005390: 666f 726d 732e 2054 6869 7320 7472 616e  forms. This tran
-000053a0: 7366 6f72 6d20 6973 206e 6f74 0a20 2020  sform is not.   
-000053b0: 2020 2020 2020 2020 2063 6f6d 6d75 7461           commuta
-000053c0: 7469 7665 2c20 736f 2060 506f 696e 7420  tive, so `Point 
-000053d0: 4020 5472 616e 7366 6f72 6d60 2069 7320  @ Transform` is 
-000053e0: 696d 706c 656d 656e 7465 642c 2062 7574  implemented, but
-000053f0: 2060 5472 616e 7366 6f72 6d20 4020 506f   `Transform @ Po
-00005400: 696e 7460 0a20 2020 2020 2020 2020 2020  int`.           
-00005410: 2069 7320 6e6f 7420 696d 706c 656d 656e   is not implemen
-00005420: 7465 6420 2874 6563 686e 6963 616c 6c79  ted (technically
-00005430: 2073 7065 616b 696e 672c 2074 6865 2063   speaking, the c
-00005440: 7572 7265 6e74 2069 6d70 6c65 6d65 6e74  urrent implement
-00005450: 6174 696f 6e20 6973 0a20 2020 2020 2020  ation is.       
-00005460: 2020 2020 2063 6f6d 6d75 7461 7469 7665       commutative
-00005470: 2062 6563 6175 7365 206f 6620 7468 6520   because of the 
-00005480: 7761 7920 706f 696e 7473 2061 6e64 2074  way points and t
-00005490: 7261 6e73 666f 726d 7320 6172 6520 7265  ransforms are re
-000054a0: 7072 6573 656e 7465 642c 2062 7574 0a20  presented, but. 
-000054b0: 2020 2020 2020 2020 2020 2069 6620 7468             if th
-000054c0: 6174 2072 6570 7265 7365 6e74 6174 696f  at representatio
-000054d0: 6e20 7765 7265 2074 6f20 6368 616e 6765  n were to change
-000054e0: 2074 6869 7320 6f70 6572 6174 696f 6e20   this operation 
-000054f0: 636f 756c 6420 7374 6f70 2062 6569 6e67  could stop being
-00005500: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-00005510: 6d75 7461 7469 7665 290a 0a20 2020 2020  mutative)..     
-00005520: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00005530: 2020 2020 206f 7468 6572 2028 5472 616e       other (Tran
-00005540: 7366 6f72 6d29 3a20 7468 6520 7472 616e  sform): the tran
-00005550: 7366 6f72 6d20 746f 2061 7070 6c79 2074  sform to apply t
-00005560: 6f20 7468 6520 706f 696e 740a 0a20 2020  o the point..   
-00005570: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00005580: 2020 2020 2020 2020 2020 4120 506f 696e            A Poin
-00005590: 7420 7768 6f73 6520 636f 6f72 6469 6e61  t whose coordina
-000055a0: 7465 7320 6172 6520 7468 6520 7265 7375  tes are the resu
-000055b0: 6c74 206f 6620 6170 706c 7969 6e67 2074  lt of applying t
-000055c0: 6865 2074 7261 6e73 666f 726d 2e0a 2020  he transform..  
-000055d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000055e0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000055f0: 6f74 6865 722c 2054 7261 6e73 666f 726d  other, Transform
-00005600: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00005610: 6574 7572 6e20 506f 696e 7428 0a20 2020  eturn Point(.   
-00005620: 2020 2020 2020 2020 2020 2020 2078 3d6f               x=o
-00005630: 7468 6572 2e61 202a 2073 656c 662e 7820  ther.a * self.x 
-00005640: 2b20 6f74 6865 722e 6320 2a20 7365 6c66  + other.c * self
-00005650: 2e79 202b 206f 7468 6572 2e65 2c0a 2020  .y + other.e,.  
-00005660: 2020 2020 2020 2020 2020 2020 2020 793d                y=
-00005670: 6f74 6865 722e 6220 2a20 7365 6c66 2e78  other.b * self.x
-00005680: 202b 206f 7468 6572 2e64 202a 2073 656c   + other.d * sel
-00005690: 662e 7920 2b20 6f74 6865 722e 662c 0a20  f.y + other.f,. 
-000056a0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-000056b0: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
-000056c0: 496d 706c 656d 656e 7465 640a 0a20 2020  Implemented..   
-000056d0: 2064 6566 205f 5f73 7472 5f5f 2873 656c   def __str__(sel
-000056e0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-000056f0: 726e 2066 2228 783d 7b6e 756d 6265 725f  rn f"(x={number_
-00005700: 746f 5f73 7472 2873 656c 662e 7829 7d2c  to_str(self.x)},
-00005710: 2079 3d7b 6e75 6d62 6572 5f74 6f5f 7374   y={number_to_st
-00005720: 7228 7365 6c66 2e79 297d 2922 0a0a 0a63  r(self.y)})"...c
-00005730: 6c61 7373 2054 7261 6e73 666f 726d 284e  lass Transform(N
-00005740: 616d 6564 5475 706c 6529 3a0a 2020 2020  amedTuple):.    
-00005750: 2222 220a 2020 2020 4120 7265 7072 6573  """.    A repres
-00005760: 656e 7461 7469 6f6e 206f 6620 616e 2061  entation of an a
-00005770: 6666 696e 6520 7472 616e 7366 6f72 6d61  ffine transforma
-00005780: 7469 6f6e 206d 6174 7269 7820 666f 7220  tion matrix for 
-00005790: 3244 2073 6861 7065 732e 0a0a 2020 2020  2D shapes...    
-000057a0: 5468 6520 6163 7475 616c 206d 6174 7269  The actual matri
-000057b0: 7820 6973 3a0a 0a20 2020 2060 6060 0a20  x is:..    ```. 
-000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057d0: 2020 2020 2020 205b 2061 2062 2030 205d         [ a b 0 ]
-000057e0: 0a20 2020 205b 7827 2079 2720 315d 203d  .    [x' y' 1] =
-000057f0: 205b 7820 7920 315d 205b 2063 2064 2030   [x y 1] [ c d 0
-00005800: 205d 0a20 2020 2020 2020 2020 2020 2020   ].             
-00005810: 2020 2020 2020 2020 2020 205b 2065 2066             [ e f
-00005820: 2031 205d 0a20 2020 2060 6060 0a0a 2020   1 ].    ```..  
-00005830: 2020 436f 6d70 6c65 7820 7472 616e 7366    Complex transf
-00005840: 6f72 6d61 7469 6f6e 206f 7065 7261 7469  ormation operati
-00005850: 6f6e 7320 6361 6e20 6265 2063 6f6d 706f  ons can be compo
-00005860: 7365 6420 7669 6120 6120 7365 7175 656e  sed via a sequen
-00005870: 6365 206f 6620 7369 6d70 6c65 0a20 2020  ce of simple.   
-00005880: 2074 7261 6e73 666f 726d 6174 696f 6e73   transformations
-00005890: 2062 7920 7065 7266 6f72 6d69 6e67 2073   by performing s
-000058a0: 7563 6365 7373 6976 6520 6d61 7472 6978  uccessive matrix
-000058b0: 206d 756c 7469 706c 6963 6174 696f 6e20   multiplication 
-000058c0: 6f66 2074 6865 2073 696d 706c 650a 2020  of the simple.  
-000058d0: 2020 7472 616e 7366 6f72 6d61 7469 6f6e    transformation
-000058e0: 732e 0a0a 2020 2020 466f 7220 6578 616d  s...    For exam
-000058f0: 706c 652c 2073 6361 6c69 6e67 2061 2073  ple, scaling a s
-00005900: 6574 206f 6620 706f 696e 7473 2061 726f  et of points aro
-00005910: 756e 6420 6120 7370 6563 6966 6963 2063  und a specific c
-00005920: 656e 7465 7220 706f 696e 7420 6361 6e20  enter point can 
-00005930: 6265 0a20 2020 2072 6570 7265 7365 6e74  be.    represent
-00005940: 6564 2062 7920 6120 7472 616e 736c 6174  ed by a translat
-00005950: 696f 6e2d 7363 616c 652d 7472 616e 736c  ion-scale-transl
-00005960: 6174 696f 6e20 7365 7175 656e 6365 2c20  ation sequence, 
-00005970: 7768 6572 6520 7468 6520 6669 7273 740a  where the first.
-00005980: 2020 2020 7472 616e 736c 6174 696f 6e20      translation 
-00005990: 7472 616e 736c 6174 6573 2074 6865 2063  translates the c
-000059a0: 656e 7465 7220 746f 2074 6865 206f 7269  enter to the ori
-000059b0: 6769 6e2c 2074 6865 2073 6361 6c65 2074  gin, the scale t
-000059c0: 7261 6e73 666f 726d 2073 6361 6c65 7320  ransform scales 
-000059d0: 7468 650a 2020 2020 706f 696e 7473 2072  the.    points r
-000059e0: 656c 6174 6976 6520 746f 2074 6865 206f  elative to the o
-000059f0: 7269 6769 6e2c 2061 6e64 2074 6865 2073  rigin, and the s
-00005a00: 6563 6f6e 6420 7472 616e 736c 6174 696f  econd translatio
-00005a10: 6e20 7472 616e 736c 6174 6573 2074 6865  n translates the
-00005a20: 2070 6f69 6e74 730a 2020 2020 6261 636b   points.    back
-00005a30: 2074 6f20 7468 6520 7370 6563 6966 6965   to the specifie
-00005a40: 6420 6365 6e74 6572 2070 6f69 6e74 2e20  d center point. 
-00005a50: 5472 616e 7366 6f72 6d20 6d75 6c74 6970  Transform multip
-00005a60: 6c69 6361 7469 6f6e 2069 7320 7065 7266  lication is perf
-00005a70: 6f72 6d65 6420 7573 696e 670a 2020 2020  ormed using.    
-00005a80: 7079 7468 6f6e 2773 2064 6564 6963 6174  python's dedicat
-00005a90: 6564 206d 6174 7269 7820 6d75 6c74 6970  ed matrix multip
-00005aa0: 6c69 6361 7469 6f6e 206f 7065 7261 746f  lication operato
-00005ab0: 722c 2060 4060 0a0a 2020 2020 5468 6520  r, `@`..    The 
-00005ac0: 7365 6d61 6e74 6963 7320 6f66 2074 6869  semantics of thi
-00005ad0: 7320 7265 7072 6573 656e 7461 7469 6f6e  s representation
-00005ae0: 206d 6561 6e20 636f 6d70 6f73 6564 2074   mean composed t
-00005af0: 7261 6e73 666f 726d 6174 696f 6e73 2061  ransformations a
-00005b00: 7265 2073 7065 6369 6669 6564 0a20 2020  re specified.   
-00005b10: 206c 6566 742d 746f 2d72 6967 6874 2069   left-to-right i
-00005b20: 6e20 6f72 6465 7220 6f66 2061 7070 6c69  n order of appli
-00005b30: 6361 7469 6f6e 2028 736f 6d65 206f 7468  cation (some oth
-00005b40: 6572 2073 7973 7465 6d73 2070 726f 7669  er systems provi
-00005b50: 6465 2074 7261 6e73 706f 7365 640a 2020  de transposed.  
-00005b60: 2020 7265 7072 6573 656e 7461 7469 6f6e    representation
-00005b70: 732c 2069 6e20 7768 6963 6820 6361 7365  s, in which case
-00005b80: 2074 6865 2061 7070 6c69 6361 7469 6f6e   the application
-00005b90: 206f 7264 6572 2069 7320 7269 6768 742d   order is right-
-00005ba0: 746f 2d6c 6566 7429 2e0a 0a20 2020 2046  to-left)...    F
-00005bb0: 6f72 2065 7861 6d70 6c65 2c20 746f 2072  or example, to r
-00005bc0: 6f74 6174 6520 7468 6520 7371 7561 7265  otate the square
-00005bd0: 2060 2831 2c31 2920 2831 2c33 2920 2833   `(1,1) (1,3) (3
-00005be0: 2c33 2920 2833 2c31 2960 2034 3520 6465  ,3) (3,1)` 45 de
-00005bf0: 6772 6565 7320 636c 6f63 6b77 6973 650a  grees clockwise.
-00005c00: 2020 2020 6162 6f75 7420 6974 7320 6365      about its ce
-00005c10: 6e74 6572 2070 6f69 6e74 2028 7768 6963  nter point (whic
-00005c20: 6820 6973 2060 2832 2c32 2960 2920 2c20  h is `(2,2)`) , 
-00005c30: 7468 6520 7472 616e 736c 6174 652d 726f  the translate-ro
-00005c40: 7461 7465 2d74 7261 6e73 6c61 7465 0a20  tate-translate. 
-00005c50: 2020 2070 726f 6365 7373 2064 6573 6372     process descr
-00005c60: 6962 6564 2061 626f 7665 206d 6179 2062  ibed above may b
-00005c70: 6520 6170 706c 6965 643a 0a0a 2020 2020  e applied:..    
-00005c80: 6060 6070 7974 686f 6e0a 2020 2020 726f  ```python.    ro
-00005c90: 7461 7465 5f63 656e 7465 7265 6420 3d20  tate_centered = 
-00005ca0: 280a 2020 2020 2020 2020 5472 616e 7366  (.        Transf
-00005cb0: 6f72 6d2e 7472 616e 736c 6174 696f 6e28  orm.translation(
-00005cc0: 2d32 2c20 2d32 290a 2020 2020 2020 2020  -2, -2).        
-00005cd0: 4020 5472 616e 7366 6f72 6d2e 726f 7461  @ Transform.rota
-00005ce0: 7469 6f6e 5f64 2834 3529 0a20 2020 2020  tion_d(45).     
-00005cf0: 2020 2040 2054 7261 6e73 666f 726d 2e74     @ Transform.t
-00005d00: 7261 6e73 6c61 7469 6f6e 2832 2c20 3229  ranslation(2, 2)
-00005d10: 0a20 2020 2029 0a20 2020 2060 6060 0a0a  .    ).    ```..
-00005d20: 2020 2020 496e 7374 616e 6365 7320 6f66      Instances of
-00005d30: 2074 6869 7320 636c 6173 7320 7072 6f76   this class prov
-00005d40: 6964 6520 6120 6368 6169 6e69 6e67 2041  ide a chaining A
-00005d50: 5049 2c20 736f 2074 6865 2061 626f 7665  PI, so the above
-00005d60: 2074 7261 6e73 666f 726d 2063 6f75 6c64   transform could
-00005d70: 2061 6c73 6f20 6265 0a20 2020 2063 6f6e   also be.    con
-00005d80: 7374 7275 6374 6564 2061 7320 666f 6c6c  structed as foll
-00005d90: 6f77 733a 0a0a 2020 2020 6060 6070 7974  ows:..    ```pyt
-00005da0: 686f 6e0a 2020 2020 726f 7461 7465 5f63  hon.    rotate_c
-00005db0: 656e 7465 7265 6420 3d20 5472 616e 7366  entered = Transf
-00005dc0: 6f72 6d2e 7472 616e 736c 6174 696f 6e28  orm.translation(
-00005dd0: 2d32 2c20 2d32 292e 726f 7461 7465 5f64  -2, -2).rotate_d
-00005de0: 2834 3529 2e74 7261 6e73 6c61 7465 2832  (45).translate(2
-00005df0: 2c20 3229 0a20 2020 2060 6060 0a0a 2020  , 2).    ```..  
-00005e00: 2020 4f72 2c20 6265 6361 7573 6520 7468    Or, because th
-00005e10: 6520 7061 7274 6963 756c 6172 206f 7065  e particular ope
-00005e20: 7261 7469 6f6e 206f 6620 7065 7266 6f72  ration of perfor
-00005e30: 6d69 6e67 2073 6f6d 6520 7472 616e 7366  ming some transf
-00005e40: 6f72 6d61 7469 6f6e 7320 6162 6f75 7420  ormations about 
-00005e50: 610a 2020 2020 7370 6563 6966 6963 2070  a.    specific p
-00005e60: 6f69 6e74 2069 7320 7072 6574 7479 2063  oint is pretty c
-00005e70: 6f6d 6d6f 6e2c 0a0a 2020 2020 6060 6070  ommon,..    ```p
-00005e80: 7974 686f 6e0a 2020 2020 726f 7461 7465  ython.    rotate
-00005e90: 5f63 656e 7465 7265 6420 3d20 5472 616e  _centered = Tran
-00005ea0: 7366 6f72 6d2e 726f 7461 7469 6f6e 5f64  sform.rotation_d
-00005eb0: 2834 3529 2e61 626f 7574 2832 2c20 3229  (45).about(2, 2)
-00005ec0: 0a20 2020 2060 6060 0a0a 2020 2020 4279  .    ```..    By
-00005ed0: 2063 6f6e 7665 6e74 696f 6e2c 2074 6869   convention, thi
-00005ee0: 7320 636c 6173 7320 7072 6f76 6964 6573  s class provides
-00005ef0: 2063 6c61 7373 206d 6574 686f 6420 636f   class method co
-00005f00: 6e73 7472 7563 746f 7273 2066 6f6c 6c6f  nstructors follo
-00005f10: 7769 6e67 206e 6f75 6e2d 6973 680a 2020  wing noun-ish.  
-00005f20: 2020 6e61 6d69 6e67 2028 6074 7261 6e73    naming (`trans
-00005f30: 6c61 7469 6f6e 602c 2060 7363 616c 696e  lation`, `scalin
-00005f40: 6760 2c20 6072 6f74 6174 696f 6e60 2c20  g`, `rotation`, 
-00005f50: 6073 6865 6172 696e 6760 2920 616e 6420  `shearing`) and 
-00005f60: 696e 7374 616e 6365 206d 6574 686f 640a  instance method.
-00005f70: 2020 2020 6d61 6e69 7075 6c61 7469 6f6e      manipulation
-00005f80: 7320 666f 6c6c 6f77 696e 6720 7665 7262  s following verb
-00005f90: 2d69 7368 206e 616d 696e 6720 2860 7472  -ish naming (`tr
-00005fa0: 616e 736c 6174 6560 2c20 6073 6361 6c65  anslate`, `scale
-00005fb0: 602c 2060 726f 7461 7465 602c 2060 7368  `, `rotate`, `sh
-00005fc0: 6561 7260 292e 0a20 2020 2022 2222 0a0a  ear`)..    """..
-00005fd0: 2020 2020 613a 204e 756d 6265 720a 2020      a: Number.  
-00005fe0: 2020 623a 204e 756d 6265 720a 2020 2020    b: Number.    
-00005ff0: 633a 204e 756d 6265 720a 2020 2020 643a  c: Number.    d:
-00006000: 204e 756d 6265 720a 2020 2020 653a 204e   Number.    e: N
-00006010: 756d 6265 720a 2020 2020 663a 204e 756d  umber.    f: Num
-00006020: 6265 720a 0a20 2020 2023 2063 6f6d 7061  ber..    # compa
-00006030: 6374 2072 6570 7265 7365 6e74 6174 696f  ct representatio
-00006040: 6e20 6f66 2061 6e20 6166 6669 6e65 2074  n of an affine t
-00006050: 7261 6e73 666f 726d 6174 696f 6e20 6d61  ransformation ma
-00006060: 7472 6978 2066 6f72 2032 4420 7368 6170  trix for 2D shap
-00006070: 6573 2e0a 2020 2020 2320 5468 6520 6163  es..    # The ac
-00006080: 7475 616c 206d 6174 7269 7820 6973 3a0a  tual matrix is:.
-00006090: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000060a0: 2020 2020 2020 2020 2020 5b20 4120 4220            [ A B 
-000060b0: 3020 5d0a 2020 2020 2320 5b78 2720 7927  0 ].    # [x' y'
-000060c0: 2031 5d20 3d20 5b78 2079 2031 5d20 5b20   1] = [x y 1] [ 
-000060d0: 4320 4420 3020 5d0a 2020 2020 2320 2020  C D 0 ].    #   
-000060e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060f0: 2020 5b20 4520 4620 3120 5d0a 2020 2020    [ E F 1 ].    
-00006100: 2320 5468 6520 6964 656e 7469 7479 2074  # The identity t
-00006110: 7261 6e73 666f 726d 2069 7320 3120 3020  ransform is 1 0 
-00006120: 3020 3120 3020 300a 0a20 2020 2040 636c  0 1 0 0..    @cl
-00006130: 6173 736d 6574 686f 640a 2020 2020 6465  assmethod.    de
-00006140: 6620 6964 656e 7469 7479 2863 6c73 293a  f identity(cls):
-00006150: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00006160: 2020 2020 2043 7265 6174 6520 6120 7472       Create a tr
-00006170: 616e 7366 6f72 6d20 7265 7072 6573 656e  ansform represen
-00006180: 7469 6e67 2074 6865 2069 6465 6e74 6974  ting the identit
-00006190: 7920 7472 616e 7366 6f72 6d2e 0a0a 2020  y transform...  
-000061a0: 2020 2020 2020 5468 6520 6964 656e 7469        The identi
-000061b0: 7479 2074 7261 6e73 666f 726d 2069 7320  ty transform is 
-000061c0: 6120 6e6f 2d6f 702e 0a20 2020 2020 2020  a no-op..       
-000061d0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-000061e0: 7572 6e20 636c 7328 312c 2030 2c20 302c  urn cls(1, 0, 0,
-000061f0: 2031 2c20 302c 2030 290a 0a20 2020 2040   1, 0, 0)..    @
-00006200: 636c 6173 736d 6574 686f 640a 2020 2020  classmethod.    
-00006210: 6465 6620 7472 616e 736c 6174 696f 6e28  def translation(
-00006220: 636c 732c 2078 2c20 7929 3a0a 2020 2020  cls, x, y):.    
-00006230: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00006240: 4372 6561 7465 2061 2074 7261 6e73 666f  Create a transfo
-00006250: 726d 2074 6861 7420 7065 7266 6f72 6d73  rm that performs
-00006260: 2074 7261 6e73 6c61 7469 6f6e 2e0a 0a20   translation... 
-00006270: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00006280: 2020 2020 2020 2020 2078 2028 4e75 6d62           x (Numb
-00006290: 6572 293a 2064 6973 7461 6e63 6520 746f  er): distance to
-000062a0: 2074 7261 6e73 6c61 7465 2070 6f69 6e74   translate point
-000062b0: 7320 616c 6f6e 6720 7468 6520 7820 2868  s along the x (h
-000062c0: 6f72 697a 6f6e 7461 6c29 2061 7869 732e  orizontal) axis.
-000062d0: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
-000062e0: 4e75 6d62 6572 293a 2064 6973 7461 6e63  Number): distanc
-000062f0: 6520 746f 2074 7261 6e73 6c61 7465 2070  e to translate p
-00006300: 6f69 6e74 7320 616c 6f6e 6720 7468 6520  oints along the 
-00006310: 7920 2876 6572 7469 6361 6c29 2061 7869  y (vertical) axi
-00006320: 732e 0a0a 2020 2020 2020 2020 5265 7475  s...        Retu
-00006330: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-00006340: 2041 2054 7261 6e73 666f 726d 2072 6570   A Transform rep
-00006350: 7265 7365 6e74 696e 6720 7468 6520 7370  resenting the sp
-00006360: 6563 6966 6965 6420 7472 616e 736c 6174  ecified translat
-00006370: 696f 6e2e 0a20 2020 2020 2020 2022 2222  ion..        """
-00006380: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00006390: 2063 6c73 2831 2c20 302c 2030 2c20 312c   cls(1, 0, 0, 1,
-000063a0: 2078 2c20 7929 0a0a 2020 2020 4063 6c61   x, y)..    @cla
-000063b0: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
-000063c0: 2073 6361 6c69 6e67 2863 6c73 2c20 782c   scaling(cls, x,
-000063d0: 2079 3d4e 6f6e 6529 3a0a 2020 2020 2020   y=None):.      
-000063e0: 2020 2222 220a 2020 2020 2020 2020 4372    """.        Cr
-000063f0: 6561 7465 2061 2074 7261 6e73 666f 726d  eate a transform
-00006400: 2074 6861 7420 7065 7266 6f72 6d73 2073   that performs s
-00006410: 6361 6c69 6e67 2e0a 0a20 2020 2020 2020  caling...       
-00006420: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-00006430: 2020 2078 2028 4e75 6d62 6572 293a 2073     x (Number): s
-00006440: 6361 6c69 6e67 2072 6174 696f 2069 6e20  caling ratio in 
-00006450: 7468 6520 7820 2868 6f72 697a 6f6e 7461  the x (horizonta
-00006460: 6c29 2061 7869 732e 2041 2076 616c 7565  l) axis. A value
-00006470: 206f 6620 310a 2020 2020 2020 2020 2020   of 1.          
-00006480: 2020 2020 2020 7265 7375 6c74 7320 696e        results in
-00006490: 206e 6f20 7363 616c 6520 6368 616e 6765   no scale change
-000064a0: 2069 6e20 7468 6520 7820 6178 6973 2e0a   in the x axis..
-000064b0: 2020 2020 2020 2020 2020 2020 7920 284e              y (N
-000064c0: 756d 6265 7229 3a20 6f70 7469 6f6e 616c  umber): optional
-000064d0: 2073 6361 6c69 6e67 2072 6174 696f 2069   scaling ratio i
-000064e0: 6e20 7468 6520 7920 2876 6572 7469 6361  n the y (vertica
-000064f0: 6c29 2061 7869 732e 2041 2076 616c 7565  l) axis. A value
-00006500: 206f 6620 310a 2020 2020 2020 2020 2020   of 1.          
-00006510: 2020 2020 2020 7265 7375 6c74 7320 696e        results in
-00006520: 206e 6f20 7363 616c 6520 6368 616e 6765   no scale change
-00006530: 2069 6e20 7468 6520 7920 6178 6973 2e20   in the y axis. 
-00006540: 4966 2074 6869 7320 7661 6c75 6520 6973  If this value is
-00006550: 206f 6d69 7474 6564 2c20 6974 0a20 2020   omitted, it.   
-00006560: 2020 2020 2020 2020 2020 2020 2064 6566               def
-00006570: 6175 6c74 7320 746f 2074 6865 2076 616c  aults to the val
-00006580: 7565 2070 726f 7669 6465 6420 746f 2074  ue provided to t
-00006590: 6865 2060 7860 2061 7267 756d 656e 742e  he `x` argument.
-000065a0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000065b0: 733a 0a20 2020 2020 2020 2020 2020 2041  s:.            A
-000065c0: 2054 7261 6e73 666f 726d 2072 6570 7265   Transform repre
-000065d0: 7365 6e74 696e 6720 7468 6520 7370 6563  senting the spec
-000065e0: 6966 6965 6420 7363 616c 696e 672e 0a20  ified scaling.. 
-000065f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00006600: 2020 2069 6620 7920 6973 204e 6f6e 653a     if y is None:
-00006610: 0a20 2020 2020 2020 2020 2020 2079 203d  .            y =
-00006620: 2078 0a0a 2020 2020 2020 2020 7265 7475   x..        retu
-00006630: 726e 2063 6c73 2878 2c20 302c 2030 2c20  rn cls(x, 0, 0, 
-00006640: 792c 2030 2c20 3029 0a0a 2020 2020 4063  y, 0, 0)..    @c
-00006650: 6c61 7373 6d65 7468 6f64 0a20 2020 2064  lassmethod.    d
-00006660: 6566 2072 6f74 6174 696f 6e28 636c 732c  ef rotation(cls,
-00006670: 2074 6865 7461 293a 0a20 2020 2020 2020   theta):.       
-00006680: 2022 2222 0a20 2020 2020 2020 2043 7265   """.        Cre
-00006690: 6174 6520 6120 7472 616e 7366 6f72 6d20  ate a transform 
-000066a0: 7468 6174 2070 6572 666f 726d 7320 726f  that performs ro
-000066b0: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
-000066c0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-000066d0: 2020 2074 6865 7461 2028 4e75 6d62 6572     theta (Number
-000066e0: 293a 2074 6865 2061 6e67 6c65 202a 2a69  ): the angle **i
-000066f0: 6e20 7261 6469 616e 732a 2a20 6279 2077  n radians** by w
-00006700: 6869 6368 2074 6f20 726f 7461 7465 2e20  hich to rotate. 
-00006710: 506f 7369 7469 7665 0a20 2020 2020 2020  Positive.       
-00006720: 2020 2020 2020 2020 2076 616c 7565 7320           values 
-00006730: 7265 7072 6573 656e 7420 636c 6f63 6b77  represent clockw
-00006740: 6973 6520 726f 7461 7469 6f6e 732e 0a0a  ise rotations...
-00006750: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00006760: 0a20 2020 2020 2020 2020 2020 2041 2054  .            A T
-00006770: 7261 6e73 666f 726d 2072 6570 7265 7365  ransform represe
-00006780: 6e74 696e 6720 7468 6520 7370 6563 6966  nting the specif
-00006790: 6965 6420 726f 7461 7469 6f6e 2e0a 0a20  ied rotation... 
-000067a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000067b0: 2020 2072 6574 7572 6e20 636c 7328 0a20     return cls(. 
-000067c0: 2020 2020 2020 2020 2020 206d 6174 682e             math.
-000067d0: 636f 7328 7468 6574 6129 2c20 6d61 7468  cos(theta), math
-000067e0: 2e73 696e 2874 6865 7461 292c 202d 6d61  .sin(theta), -ma
-000067f0: 7468 2e73 696e 2874 6865 7461 292c 206d  th.sin(theta), m
-00006800: 6174 682e 636f 7328 7468 6574 6129 2c20  ath.cos(theta), 
-00006810: 302c 2030 0a20 2020 2020 2020 2029 0a0a  0, 0.        )..
-00006820: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
-00006830: 0a20 2020 2064 6566 2072 6f74 6174 696f  .    def rotatio
-00006840: 6e5f 6428 636c 732c 2074 6865 7461 5f64  n_d(cls, theta_d
-00006850: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00006860: 2020 2020 2020 2043 7265 6174 6520 6120         Create a 
-00006870: 7472 616e 7366 6f72 6d20 7468 6174 2070  transform that p
-00006880: 6572 666f 726d 7320 726f 7461 7469 6f6e  erforms rotation
-00006890: 202a 2a69 6e20 6465 6772 6565 732a 2a2e   **in degrees**.
-000068a0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-000068b0: 2020 2020 2020 2020 2020 2020 7468 6574              thet
-000068c0: 615f 6420 284e 756d 6265 7229 3a20 7468  a_d (Number): th
-000068d0: 6520 616e 676c 6520 2a2a 696e 2064 6567  e angle **in deg
-000068e0: 7265 6573 2a2a 2062 7920 7768 6963 6820  rees** by which 
-000068f0: 746f 2072 6f74 6174 652e 2050 6f73 6974  to rotate. Posit
-00006900: 6976 650a 2020 2020 2020 2020 2020 2020  ive.            
-00006910: 2020 2020 7661 6c75 6573 2072 6570 7265      values repre
-00006920: 7365 6e74 2063 6c6f 636b 7769 7365 2072  sent clockwise r
-00006930: 6f74 6174 696f 6e73 2e0a 0a20 2020 2020  otations...     
-00006940: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00006950: 2020 2020 2020 2020 4120 5472 616e 7366          A Transf
-00006960: 6f72 6d20 7265 7072 6573 656e 7469 6e67  orm representing
-00006970: 2074 6865 2073 7065 6369 6669 6564 2072   the specified r
-00006980: 6f74 6174 696f 6e2e 0a0a 2020 2020 2020  otation...      
-00006990: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-000069a0: 7475 726e 2063 6c73 2e72 6f74 6174 696f  turn cls.rotatio
-000069b0: 6e28 6d61 7468 2e72 6164 6961 6e73 2874  n(math.radians(t
-000069c0: 6865 7461 5f64 2929 0a0a 2020 2020 4063  heta_d))..    @c
-000069d0: 6c61 7373 6d65 7468 6f64 0a20 2020 2064  lassmethod.    d
-000069e0: 6566 2073 6865 6172 696e 6728 636c 732c  ef shearing(cls,
-000069f0: 2078 2c20 793d 4e6f 6e65 293a 0a20 2020   x, y=None):.   
-00006a00: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00006a10: 2043 7265 6174 6520 6120 7472 616e 7366   Create a transf
-00006a20: 6f72 6d20 7468 6174 2070 6572 666f 726d  orm that perform
-00006a30: 7320 7368 6561 7269 6e67 2028 6e6f 7420  s shearing (not 
-00006a40: 6f66 2073 6865 6570 292e 0a0a 2020 2020  of sheep)...    
-00006a50: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00006a60: 2020 2020 2020 7820 284e 756d 6265 7229        x (Number)
-00006a70: 3a20 5468 6520 616d 6f75 6e74 2074 6f20  : The amount to 
-00006a80: 7368 6561 7220 616c 6f6e 6720 7468 6520  shear along the 
-00006a90: 7820 2868 6f72 697a 6f6e 7461 6c29 2061  x (horizontal) a
-00006aa0: 7869 732e 0a20 2020 2020 2020 2020 2020  xis..           
-00006ab0: 2079 2028 4e75 6d62 6572 293a 204f 7074   y (Number): Opt
-00006ac0: 696f 6e61 6c20 616d 6f75 6e74 2074 6f20  ional amount to 
-00006ad0: 7368 6561 7220 616c 6f6e 6720 7468 6520  shear along the 
-00006ae0: 7920 2876 6572 7469 6361 6c29 2061 7869  y (vertical) axi
-00006af0: 732e 2049 6620 6f6d 6974 7465 642c 0a20  s. If omitted,. 
-00006b00: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00006b10: 6869 7320 6465 6661 756c 7473 2074 6f20  his defaults to 
-00006b20: 7468 6520 7661 6c75 6520 7072 6f76 6964  the value provid
-00006b30: 6564 2074 6f20 7468 6520 6078 6020 6172  ed to the `x` ar
-00006b40: 6775 6d65 6e74 2e0a 0a20 2020 2020 2020  gument...       
-00006b50: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-00006b60: 2020 2020 2020 4120 5472 616e 7366 6f72        A Transfor
-00006b70: 6d20 7265 7072 6573 656e 7469 6e67 2074  m representing t
-00006b80: 6865 2073 7065 6369 6669 6564 2073 6865  he specified she
-00006b90: 6172 696e 672e 0a0a 2020 2020 2020 2020  aring...        
-00006ba0: 2222 220a 2020 2020 2020 2020 6966 2079  """.        if y
-00006bb0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00006bc0: 2020 2020 2020 7920 3d20 780a 2020 2020        y = x.    
-00006bd0: 2020 2020 7265 7475 726e 2063 6c73 2831      return cls(1
-00006be0: 2c20 792c 2078 2c20 312c 2030 2c20 3029  , y, x, 1, 0, 0)
-00006bf0: 0a0a 2020 2020 6465 6620 7472 616e 736c  ..    def transl
-00006c00: 6174 6528 7365 6c66 2c20 782c 2079 293a  ate(self, x, y):
-00006c10: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00006c20: 2020 2020 2050 726f 6475 6365 2061 2074       Produce a t
-00006c30: 7261 6e73 666f 726d 2062 7920 636f 6d70  ransform by comp
-00006c40: 6f73 696e 6720 7468 6520 6375 7272 656e  osing the curren
-00006c50: 7420 7472 616e 7366 6f72 6d20 7769 7468  t transform with
-00006c60: 2061 2074 7261 6e73 6c61 7469 6f6e 2e0a   a translation..
-00006c70: 0a20 2020 2020 2020 202e 2e20 6e6f 7465  .        .. note
-00006c80: 3a3a 0a20 2020 2020 2020 2020 2020 2054  ::.            T
-00006c90: 7261 6e73 666f 726d 7320 6172 6520 696d  ransforms are im
-00006ca0: 6d75 7461 626c 652c 2073 6f20 7468 6973  mutable, so this
-00006cb0: 2072 6574 7572 6e73 2061 206e 6577 2074   returns a new t
-00006cc0: 7261 6e73 666f 726d 2072 6174 6865 7220  ransform rather 
-00006cd0: 7468 616e 0a20 2020 2020 2020 2020 2020  than.           
-00006ce0: 206d 7574 6174 696e 6720 7365 6c66 2e0a   mutating self..
-00006cf0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-00006d00: 2020 2020 2020 2020 2020 2078 2028 4e75             x (Nu
-00006d10: 6d62 6572 293a 2064 6973 7461 6e63 6520  mber): distance 
-00006d20: 746f 2074 7261 6e73 6c61 7465 2070 6f69  to translate poi
-00006d30: 6e74 7320 616c 6f6e 6720 7468 6520 7820  nts along the x 
-00006d40: 2868 6f72 697a 6f6e 7461 6c29 2061 7869  (horizontal) axi
-00006d50: 732e 0a20 2020 2020 2020 2020 2020 2079  s..            y
-00006d60: 2028 4e75 6d62 6572 293a 2064 6973 7461   (Number): dista
-00006d70: 6e63 6520 746f 2074 7261 6e73 6c61 7465  nce to translate
-00006d80: 2070 6f69 6e74 7320 616c 6f6e 6720 7468   points along th
-00006d90: 6520 7920 2876 6572 7469 6361 6c29 2061  e y (vertical) a
-00006da0: 7869 732e 0a0a 2020 2020 2020 2020 5265  xis...        Re
-00006db0: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-00006dc0: 2020 2041 2054 7261 6e73 666f 726d 2072     A Transform r
-00006dd0: 6570 7265 7365 6e74 696e 6720 7468 6520  epresenting the 
-00006de0: 636f 6d70 6f73 6564 2074 7261 6e73 666f  composed transfo
-00006df0: 726d 2e0a 2020 2020 2020 2020 2222 220a  rm..        """.
-00006e00: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00006e10: 656c 6620 4020 5472 616e 7366 6f72 6d2e  elf @ Transform.
-00006e20: 7472 616e 736c 6174 696f 6e28 782c 2079  translation(x, y
-00006e30: 290a 0a20 2020 2064 6566 2073 6361 6c65  )..    def scale
-00006e40: 2873 656c 662c 2078 2c20 793d 4e6f 6e65  (self, x, y=None
-00006e50: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00006e60: 2020 2020 2020 2050 726f 6475 6365 2061         Produce a
-00006e70: 2074 7261 6e73 666f 726d 2062 7920 636f   transform by co
-00006e80: 6d70 6f73 696e 6720 7468 6520 6375 7272  mposing the curr
-00006e90: 656e 7420 7472 616e 7366 6f72 6d20 7769  ent transform wi
-00006ea0: 7468 2061 2073 6361 6c69 6e67 2e0a 0a20  th a scaling... 
-00006eb0: 2020 2020 2020 202e 2e20 6e6f 7465 3a3a         .. note::
-00006ec0: 0a20 2020 2020 2020 2020 2020 2054 7261  .            Tra
-00006ed0: 6e73 666f 726d 7320 6172 6520 696d 6d75  nsforms are immu
-00006ee0: 7461 626c 652c 2073 6f20 7468 6973 2072  table, so this r
-00006ef0: 6574 7572 6e73 2061 206e 6577 2074 7261  eturns a new tra
-00006f00: 6e73 666f 726d 2072 6174 6865 7220 7468  nsform rather th
-00006f10: 616e 0a20 2020 2020 2020 2020 2020 206d  an.            m
-00006f20: 7574 6174 696e 6720 7365 6c66 2e0a 0a20  utating self... 
-00006f30: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00006f40: 2020 2020 2020 2020 2078 2028 4e75 6d62           x (Numb
-00006f50: 6572 293a 2073 6361 6c69 6e67 2072 6174  er): scaling rat
-00006f60: 696f 2069 6e20 7468 6520 7820 2868 6f72  io in the x (hor
-00006f70: 697a 6f6e 7461 6c29 2061 7869 732e 2041  izontal) axis. A
-00006f80: 2076 616c 7565 206f 6620 310a 2020 2020   value of 1.    
-00006f90: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00006fa0: 6c74 7320 696e 206e 6f20 7363 616c 6520  lts in no scale 
-00006fb0: 6368 616e 6765 2069 6e20 7468 6520 7820  change in the x 
-00006fc0: 6178 6973 2e0a 2020 2020 2020 2020 2020  axis..          
-00006fd0: 2020 7920 284e 756d 6265 7229 3a20 6f70    y (Number): op
-00006fe0: 7469 6f6e 616c 2073 6361 6c69 6e67 2072  tional scaling r
-00006ff0: 6174 696f 2069 6e20 7468 6520 7920 2876  atio in the y (v
-00007000: 6572 7469 6361 6c29 2061 7869 732e 2041  ertical) axis. A
-00007010: 2076 616c 7565 206f 6620 310a 2020 2020   value of 1.    
-00007020: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00007030: 6c74 7320 696e 206e 6f20 7363 616c 6520  lts in no scale 
-00007040: 6368 616e 6765 2069 6e20 7468 6520 7920  change in the y 
-00007050: 6178 6973 2e20 4966 2074 6869 7320 7661  axis. If this va
-00007060: 6c75 6520 6973 206f 6d69 7474 6564 2c20  lue is omitted, 
-00007070: 6974 0a20 2020 2020 2020 2020 2020 2020  it.             
-00007080: 2020 2064 6566 6175 6c74 7320 746f 2074     defaults to t
-00007090: 6865 2076 616c 7565 2070 726f 7669 6465  he value provide
-000070a0: 6420 746f 2074 6865 2060 7860 2061 7267  d to the `x` arg
-000070b0: 756d 656e 742e 0a0a 2020 2020 2020 2020  ument...        
-000070c0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-000070d0: 2020 2020 2041 2054 7261 6e73 666f 726d       A Transform
-000070e0: 2072 6570 7265 7365 6e74 696e 6720 7468   representing th
-000070f0: 6520 636f 6d70 6f73 6564 2074 7261 6e73  e composed trans
-00007100: 666f 726d 2e0a 2020 2020 2020 2020 2222  form..        ""
-00007110: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00007120: 2073 656c 6620 4020 5472 616e 7366 6f72   self @ Transfor
-00007130: 6d2e 7363 616c 696e 6728 782c 2079 290a  m.scaling(x, y).
-00007140: 0a20 2020 2064 6566 2072 6f74 6174 6528  .    def rotate(
-00007150: 7365 6c66 2c20 7468 6574 6129 3a0a 2020  self, theta):.  
-00007160: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00007170: 2020 5072 6f64 7563 6520 6120 7472 616e    Produce a tran
-00007180: 7366 6f72 6d20 6279 2063 6f6d 706f 7369  sform by composi
-00007190: 6e67 2074 6865 2063 7572 7265 6e74 2074  ng the current t
-000071a0: 7261 6e73 666f 726d 2077 6974 6820 6120  ransform with a 
-000071b0: 726f 7461 7469 6f6e 2e0a 0a20 2020 2020  rotation...     
-000071c0: 2020 202e 2e20 6e6f 7465 3a3a 0a20 2020     .. note::.   
-000071d0: 2020 2020 2020 2020 2054 7261 6e73 666f           Transfo
-000071e0: 726d 7320 6172 6520 696d 6d75 7461 626c  rms are immutabl
-000071f0: 652c 2073 6f20 7468 6973 2072 6574 7572  e, so this retur
-00007200: 6e73 2061 206e 6577 2074 7261 6e73 666f  ns a new transfo
-00007210: 726d 2072 6174 6865 7220 7468 616e 0a20  rm rather than. 
-00007220: 2020 2020 2020 2020 2020 206d 7574 6174             mutat
-00007230: 696e 6720 7365 6c66 2e0a 0a20 2020 2020  ing self...     
-00007240: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00007250: 2020 2020 2074 6865 7461 2028 4e75 6d62       theta (Numb
-00007260: 6572 293a 2074 6865 2061 6e67 6c65 202a  er): the angle *
-00007270: 2a69 6e20 7261 6469 616e 732a 2a20 6279  *in radians** by
-00007280: 2077 6869 6368 2074 6f20 726f 7461 7465   which to rotate
-00007290: 2e20 506f 7369 7469 7665 0a20 2020 2020  . Positive.     
-000072a0: 2020 2020 2020 2020 2020 2076 616c 7565             value
-000072b0: 7320 7265 7072 6573 656e 7420 636c 6f63  s represent cloc
-000072c0: 6b77 6973 6520 726f 7461 7469 6f6e 732e  kwise rotations.
-000072d0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000072e0: 733a 0a20 2020 2020 2020 2020 2020 2041  s:.            A
-000072f0: 2054 7261 6e73 666f 726d 2072 6570 7265   Transform repre
-00007300: 7365 6e74 696e 6720 7468 6520 636f 6d70  senting the comp
-00007310: 6f73 6564 2074 7261 6e73 666f 726d 2e0a  osed transform..
-00007320: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00007330: 2020 2020 7265 7475 726e 2073 656c 6620      return self 
-00007340: 4020 5472 616e 7366 6f72 6d2e 726f 7461  @ Transform.rota
-00007350: 7469 6f6e 2874 6865 7461 290a 0a20 2020  tion(theta)..   
-00007360: 2064 6566 2072 6f74 6174 655f 6428 7365   def rotate_d(se
-00007370: 6c66 2c20 7468 6574 615f 6429 3a0a 2020  lf, theta_d):.  
-00007380: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00007390: 2020 5072 6f64 7563 6520 6120 7472 616e    Produce a tran
-000073a0: 7366 6f72 6d20 6279 2063 6f6d 706f 7369  sform by composi
-000073b0: 6e67 2074 6865 2063 7572 7265 6e74 2074  ng the current t
-000073c0: 7261 6e73 666f 726d 2077 6974 6820 6120  ransform with a 
-000073d0: 726f 7461 7469 6f6e 0a20 2020 2020 2020  rotation.       
-000073e0: 202a 2a69 6e20 6465 6772 6565 732a 2a2e   **in degrees**.
-000073f0: 0a0a 2020 2020 2020 2020 2e2e 206e 6f74  ..        .. not
-00007400: 653a 3a0a 2020 2020 2020 2020 2020 2020  e::.            
-00007410: 5472 616e 7366 6f72 6d73 2061 7265 2069  Transforms are i
-00007420: 6d6d 7574 6162 6c65 2c20 736f 2074 6869  mmutable, so thi
-00007430: 7320 7265 7475 726e 7320 6120 6e65 7720  s returns a new 
-00007440: 7472 616e 7366 6f72 6d20 7261 7468 6572  transform rather
-00007450: 2074 6861 6e0a 2020 2020 2020 2020 2020   than.          
-00007460: 2020 6d75 7461 7469 6e67 2073 656c 662e    mutating self.
-00007470: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-00007480: 2020 2020 2020 2020 2020 2020 7468 6574              thet
-00007490: 615f 6420 284e 756d 6265 7229 3a20 7468  a_d (Number): th
-000074a0: 6520 616e 676c 6520 2a2a 696e 2064 6567  e angle **in deg
-000074b0: 7265 6573 2a2a 2062 7920 7768 6963 6820  rees** by which 
-000074c0: 746f 2072 6f74 6174 652e 2050 6f73 6974  to rotate. Posit
-000074d0: 6976 650a 2020 2020 2020 2020 2020 2020  ive.            
-000074e0: 2020 2020 7661 6c75 6573 2072 6570 7265      values repre
-000074f0: 7365 6e74 2063 6c6f 636b 7769 7365 2072  sent clockwise r
-00007500: 6f74 6174 696f 6e73 2e0a 0a20 2020 2020  otations...     
-00007510: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00007520: 2020 2020 2020 2020 4120 5472 616e 7366          A Transf
-00007530: 6f72 6d20 7265 7072 6573 656e 7469 6e67  orm representing
-00007540: 2074 6865 2063 6f6d 706f 7365 6420 7472   the composed tr
-00007550: 616e 7366 6f72 6d2e 0a20 2020 2020 2020  ansform..       
-00007560: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
-00007570: 7572 6e20 7365 6c66 2040 2054 7261 6e73  urn self @ Trans
-00007580: 666f 726d 2e72 6f74 6174 696f 6e5f 6428  form.rotation_d(
-00007590: 7468 6574 615f 6429 0a0a 2020 2020 6465  theta_d)..    de
-000075a0: 6620 7368 6561 7228 7365 6c66 2c20 782c  f shear(self, x,
-000075b0: 2079 3d4e 6f6e 6529 3a0a 2020 2020 2020   y=None):.      
-000075c0: 2020 2222 220a 2020 2020 2020 2020 5072    """.        Pr
-000075d0: 6f64 7563 6520 6120 7472 616e 7366 6f72  oduce a transfor
-000075e0: 6d20 6279 2063 6f6d 706f 7369 6e67 2074  m by composing t
-000075f0: 6865 2063 7572 7265 6e74 2074 7261 6e73  he current trans
-00007600: 666f 726d 2077 6974 6820 6120 7368 6561  form with a shea
-00007610: 7269 6e67 2e0a 0a20 2020 2020 2020 202e  ring...        .
-00007620: 2e20 6e6f 7465 3a3a 0a20 2020 2020 2020  . note::.       
-00007630: 2020 2020 2054 7261 6e73 666f 726d 7320       Transforms 
-00007640: 6172 6520 696d 6d75 7461 626c 652c 2073  are immutable, s
-00007650: 6f20 7468 6973 2072 6574 7572 6e73 2061  o this returns a
-00007660: 206e 6577 2074 7261 6e73 666f 726d 2072   new transform r
-00007670: 6174 6865 7220 7468 616e 0a20 2020 2020  ather than.     
-00007680: 2020 2020 2020 206d 7574 6174 696e 6720         mutating 
-00007690: 7365 6c66 2e0a 0a20 2020 2020 2020 2041  self...        A
-000076a0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-000076b0: 2078 2028 4e75 6d62 6572 293a 2054 6865   x (Number): The
-000076c0: 2061 6d6f 756e 7420 746f 2073 6865 6172   amount to shear
-000076d0: 2061 6c6f 6e67 2074 6865 2078 2028 686f   along the x (ho
-000076e0: 7269 7a6f 6e74 616c 2920 6178 6973 2e0a  rizontal) axis..
-000076f0: 2020 2020 2020 2020 2020 2020 7920 284e              y (N
-00007700: 756d 6265 7229 3a20 4f70 7469 6f6e 616c  umber): Optional
-00007710: 2061 6d6f 756e 7420 746f 2073 6865 6172   amount to shear
-00007720: 2061 6c6f 6e67 2074 6865 2079 2028 7665   along the y (ve
-00007730: 7274 6963 616c 2920 6178 6973 2e20 4966  rtical) axis. If
-00007740: 206f 6d69 7474 6564 2c0a 2020 2020 2020   omitted,.      
-00007750: 2020 2020 2020 2020 2020 7468 6973 2064            this d
-00007760: 6566 6175 6c74 7320 746f 2074 6865 2076  efaults to the v
-00007770: 616c 7565 2070 726f 7669 6465 6420 746f  alue provided to
-00007780: 2074 6865 2060 7860 2061 7267 756d 656e   the `x` argumen
-00007790: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
-000077a0: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-000077b0: 2041 2054 7261 6e73 666f 726d 2072 6570   A Transform rep
-000077c0: 7265 7365 6e74 696e 6720 7468 6520 636f  resenting the co
-000077d0: 6d70 6f73 6564 2074 7261 6e73 666f 726d  mposed transform
-000077e0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-000077f0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00007800: 6620 4020 5472 616e 7366 6f72 6d2e 7368  f @ Transform.sh
-00007810: 6561 7269 6e67 2878 2c20 7929 0a0a 2020  earing(x, y)..  
-00007820: 2020 6465 6620 6162 6f75 7428 7365 6c66    def about(self
-00007830: 2c20 782c 2079 293a 0a20 2020 2020 2020  , x, y):.       
-00007840: 2022 2222 0a20 2020 2020 2020 2042 7261   """.        Bra
-00007850: 636b 6574 2074 6865 2067 6976 656e 2074  cket the given t
-00007860: 7261 6e73 666f 726d 2069 6e20 6120 7061  ransform in a pa
-00007870: 6972 206f 6620 7472 616e 736c 6174 696f  ir of translatio
-00007880: 6e73 2074 6f20 6d61 6b65 2069 7420 6170  ns to make it ap
-00007890: 7065 6172 2061 626f 7574 2061 0a20 2020  pear about a.   
-000078a0: 2020 2020 2070 6f69 6e74 2074 6861 7420       point that 
-000078b0: 6973 6e27 7420 7468 6520 6f72 6967 696e  isn't the origin
-000078c0: 2e0a 0a20 2020 2020 2020 2054 6869 7320  ...        This 
-000078d0: 6973 2061 2075 7365 6675 6c20 7368 6f72  is a useful shor
-000078e0: 7468 616e 6420 666f 7220 7065 7266 6f72  thand for perfor
-000078f0: 6d69 6e67 2061 2074 7261 6e73 666f 726d  ming a transform
-00007900: 206c 696b 6520 6120 726f 7461 7469 6f6e   like a rotation
-00007910: 2061 726f 756e 6420 7468 650a 2020 2020   around the.    
-00007920: 2020 2020 6365 6e74 6572 2070 6f69 6e74      center point
-00007930: 206f 6620 616e 206f 626a 6563 7420 7468   of an object th
-00007940: 6174 2069 736e 2774 2063 656e 7465 7265  at isn't centere
-00007950: 6420 6174 2074 6865 206f 7269 6769 6e2e  d at the origin.
-00007960: 0a0a 2020 2020 2020 2020 2e2e 206e 6f74  ..        .. not
-00007970: 653a 3a0a 2020 2020 2020 2020 2020 2020  e::.            
-00007980: 5472 616e 7366 6f72 6d73 2061 7265 2069  Transforms are i
-00007990: 6d6d 7574 6162 6c65 2c20 736f 2074 6869  mmutable, so thi
-000079a0: 7320 7265 7475 726e 7320 6120 6e65 7720  s returns a new 
-000079b0: 7472 616e 7366 6f72 6d20 7261 7468 6572  transform rather
-000079c0: 2074 6861 6e0a 2020 2020 2020 2020 2020   than.          
-000079d0: 2020 6d75 7461 7469 6e67 2073 656c 662e    mutating self.
-000079e0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-000079f0: 2020 2020 2020 2020 2020 2020 7820 284e              x (N
-00007a00: 756d 6265 7229 3a20 7468 6520 706f 696e  umber): the poin
-00007a10: 7420 616c 6f6e 6720 7468 6520 7820 2868  t along the x (h
-00007a20: 6f72 697a 6f6e 7461 6c29 2061 7869 7320  orizontal) axis 
-00007a30: 6162 6f75 7420 7768 6963 6820 746f 2074  about which to t
-00007a40: 7261 6e73 666f 726d 2e0a 2020 2020 2020  ransform..      
-00007a50: 2020 2020 2020 7920 284e 756d 6265 7229        y (Number)
-00007a60: 3a20 7468 6520 706f 696e 7420 616c 6f6e  : the point alon
-00007a70: 6720 7468 6520 7920 2876 6572 7469 6361  g the y (vertica
-00007a80: 6c29 2061 7869 7320 6162 6f75 7420 7768  l) axis about wh
-00007a90: 6963 6820 746f 2074 7261 6e73 666f 726d  ich to transform
-00007aa0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00007ab0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00007ac0: 4120 5472 616e 7366 6f72 6d20 7265 7072  A Transform repr
-00007ad0: 6573 656e 7469 6e67 2074 6865 2063 6f6d  esenting the com
-00007ae0: 706f 7365 6420 7472 616e 7366 6f72 6d2e  posed transform.
-00007af0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00007b00: 2020 2020 2072 6574 7572 6e20 5472 616e       return Tran
-00007b10: 7366 6f72 6d2e 7472 616e 736c 6174 696f  sform.translatio
-00007b20: 6e28 2d78 2c20 2d79 2920 4020 7365 6c66  n(-x, -y) @ self
-00007b30: 2040 2054 7261 6e73 666f 726d 2e74 7261   @ Transform.tra
-00007b40: 6e73 6c61 7469 6f6e 2878 2c20 7929 0a0a  nslation(x, y)..
-00007b50: 2020 2020 4066 6f72 6365 5f64 6f63 756d      @force_docum
-00007b60: 656e 740a 2020 2020 6465 6620 5f5f 6d75  ent.    def __mu
-00007b70: 6c5f 5f28 7365 6c66 2c20 6f74 6865 7229  l__(self, other)
-00007b80: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00007b90: 2020 2020 2020 4d75 6c74 6970 6c79 2074        Multiply t
-00007ba0: 6865 2069 6e64 6976 6964 7561 6c20 7472  he individual tr
-00007bb0: 616e 7366 6f72 6d20 7061 7261 6d65 7465  ansform paramete
-00007bc0: 7273 2062 7920 6120 7363 616c 6172 2076  rs by a scalar v
-00007bd0: 616c 7565 2e0a 0a20 2020 2020 2020 2041  alue...        A
-00007be0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-00007bf0: 206f 7468 6572 2028 4e75 6d62 6572 293a   other (Number):
-00007c00: 2074 6865 2073 6361 6c61 7220 7661 6c75   the scalar valu
-00007c10: 6520 6279 2077 6869 6368 2074 6f20 6d75  e by which to mu
-00007c20: 6c74 6970 6c79 2074 6865 2070 6172 616d  ltiply the param
-00007c30: 6574 6572 730a 0a20 2020 2020 2020 2052  eters..        R
-00007c40: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-00007c50: 2020 2020 4120 5472 616e 7366 6f72 6d20      A Transform 
-00007c60: 7769 7468 2074 6865 206d 6f64 6966 6965  with the modifie
-00007c70: 6420 7061 7261 6d65 7465 7273 2e0a 2020  d parameters..  
-00007c80: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00007c90: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00007ca0: 6f74 6865 722c 204e 756d 6265 7243 6c61  other, NumberCla
-00007cb0: 7373 293a 0a20 2020 2020 2020 2020 2020  ss):.           
-00007cc0: 2072 6574 7572 6e20 5472 616e 7366 6f72   return Transfor
-00007cd0: 6d28 0a20 2020 2020 2020 2020 2020 2020  m(.             
-00007ce0: 2020 2061 3d73 656c 662e 6120 2a20 6f74     a=self.a * ot
-00007cf0: 6865 722c 0a20 2020 2020 2020 2020 2020  her,.           
-00007d00: 2020 2020 2062 3d73 656c 662e 6220 2a20       b=self.b * 
-00007d10: 6f74 6865 722c 0a20 2020 2020 2020 2020  other,.         
-00007d20: 2020 2020 2020 2063 3d73 656c 662e 6320         c=self.c 
-00007d30: 2a20 6f74 6865 722c 0a20 2020 2020 2020  * other,.       
-00007d40: 2020 2020 2020 2020 2064 3d73 656c 662e           d=self.
-00007d50: 6420 2a20 6f74 6865 722c 0a20 2020 2020  d * other,.     
-00007d60: 2020 2020 2020 2020 2020 2065 3d73 656c             e=sel
-00007d70: 662e 6520 2a20 6f74 6865 722c 0a20 2020  f.e * other,.   
-00007d80: 2020 2020 2020 2020 2020 2020 2066 3d73               f=s
-00007d90: 656c 662e 6620 2a20 6f74 6865 722c 0a20  elf.f * other,. 
-00007da0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00007db0: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
-00007dc0: 496d 706c 656d 656e 7465 640a 0a20 2020  Implemented..   
-00007dd0: 2023 2073 6361 6c61 7220 6d75 6c74 6970   # scalar multip
-00007de0: 6c69 6361 7469 6f6e 2069 7320 636f 6d6d  lication is comm
-00007df0: 7574 6174 6976 650a 2020 2020 5f5f 726d  utative.    __rm
-00007e00: 756c 5f5f 203d 205f 5f6d 756c 5f5f 0a0a  ul__ = __mul__..
-00007e10: 2020 2020 4066 6f72 6365 5f64 6f63 756d      @force_docum
-00007e20: 656e 740a 2020 2020 6465 6620 5f5f 6d61  ent.    def __ma
-00007e30: 746d 756c 5f5f 2873 656c 662c 206f 7468  tmul__(self, oth
-00007e40: 6572 293a 0a20 2020 2020 2020 2022 2222  er):.        """
-00007e50: 0a20 2020 2020 2020 2043 6f6d 706f 7365  .        Compose
-00007e60: 2074 776f 2074 7261 6e73 666f 726d 7320   two transforms 
-00007e70: 696e 746f 2061 2073 696e 676c 6520 7472  into a single tr
-00007e80: 616e 7366 6f72 6d2e 0a0a 2020 2020 2020  ansform...      
-00007e90: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00007ea0: 2020 2020 6f74 6865 7220 2854 7261 6e73      other (Trans
-00007eb0: 666f 726d 293a 2074 6865 2072 6967 6874  form): the right
-00007ec0: 2d68 616e 6420 7369 6465 2074 7261 6e73  -hand side trans
-00007ed0: 666f 726d 206f 6620 7468 6520 696e 6669  form of the infi
-00007ee0: 7820 6f70 6572 6174 6f72 2e0a 0a20 2020  x operator...   
-00007ef0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00007f00: 2020 2020 2020 2020 2020 4120 5472 616e            A Tran
-00007f10: 7366 6f72 6d20 7265 7072 6573 656e 7469  sform representi
-00007f20: 6e67 2074 6865 2063 6f6d 706f 7365 6420  ng the composed 
-00007f30: 7472 616e 7366 6f72 6d2e 0a20 2020 2020  transform..     
-00007f40: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-00007f50: 6620 6973 696e 7374 616e 6365 286f 7468  f isinstance(oth
-00007f60: 6572 2c20 5472 616e 7366 6f72 6d29 3a0a  er, Transform):.
-00007f70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00007f80: 726e 2073 656c 662e 5f5f 636c 6173 735f  rn self.__class_
-00007f90: 5f28 0a20 2020 2020 2020 2020 2020 2020  _(.             
-00007fa0: 2020 2061 3d73 656c 662e 6120 2a20 6f74     a=self.a * ot
-00007fb0: 6865 722e 6120 2b20 7365 6c66 2e62 202a  her.a + self.b *
-00007fc0: 206f 7468 6572 2e63 2c0a 2020 2020 2020   other.c,.      
-00007fd0: 2020 2020 2020 2020 2020 623d 7365 6c66            b=self
-00007fe0: 2e61 202a 206f 7468 6572 2e62 202b 2073  .a * other.b + s
-00007ff0: 656c 662e 6220 2a20 6f74 6865 722e 642c  elf.b * other.d,
-00008000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008010: 2063 3d73 656c 662e 6320 2a20 6f74 6865   c=self.c * othe
-00008020: 722e 6120 2b20 7365 6c66 2e64 202a 206f  r.a + self.d * o
-00008030: 7468 6572 2e63 2c0a 2020 2020 2020 2020  ther.c,.        
-00008040: 2020 2020 2020 2020 643d 7365 6c66 2e63          d=self.c
-00008050: 202a 206f 7468 6572 2e62 202b 2073 656c   * other.b + sel
-00008060: 662e 6420 2a20 6f74 6865 722e 642c 0a20  f.d * other.d,. 
-00008070: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00008080: 3d73 656c 662e 6520 2a20 6f74 6865 722e  =self.e * other.
-00008090: 6120 2b20 7365 6c66 2e66 202a 206f 7468  a + self.f * oth
-000080a0: 6572 2e63 202b 206f 7468 6572 2e65 2c0a  er.c + other.e,.
-000080b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080c0: 663d 7365 6c66 2e65 202a 206f 7468 6572  f=self.e * other
-000080d0: 2e62 202b 2073 656c 662e 6620 2a20 6f74  .b + self.f * ot
-000080e0: 6865 722e 6420 2b20 6f74 6865 722e 662c  her.d + other.f,
-000080f0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00008100: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00008110: 6f74 496d 706c 656d 656e 7465 640a 0a20  otImplemented.. 
-00008120: 2020 2064 6566 2072 656e 6465 7228 7365     def render(se
-00008130: 6c66 2c20 6c61 7374 5f69 7465 6d29 3a0a  lf, last_item):.
-00008140: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00008150: 2020 2020 5265 6e64 6572 2074 6865 2074      Render the t
-00008160: 7261 6e73 666f 726d 2074 6f20 6974 7320  ransform to its 
-00008170: 5044 4620 6f75 7470 7574 2072 6570 7265  PDF output repre
-00008180: 7365 6e74 6174 696f 6e2e 0a0a 2020 2020  sentation...    
-00008190: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-000081a0: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-000081b0: 2074 6865 206c 6173 7420 7061 7468 2065   the last path e
-000081c0: 6c65 6d65 6e74 2074 6869 7320 7472 616e  lement this tran
-000081d0: 7366 6f72 6d20 6170 706c 6965 7320 746f  sform applies to
-000081e0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000081f0: 733a 0a20 2020 2020 2020 2020 2020 2041  s:.            A
-00008200: 2074 7570 6c65 206f 6620 6028 7374 722c   tuple of `(str,
-00008210: 206c 6173 745f 6974 656d 2960 2e20 606c   last_item)`. `l
-00008220: 6173 745f 6974 656d 6020 6973 2072 6574  ast_item` is ret
-00008230: 7572 6e65 6420 756e 6368 616e 6765 642e  urned unchanged.
-00008240: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00008250: 2020 2020 2072 6574 7572 6e20 280a 2020       return (.  
-00008260: 2020 2020 2020 2020 2020 6622 7b6e 756d            f"{num
-00008270: 6265 725f 746f 5f73 7472 2873 656c 662e  ber_to_str(self.
-00008280: 6129 7d20 7b6e 756d 6265 725f 746f 5f73  a)} {number_to_s
-00008290: 7472 2873 656c 662e 6229 7d20 220a 2020  tr(self.b)} ".  
-000082a0: 2020 2020 2020 2020 2020 6622 7b6e 756d            f"{num
-000082b0: 6265 725f 746f 5f73 7472 2873 656c 662e  ber_to_str(self.
-000082c0: 6329 7d20 7b6e 756d 6265 725f 746f 5f73  c)} {number_to_s
-000082d0: 7472 2873 656c 662e 6429 7d20 220a 2020  tr(self.d)} ".  
-000082e0: 2020 2020 2020 2020 2020 6622 7b6e 756d            f"{num
-000082f0: 6265 725f 746f 5f73 7472 2873 656c 662e  ber_to_str(self.
-00008300: 6529 7d20 7b6e 756d 6265 725f 746f 5f73  e)} {number_to_s
-00008310: 7472 2873 656c 662e 6629 7d20 636d 222c  tr(self.f)} cm",
-00008320: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-00008330: 745f 6974 656d 2c0a 2020 2020 2020 2020  t_item,.        
-00008340: 290a 0a20 2020 2064 6566 205f 5f73 7472  )..    def __str
-00008350: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
-00008360: 2020 7265 7475 726e 2028 0a20 2020 2020    return (.     
-00008370: 2020 2020 2020 2066 2274 7261 6e73 666f         f"transfo
-00008380: 726d 3a20 5b22 0a20 2020 2020 2020 2020  rm: [".         
-00008390: 2020 2066 227b 6e75 6d62 6572 5f74 6f5f     f"{number_to_
-000083a0: 7374 7228 7365 6c66 2e61 297d 207b 6e75  str(self.a)} {nu
-000083b0: 6d62 6572 5f74 6f5f 7374 7228 7365 6c66  mber_to_str(self
-000083c0: 2e62 297d 2030 3b20 220a 2020 2020 2020  .b)} 0; ".      
-000083d0: 2020 2020 2020 6622 7b6e 756d 6265 725f        f"{number_
-000083e0: 746f 5f73 7472 2873 656c 662e 6329 7d20  to_str(self.c)} 
-000083f0: 7b6e 756d 6265 725f 746f 5f73 7472 2873  {number_to_str(s
-00008400: 656c 662e 6429 7d20 303b 2022 0a20 2020  elf.d)} 0; ".   
-00008410: 2020 2020 2020 2020 2066 227b 6e75 6d62           f"{numb
-00008420: 6572 5f74 6f5f 7374 7228 7365 6c66 2e65  er_to_str(self.e
-00008430: 297d 207b 6e75 6d62 6572 5f74 6f5f 7374  )} {number_to_st
-00008440: 7228 7365 6c66 2e66 297d 2031 5d22 0a20  r(self.f)} 1]". 
-00008450: 2020 2020 2020 2029 0a0a 0a5f 5f70 646f         )...__pdo
-00008460: 635f 5f5b 2254 7261 6e73 666f 726d 2e61  c__["Transform.a
-00008470: 225d 203d 2046 616c 7365 0a5f 5f70 646f  "] = False.__pdo
-00008480: 635f 5f5b 2254 7261 6e73 666f 726d 2e62  c__["Transform.b
-00008490: 225d 203d 2046 616c 7365 0a5f 5f70 646f  "] = False.__pdo
-000084a0: 635f 5f5b 2254 7261 6e73 666f 726d 2e63  c__["Transform.c
-000084b0: 225d 203d 2046 616c 7365 0a5f 5f70 646f  "] = False.__pdo
-000084c0: 635f 5f5b 2254 7261 6e73 666f 726d 2e64  c__["Transform.d
-000084d0: 225d 203d 2046 616c 7365 0a5f 5f70 646f  "] = False.__pdo
-000084e0: 635f 5f5b 2254 7261 6e73 666f 726d 2e65  c__["Transform.e
-000084f0: 225d 203d 2046 616c 7365 0a5f 5f70 646f  "] = False.__pdo
-00008500: 635f 5f5b 2254 7261 6e73 666f 726d 2e66  c__["Transform.f
-00008510: 225d 203d 2046 616c 7365 0a0a 0a63 6c61  "] = False...cla
-00008520: 7373 2047 7261 7068 6963 7353 7479 6c65  ss GraphicsStyle
-00008530: 3a0a 2020 2020 2222 220a 2020 2020 4120  :.    """.    A 
-00008540: 636c 6173 7320 7265 7072 6573 656e 7469  class representi
-00008550: 6e67 2076 6172 696f 7573 2073 7479 6c65  ng various style
-00008560: 2061 7474 7269 6275 7465 7320 7468 6174   attributes that
-00008570: 2064 6574 6572 6d69 6e65 2064 7261 7769   determine drawi
-00008580: 6e67 2061 7070 6561 7261 6e63 652e 0a0a  ng appearance...
-00008590: 2020 2020 5468 6973 2063 6c61 7373 2075      This class u
-000085a0: 7365 7320 7468 6520 636f 6e76 656e 7469  ses the conventi
-000085b0: 6f6e 2074 6861 7420 7468 6520 676c 6f62  on that the glob
-000085c0: 616c 2050 7974 686f 6e20 7369 6e67 6c65  al Python single
-000085d0: 746f 6e20 656c 6c69 7073 6973 2028 602e  ton ellipsis (`.
-000085e0: 2e2e 6029 2069 730a 2020 2020 6578 636c  ..`) is.    excl
-000085f0: 7573 6976 656c 7920 7573 6564 2074 6f20  usively used to 
-00008600: 7265 7072 6573 656e 7420 7661 6c75 6573  represent values
-00008610: 2074 6861 7420 6172 6520 696e 6865 7269   that are inheri
-00008620: 7465 6420 6672 6f6d 2074 6865 2070 6172  ted from the par
-00008630: 656e 7420 7374 796c 652e 2054 6869 730a  ent style. This.
-00008640: 2020 2020 6973 2074 6f20 6469 7361 6d62      is to disamb
-00008650: 6967 7561 7465 2074 6865 2076 616c 7565  iguate the value
-00008660: 204e 6f6e 6520 7768 6963 6820 6973 2075   None which is u
-00008670: 7365 6420 666f 7220 7365 7665 7261 6c20  sed for several 
-00008680: 7661 6c75 6573 2074 6f20 7369 676e 616c  values to signal
-00008690: 2061 6e0a 2020 2020 6578 706c 6963 6974   an.    explicit
-000086a0: 6c79 2064 6973 6162 6c65 6420 7374 796c  ly disabled styl
-000086b0: 652e 2041 6e20 6578 616d 706c 6520 6f66  e. An example of
-000086c0: 2074 6869 7320 6973 2074 6865 2066 696c   this is the fil
-000086d0: 6c2f 7374 726f 6b65 2063 6f6c 6f72 2073  l/stroke color s
-000086e0: 7479 6c65 732c 0a20 2020 2077 6869 6368  tyles,.    which
-000086f0: 2075 7365 204e 6f6e 6520 6173 2068 696e   use None as hin
-00008700: 7473 2074 6f20 7468 6520 6175 746f 2070  ts to the auto p
-00008710: 6169 6e74 2073 7479 6c65 2064 6574 6563  aint style detec
-00008720: 7469 6f6e 2063 6f64 652e 0a20 2020 2022  tion code..    "
-00008730: 2222 0a0a 2020 2020 494e 4845 5249 5420  ""..    INHERIT 
-00008740: 3d20 2e2e 2e0a 2020 2020 2222 2253 696e  = ....    """Sin
-00008750: 676c 6574 6f6e 2073 7065 6369 6679 696e  gleton specifyin
-00008760: 6720 6120 7374 796c 6520 7061 7261 6d65  g a style parame
-00008770: 7465 7220 7368 6f75 6c64 2062 6520 696e  ter should be in
-00008780: 6865 7269 7465 6420 6672 6f6d 2074 6865  herited from the
-00008790: 2070 6172 656e 7420 636f 6e74 6578 742e   parent context.
-000087a0: 2222 220a 0a20 2020 2023 206f 7264 6572  """..    # order
-000087b0: 2069 7320 6265 2069 6d70 6f72 7461 6e74   is be important
-000087c0: 2068 6572 6520 6265 6361 7573 6520 736f   here because so
-000087d0: 6d65 206f 6620 7468 6573 6520 7072 6f70  me of these prop
-000087e0: 6572 7469 6573 2061 7265 2065 6e74 616e  erties are entan
-000087f0: 676c 6564 2c20 652e 672e 0a20 2020 2023  gled, e.g..    #
-00008800: 2066 696c 6c5f 636f 6c6f 7220 616e 6420   fill_color and 
-00008810: 6669 6c6c 5f6f 7061 6369 7479 0a20 2020  fill_opacity.   
-00008820: 204d 4552 4745 5f50 524f 5045 5254 4945   MERGE_PROPERTIE
-00008830: 5320 3d20 280a 2020 2020 2020 2020 2270  S = (.        "p
-00008840: 6169 6e74 5f72 756c 6522 2c0a 2020 2020  aint_rule",.    
-00008850: 2020 2020 2261 6c6c 6f77 5f74 7261 6e73      "allow_trans
-00008860: 7061 7265 6e63 7922 2c0a 2020 2020 2020  parency",.      
-00008870: 2020 2261 7574 6f5f 636c 6f73 6522 2c0a    "auto_close",.
-00008880: 2020 2020 2020 2020 2269 6e74 6572 7365          "interse
-00008890: 6374 696f 6e5f 7275 6c65 222c 0a20 2020  ction_rule",.   
-000088a0: 2020 2020 2022 6669 6c6c 5f63 6f6c 6f72       "fill_color
-000088b0: 222c 0a20 2020 2020 2020 2022 6669 6c6c  ",.        "fill
-000088c0: 5f6f 7061 6369 7479 222c 0a20 2020 2020  _opacity",.     
-000088d0: 2020 2022 7374 726f 6b65 5f63 6f6c 6f72     "stroke_color
-000088e0: 222c 0a20 2020 2020 2020 2022 7374 726f  ",.        "stro
-000088f0: 6b65 5f6f 7061 6369 7479 222c 0a20 2020  ke_opacity",.   
-00008900: 2020 2020 2022 626c 656e 645f 6d6f 6465       "blend_mode
-00008910: 222c 0a20 2020 2020 2020 2022 7374 726f  ",.        "stro
-00008920: 6b65 5f77 6964 7468 222c 0a20 2020 2020  ke_width",.     
-00008930: 2020 2022 7374 726f 6b65 5f63 6170 5f73     "stroke_cap_s
-00008940: 7479 6c65 222c 0a20 2020 2020 2020 2022  tyle",.        "
-00008950: 7374 726f 6b65 5f6a 6f69 6e5f 7374 796c  stroke_join_styl
-00008960: 6522 2c0a 2020 2020 2020 2020 2273 7472  e",.        "str
-00008970: 6f6b 655f 6d69 7465 725f 6c69 6d69 7422  oke_miter_limit"
-00008980: 2c0a 2020 2020 2020 2020 2273 7472 6f6b  ,.        "strok
-00008990: 655f 6461 7368 5f70 6174 7465 726e 222c  e_dash_pattern",
-000089a0: 0a20 2020 2020 2020 2022 7374 726f 6b65  .        "stroke
-000089b0: 5f64 6173 685f 7068 6173 6522 2c0a 2020  _dash_phase",.  
-000089c0: 2020 290a 2020 2020 2222 2241 6e20 6f72    ).    """An or
-000089d0: 6465 7265 6420 636f 6c6c 6563 7469 6f6e  dered collection
-000089e0: 206f 6620 7072 6f70 6572 7469 6573 2074   of properties t
-000089f0: 6f20 7573 6520 7768 656e 206d 6572 6769  o use when mergi
-00008a00: 6e67 2074 776f 2047 7261 7068 6963 7353  ng two GraphicsS
-00008a10: 7479 6c65 732e 2222 220a 0a20 2020 2054  tyles."""..    T
-00008a20: 5241 4e53 5041 5245 4e43 595f 4b45 5953  RANSPARENCY_KEYS
-00008a30: 203d 2028 0a20 2020 2020 2020 2050 4446   = (.        PDF
-00008a40: 5374 796c 654b 6579 732e 4649 4c4c 5f41  StyleKeys.FILL_A
-00008a50: 4c50 4841 2e76 616c 7565 2c0a 2020 2020  LPHA.value,.    
-00008a60: 2020 2020 5044 4653 7479 6c65 4b65 7973      PDFStyleKeys
-00008a70: 2e53 5452 4f4b 455f 414c 5048 412e 7661  .STROKE_ALPHA.va
-00008a80: 6c75 652c 0a20 2020 2020 2020 2050 4446  lue,.        PDF
-00008a90: 5374 796c 654b 6579 732e 424c 454e 445f  StyleKeys.BLEND_
-00008aa0: 4d4f 4445 2e76 616c 7565 2c0a 2020 2020  MODE.value,.    
-00008ab0: 290a 2020 2020 2222 2241 6e20 6f72 6465  ).    """An orde
-00008ac0: 7265 6420 636f 6c6c 6563 7469 6f6e 206f  red collection o
-00008ad0: 6620 6174 7472 6962 7574 6573 206e 6f74  f attributes not
-00008ae0: 2074 6f20 656d 6974 2069 6e20 6e6f 2074   to emit in no t
-00008af0: 7261 6e73 7061 7265 6e63 7920 6d6f 6465  ransparency mode
-00008b00: 2e22 2222 0a0a 2020 2020 5044 465f 5354  ."""..    PDF_ST
-00008b10: 594c 455f 4b45 5953 203d 2028 0a20 2020  YLE_KEYS = (.   
-00008b20: 2020 2020 202a 286b 2e76 616c 7565 2066       *(k.value f
-00008b30: 6f72 206b 2069 6e20 5044 4653 7479 6c65  or k in PDFStyle
-00008b40: 4b65 7973 2069 6620 6b20 6973 206e 6f74  Keys if k is not
-00008b50: 2050 4446 5374 796c 654b 6579 732e 5354   PDFStyleKeys.ST
-00008b60: 524f 4b45 5f44 4153 485f 5041 5454 4552  ROKE_DASH_PATTER
-00008b70: 4e29 2c0a 2020 2020 290a 2020 2020 2222  N),.    ).    ""
-00008b80: 2241 6e20 6f72 6465 7265 6420 636f 6c6c  "An ordered coll
-00008b90: 6563 7469 6f6e 206f 6620 6b65 7973 2074  ection of keys t
-00008ba0: 6f20 6469 7265 6374 6c79 2065 6d69 7420  o directly emit 
-00008bb0: 7768 656e 2073 6572 6961 6c69 7a69 6e67  when serializing
-00008bc0: 2074 6865 2073 7479 6c65 2e22 2222 0a0a   the style."""..
-00008bd0: 2020 2020 5f50 4149 4e54 5f52 554c 455f      _PAINT_RULE_
-00008be0: 4c4f 4f4b 5550 203d 207b 0a20 2020 2020  LOOKUP = {.     
-00008bf0: 2020 2066 726f 7a65 6e73 6574 287b 7d29     frozenset({})
-00008c00: 3a20 5061 7468 5061 696e 7452 756c 652e  : PathPaintRule.
-00008c10: 444f 4e54 5f50 4149 4e54 2c0a 2020 2020  DONT_PAINT,.    
-00008c20: 2020 2020 6672 6f7a 656e 7365 7428 7b22      frozenset({"
-00008c30: 7374 726f 6b65 227d 293a 2050 6174 6850  stroke"}): PathP
-00008c40: 6169 6e74 5275 6c65 2e53 5452 4f4b 452c  aintRule.STROKE,
-00008c50: 0a20 2020 2020 2020 2066 726f 7a65 6e73  .        frozens
-00008c60: 6574 287b 2266 696c 6c22 2c20 496e 7465  et({"fill", Inte
-00008c70: 7273 6563 7469 6f6e 5275 6c65 2e4e 4f4e  rsectionRule.NON
-00008c80: 5a45 524f 7d29 3a20 5061 7468 5061 696e  ZERO}): PathPain
-00008c90: 7452 756c 652e 4649 4c4c 5f4e 4f4e 5a45  tRule.FILL_NONZE
-00008ca0: 524f 2c0a 2020 2020 2020 2020 6672 6f7a  RO,.        froz
-00008cb0: 656e 7365 7428 7b22 6669 6c6c 222c 2049  enset({"fill", I
-00008cc0: 6e74 6572 7365 6374 696f 6e52 756c 652e  ntersectionRule.
-00008cd0: 4556 454e 4f44 447d 293a 2050 6174 6850  EVENODD}): PathP
-00008ce0: 6169 6e74 5275 6c65 2e46 494c 4c5f 4556  aintRule.FILL_EV
-00008cf0: 454e 4f44 442c 0a20 2020 2020 2020 2066  ENODD,.        f
-00008d00: 726f 7a65 6e73 6574 280a 2020 2020 2020  rozenset(.      
-00008d10: 2020 2020 2020 7b22 7374 726f 6b65 222c        {"stroke",
-00008d20: 2022 6669 6c6c 222c 2049 6e74 6572 7365   "fill", Interse
-00008d30: 6374 696f 6e52 756c 652e 4e4f 4e5a 4552  ctionRule.NONZER
-00008d40: 4f7d 0a20 2020 2020 2020 2029 3a20 5061  O}.        ): Pa
-00008d50: 7468 5061 696e 7452 756c 652e 5354 524f  thPaintRule.STRO
-00008d60: 4b45 5f46 494c 4c5f 4e4f 4e5a 4552 4f2c  KE_FILL_NONZERO,
-00008d70: 0a20 2020 2020 2020 2066 726f 7a65 6e73  .        frozens
-00008d80: 6574 280a 2020 2020 2020 2020 2020 2020  et(.            
-00008d90: 7b22 7374 726f 6b65 222c 2022 6669 6c6c  {"stroke", "fill
-00008da0: 222c 2049 6e74 6572 7365 6374 696f 6e52  ", IntersectionR
-00008db0: 756c 652e 4556 454e 4f44 447d 0a20 2020  ule.EVENODD}.   
-00008dc0: 2020 2020 2029 3a20 5061 7468 5061 696e       ): PathPain
-00008dd0: 7452 756c 652e 5354 524f 4b45 5f46 494c  tRule.STROKE_FIL
-00008de0: 4c5f 4556 454e 4f44 442c 0a20 2020 207d  L_EVENODD,.    }
-00008df0: 0a20 2020 2022 2222 4120 6469 6374 696f  .    """A dictio
-00008e00: 6e61 7279 2066 6f72 2072 6573 6f6c 7669  nary for resolvi
-00008e10: 6e67 2060 5061 7468 5061 696e 7452 756c  ng `PathPaintRul
-00008e20: 652e 4155 544f 6022 2222 0a0a 2020 2020  e.AUTO`"""..    
-00008e30: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
-00008e40: 2064 6566 206d 6572 6765 2863 6c73 2c20   def merge(cls, 
-00008e50: 7061 7265 6e74 2c20 6368 696c 6429 3a0a  parent, child):.
-00008e60: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00008e70: 2020 2020 4d65 7267 6520 7061 7265 6e74      Merge parent
-00008e80: 2061 6e64 2063 6869 6c64 2069 6e74 6f20   and child into 
-00008e90: 6120 7369 6e67 6c65 2047 7261 7068 6963  a single Graphic
-00008ea0: 7353 7479 6c65 2e0a 0a20 2020 2020 2020  sStyle...       
-00008eb0: 2054 6865 2072 6573 756c 7420 636f 6e74   The result cont
-00008ec0: 6169 6e73 2074 6865 2070 726f 7065 7274  ains the propert
-00008ed0: 6965 7320 6f66 2074 6865 2070 6172 656e  ies of the paren
-00008ee0: 7420 6173 206f 7665 7272 6964 6465 6e20  t as overridden 
-00008ef0: 6279 2061 6e79 2070 726f 7065 7274 6965  by any propertie
-00008f00: 730a 2020 2020 2020 2020 6578 706c 6963  s.        explic
-00008f10: 6974 6c79 2073 6574 206f 6e20 7468 6520  itly set on the 
-00008f20: 6368 696c 642e 2049 6620 626f 7468 2074  child. If both t
-00008f30: 6865 2070 6172 656e 7420 616e 6420 7468  he parent and th
-00008f40: 6520 6368 696c 6420 7370 6563 6966 7920  e child specify 
-00008f50: 746f 0a20 2020 2020 2020 2069 6e68 6572  to.        inher
-00008f60: 6974 2061 2067 6976 656e 2070 726f 7065  it a given prope
-00008f70: 7274 792c 2074 6861 7420 7072 6f70 6572  rty, that proper
-00008f80: 7479 2077 696c 6c20 7072 6573 6572 7665  ty will preserve
-00008f90: 2074 6865 2069 6e68 6572 6974 2076 616c   the inherit val
-00008fa0: 7565 2e0a 2020 2020 2020 2020 2222 220a  ue..        """.
-00008fb0: 2020 2020 2020 2020 6e65 7720 3d20 636c          new = cl
-00008fc0: 7328 290a 2020 2020 2020 2020 666f 7220  s().        for 
-00008fd0: 7072 6f70 2069 6e20 636c 732e 4d45 5247  prop in cls.MERG
-00008fe0: 455f 5052 4f50 4552 5449 4553 3a0a 2020  E_PROPERTIES:.  
-00008ff0: 2020 2020 2020 2020 2020 6376 616c 203d            cval =
-00009000: 2067 6574 6174 7472 2863 6869 6c64 2c20   getattr(child, 
-00009010: 7072 6f70 290a 2020 2020 2020 2020 2020  prop).          
-00009020: 2020 6966 2063 7661 6c20 6973 2063 6c73    if cval is cls
-00009030: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
-00009040: 2020 2020 2020 2020 2020 7365 7461 7474            setatt
-00009050: 7228 6e65 772c 2070 726f 702c 2067 6574  r(new, prop, get
-00009060: 6174 7472 2870 6172 656e 742c 2070 726f  attr(parent, pro
-00009070: 7029 290a 2020 2020 2020 2020 2020 2020  p)).            
-00009080: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00009090: 2020 2020 2020 7365 7461 7474 7228 6e65        setattr(ne
-000090a0: 772c 2070 726f 702c 2063 7661 6c29 0a0a  w, prop, cval)..
-000090b0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000090c0: 6577 0a0a 2020 2020 6465 6620 5f5f 696e  ew..    def __in
-000090d0: 6974 5f5f 2873 656c 6629 3a0a 2020 2020  it__(self):.    
-000090e0: 2020 2020 7365 6c66 2e61 6c6c 6f77 5f74      self.allow_t
-000090f0: 7261 6e73 7061 7265 6e63 7920 3d20 7365  ransparency = se
-00009100: 6c66 2e49 4e48 4552 4954 0a20 2020 2020  lf.INHERIT.     
-00009110: 2020 2073 656c 662e 7061 696e 745f 7275     self.paint_ru
-00009120: 6c65 203d 2073 656c 662e 494e 4845 5249  le = self.INHERI
-00009130: 540a 2020 2020 2020 2020 7365 6c66 2e61  T.        self.a
-00009140: 7574 6f5f 636c 6f73 6520 3d20 7365 6c66  uto_close = self
-00009150: 2e49 4e48 4552 4954 0a20 2020 2020 2020  .INHERIT.       
-00009160: 2073 656c 662e 696e 7465 7273 6563 7469   self.intersecti
-00009170: 6f6e 5f72 756c 6520 3d20 7365 6c66 2e49  on_rule = self.I
-00009180: 4e48 4552 4954 0a20 2020 2020 2020 2073  NHERIT.        s
-00009190: 656c 662e 6669 6c6c 5f63 6f6c 6f72 203d  elf.fill_color =
-000091a0: 2073 656c 662e 494e 4845 5249 540a 2020   self.INHERIT.  
-000091b0: 2020 2020 2020 7365 6c66 2e66 696c 6c5f        self.fill_
-000091c0: 6f70 6163 6974 7920 3d20 7365 6c66 2e49  opacity = self.I
-000091d0: 4e48 4552 4954 0a20 2020 2020 2020 2073  NHERIT.        s
-000091e0: 656c 662e 7374 726f 6b65 5f63 6f6c 6f72  elf.stroke_color
-000091f0: 203d 2073 656c 662e 494e 4845 5249 540a   = self.INHERIT.
-00009200: 2020 2020 2020 2020 7365 6c66 2e73 7472          self.str
-00009210: 6f6b 655f 6f70 6163 6974 7920 3d20 7365  oke_opacity = se
-00009220: 6c66 2e49 4e48 4552 4954 0a20 2020 2020  lf.INHERIT.     
-00009230: 2020 2073 656c 662e 626c 656e 645f 6d6f     self.blend_mo
-00009240: 6465 203d 2073 656c 662e 494e 4845 5249  de = self.INHERI
-00009250: 540a 2020 2020 2020 2020 7365 6c66 2e73  T.        self.s
-00009260: 7472 6f6b 655f 7769 6474 6820 3d20 7365  troke_width = se
-00009270: 6c66 2e49 4e48 4552 4954 0a20 2020 2020  lf.INHERIT.     
-00009280: 2020 2073 656c 662e 7374 726f 6b65 5f63     self.stroke_c
-00009290: 6170 5f73 7479 6c65 203d 2073 656c 662e  ap_style = self.
-000092a0: 494e 4845 5249 540a 2020 2020 2020 2020  INHERIT.        
-000092b0: 7365 6c66 2e73 7472 6f6b 655f 6a6f 696e  self.stroke_join
-000092c0: 5f73 7479 6c65 203d 2073 656c 662e 494e  _style = self.IN
-000092d0: 4845 5249 540a 2020 2020 2020 2020 7365  HERIT.        se
-000092e0: 6c66 2e73 7472 6f6b 655f 6d69 7465 725f  lf.stroke_miter_
-000092f0: 6c69 6d69 7420 3d20 7365 6c66 2e49 4e48  limit = self.INH
-00009300: 4552 4954 0a20 2020 2020 2020 2073 656c  ERIT.        sel
-00009310: 662e 7374 726f 6b65 5f64 6173 685f 7061  f.stroke_dash_pa
-00009320: 7474 6572 6e20 3d20 7365 6c66 2e49 4e48  ttern = self.INH
-00009330: 4552 4954 0a20 2020 2020 2020 2073 656c  ERIT.        sel
-00009340: 662e 7374 726f 6b65 5f64 6173 685f 7068  f.stroke_dash_ph
-00009350: 6173 6520 3d20 7365 6c66 2e49 4e48 4552  ase = self.INHER
-00009360: 4954 0a0a 2020 2020 6465 6620 5f5f 6465  IT..    def __de
-00009370: 6570 636f 7079 5f5f 2873 656c 662c 206d  epcopy__(self, m
-00009380: 656d 6f29 3a0a 2020 2020 2020 2020 636f  emo):.        co
-00009390: 7069 6564 203d 2073 656c 662e 5f5f 636c  pied = self.__cl
-000093a0: 6173 735f 5f28 290a 2020 2020 2020 2020  ass__().        
-000093b0: 666f 7220 7072 6f70 2069 6e20 7365 6c66  for prop in self
-000093c0: 2e4d 4552 4745 5f50 524f 5045 5254 4945  .MERGE_PROPERTIE
-000093d0: 533a 0a20 2020 2020 2020 2020 2020 2073  S:.            s
-000093e0: 6574 6174 7472 2863 6f70 6965 642c 2070  etattr(copied, p
-000093f0: 726f 702c 2067 6574 6174 7472 2873 656c  rop, getattr(sel
-00009400: 662c 2070 726f 7029 290a 0a20 2020 2020  f, prop))..     
-00009410: 2020 2072 6574 7572 6e20 636f 7069 6564     return copied
-00009420: 0a0a 2020 2020 6465 6620 5f5f 7365 7461  ..    def __seta
-00009430: 7474 725f 5f28 7365 6c66 2c20 6e61 6d65  ttr__(self, name
-00009440: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
-00009450: 2020 6966 206e 6f74 2068 6173 6174 7472    if not hasattr
-00009460: 2873 656c 662e 5f5f 636c 6173 735f 5f2c  (self.__class__,
-00009470: 206e 616d 6529 3a0a 2020 2020 2020 2020   name):.        
-00009480: 2020 2020 7261 6973 6520 4174 7472 6962      raise Attrib
-00009490: 7574 6545 7272 6f72 280a 2020 2020 2020  uteError(.      
-000094a0: 2020 2020 2020 2020 2020 6627 7b73 656c            f'{sel
-000094b0: 662e 5f5f 636c 6173 735f 5f7d 2064 6f65  f.__class__} doe
-000094c0: 7320 6e6f 7420 6861 7665 2073 7479 6c65  s not have style
-000094d0: 2022 7b6e 616d 657d 2220 2861 2074 7970   "{name}" (a typ
-000094e0: 6f3f 2927 0a20 2020 2020 2020 2020 2020  o?)'.           
-000094f0: 2029 0a0a 2020 2020 2020 2020 7375 7065   )..        supe
-00009500: 7228 292e 5f5f 7365 7461 7474 725f 5f28  r().__setattr__(
-00009510: 6e61 6d65 2c20 7661 6c75 6529 0a0a 2020  name, value)..  
-00009520: 2020 2320 6174 2073 6f6d 6520 706f 696e    # at some poin
-00009530: 7420 6974 2070 726f 6261 626c 7920 6d61  t it probably ma
-00009540: 6b65 7320 7365 6e73 6520 746f 2074 7572  kes sense to tur
-00009550: 6e20 7468 6973 2069 6e74 6f20 6120 6765  n this into a ge
-00009560: 6e65 7261 6c20 636f 6d70 6c69 616e 6365  neral compliance
-00009570: 0a20 2020 2023 2070 726f 7065 7274 792c  .    # property,
-00009580: 2062 7574 2066 6f72 206e 6f77 2074 6869   but for now thi
-00009590: 7320 6973 2074 6865 2073 696d 706c 6520  s is the simple 
-000095a0: 6170 7072 6f61 6368 2e0a 2020 2020 4070  approach..    @p
-000095b0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-000095c0: 616c 6c6f 775f 7472 616e 7370 6172 656e  allow_transparen
-000095d0: 6379 2873 656c 6629 3a0a 2020 2020 2020  cy(self):.      
-000095e0: 2020 7265 7475 726e 2073 656c 662e 5f61    return self._a
-000095f0: 6c6c 6f77 5f74 7261 6e73 7061 7265 6e63  llow_transparenc
-00009600: 7920 2023 2070 796c 696e 743a 2064 6973  y  # pylint: dis
-00009610: 6162 6c65 3d6e 6f2d 6d65 6d62 6572 0a0a  able=no-member..
-00009620: 2020 2020 4061 6c6c 6f77 5f74 7261 6e73      @allow_trans
-00009630: 7061 7265 6e63 792e 7365 7474 6572 0a20  parency.setter. 
-00009640: 2020 2064 6566 2061 6c6c 6f77 5f74 7261     def allow_tra
-00009650: 6e73 7061 7265 6e63 7928 7365 6c66 2c20  nsparency(self, 
-00009660: 6e65 7729 3a0a 2020 2020 2020 2020 7265  new):.        re
-00009670: 7475 726e 2073 7570 6572 2829 2e5f 5f73  turn super().__s
-00009680: 6574 6174 7472 5f5f 2822 5f61 6c6c 6f77  etattr__("_allow
-00009690: 5f74 7261 6e73 7061 7265 6e63 7922 2c20  _transparency", 
-000096a0: 6e65 7729 0a0a 2020 2020 2320 4966 2074  new)..    # If t
-000096b0: 6865 7365 2061 7265 2075 7365 6420 696e  hese are used in
-000096c0: 2061 206e 6573 7465 6420 6772 6170 6869   a nested graphi
-000096d0: 6373 2063 6f6e 7465 7874 2069 6e73 6964  cs context insid
-000096e0: 6520 6f66 2061 2070 6169 6e74 696e 6720  e of a painting 
-000096f0: 7061 7468 0a20 2020 2023 206f 7065 7261  path.    # opera
-00009700: 7469 6f6e 2c20 7468 6579 2061 7265 206e  tion, they are n
-00009710: 6f2d 6f70 732e 2048 6f77 6576 6572 2c20  o-ops. However, 
-00009720: 7468 6579 2063 616e 2062 6520 7573 6564  they can be used
-00009730: 2066 6f72 206f 7574 6572 2047 7261 7068   for outer Graph
-00009740: 6963 7343 6f6e 7465 7874 730a 2020 2020  icsContexts.    
-00009750: 2320 7468 6174 2070 6169 6e74 696e 6720  # that painting 
-00009760: 7061 7468 7320 696e 6865 7269 7420 6672  paths inherit fr
-00009770: 6f6d 2e0a 2020 2020 4070 726f 7065 7274  om..    @propert
-00009780: 790a 2020 2020 6465 6620 7061 696e 745f  y.    def paint_
-00009790: 7275 6c65 2873 656c 6629 3a0a 2020 2020  rule(self):.    
-000097a0: 2020 2020 2222 2254 6865 2070 6169 6e74      """The paint
-000097b0: 2072 756c 6520 746f 2075 7365 2066 6f72   rule to use for
-000097c0: 2074 6869 7320 7061 7468 2f67 726f 7570   this path/group
-000097d0: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
-000097e0: 7572 6e20 7365 6c66 2e5f 7061 696e 745f  urn self._paint_
-000097f0: 7275 6c65 2020 2320 7079 6c69 6e74 3a20  rule  # pylint: 
-00009800: 6469 7361 626c 653d 6e6f 2d6d 656d 6265  disable=no-membe
-00009810: 720a 0a20 2020 2040 7061 696e 745f 7275  r..    @paint_ru
-00009820: 6c65 2e73 6574 7465 720a 2020 2020 6465  le.setter.    de
-00009830: 6620 7061 696e 745f 7275 6c65 2873 656c  f paint_rule(sel
-00009840: 662c 206e 6577 293a 0a20 2020 2020 2020  f, new):.       
-00009850: 2069 6620 6e65 7720 6973 204e 6f6e 653a   if new is None:
-00009860: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
-00009870: 6572 2829 2e5f 5f73 6574 6174 7472 5f5f  er().__setattr__
-00009880: 2822 5f70 6169 6e74 5f72 756c 6522 2c20  ("_paint_rule", 
-00009890: 5061 7468 5061 696e 7452 756c 652e 444f  PathPaintRule.DO
-000098a0: 4e54 5f50 4149 4e54 290a 2020 2020 2020  NT_PAINT).      
-000098b0: 2020 656c 6966 206e 6577 2069 7320 7365    elif new is se
-000098c0: 6c66 2e49 4e48 4552 4954 3a0a 2020 2020  lf.INHERIT:.    
-000098d0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-000098e0: 5f5f 7365 7461 7474 725f 5f28 225f 7061  __setattr__("_pa
-000098f0: 696e 745f 7275 6c65 222c 206e 6577 290a  int_rule", new).
-00009900: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00009910: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-00009920: 292e 5f5f 7365 7461 7474 725f 5f28 225f  ).__setattr__("_
-00009930: 7061 696e 745f 7275 6c65 222c 2050 6174  paint_rule", Pat
-00009940: 6850 6169 6e74 5275 6c65 2e63 6f65 7263  hPaintRule.coerc
-00009950: 6528 6e65 7729 290a 0a20 2020 2040 7072  e(new))..    @pr
-00009960: 6f70 6572 7479 0a20 2020 2064 6566 2061  operty.    def a
-00009970: 7574 6f5f 636c 6f73 6528 7365 6c66 293a  uto_close(self):
-00009980: 0a20 2020 2020 2020 2022 2222 4966 2054  .        """If T
-00009990: 7275 652c 2075 6e63 6c6f 7365 6420 7061  rue, unclosed pa
-000099a0: 7468 7320 7769 6c6c 2062 6520 6175 746f  ths will be auto
-000099b0: 6d61 7469 6361 6c6c 7920 636c 6f73 6564  matically closed
-000099c0: 2062 6566 6f72 6520 7374 726f 6b69 6e67   before stroking
-000099d0: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
-000099e0: 7572 6e20 7365 6c66 2e5f 6175 746f 5f63  urn self._auto_c
-000099f0: 6c6f 7365 2020 2320 7079 6c69 6e74 3a20  lose  # pylint: 
-00009a00: 6469 7361 626c 653d 6e6f 2d6d 656d 6265  disable=no-membe
-00009a10: 720a 0a20 2020 2040 6175 746f 5f63 6c6f  r..    @auto_clo
-00009a20: 7365 2e73 6574 7465 720a 2020 2020 6465  se.setter.    de
-00009a30: 6620 6175 746f 5f63 6c6f 7365 2873 656c  f auto_close(sel
-00009a40: 662c 206e 6577 293a 0a20 2020 2020 2020  f, new):.       
-00009a50: 2069 6620 6e65 7720 6e6f 7420 696e 207b   if new not in {
-00009a60: 5472 7565 2c20 4661 6c73 652c 2073 656c  True, False, sel
-00009a70: 662e 494e 4845 5249 547d 3a0a 2020 2020  f.INHERIT}:.    
-00009a80: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
-00009a90: 7065 4572 726f 7228 6622 6175 746f 5f63  peError(f"auto_c
-00009aa0: 6c6f 7365 206d 7573 7420 6265 2061 2062  lose must be a b
-00009ab0: 6f6f 6c20 6f72 2073 656c 662e 494e 4845  ool or self.INHE
-00009ac0: 5249 542c 206e 6f74 207b 6e65 777d 2229  RIT, not {new}")
-00009ad0: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-00009ae0: 292e 5f5f 7365 7461 7474 725f 5f28 225f  ).__setattr__("_
-00009af0: 6175 746f 5f63 6c6f 7365 222c 206e 6577  auto_close", new
-00009b00: 290a 0a20 2020 2040 7072 6f70 6572 7479  )..    @property
-00009b10: 0a20 2020 2064 6566 2069 6e74 6572 7365  .    def interse
-00009b20: 6374 696f 6e5f 7275 6c65 2873 656c 6629  ction_rule(self)
-00009b30: 3a0a 2020 2020 2020 2020 2222 2254 6865  :.        """The
-00009b40: 2064 6573 6972 6564 2069 6e74 6572 7365   desired interse
-00009b50: 6374 696f 6e20 7275 6c65 2066 6f72 2074  ction rule for t
-00009b60: 6869 7320 7061 7468 2f67 726f 7570 2e22  his path/group."
-00009b70: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00009b80: 6e20 7365 6c66 2e5f 696e 7465 7273 6563  n self._intersec
-00009b90: 7469 6f6e 5f72 756c 6520 2023 2070 796c  tion_rule  # pyl
-00009ba0: 696e 743a 2064 6973 6162 6c65 3d6e 6f2d  int: disable=no-
-00009bb0: 6d65 6d62 6572 0a0a 2020 2020 4069 6e74  member..    @int
-00009bc0: 6572 7365 6374 696f 6e5f 7275 6c65 2e73  ersection_rule.s
-00009bd0: 6574 7465 720a 2020 2020 6465 6620 696e  etter.    def in
-00009be0: 7465 7273 6563 7469 6f6e 5f72 756c 6528  tersection_rule(
-00009bf0: 7365 6c66 2c20 6e65 7729 3a0a 2020 2020  self, new):.    
-00009c00: 2020 2020 2320 646f 6e27 7420 616c 6c6f      # don't allo
-00009c10: 7720 4e6f 6e65 2066 6f72 2074 6869 7320  w None for this 
-00009c20: 6f6e 652e 0a20 2020 2020 2020 2069 6620  one..        if 
-00009c30: 6e65 7720 6973 2073 656c 662e 494e 4845  new is self.INHE
-00009c40: 5249 543a 0a20 2020 2020 2020 2020 2020  RIT:.           
-00009c50: 2073 7570 6572 2829 2e5f 5f73 6574 6174   super().__setat
-00009c60: 7472 5f5f 2822 5f69 6e74 6572 7365 6374  tr__("_intersect
-00009c70: 696f 6e5f 7275 6c65 222c 206e 6577 290a  ion_rule", new).
-00009c80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00009c90: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-00009ca0: 292e 5f5f 7365 7461 7474 725f 5f28 225f  ).__setattr__("_
-00009cb0: 696e 7465 7273 6563 7469 6f6e 5f72 756c  intersection_rul
-00009cc0: 6522 2c20 496e 7465 7273 6563 7469 6f6e  e", Intersection
-00009cd0: 5275 6c65 2e63 6f65 7263 6528 6e65 7729  Rule.coerce(new)
-00009ce0: 290a 0a20 2020 2040 7072 6f70 6572 7479  )..    @property
-00009cf0: 0a20 2020 2064 6566 2066 696c 6c5f 636f  .    def fill_co
-00009d00: 6c6f 7228 7365 6c66 293a 0a20 2020 2020  lor(self):.     
-00009d10: 2020 2022 2222 0a20 2020 2020 2020 2054     """.        T
-00009d20: 6865 2064 6573 6972 6564 2066 696c 6c20  he desired fill 
-00009d30: 636f 6c6f 7220 666f 7220 7468 6973 2070  color for this p
-00009d40: 6174 682f 6772 6f75 702e 0a0a 2020 2020  ath/group...    
-00009d50: 2020 2020 5768 656e 2073 6574 7469 6e67      When setting
-00009d60: 2074 6869 7320 7072 6f70 6572 7479 2c20   this property, 
-00009d70: 6966 2074 6865 2063 6f6c 6f72 2073 7065  if the color spe
-00009d80: 6369 6669 6573 2061 6e20 6f70 6163 6974  cifies an opacit
-00009d90: 7920 7661 6c75 652c 2074 6861 7420 7769  y value, that wi
-00009da0: 6c6c 0a20 2020 2020 2020 2062 6520 7573  ll.        be us
-00009db0: 6564 2074 6f20 7365 7420 7468 6520 6669  ed to set the fi
-00009dc0: 6c6c 5f6f 7061 6369 7479 2070 726f 7065  ll_opacity prope
-00009dd0: 7274 7920 6173 2077 656c 6c2e 0a20 2020  rty as well..   
-00009de0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00009df0: 2072 6574 7572 6e20 7365 6c66 2e5f 6669   return self._fi
-00009e00: 6c6c 5f63 6f6c 6f72 2020 2320 7079 6c69  ll_color  # pyli
-00009e10: 6e74 3a20 6469 7361 626c 653d 6e6f 2d6d  nt: disable=no-m
-00009e20: 656d 6265 720a 0a20 2020 2040 6669 6c6c  ember..    @fill
-00009e30: 5f63 6f6c 6f72 2e73 6574 7465 720a 2020  _color.setter.  
-00009e40: 2020 6465 6620 6669 6c6c 5f63 6f6c 6f72    def fill_color
-00009e50: 2873 656c 662c 2063 6f6c 6f72 293a 0a20  (self, color):. 
-00009e60: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00009e70: 616e 6365 2863 6f6c 6f72 2c20 7374 7229  ance(color, str)
-00009e80: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
-00009e90: 6c6f 7220 3d20 636f 6c6f 725f 6672 6f6d  lor = color_from
-00009ea0: 5f68 6578 5f73 7472 696e 6728 636f 6c6f  _hex_string(colo
-00009eb0: 7229 0a0a 2020 2020 2020 2020 6966 2069  r)..        if i
-00009ec0: 7369 6e73 7461 6e63 6528 636f 6c6f 722c  sinstance(color,
-00009ed0: 2028 4465 7669 6365 5247 422c 2044 6576   (DeviceRGB, Dev
-00009ee0: 6963 6547 7261 792c 2044 6576 6963 6543  iceGray, DeviceC
-00009ef0: 4d59 4b29 293a 0a20 2020 2020 2020 2020  MYK)):.         
-00009f00: 2020 2073 7570 6572 2829 2e5f 5f73 6574     super().__set
-00009f10: 6174 7472 5f5f 2822 5f66 696c 6c5f 636f  attr__("_fill_co
-00009f20: 6c6f 7222 2c20 636f 6c6f 7229 0a20 2020  lor", color).   
-00009f30: 2020 2020 2020 2020 2069 6620 636f 6c6f           if colo
-00009f40: 722e 6120 6973 206e 6f74 204e 6f6e 653a  r.a is not None:
-00009f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f60: 2073 656c 662e 6669 6c6c 5f6f 7061 6369   self.fill_opaci
-00009f70: 7479 203d 2063 6f6c 6f72 2e61 0a0a 2020  ty = color.a..  
-00009f80: 2020 2020 2020 656c 6966 2028 636f 6c6f        elif (colo
-00009f90: 7220 6973 204e 6f6e 6529 206f 7220 2863  r is None) or (c
-00009fa0: 6f6c 6f72 2069 7320 7365 6c66 2e49 4e48  olor is self.INH
-00009fb0: 4552 4954 293a 0a20 2020 2020 2020 2020  ERIT):.         
-00009fc0: 2020 2073 7570 6572 2829 2e5f 5f73 6574     super().__set
-00009fd0: 6174 7472 5f5f 2822 5f66 696c 6c5f 636f  attr__("_fill_co
-00009fe0: 6c6f 7222 2c20 636f 6c6f 7229 0a0a 2020  lor", color)..  
-00009ff0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000a000: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
-0000a010: 7065 4572 726f 7228 6622 7b63 6f6c 6f72  peError(f"{color
-0000a020: 7d20 646f 6573 6e27 7420 6c6f 6f6b 206c  } doesn't look l
-0000a030: 696b 6520 6120 6472 6177 696e 6720 636f  ike a drawing co
-0000a040: 6c6f 7222 290a 0a20 2020 2040 7072 6f70  lor")..    @prop
-0000a050: 6572 7479 0a20 2020 2064 6566 2066 696c  erty.    def fil
-0000a060: 6c5f 6f70 6163 6974 7928 7365 6c66 293a  l_opacity(self):
-0000a070: 0a20 2020 2020 2020 2022 2222 5468 6520  .        """The 
-0000a080: 6465 7369 7265 6420 6669 6c6c 206f 7061  desired fill opa
-0000a090: 6369 7479 2066 6f72 2074 6869 7320 7061  city for this pa
-0000a0a0: 7468 2f67 726f 7570 2e22 2222 0a20 2020  th/group.""".   
-0000a0b0: 2020 2020 2072 6574 7572 6e20 6765 7461       return geta
-0000a0c0: 7474 7228 7365 6c66 2c20 5044 4653 7479  ttr(self, PDFSty
-0000a0d0: 6c65 4b65 7973 2e46 494c 4c5f 414c 5048  leKeys.FILL_ALPH
-0000a0e0: 412e 7661 6c75 6529 0a0a 2020 2020 4066  A.value)..    @f
-0000a0f0: 696c 6c5f 6f70 6163 6974 792e 7365 7474  ill_opacity.sett
-0000a100: 6572 0a20 2020 2064 6566 2066 696c 6c5f  er.    def fill_
-0000a110: 6f70 6163 6974 7928 7365 6c66 2c20 6e65  opacity(self, ne
-0000a120: 7729 3a0a 2020 2020 2020 2020 6966 206e  w):.        if n
-0000a130: 6577 206e 6f74 2069 6e20 7b4e 6f6e 652c  ew not in {None,
-0000a140: 2073 656c 662e 494e 4845 5249 547d 3a0a   self.INHERIT}:.
-0000a150: 2020 2020 2020 2020 2020 2020 5f63 6865              _che
-0000a160: 636b 5f72 616e 6765 286e 6577 290a 0a20  ck_range(new).. 
-0000a170: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-0000a180: 5f73 6574 6174 7472 5f5f 2850 4446 5374  _setattr__(PDFSt
-0000a190: 796c 654b 6579 732e 4649 4c4c 5f41 4c50  yleKeys.FILL_ALP
-0000a1a0: 4841 2e76 616c 7565 2c20 6e65 7729 0a0a  HA.value, new)..
-0000a1b0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-0000a1c0: 2020 6465 6620 7374 726f 6b65 5f63 6f6c    def stroke_col
-0000a1d0: 6f72 2873 656c 6629 3a0a 2020 2020 2020  or(self):.      
-0000a1e0: 2020 2222 220a 2020 2020 2020 2020 5468    """.        Th
-0000a1f0: 6520 6465 7369 7265 6420 7374 726f 6b65  e desired stroke
-0000a200: 2063 6f6c 6f72 2066 6f72 2074 6869 7320   color for this 
-0000a210: 7061 7468 2f67 726f 7570 2e0a 0a20 2020  path/group...   
-0000a220: 2020 2020 2057 6865 6e20 7365 7474 696e       When settin
-0000a230: 6720 7468 6973 2070 726f 7065 7274 792c  g this property,
-0000a240: 2069 6620 7468 6520 636f 6c6f 7220 7370   if the color sp
-0000a250: 6563 6966 6965 7320 616e 206f 7061 6369  ecifies an opaci
-0000a260: 7479 2076 616c 7565 2c20 7468 6174 2077  ty value, that w
-0000a270: 696c 6c0a 2020 2020 2020 2020 6265 2075  ill.        be u
-0000a280: 7365 6420 746f 2073 6574 2074 6865 2066  sed to set the f
-0000a290: 696c 6c5f 6f70 6163 6974 7920 7072 6f70  ill_opacity prop
-0000a2a0: 6572 7479 2061 7320 7765 6c6c 2e0a 2020  erty as well..  
-0000a2b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000a2c0: 2020 7265 7475 726e 2073 656c 662e 5f73    return self._s
-0000a2d0: 7472 6f6b 655f 636f 6c6f 7220 2023 2070  troke_color  # p
-0000a2e0: 796c 696e 743a 2064 6973 6162 6c65 3d6e  ylint: disable=n
-0000a2f0: 6f2d 6d65 6d62 6572 0a0a 2020 2020 4073  o-member..    @s
-0000a300: 7472 6f6b 655f 636f 6c6f 722e 7365 7474  troke_color.sett
-0000a310: 6572 0a20 2020 2064 6566 2073 7472 6f6b  er.    def strok
-0000a320: 655f 636f 6c6f 7228 7365 6c66 2c20 636f  e_color(self, co
-0000a330: 6c6f 7229 3a0a 2020 2020 2020 2020 6966  lor):.        if
-0000a340: 2069 7369 6e73 7461 6e63 6528 636f 6c6f   isinstance(colo
-0000a350: 722c 2073 7472 293a 0a20 2020 2020 2020  r, str):.       
-0000a360: 2020 2020 2063 6f6c 6f72 203d 2063 6f6c       color = col
-0000a370: 6f72 5f66 726f 6d5f 6865 785f 7374 7269  or_from_hex_stri
-0000a380: 6e67 2863 6f6c 6f72 290a 0a20 2020 2020  ng(color)..     
-0000a390: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0000a3a0: 2863 6f6c 6f72 2c20 2844 6576 6963 6552  (color, (DeviceR
-0000a3b0: 4742 2c20 4465 7669 6365 4772 6179 2c20  GB, DeviceGray, 
-0000a3c0: 4465 7669 6365 434d 594b 2929 3a0a 2020  DeviceCMYK)):.  
-0000a3d0: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-0000a3e0: 292e 5f5f 7365 7461 7474 725f 5f28 225f  ).__setattr__("_
-0000a3f0: 7374 726f 6b65 5f63 6f6c 6f72 222c 2063  stroke_color", c
-0000a400: 6f6c 6f72 290a 2020 2020 2020 2020 2020  olor).          
-0000a410: 2020 6966 2063 6f6c 6f72 2e61 2069 7320    if color.a is 
-0000a420: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000a430: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-0000a440: 7472 6f6b 655f 6f70 6163 6974 7920 3d20  troke_opacity = 
-0000a450: 636f 6c6f 722e 610a 2020 2020 2020 2020  color.a.        
-0000a460: 2020 2020 6966 2073 656c 662e 7374 726f      if self.stro
-0000a470: 6b65 5f77 6964 7468 2069 7320 7365 6c66  ke_width is self
-0000a480: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
-0000a490: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-0000a4a0: 7472 6f6b 655f 7769 6474 6820 3d20 310a  troke_width = 1.
-0000a4b0: 0a20 2020 2020 2020 2065 6c69 6620 2863  .        elif (c
-0000a4c0: 6f6c 6f72 2069 7320 4e6f 6e65 2920 6f72  olor is None) or
-0000a4d0: 2028 636f 6c6f 7220 6973 2073 656c 662e   (color is self.
-0000a4e0: 494e 4845 5249 5429 3a0a 2020 2020 2020  INHERIT):.      
-0000a4f0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0000a500: 7365 7461 7474 725f 5f28 225f 7374 726f  setattr__("_stro
-0000a510: 6b65 5f63 6f6c 6f72 222c 2063 6f6c 6f72  ke_color", color
-0000a520: 290a 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-0000a530: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0000a540: 7365 2054 7970 6545 7272 6f72 2866 227b  se TypeError(f"{
-0000a550: 636f 6c6f 727d 2064 6f65 736e 2774 206c  color} doesn't l
-0000a560: 6f6f 6b20 6c69 6b65 2061 2064 7261 7769  ook like a drawi
-0000a570: 6e67 2063 6f6c 6f72 2229 0a0a 2020 2020  ng color")..    
-0000a580: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
-0000a590: 6620 7374 726f 6b65 5f6f 7061 6369 7479  f stroke_opacity
-0000a5a0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000a5b0: 2222 2254 6865 2064 6573 6972 6564 2073  """The desired s
-0000a5c0: 7472 6f6b 6520 6f70 6163 6974 7920 666f  troke opacity fo
-0000a5d0: 7220 7468 6973 2070 6174 682f 6772 6f75  r this path/grou
-0000a5e0: 702e 2222 220a 2020 2020 2020 2020 7265  p.""".        re
-0000a5f0: 7475 726e 2067 6574 6174 7472 2873 656c  turn getattr(sel
-0000a600: 662c 2050 4446 5374 796c 654b 6579 732e  f, PDFStyleKeys.
-0000a610: 5354 524f 4b45 5f41 4c50 4841 2e76 616c  STROKE_ALPHA.val
-0000a620: 7565 290a 0a20 2020 2040 7374 726f 6b65  ue)..    @stroke
-0000a630: 5f6f 7061 6369 7479 2e73 6574 7465 720a  _opacity.setter.
-0000a640: 2020 2020 6465 6620 7374 726f 6b65 5f6f      def stroke_o
-0000a650: 7061 6369 7479 2873 656c 662c 206e 6577  pacity(self, new
-0000a660: 293a 0a20 2020 2020 2020 2069 6620 6e65  ):.        if ne
-0000a670: 7720 6e6f 7420 696e 207b 4e6f 6e65 2c20  w not in {None, 
-0000a680: 7365 6c66 2e49 4e48 4552 4954 7d3a 0a20  self.INHERIT}:. 
-0000a690: 2020 2020 2020 2020 2020 205f 6368 6563             _chec
-0000a6a0: 6b5f 7261 6e67 6528 6e65 7729 0a0a 2020  k_range(new)..  
-0000a6b0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0000a6c0: 7365 7461 7474 725f 5f28 5044 4653 7479  setattr__(PDFSty
-0000a6d0: 6c65 4b65 7973 2e53 5452 4f4b 455f 414c  leKeys.STROKE_AL
-0000a6e0: 5048 412e 7661 6c75 652c 206e 6577 290a  PHA.value, new).
-0000a6f0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-0000a700: 2020 2064 6566 2062 6c65 6e64 5f6d 6f64     def blend_mod
-0000a710: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0000a720: 2022 2222 5468 6520 6465 7369 7265 6420   """The desired 
-0000a730: 626c 656e 6420 6d6f 6465 2066 6f72 2074  blend mode for t
-0000a740: 6869 7320 7061 7468 2f67 726f 7570 2e22  his path/group."
-0000a750: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-0000a760: 6e20 6765 7461 7474 7228 7365 6c66 2c20  n getattr(self, 
-0000a770: 5044 4653 7479 6c65 4b65 7973 2e42 4c45  PDFStyleKeys.BLE
-0000a780: 4e44 5f4d 4f44 452e 7661 6c75 6529 0a0a  ND_MODE.value)..
-0000a790: 2020 2020 4062 6c65 6e64 5f6d 6f64 652e      @blend_mode.
-0000a7a0: 7365 7474 6572 0a20 2020 2064 6566 2062  setter.    def b
-0000a7b0: 6c65 6e64 5f6d 6f64 6528 7365 6c66 2c20  lend_mode(self, 
-0000a7c0: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
-0000a7d0: 6966 2076 616c 7565 2069 7320 7365 6c66  if value is self
-0000a7e0: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
-0000a7f0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0000a800: 7365 7461 7474 725f 5f28 5044 4653 7479  setattr__(PDFSty
-0000a810: 6c65 4b65 7973 2e42 4c45 4e44 5f4d 4f44  leKeys.BLEND_MOD
-0000a820: 452e 7661 6c75 652c 2076 616c 7565 290a  E.value, value).
-0000a830: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0000a840: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-0000a850: 292e 5f5f 7365 7461 7474 725f 5f28 0a20  ).__setattr__(. 
-0000a860: 2020 2020 2020 2020 2020 2020 2020 2050                 P
-0000a870: 4446 5374 796c 654b 6579 732e 424c 454e  DFStyleKeys.BLEN
-0000a880: 445f 4d4f 4445 2e76 616c 7565 2c20 426c  D_MODE.value, Bl
-0000a890: 656e 644d 6f64 652e 636f 6572 6365 2876  endMode.coerce(v
-0000a8a0: 616c 7565 292e 7661 6c75 650a 2020 2020  alue).value.    
-0000a8b0: 2020 2020 2020 2020 290a 0a20 2020 2040          )..    @
-0000a8c0: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-0000a8d0: 2073 7472 6f6b 655f 7769 6474 6828 7365   stroke_width(se
-0000a8e0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-0000a8f0: 5468 6520 6465 7369 7265 6420 7374 726f  The desired stro
-0000a900: 6b65 2077 6964 7468 2066 6f72 2074 6869  ke width for thi
-0000a910: 7320 7061 7468 2f67 726f 7570 2e22 2222  s path/group."""
-0000a920: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000a930: 6765 7461 7474 7228 7365 6c66 2c20 5044  getattr(self, PD
-0000a940: 4653 7479 6c65 4b65 7973 2e53 5452 4f4b  FStyleKeys.STROK
-0000a950: 455f 5749 4454 482e 7661 6c75 6529 0a0a  E_WIDTH.value)..
-0000a960: 2020 2020 4073 7472 6f6b 655f 7769 6474      @stroke_widt
-0000a970: 682e 7365 7474 6572 0a20 2020 2064 6566  h.setter.    def
-0000a980: 2073 7472 6f6b 655f 7769 6474 6828 7365   stroke_width(se
-0000a990: 6c66 2c20 7769 6474 6829 3a0a 2020 2020  lf, width):.    
-0000a9a0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-0000a9b0: 7461 6e63 6528 0a20 2020 2020 2020 2020  tance(.         
-0000a9c0: 2020 2077 6964 7468 2c0a 2020 2020 2020     width,.      
-0000a9d0: 2020 2020 2020 2869 6e74 2c20 666c 6f61        (int, floa
-0000a9e0: 742c 2064 6563 696d 616c 2e44 6563 696d  t, decimal.Decim
-0000a9f0: 616c 2c20 7479 7065 284e 6f6e 6529 2c20  al, type(None), 
-0000aa00: 7479 7065 2873 656c 662e 494e 4845 5249  type(self.INHERI
-0000aa10: 5429 292c 0a20 2020 2020 2020 2029 3a0a  T)),.        ):.
-0000aa20: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0000aa30: 6520 5479 7065 4572 726f 7228 6622 7374  e TypeError(f"st
-0000aa40: 726f 6b65 5f77 6964 7468 206d 7573 7420  roke_width must 
-0000aa50: 6265 2061 206e 756d 6265 722c 206e 6f74  be a number, not
-0000aa60: 207b 7479 7065 2877 6964 7468 297d 2229   {type(width)}")
-0000aa70: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-0000aa80: 292e 5f5f 7365 7461 7474 725f 5f28 5044  ).__setattr__(PD
-0000aa90: 4653 7479 6c65 4b65 7973 2e53 5452 4f4b  FStyleKeys.STROK
-0000aaa0: 455f 5749 4454 482e 7661 6c75 652c 2077  E_WIDTH.value, w
-0000aab0: 6964 7468 290a 0a20 2020 2040 7072 6f70  idth)..    @prop
-0000aac0: 6572 7479 0a20 2020 2064 6566 2073 7472  erty.    def str
-0000aad0: 6f6b 655f 6361 705f 7374 796c 6528 7365  oke_cap_style(se
-0000aae0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-0000aaf0: 5468 6520 6465 7369 7265 6420 7374 726f  The desired stro
-0000ab00: 6b65 2063 6170 2073 7479 6c65 2066 6f72  ke cap style for
-0000ab10: 2074 6869 7320 7061 7468 2f67 726f 7570   this path/group
-0000ab20: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
-0000ab30: 7572 6e20 6765 7461 7474 7228 7365 6c66  urn getattr(self
-0000ab40: 2c20 5044 4653 7479 6c65 4b65 7973 2e53  , PDFStyleKeys.S
-0000ab50: 5452 4f4b 455f 4341 505f 5354 594c 452e  TROKE_CAP_STYLE.
-0000ab60: 7661 6c75 6529 0a0a 2020 2020 4073 7472  value)..    @str
-0000ab70: 6f6b 655f 6361 705f 7374 796c 652e 7365  oke_cap_style.se
-0000ab80: 7474 6572 0a20 2020 2064 6566 2073 7472  tter.    def str
-0000ab90: 6f6b 655f 6361 705f 7374 796c 6528 7365  oke_cap_style(se
-0000aba0: 6c66 2c20 7661 6c75 6529 3a0a 2020 2020  lf, value):.    
-0000abb0: 2020 2020 6966 2076 616c 7565 2069 7320      if value is 
-0000abc0: 7365 6c66 2e49 4e48 4552 4954 3a0a 2020  self.INHERIT:.  
-0000abd0: 2020 2020 2020 2020 2020 7375 7065 7228            super(
-0000abe0: 292e 5f5f 7365 7461 7474 725f 5f28 5044  ).__setattr__(PD
-0000abf0: 4653 7479 6c65 4b65 7973 2e53 5452 4f4b  FStyleKeys.STROK
-0000ac00: 455f 4341 505f 5354 594c 452e 7661 6c75  E_CAP_STYLE.valu
-0000ac10: 652c 2076 616c 7565 290a 2020 2020 2020  e, value).      
-0000ac20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000ac30: 2020 2020 7375 7065 7228 292e 5f5f 7365      super().__se
-0000ac40: 7461 7474 725f 5f28 0a20 2020 2020 2020  tattr__(.       
-0000ac50: 2020 2020 2020 2020 2050 4446 5374 796c           PDFStyl
-0000ac60: 654b 6579 732e 5354 524f 4b45 5f43 4150  eKeys.STROKE_CAP
-0000ac70: 5f53 5459 4c45 2e76 616c 7565 2c20 5374  _STYLE.value, St
-0000ac80: 726f 6b65 4361 7053 7479 6c65 2e63 6f65  rokeCapStyle.coe
-0000ac90: 7263 6528 7661 6c75 6529 0a20 2020 2020  rce(value).     
-0000aca0: 2020 2020 2020 2029 0a0a 2020 2020 4070         )..    @p
-0000acb0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-0000acc0: 7374 726f 6b65 5f6a 6f69 6e5f 7374 796c  stroke_join_styl
-0000acd0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0000ace0: 2022 2222 5468 6520 6465 7369 7265 6420   """The desired 
-0000acf0: 7374 726f 6b65 206a 6f69 6e20 7374 796c  stroke join styl
-0000ad00: 6520 666f 7220 7468 6973 2070 6174 682f  e for this path/
-0000ad10: 6772 6f75 702e 2222 220a 2020 2020 2020  group.""".      
-0000ad20: 2020 7265 7475 726e 2067 6574 6174 7472    return getattr
-0000ad30: 2873 656c 662c 2050 4446 5374 796c 654b  (self, PDFStyleK
-0000ad40: 6579 732e 5354 524f 4b45 5f4a 4f49 4e5f  eys.STROKE_JOIN_
-0000ad50: 5354 594c 452e 7661 6c75 6529 0a0a 2020  STYLE.value)..  
-0000ad60: 2020 4073 7472 6f6b 655f 6a6f 696e 5f73    @stroke_join_s
-0000ad70: 7479 6c65 2e73 6574 7465 720a 2020 2020  tyle.setter.    
-0000ad80: 6465 6620 7374 726f 6b65 5f6a 6f69 6e5f  def stroke_join_
-0000ad90: 7374 796c 6528 7365 6c66 2c20 7661 6c75  style(self, valu
-0000ada0: 6529 3a0a 2020 2020 2020 2020 6966 2076  e):.        if v
-0000adb0: 616c 7565 2069 7320 7365 6c66 2e49 4e48  alue is self.INH
-0000adc0: 4552 4954 3a0a 2020 2020 2020 2020 2020  ERIT:.          
-0000add0: 2020 7375 7065 7228 292e 5f5f 7365 7461    super().__seta
-0000ade0: 7474 725f 5f28 5044 4653 7479 6c65 4b65  ttr__(PDFStyleKe
-0000adf0: 7973 2e53 5452 4f4b 455f 4a4f 494e 5f53  ys.STROKE_JOIN_S
-0000ae00: 5459 4c45 2e76 616c 7565 2c20 7661 6c75  TYLE.value, valu
-0000ae10: 6529 0a20 2020 2020 2020 2065 6c73 653a  e).        else:
-0000ae20: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
-0000ae30: 6572 2829 2e5f 5f73 6574 6174 7472 5f5f  er().__setattr__
-0000ae40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000ae50: 2020 5044 4653 7479 6c65 4b65 7973 2e53    PDFStyleKeys.S
-0000ae60: 5452 4f4b 455f 4a4f 494e 5f53 5459 4c45  TROKE_JOIN_STYLE
-0000ae70: 2e76 616c 7565 2c0a 2020 2020 2020 2020  .value,.        
-0000ae80: 2020 2020 2020 2020 5374 726f 6b65 4a6f          StrokeJo
-0000ae90: 696e 5374 796c 652e 636f 6572 6365 2876  inStyle.coerce(v
-0000aea0: 616c 7565 292c 0a20 2020 2020 2020 2020  alue),.         
-0000aeb0: 2020 2029 0a0a 2020 2020 4070 726f 7065     )..    @prope
-0000aec0: 7274 790a 2020 2020 6465 6620 7374 726f  rty.    def stro
-0000aed0: 6b65 5f6d 6974 6572 5f6c 696d 6974 2873  ke_miter_limit(s
-0000aee0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0000aef0: 2254 6865 2064 6573 6972 6564 2073 7472  "The desired str
-0000af00: 6f6b 6520 6d69 7465 7220 6c69 6d69 7420  oke miter limit 
-0000af10: 666f 7220 7468 6973 2070 6174 682f 6772  for this path/gr
-0000af20: 6f75 702e 2222 220a 2020 2020 2020 2020  oup.""".        
-0000af30: 7265 7475 726e 2067 6574 6174 7472 2873  return getattr(s
-0000af40: 656c 662c 2050 4446 5374 796c 654b 6579  elf, PDFStyleKey
-0000af50: 732e 5354 524f 4b45 5f4d 4954 4552 5f4c  s.STROKE_MITER_L
-0000af60: 494d 4954 2e76 616c 7565 290a 0a20 2020  IMIT.value)..   
-0000af70: 2040 7374 726f 6b65 5f6d 6974 6572 5f6c   @stroke_miter_l
-0000af80: 696d 6974 2e73 6574 7465 720a 2020 2020  imit.setter.    
-0000af90: 6465 6620 7374 726f 6b65 5f6d 6974 6572  def stroke_miter
-0000afa0: 5f6c 696d 6974 2873 656c 662c 2076 616c  _limit(self, val
-0000afb0: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
-0000afc0: 2876 616c 7565 2069 7320 7365 6c66 2e49  (value is self.I
-0000afd0: 4e48 4552 4954 2920 6f72 2069 7369 6e73  NHERIT) or isins
-0000afe0: 7461 6e63 6528 7661 6c75 652c 204e 756d  tance(value, Num
-0000aff0: 6265 7243 6c61 7373 293a 0a20 2020 2020  berClass):.     
-0000b000: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-0000b010: 5f73 6574 6174 7472 5f5f 2850 4446 5374  _setattr__(PDFSt
-0000b020: 796c 654b 6579 732e 5354 524f 4b45 5f4d  yleKeys.STROKE_M
-0000b030: 4954 4552 5f4c 494d 4954 2e76 616c 7565  ITER_LIMIT.value
-0000b040: 2c20 7661 6c75 6529 0a20 2020 2020 2020  , value).       
-0000b050: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000b060: 2020 2072 6169 7365 2054 7970 6545 7272     raise TypeErr
-0000b070: 6f72 2866 227b 7661 6c75 657d 2069 7320  or(f"{value} is 
-0000b080: 6e6f 7420 6120 6e75 6d62 6572 2229 0a0a  not a number")..
-0000b090: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
-0000b0a0: 2020 6465 6620 7374 726f 6b65 5f64 6173    def stroke_das
-0000b0b0: 685f 7061 7474 6572 6e28 7365 6c66 293a  h_pattern(self):
-0000b0c0: 0a20 2020 2020 2020 2022 2222 5468 6520  .        """The 
-0000b0d0: 6465 7369 7265 6420 7374 726f 6b65 2064  desired stroke d
-0000b0e0: 6173 6820 7061 7474 6572 6e20 666f 7220  ash pattern for 
-0000b0f0: 7468 6973 2070 6174 682f 6772 6f75 702e  this path/group.
-0000b100: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
-0000b110: 726e 2073 656c 662e 5f73 7472 6f6b 655f  rn self._stroke_
-0000b120: 6461 7368 5f70 6174 7465 726e 2020 2320  dash_pattern  # 
-0000b130: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-0000b140: 6e6f 2d6d 656d 6265 720a 0a20 2020 2040  no-member..    @
-0000b150: 7374 726f 6b65 5f64 6173 685f 7061 7474  stroke_dash_patt
-0000b160: 6572 6e2e 7365 7474 6572 0a20 2020 2064  ern.setter.    d
-0000b170: 6566 2073 7472 6f6b 655f 6461 7368 5f70  ef stroke_dash_p
-0000b180: 6174 7465 726e 2873 656c 662c 2076 616c  attern(self, val
-0000b190: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
-0000b1a0: 7661 6c75 6520 6973 204e 6f6e 653a 0a20  value is None:. 
-0000b1b0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0000b1c0: 7420 3d20 2829 0a20 2020 2020 2020 2065  t = ().        e
-0000b1d0: 6c69 6620 7661 6c75 6520 6973 2073 656c  lif value is sel
-0000b1e0: 662e 494e 4845 5249 543a 0a20 2020 2020  f.INHERIT:.     
-0000b1f0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0000b200: 7661 6c75 650a 2020 2020 2020 2020 656c  value.        el
-0000b210: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-0000b220: 6c75 652c 204e 756d 6265 7243 6c61 7373  lue, NumberClass
-0000b230: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0000b240: 6573 756c 7420 3d20 2876 616c 7565 2c29  esult = (value,)
-0000b250: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0000b260: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-0000b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b280: 6163 6375 6d20 3d20 5b5d 0a20 2020 2020  accum = [].     
-0000b290: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0000b2a0: 7465 6d20 696e 2076 616c 7565 3a0a 2020  tem in value:.  
-0000b2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b2c0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-0000b2d0: 6e63 6528 6974 656d 2c20 4e75 6d62 6572  nce(item, Number
-0000b2e0: 436c 6173 7329 3a0a 2020 2020 2020 2020  Class):.        
-0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b300: 7261 6973 6520 5479 7065 4572 726f 7228  raise TypeError(
-0000b310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b320: 2020 2020 2020 2020 2020 2020 2066 2273               f"s
-0000b330: 7472 6f6b 655f 6461 7368 5f70 6174 7465  troke_dash_patte
-0000b340: 726e 207b 7661 6c75 657d 2073 6571 7565  rn {value} seque
-0000b350: 6e63 6520 6861 7320 6e6f 6e2d 6e75 6d65  nce has non-nume
-0000b360: 7269 6320 7661 6c75 6522 0a20 2020 2020  ric value".     
-0000b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b380: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0000b390: 2020 2020 2020 2020 2061 6363 756d 2e61           accum.a
-0000b3a0: 7070 656e 6428 6974 656d 290a 2020 2020  ppend(item).    
-0000b3b0: 2020 2020 2020 2020 6578 6365 7074 2054          except T
-0000b3c0: 7970 6545 7272 6f72 3a0a 2020 2020 2020  ypeError:.      
-0000b3d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000b3e0: 5479 7065 4572 726f 7228 0a20 2020 2020  TypeError(.     
-0000b3f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000b400: 2273 7472 6f6b 655f 6461 7368 5f70 6174  "stroke_dash_pat
-0000b410: 7465 726e 207b 7661 6c75 657d 206d 7573  tern {value} mus
-0000b420: 7420 6265 2061 206e 756d 6265 7220 6f72  t be a number or
-0000b430: 2073 6571 7565 6e63 6520 6f66 206e 756d   sequence of num
-0000b440: 6265 7273 220a 2020 2020 2020 2020 2020  bers".          
-0000b450: 2020 2020 2020 2920 6672 6f6d 204e 6f6e        ) from Non
-0000b460: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
-0000b470: 7375 6c74 203d 2028 2a61 6363 756d 2c29  sult = (*accum,)
-0000b480: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-0000b490: 292e 5f5f 7365 7461 7474 725f 5f28 225f  ).__setattr__("_
-0000b4a0: 7374 726f 6b65 5f64 6173 685f 7061 7474  stroke_dash_patt
-0000b4b0: 6572 6e22 2c20 7265 7375 6c74 290a 0a20  ern", result).. 
-0000b4c0: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-0000b4d0: 2064 6566 2073 7472 6f6b 655f 6461 7368   def stroke_dash
-0000b4e0: 5f70 6861 7365 2873 656c 6629 3a0a 2020  _phase(self):.  
-0000b4f0: 2020 2020 2020 2222 2254 6865 2064 6573        """The des
-0000b500: 6972 6564 2073 7472 6f6b 6520 6461 7368  ired stroke dash
-0000b510: 2070 6174 7465 726e 2070 6861 7365 206f   pattern phase o
-0000b520: 6666 7365 7420 666f 7220 7468 6973 2070  ffset for this p
-0000b530: 6174 682f 6772 6f75 702e 2222 220a 2020  ath/group.""".  
-0000b540: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000b550: 662e 5f73 7472 6f6b 655f 6461 7368 5f70  f._stroke_dash_p
-0000b560: 6861 7365 2020 2320 7079 6c69 6e74 3a20  hase  # pylint: 
-0000b570: 6469 7361 626c 653d 6e6f 2d6d 656d 6265  disable=no-membe
-0000b580: 720a 0a20 2020 2040 7374 726f 6b65 5f64  r..    @stroke_d
-0000b590: 6173 685f 7068 6173 652e 7365 7474 6572  ash_phase.setter
-0000b5a0: 0a20 2020 2064 6566 2073 7472 6f6b 655f  .    def stroke_
-0000b5b0: 6461 7368 5f70 6861 7365 2873 656c 662c  dash_phase(self,
-0000b5c0: 2076 616c 7565 293a 0a20 2020 2020 2020   value):.       
-0000b5d0: 2069 6620 7661 6c75 6520 6973 2073 656c   if value is sel
-0000b5e0: 662e 494e 4845 5249 5420 6f72 2069 7369  f.INHERIT or isi
-0000b5f0: 6e73 7461 6e63 6528 7661 6c75 652c 204e  nstance(value, N
-0000b600: 756d 6265 7243 6c61 7373 293a 0a20 2020  umberClass):.   
-0000b610: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000b620: 7375 7065 7228 292e 5f5f 7365 7461 7474  super().__setatt
-0000b630: 725f 5f28 225f 7374 726f 6b65 5f64 6173  r__("_stroke_das
-0000b640: 685f 7068 6173 6522 2c20 7661 6c75 6529  h_phase", value)
-0000b650: 0a0a 2020 2020 2020 2020 7261 6973 6520  ..        raise 
-0000b660: 5479 7065 4572 726f 7228 6622 7b76 616c  TypeError(f"{val
-0000b670: 7565 7d20 6973 6e27 7420 6120 6e75 6d62  ue} isn't a numb
-0000b680: 6572 206f 7220 4772 6170 6869 6373 5374  er or GraphicsSt
-0000b690: 796c 652e 494e 4845 5249 5422 290a 0a20  yle.INHERIT").. 
-0000b6a0: 2020 2064 6566 2073 6572 6961 6c69 7a65     def serialize
-0000b6b0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000b6c0: 2222 220a 2020 2020 2020 2020 436f 6e76  """.        Conv
-0000b6d0: 6572 7420 7468 6973 2073 7479 6c65 206f  ert this style o
-0000b6e0: 626a 6563 7420 746f 2061 2050 4446 2064  bject to a PDF d
-0000b6f0: 6963 7469 6f6e 6172 7920 7769 7468 2061  ictionary with a
-0000b700: 7070 726f 7072 6961 7465 2073 7479 6c65  ppropriate style
-0000b710: 206b 6579 732e 0a0a 2020 2020 2020 2020   keys...        
-0000b720: 4f6e 6c79 2065 7870 6c69 6369 746c 7920  Only explicitly 
-0000b730: 7370 6563 6966 6965 6420 7661 6c75 6573  specified values
-0000b740: 2061 7265 2065 6d69 7474 6564 2e0a 2020   are emitted..  
-0000b750: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000b760: 2020 7265 7375 6c74 203d 204f 7264 6572    result = Order
-0000b770: 6564 4469 6374 2829 0a0a 2020 2020 2020  edDict()..      
-0000b780: 2020 666f 7220 6b65 7920 696e 2073 656c    for key in sel
-0000b790: 662e 5044 465f 5354 594c 455f 4b45 5953  f.PDF_STYLE_KEYS
-0000b7a0: 3a0a 2020 2020 2020 2020 2020 2020 7661  :.            va
-0000b7b0: 6c75 6520 3d20 6765 7461 7474 7228 7365  lue = getattr(se
-0000b7c0: 6c66 2c20 6b65 792c 2073 656c 662e 494e  lf, key, self.IN
-0000b7d0: 4845 5249 5429 0a0a 2020 2020 2020 2020  HERIT)..        
-0000b7e0: 2020 2020 6966 2028 7661 6c75 6520 6973      if (value is
-0000b7f0: 206e 6f74 2073 656c 662e 494e 4845 5249   not self.INHERI
-0000b800: 5429 2061 6e64 2028 7661 6c75 6520 6973  T) and (value is
-0000b810: 206e 6f74 204e 6f6e 6529 3a0a 2020 2020   not None):.    
-0000b820: 2020 2020 2020 2020 2020 2020 2320 4e6f              # No
-0000b830: 6e65 2069 7320 7573 6564 2066 6f72 206f  ne is used for o
-0000b840: 7574 2d6f 662d 6261 6e64 2073 6967 6e61  ut-of-band signa
-0000b850: 6c69 6e67 206f 6e20 7468 6573 652c 2065  ling on these, e
-0000b860: 2e67 2e20 6120 7374 726f 6b65 5f77 6964  .g. a stroke_wid
-0000b870: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-0000b880: 2020 2023 206f 6620 4e6f 6e65 2064 6f65     # of None doe
-0000b890: 736e 2774 206e 6565 6420 746f 206c 616e  sn't need to lan
-0000b8a0: 6420 6865 7265 2062 6563 6175 7365 2069  d here because i
-0000b8b0: 7420 7369 676e 616c 7320 7468 650a 2020  t signals the.  
-0000b8c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000b8d0: 5061 7468 5061 696e 7452 756c 6520 6175  PathPaintRule au
-0000b8e0: 746f 2072 6573 6f6c 7574 696f 6e20 6f6e  to resolution on
-0000b8f0: 6c79 2e0a 2020 2020 2020 2020 2020 2020  ly..            
-0000b900: 2020 2020 7265 7375 6c74 5b6b 6579 5d20      result[key] 
-0000b910: 3d20 7661 6c75 650a 0a20 2020 2020 2020  = value..       
-0000b920: 2023 2054 6865 7265 2069 7320 6164 6469   # There is addi
-0000b930: 7469 6f6e 616c 206c 6f67 6963 2069 6e20  tional logic in 
-0000b940: 4772 6170 6869 6373 436f 6e74 6578 7420  GraphicsContext 
-0000b950: 746f 2065 6e73 7572 6520 7468 6174 2074  to ensure that t
-0000b960: 6869 7320 7769 6c6c 2077 6f72 6b0a 2020  his will work.  
-0000b970: 2020 2020 2020 6966 2028 7365 6c66 2e73        if (self.s
-0000b980: 7472 6f6b 655f 6461 7368 5f70 6174 7465  troke_dash_patte
-0000b990: 726e 2069 7320 6e6f 7420 7365 6c66 2e49  rn is not self.I
-0000b9a0: 4e48 4552 4954 2920 616e 6420 280a 2020  NHERIT) and (.  
-0000b9b0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-0000b9c0: 7472 6f6b 655f 6461 7368 5f70 6174 7465  troke_dash_patte
-0000b9d0: 726e 2069 7320 6e6f 7420 4e6f 6e65 0a20  rn is not None. 
-0000b9e0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-0000b9f0: 2020 2020 2020 7265 7375 6c74 5b50 4446        result[PDF
-0000ba00: 5374 796c 654b 6579 732e 5354 524f 4b45  StyleKeys.STROKE
-0000ba10: 5f44 4153 485f 5041 5454 4552 4e2e 7661  _DASH_PATTERN.va
-0000ba20: 6c75 655d 203d 205b 0a20 2020 2020 2020  lue] = [.       
-0000ba30: 2020 2020 2020 2020 2073 656c 662e 7374           self.st
-0000ba40: 726f 6b65 5f64 6173 685f 7061 7474 6572  roke_dash_patter
-0000ba50: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
-0000ba60: 2020 2073 656c 662e 7374 726f 6b65 5f64     self.stroke_d
-0000ba70: 6173 685f 7068 6173 652c 0a20 2020 2020  ash_phase,.     
-0000ba80: 2020 2020 2020 205d 0a0a 2020 2020 2020         ]..      
-0000ba90: 2020 6966 2073 656c 662e 616c 6c6f 775f    if self.allow_
-0000baa0: 7472 616e 7370 6172 656e 6379 2069 7320  transparency is 
-0000bab0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
-0000bac0: 2020 2066 6f72 206b 6579 2069 6e20 7365     for key in se
-0000bad0: 6c66 2e54 5241 4e53 5041 5245 4e43 595f  lf.TRANSPARENCY_
-0000bae0: 4b45 5953 3a0a 2020 2020 2020 2020 2020  KEYS:.          
-0000baf0: 2020 2020 2020 6966 206b 6579 2069 6e20        if key in 
-0000bb00: 7265 7375 6c74 3a0a 2020 2020 2020 2020  result:.        
-0000bb10: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
-0000bb20: 7265 7375 6c74 5b6b 6579 5d0a 0a20 2020  result[key]..   
-0000bb30: 2020 2020 2069 6620 7265 7375 6c74 3a0a       if result:.
-0000bb40: 2020 2020 2020 2020 2020 2020 2320 4f6e              # On
-0000bb50: 6c79 2069 6e73 6572 7420 7468 6973 206b  ly insert this k
-0000bb60: 6579 2069 6620 7468 6572 6520 6973 2061  ey if there is a
-0000bb70: 7420 6c65 6173 7420 6f6e 6520 6f74 6865  t least one othe
-0000bb80: 7220 6974 656d 2069 6e20 7468 6520 7265  r item in the re
-0000bb90: 7375 6c74 2073 6f0a 2020 2020 2020 2020  sult so.        
-0000bba0: 2020 2020 2320 7468 6174 2077 6520 646f      # that we do
-0000bbb0: 6e27 7420 6a75 6e6b 2075 7020 7468 6520  n't junk up the 
-0000bbc0: 6f75 7470 7574 2050 4446 2077 6974 6820  output PDF with 
-0000bbd0: 656d 7074 7920 4578 7447 5374 6174 6520  empty ExtGState 
-0000bbe0: 6469 6374 696f 6e61 7269 6573 2e0a 2020  dictionaries..  
-0000bbf0: 2020 2020 2020 2020 2020 7479 7065 5f6e            type_n
-0000bc00: 616d 6520 3d20 4e61 6d65 2822 5479 7065  ame = Name("Type
-0000bc10: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-0000bc20: 6573 756c 745b 7479 7065 5f6e 616d 655d  esult[type_name]
-0000bc30: 203d 204e 616d 6528 2245 7874 4753 7461   = Name("ExtGSta
-0000bc40: 7465 2229 0a20 2020 2020 2020 2020 2020  te").           
-0000bc50: 2072 6573 756c 742e 6d6f 7665 5f74 6f5f   result.move_to_
-0000bc60: 656e 6428 7479 7065 5f6e 616d 652c 206c  end(type_name, l
-0000bc70: 6173 743d 4661 6c73 6529 0a0a 2020 2020  ast=False)..    
-0000bc80: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0000bc90: 656e 6465 725f 7064 665f 7072 696d 6974  ender_pdf_primit
-0000bca0: 6976 6528 7265 7375 6c74 290a 0a20 2020  ive(result)..   
-0000bcb0: 2020 2020 2023 2074 6869 7320 7369 676e       # this sign
-0000bcc0: 616c 7320 746f 2074 6865 2047 7261 7068  als to the Graph
-0000bcd0: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
-0000bce0: 7374 7279 2074 6861 7420 7468 6572 6520  stry that there 
-0000bcf0: 6973 206e 6f74 6869 6e67 2074 6f0a 2020  is nothing to.  
-0000bd00: 2020 2020 2020 2320 7265 6769 7374 6572        # register
-0000bd10: 2e20 5468 6973 2069 7320 6120 7375 6363  . This is a succ
-0000bd20: 6573 7320 6361 7365 2e0a 2020 2020 2020  ess case..      
-0000bd30: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
-0000bd40: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-0000bd50: 6d65 6e74 0a20 2020 2064 6566 2072 6573  ment.    def res
-0000bd60: 6f6c 7665 5f70 6169 6e74 5f72 756c 6528  olve_paint_rule(
-0000bd70: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-0000bd80: 2222 0a20 2020 2020 2020 2052 6573 6f6c  "".        Resol
-0000bd90: 7665 2060 5061 7468 5061 696e 7452 756c  ve `PathPaintRul
-0000bda0: 652e 4155 544f 6020 746f 2061 2072 6561  e.AUTO` to a rea
-0000bdb0: 6c20 7061 696e 7420 7275 6c65 2062 6173  l paint rule bas
-0000bdc0: 6564 206f 6e20 7468 6973 2073 7479 6c65  ed on this style
-0000bdd0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0000bde0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-0000bdf0: 7468 6520 7265 736f 6c76 6564 2060 5061  the resolved `Pa
-0000be00: 7468 5061 696e 7452 756c 6560 2e0a 2020  thPaintRule`..  
-0000be10: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000be20: 2020 6966 2073 656c 662e 7061 696e 745f    if self.paint_
-0000be30: 7275 6c65 2069 7320 5061 7468 5061 696e  rule is PathPain
-0000be40: 7452 756c 652e 4155 544f 3a0a 2020 2020  tRule.AUTO:.    
-0000be50: 2020 2020 2020 2020 7761 6e74 203d 2073          want = s
-0000be60: 6574 2829 0a20 2020 2020 2020 2020 2020  et().           
-0000be70: 2069 6620 7365 6c66 2e73 7472 6f6b 655f   if self.stroke_
-0000be80: 7769 6474 6820 6973 206e 6f74 204e 6f6e  width is not Non
-0000be90: 6520 616e 6420 7365 6c66 2e73 7472 6f6b  e and self.strok
-0000bea0: 655f 636f 6c6f 7220 6973 206e 6f74 204e  e_color is not N
-0000beb0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000bec0: 2020 2020 2077 616e 742e 6164 6428 2273       want.add("s
-0000bed0: 7472 6f6b 6522 290a 2020 2020 2020 2020  troke").        
-0000bee0: 2020 2020 6966 2073 656c 662e 6669 6c6c      if self.fill
-0000bef0: 5f63 6f6c 6f72 2069 7320 6e6f 7420 4e6f  _color is not No
-0000bf00: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000bf10: 2020 2020 7761 6e74 2e61 6464 2822 6669      want.add("fi
-0000bf20: 6c6c 2229 0a20 2020 2020 2020 2020 2020  ll").           
-0000bf30: 2020 2020 2023 2077 6520 6e65 6564 2074       # we need t
-0000bf40: 6f20 6775 6172 616e 7465 6520 7468 6174  o guarantee that
-0000bf50: 2074 6869 7320 7769 6c6c 206e 6f74 2062   this will not b
-0000bf60: 6520 4e6f 6e65 2e20 5468 6520 6465 6661  e None. The defa
-0000bf70: 756c 7420 7769 6c6c 0a20 2020 2020 2020  ult will.       
-0000bf80: 2020 2020 2020 2020 2023 2062 6520 226e           # be "n
-0000bf90: 6f6e 7a65 726f 222e 0a20 2020 2020 2020  onzero"..       
-0000bfa0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-0000bfb0: 7365 6c66 2e69 6e74 6572 7365 6374 696f  self.intersectio
-0000bfc0: 6e5f 7275 6c65 2069 7320 6e6f 7420 4e6f  n_rule is not No
-0000bfd0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-0000bfe0: 2020 2077 616e 742e 6164 6428 7365 6c66     want.add(self
-0000bff0: 2e69 6e74 6572 7365 6374 696f 6e5f 7275  .intersection_ru
-0000c000: 6c65 290a 0a20 2020 2020 2020 2020 2020  le)..           
-0000c010: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0000c020: 2020 2020 2020 7275 6c65 203d 2073 656c        rule = sel
-0000c030: 662e 5f50 4149 4e54 5f52 554c 455f 4c4f  f._PAINT_RULE_LO
-0000c040: 4f4b 5550 5b66 726f 7a65 6e73 6574 2877  OKUP[frozenset(w
-0000c050: 616e 7429 5d0a 2020 2020 2020 2020 2020  ant)].          
-0000c060: 2020 6578 6365 7074 204b 6579 4572 726f    except KeyErro
-0000c070: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-0000c080: 2020 2023 2064 6f6e 2774 2064 6566 6175     # don't defau
-0000c090: 6c74 2074 6f20 444f 4e54 5f50 4149 4e54  lt to DONT_PAINT
-0000c0a0: 2062 6563 6175 7365 2074 6861 7427 7320   because that's 
-0000c0b0: 616c 6d6f 7374 2063 6572 7461 696e 6c79  almost certainly
-0000c0c0: 206e 6f74 2061 2076 6572 790a 2020 2020   not a very.    
-0000c0d0: 2020 2020 2020 2020 2020 2020 2320 676f              # go
-0000c0e0: 6f64 2064 6566 6175 6c74 2e0a 2020 2020  od default..    
-0000c0f0: 2020 2020 2020 2020 2020 2020 7275 6c65              rule
-0000c100: 203d 2050 6174 6850 6169 6e74 5275 6c65   = PathPaintRule
-0000c110: 2e53 5452 4f4b 455f 4649 4c4c 5f4e 4f4e  .STROKE_FILL_NON
-0000c120: 5a45 524f 0a0a 2020 2020 2020 2020 656c  ZERO..        el
-0000c130: 6966 2073 656c 662e 7061 696e 745f 7275  if self.paint_ru
-0000c140: 6c65 2069 7320 7365 6c66 2e49 4e48 4552  le is self.INHER
-0000c150: 4954 3a0a 2020 2020 2020 2020 2020 2020  IT:.            
-0000c160: 2320 7468 6973 2073 686f 756c 646e 2774  # this shouldn't
-0000c170: 2068 6170 7065 6e20 756e 6465 7220 6e6f   happen under no
-0000c180: 726d 616c 2075 7361 6765 2c20 6275 7420  rmal usage, but 
-0000c190: 6365 7274 6169 6e20 4150 4920 2861 6229  certain API (ab)
-0000c1a0: 7573 6520 6361 6e20 656e 640a 2020 2020  use can end.    
-0000c1b0: 2020 2020 2020 2020 2320 7570 2069 6e20          # up in 
-0000c1c0: 7468 6973 2073 7461 7465 2e20 5765 2063  this state. We c
-0000c1d0: 616e 2774 2072 6573 6f6c 7665 2061 6e79  an't resolve any
-0000c1e0: 7468 696e 6720 6d65 616e 696e 6766 756c  thing meaningful
-0000c1f0: 2c20 736f 2066 616c 6c20 6261 636b 2074  , so fall back t
-0000c200: 6f20 610a 2020 2020 2020 2020 2020 2020  o a.            
-0000c210: 2320 7361 6e65 283f 2920 6465 6661 756c  # sane(?) defaul
-0000c220: 742e 0a20 2020 2020 2020 2020 2020 2072  t..            r
-0000c230: 756c 6520 3d20 5061 7468 5061 696e 7452  ule = PathPaintR
-0000c240: 756c 652e 5354 524f 4b45 5f46 494c 4c5f  ule.STROKE_FILL_
-0000c250: 4e4f 4e5a 4552 4f0a 0a20 2020 2020 2020  NONZERO..       
-0000c260: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000c270: 2020 2072 756c 6520 3d20 7365 6c66 2e70     rule = self.p
-0000c280: 6169 6e74 5f72 756c 650a 0a20 2020 2020  aint_rule..     
-0000c290: 2020 2072 6574 7572 6e20 7275 6c65 0a0a     return rule..
-0000c2a0: 0a64 6566 205f 7265 6e64 6572 5f6d 6f76  .def _render_mov
-0000c2b0: 6528 7074 293a 0a20 2020 2072 6574 7572  e(pt):.    retur
-0000c2c0: 6e20 6622 7b70 742e 7265 6e64 6572 2829  n f"{pt.render()
-0000c2d0: 7d20 6d22 0a0a 0a64 6566 205f 7265 6e64  } m"...def _rend
-0000c2e0: 6572 5f6c 696e 6528 7074 293a 0a20 2020  er_line(pt):.   
-0000c2f0: 2072 6574 7572 6e20 6622 7b70 742e 7265   return f"{pt.re
-0000c300: 6e64 6572 2829 7d20 6c22 0a0a 0a64 6566  nder()} l"...def
-0000c310: 205f 7265 6e64 6572 5f63 7572 7665 2863   _render_curve(c
-0000c320: 7472 6c31 2c20 6374 726c 322c 2065 6e64  trl1, ctrl2, end
-0000c330: 293a 0a20 2020 2072 6574 7572 6e20 6622  ):.    return f"
-0000c340: 7b63 7472 6c31 2e72 656e 6465 7228 297d  {ctrl1.render()}
-0000c350: 207b 6374 726c 322e 7265 6e64 6572 2829   {ctrl2.render()
-0000c360: 7d20 7b65 6e64 2e72 656e 6465 7228 297d  } {end.render()}
-0000c370: 2063 220a 0a0a 636c 6173 7320 4d6f 7665   c"...class Move
-0000c380: 284e 616d 6564 5475 706c 6529 3a0a 2020  (NamedTuple):.  
-0000c390: 2020 2222 220a 2020 2020 4120 7061 7468    """.    A path
-0000c3a0: 206d 6f76 6520 656c 656d 656e 742e 0a0a   move element...
-0000c3b0: 2020 2020 4966 2061 2070 6174 6820 6861      If a path ha
-0000c3c0: 7320 6265 656e 2063 7265 6174 6564 2062  s been created b
-0000c3d0: 7574 206e 6f74 2079 6574 2070 6169 6e74  ut not yet paint
-0000c3e0: 6564 2c20 7468 6973 2077 696c 6c20 6372  ed, this will cr
-0000c3f0: 6561 7465 2061 206e 6577 2073 7562 7061  eate a new subpa
-0000c400: 7468 2e0a 0a20 2020 2053 6565 3a20 6050  th...    See: `P
-0000c410: 6169 6e74 6564 5061 7468 2e6d 6f76 655f  aintedPath.move_
-0000c420: 746f 600a 2020 2020 2222 220a 0a20 2020  to`.    """..   
-0000c430: 2070 743a 2050 6f69 6e74 0a20 2020 2022   pt: Point.    "
-0000c440: 2222 5468 6520 706f 696e 7420 746f 2077  ""The point to w
-0000c450: 6869 6368 2074 6f20 6d6f 7665 2e22 2222  hich to move."""
-0000c460: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
-0000c470: 2020 2020 6465 6620 656e 645f 706f 696e      def end_poin
-0000c480: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
-0000c490: 2022 2222 5468 6520 656e 6420 706f 696e   """The end poin
-0000c4a0: 7420 6f66 2074 6869 7320 7061 7468 2065  t of this path e
-0000c4b0: 6c65 6d65 6e74 2e22 2222 0a20 2020 2020  lement.""".     
-0000c4c0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-0000c4d0: 740a 0a20 2020 2040 666f 7263 655f 6e6f  t..    @force_no
-0000c4e0: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
-0000c4f0: 2072 656e 6465 7228 7365 6c66 2c20 6773   render(self, gs
-0000c500: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-0000c510: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-0000c520: 6974 6961 6c5f 706f 696e 7429 3a0a 2020  itial_point):.  
-0000c530: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000c540: 2020 5265 6e64 6572 2074 6869 7320 7061    Render this pa
-0000c550: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
-0000c560: 7320 5044 4620 7265 7072 6573 656e 7461  s PDF representa
-0000c570: 7469 6f6e 2e0a 0a20 2020 2020 2020 2041  tion...        A
-0000c580: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-0000c590: 2067 7364 5f72 6567 6973 7472 7920 2847   gsd_registry (G
-0000c5a0: 7261 7068 6963 7353 7461 7465 4469 6374  raphicsStateDict
-0000c5b0: 5265 6769 7374 7279 293a 2074 6865 206f  Registry): the o
-0000c5c0: 776e 6572 2773 2067 7261 7068 6963 7320  wner's graphics 
-0000c5d0: 7374 6174 650a 2020 2020 2020 2020 2020  state.          
-0000c5e0: 2020 2020 2020 6469 6374 696f 6e61 7279        dictionary
-0000c5f0: 2072 6567 6973 7472 792e 0a20 2020 2020   registry..     
-0000c600: 2020 2020 2020 2073 7479 6c65 2028 4772         style (Gr
-0000c610: 6170 6869 6373 5374 796c 6529 3a20 7468  aphicsStyle): th
-0000c620: 6520 6375 7272 656e 7420 7265 736f 6c76  e current resolv
-0000c630: 6564 2067 7261 7068 6963 7320 7374 796c  ed graphics styl
-0000c640: 650a 2020 2020 2020 2020 2020 2020 6c61  e.            la
-0000c650: 7374 5f69 7465 6d3a 2074 6865 2070 7265  st_item: the pre
-0000c660: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-0000c670: 6e74 2e0a 2020 2020 2020 2020 2020 2020  nt..            
-0000c680: 696e 6974 6961 6c5f 706f 696e 743a 206c  initial_point: l
-0000c690: 6173 7420 706f 7369 7469 6f6e 2073 6574  ast position set
-0000c6a0: 2062 7920 6120 224d 2220 6f72 2022 6d22   by a "M" or "m"
-0000c6b0: 2063 6f6d 6d61 6e64 0a0a 2020 2020 2020   command..      
-0000c6c0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-0000c6d0: 2020 2020 2020 2061 2074 7570 6c65 206f         a tuple o
-0000c6e0: 6620 6028 7374 722c 206e 6577 5f6c 6173  f `(str, new_las
-0000c6f0: 745f 6974 656d 2960 2c20 7768 6572 6520  t_item)`, where 
-0000c700: 606e 6577 5f6c 6173 745f 6974 656d 6020  `new_last_item` 
-0000c710: 6973 2060 7365 6c66 600a 2020 2020 2020  is `self`.      
-0000c720: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-0000c730: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-0000c740: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
-0000c750: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-0000c760: 7265 6e64 6572 5f6d 6f76 6528 7365 6c66  render_move(self
-0000c770: 2e70 7429 2c20 7365 6c66 2c20 7365 6c66  .pt), self, self
-0000c780: 2e70 740a 0a20 2020 2040 666f 7263 655f  .pt..    @force_
-0000c790: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
-0000c7a0: 6566 2072 656e 6465 725f 6465 6275 6728  ef render_debug(
-0000c7b0: 0a20 2020 2020 2020 2073 656c 662c 2067  .        self, g
-0000c7c0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
-0000c7d0: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
-0000c7e0: 6e69 7469 616c 5f70 6f69 6e74 2c20 6465  nitial_point, de
-0000c7f0: 6275 675f 7374 7265 616d 2c20 7066 780a  bug_stream, pfx.
-0000c800: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
-0000c810: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
-0000c820: 7220 7468 6973 2070 6174 6820 656c 656d  r this path elem
-0000c830: 656e 7420 746f 2069 7473 2050 4446 2072  ent to its PDF r
-0000c840: 6570 7265 7365 6e74 6174 696f 6e20 616e  epresentation an
-0000c850: 6420 7072 6f64 7563 6520 6465 6275 670a  d produce debug.
-0000c860: 2020 2020 2020 2020 696e 666f 726d 6174          informat
-0000c870: 696f 6e2e 0a0a 2020 2020 2020 2020 4172  ion...        Ar
-0000c880: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-0000c890: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
-0000c8a0: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
-0000c8b0: 6567 6973 7472 7929 3a20 7468 6520 6f77  egistry): the ow
-0000c8c0: 6e65 7227 7320 6772 6170 6869 6373 2073  ner's graphics s
-0000c8d0: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
-0000c8e0: 2020 2020 2064 6963 7469 6f6e 6172 7920       dictionary 
-0000c8f0: 7265 6769 7374 7279 2e0a 2020 2020 2020  registry..      
-0000c900: 2020 2020 2020 7374 796c 6520 2847 7261        style (Gra
-0000c910: 7068 6963 7353 7479 6c65 293a 2074 6865  phicsStyle): the
-0000c920: 2063 7572 7265 6e74 2072 6573 6f6c 7665   current resolve
-0000c930: 6420 6772 6170 6869 6373 2073 7479 6c65  d graphics style
-0000c940: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-0000c950: 745f 6974 656d 3a20 7468 6520 7072 6576  t_item: the prev
-0000c960: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
-0000c970: 742e 0a20 2020 2020 2020 2020 2020 2069  t..            i
-0000c980: 6e69 7469 616c 5f70 6f69 6e74 3a20 6c61  nitial_point: la
-0000c990: 7374 2070 6f73 6974 696f 6e20 7365 7420  st position set 
-0000c9a0: 6279 2061 2022 4d22 206f 7220 226d 2220  by a "M" or "m" 
-0000c9b0: 636f 6d6d 616e 640a 2020 2020 2020 2020  command.        
-0000c9c0: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
-0000c9d0: 2028 696f 2e54 6578 7449 4f29 3a20 7468   (io.TextIO): th
-0000c9e0: 6520 7374 7265 616d 2074 6f20 7768 6963  e stream to whic
-0000c9f0: 6820 7468 6520 6465 6275 6720 6f75 7470  h the debug outp
-0000ca00: 7574 2073 686f 756c 6420 6265 0a20 2020  ut should be.   
-0000ca10: 2020 2020 2020 2020 2020 2020 2077 7269               wri
-0000ca20: 7474 656e 2e20 5468 6973 2069 7320 6e6f  tten. This is no
-0000ca30: 7420 6775 6172 616e 7465 6564 2074 6f20  t guaranteed to 
-0000ca40: 6265 2073 6565 6b61 626c 6520 2865 2e67  be seekable (e.g
-0000ca50: 2e20 6974 206d 6179 2062 6520 7374 646f  . it may be stdo
-0000ca60: 7574 206f 720a 2020 2020 2020 2020 2020  ut or.          
-0000ca70: 2020 2020 2020 7374 6465 7272 292e 0a20        stderr).. 
-0000ca80: 2020 2020 2020 2020 2020 2070 6678 2028             pfx (
-0000ca90: 7374 7229 3a20 7468 6520 6375 7272 656e  str): the curren
-0000caa0: 7420 6465 6275 6720 6f75 7470 7574 2070  t debug output p
-0000cab0: 7265 6669 7820 7374 7269 6e67 2028 6f6e  refix string (on
-0000cac0: 6c79 206e 6565 6465 6420 6966 2065 6d69  ly needed if emi
-0000cad0: 7474 696e 670a 2020 2020 2020 2020 2020  tting.          
-0000cae0: 2020 2020 2020 6d6f 7265 2074 6861 6e20        more than 
-0000caf0: 6f6e 6520 6c69 6e65 292e 0a0a 2020 2020  one line)...    
-0000cb00: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0000cb10: 2020 2020 2020 2020 2054 6865 2073 616d           The sam
-0000cb20: 6520 7475 706c 6520 6173 2060 4d6f 7665  e tuple as `Move
-0000cb30: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
-0000cb40: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-0000cb50: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-0000cb60: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
-0000cb70: 2020 2020 2020 2020 7265 6e64 6572 6564          rendered
-0000cb80: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
-0000cb90: 6961 6c5f 706f 696e 7420 3d20 7365 6c66  ial_point = self
-0000cba0: 2e72 656e 6465 7228 0a20 2020 2020 2020  .render(.       
-0000cbb0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
-0000cbc0: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
-0000cbd0: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
-0000cbe0: 6e74 0a20 2020 2020 2020 2029 0a20 2020  nt.        ).   
-0000cbf0: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-0000cc00: 6d2e 7772 6974 6528 7374 7228 7365 6c66  m.write(str(self
-0000cc10: 2920 2b20 225c 6e22 290a 0a20 2020 2020  ) + "\n")..     
-0000cc20: 2020 2072 6574 7572 6e20 7265 6e64 6572     return render
-0000cc30: 6564 2c20 7265 736f 6c76 6564 2c20 696e  ed, resolved, in
-0000cc40: 6974 6961 6c5f 706f 696e 740a 0a0a 636c  itial_point...cl
-0000cc50: 6173 7320 5265 6c61 7469 7665 4d6f 7665  ass RelativeMove
-0000cc60: 284e 616d 6564 5475 706c 6529 3a0a 2020  (NamedTuple):.  
-0000cc70: 2020 2222 220a 2020 2020 4120 7061 7468    """.    A path
-0000cc80: 206d 6f76 6520 656c 656d 656e 7420 7769   move element wi
-0000cc90: 7468 2061 6e20 656e 6420 706f 696e 7420  th an end point 
-0000cca0: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
-0000ccb0: 656e 6420 6f66 2074 6865 2070 7265 7669  end of the previ
-0000ccc0: 6f75 7320 7061 7468 0a20 2020 2065 6c65  ous path.    ele
-0000ccd0: 6d65 6e74 2e0a 0a20 2020 2049 6620 6120  ment...    If a 
-0000cce0: 7061 7468 2068 6173 2062 6565 6e20 6372  path has been cr
-0000ccf0: 6561 7465 6420 6275 7420 6e6f 7420 7965  eated but not ye
-0000cd00: 7420 7061 696e 7465 642c 2074 6869 7320  t painted, this 
-0000cd10: 7769 6c6c 2063 7265 6174 6520 6120 6e65  will create a ne
-0000cd20: 7720 7375 6270 6174 682e 0a0a 2020 2020  w subpath...    
-0000cd30: 5365 653a 2060 5061 696e 7465 6450 6174  See: `PaintedPat
-0000cd40: 682e 6d6f 7665 5f72 656c 6174 6976 6560  h.move_relative`
-0000cd50: 0a20 2020 2022 2222 0a0a 2020 2020 7074  .    """..    pt
-0000cd60: 3a20 506f 696e 740a 2020 2020 2222 2254  : Point.    """T
-0000cd70: 6865 206f 6666 7365 7420 6279 2077 6869  he offset by whi
-0000cd80: 6368 2074 6f20 6d6f 7665 2e22 2222 0a0a  ch to move."""..
-0000cd90: 2020 2020 4066 6f72 6365 5f6e 6f64 6f63      @force_nodoc
-0000cda0: 756d 656e 740a 2020 2020 6465 6620 7265  ument.    def re
-0000cdb0: 6e64 6572 2873 656c 662c 2067 7364 5f72  nder(self, gsd_r
-0000cdc0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
-0000cdd0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-0000cde0: 616c 5f70 6f69 6e74 293a 0a20 2020 2020  al_point):.     
-0000cdf0: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
-0000ce00: 656e 6465 7220 7468 6973 2070 6174 6820  ender this path 
-0000ce10: 656c 656d 656e 7420 746f 2069 7473 2050  element to its P
-0000ce20: 4446 2072 6570 7265 7365 6e74 6174 696f  DF representatio
-0000ce30: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
-0000ce40: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
-0000ce50: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
-0000ce60: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
-0000ce70: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
-0000ce80: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
-0000ce90: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
-0000cea0: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
-0000ceb0: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
-0000cec0: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
-0000ced0: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
-0000cee0: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
-0000cef0: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
-0000cf00: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-0000cf10: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
-0000cf20: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
-0000cf30: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
-0000cf40: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
-0000cf50: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
-0000cf60: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
-0000cf70: 6d6d 616e 640a 0a20 2020 2020 2020 2052  mmand..        R
-0000cf80: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-0000cf90: 2020 2020 6120 7475 706c 6520 6f66 2060      a tuple of `
-0000cfa0: 2873 7472 2c20 6e65 775f 6c61 7374 5f69  (str, new_last_i
-0000cfb0: 7465 6d29 602c 2077 6865 7265 2060 6e65  tem)`, where `ne
-0000cfc0: 775f 6c61 7374 5f69 7465 6d60 2069 7320  w_last_item` is 
-0000cfd0: 7468 6520 7265 736f 6c76 6564 0a20 2020  the resolved.   
-0000cfe0: 2020 2020 2020 2020 2060 4d6f 7665 600a           `Move`.
-0000cff0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000d000: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
-0000d010: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
-0000d020: 756d 656e 740a 2020 2020 2020 2020 706f  ument.        po
-0000d030: 696e 7420 3d20 6c61 7374 5f69 7465 6d2e  int = last_item.
-0000d040: 656e 645f 706f 696e 7420 2b20 7365 6c66  end_point + self
-0000d050: 2e70 740a 2020 2020 2020 2020 7265 7475  .pt.        retu
-0000d060: 726e 205f 7265 6e64 6572 5f6d 6f76 6528  rn _render_move(
-0000d070: 706f 696e 7429 2c20 4d6f 7665 2870 6f69  point), Move(poi
-0000d080: 6e74 292c 2070 6f69 6e74 0a0a 2020 2020  nt), point..    
-0000d090: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
-0000d0a0: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
-0000d0b0: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
-0000d0c0: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-0000d0d0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-0000d0e0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-0000d0f0: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
-0000d100: 6d2c 2070 6678 0a20 2020 2029 3a0a 2020  m, pfx.    ):.  
-0000d110: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000d120: 2020 5265 6e64 6572 2074 6869 7320 7061    Render this pa
-0000d130: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
-0000d140: 7320 5044 4620 7265 7072 6573 656e 7461  s PDF representa
-0000d150: 7469 6f6e 2061 6e64 2070 726f 6475 6365  tion and produce
-0000d160: 2064 6562 7567 0a20 2020 2020 2020 2069   debug.        i
-0000d170: 6e66 6f72 6d61 7469 6f6e 2e0a 0a20 2020  nformation...   
-0000d180: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-0000d190: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
-0000d1a0: 7472 7920 2847 7261 7068 6963 7353 7461  try (GraphicsSta
-0000d1b0: 7465 4469 6374 5265 6769 7374 7279 293a  teDictRegistry):
-0000d1c0: 2074 6865 206f 776e 6572 2773 2067 7261   the owner's gra
-0000d1d0: 7068 6963 7320 7374 6174 650a 2020 2020  phics state.    
-0000d1e0: 2020 2020 2020 2020 2020 2020 6469 6374              dict
-0000d1f0: 696f 6e61 7279 2072 6567 6973 7472 792e  ionary registry.
-0000d200: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-0000d210: 6c65 2028 4772 6170 6869 6373 5374 796c  le (GraphicsStyl
-0000d220: 6529 3a20 7468 6520 6375 7272 656e 7420  e): the current 
-0000d230: 7265 736f 6c76 6564 2067 7261 7068 6963  resolved graphic
-0000d240: 7320 7374 796c 650a 2020 2020 2020 2020  s style.        
-0000d250: 2020 2020 6c61 7374 5f69 7465 6d3a 2074      last_item: t
-0000d260: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
-0000d270: 2065 6c65 6d65 6e74 2e0a 2020 2020 2020   element..      
-0000d280: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
-0000d290: 696e 743a 206c 6173 7420 706f 7369 7469  int: last positi
-0000d2a0: 6f6e 2073 6574 2062 7920 6120 224d 2220  on set by a "M" 
-0000d2b0: 6f72 2022 6d22 2063 6f6d 6d61 6e64 0a20  or "m" command. 
-0000d2c0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-0000d2d0: 5f73 7472 6561 6d20 2869 6f2e 5465 7874  _stream (io.Text
-0000d2e0: 494f 293a 2074 6865 2073 7472 6561 6d20  IO): the stream 
-0000d2f0: 746f 2077 6869 6368 2074 6865 2064 6562  to which the deb
-0000d300: 7567 206f 7574 7075 7420 7368 6f75 6c64  ug output should
-0000d310: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
-0000d320: 2020 2020 7772 6974 7465 6e2e 2054 6869      written. Thi
-0000d330: 7320 6973 206e 6f74 2067 7561 7261 6e74  s is not guarant
-0000d340: 6565 6420 746f 2062 6520 7365 656b 6162  eed to be seekab
-0000d350: 6c65 2028 652e 672e 2069 7420 6d61 7920  le (e.g. it may 
-0000d360: 6265 2073 7464 6f75 7420 6f72 0a20 2020  be stdout or.   
-0000d370: 2020 2020 2020 2020 2020 2020 2073 7464               std
-0000d380: 6572 7229 2e0a 2020 2020 2020 2020 2020  err)..          
-0000d390: 2020 7066 7820 2873 7472 293a 2074 6865    pfx (str): the
-0000d3a0: 2063 7572 7265 6e74 2064 6562 7567 206f   current debug o
-0000d3b0: 7574 7075 7420 7072 6566 6978 2073 7472  utput prefix str
-0000d3c0: 696e 6720 286f 6e6c 7920 6e65 6564 6564  ing (only needed
-0000d3d0: 2069 6620 656d 6974 7469 6e67 0a20 2020   if emitting.   
-0000d3e0: 2020 2020 2020 2020 2020 2020 206d 6f72               mor
-0000d3f0: 6520 7468 616e 206f 6e65 206c 696e 6529  e than one line)
-0000d400: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0000d410: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-0000d420: 5468 6520 7361 6d65 2074 7570 6c65 2061  The same tuple a
-0000d430: 7320 6052 656c 6174 6976 654d 6f76 652e  s `RelativeMove.
-0000d440: 7265 6e64 6572 602e 0a20 2020 2020 2020  render`..       
-0000d450: 2022 2222 0a20 2020 2020 2020 2023 2070   """.        # p
-0000d460: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
-0000d470: 6e75 7365 642d 6172 6775 6d65 6e74 0a20  nused-argument. 
-0000d480: 2020 2020 2020 2072 656e 6465 7265 642c         rendered,
-0000d490: 2072 6573 6f6c 7665 642c 2069 6e69 7469   resolved, initi
-0000d4a0: 616c 5f70 6f69 6e74 203d 2073 656c 662e  al_point = self.
-0000d4b0: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
-0000d4c0: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
-0000d4d0: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
-0000d4e0: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
-0000d4f0: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
-0000d500: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
-0000d510: 2e77 7269 7465 2866 227b 7365 6c66 7d20  .write(f"{self} 
-0000d520: 7265 736f 6c76 6564 2074 6f20 7b72 6573  resolved to {res
-0000d530: 6f6c 7665 647d 5c6e 2229 0a0a 2020 2020  olved}\n")..    
-0000d540: 2020 2020 7265 7475 726e 2072 656e 6465      return rende
-0000d550: 7265 642c 2072 6573 6f6c 7665 642c 2069  red, resolved, i
-0000d560: 6e69 7469 616c 5f70 6f69 6e74 0a0a 0a63  nitial_point...c
-0000d570: 6c61 7373 204c 696e 6528 4e61 6d65 6454  lass Line(NamedT
-0000d580: 7570 6c65 293a 0a20 2020 2022 2222 0a20  uple):.    """. 
-0000d590: 2020 2041 2070 6174 6820 6c69 6e65 2065     A path line e
-0000d5a0: 6c65 6d65 6e74 2e0a 0a20 2020 2054 6869  lement...    Thi
-0000d5b0: 7320 6472 6177 7320 6120 7374 7261 6967  s draws a straig
-0000d5c0: 6874 206c 696e 6520 6672 6f6d 2074 6865  ht line from the
-0000d5d0: 2065 6e64 2070 6f69 6e74 206f 6620 7468   end point of th
-0000d5e0: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-0000d5f0: 656c 656d 656e 7420 746f 2074 6865 0a20  element to the. 
-0000d600: 2020 2070 6f69 6e74 2073 7065 6369 6669     point specifi
-0000d610: 6564 2062 7920 6070 7460 2e0a 0a20 2020  ed by `pt`...   
-0000d620: 2053 6565 3a20 6050 6169 6e74 6564 5061   See: `PaintedPa
-0000d630: 7468 2e6c 696e 655f 746f 600a 2020 2020  th.line_to`.    
-0000d640: 2222 220a 0a20 2020 2070 743a 2050 6f69  """..    pt: Poi
-0000d650: 6e74 0a20 2020 2022 2222 5468 6520 706f  nt.    """The po
-0000d660: 696e 7420 746f 2077 6869 6368 2074 6865  int to which the
-0000d670: 206c 696e 6520 6973 2064 7261 776e 2e22   line is drawn."
-0000d680: 2222 0a0a 2020 2020 4070 726f 7065 7274  ""..    @propert
-0000d690: 790a 2020 2020 6465 6620 656e 645f 706f  y.    def end_po
-0000d6a0: 696e 7428 7365 6c66 293a 0a20 2020 2020  int(self):.     
-0000d6b0: 2020 2022 2222 5468 6520 656e 6420 706f     """The end po
-0000d6c0: 696e 7420 6f66 2074 6869 7320 7061 7468  int of this path
-0000d6d0: 2065 6c65 6d65 6e74 2e22 2222 0a20 2020   element.""".   
-0000d6e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000d6f0: 2e70 740a 0a20 2020 2040 666f 7263 655f  .pt..    @force_
-0000d700: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
-0000d710: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
-0000d720: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-0000d730: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-0000d740: 696e 6974 6961 6c5f 706f 696e 7429 3a0a  initial_point):.
-0000d750: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000d760: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
-0000d770: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
-0000d780: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
-0000d790: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
-0000d7a0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0000d7b0: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
-0000d7c0: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
-0000d7d0: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
-0000d7e0: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
-0000d7f0: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
-0000d800: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
-0000d810: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
-0000d820: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
-0000d830: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
-0000d840: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
-0000d850: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
-0000d860: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
-0000d870: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
-0000d880: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
-0000d890: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
-0000d8a0: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
-0000d8b0: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
-0000d8c0: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
-0000d8d0: 6d22 2063 6f6d 6d61 6e64 0a0a 2020 2020  m" command..    
-0000d8e0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0000d8f0: 2020 2020 2020 2020 2061 2074 7570 6c65           a tuple
-0000d900: 206f 6620 6028 7374 722c 206e 6577 5f6c   of `(str, new_l
-0000d910: 6173 745f 6974 656d 2960 2c20 7768 6572  ast_item)`, wher
-0000d920: 6520 606e 6577 5f6c 6173 745f 6974 656d  e `new_last_item
-0000d930: 6020 6973 2060 7365 6c66 600a 2020 2020  ` is `self`.    
-0000d940: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000d950: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
-0000d960: 653d 756e 7573 6564 2d61 7267 756d 656e  e=unused-argumen
-0000d970: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-0000d980: 205f 7265 6e64 6572 5f6c 696e 6528 7365   _render_line(se
-0000d990: 6c66 2e70 7429 2c20 7365 6c66 2c20 696e  lf.pt), self, in
-0000d9a0: 6974 6961 6c5f 706f 696e 740a 0a20 2020  itial_point..   
-0000d9b0: 2040 666f 7263 655f 6e6f 646f 6375 6d65   @force_nodocume
-0000d9c0: 6e74 0a20 2020 2064 6566 2072 656e 6465  nt.    def rende
-0000d9d0: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
-0000d9e0: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
-0000d9f0: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
-0000da00: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
-0000da10: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
-0000da20: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
-0000da30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000da40: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
-0000da50: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
-0000da60: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
-0000da70: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
-0000da80: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
-0000da90: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
-0000daa0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0000dab0: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
-0000dac0: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
-0000dad0: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
-0000dae0: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
-0000daf0: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
-0000db00: 2020 2020 2020 2020 2020 2020 2064 6963               dic
-0000db10: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
-0000db20: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-0000db30: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
-0000db40: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
-0000db50: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
-0000db60: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
-0000db70: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
-0000db80: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
-0000db90: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
-0000dba0: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
-0000dbb0: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
-0000dbc0: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
-0000dbd0: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
-0000dbe0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-0000dbf0: 675f 7374 7265 616d 2028 696f 2e54 6578  g_stream (io.Tex
-0000dc00: 7449 4f29 3a20 7468 6520 7374 7265 616d  tIO): the stream
-0000dc10: 2074 6f20 7768 6963 6820 7468 6520 6465   to which the de
-0000dc20: 6275 6720 6f75 7470 7574 2073 686f 756c  bug output shoul
-0000dc30: 6420 6265 0a20 2020 2020 2020 2020 2020  d be.           
-0000dc40: 2020 2020 2077 7269 7474 656e 2e20 5468       written. Th
-0000dc50: 6973 2069 7320 6e6f 7420 6775 6172 616e  is is not guaran
-0000dc60: 7465 6564 2074 6f20 6265 2073 6565 6b61  teed to be seeka
-0000dc70: 626c 6520 2865 2e67 2e20 6974 206d 6179  ble (e.g. it may
-0000dc80: 2062 6520 7374 646f 7574 206f 720a 2020   be stdout or.  
-0000dc90: 2020 2020 2020 2020 2020 2020 2020 7374                st
-0000dca0: 6465 7272 292e 0a20 2020 2020 2020 2020  derr)..         
-0000dcb0: 2020 2070 6678 2028 7374 7229 3a20 7468     pfx (str): th
-0000dcc0: 6520 6375 7272 656e 7420 6465 6275 6720  e current debug 
-0000dcd0: 6f75 7470 7574 2070 7265 6669 7820 7374  output prefix st
-0000dce0: 7269 6e67 2028 6f6e 6c79 206e 6565 6465  ring (only neede
-0000dcf0: 6420 6966 2065 6d69 7474 696e 670a 2020  d if emitting.  
-0000dd00: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-0000dd10: 7265 2074 6861 6e20 6f6e 6520 6c69 6e65  re than one line
-0000dd20: 292e 0a0a 2020 2020 2020 2020 5265 7475  )...        Retu
-0000dd30: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-0000dd40: 2054 6865 2073 616d 6520 7475 706c 6520   The same tuple 
-0000dd50: 6173 2060 4c69 6e65 2e72 656e 6465 7260  as `Line.render`
-0000dd60: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0000dd70: 2020 2020 2020 2320 7079 6c69 6e74 3a20        # pylint: 
-0000dd80: 6469 7361 626c 653d 756e 7573 6564 2d61  disable=unused-a
-0000dd90: 7267 756d 656e 740a 2020 2020 2020 2020  rgument.        
-0000dda0: 7265 6e64 6572 6564 2c20 7265 736f 6c76  rendered, resolv
-0000ddb0: 6564 2c20 696e 6974 6961 6c5f 706f 696e  ed, initial_poin
-0000ddc0: 7420 3d20 7365 6c66 2e72 656e 6465 7228  t = self.render(
-0000ddd0: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
-0000dde0: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
-0000ddf0: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-0000de00: 7469 616c 5f70 6f69 6e74 0a20 2020 2020  tial_point.     
-0000de10: 2020 2029 0a20 2020 2020 2020 2064 6562     ).        deb
-0000de20: 7567 5f73 7472 6561 6d2e 7772 6974 6528  ug_stream.write(
-0000de30: 7374 7228 7365 6c66 2920 2b20 225c 6e22  str(self) + "\n"
-0000de40: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-0000de50: 6e20 7265 6e64 6572 6564 2c20 7265 736f  n rendered, reso
-0000de60: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
-0000de70: 696e 740a 0a0a 636c 6173 7320 5265 6c61  int...class Rela
-0000de80: 7469 7665 4c69 6e65 284e 616d 6564 5475  tiveLine(NamedTu
-0000de90: 706c 6529 3a0a 2020 2020 2222 220a 2020  ple):.    """.  
-0000dea0: 2020 4120 7061 7468 206c 696e 6520 656c    A path line el
-0000deb0: 656d 656e 7420 7769 7468 2061 6e20 656e  ement with an en
-0000dec0: 6470 6f69 6e74 2072 656c 6174 6976 6520  dpoint relative 
-0000ded0: 746f 2074 6865 2065 6e64 206f 6620 7468  to the end of th
-0000dee0: 6520 7072 6576 696f 7573 2065 6c65 6d65  e previous eleme
-0000def0: 6e74 2e0a 0a20 2020 2054 6869 7320 6472  nt...    This dr
-0000df00: 6177 7320 6120 7374 7261 6967 6874 206c  aws a straight l
-0000df10: 696e 6520 6672 6f6d 2074 6865 2065 6e64  ine from the end
-0000df20: 2070 6f69 6e74 206f 6620 7468 6520 7072   point of the pr
-0000df30: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-0000df40: 656e 7420 746f 2074 6865 0a20 2020 2070  ent to the.    p
-0000df50: 6f69 6e74 2073 7065 6369 6669 6564 2062  oint specified b
-0000df60: 7920 606c 6173 745f 6974 656d 2e65 6e64  y `last_item.end
-0000df70: 5f70 6f69 6e74 202b 2070 7460 2e20 5468  _point + pt`. Th
-0000df80: 6520 6162 736f 6c75 7465 2063 6f6f 7264  e absolute coord
-0000df90: 696e 6174 6573 206f 6620 7468 6520 656e  inates of the en
-0000dfa0: 640a 2020 2020 706f 696e 7420 6172 6520  d.    point are 
-0000dfb0: 7265 736f 6c76 6564 2064 7572 696e 6720  resolved during 
-0000dfc0: 7468 6520 7265 6e64 6572 696e 6720 7072  the rendering pr
-0000dfd0: 6f63 6573 732e 0a0a 2020 2020 5365 653a  ocess...    See:
-0000dfe0: 2060 5061 696e 7465 6450 6174 682e 6c69   `PaintedPath.li
-0000dff0: 6e65 5f72 656c 6174 6976 6560 0a20 2020  ne_relative`.   
-0000e000: 2022 2222 0a0a 2020 2020 7074 3a20 506f   """..    pt: Po
-0000e010: 696e 740a 2020 2020 2222 2254 6865 2065  int.    """The e
-0000e020: 6e64 706f 696e 7420 6f66 2074 6865 206c  ndpoint of the l
-0000e030: 696e 6520 7265 6c61 7469 7665 2074 6f20  ine relative to 
-0000e040: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
-0000e050: 6820 656c 656d 656e 742e 2222 220a 0a20  h element.""".. 
-0000e060: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-0000e070: 6d65 6e74 0a20 2020 2064 6566 2072 656e  ment.    def ren
-0000e080: 6465 7228 7365 6c66 2c20 6773 645f 7265  der(self, gsd_re
-0000e090: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
-0000e0a0: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
-0000e0b0: 6c5f 706f 696e 7429 3a0a 2020 2020 2020  l_point):.      
-0000e0c0: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
-0000e0d0: 6e64 6572 2074 6869 7320 7061 7468 2065  nder this path e
-0000e0e0: 6c65 6d65 6e74 2074 6f20 6974 7320 5044  lement to its PD
-0000e0f0: 4620 7265 7072 6573 656e 7461 7469 6f6e  F representation
-0000e100: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-0000e110: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
-0000e120: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
-0000e130: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
-0000e140: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
-0000e150: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
-0000e160: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000e170: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
-0000e180: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
-0000e190: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
-0000e1a0: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
-0000e1b0: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
-0000e1c0: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
-0000e1d0: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
-0000e1e0: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
-0000e1f0: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
-0000e200: 2020 2020 2020 2020 2020 2020 696e 6974              init
-0000e210: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
-0000e220: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
-0000e230: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
-0000e240: 6d61 6e64 0a0a 2020 2020 2020 2020 5265  mand..        Re
-0000e250: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-0000e260: 2020 2061 2074 7570 6c65 206f 6620 6028     a tuple of `(
-0000e270: 7374 722c 206e 6577 5f6c 6173 745f 6974  str, new_last_it
-0000e280: 656d 2960 2c20 7768 6572 6520 606e 6577  em)`, where `new
-0000e290: 5f6c 6173 745f 6974 656d 6020 6973 2074  _last_item` is t
-0000e2a0: 6865 2072 6573 6f6c 7665 640a 2020 2020  he resolved.    
-0000e2b0: 2020 2020 2020 2020 604c 696e 6560 2e0a          `Line`..
-0000e2c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000e2d0: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
-0000e2e0: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
-0000e2f0: 756d 656e 740a 2020 2020 2020 2020 706f  ument.        po
-0000e300: 696e 7420 3d20 6c61 7374 5f69 7465 6d2e  int = last_item.
-0000e310: 656e 645f 706f 696e 7420 2b20 7365 6c66  end_point + self
-0000e320: 2e70 740a 2020 2020 2020 2020 7265 7475  .pt.        retu
-0000e330: 726e 205f 7265 6e64 6572 5f6c 696e 6528  rn _render_line(
-0000e340: 706f 696e 7429 2c20 4c69 6e65 2870 6f69  point), Line(poi
-0000e350: 6e74 292c 2069 6e69 7469 616c 5f70 6f69  nt), initial_poi
-0000e360: 6e74 0a0a 2020 2020 4066 6f72 6365 5f6e  nt..    @force_n
-0000e370: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
-0000e380: 6620 7265 6e64 6572 5f64 6562 7567 280a  f render_debug(.
-0000e390: 2020 2020 2020 2020 7365 6c66 2c20 6773          self, gs
-0000e3a0: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-0000e3b0: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-0000e3c0: 6974 6961 6c5f 706f 696e 742c 2064 6562  itial_point, deb
-0000e3d0: 7567 5f73 7472 6561 6d2c 2070 6678 0a20  ug_stream, pfx. 
-0000e3e0: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
-0000e3f0: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
-0000e400: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
-0000e410: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
-0000e420: 7072 6573 656e 7461 7469 6f6e 2061 6e64  presentation and
-0000e430: 2070 726f 6475 6365 2064 6562 7567 0a20   produce debug. 
-0000e440: 2020 2020 2020 2069 6e66 6f72 6d61 7469         informati
-0000e450: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
-0000e460: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
-0000e470: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
-0000e480: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
-0000e490: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
-0000e4a0: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
-0000e4b0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
-0000e4c0: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
-0000e4d0: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
-0000e4e0: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
-0000e4f0: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
-0000e500: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
-0000e510: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
-0000e520: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-0000e530: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
-0000e540: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-0000e550: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-0000e560: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
-0000e570: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
-0000e580: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
-0000e590: 6f6d 6d61 6e64 0a20 2020 2020 2020 2020  ommand.         
-0000e5a0: 2020 2064 6562 7567 5f73 7472 6561 6d20     debug_stream 
-0000e5b0: 2869 6f2e 5465 7874 494f 293a 2074 6865  (io.TextIO): the
-0000e5c0: 2073 7472 6561 6d20 746f 2077 6869 6368   stream to which
-0000e5d0: 2074 6865 2064 6562 7567 206f 7574 7075   the debug outpu
-0000e5e0: 7420 7368 6f75 6c64 2062 650a 2020 2020  t should be.    
-0000e5f0: 2020 2020 2020 2020 2020 2020 7772 6974              writ
-0000e600: 7465 6e2e 2054 6869 7320 6973 206e 6f74  ten. This is not
-0000e610: 2067 7561 7261 6e74 6565 6420 746f 2062   guaranteed to b
-0000e620: 6520 7365 656b 6162 6c65 2028 652e 672e  e seekable (e.g.
-0000e630: 2069 7420 6d61 7920 6265 2073 7464 6f75   it may be stdou
-0000e640: 7420 6f72 0a20 2020 2020 2020 2020 2020  t or.           
-0000e650: 2020 2020 2073 7464 6572 7229 2e0a 2020       stderr)..  
-0000e660: 2020 2020 2020 2020 2020 7066 7820 2873            pfx (s
-0000e670: 7472 293a 2074 6865 2063 7572 7265 6e74  tr): the current
-0000e680: 2064 6562 7567 206f 7574 7075 7420 7072   debug output pr
-0000e690: 6566 6978 2073 7472 696e 6720 286f 6e6c  efix string (onl
-0000e6a0: 7920 6e65 6564 6564 2069 6620 656d 6974  y needed if emit
-0000e6b0: 7469 6e67 0a20 2020 2020 2020 2020 2020  ting.           
-0000e6c0: 2020 2020 206d 6f72 6520 7468 616e 206f       more than o
-0000e6d0: 6e65 206c 696e 6529 2e0a 0a20 2020 2020  ne line)...     
-0000e6e0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-0000e6f0: 2020 2020 2020 2020 5468 6520 7361 6d65          The same
-0000e700: 2074 7570 6c65 2061 7320 6052 656c 6174   tuple as `Relat
-0000e710: 6976 654c 696e 652e 7265 6e64 6572 602e  iveLine.render`.
-0000e720: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000e730: 2020 2020 2023 2070 796c 696e 743a 2064       # pylint: d
-0000e740: 6973 6162 6c65 3d75 6e75 7365 642d 6172  isable=unused-ar
-0000e750: 6775 6d65 6e74 0a20 2020 2020 2020 2072  gument.        r
-0000e760: 656e 6465 7265 642c 2072 6573 6f6c 7665  endered, resolve
-0000e770: 642c 2069 6e69 7469 616c 5f70 6f69 6e74  d, initial_point
-0000e780: 203d 2073 656c 662e 7265 6e64 6572 280a   = self.render(.
-0000e790: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-0000e7a0: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
-0000e7b0: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-0000e7c0: 6961 6c5f 706f 696e 740a 2020 2020 2020  ial_point.      
-0000e7d0: 2020 290a 2020 2020 2020 2020 6465 6275    ).        debu
-0000e7e0: 675f 7374 7265 616d 2e77 7269 7465 2866  g_stream.write(f
-0000e7f0: 227b 7365 6c66 7d20 7265 736f 6c76 6564  "{self} resolved
-0000e800: 2074 6f20 7b72 6573 6f6c 7665 647d 5c6e   to {resolved}\n
-0000e810: 2229 0a0a 2020 2020 2020 2020 7265 7475  ")..        retu
-0000e820: 726e 2072 656e 6465 7265 642c 2072 6573  rn rendered, res
-0000e830: 6f6c 7665 642c 2069 6e69 7469 616c 5f70  olved, initial_p
-0000e840: 6f69 6e74 0a0a 0a63 6c61 7373 2048 6f72  oint...class Hor
-0000e850: 697a 6f6e 7461 6c4c 696e 6528 4e61 6d65  izontalLine(Name
-0000e860: 6454 7570 6c65 293a 0a20 2020 2022 2222  dTuple):.    """
-0000e870: 0a20 2020 2041 2070 6174 6820 6c69 6e65  .    A path line
-0000e880: 2065 6c65 6d65 6e74 2074 6861 7420 7461   element that ta
-0000e890: 6b65 7320 6974 7320 6f72 6469 6e61 7465  kes its ordinate
-0000e8a0: 2066 726f 6d20 7468 6520 656e 6420 6f66   from the end of
-0000e8b0: 2074 6865 2070 7265 7669 6f75 7320 656c   the previous el
-0000e8c0: 656d 656e 742e 0a0a 2020 2020 5365 653a  ement...    See:
-0000e8d0: 2060 5061 696e 7465 6450 6174 682e 686f   `PaintedPath.ho
-0000e8e0: 7269 7a6f 6e74 616c 5f6c 696e 655f 746f  rizontal_line_to
-0000e8f0: 600a 2020 2020 2222 220a 0a20 2020 2078  `.    """..    x
-0000e900: 3a20 4e75 6d62 6572 0a20 2020 2022 2222  : Number.    """
-0000e910: 5468 6520 6162 7363 6973 7361 206f 6620  The abscissa of 
-0000e920: 7468 6520 686f 7269 7a6f 6e74 616c 206c  the horizontal l
-0000e930: 696e 6527 7320 656e 6420 706f 696e 742e  ine's end point.
-0000e940: 2222 220a 0a20 2020 2040 666f 7263 655f  """..    @force_
-0000e950: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
-0000e960: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
-0000e970: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-0000e980: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-0000e990: 696e 6974 6961 6c5f 706f 696e 7429 3a0a  initial_point):.
-0000e9a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000e9b0: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
-0000e9c0: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
-0000e9d0: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
-0000e9e0: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
-0000e9f0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0000ea00: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
-0000ea10: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
-0000ea20: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
-0000ea30: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
-0000ea40: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
-0000ea50: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
-0000ea60: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
-0000ea70: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
-0000ea80: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
-0000ea90: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
-0000eaa0: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
-0000eab0: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
-0000eac0: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
-0000ead0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
-0000eae0: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
-0000eaf0: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
-0000eb00: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
-0000eb10: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
-0000eb20: 6d22 2063 6f6d 6d61 6e64 0a0a 2020 2020  m" command..    
-0000eb30: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0000eb40: 2020 2020 2020 2020 2061 2074 7570 6c65           a tuple
-0000eb50: 206f 6620 6028 7374 722c 206e 6577 5f6c   of `(str, new_l
-0000eb60: 6173 745f 6974 656d 2960 2c20 7768 6572  ast_item)`, wher
-0000eb70: 6520 606e 6577 5f6c 6173 745f 6974 656d  e `new_last_item
-0000eb80: 6020 6973 2074 6865 2072 6573 6f6c 7665  ` is the resolve
-0000eb90: 640a 2020 2020 2020 2020 2020 2020 604c  d.            `L
-0000eba0: 696e 6560 2e0a 2020 2020 2020 2020 2222  ine`..        ""
-0000ebb0: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
-0000ebc0: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
-0000ebd0: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
-0000ebe0: 2020 2020 656e 645f 706f 696e 7420 3d20      end_point = 
-0000ebf0: 506f 696e 7428 783d 7365 6c66 2e78 2c20  Point(x=self.x, 
-0000ec00: 793d 6c61 7374 5f69 7465 6d2e 656e 645f  y=last_item.end_
-0000ec10: 706f 696e 742e 7929 0a20 2020 2020 2020  point.y).       
-0000ec20: 2072 6574 7572 6e20 5f72 656e 6465 725f   return _render_
-0000ec30: 6c69 6e65 2865 6e64 5f70 6f69 6e74 292c  line(end_point),
-0000ec40: 204c 696e 6528 656e 645f 706f 696e 7429   Line(end_point)
-0000ec50: 2c20 696e 6974 6961 6c5f 706f 696e 740a  , initial_point.
-0000ec60: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
-0000ec70: 6375 6d65 6e74 0a20 2020 2064 6566 2072  cument.    def r
-0000ec80: 656e 6465 725f 6465 6275 6728 0a20 2020  ender_debug(.   
-0000ec90: 2020 2020 2073 656c 662c 2067 7364 5f72       self, gsd_r
-0000eca0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
-0000ecb0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-0000ecc0: 616c 5f70 6f69 6e74 2c20 6465 6275 675f  al_point, debug_
-0000ecd0: 7374 7265 616d 2c20 7066 780a 2020 2020  stream, pfx.    
-0000ece0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-0000ecf0: 2020 2020 2020 2052 656e 6465 7220 7468         Render th
-0000ed00: 6973 2070 6174 6820 656c 656d 656e 7420  is path element 
-0000ed10: 746f 2069 7473 2050 4446 2072 6570 7265  to its PDF repre
-0000ed20: 7365 6e74 6174 696f 6e20 616e 6420 7072  sentation and pr
-0000ed30: 6f64 7563 6520 6465 6275 670a 2020 2020  oduce debug.    
-0000ed40: 2020 2020 696e 666f 726d 6174 696f 6e2e      information.
-0000ed50: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-0000ed60: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-0000ed70: 7265 6769 7374 7279 2028 4772 6170 6869  registry (Graphi
-0000ed80: 6373 5374 6174 6544 6963 7452 6567 6973  csStateDictRegis
-0000ed90: 7472 7929 3a20 7468 6520 6f77 6e65 7227  try): the owner'
-0000eda0: 7320 6772 6170 6869 6373 2073 7461 7465  s graphics state
-0000edb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000edc0: 2064 6963 7469 6f6e 6172 7920 7265 6769   dictionary regi
-0000edd0: 7374 7279 2e0a 2020 2020 2020 2020 2020  stry..          
-0000ede0: 2020 7374 796c 6520 2847 7261 7068 6963    style (Graphic
-0000edf0: 7353 7479 6c65 293a 2074 6865 2063 7572  sStyle): the cur
-0000ee00: 7265 6e74 2072 6573 6f6c 7665 6420 6772  rent resolved gr
-0000ee10: 6170 6869 6373 2073 7479 6c65 0a20 2020  aphics style.   
-0000ee20: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
-0000ee30: 656d 3a20 7468 6520 7072 6576 696f 7573  em: the previous
-0000ee40: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
-0000ee50: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
-0000ee60: 616c 5f70 6f69 6e74 3a20 6c61 7374 2070  al_point: last p
-0000ee70: 6f73 6974 696f 6e20 7365 7420 6279 2061  osition set by a
-0000ee80: 2022 4d22 206f 7220 226d 2220 636f 6d6d   "M" or "m" comm
-0000ee90: 616e 640a 2020 2020 2020 2020 2020 2020  and.            
-0000eea0: 6465 6275 675f 7374 7265 616d 2028 696f  debug_stream (io
-0000eeb0: 2e54 6578 7449 4f29 3a20 7468 6520 7374  .TextIO): the st
-0000eec0: 7265 616d 2074 6f20 7768 6963 6820 7468  ream to which th
-0000eed0: 6520 6465 6275 6720 6f75 7470 7574 2073  e debug output s
-0000eee0: 686f 756c 6420 6265 0a20 2020 2020 2020  hould be.       
-0000eef0: 2020 2020 2020 2020 2077 7269 7474 656e           written
-0000ef00: 2e20 5468 6973 2069 7320 6e6f 7420 6775  . This is not gu
-0000ef10: 6172 616e 7465 6564 2074 6f20 6265 2073  aranteed to be s
-0000ef20: 6565 6b61 626c 6520 2865 2e67 2e20 6974  eekable (e.g. it
-0000ef30: 206d 6179 2062 6520 7374 646f 7574 206f   may be stdout o
-0000ef40: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-0000ef50: 2020 7374 6465 7272 292e 0a20 2020 2020    stderr)..     
-0000ef60: 2020 2020 2020 2070 6678 2028 7374 7229         pfx (str)
-0000ef70: 3a20 7468 6520 6375 7272 656e 7420 6465  : the current de
-0000ef80: 6275 6720 6f75 7470 7574 2070 7265 6669  bug output prefi
-0000ef90: 7820 7374 7269 6e67 2028 6f6e 6c79 206e  x string (only n
-0000efa0: 6565 6465 6420 6966 2065 6d69 7474 696e  eeded if emittin
-0000efb0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
-0000efc0: 2020 6d6f 7265 2074 6861 6e20 6f6e 6520    more than one 
-0000efd0: 6c69 6e65 292e 0a0a 2020 2020 2020 2020  line)...        
-0000efe0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-0000eff0: 2020 2020 2054 6865 2073 616d 6520 7475       The same tu
-0000f000: 706c 6520 6173 2060 486f 7269 7a6f 6e74  ple as `Horizont
-0000f010: 616c 4c69 6e65 2e72 656e 6465 7260 2e0a  alLine.render`..
-0000f020: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000f030: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
-0000f040: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
-0000f050: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
-0000f060: 6e64 6572 6564 2c20 7265 736f 6c76 6564  ndered, resolved
-0000f070: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
-0000f080: 3d20 7365 6c66 2e72 656e 6465 7228 0a20  = self.render(. 
-0000f090: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
-0000f0a0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
-0000f0b0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-0000f0c0: 616c 5f70 6f69 6e74 0a20 2020 2020 2020  al_point.       
-0000f0d0: 2029 0a20 2020 2020 2020 2064 6562 7567   ).        debug
-0000f0e0: 5f73 7472 6561 6d2e 7772 6974 6528 6622  _stream.write(f"
-0000f0f0: 7b73 656c 667d 2072 6573 6f6c 7665 6420  {self} resolved 
-0000f100: 746f 207b 7265 736f 6c76 6564 7d5c 6e22  to {resolved}\n"
-0000f110: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-0000f120: 6e20 7265 6e64 6572 6564 2c20 7265 736f  n rendered, reso
-0000f130: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
-0000f140: 696e 740a 0a0a 636c 6173 7320 5265 6c61  int...class Rela
-0000f150: 7469 7665 486f 7269 7a6f 6e74 616c 4c69  tiveHorizontalLi
-0000f160: 6e65 284e 616d 6564 5475 706c 6529 3a0a  ne(NamedTuple):.
-0000f170: 2020 2020 2222 220a 2020 2020 4120 7061      """.    A pa
-0000f180: 7468 206c 696e 6520 656c 656d 656e 7420  th line element 
-0000f190: 7468 6174 2074 616b 6573 2069 7473 206f  that takes its o
-0000f1a0: 7264 696e 6174 6520 6672 6f6d 2074 6865  rdinate from the
-0000f1b0: 2065 6e64 206f 6620 7468 6520 7072 6576   end of the prev
-0000f1c0: 696f 7573 2065 6c65 6d65 6e74 2061 6e64  ious element and
-0000f1d0: 0a20 2020 2063 6f6d 7075 7465 7320 6974  .    computes it
-0000f1e0: 7320 6162 7363 6973 7361 206f 6666 7365  s abscissa offse
-0000f1f0: 7420 6672 6f6d 2074 6865 2065 6e64 206f  t from the end o
-0000f200: 6620 7468 6174 2065 6c65 6d65 6e74 2e0a  f that element..
-0000f210: 0a20 2020 2053 6565 3a20 6050 6169 6e74  .    See: `Paint
-0000f220: 6564 5061 7468 2e68 6f72 697a 6f6e 7461  edPath.horizonta
-0000f230: 6c5f 6c69 6e65 5f72 656c 6174 6976 6560  l_line_relative`
-0000f240: 0a20 2020 2022 2222 0a0a 2020 2020 783a  .    """..    x:
-0000f250: 204e 756d 6265 720a 2020 2020 2222 220a   Number.    """.
-0000f260: 2020 2020 5468 6520 6162 7363 6973 7361      The abscissa
-0000f270: 206f 6620 7468 6520 686f 7269 7a6f 6e74   of the horizont
-0000f280: 616c 206c 696e 6527 7320 656e 6420 706f  al line's end po
-0000f290: 696e 7420 7265 6c61 7469 7665 2074 6f20  int relative to 
-0000f2a0: 7468 6520 6162 7363 6973 7361 206f 6620  the abscissa of 
-0000f2b0: 7468 650a 2020 2020 7072 6576 696f 7573  the.    previous
-0000f2c0: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
-0000f2d0: 2020 2022 2222 0a0a 2020 2020 4066 6f72     """..    @for
-0000f2e0: 6365 5f6e 6f64 6f63 756d 656e 740a 2020  ce_nodocument.  
-0000f2f0: 2020 6465 6620 7265 6e64 6572 2873 656c    def render(sel
-0000f300: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
-0000f310: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-0000f320: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-0000f330: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-0000f340: 2020 2020 2020 2052 656e 6465 7220 7468         Render th
-0000f350: 6973 2070 6174 6820 656c 656d 656e 7420  is path element 
-0000f360: 746f 2069 7473 2050 4446 2072 6570 7265  to its PDF repre
-0000f370: 7365 6e74 6174 696f 6e2e 0a0a 2020 2020  sentation...    
-0000f380: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-0000f390: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-0000f3a0: 7279 2028 4772 6170 6869 6373 5374 6174  ry (GraphicsStat
-0000f3b0: 6544 6963 7452 6567 6973 7472 7929 3a20  eDictRegistry): 
-0000f3c0: 7468 6520 6f77 6e65 7227 7320 6772 6170  the owner's grap
-0000f3d0: 6869 6373 2073 7461 7465 0a20 2020 2020  hics state.     
-0000f3e0: 2020 2020 2020 2020 2020 2064 6963 7469             dicti
-0000f3f0: 6f6e 6172 7920 7265 6769 7374 7279 2e0a  onary registry..
-0000f400: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-0000f410: 6520 2847 7261 7068 6963 7353 7479 6c65  e (GraphicsStyle
-0000f420: 293a 2074 6865 2063 7572 7265 6e74 2072  ): the current r
-0000f430: 6573 6f6c 7665 6420 6772 6170 6869 6373  esolved graphics
-0000f440: 2073 7479 6c65 0a20 2020 2020 2020 2020   style.         
-0000f450: 2020 206c 6173 745f 6974 656d 3a20 7468     last_item: th
-0000f460: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-0000f470: 656c 656d 656e 742e 0a20 2020 2020 2020  element..       
-0000f480: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-0000f490: 6e74 3a20 6c61 7374 2070 6f73 6974 696f  nt: last positio
-0000f4a0: 6e20 7365 7420 6279 2061 2022 4d22 206f  n set by a "M" o
-0000f4b0: 7220 226d 2220 636f 6d6d 616e 640a 0a20  r "m" command.. 
-0000f4c0: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-0000f4d0: 2020 2020 2020 2020 2020 2020 6120 7475              a tu
-0000f4e0: 706c 6520 6f66 2060 2873 7472 2c20 6e65  ple of `(str, ne
-0000f4f0: 775f 6c61 7374 5f69 7465 6d29 602c 2077  w_last_item)`, w
-0000f500: 6865 7265 2060 6e65 775f 6c61 7374 5f69  here `new_last_i
-0000f510: 7465 6d60 2069 7320 7468 6520 7265 736f  tem` is the reso
-0000f520: 6c76 6564 0a20 2020 2020 2020 2020 2020  lved.           
-0000f530: 2060 4c69 6e65 602e 0a20 2020 2020 2020   `Line`..       
-0000f540: 2022 2222 0a20 2020 2020 2020 2023 2070   """.        # p
-0000f550: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
-0000f560: 6e75 7365 642d 6172 6775 6d65 6e74 0a20  nused-argument. 
-0000f570: 2020 2020 2020 2065 6e64 5f70 6f69 6e74         end_point
-0000f580: 203d 2050 6f69 6e74 2878 3d6c 6173 745f   = Point(x=last_
-0000f590: 6974 656d 2e65 6e64 5f70 6f69 6e74 2e78  item.end_point.x
-0000f5a0: 202b 2073 656c 662e 782c 2079 3d6c 6173   + self.x, y=las
-0000f5b0: 745f 6974 656d 2e65 6e64 5f70 6f69 6e74  t_item.end_point
-0000f5c0: 2e79 290a 2020 2020 2020 2020 7265 7475  .y).        retu
-0000f5d0: 726e 205f 7265 6e64 6572 5f6c 696e 6528  rn _render_line(
-0000f5e0: 656e 645f 706f 696e 7429 2c20 4c69 6e65  end_point), Line
-0000f5f0: 2865 6e64 5f70 6f69 6e74 292c 2069 6e69  (end_point), ini
-0000f600: 7469 616c 5f70 6f69 6e74 0a0a 2020 2020  tial_point..    
-0000f610: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
-0000f620: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
-0000f630: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
-0000f640: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-0000f650: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-0000f660: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-0000f670: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
-0000f680: 6d2c 2070 6678 0a20 2020 2029 3a0a 2020  m, pfx.    ):.  
-0000f690: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000f6a0: 2020 5265 6e64 6572 2074 6869 7320 7061    Render this pa
-0000f6b0: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
-0000f6c0: 7320 5044 4620 7265 7072 6573 656e 7461  s PDF representa
-0000f6d0: 7469 6f6e 2061 6e64 2070 726f 6475 6365  tion and produce
-0000f6e0: 2064 6562 7567 0a20 2020 2020 2020 2069   debug.        i
-0000f6f0: 6e66 6f72 6d61 7469 6f6e 2e0a 0a20 2020  nformation...   
-0000f700: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-0000f710: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
-0000f720: 7472 7920 2847 7261 7068 6963 7353 7461  try (GraphicsSta
-0000f730: 7465 4469 6374 5265 6769 7374 7279 293a  teDictRegistry):
-0000f740: 2074 6865 206f 776e 6572 2773 2067 7261   the owner's gra
-0000f750: 7068 6963 7320 7374 6174 650a 2020 2020  phics state.    
-0000f760: 2020 2020 2020 2020 2020 2020 6469 6374              dict
-0000f770: 696f 6e61 7279 2072 6567 6973 7472 792e  ionary registry.
-0000f780: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-0000f790: 6c65 2028 4772 6170 6869 6373 5374 796c  le (GraphicsStyl
-0000f7a0: 6529 3a20 7468 6520 6375 7272 656e 7420  e): the current 
-0000f7b0: 7265 736f 6c76 6564 2067 7261 7068 6963  resolved graphic
-0000f7c0: 7320 7374 796c 650a 2020 2020 2020 2020  s style.        
-0000f7d0: 2020 2020 6c61 7374 5f69 7465 6d3a 2074      last_item: t
-0000f7e0: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
-0000f7f0: 2065 6c65 6d65 6e74 2e0a 2020 2020 2020   element..      
-0000f800: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
-0000f810: 696e 743a 206c 6173 7420 706f 7369 7469  int: last positi
-0000f820: 6f6e 2073 6574 2062 7920 6120 224d 2220  on set by a "M" 
-0000f830: 6f72 2022 6d22 2063 6f6d 6d61 6e64 0a20  or "m" command. 
-0000f840: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-0000f850: 5f73 7472 6561 6d20 2869 6f2e 5465 7874  _stream (io.Text
-0000f860: 494f 293a 2074 6865 2073 7472 6561 6d20  IO): the stream 
-0000f870: 746f 2077 6869 6368 2074 6865 2064 6562  to which the deb
-0000f880: 7567 206f 7574 7075 7420 7368 6f75 6c64  ug output should
-0000f890: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
-0000f8a0: 2020 2020 7772 6974 7465 6e2e 2054 6869      written. Thi
-0000f8b0: 7320 6973 206e 6f74 2067 7561 7261 6e74  s is not guarant
-0000f8c0: 6565 6420 746f 2062 6520 7365 656b 6162  eed to be seekab
-0000f8d0: 6c65 2028 652e 672e 2069 7420 6d61 7920  le (e.g. it may 
-0000f8e0: 6265 2073 7464 6f75 7420 6f72 0a20 2020  be stdout or.   
-0000f8f0: 2020 2020 2020 2020 2020 2020 2073 7464               std
-0000f900: 6572 7229 2e0a 2020 2020 2020 2020 2020  err)..          
-0000f910: 2020 7066 7820 2873 7472 293a 2074 6865    pfx (str): the
-0000f920: 2063 7572 7265 6e74 2064 6562 7567 206f   current debug o
-0000f930: 7574 7075 7420 7072 6566 6978 2073 7472  utput prefix str
-0000f940: 696e 6720 286f 6e6c 7920 6e65 6564 6564  ing (only needed
-0000f950: 2069 6620 656d 6974 7469 6e67 0a20 2020   if emitting.   
-0000f960: 2020 2020 2020 2020 2020 2020 206d 6f72               mor
-0000f970: 6520 7468 616e 206f 6e65 206c 696e 6529  e than one line)
-0000f980: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-0000f990: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-0000f9a0: 5468 6520 7361 6d65 2074 7570 6c65 2061  The same tuple a
-0000f9b0: 7320 6052 656c 6174 6976 6548 6f72 697a  s `RelativeHoriz
-0000f9c0: 6f6e 7461 6c4c 696e 652e 7265 6e64 6572  ontalLine.render
-0000f9d0: 602e 0a20 2020 2020 2020 2022 2222 0a20  `..        """. 
-0000f9e0: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
-0000f9f0: 2064 6973 6162 6c65 3d75 6e75 7365 642d   disable=unused-
-0000fa00: 6172 6775 6d65 6e74 0a20 2020 2020 2020  argument.       
-0000fa10: 2072 656e 6465 7265 642c 2072 6573 6f6c   rendered, resol
-0000fa20: 7665 642c 2069 6e69 7469 616c 5f70 6f69  ved, initial_poi
-0000fa30: 6e74 203d 2073 656c 662e 7265 6e64 6572  nt = self.render
-0000fa40: 280a 2020 2020 2020 2020 2020 2020 6773  (.            gs
-0000fa50: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-0000fa60: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-0000fa70: 6974 6961 6c5f 706f 696e 740a 2020 2020  itial_point.    
-0000fa80: 2020 2020 290a 2020 2020 2020 2020 6465      ).        de
-0000fa90: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
-0000faa0: 2866 227b 7365 6c66 7d20 7265 736f 6c76  (f"{self} resolv
-0000fab0: 6564 2074 6f20 7b72 6573 6f6c 7665 647d  ed to {resolved}
-0000fac0: 5c6e 2229 0a0a 2020 2020 2020 2020 7265  \n")..        re
-0000fad0: 7475 726e 2072 656e 6465 7265 642c 2072  turn rendered, r
-0000fae0: 6573 6f6c 7665 642c 2069 6e69 7469 616c  esolved, initial
-0000faf0: 5f70 6f69 6e74 0a0a 0a63 6c61 7373 2056  _point...class V
-0000fb00: 6572 7469 6361 6c4c 696e 6528 4e61 6d65  erticalLine(Name
-0000fb10: 6454 7570 6c65 293a 0a20 2020 2022 2222  dTuple):.    """
-0000fb20: 0a20 2020 2041 2070 6174 6820 6c69 6e65  .    A path line
-0000fb30: 2065 6c65 6d65 6e74 2074 6861 7420 7461   element that ta
-0000fb40: 6b65 7320 6974 7320 6162 7363 6973 7361  kes its abscissa
-0000fb50: 2066 726f 6d20 7468 6520 656e 6420 6f66   from the end of
-0000fb60: 2074 6865 2070 7265 7669 6f75 7320 656c   the previous el
-0000fb70: 656d 656e 742e 0a0a 2020 2020 5365 653a  ement...    See:
-0000fb80: 2060 5061 696e 7465 6450 6174 682e 7665   `PaintedPath.ve
-0000fb90: 7274 6963 616c 5f6c 696e 655f 746f 600a  rtical_line_to`.
-0000fba0: 2020 2020 2222 220a 0a20 2020 2079 3a20      """..    y: 
-0000fbb0: 4e75 6d62 6572 0a20 2020 2022 2222 5468  Number.    """Th
-0000fbc0: 6520 6f72 6469 6e61 7465 206f 6620 7468  e ordinate of th
-0000fbd0: 6520 7665 7274 6963 616c 206c 696e 6527  e vertical line'
-0000fbe0: 7320 656e 6420 706f 696e 742e 2222 220a  s end point.""".
-0000fbf0: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
-0000fc00: 6375 6d65 6e74 0a20 2020 2064 6566 2072  cument.    def r
-0000fc10: 656e 6465 7228 7365 6c66 2c20 6773 645f  ender(self, gsd_
-0000fc20: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
-0000fc30: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-0000fc40: 6961 6c5f 706f 696e 7429 3a0a 2020 2020  ial_point):.    
-0000fc50: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000fc60: 5265 6e64 6572 2074 6869 7320 7061 7468  Render this path
-0000fc70: 2065 6c65 6d65 6e74 2074 6f20 6974 7320   element to its 
-0000fc80: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
-0000fc90: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
-0000fca0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
-0000fcb0: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
-0000fcc0: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
-0000fcd0: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
-0000fce0: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
-0000fcf0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
-0000fd00: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
-0000fd10: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
-0000fd20: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
-0000fd30: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
-0000fd40: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
-0000fd50: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
-0000fd60: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-0000fd70: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
-0000fd80: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-0000fd90: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-0000fda0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
-0000fdb0: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
-0000fdc0: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
-0000fdd0: 6f6d 6d61 6e64 0a0a 2020 2020 2020 2020  ommand..        
-0000fde0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-0000fdf0: 2020 2020 2061 2074 7570 6c65 206f 6620       a tuple of 
-0000fe00: 6028 7374 722c 206e 6577 5f6c 6173 745f  `(str, new_last_
-0000fe10: 6974 656d 2960 2c20 7768 6572 6520 606e  item)`, where `n
-0000fe20: 6577 5f6c 6173 745f 6974 656d 6020 6973  ew_last_item` is
-0000fe30: 2074 6865 2072 6573 6f6c 7665 640a 2020   the resolved.  
-0000fe40: 2020 2020 2020 2020 2020 604c 696e 6560            `Line`
-0000fe50: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0000fe60: 2020 2020 2020 2320 7079 6c69 6e74 3a20        # pylint: 
-0000fe70: 6469 7361 626c 653d 756e 7573 6564 2d61  disable=unused-a
-0000fe80: 7267 756d 656e 740a 2020 2020 2020 2020  rgument.        
-0000fe90: 656e 645f 706f 696e 7420 3d20 506f 696e  end_point = Poin
-0000fea0: 7428 783d 6c61 7374 5f69 7465 6d2e 656e  t(x=last_item.en
-0000feb0: 645f 706f 696e 742e 782c 2079 3d73 656c  d_point.x, y=sel
-0000fec0: 662e 7929 0a20 2020 2020 2020 2072 6574  f.y).        ret
-0000fed0: 7572 6e20 5f72 656e 6465 725f 6c69 6e65  urn _render_line
-0000fee0: 2865 6e64 5f70 6f69 6e74 292c 204c 696e  (end_point), Lin
-0000fef0: 6528 656e 645f 706f 696e 7429 2c20 696e  e(end_point), in
-0000ff00: 6974 6961 6c5f 706f 696e 740a 0a20 2020  itial_point..   
-0000ff10: 2040 666f 7263 655f 6e6f 646f 6375 6d65   @force_nodocume
-0000ff20: 6e74 0a20 2020 2064 6566 2072 656e 6465  nt.    def rende
-0000ff30: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
-0000ff40: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
-0000ff50: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
-0000ff60: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
-0000ff70: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
-0000ff80: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
-0000ff90: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000ffa0: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
-0000ffb0: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
-0000ffc0: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
-0000ffd0: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
-0000ffe0: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
-0000fff0: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
-00010000: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-00010010: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
-00010020: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
-00010030: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
-00010040: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
-00010050: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
-00010060: 2020 2020 2020 2020 2020 2020 2064 6963               dic
-00010070: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
-00010080: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-00010090: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
-000100a0: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
-000100b0: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
-000100c0: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
-000100d0: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
-000100e0: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
-000100f0: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
-00010100: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
-00010110: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
-00010120: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
-00010130: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
-00010140: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-00010150: 675f 7374 7265 616d 2028 696f 2e54 6578  g_stream (io.Tex
-00010160: 7449 4f29 3a20 7468 6520 7374 7265 616d  tIO): the stream
-00010170: 2074 6f20 7768 6963 6820 7468 6520 6465   to which the de
-00010180: 6275 6720 6f75 7470 7574 2073 686f 756c  bug output shoul
-00010190: 6420 6265 0a20 2020 2020 2020 2020 2020  d be.           
-000101a0: 2020 2020 2077 7269 7474 656e 2e20 5468       written. Th
-000101b0: 6973 2069 7320 6e6f 7420 6775 6172 616e  is is not guaran
-000101c0: 7465 6564 2074 6f20 6265 2073 6565 6b61  teed to be seeka
-000101d0: 626c 6520 2865 2e67 2e20 6974 206d 6179  ble (e.g. it may
-000101e0: 2062 6520 7374 646f 7574 206f 720a 2020   be stdout or.  
-000101f0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00010200: 6465 7272 292e 0a20 2020 2020 2020 2020  derr)..         
-00010210: 2020 2070 6678 2028 7374 7229 3a20 7468     pfx (str): th
-00010220: 6520 6375 7272 656e 7420 6465 6275 6720  e current debug 
-00010230: 6f75 7470 7574 2070 7265 6669 7820 7374  output prefix st
-00010240: 7269 6e67 2028 6f6e 6c79 206e 6565 6465  ring (only neede
-00010250: 6420 6966 2065 6d69 7474 696e 670a 2020  d if emitting.  
-00010260: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-00010270: 7265 2074 6861 6e20 6f6e 6520 6c69 6e65  re than one line
-00010280: 292e 0a0a 2020 2020 2020 2020 5265 7475  )...        Retu
-00010290: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-000102a0: 2054 6865 2073 616d 6520 7475 706c 6520   The same tuple 
-000102b0: 6173 2060 5665 7274 6963 616c 4c69 6e65  as `VerticalLine
-000102c0: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
-000102d0: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-000102e0: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-000102f0: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
-00010300: 2020 2020 2020 2020 7265 6e64 6572 6564          rendered
-00010310: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
-00010320: 6961 6c5f 706f 696e 7420 3d20 7365 6c66  ial_point = self
-00010330: 2e72 656e 6465 7228 0a20 2020 2020 2020  .render(.       
-00010340: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
-00010350: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
-00010360: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
-00010370: 6e74 0a20 2020 2020 2020 2029 0a20 2020  nt.        ).   
-00010380: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00010390: 6d2e 7772 6974 6528 6622 7b73 656c 667d  m.write(f"{self}
-000103a0: 2072 6573 6f6c 7665 6420 746f 207b 7265   resolved to {re
-000103b0: 736f 6c76 6564 7d5c 6e22 290a 0a20 2020  solved}\n")..   
-000103c0: 2020 2020 2072 6574 7572 6e20 7265 6e64       return rend
-000103d0: 6572 6564 2c20 7265 736f 6c76 6564 2c20  ered, resolved, 
-000103e0: 696e 6974 6961 6c5f 706f 696e 740a 0a0a  initial_point...
-000103f0: 636c 6173 7320 5265 6c61 7469 7665 5665  class RelativeVe
-00010400: 7274 6963 616c 4c69 6e65 284e 616d 6564  rticalLine(Named
-00010410: 5475 706c 6529 3a0a 2020 2020 2222 220a  Tuple):.    """.
-00010420: 2020 2020 4120 7061 7468 206c 696e 6520      A path line 
-00010430: 656c 656d 656e 7420 7468 6174 2074 616b  element that tak
-00010440: 6573 2069 7473 2061 6273 6369 7373 6120  es its abscissa 
-00010450: 6672 6f6d 2074 6865 2065 6e64 206f 6620  from the end of 
-00010460: 7468 6520 7072 6576 696f 7573 2065 6c65  the previous ele
-00010470: 6d65 6e74 2061 6e64 0a20 2020 2063 6f6d  ment and.    com
-00010480: 7075 7465 7320 6974 7320 6f72 6469 6e61  putes its ordina
-00010490: 7465 206f 6666 7365 7420 6672 6f6d 2074  te offset from t
-000104a0: 6865 2065 6e64 206f 6620 7468 6174 2065  he end of that e
-000104b0: 6c65 6d65 6e74 2e0a 0a20 2020 2053 6565  lement...    See
-000104c0: 3a20 6050 6169 6e74 6564 5061 7468 2e76  : `PaintedPath.v
-000104d0: 6572 7469 6361 6c5f 6c69 6e65 5f72 656c  ertical_line_rel
-000104e0: 6174 6976 6560 0a20 2020 2022 2222 0a0a  ative`.    """..
-000104f0: 2020 2020 793a 204e 756d 6265 720a 2020      y: Number.  
-00010500: 2020 2222 220a 2020 2020 5468 6520 6f72    """.    The or
-00010510: 6469 6e61 7465 206f 6620 7468 6520 7665  dinate of the ve
-00010520: 7274 6963 616c 206c 696e 6527 7320 656e  rtical line's en
-00010530: 6420 706f 696e 7420 7265 6c61 7469 7665  d point relative
-00010540: 2074 6f20 7468 6520 6f72 6469 6e61 7465   to the ordinate
-00010550: 206f 6620 7468 650a 2020 2020 7072 6576   of the.    prev
-00010560: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
-00010570: 742e 0a20 2020 2022 2222 0a0a 2020 2020  t..    """..    
-00010580: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
-00010590: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
-000105a0: 2873 656c 662c 2067 7364 5f72 6567 6973  (self, gsd_regis
-000105b0: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
-000105c0: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
-000105d0: 6f69 6e74 293a 0a20 2020 2020 2020 2022  oint):.        "
-000105e0: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
-000105f0: 7220 7468 6973 2070 6174 6820 656c 656d  r this path elem
-00010600: 656e 7420 746f 2069 7473 2050 4446 2072  ent to its PDF r
-00010610: 6570 7265 7365 6e74 6174 696f 6e2e 0a0a  epresentation...
-00010620: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00010630: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
-00010640: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
-00010650: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
-00010660: 7929 3a20 7468 6520 6f77 6e65 7227 7320  y): the owner's 
-00010670: 6772 6170 6869 6373 2073 7461 7465 0a20  graphics state. 
-00010680: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00010690: 6963 7469 6f6e 6172 7920 7265 6769 7374  ictionary regist
-000106a0: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
-000106b0: 7374 796c 6520 2847 7261 7068 6963 7353  style (GraphicsS
-000106c0: 7479 6c65 293a 2074 6865 2063 7572 7265  tyle): the curre
-000106d0: 6e74 2072 6573 6f6c 7665 6420 6772 6170  nt resolved grap
-000106e0: 6869 6373 2073 7479 6c65 0a20 2020 2020  hics style.     
-000106f0: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
-00010700: 3a20 7468 6520 7072 6576 696f 7573 2070  : the previous p
-00010710: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
-00010720: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
-00010730: 5f70 6f69 6e74 3a20 6c61 7374 2070 6f73  _point: last pos
-00010740: 6974 696f 6e20 7365 7420 6279 2061 2022  ition set by a "
-00010750: 4d22 206f 7220 226d 2220 636f 6d6d 616e  M" or "m" comman
-00010760: 640a 0a20 2020 2020 2020 2052 6574 7572  d..        Retur
-00010770: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00010780: 6120 7475 706c 6520 6f66 2060 2873 7472  a tuple of `(str
-00010790: 2c20 6e65 775f 6c61 7374 5f69 7465 6d29  , new_last_item)
-000107a0: 602c 2077 6865 7265 2060 6e65 775f 6c61  `, where `new_la
-000107b0: 7374 5f69 7465 6d60 2069 7320 7468 6520  st_item` is the 
-000107c0: 7265 736f 6c76 6564 0a20 2020 2020 2020  resolved.       
-000107d0: 2020 2020 2060 4c69 6e65 602e 0a20 2020       `Line`..   
-000107e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000107f0: 2023 2070 796c 696e 743a 2064 6973 6162   # pylint: disab
-00010800: 6c65 3d75 6e75 7365 642d 6172 6775 6d65  le=unused-argume
-00010810: 6e74 0a20 2020 2020 2020 2065 6e64 5f70  nt.        end_p
-00010820: 6f69 6e74 203d 2050 6f69 6e74 2878 3d6c  oint = Point(x=l
-00010830: 6173 745f 6974 656d 2e65 6e64 5f70 6f69  ast_item.end_poi
-00010840: 6e74 2e78 2c20 793d 6c61 7374 5f69 7465  nt.x, y=last_ite
-00010850: 6d2e 656e 645f 706f 696e 742e 7920 2b20  m.end_point.y + 
-00010860: 7365 6c66 2e79 290a 2020 2020 2020 2020  self.y).        
-00010870: 7265 7475 726e 205f 7265 6e64 6572 5f6c  return _render_l
-00010880: 696e 6528 656e 645f 706f 696e 7429 2c20  ine(end_point), 
-00010890: 4c69 6e65 2865 6e64 5f70 6f69 6e74 292c  Line(end_point),
-000108a0: 2069 6e69 7469 616c 5f70 6f69 6e74 0a0a   initial_point..
-000108b0: 2020 2020 4066 6f72 6365 5f6e 6f64 6f63      @force_nodoc
-000108c0: 756d 656e 740a 2020 2020 6465 6620 7265  ument.    def re
-000108d0: 6e64 6572 5f64 6562 7567 280a 2020 2020  nder_debug(.    
-000108e0: 2020 2020 7365 6c66 2c20 6773 645f 7265      self, gsd_re
-000108f0: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
-00010900: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
-00010910: 6c5f 706f 696e 742c 2064 6562 7567 5f73  l_point, debug_s
-00010920: 7472 6561 6d2c 2070 6678 0a20 2020 2029  tream, pfx.    )
-00010930: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00010940: 2020 2020 2020 5265 6e64 6572 2074 6869        Render thi
-00010950: 7320 7061 7468 2065 6c65 6d65 6e74 2074  s path element t
-00010960: 6f20 6974 7320 5044 4620 7265 7072 6573  o its PDF repres
-00010970: 656e 7461 7469 6f6e 2061 6e64 2070 726f  entation and pro
-00010980: 6475 6365 2064 6562 7567 0a20 2020 2020  duce debug.     
-00010990: 2020 2069 6e66 6f72 6d61 7469 6f6e 2e0a     information..
-000109a0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-000109b0: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
-000109c0: 6567 6973 7472 7920 2847 7261 7068 6963  egistry (Graphic
-000109d0: 7353 7461 7465 4469 6374 5265 6769 7374  sStateDictRegist
-000109e0: 7279 293a 2074 6865 206f 776e 6572 2773  ry): the owner's
-000109f0: 2067 7261 7068 6963 7320 7374 6174 650a   graphics state.
-00010a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010a10: 6469 6374 696f 6e61 7279 2072 6567 6973  dictionary regis
-00010a20: 7472 792e 0a20 2020 2020 2020 2020 2020  try..           
-00010a30: 2073 7479 6c65 2028 4772 6170 6869 6373   style (Graphics
-00010a40: 5374 796c 6529 3a20 7468 6520 6375 7272  Style): the curr
-00010a50: 656e 7420 7265 736f 6c76 6564 2067 7261  ent resolved gra
-00010a60: 7068 6963 7320 7374 796c 650a 2020 2020  phics style.    
-00010a70: 2020 2020 2020 2020 6c61 7374 5f69 7465          last_ite
-00010a80: 6d3a 2074 6865 2070 7265 7669 6f75 7320  m: the previous 
-00010a90: 7061 7468 2065 6c65 6d65 6e74 2e0a 2020  path element..  
-00010aa0: 2020 2020 2020 2020 2020 696e 6974 6961            initia
-00010ab0: 6c5f 706f 696e 743a 206c 6173 7420 706f  l_point: last po
-00010ac0: 7369 7469 6f6e 2073 6574 2062 7920 6120  sition set by a 
-00010ad0: 224d 2220 6f72 2022 6d22 2063 6f6d 6d61  "M" or "m" comma
-00010ae0: 6e64 0a20 2020 2020 2020 2020 2020 2064  nd.            d
-00010af0: 6562 7567 5f73 7472 6561 6d20 2869 6f2e  ebug_stream (io.
-00010b00: 5465 7874 494f 293a 2074 6865 2073 7472  TextIO): the str
-00010b10: 6561 6d20 746f 2077 6869 6368 2074 6865  eam to which the
-00010b20: 2064 6562 7567 206f 7574 7075 7420 7368   debug output sh
-00010b30: 6f75 6c64 2062 650a 2020 2020 2020 2020  ould be.        
-00010b40: 2020 2020 2020 2020 7772 6974 7465 6e2e          written.
-00010b50: 2054 6869 7320 6973 206e 6f74 2067 7561   This is not gua
-00010b60: 7261 6e74 6565 6420 746f 2062 6520 7365  ranteed to be se
-00010b70: 656b 6162 6c65 2028 652e 672e 2069 7420  ekable (e.g. it 
-00010b80: 6d61 7920 6265 2073 7464 6f75 7420 6f72  may be stdout or
-00010b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010ba0: 2073 7464 6572 7229 2e0a 2020 2020 2020   stderr)..      
-00010bb0: 2020 2020 2020 7066 7820 2873 7472 293a        pfx (str):
-00010bc0: 2074 6865 2063 7572 7265 6e74 2064 6562   the current deb
-00010bd0: 7567 206f 7574 7075 7420 7072 6566 6978  ug output prefix
-00010be0: 2073 7472 696e 6720 286f 6e6c 7920 6e65   string (only ne
-00010bf0: 6564 6564 2069 6620 656d 6974 7469 6e67  eded if emitting
-00010c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010c10: 206d 6f72 6520 7468 616e 206f 6e65 206c   more than one l
-00010c20: 696e 6529 2e0a 0a20 2020 2020 2020 2052  ine)...        R
-00010c30: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-00010c40: 2020 2020 5468 6520 7361 6d65 2074 7570      The same tup
-00010c50: 6c65 2061 7320 6052 656c 6174 6976 6556  le as `RelativeV
-00010c60: 6572 7469 6361 6c4c 696e 652e 7265 6e64  erticalLine.rend
-00010c70: 6572 602e 0a20 2020 2020 2020 2022 2222  er`..        """
-00010c80: 0a20 2020 2020 2020 2023 2070 796c 696e  .        # pylin
-00010c90: 743a 2064 6973 6162 6c65 3d75 6e75 7365  t: disable=unuse
-00010ca0: 642d 6172 6775 6d65 6e74 0a20 2020 2020  d-argument.     
-00010cb0: 2020 2072 656e 6465 7265 642c 2072 6573     rendered, res
-00010cc0: 6f6c 7665 642c 2069 6e69 7469 616c 5f70  olved, initial_p
-00010cd0: 6f69 6e74 203d 2073 656c 662e 7265 6e64  oint = self.rend
-00010ce0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-00010cf0: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-00010d00: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-00010d10: 696e 6974 6961 6c5f 706f 696e 740a 2020  initial_point.  
-00010d20: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00010d30: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
-00010d40: 7465 2866 227b 7365 6c66 7d20 7265 736f  te(f"{self} reso
-00010d50: 6c76 6564 2074 6f20 7b72 6573 6f6c 7665  lved to {resolve
-00010d60: 647d 5c6e 2229 0a0a 2020 2020 2020 2020  d}\n")..        
-00010d70: 7265 7475 726e 2072 656e 6465 7265 642c  return rendered,
-00010d80: 2072 6573 6f6c 7665 642c 2069 6e69 7469   resolved, initi
-00010d90: 616c 5f70 6f69 6e74 0a0a 0a63 6c61 7373  al_point...class
-00010da0: 2042 657a 6965 7243 7572 7665 284e 616d   BezierCurve(Nam
-00010db0: 6564 5475 706c 6529 3a0a 2020 2020 2222  edTuple):.    ""
-00010dc0: 220a 2020 2020 4120 6375 6269 6320 42c3  ".    A cubic B.
-00010dd0: a97a 6965 7220 6375 7276 6520 7061 7468  .zier curve path
-00010de0: 2065 6c65 6d65 6e74 2e0a 0a20 2020 2054   element...    T
-00010df0: 6869 7320 6472 6177 7320 6120 42c3 a97a  his draws a B..z
-00010e00: 6965 7220 6375 7276 6520 7061 7261 6d65  ier curve parame
-00010e10: 7465 7269 7a65 6420 6279 2074 6865 2065  terized by the e
-00010e20: 6e64 2070 6f69 6e74 206f 6620 7468 6520  nd point of the 
-00010e30: 7072 6576 696f 7573 2070 6174 680a 2020  previous path.  
-00010e40: 2020 656c 656d 656e 742c 2074 776f 206f    element, two o
-00010e50: 6666 2d63 7572 7665 2063 6f6e 7472 6f6c  ff-curve control
-00010e60: 2070 6f69 6e74 732c 2061 6e64 2061 6e20   points, and an 
-00010e70: 656e 6420 706f 696e 742e 0a0a 2020 2020  end point...    
-00010e80: 5365 653a 2060 5061 696e 7465 6450 6174  See: `PaintedPat
-00010e90: 682e 6375 7276 655f 746f 600a 2020 2020  h.curve_to`.    
-00010ea0: 2222 220a 0a20 2020 2063 313a 2050 6f69  """..    c1: Poi
-00010eb0: 6e74 0a20 2020 2022 2222 5468 6520 6375  nt.    """The cu
-00010ec0: 7276 6527 7320 6669 7273 7420 636f 6e74  rve's first cont
-00010ed0: 726f 6c20 706f 696e 742e 2222 220a 2020  rol point.""".  
-00010ee0: 2020 6332 3a20 506f 696e 740a 2020 2020    c2: Point.    
-00010ef0: 2222 2254 6865 2063 7572 7665 2773 2073  """The curve's s
-00010f00: 6563 6f6e 6420 636f 6e74 726f 6c20 706f  econd control po
-00010f10: 696e 742e 2222 220a 2020 2020 656e 643a  int.""".    end:
-00010f20: 2050 6f69 6e74 0a20 2020 2022 2222 5468   Point.    """Th
-00010f30: 6520 6375 7276 6527 7320 656e 6420 706f  e curve's end po
-00010f40: 696e 742e 2222 220a 0a20 2020 2040 7072  int."""..    @pr
-00010f50: 6f70 6572 7479 0a20 2020 2064 6566 2065  operty.    def e
-00010f60: 6e64 5f70 6f69 6e74 2873 656c 6629 3a0a  nd_point(self):.
-00010f70: 2020 2020 2020 2020 2222 2254 6865 2065          """The e
-00010f80: 6e64 2070 6f69 6e74 206f 6620 7468 6973  nd point of this
-00010f90: 2070 6174 6820 656c 656d 656e 742e 2222   path element.""
-00010fa0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00010fb0: 2073 656c 662e 656e 640a 0a20 2020 2040   self.end..    @
-00010fc0: 666f 7263 655f 6e6f 646f 6375 6d65 6e74  force_nodocument
-00010fd0: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
-00010fe0: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-00010ff0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-00011000: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-00011010: 696e 7429 3a0a 2020 2020 2020 2020 2222  int):.        ""
-00011020: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
-00011030: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
-00011040: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
-00011050: 7072 6573 656e 7461 7469 6f6e 2e0a 0a20  presentation... 
-00011060: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00011070: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-00011080: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
-00011090: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
-000110a0: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
-000110b0: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
-000110c0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-000110d0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
-000110e0: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
-000110f0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-00011100: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
-00011110: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
-00011120: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
-00011130: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-00011140: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-00011150: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
-00011160: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00011170: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
-00011180: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
-00011190: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
-000111a0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-000111b0: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-000111c0: 2074 7570 6c65 206f 6620 6028 7374 722c   tuple of `(str,
-000111d0: 206e 6577 5f6c 6173 745f 6974 656d 2960   new_last_item)`
-000111e0: 2c20 7768 6572 6520 606e 6577 5f6c 6173  , where `new_las
-000111f0: 745f 6974 656d 6020 6973 2060 7365 6c66  t_item` is `self
-00011200: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00011210: 2020 2020 2020 2320 7079 6c69 6e74 3a20        # pylint: 
-00011220: 6469 7361 626c 653d 756e 7573 6564 2d61  disable=unused-a
-00011230: 7267 756d 656e 740a 2020 2020 2020 2020  rgument.        
-00011240: 7265 7475 726e 205f 7265 6e64 6572 5f63  return _render_c
-00011250: 7572 7665 2873 656c 662e 6331 2c20 7365  urve(self.c1, se
-00011260: 6c66 2e63 322c 2073 656c 662e 656e 6429  lf.c2, self.end)
-00011270: 2c20 7365 6c66 2c20 696e 6974 6961 6c5f  , self, initial_
-00011280: 706f 696e 740a 0a20 2020 2040 666f 7263  point..    @forc
-00011290: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
-000112a0: 2064 6566 2072 656e 6465 725f 6465 6275   def render_debu
-000112b0: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-000112c0: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-000112d0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-000112e0: 2069 6e69 7469 616c 5f70 6f69 6e74 2c20   initial_point, 
-000112f0: 6465 6275 675f 7374 7265 616d 2c20 7066  debug_stream, pf
-00011300: 780a 2020 2020 293a 0a20 2020 2020 2020  x.    ):.       
-00011310: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
-00011320: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
-00011330: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
-00011340: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
-00011350: 616e 6420 7072 6f64 7563 6520 6465 6275  and produce debu
-00011360: 670a 2020 2020 2020 2020 696e 666f 726d  g.        inform
-00011370: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
-00011380: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-00011390: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
-000113a0: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
-000113b0: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
-000113c0: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
-000113d0: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
-000113e0: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
-000113f0: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
-00011400: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
-00011410: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
-00011420: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
-00011430: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
-00011440: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
-00011450: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
-00011460: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-00011470: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
-00011480: 2069 6e69 7469 616c 5f70 6f69 6e74 3a20   initial_point: 
-00011490: 6c61 7374 2070 6f73 6974 696f 6e20 7365  last position se
-000114a0: 7420 6279 2061 2022 4d22 206f 7220 226d  t by a "M" or "m
-000114b0: 2220 636f 6d6d 616e 640a 2020 2020 2020  " command.      
-000114c0: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
-000114d0: 616d 2028 696f 2e54 6578 7449 4f29 3a20  am (io.TextIO): 
-000114e0: 7468 6520 7374 7265 616d 2074 6f20 7768  the stream to wh
-000114f0: 6963 6820 7468 6520 6465 6275 6720 6f75  ich the debug ou
-00011500: 7470 7574 2073 686f 756c 6420 6265 0a20  tput should be. 
-00011510: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00011520: 7269 7474 656e 2e20 5468 6973 2069 7320  ritten. This is 
-00011530: 6e6f 7420 6775 6172 616e 7465 6564 2074  not guaranteed t
-00011540: 6f20 6265 2073 6565 6b61 626c 6520 2865  o be seekable (e
-00011550: 2e67 2e20 6974 206d 6179 2062 6520 7374  .g. it may be st
-00011560: 646f 7574 206f 720a 2020 2020 2020 2020  dout or.        
-00011570: 2020 2020 2020 2020 7374 6465 7272 292e          stderr).
-00011580: 0a20 2020 2020 2020 2020 2020 2070 6678  .            pfx
-00011590: 2028 7374 7229 3a20 7468 6520 6375 7272   (str): the curr
-000115a0: 656e 7420 6465 6275 6720 6f75 7470 7574  ent debug output
-000115b0: 2070 7265 6669 7820 7374 7269 6e67 2028   prefix string (
-000115c0: 6f6e 6c79 206e 6565 6465 6420 6966 2065  only needed if e
-000115d0: 6d69 7474 696e 670a 2020 2020 2020 2020  mitting.        
-000115e0: 2020 2020 2020 2020 6d6f 7265 2074 6861          more tha
-000115f0: 6e20 6f6e 6520 6c69 6e65 292e 0a0a 2020  n one line)...  
-00011600: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
-00011610: 2020 2020 2020 2020 2020 2054 6865 2073             The s
-00011620: 616d 6520 7475 706c 6520 6173 2060 4265  ame tuple as `Be
-00011630: 7a69 6572 4375 7276 652e 7265 6e64 6572  zierCurve.render
-00011640: 602e 0a20 2020 2020 2020 2022 2222 0a20  `..        """. 
-00011650: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
-00011660: 2064 6973 6162 6c65 3d75 6e75 7365 642d   disable=unused-
-00011670: 6172 6775 6d65 6e74 0a20 2020 2020 2020  argument.       
-00011680: 2072 656e 6465 7265 642c 2072 6573 6f6c   rendered, resol
-00011690: 7665 642c 2069 6e69 7469 616c 5f70 6f69  ved, initial_poi
-000116a0: 6e74 203d 2073 656c 662e 7265 6e64 6572  nt = self.render
-000116b0: 280a 2020 2020 2020 2020 2020 2020 6773  (.            gs
-000116c0: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-000116d0: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-000116e0: 6974 6961 6c5f 706f 696e 740a 2020 2020  itial_point.    
-000116f0: 2020 2020 290a 2020 2020 2020 2020 6465      ).        de
-00011700: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
-00011710: 2873 7472 2873 656c 6629 202b 2022 5c6e  (str(self) + "\n
-00011720: 2229 0a0a 2020 2020 2020 2020 7265 7475  ")..        retu
-00011730: 726e 2072 656e 6465 7265 642c 2072 6573  rn rendered, res
-00011740: 6f6c 7665 642c 2069 6e69 7469 616c 5f70  olved, initial_p
-00011750: 6f69 6e74 0a0a 0a63 6c61 7373 2052 656c  oint...class Rel
-00011760: 6174 6976 6542 657a 6965 7243 7572 7665  ativeBezierCurve
-00011770: 284e 616d 6564 5475 706c 6529 3a0a 2020  (NamedTuple):.  
-00011780: 2020 2222 220a 2020 2020 4120 6375 6269    """.    A cubi
-00011790: 6320 42c3 a97a 6965 7220 6375 7276 6520  c B..zier curve 
-000117a0: 7061 7468 2065 6c65 6d65 6e74 2077 686f  path element who
-000117b0: 7365 2070 6f69 6e74 7320 6172 6520 7370  se points are sp
-000117c0: 6563 6966 6965 6420 7265 6c61 7469 7665  ecified relative
-000117d0: 2074 6f20 7468 6520 656e 640a 2020 2020   to the end.    
-000117e0: 706f 696e 7420 6f66 2074 6865 2070 7265  point of the pre
-000117f0: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-00011800: 6e74 2e0a 0a20 2020 2053 6565 3a20 6050  nt...    See: `P
-00011810: 6169 6e74 6564 5061 7468 2e63 7572 7665  aintedPath.curve
-00011820: 5f72 656c 6174 6976 6560 0a20 2020 2022  _relative`.    "
-00011830: 2222 0a0a 2020 2020 6331 3a20 506f 696e  ""..    c1: Poin
-00011840: 740a 2020 2020 2222 220a 2020 2020 5468  t.    """.    Th
-00011850: 6520 6375 7276 6527 7320 6669 7273 7420  e curve's first 
-00011860: 636f 6e74 726f 6c20 706f 696e 7420 7265  control point re
-00011870: 6c61 7469 7665 2074 6f20 7468 6520 656e  lative to the en
-00011880: 6420 6f66 2074 6865 2070 7265 7669 6f75  d of the previou
-00011890: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
-000118a0: 2020 2020 2222 220a 2020 2020 6332 3a20      """.    c2: 
-000118b0: 506f 696e 740a 2020 2020 2222 220a 2020  Point.    """.  
-000118c0: 2020 5468 6520 6375 7276 6527 7320 7365    The curve's se
-000118d0: 636f 6e64 2063 6f6e 7472 6f6c 2070 6f69  cond control poi
-000118e0: 6e74 2072 656c 6174 6976 6520 746f 2074  nt relative to t
-000118f0: 6865 2065 6e64 206f 6620 7468 6520 7072  he end of the pr
-00011900: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-00011910: 656e 742e 0a20 2020 2022 2222 0a20 2020  ent..    """.   
-00011920: 2065 6e64 3a20 506f 696e 740a 2020 2020   end: Point.    
-00011930: 2222 2254 6865 2063 7572 7665 2773 2065  """The curve's e
-00011940: 6e64 2070 6f69 6e74 2072 656c 6174 6976  nd point relativ
-00011950: 6520 746f 2074 6865 2065 6e64 206f 6620  e to the end of 
-00011960: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
-00011970: 6820 656c 656d 656e 742e 2222 220a 0a20  h element.""".. 
-00011980: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-00011990: 6d65 6e74 0a20 2020 2064 6566 2072 656e  ment.    def ren
-000119a0: 6465 7228 7365 6c66 2c20 6773 645f 7265  der(self, gsd_re
-000119b0: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
-000119c0: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
-000119d0: 6c5f 706f 696e 7429 3a0a 2020 2020 2020  l_point):.      
-000119e0: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
-000119f0: 6e64 6572 2074 6869 7320 7061 7468 2065  nder this path e
-00011a00: 6c65 6d65 6e74 2074 6f20 6974 7320 5044  lement to its PD
-00011a10: 4620 7265 7072 6573 656e 7461 7469 6f6e  F representation
-00011a20: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-00011a30: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
-00011a40: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
-00011a50: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
-00011a60: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
-00011a70: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
-00011a80: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00011a90: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
-00011aa0: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
-00011ab0: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
-00011ac0: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
-00011ad0: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
-00011ae0: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
-00011af0: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
-00011b00: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
-00011b10: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
-00011b20: 2020 2020 2020 2020 2020 2020 696e 6974              init
-00011b30: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
-00011b40: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
-00011b50: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
-00011b60: 6d61 6e64 0a0a 2020 2020 2020 2020 5265  mand..        Re
-00011b70: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-00011b80: 2020 2061 2074 7570 6c65 206f 6620 6028     a tuple of `(
-00011b90: 7374 722c 206e 6577 5f6c 6173 745f 6974  str, new_last_it
-00011ba0: 656d 2960 2c20 7768 6572 6520 606e 6577  em)`, where `new
-00011bb0: 5f6c 6173 745f 6974 656d 6020 6973 2074  _last_item` is t
-00011bc0: 6865 2072 6573 6f6c 7665 640a 2020 2020  he resolved.    
-00011bd0: 2020 2020 2020 2020 6042 657a 6965 7243          `BezierC
-00011be0: 7572 7665 602e 0a20 2020 2020 2020 2022  urve`..        "
-00011bf0: 2222 0a20 2020 2020 2020 2023 2070 796c  "".        # pyl
-00011c00: 696e 743a 2064 6973 6162 6c65 3d75 6e75  int: disable=unu
-00011c10: 7365 642d 6172 6775 6d65 6e74 0a20 2020  sed-argument.   
-00011c20: 2020 2020 206c 6173 745f 706f 696e 7420       last_point 
-00011c30: 3d20 6c61 7374 5f69 7465 6d2e 656e 645f  = last_item.end_
-00011c40: 706f 696e 740a 0a20 2020 2020 2020 2063  point..        c
-00011c50: 3120 3d20 6c61 7374 5f70 6f69 6e74 202b  1 = last_point +
-00011c60: 2073 656c 662e 6331 0a20 2020 2020 2020   self.c1.       
-00011c70: 2063 3220 3d20 6c61 7374 5f70 6f69 6e74   c2 = last_point
-00011c80: 202b 2073 656c 662e 6332 0a20 2020 2020   + self.c2.     
-00011c90: 2020 2065 6e64 203d 206c 6173 745f 706f     end = last_po
-00011ca0: 696e 7420 2b20 7365 6c66 2e65 6e64 0a0a  int + self.end..
-00011cb0: 2020 2020 2020 2020 7265 7475 726e 2028          return (
-00011cc0: 0a20 2020 2020 2020 2020 2020 205f 7265  .            _re
-00011cd0: 6e64 6572 5f63 7572 7665 2863 312c 2063  nder_curve(c1, c
-00011ce0: 322c 2065 6e64 292c 0a20 2020 2020 2020  2, end),.       
-00011cf0: 2020 2020 2042 657a 6965 7243 7572 7665       BezierCurve
-00011d00: 2863 313d 6331 2c20 6332 3d63 322c 2065  (c1=c1, c2=c2, e
-00011d10: 6e64 3d65 6e64 292c 0a20 2020 2020 2020  nd=end),.       
-00011d20: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-00011d30: 6e74 2c0a 2020 2020 2020 2020 290a 0a20  nt,.        ).. 
-00011d40: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-00011d50: 6d65 6e74 0a20 2020 2064 6566 2072 656e  ment.    def ren
-00011d60: 6465 725f 6465 6275 6728 0a20 2020 2020  der_debug(.     
-00011d70: 2020 2073 656c 662c 2067 7364 5f72 6567     self, gsd_reg
-00011d80: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
-00011d90: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
-00011da0: 5f70 6f69 6e74 2c20 6465 6275 675f 7374  _point, debug_st
-00011db0: 7265 616d 2c20 7066 780a 2020 2020 293a  ream, pfx.    ):
-00011dc0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00011dd0: 2020 2020 2052 656e 6465 7220 7468 6973       Render this
-00011de0: 2070 6174 6820 656c 656d 656e 7420 746f   path element to
-00011df0: 2069 7473 2050 4446 2072 6570 7265 7365   its PDF represe
-00011e00: 6e74 6174 696f 6e20 616e 6420 7072 6f64  ntation and prod
-00011e10: 7563 6520 6465 6275 670a 2020 2020 2020  uce debug.      
-00011e20: 2020 696e 666f 726d 6174 696f 6e2e 0a0a    information...
-00011e30: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00011e40: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
-00011e50: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
-00011e60: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
-00011e70: 7929 3a20 7468 6520 6f77 6e65 7227 7320  y): the owner's 
-00011e80: 6772 6170 6869 6373 2073 7461 7465 0a20  graphics state. 
-00011e90: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00011ea0: 6963 7469 6f6e 6172 7920 7265 6769 7374  ictionary regist
-00011eb0: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
-00011ec0: 7374 796c 6520 2847 7261 7068 6963 7353  style (GraphicsS
-00011ed0: 7479 6c65 293a 2074 6865 2063 7572 7265  tyle): the curre
-00011ee0: 6e74 2072 6573 6f6c 7665 6420 6772 6170  nt resolved grap
-00011ef0: 6869 6373 2073 7479 6c65 0a20 2020 2020  hics style.     
-00011f00: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
-00011f10: 3a20 7468 6520 7072 6576 696f 7573 2070  : the previous p
-00011f20: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
-00011f30: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
-00011f40: 5f70 6f69 6e74 3a20 6c61 7374 2070 6f73  _point: last pos
-00011f50: 6974 696f 6e20 7365 7420 6279 2061 2022  ition set by a "
-00011f60: 4d22 206f 7220 226d 2220 636f 6d6d 616e  M" or "m" comman
-00011f70: 640a 2020 2020 2020 2020 2020 2020 6465  d.            de
-00011f80: 6275 675f 7374 7265 616d 2028 696f 2e54  bug_stream (io.T
-00011f90: 6578 7449 4f29 3a20 7468 6520 7374 7265  extIO): the stre
-00011fa0: 616d 2074 6f20 7768 6963 6820 7468 6520  am to which the 
-00011fb0: 6465 6275 6720 6f75 7470 7574 2073 686f  debug output sho
-00011fc0: 756c 6420 6265 0a20 2020 2020 2020 2020  uld be.         
-00011fd0: 2020 2020 2020 2077 7269 7474 656e 2e20         written. 
-00011fe0: 5468 6973 2069 7320 6e6f 7420 6775 6172  This is not guar
-00011ff0: 616e 7465 6564 2074 6f20 6265 2073 6565  anteed to be see
-00012000: 6b61 626c 6520 2865 2e67 2e20 6974 206d  kable (e.g. it m
-00012010: 6179 2062 6520 7374 646f 7574 206f 720a  ay be stdout or.
-00012020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012030: 7374 6465 7272 292e 0a20 2020 2020 2020  stderr)..       
-00012040: 2020 2020 2070 6678 2028 7374 7229 3a20       pfx (str): 
-00012050: 7468 6520 6375 7272 656e 7420 6465 6275  the current debu
-00012060: 6720 6f75 7470 7574 2070 7265 6669 7820  g output prefix 
-00012070: 7374 7269 6e67 2028 6f6e 6c79 206e 6565  string (only nee
-00012080: 6465 6420 6966 2065 6d69 7474 696e 670a  ded if emitting.
-00012090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000120a0: 6d6f 7265 2074 6861 6e20 6f6e 6520 6c69  more than one li
-000120b0: 6e65 292e 0a0a 2020 2020 2020 2020 5265  ne)...        Re
-000120c0: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-000120d0: 2020 2054 6865 2073 616d 6520 7475 706c     The same tupl
-000120e0: 6520 6173 2060 5265 6c61 7469 7665 4265  e as `RelativeBe
-000120f0: 7a69 6572 4375 7276 652e 7265 6e64 6572  zierCurve.render
-00012100: 602e 0a20 2020 2020 2020 2022 2222 0a20  `..        """. 
-00012110: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
-00012120: 2064 6973 6162 6c65 3d75 6e75 7365 642d   disable=unused-
-00012130: 6172 6775 6d65 6e74 0a20 2020 2020 2020  argument.       
-00012140: 2072 656e 6465 7265 642c 2072 6573 6f6c   rendered, resol
-00012150: 7665 642c 2069 6e69 7469 616c 5f70 6f69  ved, initial_poi
-00012160: 6e74 203d 2073 656c 662e 7265 6e64 6572  nt = self.render
-00012170: 280a 2020 2020 2020 2020 2020 2020 6773  (.            gs
-00012180: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-00012190: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-000121a0: 6974 6961 6c5f 706f 696e 740a 2020 2020  itial_point.    
-000121b0: 2020 2020 290a 2020 2020 2020 2020 6465      ).        de
-000121c0: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
-000121d0: 2866 227b 7365 6c66 7d20 7265 736f 6c76  (f"{self} resolv
-000121e0: 6564 2074 6f20 7b72 6573 6f6c 7665 647d  ed to {resolved}
-000121f0: 5c6e 2229 0a0a 2020 2020 2020 2020 7265  \n")..        re
-00012200: 7475 726e 2072 656e 6465 7265 642c 2072  turn rendered, r
-00012210: 6573 6f6c 7665 642c 2069 6e69 7469 616c  esolved, initial
-00012220: 5f70 6f69 6e74 0a0a 0a63 6c61 7373 2051  _point...class Q
-00012230: 7561 6472 6174 6963 4265 7a69 6572 4375  uadraticBezierCu
-00012240: 7276 6528 4e61 6d65 6454 7570 6c65 293a  rve(NamedTuple):
-00012250: 0a20 2020 2022 2222 0a20 2020 2041 2071  .    """.    A q
-00012260: 7561 6472 6174 6963 2042 c3a9 7a69 6572  uadratic B..zier
-00012270: 2063 7572 7665 2070 6174 6820 656c 656d   curve path elem
-00012280: 656e 742e 0a0a 2020 2020 5468 6973 2064  ent...    This d
-00012290: 7261 7773 2061 2042 c3a9 7a69 6572 2063  raws a B..zier c
-000122a0: 7572 7665 2070 6172 616d 6574 6572 697a  urve parameteriz
-000122b0: 6564 2062 7920 7468 6520 656e 6420 706f  ed by the end po
-000122c0: 696e 7420 6f66 2074 6865 2070 7265 7669  int of the previ
-000122d0: 6f75 7320 7061 7468 0a20 2020 2065 6c65  ous path.    ele
-000122e0: 6d65 6e74 2c20 6f6e 6520 6f66 662d 6375  ment, one off-cu
-000122f0: 7276 6520 636f 6e74 726f 6c20 706f 696e  rve control poin
-00012300: 742c 2061 6e64 2061 6e20 656e 6420 706f  t, and an end po
-00012310: 696e 742e 0a0a 2020 2020 5365 653a 2060  int...    See: `
-00012320: 5061 696e 7465 6450 6174 682e 7175 6164  PaintedPath.quad
-00012330: 7261 7469 635f 6375 7276 655f 746f 600a  ratic_curve_to`.
-00012340: 2020 2020 2222 220a 0a20 2020 2063 7472      """..    ctr
-00012350: 6c3a 2050 6f69 6e74 0a20 2020 2022 2222  l: Point.    """
-00012360: 5468 6520 6375 7276 6527 7320 636f 6e74  The curve's cont
-00012370: 726f 6c20 706f 696e 742e 2222 220a 2020  rol point.""".  
-00012380: 2020 656e 643a 2050 6f69 6e74 0a20 2020    end: Point.   
-00012390: 2022 2222 5468 6520 6375 7276 6527 7320   """The curve's 
-000123a0: 656e 6420 706f 696e 742e 2222 220a 0a20  end point.""".. 
-000123b0: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-000123c0: 2064 6566 2065 6e64 5f70 6f69 6e74 2873   def end_point(s
-000123d0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-000123e0: 2254 6865 2065 6e64 2070 6f69 6e74 206f  "The end point o
-000123f0: 6620 7468 6973 2070 6174 6820 656c 656d  f this path elem
-00012400: 656e 742e 2222 220a 2020 2020 2020 2020  ent.""".        
-00012410: 7265 7475 726e 2073 656c 662e 656e 640a  return self.end.
-00012420: 0a20 2020 2064 6566 2074 6f5f 6375 6269  .    def to_cubi
-00012430: 635f 6375 7276 6528 7365 6c66 2c20 7374  c_curve(self, st
-00012440: 6172 745f 706f 696e 7429 3a0a 2020 2020  art_point):.    
-00012450: 2020 2020 6374 726c 203d 2073 656c 662e      ctrl = self.
-00012460: 6374 726c 0a20 2020 2020 2020 2065 6e64  ctrl.        end
-00012470: 203d 2073 656c 662e 656e 640a 0a20 2020   = self.end..   
-00012480: 2020 2020 2063 7472 6c31 203d 2050 6f69       ctrl1 = Poi
-00012490: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-000124a0: 783d 7374 6172 745f 706f 696e 742e 7820  x=start_point.x 
-000124b0: 2b20 3220 2a20 2863 7472 6c2e 7820 2d20  + 2 * (ctrl.x - 
-000124c0: 7374 6172 745f 706f 696e 742e 7829 202f  start_point.x) /
-000124d0: 2033 2c0a 2020 2020 2020 2020 2020 2020   3,.            
-000124e0: 793d 7374 6172 745f 706f 696e 742e 7920  y=start_point.y 
-000124f0: 2b20 3220 2a20 2863 7472 6c2e 7920 2d20  + 2 * (ctrl.y - 
-00012500: 7374 6172 745f 706f 696e 742e 7929 202f  start_point.y) /
-00012510: 2033 2c0a 2020 2020 2020 2020 290a 2020   3,.        ).  
-00012520: 2020 2020 2020 6374 726c 3220 3d20 506f        ctrl2 = Po
-00012530: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
-00012540: 2078 3d65 6e64 2e78 202b 2032 202a 2028   x=end.x + 2 * (
-00012550: 6374 726c 2e78 202d 2065 6e64 2e78 2920  ctrl.x - end.x) 
-00012560: 2f20 332c 0a20 2020 2020 2020 2020 2020  / 3,.           
-00012570: 2079 3d65 6e64 2e79 202b 2032 202a 2028   y=end.y + 2 * (
-00012580: 6374 726c 2e79 202d 2065 6e64 2e79 2920  ctrl.y - end.y) 
-00012590: 2f20 332c 0a20 2020 2020 2020 2029 0a0a  / 3,.        )..
-000125a0: 2020 2020 2020 2020 7265 7475 726e 2042          return B
-000125b0: 657a 6965 7243 7572 7665 2863 7472 6c31  ezierCurve(ctrl1
-000125c0: 2c20 6374 726c 322c 2065 6e64 290a 0a20  , ctrl2, end).. 
-000125d0: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-000125e0: 6d65 6e74 0a20 2020 2064 6566 2072 656e  ment.    def ren
-000125f0: 6465 7228 7365 6c66 2c20 6773 645f 7265  der(self, gsd_re
-00012600: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
-00012610: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
-00012620: 6c5f 706f 696e 7429 3a0a 2020 2020 2020  l_point):.      
-00012630: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
-00012640: 6e64 6572 2074 6869 7320 7061 7468 2065  nder this path e
-00012650: 6c65 6d65 6e74 2074 6f20 6974 7320 5044  lement to its PD
-00012660: 4620 7265 7072 6573 656e 7461 7469 6f6e  F representation
-00012670: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-00012680: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
-00012690: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
-000126a0: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
-000126b0: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
-000126c0: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
-000126d0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000126e0: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
-000126f0: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
-00012700: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
-00012710: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
-00012720: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
-00012730: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
-00012740: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
-00012750: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
-00012760: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
-00012770: 2020 2020 2020 2020 2020 2020 696e 6974              init
-00012780: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
-00012790: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
-000127a0: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
-000127b0: 6d61 6e64 0a0a 2020 2020 2020 2020 5265  mand..        Re
-000127c0: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-000127d0: 2020 2061 2074 7570 6c65 206f 6620 6028     a tuple of `(
-000127e0: 7374 722c 206e 6577 5f6c 6173 745f 6974  str, new_last_it
-000127f0: 656d 2960 2c20 7768 6572 6520 606e 6577  em)`, where `new
-00012800: 5f6c 6173 745f 6974 656d 6020 6973 2060  _last_item` is `
-00012810: 7365 6c66 602e 0a20 2020 2020 2020 2022  self`..        "
-00012820: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00012830: 6e20 280a 2020 2020 2020 2020 2020 2020  n (.            
-00012840: 7365 6c66 2e74 6f5f 6375 6269 635f 6375  self.to_cubic_cu
-00012850: 7276 6528 6c61 7374 5f69 7465 6d2e 656e  rve(last_item.en
-00012860: 645f 706f 696e 7429 2e72 656e 6465 7228  d_point).render(
-00012870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012880: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-00012890: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-000128a0: 2069 6e69 7469 616c 5f70 6f69 6e74 0a20   initial_point. 
-000128b0: 2020 2020 2020 2020 2020 2029 5b30 5d2c             )[0],
-000128c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000128d0: 662c 0a20 2020 2020 2020 2020 2020 2069  f,.            i
-000128e0: 6e69 7469 616c 5f70 6f69 6e74 2c0a 2020  nitial_point,.  
-000128f0: 2020 2020 2020 290a 0a20 2020 2040 666f        )..    @fo
-00012900: 7263 655f 6e6f 646f 6375 6d65 6e74 0a20  rce_nodocument. 
-00012910: 2020 2064 6566 2072 656e 6465 725f 6465     def render_de
-00012920: 6275 6728 0a20 2020 2020 2020 2073 656c  bug(.        sel
-00012930: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
-00012940: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-00012950: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00012960: 2c20 6465 6275 675f 7374 7265 616d 2c20  , debug_stream, 
-00012970: 7066 780a 2020 2020 293a 0a20 2020 2020  pfx.    ):.     
-00012980: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
-00012990: 656e 6465 7220 7468 6973 2070 6174 6820  ender this path 
-000129a0: 656c 656d 656e 7420 746f 2069 7473 2050  element to its P
-000129b0: 4446 2072 6570 7265 7365 6e74 6174 696f  DF representatio
-000129c0: 6e20 616e 6420 7072 6f64 7563 6520 6465  n and produce de
-000129d0: 6275 670a 2020 2020 2020 2020 696e 666f  bug.        info
-000129e0: 726d 6174 696f 6e2e 0a0a 2020 2020 2020  rmation...      
-000129f0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00012a00: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
-00012a10: 2028 4772 6170 6869 6373 5374 6174 6544   (GraphicsStateD
-00012a20: 6963 7452 6567 6973 7472 7929 3a20 7468  ictRegistry): th
-00012a30: 6520 6f77 6e65 7227 7320 6772 6170 6869  e owner's graphi
-00012a40: 6373 2073 7461 7465 0a20 2020 2020 2020  cs state.       
-00012a50: 2020 2020 2020 2020 2064 6963 7469 6f6e           diction
-00012a60: 6172 7920 7265 6769 7374 7279 2e0a 2020  ary registry..  
-00012a70: 2020 2020 2020 2020 2020 7374 796c 6520            style 
-00012a80: 2847 7261 7068 6963 7353 7479 6c65 293a  (GraphicsStyle):
-00012a90: 2074 6865 2063 7572 7265 6e74 2072 6573   the current res
-00012aa0: 6f6c 7665 6420 6772 6170 6869 6373 2073  olved graphics s
-00012ab0: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
-00012ac0: 206c 6173 745f 6974 656d 3a20 7468 6520   last_item: the 
-00012ad0: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
-00012ae0: 656d 656e 742e 0a20 2020 2020 2020 2020  ement..         
-00012af0: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
-00012b00: 3a20 6c61 7374 2070 6f73 6974 696f 6e20  : last position 
-00012b10: 7365 7420 6279 2061 2022 4d22 206f 7220  set by a "M" or 
-00012b20: 226d 2220 636f 6d6d 616e 640a 2020 2020  "m" command.    
-00012b30: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
-00012b40: 7265 616d 2028 696f 2e54 6578 7449 4f29  ream (io.TextIO)
-00012b50: 3a20 7468 6520 7374 7265 616d 2074 6f20  : the stream to 
-00012b60: 7768 6963 6820 7468 6520 6465 6275 6720  which the debug 
-00012b70: 6f75 7470 7574 2073 686f 756c 6420 6265  output should be
-00012b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012b90: 2077 7269 7474 656e 2e20 5468 6973 2069   written. This i
-00012ba0: 7320 6e6f 7420 6775 6172 616e 7465 6564  s not guaranteed
-00012bb0: 2074 6f20 6265 2073 6565 6b61 626c 6520   to be seekable 
-00012bc0: 2865 2e67 2e20 6974 206d 6179 2062 6520  (e.g. it may be 
-00012bd0: 7374 646f 7574 206f 720a 2020 2020 2020  stdout or.      
-00012be0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
-00012bf0: 292e 0a20 2020 2020 2020 2020 2020 2070  )..            p
-00012c00: 6678 2028 7374 7229 3a20 7468 6520 6375  fx (str): the cu
-00012c10: 7272 656e 7420 6465 6275 6720 6f75 7470  rrent debug outp
-00012c20: 7574 2070 7265 6669 7820 7374 7269 6e67  ut prefix string
-00012c30: 2028 6f6e 6c79 206e 6565 6465 6420 6966   (only needed if
-00012c40: 2065 6d69 7474 696e 670a 2020 2020 2020   emitting.      
-00012c50: 2020 2020 2020 2020 2020 6d6f 7265 2074            more t
-00012c60: 6861 6e20 6f6e 6520 6c69 6e65 292e 0a0a  han one line)...
-00012c70: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00012c80: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
-00012c90: 2073 616d 6520 7475 706c 6520 6173 2060   same tuple as `
-00012ca0: 5175 6164 7261 7469 6342 657a 6965 7243  QuadraticBezierC
-00012cb0: 7572 7665 2e72 656e 6465 7260 2e0a 2020  urve.render`..  
-00012cc0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00012cd0: 2020 2320 7079 6c69 6e74 3a20 6469 7361    # pylint: disa
-00012ce0: 626c 653d 756e 7573 6564 2d61 7267 756d  ble=unused-argum
-00012cf0: 656e 740a 2020 2020 2020 2020 7265 6e64  ent.        rend
-00012d00: 6572 6564 2c20 7265 736f 6c76 6564 2c20  ered, resolved, 
-00012d10: 696e 6974 6961 6c5f 706f 696e 7420 3d20  initial_point = 
-00012d20: 7365 6c66 2e72 656e 6465 7228 0a20 2020  self.render(.   
-00012d30: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-00012d40: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
-00012d50: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
-00012d60: 5f70 6f69 6e74 0a20 2020 2020 2020 2029  _point.        )
-00012d70: 0a20 2020 2020 2020 2064 6562 7567 5f73  .        debug_s
-00012d80: 7472 6561 6d2e 7772 6974 6528 0a20 2020  tream.write(.   
-00012d90: 2020 2020 2020 2020 2066 227b 7365 6c66           f"{self
-00012da0: 7d20 7265 736f 6c76 6564 2074 6f20 7b73  } resolved to {s
-00012db0: 656c 662e 746f 5f63 7562 6963 5f63 7572  elf.to_cubic_cur
-00012dc0: 7665 286c 6173 745f 6974 656d 2e65 6e64  ve(last_item.end
-00012dd0: 5f70 6f69 6e74 297d 5c6e 220a 2020 2020  _point)}\n".    
-00012de0: 2020 2020 290a 0a20 2020 2020 2020 2072      )..        r
-00012df0: 6574 7572 6e20 7265 6e64 6572 6564 2c20  eturn rendered, 
-00012e00: 7265 736f 6c76 6564 2c20 696e 6974 6961  resolved, initia
-00012e10: 6c5f 706f 696e 740a 0a0a 636c 6173 7320  l_point...class 
-00012e20: 5265 6c61 7469 7665 5175 6164 7261 7469  RelativeQuadrati
-00012e30: 6342 657a 6965 7243 7572 7665 284e 616d  cBezierCurve(Nam
-00012e40: 6564 5475 706c 6529 3a0a 2020 2020 2222  edTuple):.    ""
-00012e50: 220a 2020 2020 4120 7175 6164 7261 7469  ".    A quadrati
-00012e60: 6320 42c3 a97a 6965 7220 6375 7276 6520  c B..zier curve 
-00012e70: 7061 7468 2065 6c65 6d65 6e74 2077 686f  path element who
-00012e80: 7365 2070 6f69 6e74 7320 6172 6520 7370  se points are sp
-00012e90: 6563 6966 6965 6420 7265 6c61 7469 7665  ecified relative
-00012ea0: 2074 6f20 7468 6520 656e 640a 2020 2020   to the end.    
-00012eb0: 706f 696e 7420 6f66 2074 6865 2070 7265  point of the pre
-00012ec0: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-00012ed0: 6e74 2e0a 0a20 2020 2053 6565 3a20 6050  nt...    See: `P
-00012ee0: 6169 6e74 6564 5061 7468 2e71 7561 6472  aintedPath.quadr
-00012ef0: 6174 6963 5f63 7572 7665 5f72 656c 6174  atic_curve_relat
-00012f00: 6976 6560 0a20 2020 2022 2222 0a0a 2020  ive`.    """..  
-00012f10: 2020 6374 726c 3a20 506f 696e 740a 2020    ctrl: Point.  
-00012f20: 2020 2222 2254 6865 2063 7572 7665 2773    """The curve's
-00012f30: 2063 6f6e 7472 6f6c 2070 6f69 6e74 2072   control point r
-00012f40: 656c 6174 6976 6520 746f 2074 6865 2065  elative to the e
-00012f50: 6e64 206f 6620 7468 6520 7072 6576 696f  nd of the previo
-00012f60: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
-00012f70: 2222 220a 2020 2020 656e 643a 2050 6f69  """.    end: Poi
-00012f80: 6e74 0a20 2020 2022 2222 5468 6520 6375  nt.    """The cu
-00012f90: 7276 6527 7320 656e 6420 706f 696e 7420  rve's end point 
-00012fa0: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
-00012fb0: 656e 6420 6f66 2074 6865 2070 7265 7669  end of the previ
-00012fc0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-00012fd0: 2e22 2222 0a0a 2020 2020 4066 6f72 6365  ."""..    @force
-00012fe0: 5f6e 6f64 6f63 756d 656e 740a 2020 2020  _nodocument.    
-00012ff0: 6465 6620 7265 6e64 6572 2873 656c 662c  def render(self,
-00013000: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-00013010: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-00013020: 2069 6e69 7469 616c 5f70 6f69 6e74 293a   initial_point):
-00013030: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00013040: 2020 2020 2052 656e 6465 7220 7468 6973       Render this
-00013050: 2070 6174 6820 656c 656d 656e 7420 746f   path element to
-00013060: 2069 7473 2050 4446 2072 6570 7265 7365   its PDF represe
-00013070: 6e74 6174 696f 6e2e 0a0a 2020 2020 2020  ntation...      
-00013080: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00013090: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
-000130a0: 2028 4772 6170 6869 6373 5374 6174 6544   (GraphicsStateD
-000130b0: 6963 7452 6567 6973 7472 7929 3a20 7468  ictRegistry): th
-000130c0: 6520 6f77 6e65 7227 7320 6772 6170 6869  e owner's graphi
-000130d0: 6373 2073 7461 7465 0a20 2020 2020 2020  cs state.       
-000130e0: 2020 2020 2020 2020 2064 6963 7469 6f6e           diction
-000130f0: 6172 7920 7265 6769 7374 7279 2e0a 2020  ary registry..  
-00013100: 2020 2020 2020 2020 2020 7374 796c 6520            style 
-00013110: 2847 7261 7068 6963 7353 7479 6c65 293a  (GraphicsStyle):
-00013120: 2074 6865 2063 7572 7265 6e74 2072 6573   the current res
-00013130: 6f6c 7665 6420 6772 6170 6869 6373 2073  olved graphics s
-00013140: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
-00013150: 206c 6173 745f 6974 656d 3a20 7468 6520   last_item: the 
-00013160: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
-00013170: 656d 656e 742e 0a20 2020 2020 2020 2020  ement..         
-00013180: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
-00013190: 3a20 6c61 7374 2070 6f73 6974 696f 6e20  : last position 
-000131a0: 7365 7420 6279 2061 2022 4d22 206f 7220  set by a "M" or 
-000131b0: 226d 2220 636f 6d6d 616e 640a 0a20 2020  "m" command..   
-000131c0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-000131d0: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
-000131e0: 6520 6f66 2060 2873 7472 2c20 6e65 775f  e of `(str, new_
-000131f0: 6c61 7374 5f69 7465 6d29 602c 2077 6865  last_item)`, whe
-00013200: 7265 2060 6e65 775f 6c61 7374 5f69 7465  re `new_last_ite
-00013210: 6d60 2069 7320 7468 6520 7265 736f 6c76  m` is the resolv
-00013220: 6564 0a20 2020 2020 2020 2020 2020 2060  ed.            `
-00013230: 5175 6164 7261 7469 6342 657a 6965 7243  QuadraticBezierC
-00013240: 7572 7665 602e 0a20 2020 2020 2020 2022  urve`..        "
-00013250: 2222 0a20 2020 2020 2020 206c 6173 745f  "".        last_
-00013260: 706f 696e 7420 3d20 6c61 7374 5f69 7465  point = last_ite
-00013270: 6d2e 656e 645f 706f 696e 740a 0a20 2020  m.end_point..   
-00013280: 2020 2020 2063 7472 6c20 3d20 6c61 7374       ctrl = last
-00013290: 5f70 6f69 6e74 202b 2073 656c 662e 6374  _point + self.ct
-000132a0: 726c 0a20 2020 2020 2020 2065 6e64 203d  rl.        end =
-000132b0: 206c 6173 745f 706f 696e 7420 2b20 7365   last_point + se
-000132c0: 6c66 2e65 6e64 0a0a 2020 2020 2020 2020  lf.end..        
-000132d0: 6162 736f 6c75 7465 203d 2051 7561 6472  absolute = Quadr
-000132e0: 6174 6963 4265 7a69 6572 4375 7276 6528  aticBezierCurve(
-000132f0: 6374 726c 3d63 7472 6c2c 2065 6e64 3d65  ctrl=ctrl, end=e
-00013300: 6e64 290a 2020 2020 2020 2020 7265 7475  nd).        retu
-00013310: 726e 2061 6273 6f6c 7574 652e 7265 6e64  rn absolute.rend
-00013320: 6572 2867 7364 5f72 6567 6973 7472 792c  er(gsd_registry,
-00013330: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-00013340: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00013350: 290a 0a20 2020 2040 666f 7263 655f 6e6f  )..    @force_no
-00013360: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
-00013370: 2072 656e 6465 725f 6465 6275 6728 0a20   render_debug(. 
-00013380: 2020 2020 2020 2073 656c 662c 2067 7364         self, gsd
-00013390: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
-000133a0: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-000133b0: 7469 616c 5f70 6f69 6e74 2c20 6465 6275  tial_point, debu
-000133c0: 675f 7374 7265 616d 2c20 7066 780a 2020  g_stream, pfx.  
-000133d0: 2020 293a 0a20 2020 2020 2020 2022 2222    ):.        """
-000133e0: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
-000133f0: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
-00013400: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
-00013410: 7265 7365 6e74 6174 696f 6e20 616e 6420  resentation and 
-00013420: 7072 6f64 7563 6520 6465 6275 670a 2020  produce debug.  
-00013430: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
-00013440: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
-00013450: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
-00013460: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
-00013470: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
-00013480: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
-00013490: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
-000134a0: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
-000134b0: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
-000134c0: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
-000134d0: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
-000134e0: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
-000134f0: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
-00013500: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
-00013510: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-00013520: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
-00013530: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
-00013540: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
-00013550: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
-00013560: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
-00013570: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
-00013580: 6d6d 616e 640a 2020 2020 2020 2020 2020  mmand.          
-00013590: 2020 6465 6275 675f 7374 7265 616d 2028    debug_stream (
-000135a0: 696f 2e54 6578 7449 4f29 3a20 7468 6520  io.TextIO): the 
-000135b0: 7374 7265 616d 2074 6f20 7768 6963 6820  stream to which 
-000135c0: 7468 6520 6465 6275 6720 6f75 7470 7574  the debug output
-000135d0: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
-000135e0: 2020 2020 2020 2020 2020 2077 7269 7474             writt
-000135f0: 656e 2e20 5468 6973 2069 7320 6e6f 7420  en. This is not 
-00013600: 6775 6172 616e 7465 6564 2074 6f20 6265  guaranteed to be
-00013610: 2073 6565 6b61 626c 6520 2865 2e67 2e20   seekable (e.g. 
-00013620: 6974 206d 6179 2062 6520 7374 646f 7574  it may be stdout
-00013630: 206f 720a 2020 2020 2020 2020 2020 2020   or.            
-00013640: 2020 2020 7374 6465 7272 292e 0a20 2020      stderr)..   
-00013650: 2020 2020 2020 2020 2070 6678 2028 7374           pfx (st
-00013660: 7229 3a20 7468 6520 6375 7272 656e 7420  r): the current 
-00013670: 6465 6275 6720 6f75 7470 7574 2070 7265  debug output pre
-00013680: 6669 7820 7374 7269 6e67 2028 6f6e 6c79  fix string (only
-00013690: 206e 6565 6465 6420 6966 2065 6d69 7474   needed if emitt
-000136a0: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-000136b0: 2020 2020 6d6f 7265 2074 6861 6e20 6f6e      more than on
-000136c0: 6520 6c69 6e65 292e 0a0a 2020 2020 2020  e line)...      
-000136d0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-000136e0: 2020 2020 2020 2054 6865 2073 616d 6520         The same 
-000136f0: 7475 706c 6520 6173 2060 5265 6c61 7469  tuple as `Relati
-00013700: 7665 5175 6164 7261 7469 6342 657a 6965  veQuadraticBezie
-00013710: 7243 7572 7665 2e72 656e 6465 7260 2e0a  rCurve.render`..
-00013720: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00013730: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
-00013740: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
-00013750: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
-00013760: 6e64 6572 6564 2c20 7265 736f 6c76 6564  ndered, resolved
-00013770: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
-00013780: 3d20 7365 6c66 2e72 656e 6465 7228 0a20  = self.render(. 
-00013790: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
-000137a0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
-000137b0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-000137c0: 616c 5f70 6f69 6e74 0a20 2020 2020 2020  al_point.       
-000137d0: 2029 0a20 2020 2020 2020 2064 6562 7567   ).        debug
-000137e0: 5f73 7472 6561 6d2e 7772 6974 6528 0a20  _stream.write(. 
-000137f0: 2020 2020 2020 2020 2020 2066 227b 7365             f"{se
-00013800: 6c66 7d20 7265 736f 6c76 6564 2074 6f20  lf} resolved to 
-00013810: 7b72 6573 6f6c 7665 647d 2022 0a20 2020  {resolved} ".   
-00013820: 2020 2020 2020 2020 2066 2274 6865 6e20           f"then 
-00013830: 746f 207b 7265 736f 6c76 6564 2e74 6f5f  to {resolved.to_
-00013840: 6375 6269 635f 6375 7276 6528 6c61 7374  cubic_curve(last
-00013850: 5f69 7465 6d2e 656e 645f 706f 696e 7429  _item.end_point)
-00013860: 7d5c 6e22 0a20 2020 2020 2020 2029 0a0a  }\n".        )..
-00013870: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00013880: 656e 6465 7265 642c 2072 6573 6f6c 7665  endered, resolve
-00013890: 642c 2069 6e69 7469 616c 5f70 6f69 6e74  d, initial_point
-000138a0: 0a0a 0a63 6c61 7373 2041 7263 284e 616d  ...class Arc(Nam
-000138b0: 6564 5475 706c 6529 3a0a 2020 2020 2222  edTuple):.    ""
-000138c0: 220a 2020 2020 416e 2065 6c6c 6970 7469  ".    An ellipti
-000138d0: 6361 6c20 6172 6320 7061 7468 2065 6c65  cal arc path ele
-000138e0: 6d65 6e74 2e0a 0a20 2020 2054 6865 2061  ment...    The a
-000138f0: 7263 2069 7320 6472 6177 6e20 6672 6f6d  rc is drawn from
-00013900: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
-00013910: 6375 7272 656e 7420 7061 7468 2065 6c65  current path ele
-00013920: 6d65 6e74 2074 6f20 6974 7320 7370 6563  ment to its spec
-00013930: 6966 6965 6420 656e 6420 706f 696e 740a  ified end point.
-00013940: 2020 2020 7573 696e 6720 6120 6e75 6d62      using a numb
-00013950: 6572 206f 6620 7061 7261 6d65 7465 7273  er of parameters
-00013960: 2074 6f20 6465 7465 726d 696e 6520 686f   to determine ho
-00013970: 7720 6974 2069 7320 636f 6e73 7472 7563  w it is construc
-00013980: 7465 642e 0a0a 2020 2020 5365 653a 2060  ted...    See: `
-00013990: 5061 696e 7465 6450 6174 682e 6172 635f  PaintedPath.arc_
-000139a0: 746f 600a 2020 2020 2222 220a 0a20 2020  to`.    """..   
-000139b0: 2072 6164 6969 3a20 506f 696e 740a 2020   radii: Point.  
-000139c0: 2020 2222 220a 2020 2020 5468 6520 782d    """.    The x-
-000139d0: 2061 6e64 2079 2d72 6164 6969 206f 6620   and y-radii of 
-000139e0: 7468 6520 6172 632e 2049 6620 6072 6164  the arc. If `rad
-000139f0: 6969 2e78 203d 3d20 7261 6469 692e 7960  ii.x == radii.y`
-00013a00: 2074 6865 2061 7263 2077 696c 6c20 6265   the arc will be
-00013a10: 2063 6972 6375 6c61 722e 0a20 2020 2022   circular..    "
-00013a20: 2222 0a20 2020 2072 6f74 6174 696f 6e3a  "".    rotation:
-00013a30: 204e 756d 6265 720a 2020 2020 2222 2254   Number.    """T
-00013a40: 6865 2072 6f74 6174 696f 6e20 6f66 2074  he rotation of t
-00013a50: 6865 2061 7263 2773 206d 616a 6f72 2f6d  he arc's major/m
-00013a60: 696e 6f72 2061 7865 7320 7265 6c61 7469  inor axes relati
-00013a70: 7665 2074 6f20 7468 6520 636f 6f72 6469  ve to the coordi
-00013a80: 6e61 7465 2066 7261 6d65 2e22 2222 0a20  nate frame.""". 
-00013a90: 2020 206c 6172 6765 3a20 626f 6f6c 0a20     large: bool. 
-00013aa0: 2020 2022 2222 4966 2054 7275 652c 2073     """If True, s
-00013ab0: 7765 6570 2074 6865 2061 7263 206f 7665  weep the arc ove
-00013ac0: 7220 616e 2061 6e67 6c65 2067 7265 6174  r an angle great
-00013ad0: 6572 2074 6861 6e20 6f72 2065 7175 616c  er than or equal
-00013ae0: 2074 6f20 3138 3020 6465 6772 6565 732e   to 180 degrees.
-00013af0: 2222 220a 2020 2020 7377 6565 703a 2062  """.    sweep: b
-00013b00: 6f6f 6c0a 2020 2020 2222 2249 6620 5472  ool.    """If Tr
-00013b10: 7565 2c20 7468 6520 6172 6320 6973 2073  ue, the arc is s
-00013b20: 7765 7074 2069 6e20 7468 6520 706f 7369  wept in the posi
-00013b30: 7469 7665 2061 6e67 756c 6172 2064 6972  tive angular dir
-00013b40: 6563 7469 6f6e 2e22 2222 0a20 2020 2065  ection.""".    e
-00013b50: 6e64 3a20 506f 696e 740a 2020 2020 2222  nd: Point.    ""
-00013b60: 2254 6865 2065 6e64 2070 6f69 6e74 206f  "The end point o
-00013b70: 6620 7468 6520 6172 632e 2222 220a 0a20  f the arc.""".. 
-00013b80: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
-00013b90: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
-00013ba0: 6375 6d65 6e74 0a20 2020 2064 6566 2073  cument.    def s
-00013bb0: 7562 6469 7664 655f 7377 6565 7028 7377  ubdivde_sweep(sw
-00013bc0: 6565 705f 616e 676c 6529 3a0a 2020 2020  eep_angle):.    
-00013bd0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00013be0: 4120 6765 6e65 7261 746f 7220 7468 6174  A generator that
-00013bf0: 2073 7562 6469 7669 6465 7320 6120 7377   subdivides a sw
-00013c00: 6570 7420 616e 676c 6520 696e 746f 2073  ept angle into s
-00013c10: 6567 6d65 6e74 7320 6e6f 206c 6172 6765  egments no large
-00013c20: 7220 7468 616e 2061 2071 7561 7274 6572  r than a quarter
-00013c30: 0a20 2020 2020 2020 2074 7572 6e2e 0a0a  .        turn...
-00013c40: 2020 2020 2020 2020 416e 7920 7377 6565          Any swee
-00013c50: 7020 7468 6174 2069 7320 6c61 7267 6572  p that is larger
-00013c60: 2074 6861 6e20 6120 7175 6172 7465 7220   than a quarter 
-00013c70: 7475 726e 2069 7320 7375 6264 6976 6964  turn is subdivid
-00013c80: 6564 2069 6e74 6f20 6173 206d 616e 7920  ed into as many 
-00013c90: 6571 7561 6c6c 790a 2020 2020 2020 2020  equally.        
-00013ca0: 7369 7a65 6420 7365 676d 656e 7473 2061  sized segments a
-00013cb0: 7320 6e65 6365 7373 6172 7920 746f 2070  s necessary to p
-00013cc0: 7265 7665 6e74 2061 6e79 2069 6e64 6976  revent any indiv
-00013cd0: 6964 7561 6c20 7365 676d 656e 7420 6672  idual segment fr
-00013ce0: 6f6d 2062 6569 6e67 206c 6172 6765 720a  om being larger.
-00013cf0: 2020 2020 2020 2020 7468 616e 2061 2071          than a q
-00013d00: 7561 7274 6572 2074 7572 6e2e 0a0a 2020  uarter turn...  
-00013d10: 2020 2020 2020 5468 6973 2069 7320 7573        This is us
-00013d20: 6564 2066 6f72 2061 7070 726f 7869 6d61  ed for approxima
-00013d30: 7469 6e67 2061 2063 6972 6375 6c61 7220  ting a circular 
-00013d40: 6375 7276 6520 7365 676d 656e 7420 7573  curve segment us
-00013d50: 696e 6720 6375 6269 6320 42c3 a97a 6965  ing cubic B..zie
-00013d60: 720a 2020 2020 2020 2020 6375 7276 6573  r.        curves
-00013d70: 2e20 5468 6973 2063 6f6d 7075 7465 7320  . This computes 
-00013d80: 7468 6520 7061 7261 6d65 7465 7273 2075  the parameters u
-00013d90: 7365 6420 666f 7220 7468 6520 42c3 a97a  sed for the B..z
-00013da0: 6965 7220 6170 7072 6f78 696d 6174 696f  ier approximatio
-00013db0: 6e20 7570 0a20 2020 2020 2020 2066 726f  n up.        fro
-00013dc0: 6e74 2c20 6173 2077 656c 6c20 6173 2074  nt, as well as t
-00013dd0: 6865 2074 7261 6e73 666f 726d 206e 6563  he transform nec
-00013de0: 6573 7361 7279 2074 6f20 706c 6163 6520  essary to place 
-00013df0: 7468 6520 7365 676d 656e 7420 696e 2074  the segment in t
-00013e00: 6865 2063 6f72 7265 6374 0a20 2020 2020  he correct.     
-00013e10: 2020 2070 6f73 6974 696f 6e2e 0a0a 2020     position...  
-00013e20: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-00013e30: 2020 2020 2020 2020 7377 6565 705f 616e          sweep_an
-00013e40: 676c 6520 284e 756d 6265 7229 3a20 7468  gle (Number): th
-00013e50: 6520 616e 676c 6520 746f 2073 7562 6469  e angle to subdi
-00013e60: 7669 6465 2e0a 0a20 2020 2020 2020 2059  vide...        Y
-00013e70: 6965 6c64 733a 0a20 2020 2020 2020 2020  ields:.         
-00013e80: 2020 2041 2074 7570 6c65 206f 6620 2863     A tuple of (c
-00013e90: 7472 6c31 2c20 6374 726c 322c 2065 6e64  trl1, ctrl2, end
-00013ea0: 2920 7265 7072 6573 656e 7469 6e67 2074  ) representing t
-00013eb0: 6865 2063 6f6e 7472 6f6c 2061 6e64 2065  he control and e
-00013ec0: 6e64 2070 6f69 6e74 7320 6f66 0a20 2020  nd points of.   
-00013ed0: 2020 2020 2020 2020 2074 6865 2063 7562           the cub
-00013ee0: 6963 2042 c3a9 7a69 6572 2063 7572 7665  ic B..zier curve
-00013ef0: 2061 7070 726f 7869 6d61 7469 6e67 2074   approximating t
-00013f00: 6865 2073 6567 6d65 6e74 2061 7320 6120  he segment as a 
-00013f10: 756e 6974 2063 6972 636c 6520 6365 6e74  unit circle cent
-00013f20: 6572 6564 0a20 2020 2020 2020 2020 2020  ered.           
-00013f30: 2061 7420 7468 6520 6f72 6967 696e 2e0a   at the origin..
-00013f40: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00013f50: 2020 2020 7377 6565 705f 616e 676c 6520      sweep_angle 
-00013f60: 3d20 6162 7328 7377 6565 705f 616e 676c  = abs(sweep_angl
-00013f70: 6529 0a20 2020 2020 2020 2073 7765 6570  e).        sweep
-00013f80: 5f6c 6566 7420 3d20 7377 6565 705f 616e  _left = sweep_an
-00013f90: 676c 650a 0a20 2020 2020 2020 2071 7561  gle..        qua
-00013fa0: 7274 6572 7475 726e 203d 206d 6174 682e  rterturn = math.
-00013fb0: 7069 202f 2032 0a20 2020 2020 2020 2063  pi / 2.        c
-00013fc0: 6875 6e6b 7320 3d20 6d61 7468 2e63 6569  hunks = math.cei
-00013fd0: 6c28 7377 6565 705f 616e 676c 6520 2f20  l(sweep_angle / 
-00013fe0: 7175 6172 7465 7274 7572 6e29 0a0a 2020  quarterturn)..  
-00013ff0: 2020 2020 2020 7377 6565 705f 7365 676d        sweep_segm
-00014000: 656e 7420 3d20 7377 6565 705f 616e 676c  ent = sweep_angl
-00014010: 6520 2f20 6368 756e 6b73 0a20 2020 2020  e / chunks.     
-00014020: 2020 2063 6f73 5f74 203d 206d 6174 682e     cos_t = math.
-00014030: 636f 7328 7377 6565 705f 7365 676d 656e  cos(sweep_segmen
-00014040: 7429 0a20 2020 2020 2020 2073 696e 5f74  t).        sin_t
-00014050: 203d 206d 6174 682e 7369 6e28 7377 6565   = math.sin(swee
-00014060: 705f 7365 676d 656e 7429 0a20 2020 2020  p_segment).     
-00014070: 2020 206b 6170 7061 203d 2034 202f 2033     kappa = 4 / 3
-00014080: 202a 206d 6174 682e 7461 6e28 7377 6565   * math.tan(swee
-00014090: 705f 7365 676d 656e 7420 2f20 3429 0a0a  p_segment / 4)..
-000140a0: 2020 2020 2020 2020 6374 726c 3120 3d20          ctrl1 = 
-000140b0: 506f 696e 7428 312c 206b 6170 7061 290a  Point(1, kappa).
-000140c0: 2020 2020 2020 2020 6374 726c 3220 3d20          ctrl2 = 
-000140d0: 506f 696e 7428 636f 735f 7420 2b20 6b61  Point(cos_t + ka
-000140e0: 7070 6120 2a20 7369 6e5f 742c 2073 696e  ppa * sin_t, sin
-000140f0: 5f74 202d 206b 6170 7061 202a 2063 6f73  _t - kappa * cos
-00014100: 5f74 290a 2020 2020 2020 2020 656e 6420  _t).        end 
-00014110: 3d20 506f 696e 7428 636f 735f 742c 2073  = Point(cos_t, s
-00014120: 696e 5f74 290a 0a20 2020 2020 2020 2066  in_t)..        f
-00014130: 6f72 205f 2069 6e20 7261 6e67 6528 6368  or _ in range(ch
-00014140: 756e 6b73 293a 0a20 2020 2020 2020 2020  unks):.         
-00014150: 2020 206f 6666 7365 7420 3d20 7377 6565     offset = swee
-00014160: 705f 616e 676c 6520 2d20 7377 6565 705f  p_angle - sweep_
-00014170: 6c65 6674 0a0a 2020 2020 2020 2020 2020  left..          
-00014180: 2020 7472 616e 7366 6f72 6d20 3d20 5472    transform = Tr
-00014190: 616e 7366 6f72 6d2e 726f 7461 7469 6f6e  ansform.rotation
-000141a0: 286f 6666 7365 7429 0a20 2020 2020 2020  (offset).       
-000141b0: 2020 2020 2079 6965 6c64 2063 7472 6c31       yield ctrl1
-000141c0: 2040 2074 7261 6e73 666f 726d 2c20 6374   @ transform, ct
-000141d0: 726c 3220 4020 7472 616e 7366 6f72 6d2c  rl2 @ transform,
-000141e0: 2065 6e64 2040 2074 7261 6e73 666f 726d   end @ transform
-000141f0: 0a0a 2020 2020 2020 2020 2020 2020 7377  ..            sw
-00014200: 6565 705f 6c65 6674 202d 3d20 7377 6565  eep_left -= swee
-00014210: 705f 7365 676d 656e 740a 0a20 2020 2064  p_segment..    d
-00014220: 6566 205f 6170 7072 6f78 696d 6174 655f  ef _approximate_
-00014230: 6172 6328 7365 6c66 2c20 6c61 7374 5f69  arc(self, last_i
-00014240: 7465 6d29 3a0a 2020 2020 2020 2020 2222  tem):.        ""
-00014250: 220a 2020 2020 2020 2020 4170 7072 6f78  ".        Approx
-00014260: 696d 6174 6520 7468 6973 2061 7263 2077  imate this arc w
-00014270: 6974 6820 6120 7365 7175 656e 6365 206f  ith a sequence o
-00014280: 6620 6042 657a 6965 7243 7572 7665 602e  f `BezierCurve`.
-00014290: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-000142a0: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-000142b0: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
-000142c0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-000142d0: 2028 7573 6564 2066 6f72 2069 7473 2065   (used for its e
-000142e0: 6e64 2070 6f69 6e74 290a 0a20 2020 2020  nd point)..     
-000142f0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00014300: 2020 2020 2020 2020 6120 6c69 7374 206f          a list o
-00014310: 6620 6042 657a 6965 7243 7572 7665 602e  f `BezierCurve`.
-00014320: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00014330: 2020 2020 2072 6164 6969 203d 2073 656c       radii = sel
-00014340: 662e 7261 6469 690a 0a20 2020 2020 2020  f.radii..       
-00014350: 2072 6576 6572 7365 203d 2054 7261 6e73   reverse = Trans
-00014360: 666f 726d 2e72 6f74 6174 696f 6e28 2d73  form.rotation(-s
-00014370: 656c 662e 726f 7461 7469 6f6e 290a 2020  elf.rotation).  
-00014380: 2020 2020 2020 666f 7277 6172 6420 3d20        forward = 
-00014390: 5472 616e 7366 6f72 6d2e 726f 7461 7469  Transform.rotati
-000143a0: 6f6e 2873 656c 662e 726f 7461 7469 6f6e  on(self.rotation
-000143b0: 290a 0a20 2020 2020 2020 2070 7269 6d65  )..        prime
-000143c0: 203d 2028 286c 6173 745f 6974 656d 2e65   = ((last_item.e
-000143d0: 6e64 5f70 6f69 6e74 202d 2073 656c 662e  nd_point - self.
-000143e0: 656e 6429 202a 2030 2e35 2920 4020 7265  end) * 0.5) @ re
-000143f0: 7665 7273 650a 0a20 2020 2020 2020 206c  verse..        l
-00014400: 616d 5f64 6120 3d20 2870 7269 6d65 2e78  am_da = (prime.x
-00014410: 202f 2072 6164 6969 2e78 2920 2a2a 2032   / radii.x) ** 2
-00014420: 202b 2028 7072 696d 652e 7920 2f20 7261   + (prime.y / ra
-00014430: 6469 692e 7929 202a 2a20 320a 0a20 2020  dii.y) ** 2..   
-00014440: 2020 2020 2069 6620 6c61 6d5f 6461 203e       if lam_da >
-00014450: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-00014460: 7261 6469 6920 3d20 506f 696e 7428 783d  radii = Point(x=
-00014470: 286c 616d 5f64 612a 2a30 2e35 2920 2a20  (lam_da**0.5) * 
-00014480: 7261 6469 692e 782c 2079 3d28 6c61 6d5f  radii.x, y=(lam_
-00014490: 6461 2a2a 302e 3529 202a 2072 6164 6969  da**0.5) * radii
-000144a0: 2e79 290a 0a20 2020 2020 2020 2073 6967  .y)..        sig
-000144b0: 6e20 3d20 2873 656c 662e 6c61 7267 6520  n = (self.large 
-000144c0: 213d 2073 656c 662e 7377 6565 7029 202d  != self.sweep) -
-000144d0: 2028 7365 6c66 2e6c 6172 6765 203d 3d20   (self.large == 
-000144e0: 7365 6c66 2e73 7765 6570 290a 2020 2020  self.sweep).    
-000144f0: 2020 2020 7278 7279 3220 3d20 2872 6164      rxry2 = (rad
-00014500: 6969 2e78 202a 2072 6164 6969 2e79 2920  ii.x * radii.y) 
-00014510: 2a2a 2032 0a20 2020 2020 2020 2072 7870  ** 2.        rxp
-00014520: 7932 203d 2028 7261 6469 692e 7820 2a20  y2 = (radii.x * 
-00014530: 7072 696d 652e 7929 202a 2a20 320a 2020  prime.y) ** 2.  
-00014540: 2020 2020 2020 7279 7078 3220 3d20 2872        rypx2 = (r
-00014550: 6164 6969 2e79 202a 2070 7269 6d65 2e78  adii.y * prime.x
-00014560: 2920 2a2a 2032 0a0a 2020 2020 2020 2020  ) ** 2..        
-00014570: 6365 6e74 6572 7072 696d 6520 3d20 280a  centerprime = (.
-00014580: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00014590: 0a20 2020 2020 2020 2020 2020 202a 206d  .            * m
-000145a0: 6174 682e 7371 7274 2872 6f75 6e64 2872  ath.sqrt(round(r
-000145b0: 7872 7932 202d 2072 7870 7932 202d 2072  xry2 - rxpy2 - r
-000145c0: 7970 7832 2c20 3829 202f 2028 7278 7079  ypx2, 8) / (rxpy
-000145d0: 3220 2b20 7279 7078 3229 290a 2020 2020  2 + rypx2)).    
-000145e0: 2020 2020 2020 2020 2a20 506f 696e 7428          * Point(
-000145f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014600: 2078 3d72 6164 6969 2e78 202a 2070 7269   x=radii.x * pri
-00014610: 6d65 2e79 202f 2072 6164 6969 2e79 2c0a  me.y / radii.y,.
-00014620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014630: 793d 2d72 6164 6969 2e79 202a 2070 7269  y=-radii.y * pri
-00014640: 6d65 2e78 202f 2072 6164 6969 2e78 2c0a  me.x / radii.x,.
-00014650: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00014660: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00014670: 2063 656e 7465 7220 3d20 2863 656e 7465   center = (cente
-00014680: 7270 7269 6d65 2040 2066 6f72 7761 7264  rprime @ forward
-00014690: 2920 2b20 2828 6c61 7374 5f69 7465 6d2e  ) + ((last_item.
-000146a0: 656e 645f 706f 696e 7420 2b20 7365 6c66  end_point + self
-000146b0: 2e65 6e64 2920 2a20 302e 3529 0a0a 2020  .end) * 0.5)..  
-000146c0: 2020 2020 2020 6172 6373 7461 7274 203d        arcstart =
-000146d0: 2050 6f69 6e74 280a 2020 2020 2020 2020   Point(.        
-000146e0: 2020 2020 783d 2870 7269 6d65 2e78 202d      x=(prime.x -
-000146f0: 2063 656e 7465 7270 7269 6d65 2e78 2920   centerprime.x) 
-00014700: 2f20 7261 6469 692e 782c 0a20 2020 2020  / radii.x,.     
-00014710: 2020 2020 2020 2079 3d28 7072 696d 652e         y=(prime.
-00014720: 7920 2d20 6365 6e74 6572 7072 696d 652e  y - centerprime.
-00014730: 7929 202f 2072 6164 6969 2e79 2c0a 2020  y) / radii.y,.  
-00014740: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00014750: 6172 6365 6e64 203d 2050 6f69 6e74 280a  arcend = Point(.
-00014760: 2020 2020 2020 2020 2020 2020 783d 282d              x=(-
-00014770: 7072 696d 652e 7820 2d20 6365 6e74 6572  prime.x - center
-00014780: 7072 696d 652e 7829 202f 2072 6164 6969  prime.x) / radii
-00014790: 2e78 2c0a 2020 2020 2020 2020 2020 2020  .x,.            
-000147a0: 793d 282d 7072 696d 652e 7920 2d20 6365  y=(-prime.y - ce
-000147b0: 6e74 6572 7072 696d 652e 7929 202f 2072  nterprime.y) / r
-000147c0: 6164 6969 2e79 2c0a 2020 2020 2020 2020  adii.y,.        
-000147d0: 290a 0a20 2020 2020 2020 2074 6865 7461  )..        theta
-000147e0: 203d 2050 6f69 6e74 2831 2c20 3029 2e61   = Point(1, 0).a
-000147f0: 6e67 6c65 2861 7263 7374 6172 7429 0a20  ngle(arcstart). 
-00014800: 2020 2020 2020 2064 656c 7461 7468 6574         deltathet
-00014810: 6120 3d20 6172 6373 7461 7274 2e61 6e67  a = arcstart.ang
-00014820: 6c65 2861 7263 656e 6429 0a0a 2020 2020  le(arcend)..    
-00014830: 2020 2020 6966 2028 7365 6c66 2e73 7765      if (self.swe
-00014840: 6570 2069 7320 4661 6c73 6529 2061 6e64  ep is False) and
-00014850: 2028 6465 6c74 6174 6865 7461 203e 2030   (deltatheta > 0
-00014860: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
-00014870: 656c 7461 7468 6574 6120 2d3d 206d 6174  eltatheta -= mat
-00014880: 682e 7461 750a 2020 2020 2020 2020 656c  h.tau.        el
-00014890: 6966 2028 7365 6c66 2e73 7765 6570 2069  if (self.sweep i
-000148a0: 7320 5472 7565 2920 616e 6420 2864 656c  s True) and (del
-000148b0: 7461 7468 6574 6120 3c20 3029 3a0a 2020  tatheta < 0):.  
-000148c0: 2020 2020 2020 2020 2020 6465 6c74 6174            deltat
-000148d0: 6865 7461 202b 3d20 6d61 7468 2e74 6175  heta += math.tau
-000148e0: 0a0a 2020 2020 2020 2020 7377 6565 705f  ..        sweep_
-000148f0: 7369 676e 203d 2028 6465 6c74 6174 6865  sign = (deltathe
-00014900: 7461 203e 3d20 3029 202d 2028 6465 6c74  ta >= 0) - (delt
-00014910: 6174 6865 7461 203c 2030 290a 2020 2020  atheta < 0).    
-00014920: 2020 2020 6669 6e61 6c5f 7466 203d 2028      final_tf = (
-00014930: 0a20 2020 2020 2020 2020 2020 2054 7261  .            Tra
-00014940: 6e73 666f 726d 2e73 6361 6c69 6e67 2878  nsform.scaling(x
-00014950: 3d31 2c20 793d 7377 6565 705f 7369 676e  =1, y=sweep_sign
-00014960: 2920 2023 2066 6c69 7020 6e65 6761 7469  )  # flip negati
-00014970: 7665 2073 7765 6570 730a 2020 2020 2020  ve sweeps.      
-00014980: 2020 2020 2020 2e72 6f74 6174 6528 7468        .rotate(th
-00014990: 6574 6129 2020 2320 726f 7461 7465 2073  eta)  # rotate s
-000149a0: 7461 7274 206f 6620 6172 6320 746f 2063  tart of arc to c
-000149b0: 6f72 7265 6374 2070 6f73 6974 696f 6e0a  orrect position.
-000149c0: 2020 2020 2020 2020 2020 2020 2e73 6361              .sca
-000149d0: 6c65 2872 6164 6969 2e78 2c20 7261 6469  le(radii.x, radi
-000149e0: 692e 7929 2020 2320 7363 616c 6520 756e  i.y)  # scale un
-000149f0: 6974 2063 6972 636c 6520 696e 746f 2074  it circle into t
-00014a00: 6865 2066 696e 616c 2065 6c6c 6970 7365  he final ellipse
-00014a10: 2073 6861 7065 0a20 2020 2020 2020 2020   shape.         
-00014a20: 2020 202e 726f 7461 7465 2873 656c 662e     .rotate(self.
-00014a30: 726f 7461 7469 6f6e 2920 2023 2072 6f74  rotation)  # rot
-00014a40: 6174 6520 7468 6520 656c 6c69 7073 6520  ate the ellipse 
-00014a50: 7468 6520 7370 6563 6966 6965 6420 616e  the specified an
-00014a60: 676c 650a 2020 2020 2020 2020 2020 2020  gle.            
-00014a70: 2e74 7261 6e73 6c61 7465 2863 656e 7465  .translate(cente
-00014a80: 722e 782c 2063 656e 7465 722e 7929 2020  r.x, center.y)  
-00014a90: 2320 7472 616e 736c 6174 6520 746f 2074  # translate to t
-00014aa0: 6865 2066 696e 616c 2063 6f6f 7264 696e  he final coordin
-00014ab0: 6174 6573 0a20 2020 2020 2020 2029 0a0a  ates.        )..
-00014ac0: 2020 2020 2020 2020 6375 7276 6573 203d          curves =
-00014ad0: 205b 5d0a 0a20 2020 2020 2020 2066 6f72   []..        for
-00014ae0: 2063 7472 6c31 2c20 6374 726c 322c 2065   ctrl1, ctrl2, e
-00014af0: 6e64 2069 6e20 7365 6c66 2e73 7562 6469  nd in self.subdi
-00014b00: 7664 655f 7377 6565 7028 6465 6c74 6174  vde_sweep(deltat
-00014b10: 6865 7461 293a 0a20 2020 2020 2020 2020  heta):.         
-00014b20: 2020 2063 7572 7665 732e 6170 7065 6e64     curves.append
-00014b30: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00014b40: 2020 4265 7a69 6572 4375 7276 6528 6374    BezierCurve(ct
-00014b50: 726c 3120 4020 6669 6e61 6c5f 7466 2c20  rl1 @ final_tf, 
-00014b60: 6374 726c 3220 4020 6669 6e61 6c5f 7466  ctrl2 @ final_tf
-00014b70: 2c20 656e 6420 4020 6669 6e61 6c5f 7466  , end @ final_tf
-00014b80: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
-00014b90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00014ba0: 6375 7276 6573 0a0a 2020 2020 4066 6f72  curves..    @for
-00014bb0: 6365 5f6e 6f64 6f63 756d 656e 740a 2020  ce_nodocument.  
-00014bc0: 2020 6465 6620 7265 6e64 6572 2873 656c    def render(sel
-00014bd0: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
-00014be0: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-00014bf0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00014c00: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00014c10: 2020 2020 2020 2052 656e 6465 7220 7468         Render th
-00014c20: 6973 2070 6174 6820 656c 656d 656e 7420  is path element 
-00014c30: 746f 2069 7473 2050 4446 2072 6570 7265  to its PDF repre
-00014c40: 7365 6e74 6174 696f 6e2e 0a0a 2020 2020  sentation...    
-00014c50: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00014c60: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-00014c70: 7279 2028 4772 6170 6869 6373 5374 6174  ry (GraphicsStat
-00014c80: 6544 6963 7452 6567 6973 7472 7929 3a20  eDictRegistry): 
-00014c90: 7468 6520 6f77 6e65 7227 7320 6772 6170  the owner's grap
-00014ca0: 6869 6373 2073 7461 7465 0a20 2020 2020  hics state.     
-00014cb0: 2020 2020 2020 2020 2020 2064 6963 7469             dicti
-00014cc0: 6f6e 6172 7920 7265 6769 7374 7279 2e0a  onary registry..
-00014cd0: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-00014ce0: 6520 2847 7261 7068 6963 7353 7479 6c65  e (GraphicsStyle
-00014cf0: 293a 2074 6865 2063 7572 7265 6e74 2072  ): the current r
-00014d00: 6573 6f6c 7665 6420 6772 6170 6869 6373  esolved graphics
-00014d10: 2073 7479 6c65 0a20 2020 2020 2020 2020   style.         
-00014d20: 2020 206c 6173 745f 6974 656d 3a20 7468     last_item: th
-00014d30: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-00014d40: 656c 656d 656e 742e 0a20 2020 2020 2020  element..       
-00014d50: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-00014d60: 6e74 3a20 6c61 7374 2070 6f73 6974 696f  nt: last positio
-00014d70: 6e20 7365 7420 6279 2061 2022 4d22 206f  n set by a "M" o
-00014d80: 7220 226d 2220 636f 6d6d 616e 640a 0a20  r "m" command.. 
-00014d90: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-00014da0: 2020 2020 2020 2020 2020 2020 6120 7475              a tu
-00014db0: 706c 6520 6f66 2060 2873 7472 2c20 6e65  ple of `(str, ne
-00014dc0: 775f 6c61 7374 5f69 7465 6d29 602c 2077  w_last_item)`, w
-00014dd0: 6865 7265 2060 6e65 775f 6c61 7374 5f69  here `new_last_i
-00014de0: 7465 6d60 2069 7320 6120 7265 736f 6c76  tem` is a resolv
-00014df0: 6564 0a20 2020 2020 2020 2020 2020 2060  ed.            `
-00014e00: 4265 7a69 6572 4375 7276 6560 2e0a 2020  BezierCurve`..  
-00014e10: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00014e20: 2020 6375 7276 6573 203d 2073 656c 662e    curves = self.
-00014e30: 5f61 7070 726f 7869 6d61 7465 5f61 7263  _approximate_arc
-00014e40: 286c 6173 745f 6974 656d 290a 0a20 2020  (last_item)..   
-00014e50: 2020 2020 2069 6620 6e6f 7420 6375 7276       if not curv
-00014e60: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00014e70: 7265 7475 726e 2022 222c 206c 6173 745f  return "", last_
-00014e80: 6974 656d 0a0a 2020 2020 2020 2020 7265  item..        re
-00014e90: 7475 726e 2028 0a20 2020 2020 2020 2020  turn (.         
-00014ea0: 2020 2022 2022 2e6a 6f69 6e28 0a20 2020     " ".join(.   
-00014eb0: 2020 2020 2020 2020 2020 2020 2063 7572               cur
-00014ec0: 7665 2e72 656e 6465 7228 6773 645f 7265  ve.render(gsd_re
-00014ed0: 6769 7374 7279 2c20 7374 796c 652c 2070  gistry, style, p
-00014ee0: 7265 762c 2069 6e69 7469 616c 5f70 6f69  rev, initial_poi
-00014ef0: 6e74 295b 305d 0a20 2020 2020 2020 2020  nt)[0].         
-00014f00: 2020 2020 2020 2066 6f72 2070 7265 762c         for prev,
-00014f10: 2063 7572 7665 2069 6e20 7a69 7028 5b6c   curve in zip([l
-00014f20: 6173 745f 6974 656d 2c20 2a63 7572 7665  ast_item, *curve
-00014f30: 735b 3a2d 315d 5d2c 2063 7572 7665 7329  s[:-1]], curves)
-00014f40: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-00014f50: 2020 2020 2020 2020 2020 2020 6375 7276              curv
-00014f60: 6573 5b2d 315d 2c0a 2020 2020 2020 2020  es[-1],.        
-00014f70: 2020 2020 696e 6974 6961 6c5f 706f 696e      initial_poin
-00014f80: 742c 0a20 2020 2020 2020 2029 0a0a 2020  t,.        )..  
-00014f90: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
-00014fa0: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
-00014fb0: 6572 5f64 6562 7567 280a 2020 2020 2020  er_debug(.      
-00014fc0: 2020 7365 6c66 2c20 6773 645f 7265 6769    self, gsd_regi
-00014fd0: 7374 7279 2c20 7374 796c 652c 206c 6173  stry, style, las
-00014fe0: 745f 6974 656d 2c20 696e 6974 6961 6c5f  t_item, initial_
-00014ff0: 706f 696e 742c 2064 6562 7567 5f73 7472  point, debug_str
-00015000: 6561 6d2c 2070 6678 0a20 2020 2029 3a0a  eam, pfx.    ):.
-00015010: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00015020: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
-00015030: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
-00015040: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
-00015050: 7461 7469 6f6e 2061 6e64 2070 726f 6475  tation and produ
-00015060: 6365 2064 6562 7567 0a20 2020 2020 2020  ce debug.       
-00015070: 2069 6e66 6f72 6d61 7469 6f6e 2e0a 0a20   information... 
-00015080: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00015090: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-000150a0: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
-000150b0: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
-000150c0: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
-000150d0: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
-000150e0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-000150f0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
-00015100: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
-00015110: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-00015120: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
-00015130: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
-00015140: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
-00015150: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-00015160: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-00015170: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
-00015180: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00015190: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
-000151a0: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
-000151b0: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
-000151c0: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
-000151d0: 7567 5f73 7472 6561 6d20 2869 6f2e 5465  ug_stream (io.Te
-000151e0: 7874 494f 293a 2074 6865 2073 7472 6561  xtIO): the strea
-000151f0: 6d20 746f 2077 6869 6368 2074 6865 2064  m to which the d
-00015200: 6562 7567 206f 7574 7075 7420 7368 6f75  ebug output shou
-00015210: 6c64 2062 650a 2020 2020 2020 2020 2020  ld be.          
-00015220: 2020 2020 2020 7772 6974 7465 6e2e 2054        written. T
-00015230: 6869 7320 6973 206e 6f74 2067 7561 7261  his is not guara
-00015240: 6e74 6565 6420 746f 2062 6520 7365 656b  nteed to be seek
-00015250: 6162 6c65 2028 652e 672e 2069 7420 6d61  able (e.g. it ma
-00015260: 7920 6265 2073 7464 6f75 7420 6f72 0a20  y be stdout or. 
-00015270: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00015280: 7464 6572 7229 2e0a 2020 2020 2020 2020  tderr)..        
-00015290: 2020 2020 7066 7820 2873 7472 293a 2074      pfx (str): t
-000152a0: 6865 2063 7572 7265 6e74 2064 6562 7567  he current debug
-000152b0: 206f 7574 7075 7420 7072 6566 6978 2073   output prefix s
-000152c0: 7472 696e 6720 286f 6e6c 7920 6e65 6564  tring (only need
-000152d0: 6564 2069 6620 656d 6974 7469 6e67 0a20  ed if emitting. 
-000152e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000152f0: 6f72 6520 7468 616e 206f 6e65 206c 696e  ore than one lin
-00015300: 6529 2e0a 0a20 2020 2020 2020 2052 6574  e)...        Ret
-00015310: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
-00015320: 2020 5468 6520 7361 6d65 2074 7570 6c65    The same tuple
-00015330: 2061 7320 6041 7263 2e72 656e 6465 7260   as `Arc.render`
-00015340: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00015350: 2020 2020 2020 6375 7276 6573 203d 2073        curves = s
-00015360: 656c 662e 5f61 7070 726f 7869 6d61 7465  elf._approximate
-00015370: 5f61 7263 286c 6173 745f 6974 656d 290a  _arc(last_item).
-00015380: 0a20 2020 2020 2020 2064 6562 7567 5f73  .        debug_s
-00015390: 7472 6561 6d2e 7772 6974 6528 6622 7b73  tream.write(f"{s
-000153a0: 656c 667d 2072 6573 6f6c 7665 6420 746f  elf} resolved to
-000153b0: 3a5c 6e22 290a 2020 2020 2020 2020 6966  :\n").        if
-000153c0: 206e 6f74 2063 7572 7665 733a 0a20 2020   not curves:.   
-000153d0: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
-000153e0: 7472 6561 6d2e 7772 6974 6528 7066 7820  tream.write(pfx 
-000153f0: 2b20 2220 e294 94e2 9480 206e 6f74 6869  + " ...... nothi
-00015400: 6e67 5c6e 2229 0a20 2020 2020 2020 2020  ng\n").         
-00015410: 2020 2072 6574 7572 6e20 2222 2c20 6c61     return "", la
-00015420: 7374 5f69 7465 6d0a 0a20 2020 2020 2020  st_item..       
-00015430: 2070 7265 7669 6f75 7320 3d20 5b6c 6173   previous = [las
-00015440: 745f 6974 656d 5d0a 2020 2020 2020 2020  t_item].        
-00015450: 666f 7220 6375 7276 6520 696e 2063 7572  for curve in cur
-00015460: 7665 735b 3a2d 315d 3a0a 2020 2020 2020  ves[:-1]:.      
-00015470: 2020 2020 2020 7072 6576 696f 7573 2e61        previous.a
-00015480: 7070 656e 6428 6375 7276 6529 0a20 2020  ppend(curve).   
-00015490: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
-000154a0: 7472 6561 6d2e 7772 6974 6528 7066 7820  tream.write(pfx 
-000154b0: 2b20 6622 20e2 949c e294 8020 7b63 7572  + f" ...... {cur
-000154c0: 7665 7d5c 6e22 290a 2020 2020 2020 2020  ve}\n").        
-000154d0: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
-000154e0: 7465 2870 6678 202b 2066 2220 e294 94e2  te(pfx + f" ....
-000154f0: 9480 207b 6375 7276 6573 5b2d 315d 7d5c  .. {curves[-1]}\
-00015500: 6e22 290a 0a20 2020 2020 2020 2072 6574  n")..        ret
-00015510: 7572 6e20 280a 2020 2020 2020 2020 2020  urn (.          
-00015520: 2020 2220 222e 6a6f 696e 280a 2020 2020    " ".join(.    
-00015530: 2020 2020 2020 2020 2020 2020 6375 7276              curv
-00015540: 652e 7265 6e64 6572 2867 7364 5f72 6567  e.render(gsd_reg
-00015550: 6973 7472 792c 2073 7479 6c65 2c20 7072  istry, style, pr
-00015560: 6576 2c20 696e 6974 6961 6c5f 706f 696e  ev, initial_poin
-00015570: 7429 5b30 5d0a 2020 2020 2020 2020 2020  t)[0].          
-00015580: 2020 2020 2020 666f 7220 7072 6576 2c20        for prev, 
-00015590: 6375 7276 6520 696e 207a 6970 2870 7265  curve in zip(pre
-000155a0: 7669 6f75 732c 2063 7572 7665 7329 0a20  vious, curves). 
-000155b0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-000155c0: 2020 2020 2020 2020 2020 6375 7276 6573            curves
-000155d0: 5b2d 315d 2c0a 2020 2020 2020 2020 2020  [-1],.          
-000155e0: 2020 696e 6974 6961 6c5f 706f 696e 742c    initial_point,
-000155f0: 0a20 2020 2020 2020 2029 0a0a 0a63 6c61  .        )...cla
-00015600: 7373 2052 656c 6174 6976 6541 7263 284e  ss RelativeArc(N
-00015610: 616d 6564 5475 706c 6529 3a0a 2020 2020  amedTuple):.    
-00015620: 2222 220a 2020 2020 416e 2065 6c6c 6970  """.    An ellip
-00015630: 7469 6361 6c20 6172 6320 7061 7468 2065  tical arc path e
-00015640: 6c65 6d65 6e74 2e0a 0a20 2020 2054 6865  lement...    The
-00015650: 2061 7263 2069 7320 6472 6177 6e20 6672   arc is drawn fr
-00015660: 6f6d 2074 6865 2065 6e64 206f 6620 7468  om the end of th
-00015670: 6520 6375 7272 656e 7420 7061 7468 2065  e current path e
-00015680: 6c65 6d65 6e74 2074 6f20 6974 7320 7370  lement to its sp
-00015690: 6563 6966 6965 6420 656e 6420 706f 696e  ecified end poin
-000156a0: 740a 2020 2020 7573 696e 6720 6120 6e75  t.    using a nu
-000156b0: 6d62 6572 206f 6620 7061 7261 6d65 7465  mber of paramete
-000156c0: 7273 2074 6f20 6465 7465 726d 696e 6520  rs to determine 
-000156d0: 686f 7720 6974 2069 7320 636f 6e73 7472  how it is constr
-000156e0: 7563 7465 642e 0a0a 2020 2020 5365 653a  ucted...    See:
-000156f0: 2060 5061 696e 7465 6450 6174 682e 6172   `PaintedPath.ar
-00015700: 635f 7265 6c61 7469 7665 600a 2020 2020  c_relative`.    
-00015710: 2222 220a 0a20 2020 2072 6164 6969 3a20  """..    radii: 
-00015720: 506f 696e 740a 2020 2020 2222 220a 2020  Point.    """.  
-00015730: 2020 5468 6520 782d 2061 6e64 2079 2d72    The x- and y-r
-00015740: 6164 6969 206f 6620 7468 6520 6172 632e  adii of the arc.
-00015750: 2049 6620 6072 6164 6969 2e78 203d 3d20   If `radii.x == 
-00015760: 7261 6469 692e 7960 2074 6865 2061 7263  radii.y` the arc
-00015770: 2077 696c 6c20 6265 2063 6972 6375 6c61   will be circula
-00015780: 722e 0a20 2020 2022 2222 0a20 2020 2072  r..    """.    r
-00015790: 6f74 6174 696f 6e3a 204e 756d 6265 720a  otation: Number.
-000157a0: 2020 2020 2222 2254 6865 2072 6f74 6174      """The rotat
-000157b0: 696f 6e20 6f66 2074 6865 2061 7263 2773  ion of the arc's
-000157c0: 206d 616a 6f72 2f6d 696e 6f72 2061 7865   major/minor axe
-000157d0: 7320 7265 6c61 7469 7665 2074 6f20 7468  s relative to th
-000157e0: 6520 636f 6f72 6469 6e61 7465 2066 7261  e coordinate fra
-000157f0: 6d65 2e22 2222 0a20 2020 206c 6172 6765  me.""".    large
-00015800: 3a20 626f 6f6c 0a20 2020 2022 2222 4966  : bool.    """If
-00015810: 2054 7275 652c 2073 7765 6570 2074 6865   True, sweep the
-00015820: 2061 7263 206f 7665 7220 616e 2061 6e67   arc over an ang
-00015830: 6c65 2067 7265 6174 6572 2074 6861 6e20  le greater than 
-00015840: 6f72 2065 7175 616c 2074 6f20 3138 3020  or equal to 180 
-00015850: 6465 6772 6565 732e 2222 220a 2020 2020  degrees.""".    
-00015860: 7377 6565 703a 2062 6f6f 6c0a 2020 2020  sweep: bool.    
-00015870: 2222 2249 6620 5472 7565 2c20 7468 6520  """If True, the 
-00015880: 6172 6320 6973 2073 7765 7074 2069 6e20  arc is swept in 
-00015890: 7468 6520 706f 7369 7469 7665 2061 6e67  the positive ang
-000158a0: 756c 6172 2064 6972 6563 7469 6f6e 2e22  ular direction."
-000158b0: 2222 0a20 2020 2065 6e64 3a20 506f 696e  "".    end: Poin
-000158c0: 740a 2020 2020 2222 2254 6865 2065 6e64  t.    """The end
-000158d0: 2070 6f69 6e74 206f 6620 7468 6520 6172   point of the ar
-000158e0: 6320 7265 6c61 7469 7665 2074 6f20 7468  c relative to th
-000158f0: 6520 656e 6420 6f66 2074 6865 2070 7265  e end of the pre
-00015900: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-00015910: 6e74 2e22 2222 0a0a 2020 2020 4066 6f72  nt."""..    @for
-00015920: 6365 5f6e 6f64 6f63 756d 656e 740a 2020  ce_nodocument.  
-00015930: 2020 6465 6620 7265 6e64 6572 2873 656c    def render(sel
-00015940: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
-00015950: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-00015960: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00015970: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00015980: 2020 2020 2020 2052 656e 6465 7220 7468         Render th
-00015990: 6973 2070 6174 6820 656c 656d 656e 7420  is path element 
-000159a0: 746f 2069 7473 2050 4446 2072 6570 7265  to its PDF repre
-000159b0: 7365 6e74 6174 696f 6e2e 0a0a 2020 2020  sentation...    
-000159c0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-000159d0: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-000159e0: 7279 2028 4772 6170 6869 6373 5374 6174  ry (GraphicsStat
-000159f0: 6544 6963 7452 6567 6973 7472 7929 3a20  eDictRegistry): 
-00015a00: 7468 6520 6f77 6e65 7227 7320 6772 6170  the owner's grap
-00015a10: 6869 6373 2073 7461 7465 0a20 2020 2020  hics state.     
-00015a20: 2020 2020 2020 2020 2020 2064 6963 7469             dicti
-00015a30: 6f6e 6172 7920 7265 6769 7374 7279 2e0a  onary registry..
-00015a40: 2020 2020 2020 2020 2020 2020 7374 796c              styl
-00015a50: 6520 2847 7261 7068 6963 7353 7479 6c65  e (GraphicsStyle
-00015a60: 293a 2074 6865 2063 7572 7265 6e74 2072  ): the current r
-00015a70: 6573 6f6c 7665 6420 6772 6170 6869 6373  esolved graphics
-00015a80: 2073 7479 6c65 0a20 2020 2020 2020 2020   style.         
-00015a90: 2020 206c 6173 745f 6974 656d 3a20 7468     last_item: th
-00015aa0: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-00015ab0: 656c 656d 656e 742e 0a20 2020 2020 2020  element..       
-00015ac0: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-00015ad0: 6e74 3a20 6c61 7374 2070 6f73 6974 696f  nt: last positio
-00015ae0: 6e20 7365 7420 6279 2061 2022 4d22 206f  n set by a "M" o
-00015af0: 7220 226d 2220 636f 6d6d 616e 640a 0a20  r "m" command.. 
-00015b00: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-00015b10: 2020 2020 2020 2020 2020 2020 6120 7475              a tu
-00015b20: 706c 6520 6f66 2060 2873 7472 2c20 6e65  ple of `(str, ne
-00015b30: 775f 6c61 7374 5f69 7465 6d29 602c 2077  w_last_item)`, w
-00015b40: 6865 7265 2060 6e65 775f 6c61 7374 5f69  here `new_last_i
-00015b50: 7465 6d60 2069 7320 6120 7265 736f 6c76  tem` is a resolv
-00015b60: 6564 0a20 2020 2020 2020 2020 2020 2060  ed.            `
-00015b70: 4265 7a69 6572 4375 7276 6560 2e0a 2020  BezierCurve`..  
-00015b80: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00015b90: 2020 7265 7475 726e 2041 7263 280a 2020    return Arc(.  
-00015ba0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-00015bb0: 6164 6969 2c0a 2020 2020 2020 2020 2020  adii,.          
-00015bc0: 2020 7365 6c66 2e72 6f74 6174 696f 6e2c    self.rotation,
-00015bd0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00015be0: 662e 6c61 7267 652c 0a20 2020 2020 2020  f.large,.       
-00015bf0: 2020 2020 2073 656c 662e 7377 6565 702c       self.sweep,
-00015c00: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-00015c10: 745f 6974 656d 2e65 6e64 5f70 6f69 6e74  t_item.end_point
-00015c20: 202b 2073 656c 662e 656e 642c 0a20 2020   + self.end,.   
-00015c30: 2020 2020 2029 2e72 656e 6465 7228 6773       ).render(gs
-00015c40: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
-00015c50: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
-00015c60: 6974 6961 6c5f 706f 696e 7429 0a0a 2020  itial_point)..  
-00015c70: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
-00015c80: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
-00015c90: 6572 5f64 6562 7567 280a 2020 2020 2020  er_debug(.      
-00015ca0: 2020 7365 6c66 2c20 6773 645f 7265 6769    self, gsd_regi
-00015cb0: 7374 7279 2c20 7374 796c 652c 206c 6173  stry, style, las
-00015cc0: 745f 6974 656d 2c20 696e 6974 6961 6c5f  t_item, initial_
-00015cd0: 706f 696e 742c 2064 6562 7567 5f73 7472  point, debug_str
-00015ce0: 6561 6d2c 2070 6678 0a20 2020 2029 3a0a  eam, pfx.    ):.
-00015cf0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00015d00: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
-00015d10: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
-00015d20: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
-00015d30: 7461 7469 6f6e 2061 6e64 2070 726f 6475  tation and produ
-00015d40: 6365 2064 6562 7567 0a20 2020 2020 2020  ce debug.       
-00015d50: 2069 6e66 6f72 6d61 7469 6f6e 2e0a 0a20   information... 
-00015d60: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00015d70: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-00015d80: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
-00015d90: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
-00015da0: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
-00015db0: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
-00015dc0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-00015dd0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
-00015de0: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
-00015df0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-00015e00: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
-00015e10: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
-00015e20: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
-00015e30: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-00015e40: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-00015e50: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
-00015e60: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00015e70: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
-00015e80: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
-00015e90: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
-00015ea0: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
-00015eb0: 7567 5f73 7472 6561 6d20 2869 6f2e 5465  ug_stream (io.Te
-00015ec0: 7874 494f 293a 2074 6865 2073 7472 6561  xtIO): the strea
-00015ed0: 6d20 746f 2077 6869 6368 2074 6865 2064  m to which the d
-00015ee0: 6562 7567 206f 7574 7075 7420 7368 6f75  ebug output shou
-00015ef0: 6c64 2062 650a 2020 2020 2020 2020 2020  ld be.          
-00015f00: 2020 2020 2020 7772 6974 7465 6e2e 2054        written. T
-00015f10: 6869 7320 6973 206e 6f74 2067 7561 7261  his is not guara
-00015f20: 6e74 6565 6420 746f 2062 6520 7365 656b  nteed to be seek
-00015f30: 6162 6c65 2028 652e 672e 2069 7420 6d61  able (e.g. it ma
-00015f40: 7920 6265 2073 7464 6f75 7420 6f72 0a20  y be stdout or. 
-00015f50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00015f60: 7464 6572 7229 2e0a 2020 2020 2020 2020  tderr)..        
-00015f70: 2020 2020 7066 7820 2873 7472 293a 2074      pfx (str): t
-00015f80: 6865 2063 7572 7265 6e74 2064 6562 7567  he current debug
-00015f90: 206f 7574 7075 7420 7072 6566 6978 2073   output prefix s
-00015fa0: 7472 696e 6720 286f 6e6c 7920 6e65 6564  tring (only need
-00015fb0: 6564 2069 6620 656d 6974 7469 6e67 0a20  ed if emitting. 
-00015fc0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00015fd0: 6f72 6520 7468 616e 206f 6e65 206c 696e  ore than one lin
-00015fe0: 6529 2e0a 0a20 2020 2020 2020 2052 6574  e)...        Ret
-00015ff0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
-00016000: 2020 5468 6520 7361 6d65 2074 7570 6c65    The same tuple
-00016010: 2061 7320 6052 656c 6174 6976 6541 7263   as `RelativeArc
-00016020: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
-00016030: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-00016040: 6e65 776c 696e 6520 6973 2069 6e74 656e  newline is inten
-00016050: 7469 6f6e 616c 6c79 206d 6973 7369 6e67  tionally missing
-00016060: 2068 6572 650a 2020 2020 2020 2020 6465   here.        de
-00016070: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
-00016080: 2866 227b 7365 6c66 7d20 7265 736f 6c76  (f"{self} resolv
-00016090: 6564 2074 6f20 2229 0a0a 2020 2020 2020  ed to ")..      
-000160a0: 2020 7265 7475 726e 2041 7263 280a 2020    return Arc(.  
-000160b0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-000160c0: 6164 6969 2c0a 2020 2020 2020 2020 2020  adii,.          
-000160d0: 2020 7365 6c66 2e72 6f74 6174 696f 6e2c    self.rotation,
-000160e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000160f0: 662e 6c61 7267 652c 0a20 2020 2020 2020  f.large,.       
-00016100: 2020 2020 2073 656c 662e 7377 6565 702c       self.sweep,
-00016110: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
-00016120: 745f 6974 656d 2e65 6e64 5f70 6f69 6e74  t_item.end_point
-00016130: 202b 2073 656c 662e 656e 642c 0a20 2020   + self.end,.   
-00016140: 2020 2020 2029 2e72 656e 6465 725f 6465       ).render_de
-00016150: 6275 6728 6773 645f 7265 6769 7374 7279  bug(gsd_registry
-00016160: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
-00016170: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
-00016180: 742c 2064 6562 7567 5f73 7472 6561 6d2c  t, debug_stream,
-00016190: 2070 6678 290a 0a0a 636c 6173 7320 5265   pfx)...class Re
-000161a0: 6374 616e 676c 6528 4e61 6d65 6454 7570  ctangle(NamedTup
-000161b0: 6c65 293a 0a20 2020 2022 2222 4120 7064  le):.    """A pd
-000161c0: 6620 7072 696d 6974 6976 6520 7265 6374  f primitive rect
-000161d0: 616e 676c 652e 2222 220a 0a20 2020 206f  angle."""..    o
-000161e0: 7267 3a20 506f 696e 740a 2020 2020 2222  rg: Point.    ""
-000161f0: 2254 6865 2074 6f70 2d6c 6566 7420 636f  "The top-left co
-00016200: 726e 6572 206f 6620 7468 6520 7265 6374  rner of the rect
-00016210: 616e 676c 652e 2222 220a 2020 2020 7369  angle.""".    si
-00016220: 7a65 3a20 506f 696e 740a 2020 2020 2222  ze: Point.    ""
-00016230: 2254 6865 2077 6964 7468 2061 6e64 2068  "The width and h
-00016240: 6569 6768 7420 6f66 2074 6865 2072 6563  eight of the rec
-00016250: 7461 6e67 6c65 2e22 2222 0a0a 2020 2020  tangle."""..    
-00016260: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
-00016270: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
-00016280: 2873 656c 662c 2067 7364 5f72 6567 6973  (self, gsd_regis
-00016290: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
-000162a0: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
-000162b0: 6f69 6e74 293a 0a20 2020 2020 2020 2022  oint):.        "
-000162c0: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
-000162d0: 7220 7468 6973 2070 6174 6820 656c 656d  r this path elem
-000162e0: 656e 7420 746f 2069 7473 2050 4446 2072  ent to its PDF r
-000162f0: 6570 7265 7365 6e74 6174 696f 6e2e 0a0a  epresentation...
-00016300: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00016310: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
-00016320: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
-00016330: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
-00016340: 7929 3a20 7468 6520 6f77 6e65 7227 7320  y): the owner's 
-00016350: 6772 6170 6869 6373 2073 7461 7465 0a20  graphics state. 
-00016360: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00016370: 6963 7469 6f6e 6172 7920 7265 6769 7374  ictionary regist
-00016380: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
-00016390: 7374 796c 6520 2847 7261 7068 6963 7353  style (GraphicsS
-000163a0: 7479 6c65 293a 2074 6865 2063 7572 7265  tyle): the curre
-000163b0: 6e74 2072 6573 6f6c 7665 6420 6772 6170  nt resolved grap
-000163c0: 6869 6373 2073 7479 6c65 0a20 2020 2020  hics style.     
-000163d0: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
-000163e0: 3a20 7468 6520 7072 6576 696f 7573 2070  : the previous p
-000163f0: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
-00016400: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
-00016410: 5f70 6f69 6e74 3a20 6c61 7374 2070 6f73  _point: last pos
-00016420: 6974 696f 6e20 7365 7420 6279 2061 2022  ition set by a "
-00016430: 4d22 206f 7220 226d 2220 636f 6d6d 616e  M" or "m" comman
-00016440: 640a 0a20 2020 2020 2020 2052 6574 7572  d..        Retur
-00016450: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00016460: 6120 7475 706c 6520 6f66 2060 2873 7472  a tuple of `(str
-00016470: 2c20 6e65 775f 6c61 7374 5f69 7465 6d29  , new_last_item)
-00016480: 602c 2077 6865 7265 2060 6e65 775f 6c61  `, where `new_la
-00016490: 7374 5f69 7465 6d60 2069 7320 6120 604c  st_item` is a `L
-000164a0: 696e 6560 2062 6163 6b20 746f 0a20 2020  ine` back to.   
-000164b0: 2020 2020 2020 2020 2074 6865 2072 6563           the rec
-000164c0: 7461 6e67 6c65 2773 206f 7269 6769 6e2e  tangle's origin.
-000164d0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000164e0: 2020 2020 2023 2070 796c 696e 743a 2064       # pylint: d
-000164f0: 6973 6162 6c65 3d75 6e75 7365 642d 6172  isable=unused-ar
-00016500: 6775 6d65 6e74 0a0a 2020 2020 2020 2020  gument..        
-00016510: 7265 7475 726e 2028 0a20 2020 2020 2020  return (.       
-00016520: 2020 2020 2066 227b 7365 6c66 2e6f 7267       f"{self.org
-00016530: 2e72 656e 6465 7228 297d 207b 7365 6c66  .render()} {self
-00016540: 2e73 697a 652e 7265 6e64 6572 2829 7d20  .size.render()} 
-00016550: 7265 222c 0a20 2020 2020 2020 2020 2020  re",.           
-00016560: 204c 696e 6528 7365 6c66 2e6f 7267 292c   Line(self.org),
-00016570: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
-00016580: 7469 616c 5f70 6f69 6e74 2c0a 2020 2020  tial_point,.    
-00016590: 2020 2020 290a 0a20 2020 2040 666f 7263      )..    @forc
-000165a0: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
-000165b0: 2064 6566 2072 656e 6465 725f 6465 6275   def render_debu
-000165c0: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-000165d0: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-000165e0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-000165f0: 2069 6e69 7469 616c 5f70 6f69 6e74 2c20   initial_point, 
-00016600: 6465 6275 675f 7374 7265 616d 2c20 7066  debug_stream, pf
-00016610: 780a 2020 2020 293a 0a20 2020 2020 2020  x.    ):.       
-00016620: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
-00016630: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
-00016640: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
-00016650: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
-00016660: 616e 6420 7072 6f64 7563 6520 6465 6275  and produce debu
-00016670: 670a 2020 2020 2020 2020 696e 666f 726d  g.        inform
-00016680: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
-00016690: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-000166a0: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
-000166b0: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
-000166c0: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
-000166d0: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
-000166e0: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
-000166f0: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
-00016700: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
-00016710: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
-00016720: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
-00016730: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
-00016740: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
-00016750: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
-00016760: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
-00016770: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-00016780: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
-00016790: 2069 6e69 7469 616c 5f70 6f69 6e74 3a20   initial_point: 
-000167a0: 6c61 7374 2070 6f73 6974 696f 6e20 7365  last position se
-000167b0: 7420 6279 2061 2022 4d22 206f 7220 226d  t by a "M" or "m
-000167c0: 2220 636f 6d6d 616e 640a 2020 2020 2020  " command.      
-000167d0: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
-000167e0: 616d 2028 696f 2e54 6578 7449 4f29 3a20  am (io.TextIO): 
-000167f0: 7468 6520 7374 7265 616d 2074 6f20 7768  the stream to wh
-00016800: 6963 6820 7468 6520 6465 6275 6720 6f75  ich the debug ou
-00016810: 7470 7574 2073 686f 756c 6420 6265 0a20  tput should be. 
-00016820: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00016830: 7269 7474 656e 2e20 5468 6973 2069 7320  ritten. This is 
-00016840: 6e6f 7420 6775 6172 616e 7465 6564 2074  not guaranteed t
-00016850: 6f20 6265 2073 6565 6b61 626c 6520 2865  o be seekable (e
-00016860: 2e67 2e20 6974 206d 6179 2062 6520 7374  .g. it may be st
-00016870: 646f 7574 206f 720a 2020 2020 2020 2020  dout or.        
-00016880: 2020 2020 2020 2020 7374 6465 7272 292e          stderr).
-00016890: 0a20 2020 2020 2020 2020 2020 2070 6678  .            pfx
-000168a0: 2028 7374 7229 3a20 7468 6520 6375 7272   (str): the curr
-000168b0: 656e 7420 6465 6275 6720 6f75 7470 7574  ent debug output
-000168c0: 2070 7265 6669 7820 7374 7269 6e67 2028   prefix string (
-000168d0: 6f6e 6c79 206e 6565 6465 6420 6966 2065  only needed if e
-000168e0: 6d69 7474 696e 670a 2020 2020 2020 2020  mitting.        
-000168f0: 2020 2020 2020 2020 6d6f 7265 2074 6861          more tha
-00016900: 6e20 6f6e 6520 6c69 6e65 292e 0a0a 2020  n one line)...  
-00016910: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
-00016920: 2020 2020 2020 2020 2020 2054 6865 2073             The s
-00016930: 616d 6520 7475 706c 6520 6173 2060 5265  ame tuple as `Re
-00016940: 6374 616e 676c 652e 7265 6e64 6572 602e  ctangle.render`.
-00016950: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00016960: 2020 2020 2023 2070 796c 696e 743a 2064       # pylint: d
-00016970: 6973 6162 6c65 3d75 6e75 7365 642d 6172  isable=unused-ar
-00016980: 6775 6d65 6e74 0a20 2020 2020 2020 2072  gument.        r
-00016990: 656e 6465 7265 642c 2072 6573 6f6c 7665  endered, resolve
-000169a0: 642c 2069 6e69 7469 616c 5f70 6f69 6e74  d, initial_point
-000169b0: 203d 2073 656c 662e 7265 6e64 6572 280a   = self.render(.
-000169c0: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-000169d0: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
-000169e0: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-000169f0: 6961 6c5f 706f 696e 740a 2020 2020 2020  ial_point.      
-00016a00: 2020 290a 2020 2020 2020 2020 6465 6275    ).        debu
-00016a10: 675f 7374 7265 616d 2e77 7269 7465 2866  g_stream.write(f
-00016a20: 227b 7365 6c66 7d20 7265 736f 6c76 6564  "{self} resolved
-00016a30: 2074 6f20 7b72 656e 6465 7265 647d 5c6e   to {rendered}\n
-00016a40: 2229 0a0a 2020 2020 2020 2020 7265 7475  ")..        retu
-00016a50: 726e 2072 656e 6465 7265 642c 2072 6573  rn rendered, res
-00016a60: 6f6c 7665 642c 2069 6e69 7469 616c 5f70  olved, initial_p
-00016a70: 6f69 6e74 0a0a 0a63 6c61 7373 2052 6f75  oint...class Rou
-00016a80: 6e64 6564 5265 6374 616e 676c 6528 4e61  ndedRectangle(Na
-00016a90: 6d65 6454 7570 6c65 293a 0a20 2020 2022  medTuple):.    "
-00016aa0: 2222 0a20 2020 2041 2072 6563 7461 6e67  "".    A rectang
-00016ab0: 6c65 2077 6974 6820 726f 756e 6465 6420  le with rounded 
-00016ac0: 636f 726e 6572 732e 0a0a 2020 2020 5365  corners...    Se
-00016ad0: 653a 2060 5061 696e 7465 6450 6174 682e  e: `PaintedPath.
-00016ae0: 7265 6374 616e 676c 6560 0a20 2020 2022  rectangle`.    "
-00016af0: 2222 0a0a 2020 2020 6f72 673a 2050 6f69  ""..    org: Poi
-00016b00: 6e74 0a20 2020 2022 2222 5468 6520 746f  nt.    """The to
-00016b10: 702d 6c65 6674 2063 6f72 6e65 7220 6f66  p-left corner of
-00016b20: 2074 6865 2072 6563 7461 6e67 6c65 2e22   the rectangle."
-00016b30: 2222 0a20 2020 2073 697a 653a 2050 6f69  "".    size: Poi
-00016b40: 6e74 0a20 2020 2022 2222 5468 6520 7769  nt.    """The wi
-00016b50: 6474 6820 616e 6420 6865 6967 6874 206f  dth and height o
-00016b60: 6620 7468 6520 7265 6374 616e 676c 652e  f the rectangle.
-00016b70: 2222 220a 2020 2020 636f 726e 6572 5f72  """.    corner_r
-00016b80: 6164 6969 3a20 506f 696e 740a 2020 2020  adii: Point.    
-00016b90: 2222 2254 6865 2078 2d20 616e 6420 792d  """The x- and y-
-00016ba0: 7261 6469 7573 206f 6620 7468 6520 636f  radius of the co
-00016bb0: 726e 6572 732e 2222 220a 0a20 2020 2064  rners."""..    d
-00016bc0: 6566 205f 6465 636f 6d70 6f73 6528 7365  ef _decompose(se
-00016bd0: 6c66 293a 0a20 2020 2020 2020 2069 7465  lf):.        ite
-00016be0: 6d73 203d 205b 5d0a 0a20 2020 2020 2020  ms = []..       
-00016bf0: 2069 6620 2873 656c 662e 7369 7a65 2e78   if (self.size.x
-00016c00: 203d 3d20 3029 2061 6e64 2028 7365 6c66   == 0) and (self
-00016c10: 2e73 697a 652e 7920 3d3d 2030 293a 0a20  .size.y == 0):. 
-00016c20: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-00016c30: 2020 2020 2020 2020 656c 6966 2028 7365          elif (se
-00016c40: 6c66 2e73 697a 652e 7820 3d3d 2030 2920  lf.size.x == 0) 
-00016c50: 6f72 2028 7365 6c66 2e73 697a 652e 7920  or (self.size.y 
-00016c60: 3d3d 2030 293a 0a20 2020 2020 2020 2020  == 0):.         
-00016c70: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
-00016c80: 4d6f 7665 2873 656c 662e 6f72 6729 290a  Move(self.org)).
-00016c90: 2020 2020 2020 2020 2020 2020 6974 656d              item
-00016ca0: 732e 6170 7065 6e64 284c 696e 6528 7365  s.append(Line(se
-00016cb0: 6c66 2e6f 7267 202b 2073 656c 662e 7369  lf.org + self.si
-00016cc0: 7a65 2929 0a20 2020 2020 2020 2020 2020  ze)).           
-00016cd0: 2069 7465 6d73 2e61 7070 656e 6428 436c   items.append(Cl
-00016ce0: 6f73 6528 2929 0a20 2020 2020 2020 2065  ose()).        e
-00016cf0: 6c69 6620 2873 656c 662e 636f 726e 6572  lif (self.corner
-00016d00: 5f72 6164 6969 2e78 203d 3d20 3029 206f  _radii.x == 0) o
-00016d10: 7220 2873 656c 662e 636f 726e 6572 5f72  r (self.corner_r
-00016d20: 6164 6969 2e79 203d 3d20 3029 3a0a 2020  adii.y == 0):.  
-00016d30: 2020 2020 2020 2020 2020 6974 656d 732e            items.
-00016d40: 6170 7065 6e64 2852 6563 7461 6e67 6c65  append(Rectangle
-00016d50: 2873 656c 662e 6f72 672c 2073 656c 662e  (self.org, self.
-00016d60: 7369 7a65 2929 0a20 2020 2020 2020 2065  size)).        e
-00016d70: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00016d80: 2078 2c20 7920 3d20 7365 6c66 2e6f 7267   x, y = self.org
-00016d90: 0a20 2020 2020 2020 2020 2020 2077 2c20  .            w, 
-00016da0: 6820 3d20 7365 6c66 2e73 697a 650a 2020  h = self.size.  
-00016db0: 2020 2020 2020 2020 2020 7278 2c20 7279            rx, ry
-00016dc0: 203d 2073 656c 662e 636f 726e 6572 5f72   = self.corner_r
-00016dd0: 6164 6969 0a20 2020 2020 2020 2020 2020  adii.           
-00016de0: 2073 6967 6e5f 7769 6474 6820 3d20 2873   sign_width = (s
-00016df0: 656c 662e 7369 7a65 2e78 203e 3d20 3029  elf.size.x >= 0)
-00016e00: 202d 2028 7365 6c66 2e73 697a 652e 7820   - (self.size.x 
-00016e10: 3c20 3029 0a20 2020 2020 2020 2020 2020  < 0).           
-00016e20: 2073 6967 6e5f 6865 6967 6874 203d 2028   sign_height = (
-00016e30: 7365 6c66 2e73 697a 652e 7920 3e3d 2030  self.size.y >= 0
-00016e40: 2920 2d20 2873 656c 662e 7369 7a65 2e79  ) - (self.size.y
-00016e50: 203c 2030 290a 0a20 2020 2020 2020 2020   < 0)..         
-00016e60: 2020 2069 6620 6162 7328 7278 2920 3e20     if abs(rx) > 
-00016e70: 6162 7328 7729 3a0a 2020 2020 2020 2020  abs(w):.        
-00016e80: 2020 2020 2020 2020 7278 203d 2073 656c          rx = sel
-00016e90: 662e 7369 7a65 2e78 0a0a 2020 2020 2020  f.size.x..      
-00016ea0: 2020 2020 2020 6966 2061 6273 2872 7929        if abs(ry)
-00016eb0: 203e 2061 6273 2868 293a 0a20 2020 2020   > abs(h):.     
-00016ec0: 2020 2020 2020 2020 2020 2072 7920 3d20             ry = 
-00016ed0: 7365 6c66 2e73 697a 652e 790a 0a20 2020  self.size.y..   
-00016ee0: 2020 2020 2020 2020 2072 7820 3d20 7369           rx = si
-00016ef0: 676e 5f77 6964 7468 202a 2061 6273 2872  gn_width * abs(r
-00016f00: 7829 0a20 2020 2020 2020 2020 2020 2072  x).            r
-00016f10: 7920 3d20 7369 676e 5f68 6569 6768 7420  y = sign_height 
-00016f20: 2a20 6162 7328 7279 290a 2020 2020 2020  * abs(ry).      
-00016f30: 2020 2020 2020 6172 635f 7261 6420 3d20        arc_rad = 
-00016f40: 506f 696e 7428 7278 2c20 7279 290a 0a20  Point(rx, ry).. 
-00016f50: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-00016f60: 2e61 7070 656e 6428 4d6f 7665 2850 6f69  .append(Move(Poi
-00016f70: 6e74 2878 202b 2072 782c 2079 2929 290a  nt(x + rx, y))).
-00016f80: 2020 2020 2020 2020 2020 2020 6974 656d              item
-00016f90: 732e 6170 7065 6e64 284c 696e 6528 506f  s.append(Line(Po
-00016fa0: 696e 7428 7820 2b20 7720 2d20 7278 2c20  int(x + w - rx, 
-00016fb0: 7929 2929 0a20 2020 2020 2020 2020 2020  y))).           
-00016fc0: 2069 7465 6d73 2e61 7070 656e 6428 4172   items.append(Ar
-00016fd0: 6328 6172 635f 7261 642c 2030 2c20 4661  c(arc_rad, 0, Fa
-00016fe0: 6c73 652c 2054 7275 652c 2050 6f69 6e74  lse, True, Point
-00016ff0: 2878 202b 2077 2c20 7920 2b20 7279 2929  (x + w, y + ry))
-00017000: 290a 2020 2020 2020 2020 2020 2020 6974  ).            it
-00017010: 656d 732e 6170 7065 6e64 284c 696e 6528  ems.append(Line(
-00017020: 506f 696e 7428 7820 2b20 772c 2079 202b  Point(x + w, y +
-00017030: 2068 202d 2072 7929 2929 0a20 2020 2020   h - ry))).     
-00017040: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
-00017050: 656e 6428 4172 6328 6172 635f 7261 642c  end(Arc(arc_rad,
-00017060: 2030 2c20 4661 6c73 652c 2054 7275 652c   0, False, True,
-00017070: 2050 6f69 6e74 2878 202b 2077 202d 2072   Point(x + w - r
-00017080: 782c 2079 202b 2068 2929 290a 2020 2020  x, y + h))).    
-00017090: 2020 2020 2020 2020 6974 656d 732e 6170          items.ap
-000170a0: 7065 6e64 284c 696e 6528 506f 696e 7428  pend(Line(Point(
-000170b0: 7820 2b20 7278 2c20 7920 2b20 6829 2929  x + rx, y + h)))
-000170c0: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
-000170d0: 6d73 2e61 7070 656e 6428 4172 6328 6172  ms.append(Arc(ar
-000170e0: 635f 7261 642c 2030 2c20 4661 6c73 652c  c_rad, 0, False,
-000170f0: 2054 7275 652c 2050 6f69 6e74 2878 2c20   True, Point(x, 
-00017100: 7920 2b20 6820 2d20 7279 2929 290a 2020  y + h - ry))).  
-00017110: 2020 2020 2020 2020 2020 6974 656d 732e            items.
-00017120: 6170 7065 6e64 284c 696e 6528 506f 696e  append(Line(Poin
-00017130: 7428 782c 2079 202b 2072 7929 2929 0a20  t(x, y + ry))). 
-00017140: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-00017150: 2e61 7070 656e 6428 4172 6328 6172 635f  .append(Arc(arc_
-00017160: 7261 642c 2030 2c20 4661 6c73 652c 2054  rad, 0, False, T
-00017170: 7275 652c 2050 6f69 6e74 2878 202b 2072  rue, Point(x + r
-00017180: 782c 2079 2929 290a 2020 2020 2020 2020  x, y))).        
-00017190: 2020 2020 6974 656d 732e 6170 7065 6e64      items.append
-000171a0: 2843 6c6f 7365 2829 290a 0a20 2020 2020  (Close())..     
-000171b0: 2020 2072 6574 7572 6e20 6974 656d 730a     return items.
-000171c0: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
-000171d0: 6375 6d65 6e74 0a20 2020 2064 6566 2072  cument.    def r
-000171e0: 656e 6465 7228 7365 6c66 2c20 6773 645f  ender(self, gsd_
-000171f0: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
-00017200: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-00017210: 6961 6c5f 706f 696e 7429 3a0a 2020 2020  ial_point):.    
-00017220: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00017230: 5265 6e64 6572 2074 6869 7320 7061 7468  Render this path
-00017240: 2065 6c65 6d65 6e74 2074 6f20 6974 7320   element to its 
-00017250: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
-00017260: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
-00017270: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
-00017280: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
-00017290: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
-000172a0: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
-000172b0: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
-000172c0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
-000172d0: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
-000172e0: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
-000172f0: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
-00017300: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
-00017310: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
-00017320: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
-00017330: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-00017340: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
-00017350: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-00017360: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
-00017370: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
-00017380: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
-00017390: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
-000173a0: 6f6d 6d61 6e64 0a0a 2020 2020 2020 2020  ommand..        
-000173b0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-000173c0: 2020 2020 2061 2074 7570 6c65 206f 6620       a tuple of 
-000173d0: 6028 7374 722c 206e 6577 5f6c 6173 745f  `(str, new_last_
-000173e0: 6974 656d 2960 2c20 7768 6572 6520 606e  item)`, where `n
-000173f0: 6577 5f6c 6173 745f 6974 656d 6020 6973  ew_last_item` is
-00017400: 2061 2072 6573 6f6c 7665 640a 2020 2020   a resolved.    
-00017410: 2020 2020 2020 2020 604c 696e 6560 2e0a          `Line`..
-00017420: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00017430: 2020 2020 636f 6d70 6f6e 656e 7473 203d      components =
-00017440: 2073 656c 662e 5f64 6563 6f6d 706f 7365   self._decompose
-00017450: 2829 0a0a 2020 2020 2020 2020 6966 206e  ()..        if n
-00017460: 6f74 2063 6f6d 706f 6e65 6e74 733a 0a20  ot components:. 
-00017470: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00017480: 6e20 2222 2c20 6c61 7374 5f69 7465 6d0a  n "", last_item.
-00017490: 0a20 2020 2020 2020 2072 656e 6465 725f  .        render_
-000174a0: 6c69 7374 203d 205b 5d0a 2020 2020 2020  list = [].      
-000174b0: 2020 666f 7220 6974 656d 2069 6e20 636f    for item in co
-000174c0: 6d70 6f6e 656e 7473 3a0a 2020 2020 2020  mponents:.      
-000174d0: 2020 2020 2020 7265 6e64 6572 6564 2c20        rendered, 
-000174e0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-000174f0: 616c 5f70 6f69 6e74 203d 2069 7465 6d2e  al_point = item.
-00017500: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
-00017510: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
-00017520: 7374 7279 2c20 7374 796c 652c 206c 6173  stry, style, las
-00017530: 745f 6974 656d 2c20 696e 6974 6961 6c5f  t_item, initial_
-00017540: 706f 696e 740a 2020 2020 2020 2020 2020  point.          
-00017550: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00017560: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
-00017570: 6e64 2872 656e 6465 7265 6429 0a0a 2020  nd(rendered)..  
-00017580: 2020 2020 2020 7265 7475 726e 2022 2022        return " "
-00017590: 2e6a 6f69 6e28 7265 6e64 6572 5f6c 6973  .join(render_lis
-000175a0: 7429 2c20 4c69 6e65 2873 656c 662e 6f72  t), Line(self.or
-000175b0: 6729 2c20 696e 6974 6961 6c5f 706f 696e  g), initial_poin
-000175c0: 740a 0a20 2020 2040 666f 7263 655f 6e6f  t..    @force_no
-000175d0: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
-000175e0: 2072 656e 6465 725f 6465 6275 6728 0a20   render_debug(. 
-000175f0: 2020 2020 2020 2073 656c 662c 2067 7364         self, gsd
-00017600: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
-00017610: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-00017620: 7469 616c 5f70 6f69 6e74 2c20 6465 6275  tial_point, debu
-00017630: 675f 7374 7265 616d 2c20 7066 780a 2020  g_stream, pfx.  
-00017640: 2020 293a 0a20 2020 2020 2020 2022 2222    ):.        """
-00017650: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
-00017660: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
-00017670: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
-00017680: 7265 7365 6e74 6174 696f 6e20 616e 6420  resentation and 
-00017690: 7072 6f64 7563 6520 6465 6275 670a 2020  produce debug.  
-000176a0: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
-000176b0: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
-000176c0: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
-000176d0: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
-000176e0: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
-000176f0: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
-00017700: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
-00017710: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
-00017720: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
-00017730: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
-00017740: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
-00017750: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
-00017760: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
-00017770: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
-00017780: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-00017790: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
-000177a0: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
-000177b0: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
-000177c0: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
-000177d0: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
-000177e0: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
-000177f0: 6d6d 616e 640a 2020 2020 2020 2020 2020  mmand.          
-00017800: 2020 6465 6275 675f 7374 7265 616d 2028    debug_stream (
-00017810: 696f 2e54 6578 7449 4f29 3a20 7468 6520  io.TextIO): the 
-00017820: 7374 7265 616d 2074 6f20 7768 6963 6820  stream to which 
-00017830: 7468 6520 6465 6275 6720 6f75 7470 7574  the debug output
-00017840: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
-00017850: 2020 2020 2020 2020 2020 2077 7269 7474             writt
-00017860: 656e 2e20 5468 6973 2069 7320 6e6f 7420  en. This is not 
-00017870: 6775 6172 616e 7465 6564 2074 6f20 6265  guaranteed to be
-00017880: 2073 6565 6b61 626c 6520 2865 2e67 2e20   seekable (e.g. 
-00017890: 6974 206d 6179 2062 6520 7374 646f 7574  it may be stdout
-000178a0: 206f 720a 2020 2020 2020 2020 2020 2020   or.            
-000178b0: 2020 2020 7374 6465 7272 292e 0a20 2020      stderr)..   
-000178c0: 2020 2020 2020 2020 2070 6678 2028 7374           pfx (st
-000178d0: 7229 3a20 7468 6520 6375 7272 656e 7420  r): the current 
-000178e0: 6465 6275 6720 6f75 7470 7574 2070 7265  debug output pre
-000178f0: 6669 7820 7374 7269 6e67 2028 6f6e 6c79  fix string (only
-00017900: 206e 6565 6465 6420 6966 2065 6d69 7474   needed if emitt
-00017910: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-00017920: 2020 2020 6d6f 7265 2074 6861 6e20 6f6e      more than on
-00017930: 6520 6c69 6e65 292e 0a0a 2020 2020 2020  e line)...      
-00017940: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-00017950: 2020 2020 2020 2054 6865 2073 616d 6520         The same 
-00017960: 7475 706c 6520 6173 2060 526f 756e 6465  tuple as `Rounde
-00017970: 6452 6563 7461 6e67 6c65 2e72 656e 6465  dRectangle.rende
-00017980: 7260 2e0a 2020 2020 2020 2020 2222 220a  r`..        """.
-00017990: 2020 2020 2020 2020 636f 6d70 6f6e 656e          componen
-000179a0: 7473 203d 2073 656c 662e 5f64 6563 6f6d  ts = self._decom
-000179b0: 706f 7365 2829 0a0a 2020 2020 2020 2020  pose()..        
-000179c0: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
-000179d0: 7465 2866 227b 7365 6c66 7d20 7265 736f  te(f"{self} reso
-000179e0: 6c76 6564 2074 6f3a 5c6e 2229 0a20 2020  lved to:\n").   
-000179f0: 2020 2020 2069 6620 6e6f 7420 636f 6d70       if not comp
-00017a00: 6f6e 656e 7473 3a0a 2020 2020 2020 2020  onents:.        
-00017a10: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
-00017a20: 2e77 7269 7465 2870 6678 202b 2022 20e2  .write(pfx + " .
-00017a30: 9494 e294 8020 6e6f 7468 696e 675c 6e22  ..... nothing\n"
-00017a40: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00017a50: 7475 726e 2022 222c 206c 6173 745f 6974  turn "", last_it
-00017a60: 656d 0a0a 2020 2020 2020 2020 7265 6e64  em..        rend
-00017a70: 6572 5f6c 6973 7420 3d20 5b5d 0a20 2020  er_list = [].   
-00017a80: 2020 2020 2066 6f72 2069 7465 6d20 696e       for item in
-00017a90: 2063 6f6d 706f 6e65 6e74 735b 3a2d 315d   components[:-1]
-00017aa0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00017ab0: 6e64 6572 6564 2c20 6c61 7374 5f69 7465  ndered, last_ite
-00017ac0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00017ad0: 203d 2069 7465 6d2e 7265 6e64 6572 280a   = item.render(.
-00017ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017af0: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-00017b00: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-00017b10: 696e 6974 6961 6c5f 706f 696e 740a 2020  initial_point.  
-00017b20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00017b30: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
-00017b40: 7265 616d 2e77 7269 7465 2870 6678 202b  ream.write(pfx +
-00017b50: 2066 2220 e294 9ce2 9480 207b 6974 656d   f" ...... {item
-00017b60: 7d5c 6e22 290a 2020 2020 2020 2020 2020  }\n").          
-00017b70: 2020 7265 6e64 6572 5f6c 6973 742e 6170    render_list.ap
-00017b80: 7065 6e64 2872 656e 6465 7265 6429 0a0a  pend(rendered)..
-00017b90: 2020 2020 2020 2020 7265 6e64 6572 6564          rendered
-00017ba0: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-00017bb0: 7469 616c 5f70 6f69 6e74 203d 2063 6f6d  tial_point = com
-00017bc0: 706f 6e65 6e74 735b 2d31 5d2e 7265 6e64  ponents[-1].rend
-00017bd0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-00017be0: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-00017bf0: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-00017c00: 696e 6974 6961 6c5f 706f 696e 740a 2020  initial_point.  
-00017c10: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00017c20: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
-00017c30: 7465 2870 6678 202b 2066 2220 e294 94e2  te(pfx + f" ....
-00017c40: 9480 207b 636f 6d70 6f6e 656e 7473 5b2d  .. {components[-
-00017c50: 315d 7d5c 6e22 290a 2020 2020 2020 2020  1]}\n").        
-00017c60: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
-00017c70: 6e64 2872 656e 6465 7265 6429 0a0a 2020  nd(rendered)..  
-00017c80: 2020 2020 2020 7265 7475 726e 2022 2022        return " "
-00017c90: 2e6a 6f69 6e28 7265 6e64 6572 5f6c 6973  .join(render_lis
-00017ca0: 7429 2c20 4c69 6e65 2873 656c 662e 6f72  t), Line(self.or
-00017cb0: 6729 2c20 696e 6974 6961 6c5f 706f 696e  g), initial_poin
-00017cc0: 740a 0a0a 636c 6173 7320 456c 6c69 7073  t...class Ellips
-00017cd0: 6528 4e61 6d65 6454 7570 6c65 293a 0a20  e(NamedTuple):. 
-00017ce0: 2020 2022 2222 0a20 2020 2041 6e20 656c     """.    An el
-00017cf0: 6c69 7073 652e 0a0a 2020 2020 5365 653a  lipse...    See:
-00017d00: 2060 5061 696e 7465 6450 6174 682e 656c   `PaintedPath.el
-00017d10: 6c69 7073 6560 0a20 2020 2022 2222 0a0a  lipse`.    """..
-00017d20: 2020 2020 7261 6469 693a 2050 6f69 6e74      radii: Point
-00017d30: 0a20 2020 2022 2222 5468 6520 782d 2061  .    """The x- a
-00017d40: 6e64 2079 2d72 6164 6969 206f 6620 7468  nd y-radii of th
-00017d50: 6520 656c 6c69 7073 6522 2222 0a20 2020  e ellipse""".   
-00017d60: 2063 656e 7465 723a 2050 6f69 6e74 0a20   center: Point. 
-00017d70: 2020 2022 2222 5468 6520 6162 7363 6973     """The abscis
-00017d80: 7361 2061 6e64 206f 7264 696e 6174 6520  sa and ordinate 
-00017d90: 6f66 2074 6865 2063 656e 7465 7220 6f66  of the center of
-00017da0: 2074 6865 2065 6c6c 6970 7365 2222 220a   the ellipse""".
-00017db0: 0a20 2020 2064 6566 205f 6465 636f 6d70  .    def _decomp
-00017dc0: 6f73 6528 7365 6c66 293a 0a20 2020 2020  ose(self):.     
-00017dd0: 2020 2069 7465 6d73 203d 205b 5d0a 0a20     items = [].. 
-00017de0: 2020 2020 2020 2072 7820 3d20 6162 7328         rx = abs(
-00017df0: 7365 6c66 2e72 6164 6969 2e78 290a 2020  self.radii.x).  
-00017e00: 2020 2020 2020 7279 203d 2061 6273 2873        ry = abs(s
-00017e10: 656c 662e 7261 6469 692e 7929 0a20 2020  elf.radii.y).   
-00017e20: 2020 2020 2063 782c 2063 7920 3d20 7365       cx, cy = se
-00017e30: 6c66 2e63 656e 7465 720a 0a20 2020 2020  lf.center..     
-00017e40: 2020 2061 7263 5f72 6164 203d 2050 6f69     arc_rad = Poi
-00017e50: 6e74 2872 782c 2072 7929 0a0a 2020 2020  nt(rx, ry)..    
-00017e60: 2020 2020 2320 7468 6973 2069 736e 2774      # this isn't
-00017e70: 2074 6865 206d 6f73 7420 6566 6669 6369   the most effici
-00017e80: 656e 7420 7761 7920 746f 2064 6f20 7468  ent way to do th
-00017e90: 6973 2c20 636f 6d70 7574 6174 696f 6e61  is, computationa
-00017ea0: 6c6c 792c 2062 7574 2069 7427 730a 2020  lly, but it's.  
-00017eb0: 2020 2020 2020 2320 696e 7465 726e 616c        # internal
-00017ec0: 6c79 2063 6f6e 7369 7374 656e 742e 0a20  ly consistent.. 
-00017ed0: 2020 2020 2020 2069 6620 2872 7820 213d         if (rx !=
-00017ee0: 2030 2920 616e 6420 2872 7920 213d 2030   0) and (ry != 0
-00017ef0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00017f00: 7465 6d73 2e61 7070 656e 6428 4d6f 7665  tems.append(Move
-00017f10: 2850 6f69 6e74 2863 7820 2b20 7278 2c20  (Point(cx + rx, 
-00017f20: 6379 2929 290a 2020 2020 2020 2020 2020  cy))).          
-00017f30: 2020 6974 656d 732e 6170 7065 6e64 2841    items.append(A
-00017f40: 7263 2861 7263 5f72 6164 2c20 302c 2046  rc(arc_rad, 0, F
-00017f50: 616c 7365 2c20 5472 7565 2c20 506f 696e  alse, True, Poin
-00017f60: 7428 6378 2c20 6379 202b 2072 7929 2929  t(cx, cy + ry)))
-00017f70: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
-00017f80: 6d73 2e61 7070 656e 6428 4172 6328 6172  ms.append(Arc(ar
-00017f90: 635f 7261 642c 2030 2c20 4661 6c73 652c  c_rad, 0, False,
-00017fa0: 2054 7275 652c 2050 6f69 6e74 2863 7820   True, Point(cx 
-00017fb0: 2d20 7278 2c20 6379 2929 290a 2020 2020  - rx, cy))).    
-00017fc0: 2020 2020 2020 2020 6974 656d 732e 6170          items.ap
-00017fd0: 7065 6e64 2841 7263 2861 7263 5f72 6164  pend(Arc(arc_rad
-00017fe0: 2c20 302c 2046 616c 7365 2c20 5472 7565  , 0, False, True
-00017ff0: 2c20 506f 696e 7428 6378 2c20 6379 202d  , Point(cx, cy -
-00018000: 2072 7929 2929 0a20 2020 2020 2020 2020   ry))).         
-00018010: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
-00018020: 4172 6328 6172 635f 7261 642c 2030 2c20  Arc(arc_rad, 0, 
-00018030: 4661 6c73 652c 2054 7275 652c 2050 6f69  False, True, Poi
-00018040: 6e74 2863 7820 2b20 7278 2c20 6379 2929  nt(cx + rx, cy))
-00018050: 290a 2020 2020 2020 2020 2020 2020 6974  ).            it
-00018060: 656d 732e 6170 7065 6e64 2843 6c6f 7365  ems.append(Close
-00018070: 2829 290a 0a20 2020 2020 2020 2072 6574  ())..        ret
-00018080: 7572 6e20 6974 656d 730a 0a20 2020 2040  urn items..    @
-00018090: 666f 7263 655f 6e6f 646f 6375 6d65 6e74  force_nodocument
-000180a0: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
-000180b0: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-000180c0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-000180d0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-000180e0: 696e 7429 3a0a 2020 2020 2020 2020 2222  int):.        ""
-000180f0: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
-00018100: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
-00018110: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
-00018120: 7072 6573 656e 7461 7469 6f6e 2e0a 0a20  presentation... 
-00018130: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00018140: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-00018150: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
-00018160: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
-00018170: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
-00018180: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
-00018190: 2020 2020 2020 2020 2020 2020 2020 6469                di
-000181a0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
-000181b0: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
-000181c0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-000181d0: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
-000181e0: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
-000181f0: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
-00018200: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-00018210: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-00018220: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
-00018230: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00018240: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
-00018250: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
-00018260: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
-00018270: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00018280: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-00018290: 2074 7570 6c65 206f 6620 6028 7374 722c   tuple of `(str,
-000182a0: 206e 6577 5f6c 6173 745f 6974 656d 2960   new_last_item)`
-000182b0: 2c20 7768 6572 6520 606e 6577 5f6c 6173  , where `new_las
-000182c0: 745f 6974 656d 6020 6973 2061 2072 6573  t_item` is a res
-000182d0: 6f6c 7665 640a 2020 2020 2020 2020 2020  olved.          
-000182e0: 2020 604d 6f76 6560 2074 6f20 7468 6520    `Move` to the 
-000182f0: 6365 6e74 6572 206f 6620 7468 6520 656c  center of the el
-00018300: 6c69 7073 652e 0a20 2020 2020 2020 2022  lipse..        "
-00018310: 2222 0a20 2020 2020 2020 2063 6f6d 706f  "".        compo
-00018320: 6e65 6e74 7320 3d20 7365 6c66 2e5f 6465  nents = self._de
-00018330: 636f 6d70 6f73 6528 290a 0a20 2020 2020  compose()..     
-00018340: 2020 2069 6620 6e6f 7420 636f 6d70 6f6e     if not compon
-00018350: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-00018360: 2020 7265 7475 726e 2022 222c 206c 6173    return "", las
-00018370: 745f 6974 656d 0a0a 2020 2020 2020 2020  t_item..        
-00018380: 7265 6e64 6572 5f6c 6973 7420 3d20 5b5d  render_list = []
-00018390: 0a20 2020 2020 2020 2066 6f72 2069 7465  .        for ite
-000183a0: 6d20 696e 2063 6f6d 706f 6e65 6e74 733a  m in components:
-000183b0: 0a20 2020 2020 2020 2020 2020 2072 656e  .            ren
-000183c0: 6465 7265 642c 206c 6173 745f 6974 656d  dered, last_item
-000183d0: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
-000183e0: 3d20 6974 656d 2e72 656e 6465 7228 0a20  = item.render(. 
-000183f0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00018400: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
-00018410: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
-00018420: 6e69 7469 616c 5f70 6f69 6e74 0a20 2020  nitial_point.   
-00018430: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00018440: 2020 2020 2020 2072 656e 6465 725f 6c69         render_li
-00018450: 7374 2e61 7070 656e 6428 7265 6e64 6572  st.append(render
-00018460: 6564 290a 0a20 2020 2020 2020 2072 6574  ed)..        ret
-00018470: 7572 6e20 2220 222e 6a6f 696e 2872 656e  urn " ".join(ren
-00018480: 6465 725f 6c69 7374 292c 204d 6f76 6528  der_list), Move(
-00018490: 7365 6c66 2e63 656e 7465 7229 2c20 696e  self.center), in
-000184a0: 6974 6961 6c5f 706f 696e 740a 0a20 2020  itial_point..   
-000184b0: 2040 666f 7263 655f 6e6f 646f 6375 6d65   @force_nodocume
-000184c0: 6e74 0a20 2020 2064 6566 2072 656e 6465  nt.    def rende
-000184d0: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
-000184e0: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
-000184f0: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
-00018500: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
-00018510: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
-00018520: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
-00018530: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00018540: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
-00018550: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
-00018560: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
-00018570: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
-00018580: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
-00018590: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
-000185a0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-000185b0: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
-000185c0: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
-000185d0: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
-000185e0: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
-000185f0: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
-00018600: 2020 2020 2020 2020 2020 2020 2064 6963               dic
-00018610: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
-00018620: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
-00018630: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
-00018640: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
-00018650: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
-00018660: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
-00018670: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
-00018680: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
-00018690: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
-000186a0: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
-000186b0: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
-000186c0: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
-000186d0: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
-000186e0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-000186f0: 675f 7374 7265 616d 2028 696f 2e54 6578  g_stream (io.Tex
-00018700: 7449 4f29 3a20 7468 6520 7374 7265 616d  tIO): the stream
-00018710: 2074 6f20 7768 6963 6820 7468 6520 6465   to which the de
-00018720: 6275 6720 6f75 7470 7574 2073 686f 756c  bug output shoul
-00018730: 6420 6265 0a20 2020 2020 2020 2020 2020  d be.           
-00018740: 2020 2020 2077 7269 7474 656e 2e20 5468       written. Th
-00018750: 6973 2069 7320 6e6f 7420 6775 6172 616e  is is not guaran
-00018760: 7465 6564 2074 6f20 6265 2073 6565 6b61  teed to be seeka
-00018770: 626c 6520 2865 2e67 2e20 6974 206d 6179  ble (e.g. it may
-00018780: 2062 6520 7374 646f 7574 206f 720a 2020   be stdout or.  
-00018790: 2020 2020 2020 2020 2020 2020 2020 7374                st
-000187a0: 6465 7272 292e 0a20 2020 2020 2020 2020  derr)..         
-000187b0: 2020 2070 6678 2028 7374 7229 3a20 7468     pfx (str): th
-000187c0: 6520 6375 7272 656e 7420 6465 6275 6720  e current debug 
-000187d0: 6f75 7470 7574 2070 7265 6669 7820 7374  output prefix st
-000187e0: 7269 6e67 2028 6f6e 6c79 206e 6565 6465  ring (only neede
-000187f0: 6420 6966 2065 6d69 7474 696e 670a 2020  d if emitting.  
-00018800: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-00018810: 7265 2074 6861 6e20 6f6e 6520 6c69 6e65  re than one line
-00018820: 292e 0a0a 2020 2020 2020 2020 5265 7475  )...        Retu
-00018830: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-00018840: 2054 6865 2073 616d 6520 7475 706c 6520   The same tuple 
-00018850: 6173 2060 456c 6c69 7073 652e 7265 6e64  as `Ellipse.rend
-00018860: 6572 602e 0a20 2020 2020 2020 2022 2222  er`..        """
-00018870: 0a20 2020 2020 2020 2063 6f6d 706f 6e65  .        compone
-00018880: 6e74 7320 3d20 7365 6c66 2e5f 6465 636f  nts = self._deco
-00018890: 6d70 6f73 6528 290a 0a20 2020 2020 2020  mpose()..       
-000188a0: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
-000188b0: 6974 6528 6622 7b73 656c 667d 2072 6573  ite(f"{self} res
-000188c0: 6f6c 7665 6420 746f 3a5c 6e22 290a 2020  olved to:\n").  
-000188d0: 2020 2020 2020 6966 206e 6f74 2063 6f6d        if not com
-000188e0: 706f 6e65 6e74 733a 0a20 2020 2020 2020  ponents:.       
-000188f0: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00018900: 6d2e 7772 6974 6528 7066 7820 2b20 2220  m.write(pfx + " 
-00018910: e294 94e2 9480 206e 6f74 6869 6e67 5c6e  ...... nothing\n
-00018920: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-00018930: 6574 7572 6e20 2222 2c20 6c61 7374 5f69  eturn "", last_i
-00018940: 7465 6d0a 0a20 2020 2020 2020 2072 656e  tem..        ren
-00018950: 6465 725f 6c69 7374 203d 205b 5d0a 2020  der_list = [].  
-00018960: 2020 2020 2020 666f 7220 6974 656d 2069        for item i
-00018970: 6e20 636f 6d70 6f6e 656e 7473 5b3a 2d31  n components[:-1
-00018980: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
-00018990: 656e 6465 7265 642c 206c 6173 745f 6974  endered, last_it
-000189a0: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
-000189b0: 7420 3d20 6974 656d 2e72 656e 6465 7228  t = item.render(
-000189c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000189d0: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-000189e0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-000189f0: 2069 6e69 7469 616c 5f70 6f69 6e74 0a20   initial_point. 
-00018a00: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00018a10: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
-00018a20: 7472 6561 6d2e 7772 6974 6528 7066 7820  tream.write(pfx 
-00018a30: 2b20 6622 20e2 949c e294 8020 7b69 7465  + f" ...... {ite
-00018a40: 6d7d 5c6e 2229 0a20 2020 2020 2020 2020  m}\n").         
-00018a50: 2020 2072 656e 6465 725f 6c69 7374 2e61     render_list.a
-00018a60: 7070 656e 6428 7265 6e64 6572 6564 290a  ppend(rendered).
-00018a70: 0a20 2020 2020 2020 2072 656e 6465 7265  .        rendere
-00018a80: 642c 206c 6173 745f 6974 656d 2c20 696e  d, last_item, in
-00018a90: 6974 6961 6c5f 706f 696e 7420 3d20 636f  itial_point = co
-00018aa0: 6d70 6f6e 656e 7473 5b2d 315d 2e72 656e  mponents[-1].ren
-00018ab0: 6465 7228 0a20 2020 2020 2020 2020 2020  der(.           
-00018ac0: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-00018ad0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-00018ae0: 2069 6e69 7469 616c 5f70 6f69 6e74 0a20   initial_point. 
-00018af0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00018b00: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
-00018b10: 6974 6528 7066 7820 2b20 6622 20e2 9494  ite(pfx + f" ...
-00018b20: e294 8020 7b63 6f6d 706f 6e65 6e74 735b  ... {components[
-00018b30: 2d31 5d7d 5c6e 2229 0a20 2020 2020 2020  -1]}\n").       
-00018b40: 2072 656e 6465 725f 6c69 7374 2e61 7070   render_list.app
-00018b50: 656e 6428 7265 6e64 6572 6564 290a 0a20  end(rendered).. 
-00018b60: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
-00018b70: 222e 6a6f 696e 2872 656e 6465 725f 6c69  ".join(render_li
-00018b80: 7374 292c 204d 6f76 6528 7365 6c66 2e63  st), Move(self.c
-00018b90: 656e 7465 7229 2c20 696e 6974 6961 6c5f  enter), initial_
-00018ba0: 706f 696e 740a 0a0a 636c 6173 7320 496d  point...class Im
-00018bb0: 706c 6963 6974 436c 6f73 6528 4e61 6d65  plicitClose(Name
-00018bc0: 6454 7570 6c65 293a 0a20 2020 2022 2222  dTuple):.    """
-00018bd0: 0a20 2020 2041 2070 6174 6820 636c 6f73  .    A path clos
-00018be0: 6520 656c 656d 656e 7420 7468 6174 2069  e element that i
-00018bf0: 7320 636f 6e64 6974 696f 6e61 6c6c 7920  s conditionally 
-00018c00: 7265 6e64 6572 6564 2064 6570 656e 6469  rendered dependi
-00018c10: 6e67 206f 6e20 7468 6520 7661 6c75 6520  ng on the value 
-00018c20: 6f66 0a20 2020 2060 4772 6170 6869 6373  of.    `Graphics
-00018c30: 5374 796c 652e 6175 746f 5f63 6c6f 7365  Style.auto_close
-00018c40: 602e 0a20 2020 2022 2222 0a0a 2020 2020  `..    """..    
-00018c50: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
-00018c60: 653d 6e6f 2d73 656c 662d 7573 650a 2020  e=no-self-use.  
-00018c70: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
-00018c80: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
-00018c90: 6572 2873 656c 662c 2067 7364 5f72 6567  er(self, gsd_reg
-00018ca0: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
-00018cb0: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
-00018cc0: 5f70 6f69 6e74 293a 0a20 2020 2020 2020  _point):.       
-00018cd0: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
-00018ce0: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
-00018cf0: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
-00018d00: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
-00018d10: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-00018d20: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-00018d30: 7265 6769 7374 7279 2028 4772 6170 6869  registry (Graphi
-00018d40: 6373 5374 6174 6544 6963 7452 6567 6973  csStateDictRegis
-00018d50: 7472 7929 3a20 7468 6520 6f77 6e65 7227  try): the owner'
-00018d60: 7320 6772 6170 6869 6373 2073 7461 7465  s graphics state
-00018d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018d80: 2064 6963 7469 6f6e 6172 7920 7265 6769   dictionary regi
-00018d90: 7374 7279 2e0a 2020 2020 2020 2020 2020  stry..          
-00018da0: 2020 7374 796c 6520 2847 7261 7068 6963    style (Graphic
-00018db0: 7353 7479 6c65 293a 2074 6865 2063 7572  sStyle): the cur
-00018dc0: 7265 6e74 2072 6573 6f6c 7665 6420 6772  rent resolved gr
-00018dd0: 6170 6869 6373 2073 7479 6c65 0a20 2020  aphics style.   
-00018de0: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
-00018df0: 656d 3a20 7468 6520 7072 6576 696f 7573  em: the previous
-00018e00: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
-00018e10: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
-00018e20: 616c 5f70 6f69 6e74 3a20 6c61 7374 2070  al_point: last p
-00018e30: 6f73 6974 696f 6e20 7365 7420 6279 2061  osition set by a
-00018e40: 2022 4d22 206f 7220 226d 2220 636f 6d6d   "M" or "m" comm
-00018e50: 616e 640a 0a20 2020 2020 2020 2052 6574  and..        Ret
-00018e60: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
-00018e70: 2020 6120 7475 706c 6520 6f66 2060 2873    a tuple of `(s
-00018e80: 7472 2c20 6e65 775f 6c61 7374 5f69 7465  tr, new_last_ite
-00018e90: 6d29 602c 2077 6865 7265 2060 6e65 775f  m)`, where `new_
-00018ea0: 6c61 7374 5f69 7465 6d60 2069 7320 7768  last_item` is wh
-00018eb0: 6174 6576 6572 2074 6865 206f 6c64 0a20  atever the old. 
-00018ec0: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-00018ed0: 6974 656d 2077 6173 2e0a 2020 2020 2020  item was..      
-00018ee0: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-00018ef0: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-00018f00: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
-00018f10: 2020 2020 2020 2020 6966 2073 7479 6c65          if style
-00018f20: 2e61 7574 6f5f 636c 6f73 653a 0a20 2020  .auto_close:.   
-00018f30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00018f40: 2268 222c 206c 6173 745f 6974 656d 2c20  "h", last_item, 
-00018f50: 696e 6974 6961 6c5f 706f 696e 740a 0a20  initial_point.. 
-00018f60: 2020 2020 2020 2072 6574 7572 6e20 2222         return ""
-00018f70: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-00018f80: 7469 616c 5f70 6f69 6e74 0a0a 2020 2020  tial_point..    
-00018f90: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
-00018fa0: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
-00018fb0: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
-00018fc0: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-00018fd0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-00018fe0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-00018ff0: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
-00019000: 6d2c 2070 6678 0a20 2020 2029 3a0a 2020  m, pfx.    ):.  
-00019010: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00019020: 2020 5265 6e64 6572 2074 6869 7320 7061    Render this pa
-00019030: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
-00019040: 7320 5044 4620 7265 7072 6573 656e 7461  s PDF representa
-00019050: 7469 6f6e 2061 6e64 2070 726f 6475 6365  tion and produce
-00019060: 2064 6562 7567 0a20 2020 2020 2020 2069   debug.        i
-00019070: 6e66 6f72 6d61 7469 6f6e 2e0a 0a20 2020  nformation...   
-00019080: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00019090: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
-000190a0: 7472 7920 2847 7261 7068 6963 7353 7461  try (GraphicsSta
-000190b0: 7465 4469 6374 5265 6769 7374 7279 293a  teDictRegistry):
-000190c0: 2074 6865 206f 776e 6572 2773 2067 7261   the owner's gra
-000190d0: 7068 6963 7320 7374 6174 650a 2020 2020  phics state.    
-000190e0: 2020 2020 2020 2020 2020 2020 6469 6374              dict
-000190f0: 696f 6e61 7279 2072 6567 6973 7472 792e  ionary registry.
-00019100: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
-00019110: 6c65 2028 4772 6170 6869 6373 5374 796c  le (GraphicsStyl
-00019120: 6529 3a20 7468 6520 6375 7272 656e 7420  e): the current 
-00019130: 7265 736f 6c76 6564 2067 7261 7068 6963  resolved graphic
-00019140: 7320 7374 796c 650a 2020 2020 2020 2020  s style.        
-00019150: 2020 2020 6c61 7374 5f69 7465 6d3a 2074      last_item: t
-00019160: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
-00019170: 2065 6c65 6d65 6e74 2e0a 2020 2020 2020   element..      
-00019180: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
-00019190: 696e 743a 206c 6173 7420 706f 7369 7469  int: last positi
-000191a0: 6f6e 2073 6574 2062 7920 6120 224d 2220  on set by a "M" 
-000191b0: 6f72 2022 6d22 2063 6f6d 6d61 6e64 0a20  or "m" command. 
-000191c0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-000191d0: 5f73 7472 6561 6d20 2869 6f2e 5465 7874  _stream (io.Text
-000191e0: 494f 293a 2074 6865 2073 7472 6561 6d20  IO): the stream 
-000191f0: 746f 2077 6869 6368 2074 6865 2064 6562  to which the deb
-00019200: 7567 206f 7574 7075 7420 7368 6f75 6c64  ug output should
-00019210: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
-00019220: 2020 2020 7772 6974 7465 6e2e 2054 6869      written. Thi
-00019230: 7320 6973 206e 6f74 2067 7561 7261 6e74  s is not guarant
-00019240: 6565 6420 746f 2062 6520 7365 656b 6162  eed to be seekab
-00019250: 6c65 2028 652e 672e 2069 7420 6d61 7920  le (e.g. it may 
-00019260: 6265 2073 7464 6f75 7420 6f72 0a20 2020  be stdout or.   
-00019270: 2020 2020 2020 2020 2020 2020 2073 7464               std
-00019280: 6572 7229 2e0a 2020 2020 2020 2020 2020  err)..          
-00019290: 2020 7066 7820 2873 7472 293a 2074 6865    pfx (str): the
-000192a0: 2063 7572 7265 6e74 2064 6562 7567 206f   current debug o
-000192b0: 7574 7075 7420 7072 6566 6978 2073 7472  utput prefix str
-000192c0: 696e 6720 286f 6e6c 7920 6e65 6564 6564  ing (only needed
-000192d0: 2069 6620 656d 6974 7469 6e67 0a20 2020   if emitting.   
-000192e0: 2020 2020 2020 2020 2020 2020 206d 6f72               mor
-000192f0: 6520 7468 616e 206f 6e65 206c 696e 6529  e than one line)
-00019300: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
-00019310: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00019320: 5468 6520 7361 6d65 2074 7570 6c65 2061  The same tuple a
-00019330: 7320 6049 6d70 6c69 6369 7443 6c6f 7365  s `ImplicitClose
-00019340: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
-00019350: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-00019360: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
-00019370: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
-00019380: 2020 2020 2020 2020 7265 6e64 6572 6564          rendered
-00019390: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
-000193a0: 6961 6c5f 706f 696e 7420 3d20 7365 6c66  ial_point = self
-000193b0: 2e72 656e 6465 7228 0a20 2020 2020 2020  .render(.       
-000193c0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
-000193d0: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
-000193e0: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
-000193f0: 6e74 0a20 2020 2020 2020 2029 0a20 2020  nt.        ).   
-00019400: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00019410: 6d2e 7772 6974 6528 6622 7b73 656c 667d  m.write(f"{self}
-00019420: 2072 6573 6f6c 7665 6420 746f 207b 7265   resolved to {re
-00019430: 6e64 6572 6564 7d5c 6e22 290a 0a20 2020  ndered}\n")..   
-00019440: 2020 2020 2072 6574 7572 6e20 7265 6e64       return rend
-00019450: 6572 6564 2c20 7265 736f 6c76 6564 2c20  ered, resolved, 
-00019460: 696e 6974 6961 6c5f 706f 696e 740a 0a0a  initial_point...
-00019470: 636c 6173 7320 436c 6f73 6528 4e61 6d65  class Close(Name
-00019480: 6454 7570 6c65 293a 0a20 2020 2022 2222  dTuple):.    """
-00019490: 0a20 2020 2041 2070 6174 6820 636c 6f73  .    A path clos
-000194a0: 6520 656c 656d 656e 742e 0a0a 2020 2020  e element...    
-000194b0: 496e 7374 7275 6374 7320 7468 6520 7265  Instructs the re
-000194c0: 6e64 6572 6572 2074 6f20 6472 6177 2061  nderer to draw a
-000194d0: 2073 7472 6169 6768 7420 6c69 6e65 2066   straight line f
-000194e0: 726f 6d20 7468 6520 656e 6420 6f66 2074  rom the end of t
-000194f0: 6865 206c 6173 7420 7061 7468 2065 6c65  he last path ele
-00019500: 6d65 6e74 0a20 2020 2074 6f20 7468 6520  ment.    to the 
-00019510: 7374 6172 7420 6f66 2074 6865 2063 7572  start of the cur
-00019520: 7265 6e74 2070 6174 682e 0a0a 2020 2020  rent path...    
-00019530: 5365 653a 2060 5061 696e 7465 6450 6174  See: `PaintedPat
-00019540: 682e 636c 6f73 6560 0a20 2020 2022 2222  h.close`.    """
-00019550: 0a0a 2020 2020 2320 7079 6c69 6e74 3a20  ..    # pylint: 
-00019560: 6469 7361 626c 653d 6e6f 2d73 656c 662d  disable=no-self-
-00019570: 7573 650a 2020 2020 4066 6f72 6365 5f6e  use.    @force_n
-00019580: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
-00019590: 6620 7265 6e64 6572 2873 656c 662c 2067  f render(self, g
-000195a0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
-000195b0: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
-000195c0: 6e69 7469 616c 5f70 6f69 6e74 293a 0a20  nitial_point):. 
-000195d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000195e0: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
-000195f0: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
-00019600: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
-00019610: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
-00019620: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-00019630: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
-00019640: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
-00019650: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
-00019660: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
-00019670: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
-00019680: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
-00019690: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
-000196a0: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
-000196b0: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
-000196c0: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
-000196d0: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
-000196e0: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
-000196f0: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
-00019700: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-00019710: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
-00019720: 2069 6e69 7469 616c 5f70 6f69 6e74 3a20   initial_point: 
-00019730: 6c61 7374 2070 6f73 6974 696f 6e20 7365  last position se
-00019740: 7420 6279 2061 2022 4d22 206f 7220 226d  t by a "M" or "m
-00019750: 2220 636f 6d6d 616e 640a 0a20 2020 2020  " command..     
-00019760: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-00019770: 2020 2020 2020 2020 6120 7475 706c 6520          a tuple 
-00019780: 6f66 2060 2873 7472 2c20 6e65 775f 6c61  of `(str, new_la
-00019790: 7374 5f69 7465 6d29 602c 2077 6865 7265  st_item)`, where
-000197a0: 2060 6e65 775f 6c61 7374 5f69 7465 6d60   `new_last_item`
-000197b0: 2069 7320 7768 6174 6576 6572 2074 6865   is whatever the
-000197c0: 206f 6c64 0a20 2020 2020 2020 2020 2020   old.           
-000197d0: 206c 6173 745f 6974 656d 2077 6173 2e0a   last_item was..
-000197e0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000197f0: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
-00019800: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
-00019810: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
-00019820: 7475 726e 2022 6822 2c20 4d6f 7665 2869  turn "h", Move(i
-00019830: 6e69 7469 616c 5f70 6f69 6e74 292c 2069  nitial_point), i
-00019840: 6e69 7469 616c 5f70 6f69 6e74 0a0a 2020  nitial_point..  
-00019850: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
-00019860: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
-00019870: 6572 5f64 6562 7567 280a 2020 2020 2020  er_debug(.      
-00019880: 2020 7365 6c66 2c20 6773 645f 7265 6769    self, gsd_regi
-00019890: 7374 7279 2c20 7374 796c 652c 206c 6173  stry, style, las
-000198a0: 745f 6974 656d 2c20 696e 6974 6961 6c5f  t_item, initial_
-000198b0: 706f 696e 742c 2064 6562 7567 5f73 7472  point, debug_str
-000198c0: 6561 6d2c 2070 6678 0a20 2020 2029 3a0a  eam, pfx.    ):.
-000198d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000198e0: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
-000198f0: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
-00019900: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
-00019910: 7461 7469 6f6e 2061 6e64 2070 726f 6475  tation and produ
-00019920: 6365 2064 6562 7567 0a20 2020 2020 2020  ce debug.       
-00019930: 2069 6e66 6f72 6d61 7469 6f6e 2e0a 0a20   information... 
-00019940: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00019950: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
-00019960: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
-00019970: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
-00019980: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
-00019990: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
-000199a0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-000199b0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
-000199c0: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
-000199d0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-000199e0: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
-000199f0: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
-00019a00: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
-00019a10: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
-00019a20: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-00019a30: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
-00019a40: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00019a50: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
-00019a60: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
-00019a70: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
-00019a80: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
-00019a90: 7567 5f73 7472 6561 6d20 2869 6f2e 5465  ug_stream (io.Te
-00019aa0: 7874 494f 293a 2074 6865 2073 7472 6561  xtIO): the strea
-00019ab0: 6d20 746f 2077 6869 6368 2074 6865 2064  m to which the d
-00019ac0: 6562 7567 206f 7574 7075 7420 7368 6f75  ebug output shou
-00019ad0: 6c64 2062 650a 2020 2020 2020 2020 2020  ld be.          
-00019ae0: 2020 2020 2020 7772 6974 7465 6e2e 2054        written. T
-00019af0: 6869 7320 6973 206e 6f74 2067 7561 7261  his is not guara
-00019b00: 6e74 6565 6420 746f 2062 6520 7365 656b  nteed to be seek
-00019b10: 6162 6c65 2028 652e 672e 2069 7420 6d61  able (e.g. it ma
-00019b20: 7920 6265 2073 7464 6f75 7420 6f72 0a20  y be stdout or. 
-00019b30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00019b40: 7464 6572 7229 2e0a 2020 2020 2020 2020  tderr)..        
-00019b50: 2020 2020 7066 7820 2873 7472 293a 2074      pfx (str): t
-00019b60: 6865 2063 7572 7265 6e74 2064 6562 7567  he current debug
-00019b70: 206f 7574 7075 7420 7072 6566 6978 2073   output prefix s
-00019b80: 7472 696e 6720 286f 6e6c 7920 6e65 6564  tring (only need
-00019b90: 6564 2069 6620 656d 6974 7469 6e67 0a20  ed if emitting. 
-00019ba0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00019bb0: 6f72 6520 7468 616e 206f 6e65 206c 696e  ore than one lin
-00019bc0: 6529 2e0a 0a20 2020 2020 2020 2052 6574  e)...        Ret
-00019bd0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
-00019be0: 2020 5468 6520 7361 6d65 2074 7570 6c65    The same tuple
-00019bf0: 2061 7320 6043 6c6f 7365 2e72 656e 6465   as `Close.rende
-00019c00: 7260 2e0a 2020 2020 2020 2020 2222 220a  r`..        """.
-00019c10: 2020 2020 2020 2020 2320 7079 6c69 6e74          # pylint
-00019c20: 3a20 6469 7361 626c 653d 756e 7573 6564  : disable=unused
-00019c30: 2d61 7267 756d 656e 740a 2020 2020 2020  -argument.      
-00019c40: 2020 7265 6e64 6572 6564 2c20 7265 736f    rendered, reso
-00019c50: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
-00019c60: 696e 7420 3d20 7365 6c66 2e72 656e 6465  int = self.rende
-00019c70: 7228 0a20 2020 2020 2020 2020 2020 2067  r(.            g
-00019c80: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
-00019c90: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
-00019ca0: 6e69 7469 616c 5f70 6f69 6e74 0a20 2020  nitial_point.   
-00019cb0: 2020 2020 2029 0a20 2020 2020 2020 2064       ).        d
-00019cc0: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
-00019cd0: 6528 7374 7228 7365 6c66 2920 2b20 225c  e(str(self) + "\
-00019ce0: 6e22 290a 0a20 2020 2020 2020 2072 6574  n")..        ret
-00019cf0: 7572 6e20 7265 6e64 6572 6564 2c20 7265  urn rendered, re
-00019d00: 736f 6c76 6564 2c20 696e 6974 6961 6c5f  solved, initial_
-00019d10: 706f 696e 740a 0a0a 636c 6173 7320 4472  point...class Dr
-00019d20: 6177 696e 6743 6f6e 7465 7874 3a0a 2020  awingContext:.  
-00019d30: 2020 2222 220a 2020 2020 4261 7365 2063    """.    Base c
-00019d40: 6f6e 7465 7874 2066 6f72 2061 2064 7261  ontext for a dra
-00019d50: 7769 6e67 2069 6e20 6120 5044 460a 0a20  wing in a PDF.. 
-00019d60: 2020 2054 6869 7320 636f 6e74 6578 7420     This context 
-00019d70: 6973 206e 6f74 2073 7479 6c61 626c 6520  is not stylable 
-00019d80: 616e 6420 6973 206d 6169 6e6c 7920 7265  and is mainly re
-00019d90: 7370 6f6e 7369 626c 6520 666f 7220 7472  sponsible for tr
-00019da0: 616e 7366 6f72 6d69 6e67 2070 6174 680a  ansforming path.
-00019db0: 2020 2020 6472 6177 696e 6720 636f 6f72      drawing coor
-00019dc0: 6469 6e61 7465 7320 696e 746f 2075 7365  dinates into use
-00019dd0: 7220 636f 6f72 6469 6e61 7465 7320 2869  r coordinates (i
-00019de0: 2e65 2e20 6974 2065 6e73 7572 6573 2074  .e. it ensures t
-00019df0: 6861 7420 7468 6520 6f75 7470 7574 2064  hat the output d
-00019e00: 7261 7769 6e67 0a20 2020 2069 7320 636f  rawing.    is co
-00019e10: 7272 6563 746c 7920 7363 616c 6564 292e  rrectly scaled).
-00019e20: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
-00019e30: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-00019e40: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
-00019e50: 7375 6269 7465 6d73 203d 205b 5d0a 0a20  subitems = [].. 
-00019e60: 2020 2064 6566 2061 6464 5f69 7465 6d28     def add_item(
-00019e70: 7365 6c66 2c20 6974 656d 2c20 5f63 6f70  self, item, _cop
-00019e80: 793d 5472 7565 293a 0a20 2020 2020 2020  y=True):.       
-00019e90: 2022 2222 0a20 2020 2020 2020 2041 7070   """.        App
-00019ea0: 656e 6420 616e 2069 7465 6d20 746f 2074  end an item to t
-00019eb0: 6869 7320 6472 6177 696e 6720 636f 6e74  his drawing cont
-00019ec0: 6578 740a 0a20 2020 2020 2020 2041 7267  ext..        Arg
-00019ed0: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-00019ee0: 7465 6d20 2847 7261 7068 6963 7343 6f6e  tem (GraphicsCon
-00019ef0: 7465 7874 2c20 5061 696e 7465 6450 6174  text, PaintedPat
-00019f00: 6829 3a20 7468 6520 6974 656d 2074 6f20  h): the item to 
-00019f10: 6265 2061 7070 656e 6465 642e 0a20 2020  be appended..   
-00019f20: 2020 2020 2020 2020 205f 636f 7079 2028           _copy (
-00019f30: 626f 6f6c 293a 2069 6620 7472 7565 2028  bool): if true (
-00019f40: 7468 6520 6465 6661 756c 7429 2c20 7468  the default), th
-00019f50: 6520 6974 656d 2077 696c 6c20 6265 2063  e item will be c
-00019f60: 6f70 6965 6420 6265 666f 7265 2062 6569  opied before bei
-00019f70: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-00019f80: 2020 2061 7070 656e 6465 642e 2054 6869     appended. Thi
-00019f90: 7320 7072 6576 656e 7473 206d 6f64 6966  s prevents modif
-00019fa0: 6963 6174 696f 6e73 2074 6f20 6120 7265  ications to a re
-00019fb0: 6665 7265 6e63 6564 206f 626a 6563 7420  ferenced object 
-00019fc0: 6672 6f6d 0a20 2020 2020 2020 2020 2020  from.           
-00019fd0: 2020 2020 2022 7265 7472 6f61 6374 6976       "retroactiv
-00019fe0: 656c 7922 2061 6c74 6572 696e 6720 6974  ely" altering it
-00019ff0: 7320 7374 796c 652f 7368 6170 6520 616e  s style/shape an
-0001a000: 6420 7368 6f75 6c64 2062 6520 6469 7361  d should be disa
-0001a010: 626c 6564 2077 6974 680a 2020 2020 2020  bled with.      
-0001a020: 2020 2020 2020 2020 2020 6361 7574 696f            cautio
-0001a030: 6e2e 0a20 2020 2020 2020 2022 2222 0a0a  n..        """..
-0001a040: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-0001a050: 7369 6e73 7461 6e63 6528 6974 656d 2c20  sinstance(item, 
-0001a060: 2847 7261 7068 6963 7343 6f6e 7465 7874  (GraphicsContext
-0001a070: 2c20 5061 696e 7465 6450 6174 6829 293a  , PaintedPath)):
-0001a080: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001a090: 7365 2054 7970 6545 7272 6f72 2866 227b  se TypeError(f"{
-0001a0a0: 6974 656d 7d20 646f 6573 6e27 7420 6265  item} doesn't be
-0001a0b0: 6c6f 6e67 2069 6e20 6120 4472 6177 696e  long in a Drawin
-0001a0c0: 6743 6f6e 7465 7874 2229 0a0a 2020 2020  gContext")..    
-0001a0d0: 2020 2020 6966 205f 636f 7079 3a0a 2020      if _copy:.  
-0001a0e0: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-0001a0f0: 2063 6f70 792e 6465 6570 636f 7079 2869   copy.deepcopy(i
-0001a100: 7465 6d29 0a0a 2020 2020 2020 2020 7365  tem)..        se
-0001a110: 6c66 2e5f 7375 6269 7465 6d73 2e61 7070  lf._subitems.app
-0001a120: 656e 6428 6974 656d 290a 0a20 2020 2040  end(item)..    @
-0001a130: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
-0001a140: 2064 6566 205f 7365 7475 705f 7265 6e64   def _setup_rend
-0001a150: 6572 5f70 7265 7265 7173 2873 7479 6c65  er_prereqs(style
-0001a160: 2c20 6669 7273 745f 706f 696e 742c 2073  , first_point, s
-0001a170: 6361 6c65 2c20 6865 6967 6874 293a 0a20  cale, height):. 
-0001a180: 2020 2020 2020 2073 7479 6c65 2e61 7574         style.aut
-0001a190: 6f5f 636c 6f73 6520 3d20 5472 7565 0a20  o_close = True. 
-0001a1a0: 2020 2020 2020 2073 7479 6c65 2e70 6169         style.pai
-0001a1b0: 6e74 5f72 756c 6520 3d20 5061 7468 5061  nt_rule = PathPa
-0001a1c0: 696e 7452 756c 652e 4155 544f 0a20 2020  intRule.AUTO.   
-0001a1d0: 2020 2020 2073 7479 6c65 2e69 6e74 6572       style.inter
-0001a1e0: 7365 6374 696f 6e5f 7275 6c65 203d 2049  section_rule = I
-0001a1f0: 6e74 6572 7365 6374 696f 6e52 756c 652e  ntersectionRule.
-0001a200: 4e4f 4e5a 4552 4f0a 0a20 2020 2020 2020  NONZERO..       
-0001a210: 206c 6173 745f 6974 656d 203d 204d 6f76   last_item = Mov
-0001a220: 6528 6669 7273 745f 706f 696e 7429 0a20  e(first_point). 
-0001a230: 2020 2020 2020 2073 6361 6c65 2c20 6c61         scale, la
-0001a240: 7374 5f69 7465 6d20 3d20 280a 2020 2020  st_item = (.    
-0001a250: 2020 2020 2020 2020 5472 616e 7366 6f72          Transfor
-0001a260: 6d2e 7363 616c 696e 6728 783d 312c 2079  m.scaling(x=1, y
-0001a270: 3d2d 3129 0a20 2020 2020 2020 2020 2020  =-1).           
-0001a280: 202e 6162 6f75 7428 783d 302c 2079 3d68   .about(x=0, y=h
-0001a290: 6569 6768 7420 2f20 3229 0a20 2020 2020  eight / 2).     
-0001a2a0: 2020 2020 2020 202e 7363 616c 6528 7363         .scale(sc
-0001a2b0: 616c 6529 0a20 2020 2020 2020 2020 2020  ale).           
-0001a2c0: 202e 7265 6e64 6572 286c 6173 745f 6974   .render(last_it
-0001a2d0: 656d 290a 2020 2020 2020 2020 290a 0a20  em).        ).. 
-0001a2e0: 2020 2020 2020 2072 656e 6465 725f 6c69         render_li
-0001a2f0: 7374 203d 205b 2271 222c 2073 6361 6c65  st = ["q", scale
-0001a300: 5d0a 0a20 2020 2020 2020 2072 6574 7572  ]..        retur
-0001a310: 6e20 7265 6e64 6572 5f6c 6973 742c 2073  n render_list, s
-0001a320: 7479 6c65 2c20 6c61 7374 5f69 7465 6d0a  tyle, last_item.
-0001a330: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
-0001a340: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
-0001a350: 7279 2c20 6669 7273 745f 706f 696e 742c  ry, first_point,
-0001a360: 2073 6361 6c65 2c20 6865 6967 6874 2c20   scale, height, 
-0001a370: 7374 6172 7469 6e67 5f73 7479 6c65 293a  starting_style):
-0001a380: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001a390: 2020 2020 2052 656e 6465 7220 7468 6520       Render the 
-0001a3a0: 6472 6177 696e 6720 636f 6e74 6578 7420  drawing context 
-0001a3b0: 746f 2050 4446 2066 6f72 6d61 742e 0a0a  to PDF format...
-0001a3c0: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-0001a3d0: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
-0001a3e0: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
-0001a3f0: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
-0001a400: 7929 3a20 7468 6520 7061 7265 6e74 2064  y): the parent d
-0001a410: 6f63 756d 656e 7427 7320 6772 6170 6869  ocument's graphi
-0001a420: 6373 0a20 2020 2020 2020 2020 2020 2020  cs.             
-0001a430: 2020 2073 7461 7465 2072 6567 6973 7472     state registr
-0001a440: 792e 0a20 2020 2020 2020 2020 2020 2066  y..            f
-0001a450: 6972 7374 5f70 6f69 6e74 2028 506f 696e  irst_point (Poin
-0001a460: 7429 3a20 7468 6520 7374 6172 7469 6e67  t): the starting
-0001a470: 2070 6f69 6e74 2074 6f20 7573 6520 6966   point to use if
-0001a480: 2074 6865 2066 6972 7374 2070 6174 6820   the first path 
-0001a490: 656c 656d 656e 7420 6973 0a20 2020 2020  element is.     
-0001a4a0: 2020 2020 2020 2020 2020 2061 2072 656c             a rel
-0001a4b0: 6174 6976 6520 656c 656d 656e 742e 0a20  ative element.. 
-0001a4c0: 2020 2020 2020 2020 2020 2073 6361 6c65             scale
-0001a4d0: 2028 4e75 6d62 6572 293a 2074 6865 2073   (Number): the s
-0001a4e0: 6361 6c65 2066 6163 746f 7220 746f 2063  cale factor to c
-0001a4f0: 6f6e 7665 7274 2066 726f 6d20 5044 4620  onvert from PDF 
-0001a500: 7074 2075 6e69 7473 2069 6e74 6f20 7468  pt units into th
-0001a510: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001a520: 2020 646f 6375 6d65 6e74 2773 2073 656d    document's sem
-0001a530: 616e 7469 6320 756e 6974 7320 2865 2e67  antic units (e.g
-0001a540: 2e20 6d6d 206f 7220 696e 292e 0a20 2020  . mm or in)..   
-0001a550: 2020 2020 2020 2020 2068 6569 6768 7420           height 
-0001a560: 284e 756d 6265 7229 3a20 7468 6520 7061  (Number): the pa
-0001a570: 6765 2068 6569 6768 742e 2054 6869 7320  ge height. This 
-0001a580: 6973 2075 7365 6420 746f 2072 656d 6170  is used to remap
-0001a590: 2074 6865 2063 6f6f 7264 696e 6174 6573   the coordinates
-0001a5a0: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
-0001a5b0: 2020 2020 6265 2066 726f 6d20 7468 6520      be from the 
-0001a5c0: 746f 702d 6c65 6674 2063 6f72 6e65 7220  top-left corner 
-0001a5d0: 6f66 2074 6865 2070 6167 6520 286d 6174  of the page (mat
-0001a5e0: 6368 696e 6720 6670 6466 2773 2062 6568  ching fpdf's beh
-0001a5f0: 6176 696f 7229 0a20 2020 2020 2020 2020  avior).         
-0001a600: 2020 2020 2020 2069 6e73 7465 6164 206f         instead o
-0001a610: 6620 7468 6520 5044 4620 6e61 7469 7665  f the PDF native
-0001a620: 2062 6568 6176 696f 7220 6f66 2062 6f74   behavior of bot
-0001a630: 746f 6d2d 6c65 6674 2e0a 2020 2020 2020  tom-left..      
-0001a640: 2020 2020 2020 7374 6172 7469 6e67 5f73        starting_s
-0001a650: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-0001a660: 796c 6529 3a20 7468 6520 6261 7365 2073  yle): the base s
-0001a670: 7479 6c65 2066 6f72 2074 6869 7320 6472  tyle for this dr
-0001a680: 6177 696e 6720 636f 6e74 6578 742c 0a20  awing context,. 
-0001a690: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0001a6a0: 6572 6976 6564 2066 726f 6d20 7468 6520  erived from the 
-0001a6b0: 646f 6375 6d65 6e74 2773 2063 7572 7265  document's curre
-0001a6c0: 6e74 2073 7479 6c65 2064 6566 6175 6c74  nt style default
-0001a6d0: 732e 0a0a 2020 2020 2020 2020 5265 7475  s...        Retu
-0001a6e0: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-0001a6f0: 2041 2073 7472 696e 6720 636f 6d70 6f73   A string compos
-0001a700: 6564 206f 6620 7468 6520 5044 4620 7265  ed of the PDF re
-0001a710: 7072 6573 656e 7461 7469 6f6e 206f 6620  presentation of 
-0001a720: 616c 6c20 7468 6520 7061 7468 7320 616e  all the paths an
-0001a730: 6420 6772 6f75 7073 2069 6e0a 2020 2020  d groups in.    
-0001a740: 2020 2020 2020 2020 7468 6973 2063 6f6e          this con
-0001a750: 7465 7874 2028 616e 2065 6d70 7479 2073  text (an empty s
-0001a760: 7472 696e 6720 6973 2072 6574 7572 6e65  tring is returne
-0001a770: 6420 6966 2074 6865 7265 2061 7265 206e  d if there are n
-0001a780: 6f20 7061 7468 7320 6f72 2067 726f 7570  o paths or group
-0001a790: 7329 0a20 2020 2020 2020 2022 2222 0a20  s).        """. 
-0001a7a0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-0001a7b0: 6c66 2e5f 7375 6269 7465 6d73 3a0a 2020  lf._subitems:.  
-0001a7c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001a7d0: 2022 220a 0a20 2020 2020 2020 2072 656e   ""..        ren
-0001a7e0: 6465 725f 6c69 7374 2c20 7374 796c 652c  der_list, style,
-0001a7f0: 206c 6173 745f 6974 656d 203d 2073 656c   last_item = sel
-0001a800: 662e 5f73 6574 7570 5f72 656e 6465 725f  f._setup_render_
-0001a810: 7072 6572 6571 7328 0a20 2020 2020 2020  prereqs(.       
-0001a820: 2020 2020 2073 7461 7274 696e 675f 7374       starting_st
-0001a830: 796c 652c 2066 6972 7374 5f70 6f69 6e74  yle, first_point
-0001a840: 2c20 7363 616c 652c 2068 6569 6768 740a  , scale, height.
-0001a850: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0001a860: 2020 2066 6f72 2069 7465 6d20 696e 2073     for item in s
-0001a870: 656c 662e 5f73 7562 6974 656d 733a 0a20  elf._subitems:. 
-0001a880: 2020 2020 2020 2020 2020 2072 656e 6465             rende
-0001a890: 7265 642c 206c 6173 745f 6974 656d 2c20  red, last_item, 
-0001a8a0: 6669 7273 745f 706f 696e 7420 3d20 6974  first_point = it
-0001a8b0: 656d 2e72 656e 6465 7228 0a20 2020 2020  em.render(.     
-0001a8c0: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
-0001a8d0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
-0001a8e0: 6c61 7374 5f69 7465 6d2c 2066 6972 7374  last_item, first
-0001a8f0: 5f70 6f69 6e74 0a20 2020 2020 2020 2020  _point.         
-0001a900: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0001a910: 2069 6620 7265 6e64 6572 6564 3a0a 2020   if rendered:.  
-0001a920: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001a930: 6e64 6572 5f6c 6973 742e 6170 7065 6e64  nder_list.append
-0001a940: 2872 656e 6465 7265 6429 0a0a 2020 2020  (rendered)..    
-0001a950: 2020 2020 2320 7468 6572 6520 7761 7320      # there was 
-0001a960: 6e6f 7468 696e 6720 746f 2072 656e 6465  nothing to rende
-0001a970: 723a 2074 6865 206f 6e6c 7920 6974 656d  r: the only item
-0001a980: 7320 6172 6520 7468 6520 7374 6172 7420  s are the start 
-0001a990: 6772 6f75 7020 616e 6420 7363 616c 650a  group and scale.
-0001a9a0: 2020 2020 2020 2020 2320 7472 616e 7366          # transf
-0001a9b0: 6f72 6d2e 0a20 2020 2020 2020 2069 6620  orm..        if 
-0001a9c0: 6c65 6e28 7265 6e64 6572 5f6c 6973 7429  len(render_list)
-0001a9d0: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
-0001a9e0: 2020 2072 6574 7572 6e20 2222 0a0a 2020     return ""..  
-0001a9f0: 2020 2020 2020 7374 796c 655f 6469 6374        style_dict
-0001aa00: 5f6e 616d 6520 3d20 6773 645f 7265 6769  _name = gsd_regi
-0001aa10: 7374 7279 2e72 6567 6973 7465 725f 7374  stry.register_st
-0001aa20: 796c 6528 7374 796c 6529 0a20 2020 2020  yle(style).     
-0001aa30: 2020 2069 6620 7374 796c 655f 6469 6374     if style_dict
-0001aa40: 5f6e 616d 6520 6973 206e 6f74 204e 6f6e  _name is not Non
-0001aa50: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0001aa60: 656e 6465 725f 6c69 7374 2e69 6e73 6572  ender_list.inser
-0001aa70: 7428 322c 2066 227b 7265 6e64 6572 5f70  t(2, f"{render_p
-0001aa80: 6466 5f70 7269 6d69 7469 7665 2873 7479  df_primitive(sty
-0001aa90: 6c65 5f64 6963 745f 6e61 6d65 297d 2067  le_dict_name)} g
-0001aaa0: 7322 290a 2020 2020 2020 2020 2020 2020  s").            
-0001aab0: 7265 6e64 6572 5f6c 6973 742e 696e 7365  render_list.inse
-0001aac0: 7274 280a 2020 2020 2020 2020 2020 2020  rt(.            
-0001aad0: 2020 2020 332c 0a20 2020 2020 2020 2020      3,.         
-0001aae0: 2020 2020 2020 2072 656e 6465 725f 7064         render_pd
-0001aaf0: 665f 7072 696d 6974 6976 6528 7374 796c  f_primitive(styl
-0001ab00: 652e 7374 726f 6b65 5f64 6173 685f 7061  e.stroke_dash_pa
-0001ab10: 7474 6572 6e29 0a20 2020 2020 2020 2020  ttern).         
-0001ab20: 2020 2020 2020 202b 2066 2220 7b6e 756d         + f" {num
-0001ab30: 6265 725f 746f 5f73 7472 2873 7479 6c65  ber_to_str(style
-0001ab40: 2e73 7472 6f6b 655f 6461 7368 5f70 6861  .stroke_dash_pha
-0001ab50: 7365 297d 2064 222c 0a20 2020 2020 2020  se)} d",.       
-0001ab60: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0001ab70: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
-0001ab80: 6e64 2822 5122 290a 0a20 2020 2020 2020  nd("Q")..       
-0001ab90: 2072 6574 7572 6e20 2220 222e 6a6f 696e   return " ".join
-0001aba0: 2872 656e 6465 725f 6c69 7374 290a 0a20  (render_list).. 
-0001abb0: 2020 2064 6566 2072 656e 6465 725f 6465     def render_de
-0001abc0: 6275 6728 0a20 2020 2020 2020 2073 656c  bug(.        sel
-0001abd0: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
-0001abe0: 2066 6972 7374 5f70 6f69 6e74 2c20 7363   first_point, sc
-0001abf0: 616c 652c 2068 6569 6768 742c 2073 7461  ale, height, sta
-0001ac00: 7274 696e 675f 7374 796c 652c 2064 6562  rting_style, deb
-0001ac10: 7567 5f73 7472 6561 6d0a 2020 2020 293a  ug_stream.    ):
-0001ac20: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001ac30: 2020 2020 2052 656e 6465 7220 7468 6520       Render the 
-0001ac40: 6472 6177 696e 6720 636f 6e74 6578 7420  drawing context 
-0001ac50: 746f 2050 4446 2066 6f72 6d61 742e 0a0a  to PDF format...
-0001ac60: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-0001ac70: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
-0001ac80: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
-0001ac90: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
-0001aca0: 7929 3a20 7468 6520 7061 7265 6e74 2064  y): the parent d
-0001acb0: 6f63 756d 656e 7427 7320 6772 6170 6869  ocument's graphi
-0001acc0: 6373 0a20 2020 2020 2020 2020 2020 2020  cs.             
-0001acd0: 2020 2073 7461 7465 2072 6567 6973 7472     state registr
-0001ace0: 792e 0a20 2020 2020 2020 2020 2020 2066  y..            f
-0001acf0: 6972 7374 5f70 6f69 6e74 2028 506f 696e  irst_point (Poin
-0001ad00: 7429 3a20 7468 6520 7374 6172 7469 6e67  t): the starting
-0001ad10: 2070 6f69 6e74 2074 6f20 7573 6520 6966   point to use if
-0001ad20: 2074 6865 2066 6972 7374 2070 6174 6820   the first path 
-0001ad30: 656c 656d 656e 7420 6973 0a20 2020 2020  element is.     
-0001ad40: 2020 2020 2020 2020 2020 2061 2072 656c             a rel
-0001ad50: 6174 6976 6520 656c 656d 656e 742e 0a20  ative element.. 
-0001ad60: 2020 2020 2020 2020 2020 2073 6361 6c65             scale
-0001ad70: 2028 4e75 6d62 6572 293a 2074 6865 2073   (Number): the s
-0001ad80: 6361 6c65 2066 6163 746f 7220 746f 2063  cale factor to c
-0001ad90: 6f6e 7665 7274 2066 726f 6d20 5044 4620  onvert from PDF 
-0001ada0: 7074 2075 6e69 7473 2069 6e74 6f20 7468  pt units into th
-0001adb0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001adc0: 2020 646f 6375 6d65 6e74 2773 2073 656d    document's sem
-0001add0: 616e 7469 6320 756e 6974 7320 2865 2e67  antic units (e.g
-0001ade0: 2e20 6d6d 206f 7220 696e 292e 0a20 2020  . mm or in)..   
-0001adf0: 2020 2020 2020 2020 2068 6569 6768 7420           height 
-0001ae00: 284e 756d 6265 7229 3a20 7468 6520 7061  (Number): the pa
-0001ae10: 6765 2068 6569 6768 742e 2054 6869 7320  ge height. This 
-0001ae20: 6973 2075 7365 6420 746f 2072 656d 6170  is used to remap
-0001ae30: 2074 6865 2063 6f6f 7264 696e 6174 6573   the coordinates
-0001ae40: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
-0001ae50: 2020 2020 6265 2066 726f 6d20 7468 6520      be from the 
-0001ae60: 746f 702d 6c65 6674 2063 6f72 6e65 7220  top-left corner 
-0001ae70: 6f66 2074 6865 2070 6167 6520 286d 6174  of the page (mat
-0001ae80: 6368 696e 6720 6670 6466 2773 2062 6568  ching fpdf's beh
-0001ae90: 6176 696f 7229 0a20 2020 2020 2020 2020  avior).         
-0001aea0: 2020 2020 2020 2069 6e73 7465 6164 206f         instead o
-0001aeb0: 6620 7468 6520 5044 4620 6e61 7469 7665  f the PDF native
-0001aec0: 2062 6568 6176 696f 7220 6f66 2062 6f74   behavior of bot
-0001aed0: 746f 6d2d 6c65 6674 2e0a 2020 2020 2020  tom-left..      
-0001aee0: 2020 2020 2020 7374 6172 7469 6e67 5f73        starting_s
-0001aef0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
-0001af00: 796c 6529 3a20 7468 6520 6261 7365 2073  yle): the base s
-0001af10: 7479 6c65 2066 6f72 2074 6869 7320 6472  tyle for this dr
-0001af20: 6177 696e 6720 636f 6e74 6578 742c 0a20  awing context,. 
-0001af30: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0001af40: 6572 6976 6564 2066 726f 6d20 7468 6520  erived from the 
-0001af50: 646f 6375 6d65 6e74 2773 2063 7572 7265  document's curre
-0001af60: 6e74 2073 7479 6c65 2064 6566 6175 6c74  nt style default
-0001af70: 732e 0a20 2020 2020 2020 2020 2020 2064  s..            d
-0001af80: 6562 7567 5f73 7472 6561 6d20 2854 6578  ebug_stream (Tex
-0001af90: 7449 4f29 3a20 6120 7465 7874 2073 7472  tIO): a text str
-0001afa0: 6561 6d20 746f 2077 6869 6368 2061 2064  eam to which a d
-0001afb0: 6562 7567 2072 6570 7265 7365 6e74 6174  ebug representat
-0001afc0: 696f 6e20 6f66 2074 6865 0a20 2020 2020  ion of the.     
-0001afd0: 2020 2020 2020 2020 2020 2064 7261 7769             drawi
-0001afe0: 6e67 2073 7472 7563 7475 7265 2077 696c  ng structure wil
-0001aff0: 6c20 6265 2077 7269 7474 656e 2e0a 0a20  l be written... 
-0001b000: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-0001b010: 2020 2020 2020 2020 2020 2020 4120 7374              A st
-0001b020: 7269 6e67 2063 6f6d 706f 7365 6420 6f66  ring composed of
-0001b030: 2074 6865 2050 4446 2072 6570 7265 7365   the PDF represe
-0001b040: 6e74 6174 696f 6e20 6f66 2061 6c6c 2074  ntation of all t
-0001b050: 6865 2070 6174 6873 2061 6e64 2067 726f  he paths and gro
-0001b060: 7570 7320 696e 0a20 2020 2020 2020 2020  ups in.         
-0001b070: 2020 2074 6869 7320 636f 6e74 6578 7420     this context 
-0001b080: 2861 6e20 656d 7074 7920 7374 7269 6e67  (an empty string
-0001b090: 2069 7320 7265 7475 726e 6564 2069 6620   is returned if 
-0001b0a0: 7468 6572 6520 6172 6520 6e6f 2070 6174  there are no pat
-0001b0b0: 6873 206f 7220 6772 6f75 7073 290a 2020  hs or groups).  
-0001b0c0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001b0d0: 2020 7265 6e64 6572 5f6c 6973 742c 2073    render_list, s
-0001b0e0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d20  tyle, last_item 
-0001b0f0: 3d20 7365 6c66 2e5f 7365 7475 705f 7265  = self._setup_re
-0001b100: 6e64 6572 5f70 7265 7265 7173 280a 2020  nder_prereqs(.  
-0001b110: 2020 2020 2020 2020 2020 7374 6172 7469            starti
-0001b120: 6e67 5f73 7479 6c65 2c20 6669 7273 745f  ng_style, first_
-0001b130: 706f 696e 742c 2073 6361 6c65 2c20 6865  point, scale, he
-0001b140: 6967 6874 0a20 2020 2020 2020 2029 0a0a  ight.        )..
-0001b150: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
-0001b160: 7265 616d 2e77 7269 7465 2822 524f 4f54  ream.write("ROOT
-0001b170: 5c6e 2229 0a20 2020 2020 2020 2066 6f72  \n").        for
-0001b180: 2063 6869 6c64 2069 6e20 7365 6c66 2e5f   child in self._
-0001b190: 7375 6269 7465 6d73 5b3a 2d31 5d3a 0a20  subitems[:-1]:. 
-0001b1a0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-0001b1b0: 5f73 7472 6561 6d2e 7772 6974 6528 2220  _stream.write(" 
-0001b1c0: e294 9ce2 9480 2022 290a 2020 2020 2020  ...... ").      
-0001b1d0: 2020 2020 2020 7265 6e64 6572 6564 2c20        rendered, 
-0001b1e0: 6c61 7374 5f69 7465 6d20 3d20 6368 696c  last_item = chil
-0001b1f0: 642e 7265 6e64 6572 5f64 6562 7567 280a  d.render_debug(.
-0001b200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b210: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-0001b220: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-0001b230: 6465 6275 675f 7374 7265 616d 2c20 2220  debug_stream, " 
-0001b240: e294 8220 2022 0a20 2020 2020 2020 2020  ...  ".         
-0001b250: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0001b260: 2069 6620 7265 6e64 6572 6564 3a0a 2020   if rendered:.  
-0001b270: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001b280: 6e64 6572 5f6c 6973 742e 6170 7065 6e64  nder_list.append
-0001b290: 2872 656e 6465 7265 6429 0a0a 2020 2020  (rendered)..    
-0001b2a0: 2020 2020 6966 2073 656c 662e 5f73 7562      if self._sub
-0001b2b0: 6974 656d 733a 0a20 2020 2020 2020 2020  items:.         
-0001b2c0: 2020 2064 6562 7567 5f73 7472 6561 6d2e     debug_stream.
-0001b2d0: 7772 6974 6528 2220 e294 94e2 9480 2022  write(" ...... "
-0001b2e0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0001b2f0: 6e64 6572 6564 2c20 6c61 7374 5f69 7465  ndered, last_ite
-0001b300: 6d2c 2066 6972 7374 5f70 6f69 6e74 203d  m, first_point =
-0001b310: 2073 656c 662e 5f73 7562 6974 656d 735b   self._subitems[
-0001b320: 2d31 5d2e 7265 6e64 6572 5f64 6562 7567  -1].render_debug
-0001b330: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001b340: 2020 6773 645f 7265 6769 7374 7279 2c20    gsd_registry, 
-0001b350: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
-0001b360: 2c20 6669 7273 745f 706f 696e 742c 2064  , first_point, d
-0001b370: 6562 7567 5f73 7472 6561 6d2c 2022 2020  ebug_stream, "  
-0001b380: 2020 220a 2020 2020 2020 2020 2020 2020    ".            
-0001b390: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001b3a0: 2072 656e 6465 7265 643a 0a20 2020 2020   rendered:.     
-0001b3b0: 2020 2020 2020 2020 2020 2072 656e 6465             rende
-0001b3c0: 725f 6c69 7374 2e61 7070 656e 6428 7265  r_list.append(re
-0001b3d0: 6e64 6572 6564 290a 0a20 2020 2020 2020  ndered)..       
-0001b3e0: 2020 2020 2023 2074 6865 7265 2077 6173       # there was
-0001b3f0: 206e 6f74 6869 6e67 2074 6f20 7265 6e64   nothing to rend
-0001b400: 6572 3a20 7468 6520 6f6e 6c79 2069 7465  er: the only ite
-0001b410: 6d73 2061 7265 2074 6865 2073 7461 7274  ms are the start
-0001b420: 2067 726f 7570 2061 6e64 2073 6361 6c65   group and scale
-0001b430: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-0001b440: 7261 6e73 666f 726d 2e0a 2020 2020 2020  ransform..      
-0001b450: 2020 2020 2020 6966 206c 656e 2872 656e        if len(ren
-0001b460: 6465 725f 6c69 7374 2920 3d3d 2032 3a0a  der_list) == 2:.
-0001b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b480: 7265 7475 726e 2022 220a 0a20 2020 2020  return ""..     
-0001b490: 2020 2020 2020 2073 7479 6c65 5f64 6963         style_dic
-0001b4a0: 745f 6e61 6d65 203d 2067 7364 5f72 6567  t_name = gsd_reg
-0001b4b0: 6973 7472 792e 7265 6769 7374 6572 5f73  istry.register_s
-0001b4c0: 7479 6c65 2873 7479 6c65 290a 2020 2020  tyle(style).    
-0001b4d0: 2020 2020 2020 2020 6966 2073 7479 6c65          if style
-0001b4e0: 5f64 6963 745f 6e61 6d65 2069 7320 6e6f  _dict_name is no
-0001b4f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0001b500: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
-0001b510: 6973 742e 696e 7365 7274 2832 2c20 6622  ist.insert(2, f"
-0001b520: 7b72 656e 6465 725f 7064 665f 7072 696d  {render_pdf_prim
-0001b530: 6974 6976 6528 7374 796c 655f 6469 6374  itive(style_dict
-0001b540: 5f6e 616d 6529 7d20 6773 2229 0a20 2020  _name)} gs").   
-0001b550: 2020 2020 2020 2020 2020 2020 2072 656e               ren
-0001b560: 6465 725f 6c69 7374 2e69 6e73 6572 7428  der_list.insert(
-0001b570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b580: 2020 2020 2033 2c0a 2020 2020 2020 2020       3,.        
-0001b590: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
-0001b5a0: 6572 5f70 6466 5f70 7269 6d69 7469 7665  er_pdf_primitive
-0001b5b0: 2873 7479 6c65 2e73 7472 6f6b 655f 6461  (style.stroke_da
-0001b5c0: 7368 5f70 6174 7465 726e 290a 2020 2020  sh_pattern).    
-0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5e0: 2b20 6622 207b 6e75 6d62 6572 5f74 6f5f  + f" {number_to_
-0001b5f0: 7374 7228 7374 796c 652e 7374 726f 6b65  str(style.stroke
-0001b600: 5f64 6173 685f 7068 6173 6529 7d20 6422  _dash_phase)} d"
-0001b610: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001b620: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-0001b630: 2072 656e 6465 725f 6c69 7374 2e61 7070   render_list.app
-0001b640: 656e 6428 2251 2229 0a0a 2020 2020 2020  end("Q")..      
-0001b650: 2020 2020 2020 7265 7475 726e 2022 2022        return " "
-0001b660: 2e6a 6f69 6e28 7265 6e64 6572 5f6c 6973  .join(render_lis
-0001b670: 7429 0a0a 2020 2020 2020 2020 7265 7475  t)..        retu
-0001b680: 726e 2022 220a 0a0a 636c 6173 7320 5061  rn ""...class Pa
-0001b690: 696e 7465 6450 6174 683a 0a20 2020 2022  intedPath:.    "
-0001b6a0: 2222 0a20 2020 2041 2070 6174 6820 746f  "".    A path to
-0001b6b0: 2062 6520 6472 6177 6e20 6279 2074 6865   be drawn by the
-0001b6c0: 2050 4446 2072 656e 6465 7265 722e 0a0a   PDF renderer...
-0001b6d0: 2020 2020 4120 7061 696e 7465 6420 7061      A painted pa
-0001b6e0: 7468 2069 7320 6465 6669 6e65 6420 6279  th is defined by
-0001b6f0: 2061 2073 7479 6c65 2061 6e64 2061 6e20   a style and an 
-0001b700: 6172 6269 7472 6172 7920 7365 7175 656e  arbitrary sequen
-0001b710: 6365 206f 6620 7061 7468 2065 6c65 6d65  ce of path eleme
-0001b720: 6e74 732c 0a20 2020 2077 6869 6368 2069  nts,.    which i
-0001b730: 6e63 6c75 6465 2074 6865 2070 7269 6d69  nclude the primi
-0001b740: 7469 7665 2070 6174 6820 656c 656d 656e  tive path elemen
-0001b750: 7473 2028 604d 6f76 6560 2c20 604c 696e  ts (`Move`, `Lin
-0001b760: 6560 2c20 6042 657a 6965 7243 7572 7665  e`, `BezierCurve
-0001b770: 602c 202e 2e2e 2920 6173 0a20 2020 2077  `, ...) as.    w
-0001b780: 656c 6c20 6173 2061 7262 6974 7261 7269  ell as arbitrari
-0001b790: 6c79 206e 6573 7465 6420 6047 7261 7068  ly nested `Graph
-0001b7a0: 6963 7343 6f6e 7465 7874 6020 636f 6e74  icsContext` cont
-0001b7b0: 6169 6e69 6e67 2074 6865 6972 206f 776e  aining their own
-0001b7c0: 2073 6571 7565 6e63 6520 6f66 0a20 2020   sequence of.   
-0001b7d0: 2070 7269 6d69 7469 7665 2070 6174 6820   primitive path 
-0001b7e0: 656c 656d 656e 7473 2061 6e64 2060 4772  elements and `Gr
-0001b7f0: 6170 6869 6373 436f 6e74 6578 7460 2e0a  aphicsContext`..
-0001b800: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-0001b810: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-0001b820: 783d 302c 2079 3d30 293a 0a20 2020 2020  x=0, y=0):.     
-0001b830: 2020 2073 656c 662e 5f72 6f6f 745f 6772     self._root_gr
-0001b840: 6170 6869 6373 5f63 6f6e 7465 7874 203d  aphics_context =
-0001b850: 2047 7261 7068 6963 7343 6f6e 7465 7874   GraphicsContext
-0001b860: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0001b870: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
-0001b880: 7420 3d20 7365 6c66 2e5f 726f 6f74 5f67  t = self._root_g
-0001b890: 7261 7068 6963 735f 636f 6e74 6578 740a  raphics_context.
-0001b8a0: 0a20 2020 2020 2020 2073 656c 662e 5f63  .        self._c
-0001b8b0: 6c6f 7365 6420 3d20 5472 7565 0a20 2020  losed = True.   
-0001b8c0: 2020 2020 2073 656c 662e 5f63 6c6f 7365       self._close
-0001b8d0: 5f63 6f6e 7465 7874 203d 2073 656c 662e  _context = self.
-0001b8e0: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
-0001b8f0: 740a 0a20 2020 2020 2020 2073 656c 662e  t..        self.
-0001b900: 5f73 7461 7274 6572 5f6d 6f76 6520 3d20  _starter_move = 
-0001b910: 4d6f 7665 2850 6f69 6e74 2878 2c20 7929  Move(Point(x, y)
-0001b920: 290a 0a20 2020 2064 6566 205f 5f64 6565  )..    def __dee
-0001b930: 7063 6f70 795f 5f28 7365 6c66 2c20 6d65  pcopy__(self, me
-0001b940: 6d6f 293a 0a20 2020 2020 2020 2023 2074  mo):.        # t
-0001b950: 6865 7265 2773 206e 6f20 7265 616c 2077  here's no real w
-0001b960: 6179 2074 6f20 7265 636f 7665 7220 7468  ay to recover th
-0001b970: 6520 6d61 7463 6869 6e67 2063 7572 7265  e matching curre
-0001b980: 6e74 205f 6772 6170 6869 6373 5f63 6f6e  nt _graphics_con
-0001b990: 7465 7874 2061 6674 6572 0a20 2020 2020  text after.     
-0001b9a0: 2020 2023 2063 6f70 7969 6e67 2074 6865     # copying the
-0001b9b0: 2072 6f6f 7420 636f 6e74 6578 742c 2062   root context, b
-0001b9c0: 7574 2074 6861 7427 7320 6f6b 2062 6563  ut that's ok bec
-0001b9d0: 6175 7365 2077 6520 6361 6e20 6a75 7374  ause we can just
-0001b9e0: 2064 6973 616c 6c6f 7720 636f 7079 696e   disallow copyin
-0001b9f0: 670a 2020 2020 2020 2020 2320 6f66 2070  g.        # of p
-0001ba00: 6174 6873 2075 6e64 6572 206d 6f64 6966  aths under modif
-0001ba10: 6963 6174 696f 6e20 6173 2074 6861 7420  ication as that 
-0001ba20: 6973 2061 6c6d 6f73 7420 6365 7274 6169  is almost certai
-0001ba30: 6e6c 7920 7772 6f6e 6720 7573 6167 652e  nly wrong usage.
-0001ba40: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0001ba50: 2e5f 6772 6170 6869 6373 5f63 6f6e 7465  ._graphics_conte
-0001ba60: 7874 2069 7320 6e6f 7420 7365 6c66 2e5f  xt is not self._
-0001ba70: 726f 6f74 5f67 7261 7068 6963 735f 636f  root_graphics_co
-0001ba80: 6e74 6578 743a 0a20 2020 2020 2020 2020  ntext:.         
-0001ba90: 2020 2072 6169 7365 2052 756e 7469 6d65     raise Runtime
-0001baa0: 4572 726f 7228 6622 6361 6e6e 6f74 2063  Error(f"cannot c
-0001bab0: 6f70 7920 7061 7468 207b 7365 6c66 7d20  opy path {self} 
-0001bac0: 7768 696c 6520 6974 2069 7320 6265 696e  while it is bein
-0001bad0: 6720 6d6f 6469 6669 6564 2229 0a0a 2020  g modified")..  
-0001bae0: 2020 2020 2020 636f 7069 6564 203d 2073        copied = s
-0001baf0: 656c 662e 5f5f 636c 6173 735f 5f28 290a  elf.__class__().
-0001bb00: 2020 2020 2020 2020 636f 7069 6564 2e5f          copied._
-0001bb10: 726f 6f74 5f67 7261 7068 6963 735f 636f  root_graphics_co
-0001bb20: 6e74 6578 7420 3d20 636f 7079 2e64 6565  ntext = copy.dee
-0001bb30: 7063 6f70 7928 7365 6c66 2e5f 726f 6f74  pcopy(self._root
-0001bb40: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
-0001bb50: 742c 206d 656d 6f29 0a20 2020 2020 2020  t, memo).       
-0001bb60: 2063 6f70 6965 642e 5f67 7261 7068 6963   copied._graphic
-0001bb70: 735f 636f 6e74 6578 7420 3d20 636f 7069  s_context = copi
-0001bb80: 6564 2e5f 726f 6f74 5f67 7261 7068 6963  ed._root_graphic
-0001bb90: 735f 636f 6e74 6578 740a 2020 2020 2020  s_context.      
-0001bba0: 2020 636f 7069 6564 2e5f 636c 6f73 6564    copied._closed
-0001bbb0: 203d 2073 656c 662e 5f63 6c6f 7365 640a   = self._closed.
-0001bbc0: 2020 2020 2020 2020 636f 7069 6564 2e5f          copied._
-0001bbd0: 636c 6f73 655f 636f 6e74 6578 7420 3d20  close_context = 
-0001bbe0: 636f 7069 6564 2e5f 6772 6170 6869 6373  copied._graphics
-0001bbf0: 5f63 6f6e 7465 7874 0a0a 2020 2020 2020  _context..      
-0001bc00: 2020 7265 7475 726e 2063 6f70 6965 640a    return copied.
-0001bc10: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-0001bc20: 2020 2064 6566 2073 7479 6c65 2873 656c     def style(sel
-0001bc30: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
-0001bc40: 6865 2060 4772 6170 6869 6373 5374 796c  he `GraphicsStyl
-0001bc50: 6560 2061 7070 6c69 6564 2074 6f20 616c  e` applied to al
-0001bc60: 6c20 656c 656d 656e 7473 206f 6620 7468  l elements of th
-0001bc70: 6973 2070 6174 682e 2222 220a 2020 2020  is path.""".    
-0001bc80: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0001bc90: 5f72 6f6f 745f 6772 6170 6869 6373 5f63  _root_graphics_c
-0001bca0: 6f6e 7465 7874 2e73 7479 6c65 0a0a 2020  ontext.style..  
-0001bcb0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-0001bcc0: 6465 6620 7472 616e 7366 6f72 6d28 7365  def transform(se
-0001bcd0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-0001bce0: 5468 6520 6054 7261 6e73 666f 726d 6020  The `Transform` 
-0001bcf0: 7468 6174 2061 7070 6c69 6573 2074 6f20  that applies to 
-0001bd00: 616c 6c20 6f66 2074 6865 2065 6c65 6d65  all of the eleme
-0001bd10: 6e74 7320 6f66 2074 6869 7320 7061 7468  nts of this path
-0001bd20: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
-0001bd30: 7572 6e20 7365 6c66 2e5f 726f 6f74 5f67  urn self._root_g
-0001bd40: 7261 7068 6963 735f 636f 6e74 6578 742e  raphics_context.
-0001bd50: 7472 616e 7366 6f72 6d0a 0a20 2020 2040  transform..    @
-0001bd60: 7472 616e 7366 6f72 6d2e 7365 7474 6572  transform.setter
-0001bd70: 0a20 2020 2064 6566 2074 7261 6e73 666f  .    def transfo
-0001bd80: 726d 2873 656c 662c 2074 6629 3a0a 2020  rm(self, tf):.  
-0001bd90: 2020 2020 2020 7365 6c66 2e5f 726f 6f74        self._root
-0001bda0: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
-0001bdb0: 742e 7472 616e 7366 6f72 6d20 3d20 7466  t.transform = tf
-0001bdc0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
-0001bdd0: 2020 2020 6465 6620 6175 746f 5f63 6c6f      def auto_clo
-0001bde0: 7365 2873 656c 6629 3a0a 2020 2020 2020  se(self):.      
-0001bdf0: 2020 2222 2249 6620 7472 7565 2c20 7468    """If true, th
-0001be00: 6520 7061 7468 2073 686f 756c 6420 6175  e path should au
-0001be10: 746f 6d61 7469 6361 6c6c 7920 636c 6f73  tomatically clos
-0001be20: 6520 6974 7365 6c66 2062 6566 6f72 6520  e itself before 
-0001be30: 7061 696e 7469 6e67 2e22 2222 0a20 2020  painting.""".   
-0001be40: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0001be50: 2e73 7479 6c65 2e61 7574 6f5f 636c 6f73  .style.auto_clos
-0001be60: 650a 0a20 2020 2040 6175 746f 5f63 6c6f  e..    @auto_clo
-0001be70: 7365 2e73 6574 7465 720a 2020 2020 6465  se.setter.    de
-0001be80: 6620 6175 746f 5f63 6c6f 7365 2873 656c  f auto_close(sel
-0001be90: 662c 2073 686f 756c 6429 3a0a 2020 2020  f, should):.    
-0001bea0: 2020 2020 7365 6c66 2e73 7479 6c65 2e61      self.style.a
-0001beb0: 7574 6f5f 636c 6f73 6520 3d20 7368 6f75  uto_close = shou
-0001bec0: 6c64 0a0a 2020 2020 4070 726f 7065 7274  ld..    @propert
-0001bed0: 790a 2020 2020 6465 6620 7061 696e 745f  y.    def paint_
-0001bee0: 7275 6c65 2873 656c 6629 3a0a 2020 2020  rule(self):.    
-0001bef0: 2020 2020 2222 224d 616e 7561 6c6c 7920      """Manually 
-0001bf00: 7370 6563 6966 7920 7468 6520 6050 6174  specify the `Pat
-0001bf10: 6850 6169 6e74 5275 6c65 6020 746f 2075  hPaintRule` to u
-0001bf20: 7365 2066 6f72 2072 656e 6465 7269 6e67  se for rendering
-0001bf30: 2074 6865 2070 6174 682e 2222 220a 2020   the path.""".  
-0001bf40: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0001bf50: 662e 7374 796c 652e 7061 696e 745f 7275  f.style.paint_ru
-0001bf60: 6c65 0a0a 2020 2020 4070 6169 6e74 5f72  le..    @paint_r
-0001bf70: 756c 652e 7365 7474 6572 0a20 2020 2064  ule.setter.    d
-0001bf80: 6566 2070 6169 6e74 5f72 756c 6528 7365  ef paint_rule(se
-0001bf90: 6c66 2c20 7374 796c 6529 3a0a 2020 2020  lf, style):.    
-0001bfa0: 2020 2020 7365 6c66 2e73 7479 6c65 2e70      self.style.p
-0001bfb0: 6169 6e74 5f72 756c 6520 3d20 7374 796c  aint_rule = styl
-0001bfc0: 650a 0a20 2020 2040 7072 6f70 6572 7479  e..    @property
-0001bfd0: 0a20 2020 2064 6566 2063 6c69 7070 696e  .    def clippin
-0001bfe0: 675f 7061 7468 2873 656c 6629 3a0a 2020  g_path(self):.  
-0001bff0: 2020 2020 2020 2222 2253 6574 2074 6865        """Set the
-0001c000: 2063 6c69 7070 696e 6720 7061 7468 2066   clipping path f
-0001c010: 6f72 2074 6869 7320 7061 7468 2e22 2222  or this path."""
-0001c020: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001c030: 7365 6c66 2e5f 726f 6f74 5f67 7261 7068  self._root_graph
-0001c040: 6963 735f 636f 6e74 6578 742e 636c 6970  ics_context.clip
-0001c050: 7069 6e67 5f70 6174 680a 0a20 2020 2040  ping_path..    @
-0001c060: 636c 6970 7069 6e67 5f70 6174 682e 7365  clipping_path.se
-0001c070: 7474 6572 0a20 2020 2064 6566 2063 6c69  tter.    def cli
-0001c080: 7070 696e 675f 7061 7468 2873 656c 662c  pping_path(self,
-0001c090: 206e 6577 5f63 6c69 7061 7468 293a 0a20   new_clipath):. 
-0001c0a0: 2020 2020 2020 2073 656c 662e 5f72 6f6f         self._roo
-0001c0b0: 745f 6772 6170 6869 6373 5f63 6f6e 7465  t_graphics_conte
-0001c0c0: 7874 2e63 6c69 7070 696e 675f 7061 7468  xt.clipping_path
-0001c0d0: 203d 206e 6577 5f63 6c69 7061 7468 0a0a   = new_clipath..
-0001c0e0: 2020 2020 4063 6f6e 7465 7874 6d61 6e61      @contextmana
-0001c0f0: 6765 720a 2020 2020 6465 6620 5f6e 6577  ger.    def _new
-0001c100: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
-0001c110: 7428 7365 6c66 2c20 5f61 7474 6163 683d  t(self, _attach=
-0001c120: 5472 7565 293a 0a20 2020 2020 2020 206f  True):.        o
-0001c130: 6c64 5f67 7261 7068 6963 735f 636f 6e74  ld_graphics_cont
-0001c140: 6578 7420 3d20 7365 6c66 2e5f 6772 6170  ext = self._grap
-0001c150: 6869 6373 5f63 6f6e 7465 7874 0a20 2020  hics_context.   
-0001c160: 2020 2020 206e 6577 5f67 7261 7068 6963       new_graphic
-0001c170: 735f 636f 6e74 6578 7420 3d20 4772 6170  s_context = Grap
-0001c180: 6869 6373 436f 6e74 6578 7428 290a 2020  hicsContext().  
-0001c190: 2020 2020 2020 7365 6c66 2e5f 6772 6170        self._grap
-0001c1a0: 6869 6373 5f63 6f6e 7465 7874 203d 206e  hics_context = n
-0001c1b0: 6577 5f67 7261 7068 6963 735f 636f 6e74  ew_graphics_cont
-0001c1c0: 6578 740a 2020 2020 2020 2020 7472 793a  ext.        try:
-0001c1d0: 0a20 2020 2020 2020 2020 2020 2079 6965  .            yie
-0001c1e0: 6c64 206e 6577 5f67 7261 7068 6963 735f  ld new_graphics_
-0001c1f0: 636f 6e74 6578 740a 2020 2020 2020 2020  context.        
-0001c200: 2020 2020 6966 205f 6174 7461 6368 3a0a      if _attach:.
-0001c210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c220: 6f6c 645f 6772 6170 6869 6373 5f63 6f6e  old_graphics_con
-0001c230: 7465 7874 2e61 6464 5f69 7465 6d28 6e65  text.add_item(ne
-0001c240: 775f 6772 6170 6869 6373 5f63 6f6e 7465  w_graphics_conte
-0001c250: 7874 290a 2020 2020 2020 2020 6669 6e61  xt).        fina
-0001c260: 6c6c 793a 0a20 2020 2020 2020 2020 2020  lly:.           
-0001c270: 2073 656c 662e 5f67 7261 7068 6963 735f   self._graphics_
-0001c280: 636f 6e74 6578 7420 3d20 6f6c 645f 6772  context = old_gr
-0001c290: 6170 6869 6373 5f63 6f6e 7465 7874 0a0a  aphics_context..
-0001c2a0: 2020 2020 4063 6f6e 7465 7874 6d61 6e61      @contextmana
-0001c2b0: 6765 720a 2020 2020 6465 6620 7472 616e  ger.    def tran
-0001c2c0: 7366 6f72 6d5f 6772 6f75 7028 7365 6c66  sform_group(self
-0001c2d0: 2c20 7472 616e 7366 6f72 6d29 3a0a 2020  , transform):.  
-0001c2e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001c2f0: 2020 4170 706c 7920 7468 6520 7072 6f76    Apply the prov
-0001c300: 6964 6564 2060 5472 616e 7366 6f72 6d60  ided `Transform`
-0001c310: 2074 6f20 616c 6c20 706f 696e 7473 2061   to all points a
-0001c320: 6464 6564 2077 6974 6869 6e20 7468 6973  dded within this
-0001c330: 2063 6f6e 7465 7874 2e0a 2020 2020 2020   context..      
-0001c340: 2020 2222 220a 2020 2020 2020 2020 7769    """.        wi
-0001c350: 7468 2073 656c 662e 5f6e 6577 5f67 7261  th self._new_gra
-0001c360: 7068 6963 735f 636f 6e74 6578 7428 2920  phics_context() 
-0001c370: 6173 2063 7478 743a 0a20 2020 2020 2020  as ctxt:.       
-0001c380: 2020 2020 2063 7478 742e 7472 616e 7366       ctxt.transf
-0001c390: 6f72 6d20 3d20 7472 616e 7366 6f72 6d0a  orm = transform.
-0001c3a0: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
-0001c3b0: 6420 7365 6c66 0a0a 2020 2020 6465 6620  d self..    def 
-0001c3c0: 6164 645f 7061 7468 5f65 6c65 6d65 6e74  add_path_element
-0001c3d0: 2873 656c 662c 2069 7465 6d2c 205f 636f  (self, item, _co
-0001c3e0: 7079 3d54 7275 6529 3a0a 2020 2020 2020  py=True):.      
-0001c3f0: 2020 2222 220a 2020 2020 2020 2020 4164    """.        Ad
-0001c400: 6420 7468 6520 6769 7665 6e20 656c 656d  d the given elem
-0001c410: 656e 7420 6173 2061 2070 6174 6820 6974  ent as a path it
-0001c420: 656d 206f 6620 7468 6973 2070 6174 682e  em of this path.
-0001c430: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-0001c440: 2020 2020 2020 2020 2020 2020 6974 656d              item
-0001c450: 3a20 7468 6520 6974 656d 2074 6f20 6164  : the item to ad
-0001c460: 6420 746f 2074 6869 7320 7061 7468 2e0a  d to this path..
-0001c470: 2020 2020 2020 2020 2020 2020 5f63 6f70              _cop
-0001c480: 7920 2862 6f6f 6c29 3a20 6966 2074 7275  y (bool): if tru
-0001c490: 6520 2874 6865 2064 6566 6175 6c74 292c  e (the default),
-0001c4a0: 2074 6865 2069 7465 6d20 7769 6c6c 2062   the item will b
-0001c4b0: 6520 636f 7069 6564 2062 6566 6f72 6520  e copied before 
-0001c4c0: 6265 696e 670a 2020 2020 2020 2020 2020  being.          
-0001c4d0: 2020 2020 2020 6170 7065 6e64 6564 2e20        appended. 
-0001c4e0: 5468 6973 2070 7265 7665 6e74 7320 6d6f  This prevents mo
-0001c4f0: 6469 6669 6361 7469 6f6e 7320 746f 2061  difications to a
-0001c500: 2072 6566 6572 656e 6365 6420 6f62 6a65   referenced obje
-0001c510: 6374 2066 726f 6d0a 2020 2020 2020 2020  ct from.        
-0001c520: 2020 2020 2020 2020 2272 6574 726f 6163          "retroac
-0001c530: 7469 7665 6c79 2220 616c 7465 7269 6e67  tively" altering
-0001c540: 2069 7473 2073 7479 6c65 2f73 6861 7065   its style/shape
-0001c550: 2061 6e64 2073 686f 756c 6420 6265 2064   and should be d
-0001c560: 6973 6162 6c65 6420 7769 7468 0a20 2020  isabled with.   
-0001c570: 2020 2020 2020 2020 2020 2020 2063 6175               cau
-0001c580: 7469 6f6e 2e0a 2020 2020 2020 2020 2222  tion..        ""
-0001c590: 220a 2020 2020 2020 2020 6966 2073 656c  ".        if sel
-0001c5a0: 662e 5f73 7461 7274 6572 5f6d 6f76 6520  f._starter_move 
-0001c5b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0001c5c0: 2020 2020 2020 2020 2073 656c 662e 5f63           self._c
-0001c5d0: 6c6f 7365 6420 3d20 4661 6c73 650a 2020  losed = False.  
-0001c5e0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-0001c5f0: 6772 6170 6869 6373 5f63 6f6e 7465 7874  graphics_context
-0001c600: 2e61 6464 5f69 7465 6d28 7365 6c66 2e5f  .add_item(self._
-0001c610: 7374 6172 7465 725f 6d6f 7665 2c20 5f63  starter_move, _c
-0001c620: 6f70 793d 4661 6c73 6529 0a20 2020 2020  opy=False).     
-0001c630: 2020 2020 2020 2073 656c 662e 5f63 6c6f         self._clo
-0001c640: 7365 5f63 6f6e 7465 7874 203d 2073 656c  se_context = sel
-0001c650: 662e 5f67 7261 7068 6963 735f 636f 6e74  f._graphics_cont
-0001c660: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
-0001c670: 7365 6c66 2e5f 7374 6172 7465 725f 6d6f  self._starter_mo
-0001c680: 7665 203d 204e 6f6e 650a 0a20 2020 2020  ve = None..     
-0001c690: 2020 2073 656c 662e 5f67 7261 7068 6963     self._graphic
-0001c6a0: 735f 636f 6e74 6578 742e 6164 645f 6974  s_context.add_it
-0001c6b0: 656d 2869 7465 6d2c 205f 636f 7079 3d5f  em(item, _copy=_
-0001c6c0: 636f 7079 290a 0a20 2020 2064 6566 2072  copy)..    def r
-0001c6d0: 656d 6f76 655f 6c61 7374 5f70 6174 685f  emove_last_path_
-0001c6e0: 656c 656d 656e 7428 7365 6c66 293a 0a20  element(self):. 
-0001c6f0: 2020 2020 2020 2073 656c 662e 5f67 7261         self._gra
-0001c700: 7068 6963 735f 636f 6e74 6578 742e 7265  phics_context.re
-0001c710: 6d6f 7665 5f6c 6173 745f 6974 656d 2829  move_last_item()
-0001c720: 0a0a 2020 2020 6465 6620 7265 6374 616e  ..    def rectan
-0001c730: 676c 6528 7365 6c66 2c20 782c 2079 2c20  gle(self, x, y, 
-0001c740: 772c 2068 2c20 7278 3d30 2c20 7279 3d30  w, h, rx=0, ry=0
-0001c750: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-0001c760: 2020 2020 2020 2041 7070 656e 6420 6120         Append a 
-0001c770: 7265 6374 616e 676c 6520 6173 2061 2063  rectangle as a c
-0001c780: 6c6f 7365 6420 7375 6270 6174 6820 746f  losed subpath to
-0001c790: 2074 6865 2063 7572 7265 6e74 2070 6174   the current pat
-0001c7a0: 682e 0a0a 2020 2020 2020 2020 4966 2074  h...        If t
-0001c7b0: 6865 2077 6964 7468 206f 7220 7468 6520  he width or the 
-0001c7c0: 6865 6967 6874 2061 7265 2030 2c20 7468  height are 0, th
-0001c7d0: 6520 7265 6374 616e 676c 6520 7769 6c6c  e rectangle will
-0001c7e0: 2062 6520 636f 6c6c 6170 7365 6420 746f   be collapsed to
-0001c7f0: 2061 206c 696e 650a 2020 2020 2020 2020   a line.        
-0001c800: 2875 6e6c 6573 7320 7468 6579 2772 6520  (unless they're 
-0001c810: 626f 7468 2030 2c20 696e 2077 6869 6368  both 0, in which
-0001c820: 2063 6173 6520 6974 2773 2063 6f6c 6c61   case it's colla
-0001c830: 7073 6564 2074 6f20 6e6f 7468 696e 6729  psed to nothing)
-0001c840: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-0001c850: 0a20 2020 2020 2020 2020 2020 2078 2028  .            x (
-0001c860: 4e75 6d62 6572 293a 2074 6865 2061 6273  Number): the abs
-0001c870: 6369 7373 6120 6f66 2074 6865 2073 7461  cissa of the sta
-0001c880: 7274 696e 6720 636f 726e 6572 206f 6620  rting corner of 
-0001c890: 7468 6520 7265 6374 616e 676c 652e 0a20  the rectangle.. 
-0001c8a0: 2020 2020 2020 2020 2020 2079 2028 4e75             y (Nu
-0001c8b0: 6d62 6572 293a 2074 6865 206f 7264 696e  mber): the ordin
-0001c8c0: 6174 6520 6f66 2074 6865 2073 7461 7274  ate of the start
-0001c8d0: 696e 6720 636f 726e 6572 206f 6620 7468  ing corner of th
-0001c8e0: 6520 7265 6374 616e 676c 652e 0a20 2020  e rectangle..   
-0001c8f0: 2020 2020 2020 2020 2077 2028 4e75 6d62           w (Numb
-0001c900: 6572 293a 2074 6865 2077 6964 7468 206f  er): the width o
-0001c910: 6620 7468 6520 7265 6374 616e 676c 6520  f the rectangle 
-0001c920: 2869 6620 302c 2074 6865 2072 6563 7461  (if 0, the recta
-0001c930: 6e67 6c65 2077 696c 6c20 6265 0a20 2020  ngle will be.   
-0001c940: 2020 2020 2020 2020 2020 2020 2072 656e               ren
-0001c950: 6465 7265 6420 6173 2061 2076 6572 7469  dered as a verti
-0001c960: 6361 6c20 6c69 6e65 292e 0a20 2020 2020  cal line)..     
-0001c970: 2020 2020 2020 2068 2028 4e75 6d62 6572         h (Number
-0001c980: 293a 2074 6865 2068 6569 6768 7420 6f66  ): the height of
-0001c990: 2074 6865 2072 6563 7461 6e67 6c65 2028   the rectangle (
-0001c9a0: 6966 2030 2c20 7468 6520 7265 6374 616e  if 0, the rectan
-0001c9b0: 676c 6520 7769 6c6c 2062 650a 2020 2020  gle will be.    
-0001c9c0: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
-0001c9d0: 6572 6564 2061 7320 6120 686f 7269 7a6f  ered as a horizo
-0001c9e0: 6e74 616c 206c 696e 6529 2e0a 2020 2020  ntal line)..    
-0001c9f0: 2020 2020 2020 2020 7278 2028 4e75 6d62          rx (Numb
-0001ca00: 6572 293a 2074 6865 2078 2d72 6164 6975  er): the x-radiu
-0001ca10: 7320 6f66 2074 6865 2072 6563 7461 6e67  s of the rectang
-0001ca20: 6c65 2072 6f75 6e64 6564 2063 6f72 6e65  le rounded corne
-0001ca30: 7220 2869 6620 3020 7468 6520 636f 726e  r (if 0 the corn
-0001ca40: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
-0001ca50: 2020 2020 7769 6c6c 206e 6f74 2062 6520      will not be 
-0001ca60: 726f 756e 6465 6429 2e0a 2020 2020 2020  rounded)..      
-0001ca70: 2020 2020 2020 7279 2028 4e75 6d62 6572        ry (Number
-0001ca80: 293a 2074 6865 2079 2d72 6164 6975 7320  ): the y-radius 
-0001ca90: 6f66 2074 6865 2072 6563 7461 6e67 6c65  of the rectangle
-0001caa0: 2072 6f75 6e64 6564 2063 6f72 6e65 7220   rounded corner 
-0001cab0: 2869 6620 3020 7468 6520 636f 726e 6572  (if 0 the corner
-0001cac0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-0001cad0: 2020 7769 6c6c 206e 6f74 2062 6520 726f    will not be ro
-0001cae0: 756e 6465 6429 2e0a 0a20 2020 2020 2020  unded)...       
-0001caf0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-0001cb00: 2020 2020 2020 5468 6520 7061 7468 2c20        The path, 
-0001cb10: 746f 2061 6c6c 6f77 2063 6861 696e 696e  to allow chainin
-0001cb20: 6720 6d65 7468 6f64 2063 616c 6c73 2e0a  g method calls..
-0001cb30: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-0001cb40: 2020 2020 2073 656c 662e 5f69 6e73 6572       self._inser
-0001cb50: 745f 696d 706c 6963 6974 5f63 6c6f 7365  t_implicit_close
-0001cb60: 5f69 665f 6f70 656e 2829 0a20 2020 2020  _if_open().     
-0001cb70: 2020 2073 656c 662e 6164 645f 7061 7468     self.add_path
-0001cb80: 5f65 6c65 6d65 6e74 280a 2020 2020 2020  _element(.      
-0001cb90: 2020 2020 2020 526f 756e 6465 6452 6563        RoundedRec
-0001cba0: 7461 6e67 6c65 2850 6f69 6e74 2878 2c20  tangle(Point(x, 
-0001cbb0: 7929 2c20 506f 696e 7428 772c 2068 292c  y), Point(w, h),
-0001cbc0: 2050 6f69 6e74 2872 782c 2072 7929 292c   Point(rx, ry)),
-0001cbd0: 205f 636f 7079 3d46 616c 7365 0a20 2020   _copy=False.   
-0001cbe0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0001cbf0: 656c 662e 5f63 6c6f 7365 6420 3d20 5472  elf._closed = Tr
-0001cc00: 7565 0a20 2020 2020 2020 2073 656c 662e  ue.        self.
-0001cc10: 6d6f 7665 5f74 6f28 782c 2079 290a 0a20  move_to(x, y).. 
-0001cc20: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001cc30: 6c66 0a0a 2020 2020 6465 6620 6369 7263  lf..    def circ
-0001cc40: 6c65 2873 656c 662c 2063 782c 2063 792c  le(self, cx, cy,
-0001cc50: 2072 293a 0a20 2020 2020 2020 2022 2222   r):.        """
-0001cc60: 0a20 2020 2020 2020 2041 7070 656e 6420  .        Append 
-0001cc70: 6120 6369 7263 6c65 2061 7320 6120 636c  a circle as a cl
-0001cc80: 6f73 6564 2073 7562 7061 7468 2074 6f20  osed subpath to 
-0001cc90: 7468 6520 6375 7272 656e 7420 7061 7468  the current path
-0001cca0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-0001ccb0: 0a20 2020 2020 2020 2020 2020 2063 7820  .            cx 
-0001ccc0: 284e 756d 6265 7229 3a20 7468 6520 6162  (Number): the ab
-0001ccd0: 7363 6973 7361 206f 6620 7468 6520 6369  scissa of the ci
-0001cce0: 7263 6c65 2773 2063 656e 7465 7220 706f  rcle's center po
-0001ccf0: 696e 742e 0a20 2020 2020 2020 2020 2020  int..           
-0001cd00: 2063 7920 284e 756d 6265 7229 3a20 7468   cy (Number): th
-0001cd10: 6520 6f72 6469 6e61 7465 206f 6620 7468  e ordinate of th
-0001cd20: 6520 6369 7263 6c65 2773 2063 656e 7465  e circle's cente
-0001cd30: 7220 706f 696e 742e 0a20 2020 2020 2020  r point..       
-0001cd40: 2020 2020 2072 2028 4e75 6d62 6572 293a       r (Number):
-0001cd50: 2074 6865 2072 6164 6975 7320 6f66 2074   the radius of t
-0001cd60: 6865 2063 6972 636c 652e 0a0a 2020 2020  he circle...    
-0001cd70: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0001cd80: 2020 2020 2020 2020 2054 6865 2070 6174           The pat
-0001cd90: 682c 2074 6f20 616c 6c6f 7720 6368 6169  h, to allow chai
-0001cda0: 6e69 6e67 206d 6574 686f 6420 6361 6c6c  ning method call
-0001cdb0: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
-0001cdc0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001cdd0: 6c66 2e65 6c6c 6970 7365 2863 782c 2063  lf.ellipse(cx, c
-0001cde0: 792c 2072 2c20 7229 0a0a 2020 2020 6465  y, r, r)..    de
-0001cdf0: 6620 656c 6c69 7073 6528 7365 6c66 2c20  f ellipse(self, 
-0001ce00: 6378 2c20 6379 2c20 7278 2c20 7279 293a  cx, cy, rx, ry):
-0001ce10: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001ce20: 2020 2020 2041 7070 656e 6420 616e 2065       Append an e
-0001ce30: 6c6c 6970 7365 2061 7320 6120 636c 6f73  llipse as a clos
-0001ce40: 6564 2073 7562 7061 7468 2074 6f20 7468  ed subpath to th
-0001ce50: 6520 6375 7272 656e 7420 7061 7468 2e0a  e current path..
-0001ce60: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-0001ce70: 2020 2020 2020 2020 2020 2063 7820 284e             cx (N
-0001ce80: 756d 6265 7229 3a20 7468 6520 6162 7363  umber): the absc
-0001ce90: 6973 7361 206f 6620 7468 6520 656c 6c69  issa of the elli
-0001cea0: 7073 6527 7320 6365 6e74 6572 2070 6f69  pse's center poi
-0001ceb0: 6e74 2e0a 2020 2020 2020 2020 2020 2020  nt..            
-0001cec0: 6379 2028 4e75 6d62 6572 293a 2074 6865  cy (Number): the
-0001ced0: 206f 7264 696e 6174 6520 6f66 2074 6865   ordinate of the
-0001cee0: 2065 6c6c 6970 7365 2773 2063 656e 7465   ellipse's cente
-0001cef0: 7220 706f 696e 742e 0a20 2020 2020 2020  r point..       
-0001cf00: 2020 2020 2072 7820 284e 756d 6265 7229       rx (Number)
-0001cf10: 3a20 7468 6520 782d 7261 6469 7573 206f  : the x-radius o
-0001cf20: 6620 7468 6520 656c 6c69 7073 652e 0a20  f the ellipse.. 
-0001cf30: 2020 2020 2020 2020 2020 2072 7920 284e             ry (N
-0001cf40: 756d 6265 7229 3a20 7468 6520 792d 7261  umber): the y-ra
-0001cf50: 6469 7573 206f 6620 7468 6520 656c 6c69  dius of the elli
-0001cf60: 7073 652e 0a0a 2020 2020 2020 2020 5265  pse...        Re
-0001cf70: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-0001cf80: 2020 2054 6865 2070 6174 682c 2074 6f20     The path, to 
-0001cf90: 616c 6c6f 7720 6368 6169 6e69 6e67 206d  allow chaining m
-0001cfa0: 6574 686f 6420 6361 6c6c 732e 0a20 2020  ethod calls..   
-0001cfb0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001cfc0: 2073 656c 662e 5f69 6e73 6572 745f 696d   self._insert_im
-0001cfd0: 706c 6963 6974 5f63 6c6f 7365 5f69 665f  plicit_close_if_
-0001cfe0: 6f70 656e 2829 0a20 2020 2020 2020 2073  open().        s
-0001cff0: 656c 662e 6164 645f 7061 7468 5f65 6c65  elf.add_path_ele
-0001d000: 6d65 6e74 2845 6c6c 6970 7365 2850 6f69  ment(Ellipse(Poi
-0001d010: 6e74 2872 782c 2072 7929 2c20 506f 696e  nt(rx, ry), Poin
-0001d020: 7428 6378 2c20 6379 2929 2c20 5f63 6f70  t(cx, cy)), _cop
-0001d030: 793d 4661 6c73 6529 0a20 2020 2020 2020  y=False).       
-0001d040: 2073 656c 662e 5f63 6c6f 7365 6420 3d20   self._closed = 
-0001d050: 5472 7565 0a20 2020 2020 2020 2073 656c  True.        sel
-0001d060: 662e 6d6f 7665 5f74 6f28 6378 2c20 6379  f.move_to(cx, cy
-0001d070: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-0001d080: 6e20 7365 6c66 0a0a 2020 2020 6465 6620  n self..    def 
-0001d090: 6d6f 7665 5f74 6f28 7365 6c66 2c20 782c  move_to(self, x,
-0001d0a0: 2079 293a 0a20 2020 2020 2020 2022 2222   y):.        """
-0001d0b0: 0a20 2020 2020 2020 2053 7461 7274 2061  .        Start a
-0001d0c0: 206e 6577 2073 7562 7061 7468 206f 7220   new subpath or 
-0001d0d0: 6d6f 7665 2074 6865 2070 6174 6820 7374  move the path st
-0001d0e0: 6172 7469 6e67 2070 6f69 6e74 2e0a 0a20  arting point... 
-0001d0f0: 2020 2020 2020 2049 6620 6e6f 2070 6174         If no pat
-0001d100: 6820 656c 656d 656e 7473 2068 6176 6520  h elements have 
-0001d110: 6265 656e 2061 6464 6564 2079 6574 2c20  been added yet, 
-0001d120: 7468 6973 2077 696c 6c20 6368 616e 6765  this will change
-0001d130: 2074 6865 2070 6174 6820 7374 6172 7469   the path starti
-0001d140: 6e67 0a20 2020 2020 2020 2070 6f69 6e74  ng.        point
-0001d150: 2e20 4966 2070 6174 6820 656c 656d 656e  . If path elemen
-0001d160: 7473 2068 6176 6520 6265 656e 2061 6464  ts have been add
-0001d170: 6564 2c20 7468 6973 2077 696c 6c20 696e  ed, this will in
-0001d180: 7365 7274 2061 6e20 696d 706c 6963 6974  sert an implicit
-0001d190: 2063 6c6f 7365 2069 6e0a 2020 2020 2020   close in.      
-0001d1a0: 2020 6f72 6465 7220 746f 2073 7461 7274    order to start
-0001d1b0: 2061 206e 6577 2073 7562 7061 7468 2e0a   a new subpath..
-0001d1c0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-0001d1d0: 2020 2020 2020 2020 2020 2078 2028 4e75             x (Nu
-0001d1e0: 6d62 6572 293a 2061 6273 6369 7373 6120  mber): abscissa 
-0001d1f0: 6f66 2074 6865 2028 7375 6229 7061 7468  of the (sub)path
-0001d200: 2073 7461 7274 696e 6720 706f 696e 742e   starting point.
-0001d210: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
-0001d220: 4e75 6d62 6572 293a 206f 7264 696e 6174  Number): ordinat
-0001d230: 6520 6f66 2074 6865 2028 7375 6229 7061  e of the (sub)pa
-0001d240: 7468 2073 7461 7274 696e 6720 706f 696e  th starting poin
-0001d250: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
-0001d260: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-0001d270: 2054 6865 2070 6174 682c 2074 6f20 616c   The path, to al
-0001d280: 6c6f 7720 6368 6169 6e69 6e67 206d 6574  low chaining met
-0001d290: 686f 6420 6361 6c6c 732e 0a20 2020 2020  hod calls..     
-0001d2a0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0001d2b0: 656c 662e 5f69 6e73 6572 745f 696d 706c  elf._insert_impl
-0001d2c0: 6963 6974 5f63 6c6f 7365 5f69 665f 6f70  icit_close_if_op
-0001d2d0: 656e 2829 0a20 2020 2020 2020 2073 656c  en().        sel
-0001d2e0: 662e 5f73 7461 7274 6572 5f6d 6f76 6520  f._starter_move 
-0001d2f0: 3d20 4d6f 7665 2850 6f69 6e74 2878 2c20  = Move(Point(x, 
-0001d300: 7929 290a 2020 2020 2020 2020 7265 7475  y)).        retu
-0001d310: 726e 2073 656c 660a 0a20 2020 2064 6566  rn self..    def
-0001d320: 206d 6f76 655f 7265 6c61 7469 7665 2873   move_relative(s
-0001d330: 656c 662c 2078 2c20 7929 3a0a 2020 2020  elf, x, y):.    
-0001d340: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001d350: 5374 6172 7420 6120 6e65 7720 7375 6270  Start a new subp
-0001d360: 6174 6820 6f72 206d 6f76 6520 7468 6520  ath or move the 
-0001d370: 7061 7468 2073 7461 7274 2070 6f69 6e74  path start point
-0001d380: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
-0001d390: 2070 7265 7669 6f75 7320 706f 696e 742e   previous point.
-0001d3a0: 0a0a 2020 2020 2020 2020 4966 206e 6f20  ..        If no 
-0001d3b0: 7061 7468 2065 6c65 6d65 6e74 7320 6861  path elements ha
-0001d3c0: 7665 2062 6565 6e20 6164 6465 6420 7965  ve been added ye
-0001d3d0: 742c 2074 6869 7320 7769 6c6c 2063 6861  t, this will cha
-0001d3e0: 6e67 6520 7468 6520 7061 7468 2073 7461  nge the path sta
-0001d3f0: 7274 696e 670a 2020 2020 2020 2020 706f  rting.        po
-0001d400: 696e 742e 2049 6620 7061 7468 2065 6c65  int. If path ele
-0001d410: 6d65 6e74 7320 6861 7665 2062 6565 6e20  ments have been 
-0001d420: 6164 6465 642c 2074 6869 7320 7769 6c6c  added, this will
-0001d430: 2069 6e73 6572 7420 616e 2069 6d70 6c69   insert an impli
-0001d440: 6369 7420 636c 6f73 6520 696e 0a20 2020  cit close in.   
-0001d450: 2020 2020 206f 7264 6572 2074 6f20 7374       order to st
-0001d460: 6172 7420 6120 6e65 7720 7375 6270 6174  art a new subpat
-0001d470: 682e 0a0a 2020 2020 2020 2020 5468 6973  h...        This
-0001d480: 2077 696c 6c20 6f76 6572 7772 6974 6520   will overwrite 
-0001d490: 616e 2061 6273 6f6c 7574 6520 6d6f 7665  an absolute move
-0001d4a0: 5f74 6f20 6173 206c 6f6e 6720 6173 206e  _to as long as n
-0001d4b0: 6f20 6e6f 6e2d 6d6f 7665 2070 6174 6820  o non-move path 
-0001d4c0: 6974 656d 7320 6861 7665 0a20 2020 2020  items have.     
-0001d4d0: 2020 2062 6565 6e20 6170 7065 6e64 6564     been appended
-0001d4e0: 2e20 5468 6520 7265 6c61 7469 7665 2070  . The relative p
-0001d4f0: 6f73 6974 696f 6e20 6973 2072 6573 6f6c  osition is resol
-0001d500: 7665 6420 6672 6f6d 2074 6865 2070 7265  ved from the pre
-0001d510: 7669 6f75 7320 6974 656d 2077 6865 6e0a  vious item when.
-0001d520: 2020 2020 2020 2020 7468 6520 7061 7468          the path
-0001d530: 2069 7320 6265 696e 6720 7265 6e64 6572   is being render
-0001d540: 6564 2c20 6f72 2066 726f 6d20 302c 2030  ed, or from 0, 0
-0001d550: 2069 6620 6974 2069 7320 7468 6520 6669   if it is the fi
-0001d560: 7273 7420 6974 656d 2e0a 0a20 2020 2020  rst item...     
-0001d570: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0001d580: 2020 2020 2078 2028 4e75 6d62 6572 293a       x (Number):
-0001d590: 2061 6273 6369 7373 6120 6f66 2074 6865   abscissa of the
-0001d5a0: 2028 7375 6229 7061 7468 2073 7461 7274   (sub)path start
-0001d5b0: 696e 6720 706f 696e 7420 7265 6c61 7469  ing point relati
-0001d5c0: 7665 2074 6f20 7468 652e 0a20 2020 2020  ve to the..     
-0001d5d0: 2020 2020 2020 2079 2028 4e75 6d62 6572         y (Number
-0001d5e0: 293a 206f 7264 696e 6174 6520 6f66 2074  ): ordinate of t
-0001d5f0: 6865 2028 7375 6229 7061 7468 2073 7461  he (sub)path sta
-0001d600: 7274 696e 6720 706f 696e 7420 7265 6c61  rting point rela
-0001d610: 7469 7665 2074 6f20 7468 652e 0a20 2020  tive to the..   
-0001d620: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001d630: 2073 656c 662e 5f69 6e73 6572 745f 696d   self._insert_im
-0001d640: 706c 6963 6974 5f63 6c6f 7365 5f69 665f  plicit_close_if_
-0001d650: 6f70 656e 2829 0a20 2020 2020 2020 2069  open().        i
-0001d660: 6620 7365 6c66 2e5f 7374 6172 7465 725f  f self._starter_
-0001d670: 6d6f 7665 2069 7320 6e6f 7420 4e6f 6e65  move is not None
-0001d680: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0001d690: 6c66 2e5f 636c 6f73 6564 203d 2046 616c  lf._closed = Fal
-0001d6a0: 7365 0a20 2020 2020 2020 2020 2020 2073  se.            s
-0001d6b0: 656c 662e 5f67 7261 7068 6963 735f 636f  elf._graphics_co
-0001d6c0: 6e74 6578 742e 6164 645f 6974 656d 2873  ntext.add_item(s
-0001d6d0: 656c 662e 5f73 7461 7274 6572 5f6d 6f76  elf._starter_mov
-0001d6e0: 652c 205f 636f 7079 3d46 616c 7365 290a  e, _copy=False).
-0001d6f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001d700: 2e5f 636c 6f73 655f 636f 6e74 6578 7420  ._close_context 
-0001d710: 3d20 7365 6c66 2e5f 6772 6170 6869 6373  = self._graphics
-0001d720: 5f63 6f6e 7465 7874 0a20 2020 2020 2020  _context.       
-0001d730: 2073 656c 662e 5f73 7461 7274 6572 5f6d   self._starter_m
-0001d740: 6f76 6520 3d20 5265 6c61 7469 7665 4d6f  ove = RelativeMo
-0001d750: 7665 2850 6f69 6e74 2878 2c20 7929 290a  ve(Point(x, y)).
-0001d760: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001d770: 656c 660a 0a20 2020 2064 6566 206c 696e  elf..    def lin
-0001d780: 655f 746f 2873 656c 662c 2078 2c20 7929  e_to(self, x, y)
-0001d790: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0001d7a0: 2020 2020 2020 4170 7065 6e64 2061 2073        Append a s
-0001d7b0: 7472 6169 6768 7420 6c69 6e65 2074 6f20  traight line to 
-0001d7c0: 7468 6973 2070 6174 682e 0a0a 2020 2020  this path...    
-0001d7d0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-0001d7e0: 2020 2020 2020 7820 284e 756d 6265 7229        x (Number)
-0001d7f0: 3a20 6162 7363 6973 7361 2074 6865 206c  : abscissa the l
-0001d800: 696e 6527 7320 656e 6420 706f 696e 742e  ine's end point.
-0001d810: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
-0001d820: 4e75 6d62 6572 293a 206f 7264 696e 6174  Number): ordinat
-0001d830: 6520 6f66 2074 6865 206c 696e 6527 7320  e of the line's 
-0001d840: 656e 6420 706f 696e 742e 0a0a 2020 2020  end point...    
-0001d850: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0001d860: 2020 2020 2020 2020 2054 6865 2070 6174           The pat
-0001d870: 682c 2074 6f20 616c 6c6f 7720 6368 6169  h, to allow chai
-0001d880: 6e69 6e67 206d 6574 686f 6420 6361 6c6c  ning method call
-0001d890: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
-0001d8a0: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
-0001d8b0: 7061 7468 5f65 6c65 6d65 6e74 284c 696e  path_element(Lin
-0001d8c0: 6528 506f 696e 7428 782c 2079 2929 2c20  e(Point(x, y)), 
-0001d8d0: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
-0001d8e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0001d8f0: 0a0a 2020 2020 6465 6620 6c69 6e65 5f72  ..    def line_r
-0001d900: 656c 6174 6976 6528 7365 6c66 2c20 6478  elative(self, dx
-0001d910: 2c20 6479 293a 0a20 2020 2020 2020 2022  , dy):.        "
-0001d920: 2222 0a20 2020 2020 2020 2041 7070 656e  "".        Appen
-0001d930: 6420 6120 7374 7261 6967 6874 206c 696e  d a straight lin
-0001d940: 6520 7768 6f73 6520 656e 6420 6973 2063  e whose end is c
-0001d950: 6f6d 7075 7465 6420 6173 2061 6e20 6f66  omputed as an of
-0001d960: 6673 6574 2066 726f 6d20 7468 6520 656e  fset from the en
-0001d970: 6420 6f66 2074 6865 0a20 2020 2020 2020  d of the.       
-0001d980: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
-0001d990: 6c65 6d65 6e74 2e0a 0a20 2020 2020 2020  lement...       
-0001d9a0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0001d9b0: 2020 2078 2028 4e75 6d62 6572 293a 2061     x (Number): a
-0001d9c0: 6273 6369 7373 6120 7468 6520 6c69 6e65  bscissa the line
-0001d9d0: 2773 2065 6e64 2070 6f69 6e74 2072 656c  's end point rel
-0001d9e0: 6174 6976 6520 746f 2074 6865 2065 6e64  ative to the end
-0001d9f0: 2070 6f69 6e74 206f 6620 7468 650a 2020   point of the.  
-0001da00: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0001da10: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-0001da20: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
-0001da30: 2079 2028 4e75 6d62 6572 293a 206f 7264   y (Number): ord
-0001da40: 696e 6174 6520 6f66 2074 6865 206c 696e  inate of the lin
-0001da50: 6527 7320 656e 6420 706f 696e 7420 7265  e's end point re
-0001da60: 6c61 7469 7665 2074 6f20 7468 6520 656e  lative to the en
-0001da70: 6420 706f 696e 7420 6f66 0a20 2020 2020  d point of.     
-0001da80: 2020 2020 2020 2020 2020 2074 6865 2070             the p
-0001da90: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
-0001daa0: 6d65 6e74 2e0a 0a20 2020 2020 2020 2052  ment...        R
-0001dab0: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-0001dac0: 2020 2020 5468 6520 7061 7468 2c20 746f      The path, to
-0001dad0: 2061 6c6c 6f77 2063 6861 696e 696e 6720   allow chaining 
-0001dae0: 6d65 7468 6f64 2063 616c 6c73 2e0a 2020  method calls..  
-0001daf0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001db00: 2020 7365 6c66 2e61 6464 5f70 6174 685f    self.add_path_
-0001db10: 656c 656d 656e 7428 5265 6c61 7469 7665  element(Relative
-0001db20: 4c69 6e65 2850 6f69 6e74 2864 782c 2064  Line(Point(dx, d
-0001db30: 7929 292c 205f 636f 7079 3d46 616c 7365  y)), _copy=False
-0001db40: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001db50: 2073 656c 660a 0a20 2020 2064 6566 2068   self..    def h
-0001db60: 6f72 697a 6f6e 7461 6c5f 6c69 6e65 5f74  orizontal_line_t
-0001db70: 6f28 7365 6c66 2c20 7829 3a0a 2020 2020  o(self, x):.    
-0001db80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001db90: 4170 7065 6e64 2061 2073 7472 6169 6768  Append a straigh
-0001dba0: 7420 686f 7269 7a6f 6e74 616c 206c 696e  t horizontal lin
-0001dbb0: 6520 746f 2074 6865 2067 6976 656e 2061  e to the given a
-0001dbc0: 6273 6369 7373 612e 2054 6865 206f 7264  bscissa. The ord
-0001dbd0: 696e 6174 6520 6973 0a20 2020 2020 2020  inate is.       
-0001dbe0: 2072 6574 7269 6576 6564 2066 726f 6d20   retrieved from 
-0001dbf0: 7468 6520 656e 6420 706f 696e 7420 6f66  the end point of
-0001dc00: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-0001dc10: 7468 2065 6c65 6d65 6e74 2e0a 0a20 2020  th element...   
-0001dc20: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-0001dc30: 2020 2020 2020 2078 2028 4e75 6d62 6572         x (Number
-0001dc40: 293a 2061 6273 6369 7373 6120 6f66 2074  ): abscissa of t
-0001dc50: 6865 206c 696e 6527 7320 656e 6420 706f  he line's end po
-0001dc60: 696e 742e 0a0a 2020 2020 2020 2020 5265  int...        Re
-0001dc70: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
-0001dc80: 2020 2054 6865 2070 6174 682c 2074 6f20     The path, to 
-0001dc90: 616c 6c6f 7720 6368 6169 6e69 6e67 206d  allow chaining m
-0001dca0: 6574 686f 6420 6361 6c6c 732e 0a20 2020  ethod calls..   
-0001dcb0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001dcc0: 2073 656c 662e 6164 645f 7061 7468 5f65   self.add_path_e
-0001dcd0: 6c65 6d65 6e74 2848 6f72 697a 6f6e 7461  lement(Horizonta
-0001dce0: 6c4c 696e 6528 7829 2c20 5f63 6f70 793d  lLine(x), _copy=
-0001dcf0: 4661 6c73 6529 0a20 2020 2020 2020 2072  False).        r
-0001dd00: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
-0001dd10: 6465 6620 686f 7269 7a6f 6e74 616c 5f6c  def horizontal_l
-0001dd20: 696e 655f 7265 6c61 7469 7665 2873 656c  ine_relative(sel
-0001dd30: 662c 2064 7829 3a0a 2020 2020 2020 2020  f, dx):.        
-0001dd40: 2222 220a 2020 2020 2020 2020 4170 7065  """.        Appe
-0001dd50: 6e64 2061 2073 7472 6169 6768 7420 686f  nd a straight ho
-0001dd60: 7269 7a6f 6e74 616c 206c 696e 6520 746f  rizontal line to
-0001dd70: 2074 6865 2067 6976 656e 206f 6666 7365   the given offse
-0001dd80: 7420 6672 6f6d 2074 6865 2070 7265 7669  t from the previ
-0001dd90: 6f75 7320 7061 7468 0a20 2020 2020 2020  ous path.       
-0001dda0: 2065 6c65 6d65 6e74 2e20 5468 6520 6f72   element. The or
-0001ddb0: 6469 6e61 7465 2069 7320 7265 7472 6965  dinate is retrie
-0001ddc0: 7665 6420 6672 6f6d 2074 6865 2065 6e64  ved from the end
-0001ddd0: 2070 6f69 6e74 206f 6620 7468 6520 7072   point of the pr
-0001dde0: 6576 696f 7573 2070 6174 680a 2020 2020  evious path.    
-0001ddf0: 2020 2020 656c 656d 656e 742e 0a0a 2020      element...  
-0001de00: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0001de10: 2020 2020 2020 2020 7820 284e 756d 6265          x (Numbe
-0001de20: 7229 3a20 6162 7363 6973 7361 206f 6620  r): abscissa of 
-0001de30: 7468 6520 6c69 6e65 2773 2065 6e64 2070  the line's end p
-0001de40: 6f69 6e74 2072 656c 6174 6976 6520 746f  oint relative to
-0001de50: 2074 6865 2065 6e64 2070 6f69 6e74 206f   the end point o
-0001de60: 660a 2020 2020 2020 2020 2020 2020 2020  f.              
-0001de70: 2020 7468 6520 7072 6576 696f 7573 2070    the previous p
-0001de80: 6174 6820 656c 656d 656e 742e 0a0a 2020  ath element...  
-0001de90: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
-0001dea0: 2020 2020 2020 2020 2020 2054 6865 2070             The p
-0001deb0: 6174 682c 2074 6f20 616c 6c6f 7720 6368  ath, to allow ch
-0001dec0: 6169 6e69 6e67 206d 6574 686f 6420 6361  aining method ca
-0001ded0: 6c6c 732e 0a20 2020 2020 2020 2022 2222  lls..        """
-0001dee0: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
-0001def0: 645f 7061 7468 5f65 6c65 6d65 6e74 2852  d_path_element(R
-0001df00: 656c 6174 6976 6548 6f72 697a 6f6e 7461  elativeHorizonta
-0001df10: 6c4c 696e 6528 6478 292c 205f 636f 7079  lLine(dx), _copy
-0001df20: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
-0001df30: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
-0001df40: 2064 6566 2076 6572 7469 6361 6c5f 6c69   def vertical_li
-0001df50: 6e65 5f74 6f28 7365 6c66 2c20 7929 3a0a  ne_to(self, y):.
-0001df60: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001df70: 2020 2020 4170 7065 6e64 2061 2073 7472      Append a str
-0001df80: 6169 6768 7420 7665 7274 6963 616c 206c  aight vertical l
-0001df90: 696e 6520 746f 2074 6865 2067 6976 656e  ine to the given
-0001dfa0: 206f 7264 696e 6174 652e 2054 6865 2061   ordinate. The a
-0001dfb0: 6273 6369 7373 6120 6973 0a20 2020 2020  bscissa is.     
-0001dfc0: 2020 2072 6574 7269 6576 6564 2066 726f     retrieved fro
-0001dfd0: 6d20 7468 6520 656e 6420 706f 696e 7420  m the end point 
-0001dfe0: 6f66 2074 6865 2070 7265 7669 6f75 7320  of the previous 
-0001dff0: 7061 7468 2065 6c65 6d65 6e74 2e0a 0a20  path element... 
-0001e000: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-0001e010: 2020 2020 2020 2020 2079 2028 4e75 6d62           y (Numb
-0001e020: 6572 293a 206f 7264 696e 6174 6520 6f66  er): ordinate of
-0001e030: 2074 6865 206c 696e 6527 7320 656e 6420   the line's end 
-0001e040: 706f 696e 742e 0a0a 2020 2020 2020 2020  point...        
-0001e050: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-0001e060: 2020 2020 2054 6865 2070 6174 682c 2074       The path, t
-0001e070: 6f20 616c 6c6f 7720 6368 6169 6e69 6e67  o allow chaining
-0001e080: 206d 6574 686f 6420 6361 6c6c 732e 0a20   method calls.. 
-0001e090: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001e0a0: 2020 2073 656c 662e 6164 645f 7061 7468     self.add_path
-0001e0b0: 5f65 6c65 6d65 6e74 2856 6572 7469 6361  _element(Vertica
-0001e0c0: 6c4c 696e 6528 7929 2c20 5f63 6f70 793d  lLine(y), _copy=
-0001e0d0: 4661 6c73 6529 0a20 2020 2020 2020 2072  False).        r
-0001e0e0: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
-0001e0f0: 6465 6620 7665 7274 6963 616c 5f6c 696e  def vertical_lin
-0001e100: 655f 7265 6c61 7469 7665 2873 656c 662c  e_relative(self,
-0001e110: 2064 7929 3a0a 2020 2020 2020 2020 2222   dy):.        ""
-0001e120: 220a 2020 2020 2020 2020 4170 7065 6e64  ".        Append
-0001e130: 2061 2073 7472 6169 6768 7420 7665 7274   a straight vert
-0001e140: 6963 616c 206c 696e 6520 746f 2074 6865  ical line to the
-0001e150: 2067 6976 656e 206f 6666 7365 7420 6672   given offset fr
-0001e160: 6f6d 2074 6865 2070 7265 7669 6f75 7320  om the previous 
-0001e170: 7061 7468 0a20 2020 2020 2020 2065 6c65  path.        ele
-0001e180: 6d65 6e74 2e20 5468 6520 6162 7363 6973  ment. The abscis
-0001e190: 7361 2069 7320 7265 7472 6965 7665 6420  sa is retrieved 
-0001e1a0: 6672 6f6d 2074 6865 2065 6e64 2070 6f69  from the end poi
-0001e1b0: 6e74 206f 6620 7468 6520 7072 6576 696f  nt of the previo
-0001e1c0: 7573 2070 6174 680a 2020 2020 2020 2020  us path.        
-0001e1d0: 656c 656d 656e 742e 0a0a 2020 2020 2020  element...      
-0001e1e0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-0001e1f0: 2020 2020 7920 284e 756d 6265 7229 3a20      y (Number): 
-0001e200: 6f72 6469 6e61 7465 206f 6620 7468 6520  ordinate of the 
-0001e210: 6c69 6e65 2773 2065 6e64 2070 6f69 6e74  line's end point
-0001e220: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
-0001e230: 2065 6e64 2070 6f69 6e74 206f 660a 2020   end point of.  
-0001e240: 2020 2020 2020 2020 2020 2020 2020 7468                th
-0001e250: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-0001e260: 656c 656d 656e 742e 0a0a 2020 2020 2020  element...      
-0001e270: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-0001e280: 2020 2020 2020 2054 6865 2070 6174 682c         The path,
-0001e290: 2074 6f20 616c 6c6f 7720 6368 6169 6e69   to allow chaini
-0001e2a0: 6e67 206d 6574 686f 6420 6361 6c6c 732e  ng method calls.
-0001e2b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001e2c0: 2020 2020 2073 656c 662e 6164 645f 7061       self.add_pa
-0001e2d0: 7468 5f65 6c65 6d65 6e74 2852 656c 6174  th_element(Relat
-0001e2e0: 6976 6556 6572 7469 6361 6c4c 696e 6528  iveVerticalLine(
-0001e2f0: 6479 292c 205f 636f 7079 3d46 616c 7365  dy), _copy=False
-0001e300: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001e310: 2073 656c 660a 0a20 2020 2064 6566 2063   self..    def c
-0001e320: 7572 7665 5f74 6f28 7365 6c66 2c20 7831  urve_to(self, x1
-0001e330: 2c20 7931 2c20 7832 2c20 7932 2c20 7833  , y1, x2, y2, x3
-0001e340: 2c20 7933 293a 0a20 2020 2020 2020 2022  , y3):.        "
-0001e350: 2222 0a20 2020 2020 2020 2041 7070 656e  "".        Appen
-0001e360: 6420 6120 6375 6269 6320 42c3 a97a 6965  d a cubic B..zie
-0001e370: 7220 6375 7276 6520 746f 2074 6869 7320  r curve to this 
-0001e380: 7061 7468 2e0a 0a20 2020 2020 2020 2041  path...        A
-0001e390: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-0001e3a0: 2078 3120 284e 756d 6265 7229 3a20 6162   x1 (Number): ab
-0001e3b0: 7363 6973 7361 206f 6620 7468 6520 6669  scissa of the fi
-0001e3c0: 7273 7420 636f 6e74 726f 6c20 706f 696e  rst control poin
-0001e3d0: 740a 2020 2020 2020 2020 2020 2020 7931  t.            y1
-0001e3e0: 2028 4e75 6d62 6572 293a 206f 7264 696e   (Number): ordin
-0001e3f0: 6174 6520 6f66 2074 6865 2066 6972 7374  ate of the first
-0001e400: 2063 6f6e 7472 6f6c 2070 6f69 6e74 0a20   control point. 
-0001e410: 2020 2020 2020 2020 2020 2078 3220 284e             x2 (N
-0001e420: 756d 6265 7229 3a20 6162 7363 6973 7361  umber): abscissa
-0001e430: 206f 6620 7468 6520 7365 636f 6e64 2063   of the second c
-0001e440: 6f6e 7472 6f6c 2070 6f69 6e74 0a20 2020  ontrol point.   
-0001e450: 2020 2020 2020 2020 2079 3220 284e 756d           y2 (Num
-0001e460: 6265 7229 3a20 6f72 6469 6e61 7465 206f  ber): ordinate o
-0001e470: 6620 7468 6520 7365 636f 6e64 2063 6f6e  f the second con
-0001e480: 7472 6f6c 2070 6f69 6e74 0a20 2020 2020  trol point.     
-0001e490: 2020 2020 2020 2078 3320 284e 756d 6265         x3 (Numbe
-0001e4a0: 7229 3a20 6162 7363 6973 7361 206f 6620  r): abscissa of 
-0001e4b0: 7468 6520 656e 6420 706f 696e 740a 2020  the end point.  
-0001e4c0: 2020 2020 2020 2020 2020 7933 2028 4e75            y3 (Nu
-0001e4d0: 6d62 6572 293a 206f 7264 696e 6174 6520  mber): ordinate 
-0001e4e0: 6f66 2074 6865 2065 6e64 2070 6f69 6e74  of the end point
-0001e4f0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001e500: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
-0001e510: 6865 2070 6174 682c 2074 6f20 616c 6c6f  he path, to allo
-0001e520: 7720 6368 6169 6e69 6e67 206d 6574 686f  w chaining metho
-0001e530: 6420 6361 6c6c 732e 0a20 2020 2020 2020  d calls..       
-0001e540: 2022 2222 0a20 2020 2020 2020 2063 7472   """.        ctr
-0001e550: 6c31 203d 2050 6f69 6e74 2878 312c 2079  l1 = Point(x1, y
-0001e560: 3129 0a20 2020 2020 2020 2063 7472 6c32  1).        ctrl2
-0001e570: 203d 2050 6f69 6e74 2878 322c 2079 3229   = Point(x2, y2)
-0001e580: 0a20 2020 2020 2020 2065 6e64 203d 2050  .        end = P
-0001e590: 6f69 6e74 2878 332c 2079 3329 0a0a 2020  oint(x3, y3)..  
-0001e5a0: 2020 2020 2020 7365 6c66 2e61 6464 5f70        self.add_p
-0001e5b0: 6174 685f 656c 656d 656e 7428 4265 7a69  ath_element(Bezi
-0001e5c0: 6572 4375 7276 6528 6374 726c 312c 2063  erCurve(ctrl1, c
-0001e5d0: 7472 6c32 2c20 656e 6429 2c20 5f63 6f70  trl2, end), _cop
-0001e5e0: 793d 4661 6c73 6529 0a20 2020 2020 2020  y=False).       
-0001e5f0: 2072 6574 7572 6e20 7365 6c66 0a0a 2020   return self..  
-0001e600: 2020 6465 6620 6375 7276 655f 7265 6c61    def curve_rela
-0001e610: 7469 7665 2873 656c 662c 2064 7831 2c20  tive(self, dx1, 
-0001e620: 6479 312c 2064 7832 2c20 6479 322c 2064  dy1, dx2, dy2, d
-0001e630: 7833 2c20 6479 3329 3a0a 2020 2020 2020  x3, dy3):.      
-0001e640: 2020 2222 220a 2020 2020 2020 2020 4170    """.        Ap
-0001e650: 7065 6e64 2061 2063 7562 6963 2042 c3a9  pend a cubic B..
-0001e660: 7a69 6572 2063 7572 7665 2077 686f 7365  zier curve whose
-0001e670: 2070 6f69 6e74 7320 6172 6520 6578 7072   points are expr
-0001e680: 6573 7365 6420 7265 6c61 7469 7665 2074  essed relative t
-0001e690: 6f20 7468 650a 2020 2020 2020 2020 656e  o the.        en
-0001e6a0: 6420 706f 696e 7420 6f66 2074 6865 2070  d point of the p
-0001e6b0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
-0001e6c0: 6d65 6e74 2e0a 0a20 2020 2020 2020 2045  ment...        E
-0001e6d0: 2e67 2e20 7769 7468 2061 2073 7461 7274  .g. with a start
-0001e6e0: 2070 6f69 6e74 206f 6620 2830 2c20 3029   point of (0, 0)
-0001e6f0: 2c20 6769 7665 6e20 2831 2c20 3129 2c20  , given (1, 1), 
-0001e700: 2832 2c20 3229 2c20 2833 2c20 3329 2c20  (2, 2), (3, 3), 
-0001e710: 7468 6520 6f75 7470 7574 0a20 2020 2020  the output.     
-0001e720: 2020 2063 7572 7665 2077 6f75 6c64 2068     curve would h
-0001e730: 6176 6520 7468 6520 706f 696e 7473 3a0a  ave the points:.
-0001e740: 0a20 2020 2020 2020 2028 302c 2030 2920  .        (0, 0) 
-0001e750: 6331 2028 312c 2031 2920 6332 2028 332c  c1 (1, 1) c2 (3,
-0001e760: 2033 2920 6520 2836 2c20 3629 0a0a 2020   3) e (6, 6)..  
-0001e770: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0001e780: 2020 2020 2020 2020 6478 3120 284e 756d          dx1 (Num
-0001e790: 6265 7229 3a20 6162 7363 6973 7361 206f  ber): abscissa o
-0001e7a0: 6620 7468 6520 6669 7273 7420 636f 6e74  f the first cont
-0001e7b0: 726f 6c20 706f 696e 7420 7265 6c61 7469  rol point relati
-0001e7c0: 7665 2074 6f20 7468 6520 656e 6420 706f  ve to the end po
-0001e7d0: 696e 740a 2020 2020 2020 2020 2020 2020  int.            
-0001e7e0: 2020 2020 6f66 2074 6865 2070 7265 7669      of the previ
-0001e7f0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
-0001e800: 0a20 2020 2020 2020 2020 2020 2064 7931  .            dy1
-0001e810: 2028 4e75 6d62 6572 293a 206f 7264 696e   (Number): ordin
-0001e820: 6174 6520 6f66 2074 6865 2066 6972 7374  ate of the first
-0001e830: 2063 6f6e 7472 6f6c 2070 6f69 6e74 2072   control point r
-0001e840: 656c 6174 6976 6520 746f 2074 6865 2065  elative to the e
-0001e850: 6e64 2070 6f69 6e74 0a20 2020 2020 2020  nd point.       
-0001e860: 2020 2020 2020 2020 206f 6620 7468 6520           of the 
-0001e870: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
-0001e880: 656d 656e 740a 2020 2020 2020 2020 2020  ement.          
-0001e890: 2020 6478 3220 284e 756d 6265 7229 3a20    dx2 (Number): 
-0001e8a0: 6162 7363 6973 7361 206f 6666 7365 7420  abscissa offset 
-0001e8b0: 6f66 2074 6865 2073 6563 6f6e 6420 636f  of the second co
-0001e8c0: 6e74 726f 6c20 706f 696e 7420 7265 6c61  ntrol point rela
-0001e8d0: 7469 7665 2074 6f20 7468 650a 2020 2020  tive to the.    
-0001e8e0: 2020 2020 2020 2020 2020 2020 656e 6420              end 
-0001e8f0: 706f 696e 7420 6f66 2074 6865 2070 7265  point of the pre
-0001e900: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-0001e910: 6e74 0a20 2020 2020 2020 2020 2020 2064  nt.            d
-0001e920: 7932 2028 4e75 6d62 6572 293a 206f 7264  y2 (Number): ord
-0001e930: 696e 6174 6520 6f66 6673 6574 206f 6620  inate offset of 
-0001e940: 7468 6520 7365 636f 6e64 2063 6f6e 7472  the second contr
-0001e950: 6f6c 2070 6f69 6e74 2072 656c 6174 6976  ol point relativ
-0001e960: 6520 746f 2074 6865 0a20 2020 2020 2020  e to the.       
-0001e970: 2020 2020 2020 2020 2065 6e64 2070 6f69           end poi
-0001e980: 6e74 206f 6620 7468 6520 7072 6576 696f  nt of the previo
-0001e990: 7573 2070 6174 6820 656c 656d 656e 740a  us path element.
-0001e9a0: 2020 2020 2020 2020 2020 2020 6478 3320              dx3 
-0001e9b0: 284e 756d 6265 7229 3a20 6162 7363 6973  (Number): abscis
-0001e9c0: 7361 206f 6666 7365 7420 6f66 2074 6865  sa offset of the
-0001e9d0: 2065 6e64 2070 6f69 6e74 2072 656c 6174   end point relat
-0001e9e0: 6976 6520 746f 2074 6865 2065 6e64 2070  ive to the end p
-0001e9f0: 6f69 6e74 206f 660a 2020 2020 2020 2020  oint of.        
-0001ea00: 2020 2020 2020 2020 7468 6520 7072 6576          the prev
-0001ea10: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
-0001ea20: 740a 2020 2020 2020 2020 2020 2020 6479  t.            dy
-0001ea30: 3320 284e 756d 6265 7229 3a20 6f72 6469  3 (Number): ordi
-0001ea40: 6e61 7465 206f 6666 7365 7420 6f66 2074  nate offset of t
-0001ea50: 6865 2065 6e64 2070 6f69 6e74 2072 656c  he end point rel
-0001ea60: 6174 6976 6520 746f 2074 6865 2065 6e64  ative to the end
-0001ea70: 2070 6f69 6e74 206f 660a 2020 2020 2020   point of.      
-0001ea80: 2020 2020 2020 2020 2020 7468 6520 7072            the pr
-0001ea90: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-0001eaa0: 656e 740a 0a20 2020 2020 2020 2052 6574  ent..        Ret
-0001eab0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
-0001eac0: 2020 5468 6520 7061 7468 2c20 746f 2061    The path, to a
-0001ead0: 6c6c 6f77 2063 6861 696e 696e 6720 6d65  llow chaining me
-0001eae0: 7468 6f64 2063 616c 6c73 2e0a 2020 2020  thod calls..    
-0001eaf0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001eb00: 6331 6420 3d20 506f 696e 7428 6478 312c  c1d = Point(dx1,
-0001eb10: 2064 7931 290a 2020 2020 2020 2020 6332   dy1).        c2
-0001eb20: 6420 3d20 506f 696e 7428 6478 322c 2064  d = Point(dx2, d
-0001eb30: 7932 290a 2020 2020 2020 2020 656e 6420  y2).        end 
-0001eb40: 3d20 506f 696e 7428 6478 332c 2064 7933  = Point(dx3, dy3
-0001eb50: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0001eb60: 6164 645f 7061 7468 5f65 6c65 6d65 6e74  add_path_element
-0001eb70: 2852 656c 6174 6976 6542 657a 6965 7243  (RelativeBezierC
-0001eb80: 7572 7665 2863 3164 2c20 6332 642c 2065  urve(c1d, c2d, e
-0001eb90: 6e64 292c 205f 636f 7079 3d46 616c 7365  nd), _copy=False
-0001eba0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001ebb0: 2073 656c 660a 0a20 2020 2064 6566 2071   self..    def q
-0001ebc0: 7561 6472 6174 6963 5f63 7572 7665 5f74  uadratic_curve_t
-0001ebd0: 6f28 7365 6c66 2c20 7831 2c20 7931 2c20  o(self, x1, y1, 
-0001ebe0: 7832 2c20 7932 293a 0a20 2020 2020 2020  x2, y2):.       
-0001ebf0: 2022 2222 0a20 2020 2020 2020 2041 7070   """.        App
-0001ec00: 656e 6420 6120 6375 6269 6320 42c3 a97a  end a cubic B..z
-0001ec10: 6965 7220 6375 7276 6520 6d69 6d69 636b  ier curve mimick
-0001ec20: 696e 6720 7468 6520 7370 6563 6966 6965  ing the specifie
-0001ec30: 6420 7175 6164 7261 7469 6320 42c3 a97a  d quadratic B..z
-0001ec40: 6965 7220 6375 7276 652e 0a0a 2020 2020  ier curve...    
-0001ec50: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-0001ec60: 2020 2020 2020 7831 2028 4e75 6d62 6572        x1 (Number
-0001ec70: 293a 2061 6273 6369 7373 6120 6f66 2074  ): abscissa of t
-0001ec80: 6865 2063 6f6e 7472 6f6c 2070 6f69 6e74  he control point
-0001ec90: 0a20 2020 2020 2020 2020 2020 2079 3120  .            y1 
-0001eca0: 284e 756d 6265 7229 3a20 6f72 6469 6e61  (Number): ordina
-0001ecb0: 7465 206f 6620 7468 6520 636f 6e74 726f  te of the contro
-0001ecc0: 6c20 706f 696e 740a 2020 2020 2020 2020  l point.        
-0001ecd0: 2020 2020 7832 2028 4e75 6d62 6572 293a      x2 (Number):
-0001ece0: 2061 6273 6369 7373 6120 6f66 2074 6865   abscissa of the
-0001ecf0: 2065 6e64 2070 6f69 6e74 0a20 2020 2020   end point.     
-0001ed00: 2020 2020 2020 2079 3220 284e 756d 6265         y2 (Numbe
-0001ed10: 7229 3a20 6f72 6469 6e61 7465 206f 6620  r): ordinate of 
-0001ed20: 7468 6520 656e 6420 706f 696e 740a 0a20  the end point.. 
-0001ed30: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
-0001ed40: 2020 2020 2020 2020 2020 2020 5468 6520              The 
-0001ed50: 7061 7468 2c20 746f 2061 6c6c 6f77 2063  path, to allow c
-0001ed60: 6861 696e 696e 6720 6d65 7468 6f64 2063  haining method c
-0001ed70: 616c 6c73 2e0a 2020 2020 2020 2020 2222  alls..        ""
-0001ed80: 220a 2020 2020 2020 2020 6374 726c 203d  ".        ctrl =
-0001ed90: 2050 6f69 6e74 2878 312c 2079 3129 0a20   Point(x1, y1). 
-0001eda0: 2020 2020 2020 2065 6e64 203d 2050 6f69         end = Poi
-0001edb0: 6e74 2878 322c 2079 3229 0a20 2020 2020  nt(x2, y2).     
-0001edc0: 2020 2073 656c 662e 6164 645f 7061 7468     self.add_path
-0001edd0: 5f65 6c65 6d65 6e74 2851 7561 6472 6174  _element(Quadrat
-0001ede0: 6963 4265 7a69 6572 4375 7276 6528 6374  icBezierCurve(ct
-0001edf0: 726c 2c20 656e 6429 2c20 5f63 6f70 793d  rl, end), _copy=
-0001ee00: 4661 6c73 6529 0a20 2020 2020 2020 2072  False).        r
-0001ee10: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
-0001ee20: 6465 6620 7175 6164 7261 7469 635f 6375  def quadratic_cu
-0001ee30: 7276 655f 7265 6c61 7469 7665 2873 656c  rve_relative(sel
-0001ee40: 662c 2064 7831 2c20 6479 312c 2064 7832  f, dx1, dy1, dx2
-0001ee50: 2c20 6479 3229 3a0a 2020 2020 2020 2020  , dy2):.        
-0001ee60: 2222 220a 2020 2020 2020 2020 4170 7065  """.        Appe
-0001ee70: 6e64 2061 2063 7562 6963 2042 c3a9 7a69  nd a cubic B..zi
-0001ee80: 6572 2063 7572 7665 206d 696d 6963 6b69  er curve mimicki
-0001ee90: 6e67 2074 6865 2073 7065 6369 6669 6564  ng the specified
-0001eea0: 2071 7561 6472 6174 6963 2042 c3a9 7a69   quadratic B..zi
-0001eeb0: 6572 2063 7572 7665 2e0a 0a20 2020 2020  er curve...     
-0001eec0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0001eed0: 2020 2020 2064 7831 2028 4e75 6d62 6572       dx1 (Number
-0001eee0: 293a 2061 6273 6369 7373 6120 6f66 2074  ): abscissa of t
-0001eef0: 6865 2063 6f6e 7472 6f6c 2070 6f69 6e74  he control point
-0001ef00: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
-0001ef10: 2065 6e64 2070 6f69 6e74 206f 660a 2020   end point of.  
-0001ef20: 2020 2020 2020 2020 2020 2020 2020 7468                th
-0001ef30: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
-0001ef40: 656c 656d 656e 740a 2020 2020 2020 2020  element.        
-0001ef50: 2020 2020 6479 3120 284e 756d 6265 7229      dy1 (Number)
-0001ef60: 3a20 6f72 6469 6e61 7465 206f 6620 7468  : ordinate of th
-0001ef70: 6520 636f 6e74 726f 6c20 706f 696e 7420  e control point 
-0001ef80: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
-0001ef90: 656e 6420 706f 696e 7420 6f66 0a20 2020  end point of.   
-0001efa0: 2020 2020 2020 2020 2020 2020 2074 6865               the
-0001efb0: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
-0001efc0: 6c65 6d65 6e74 0a20 2020 2020 2020 2020  lement.         
-0001efd0: 2020 2064 7832 2028 4e75 6d62 6572 293a     dx2 (Number):
-0001efe0: 2061 6273 6369 7373 6120 6f66 6673 6574   abscissa offset
-0001eff0: 206f 6620 7468 6520 656e 6420 706f 696e   of the end poin
-0001f000: 7420 7265 6c61 7469 7665 2074 6f20 7468  t relative to th
-0001f010: 6520 656e 6420 706f 696e 7420 6f66 0a20  e end point of. 
-0001f020: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001f030: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
-0001f040: 2065 6c65 6d65 6e74 0a20 2020 2020 2020   element.       
-0001f050: 2020 2020 2064 7932 2028 4e75 6d62 6572       dy2 (Number
-0001f060: 293a 206f 7264 696e 6174 6520 6f66 6673  ): ordinate offs
-0001f070: 6574 206f 6620 7468 6520 656e 6420 706f  et of the end po
-0001f080: 696e 7420 7265 6c61 7469 7665 2074 6f20  int relative to 
-0001f090: 7468 6520 656e 6420 706f 696e 7420 6f66  the end point of
-0001f0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f0b0: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
-0001f0c0: 7468 2065 6c65 6d65 6e74 0a0a 2020 2020  th element..    
-0001f0d0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0001f0e0: 2020 2020 2020 2020 2054 6865 2070 6174           The pat
-0001f0f0: 682c 2074 6f20 616c 6c6f 7720 6368 6169  h, to allow chai
-0001f100: 6e69 6e67 206d 6574 686f 6420 6361 6c6c  ning method call
-0001f110: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
-0001f120: 2020 2020 2020 2063 7472 6c20 3d20 506f         ctrl = Po
-0001f130: 696e 7428 6478 312c 2064 7931 290a 2020  int(dx1, dy1).  
-0001f140: 2020 2020 2020 656e 6420 3d20 506f 696e        end = Poin
-0001f150: 7428 6478 322c 2064 7932 290a 2020 2020  t(dx2, dy2).    
-0001f160: 2020 2020 7365 6c66 2e61 6464 5f70 6174      self.add_pat
-0001f170: 685f 656c 656d 656e 7428 5265 6c61 7469  h_element(Relati
-0001f180: 7665 5175 6164 7261 7469 6342 657a 6965  veQuadraticBezie
-0001f190: 7243 7572 7665 2863 7472 6c2c 2065 6e64  rCurve(ctrl, end
-0001f1a0: 292c 205f 636f 7079 3d46 616c 7365 290a  ), _copy=False).
-0001f1b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001f1c0: 656c 660a 0a20 2020 2064 6566 2061 7263  elf..    def arc
-0001f1d0: 5f74 6f28 7365 6c66 2c20 7278 2c20 7279  _to(self, rx, ry
-0001f1e0: 2c20 726f 7461 7469 6f6e 2c20 6c61 7267  , rotation, larg
-0001f1f0: 655f 6172 632c 2070 6f73 6974 6976 655f  e_arc, positive_
-0001f200: 7377 6565 702c 2078 2c20 7929 3a0a 2020  sweep, x, y):.  
-0001f210: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001f220: 2020 4170 7065 6e64 2061 6e20 656c 6c69    Append an elli
-0001f230: 7074 6963 616c 2061 7263 2066 726f 6d20  ptical arc from 
-0001f240: 7468 6520 656e 6420 6f66 2074 6865 2070  the end of the p
-0001f250: 7265 7669 6f75 7320 7061 7468 2070 6f69  revious path poi
-0001f260: 6e74 2074 6f20 7468 650a 2020 2020 2020  nt to the.      
-0001f270: 2020 7370 6563 6966 6965 6420 656e 6420    specified end 
-0001f280: 706f 696e 742e 0a0a 2020 2020 2020 2020  point...        
-0001f290: 5468 6520 6172 6320 6973 2061 7070 726f  The arc is appro
-0001f2a0: 7869 6d61 7465 6420 7573 696e 6720 42c3  ximated using B.
-0001f2b0: a97a 6965 7220 6375 7276 6573 2c20 736f  .zier curves, so
-0001f2c0: 2069 7420 6973 206e 6f74 2070 6572 6665   it is not perfe
-0001f2d0: 6374 6c79 2061 6363 7572 6174 652e 0a20  ctly accurate.. 
-0001f2e0: 2020 2020 2020 2048 6f77 6576 6572 2c20         However, 
-0001f2f0: 7468 6520 6572 726f 7220 6973 2073 6d61  the error is sma
-0001f300: 6c6c 2065 6e6f 7567 6820 746f 206e 6f74  ll enough to not
-0001f310: 2062 6520 6e6f 7469 6365 6162 6c65 2061   be noticeable a
-0001f320: 7420 616e 7920 7265 6173 6f6e 6162 6c65  t any reasonable
-0001f330: 0a20 2020 2020 2020 2028 616e 6420 6576  .        (and ev
-0001f340: 656e 206d 6f73 7420 756e 7265 6173 6f6e  en most unreason
-0001f350: 6162 6c65 2920 7363 616c 6573 2c20 7769  able) scales, wi
-0001f360: 7468 2061 2077 6f72 7374 2d63 6173 6520  th a worst-case 
-0001f370: 6465 7669 6174 696f 6e20 6f66 2061 726f  deviation of aro
-0001f380: 756e 6420 33e2 80b1 2e0a 0a20 2020 2020  und 3......     
-0001f390: 2020 204e 6f74 6573 3a0a 2020 2020 2020     Notes:.      
-0001f3a0: 2020 2020 2020 2d20 5468 6520 7369 676e        - The sign
-0001f3b0: 7320 6f66 2074 6865 2072 6164 6969 2061  s of the radii a
-0001f3c0: 7267 756d 656e 7473 2028 6072 7860 2061  rguments (`rx` a
-0001f3d0: 6e64 2060 7279 6029 2061 7265 2069 676e  nd `ry`) are ign
-0001f3e0: 6f72 6564 2028 692e 652e 2074 6865 6972  ored (i.e. their
-0001f3f0: 0a20 2020 2020 2020 2020 2020 2020 2061  .              a
-0001f400: 6273 6f6c 7574 6520 7661 6c75 6573 2061  bsolute values a
-0001f410: 7265 2075 7365 6420 696e 7374 6561 6429  re used instead)
-0001f420: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-0001f430: 4966 2065 6974 6865 7220 7261 6469 7573  If either radius
-0001f440: 2069 7320 302c 2074 6865 6e20 6120 7374   is 0, then a st
-0001f450: 7261 6967 6874 206c 696e 6520 7769 6c6c  raight line will
-0001f460: 2062 6520 656d 6974 7465 6420 696e 7374   be emitted inst
-0001f470: 6561 6420 6f66 2061 6e0a 2020 2020 2020  ead of an.      
-0001f480: 2020 2020 2020 2020 6172 632e 0a20 2020          arc..   
-0001f490: 2020 2020 2020 2020 202d 2049 6620 7468           - If th
-0001f4a0: 6520 7261 6469 6920 6172 6520 746f 6f20  e radii are too 
-0001f4b0: 736d 616c 6c20 666f 7220 7468 6520 6172  small for the ar
-0001f4c0: 6320 746f 2072 6561 6368 2066 726f 6d20  c to reach from 
-0001f4d0: 7468 6520 6375 7272 656e 7420 706f 696e  the current poin
-0001f4e0: 7420 746f 0a20 2020 2020 2020 2020 2020  t to.           
-0001f4f0: 2020 2074 6865 2073 7065 6369 6669 6564     the specified
-0001f500: 2065 6e64 2070 6f69 6e74 2028 6078 6020   end point (`x` 
-0001f510: 616e 6420 6079 6029 2c20 7468 656e 2074  and `y`), then t
-0001f520: 6865 7920 7769 6c6c 2062 6520 7072 6f70  hey will be prop
-0001f530: 6f72 7469 6f6e 616c 6c79 0a20 2020 2020  ortionally.     
-0001f540: 2020 2020 2020 2020 2073 6361 6c65 6420           scaled 
-0001f550: 7570 2075 6e74 696c 2074 6865 7920 6172  up until they ar
-0001f560: 6520 6269 6720 656e 6f75 6768 2c20 7768  e big enough, wh
-0001f570: 6963 6820 7769 6c6c 2061 6c77 6179 7320  ich will always 
-0001f580: 7265 7375 6c74 2069 6e20 610a 2020 2020  result in a.    
-0001f590: 2020 2020 2020 2020 2020 6861 6c66 2d65            half-e
-0001f5a0: 6c6c 6970 7365 2061 7263 2028 692e 652e  llipse arc (i.e.
-0001f5b0: 2061 6e20 3138 3020 6465 6772 6565 2073   an 180 degree s
-0001f5c0: 7765 6570 290a 0a20 2020 2020 2020 2041  weep)..        A
-0001f5d0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-0001f5e0: 2072 7820 284e 756d 6265 7229 3a20 7261   rx (Number): ra
-0001f5f0: 6469 7573 2069 6e20 7468 6520 782d 6469  dius in the x-di
-0001f600: 7265 6374 696f 6e2e 0a20 2020 2020 2020  rection..       
-0001f610: 2020 2020 2072 7920 284e 756d 6265 7229       ry (Number)
-0001f620: 3a20 7261 6469 7573 2069 6e20 7468 6520  : radius in the 
-0001f630: 792d 6469 7265 6374 696f 6e2e 0a20 2020  y-direction..   
-0001f640: 2020 2020 2020 2020 2072 6f74 6174 696f           rotatio
-0001f650: 6e20 284e 756d 6265 7229 3a20 616e 676c  n (Number): angl
-0001f660: 6520 2869 6e20 6465 6772 6565 7329 2074  e (in degrees) t
-0001f670: 6861 7420 7468 6520 6172 6320 7368 6f75  hat the arc shou
-0001f680: 6c64 2062 6520 726f 7461 7465 640a 2020  ld be rotated.  
-0001f690: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-0001f6a0: 6f63 6b77 6973 6520 6672 6f6d 2074 6865  ockwise from the
-0001f6b0: 2070 7269 6e63 6970 6c65 2061 7865 732e   principle axes.
-0001f6c0: 2054 6869 7320 7061 7261 6d65 7465 7220   This parameter 
-0001f6d0: 646f 6573 206e 6f74 2068 6176 650a 2020  does not have.  
-0001f6e0: 2020 2020 2020 2020 2020 2020 2020 6120                a 
-0001f6f0: 7669 7375 616c 2065 6666 6563 7420 696e  visual effect in
-0001f700: 2074 6865 2063 6173 6520 7468 6174 2060   the case that `
-0001f710: 7278 203d 3d20 7279 602e 0a20 2020 2020  rx == ry`..     
-0001f720: 2020 2020 2020 206c 6172 6765 5f61 7263         large_arc
-0001f730: 2028 626f 6f6c 293a 2069 6620 5472 7565   (bool): if True
-0001f740: 2c20 7468 6520 6172 6320 7769 6c6c 2063  , the arc will c
-0001f750: 6f76 6572 2061 2073 7765 6570 2061 6e67  over a sweep ang
-0001f760: 6c65 206f 6620 6174 206c 6561 7374 2031  le of at least 1
-0001f770: 3830 0a20 2020 2020 2020 2020 2020 2020  80.             
-0001f780: 2020 2064 6567 7265 6573 2e20 4f74 6865     degrees. Othe
-0001f790: 7277 6973 652c 2074 6865 2073 7765 6570  rwise, the sweep
-0001f7a0: 2061 6e67 6c65 2077 696c 6c20 6265 2061   angle will be a
-0001f7b0: 7420 6d6f 7374 2031 3830 2064 6567 7265  t most 180 degre
-0001f7c0: 6573 2e0a 2020 2020 2020 2020 2020 2020  es..            
-0001f7d0: 706f 7369 7469 7665 5f73 7765 6570 2028  positive_sweep (
-0001f7e0: 626f 6f6c 293a 2069 6620 5472 7565 2c20  bool): if True, 
-0001f7f0: 7468 6520 6172 6320 7769 6c6c 2062 6520  the arc will be 
-0001f800: 7377 6570 7420 6f76 6572 2061 2070 6f73  swept over a pos
-0001f810: 6974 6976 6520 616e 676c 652c 0a20 2020  itive angle,.   
-0001f820: 2020 2020 2020 2020 2020 2020 2069 2e65               i.e
-0001f830: 2e20 636c 6f63 6b77 6973 652e 204f 7468  . clockwise. Oth
-0001f840: 6572 7769 7365 2c20 7468 6520 6172 6320  erwise, the arc 
-0001f850: 7769 6c6c 2062 6520 7377 6570 7420 6f76  will be swept ov
-0001f860: 6572 2061 206e 6567 6174 6976 650a 2020  er a negative.  
-0001f870: 2020 2020 2020 2020 2020 2020 2020 616e                an
-0001f880: 676c 652e 0a20 2020 2020 2020 2020 2020  gle..           
-0001f890: 2078 2028 4e75 6d62 6572 293a 2061 6273   x (Number): abs
-0001f8a0: 6369 7373 6120 6f66 2074 6865 2061 7263  cissa of the arc
-0001f8b0: 2773 2065 6e64 2070 6f69 6e74 2e0a 2020  's end point..  
-0001f8c0: 2020 2020 2020 2020 2020 7920 284e 756d            y (Num
-0001f8d0: 6265 7229 3a20 6f72 6469 6e61 7465 206f  ber): ordinate o
-0001f8e0: 6620 7468 6520 6172 6327 7320 656e 6420  f the arc's end 
-0001f8f0: 706f 696e 742e 0a20 2020 2020 2020 2022  point..        "
-0001f900: 2222 0a0a 2020 2020 2020 2020 6966 2072  ""..        if r
-0001f910: 7820 3d3d 2030 206f 7220 7279 203d 3d20  x == 0 or ry == 
-0001f920: 303a 0a20 2020 2020 2020 2020 2020 2072  0:.            r
-0001f930: 6574 7572 6e20 7365 6c66 2e6c 696e 655f  eturn self.line_
-0001f940: 746f 2878 2c20 7929 0a0a 2020 2020 2020  to(x, y)..      
-0001f950: 2020 7261 6469 6920 3d20 506f 696e 7428    radii = Point(
-0001f960: 6162 7328 7278 292c 2061 6273 2872 7929  abs(rx), abs(ry)
-0001f970: 290a 2020 2020 2020 2020 6c61 7267 655f  ).        large_
-0001f980: 6172 6320 3d20 626f 6f6c 286c 6172 6765  arc = bool(large
-0001f990: 5f61 7263 290a 2020 2020 2020 2020 726f  _arc).        ro
-0001f9a0: 7461 7469 6f6e 203d 206d 6174 682e 7261  tation = math.ra
-0001f9b0: 6469 616e 7328 726f 7461 7469 6f6e 290a  dians(rotation).
-0001f9c0: 2020 2020 2020 2020 706f 7369 7469 7665          positive
-0001f9d0: 5f73 7765 6570 203d 2062 6f6f 6c28 706f  _sweep = bool(po
-0001f9e0: 7369 7469 7665 5f73 7765 6570 290a 2020  sitive_sweep).  
-0001f9f0: 2020 2020 2020 656e 6420 3d20 506f 696e        end = Poin
-0001fa00: 7428 782c 2079 290a 0a20 2020 2020 2020  t(x, y)..       
-0001fa10: 2073 656c 662e 6164 645f 7061 7468 5f65   self.add_path_e
-0001fa20: 6c65 6d65 6e74 280a 2020 2020 2020 2020  lement(.        
-0001fa30: 2020 2020 4172 6328 7261 6469 692c 2072      Arc(radii, r
-0001fa40: 6f74 6174 696f 6e2c 206c 6172 6765 5f61  otation, large_a
-0001fa50: 7263 2c20 706f 7369 7469 7665 5f73 7765  rc, positive_swe
-0001fa60: 6570 2c20 656e 6429 2c20 5f63 6f70 793d  ep, end), _copy=
-0001fa70: 4661 6c73 650a 2020 2020 2020 2020 290a  False.        ).
-0001fa80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001fa90: 656c 660a 0a20 2020 2064 6566 2061 7263  elf..    def arc
-0001faa0: 5f72 656c 6174 6976 6528 7365 6c66 2c20  _relative(self, 
-0001fab0: 7278 2c20 7279 2c20 726f 7461 7469 6f6e  rx, ry, rotation
-0001fac0: 2c20 6c61 7267 655f 6172 632c 2070 6f73  , large_arc, pos
-0001fad0: 6974 6976 655f 7377 6565 702c 2064 782c  itive_sweep, dx,
-0001fae0: 2064 7929 3a0a 2020 2020 2020 2020 2222   dy):.        ""
-0001faf0: 220a 2020 2020 2020 2020 4170 7065 6e64  ".        Append
-0001fb00: 2061 6e20 656c 6c69 7074 6963 616c 2061   an elliptical a
-0001fb10: 7263 2066 726f 6d20 7468 6520 656e 6420  rc from the end 
-0001fb20: 6f66 2074 6865 2070 7265 7669 6f75 7320  of the previous 
-0001fb30: 7061 7468 2070 6f69 6e74 2074 6f20 616e  path point to an
-0001fb40: 206f 6666 7365 740a 2020 2020 2020 2020   offset.        
-0001fb50: 706f 696e 742e 0a0a 2020 2020 2020 2020  point...        
-0001fb60: 5468 6520 6172 6320 6973 2061 7070 726f  The arc is appro
-0001fb70: 7869 6d61 7465 6420 7573 696e 6720 42c3  ximated using B.
-0001fb80: a97a 6965 7220 6375 7276 6573 2c20 736f  .zier curves, so
-0001fb90: 2069 7420 6973 206e 6f74 2070 6572 6665   it is not perfe
-0001fba0: 6374 6c79 2061 6363 7572 6174 652e 0a20  ctly accurate.. 
-0001fbb0: 2020 2020 2020 2048 6f77 6576 6572 2c20         However, 
-0001fbc0: 7468 6520 6572 726f 7220 6973 2073 6d61  the error is sma
-0001fbd0: 6c6c 2065 6e6f 7567 6820 746f 206e 6f74  ll enough to not
-0001fbe0: 2062 6520 6e6f 7469 6365 6162 6c65 2061   be noticeable a
-0001fbf0: 7420 616e 7920 7265 6173 6f6e 6162 6c65  t any reasonable
-0001fc00: 0a20 2020 2020 2020 2028 616e 6420 6576  .        (and ev
-0001fc10: 656e 206d 6f73 7420 756e 7265 6173 6f6e  en most unreason
-0001fc20: 6162 6c65 2920 7363 616c 6573 2c20 7769  able) scales, wi
-0001fc30: 7468 2061 2077 6f72 7374 2d63 6173 6520  th a worst-case 
-0001fc40: 6465 7669 6174 696f 6e20 6f66 2061 726f  deviation of aro
-0001fc50: 756e 6420 33e2 80b1 2e0a 0a20 2020 2020  und 3......     
-0001fc60: 2020 204e 6f74 6573 3a0a 2020 2020 2020     Notes:.      
-0001fc70: 2020 2020 2020 2d20 5468 6520 7369 676e        - The sign
-0001fc80: 7320 6f66 2074 6865 2072 6164 6969 2061  s of the radii a
-0001fc90: 7267 756d 656e 7473 2028 6072 7860 2061  rguments (`rx` a
-0001fca0: 6e64 2060 7279 6029 2061 7265 2069 676e  nd `ry`) are ign
-0001fcb0: 6f72 6564 2028 692e 652e 2074 6865 6972  ored (i.e. their
-0001fcc0: 0a20 2020 2020 2020 2020 2020 2020 2061  .              a
-0001fcd0: 6273 6f6c 7574 6520 7661 6c75 6573 2061  bsolute values a
-0001fce0: 7265 2075 7365 6420 696e 7374 6561 6429  re used instead)
-0001fcf0: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-0001fd00: 4966 2065 6974 6865 7220 7261 6469 7573  If either radius
-0001fd10: 2069 7320 302c 2074 6865 6e20 6120 7374   is 0, then a st
-0001fd20: 7261 6967 6874 206c 696e 6520 7769 6c6c  raight line will
-0001fd30: 2062 6520 656d 6974 7465 6420 696e 7374   be emitted inst
-0001fd40: 6561 6420 6f66 2061 6e0a 2020 2020 2020  ead of an.      
-0001fd50: 2020 2020 2020 2020 6172 632e 0a20 2020          arc..   
-0001fd60: 2020 2020 2020 2020 202d 2049 6620 7468           - If th
-0001fd70: 6520 7261 6469 6920 6172 6520 746f 6f20  e radii are too 
-0001fd80: 736d 616c 6c20 666f 7220 7468 6520 6172  small for the ar
-0001fd90: 6320 746f 2072 6561 6368 2066 726f 6d20  c to reach from 
-0001fda0: 7468 6520 6375 7272 656e 7420 706f 696e  the current poin
-0001fdb0: 7420 746f 0a20 2020 2020 2020 2020 2020  t to.           
-0001fdc0: 2020 2074 6865 2073 7065 6369 6669 6564     the specified
-0001fdd0: 2065 6e64 2070 6f69 6e74 2028 6078 6020   end point (`x` 
-0001fde0: 616e 6420 6079 6029 2c20 7468 656e 2074  and `y`), then t
-0001fdf0: 6865 7920 7769 6c6c 2062 6520 7072 6f70  hey will be prop
-0001fe00: 6f72 7469 6f6e 616c 6c79 0a20 2020 2020  ortionally.     
-0001fe10: 2020 2020 2020 2020 2073 6361 6c65 6420           scaled 
-0001fe20: 7570 2075 6e74 696c 2074 6865 7920 6172  up until they ar
-0001fe30: 6520 6269 6720 656e 6f75 6768 2c20 7768  e big enough, wh
-0001fe40: 6963 6820 7769 6c6c 2061 6c77 6179 7320  ich will always 
-0001fe50: 7265 7375 6c74 2069 6e20 610a 2020 2020  result in a.    
-0001fe60: 2020 2020 2020 2020 2020 6861 6c66 2d65            half-e
-0001fe70: 6c6c 6970 7365 2061 7263 2028 692e 652e  llipse arc (i.e.
-0001fe80: 2061 6e20 3138 3020 6465 6772 6565 2073   an 180 degree s
-0001fe90: 7765 6570 290a 0a20 2020 2020 2020 2041  weep)..        A
-0001fea0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-0001feb0: 2072 7820 284e 756d 6265 7229 3a20 7261   rx (Number): ra
-0001fec0: 6469 7573 2069 6e20 7468 6520 782d 6469  dius in the x-di
-0001fed0: 7265 6374 696f 6e2e 0a20 2020 2020 2020  rection..       
-0001fee0: 2020 2020 2072 7920 284e 756d 6265 7229       ry (Number)
-0001fef0: 3a20 7261 6469 7573 2069 6e20 7468 6520  : radius in the 
-0001ff00: 792d 6469 7265 6374 696f 6e2e 0a20 2020  y-direction..   
-0001ff10: 2020 2020 2020 2020 2072 6f74 6174 696f           rotatio
-0001ff20: 6e20 284e 756d 6265 7229 3a20 616e 676c  n (Number): angl
-0001ff30: 6520 2869 6e20 6465 6772 6565 7329 2074  e (in degrees) t
-0001ff40: 6861 7420 7468 6520 6172 6320 7368 6f75  hat the arc shou
-0001ff50: 6c64 2062 6520 726f 7461 7465 640a 2020  ld be rotated.  
-0001ff60: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-0001ff70: 6f63 6b77 6973 6520 6672 6f6d 2074 6865  ockwise from the
-0001ff80: 2070 7269 6e63 6970 6c65 2061 7865 732e   principle axes.
-0001ff90: 2054 6869 7320 7061 7261 6d65 7465 7220   This parameter 
-0001ffa0: 646f 6573 206e 6f74 2068 6176 650a 2020  does not have.  
-0001ffb0: 2020 2020 2020 2020 2020 2020 2020 6120                a 
-0001ffc0: 7669 7375 616c 2065 6666 6563 7420 696e  visual effect in
-0001ffd0: 2074 6865 2063 6173 6520 7468 6174 2060   the case that `
-0001ffe0: 7278 203d 3d20 7279 602e 0a20 2020 2020  rx == ry`..     
-0001fff0: 2020 2020 2020 206c 6172 6765 5f61 7263         large_arc
-00020000: 2028 626f 6f6c 293a 2069 6620 5472 7565   (bool): if True
-00020010: 2c20 7468 6520 6172 6320 7769 6c6c 2063  , the arc will c
-00020020: 6f76 6572 2061 2073 7765 6570 2061 6e67  over a sweep ang
-00020030: 6c65 206f 6620 6174 206c 6561 7374 2031  le of at least 1
-00020040: 3830 0a20 2020 2020 2020 2020 2020 2020  80.             
-00020050: 2020 2064 6567 7265 6573 2e20 4f74 6865     degrees. Othe
-00020060: 7277 6973 652c 2074 6865 2073 7765 6570  rwise, the sweep
-00020070: 2061 6e67 6c65 2077 696c 6c20 6265 2061   angle will be a
-00020080: 7420 6d6f 7374 2031 3830 2064 6567 7265  t most 180 degre
-00020090: 6573 2e0a 2020 2020 2020 2020 2020 2020  es..            
-000200a0: 706f 7369 7469 7665 5f73 7765 6570 2028  positive_sweep (
-000200b0: 626f 6f6c 293a 2069 6620 5472 7565 2c20  bool): if True, 
-000200c0: 7468 6520 6172 6320 7769 6c6c 2062 6520  the arc will be 
-000200d0: 7377 6570 7420 6f76 6572 2061 2070 6f73  swept over a pos
-000200e0: 6974 6976 6520 616e 676c 652c 0a20 2020  itive angle,.   
-000200f0: 2020 2020 2020 2020 2020 2020 2069 2e65               i.e
-00020100: 2e20 636c 6f63 6b77 6973 652e 204f 7468  . clockwise. Oth
-00020110: 6572 7769 7365 2c20 7468 6520 6172 6320  erwise, the arc 
-00020120: 7769 6c6c 2062 6520 7377 6570 7420 6f76  will be swept ov
-00020130: 6572 2061 206e 6567 6174 6976 650a 2020  er a negative.  
-00020140: 2020 2020 2020 2020 2020 2020 2020 616e                an
-00020150: 676c 652e 0a20 2020 2020 2020 2020 2020  gle..           
-00020160: 2064 7820 284e 756d 6265 7229 3a20 6162   dx (Number): ab
-00020170: 7363 6973 7361 206f 6620 7468 6520 6172  scissa of the ar
-00020180: 6327 7320 656e 6420 706f 696e 7420 7265  c's end point re
-00020190: 6c61 7469 7665 2074 6f20 7468 6520 656e  lative to the en
-000201a0: 6420 706f 696e 7420 6f66 0a20 2020 2020  d point of.     
-000201b0: 2020 2020 2020 2020 2020 2074 6865 2070             the p
-000201c0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
-000201d0: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
-000201e0: 2020 6479 2028 4e75 6d62 6572 293a 206f    dy (Number): o
-000201f0: 7264 696e 6174 6520 6f66 2074 6865 2061  rdinate of the a
-00020200: 7263 2773 2065 6e64 2070 6f69 6e74 2072  rc's end point r
-00020210: 656c 6174 6976 6520 746f 2074 6865 2065  elative to the e
-00020220: 6e64 2070 6f69 6e74 206f 660a 2020 2020  nd point of.    
-00020230: 2020 2020 2020 2020 2020 2020 7468 6520              the 
-00020240: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
-00020250: 656d 656e 742e 0a20 2020 2020 2020 2022  ement..        "
-00020260: 2222 0a20 2020 2020 2020 2069 6620 7278  "".        if rx
-00020270: 203d 3d20 3020 6f72 2072 7920 3d3d 2030   == 0 or ry == 0
-00020280: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00020290: 7475 726e 2073 656c 662e 6c69 6e65 5f72  turn self.line_r
-000202a0: 656c 6174 6976 6528 6478 2c20 6479 290a  elative(dx, dy).
-000202b0: 0a20 2020 2020 2020 2072 6164 6969 203d  .        radii =
-000202c0: 2050 6f69 6e74 2861 6273 2872 7829 2c20   Point(abs(rx), 
-000202d0: 6162 7328 7279 2929 0a20 2020 2020 2020  abs(ry)).       
-000202e0: 206c 6172 6765 5f61 7263 203d 2062 6f6f   large_arc = boo
-000202f0: 6c28 6c61 7267 655f 6172 6329 0a20 2020  l(large_arc).   
-00020300: 2020 2020 2072 6f74 6174 696f 6e20 3d20       rotation = 
-00020310: 6d61 7468 2e72 6164 6961 6e73 2872 6f74  math.radians(rot
-00020320: 6174 696f 6e29 0a20 2020 2020 2020 2070  ation).        p
-00020330: 6f73 6974 6976 655f 7377 6565 7020 3d20  ositive_sweep = 
-00020340: 626f 6f6c 2870 6f73 6974 6976 655f 7377  bool(positive_sw
-00020350: 6565 7029 0a20 2020 2020 2020 2065 6e64  eep).        end
-00020360: 203d 2050 6f69 6e74 2864 782c 2064 7929   = Point(dx, dy)
-00020370: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00020380: 6464 5f70 6174 685f 656c 656d 656e 7428  dd_path_element(
-00020390: 0a20 2020 2020 2020 2020 2020 2052 656c  .            Rel
-000203a0: 6174 6976 6541 7263 2872 6164 6969 2c20  ativeArc(radii, 
-000203b0: 726f 7461 7469 6f6e 2c20 6c61 7267 655f  rotation, large_
-000203c0: 6172 632c 2070 6f73 6974 6976 655f 7377  arc, positive_sw
-000203d0: 6565 702c 2065 6e64 292c 205f 636f 7079  eep, end), _copy
-000203e0: 3d46 616c 7365 0a20 2020 2020 2020 2029  =False.        )
-000203f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00020400: 7365 6c66 0a0a 2020 2020 6465 6620 636c  self..    def cl
-00020410: 6f73 6528 7365 6c66 293a 0a20 2020 2020  ose(self):.     
-00020420: 2020 2022 2222 0a20 2020 2020 2020 2045     """.        E
-00020430: 7870 6c69 6369 746c 7920 636c 6f73 6520  xplicitly close 
-00020440: 7468 6520 6375 7272 656e 7420 2873 7562  the current (sub
-00020450: 2970 6174 682e 0a20 2020 2020 2020 2022  )path..        "
-00020460: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-00020470: 6164 645f 7061 7468 5f65 6c65 6d65 6e74  add_path_element
-00020480: 2843 6c6f 7365 2829 2c20 5f63 6f70 793d  (Close(), _copy=
-00020490: 4661 6c73 6529 0a20 2020 2020 2020 2073  False).        s
-000204a0: 656c 662e 5f63 6c6f 7365 6420 3d20 5472  elf._closed = Tr
-000204b0: 7565 0a20 2020 2020 2020 2073 656c 662e  ue.        self.
-000204c0: 6d6f 7665 5f72 656c 6174 6976 6528 302c  move_relative(0,
-000204d0: 2030 290a 0a20 2020 2064 6566 205f 696e   0)..    def _in
-000204e0: 7365 7274 5f69 6d70 6c69 6369 745f 636c  sert_implicit_cl
-000204f0: 6f73 655f 6966 5f6f 7065 6e28 7365 6c66  ose_if_open(self
-00020500: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
-00020510: 7420 7365 6c66 2e5f 636c 6f73 6564 3a0a  t self._closed:.
-00020520: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00020530: 2e5f 636c 6f73 655f 636f 6e74 6578 742e  ._close_context.
-00020540: 6164 645f 6974 656d 2849 6d70 6c69 6369  add_item(Implici
-00020550: 7443 6c6f 7365 2829 2c20 5f63 6f70 793d  tClose(), _copy=
-00020560: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
-00020570: 2020 2073 656c 662e 5f63 6c6f 7365 5f63     self._close_c
-00020580: 6f6e 7465 7874 203d 2073 656c 662e 5f67  ontext = self._g
-00020590: 7261 7068 6963 735f 636f 6e74 6578 740a  raphics_context.
-000205a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000205b0: 2e5f 636c 6f73 6564 203d 2054 7275 650a  ._closed = True.
-000205c0: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
-000205d0: 0a20 2020 2020 2020 2073 656c 662c 2067  .        self, g
-000205e0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
-000205f0: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
-00020600: 6e69 7469 616c 5f70 6f69 6e74 2c20 6465  nitial_point, de
-00020610: 6275 675f 7374 7265 616d 3d4e 6f6e 652c  bug_stream=None,
-00020620: 2070 6678 3d4e 6f6e 650a 2020 2020 293a   pfx=None.    ):
-00020630: 0a20 2020 2020 2020 2073 656c 662e 5f69  .        self._i
-00020640: 6e73 6572 745f 696d 706c 6963 6974 5f63  nsert_implicit_c
-00020650: 6c6f 7365 5f69 665f 6f70 656e 2829 0a0a  lose_if_open()..
-00020660: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00020670: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
-00020680: 742c 0a20 2020 2020 2020 2020 2020 206c  t,.            l
-00020690: 6173 745f 6974 656d 2c0a 2020 2020 2020  ast_item,.      
-000206a0: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
-000206b0: 696e 742c 0a20 2020 2020 2020 2029 203d  int,.        ) =
-000206c0: 2073 656c 662e 5f72 6f6f 745f 6772 6170   self._root_grap
-000206d0: 6869 6373 5f63 6f6e 7465 7874 2e62 7569  hics_context.bui
-000206e0: 6c64 5f72 656e 6465 725f 6c69 7374 280a  ld_render_list(.
-000206f0: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-00020700: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
-00020710: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-00020720: 6961 6c5f 706f 696e 742c 2064 6562 7567  ial_point, debug
-00020730: 5f73 7472 6561 6d2c 2070 6678 0a20 2020  _stream, pfx.   
-00020740: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00020750: 7061 696e 745f 7275 6c65 203d 2047 7261  paint_rule = Gra
-00020760: 7068 6963 7353 7479 6c65 2e6d 6572 6765  phicsStyle.merge
-00020770: 2873 7479 6c65 2c20 7365 6c66 2e73 7479  (style, self.sty
-00020780: 6c65 292e 7265 736f 6c76 655f 7061 696e  le).resolve_pain
-00020790: 745f 7275 6c65 2829 0a0a 2020 2020 2020  t_rule()..      
-000207a0: 2020 7265 6e64 6572 5f6c 6973 742e 696e    render_list.in
-000207b0: 7365 7274 282d 312c 2070 6169 6e74 5f72  sert(-1, paint_r
-000207c0: 756c 652e 7661 6c75 6529 0a0a 2020 2020  ule.value)..    
-000207d0: 2020 2020 7265 7475 726e 2022 2022 2e6a      return " ".j
-000207e0: 6f69 6e28 7265 6e64 6572 5f6c 6973 7429  oin(render_list)
-000207f0: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-00020800: 7469 616c 5f70 6f69 6e74 0a0a 2020 2020  tial_point..    
-00020810: 6465 6620 7265 6e64 6572 5f64 6562 7567  def render_debug
-00020820: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-00020830: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
-00020840: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
-00020850: 696e 6974 6961 6c5f 706f 696e 742c 2064  initial_point, d
-00020860: 6562 7567 5f73 7472 6561 6d2c 2070 6678  ebug_stream, pfx
-00020870: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-00020880: 2222 220a 2020 2020 2020 2020 5265 6e64  """.        Rend
-00020890: 6572 2074 6869 7320 7061 7468 2065 6c65  er this path ele
-000208a0: 6d65 6e74 2074 6f20 6974 7320 5044 4620  ment to its PDF 
-000208b0: 7265 7072 6573 656e 7461 7469 6f6e 2061  representation a
-000208c0: 6e64 2070 726f 6475 6365 2064 6562 7567  nd produce debug
-000208d0: 0a20 2020 2020 2020 2069 6e66 6f72 6d61  .        informa
-000208e0: 7469 6f6e 2e0a 0a20 2020 2020 2020 2041  tion...        A
-000208f0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-00020900: 2067 7364 5f72 6567 6973 7472 7920 2847   gsd_registry (G
-00020910: 7261 7068 6963 7353 7461 7465 4469 6374  raphicsStateDict
-00020920: 5265 6769 7374 7279 293a 2074 6865 206f  Registry): the o
-00020930: 776e 6572 2773 2067 7261 7068 6963 7320  wner's graphics 
-00020940: 7374 6174 650a 2020 2020 2020 2020 2020  state.          
-00020950: 2020 2020 2020 6469 6374 696f 6e61 7279        dictionary
-00020960: 2072 6567 6973 7472 792e 0a20 2020 2020   registry..     
-00020970: 2020 2020 2020 2073 7479 6c65 2028 4772         style (Gr
-00020980: 6170 6869 6373 5374 796c 6529 3a20 7468  aphicsStyle): th
-00020990: 6520 6375 7272 656e 7420 7265 736f 6c76  e current resolv
-000209a0: 6564 2067 7261 7068 6963 7320 7374 796c  ed graphics styl
-000209b0: 650a 2020 2020 2020 2020 2020 2020 6c61  e.            la
-000209c0: 7374 5f69 7465 6d3a 2074 6865 2070 7265  st_item: the pre
-000209d0: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
-000209e0: 6e74 2e0a 2020 2020 2020 2020 2020 2020  nt..            
-000209f0: 696e 6974 6961 6c5f 706f 696e 743a 206c  initial_point: l
-00020a00: 6173 7420 706f 7369 7469 6f6e 2073 6574  ast position set
-00020a10: 2062 7920 6120 224d 2220 6f72 2022 6d22   by a "M" or "m"
-00020a20: 2063 6f6d 6d61 6e64 0a20 2020 2020 2020   command.       
-00020a30: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00020a40: 6d20 2869 6f2e 5465 7874 494f 293a 2074  m (io.TextIO): t
-00020a50: 6865 2073 7472 6561 6d20 746f 2077 6869  he stream to whi
-00020a60: 6368 2074 6865 2064 6562 7567 206f 7574  ch the debug out
-00020a70: 7075 7420 7368 6f75 6c64 2062 650a 2020  put should be.  
-00020a80: 2020 2020 2020 2020 2020 2020 2020 7772                wr
-00020a90: 6974 7465 6e2e 2054 6869 7320 6973 206e  itten. This is n
-00020aa0: 6f74 2067 7561 7261 6e74 6565 6420 746f  ot guaranteed to
-00020ab0: 2062 6520 7365 656b 6162 6c65 2028 652e   be seekable (e.
-00020ac0: 672e 2069 7420 6d61 7920 6265 2073 7464  g. it may be std
-00020ad0: 6f75 7420 6f72 0a20 2020 2020 2020 2020  out or.         
-00020ae0: 2020 2020 2020 2073 7464 6572 7229 2e0a         stderr)..
-00020af0: 2020 2020 2020 2020 2020 2020 7066 7820              pfx 
-00020b00: 2873 7472 293a 2074 6865 2063 7572 7265  (str): the curre
-00020b10: 6e74 2064 6562 7567 206f 7574 7075 7420  nt debug output 
-00020b20: 7072 6566 6978 2073 7472 696e 6720 286f  prefix string (o
-00020b30: 6e6c 7920 6e65 6564 6564 2069 6620 656d  nly needed if em
-00020b40: 6974 7469 6e67 0a20 2020 2020 2020 2020  itting.         
-00020b50: 2020 2020 2020 206d 6f72 6520 7468 616e         more than
-00020b60: 206f 6e65 206c 696e 6529 2e0a 0a20 2020   one line)...   
-00020b70: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00020b80: 2020 2020 2020 2020 2020 5468 6520 7361            The sa
-00020b90: 6d65 2074 7570 6c65 2061 7320 6050 6169  me tuple as `Pai
-00020ba0: 6e74 6564 5061 7468 2e72 656e 6465 7260  ntedPath.render`
-00020bb0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-00020bc0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00020bd0: 662e 7265 6e64 6572 280a 2020 2020 2020  f.render(.      
-00020be0: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-00020bf0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
-00020c00: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
-00020c10: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
-00020c20: 6d2c 2070 6678 0a20 2020 2020 2020 2029  m, pfx.        )
-00020c30: 0a0a 0a63 6c61 7373 2043 6c69 7070 696e  ...class Clippin
-00020c40: 6750 6174 6828 5061 696e 7465 6450 6174  gPath(PaintedPat
-00020c50: 6829 3a0a 2020 2020 2222 220a 2020 2020  h):.    """.    
-00020c60: 5468 6520 5061 696e 7465 6450 6174 6820  The PaintedPath 
-00020c70: 4150 4920 6275 7420 746f 2062 6520 7573  API but to be us
-00020c80: 6564 2074 6f20 6372 6561 7465 2063 6c69  ed to create cli
-00020c90: 7070 696e 6720 7061 7468 732e 0a0a 2020  pping paths...  
-00020ca0: 2020 2e2e 2077 6172 6e69 6e67 3a3a 0a20    .. warning::. 
-00020cb0: 2020 2020 2020 2055 6e6c 6573 7320 796f         Unless yo
-00020cc0: 7520 7265 616c 6c79 206b 6e6f 7720 7768  u really know wh
-00020cd0: 6174 2079 6f75 2772 6520 646f 696e 672c  at you're doing,
-00020ce0: 2063 6861 6e67 696e 6720 6174 7472 6962   changing attrib
-00020cf0: 7574 6573 206f 6620 7468 6520 636c 6970  utes of the clip
-00020d00: 7069 6e67 0a20 2020 2020 2020 2070 6174  ping.        pat
-00020d10: 6820 7374 796c 6520 6973 206c 696b 656c  h style is likel
-00020d20: 7920 746f 2070 726f 6475 6365 2075 6e65  y to produce une
-00020d30: 7870 6563 7465 6420 7265 7375 6c74 732e  xpected results.
-00020d40: 2054 6869 7320 6973 2062 6563 6175 7365   This is because
-00020d50: 2074 6865 0a20 2020 2020 2020 2063 6c69   the.        cli
-00020d60: 7070 696e 6720 7061 7468 2073 7479 6c65  pping path style
-00020d70: 7320 6f76 6572 7269 6465 2069 6d70 6c69  s override impli
-00020d80: 6369 7420 7374 796c 6520 696e 6865 7269  cit style inheri
-00020d90: 7461 6e63 6520 6f66 2074 6865 2060 5061  tance of the `Pa
-00020da0: 696e 7465 6450 6174 6860 0a20 2020 2020  intedPath`.     
-00020db0: 2020 2069 7420 6170 706c 6965 7320 746f     it applies to
-00020dc0: 2e0a 0a20 2020 2020 2020 2046 6f72 2065  ...        For e
-00020dd0: 7861 6d70 6c65 2c20 6063 6c69 7070 6174  xample, `clippat
-00020de0: 682e 7374 796c 652e 7374 726f 6b65 5f77  h.style.stroke_w
-00020df0: 6964 7468 203d 2032 6020 6361 6e20 756e  idth = 2` can un
-00020e00: 6578 7065 6374 6564 6c79 206f 7665 7272  expectedly overr
-00020e10: 6964 650a 2020 2020 2020 2020 6070 6169  ide.        `pai
-00020e20: 6e74 7061 7468 2e73 7479 6c65 2e73 7472  ntpath.style.str
-00020e30: 6f6b 655f 7769 6474 6820 3d20 4772 6170  oke_width = Grap
-00020e40: 6869 6373 5374 796c 652e 494e 4845 5249  hicsStyle.INHERI
-00020e50: 5460 2061 6e64 2063 6175 7365 2074 6865  T` and cause the
-00020e60: 2070 6169 6e74 6564 0a20 2020 2020 2020   painted.       
-00020e70: 2070 6174 6820 746f 2062 6520 7265 6e64   path to be rend
-00020e80: 6572 6564 2077 6974 6820 6120 7374 726f  ered with a stro
-00020e90: 6b65 206f 6620 3220 696e 7374 6561 6420  ke of 2 instead 
-00020ea0: 6f66 2077 6861 7420 6974 2077 6f75 6c64  of what it would
-00020eb0: 2068 6176 6520 6e6f 726d 616c 6c79 0a20   have normally. 
-00020ec0: 2020 2020 2020 2069 6e68 6572 6974 6564         inherited
-00020ed0: 2e20 4265 6361 7573 6520 6120 6043 6c69  . Because a `Cli
-00020ee0: 7070 696e 6750 6174 6860 2063 616e 2062  ppingPath` can b
-00020ef0: 6520 7061 696e 7465 6420 6c69 6b65 2061  e painted like a
-00020f00: 206e 6f72 6d61 6c20 6050 6169 6e74 6564   normal `Painted
-00020f10: 5061 7468 602c 0a20 2020 2020 2020 2069  Path`,.        i
-00020f20: 7420 776f 756c 6420 6265 206f 7665 726c  t would be overl
-00020f30: 7920 7265 7374 7269 6374 6976 6520 746f  y restrictive to
-00020f40: 2072 656d 6f76 6520 7468 6520 6162 696c   remove the abil
-00020f50: 6974 7920 746f 2073 7479 6c65 2069 742c  ity to style it,
-00020f60: 2073 6f20 696e 7374 6561 640a 2020 2020   so instead.    
-00020f70: 2020 2020 7468 6973 2077 6172 6e69 6e67      this warning
-00020f80: 2069 7320 6865 7265 2e0a 2020 2020 2222   is here..    ""
-00020f90: 220a 0a20 2020 2023 2062 6563 6175 7365  "..    # because
-00020fa0: 2063 6c69 7070 696e 6720 7061 7468 7320   clipping paths 
-00020fb0: 6361 6e20 6265 2070 6169 6e74 6564 2c20  can be painted, 
-00020fc0: 7765 2069 6e68 6572 6974 2066 726f 6d20  we inherit from 
-00020fd0: 5061 696e 7465 6450 6174 682e 2048 6f77  PaintedPath. How
-00020fe0: 6576 6572 2c20 7768 656e 0a20 2020 2023  ever, when.    #
-00020ff0: 2073 6574 7469 6e67 2074 6865 2073 7479   setting the sty
-00021000: 6c69 6e67 206f 6e20 7468 6520 636c 6970  ling on the clip
-00021010: 7069 6e67 2070 6174 682c 2074 686f 7365  ping path, those
-00021020: 2076 616c 7565 7320 7769 6c6c 2061 6c73   values will als
-00021030: 6f20 6265 2061 7070 6c69 6564 2074 6f0a  o be applied to.
-00021040: 2020 2020 2320 7468 6520 5061 696e 7465      # the Painte
-00021050: 6450 6174 6820 7468 6520 436c 6970 7069  dPath the Clippi
-00021060: 6e67 5061 7468 2069 7320 6170 706c 6965  ngPath is applie
-00021070: 6420 746f 2075 6e6c 6573 7320 7468 6579  d to unless they
-00021080: 2061 7265 2065 7870 6c69 6369 746c 7920   are explicitly 
-00021090: 7365 7420 666f 720a 2020 2020 2320 7468  set for.    # th
-000210a0: 6174 2070 6169 6e74 6564 2070 6174 682e  at painted path.
-000210b0: 2054 6869 7320 6973 206e 6f74 2069 6465   This is not ide
-000210c0: 616c 2c20 6275 7420 7468 6572 6527 7320  al, but there's 
-000210d0: 6e6f 2077 6179 2074 6f20 7265 616c 6c79  no way to really
-000210e0: 2066 6978 2069 7420 6672 6f6d 0a20 2020   fix it from.   
-000210f0: 2023 2074 6865 2050 4446 2072 656e 6465   # the PDF rende
-00021100: 7269 6e67 206d 6f64 656c 2c20 616e 6420  ring model, and 
-00021110: 7472 7969 6e67 2074 6f20 7472 6163 6b20  trying to track 
-00021120: 7468 6520 6170 7072 6f70 7269 6174 6520  the appropriate 
-00021130: 7374 6174 652f 6465 6661 756c 7473 2073  state/defaults s
-00021140: 6565 6d73 0a20 2020 2023 2073 696d 696c  eems.    # simil
-00021150: 6172 6c79 2065 7272 6f72 2070 726f 6e65  arly error prone
-00021160: 2e0a 0a20 2020 2023 2049 6e20 6765 6e65  ...    # In gene
-00021170: 7261 6c2c 2074 6865 2065 7870 6563 7461  ral, the expecta
-00021180: 7469 6f6e 2069 7320 7468 6174 2070 6169  tion is that pai
-00021190: 6e74 6564 2063 6c69 7070 696e 6720 7061  nted clipping pa
-000211a0: 7468 7320 6172 6520 6c69 6b65 6c79 2074  ths are likely t
-000211b0: 6f20 6265 2076 6572 790a 2020 2020 2320  o be very.    # 
-000211c0: 756e 636f 6d6d 6f6e 2c20 736f 2069 7427  uncommon, so it'
-000211d0: 7320 616e 2065 6467 6520 6361 7365 2074  s an edge case t
-000211e0: 6861 7420 6973 6e27 7420 776f 7274 6820  hat isn't worth 
-000211f0: 776f 7272 7969 6e67 2074 6f6f 206d 7563  worrying too muc
-00021200: 6820 6162 6f75 742e 0a0a 2020 2020 6465  h about...    de
-00021210: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00021220: 2078 3d30 2c20 793d 3029 3a0a 2020 2020   x=0, y=0):.    
-00021230: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
-00021240: 6974 5f5f 2878 3d78 2c20 793d 7929 0a20  it__(x=x, y=y). 
-00021250: 2020 2020 2020 2073 656c 662e 7061 696e         self.pain
-00021260: 745f 7275 6c65 203d 2050 6174 6850 6169  t_rule = PathPai
-00021270: 6e74 5275 6c65 2e44 4f4e 545f 5041 494e  ntRule.DONT_PAIN
-00021280: 540a 0a20 2020 2064 6566 2072 656e 6465  T..    def rende
-00021290: 7228 0a20 2020 2020 2020 2073 656c 662c  r(.        self,
-000212a0: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-000212b0: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-000212c0: 2069 6e69 7469 616c 5f70 6f69 6e74 2c20   initial_point, 
-000212d0: 6465 6275 675f 7374 7265 616d 3d4e 6f6e  debug_stream=Non
-000212e0: 652c 2070 6678 3d4e 6f6e 650a 2020 2020  e, pfx=None.    
-000212f0: 293a 0a20 2020 2020 2020 2023 2070 6169  ):.        # pai
-00021300: 6e74 696e 6720 7468 6520 636c 6970 7069  nting the clippi
-00021310: 6e67 2070 6174 6820 6f75 7473 6964 6520  ng path outside 
-00021320: 6f66 2069 7473 2072 6f6f 7420 6772 6170  of its root grap
-00021330: 6869 6373 2063 6f6e 7465 7874 2061 6c6c  hics context all
-00021340: 6f77 7320 6974 2074 6f0a 2020 2020 2020  ows it to.      
-00021350: 2020 2320 6265 2074 7261 6e73 666f 726d    # be transform
-00021360: 6564 2077 6974 686f 7574 2061 6666 6563  ed without affec
-00021370: 7469 6e67 2074 6865 2074 7261 6e73 666f  ting the transfo
-00021380: 726d 206f 6620 7468 6520 6772 6170 6869  rm of the graphi
-00021390: 6373 2063 6f6e 7465 7874 206f 6620 7468  cs context of th
-000213a0: 650a 2020 2020 2020 2020 2320 7061 7468  e.        # path
-000213b0: 2069 7420 6973 2062 6569 6e67 2075 7365   it is being use
-000213c0: 6420 746f 2063 6c69 702e 2054 6869 7320  d to clip. This 
-000213d0: 6973 2062 6563 6175 7365 2c20 756e 6c69  is because, unli
-000213e0: 6b65 2061 6c6c 206f 6620 7468 6520 6f74  ke all of the ot
-000213f0: 6865 7220 7374 796c 650a 2020 2020 2020  her style.      
-00021400: 2020 2320 7365 7474 696e 6773 2c20 7472    # settings, tr
-00021410: 616e 7366 6f72 6d61 7469 6f6e 7320 696d  ansformations im
-00021420: 6d65 6469 6174 656c 7920 6166 6665 6374  mediately affect
-00021430: 2074 6865 2070 6f69 6e74 7320 666f 6c6c   the points foll
-00021440: 6f77 696e 6720 7468 656d 2c0a 2020 2020  owing them,.    
-00021450: 2020 2020 2320 7261 7468 6572 2074 6861      # rather tha
-00021460: 6e20 6f6e 6c79 2061 6666 6563 7469 6e67  n only affecting
-00021470: 2074 6865 6d20 6174 2070 6169 6e74 696e   them at paintin
-00021480: 6720 7469 6d65 2e20 7374 726f 6b65 2073  g time. stroke s
-00021490: 6574 7469 6e67 7320 616e 6420 636f 6c6f  ettings and colo
-000214a0: 720a 2020 2020 2020 2020 2320 7365 7474  r.        # sett
-000214b0: 696e 6773 2061 7265 2061 7070 6c69 6564  ings are applied
-000214c0: 206f 6e6c 7920 6174 2070 6169 6e74 2074   only at paint t
-000214d0: 696d 652e 0a0a 2020 2020 2020 2020 6966  ime...        if
-000214e0: 2064 6562 7567 5f73 7472 6561 6d3a 0a20   debug_stream:. 
-000214f0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
-00021500: 5f73 7472 6561 6d2e 7772 6974 6528 223c  _stream.write("<
-00021510: 436c 6970 7069 6e67 5061 7468 3e20 2229  ClippingPath> ")
-00021520: 0a0a 2020 2020 2020 2020 280a 2020 2020  ..        (.    
-00021530: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
-00021540: 6973 742c 0a20 2020 2020 2020 2020 2020  ist,.           
-00021550: 206c 6173 745f 6974 656d 2c0a 2020 2020   last_item,.    
-00021560: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
-00021570: 706f 696e 742c 0a20 2020 2020 2020 2029  point,.        )
-00021580: 203d 2073 656c 662e 5f72 6f6f 745f 6772   = self._root_gr
-00021590: 6170 6869 6373 5f63 6f6e 7465 7874 2e62  aphics_context.b
-000215a0: 7569 6c64 5f72 656e 6465 725f 6c69 7374  uild_render_list
-000215b0: 280a 2020 2020 2020 2020 2020 2020 6773  (.            gs
-000215c0: 645f 7265 6769 7374 7279 2c0a 2020 2020  d_registry,.    
-000215d0: 2020 2020 2020 2020 7374 796c 652c 0a20          style,. 
-000215e0: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-000215f0: 6974 656d 2c0a 2020 2020 2020 2020 2020  item,.          
-00021600: 2020 696e 6974 6961 6c5f 706f 696e 742c    initial_point,
-00021610: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
-00021620: 7567 5f73 7472 6561 6d2c 0a20 2020 2020  ug_stream,.     
-00021630: 2020 2020 2020 2070 6678 2c0a 2020 2020         pfx,.    
-00021640: 2020 2020 2020 2020 5f70 7573 685f 7374          _push_st
-00021650: 6163 6b3d 4661 6c73 652c 0a20 2020 2020  ack=False,.     
-00021660: 2020 2029 0a0a 2020 2020 2020 2020 6d65     )..        me
-00021670: 7267 6564 5f73 7479 6c65 203d 2047 7261  rged_style = Gra
-00021680: 7068 6963 7353 7479 6c65 2e6d 6572 6765  phicsStyle.merge
-00021690: 2873 7479 6c65 2c20 7365 6c66 2e73 7479  (style, self.sty
-000216a0: 6c65 290a 2020 2020 2020 2020 2320 7765  le).        # we
-000216b0: 2073 686f 756c 6420 6e65 7665 7220 6765   should never ge
-000216c0: 7420 6120 636f 6c6c 6973 696f 6e20 6572  t a collision er
-000216d0: 726f 7220 6865 7265 0a20 2020 2020 2020  ror here.       
-000216e0: 2069 6e74 6572 7365 6374 696f 6e5f 7275   intersection_ru
-000216f0: 6c65 203d 206d 6572 6765 645f 7374 796c  le = merged_styl
-00021700: 652e 696e 7465 7273 6563 7469 6f6e 5f72  e.intersection_r
-00021710: 756c 650a 2020 2020 2020 2020 6966 2069  ule.        if i
-00021720: 6e74 6572 7365 6374 696f 6e5f 7275 6c65  ntersection_rule
-00021730: 2069 7320 6d65 7267 6564 5f73 7479 6c65   is merged_style
-00021740: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
-00021750: 2020 2020 2020 696e 7465 7273 6563 7469        intersecti
-00021760: 6f6e 5f72 756c 6520 3d20 436c 6970 7069  on_rule = Clippi
-00021770: 6e67 5061 7468 496e 7465 7273 6563 7469  ngPathIntersecti
-00021780: 6f6e 5275 6c65 2e4e 4f4e 5a45 524f 0a20  onRule.NONZERO. 
-00021790: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000217a0: 2020 2020 2020 2020 2069 6e74 6572 7365           interse
-000217b0: 6374 696f 6e5f 7275 6c65 203d 2043 6c69  ction_rule = Cli
-000217c0: 7070 696e 6750 6174 6849 6e74 6572 7365  ppingPathInterse
-000217d0: 6374 696f 6e52 756c 655b 0a20 2020 2020  ctionRule[.     
-000217e0: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
-000217f0: 7365 6374 696f 6e5f 7275 6c65 2e6e 616d  section_rule.nam
-00021800: 6520 2023 2070 796c 696e 743a 2064 6973  e  # pylint: dis
-00021810: 6162 6c65 3d6e 6f2d 6d65 6d62 6572 2c20  able=no-member, 
-00021820: 7573 656c 6573 732d 7375 7070 7265 7373  useless-suppress
-00021830: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00021840: 5d0a 0a20 2020 2020 2020 2070 6169 6e74  ]..        paint
-00021850: 5f72 756c 6520 3d20 6d65 7267 6564 5f73  _rule = merged_s
-00021860: 7479 6c65 2e72 6573 6f6c 7665 5f70 6169  tyle.resolve_pai
-00021870: 6e74 5f72 756c 6528 290a 0a20 2020 2020  nt_rule()..     
-00021880: 2020 2072 656e 6465 725f 6c69 7374 2e61     render_list.a
-00021890: 7070 656e 6428 696e 7465 7273 6563 7469  ppend(intersecti
-000218a0: 6f6e 5f72 756c 652e 7661 6c75 6529 0a20  on_rule.value). 
-000218b0: 2020 2020 2020 2072 656e 6465 725f 6c69         render_li
-000218c0: 7374 2e61 7070 656e 6428 7061 696e 745f  st.append(paint_
-000218d0: 7275 6c65 2e76 616c 7565 290a 0a20 2020  rule.value)..   
-000218e0: 2020 2020 2072 6574 7572 6e20 2220 222e       return " ".
-000218f0: 6a6f 696e 2872 656e 6465 725f 6c69 7374  join(render_list
-00021900: 292c 206c 6173 745f 6974 656d 2c20 696e  ), last_item, in
-00021910: 6974 6961 6c5f 706f 696e 740a 0a20 2020  itial_point..   
-00021920: 2064 6566 2072 656e 6465 725f 6465 6275   def render_debu
-00021930: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-00021940: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
-00021950: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
-00021960: 2069 6e69 7469 616c 5f70 6f69 6e74 2c20   initial_point, 
-00021970: 6465 6275 675f 7374 7265 616d 2c20 7066  debug_stream, pf
-00021980: 780a 2020 2020 293a 0a20 2020 2020 2020  x.    ):.       
-00021990: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
-000219a0: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
-000219b0: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
-000219c0: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
-000219d0: 616e 6420 7072 6f64 7563 6520 6465 6275  and produce debu
-000219e0: 670a 2020 2020 2020 2020 696e 666f 726d  g.        inform
-000219f0: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
-00021a00: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-00021a10: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
-00021a20: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
-00021a30: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
-00021a40: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
-00021a50: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
-00021a60: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
-00021a70: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
-00021a80: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
-00021a90: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
-00021aa0: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
-00021ab0: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
-00021ac0: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
-00021ad0: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
-00021ae0: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
-00021af0: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
-00021b00: 2064 6562 7567 5f73 7472 6561 6d20 2869   debug_stream (i
-00021b10: 6f2e 5465 7874 494f 293a 2074 6865 2073  o.TextIO): the s
-00021b20: 7472 6561 6d20 746f 2077 6869 6368 2074  tream to which t
-00021b30: 6865 2064 6562 7567 206f 7574 7075 7420  he debug output 
-00021b40: 7368 6f75 6c64 2062 650a 2020 2020 2020  should be.      
-00021b50: 2020 2020 2020 2020 2020 7772 6974 7465            writte
-00021b60: 6e2e 2054 6869 7320 6973 206e 6f74 2067  n. This is not g
-00021b70: 7561 7261 6e74 6565 6420 746f 2062 6520  uaranteed to be 
-00021b80: 7365 656b 6162 6c65 2028 652e 672e 2069  seekable (e.g. i
-00021b90: 7420 6d61 7920 6265 2073 7464 6f75 7420  t may be stdout 
-00021ba0: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
-00021bb0: 2020 2073 7464 6572 7229 2e0a 2020 2020     stderr)..    
-00021bc0: 2020 2020 2020 2020 7066 7820 2873 7472          pfx (str
-00021bd0: 293a 2074 6865 2063 7572 7265 6e74 2064  ): the current d
-00021be0: 6562 7567 206f 7574 7075 7420 7072 6566  ebug output pref
-00021bf0: 6978 2073 7472 696e 6720 286f 6e6c 7920  ix string (only 
-00021c00: 6e65 6564 6564 2069 6620 656d 6974 7469  needed if emitti
-00021c10: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-00021c20: 2020 206d 6f72 6520 7468 616e 206f 6e65     more than one
-00021c30: 206c 696e 6529 2e0a 0a20 2020 2020 2020   line)...       
-00021c40: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-00021c50: 2020 2020 2020 5468 6520 7361 6d65 2074        The same t
-00021c60: 7570 6c65 2061 7320 6043 6c69 7070 696e  uple as `Clippin
-00021c70: 6750 6174 682e 7265 6e64 6572 602e 0a20  gPath.render`.. 
-00021c80: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00021c90: 2020 2072 6574 7572 6e20 7365 6c66 2e72     return self.r
-00021ca0: 656e 6465 7228 0a20 2020 2020 2020 2020  ender(.         
-00021cb0: 2020 2067 7364 5f72 6567 6973 7472 792c     gsd_registry,
-00021cc0: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
-00021cd0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00021ce0: 2c20 6465 6275 675f 7374 7265 616d 2c20  , debug_stream, 
-00021cf0: 7066 780a 2020 2020 2020 2020 290a 0a0a  pfx.        )...
-00021d00: 636c 6173 7320 4772 6170 6869 6373 436f  class GraphicsCo
-00021d10: 6e74 6578 743a 0a20 2020 2064 6566 205f  ntext:.    def _
-00021d20: 5f69 6e69 745f 5f28 7365 6c66 293a 0a20  _init__(self):. 
-00021d30: 2020 2020 2020 2073 656c 662e 7374 796c         self.styl
-00021d40: 6520 3d20 4772 6170 6869 6373 5374 796c  e = GraphicsStyl
-00021d50: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
-00021d60: 2e70 6174 685f 6974 656d 7320 3d20 5b5d  .path_items = []
-00021d70: 0a0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00021d80: 7472 616e 7366 6f72 6d20 3d20 4e6f 6e65  transform = None
-00021d90: 0a20 2020 2020 2020 2073 656c 662e 5f63  .        self._c
-00021da0: 6c69 7070 696e 675f 7061 7468 203d 204e  lipping_path = N
-00021db0: 6f6e 650a 0a20 2020 2064 6566 205f 5f64  one..    def __d
-00021dc0: 6565 7063 6f70 795f 5f28 7365 6c66 2c20  eepcopy__(self, 
-00021dd0: 6d65 6d6f 293a 0a20 2020 2020 2020 2063  memo):.        c
-00021de0: 6f70 6965 6420 3d20 7365 6c66 2e5f 5f63  opied = self.__c
-00021df0: 6c61 7373 5f5f 2829 0a20 2020 2020 2020  lass__().       
-00021e00: 2063 6f70 6965 642e 7374 796c 6520 3d20   copied.style = 
-00021e10: 636f 7079 2e64 6565 7063 6f70 7928 7365  copy.deepcopy(se
-00021e20: 6c66 2e73 7479 6c65 2c20 6d65 6d6f 290a  lf.style, memo).
-00021e30: 2020 2020 2020 2020 636f 7069 6564 2e70          copied.p
-00021e40: 6174 685f 6974 656d 7320 3d20 636f 7079  ath_items = copy
-00021e50: 2e64 6565 7063 6f70 7928 7365 6c66 2e70  .deepcopy(self.p
-00021e60: 6174 685f 6974 656d 732c 206d 656d 6f29  ath_items, memo)
-00021e70: 0a0a 2020 2020 2020 2020 636f 7069 6564  ..        copied
-00021e80: 2e5f 7472 616e 7366 6f72 6d20 3d20 636f  ._transform = co
-00021e90: 7079 2e64 6565 7063 6f70 7928 7365 6c66  py.deepcopy(self
-00021ea0: 2e74 7261 6e73 666f 726d 2c20 6d65 6d6f  .transform, memo
-00021eb0: 290a 2020 2020 2020 2020 636f 7069 6564  ).        copied
-00021ec0: 2e5f 636c 6970 7069 6e67 5f70 6174 6820  ._clipping_path 
-00021ed0: 3d20 636f 7079 2e64 6565 7063 6f70 7928  = copy.deepcopy(
-00021ee0: 7365 6c66 2e63 6c69 7070 696e 675f 7061  self.clipping_pa
-00021ef0: 7468 2c20 6d65 6d6f 290a 0a20 2020 2020  th, memo)..     
-00021f00: 2020 2072 6574 7572 6e20 636f 7069 6564     return copied
-00021f10: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
-00021f20: 2020 2020 6465 6620 7472 616e 7366 6f72      def transfor
-00021f30: 6d28 7365 6c66 293a 0a20 2020 2020 2020  m(self):.       
-00021f40: 2072 6574 7572 6e20 7365 6c66 2e5f 7472   return self._tr
-00021f50: 616e 7366 6f72 6d0a 0a20 2020 2040 7472  ansform..    @tr
-00021f60: 616e 7366 6f72 6d2e 7365 7474 6572 0a20  ansform.setter. 
-00021f70: 2020 2064 6566 2074 7261 6e73 666f 726d     def transform
-00021f80: 2873 656c 662c 2074 6629 3a0a 2020 2020  (self, tf):.    
-00021f90: 2020 2020 7365 6c66 2e5f 7472 616e 7366      self._transf
-00021fa0: 6f72 6d20 3d20 7466 0a0a 2020 2020 4070  orm = tf..    @p
-00021fb0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-00021fc0: 636c 6970 7069 6e67 5f70 6174 6828 7365  clipping_path(se
-00021fd0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00021fe0: 5468 6520 6043 6c69 7070 696e 6750 6174  The `ClippingPat
-00021ff0: 6860 2066 6f72 2074 6869 7320 6772 6170  h` for this grap
-00022000: 6869 6373 2063 6f6e 7465 7874 2e22 2222  hics context."""
-00022010: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00022020: 7365 6c66 2e5f 636c 6970 7069 6e67 5f70  self._clipping_p
-00022030: 6174 680a 0a20 2020 2040 636c 6970 7069  ath..    @clippi
-00022040: 6e67 5f70 6174 682e 7365 7474 6572 0a20  ng_path.setter. 
-00022050: 2020 2064 6566 2063 6c69 7070 696e 675f     def clipping_
-00022060: 7061 7468 2873 656c 662c 206e 6577 5f63  path(self, new_c
-00022070: 6c69 7061 7468 293a 0a20 2020 2020 2020  lipath):.       
-00022080: 2073 656c 662e 5f63 6c69 7070 696e 675f   self._clipping_
-00022090: 7061 7468 203d 206e 6577 5f63 6c69 7061  path = new_clipa
-000220a0: 7468 0a0a 2020 2020 6465 6620 6164 645f  th..    def add_
-000220b0: 6974 656d 2873 656c 662c 2069 7465 6d2c  item(self, item,
-000220c0: 205f 636f 7079 3d54 7275 6529 3a0a 2020   _copy=True):.  
-000220d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000220e0: 2020 4164 6420 6120 7061 7468 2065 6c65    Add a path ele
-000220f0: 6d65 6e74 2074 6f20 7468 6973 2067 7261  ment to this gra
-00022100: 7068 6963 7320 636f 6e74 6578 742e 0a0a  phics context...
-00022110: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-00022120: 2020 2020 2020 2020 2020 6974 656d 3a20            item: 
-00022130: 7468 6520 7061 7468 2065 6c65 6d65 6e74  the path element
-00022140: 2074 6f20 6164 642e 204d 6179 2062 6520   to add. May be 
-00022150: 6120 7072 696d 6974 6976 6520 656c 656d  a primitive elem
-00022160: 656e 7420 6f72 2061 6e6f 7468 6572 0a20  ent or another. 
-00022170: 2020 2020 2020 2020 2020 2020 2020 2060                 `
-00022180: 4772 6170 6869 6373 436f 6e74 6578 7460  GraphicsContext`
-00022190: 206f 7220 6120 6050 6169 6e74 6564 5061   or a `PaintedPa
-000221a0: 7468 602e 0a20 2020 2020 2020 2020 2020  th`..           
-000221b0: 205f 636f 7079 2028 626f 6f6c 293a 2069   _copy (bool): i
-000221c0: 6620 7472 7565 2028 7468 6520 6465 6661  f true (the defa
-000221d0: 756c 7429 2c20 7468 6520 6974 656d 2077  ult), the item w
-000221e0: 696c 6c20 6265 2063 6f70 6965 6420 6265  ill be copied be
-000221f0: 666f 7265 2062 6569 6e67 0a20 2020 2020  fore being.     
-00022200: 2020 2020 2020 2020 2020 2061 7070 656e             appen
-00022210: 6465 642e 2054 6869 7320 7072 6576 656e  ded. This preven
-00022220: 7473 206d 6f64 6966 6963 6174 696f 6e73  ts modifications
-00022230: 2074 6f20 6120 7265 6665 7265 6e63 6564   to a referenced
-00022240: 206f 626a 6563 7420 6672 6f6d 0a20 2020   object from.   
-00022250: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-00022260: 7472 6f61 6374 6976 656c 7922 2061 6c74  troactively" alt
-00022270: 6572 696e 6720 6974 7320 7374 796c 652f  ering its style/
-00022280: 7368 6170 6520 616e 6420 7368 6f75 6c64  shape and should
-00022290: 2062 6520 6469 7361 626c 6564 2077 6974   be disabled wit
-000222a0: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
-000222b0: 2020 6361 7574 696f 6e2e 0a20 2020 2020    caution..     
-000222c0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-000222d0: 6620 5f63 6f70 793a 0a20 2020 2020 2020  f _copy:.       
-000222e0: 2020 2020 2069 7465 6d20 3d20 636f 7079       item = copy
-000222f0: 2e64 6565 7063 6f70 7928 6974 656d 290a  .deepcopy(item).
-00022300: 0a20 2020 2020 2020 2073 656c 662e 7061  .        self.pa
-00022310: 7468 5f69 7465 6d73 2e61 7070 656e 6428  th_items.append(
-00022320: 6974 656d 290a 0a20 2020 2064 6566 2072  item)..    def r
-00022330: 656d 6f76 655f 6c61 7374 5f69 7465 6d28  emove_last_item(
-00022340: 7365 6c66 293a 0a20 2020 2020 2020 2064  self):.        d
-00022350: 656c 2073 656c 662e 7061 7468 5f69 7465  el self.path_ite
-00022360: 6d73 5b2d 315d 0a0a 2020 2020 6465 6620  ms[-1]..    def 
-00022370: 6d65 7267 6528 7365 6c66 2c20 6f74 6865  merge(self, othe
-00022380: 725f 636f 6e74 6578 7429 3a0a 2020 2020  r_context):.    
-00022390: 2020 2020 2222 2243 6f70 7920 616e 6f74      """Copy anot
-000223a0: 6865 7220 6047 7261 7068 6963 7343 6f6e  her `GraphicsCon
-000223b0: 7465 7874 6027 7320 7061 7468 2069 7465  text`'s path ite
-000223c0: 6d73 2069 6e74 6f20 7468 6973 206f 6e65  ms into this one
-000223d0: 2e22 2222 0a20 2020 2020 2020 2073 656c  .""".        sel
-000223e0: 662e 7061 7468 5f69 7465 6d73 2e65 7874  f.path_items.ext
-000223f0: 656e 6428 6f74 6865 725f 636f 6e74 6578  end(other_contex
-00022400: 742e 7061 7468 5f69 7465 6d73 290a 0a20  t.path_items).. 
-00022410: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
-00022420: 6d65 6e74 0a20 2020 2064 6566 2062 7569  ment.    def bui
-00022430: 6c64 5f72 656e 6465 725f 6c69 7374 280a  ld_render_list(.
-00022440: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00022450: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-00022460: 7279 2c0a 2020 2020 2020 2020 7374 796c  ry,.        styl
-00022470: 652c 0a20 2020 2020 2020 206c 6173 745f  e,.        last_
-00022480: 6974 656d 2c0a 2020 2020 2020 2020 696e  item,.        in
-00022490: 6974 6961 6c5f 706f 696e 742c 0a20 2020  itial_point,.   
-000224a0: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-000224b0: 6d3d 4e6f 6e65 2c0a 2020 2020 2020 2020  m=None,.        
-000224c0: 7066 783d 4e6f 6e65 2c0a 2020 2020 2020  pfx=None,.      
-000224d0: 2020 5f70 7573 685f 7374 6163 6b3d 5472    _push_stack=Tr
-000224e0: 7565 2c0a 2020 2020 293a 0a20 2020 2020  ue,.    ):.     
-000224f0: 2020 2022 2222 0a20 2020 2020 2020 2042     """.        B
-00022500: 7569 6c64 2061 206c 6973 7420 636f 6d70  uild a list comp
-00022510: 6f73 6564 206f 6620 616c 6c20 616c 6c20  osed of all all 
-00022520: 7468 6520 696e 6469 7669 6475 616c 2065  the individual e
-00022530: 6c65 6d65 6e74 7320 7265 6e64 6572 6564  lements rendered
-00022540: 2e0a 0a20 2020 2020 2020 2054 6869 7320  ...        This 
-00022550: 6973 2075 7365 6420 6279 2060 5061 696e  is used by `Pain
-00022560: 7465 6450 6174 6860 2061 6e64 2060 436c  tedPath` and `Cl
-00022570: 6970 7069 6e67 5061 7468 6020 746f 2072  ippingPath` to r
-00022580: 6575 7365 2074 6865 2060 4772 6170 6869  euse the `Graphi
-00022590: 6373 436f 6e74 6578 7460 0a20 2020 2020  csContext`.     
-000225a0: 2020 2072 656e 6465 7269 6e67 2070 726f     rendering pro
-000225b0: 6365 7373 2077 6869 6c65 2073 7469 6c6c  cess while still
-000225c0: 2062 6569 6e67 2061 626c 6520 746f 2069   being able to i
-000225d0: 6e6a 6563 7420 736f 6d65 2070 6174 6820  nject some path 
-000225e0: 7370 6563 6966 6963 2069 7465 6d73 0a20  specific items. 
-000225f0: 2020 2020 2020 2028 652e 672e 2074 6865         (e.g. the
-00022600: 2070 6169 6e74 696e 6720 6469 7265 6374   painting direct
-00022610: 6976 6529 2062 6566 6f72 6520 7468 6520  ive) before the 
-00022620: 7265 6e64 6572 2069 7320 636f 6c6c 6170  render is collap
-00022630: 7365 6420 696e 746f 2061 2073 696e 676c  sed into a singl
-00022640: 650a 2020 2020 2020 2020 7374 7269 6e67  e.        string
-00022650: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-00022660: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
-00022670: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
-00022680: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
-00022690: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
-000226a0: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
-000226b0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000226c0: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
-000226d0: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
-000226e0: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
-000226f0: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
-00022700: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
-00022710: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
-00022720: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
-00022730: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
-00022740: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
-00022750: 2020 2020 2020 2020 2020 2020 696e 6974              init
-00022760: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
-00022770: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
-00022780: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
-00022790: 6d61 6e64 0a20 2020 2020 2020 2020 2020  mand.           
-000227a0: 2064 6562 7567 5f73 7472 6561 6d20 2869   debug_stream (i
-000227b0: 6f2e 5465 7874 494f 293a 2074 6865 2073  o.TextIO): the s
-000227c0: 7472 6561 6d20 746f 2077 6869 6368 2074  tream to which t
-000227d0: 6865 2064 6562 7567 206f 7574 7075 7420  he debug output 
-000227e0: 7368 6f75 6c64 2062 650a 2020 2020 2020  should be.      
-000227f0: 2020 2020 2020 2020 2020 7772 6974 7465            writte
-00022800: 6e2e 2054 6869 7320 6973 206e 6f74 2067  n. This is not g
-00022810: 7561 7261 6e74 6565 6420 746f 2062 6520  uaranteed to be 
-00022820: 7365 656b 6162 6c65 2028 652e 672e 2069  seekable (e.g. i
-00022830: 7420 6d61 7920 6265 2073 7464 6f75 7420  t may be stdout 
-00022840: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
-00022850: 2020 2073 7464 6572 7229 2e0a 2020 2020     stderr)..    
-00022860: 2020 2020 2020 2020 7066 7820 2873 7472          pfx (str
-00022870: 293a 2074 6865 2063 7572 7265 6e74 2064  ): the current d
-00022880: 6562 7567 206f 7574 7075 7420 7072 6566  ebug output pref
-00022890: 6978 2073 7472 696e 6720 286f 6e6c 7920  ix string (only 
-000228a0: 6e65 6564 6564 2069 6620 656d 6974 7469  needed if emitti
-000228b0: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-000228c0: 2020 206d 6f72 6520 7468 616e 206f 6e65     more than one
-000228d0: 206c 696e 6529 2e0a 2020 2020 2020 2020   line)..        
-000228e0: 2020 2020 5f70 7573 685f 7374 6163 6b20      _push_stack 
-000228f0: 2862 6f6f 6c29 3a20 6966 2054 7275 652c  (bool): if True,
-00022900: 2077 7261 7020 7468 6520 7265 7375 6c74   wrap the result
-00022910: 696e 6720 7265 6e64 6572 206c 6973 7420  ing render list 
-00022920: 696e 2061 2070 7573 682f 706f 700a 2020  in a push/pop.  
-00022930: 2020 2020 2020 2020 2020 2020 2020 6772                gr
-00022940: 6170 6869 6373 2073 7461 636b 2064 6972  aphics stack dir
-00022950: 6563 7469 7665 2070 6169 722e 0a0a 2020  ective pair...  
-00022960: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
-00022970: 2020 2020 2020 2020 2020 2060 7475 706c             `tupl
-00022980: 655b 6c69 7374 5b73 7472 5d2c 206c 6173  e[list[str], las
-00022990: 745f 6974 656d 5d60 2077 6865 7265 2060  t_item]` where `
-000229a0: 6c61 7374 5f69 7465 6d60 2069 7320 7468  last_item` is th
-000229b0: 6520 7061 7374 2070 6174 6820 656c 656d  e past path elem
-000229c0: 656e 7420 696e 0a20 2020 2020 2020 2020  ent in.         
-000229d0: 2020 2074 6869 7320 6047 7261 7068 6963     this `Graphic
-000229e0: 7343 6f6e 7465 7874 600a 2020 2020 2020  sContext`.      
-000229f0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-00022a00: 6e64 6572 5f6c 6973 7420 3d20 5b5d 0a0a  nder_list = []..
-00022a10: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00022a20: 7061 7468 5f69 7465 6d73 3a0a 2020 2020  path_items:.    
-00022a30: 2020 2020 2020 2020 6966 2064 6562 7567          if debug
-00022a40: 5f73 7472 6561 6d20 6973 206e 6f74 204e  _stream is not N
-00022a50: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00022a60: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00022a70: 6d2e 7772 6974 6528 6622 7b73 656c 662e  m.write(f"{self.
-00022a80: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
-00022a90: 5f5f 7d22 290a 0a20 2020 2020 2020 2020  __}")..         
-00022aa0: 2020 206d 6572 6765 645f 7374 796c 6520     merged_style 
-00022ab0: 3d20 7374 796c 652e 5f5f 636c 6173 735f  = style.__class_
-00022ac0: 5f2e 6d65 7267 6528 7374 796c 652c 2073  _.merge(style, s
-00022ad0: 656c 662e 7374 796c 6529 0a0a 2020 2020  elf.style)..    
-00022ae0: 2020 2020 2020 2020 6966 2064 6562 7567          if debug
-00022af0: 5f73 7472 6561 6d20 6973 206e 6f74 204e  _stream is not N
-00022b00: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00022b10: 2020 2020 2069 6620 7365 6c66 2e5f 7472       if self._tr
-00022b20: 616e 7366 6f72 6d3a 0a20 2020 2020 2020  ansform:.       
-00022b30: 2020 2020 2020 2020 2020 2020 2064 6562               deb
-00022b40: 7567 5f73 7472 6561 6d2e 7772 6974 6528  ug_stream.write(
-00022b50: 6622 287b 7365 6c66 2e5f 7472 616e 7366  f"({self._transf
-00022b60: 6f72 6d7d 2922 290a 0a20 2020 2020 2020  orm})")..       
-00022b70: 2020 2020 2020 2020 2073 7479 6c65 735f           styles_
-00022b80: 6462 6720 3d20 5b5d 0a20 2020 2020 2020  dbg = [].       
-00022b90: 2020 2020 2020 2020 2066 6f72 2061 7474           for att
-00022ba0: 7220 696e 206d 6572 6765 645f 7374 796c  r in merged_styl
-00022bb0: 652e 4d45 5247 455f 5052 4f50 4552 5449  e.MERGE_PROPERTI
-00022bc0: 4553 3a0a 2020 2020 2020 2020 2020 2020  ES:.            
-00022bd0: 2020 2020 2020 2020 7661 6c20 3d20 6765          val = ge
-00022be0: 7461 7474 7228 6d65 7267 6564 5f73 7479  tattr(merged_sty
-00022bf0: 6c65 2c20 6174 7472 290a 2020 2020 2020  le, attr).      
-00022c00: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00022c10: 2076 616c 2069 7320 6e6f 7420 6d65 7267   val is not merg
-00022c20: 6564 5f73 7479 6c65 2e49 4e48 4552 4954  ed_style.INHERIT
-00022c30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00022c40: 2020 2020 2020 2020 2020 6966 2067 6574            if get
-00022c50: 6174 7472 2873 656c 662e 7374 796c 652c  attr(self.style,
-00022c60: 2061 7474 7229 2069 7320 6d65 7267 6564   attr) is merged
-00022c70: 5f73 7479 6c65 2e49 4e48 4552 4954 3a0a  _style.INHERIT:.
-00022c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022c90: 2020 2020 2020 2020 2020 2020 696e 6820              inh 
-00022ca0: 3d20 2220 2869 6e68 6572 6974 6564 2922  = " (inherited)"
-00022cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022cc0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00022cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ce0: 2020 2020 2020 2020 2020 2069 6e68 203d             inh =
-00022cf0: 2022 220a 0a20 2020 2020 2020 2020 2020   ""..           
-00022d00: 2020 2020 2020 2020 2020 2020 2073 7479               sty
-00022d10: 6c65 735f 6462 672e 6170 7065 6e64 2866  les_dbg.append(f
-00022d20: 227b 6174 7472 7d3a 207b 7661 6c7d 7b69  "{attr}: {val}{i
-00022d30: 6e68 7d22 290a 0a20 2020 2020 2020 2020  nh}")..         
-00022d40: 2020 2020 2020 2069 6620 7374 796c 6573         if styles
-00022d50: 5f64 6267 3a0a 2020 2020 2020 2020 2020  _dbg:.          
-00022d60: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
-00022d70: 7374 7265 616d 2e77 7269 7465 2822 207b  stream.write(" {
-00022d80: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
-00022d90: 2020 2020 2020 2020 2066 6f72 2073 7479           for sty
-00022da0: 6c65 5f64 6267 5f6c 696e 6520 696e 2073  le_dbg_line in s
-00022db0: 7479 6c65 735f 6462 673a 0a20 2020 2020  tyles_dbg:.     
-00022dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022dd0: 2020 2064 6562 7567 5f73 7472 6561 6d2e     debug_stream.
-00022de0: 7772 6974 6528 7066 7820 2b20 2220 2020  write(pfx + "   
-00022df0: 2022 290a 2020 2020 2020 2020 2020 2020   ").            
-00022e00: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-00022e10: 675f 7374 7265 616d 2e77 7269 7465 2873  g_stream.write(s
-00022e20: 7479 6c65 5f64 6267 5f6c 696e 6529 0a20  tyle_dbg_line). 
-00022e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022e40: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
-00022e50: 6561 6d2e 7772 6974 6528 225c 6e22 290a  eam.write("\n").
-00022e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022e70: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
-00022e80: 6d2e 7772 6974 6528 7066 7820 2b20 227d  m.write(pfx + "}
-00022e90: e294 905c 6e22 290a 2020 2020 2020 2020  ...\n").        
-00022ea0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00022eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ec0: 2020 6465 6275 675f 7374 7265 616d 2e77    debug_stream.w
-00022ed0: 7269 7465 2822 5c6e 2229 0a0a 2020 2020  rite("\n")..    
-00022ee0: 2020 2020 2020 2020 4e4f 5f45 4d49 545f          NO_EMIT_
-00022ef0: 5345 5420 3d20 7b4e 6f6e 652c 206d 6572  SET = {None, mer
-00022f00: 6765 645f 7374 796c 652e 494e 4845 5249  ged_style.INHERI
-00022f10: 547d 0a0a 2020 2020 2020 2020 2020 2020  T}..            
-00022f20: 656d 6974 5f73 7479 6c65 203d 2073 656c  emit_style = sel
-00022f30: 662e 7374 796c 650a 2020 2020 2020 2020  f.style.        
-00022f40: 2020 2020 6966 206d 6572 6765 645f 7374      if merged_st
-00022f50: 796c 652e 616c 6c6f 775f 7472 616e 7370  yle.allow_transp
-00022f60: 6172 656e 6379 2021 3d20 7365 6c66 2e73  arency != self.s
-00022f70: 7479 6c65 2e61 6c6c 6f77 5f74 7261 6e73  tyle.allow_trans
-00022f80: 7061 7265 6e63 793a 0a20 2020 2020 2020  parency:.       
-00022f90: 2020 2020 2020 2020 2065 6d69 745f 7374           emit_st
-00022fa0: 796c 6520 3d20 636f 7079 2e64 6565 7063  yle = copy.deepc
-00022fb0: 6f70 7928 7365 6c66 2e73 7479 6c65 290a  opy(self.style).
-00022fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022fd0: 656d 6974 5f73 7479 6c65 2e61 6c6c 6f77  emit_style.allow
-00022fe0: 5f74 7261 6e73 7061 7265 6e63 7920 3d20  _transparency = 
-00022ff0: 6d65 7267 6564 5f73 7479 6c65 2e61 6c6c  merged_style.all
-00023000: 6f77 5f74 7261 6e73 7061 7265 6e63 790a  ow_transparency.
-00023010: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
-00023020: 6e20 6f72 6465 7220 746f 2064 6563 6f75  n order to decou
-00023030: 706c 6520 7468 6520 6461 7368 2070 6174  ple the dash pat
-00023040: 7465 726e 2061 6e64 2074 6865 2064 6173  tern and the das
-00023050: 6820 7068 6173 6520 6174 2074 6865 2041  h phase at the A
-00023060: 5049 206c 6179 6572 2c0a 2020 2020 2020  PI layer,.      
-00023070: 2020 2020 2020 2320 7765 2068 6176 6520        # we have 
-00023080: 746f 2070 6572 666f 726d 2061 6464 6974  to perform addit
-00023090: 696f 6e61 6c20 6c6f 6769 6320 6865 7265  ional logic here
-000230a0: 2074 6f20 7265 636f 6d62 696e 6520 7468   to recombine th
-000230b0: 656d 2e20 5765 2063 616e 2072 656c 790a  em. We can rely.
-000230c0: 2020 2020 2020 2020 2020 2020 2320 6f6e              # on
-000230d0: 2074 6865 7365 2062 6569 6e67 2073 6572   these being ser
-000230e0: 6961 6c69 7a61 626c 6520 6265 6361 7573  ializable becaus
-000230f0: 6520 7765 2061 6c77 6179 7320 6765 7420  e we always get 
-00023100: 6120 7361 6e65 2073 7479 6c65 206f 6e20  a sane style on 
-00023110: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
-00023120: 2320 6472 6177 696e 6720 636f 6e74 6578  # drawing contex
-00023130: 742e 0a20 2020 2020 2020 2020 2020 2064  t..            d
-00023140: 6173 685f 7061 7474 6572 6e20 3d20 6d65  ash_pattern = me
-00023150: 7267 6564 5f73 7479 6c65 2e73 7472 6f6b  rged_style.strok
-00023160: 655f 6461 7368 5f70 6174 7465 726e 0a20  e_dash_pattern. 
-00023170: 2020 2020 2020 2020 2020 2064 6173 685f             dash_
-00023180: 7068 6173 6520 3d20 6d65 7267 6564 5f73  phase = merged_s
-00023190: 7479 6c65 2e73 7472 6f6b 655f 6461 7368  tyle.stroke_dash
-000231a0: 5f70 6861 7365 0a20 2020 2020 2020 2020  _phase.         
-000231b0: 2020 2069 6620 2864 6173 685f 7061 7474     if (dash_patt
-000231c0: 6572 6e20 213d 2073 7479 6c65 2e73 7472  ern != style.str
-000231d0: 6f6b 655f 6461 7368 5f70 6174 7465 726e  oke_dash_pattern
-000231e0: 2920 6f72 2028 0a20 2020 2020 2020 2020  ) or (.         
-000231f0: 2020 2020 2020 2064 6173 685f 7068 6173         dash_phas
-00023200: 6520 213d 2073 7479 6c65 2e73 7472 6f6b  e != style.strok
-00023210: 655f 6461 7368 5f70 6861 7365 0a20 2020  e_dash_phase.   
-00023220: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
-00023230: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00023240: 6d69 745f 7374 796c 6520 6973 2073 656c  mit_style is sel
-00023250: 662e 7374 796c 653a 0a20 2020 2020 2020  f.style:.       
-00023260: 2020 2020 2020 2020 2020 2020 2065 6d69               emi
-00023270: 745f 7374 796c 6520 3d20 636f 7079 2e64  t_style = copy.d
-00023280: 6565 7063 6f70 7928 656d 6974 5f73 7479  eepcopy(emit_sty
-00023290: 6c65 290a 2020 2020 2020 2020 2020 2020  le).            
-000232a0: 2020 2020 656d 6974 5f73 7479 6c65 2e73      emit_style.s
-000232b0: 7472 6f6b 655f 6461 7368 5f70 6174 7465  troke_dash_patte
-000232c0: 726e 203d 2064 6173 685f 7061 7474 6572  rn = dash_patter
-000232d0: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-000232e0: 2020 656d 6974 5f73 7479 6c65 2e73 7472    emit_style.str
-000232f0: 6f6b 655f 6461 7368 5f70 6861 7365 203d  oke_dash_phase =
-00023300: 2064 6173 685f 7068 6173 650a 0a20 2020   dash_phase..   
-00023310: 2020 2020 2020 2020 2020 2020 2065 6d69               emi
-00023320: 745f 6461 7368 203d 2028 6461 7368 5f70  t_dash = (dash_p
-00023330: 6174 7465 726e 2c20 6461 7368 5f70 6861  attern, dash_pha
-00023340: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-00023350: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00023360: 2020 2020 2020 656d 6974 5f64 6173 6820        emit_dash 
-00023370: 3d20 4e6f 6e65 0a0a 2020 2020 2020 2020  = None..        
-00023380: 2020 2020 7374 796c 655f 6469 6374 5f6e      style_dict_n
-00023390: 616d 6520 3d20 6773 645f 7265 6769 7374  ame = gsd_regist
-000233a0: 7279 2e72 6567 6973 7465 725f 7374 796c  ry.register_styl
-000233b0: 6528 656d 6974 5f73 7479 6c65 290a 0a20  e(emit_style).. 
-000233c0: 2020 2020 2020 2020 2020 2069 6620 7374             if st
-000233d0: 796c 655f 6469 6374 5f6e 616d 6520 6973  yle_dict_name is
-000233e0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000233f0: 2020 2020 2020 2020 2020 2072 656e 6465             rende
-00023400: 725f 6c69 7374 2e61 7070 656e 6428 6622  r_list.append(f"
-00023410: 7b72 656e 6465 725f 7064 665f 7072 696d  {render_pdf_prim
-00023420: 6974 6976 6528 7374 796c 655f 6469 6374  itive(style_dict
-00023430: 5f6e 616d 6529 7d20 6773 2229 0a0a 2020  _name)} gs")..  
-00023440: 2020 2020 2020 2020 2020 2320 7765 2063            # we c
-00023450: 616e 2774 2073 6574 2063 6f6c 6f72 2069  an't set color i
-00023460: 6e20 7468 6520 6772 6170 6869 6373 2073  n the graphics s
-00023470: 7461 7465 2063 6f6e 7465 7874 2064 6963  tate context dic
-00023480: 7469 6f6e 6172 792c 2073 6f20 7765 2068  tionary, so we h
-00023490: 6176 6520 746f 0a20 2020 2020 2020 2020  ave to.         
-000234a0: 2020 2023 206d 616e 7561 6c6c 7920 696e     # manually in
-000234b0: 6865 7269 7420 6974 2061 6e64 2065 6d69  herit it and emi
-000234c0: 7420 6974 2068 6572 652e 0a20 2020 2020  t it here..     
-000234d0: 2020 2020 2020 2066 696c 6c5f 636f 6c6f         fill_colo
-000234e0: 7220 3d20 7365 6c66 2e73 7479 6c65 2e66  r = self.style.f
-000234f0: 696c 6c5f 636f 6c6f 720a 2020 2020 2020  ill_color.      
-00023500: 2020 2020 2020 7374 726f 6b65 5f63 6f6c        stroke_col
-00023510: 6f72 203d 2073 656c 662e 7374 796c 652e  or = self.style.
-00023520: 7374 726f 6b65 5f63 6f6c 6f72 0a0a 2020  stroke_color..  
-00023530: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
-00023540: 6c5f 636f 6c6f 7220 6e6f 7420 696e 204e  l_color not in N
-00023550: 4f5f 454d 4954 5f53 4554 3a0a 2020 2020  O_EMIT_SET:.    
-00023560: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
-00023570: 6572 5f6c 6973 742e 6170 7065 6e64 2866  er_list.append(f
-00023580: 696c 6c5f 636f 6c6f 722e 7365 7269 616c  ill_color.serial
-00023590: 697a 6528 292e 6c6f 7765 7228 2929 0a0a  ize().lower())..
-000235a0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-000235b0: 7472 6f6b 655f 636f 6c6f 7220 6e6f 7420  troke_color not 
-000235c0: 696e 204e 4f5f 454d 4954 5f53 4554 3a0a  in NO_EMIT_SET:.
-000235d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000235e0: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
-000235f0: 6e64 2873 7472 6f6b 655f 636f 6c6f 722e  nd(stroke_color.
-00023600: 7365 7269 616c 697a 6528 292e 7570 7065  serialize().uppe
-00023610: 7228 2929 0a0a 2020 2020 2020 2020 2020  r())..          
-00023620: 2020 6966 2065 6d69 745f 6461 7368 2069    if emit_dash i
-00023630: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00023640: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
-00023650: 6572 5f6c 6973 742e 6170 7065 6e64 280a  er_list.append(.
-00023660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023670: 2020 2020 7265 6e64 6572 5f70 6466 5f70      render_pdf_p
-00023680: 7269 6d69 7469 7665 2865 6d69 745f 6461  rimitive(emit_da
-00023690: 7368 5b30 5d29 0a20 2020 2020 2020 2020  sh[0]).         
-000236a0: 2020 2020 2020 2020 2020 202b 2066 2220             + f" 
-000236b0: 7b6e 756d 6265 725f 746f 5f73 7472 2865  {number_to_str(e
-000236c0: 6d69 745f 6461 7368 5b31 5d29 7d20 6422  mit_dash[1])} d"
-000236d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000236e0: 2029 0a0a 2020 2020 2020 2020 2020 2020   )..            
-000236f0: 6966 2064 6562 7567 5f73 7472 6561 6d3a  if debug_stream:
-00023700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023710: 2069 6620 7365 6c66 2e63 6c69 7070 696e   if self.clippin
-00023720: 675f 7061 7468 2069 7320 6e6f 7420 4e6f  g_path is not No
-00023730: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00023740: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
-00023750: 7265 616d 2e77 7269 7465 2870 6678 202b  ream.write(pfx +
-00023760: 2022 20e2 949c e294 8020 2229 0a20 2020   " ...... ").   
-00023770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023780: 2072 656e 6465 7265 645f 6370 6174 682c   rendered_cpath,
-00023790: 205f 2c20 5f5f 203d 2073 656c 662e 636c   _, __ = self.cl
-000237a0: 6970 7069 6e67 5f70 6174 682e 7265 6e64  ipping_path.rend
-000237b0: 6572 5f64 6562 7567 280a 2020 2020 2020  er_debug(.      
-000237c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000237d0: 2020 6773 645f 7265 6769 7374 7279 2c0a    gsd_registry,.
-000237e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000237f0: 2020 2020 2020 2020 6d65 7267 6564 5f73          merged_s
-00023800: 7479 6c65 2c0a 2020 2020 2020 2020 2020  tyle,.          
-00023810: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-00023820: 7374 5f69 7465 6d2c 0a20 2020 2020 2020  st_item,.       
-00023830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023840: 2069 6e69 7469 616c 5f70 6f69 6e74 2c0a   initial_point,.
-00023850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023860: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
-00023870: 7265 616d 2c0a 2020 2020 2020 2020 2020  ream,.          
-00023880: 2020 2020 2020 2020 2020 2020 2020 7066                pf
-00023890: 7820 2b20 2220 e294 8220 2022 2c0a 2020  x + " ...  ",.  
-000238a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000238b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000238c0: 2020 2020 2020 2020 6966 2072 656e 6465          if rende
-000238d0: 7265 645f 6370 6174 683a 0a20 2020 2020  red_cpath:.     
-000238e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000238f0: 2020 2072 656e 6465 725f 6c69 7374 2e61     render_list.a
-00023900: 7070 656e 6428 7265 6e64 6572 6564 5f63  ppend(rendered_c
-00023910: 7061 7468 290a 0a20 2020 2020 2020 2020  path)..         
-00023920: 2020 2020 2020 2066 6f72 2069 7465 6d20         for item 
-00023930: 696e 2073 656c 662e 7061 7468 5f69 7465  in self.path_ite
-00023940: 6d73 5b3a 2d31 5d3a 0a20 2020 2020 2020  ms[:-1]:.       
-00023950: 2020 2020 2020 2020 2020 2020 2064 6562               deb
-00023960: 7567 5f73 7472 6561 6d2e 7772 6974 6528  ug_stream.write(
-00023970: 7066 7820 2b20 2220 e294 9ce2 9480 2022  pfx + " ...... "
-00023980: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00023990: 2020 2020 2020 7265 6e64 6572 6564 2c20        rendered, 
-000239a0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
-000239b0: 616c 5f70 6f69 6e74 203d 2069 7465 6d2e  al_point = item.
-000239c0: 7265 6e64 6572 5f64 6562 7567 280a 2020  render_debug(.  
-000239d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000239e0: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
-000239f0: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-00023a00: 2020 2020 2020 2020 2020 2020 6d65 7267              merg
-00023a10: 6564 5f73 7479 6c65 2c0a 2020 2020 2020  ed_style,.      
-00023a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a30: 2020 6c61 7374 5f69 7465 6d2c 0a20 2020    last_item,.   
-00023a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a50: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-00023a60: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-00023a70: 2020 2020 2020 2020 2020 2020 6465 6275              debu
-00023a80: 675f 7374 7265 616d 2c0a 2020 2020 2020  g_stream,.      
-00023a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023aa0: 2020 7066 7820 2b20 2220 e294 8220 2022    pfx + " ...  "
-00023ab0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00023ac0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00023ad0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00023ae0: 7265 6e64 6572 6564 3a0a 2020 2020 2020  rendered:.      
-00023af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023b00: 2020 7265 6e64 6572 5f6c 6973 742e 6170    render_list.ap
-00023b10: 7065 6e64 2872 656e 6465 7265 6429 0a0a  pend(rendered)..
-00023b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023b30: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
-00023b40: 7465 2870 6678 202b 2022 20e2 9494 e294  te(pfx + " .....
-00023b50: 8020 2229 0a20 2020 2020 2020 2020 2020  . ").           
-00023b60: 2020 2020 2072 656e 6465 7265 642c 206c       rendered, l
-00023b70: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
-00023b80: 6c5f 706f 696e 7420 3d20 7365 6c66 2e70  l_point = self.p
-00023b90: 6174 685f 6974 656d 735b 2d31 5d2e 7265  ath_items[-1].re
-00023ba0: 6e64 6572 5f64 6562 7567 280a 2020 2020  nder_debug(.    
-00023bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023bc0: 6773 645f 7265 6769 7374 7279 2c0a 2020  gsd_registry,.  
+00001b20: 2020 2022 5468 6520 636f 6c6f 7220 636f     "The color co
+00001b30: 6d70 6f6e 656e 7473 2061 7320 6120 7475  mponents as a tu
+00001b40: 706c 6520 696e 206f 7264 6572 2060 2872  ple in order `(r
+00001b50: 2c20 672c 2062 2960 2077 6974 6820 616c  , g, b)` with al
+00001b60: 7068 6120 6f6d 6974 7465 642c 2069 6e20  pha omitted, in 
+00001b70: 7261 6e67 6520 302d 312e 220a 2020 2020  range 0-1.".    
+00001b80: 2020 2020 7265 7475 726e 2073 656c 665b      return self[
+00001b90: 3a2d 315d 0a0a 2020 2020 4070 726f 7065  :-1]..    @prope
+00001ba0: 7274 790a 2020 2020 6465 6620 636f 6c6f  rty.    def colo
+00001bb0: 7273 3235 3528 7365 6c66 293a 0a20 2020  rs255(self):.   
+00001bc0: 2020 2020 2022 5468 6520 636f 6c6f 7220       "The color 
+00001bd0: 636f 6d70 6f6e 656e 7473 2061 7320 6120  components as a 
+00001be0: 7475 706c 6520 696e 206f 7264 6572 2060  tuple in order `
+00001bf0: 2872 2c20 672c 2062 2960 2077 6974 6820  (r, g, b)` with 
+00001c00: 616c 7068 6120 6f6d 6974 7465 642c 2069  alpha omitted, i
+00001c10: 6e20 7261 6e67 6520 302d 3235 352e 220a  n range 0-255.".
+00001c20: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00001c30: 7570 6c65 2832 3535 202a 2076 2066 6f72  uple(255 * v for
+00001c40: 2076 2069 6e20 7365 6c66 2e63 6f6c 6f72   v in self.color
+00001c50: 7329 0a0a 2020 2020 6465 6620 7365 7269  s)..    def seri
+00001c60: 616c 697a 6528 7365 6c66 2920 2d3e 2073  alize(self) -> s
+00001c70: 7472 3a0a 2020 2020 2020 2020 7265 7475  tr:.        retu
+00001c80: 726e 2022 2022 2e6a 6f69 6e28 6e75 6d62  rn " ".join(numb
+00001c90: 6572 5f74 6f5f 7374 7228 7661 6c29 2066  er_to_str(val) f
+00001ca0: 6f72 2076 616c 2069 6e20 7365 6c66 2e63  or val in self.c
+00001cb0: 6f6c 6f72 7329 202b 2066 2220 7b73 656c  olors) + f" {sel
+00001cc0: 662e 4f50 4552 4154 4f52 7d22 0a0a 0a5f  f.OPERATOR}"..._
+00001cd0: 5f70 646f 635f 5f5b 2244 6576 6963 6552  _pdoc__["DeviceR
+00001ce0: 4742 2e4f 5045 5241 544f 5222 5d20 3d20  GB.OPERATOR"] = 
+00001cf0: 4661 6c73 650a 5f5f 7064 6f63 5f5f 5b22  False.__pdoc__["
+00001d00: 4465 7669 6365 5247 422e 7222 5d20 3d20  DeviceRGB.r"] = 
+00001d10: 2254 6865 2072 6564 2063 6f6c 6f72 2063  "The red color c
+00001d20: 6f6d 706f 6e65 6e74 2e20 4d75 7374 2062  omponent. Must b
+00001d30: 6520 696e 2074 6865 2069 6e74 6572 7661  e in the interva
+00001d40: 6c20 5b30 2c20 315d 2e22 0a5f 5f70 646f  l [0, 1].".__pdo
+00001d50: 635f 5f5b 2244 6576 6963 6552 4742 2e67  c__["DeviceRGB.g
+00001d60: 225d 203d 2022 5468 6520 6772 6565 6e20  "] = "The green 
+00001d70: 636f 6c6f 7220 636f 6d70 6f6e 656e 742e  color component.
+00001d80: 204d 7573 7420 6265 2069 6e20 7468 6520   Must be in the 
+00001d90: 696e 7465 7276 616c 205b 302c 2031 5d2e  interval [0, 1].
+00001da0: 220a 5f5f 7064 6f63 5f5f 5b22 4465 7669  ".__pdoc__["Devi
+00001db0: 6365 5247 422e 6222 5d20 3d20 2254 6865  ceRGB.b"] = "The
+00001dc0: 2062 6c75 6520 636f 6c6f 7220 636f 6d70   blue color comp
+00001dd0: 6f6e 656e 742e 204d 7573 7420 6265 2069  onent. Must be i
+00001de0: 6e20 7468 6520 696e 7465 7276 616c 205b  n the interval [
+00001df0: 302c 2031 5d2e 220a 5f5f 7064 6f63 5f5f  0, 1].".__pdoc__
+00001e00: 5b0a 2020 2020 2244 6576 6963 6552 4742  [.    "DeviceRGB
+00001e10: 2e61 220a 5d20 3d20 2222 220a 5468 6520  .a".] = """.The 
+00001e20: 616c 7068 6120 636f 6c6f 7220 636f 6d70  alpha color comp
+00001e30: 6f6e 656e 7420 2869 2e65 2e20 6f70 6163  onent (i.e. opac
+00001e40: 6974 7929 2e20 4d75 7374 2062 6520 604e  ity). Must be `N
+00001e50: 6f6e 6560 206f 7220 696e 2074 6865 2069  one` or in the i
+00001e60: 6e74 6572 7661 6c20 5b30 2c20 315d 2e0a  nterval [0, 1]..
+00001e70: 0a41 6e20 616c 7068 6120 7661 6c75 6520  .An alpha value 
+00001e80: 6f66 2030 206d 616b 6573 2074 6865 2063  of 0 makes the c
+00001e90: 6f6c 6f72 2066 756c 6c79 2074 7261 6e73  olor fully trans
+00001ea0: 7061 7265 6e74 2c20 616e 6420 6120 7661  parent, and a va
+00001eb0: 6c75 6520 6f66 2031 206d 616b 6573 2069  lue of 1 makes i
+00001ec0: 7420 6675 6c6c 790a 6f70 6171 7565 2e20  t fully.opaque. 
+00001ed0: 4966 2060 4e6f 6e65 602c 2074 6865 2063  If `None`, the c
+00001ee0: 6f6c 6f72 2077 696c 6c20 6265 2069 6e74  olor will be int
+00001ef0: 6572 7072 6574 6564 2061 7320 6e6f 7420  erpreted as not 
+00001f00: 7370 6563 6966 7969 6e67 2061 2070 6172  specifying a par
+00001f10: 7469 6375 6c61 720a 7472 616e 7370 6172  ticular.transpar
+00001f20: 656e 6379 2072 6174 6865 7220 7468 616e  ency rather than
+00001f30: 2073 7065 6369 6679 696e 6720 6675 6c6c   specifying full
+00001f40: 7920 7472 616e 7370 6172 656e 7420 6f72  y transparent or
+00001f50: 2066 756c 6c79 206f 7061 7175 652e 0a22   fully opaque.."
+00001f60: 2222 0a0a 0a23 2074 6869 7320 7765 6972  ""...# this weir
+00001f70: 6420 696e 6865 7269 7461 6e63 6520 6973  d inheritance is
+00001f80: 2075 7365 6420 6265 6361 7573 6520 666f   used because fo
+00001f90: 7220 736f 6d65 2072 6561 736f 6e20 6e6f  r some reason no
+00001fa0: 726d 616c 204e 616d 6564 5475 706c 6520  rmal NamedTuple 
+00001fb0: 7573 6167 6520 646f 6573 6e27 740a 2320  usage doesn't.# 
+00001fc0: 616c 6c6f 7720 6f76 6572 7269 6469 6e67  allow overriding
+00001fd0: 205f 5f6e 6577 5f5f 2c20 6576 656e 2074   __new__, even t
+00001fe0: 686f 7567 6820 6974 2077 6f72 6b73 206a  hough it works j
+00001ff0: 7573 7420 6173 2065 7870 6563 7465 6420  ust as expected 
+00002000: 7468 6973 2077 6179 2e0a 636c 6173 7320  this way..class 
+00002010: 4465 7669 6365 4772 6179 280a 2020 2020  DeviceGray(.    
+00002020: 4e61 6d65 6454 7570 6c65 280a 2020 2020  NamedTuple(.    
+00002030: 2020 2020 2244 6576 6963 6547 7261 7922      "DeviceGray"
+00002040: 2c0a 2020 2020 2020 2020 5b28 2267 222c  ,.        [("g",
+00002050: 204e 756d 6265 7229 2c20 2822 6122 2c20   Number), ("a", 
+00002060: 4f70 7469 6f6e 616c 5b4e 756d 6265 725d  Optional[Number]
+00002070: 295d 2c0a 2020 2020 290a 293a 0a20 2020  )],.    ).):.   
+00002080: 2022 2222 4120 636c 6173 7320 7265 7072   """A class repr
+00002090: 6573 656e 7469 6e67 2061 2050 4446 2044  esenting a PDF D
+000020a0: 6576 6963 6547 7261 7920 636f 6c6f 722e  eviceGray color.
+000020b0: 2222 220a 0a20 2020 204f 5045 5241 544f  """..    OPERATO
+000020c0: 5220 3d20 2267 220a 2020 2020 2222 2254  R = "g".    """T
+000020d0: 6865 2050 4446 2064 7261 7769 6e67 206f  he PDF drawing o
+000020e0: 7065 7261 746f 7220 7573 6564 2074 6f20  perator used to 
+000020f0: 7370 6563 6966 7920 7468 6973 2074 7970  specify this typ
+00002100: 6520 6f66 2063 6f6c 6f72 2e22 2222 0a0a  e of color."""..
+00002110: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
+00002120: 636c 732c 2067 2c20 613d 4e6f 6e65 293a  cls, g, a=None):
+00002130: 0a20 2020 2020 2020 2069 6620 6120 6973  .        if a is
+00002140: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00002150: 2020 2020 2020 205f 6368 6563 6b5f 7261         _check_ra
+00002160: 6e67 6528 6129 0a0a 2020 2020 2020 2020  nge(a)..        
+00002170: 7265 7475 726e 2073 7570 6572 2829 2e5f  return super()._
+00002180: 5f6e 6577 5f5f 2863 6c73 2c20 5f63 6865  _new__(cls, _che
+00002190: 636b 5f72 616e 6765 2867 292c 2061 290a  ck_range(g), a).
+000021a0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
+000021b0: 2020 2064 6566 2063 6f6c 6f72 7328 7365     def colors(se
+000021c0: 6c66 293a 0a20 2020 2020 2020 2022 5468  lf):.        "Th
+000021d0: 6520 636f 6c6f 7220 636f 6d70 6f6e 656e  e color componen
+000021e0: 7473 2061 7320 6120 7475 706c 6520 696e  ts as a tuple in
+000021f0: 206f 7264 6572 2028 722c 2067 2c20 6229   order (r, g, b)
+00002200: 2077 6974 6820 616c 7068 6120 6f6d 6974   with alpha omit
+00002210: 7465 642c 2069 6e20 7261 6e67 6520 302d  ted, in range 0-
+00002220: 312e 220a 2020 2020 2020 2020 7265 7475  1.".        retu
+00002230: 726e 2073 656c 662e 672c 2073 656c 662e  rn self.g, self.
+00002240: 672c 2073 656c 662e 670a 0a20 2020 2040  g, self.g..    @
+00002250: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+00002260: 2063 6f6c 6f72 7332 3535 2873 656c 6629   colors255(self)
+00002270: 3a0a 2020 2020 2020 2020 2254 6865 2063  :.        "The c
+00002280: 6f6c 6f72 2063 6f6d 706f 6e65 6e74 7320  olor components 
+00002290: 6173 2061 2074 7570 6c65 2069 6e20 6f72  as a tuple in or
+000022a0: 6465 7220 6028 722c 2067 2c20 6229 6020  der `(r, g, b)` 
+000022b0: 7769 7468 2061 6c70 6861 206f 6d69 7474  with alpha omitt
+000022c0: 6564 2c20 696e 2072 616e 6765 2030 2d32  ed, in range 0-2
+000022d0: 3535 2e22 0a20 2020 2020 2020 2072 6574  55.".        ret
+000022e0: 7572 6e20 7475 706c 6528 3235 3520 2a20  urn tuple(255 * 
+000022f0: 7620 666f 7220 7620 696e 2073 656c 662e  v for v in self.
+00002300: 636f 6c6f 7273 290a 0a20 2020 2064 6566  colors)..    def
+00002310: 2073 6572 6961 6c69 7a65 2873 656c 6629   serialize(self)
+00002320: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
+00002330: 2072 6574 7572 6e20 6622 7b6e 756d 6265   return f"{numbe
+00002340: 725f 746f 5f73 7472 2873 656c 662e 6729  r_to_str(self.g)
+00002350: 7d20 7b73 656c 662e 4f50 4552 4154 4f52  } {self.OPERATOR
+00002360: 7d22 0a0a 0a5f 5f70 646f 635f 5f5b 2244  }"...__pdoc__["D
+00002370: 6576 6963 6547 7261 792e 4f50 4552 4154  eviceGray.OPERAT
+00002380: 4f52 225d 203d 2046 616c 7365 0a5f 5f70  OR"] = False.__p
+00002390: 646f 635f 5f5b 0a20 2020 2022 4465 7669  doc__[.    "Devi
+000023a0: 6365 4772 6179 2e67 220a 5d20 3d20 2222  ceGray.g".] = ""
+000023b0: 220a 5468 6520 6772 6179 2063 6f6c 6f72  ".The gray color
+000023c0: 2063 6f6d 706f 6e65 6e74 2e20 4d75 7374   component. Must
+000023d0: 2062 6520 696e 2074 6865 2069 6e74 6572   be in the inter
+000023e0: 7661 6c20 5b30 2c20 315d 2e0a 0a41 2076  val [0, 1]...A v
+000023f0: 616c 7565 206f 6620 3020 7265 7072 6573  alue of 0 repres
+00002400: 656e 7473 2062 6c61 636b 2061 6e64 2061  ents black and a
+00002410: 2076 616c 7565 206f 6620 3120 7265 7072   value of 1 repr
+00002420: 6573 656e 7473 2077 6869 7465 2e0a 2222  esents white..""
+00002430: 220a 5f5f 7064 6f63 5f5f 5b0a 2020 2020  ".__pdoc__[.    
+00002440: 2244 6576 6963 6547 7261 792e 6122 0a5d  "DeviceGray.a".]
+00002450: 203d 2022 2222 0a54 6865 2061 6c70 6861   = """.The alpha
+00002460: 2063 6f6c 6f72 2063 6f6d 706f 6e65 6e74   color component
+00002470: 2028 692e 652e 206f 7061 6369 7479 292e   (i.e. opacity).
+00002480: 204d 7573 7420 6265 2060 4e6f 6e65 6020   Must be `None` 
+00002490: 6f72 2069 6e20 7468 6520 696e 7465 7276  or in the interv
+000024a0: 616c 205b 302c 2031 5d2e 0a0a 416e 2061  al [0, 1]...An a
+000024b0: 6c70 6861 2076 616c 7565 206f 6620 3020  lpha value of 0 
+000024c0: 6d61 6b65 7320 7468 6520 636f 6c6f 7220  makes the color 
+000024d0: 6675 6c6c 7920 7472 616e 7370 6172 656e  fully transparen
+000024e0: 742c 2061 6e64 2061 2076 616c 7565 206f  t, and a value o
+000024f0: 6620 3120 6d61 6b65 7320 6974 2066 756c  f 1 makes it ful
+00002500: 6c79 0a6f 7061 7175 652e 2049 6620 604e  ly.opaque. If `N
+00002510: 6f6e 6560 2c20 7468 6520 636f 6c6f 7220  one`, the color 
+00002520: 7769 6c6c 2062 6520 696e 7465 7270 7265  will be interpre
+00002530: 7465 6420 6173 206e 6f74 2073 7065 6369  ted as not speci
+00002540: 6679 696e 6720 6120 7061 7274 6963 756c  fying a particul
+00002550: 6172 0a74 7261 6e73 7061 7265 6e63 7920  ar.transparency 
+00002560: 7261 7468 6572 2074 6861 6e20 7370 6563  rather than spec
+00002570: 6966 7969 6e67 2066 756c 6c79 2074 7261  ifying fully tra
+00002580: 6e73 7061 7265 6e74 206f 7220 6675 6c6c  nsparent or full
+00002590: 7920 6f70 6171 7565 2e0a 2222 220a 0a0a  y opaque.."""...
+000025a0: 2320 7468 6973 2077 6569 7264 2069 6e68  # this weird inh
+000025b0: 6572 6974 616e 6365 2069 7320 7573 6564  eritance is used
+000025c0: 2062 6563 6175 7365 2066 6f72 2073 6f6d   because for som
+000025d0: 6520 7265 6173 6f6e 206e 6f72 6d61 6c20  e reason normal 
+000025e0: 4e61 6d65 6454 7570 6c65 2075 7361 6765  NamedTuple usage
+000025f0: 2064 6f65 736e 2774 0a23 2061 6c6c 6f77   doesn't.# allow
+00002600: 206f 7665 7272 6964 696e 6720 5f5f 6e65   overriding __ne
+00002610: 775f 5f2c 2065 7665 6e20 7468 6f75 6768  w__, even though
+00002620: 2069 7420 776f 726b 7320 6a75 7374 2061   it works just a
+00002630: 7320 6578 7065 6374 6564 2074 6869 7320  s expected this 
+00002640: 7761 792e 0a63 6c61 7373 2044 6576 6963  way..class Devic
+00002650: 6543 4d59 4b28 0a20 2020 204e 616d 6564  eCMYK(.    Named
+00002660: 5475 706c 6528 0a20 2020 2020 2020 2022  Tuple(.        "
+00002670: 4465 7669 6365 434d 594b 222c 0a20 2020  DeviceCMYK",.   
+00002680: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00002690: 2020 2028 2263 222c 204e 756d 6265 7229     ("c", Number)
+000026a0: 2c0a 2020 2020 2020 2020 2020 2020 2822  ,.            ("
+000026b0: 6d22 2c20 4e75 6d62 6572 292c 0a20 2020  m", Number),.   
+000026c0: 2020 2020 2020 2020 2028 2279 222c 204e           ("y", N
+000026d0: 756d 6265 7229 2c0a 2020 2020 2020 2020  umber),.        
+000026e0: 2020 2020 2822 6b22 2c20 4e75 6d62 6572      ("k", Number
+000026f0: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00002700: 2261 222c 204f 7074 696f 6e61 6c5b 4e75  "a", Optional[Nu
+00002710: 6d62 6572 5d29 2c0a 2020 2020 2020 2020  mber]),.        
+00002720: 5d2c 0a20 2020 2029 0a29 3a0a 2020 2020  ],.    ).):.    
+00002730: 2222 2241 2063 6c61 7373 2072 6570 7265  """A class repre
+00002740: 7365 6e74 696e 6720 6120 5044 4620 4465  senting a PDF De
+00002750: 7669 6365 434d 594b 2063 6f6c 6f72 2e22  viceCMYK color."
+00002760: 2222 0a0a 2020 2020 4f50 4552 4154 4f52  ""..    OPERATOR
+00002770: 203d 2022 6b22 0a20 2020 2022 2222 5468   = "k".    """Th
+00002780: 6520 5044 4620 6472 6177 696e 6720 6f70  e PDF drawing op
+00002790: 6572 6174 6f72 2075 7365 6420 746f 2073  erator used to s
+000027a0: 7065 6369 6679 2074 6869 7320 7479 7065  pecify this type
+000027b0: 206f 6620 636f 6c6f 722e 2222 220a 0a20   of color.""".. 
+000027c0: 2020 2064 6566 205f 5f6e 6577 5f5f 2863     def __new__(c
+000027d0: 6c73 2c20 632c 206d 2c20 792c 206b 2c20  ls, c, m, y, k, 
+000027e0: 613d 4e6f 6e65 293a 0a20 2020 2020 2020  a=None):.       
+000027f0: 2069 6620 6120 6973 206e 6f74 204e 6f6e   if a is not Non
+00002800: 653a 0a20 2020 2020 2020 2020 2020 205f  e:.            _
+00002810: 6368 6563 6b5f 7261 6e67 6528 6129 0a0a  check_range(a)..
+00002820: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00002830: 7570 6572 2829 2e5f 5f6e 6577 5f5f 280a  uper().__new__(.
+00002840: 2020 2020 2020 2020 2020 2020 636c 732c              cls,
+00002850: 205f 6368 6563 6b5f 7261 6e67 6528 6329   _check_range(c)
+00002860: 2c20 5f63 6865 636b 5f72 616e 6765 286d  , _check_range(m
+00002870: 292c 205f 6368 6563 6b5f 7261 6e67 6528  ), _check_range(
+00002880: 7929 2c20 5f63 6865 636b 5f72 616e 6765  y), _check_range
+00002890: 286b 292c 2061 0a20 2020 2020 2020 2029  (k), a.        )
+000028a0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+000028b0: 2020 2020 6465 6620 636f 6c6f 7273 2873      def colors(s
+000028c0: 656c 6629 3a0a 2020 2020 2020 2020 2254  elf):.        "T
+000028d0: 6865 2063 6f6c 6f72 2063 6f6d 706f 6e65  he color compone
+000028e0: 6e74 7320 6173 2061 2074 7570 6c65 2069  nts as a tuple i
+000028f0: 6e20 6f72 6465 7220 2863 2c20 6d2c 2079  n order (c, m, y
+00002900: 2c20 6b29 2077 6974 6820 616c 7068 6120  , k) with alpha 
+00002910: 6f6d 6974 7465 642c 2069 6e20 7261 6e67  omitted, in rang
+00002920: 6520 302d 312e 220a 2020 2020 2020 2020  e 0-1.".        
+00002930: 7265 7475 726e 2073 656c 665b 3a2d 315d  return self[:-1]
+00002940: 0a0a 2020 2020 6465 6620 7365 7269 616c  ..    def serial
+00002950: 697a 6528 7365 6c66 2920 2d3e 2073 7472  ize(self) -> str
+00002960: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00002970: 2022 2022 2e6a 6f69 6e28 6e75 6d62 6572   " ".join(number
+00002980: 5f74 6f5f 7374 7228 7661 6c29 2066 6f72  _to_str(val) for
+00002990: 2076 616c 2069 6e20 7365 6c66 2e63 6f6c   val in self.col
+000029a0: 6f72 7329 202b 2066 2220 7b73 656c 662e  ors) + f" {self.
+000029b0: 4f50 4552 4154 4f52 7d22 0a0a 0a5f 5f70  OPERATOR}"...__p
+000029c0: 646f 635f 5f5b 2244 6576 6963 6543 4d59  doc__["DeviceCMY
+000029d0: 4b2e 4f50 4552 4154 4f52 225d 203d 2046  K.OPERATOR"] = F
+000029e0: 616c 7365 0a5f 5f70 646f 635f 5f5b 2244  alse.__pdoc__["D
+000029f0: 6576 6963 6543 4d59 4b2e 6322 5d20 3d20  eviceCMYK.c"] = 
+00002a00: 2254 6865 2063 7961 6e20 636f 6c6f 7220  "The cyan color 
+00002a10: 636f 6d70 6f6e 656e 742e 204d 7573 7420  component. Must 
+00002a20: 6265 2069 6e20 7468 6520 696e 7465 7276  be in the interv
+00002a30: 616c 205b 302c 2031 5d2e 220a 5f5f 7064  al [0, 1].".__pd
+00002a40: 6f63 5f5f 5b22 4465 7669 6365 434d 594b  oc__["DeviceCMYK
+00002a50: 2e6d 225d 203d 2028 0a20 2020 2022 5468  .m"] = (.    "Th
+00002a60: 6520 6d61 6765 6e74 6120 636f 6c6f 7220  e magenta color 
+00002a70: 636f 6d70 6f6e 656e 742e 204d 7573 7420  component. Must 
+00002a80: 6265 2069 6e20 7468 6520 696e 7465 7276  be in the interv
+00002a90: 616c 205b 302c 2031 5d2e 220a 290a 5f5f  al [0, 1].".).__
+00002aa0: 7064 6f63 5f5f 5b22 4465 7669 6365 434d  pdoc__["DeviceCM
+00002ab0: 594b 2e79 225d 203d 2022 5468 6520 7965  YK.y"] = "The ye
+00002ac0: 6c6c 6f77 2063 6f6c 6f72 2063 6f6d 706f  llow color compo
+00002ad0: 6e65 6e74 2e20 4d75 7374 2062 6520 696e  nent. Must be in
+00002ae0: 2074 6865 2069 6e74 6572 7661 6c20 5b30   the interval [0
+00002af0: 2c20 315d 2e22 0a5f 5f70 646f 635f 5f5b  , 1].".__pdoc__[
+00002b00: 2244 6576 6963 6543 4d59 4b2e 6b22 5d20  "DeviceCMYK.k"] 
+00002b10: 3d20 2254 6865 2062 6c61 636b 2063 6f6c  = "The black col
+00002b20: 6f72 2063 6f6d 706f 6e65 6e74 2e20 4d75  or component. Mu
+00002b30: 7374 2062 6520 696e 2074 6865 2069 6e74  st be in the int
+00002b40: 6572 7661 6c20 5b30 2c20 315d 2e22 0a5f  erval [0, 1]."._
+00002b50: 5f70 646f 635f 5f5b 0a20 2020 2022 4465  _pdoc__[.    "De
+00002b60: 7669 6365 434d 594b 2e61 220a 5d20 3d20  viceCMYK.a".] = 
+00002b70: 2222 220a 5468 6520 616c 7068 6120 636f  """.The alpha co
+00002b80: 6c6f 7220 636f 6d70 6f6e 656e 7420 2869  lor component (i
+00002b90: 2e65 2e20 6f70 6163 6974 7929 2e20 4d75  .e. opacity). Mu
+00002ba0: 7374 2062 6520 604e 6f6e 6560 206f 7220  st be `None` or 
+00002bb0: 696e 2074 6865 2069 6e74 6572 7661 6c20  in the interval 
+00002bc0: 5b30 2c20 315d 2e0a 0a41 6e20 616c 7068  [0, 1]...An alph
+00002bd0: 6120 7661 6c75 6520 6f66 2030 206d 616b  a value of 0 mak
+00002be0: 6573 2074 6865 2063 6f6c 6f72 2066 756c  es the color ful
+00002bf0: 6c79 2074 7261 6e73 7061 7265 6e74 2c20  ly transparent, 
+00002c00: 616e 6420 6120 7661 6c75 6520 6f66 2031  and a value of 1
+00002c10: 206d 616b 6573 2069 7420 6675 6c6c 790a   makes it fully.
+00002c20: 6f70 6171 7565 2e20 4966 2060 4e6f 6e65  opaque. If `None
+00002c30: 602c 2074 6865 2063 6f6c 6f72 2077 696c  `, the color wil
+00002c40: 6c20 6265 2069 6e74 6572 7072 6574 6564  l be interpreted
+00002c50: 2061 7320 6e6f 7420 7370 6563 6966 7969   as not specifyi
+00002c60: 6e67 2061 2070 6172 7469 6375 6c61 720a  ng a particular.
+00002c70: 7472 616e 7370 6172 656e 6379 2072 6174  transparency rat
+00002c80: 6865 7220 7468 616e 2073 7065 6369 6679  her than specify
+00002c90: 696e 6720 6675 6c6c 7920 7472 616e 7370  ing fully transp
+00002ca0: 6172 656e 7420 6f72 2066 756c 6c79 206f  arent or fully o
+00002cb0: 7061 7175 652e 0a22 2222 0a0a 0a64 6566  paque.."""...def
+00002cc0: 2072 6762 3828 722c 2067 2c20 622c 2061   rgb8(r, g, b, a
+00002cd0: 3d4e 6f6e 6529 3a0a 2020 2020 2222 220a  =None):.    """.
+00002ce0: 2020 2020 5072 6f64 7563 6520 6120 4465      Produce a De
+00002cf0: 7669 6365 5247 4220 636f 6c6f 7220 6672  viceRGB color fr
+00002d00: 6f6d 2074 6865 2067 6976 656e 2038 2d62  om the given 8-b
+00002d10: 6974 2052 4742 2076 616c 7565 732e 0a0a  it RGB values...
+00002d20: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+00002d30: 2020 7220 284e 756d 6265 7229 3a20 7265    r (Number): re
+00002d40: 6420 636f 6c6f 7220 636f 6d70 6f6e 656e  d color componen
+00002d50: 742e 204d 7573 7420 6265 2069 6e20 7468  t. Must be in th
+00002d60: 6520 696e 7465 7276 616c 205b 302c 2032  e interval [0, 2
+00002d70: 3535 5d2e 0a20 2020 2020 2020 2067 2028  55]..        g (
+00002d80: 4e75 6d62 6572 293a 2067 7265 656e 2063  Number): green c
+00002d90: 6f6c 6f72 2063 6f6d 706f 6e65 6e74 2e20  olor component. 
+00002da0: 4d75 7374 2062 6520 696e 2074 6865 2069  Must be in the i
+00002db0: 6e74 6572 7661 6c20 5b30 2c20 3235 355d  nterval [0, 255]
+00002dc0: 2e0a 2020 2020 2020 2020 6220 284e 756d  ..        b (Num
+00002dd0: 6265 7229 3a20 626c 7565 2063 6f6c 6f72  ber): blue color
+00002de0: 2063 6f6d 706f 6e65 6e74 2e20 4d75 7374   component. Must
+00002df0: 2062 6520 696e 2074 6865 2069 6e74 6572   be in the inter
+00002e00: 7661 6c20 5b30 2c20 3235 355d 2e0a 2020  val [0, 255]..  
+00002e10: 2020 2020 2020 6120 284f 7074 696f 6e61        a (Optiona
+00002e20: 6c5b 4e75 6d62 6572 5d29 3a20 616c 7068  l[Number]): alph
+00002e30: 6120 636f 6d70 6f6e 656e 742e 204d 7573  a component. Mus
+00002e40: 7420 6265 2060 4e6f 6e65 6020 6f72 2069  t be `None` or i
+00002e50: 6e20 7468 6520 696e 7465 7276 616c 0a20  n the interval. 
+00002e60: 2020 2020 2020 2020 2020 205b 302c 2032             [0, 2
+00002e70: 3535 5d2e 2030 2069 7320 6675 6c6c 7920  55]. 0 is fully 
+00002e80: 7472 616e 7370 6172 656e 742c 2032 3535  transparent, 255
+00002e90: 2069 7320 6675 6c6c 7920 6f70 6171 7565   is fully opaque
+00002ea0: 0a0a 2020 2020 5265 7475 726e 733a 0a20  ..    Returns:. 
+00002eb0: 2020 2020 2020 2044 6576 6963 6552 4742         DeviceRGB
+00002ec0: 2063 6f6c 6f72 2072 6570 7265 7365 6e74   color represent
+00002ed0: 6174 696f 6e2e 0a0a 2020 2020 5261 6973  ation...    Rais
+00002ee0: 6573 3a0a 2020 2020 2020 2020 5661 6c75  es:.        Valu
+00002ef0: 6545 7272 6f72 3a20 6966 2061 6e79 2063  eError: if any c
+00002f00: 6f6d 706f 6e65 6e74 7320 6172 6520 6e6f  omponents are no
+00002f10: 7420 696e 2074 6865 6972 2076 616c 6964  t in their valid
+00002f20: 2069 6e74 6572 7661 6c2e 0a20 2020 2022   interval..    "
+00002f30: 2222 0a20 2020 2069 6620 6120 6973 206e  "".    if a is n
+00002f40: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00002f50: 2061 202f 3d20 3235 352e 300a 0a20 2020   a /= 255.0..   
+00002f60: 2072 6574 7572 6e20 4465 7669 6365 5247   return DeviceRG
+00002f70: 4228 7220 2f20 3235 352e 302c 2067 202f  B(r / 255.0, g /
+00002f80: 2032 3535 2e30 2c20 6220 2f20 3235 352e   255.0, b / 255.
+00002f90: 302c 2061 290a 0a0a 6465 6620 6772 6179  0, a)...def gray
+00002fa0: 3828 672c 2061 3d4e 6f6e 6529 3a0a 2020  8(g, a=None):.  
+00002fb0: 2020 2222 220a 2020 2020 5072 6f64 7563    """.    Produc
+00002fc0: 6520 6120 4465 7669 6365 4772 6179 2063  e a DeviceGray c
+00002fd0: 6f6c 6f72 2066 726f 6d20 7468 6520 6769  olor from the gi
+00002fe0: 7665 6e20 382d 6269 7420 6772 6179 2076  ven 8-bit gray v
+00002ff0: 616c 7565 2e0a 0a20 2020 2041 7267 733a  alue...    Args:
+00003000: 0a20 2020 2020 2020 2067 2028 4e75 6d62  .        g (Numb
+00003010: 6572 293a 2067 7261 7920 636f 6c6f 7220  er): gray color 
+00003020: 636f 6d70 6f6e 656e 742e 204d 7573 7420  component. Must 
+00003030: 6265 2069 6e20 7468 6520 696e 7465 7276  be in the interv
+00003040: 616c 205b 302c 2032 3535 5d2e 2030 2069  al [0, 255]. 0 i
+00003050: 7320 626c 6163 6b2c 0a20 2020 2020 2020  s black,.       
+00003060: 2020 2020 2032 3535 2069 7320 7768 6974       255 is whit
+00003070: 652e 0a20 2020 2020 2020 2061 2028 4f70  e..        a (Op
+00003080: 7469 6f6e 616c 5b4e 756d 6265 725d 293a  tional[Number]):
+00003090: 2061 6c70 6861 2063 6f6d 706f 6e65 6e74   alpha component
+000030a0: 2e20 4d75 7374 2062 6520 604e 6f6e 6560  . Must be `None`
+000030b0: 206f 7220 696e 2074 6865 2069 6e74 6572   or in the inter
+000030c0: 7661 6c0a 2020 2020 2020 2020 2020 2020  val.            
+000030d0: 5b30 2c20 3235 355d 2e20 3020 6973 2066  [0, 255]. 0 is f
+000030e0: 756c 6c79 2074 7261 6e73 7061 7265 6e74  ully transparent
+000030f0: 2c20 3235 3520 6973 2066 756c 6c79 206f  , 255 is fully o
+00003100: 7061 7175 650a 0a20 2020 2052 6574 7572  paque..    Retur
+00003110: 6e73 3a0a 2020 2020 2020 2020 4465 7669  ns:.        Devi
+00003120: 6365 4772 6179 2063 6f6c 6f72 2072 6570  ceGray color rep
+00003130: 7265 7365 6e74 6174 696f 6e2e 0a0a 2020  resentation...  
+00003140: 2020 5261 6973 6573 3a0a 2020 2020 2020    Raises:.      
+00003150: 2020 5661 6c75 6545 7272 6f72 3a20 6966    ValueError: if
+00003160: 2061 6e79 2063 6f6d 706f 6e65 6e74 7320   any components 
+00003170: 6172 6520 6e6f 7420 696e 2074 6865 6972  are not in their
+00003180: 2076 616c 6964 2069 6e74 6572 7661 6c2e   valid interval.
+00003190: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
+000031a0: 6120 6973 206e 6f74 204e 6f6e 653a 0a20  a is not None:. 
+000031b0: 2020 2020 2020 2061 202f 3d20 3235 352e         a /= 255.
+000031c0: 300a 0a20 2020 2072 6574 7572 6e20 4465  0..    return De
+000031d0: 7669 6365 4772 6179 2867 202f 2032 3535  viceGray(g / 255
+000031e0: 2e30 2c20 6129 0a0a 0a64 6566 2063 6f6e  .0, a)...def con
+000031f0: 7665 7274 5f74 6f5f 6465 7669 6365 5f63  vert_to_device_c
+00003200: 6f6c 6f72 2872 2c20 673d 2d31 2c20 623d  olor(r, g=-1, b=
+00003210: 2d31 293a 0a20 2020 2069 6620 6973 696e  -1):.    if isin
+00003220: 7374 616e 6365 2872 2c20 2844 6576 6963  stance(r, (Devic
+00003230: 6547 7261 792c 2044 6576 6963 6552 4742  eGray, DeviceRGB
+00003240: 2929 3a0a 2020 2020 2020 2020 2320 4e6f  )):.        # No
+00003250: 7465 3a20 696e 2074 6869 7320 6361 7365  te: in this case
+00003260: 2c20 7220 6973 2061 6c73 6f20 6120 5365  , r is also a Se
+00003270: 7175 656e 6365 0a20 2020 2020 2020 2072  quence.        r
+00003280: 6574 7572 6e20 720a 2020 2020 6966 2069  eturn r.    if i
+00003290: 7369 6e73 7461 6e63 6528 722c 2073 7472  sinstance(r, str
+000032a0: 2920 616e 6420 722e 7374 6172 7473 7769  ) and r.startswi
+000032b0: 7468 2822 2322 293a 0a20 2020 2020 2020  th("#"):.       
+000032c0: 2072 6574 7572 6e20 636f 6c6f 725f 6672   return color_fr
+000032d0: 6f6d 5f68 6578 5f73 7472 696e 6728 7229  om_hex_string(r)
+000032e0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
+000032f0: 6365 2872 2c20 5365 7175 656e 6365 293a  ce(r, Sequence):
+00003300: 0a20 2020 2020 2020 2072 2c20 672c 2062  .        r, g, b
+00003310: 203d 2072 0a20 2020 2069 6620 2872 2c20   = r.    if (r, 
+00003320: 672c 2062 2920 3d3d 2028 302c 2030 2c20  g, b) == (0, 0, 
+00003330: 3029 206f 7220 6720 3d3d 202d 313a 0a20  0) or g == -1:. 
+00003340: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
+00003350: 7669 6365 4772 6179 2872 202f 2032 3535  viceGray(r / 255
+00003360: 290a 2020 2020 7265 7475 726e 2044 6576  ).    return Dev
+00003370: 6963 6552 4742 2872 202f 2032 3535 2c20  iceRGB(r / 255, 
+00003380: 6720 2f20 3235 352c 2062 202f 2032 3535  g / 255, b / 255
+00003390: 290a 0a0a 6465 6620 636d 796b 3828 632c  )...def cmyk8(c,
+000033a0: 206d 2c20 792c 206b 2c20 613d 4e6f 6e65   m, y, k, a=None
+000033b0: 293a 0a20 2020 2022 2222 0a20 2020 2050  ):.    """.    P
+000033c0: 726f 6475 6365 2061 2044 6576 6963 6543  roduce a DeviceC
+000033d0: 4d59 4b20 636f 6c6f 7220 6672 6f6d 2074  MYK color from t
+000033e0: 6865 2067 6976 656e 2038 2d62 6974 2043  he given 8-bit C
+000033f0: 4d59 4b20 7661 6c75 6573 2e0a 0a20 2020  MYK values...   
+00003400: 2041 7267 733a 0a20 2020 2020 2020 2063   Args:.        c
+00003410: 2028 4e75 6d62 6572 293a 2072 6564 2063   (Number): red c
+00003420: 6f6c 6f72 2063 6f6d 706f 6e65 6e74 2e20  olor component. 
+00003430: 4d75 7374 2062 6520 696e 2074 6865 2069  Must be in the i
+00003440: 6e74 6572 7661 6c20 5b30 2c20 3235 355d  nterval [0, 255]
+00003450: 2e0a 2020 2020 2020 2020 6d20 284e 756d  ..        m (Num
+00003460: 6265 7229 3a20 6772 6565 6e20 636f 6c6f  ber): green colo
+00003470: 7220 636f 6d70 6f6e 656e 742e 204d 7573  r component. Mus
+00003480: 7420 6265 2069 6e20 7468 6520 696e 7465  t be in the inte
+00003490: 7276 616c 205b 302c 2032 3535 5d2e 0a20  rval [0, 255].. 
+000034a0: 2020 2020 2020 2079 2028 4e75 6d62 6572         y (Number
+000034b0: 293a 2062 6c75 6520 636f 6c6f 7220 636f  ): blue color co
+000034c0: 6d70 6f6e 656e 742e 204d 7573 7420 6265  mponent. Must be
+000034d0: 2069 6e20 7468 6520 696e 7465 7276 616c   in the interval
+000034e0: 205b 302c 2032 3535 5d2e 0a20 2020 2020   [0, 255]..     
+000034f0: 2020 206b 2028 4e75 6d62 6572 293a 2062     k (Number): b
+00003500: 6c75 6520 636f 6c6f 7220 636f 6d70 6f6e  lue color compon
+00003510: 656e 742e 204d 7573 7420 6265 2069 6e20  ent. Must be in 
+00003520: 7468 6520 696e 7465 7276 616c 205b 302c  the interval [0,
+00003530: 2032 3535 5d2e 0a20 2020 2020 2020 2061   255]..        a
+00003540: 2028 4f70 7469 6f6e 616c 5b4e 756d 6265   (Optional[Numbe
+00003550: 725d 293a 2061 6c70 6861 2063 6f6d 706f  r]): alpha compo
+00003560: 6e65 6e74 2e20 4d75 7374 2062 6520 604e  nent. Must be `N
+00003570: 6f6e 6560 206f 7220 696e 2074 6865 2069  one` or in the i
+00003580: 6e74 6572 7661 6c0a 2020 2020 2020 2020  nterval.        
+00003590: 2020 2020 5b30 2c20 3235 355d 2e20 3020      [0, 255]. 0 
+000035a0: 6973 2066 756c 6c79 2074 7261 6e73 7061  is fully transpa
+000035b0: 7265 6e74 2c20 3235 3520 6973 2066 756c  rent, 255 is ful
+000035c0: 6c79 206f 7061 7175 650a 0a20 2020 2052  ly opaque..    R
+000035d0: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
+000035e0: 4465 7669 6365 434d 594b 2063 6f6c 6f72  DeviceCMYK color
+000035f0: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
+00003600: 0a0a 2020 2020 5261 6973 6573 3a0a 2020  ..    Raises:.  
+00003610: 2020 2020 2020 5661 6c75 6545 7272 6f72        ValueError
+00003620: 3a20 6966 2061 6e79 2063 6f6d 706f 6e65  : if any compone
+00003630: 6e74 7320 6172 6520 6e6f 7420 696e 2074  nts are not in t
+00003640: 6865 6972 2076 616c 6964 2069 6e74 6572  heir valid inter
+00003650: 7661 6c2e 0a20 2020 2022 2222 0a20 2020  val..    """.   
+00003660: 2069 6620 6120 6973 206e 6f74 204e 6f6e   if a is not Non
+00003670: 653a 0a20 2020 2020 2020 2061 202f 3d20  e:.        a /= 
+00003680: 3235 352e 300a 0a20 2020 2072 6574 7572  255.0..    retur
+00003690: 6e20 4465 7669 6365 434d 594b 2863 202f  n DeviceCMYK(c /
+000036a0: 2032 3535 2e30 2c20 6d20 2f20 3235 352e   255.0, m / 255.
+000036b0: 302c 2079 202f 2032 3535 2e30 2c20 6b20  0, y / 255.0, k 
+000036c0: 2f20 3235 352e 302c 2061 290a 0a0a 6465  / 255.0, a)...de
+000036d0: 6620 636f 6c6f 725f 6672 6f6d 5f68 6578  f color_from_hex
+000036e0: 5f73 7472 696e 6728 6865 7873 7472 293a  _string(hexstr):
+000036f0: 0a20 2020 2022 2222 0a20 2020 2050 6172  .    """.    Par
+00003700: 7365 2061 6e20 5247 4220 636f 6c6f 7220  se an RGB color 
+00003710: 6672 6f6d 2061 2063 7373 2d73 7479 6c65  from a css-style
+00003720: 2038 2d62 6974 2068 6578 6164 6563 696d   8-bit hexadecim
+00003730: 616c 2063 6f6c 6f72 2073 7472 696e 672e  al color string.
+00003740: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
+00003750: 2020 2020 6865 7873 7472 2028 7374 7229      hexstr (str)
+00003760: 3a20 6f66 2074 6865 2066 6f72 6d20 6023  : of the form `#
+00003770: 5247 4260 2c20 6023 5247 4241 602c 2060  RGB`, `#RGBA`, `
+00003780: 2352 5247 4742 4260 2c20 6f72 2060 2352  #RRGGBB`, or `#R
+00003790: 5247 4742 4241 4160 2e20 4d75 7374 0a20  RGGBBAA`. Must. 
+000037a0: 2020 2020 2020 2020 2020 2069 6e63 6c75             inclu
+000037b0: 6465 2074 6865 206c 6561 6469 6e67 206f  de the leading o
+000037c0: 6374 6f74 686f 7270 2e20 466f 726d 7320  ctothorp. Forms 
+000037d0: 6f6d 6974 7469 6e67 2074 6865 2061 6c70  omitting the alp
+000037e0: 6861 2066 6965 6c64 2061 7265 0a20 2020  ha field are.   
+000037f0: 2020 2020 2020 2020 2069 6e74 6572 7072           interpr
+00003800: 6574 6564 2061 7320 6e6f 7420 7370 6563  eted as not spec
+00003810: 6966 7969 6e67 2074 6865 206f 7061 6369  ifying the opaci
+00003820: 7479 2c20 736f 2069 7420 7769 6c6c 206e  ty, so it will n
+00003830: 6f74 2062 6520 6578 706c 6963 6974 6c79  ot be explicitly
+00003840: 2073 6574 2e0a 0a20 2020 2020 2020 2020   set...         
+00003850: 2020 2041 6e20 616c 7068 6120 7661 6c75     An alpha valu
+00003860: 6520 6f66 2060 3030 6020 6973 2066 756c  e of `00` is ful
+00003870: 6c79 2074 7261 6e73 7061 7265 6e74 2061  ly transparent a
+00003880: 6e64 2060 4646 6020 6973 2066 756c 6c79  nd `FF` is fully
+00003890: 206f 7061 7175 652e 0a0a 2020 2020 5265   opaque...    Re
+000038a0: 7475 726e 733a 0a20 2020 2020 2020 2044  turns:.        D
+000038b0: 6576 6963 6552 4742 2072 6570 7265 7365  eviceRGB represe
+000038c0: 6e74 6174 696f 6e20 6f66 2074 6865 2063  ntation of the c
+000038d0: 6f6c 6f72 2e0a 2020 2020 2222 220a 2020  olor..    """.  
+000038e0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+000038f0: 6e63 6528 6865 7873 7472 2c20 7374 7229  nce(hexstr, str)
+00003900: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00003910: 5479 7065 4572 726f 7228 6622 7b68 6578  TypeError(f"{hex
+00003920: 7374 727d 2069 7320 6e6f 7420 6f66 2074  str} is not of t
+00003930: 7970 6520 7374 7222 290a 0a20 2020 2069  ype str")..    i
+00003940: 6620 6e6f 7420 6865 7873 7472 2e73 7461  f not hexstr.sta
+00003950: 7274 7377 6974 6828 2223 2229 3a0a 2020  rtswith("#"):.  
+00003960: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00003970: 6545 7272 6f72 2866 227b 6865 7873 7472  eError(f"{hexstr
+00003980: 7d20 646f 6573 206e 6f74 2073 7461 7274  } does not start
+00003990: 2077 6974 6820 2322 290a 0a20 2020 2068   with #")..    h
+000039a0: 6c65 6e20 3d20 6c65 6e28 6865 7873 7472  len = len(hexstr
+000039b0: 290a 0a20 2020 2069 6620 686c 656e 203d  )..    if hlen =
+000039c0: 3d20 343a 0a20 2020 2020 2020 2072 6574  = 4:.        ret
+000039d0: 7572 6e20 7267 6238 282a 5b69 6e74 2863  urn rgb8(*[int(c
+000039e0: 6861 7220 2a20 322c 2062 6173 653d 3136  har * 2, base=16
+000039f0: 2920 666f 7220 6368 6172 2069 6e20 6865  ) for char in he
+00003a00: 7873 7472 5b31 3a5d 5d2c 2061 3d4e 6f6e  xstr[1:]], a=Non
+00003a10: 6529 0a0a 2020 2020 6966 2068 6c65 6e20  e)..    if hlen 
+00003a20: 3d3d 2035 3a0a 2020 2020 2020 2020 7265  == 5:.        re
+00003a30: 7475 726e 2072 6762 3828 2a5b 696e 7428  turn rgb8(*[int(
+00003a40: 6368 6172 202a 2032 2c20 6261 7365 3d31  char * 2, base=1
+00003a50: 3629 2066 6f72 2063 6861 7220 696e 2068  6) for char in h
+00003a60: 6578 7374 725b 313a 5d5d 290a 0a20 2020  exstr[1:]])..   
+00003a70: 2069 6620 686c 656e 203d 3d20 373a 0a20   if hlen == 7:. 
+00003a80: 2020 2020 2020 2072 6574 7572 6e20 7267         return rg
+00003a90: 6238 280a 2020 2020 2020 2020 2020 2020  b8(.            
+00003aa0: 2a5b 696e 7428 6865 7873 7472 5b69 6478  *[int(hexstr[idx
+00003ab0: 203a 2069 6478 202b 2032 5d2c 2062 6173   : idx + 2], bas
+00003ac0: 653d 3136 2920 666f 7220 6964 7820 696e  e=16) for idx in
+00003ad0: 2072 616e 6765 2831 2c20 686c 656e 2c20   range(1, hlen, 
+00003ae0: 3229 5d2c 2061 3d4e 6f6e 650a 2020 2020  2)], a=None.    
+00003af0: 2020 2020 290a 0a20 2020 2069 6620 686c      )..    if hl
+00003b00: 656e 203d 3d20 393a 0a20 2020 2020 2020  en == 9:.       
+00003b10: 2072 6574 7572 6e20 7267 6238 282a 5b69   return rgb8(*[i
+00003b20: 6e74 2868 6578 7374 725b 6964 7820 3a20  nt(hexstr[idx : 
+00003b30: 6964 7820 2b20 325d 2c20 6261 7365 3d31  idx + 2], base=1
+00003b40: 3629 2066 6f72 2069 6478 2069 6e20 7261  6) for idx in ra
+00003b50: 6e67 6528 312c 2068 6c65 6e2c 2032 295d  nge(1, hlen, 2)]
+00003b60: 290a 0a20 2020 2072 6169 7365 2056 616c  )..    raise Val
+00003b70: 7565 4572 726f 7228 6622 7b68 6578 7374  ueError(f"{hexst
+00003b80: 727d 2063 6f75 6c64 206e 6f74 2062 6520  r} could not be 
+00003b90: 696e 7465 7270 7265 7465 6420 6173 2061  interpreted as a
+00003ba0: 2052 4742 2841 2920 6865 7820 7374 7269   RGB(A) hex stri
+00003bb0: 6e67 2229 0a0a 0a64 6566 2063 6f6c 6f72  ng")...def color
+00003bc0: 5f66 726f 6d5f 7267 625f 7374 7269 6e67  _from_rgb_string
+00003bd0: 2872 6762 7374 7229 3a0a 2020 2020 2222  (rgbstr):.    ""
+00003be0: 220a 2020 2020 5061 7273 6520 616e 2052  ".    Parse an R
+00003bf0: 4742 2063 6f6c 6f72 2066 726f 6d20 6120  GB color from a 
+00003c00: 6373 732d 7374 796c 6520 7267 6228 522c  css-style rgb(R,
+00003c10: 2047 2c20 422c 2041 2920 636f 6c6f 7220   G, B, A) color 
+00003c20: 7374 7269 6e67 2e0a 0a20 2020 2041 7267  string...    Arg
+00003c30: 733a 0a20 2020 2020 2020 2072 6762 7374  s:.        rgbst
+00003c40: 7220 2873 7472 293a 206f 6620 7468 6520  r (str): of the 
+00003c50: 666f 726d 2060 7267 6228 522c 2047 2c20  form `rgb(R, G, 
+00003c60: 4229 6020 6f72 2060 7267 6228 522c 2047  B)` or `rgb(R, G
+00003c70: 2c20 422c 2041 2960 2e0a 0a20 2020 2052  , B, A)`...    R
+00003c80: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
+00003c90: 4465 7669 6365 5247 4220 7265 7072 6573  DeviceRGB repres
+00003ca0: 656e 7461 7469 6f6e 206f 6620 7468 6520  entation of the 
+00003cb0: 636f 6c6f 722e 0a20 2020 2022 2222 0a20  color..    """. 
+00003cc0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00003cd0: 616e 6365 2872 6762 7374 722c 2073 7472  ance(rgbstr, str
+00003ce0: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
+00003cf0: 2054 7970 6545 7272 6f72 2866 227b 7267   TypeError(f"{rg
+00003d00: 6273 7472 7d20 6973 206e 6f74 206f 6620  bstr} is not of 
+00003d10: 7479 7065 2073 7472 2229 0a0a 2020 2020  type str")..    
+00003d20: 7267 6273 7472 203d 2072 6762 7374 722e  rgbstr = rgbstr.
+00003d30: 7265 706c 6163 6528 2220 222c 2022 2229  replace(" ", "")
+00003d40: 0a0a 2020 2020 6966 206e 6f74 2072 6762  ..    if not rgb
+00003d50: 7374 722e 7374 6172 7473 7769 7468 2822  str.startswith("
+00003d60: 7267 6228 2229 206f 7220 6e6f 7420 7267  rgb(") or not rg
+00003d70: 6273 7472 2e65 6e64 7377 6974 6828 2229  bstr.endswith(")
+00003d80: 2229 3a0a 2020 2020 2020 2020 7261 6973  "):.        rais
+00003d90: 6520 5661 6c75 6545 7272 6f72 2866 227b  e ValueError(f"{
+00003da0: 7267 6273 7472 7d20 646f 6573 206e 6f74  rgbstr} does not
+00003db0: 2066 6f6c 6c6f 7720 7468 6520 6578 7065   follow the expe
+00003dc0: 6374 6564 2072 6762 282e 2e2e 2920 666f  cted rgb(...) fo
+00003dd0: 726d 6174 2229 0a0a 2020 2020 7267 6273  rmat")..    rgbs
+00003de0: 7472 203d 2072 6762 7374 725b 343a 2d31  tr = rgbstr[4:-1
+00003df0: 5d0a 2020 2020 636f 6c6f 7273 203d 2072  ].    colors = r
+00003e00: 6762 7374 722e 7370 6c69 7428 222c 2229  gbstr.split(",")
+00003e10: 0a0a 2020 2020 6966 206c 656e 2863 6f6c  ..    if len(col
+00003e20: 6f72 7329 203d 3d20 333a 0a20 2020 2020  ors) == 3:.     
+00003e30: 2020 2072 6574 7572 6e20 7267 6238 282a     return rgb8(*
+00003e40: 5b69 6e74 2863 2920 666f 7220 6320 696e  [int(c) for c in
+00003e50: 2063 6f6c 6f72 735d 2c20 613d 4e6f 6e65   colors], a=None
+00003e60: 290a 0a20 2020 2069 6620 6c65 6e28 636f  )..    if len(co
+00003e70: 6c6f 7273 2920 3d3d 2034 3a0a 2020 2020  lors) == 4:.    
+00003e80: 2020 2020 7265 7475 726e 2072 6762 3828      return rgb8(
+00003e90: 2a5b 696e 7428 6329 2066 6f72 2063 2069  *[int(c) for c i
+00003ea0: 6e20 636f 6c6f 7273 5d29 0a0a 2020 2020  n colors])..    
+00003eb0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
+00003ec0: 2866 227b 7267 6273 7472 7d20 636f 756c  (f"{rgbstr} coul
+00003ed0: 6420 6e6f 7420 6265 2069 6e74 6572 7072  d not be interpr
+00003ee0: 6574 6564 2061 7320 6120 7267 6228 522c  eted as a rgb(R,
+00003ef0: 2047 2c20 425b 2c20 415d 2920 636f 6c6f   G, B[, A]) colo
+00003f00: 7222 290a 0a0a 636c 6173 7320 506f 696e  r")...class Poin
+00003f10: 7428 4e61 6d65 6454 7570 6c65 293a 0a20  t(NamedTuple):. 
+00003f20: 2020 2022 2222 0a20 2020 2041 6e20 782d     """.    An x-
+00003f30: 7920 636f 6f72 6469 6e61 7465 2070 6169  y coordinate pai
+00003f40: 7220 7769 7468 696e 2074 6865 2074 776f  r within the two
+00003f50: 2d64 696d 656e 7369 6f6e 616c 2063 6f6f  -dimensional coo
+00003f60: 7264 696e 6174 6520 6672 616d 652e 0a20  rdinate frame.. 
+00003f70: 2020 2022 2222 0a0a 2020 2020 783a 204e     """..    x: N
+00003f80: 756d 6265 720a 2020 2020 2222 2254 6865  umber.    """The
+00003f90: 2061 6273 6369 7373 6120 6f66 2074 6865   abscissa of the
+00003fa0: 2070 6f69 6e74 2e22 2222 0a0a 2020 2020   point."""..    
+00003fb0: 793a 204e 756d 6265 720a 2020 2020 2222  y: Number.    ""
+00003fc0: 2254 6865 206f 7264 696e 6174 6520 6f66  "The ordinate of
+00003fd0: 2074 6865 2070 6f69 6e74 2e22 2222 0a0a   the point."""..
+00003fe0: 2020 2020 6465 6620 7265 6e64 6572 2873      def render(s
+00003ff0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00004000: 2252 656e 6465 7220 7468 6520 706f 696e  "Render the poin
+00004010: 7420 746f 2074 6865 2073 7472 696e 6720  t to the string 
+00004020: 6022 7820 7922 6020 666f 7220 656d 6974  `"x y"` for emit
+00004030: 7469 6e67 2074 6f20 6120 5044 462e 2222  ting to a PDF.""
+00004040: 220a 0a20 2020 2020 2020 2072 6574 7572  "..        retur
+00004050: 6e20 6622 7b6e 756d 6265 725f 746f 5f73  n f"{number_to_s
+00004060: 7472 2873 656c 662e 7829 7d20 7b6e 756d  tr(self.x)} {num
+00004070: 6265 725f 746f 5f73 7472 2873 656c 662e  ber_to_str(self.
+00004080: 7929 7d22 0a0a 2020 2020 6465 6620 646f  y)}"..    def do
+00004090: 7428 7365 6c66 2c20 6f74 6865 7229 3a0a  t(self, other):.
+000040a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000040b0: 2020 2020 436f 6d70 7574 6520 7468 6520      Compute the 
+000040c0: 646f 7420 7072 6f64 7563 7420 6f66 2074  dot product of t
+000040d0: 776f 2070 6f69 6e74 732e 0a0a 2020 2020  wo points...    
+000040e0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+000040f0: 2020 2020 2020 6f74 6865 7220 2850 6f69        other (Poi
+00004100: 6e74 293a 2074 6865 2070 6f69 6e74 2077  nt): the point w
+00004110: 6974 6820 7768 6963 6820 746f 2063 6f6d  ith which to com
+00004120: 7075 7465 2074 6865 2064 6f74 2070 726f  pute the dot pro
+00004130: 6475 6374 2e0a 0a20 2020 2020 2020 2052  duct...        R
+00004140: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
+00004150: 2020 2020 5468 6520 7363 616c 6172 2072      The scalar r
+00004160: 6573 756c 7420 6f66 2074 6865 2064 6f74  esult of the dot
+00004170: 2070 726f 6475 6374 2063 6f6d 7075 7461   product computa
+00004180: 7469 6f6e 2e0a 0a20 2020 2020 2020 2052  tion...        R
+00004190: 6169 7365 733a 0a20 2020 2020 2020 2020  aises:.         
+000041a0: 2020 2054 7970 6545 7272 6f72 3a20 6966     TypeError: if
+000041b0: 2060 6f74 6865 7260 2069 7320 6e6f 7420   `other` is not 
+000041c0: 6120 6050 6f69 6e74 602e 0a20 2020 2020  a `Point`..     
+000041d0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+000041e0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+000041f0: 286f 7468 6572 2c20 506f 696e 7429 3a0a  (other, Point):.
+00004200: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00004210: 6520 5479 7065 4572 726f 7228 6622 6361  e TypeError(f"ca
+00004220: 6e6e 6f74 2064 6f74 2077 6974 6820 7b6f  nnot dot with {o
+00004230: 7468 6572 2172 7d22 290a 0a20 2020 2020  ther!r}")..     
+00004240: 2020 2072 6574 7572 6e20 7365 6c66 2e78     return self.x
+00004250: 202a 206f 7468 6572 2e78 202b 2073 656c   * other.x + sel
+00004260: 662e 7920 2a20 6f74 6865 722e 790a 0a20  f.y * other.y.. 
+00004270: 2020 2064 6566 2061 6e67 6c65 2873 656c     def angle(sel
+00004280: 662c 206f 7468 6572 293a 0a20 2020 2020  f, other):.     
+00004290: 2020 2022 2222 0a20 2020 2020 2020 2043     """.        C
+000042a0: 6f6d 7075 7465 2074 6865 2061 6e67 6c65  ompute the angle
+000042b0: 2062 6574 7765 656e 2074 776f 2070 6f69   between two poi
+000042c0: 6e74 7320 2869 6e74 6572 7072 6574 6564  nts (interpreted
+000042d0: 2061 7320 7665 6374 6f72 7320 6672 6f6d   as vectors from
+000042e0: 2074 6865 206f 7269 6769 6e29 2e0a 0a20   the origin)... 
+000042f0: 2020 2020 2020 2054 6865 2072 6574 7572         The retur
+00004300: 6e20 7661 6c75 6520 6973 2069 6e20 7468  n value is in th
+00004310: 6520 696e 7465 7276 616c 2028 2d70 692c  e interval (-pi,
+00004320: 2070 695d 2e20 5369 676e 2069 7320 6465   pi]. Sign is de
+00004330: 7065 6e64 656e 7420 6f6e 206f 7264 6572  pendent on order
+00004340: 696e 672c 0a20 2020 2020 2020 2077 6974  ing,.        wit
+00004350: 6820 636c 6f63 6b77 6973 6520 616e 676c  h clockwise angl
+00004360: 6520 7472 6176 656c 2063 6f6e 7369 6465  e travel conside
+00004370: 7265 6420 746f 2062 6520 706f 7369 7469  red to be positi
+00004380: 7665 2064 7565 2074 6f20 7468 6520 6f72  ve due to the or
+00004390: 6965 6e74 6174 696f 6e20 6f66 0a20 2020  ientation of.   
+000043a0: 2020 2020 2074 6865 2063 6f6f 7264 696e       the coordin
+000043b0: 6174 6520 6672 616d 6520 6261 7369 7320  ate frame basis 
+000043c0: 7665 6374 6f72 7320 2869 2e65 2e20 7468  vectors (i.e. th
+000043d0: 6520 616e 676c 6520 6265 7477 6565 6e20  e angle between 
+000043e0: 6028 312c 2030 2960 2061 6e64 2060 2830  `(1, 0)` and `(0
+000043f0: 2c20 3129 600a 2020 2020 2020 2020 6973  , 1)`.        is
+00004400: 2060 2b70 692f 3260 2c20 7468 6520 616e   `+pi/2`, the an
+00004410: 676c 6520 6265 7477 6565 6e20 6028 312c  gle between `(1,
+00004420: 2030 2960 2061 6e64 2060 2830 2c20 2d31   0)` and `(0, -1
+00004430: 2960 2069 7320 602d 7069 2f32 602c 2061  )` is `-pi/2`, a
+00004440: 6e64 2074 6865 2061 6e67 6c65 0a20 2020  nd the angle.   
+00004450: 2020 2020 2062 6574 7765 656e 2060 2830       between `(0
+00004460: 2c20 2d31 2960 2061 6e64 2060 2831 2c20  , -1)` and `(1, 
+00004470: 3029 6020 6973 2060 2b70 692f 3260 292e  0)` is `+pi/2`).
+00004480: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00004490: 2020 2020 2020 2020 2020 2020 6f74 6865              othe
+000044a0: 7220 2850 6f69 6e74 293a 2074 6865 2070  r (Point): the p
+000044b0: 6f69 6e74 2074 6f20 636f 6d70 7574 6520  oint to compute 
+000044c0: 7468 6520 616e 676c 6520 7377 6565 7020  the angle sweep 
+000044d0: 746f 7761 7264 2e0a 0a20 2020 2020 2020  toward...       
+000044e0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+000044f0: 2020 2020 2020 5468 6520 7363 616c 6172        The scalar
+00004500: 2061 6e67 6c65 2062 6574 7765 656e 2074   angle between t
+00004510: 6865 2074 776f 2070 6f69 6e74 7320 2a2a  he two points **
+00004520: 696e 2072 6164 6961 6e73 2a2a 2e0a 0a20  in radians**... 
+00004530: 2020 2020 2020 2052 6169 7365 733a 0a20         Raises:. 
+00004540: 2020 2020 2020 2020 2020 2054 7970 6545             TypeE
+00004550: 7272 6f72 3a20 6966 2060 6f74 6865 7260  rror: if `other`
+00004560: 2069 7320 6e6f 7420 6120 6050 6f69 6e74   is not a `Point
+00004570: 602e 0a20 2020 2020 2020 2022 2222 0a0a  `..        """..
+00004580: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00004590: 7369 6e73 7461 6e63 6528 6f74 6865 722c  sinstance(other,
+000045a0: 2050 6f69 6e74 293a 0a20 2020 2020 2020   Point):.       
+000045b0: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+000045c0: 7272 6f72 2866 2263 616e 6e6f 7420 636f  rror(f"cannot co
+000045d0: 6d70 7574 6520 616e 676c 6520 7769 7468  mpute angle with
+000045e0: 207b 6f74 6865 7221 727d 2229 0a0a 2020   {other!r}")..  
+000045f0: 2020 2020 2020 7369 676e 6966 6965 7220        signifier 
+00004600: 3d20 2873 656c 662e 7820 2a20 6f74 6865  = (self.x * othe
+00004610: 722e 7929 202d 2028 7365 6c66 2e79 202a  r.y) - (self.y *
+00004620: 206f 7468 6572 2e78 290a 2020 2020 2020   other.x).      
+00004630: 2020 7369 676e 203d 2028 7369 676e 6966    sign = (signif
+00004640: 6965 7220 3e3d 2030 2920 2d20 2873 6967  ier >= 0) - (sig
+00004650: 6e69 6669 6572 203c 2030 290a 2020 2020  nifier < 0).    
+00004660: 2020 2020 7265 7475 726e 2073 6967 6e20      return sign 
+00004670: 2a20 6d61 7468 2e61 636f 7328 726f 756e  * math.acos(roun
+00004680: 6428 7365 6c66 2e64 6f74 286f 7468 6572  d(self.dot(other
+00004690: 2920 2f20 2873 656c 662e 6d61 6728 2920  ) / (self.mag() 
+000046a0: 2a20 6f74 6865 722e 6d61 6728 2929 2c20  * other.mag()), 
+000046b0: 3829 290a 0a20 2020 2064 6566 206d 6167  8))..    def mag
+000046c0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000046d0: 2222 220a 2020 2020 2020 2020 436f 6d70  """.        Comp
+000046e0: 7574 6520 7468 6520 4361 7274 6573 6961  ute the Cartesia
+000046f0: 6e20 6469 7374 616e 6365 2066 726f 6d20  n distance from 
+00004700: 7468 6973 2070 6f69 6e74 2074 6f20 7468  this point to th
+00004710: 6520 6f72 6967 696e 0a0a 2020 2020 2020  e origin..      
+00004720: 2020 5468 6973 2069 7320 7468 6520 7361    This is the sa
+00004730: 6d65 2061 7320 636f 6d70 7574 696e 6720  me as computing 
+00004740: 7468 6520 6d61 676e 6974 7564 6520 6f66  the magnitude of
+00004750: 2074 6865 2076 6563 746f 7220 7265 7072   the vector repr
+00004760: 6573 656e 7465 6420 6279 2074 6869 730a  esented by this.
+00004770: 2020 2020 2020 2020 706f 696e 742e 0a0a          point...
+00004780: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+00004790: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+000047a0: 2073 6361 6c61 7220 7265 7375 6c74 206f   scalar result o
+000047b0: 6620 7468 6520 6469 7374 616e 6365 2063  f the distance c
+000047c0: 6f6d 7075 7461 7469 6f6e 2e0a 2020 2020  omputation..    
+000047d0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+000047e0: 2072 6574 7572 6e20 2873 656c 662e 782a   return (self.x*
+000047f0: 2a32 202b 2073 656c 662e 792a 2a32 2920  *2 + self.y**2) 
+00004800: 2a2a 2030 2e35 0a0a 2020 2020 4066 6f72  ** 0.5..    @for
+00004810: 6365 5f64 6f63 756d 656e 740a 2020 2020  ce_document.    
+00004820: 6465 6620 5f5f 6164 645f 5f28 7365 6c66  def __add__(self
+00004830: 2c20 6f74 6865 7229 3a0a 2020 2020 2020  , other):.      
+00004840: 2020 2222 220a 2020 2020 2020 2020 5072    """.        Pr
+00004850: 6f64 7563 6520 7468 6520 7375 6d20 6f66  oduce the sum of
+00004860: 2074 776f 2070 6f69 6e74 732e 0a0a 2020   two points...  
+00004870: 2020 2020 2020 4164 6469 6e67 2074 776f        Adding two
+00004880: 2070 6f69 6e74 7320 6973 2074 6865 2073   points is the s
+00004890: 616d 6520 6173 2074 7261 6e73 6c61 7469  ame as translati
+000048a0: 6e67 2074 6865 2073 6f75 7263 6520 706f  ng the source po
+000048b0: 696e 7420 6279 2069 6e74 6572 7072 6574  int by interpret
+000048c0: 696e 670a 2020 2020 2020 2020 7468 6520  ing.        the 
+000048d0: 6f74 6865 7220 706f 696e 7427 7320 7820  other point's x 
+000048e0: 616e 6420 7920 636f 6f72 6469 6e61 7465  and y coordinate
+000048f0: 7320 6173 2064 6973 7461 6e63 6573 2e0a  s as distances..
+00004900: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00004910: 2020 2020 2020 2020 2020 206f 7468 6572             other
+00004920: 2028 506f 696e 7429 3a20 7269 6768 742d   (Point): right-
+00004930: 6861 6e64 2073 6964 6520 6f66 2074 6865  hand side of the
+00004940: 2069 6e66 6978 2061 6464 6974 696f 6e20   infix addition 
+00004950: 6f70 6572 6174 696f 6e0a 0a20 2020 2020  operation..     
+00004960: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00004970: 2020 2020 2020 2020 4120 506f 696e 7420          A Point 
+00004980: 7768 6963 6820 6973 2074 6865 2073 756d  which is the sum
+00004990: 206f 6620 7468 6520 7477 6f20 736f 7572   of the two sour
+000049a0: 6365 2070 6f69 6e74 732e 0a20 2020 2020  ce points..     
+000049b0: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+000049c0: 6620 6973 696e 7374 616e 6365 286f 7468  f isinstance(oth
+000049d0: 6572 2c20 506f 696e 7429 3a0a 2020 2020  er, Point):.    
+000049e0: 2020 2020 2020 2020 7265 7475 726e 2050          return P
+000049f0: 6f69 6e74 2878 3d73 656c 662e 7820 2b20  oint(x=self.x + 
+00004a00: 6f74 6865 722e 782c 2079 3d73 656c 662e  other.x, y=self.
+00004a10: 7920 2b20 6f74 6865 722e 7929 0a0a 2020  y + other.y)..  
+00004a20: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
+00004a30: 496d 706c 656d 656e 7465 640a 0a20 2020  Implemented..   
+00004a40: 2040 666f 7263 655f 646f 6375 6d65 6e74   @force_document
+00004a50: 0a20 2020 2064 6566 205f 5f73 7562 5f5f  .    def __sub__
+00004a60: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
+00004a70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00004a80: 2020 2050 726f 6475 6365 2074 6865 2064     Produce the d
+00004a90: 6966 6665 7265 6e63 6520 6265 7477 6565  ifference betwee
+00004aa0: 6e20 7477 6f20 706f 696e 7473 2e0a 0a20  n two points... 
+00004ab0: 2020 2020 2020 2055 6e6c 696b 6520 6164         Unlike ad
+00004ac0: 6469 7469 6f6e 2c20 7468 6973 2069 7320  dition, this is 
+00004ad0: 6e6f 7420 6120 636f 6d6d 7574 6174 6976  not a commutativ
+00004ae0: 6520 6f70 6572 6174 696f 6e21 0a0a 2020  e operation!..  
+00004af0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00004b00: 2020 2020 2020 2020 6f74 6865 7220 2850          other (P
+00004b10: 6f69 6e74 293a 2072 6967 6874 2d68 616e  oint): right-han
+00004b20: 6420 7369 6465 206f 6620 7468 6520 696e  d side of the in
+00004b30: 6669 7820 7375 6274 7261 6374 696f 6e20  fix subtraction 
+00004b40: 6f70 6572 6174 696f 6e0a 0a20 2020 2020  operation..     
+00004b50: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00004b60: 2020 2020 2020 2020 4120 506f 696e 7420          A Point 
+00004b70: 7768 6963 6820 6973 2074 6865 2064 6966  which is the dif
+00004b80: 6665 7265 6e63 6520 6f66 2074 6865 2074  ference of the t
+00004b90: 776f 2073 6f75 7263 6520 706f 696e 7473  wo source points
+00004ba0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00004bb0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00004bc0: 6e63 6528 6f74 6865 722c 2050 6f69 6e74  nce(other, Point
+00004bd0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00004be0: 6574 7572 6e20 506f 696e 7428 783d 7365  eturn Point(x=se
+00004bf0: 6c66 2e78 202d 206f 7468 6572 2e78 2c20  lf.x - other.x, 
+00004c00: 793d 7365 6c66 2e79 202d 206f 7468 6572  y=self.y - other
+00004c10: 2e79 290a 0a20 2020 2020 2020 2072 6574  .y)..        ret
+00004c20: 7572 6e20 4e6f 7449 6d70 6c65 6d65 6e74  urn NotImplement
+00004c30: 6564 0a0a 2020 2020 4066 6f72 6365 5f64  ed..    @force_d
+00004c40: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+00004c50: 5f5f 6e65 675f 5f28 7365 6c66 293a 0a20  __neg__(self):. 
+00004c60: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00004c70: 2020 2050 726f 6475 6365 2061 2070 6f69     Produce a poi
+00004c80: 6e74 2062 7920 6e65 6761 7469 6e67 2074  nt by negating t
+00004c90: 6869 7320 706f 696e 7427 7320 636f 6f72  his point's coor
+00004ca0: 6469 6e61 7465 732e 0a0a 2020 2020 2020  dinates...      
+00004cb0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+00004cc0: 2020 2020 2020 2041 2050 6f69 6e74 2077         A Point w
+00004cd0: 686f 7365 2063 6f6f 7264 696e 6174 6573  hose coordinates
+00004ce0: 2061 7265 2074 6869 7320 706f 696e 7473   are this points
+00004cf0: 2063 6f6f 7264 696e 6174 6573 206e 6567   coordinates neg
+00004d00: 6174 6564 2e0a 2020 2020 2020 2020 2222  ated..        ""
+00004d10: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00004d20: 2050 6f69 6e74 2878 3d2d 7365 6c66 2e78   Point(x=-self.x
+00004d30: 2c20 793d 2d73 656c 662e 7929 0a0a 2020  , y=-self.y)..  
+00004d40: 2020 4066 6f72 6365 5f64 6f63 756d 656e    @force_documen
+00004d50: 740a 2020 2020 6465 6620 5f5f 6d75 6c5f  t.    def __mul_
+00004d60: 5f28 7365 6c66 2c20 6f74 6865 7229 3a0a  _(self, other):.
+00004d70: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00004d80: 2020 2020 4d75 6c74 6970 6c79 2061 2070      Multiply a p
+00004d90: 6f69 6e74 2062 7920 6120 7363 616c 6172  oint by a scalar
+00004da0: 2076 616c 7565 2e0a 0a20 2020 2020 2020   value...       
+00004db0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+00004dc0: 2020 206f 7468 6572 2028 4e75 6d62 6572     other (Number
+00004dd0: 293a 2074 6865 2073 6361 6c61 7220 7661  ): the scalar va
+00004de0: 6c75 6520 6279 2077 6869 6368 2074 6f20  lue by which to 
+00004df0: 6d75 6c74 6970 6c79 2074 6865 2070 6f69  multiply the poi
+00004e00: 6e74 2773 0a20 2020 2020 2020 2020 2020  nt's.           
+00004e10: 2020 2020 2063 6f6f 7264 696e 6174 6573       coordinates
+00004e20: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00004e30: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00004e40: 4120 506f 696e 7420 7768 6f73 6520 636f  A Point whose co
+00004e50: 6f72 6469 6e61 7465 7320 6172 6520 7468  ordinates are th
+00004e60: 6520 7265 7375 6c74 206f 6620 7468 6520  e result of the 
+00004e70: 6d75 6c74 6970 6c69 6361 7469 6f6e 2e0a  multiplication..
+00004e80: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00004e90: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00004ea0: 6528 6f74 6865 722c 204e 756d 6265 7243  e(other, NumberC
+00004eb0: 6c61 7373 293a 0a20 2020 2020 2020 2020  lass):.         
+00004ec0: 2020 2072 6574 7572 6e20 506f 696e 7428     return Point(
+00004ed0: 7365 6c66 2e78 202a 206f 7468 6572 2c20  self.x * other, 
+00004ee0: 7365 6c66 2e79 202a 206f 7468 6572 290a  self.y * other).
+00004ef0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004f00: 4e6f 7449 6d70 6c65 6d65 6e74 6564 0a0a  NotImplemented..
+00004f10: 2020 2020 5f5f 726d 756c 5f5f 203d 205f      __rmul__ = _
+00004f20: 5f6d 756c 5f5f 0a0a 2020 2020 4066 6f72  _mul__..    @for
+00004f30: 6365 5f64 6f63 756d 656e 740a 2020 2020  ce_document.    
+00004f40: 6465 6620 5f5f 7472 7565 6469 765f 5f28  def __truediv__(
+00004f50: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
+00004f60: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00004f70: 2020 4469 7669 6465 2061 2070 6f69 6e74    Divide a point
+00004f80: 2062 7920 6120 7363 616c 6172 2076 616c   by a scalar val
+00004f90: 7565 2e0a 0a20 2020 2020 2020 202e 2e20  ue...        .. 
+00004fa0: 6e6f 7465 3a3a 0a0a 2020 2020 2020 2020  note::..        
+00004fb0: 2020 2020 4265 6361 7573 6520 6469 7669      Because divi
+00004fc0: 7369 6f6e 2069 7320 6e6f 7420 636f 6d6d  sion is not comm
+00004fd0: 7574 6174 6976 652c 2060 506f 696e 7420  utative, `Point 
+00004fe0: 2f20 7363 616c 6172 6020 6973 2069 6d70  / scalar` is imp
+00004ff0: 6c65 6d65 6e74 6564 2c20 6275 740a 2020  lemented, but.  
+00005000: 2020 2020 2020 2020 2020 6073 6361 6c61            `scala
+00005010: 7220 2f20 506f 696e 7460 2069 7320 6e6f  r / Point` is no
+00005020: 6e73 656e 7369 6361 6c20 616e 6420 6e6f  nsensical and no
+00005030: 7420 696d 706c 656d 656e 7465 642e 0a0a  t implemented...
+00005040: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00005050: 2020 2020 2020 2020 2020 6f74 6865 7220            other 
+00005060: 284e 756d 6265 7229 3a20 7468 6520 7363  (Number): the sc
+00005070: 616c 6172 2076 616c 7565 2062 7920 7768  alar value by wh
+00005080: 6963 6820 746f 2064 6976 6964 6520 7468  ich to divide th
+00005090: 6520 706f 696e 7427 7320 636f 6f72 6469  e point's coordi
+000050a0: 6e61 7465 732e 0a0a 2020 2020 2020 2020  nates...        
+000050b0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
+000050c0: 2020 2020 2041 2050 6f69 6e74 2077 686f       A Point who
+000050d0: 7365 2063 6f6f 7264 696e 6174 6573 2061  se coordinates a
+000050e0: 7265 2074 6865 2072 6573 756c 7420 6f66  re the result of
+000050f0: 2074 6865 2064 6976 6973 696f 6e2e 0a20   the division.. 
+00005100: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00005110: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00005120: 286f 7468 6572 2c20 4e75 6d62 6572 436c  (other, NumberCl
+00005130: 6173 7329 3a0a 2020 2020 2020 2020 2020  ass):.          
+00005140: 2020 7265 7475 726e 2050 6f69 6e74 2873    return Point(s
+00005150: 656c 662e 7820 2f20 6f74 6865 722c 2073  elf.x / other, s
+00005160: 656c 662e 7920 2f20 6f74 6865 7229 0a0a  elf.y / other)..
+00005170: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00005180: 6f74 496d 706c 656d 656e 7465 640a 0a20  otImplemented.. 
+00005190: 2020 2040 666f 7263 655f 646f 6375 6d65     @force_docume
+000051a0: 6e74 0a20 2020 2064 6566 205f 5f66 6c6f  nt.    def __flo
+000051b0: 6f72 6469 765f 5f28 7365 6c66 2c20 6f74  ordiv__(self, ot
+000051c0: 6865 7229 3a0a 2020 2020 2020 2020 2222  her):.        ""
+000051d0: 220a 2020 2020 2020 2020 4469 7669 6465  ".        Divide
+000051e0: 2061 2070 6f69 6e74 2062 7920 6120 7363   a point by a sc
+000051f0: 616c 6172 2076 616c 7565 2075 7369 6e67  alar value using
+00005200: 2069 6e74 6567 6572 2064 6976 6973 696f   integer divisio
+00005210: 6e2e 0a0a 2020 2020 2020 2020 2e2e 206e  n...        .. n
+00005220: 6f74 653a 3a0a 0a20 2020 2020 2020 2020  ote::..         
+00005230: 2020 2042 6563 6175 7365 2064 6976 6973     Because divis
+00005240: 696f 6e20 6973 206e 6f74 2063 6f6d 6d75  ion is not commu
+00005250: 7461 7469 7665 2c20 6050 6f69 6e74 202f  tative, `Point /
+00005260: 2f20 7363 616c 6172 6020 6973 2069 6d70  / scalar` is imp
+00005270: 6c65 6d65 6e74 6564 2c20 6275 740a 2020  lemented, but.  
+00005280: 2020 2020 2020 2020 2020 6073 6361 6c61            `scala
+00005290: 7220 2f2f 2050 6f69 6e74 6020 6973 206e  r // Point` is n
+000052a0: 6f6e 7365 6e73 6963 616c 2061 6e64 206e  onsensical and n
+000052b0: 6f74 2069 6d70 6c65 6d65 6e74 6564 2e0a  ot implemented..
+000052c0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+000052d0: 2020 2020 2020 2020 2020 206f 7468 6572             other
+000052e0: 2028 4e75 6d62 6572 293a 2074 6865 2073   (Number): the s
+000052f0: 6361 6c61 7220 7661 6c75 6520 6279 2077  calar value by w
+00005300: 6869 6368 2074 6f20 6469 7669 6465 2074  hich to divide t
+00005310: 6865 2070 6f69 6e74 2773 2063 6f6f 7264  he point's coord
+00005320: 696e 6174 6573 2e0a 0a20 2020 2020 2020  inates...       
+00005330: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00005340: 2020 2020 2020 4120 506f 696e 7420 7768        A Point wh
+00005350: 6f73 6520 636f 6f72 6469 6e61 7465 7320  ose coordinates 
+00005360: 6172 6520 7468 6520 7265 7375 6c74 206f  are the result o
+00005370: 6620 7468 6520 6469 7669 7369 6f6e 2e0a  f the division..
+00005380: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00005390: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000053a0: 6528 6f74 6865 722c 204e 756d 6265 7243  e(other, NumberC
+000053b0: 6c61 7373 293a 0a20 2020 2020 2020 2020  lass):.         
+000053c0: 2020 2072 6574 7572 6e20 506f 696e 7428     return Point(
+000053d0: 7365 6c66 2e78 202f 2f20 6f74 6865 722c  self.x // other,
+000053e0: 2073 656c 662e 7920 2f2f 206f 7468 6572   self.y // other
+000053f0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00005400: 6e20 4e6f 7449 6d70 6c65 6d65 6e74 6564  n NotImplemented
+00005410: 0a0a 2020 2020 2320 6e6f 205f 5f72 2874  ..    # no __r(t
+00005420: 7275 657c 666c 6f6f 7229 6469 765f 5f20  rue|floor)div__ 
+00005430: 6265 6361 7573 6520 6469 7669 7369 6f6e  because division
+00005440: 2069 7320 6e6f 7420 636f 6d6d 7574 6174   is not commutat
+00005450: 6976 6521 0a0a 2020 2020 4066 6f72 6365  ive!..    @force
+00005460: 5f64 6f63 756d 656e 740a 2020 2020 6465  _document.    de
+00005470: 6620 5f5f 6d61 746d 756c 5f5f 2873 656c  f __matmul__(sel
+00005480: 662c 206f 7468 6572 293a 0a20 2020 2020  f, other):.     
+00005490: 2020 2022 2222 0a20 2020 2020 2020 2054     """.        T
+000054a0: 7261 6e73 666f 726d 2061 2070 6f69 6e74  ransform a point
+000054b0: 2077 6974 6820 7468 6520 6769 7665 6e20   with the given 
+000054c0: 7472 616e 7366 6f72 6d20 6d61 7472 6978  transform matrix
+000054d0: 2e0a 0a20 2020 2020 2020 202e 2e20 6e6f  ...        .. no
+000054e0: 7465 3a3a 0a20 2020 2020 2020 2020 2020  te::.           
+000054f0: 2054 6869 7320 6f70 6572 6174 6f72 2069   This operator i
+00005500: 7320 6f6e 6c79 2069 6d70 6c65 6d65 6e74  s only implement
+00005510: 6564 2066 6f72 2054 7261 6e73 666f 726d  ed for Transform
+00005520: 732e 2054 6869 7320 7472 616e 7366 6f72  s. This transfor
+00005530: 6d20 6973 206e 6f74 0a20 2020 2020 2020  m is not.       
+00005540: 2020 2020 2063 6f6d 6d75 7461 7469 7665       commutative
+00005550: 2c20 736f 2060 506f 696e 7420 4020 5472  , so `Point @ Tr
+00005560: 616e 7366 6f72 6d60 2069 7320 696d 706c  ansform` is impl
+00005570: 656d 656e 7465 642c 2062 7574 2060 5472  emented, but `Tr
+00005580: 616e 7366 6f72 6d20 4020 506f 696e 7460  ansform @ Point`
+00005590: 0a20 2020 2020 2020 2020 2020 2069 7320  .            is 
+000055a0: 6e6f 7420 696d 706c 656d 656e 7465 6420  not implemented 
+000055b0: 2874 6563 686e 6963 616c 6c79 2073 7065  (technically spe
+000055c0: 616b 696e 672c 2074 6865 2063 7572 7265  aking, the curre
+000055d0: 6e74 2069 6d70 6c65 6d65 6e74 6174 696f  nt implementatio
+000055e0: 6e20 6973 0a20 2020 2020 2020 2020 2020  n is.           
+000055f0: 2063 6f6d 6d75 7461 7469 7665 2062 6563   commutative bec
+00005600: 6175 7365 206f 6620 7468 6520 7761 7920  ause of the way 
+00005610: 706f 696e 7473 2061 6e64 2074 7261 6e73  points and trans
+00005620: 666f 726d 7320 6172 6520 7265 7072 6573  forms are repres
+00005630: 656e 7465 642c 2062 7574 0a20 2020 2020  ented, but.     
+00005640: 2020 2020 2020 2069 6620 7468 6174 2072         if that r
+00005650: 6570 7265 7365 6e74 6174 696f 6e20 7765  epresentation we
+00005660: 7265 2074 6f20 6368 616e 6765 2074 6869  re to change thi
+00005670: 7320 6f70 6572 6174 696f 6e20 636f 756c  s operation coul
+00005680: 6420 7374 6f70 2062 6569 6e67 0a20 2020  d stop being.   
+00005690: 2020 2020 2020 2020 2063 6f6d 6d75 7461           commuta
+000056a0: 7469 7665 290a 0a20 2020 2020 2020 2041  tive)..        A
+000056b0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+000056c0: 206f 7468 6572 2028 5472 616e 7366 6f72   other (Transfor
+000056d0: 6d29 3a20 7468 6520 7472 616e 7366 6f72  m): the transfor
+000056e0: 6d20 746f 2061 7070 6c79 2074 6f20 7468  m to apply to th
+000056f0: 6520 706f 696e 740a 0a20 2020 2020 2020  e point..       
+00005700: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00005710: 2020 2020 2020 4120 506f 696e 7420 7768        A Point wh
+00005720: 6f73 6520 636f 6f72 6469 6e61 7465 7320  ose coordinates 
+00005730: 6172 6520 7468 6520 7265 7375 6c74 206f  are the result o
+00005740: 6620 6170 706c 7969 6e67 2074 6865 2074  f applying the t
+00005750: 7261 6e73 666f 726d 2e0a 2020 2020 2020  ransform..      
+00005760: 2020 2222 220a 2020 2020 2020 2020 6966    """.        if
+00005770: 2069 7369 6e73 7461 6e63 6528 6f74 6865   isinstance(othe
+00005780: 722c 2054 7261 6e73 666f 726d 293a 0a20  r, Transform):. 
+00005790: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000057a0: 6e20 506f 696e 7428 0a20 2020 2020 2020  n Point(.       
+000057b0: 2020 2020 2020 2020 2078 3d6f 7468 6572           x=other
+000057c0: 2e61 202a 2073 656c 662e 7820 2b20 6f74  .a * self.x + ot
+000057d0: 6865 722e 6320 2a20 7365 6c66 2e79 202b  her.c * self.y +
+000057e0: 206f 7468 6572 2e65 2c0a 2020 2020 2020   other.e,.      
+000057f0: 2020 2020 2020 2020 2020 793d 6f74 6865            y=othe
+00005800: 722e 6220 2a20 7365 6c66 2e78 202b 206f  r.b * self.x + o
+00005810: 7468 6572 2e64 202a 2073 656c 662e 7920  ther.d * self.y 
+00005820: 2b20 6f74 6865 722e 662c 0a20 2020 2020  + other.f,.     
+00005830: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00005840: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
+00005850: 656d 656e 7465 640a 0a20 2020 2064 6566  emented..    def
+00005860: 205f 5f73 7472 5f5f 2873 656c 6629 3a0a   __str__(self):.
+00005870: 2020 2020 2020 2020 7265 7475 726e 2066          return f
+00005880: 2228 783d 7b6e 756d 6265 725f 746f 5f73  "(x={number_to_s
+00005890: 7472 2873 656c 662e 7829 7d2c 2079 3d7b  tr(self.x)}, y={
+000058a0: 6e75 6d62 6572 5f74 6f5f 7374 7228 7365  number_to_str(se
+000058b0: 6c66 2e79 297d 2922 0a0a 0a63 6c61 7373  lf.y)})"...class
+000058c0: 2054 7261 6e73 666f 726d 284e 616d 6564   Transform(Named
+000058d0: 5475 706c 6529 3a0a 2020 2020 2222 220a  Tuple):.    """.
+000058e0: 2020 2020 4120 7265 7072 6573 656e 7461      A representa
+000058f0: 7469 6f6e 206f 6620 616e 2061 6666 696e  tion of an affin
+00005900: 6520 7472 616e 7366 6f72 6d61 7469 6f6e  e transformation
+00005910: 206d 6174 7269 7820 666f 7220 3244 2073   matrix for 2D s
+00005920: 6861 7065 732e 0a0a 2020 2020 5468 6520  hapes...    The 
+00005930: 6163 7475 616c 206d 6174 7269 7820 6973  actual matrix is
+00005940: 3a0a 0a20 2020 2060 6060 0a20 2020 2020  :..    ```.     
+00005950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005960: 2020 205b 2061 2062 2030 205d 0a20 2020     [ a b 0 ].   
+00005970: 205b 7827 2079 2720 315d 203d 205b 7820   [x' y' 1] = [x 
+00005980: 7920 315d 205b 2063 2064 2030 205d 0a20  y 1] [ c d 0 ]. 
+00005990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059a0: 2020 2020 2020 205b 2065 2066 2031 205d         [ e f 1 ]
+000059b0: 0a20 2020 2060 6060 0a0a 2020 2020 436f  .    ```..    Co
+000059c0: 6d70 6c65 7820 7472 616e 7366 6f72 6d61  mplex transforma
+000059d0: 7469 6f6e 206f 7065 7261 7469 6f6e 7320  tion operations 
+000059e0: 6361 6e20 6265 2063 6f6d 706f 7365 6420  can be composed 
+000059f0: 7669 6120 6120 7365 7175 656e 6365 206f  via a sequence o
+00005a00: 6620 7369 6d70 6c65 0a20 2020 2074 7261  f simple.    tra
+00005a10: 6e73 666f 726d 6174 696f 6e73 2062 7920  nsformations by 
+00005a20: 7065 7266 6f72 6d69 6e67 2073 7563 6365  performing succe
+00005a30: 7373 6976 6520 6d61 7472 6978 206d 756c  ssive matrix mul
+00005a40: 7469 706c 6963 6174 696f 6e20 6f66 2074  tiplication of t
+00005a50: 6865 2073 696d 706c 650a 2020 2020 7472  he simple.    tr
+00005a60: 616e 7366 6f72 6d61 7469 6f6e 732e 0a0a  ansformations...
+00005a70: 2020 2020 466f 7220 6578 616d 706c 652c      For example,
+00005a80: 2073 6361 6c69 6e67 2061 2073 6574 206f   scaling a set o
+00005a90: 6620 706f 696e 7473 2061 726f 756e 6420  f points around 
+00005aa0: 6120 7370 6563 6966 6963 2063 656e 7465  a specific cente
+00005ab0: 7220 706f 696e 7420 6361 6e20 6265 0a20  r point can be. 
+00005ac0: 2020 2072 6570 7265 7365 6e74 6564 2062     represented b
+00005ad0: 7920 6120 7472 616e 736c 6174 696f 6e2d  y a translation-
+00005ae0: 7363 616c 652d 7472 616e 736c 6174 696f  scale-translatio
+00005af0: 6e20 7365 7175 656e 6365 2c20 7768 6572  n sequence, wher
+00005b00: 6520 7468 6520 6669 7273 740a 2020 2020  e the first.    
+00005b10: 7472 616e 736c 6174 696f 6e20 7472 616e  translation tran
+00005b20: 736c 6174 6573 2074 6865 2063 656e 7465  slates the cente
+00005b30: 7220 746f 2074 6865 206f 7269 6769 6e2c  r to the origin,
+00005b40: 2074 6865 2073 6361 6c65 2074 7261 6e73   the scale trans
+00005b50: 666f 726d 2073 6361 6c65 7320 7468 650a  form scales the.
+00005b60: 2020 2020 706f 696e 7473 2072 656c 6174      points relat
+00005b70: 6976 6520 746f 2074 6865 206f 7269 6769  ive to the origi
+00005b80: 6e2c 2061 6e64 2074 6865 2073 6563 6f6e  n, and the secon
+00005b90: 6420 7472 616e 736c 6174 696f 6e20 7472  d translation tr
+00005ba0: 616e 736c 6174 6573 2074 6865 2070 6f69  anslates the poi
+00005bb0: 6e74 730a 2020 2020 6261 636b 2074 6f20  nts.    back to 
+00005bc0: 7468 6520 7370 6563 6966 6965 6420 6365  the specified ce
+00005bd0: 6e74 6572 2070 6f69 6e74 2e20 5472 616e  nter point. Tran
+00005be0: 7366 6f72 6d20 6d75 6c74 6970 6c69 6361  sform multiplica
+00005bf0: 7469 6f6e 2069 7320 7065 7266 6f72 6d65  tion is performe
+00005c00: 6420 7573 696e 670a 2020 2020 7079 7468  d using.    pyth
+00005c10: 6f6e 2773 2064 6564 6963 6174 6564 206d  on's dedicated m
+00005c20: 6174 7269 7820 6d75 6c74 6970 6c69 6361  atrix multiplica
+00005c30: 7469 6f6e 206f 7065 7261 746f 722c 2060  tion operator, `
+00005c40: 4060 0a0a 2020 2020 5468 6520 7365 6d61  @`..    The sema
+00005c50: 6e74 6963 7320 6f66 2074 6869 7320 7265  ntics of this re
+00005c60: 7072 6573 656e 7461 7469 6f6e 206d 6561  presentation mea
+00005c70: 6e20 636f 6d70 6f73 6564 2074 7261 6e73  n composed trans
+00005c80: 666f 726d 6174 696f 6e73 2061 7265 2073  formations are s
+00005c90: 7065 6369 6669 6564 0a20 2020 206c 6566  pecified.    lef
+00005ca0: 742d 746f 2d72 6967 6874 2069 6e20 6f72  t-to-right in or
+00005cb0: 6465 7220 6f66 2061 7070 6c69 6361 7469  der of applicati
+00005cc0: 6f6e 2028 736f 6d65 206f 7468 6572 2073  on (some other s
+00005cd0: 7973 7465 6d73 2070 726f 7669 6465 2074  ystems provide t
+00005ce0: 7261 6e73 706f 7365 640a 2020 2020 7265  ransposed.    re
+00005cf0: 7072 6573 656e 7461 7469 6f6e 732c 2069  presentations, i
+00005d00: 6e20 7768 6963 6820 6361 7365 2074 6865  n which case the
+00005d10: 2061 7070 6c69 6361 7469 6f6e 206f 7264   application ord
+00005d20: 6572 2069 7320 7269 6768 742d 746f 2d6c  er is right-to-l
+00005d30: 6566 7429 2e0a 0a20 2020 2046 6f72 2065  eft)...    For e
+00005d40: 7861 6d70 6c65 2c20 746f 2072 6f74 6174  xample, to rotat
+00005d50: 6520 7468 6520 7371 7561 7265 2060 2831  e the square `(1
+00005d60: 2c31 2920 2831 2c33 2920 2833 2c33 2920  ,1) (1,3) (3,3) 
+00005d70: 2833 2c31 2960 2034 3520 6465 6772 6565  (3,1)` 45 degree
+00005d80: 7320 636c 6f63 6b77 6973 650a 2020 2020  s clockwise.    
+00005d90: 6162 6f75 7420 6974 7320 6365 6e74 6572  about its center
+00005da0: 2070 6f69 6e74 2028 7768 6963 6820 6973   point (which is
+00005db0: 2060 2832 2c32 2960 2920 2c20 7468 6520   `(2,2)`) , the 
+00005dc0: 7472 616e 736c 6174 652d 726f 7461 7465  translate-rotate
+00005dd0: 2d74 7261 6e73 6c61 7465 0a20 2020 2070  -translate.    p
+00005de0: 726f 6365 7373 2064 6573 6372 6962 6564  rocess described
+00005df0: 2061 626f 7665 206d 6179 2062 6520 6170   above may be ap
+00005e00: 706c 6965 643a 0a0a 2020 2020 6060 6070  plied:..    ```p
+00005e10: 7974 686f 6e0a 2020 2020 726f 7461 7465  ython.    rotate
+00005e20: 5f63 656e 7465 7265 6420 3d20 280a 2020  _centered = (.  
+00005e30: 2020 2020 2020 5472 616e 7366 6f72 6d2e        Transform.
+00005e40: 7472 616e 736c 6174 696f 6e28 2d32 2c20  translation(-2, 
+00005e50: 2d32 290a 2020 2020 2020 2020 4020 5472  -2).        @ Tr
+00005e60: 616e 7366 6f72 6d2e 726f 7461 7469 6f6e  ansform.rotation
+00005e70: 5f64 2834 3529 0a20 2020 2020 2020 2040  _d(45).        @
+00005e80: 2054 7261 6e73 666f 726d 2e74 7261 6e73   Transform.trans
+00005e90: 6c61 7469 6f6e 2832 2c20 3229 0a20 2020  lation(2, 2).   
+00005ea0: 2029 0a20 2020 2060 6060 0a0a 2020 2020   ).    ```..    
+00005eb0: 496e 7374 616e 6365 7320 6f66 2074 6869  Instances of thi
+00005ec0: 7320 636c 6173 7320 7072 6f76 6964 6520  s class provide 
+00005ed0: 6120 6368 6169 6e69 6e67 2041 5049 2c20  a chaining API, 
+00005ee0: 736f 2074 6865 2061 626f 7665 2074 7261  so the above tra
+00005ef0: 6e73 666f 726d 2063 6f75 6c64 2061 6c73  nsform could als
+00005f00: 6f20 6265 0a20 2020 2063 6f6e 7374 7275  o be.    constru
+00005f10: 6374 6564 2061 7320 666f 6c6c 6f77 733a  cted as follows:
+00005f20: 0a0a 2020 2020 6060 6070 7974 686f 6e0a  ..    ```python.
+00005f30: 2020 2020 726f 7461 7465 5f63 656e 7465      rotate_cente
+00005f40: 7265 6420 3d20 5472 616e 7366 6f72 6d2e  red = Transform.
+00005f50: 7472 616e 736c 6174 696f 6e28 2d32 2c20  translation(-2, 
+00005f60: 2d32 292e 726f 7461 7465 5f64 2834 3529  -2).rotate_d(45)
+00005f70: 2e74 7261 6e73 6c61 7465 2832 2c20 3229  .translate(2, 2)
+00005f80: 0a20 2020 2060 6060 0a0a 2020 2020 4f72  .    ```..    Or
+00005f90: 2c20 6265 6361 7573 6520 7468 6520 7061  , because the pa
+00005fa0: 7274 6963 756c 6172 206f 7065 7261 7469  rticular operati
+00005fb0: 6f6e 206f 6620 7065 7266 6f72 6d69 6e67  on of performing
+00005fc0: 2073 6f6d 6520 7472 616e 7366 6f72 6d61   some transforma
+00005fd0: 7469 6f6e 7320 6162 6f75 7420 610a 2020  tions about a.  
+00005fe0: 2020 7370 6563 6966 6963 2070 6f69 6e74    specific point
+00005ff0: 2069 7320 7072 6574 7479 2063 6f6d 6d6f   is pretty commo
+00006000: 6e2c 0a0a 2020 2020 6060 6070 7974 686f  n,..    ```pytho
+00006010: 6e0a 2020 2020 726f 7461 7465 5f63 656e  n.    rotate_cen
+00006020: 7465 7265 6420 3d20 5472 616e 7366 6f72  tered = Transfor
+00006030: 6d2e 726f 7461 7469 6f6e 5f64 2834 3529  m.rotation_d(45)
+00006040: 2e61 626f 7574 2832 2c20 3229 0a20 2020  .about(2, 2).   
+00006050: 2060 6060 0a0a 2020 2020 4279 2063 6f6e   ```..    By con
+00006060: 7665 6e74 696f 6e2c 2074 6869 7320 636c  vention, this cl
+00006070: 6173 7320 7072 6f76 6964 6573 2063 6c61  ass provides cla
+00006080: 7373 206d 6574 686f 6420 636f 6e73 7472  ss method constr
+00006090: 7563 746f 7273 2066 6f6c 6c6f 7769 6e67  uctors following
+000060a0: 206e 6f75 6e2d 6973 680a 2020 2020 6e61   noun-ish.    na
+000060b0: 6d69 6e67 2028 6074 7261 6e73 6c61 7469  ming (`translati
+000060c0: 6f6e 602c 2060 7363 616c 696e 6760 2c20  on`, `scaling`, 
+000060d0: 6072 6f74 6174 696f 6e60 2c20 6073 6865  `rotation`, `she
+000060e0: 6172 696e 6760 2920 616e 6420 696e 7374  aring`) and inst
+000060f0: 616e 6365 206d 6574 686f 640a 2020 2020  ance method.    
+00006100: 6d61 6e69 7075 6c61 7469 6f6e 7320 666f  manipulations fo
+00006110: 6c6c 6f77 696e 6720 7665 7262 2d69 7368  llowing verb-ish
+00006120: 206e 616d 696e 6720 2860 7472 616e 736c   naming (`transl
+00006130: 6174 6560 2c20 6073 6361 6c65 602c 2060  ate`, `scale`, `
+00006140: 726f 7461 7465 602c 2060 7368 6561 7260  rotate`, `shear`
+00006150: 292e 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
+00006160: 613a 204e 756d 6265 720a 2020 2020 623a  a: Number.    b:
+00006170: 204e 756d 6265 720a 2020 2020 633a 204e   Number.    c: N
+00006180: 756d 6265 720a 2020 2020 643a 204e 756d  umber.    d: Num
+00006190: 6265 720a 2020 2020 653a 204e 756d 6265  ber.    e: Numbe
+000061a0: 720a 2020 2020 663a 204e 756d 6265 720a  r.    f: Number.
+000061b0: 0a20 2020 2023 2063 6f6d 7061 6374 2072  .    # compact r
+000061c0: 6570 7265 7365 6e74 6174 696f 6e20 6f66  epresentation of
+000061d0: 2061 6e20 6166 6669 6e65 2074 7261 6e73   an affine trans
+000061e0: 666f 726d 6174 696f 6e20 6d61 7472 6978  formation matrix
+000061f0: 2066 6f72 2032 4420 7368 6170 6573 2e0a   for 2D shapes..
+00006200: 2020 2020 2320 5468 6520 6163 7475 616c      # The actual
+00006210: 206d 6174 7269 7820 6973 3a0a 2020 2020   matrix is:.    
+00006220: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00006230: 2020 2020 2020 5b20 4120 4220 3020 5d0a        [ A B 0 ].
+00006240: 2020 2020 2320 5b78 2720 7927 2031 5d20      # [x' y' 1] 
+00006250: 3d20 5b78 2079 2031 5d20 5b20 4320 4420  = [x y 1] [ C D 
+00006260: 3020 5d0a 2020 2020 2320 2020 2020 2020  0 ].    #       
+00006270: 2020 2020 2020 2020 2020 2020 2020 5b20                [ 
+00006280: 4520 4620 3120 5d0a 2020 2020 2320 5468  E F 1 ].    # Th
+00006290: 6520 6964 656e 7469 7479 2074 7261 6e73  e identity trans
+000062a0: 666f 726d 2069 7320 3120 3020 3020 3120  form is 1 0 0 1 
+000062b0: 3020 300a 0a20 2020 2040 636c 6173 736d  0 0..    @classm
+000062c0: 6574 686f 640a 2020 2020 6465 6620 6964  ethod.    def id
+000062d0: 656e 7469 7479 2863 6c73 293a 0a20 2020  entity(cls):.   
+000062e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000062f0: 2043 7265 6174 6520 6120 7472 616e 7366   Create a transf
+00006300: 6f72 6d20 7265 7072 6573 656e 7469 6e67  orm representing
+00006310: 2074 6865 2069 6465 6e74 6974 7920 7472   the identity tr
+00006320: 616e 7366 6f72 6d2e 0a0a 2020 2020 2020  ansform...      
+00006330: 2020 5468 6520 6964 656e 7469 7479 2074    The identity t
+00006340: 7261 6e73 666f 726d 2069 7320 6120 6e6f  ransform is a no
+00006350: 2d6f 702e 0a20 2020 2020 2020 2022 2222  -op..        """
+00006360: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00006370: 636c 7328 312c 2030 2c20 302c 2031 2c20  cls(1, 0, 0, 1, 
+00006380: 302c 2030 290a 0a20 2020 2040 636c 6173  0, 0)..    @clas
+00006390: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
+000063a0: 7472 616e 736c 6174 696f 6e28 636c 732c  translation(cls,
+000063b0: 2078 2c20 7929 3a0a 2020 2020 2020 2020   x, y):.        
+000063c0: 2222 220a 2020 2020 2020 2020 4372 6561  """.        Crea
+000063d0: 7465 2061 2074 7261 6e73 666f 726d 2074  te a transform t
+000063e0: 6861 7420 7065 7266 6f72 6d73 2074 7261  hat performs tra
+000063f0: 6e73 6c61 7469 6f6e 2e0a 0a20 2020 2020  nslation...     
+00006400: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+00006410: 2020 2020 2078 2028 4e75 6d62 6572 293a       x (Number):
+00006420: 2064 6973 7461 6e63 6520 746f 2074 7261   distance to tra
+00006430: 6e73 6c61 7465 2070 6f69 6e74 7320 616c  nslate points al
+00006440: 6f6e 6720 7468 6520 7820 2868 6f72 697a  ong the x (horiz
+00006450: 6f6e 7461 6c29 2061 7869 732e 0a20 2020  ontal) axis..   
+00006460: 2020 2020 2020 2020 2079 2028 4e75 6d62           y (Numb
+00006470: 6572 293a 2064 6973 7461 6e63 6520 746f  er): distance to
+00006480: 2074 7261 6e73 6c61 7465 2070 6f69 6e74   translate point
+00006490: 7320 616c 6f6e 6720 7468 6520 7920 2876  s along the y (v
+000064a0: 6572 7469 6361 6c29 2061 7869 732e 0a0a  ertical) axis...
+000064b0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+000064c0: 0a20 2020 2020 2020 2020 2020 2041 2054  .            A T
+000064d0: 7261 6e73 666f 726d 2072 6570 7265 7365  ransform represe
+000064e0: 6e74 696e 6720 7468 6520 7370 6563 6966  nting the specif
+000064f0: 6965 6420 7472 616e 736c 6174 696f 6e2e  ied translation.
+00006500: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00006510: 2020 2020 2020 7265 7475 726e 2063 6c73        return cls
+00006520: 2831 2c20 302c 2030 2c20 312c 2078 2c20  (1, 0, 0, 1, x, 
+00006530: 7929 0a0a 2020 2020 4063 6c61 7373 6d65  y)..    @classme
+00006540: 7468 6f64 0a20 2020 2064 6566 2073 6361  thod.    def sca
+00006550: 6c69 6e67 2863 6c73 2c20 782c 2079 3d4e  ling(cls, x, y=N
+00006560: 6f6e 6529 3a0a 2020 2020 2020 2020 2222  one):.        ""
+00006570: 220a 2020 2020 2020 2020 4372 6561 7465  ".        Create
+00006580: 2061 2074 7261 6e73 666f 726d 2074 6861   a transform tha
+00006590: 7420 7065 7266 6f72 6d73 2073 6361 6c69  t performs scali
+000065a0: 6e67 2e0a 0a20 2020 2020 2020 2041 7267  ng...        Arg
+000065b0: 733a 0a20 2020 2020 2020 2020 2020 2078  s:.            x
+000065c0: 2028 4e75 6d62 6572 293a 2073 6361 6c69   (Number): scali
+000065d0: 6e67 2072 6174 696f 2069 6e20 7468 6520  ng ratio in the 
+000065e0: 7820 2868 6f72 697a 6f6e 7461 6c29 2061  x (horizontal) a
+000065f0: 7869 732e 2041 2076 616c 7565 206f 6620  xis. A value of 
+00006600: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00006610: 2020 7265 7375 6c74 7320 696e 206e 6f20    results in no 
+00006620: 7363 616c 6520 6368 616e 6765 2069 6e20  scale change in 
+00006630: 7468 6520 7820 6178 6973 2e0a 2020 2020  the x axis..    
+00006640: 2020 2020 2020 2020 7920 284e 756d 6265          y (Numbe
+00006650: 7229 3a20 6f70 7469 6f6e 616c 2073 6361  r): optional sca
+00006660: 6c69 6e67 2072 6174 696f 2069 6e20 7468  ling ratio in th
+00006670: 6520 7920 2876 6572 7469 6361 6c29 2061  e y (vertical) a
+00006680: 7869 732e 2041 2076 616c 7565 206f 6620  xis. A value of 
+00006690: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+000066a0: 2020 7265 7375 6c74 7320 696e 206e 6f20    results in no 
+000066b0: 7363 616c 6520 6368 616e 6765 2069 6e20  scale change in 
+000066c0: 7468 6520 7920 6178 6973 2e20 4966 2074  the y axis. If t
+000066d0: 6869 7320 7661 6c75 6520 6973 206f 6d69  his value is omi
+000066e0: 7474 6564 2c20 6974 0a20 2020 2020 2020  tted, it.       
+000066f0: 2020 2020 2020 2020 2064 6566 6175 6c74           default
+00006700: 7320 746f 2074 6865 2076 616c 7565 2070  s to the value p
+00006710: 726f 7669 6465 6420 746f 2074 6865 2060  rovided to the `
+00006720: 7860 2061 7267 756d 656e 742e 0a0a 2020  x` argument...  
+00006730: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+00006740: 2020 2020 2020 2020 2020 2041 2054 7261             A Tra
+00006750: 6e73 666f 726d 2072 6570 7265 7365 6e74  nsform represent
+00006760: 696e 6720 7468 6520 7370 6563 6966 6965  ing the specifie
+00006770: 6420 7363 616c 696e 672e 0a20 2020 2020  d scaling..     
+00006780: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
+00006790: 6620 7920 6973 204e 6f6e 653a 0a20 2020  f y is None:.   
+000067a0: 2020 2020 2020 2020 2079 203d 2078 0a0a           y = x..
+000067b0: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+000067c0: 6c73 2878 2c20 302c 2030 2c20 792c 2030  ls(x, 0, 0, y, 0
+000067d0: 2c20 3029 0a0a 2020 2020 4063 6c61 7373  , 0)..    @class
+000067e0: 6d65 7468 6f64 0a20 2020 2064 6566 2072  method.    def r
+000067f0: 6f74 6174 696f 6e28 636c 732c 2074 6865  otation(cls, the
+00006800: 7461 293a 0a20 2020 2020 2020 2022 2222  ta):.        """
+00006810: 0a20 2020 2020 2020 2043 7265 6174 6520  .        Create 
+00006820: 6120 7472 616e 7366 6f72 6d20 7468 6174  a transform that
+00006830: 2070 6572 666f 726d 7320 726f 7461 7469   performs rotati
+00006840: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+00006850: 733a 0a20 2020 2020 2020 2020 2020 2074  s:.            t
+00006860: 6865 7461 2028 4e75 6d62 6572 293a 2074  heta (Number): t
+00006870: 6865 2061 6e67 6c65 202a 2a69 6e20 7261  he angle **in ra
+00006880: 6469 616e 732a 2a20 6279 2077 6869 6368  dians** by which
+00006890: 2074 6f20 726f 7461 7465 2e20 506f 7369   to rotate. Posi
+000068a0: 7469 7665 0a20 2020 2020 2020 2020 2020  tive.           
+000068b0: 2020 2020 2076 616c 7565 7320 7265 7072       values repr
+000068c0: 6573 656e 7420 636c 6f63 6b77 6973 6520  esent clockwise 
+000068d0: 726f 7461 7469 6f6e 732e 0a0a 2020 2020  rotations...    
+000068e0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+000068f0: 2020 2020 2020 2020 2041 2054 7261 6e73           A Trans
+00006900: 666f 726d 2072 6570 7265 7365 6e74 696e  form representin
+00006910: 6720 7468 6520 7370 6563 6966 6965 6420  g the specified 
+00006920: 726f 7461 7469 6f6e 2e0a 0a20 2020 2020  rotation...     
+00006930: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+00006940: 6574 7572 6e20 636c 7328 0a20 2020 2020  eturn cls(.     
+00006950: 2020 2020 2020 206d 6174 682e 636f 7328         math.cos(
+00006960: 7468 6574 6129 2c20 6d61 7468 2e73 696e  theta), math.sin
+00006970: 2874 6865 7461 292c 202d 6d61 7468 2e73  (theta), -math.s
+00006980: 696e 2874 6865 7461 292c 206d 6174 682e  in(theta), math.
+00006990: 636f 7328 7468 6574 6129 2c20 302c 2030  cos(theta), 0, 0
+000069a0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+000069b0: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
+000069c0: 2064 6566 2072 6f74 6174 696f 6e5f 6428   def rotation_d(
+000069d0: 636c 732c 2074 6865 7461 5f64 293a 0a20  cls, theta_d):. 
+000069e0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000069f0: 2020 2043 7265 6174 6520 6120 7472 616e     Create a tran
+00006a00: 7366 6f72 6d20 7468 6174 2070 6572 666f  sform that perfo
+00006a10: 726d 7320 726f 7461 7469 6f6e 202a 2a69  rms rotation **i
+00006a20: 6e20 6465 6772 6565 732a 2a2e 0a0a 2020  n degrees**...  
+00006a30: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00006a40: 2020 2020 2020 2020 7468 6574 615f 6420          theta_d 
+00006a50: 284e 756d 6265 7229 3a20 7468 6520 616e  (Number): the an
+00006a60: 676c 6520 2a2a 696e 2064 6567 7265 6573  gle **in degrees
+00006a70: 2a2a 2062 7920 7768 6963 6820 746f 2072  ** by which to r
+00006a80: 6f74 6174 652e 2050 6f73 6974 6976 650a  otate. Positive.
+00006a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006aa0: 7661 6c75 6573 2072 6570 7265 7365 6e74  values represent
+00006ab0: 2063 6c6f 636b 7769 7365 2072 6f74 6174   clockwise rotat
+00006ac0: 696f 6e73 2e0a 0a20 2020 2020 2020 2052  ions...        R
+00006ad0: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
+00006ae0: 2020 2020 4120 5472 616e 7366 6f72 6d20      A Transform 
+00006af0: 7265 7072 6573 656e 7469 6e67 2074 6865  representing the
+00006b00: 2073 7065 6369 6669 6564 2072 6f74 6174   specified rotat
+00006b10: 696f 6e2e 0a0a 2020 2020 2020 2020 2222  ion...        ""
+00006b20: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00006b30: 2063 6c73 2e72 6f74 6174 696f 6e28 6d61   cls.rotation(ma
+00006b40: 7468 2e72 6164 6961 6e73 2874 6865 7461  th.radians(theta
+00006b50: 5f64 2929 0a0a 2020 2020 4063 6c61 7373  _d))..    @class
+00006b60: 6d65 7468 6f64 0a20 2020 2064 6566 2073  method.    def s
+00006b70: 6865 6172 696e 6728 636c 732c 2078 2c20  hearing(cls, x, 
+00006b80: 793d 4e6f 6e65 293a 0a20 2020 2020 2020  y=None):.       
+00006b90: 2022 2222 0a20 2020 2020 2020 2043 7265   """.        Cre
+00006ba0: 6174 6520 6120 7472 616e 7366 6f72 6d20  ate a transform 
+00006bb0: 7468 6174 2070 6572 666f 726d 7320 7368  that performs sh
+00006bc0: 6561 7269 6e67 2028 6e6f 7420 6f66 2073  earing (not of s
+00006bd0: 6865 6570 292e 0a0a 2020 2020 2020 2020  heep)...        
+00006be0: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00006bf0: 2020 7820 284e 756d 6265 7229 3a20 5468    x (Number): Th
+00006c00: 6520 616d 6f75 6e74 2074 6f20 7368 6561  e amount to shea
+00006c10: 7220 616c 6f6e 6720 7468 6520 7820 2868  r along the x (h
+00006c20: 6f72 697a 6f6e 7461 6c29 2061 7869 732e  orizontal) axis.
+00006c30: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
+00006c40: 4e75 6d62 6572 293a 204f 7074 696f 6e61  Number): Optiona
+00006c50: 6c20 616d 6f75 6e74 2074 6f20 7368 6561  l amount to shea
+00006c60: 7220 616c 6f6e 6720 7468 6520 7920 2876  r along the y (v
+00006c70: 6572 7469 6361 6c29 2061 7869 732e 2049  ertical) axis. I
+00006c80: 6620 6f6d 6974 7465 642c 0a20 2020 2020  f omitted,.     
+00006c90: 2020 2020 2020 2020 2020 2074 6869 7320             this 
+00006ca0: 6465 6661 756c 7473 2074 6f20 7468 6520  defaults to the 
+00006cb0: 7661 6c75 6520 7072 6f76 6964 6564 2074  value provided t
+00006cc0: 6f20 7468 6520 6078 6020 6172 6775 6d65  o the `x` argume
+00006cd0: 6e74 2e0a 0a20 2020 2020 2020 2052 6574  nt...        Ret
+00006ce0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+00006cf0: 2020 4120 5472 616e 7366 6f72 6d20 7265    A Transform re
+00006d00: 7072 6573 656e 7469 6e67 2074 6865 2073  presenting the s
+00006d10: 7065 6369 6669 6564 2073 6865 6172 696e  pecified shearin
+00006d20: 672e 0a0a 2020 2020 2020 2020 2222 220a  g...        """.
+00006d30: 2020 2020 2020 2020 6966 2079 2069 7320          if y is 
+00006d40: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00006d50: 2020 7920 3d20 780a 2020 2020 2020 2020    y = x.        
+00006d60: 7265 7475 726e 2063 6c73 2831 2c20 792c  return cls(1, y,
+00006d70: 2078 2c20 312c 2030 2c20 3029 0a0a 2020   x, 1, 0, 0)..  
+00006d80: 2020 6465 6620 7472 616e 736c 6174 6528    def translate(
+00006d90: 7365 6c66 2c20 782c 2079 293a 0a20 2020  self, x, y):.   
+00006da0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00006db0: 2050 726f 6475 6365 2061 2074 7261 6e73   Produce a trans
+00006dc0: 666f 726d 2062 7920 636f 6d70 6f73 696e  form by composin
+00006dd0: 6720 7468 6520 6375 7272 656e 7420 7472  g the current tr
+00006de0: 616e 7366 6f72 6d20 7769 7468 2061 2074  ansform with a t
+00006df0: 7261 6e73 6c61 7469 6f6e 2e0a 0a20 2020  ranslation...   
+00006e00: 2020 2020 202e 2e20 6e6f 7465 3a3a 0a20       .. note::. 
+00006e10: 2020 2020 2020 2020 2020 2054 7261 6e73             Trans
+00006e20: 666f 726d 7320 6172 6520 696d 6d75 7461  forms are immuta
+00006e30: 626c 652c 2073 6f20 7468 6973 2072 6574  ble, so this ret
+00006e40: 7572 6e73 2061 206e 6577 2074 7261 6e73  urns a new trans
+00006e50: 666f 726d 2072 6174 6865 7220 7468 616e  form rather than
+00006e60: 0a20 2020 2020 2020 2020 2020 206d 7574  .            mut
+00006e70: 6174 696e 6720 7365 6c66 2e0a 0a20 2020  ating self...   
+00006e80: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+00006e90: 2020 2020 2020 2078 2028 4e75 6d62 6572         x (Number
+00006ea0: 293a 2064 6973 7461 6e63 6520 746f 2074  ): distance to t
+00006eb0: 7261 6e73 6c61 7465 2070 6f69 6e74 7320  ranslate points 
+00006ec0: 616c 6f6e 6720 7468 6520 7820 2868 6f72  along the x (hor
+00006ed0: 697a 6f6e 7461 6c29 2061 7869 732e 0a20  izontal) axis.. 
+00006ee0: 2020 2020 2020 2020 2020 2079 2028 4e75             y (Nu
+00006ef0: 6d62 6572 293a 2064 6973 7461 6e63 6520  mber): distance 
+00006f00: 746f 2074 7261 6e73 6c61 7465 2070 6f69  to translate poi
+00006f10: 6e74 7320 616c 6f6e 6720 7468 6520 7920  nts along the y 
+00006f20: 2876 6572 7469 6361 6c29 2061 7869 732e  (vertical) axis.
+00006f30: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+00006f40: 733a 0a20 2020 2020 2020 2020 2020 2041  s:.            A
+00006f50: 2054 7261 6e73 666f 726d 2072 6570 7265   Transform repre
+00006f60: 7365 6e74 696e 6720 7468 6520 636f 6d70  senting the comp
+00006f70: 6f73 6564 2074 7261 6e73 666f 726d 2e0a  osed transform..
+00006f80: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00006f90: 2020 2020 7265 7475 726e 2073 656c 6620      return self 
+00006fa0: 4020 5472 616e 7366 6f72 6d2e 7472 616e  @ Transform.tran
+00006fb0: 736c 6174 696f 6e28 782c 2079 290a 0a20  slation(x, y).. 
+00006fc0: 2020 2064 6566 2073 6361 6c65 2873 656c     def scale(sel
+00006fd0: 662c 2078 2c20 793d 4e6f 6e65 293a 0a20  f, x, y=None):. 
+00006fe0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00006ff0: 2020 2050 726f 6475 6365 2061 2074 7261     Produce a tra
+00007000: 6e73 666f 726d 2062 7920 636f 6d70 6f73  nsform by compos
+00007010: 696e 6720 7468 6520 6375 7272 656e 7420  ing the current 
+00007020: 7472 616e 7366 6f72 6d20 7769 7468 2061  transform with a
+00007030: 2073 6361 6c69 6e67 2e0a 0a20 2020 2020   scaling...     
+00007040: 2020 202e 2e20 6e6f 7465 3a3a 0a20 2020     .. note::.   
+00007050: 2020 2020 2020 2020 2054 7261 6e73 666f           Transfo
+00007060: 726d 7320 6172 6520 696d 6d75 7461 626c  rms are immutabl
+00007070: 652c 2073 6f20 7468 6973 2072 6574 7572  e, so this retur
+00007080: 6e73 2061 206e 6577 2074 7261 6e73 666f  ns a new transfo
+00007090: 726d 2072 6174 6865 7220 7468 616e 0a20  rm rather than. 
+000070a0: 2020 2020 2020 2020 2020 206d 7574 6174             mutat
+000070b0: 696e 6720 7365 6c66 2e0a 0a20 2020 2020  ing self...     
+000070c0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+000070d0: 2020 2020 2078 2028 4e75 6d62 6572 293a       x (Number):
+000070e0: 2073 6361 6c69 6e67 2072 6174 696f 2069   scaling ratio i
+000070f0: 6e20 7468 6520 7820 2868 6f72 697a 6f6e  n the x (horizon
+00007100: 7461 6c29 2061 7869 732e 2041 2076 616c  tal) axis. A val
+00007110: 7565 206f 6620 310a 2020 2020 2020 2020  ue of 1.        
+00007120: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
+00007130: 696e 206e 6f20 7363 616c 6520 6368 616e  in no scale chan
+00007140: 6765 2069 6e20 7468 6520 7820 6178 6973  ge in the x axis
+00007150: 2e0a 2020 2020 2020 2020 2020 2020 7920  ..            y 
+00007160: 284e 756d 6265 7229 3a20 6f70 7469 6f6e  (Number): option
+00007170: 616c 2073 6361 6c69 6e67 2072 6174 696f  al scaling ratio
+00007180: 2069 6e20 7468 6520 7920 2876 6572 7469   in the y (verti
+00007190: 6361 6c29 2061 7869 732e 2041 2076 616c  cal) axis. A val
+000071a0: 7565 206f 6620 310a 2020 2020 2020 2020  ue of 1.        
+000071b0: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
+000071c0: 696e 206e 6f20 7363 616c 6520 6368 616e  in no scale chan
+000071d0: 6765 2069 6e20 7468 6520 7920 6178 6973  ge in the y axis
+000071e0: 2e20 4966 2074 6869 7320 7661 6c75 6520  . If this value 
+000071f0: 6973 206f 6d69 7474 6564 2c20 6974 0a20  is omitted, it. 
+00007200: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00007210: 6566 6175 6c74 7320 746f 2074 6865 2076  efaults to the v
+00007220: 616c 7565 2070 726f 7669 6465 6420 746f  alue provided to
+00007230: 2074 6865 2060 7860 2061 7267 756d 656e   the `x` argumen
+00007240: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
+00007250: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00007260: 2041 2054 7261 6e73 666f 726d 2072 6570   A Transform rep
+00007270: 7265 7365 6e74 696e 6720 7468 6520 636f  resenting the co
+00007280: 6d70 6f73 6564 2074 7261 6e73 666f 726d  mposed transform
+00007290: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+000072a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000072b0: 6620 4020 5472 616e 7366 6f72 6d2e 7363  f @ Transform.sc
+000072c0: 616c 696e 6728 782c 2079 290a 0a20 2020  aling(x, y)..   
+000072d0: 2064 6566 2072 6f74 6174 6528 7365 6c66   def rotate(self
+000072e0: 2c20 7468 6574 6129 3a0a 2020 2020 2020  , theta):.      
+000072f0: 2020 2222 220a 2020 2020 2020 2020 5072    """.        Pr
+00007300: 6f64 7563 6520 6120 7472 616e 7366 6f72  oduce a transfor
+00007310: 6d20 6279 2063 6f6d 706f 7369 6e67 2074  m by composing t
+00007320: 6865 2063 7572 7265 6e74 2074 7261 6e73  he current trans
+00007330: 666f 726d 2077 6974 6820 6120 726f 7461  form with a rota
+00007340: 7469 6f6e 2e0a 0a20 2020 2020 2020 202e  tion...        .
+00007350: 2e20 6e6f 7465 3a3a 0a20 2020 2020 2020  . note::.       
+00007360: 2020 2020 2054 7261 6e73 666f 726d 7320       Transforms 
+00007370: 6172 6520 696d 6d75 7461 626c 652c 2073  are immutable, s
+00007380: 6f20 7468 6973 2072 6574 7572 6e73 2061  o this returns a
+00007390: 206e 6577 2074 7261 6e73 666f 726d 2072   new transform r
+000073a0: 6174 6865 7220 7468 616e 0a20 2020 2020  ather than.     
+000073b0: 2020 2020 2020 206d 7574 6174 696e 6720         mutating 
+000073c0: 7365 6c66 2e0a 0a20 2020 2020 2020 2041  self...        A
+000073d0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+000073e0: 2074 6865 7461 2028 4e75 6d62 6572 293a   theta (Number):
+000073f0: 2074 6865 2061 6e67 6c65 202a 2a69 6e20   the angle **in 
+00007400: 7261 6469 616e 732a 2a20 6279 2077 6869  radians** by whi
+00007410: 6368 2074 6f20 726f 7461 7465 2e20 506f  ch to rotate. Po
+00007420: 7369 7469 7665 0a20 2020 2020 2020 2020  sitive.         
+00007430: 2020 2020 2020 2076 616c 7565 7320 7265         values re
+00007440: 7072 6573 656e 7420 636c 6f63 6b77 6973  present clockwis
+00007450: 6520 726f 7461 7469 6f6e 732e 0a0a 2020  e rotations...  
+00007460: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+00007470: 2020 2020 2020 2020 2020 2041 2054 7261             A Tra
+00007480: 6e73 666f 726d 2072 6570 7265 7365 6e74  nsform represent
+00007490: 696e 6720 7468 6520 636f 6d70 6f73 6564  ing the composed
+000074a0: 2074 7261 6e73 666f 726d 2e0a 2020 2020   transform..    
+000074b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000074c0: 7265 7475 726e 2073 656c 6620 4020 5472  return self @ Tr
+000074d0: 616e 7366 6f72 6d2e 726f 7461 7469 6f6e  ansform.rotation
+000074e0: 2874 6865 7461 290a 0a20 2020 2064 6566  (theta)..    def
+000074f0: 2072 6f74 6174 655f 6428 7365 6c66 2c20   rotate_d(self, 
+00007500: 7468 6574 615f 6429 3a0a 2020 2020 2020  theta_d):.      
+00007510: 2020 2222 220a 2020 2020 2020 2020 5072    """.        Pr
+00007520: 6f64 7563 6520 6120 7472 616e 7366 6f72  oduce a transfor
+00007530: 6d20 6279 2063 6f6d 706f 7369 6e67 2074  m by composing t
+00007540: 6865 2063 7572 7265 6e74 2074 7261 6e73  he current trans
+00007550: 666f 726d 2077 6974 6820 6120 726f 7461  form with a rota
+00007560: 7469 6f6e 0a20 2020 2020 2020 202a 2a69  tion.        **i
+00007570: 6e20 6465 6772 6565 732a 2a2e 0a0a 2020  n degrees**...  
+00007580: 2020 2020 2020 2e2e 206e 6f74 653a 3a0a        .. note::.
+00007590: 2020 2020 2020 2020 2020 2020 5472 616e              Tran
+000075a0: 7366 6f72 6d73 2061 7265 2069 6d6d 7574  sforms are immut
+000075b0: 6162 6c65 2c20 736f 2074 6869 7320 7265  able, so this re
+000075c0: 7475 726e 7320 6120 6e65 7720 7472 616e  turns a new tran
+000075d0: 7366 6f72 6d20 7261 7468 6572 2074 6861  sform rather tha
+000075e0: 6e0a 2020 2020 2020 2020 2020 2020 6d75  n.            mu
+000075f0: 7461 7469 6e67 2073 656c 662e 0a0a 2020  tating self...  
+00007600: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00007610: 2020 2020 2020 2020 7468 6574 615f 6420          theta_d 
+00007620: 284e 756d 6265 7229 3a20 7468 6520 616e  (Number): the an
+00007630: 676c 6520 2a2a 696e 2064 6567 7265 6573  gle **in degrees
+00007640: 2a2a 2062 7920 7768 6963 6820 746f 2072  ** by which to r
+00007650: 6f74 6174 652e 2050 6f73 6974 6976 650a  otate. Positive.
+00007660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007670: 7661 6c75 6573 2072 6570 7265 7365 6e74  values represent
+00007680: 2063 6c6f 636b 7769 7365 2072 6f74 6174   clockwise rotat
+00007690: 696f 6e73 2e0a 0a20 2020 2020 2020 2052  ions...        R
+000076a0: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
+000076b0: 2020 2020 4120 5472 616e 7366 6f72 6d20      A Transform 
+000076c0: 7265 7072 6573 656e 7469 6e67 2074 6865  representing the
+000076d0: 2063 6f6d 706f 7365 6420 7472 616e 7366   composed transf
+000076e0: 6f72 6d2e 0a20 2020 2020 2020 2022 2222  orm..        """
+000076f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00007700: 7365 6c66 2040 2054 7261 6e73 666f 726d  self @ Transform
+00007710: 2e72 6f74 6174 696f 6e5f 6428 7468 6574  .rotation_d(thet
+00007720: 615f 6429 0a0a 2020 2020 6465 6620 7368  a_d)..    def sh
+00007730: 6561 7228 7365 6c66 2c20 782c 2079 3d4e  ear(self, x, y=N
+00007740: 6f6e 6529 3a0a 2020 2020 2020 2020 2222  one):.        ""
+00007750: 220a 2020 2020 2020 2020 5072 6f64 7563  ".        Produc
+00007760: 6520 6120 7472 616e 7366 6f72 6d20 6279  e a transform by
+00007770: 2063 6f6d 706f 7369 6e67 2074 6865 2063   composing the c
+00007780: 7572 7265 6e74 2074 7261 6e73 666f 726d  urrent transform
+00007790: 2077 6974 6820 6120 7368 6561 7269 6e67   with a shearing
+000077a0: 2e0a 0a20 2020 2020 2020 202e 2e20 6e6f  ...        .. no
+000077b0: 7465 3a3a 0a20 2020 2020 2020 2020 2020  te::.           
+000077c0: 2054 7261 6e73 666f 726d 7320 6172 6520   Transforms are 
+000077d0: 696d 6d75 7461 626c 652c 2073 6f20 7468  immutable, so th
+000077e0: 6973 2072 6574 7572 6e73 2061 206e 6577  is returns a new
+000077f0: 2074 7261 6e73 666f 726d 2072 6174 6865   transform rathe
+00007800: 7220 7468 616e 0a20 2020 2020 2020 2020  r than.         
+00007810: 2020 206d 7574 6174 696e 6720 7365 6c66     mutating self
+00007820: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+00007830: 0a20 2020 2020 2020 2020 2020 2078 2028  .            x (
+00007840: 4e75 6d62 6572 293a 2054 6865 2061 6d6f  Number): The amo
+00007850: 756e 7420 746f 2073 6865 6172 2061 6c6f  unt to shear alo
+00007860: 6e67 2074 6865 2078 2028 686f 7269 7a6f  ng the x (horizo
+00007870: 6e74 616c 2920 6178 6973 2e0a 2020 2020  ntal) axis..    
+00007880: 2020 2020 2020 2020 7920 284e 756d 6265          y (Numbe
+00007890: 7229 3a20 4f70 7469 6f6e 616c 2061 6d6f  r): Optional amo
+000078a0: 756e 7420 746f 2073 6865 6172 2061 6c6f  unt to shear alo
+000078b0: 6e67 2074 6865 2079 2028 7665 7274 6963  ng the y (vertic
+000078c0: 616c 2920 6178 6973 2e20 4966 206f 6d69  al) axis. If omi
+000078d0: 7474 6564 2c0a 2020 2020 2020 2020 2020  tted,.          
+000078e0: 2020 2020 2020 7468 6973 2064 6566 6175        this defau
+000078f0: 6c74 7320 746f 2074 6865 2076 616c 7565  lts to the value
+00007900: 2070 726f 7669 6465 6420 746f 2074 6865   provided to the
+00007910: 2060 7860 2061 7267 756d 656e 742e 0a0a   `x` argument...
+00007920: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+00007930: 0a20 2020 2020 2020 2020 2020 2041 2054  .            A T
+00007940: 7261 6e73 666f 726d 2072 6570 7265 7365  ransform represe
+00007950: 6e74 696e 6720 7468 6520 636f 6d70 6f73  nting the compos
+00007960: 6564 2074 7261 6e73 666f 726d 2e0a 2020  ed transform..  
+00007970: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00007980: 2020 7265 7475 726e 2073 656c 6620 4020    return self @ 
+00007990: 5472 616e 7366 6f72 6d2e 7368 6561 7269  Transform.sheari
+000079a0: 6e67 2878 2c20 7929 0a0a 2020 2020 6465  ng(x, y)..    de
+000079b0: 6620 6162 6f75 7428 7365 6c66 2c20 782c  f about(self, x,
+000079c0: 2079 293a 0a20 2020 2020 2020 2022 2222   y):.        """
+000079d0: 0a20 2020 2020 2020 2042 7261 636b 6574  .        Bracket
+000079e0: 2074 6865 2067 6976 656e 2074 7261 6e73   the given trans
+000079f0: 666f 726d 2069 6e20 6120 7061 6972 206f  form in a pair o
+00007a00: 6620 7472 616e 736c 6174 696f 6e73 2074  f translations t
+00007a10: 6f20 6d61 6b65 2069 7420 6170 7065 6172  o make it appear
+00007a20: 2061 626f 7574 2061 0a20 2020 2020 2020   about a.       
+00007a30: 2070 6f69 6e74 2074 6861 7420 6973 6e27   point that isn'
+00007a40: 7420 7468 6520 6f72 6967 696e 2e0a 0a20  t the origin... 
+00007a50: 2020 2020 2020 2054 6869 7320 6973 2061         This is a
+00007a60: 2075 7365 6675 6c20 7368 6f72 7468 616e   useful shorthan
+00007a70: 6420 666f 7220 7065 7266 6f72 6d69 6e67  d for performing
+00007a80: 2061 2074 7261 6e73 666f 726d 206c 696b   a transform lik
+00007a90: 6520 6120 726f 7461 7469 6f6e 2061 726f  e a rotation aro
+00007aa0: 756e 6420 7468 650a 2020 2020 2020 2020  und the.        
+00007ab0: 6365 6e74 6572 2070 6f69 6e74 206f 6620  center point of 
+00007ac0: 616e 206f 626a 6563 7420 7468 6174 2069  an object that i
+00007ad0: 736e 2774 2063 656e 7465 7265 6420 6174  sn't centered at
+00007ae0: 2074 6865 206f 7269 6769 6e2e 0a0a 2020   the origin...  
+00007af0: 2020 2020 2020 2e2e 206e 6f74 653a 3a0a        .. note::.
+00007b00: 2020 2020 2020 2020 2020 2020 5472 616e              Tran
+00007b10: 7366 6f72 6d73 2061 7265 2069 6d6d 7574  sforms are immut
+00007b20: 6162 6c65 2c20 736f 2074 6869 7320 7265  able, so this re
+00007b30: 7475 726e 7320 6120 6e65 7720 7472 616e  turns a new tran
+00007b40: 7366 6f72 6d20 7261 7468 6572 2074 6861  sform rather tha
+00007b50: 6e0a 2020 2020 2020 2020 2020 2020 6d75  n.            mu
+00007b60: 7461 7469 6e67 2073 656c 662e 0a0a 2020  tating self...  
+00007b70: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00007b80: 2020 2020 2020 2020 7820 284e 756d 6265          x (Numbe
+00007b90: 7229 3a20 7468 6520 706f 696e 7420 616c  r): the point al
+00007ba0: 6f6e 6720 7468 6520 7820 2868 6f72 697a  ong the x (horiz
+00007bb0: 6f6e 7461 6c29 2061 7869 7320 6162 6f75  ontal) axis abou
+00007bc0: 7420 7768 6963 6820 746f 2074 7261 6e73  t which to trans
+00007bd0: 666f 726d 2e0a 2020 2020 2020 2020 2020  form..          
+00007be0: 2020 7920 284e 756d 6265 7229 3a20 7468    y (Number): th
+00007bf0: 6520 706f 696e 7420 616c 6f6e 6720 7468  e point along th
+00007c00: 6520 7920 2876 6572 7469 6361 6c29 2061  e y (vertical) a
+00007c10: 7869 7320 6162 6f75 7420 7768 6963 6820  xis about which 
+00007c20: 746f 2074 7261 6e73 666f 726d 2e0a 0a20  to transform... 
+00007c30: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+00007c40: 2020 2020 2020 2020 2020 2020 4120 5472              A Tr
+00007c50: 616e 7366 6f72 6d20 7265 7072 6573 656e  ansform represen
+00007c60: 7469 6e67 2074 6865 2063 6f6d 706f 7365  ting the compose
+00007c70: 6420 7472 616e 7366 6f72 6d2e 0a20 2020  d transform..   
+00007c80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00007c90: 2072 6574 7572 6e20 5472 616e 7366 6f72   return Transfor
+00007ca0: 6d2e 7472 616e 736c 6174 696f 6e28 2d78  m.translation(-x
+00007cb0: 2c20 2d79 2920 4020 7365 6c66 2040 2054  , -y) @ self @ T
+00007cc0: 7261 6e73 666f 726d 2e74 7261 6e73 6c61  ransform.transla
+00007cd0: 7469 6f6e 2878 2c20 7929 0a0a 2020 2020  tion(x, y)..    
+00007ce0: 4066 6f72 6365 5f64 6f63 756d 656e 740a  @force_document.
+00007cf0: 2020 2020 6465 6620 5f5f 6d75 6c5f 5f28      def __mul__(
+00007d00: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
+00007d10: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00007d20: 2020 4d75 6c74 6970 6c79 2074 6865 2069    Multiply the i
+00007d30: 6e64 6976 6964 7561 6c20 7472 616e 7366  ndividual transf
+00007d40: 6f72 6d20 7061 7261 6d65 7465 7273 2062  orm parameters b
+00007d50: 7920 6120 7363 616c 6172 2076 616c 7565  y a scalar value
+00007d60: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+00007d70: 0a20 2020 2020 2020 2020 2020 206f 7468  .            oth
+00007d80: 6572 2028 4e75 6d62 6572 293a 2074 6865  er (Number): the
+00007d90: 2073 6361 6c61 7220 7661 6c75 6520 6279   scalar value by
+00007da0: 2077 6869 6368 2074 6f20 6d75 6c74 6970   which to multip
+00007db0: 6c79 2074 6865 2070 6172 616d 6574 6572  ly the parameter
+00007dc0: 730a 0a20 2020 2020 2020 2052 6574 7572  s..        Retur
+00007dd0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00007de0: 4120 5472 616e 7366 6f72 6d20 7769 7468  A Transform with
+00007df0: 2074 6865 206d 6f64 6966 6965 6420 7061   the modified pa
+00007e00: 7261 6d65 7465 7273 2e0a 2020 2020 2020  rameters..      
+00007e10: 2020 2222 220a 2020 2020 2020 2020 6966    """.        if
+00007e20: 2069 7369 6e73 7461 6e63 6528 6f74 6865   isinstance(othe
+00007e30: 722c 204e 756d 6265 7243 6c61 7373 293a  r, NumberClass):
+00007e40: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00007e50: 7572 6e20 5472 616e 7366 6f72 6d28 0a20  urn Transform(. 
+00007e60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00007e70: 3d73 656c 662e 6120 2a20 6f74 6865 722c  =self.a * other,
+00007e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e90: 2062 3d73 656c 662e 6220 2a20 6f74 6865   b=self.b * othe
+00007ea0: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
+00007eb0: 2020 2063 3d73 656c 662e 6320 2a20 6f74     c=self.c * ot
+00007ec0: 6865 722c 0a20 2020 2020 2020 2020 2020  her,.           
+00007ed0: 2020 2020 2064 3d73 656c 662e 6420 2a20       d=self.d * 
+00007ee0: 6f74 6865 722c 0a20 2020 2020 2020 2020  other,.         
+00007ef0: 2020 2020 2020 2065 3d73 656c 662e 6520         e=self.e 
+00007f00: 2a20 6f74 6865 722c 0a20 2020 2020 2020  * other,.       
+00007f10: 2020 2020 2020 2020 2066 3d73 656c 662e           f=self.
+00007f20: 6620 2a20 6f74 6865 722c 0a20 2020 2020  f * other,.     
+00007f30: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00007f40: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
+00007f50: 656d 656e 7465 640a 0a20 2020 2023 2073  emented..    # s
+00007f60: 6361 6c61 7220 6d75 6c74 6970 6c69 6361  calar multiplica
+00007f70: 7469 6f6e 2069 7320 636f 6d6d 7574 6174  tion is commutat
+00007f80: 6976 650a 2020 2020 5f5f 726d 756c 5f5f  ive.    __rmul__
+00007f90: 203d 205f 5f6d 756c 5f5f 0a0a 2020 2020   = __mul__..    
+00007fa0: 4066 6f72 6365 5f64 6f63 756d 656e 740a  @force_document.
+00007fb0: 2020 2020 6465 6620 5f5f 6d61 746d 756c      def __matmul
+00007fc0: 5f5f 2873 656c 662c 206f 7468 6572 293a  __(self, other):
+00007fd0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00007fe0: 2020 2020 2043 6f6d 706f 7365 2074 776f       Compose two
+00007ff0: 2074 7261 6e73 666f 726d 7320 696e 746f   transforms into
+00008000: 2061 2073 696e 676c 6520 7472 616e 7366   a single transf
+00008010: 6f72 6d2e 0a0a 2020 2020 2020 2020 4172  orm...        Ar
+00008020: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00008030: 6f74 6865 7220 2854 7261 6e73 666f 726d  other (Transform
+00008040: 293a 2074 6865 2072 6967 6874 2d68 616e  ): the right-han
+00008050: 6420 7369 6465 2074 7261 6e73 666f 726d  d side transform
+00008060: 206f 6620 7468 6520 696e 6669 7820 6f70   of the infix op
+00008070: 6572 6174 6f72 2e0a 0a20 2020 2020 2020  erator...       
+00008080: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00008090: 2020 2020 2020 4120 5472 616e 7366 6f72        A Transfor
+000080a0: 6d20 7265 7072 6573 656e 7469 6e67 2074  m representing t
+000080b0: 6865 2063 6f6d 706f 7365 6420 7472 616e  he composed tran
+000080c0: 7366 6f72 6d2e 0a20 2020 2020 2020 2022  sform..        "
+000080d0: 2222 0a20 2020 2020 2020 2069 6620 6973  "".        if is
+000080e0: 696e 7374 616e 6365 286f 7468 6572 2c20  instance(other, 
+000080f0: 5472 616e 7366 6f72 6d29 3a0a 2020 2020  Transform):.    
+00008100: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00008110: 656c 662e 5f5f 636c 6173 735f 5f28 0a20  elf.__class__(. 
+00008120: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00008130: 3d73 656c 662e 6120 2a20 6f74 6865 722e  =self.a * other.
+00008140: 6120 2b20 7365 6c66 2e62 202a 206f 7468  a + self.b * oth
+00008150: 6572 2e63 2c0a 2020 2020 2020 2020 2020  er.c,.          
+00008160: 2020 2020 2020 623d 7365 6c66 2e61 202a        b=self.a *
+00008170: 206f 7468 6572 2e62 202b 2073 656c 662e   other.b + self.
+00008180: 6220 2a20 6f74 6865 722e 642c 0a20 2020  b * other.d,.   
+00008190: 2020 2020 2020 2020 2020 2020 2063 3d73               c=s
+000081a0: 656c 662e 6320 2a20 6f74 6865 722e 6120  elf.c * other.a 
+000081b0: 2b20 7365 6c66 2e64 202a 206f 7468 6572  + self.d * other
+000081c0: 2e63 2c0a 2020 2020 2020 2020 2020 2020  .c,.            
+000081d0: 2020 2020 643d 7365 6c66 2e63 202a 206f      d=self.c * o
+000081e0: 7468 6572 2e62 202b 2073 656c 662e 6420  ther.b + self.d 
+000081f0: 2a20 6f74 6865 722e 642c 0a20 2020 2020  * other.d,.     
+00008200: 2020 2020 2020 2020 2020 2065 3d73 656c             e=sel
+00008210: 662e 6520 2a20 6f74 6865 722e 6120 2b20  f.e * other.a + 
+00008220: 7365 6c66 2e66 202a 206f 7468 6572 2e63  self.f * other.c
+00008230: 202b 206f 7468 6572 2e65 2c0a 2020 2020   + other.e,.    
+00008240: 2020 2020 2020 2020 2020 2020 663d 7365              f=se
+00008250: 6c66 2e65 202a 206f 7468 6572 2e62 202b  lf.e * other.b +
+00008260: 2073 656c 662e 6620 2a20 6f74 6865 722e   self.f * other.
+00008270: 6420 2b20 6f74 6865 722e 662c 0a20 2020  d + other.f,.   
+00008280: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00008290: 2020 2020 7265 7475 726e 204e 6f74 496d      return NotIm
+000082a0: 706c 656d 656e 7465 640a 0a20 2020 2064  plemented..    d
+000082b0: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
+000082c0: 6c61 7374 5f69 7465 6d29 3a0a 2020 2020  last_item):.    
+000082d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000082e0: 5265 6e64 6572 2074 6865 2074 7261 6e73  Render the trans
+000082f0: 666f 726d 2074 6f20 6974 7320 5044 4620  form to its PDF 
+00008300: 6f75 7470 7574 2072 6570 7265 7365 6e74  output represent
+00008310: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
+00008320: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00008330: 2020 6c61 7374 5f69 7465 6d3a 2074 6865    last_item: the
+00008340: 206c 6173 7420 7061 7468 2065 6c65 6d65   last path eleme
+00008350: 6e74 2074 6869 7320 7472 616e 7366 6f72  nt this transfor
+00008360: 6d20 6170 706c 6965 7320 746f 0a0a 2020  m applies to..  
+00008370: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+00008380: 2020 2020 2020 2020 2020 2041 2074 7570             A tup
+00008390: 6c65 206f 6620 6028 7374 722c 206c 6173  le of `(str, las
+000083a0: 745f 6974 656d 2960 2e20 606c 6173 745f  t_item)`. `last_
+000083b0: 6974 656d 6020 6973 2072 6574 7572 6e65  item` is returne
+000083c0: 6420 756e 6368 616e 6765 642e 0a20 2020  d unchanged..   
+000083d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000083e0: 2072 6574 7572 6e20 280a 2020 2020 2020   return (.      
+000083f0: 2020 2020 2020 6622 7b6e 756d 6265 725f        f"{number_
+00008400: 746f 5f73 7472 2873 656c 662e 6129 7d20  to_str(self.a)} 
+00008410: 7b6e 756d 6265 725f 746f 5f73 7472 2873  {number_to_str(s
+00008420: 656c 662e 6229 7d20 220a 2020 2020 2020  elf.b)} ".      
+00008430: 2020 2020 2020 6622 7b6e 756d 6265 725f        f"{number_
+00008440: 746f 5f73 7472 2873 656c 662e 6329 7d20  to_str(self.c)} 
+00008450: 7b6e 756d 6265 725f 746f 5f73 7472 2873  {number_to_str(s
+00008460: 656c 662e 6429 7d20 220a 2020 2020 2020  elf.d)} ".      
+00008470: 2020 2020 2020 6622 7b6e 756d 6265 725f        f"{number_
+00008480: 746f 5f73 7472 2873 656c 662e 6529 7d20  to_str(self.e)} 
+00008490: 7b6e 756d 6265 725f 746f 5f73 7472 2873  {number_to_str(s
+000084a0: 656c 662e 6629 7d20 636d 222c 0a20 2020  elf.f)} cm",.   
+000084b0: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
+000084c0: 656d 2c0a 2020 2020 2020 2020 290a 0a20  em,.        ).. 
+000084d0: 2020 2064 6566 205f 5f73 7472 5f5f 2873     def __str__(s
+000084e0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
+000084f0: 7475 726e 2028 0a20 2020 2020 2020 2020  turn (.         
+00008500: 2020 2066 2274 7261 6e73 666f 726d 3a20     f"transform: 
+00008510: 5b22 0a20 2020 2020 2020 2020 2020 2066  [".            f
+00008520: 227b 6e75 6d62 6572 5f74 6f5f 7374 7228  "{number_to_str(
+00008530: 7365 6c66 2e61 297d 207b 6e75 6d62 6572  self.a)} {number
+00008540: 5f74 6f5f 7374 7228 7365 6c66 2e62 297d  _to_str(self.b)}
+00008550: 2030 3b20 220a 2020 2020 2020 2020 2020   0; ".          
+00008560: 2020 6622 7b6e 756d 6265 725f 746f 5f73    f"{number_to_s
+00008570: 7472 2873 656c 662e 6329 7d20 7b6e 756d  tr(self.c)} {num
+00008580: 6265 725f 746f 5f73 7472 2873 656c 662e  ber_to_str(self.
+00008590: 6429 7d20 303b 2022 0a20 2020 2020 2020  d)} 0; ".       
+000085a0: 2020 2020 2066 227b 6e75 6d62 6572 5f74       f"{number_t
+000085b0: 6f5f 7374 7228 7365 6c66 2e65 297d 207b  o_str(self.e)} {
+000085c0: 6e75 6d62 6572 5f74 6f5f 7374 7228 7365  number_to_str(se
+000085d0: 6c66 2e66 297d 2031 5d22 0a20 2020 2020  lf.f)} 1]".     
+000085e0: 2020 2029 0a0a 0a5f 5f70 646f 635f 5f5b     )...__pdoc__[
+000085f0: 2254 7261 6e73 666f 726d 2e61 225d 203d  "Transform.a"] =
+00008600: 2046 616c 7365 0a5f 5f70 646f 635f 5f5b   False.__pdoc__[
+00008610: 2254 7261 6e73 666f 726d 2e62 225d 203d  "Transform.b"] =
+00008620: 2046 616c 7365 0a5f 5f70 646f 635f 5f5b   False.__pdoc__[
+00008630: 2254 7261 6e73 666f 726d 2e63 225d 203d  "Transform.c"] =
+00008640: 2046 616c 7365 0a5f 5f70 646f 635f 5f5b   False.__pdoc__[
+00008650: 2254 7261 6e73 666f 726d 2e64 225d 203d  "Transform.d"] =
+00008660: 2046 616c 7365 0a5f 5f70 646f 635f 5f5b   False.__pdoc__[
+00008670: 2254 7261 6e73 666f 726d 2e65 225d 203d  "Transform.e"] =
+00008680: 2046 616c 7365 0a5f 5f70 646f 635f 5f5b   False.__pdoc__[
+00008690: 2254 7261 6e73 666f 726d 2e66 225d 203d  "Transform.f"] =
+000086a0: 2046 616c 7365 0a0a 0a63 6c61 7373 2047   False...class G
+000086b0: 7261 7068 6963 7353 7479 6c65 3a0a 2020  raphicsStyle:.  
+000086c0: 2020 2222 220a 2020 2020 4120 636c 6173    """.    A clas
+000086d0: 7320 7265 7072 6573 656e 7469 6e67 2076  s representing v
+000086e0: 6172 696f 7573 2073 7479 6c65 2061 7474  arious style att
+000086f0: 7269 6275 7465 7320 7468 6174 2064 6574  ributes that det
+00008700: 6572 6d69 6e65 2064 7261 7769 6e67 2061  ermine drawing a
+00008710: 7070 6561 7261 6e63 652e 0a0a 2020 2020  ppearance...    
+00008720: 5468 6973 2063 6c61 7373 2075 7365 7320  This class uses 
+00008730: 7468 6520 636f 6e76 656e 7469 6f6e 2074  the convention t
+00008740: 6861 7420 7468 6520 676c 6f62 616c 2050  hat the global P
+00008750: 7974 686f 6e20 7369 6e67 6c65 746f 6e20  ython singleton 
+00008760: 656c 6c69 7073 6973 2028 602e 2e2e 6029  ellipsis (`...`)
+00008770: 2069 730a 2020 2020 6578 636c 7573 6976   is.    exclusiv
+00008780: 656c 7920 7573 6564 2074 6f20 7265 7072  ely used to repr
+00008790: 6573 656e 7420 7661 6c75 6573 2074 6861  esent values tha
+000087a0: 7420 6172 6520 696e 6865 7269 7465 6420  t are inherited 
+000087b0: 6672 6f6d 2074 6865 2070 6172 656e 7420  from the parent 
+000087c0: 7374 796c 652e 2054 6869 730a 2020 2020  style. This.    
+000087d0: 6973 2074 6f20 6469 7361 6d62 6967 7561  is to disambigua
+000087e0: 7465 2074 6865 2076 616c 7565 204e 6f6e  te the value Non
+000087f0: 6520 7768 6963 6820 6973 2075 7365 6420  e which is used 
+00008800: 666f 7220 7365 7665 7261 6c20 7661 6c75  for several valu
+00008810: 6573 2074 6f20 7369 676e 616c 2061 6e0a  es to signal an.
+00008820: 2020 2020 6578 706c 6963 6974 6c79 2064      explicitly d
+00008830: 6973 6162 6c65 6420 7374 796c 652e 2041  isabled style. A
+00008840: 6e20 6578 616d 706c 6520 6f66 2074 6869  n example of thi
+00008850: 7320 6973 2074 6865 2066 696c 6c2f 7374  s is the fill/st
+00008860: 726f 6b65 2063 6f6c 6f72 2073 7479 6c65  roke color style
+00008870: 732c 0a20 2020 2077 6869 6368 2075 7365  s,.    which use
+00008880: 204e 6f6e 6520 6173 2068 696e 7473 2074   None as hints t
+00008890: 6f20 7468 6520 6175 746f 2070 6169 6e74  o the auto paint
+000088a0: 2073 7479 6c65 2064 6574 6563 7469 6f6e   style detection
+000088b0: 2063 6f64 652e 0a20 2020 2022 2222 0a0a   code..    """..
+000088c0: 2020 2020 494e 4845 5249 5420 3d20 2e2e      INHERIT = ..
+000088d0: 2e0a 2020 2020 2222 2253 696e 676c 6574  ..    """Singlet
+000088e0: 6f6e 2073 7065 6369 6679 696e 6720 6120  on specifying a 
+000088f0: 7374 796c 6520 7061 7261 6d65 7465 7220  style parameter 
+00008900: 7368 6f75 6c64 2062 6520 696e 6865 7269  should be inheri
+00008910: 7465 6420 6672 6f6d 2074 6865 2070 6172  ted from the par
+00008920: 656e 7420 636f 6e74 6578 742e 2222 220a  ent context.""".
+00008930: 0a20 2020 2023 206f 7264 6572 2069 7320  .    # order is 
+00008940: 6265 2069 6d70 6f72 7461 6e74 2068 6572  be important her
+00008950: 6520 6265 6361 7573 6520 736f 6d65 206f  e because some o
+00008960: 6620 7468 6573 6520 7072 6f70 6572 7469  f these properti
+00008970: 6573 2061 7265 2065 6e74 616e 676c 6564  es are entangled
+00008980: 2c20 652e 672e 0a20 2020 2023 2066 696c  , e.g..    # fil
+00008990: 6c5f 636f 6c6f 7220 616e 6420 6669 6c6c  l_color and fill
+000089a0: 5f6f 7061 6369 7479 0a20 2020 204d 4552  _opacity.    MER
+000089b0: 4745 5f50 524f 5045 5254 4945 5320 3d20  GE_PROPERTIES = 
+000089c0: 280a 2020 2020 2020 2020 2270 6169 6e74  (.        "paint
+000089d0: 5f72 756c 6522 2c0a 2020 2020 2020 2020  _rule",.        
+000089e0: 2261 6c6c 6f77 5f74 7261 6e73 7061 7265  "allow_transpare
+000089f0: 6e63 7922 2c0a 2020 2020 2020 2020 2261  ncy",.        "a
+00008a00: 7574 6f5f 636c 6f73 6522 2c0a 2020 2020  uto_close",.    
+00008a10: 2020 2020 2269 6e74 6572 7365 6374 696f      "intersectio
+00008a20: 6e5f 7275 6c65 222c 0a20 2020 2020 2020  n_rule",.       
+00008a30: 2022 6669 6c6c 5f63 6f6c 6f72 222c 0a20   "fill_color",. 
+00008a40: 2020 2020 2020 2022 6669 6c6c 5f6f 7061         "fill_opa
+00008a50: 6369 7479 222c 0a20 2020 2020 2020 2022  city",.        "
+00008a60: 7374 726f 6b65 5f63 6f6c 6f72 222c 0a20  stroke_color",. 
+00008a70: 2020 2020 2020 2022 7374 726f 6b65 5f6f         "stroke_o
+00008a80: 7061 6369 7479 222c 0a20 2020 2020 2020  pacity",.       
+00008a90: 2022 626c 656e 645f 6d6f 6465 222c 0a20   "blend_mode",. 
+00008aa0: 2020 2020 2020 2022 7374 726f 6b65 5f77         "stroke_w
+00008ab0: 6964 7468 222c 0a20 2020 2020 2020 2022  idth",.        "
+00008ac0: 7374 726f 6b65 5f63 6170 5f73 7479 6c65  stroke_cap_style
+00008ad0: 222c 0a20 2020 2020 2020 2022 7374 726f  ",.        "stro
+00008ae0: 6b65 5f6a 6f69 6e5f 7374 796c 6522 2c0a  ke_join_style",.
+00008af0: 2020 2020 2020 2020 2273 7472 6f6b 655f          "stroke_
+00008b00: 6d69 7465 725f 6c69 6d69 7422 2c0a 2020  miter_limit",.  
+00008b10: 2020 2020 2020 2273 7472 6f6b 655f 6461        "stroke_da
+00008b20: 7368 5f70 6174 7465 726e 222c 0a20 2020  sh_pattern",.   
+00008b30: 2020 2020 2022 7374 726f 6b65 5f64 6173       "stroke_das
+00008b40: 685f 7068 6173 6522 2c0a 2020 2020 290a  h_phase",.    ).
+00008b50: 2020 2020 2222 2241 6e20 6f72 6465 7265      """An ordere
+00008b60: 6420 636f 6c6c 6563 7469 6f6e 206f 6620  d collection of 
+00008b70: 7072 6f70 6572 7469 6573 2074 6f20 7573  properties to us
+00008b80: 6520 7768 656e 206d 6572 6769 6e67 2074  e when merging t
+00008b90: 776f 2047 7261 7068 6963 7353 7479 6c65  wo GraphicsStyle
+00008ba0: 732e 2222 220a 0a20 2020 2054 5241 4e53  s."""..    TRANS
+00008bb0: 5041 5245 4e43 595f 4b45 5953 203d 2028  PARENCY_KEYS = (
+00008bc0: 0a20 2020 2020 2020 2050 4446 5374 796c  .        PDFStyl
+00008bd0: 654b 6579 732e 4649 4c4c 5f41 4c50 4841  eKeys.FILL_ALPHA
+00008be0: 2e76 616c 7565 2c0a 2020 2020 2020 2020  .value,.        
+00008bf0: 5044 4653 7479 6c65 4b65 7973 2e53 5452  PDFStyleKeys.STR
+00008c00: 4f4b 455f 414c 5048 412e 7661 6c75 652c  OKE_ALPHA.value,
+00008c10: 0a20 2020 2020 2020 2050 4446 5374 796c  .        PDFStyl
+00008c20: 654b 6579 732e 424c 454e 445f 4d4f 4445  eKeys.BLEND_MODE
+00008c30: 2e76 616c 7565 2c0a 2020 2020 290a 2020  .value,.    ).  
+00008c40: 2020 2222 2241 6e20 6f72 6465 7265 6420    """An ordered 
+00008c50: 636f 6c6c 6563 7469 6f6e 206f 6620 6174  collection of at
+00008c60: 7472 6962 7574 6573 206e 6f74 2074 6f20  tributes not to 
+00008c70: 656d 6974 2069 6e20 6e6f 2074 7261 6e73  emit in no trans
+00008c80: 7061 7265 6e63 7920 6d6f 6465 2e22 2222  parency mode."""
+00008c90: 0a0a 2020 2020 5044 465f 5354 594c 455f  ..    PDF_STYLE_
+00008ca0: 4b45 5953 203d 2028 0a20 2020 2020 2020  KEYS = (.       
+00008cb0: 202a 286b 2e76 616c 7565 2066 6f72 206b   *(k.value for k
+00008cc0: 2069 6e20 5044 4653 7479 6c65 4b65 7973   in PDFStyleKeys
+00008cd0: 2069 6620 6b20 6973 206e 6f74 2050 4446   if k is not PDF
+00008ce0: 5374 796c 654b 6579 732e 5354 524f 4b45  StyleKeys.STROKE
+00008cf0: 5f44 4153 485f 5041 5454 4552 4e29 2c0a  _DASH_PATTERN),.
+00008d00: 2020 2020 290a 2020 2020 2222 2241 6e20      ).    """An 
+00008d10: 6f72 6465 7265 6420 636f 6c6c 6563 7469  ordered collecti
+00008d20: 6f6e 206f 6620 6b65 7973 2074 6f20 6469  on of keys to di
+00008d30: 7265 6374 6c79 2065 6d69 7420 7768 656e  rectly emit when
+00008d40: 2073 6572 6961 6c69 7a69 6e67 2074 6865   serializing the
+00008d50: 2073 7479 6c65 2e22 2222 0a0a 2020 2020   style."""..    
+00008d60: 5f50 4149 4e54 5f52 554c 455f 4c4f 4f4b  _PAINT_RULE_LOOK
+00008d70: 5550 203d 207b 0a20 2020 2020 2020 2066  UP = {.        f
+00008d80: 726f 7a65 6e73 6574 287b 7d29 3a20 5061  rozenset({}): Pa
+00008d90: 7468 5061 696e 7452 756c 652e 444f 4e54  thPaintRule.DONT
+00008da0: 5f50 4149 4e54 2c0a 2020 2020 2020 2020  _PAINT,.        
+00008db0: 6672 6f7a 656e 7365 7428 7b22 7374 726f  frozenset({"stro
+00008dc0: 6b65 227d 293a 2050 6174 6850 6169 6e74  ke"}): PathPaint
+00008dd0: 5275 6c65 2e53 5452 4f4b 452c 0a20 2020  Rule.STROKE,.   
+00008de0: 2020 2020 2066 726f 7a65 6e73 6574 287b       frozenset({
+00008df0: 2266 696c 6c22 2c20 496e 7465 7273 6563  "fill", Intersec
+00008e00: 7469 6f6e 5275 6c65 2e4e 4f4e 5a45 524f  tionRule.NONZERO
+00008e10: 7d29 3a20 5061 7468 5061 696e 7452 756c  }): PathPaintRul
+00008e20: 652e 4649 4c4c 5f4e 4f4e 5a45 524f 2c0a  e.FILL_NONZERO,.
+00008e30: 2020 2020 2020 2020 6672 6f7a 656e 7365          frozense
+00008e40: 7428 7b22 6669 6c6c 222c 2049 6e74 6572  t({"fill", Inter
+00008e50: 7365 6374 696f 6e52 756c 652e 4556 454e  sectionRule.EVEN
+00008e60: 4f44 447d 293a 2050 6174 6850 6169 6e74  ODD}): PathPaint
+00008e70: 5275 6c65 2e46 494c 4c5f 4556 454e 4f44  Rule.FILL_EVENOD
+00008e80: 442c 0a20 2020 2020 2020 2066 726f 7a65  D,.        froze
+00008e90: 6e73 6574 280a 2020 2020 2020 2020 2020  nset(.          
+00008ea0: 2020 7b22 7374 726f 6b65 222c 2022 6669    {"stroke", "fi
+00008eb0: 6c6c 222c 2049 6e74 6572 7365 6374 696f  ll", Intersectio
+00008ec0: 6e52 756c 652e 4e4f 4e5a 4552 4f7d 0a20  nRule.NONZERO}. 
+00008ed0: 2020 2020 2020 2029 3a20 5061 7468 5061         ): PathPa
+00008ee0: 696e 7452 756c 652e 5354 524f 4b45 5f46  intRule.STROKE_F
+00008ef0: 494c 4c5f 4e4f 4e5a 4552 4f2c 0a20 2020  ILL_NONZERO,.   
+00008f00: 2020 2020 2066 726f 7a65 6e73 6574 280a       frozenset(.
+00008f10: 2020 2020 2020 2020 2020 2020 7b22 7374              {"st
+00008f20: 726f 6b65 222c 2022 6669 6c6c 222c 2049  roke", "fill", I
+00008f30: 6e74 6572 7365 6374 696f 6e52 756c 652e  ntersectionRule.
+00008f40: 4556 454e 4f44 447d 0a20 2020 2020 2020  EVENODD}.       
+00008f50: 2029 3a20 5061 7468 5061 696e 7452 756c   ): PathPaintRul
+00008f60: 652e 5354 524f 4b45 5f46 494c 4c5f 4556  e.STROKE_FILL_EV
+00008f70: 454e 4f44 442c 0a20 2020 207d 0a20 2020  ENODD,.    }.   
+00008f80: 2022 2222 4120 6469 6374 696f 6e61 7279   """A dictionary
+00008f90: 2066 6f72 2072 6573 6f6c 7669 6e67 2060   for resolving `
+00008fa0: 5061 7468 5061 696e 7452 756c 652e 4155  PathPaintRule.AU
+00008fb0: 544f 6022 2222 0a0a 2020 2020 4063 6c61  TO`"""..    @cla
+00008fc0: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
+00008fd0: 206d 6572 6765 2863 6c73 2c20 7061 7265   merge(cls, pare
+00008fe0: 6e74 2c20 6368 696c 6429 3a0a 2020 2020  nt, child):.    
+00008ff0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00009000: 4d65 7267 6520 7061 7265 6e74 2061 6e64  Merge parent and
+00009010: 2063 6869 6c64 2069 6e74 6f20 6120 7369   child into a si
+00009020: 6e67 6c65 2047 7261 7068 6963 7353 7479  ngle GraphicsSty
+00009030: 6c65 2e0a 0a20 2020 2020 2020 2054 6865  le...        The
+00009040: 2072 6573 756c 7420 636f 6e74 6169 6e73   result contains
+00009050: 2074 6865 2070 726f 7065 7274 6965 7320   the properties 
+00009060: 6f66 2074 6865 2070 6172 656e 7420 6173  of the parent as
+00009070: 206f 7665 7272 6964 6465 6e20 6279 2061   overridden by a
+00009080: 6e79 2070 726f 7065 7274 6965 730a 2020  ny properties.  
+00009090: 2020 2020 2020 6578 706c 6963 6974 6c79        explicitly
+000090a0: 2073 6574 206f 6e20 7468 6520 6368 696c   set on the chil
+000090b0: 642e 2049 6620 626f 7468 2074 6865 2070  d. If both the p
+000090c0: 6172 656e 7420 616e 6420 7468 6520 6368  arent and the ch
+000090d0: 696c 6420 7370 6563 6966 7920 746f 0a20  ild specify to. 
+000090e0: 2020 2020 2020 2069 6e68 6572 6974 2061         inherit a
+000090f0: 2067 6976 656e 2070 726f 7065 7274 792c   given property,
+00009100: 2074 6861 7420 7072 6f70 6572 7479 2077   that property w
+00009110: 696c 6c20 7072 6573 6572 7665 2074 6865  ill preserve the
+00009120: 2069 6e68 6572 6974 2076 616c 7565 2e0a   inherit value..
+00009130: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00009140: 2020 2020 6e65 7720 3d20 636c 7328 290a      new = cls().
+00009150: 2020 2020 2020 2020 666f 7220 7072 6f70          for prop
+00009160: 2069 6e20 636c 732e 4d45 5247 455f 5052   in cls.MERGE_PR
+00009170: 4f50 4552 5449 4553 3a0a 2020 2020 2020  OPERTIES:.      
+00009180: 2020 2020 2020 6376 616c 203d 2067 6574        cval = get
+00009190: 6174 7472 2863 6869 6c64 2c20 7072 6f70  attr(child, prop
+000091a0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000091b0: 2063 7661 6c20 6973 2063 6c73 2e49 4e48   cval is cls.INH
+000091c0: 4552 4954 3a0a 2020 2020 2020 2020 2020  ERIT:.          
+000091d0: 2020 2020 2020 7365 7461 7474 7228 6e65        setattr(ne
+000091e0: 772c 2070 726f 702c 2067 6574 6174 7472  w, prop, getattr
+000091f0: 2870 6172 656e 742c 2070 726f 7029 290a  (parent, prop)).
+00009200: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00009210: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009220: 2020 7365 7461 7474 7228 6e65 772c 2070    setattr(new, p
+00009230: 726f 702c 2063 7661 6c29 0a0a 2020 2020  rop, cval)..    
+00009240: 2020 2020 7265 7475 726e 206e 6577 0a0a      return new..
+00009250: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00009260: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00009270: 7365 6c66 2e61 6c6c 6f77 5f74 7261 6e73  self.allow_trans
+00009280: 7061 7265 6e63 7920 3d20 7365 6c66 2e49  parency = self.I
+00009290: 4e48 4552 4954 0a20 2020 2020 2020 2073  NHERIT.        s
+000092a0: 656c 662e 7061 696e 745f 7275 6c65 203d  elf.paint_rule =
+000092b0: 2073 656c 662e 494e 4845 5249 540a 2020   self.INHERIT.  
+000092c0: 2020 2020 2020 7365 6c66 2e61 7574 6f5f        self.auto_
+000092d0: 636c 6f73 6520 3d20 7365 6c66 2e49 4e48  close = self.INH
+000092e0: 4552 4954 0a20 2020 2020 2020 2073 656c  ERIT.        sel
+000092f0: 662e 696e 7465 7273 6563 7469 6f6e 5f72  f.intersection_r
+00009300: 756c 6520 3d20 7365 6c66 2e49 4e48 4552  ule = self.INHER
+00009310: 4954 0a20 2020 2020 2020 2073 656c 662e  IT.        self.
+00009320: 6669 6c6c 5f63 6f6c 6f72 203d 2073 656c  fill_color = sel
+00009330: 662e 494e 4845 5249 540a 2020 2020 2020  f.INHERIT.      
+00009340: 2020 7365 6c66 2e66 696c 6c5f 6f70 6163    self.fill_opac
+00009350: 6974 7920 3d20 7365 6c66 2e49 4e48 4552  ity = self.INHER
+00009360: 4954 0a20 2020 2020 2020 2073 656c 662e  IT.        self.
+00009370: 7374 726f 6b65 5f63 6f6c 6f72 203d 2073  stroke_color = s
+00009380: 656c 662e 494e 4845 5249 540a 2020 2020  elf.INHERIT.    
+00009390: 2020 2020 7365 6c66 2e73 7472 6f6b 655f      self.stroke_
+000093a0: 6f70 6163 6974 7920 3d20 7365 6c66 2e49  opacity = self.I
+000093b0: 4e48 4552 4954 0a20 2020 2020 2020 2073  NHERIT.        s
+000093c0: 656c 662e 626c 656e 645f 6d6f 6465 203d  elf.blend_mode =
+000093d0: 2073 656c 662e 494e 4845 5249 540a 2020   self.INHERIT.  
+000093e0: 2020 2020 2020 7365 6c66 2e73 7472 6f6b        self.strok
+000093f0: 655f 7769 6474 6820 3d20 7365 6c66 2e49  e_width = self.I
+00009400: 4e48 4552 4954 0a20 2020 2020 2020 2073  NHERIT.        s
+00009410: 656c 662e 7374 726f 6b65 5f63 6170 5f73  elf.stroke_cap_s
+00009420: 7479 6c65 203d 2073 656c 662e 494e 4845  tyle = self.INHE
+00009430: 5249 540a 2020 2020 2020 2020 7365 6c66  RIT.        self
+00009440: 2e73 7472 6f6b 655f 6a6f 696e 5f73 7479  .stroke_join_sty
+00009450: 6c65 203d 2073 656c 662e 494e 4845 5249  le = self.INHERI
+00009460: 540a 2020 2020 2020 2020 7365 6c66 2e73  T.        self.s
+00009470: 7472 6f6b 655f 6d69 7465 725f 6c69 6d69  troke_miter_limi
+00009480: 7420 3d20 7365 6c66 2e49 4e48 4552 4954  t = self.INHERIT
+00009490: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+000094a0: 726f 6b65 5f64 6173 685f 7061 7474 6572  roke_dash_patter
+000094b0: 6e20 3d20 7365 6c66 2e49 4e48 4552 4954  n = self.INHERIT
+000094c0: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
+000094d0: 726f 6b65 5f64 6173 685f 7068 6173 6520  roke_dash_phase 
+000094e0: 3d20 7365 6c66 2e49 4e48 4552 4954 0a0a  = self.INHERIT..
+000094f0: 2020 2020 6465 6620 5f5f 6465 6570 636f      def __deepco
+00009500: 7079 5f5f 2873 656c 662c 206d 656d 6f29  py__(self, memo)
+00009510: 3a0a 2020 2020 2020 2020 636f 7069 6564  :.        copied
+00009520: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+00009530: 5f28 290a 2020 2020 2020 2020 666f 7220  _().        for 
+00009540: 7072 6f70 2069 6e20 7365 6c66 2e4d 4552  prop in self.MER
+00009550: 4745 5f50 524f 5045 5254 4945 533a 0a20  GE_PROPERTIES:. 
+00009560: 2020 2020 2020 2020 2020 2073 6574 6174             setat
+00009570: 7472 2863 6f70 6965 642c 2070 726f 702c  tr(copied, prop,
+00009580: 2067 6574 6174 7472 2873 656c 662c 2070   getattr(self, p
+00009590: 726f 7029 290a 0a20 2020 2020 2020 2072  rop))..        r
+000095a0: 6574 7572 6e20 636f 7069 6564 0a0a 2020  eturn copied..  
+000095b0: 2020 6465 6620 5f5f 7365 7461 7474 725f    def __setattr_
+000095c0: 5f28 7365 6c66 2c20 6e61 6d65 2c20 7661  _(self, name, va
+000095d0: 6c75 6529 3a0a 2020 2020 2020 2020 6966  lue):.        if
+000095e0: 206e 6f74 2068 6173 6174 7472 2873 656c   not hasattr(sel
+000095f0: 662e 5f5f 636c 6173 735f 5f2c 206e 616d  f.__class__, nam
+00009600: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00009610: 7261 6973 6520 4174 7472 6962 7574 6545  raise AttributeE
+00009620: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00009630: 2020 2020 2020 6627 7b73 656c 662e 5f5f        f'{self.__
+00009640: 636c 6173 735f 5f7d 2064 6f65 7320 6e6f  class__} does no
+00009650: 7420 6861 7665 2073 7479 6c65 2022 7b6e  t have style "{n
+00009660: 616d 657d 2220 2861 2074 7970 6f3f 2927  ame}" (a typo?)'
+00009670: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00009680: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00009690: 5f5f 7365 7461 7474 725f 5f28 6e61 6d65  __setattr__(name
+000096a0: 2c20 7661 6c75 6529 0a0a 2020 2020 2320  , value)..    # 
+000096b0: 6174 2073 6f6d 6520 706f 696e 7420 6974  at some point it
+000096c0: 2070 726f 6261 626c 7920 6d61 6b65 7320   probably makes 
+000096d0: 7365 6e73 6520 746f 2074 7572 6e20 7468  sense to turn th
+000096e0: 6973 2069 6e74 6f20 6120 6765 6e65 7261  is into a genera
+000096f0: 6c20 636f 6d70 6c69 616e 6365 0a20 2020  l compliance.   
+00009700: 2023 2070 726f 7065 7274 792c 2062 7574   # property, but
+00009710: 2066 6f72 206e 6f77 2074 6869 7320 6973   for now this is
+00009720: 2074 6865 2073 696d 706c 6520 6170 7072   the simple appr
+00009730: 6f61 6368 2e0a 2020 2020 4070 726f 7065  oach..    @prope
+00009740: 7274 790a 2020 2020 6465 6620 616c 6c6f  rty.    def allo
+00009750: 775f 7472 616e 7370 6172 656e 6379 2873  w_transparency(s
+00009760: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
+00009770: 7475 726e 2073 656c 662e 5f61 6c6c 6f77  turn self._allow
+00009780: 5f74 7261 6e73 7061 7265 6e63 7920 2023  _transparency  #
+00009790: 2070 796c 696e 743a 2064 6973 6162 6c65   pylint: disable
+000097a0: 3d6e 6f2d 6d65 6d62 6572 0a0a 2020 2020  =no-member..    
+000097b0: 4061 6c6c 6f77 5f74 7261 6e73 7061 7265  @allow_transpare
+000097c0: 6e63 792e 7365 7474 6572 0a20 2020 2064  ncy.setter.    d
+000097d0: 6566 2061 6c6c 6f77 5f74 7261 6e73 7061  ef allow_transpa
+000097e0: 7265 6e63 7928 7365 6c66 2c20 6e65 7729  rency(self, new)
+000097f0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00009800: 2073 7570 6572 2829 2e5f 5f73 6574 6174   super().__setat
+00009810: 7472 5f5f 2822 5f61 6c6c 6f77 5f74 7261  tr__("_allow_tra
+00009820: 6e73 7061 7265 6e63 7922 2c20 6e65 7729  nsparency", new)
+00009830: 0a0a 2020 2020 2320 4966 2074 6865 7365  ..    # If these
+00009840: 2061 7265 2075 7365 6420 696e 2061 206e   are used in a n
+00009850: 6573 7465 6420 6772 6170 6869 6373 2063  ested graphics c
+00009860: 6f6e 7465 7874 2069 6e73 6964 6520 6f66  ontext inside of
+00009870: 2061 2070 6169 6e74 696e 6720 7061 7468   a painting path
+00009880: 0a20 2020 2023 206f 7065 7261 7469 6f6e  .    # operation
+00009890: 2c20 7468 6579 2061 7265 206e 6f2d 6f70  , they are no-op
+000098a0: 732e 2048 6f77 6576 6572 2c20 7468 6579  s. However, they
+000098b0: 2063 616e 2062 6520 7573 6564 2066 6f72   can be used for
+000098c0: 206f 7574 6572 2047 7261 7068 6963 7343   outer GraphicsC
+000098d0: 6f6e 7465 7874 730a 2020 2020 2320 7468  ontexts.    # th
+000098e0: 6174 2070 6169 6e74 696e 6720 7061 7468  at painting path
+000098f0: 7320 696e 6865 7269 7420 6672 6f6d 2e0a  s inherit from..
+00009900: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+00009910: 2020 6465 6620 7061 696e 745f 7275 6c65    def paint_rule
+00009920: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00009930: 2222 2254 6865 2070 6169 6e74 2072 756c  """The paint rul
+00009940: 6520 746f 2075 7365 2066 6f72 2074 6869  e to use for thi
+00009950: 7320 7061 7468 2f67 726f 7570 2e22 2222  s path/group."""
+00009960: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009970: 7365 6c66 2e5f 7061 696e 745f 7275 6c65  self._paint_rule
+00009980: 2020 2320 7079 6c69 6e74 3a20 6469 7361    # pylint: disa
+00009990: 626c 653d 6e6f 2d6d 656d 6265 720a 0a20  ble=no-member.. 
+000099a0: 2020 2040 7061 696e 745f 7275 6c65 2e73     @paint_rule.s
+000099b0: 6574 7465 720a 2020 2020 6465 6620 7061  etter.    def pa
+000099c0: 696e 745f 7275 6c65 2873 656c 662c 206e  int_rule(self, n
+000099d0: 6577 293a 0a20 2020 2020 2020 2069 6620  ew):.        if 
+000099e0: 6e65 7720 6973 204e 6f6e 653a 0a20 2020  new is None:.   
+000099f0: 2020 2020 2020 2020 2073 7570 6572 2829           super()
+00009a00: 2e5f 5f73 6574 6174 7472 5f5f 2822 5f70  .__setattr__("_p
+00009a10: 6169 6e74 5f72 756c 6522 2c20 5061 7468  aint_rule", Path
+00009a20: 5061 696e 7452 756c 652e 444f 4e54 5f50  PaintRule.DONT_P
+00009a30: 4149 4e54 290a 2020 2020 2020 2020 656c  AINT).        el
+00009a40: 6966 206e 6577 2069 7320 7365 6c66 2e49  if new is self.I
+00009a50: 4e48 4552 4954 3a0a 2020 2020 2020 2020  NHERIT:.        
+00009a60: 2020 2020 7375 7065 7228 292e 5f5f 7365      super().__se
+00009a70: 7461 7474 725f 5f28 225f 7061 696e 745f  tattr__("_paint_
+00009a80: 7275 6c65 222c 206e 6577 290a 2020 2020  rule", new).    
+00009a90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00009aa0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00009ab0: 7365 7461 7474 725f 5f28 225f 7061 696e  setattr__("_pain
+00009ac0: 745f 7275 6c65 222c 2050 6174 6850 6169  t_rule", PathPai
+00009ad0: 6e74 5275 6c65 2e63 6f65 7263 6528 6e65  ntRule.coerce(ne
+00009ae0: 7729 290a 0a20 2020 2040 7072 6f70 6572  w))..    @proper
+00009af0: 7479 0a20 2020 2064 6566 2061 7574 6f5f  ty.    def auto_
+00009b00: 636c 6f73 6528 7365 6c66 293a 0a20 2020  close(self):.   
+00009b10: 2020 2020 2022 2222 4966 2054 7275 652c       """If True,
+00009b20: 2075 6e63 6c6f 7365 6420 7061 7468 7320   unclosed paths 
+00009b30: 7769 6c6c 2062 6520 6175 746f 6d61 7469  will be automati
+00009b40: 6361 6c6c 7920 636c 6f73 6564 2062 6566  cally closed bef
+00009b50: 6f72 6520 7374 726f 6b69 6e67 2e22 2222  ore stroking."""
+00009b60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009b70: 7365 6c66 2e5f 6175 746f 5f63 6c6f 7365  self._auto_close
+00009b80: 2020 2320 7079 6c69 6e74 3a20 6469 7361    # pylint: disa
+00009b90: 626c 653d 6e6f 2d6d 656d 6265 720a 0a20  ble=no-member.. 
+00009ba0: 2020 2040 6175 746f 5f63 6c6f 7365 2e73     @auto_close.s
+00009bb0: 6574 7465 720a 2020 2020 6465 6620 6175  etter.    def au
+00009bc0: 746f 5f63 6c6f 7365 2873 656c 662c 206e  to_close(self, n
+00009bd0: 6577 293a 0a20 2020 2020 2020 2069 6620  ew):.        if 
+00009be0: 6e65 7720 6e6f 7420 696e 207b 5472 7565  new not in {True
+00009bf0: 2c20 4661 6c73 652c 2073 656c 662e 494e  , False, self.IN
+00009c00: 4845 5249 547d 3a0a 2020 2020 2020 2020  HERIT}:.        
+00009c10: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+00009c20: 726f 7228 6622 6175 746f 5f63 6c6f 7365  ror(f"auto_close
+00009c30: 206d 7573 7420 6265 2061 2062 6f6f 6c20   must be a bool 
+00009c40: 6f72 2073 656c 662e 494e 4845 5249 542c  or self.INHERIT,
+00009c50: 206e 6f74 207b 6e65 777d 2229 0a0a 2020   not {new}")..  
+00009c60: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00009c70: 7365 7461 7474 725f 5f28 225f 6175 746f  setattr__("_auto
+00009c80: 5f63 6c6f 7365 222c 206e 6577 290a 0a20  _close", new).. 
+00009c90: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00009ca0: 2064 6566 2069 6e74 6572 7365 6374 696f   def intersectio
+00009cb0: 6e5f 7275 6c65 2873 656c 6629 3a0a 2020  n_rule(self):.  
+00009cc0: 2020 2020 2020 2222 2254 6865 2064 6573        """The des
+00009cd0: 6972 6564 2069 6e74 6572 7365 6374 696f  ired intersectio
+00009ce0: 6e20 7275 6c65 2066 6f72 2074 6869 7320  n rule for this 
+00009cf0: 7061 7468 2f67 726f 7570 2e22 2222 0a20  path/group.""". 
+00009d00: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00009d10: 6c66 2e5f 696e 7465 7273 6563 7469 6f6e  lf._intersection
+00009d20: 5f72 756c 6520 2023 2070 796c 696e 743a  _rule  # pylint:
+00009d30: 2064 6973 6162 6c65 3d6e 6f2d 6d65 6d62   disable=no-memb
+00009d40: 6572 0a0a 2020 2020 4069 6e74 6572 7365  er..    @interse
+00009d50: 6374 696f 6e5f 7275 6c65 2e73 6574 7465  ction_rule.sette
+00009d60: 720a 2020 2020 6465 6620 696e 7465 7273  r.    def inters
+00009d70: 6563 7469 6f6e 5f72 756c 6528 7365 6c66  ection_rule(self
+00009d80: 2c20 6e65 7729 3a0a 2020 2020 2020 2020  , new):.        
+00009d90: 2320 646f 6e27 7420 616c 6c6f 7720 4e6f  # don't allow No
+00009da0: 6e65 2066 6f72 2074 6869 7320 6f6e 652e  ne for this one.
+00009db0: 0a20 2020 2020 2020 2069 6620 6e65 7720  .        if new 
+00009dc0: 6973 2073 656c 662e 494e 4845 5249 543a  is self.INHERIT:
+00009dd0: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
+00009de0: 6572 2829 2e5f 5f73 6574 6174 7472 5f5f  er().__setattr__
+00009df0: 2822 5f69 6e74 6572 7365 6374 696f 6e5f  ("_intersection_
+00009e00: 7275 6c65 222c 206e 6577 290a 2020 2020  rule", new).    
+00009e10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00009e20: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00009e30: 7365 7461 7474 725f 5f28 225f 696e 7465  setattr__("_inte
+00009e40: 7273 6563 7469 6f6e 5f72 756c 6522 2c20  rsection_rule", 
+00009e50: 496e 7465 7273 6563 7469 6f6e 5275 6c65  IntersectionRule
+00009e60: 2e63 6f65 7263 6528 6e65 7729 290a 0a20  .coerce(new)).. 
+00009e70: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00009e80: 2064 6566 2066 696c 6c5f 636f 6c6f 7228   def fill_color(
+00009e90: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00009ea0: 2222 0a20 2020 2020 2020 2054 6865 2064  "".        The d
+00009eb0: 6573 6972 6564 2066 696c 6c20 636f 6c6f  esired fill colo
+00009ec0: 7220 666f 7220 7468 6973 2070 6174 682f  r for this path/
+00009ed0: 6772 6f75 702e 0a0a 2020 2020 2020 2020  group...        
+00009ee0: 5768 656e 2073 6574 7469 6e67 2074 6869  When setting thi
+00009ef0: 7320 7072 6f70 6572 7479 2c20 6966 2074  s property, if t
+00009f00: 6865 2063 6f6c 6f72 2073 7065 6369 6669  he color specifi
+00009f10: 6573 2061 6e20 6f70 6163 6974 7920 7661  es an opacity va
+00009f20: 6c75 652c 2074 6861 7420 7769 6c6c 0a20  lue, that will. 
+00009f30: 2020 2020 2020 2062 6520 7573 6564 2074         be used t
+00009f40: 6f20 7365 7420 7468 6520 6669 6c6c 5f6f  o set the fill_o
+00009f50: 7061 6369 7479 2070 726f 7065 7274 7920  pacity property 
+00009f60: 6173 2077 656c 6c2e 0a20 2020 2020 2020  as well..       
+00009f70: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00009f80: 7572 6e20 7365 6c66 2e5f 6669 6c6c 5f63  urn self._fill_c
+00009f90: 6f6c 6f72 2020 2320 7079 6c69 6e74 3a20  olor  # pylint: 
+00009fa0: 6469 7361 626c 653d 6e6f 2d6d 656d 6265  disable=no-membe
+00009fb0: 720a 0a20 2020 2040 6669 6c6c 5f63 6f6c  r..    @fill_col
+00009fc0: 6f72 2e73 6574 7465 720a 2020 2020 6465  or.setter.    de
+00009fd0: 6620 6669 6c6c 5f63 6f6c 6f72 2873 656c  f fill_color(sel
+00009fe0: 662c 2063 6f6c 6f72 293a 0a20 2020 2020  f, color):.     
+00009ff0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000a000: 2863 6f6c 6f72 2c20 7374 7229 3a0a 2020  (color, str):.  
+0000a010: 2020 2020 2020 2020 2020 636f 6c6f 7220            color 
+0000a020: 3d20 636f 6c6f 725f 6672 6f6d 5f68 6578  = color_from_hex
+0000a030: 5f73 7472 696e 6728 636f 6c6f 7229 0a0a  _string(color)..
+0000a040: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0000a050: 7461 6e63 6528 636f 6c6f 722c 2028 4465  tance(color, (De
+0000a060: 7669 6365 5247 422c 2044 6576 6963 6547  viceRGB, DeviceG
+0000a070: 7261 792c 2044 6576 6963 6543 4d59 4b29  ray, DeviceCMYK)
+0000a080: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+0000a090: 7570 6572 2829 2e5f 5f73 6574 6174 7472  uper().__setattr
+0000a0a0: 5f5f 2822 5f66 696c 6c5f 636f 6c6f 7222  __("_fill_color"
+0000a0b0: 2c20 636f 6c6f 7229 0a20 2020 2020 2020  , color).       
+0000a0c0: 2020 2020 2069 6620 636f 6c6f 722e 6120       if color.a 
+0000a0d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000a0e0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000a0f0: 662e 6669 6c6c 5f6f 7061 6369 7479 203d  f.fill_opacity =
+0000a100: 2063 6f6c 6f72 2e61 0a0a 2020 2020 2020   color.a..      
+0000a110: 2020 656c 6966 2028 636f 6c6f 7220 6973    elif (color is
+0000a120: 204e 6f6e 6529 206f 7220 2863 6f6c 6f72   None) or (color
+0000a130: 2069 7320 7365 6c66 2e49 4e48 4552 4954   is self.INHERIT
+0000a140: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+0000a150: 7570 6572 2829 2e5f 5f73 6574 6174 7472  uper().__setattr
+0000a160: 5f5f 2822 5f66 696c 6c5f 636f 6c6f 7222  __("_fill_color"
+0000a170: 2c20 636f 6c6f 7229 0a0a 2020 2020 2020  , color)..      
+0000a180: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000a190: 2020 2020 7261 6973 6520 5479 7065 4572      raise TypeEr
+0000a1a0: 726f 7228 6622 7b63 6f6c 6f72 7d20 646f  ror(f"{color} do
+0000a1b0: 6573 6e27 7420 6c6f 6f6b 206c 696b 6520  esn't look like 
+0000a1c0: 6120 6472 6177 696e 6720 636f 6c6f 7222  a drawing color"
+0000a1d0: 290a 0a20 2020 2040 7072 6f70 6572 7479  )..    @property
+0000a1e0: 0a20 2020 2064 6566 2066 696c 6c5f 6f70  .    def fill_op
+0000a1f0: 6163 6974 7928 7365 6c66 293a 0a20 2020  acity(self):.   
+0000a200: 2020 2020 2022 2222 5468 6520 6465 7369       """The desi
+0000a210: 7265 6420 6669 6c6c 206f 7061 6369 7479  red fill opacity
+0000a220: 2066 6f72 2074 6869 7320 7061 7468 2f67   for this path/g
+0000a230: 726f 7570 2e22 2222 0a20 2020 2020 2020  roup.""".       
+0000a240: 2072 6574 7572 6e20 6765 7461 7474 7228   return getattr(
+0000a250: 7365 6c66 2c20 5044 4653 7479 6c65 4b65  self, PDFStyleKe
+0000a260: 7973 2e46 494c 4c5f 414c 5048 412e 7661  ys.FILL_ALPHA.va
+0000a270: 6c75 6529 0a0a 2020 2020 4066 696c 6c5f  lue)..    @fill_
+0000a280: 6f70 6163 6974 792e 7365 7474 6572 0a20  opacity.setter. 
+0000a290: 2020 2064 6566 2066 696c 6c5f 6f70 6163     def fill_opac
+0000a2a0: 6974 7928 7365 6c66 2c20 6e65 7729 3a0a  ity(self, new):.
+0000a2b0: 2020 2020 2020 2020 6966 206e 6577 206e          if new n
+0000a2c0: 6f74 2069 6e20 7b4e 6f6e 652c 2073 656c  ot in {None, sel
+0000a2d0: 662e 494e 4845 5249 547d 3a0a 2020 2020  f.INHERIT}:.    
+0000a2e0: 2020 2020 2020 2020 5f63 6865 636b 5f72          _check_r
+0000a2f0: 616e 6765 286e 6577 290a 0a20 2020 2020  ange(new)..     
+0000a300: 2020 2073 7570 6572 2829 2e5f 5f73 6574     super().__set
+0000a310: 6174 7472 5f5f 2850 4446 5374 796c 654b  attr__(PDFStyleK
+0000a320: 6579 732e 4649 4c4c 5f41 4c50 4841 2e76  eys.FILL_ALPHA.v
+0000a330: 616c 7565 2c20 6e65 7729 0a0a 2020 2020  alue, new)..    
+0000a340: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+0000a350: 6620 7374 726f 6b65 5f63 6f6c 6f72 2873  f stroke_color(s
+0000a360: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000a370: 220a 2020 2020 2020 2020 5468 6520 6465  ".        The de
+0000a380: 7369 7265 6420 7374 726f 6b65 2063 6f6c  sired stroke col
+0000a390: 6f72 2066 6f72 2074 6869 7320 7061 7468  or for this path
+0000a3a0: 2f67 726f 7570 2e0a 0a20 2020 2020 2020  /group...       
+0000a3b0: 2057 6865 6e20 7365 7474 696e 6720 7468   When setting th
+0000a3c0: 6973 2070 726f 7065 7274 792c 2069 6620  is property, if 
+0000a3d0: 7468 6520 636f 6c6f 7220 7370 6563 6966  the color specif
+0000a3e0: 6965 7320 616e 206f 7061 6369 7479 2076  ies an opacity v
+0000a3f0: 616c 7565 2c20 7468 6174 2077 696c 6c0a  alue, that will.
+0000a400: 2020 2020 2020 2020 6265 2075 7365 6420          be used 
+0000a410: 746f 2073 6574 2074 6865 2066 696c 6c5f  to set the fill_
+0000a420: 6f70 6163 6974 7920 7072 6f70 6572 7479  opacity property
+0000a430: 2061 7320 7765 6c6c 2e0a 2020 2020 2020   as well..      
+0000a440: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+0000a450: 7475 726e 2073 656c 662e 5f73 7472 6f6b  turn self._strok
+0000a460: 655f 636f 6c6f 7220 2023 2070 796c 696e  e_color  # pylin
+0000a470: 743a 2064 6973 6162 6c65 3d6e 6f2d 6d65  t: disable=no-me
+0000a480: 6d62 6572 0a0a 2020 2020 4073 7472 6f6b  mber..    @strok
+0000a490: 655f 636f 6c6f 722e 7365 7474 6572 0a20  e_color.setter. 
+0000a4a0: 2020 2064 6566 2073 7472 6f6b 655f 636f     def stroke_co
+0000a4b0: 6c6f 7228 7365 6c66 2c20 636f 6c6f 7229  lor(self, color)
+0000a4c0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+0000a4d0: 6e73 7461 6e63 6528 636f 6c6f 722c 2073  nstance(color, s
+0000a4e0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+0000a4f0: 2063 6f6c 6f72 203d 2063 6f6c 6f72 5f66   color = color_f
+0000a500: 726f 6d5f 6865 785f 7374 7269 6e67 2863  rom_hex_string(c
+0000a510: 6f6c 6f72 290a 0a20 2020 2020 2020 2069  olor)..        i
+0000a520: 6620 6973 696e 7374 616e 6365 2863 6f6c  f isinstance(col
+0000a530: 6f72 2c20 2844 6576 6963 6552 4742 2c20  or, (DeviceRGB, 
+0000a540: 4465 7669 6365 4772 6179 2c20 4465 7669  DeviceGray, Devi
+0000a550: 6365 434d 594b 2929 3a0a 2020 2020 2020  ceCMYK)):.      
+0000a560: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0000a570: 7365 7461 7474 725f 5f28 225f 7374 726f  setattr__("_stro
+0000a580: 6b65 5f63 6f6c 6f72 222c 2063 6f6c 6f72  ke_color", color
+0000a590: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0000a5a0: 2063 6f6c 6f72 2e61 2069 7320 6e6f 7420   color.a is not 
+0000a5b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000a5c0: 2020 2020 2020 7365 6c66 2e73 7472 6f6b        self.strok
+0000a5d0: 655f 6f70 6163 6974 7920 3d20 636f 6c6f  e_opacity = colo
+0000a5e0: 722e 610a 2020 2020 2020 2020 2020 2020  r.a.            
+0000a5f0: 6966 2073 656c 662e 7374 726f 6b65 5f77  if self.stroke_w
+0000a600: 6964 7468 2069 7320 7365 6c66 2e49 4e48  idth is self.INH
+0000a610: 4552 4954 3a0a 2020 2020 2020 2020 2020  ERIT:.          
+0000a620: 2020 2020 2020 7365 6c66 2e73 7472 6f6b        self.strok
+0000a630: 655f 7769 6474 6820 3d20 310a 0a20 2020  e_width = 1..   
+0000a640: 2020 2020 2065 6c69 6620 2863 6f6c 6f72       elif (color
+0000a650: 2069 7320 4e6f 6e65 2920 6f72 2028 636f   is None) or (co
+0000a660: 6c6f 7220 6973 2073 656c 662e 494e 4845  lor is self.INHE
+0000a670: 5249 5429 3a0a 2020 2020 2020 2020 2020  RIT):.          
+0000a680: 2020 7375 7065 7228 292e 5f5f 7365 7461    super().__seta
+0000a690: 7474 725f 5f28 225f 7374 726f 6b65 5f63  ttr__("_stroke_c
+0000a6a0: 6f6c 6f72 222c 2063 6f6c 6f72 290a 0a20  olor", color).. 
+0000a6b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000a6c0: 2020 2020 2020 2020 2072 6169 7365 2054           raise T
+0000a6d0: 7970 6545 7272 6f72 2866 227b 636f 6c6f  ypeError(f"{colo
+0000a6e0: 727d 2064 6f65 736e 2774 206c 6f6f 6b20  r} doesn't look 
+0000a6f0: 6c69 6b65 2061 2064 7261 7769 6e67 2063  like a drawing c
+0000a700: 6f6c 6f72 2229 0a0a 2020 2020 4070 726f  olor")..    @pro
+0000a710: 7065 7274 790a 2020 2020 6465 6620 7374  perty.    def st
+0000a720: 726f 6b65 5f6f 7061 6369 7479 2873 656c  roke_opacity(sel
+0000a730: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
+0000a740: 6865 2064 6573 6972 6564 2073 7472 6f6b  he desired strok
+0000a750: 6520 6f70 6163 6974 7920 666f 7220 7468  e opacity for th
+0000a760: 6973 2070 6174 682f 6772 6f75 702e 2222  is path/group.""
+0000a770: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0000a780: 2067 6574 6174 7472 2873 656c 662c 2050   getattr(self, P
+0000a790: 4446 5374 796c 654b 6579 732e 5354 524f  DFStyleKeys.STRO
+0000a7a0: 4b45 5f41 4c50 4841 2e76 616c 7565 290a  KE_ALPHA.value).
+0000a7b0: 0a20 2020 2040 7374 726f 6b65 5f6f 7061  .    @stroke_opa
+0000a7c0: 6369 7479 2e73 6574 7465 720a 2020 2020  city.setter.    
+0000a7d0: 6465 6620 7374 726f 6b65 5f6f 7061 6369  def stroke_opaci
+0000a7e0: 7479 2873 656c 662c 206e 6577 293a 0a20  ty(self, new):. 
+0000a7f0: 2020 2020 2020 2069 6620 6e65 7720 6e6f         if new no
+0000a800: 7420 696e 207b 4e6f 6e65 2c20 7365 6c66  t in {None, self
+0000a810: 2e49 4e48 4552 4954 7d3a 0a20 2020 2020  .INHERIT}:.     
+0000a820: 2020 2020 2020 205f 6368 6563 6b5f 7261         _check_ra
+0000a830: 6e67 6528 6e65 7729 0a0a 2020 2020 2020  nge(new)..      
+0000a840: 2020 7375 7065 7228 292e 5f5f 7365 7461    super().__seta
+0000a850: 7474 725f 5f28 5044 4653 7479 6c65 4b65  ttr__(PDFStyleKe
+0000a860: 7973 2e53 5452 4f4b 455f 414c 5048 412e  ys.STROKE_ALPHA.
+0000a870: 7661 6c75 652c 206e 6577 290a 0a20 2020  value, new)..   
+0000a880: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
+0000a890: 6566 2062 6c65 6e64 5f6d 6f64 6528 7365  ef blend_mode(se
+0000a8a0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000a8b0: 5468 6520 6465 7369 7265 6420 626c 656e  The desired blen
+0000a8c0: 6420 6d6f 6465 2066 6f72 2074 6869 7320  d mode for this 
+0000a8d0: 7061 7468 2f67 726f 7570 2e22 2222 0a20  path/group.""". 
+0000a8e0: 2020 2020 2020 2072 6574 7572 6e20 6765         return ge
+0000a8f0: 7461 7474 7228 7365 6c66 2c20 5044 4653  tattr(self, PDFS
+0000a900: 7479 6c65 4b65 7973 2e42 4c45 4e44 5f4d  tyleKeys.BLEND_M
+0000a910: 4f44 452e 7661 6c75 6529 0a0a 2020 2020  ODE.value)..    
+0000a920: 4062 6c65 6e64 5f6d 6f64 652e 7365 7474  @blend_mode.sett
+0000a930: 6572 0a20 2020 2064 6566 2062 6c65 6e64  er.    def blend
+0000a940: 5f6d 6f64 6528 7365 6c66 2c20 7661 6c75  _mode(self, valu
+0000a950: 6529 3a0a 2020 2020 2020 2020 6966 2076  e):.        if v
+0000a960: 616c 7565 2069 7320 7365 6c66 2e49 4e48  alue is self.INH
+0000a970: 4552 4954 3a0a 2020 2020 2020 2020 2020  ERIT:.          
+0000a980: 2020 7375 7065 7228 292e 5f5f 7365 7461    super().__seta
+0000a990: 7474 725f 5f28 5044 4653 7479 6c65 4b65  ttr__(PDFStyleKe
+0000a9a0: 7973 2e42 4c45 4e44 5f4d 4f44 452e 7661  ys.BLEND_MODE.va
+0000a9b0: 6c75 652c 2076 616c 7565 290a 2020 2020  lue, value).    
+0000a9c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000a9d0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0000a9e0: 7365 7461 7474 725f 5f28 0a20 2020 2020  setattr__(.     
+0000a9f0: 2020 2020 2020 2020 2020 2050 4446 5374             PDFSt
+0000aa00: 796c 654b 6579 732e 424c 454e 445f 4d4f  yleKeys.BLEND_MO
+0000aa10: 4445 2e76 616c 7565 2c20 426c 656e 644d  DE.value, BlendM
+0000aa20: 6f64 652e 636f 6572 6365 2876 616c 7565  ode.coerce(value
+0000aa30: 292e 7661 6c75 650a 2020 2020 2020 2020  ).value.        
+0000aa40: 2020 2020 290a 0a20 2020 2040 7072 6f70      )..    @prop
+0000aa50: 6572 7479 0a20 2020 2064 6566 2073 7472  erty.    def str
+0000aa60: 6f6b 655f 7769 6474 6828 7365 6c66 293a  oke_width(self):
+0000aa70: 0a20 2020 2020 2020 2022 2222 5468 6520  .        """The 
+0000aa80: 6465 7369 7265 6420 7374 726f 6b65 2077  desired stroke w
+0000aa90: 6964 7468 2066 6f72 2074 6869 7320 7061  idth for this pa
+0000aaa0: 7468 2f67 726f 7570 2e22 2222 0a20 2020  th/group.""".   
+0000aab0: 2020 2020 2072 6574 7572 6e20 6765 7461       return geta
+0000aac0: 7474 7228 7365 6c66 2c20 5044 4653 7479  ttr(self, PDFSty
+0000aad0: 6c65 4b65 7973 2e53 5452 4f4b 455f 5749  leKeys.STROKE_WI
+0000aae0: 4454 482e 7661 6c75 6529 0a0a 2020 2020  DTH.value)..    
+0000aaf0: 4073 7472 6f6b 655f 7769 6474 682e 7365  @stroke_width.se
+0000ab00: 7474 6572 0a20 2020 2064 6566 2073 7472  tter.    def str
+0000ab10: 6f6b 655f 7769 6474 6828 7365 6c66 2c20  oke_width(self, 
+0000ab20: 7769 6474 6829 3a0a 2020 2020 2020 2020  width):.        
+0000ab30: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+0000ab40: 6528 0a20 2020 2020 2020 2020 2020 2077  e(.            w
+0000ab50: 6964 7468 2c0a 2020 2020 2020 2020 2020  idth,.          
+0000ab60: 2020 2869 6e74 2c20 666c 6f61 742c 2064    (int, float, d
+0000ab70: 6563 696d 616c 2e44 6563 696d 616c 2c20  ecimal.Decimal, 
+0000ab80: 7479 7065 284e 6f6e 6529 2c20 7479 7065  type(None), type
+0000ab90: 2873 656c 662e 494e 4845 5249 5429 292c  (self.INHERIT)),
+0000aba0: 0a20 2020 2020 2020 2029 3a0a 2020 2020  .        ):.    
+0000abb0: 2020 2020 2020 2020 7261 6973 6520 5479          raise Ty
+0000abc0: 7065 4572 726f 7228 6622 7374 726f 6b65  peError(f"stroke
+0000abd0: 5f77 6964 7468 206d 7573 7420 6265 2061  _width must be a
+0000abe0: 206e 756d 6265 722c 206e 6f74 207b 7479   number, not {ty
+0000abf0: 7065 2877 6964 7468 297d 2229 0a0a 2020  pe(width)}")..  
+0000ac00: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0000ac10: 7365 7461 7474 725f 5f28 5044 4653 7479  setattr__(PDFSty
+0000ac20: 6c65 4b65 7973 2e53 5452 4f4b 455f 5749  leKeys.STROKE_WI
+0000ac30: 4454 482e 7661 6c75 652c 2077 6964 7468  DTH.value, width
+0000ac40: 290a 0a20 2020 2040 7072 6f70 6572 7479  )..    @property
+0000ac50: 0a20 2020 2064 6566 2073 7472 6f6b 655f  .    def stroke_
+0000ac60: 6361 705f 7374 796c 6528 7365 6c66 293a  cap_style(self):
+0000ac70: 0a20 2020 2020 2020 2022 2222 5468 6520  .        """The 
+0000ac80: 6465 7369 7265 6420 7374 726f 6b65 2063  desired stroke c
+0000ac90: 6170 2073 7479 6c65 2066 6f72 2074 6869  ap style for thi
+0000aca0: 7320 7061 7468 2f67 726f 7570 2e22 2222  s path/group."""
+0000acb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000acc0: 6765 7461 7474 7228 7365 6c66 2c20 5044  getattr(self, PD
+0000acd0: 4653 7479 6c65 4b65 7973 2e53 5452 4f4b  FStyleKeys.STROK
+0000ace0: 455f 4341 505f 5354 594c 452e 7661 6c75  E_CAP_STYLE.valu
+0000acf0: 6529 0a0a 2020 2020 4073 7472 6f6b 655f  e)..    @stroke_
+0000ad00: 6361 705f 7374 796c 652e 7365 7474 6572  cap_style.setter
+0000ad10: 0a20 2020 2064 6566 2073 7472 6f6b 655f  .    def stroke_
+0000ad20: 6361 705f 7374 796c 6528 7365 6c66 2c20  cap_style(self, 
+0000ad30: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+0000ad40: 6966 2076 616c 7565 2069 7320 7365 6c66  if value is self
+0000ad50: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
+0000ad60: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0000ad70: 7365 7461 7474 725f 5f28 5044 4653 7479  setattr__(PDFSty
+0000ad80: 6c65 4b65 7973 2e53 5452 4f4b 455f 4341  leKeys.STROKE_CA
+0000ad90: 505f 5354 594c 452e 7661 6c75 652c 2076  P_STYLE.value, v
+0000ada0: 616c 7565 290a 2020 2020 2020 2020 656c  alue).        el
+0000adb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0000adc0: 7375 7065 7228 292e 5f5f 7365 7461 7474  super().__setatt
+0000add0: 725f 5f28 0a20 2020 2020 2020 2020 2020  r__(.           
+0000ade0: 2020 2020 2050 4446 5374 796c 654b 6579       PDFStyleKey
+0000adf0: 732e 5354 524f 4b45 5f43 4150 5f53 5459  s.STROKE_CAP_STY
+0000ae00: 4c45 2e76 616c 7565 2c20 5374 726f 6b65  LE.value, Stroke
+0000ae10: 4361 7053 7479 6c65 2e63 6f65 7263 6528  CapStyle.coerce(
+0000ae20: 7661 6c75 6529 0a20 2020 2020 2020 2020  value).         
+0000ae30: 2020 2029 0a0a 2020 2020 4070 726f 7065     )..    @prope
+0000ae40: 7274 790a 2020 2020 6465 6620 7374 726f  rty.    def stro
+0000ae50: 6b65 5f6a 6f69 6e5f 7374 796c 6528 7365  ke_join_style(se
+0000ae60: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000ae70: 5468 6520 6465 7369 7265 6420 7374 726f  The desired stro
+0000ae80: 6b65 206a 6f69 6e20 7374 796c 6520 666f  ke join style fo
+0000ae90: 7220 7468 6973 2070 6174 682f 6772 6f75  r this path/grou
+0000aea0: 702e 2222 220a 2020 2020 2020 2020 7265  p.""".        re
+0000aeb0: 7475 726e 2067 6574 6174 7472 2873 656c  turn getattr(sel
+0000aec0: 662c 2050 4446 5374 796c 654b 6579 732e  f, PDFStyleKeys.
+0000aed0: 5354 524f 4b45 5f4a 4f49 4e5f 5354 594c  STROKE_JOIN_STYL
+0000aee0: 452e 7661 6c75 6529 0a0a 2020 2020 4073  E.value)..    @s
+0000aef0: 7472 6f6b 655f 6a6f 696e 5f73 7479 6c65  troke_join_style
+0000af00: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+0000af10: 7374 726f 6b65 5f6a 6f69 6e5f 7374 796c  stroke_join_styl
+0000af20: 6528 7365 6c66 2c20 7661 6c75 6529 3a0a  e(self, value):.
+0000af30: 2020 2020 2020 2020 6966 2076 616c 7565          if value
+0000af40: 2069 7320 7365 6c66 2e49 4e48 4552 4954   is self.INHERIT
+0000af50: 3a0a 2020 2020 2020 2020 2020 2020 7375  :.            su
+0000af60: 7065 7228 292e 5f5f 7365 7461 7474 725f  per().__setattr_
+0000af70: 5f28 5044 4653 7479 6c65 4b65 7973 2e53  _(PDFStyleKeys.S
+0000af80: 5452 4f4b 455f 4a4f 494e 5f53 5459 4c45  TROKE_JOIN_STYLE
+0000af90: 2e76 616c 7565 2c20 7661 6c75 6529 0a20  .value, value). 
+0000afa0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000afb0: 2020 2020 2020 2020 2073 7570 6572 2829           super()
+0000afc0: 2e5f 5f73 6574 6174 7472 5f5f 280a 2020  .__setattr__(.  
+0000afd0: 2020 2020 2020 2020 2020 2020 2020 5044                PD
+0000afe0: 4653 7479 6c65 4b65 7973 2e53 5452 4f4b  FStyleKeys.STROK
+0000aff0: 455f 4a4f 494e 5f53 5459 4c45 2e76 616c  E_JOIN_STYLE.val
+0000b000: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+0000b010: 2020 2020 5374 726f 6b65 4a6f 696e 5374      StrokeJoinSt
+0000b020: 796c 652e 636f 6572 6365 2876 616c 7565  yle.coerce(value
+0000b030: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
+0000b040: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+0000b050: 2020 2020 6465 6620 7374 726f 6b65 5f6d      def stroke_m
+0000b060: 6974 6572 5f6c 696d 6974 2873 656c 6629  iter_limit(self)
+0000b070: 3a0a 2020 2020 2020 2020 2222 2254 6865  :.        """The
+0000b080: 2064 6573 6972 6564 2073 7472 6f6b 6520   desired stroke 
+0000b090: 6d69 7465 7220 6c69 6d69 7420 666f 7220  miter limit for 
+0000b0a0: 7468 6973 2070 6174 682f 6772 6f75 702e  this path/group.
+0000b0b0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0000b0c0: 726e 2067 6574 6174 7472 2873 656c 662c  rn getattr(self,
+0000b0d0: 2050 4446 5374 796c 654b 6579 732e 5354   PDFStyleKeys.ST
+0000b0e0: 524f 4b45 5f4d 4954 4552 5f4c 494d 4954  ROKE_MITER_LIMIT
+0000b0f0: 2e76 616c 7565 290a 0a20 2020 2040 7374  .value)..    @st
+0000b100: 726f 6b65 5f6d 6974 6572 5f6c 696d 6974  roke_miter_limit
+0000b110: 2e73 6574 7465 720a 2020 2020 6465 6620  .setter.    def 
+0000b120: 7374 726f 6b65 5f6d 6974 6572 5f6c 696d  stroke_miter_lim
+0000b130: 6974 2873 656c 662c 2076 616c 7565 293a  it(self, value):
+0000b140: 0a20 2020 2020 2020 2069 6620 2876 616c  .        if (val
+0000b150: 7565 2069 7320 7365 6c66 2e49 4e48 4552  ue is self.INHER
+0000b160: 4954 2920 6f72 2069 7369 6e73 7461 6e63  IT) or isinstanc
+0000b170: 6528 7661 6c75 652c 204e 756d 6265 7243  e(value, NumberC
+0000b180: 6c61 7373 293a 0a20 2020 2020 2020 2020  lass):.         
+0000b190: 2020 2073 7570 6572 2829 2e5f 5f73 6574     super().__set
+0000b1a0: 6174 7472 5f5f 2850 4446 5374 796c 654b  attr__(PDFStyleK
+0000b1b0: 6579 732e 5354 524f 4b45 5f4d 4954 4552  eys.STROKE_MITER
+0000b1c0: 5f4c 494d 4954 2e76 616c 7565 2c20 7661  _LIMIT.value, va
+0000b1d0: 6c75 6529 0a20 2020 2020 2020 2065 6c73  lue).        els
+0000b1e0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0000b1f0: 6169 7365 2054 7970 6545 7272 6f72 2866  aise TypeError(f
+0000b200: 227b 7661 6c75 657d 2069 7320 6e6f 7420  "{value} is not 
+0000b210: 6120 6e75 6d62 6572 2229 0a0a 2020 2020  a number")..    
+0000b220: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+0000b230: 6620 7374 726f 6b65 5f64 6173 685f 7061  f stroke_dash_pa
+0000b240: 7474 6572 6e28 7365 6c66 293a 0a20 2020  ttern(self):.   
+0000b250: 2020 2020 2022 2222 5468 6520 6465 7369       """The desi
+0000b260: 7265 6420 7374 726f 6b65 2064 6173 6820  red stroke dash 
+0000b270: 7061 7474 6572 6e20 666f 7220 7468 6973  pattern for this
+0000b280: 2070 6174 682f 6772 6f75 702e 2222 220a   path/group.""".
+0000b290: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000b2a0: 656c 662e 5f73 7472 6f6b 655f 6461 7368  elf._stroke_dash
+0000b2b0: 5f70 6174 7465 726e 2020 2320 7079 6c69  _pattern  # pyli
+0000b2c0: 6e74 3a20 6469 7361 626c 653d 6e6f 2d6d  nt: disable=no-m
+0000b2d0: 656d 6265 720a 0a20 2020 2040 7374 726f  ember..    @stro
+0000b2e0: 6b65 5f64 6173 685f 7061 7474 6572 6e2e  ke_dash_pattern.
+0000b2f0: 7365 7474 6572 0a20 2020 2064 6566 2073  setter.    def s
+0000b300: 7472 6f6b 655f 6461 7368 5f70 6174 7465  troke_dash_patte
+0000b310: 726e 2873 656c 662c 2076 616c 7565 293a  rn(self, value):
+0000b320: 0a20 2020 2020 2020 2069 6620 7661 6c75  .        if valu
+0000b330: 6520 6973 204e 6f6e 653a 0a20 2020 2020  e is None:.     
+0000b340: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0000b350: 2829 0a20 2020 2020 2020 2065 6c69 6620  ().        elif 
+0000b360: 7661 6c75 6520 6973 2073 656c 662e 494e  value is self.IN
+0000b370: 4845 5249 543a 0a20 2020 2020 2020 2020  HERIT:.         
+0000b380: 2020 2072 6573 756c 7420 3d20 7661 6c75     result = valu
+0000b390: 650a 2020 2020 2020 2020 656c 6966 2069  e.        elif i
+0000b3a0: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+0000b3b0: 204e 756d 6265 7243 6c61 7373 293a 0a20   NumberClass):. 
+0000b3c0: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0000b3d0: 7420 3d20 2876 616c 7565 2c29 0a20 2020  t = (value,).   
+0000b3e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000b3f0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0000b400: 2020 2020 2020 2020 2020 2020 6163 6375              accu
+0000b410: 6d20 3d20 5b5d 0a20 2020 2020 2020 2020  m = [].         
+0000b420: 2020 2020 2020 2066 6f72 2069 7465 6d20         for item 
+0000b430: 696e 2076 616c 7565 3a0a 2020 2020 2020  in value:.      
+0000b440: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000b450: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0000b460: 6974 656d 2c20 4e75 6d62 6572 436c 6173  item, NumberClas
+0000b470: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+0000b480: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000b490: 6520 5479 7065 4572 726f 7228 0a20 2020  e TypeError(.   
+0000b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4b0: 2020 2020 2020 2020 2066 2273 7472 6f6b           f"strok
+0000b4c0: 655f 6461 7368 5f70 6174 7465 726e 207b  e_dash_pattern {
+0000b4d0: 7661 6c75 657d 2073 6571 7565 6e63 6520  value} sequence 
+0000b4e0: 6861 7320 6e6f 6e2d 6e75 6d65 7269 6320  has non-numeric 
+0000b4f0: 7661 6c75 6522 0a20 2020 2020 2020 2020  value".         
+0000b500: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000b510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b520: 2020 2020 2061 6363 756d 2e61 7070 656e       accum.appen
+0000b530: 6428 6974 656d 290a 2020 2020 2020 2020  d(item).        
+0000b540: 2020 2020 6578 6365 7074 2054 7970 6545      except TypeE
+0000b550: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+0000b560: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+0000b570: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+0000b580: 2020 2020 2020 2020 2020 2066 2273 7472             f"str
+0000b590: 6f6b 655f 6461 7368 5f70 6174 7465 726e  oke_dash_pattern
+0000b5a0: 207b 7661 6c75 657d 206d 7573 7420 6265   {value} must be
+0000b5b0: 2061 206e 756d 6265 7220 6f72 2073 6571   a number or seq
+0000b5c0: 7565 6e63 6520 6f66 206e 756d 6265 7273  uence of numbers
+0000b5d0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0000b5e0: 2020 2920 6672 6f6d 204e 6f6e 650a 2020    ) from None.  
+0000b5f0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0000b600: 203d 2028 2a61 6363 756d 2c29 0a0a 2020   = (*accum,)..  
+0000b610: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0000b620: 7365 7461 7474 725f 5f28 225f 7374 726f  setattr__("_stro
+0000b630: 6b65 5f64 6173 685f 7061 7474 6572 6e22  ke_dash_pattern"
+0000b640: 2c20 7265 7375 6c74 290a 0a20 2020 2040  , result)..    @
+0000b650: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
+0000b660: 2073 7472 6f6b 655f 6461 7368 5f70 6861   stroke_dash_pha
+0000b670: 7365 2873 656c 6629 3a0a 2020 2020 2020  se(self):.      
+0000b680: 2020 2222 2254 6865 2064 6573 6972 6564    """The desired
+0000b690: 2073 7472 6f6b 6520 6461 7368 2070 6174   stroke dash pat
+0000b6a0: 7465 726e 2070 6861 7365 206f 6666 7365  tern phase offse
+0000b6b0: 7420 666f 7220 7468 6973 2070 6174 682f  t for this path/
+0000b6c0: 6772 6f75 702e 2222 220a 2020 2020 2020  group.""".      
+0000b6d0: 2020 7265 7475 726e 2073 656c 662e 5f73    return self._s
+0000b6e0: 7472 6f6b 655f 6461 7368 5f70 6861 7365  troke_dash_phase
+0000b6f0: 2020 2320 7079 6c69 6e74 3a20 6469 7361    # pylint: disa
+0000b700: 626c 653d 6e6f 2d6d 656d 6265 720a 0a20  ble=no-member.. 
+0000b710: 2020 2040 7374 726f 6b65 5f64 6173 685f     @stroke_dash_
+0000b720: 7068 6173 652e 7365 7474 6572 0a20 2020  phase.setter.   
+0000b730: 2064 6566 2073 7472 6f6b 655f 6461 7368   def stroke_dash
+0000b740: 5f70 6861 7365 2873 656c 662c 2076 616c  _phase(self, val
+0000b750: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
+0000b760: 7661 6c75 6520 6973 2073 656c 662e 494e  value is self.IN
+0000b770: 4845 5249 5420 6f72 2069 7369 6e73 7461  HERIT or isinsta
+0000b780: 6e63 6528 7661 6c75 652c 204e 756d 6265  nce(value, Numbe
+0000b790: 7243 6c61 7373 293a 0a20 2020 2020 2020  rClass):.       
+0000b7a0: 2020 2020 2072 6574 7572 6e20 7375 7065       return supe
+0000b7b0: 7228 292e 5f5f 7365 7461 7474 725f 5f28  r().__setattr__(
+0000b7c0: 225f 7374 726f 6b65 5f64 6173 685f 7068  "_stroke_dash_ph
+0000b7d0: 6173 6522 2c20 7661 6c75 6529 0a0a 2020  ase", value)..  
+0000b7e0: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+0000b7f0: 4572 726f 7228 6622 7b76 616c 7565 7d20  Error(f"{value} 
+0000b800: 6973 6e27 7420 6120 6e75 6d62 6572 206f  isn't a number o
+0000b810: 7220 4772 6170 6869 6373 5374 796c 652e  r GraphicsStyle.
+0000b820: 494e 4845 5249 5422 290a 0a20 2020 2064  INHERIT")..    d
+0000b830: 6566 2073 6572 6961 6c69 7a65 2873 656c  ef serialize(sel
+0000b840: 6629 3a0a 2020 2020 2020 2020 2222 220a  f):.        """.
+0000b850: 2020 2020 2020 2020 436f 6e76 6572 7420          Convert 
+0000b860: 7468 6973 2073 7479 6c65 206f 626a 6563  this style objec
+0000b870: 7420 746f 2061 2050 4446 2064 6963 7469  t to a PDF dicti
+0000b880: 6f6e 6172 7920 7769 7468 2061 7070 726f  onary with appro
+0000b890: 7072 6961 7465 2073 7479 6c65 206b 6579  priate style key
+0000b8a0: 732e 0a0a 2020 2020 2020 2020 4f6e 6c79  s...        Only
+0000b8b0: 2065 7870 6c69 6369 746c 7920 7370 6563   explicitly spec
+0000b8c0: 6966 6965 6420 7661 6c75 6573 2061 7265  ified values are
+0000b8d0: 2065 6d69 7474 6564 2e0a 2020 2020 2020   emitted..      
+0000b8e0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+0000b8f0: 7375 6c74 203d 204f 7264 6572 6564 4469  sult = OrderedDi
+0000b900: 6374 2829 0a0a 2020 2020 2020 2020 666f  ct()..        fo
+0000b910: 7220 6b65 7920 696e 2073 656c 662e 5044  r key in self.PD
+0000b920: 465f 5354 594c 455f 4b45 5953 3a0a 2020  F_STYLE_KEYS:.  
+0000b930: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
+0000b940: 3d20 6765 7461 7474 7228 7365 6c66 2c20  = getattr(self, 
+0000b950: 6b65 792c 2073 656c 662e 494e 4845 5249  key, self.INHERI
+0000b960: 5429 0a0a 2020 2020 2020 2020 2020 2020  T)..            
+0000b970: 6966 2028 7661 6c75 6520 6973 206e 6f74  if (value is not
+0000b980: 2073 656c 662e 494e 4845 5249 5429 2061   self.INHERIT) a
+0000b990: 6e64 2028 7661 6c75 6520 6973 206e 6f74  nd (value is not
+0000b9a0: 204e 6f6e 6529 3a0a 2020 2020 2020 2020   None):.        
+0000b9b0: 2020 2020 2020 2020 2320 4e6f 6e65 2069          # None i
+0000b9c0: 7320 7573 6564 2066 6f72 206f 7574 2d6f  s used for out-o
+0000b9d0: 662d 6261 6e64 2073 6967 6e61 6c69 6e67  f-band signaling
+0000b9e0: 206f 6e20 7468 6573 652c 2065 2e67 2e20   on these, e.g. 
+0000b9f0: 6120 7374 726f 6b65 5f77 6964 7468 0a20  a stroke_width. 
+0000ba00: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000ba10: 206f 6620 4e6f 6e65 2064 6f65 736e 2774   of None doesn't
+0000ba20: 206e 6565 6420 746f 206c 616e 6420 6865   need to land he
+0000ba30: 7265 2062 6563 6175 7365 2069 7420 7369  re because it si
+0000ba40: 676e 616c 7320 7468 650a 2020 2020 2020  gnals the.      
+0000ba50: 2020 2020 2020 2020 2020 2320 5061 7468            # Path
+0000ba60: 5061 696e 7452 756c 6520 6175 746f 2072  PaintRule auto r
+0000ba70: 6573 6f6c 7574 696f 6e20 6f6e 6c79 2e0a  esolution only..
+0000ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba90: 7265 7375 6c74 5b6b 6579 5d20 3d20 7661  result[key] = va
+0000baa0: 6c75 650a 0a20 2020 2020 2020 2023 2054  lue..        # T
+0000bab0: 6865 7265 2069 7320 6164 6469 7469 6f6e  here is addition
+0000bac0: 616c 206c 6f67 6963 2069 6e20 4772 6170  al logic in Grap
+0000bad0: 6869 6373 436f 6e74 6578 7420 746f 2065  hicsContext to e
+0000bae0: 6e73 7572 6520 7468 6174 2074 6869 7320  nsure that this 
+0000baf0: 7769 6c6c 2077 6f72 6b0a 2020 2020 2020  will work.      
+0000bb00: 2020 6966 2073 656c 662e 7374 726f 6b65    if self.stroke
+0000bb10: 5f64 6173 685f 7061 7474 6572 6e20 616e  _dash_pattern an
+0000bb20: 6420 7365 6c66 2e73 7472 6f6b 655f 6461  d self.stroke_da
+0000bb30: 7368 5f70 6174 7465 726e 2069 7320 6e6f  sh_pattern is no
+0000bb40: 7420 7365 6c66 2e49 4e48 4552 4954 3a0a  t self.INHERIT:.
+0000bb50: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000bb60: 6c74 5b50 4446 5374 796c 654b 6579 732e  lt[PDFStyleKeys.
+0000bb70: 5354 524f 4b45 5f44 4153 485f 5041 5454  STROKE_DASH_PATT
+0000bb80: 4552 4e2e 7661 6c75 655d 203d 205b 0a20  ERN.value] = [. 
+0000bb90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000bba0: 656c 662e 7374 726f 6b65 5f64 6173 685f  elf.stroke_dash_
+0000bbb0: 7061 7474 6572 6e2c 0a20 2020 2020 2020  pattern,.       
+0000bbc0: 2020 2020 2020 2020 2073 656c 662e 7374           self.st
+0000bbd0: 726f 6b65 5f64 6173 685f 7068 6173 652c  roke_dash_phase,
+0000bbe0: 0a20 2020 2020 2020 2020 2020 205d 0a0a  .            ]..
+0000bbf0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000bc00: 616c 6c6f 775f 7472 616e 7370 6172 656e  allow_transparen
+0000bc10: 6379 2069 7320 4661 6c73 653a 0a20 2020  cy is False:.   
+0000bc20: 2020 2020 2020 2020 2066 6f72 206b 6579           for key
+0000bc30: 2069 6e20 7365 6c66 2e54 5241 4e53 5041   in self.TRANSPA
+0000bc40: 5245 4e43 595f 4b45 5953 3a0a 2020 2020  RENCY_KEYS:.    
+0000bc50: 2020 2020 2020 2020 2020 2020 6966 206b              if k
+0000bc60: 6579 2069 6e20 7265 7375 6c74 3a0a 2020  ey in result:.  
+0000bc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc80: 2020 6465 6c20 7265 7375 6c74 5b6b 6579    del result[key
+0000bc90: 5d0a 0a20 2020 2020 2020 2069 6620 7265  ]..        if re
+0000bca0: 7375 6c74 3a0a 2020 2020 2020 2020 2020  sult:.          
+0000bcb0: 2020 2320 4f6e 6c79 2069 6e73 6572 7420    # Only insert 
+0000bcc0: 7468 6973 206b 6579 2069 6620 7468 6572  this key if ther
+0000bcd0: 6520 6973 2061 7420 6c65 6173 7420 6f6e  e is at least on
+0000bce0: 6520 6f74 6865 7220 6974 656d 2069 6e20  e other item in 
+0000bcf0: 7468 6520 7265 7375 6c74 2073 6f0a 2020  the result so.  
+0000bd00: 2020 2020 2020 2020 2020 2320 7468 6174            # that
+0000bd10: 2077 6520 646f 6e27 7420 6a75 6e6b 2075   we don't junk u
+0000bd20: 7020 7468 6520 6f75 7470 7574 2050 4446  p the output PDF
+0000bd30: 2077 6974 6820 656d 7074 7920 4578 7447   with empty ExtG
+0000bd40: 5374 6174 6520 6469 6374 696f 6e61 7269  State dictionari
+0000bd50: 6573 2e0a 2020 2020 2020 2020 2020 2020  es..            
+0000bd60: 7479 7065 5f6e 616d 6520 3d20 4e61 6d65  type_name = Name
+0000bd70: 2822 5479 7065 2229 0a20 2020 2020 2020  ("Type").       
+0000bd80: 2020 2020 2072 6573 756c 745b 7479 7065       result[type
+0000bd90: 5f6e 616d 655d 203d 204e 616d 6528 2245  _name] = Name("E
+0000bda0: 7874 4753 7461 7465 2229 0a20 2020 2020  xtGState").     
+0000bdb0: 2020 2020 2020 2072 6573 756c 742e 6d6f         result.mo
+0000bdc0: 7665 5f74 6f5f 656e 6428 7479 7065 5f6e  ve_to_end(type_n
+0000bdd0: 616d 652c 206c 6173 743d 4661 6c73 6529  ame, last=False)
+0000bde0: 0a0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0000bdf0: 7475 726e 2072 656e 6465 725f 7064 665f  turn render_pdf_
+0000be00: 7072 696d 6974 6976 6528 7265 7375 6c74  primitive(result
+0000be10: 290a 0a20 2020 2020 2020 2023 2074 6869  )..        # thi
+0000be20: 7320 7369 676e 616c 7320 746f 2074 6865  s signals to the
+0000be30: 2047 7261 7068 6963 7353 7461 7465 4469   GraphicsStateDi
+0000be40: 6374 5265 6769 7374 7279 2074 6861 7420  ctRegistry that 
+0000be50: 7468 6572 6520 6973 206e 6f74 6869 6e67  there is nothing
+0000be60: 2074 6f0a 2020 2020 2020 2020 2320 7265   to.        # re
+0000be70: 6769 7374 6572 2e20 5468 6973 2069 7320  gister. This is 
+0000be80: 6120 7375 6363 6573 7320 6361 7365 2e0a  a success case..
+0000be90: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0000bea0: 6f6e 650a 0a20 2020 2040 666f 7263 655f  one..    @force_
+0000beb0: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+0000bec0: 6566 2072 6573 6f6c 7665 5f70 6169 6e74  ef resolve_paint
+0000bed0: 5f72 756c 6528 7365 6c66 293a 0a20 2020  _rule(self):.   
+0000bee0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000bef0: 2052 6573 6f6c 7665 2060 5061 7468 5061   Resolve `PathPa
+0000bf00: 696e 7452 756c 652e 4155 544f 6020 746f  intRule.AUTO` to
+0000bf10: 2061 2072 6561 6c20 7061 696e 7420 7275   a real paint ru
+0000bf20: 6c65 2062 6173 6564 206f 6e20 7468 6973  le based on this
+0000bf30: 2073 7479 6c65 2e0a 0a20 2020 2020 2020   style...       
+0000bf40: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+0000bf50: 2020 2020 2020 7468 6520 7265 736f 6c76        the resolv
+0000bf60: 6564 2060 5061 7468 5061 696e 7452 756c  ed `PathPaintRul
+0000bf70: 6560 2e0a 2020 2020 2020 2020 2222 220a  e`..        """.
+0000bf80: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000bf90: 7061 696e 745f 7275 6c65 2069 7320 5061  paint_rule is Pa
+0000bfa0: 7468 5061 696e 7452 756c 652e 4155 544f  thPaintRule.AUTO
+0000bfb0: 3a0a 2020 2020 2020 2020 2020 2020 7761  :.            wa
+0000bfc0: 6e74 203d 2073 6574 2829 0a20 2020 2020  nt = set().     
+0000bfd0: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
+0000bfe0: 7472 6f6b 655f 7769 6474 6820 6973 206e  troke_width is n
+0000bff0: 6f74 204e 6f6e 6520 616e 6420 7365 6c66  ot None and self
+0000c000: 2e73 7472 6f6b 655f 636f 6c6f 7220 6973  .stroke_color is
+0000c010: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000c020: 2020 2020 2020 2020 2020 2077 616e 742e             want.
+0000c030: 6164 6428 2273 7472 6f6b 6522 290a 2020  add("stroke").  
+0000c040: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0000c050: 662e 6669 6c6c 5f63 6f6c 6f72 2069 7320  f.fill_color is 
+0000c060: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000c070: 2020 2020 2020 2020 2020 7761 6e74 2e61            want.a
+0000c080: 6464 2822 6669 6c6c 2229 0a20 2020 2020  dd("fill").     
+0000c090: 2020 2020 2020 2020 2020 2023 2077 6520             # we 
+0000c0a0: 6e65 6564 2074 6f20 6775 6172 616e 7465  need to guarante
+0000c0b0: 6520 7468 6174 2074 6869 7320 7769 6c6c  e that this will
+0000c0c0: 206e 6f74 2062 6520 4e6f 6e65 2e20 5468   not be None. Th
+0000c0d0: 6520 6465 6661 756c 7420 7769 6c6c 0a20  e default will. 
+0000c0e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000c0f0: 2062 6520 226e 6f6e 7a65 726f 222e 0a20   be "nonzero".. 
+0000c100: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000c110: 7373 6572 7420 7365 6c66 2e69 6e74 6572  ssert self.inter
+0000c120: 7365 6374 696f 6e5f 7275 6c65 2069 7320  section_rule is 
+0000c130: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+0000c140: 2020 2020 2020 2020 2077 616e 742e 6164           want.ad
+0000c150: 6428 7365 6c66 2e69 6e74 6572 7365 6374  d(self.intersect
+0000c160: 696f 6e5f 7275 6c65 290a 0a20 2020 2020  ion_rule)..     
+0000c170: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0000c180: 2020 2020 2020 2020 2020 2020 7275 6c65              rule
+0000c190: 203d 2073 656c 662e 5f50 4149 4e54 5f52   = self._PAINT_R
+0000c1a0: 554c 455f 4c4f 4f4b 5550 5b66 726f 7a65  ULE_LOOKUP[froze
+0000c1b0: 6e73 6574 2877 616e 7429 5d0a 2020 2020  nset(want)].    
+0000c1c0: 2020 2020 2020 2020 6578 6365 7074 204b          except K
+0000c1d0: 6579 4572 726f 723a 0a20 2020 2020 2020  eyError:.       
+0000c1e0: 2020 2020 2020 2020 2023 2064 6f6e 2774           # don't
+0000c1f0: 2064 6566 6175 6c74 2074 6f20 444f 4e54   default to DONT
+0000c200: 5f50 4149 4e54 2062 6563 6175 7365 2074  _PAINT because t
+0000c210: 6861 7427 7320 616c 6d6f 7374 2063 6572  hat's almost cer
+0000c220: 7461 696e 6c79 206e 6f74 2061 2076 6572  tainly not a ver
+0000c230: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+0000c240: 2020 2320 676f 6f64 2064 6566 6175 6c74    # good default
+0000c250: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000c260: 2020 7275 6c65 203d 2050 6174 6850 6169    rule = PathPai
+0000c270: 6e74 5275 6c65 2e53 5452 4f4b 455f 4649  ntRule.STROKE_FI
+0000c280: 4c4c 5f4e 4f4e 5a45 524f 0a0a 2020 2020  LL_NONZERO..    
+0000c290: 2020 2020 656c 6966 2073 656c 662e 7061      elif self.pa
+0000c2a0: 696e 745f 7275 6c65 2069 7320 7365 6c66  int_rule is self
+0000c2b0: 2e49 4e48 4552 4954 3a0a 2020 2020 2020  .INHERIT:.      
+0000c2c0: 2020 2020 2020 2320 7468 6973 2073 686f        # this sho
+0000c2d0: 756c 646e 2774 2068 6170 7065 6e20 756e  uldn't happen un
+0000c2e0: 6465 7220 6e6f 726d 616c 2075 7361 6765  der normal usage
+0000c2f0: 2c20 6275 7420 6365 7274 6169 6e20 4150  , but certain AP
+0000c300: 4920 2861 6229 7573 6520 6361 6e20 656e  I (ab)use can en
+0000c310: 640a 2020 2020 2020 2020 2020 2020 2320  d.            # 
+0000c320: 7570 2069 6e20 7468 6973 2073 7461 7465  up in this state
+0000c330: 2e20 5765 2063 616e 2774 2072 6573 6f6c  . We can't resol
+0000c340: 7665 2061 6e79 7468 696e 6720 6d65 616e  ve anything mean
+0000c350: 696e 6766 756c 2c20 736f 2066 616c 6c20  ingful, so fall 
+0000c360: 6261 636b 2074 6f20 610a 2020 2020 2020  back to a.      
+0000c370: 2020 2020 2020 2320 7361 6e65 283f 2920        # sane(?) 
+0000c380: 6465 6661 756c 742e 0a20 2020 2020 2020  default..       
+0000c390: 2020 2020 2072 756c 6520 3d20 5061 7468       rule = Path
+0000c3a0: 5061 696e 7452 756c 652e 5354 524f 4b45  PaintRule.STROKE
+0000c3b0: 5f46 494c 4c5f 4e4f 4e5a 4552 4f0a 0a20  _FILL_NONZERO.. 
+0000c3c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000c3d0: 2020 2020 2020 2020 2072 756c 6520 3d20           rule = 
+0000c3e0: 7365 6c66 2e70 6169 6e74 5f72 756c 650a  self.paint_rule.
+0000c3f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000c400: 7275 6c65 0a0a 0a64 6566 205f 7265 6e64  rule...def _rend
+0000c410: 6572 5f6d 6f76 6528 7074 293a 0a20 2020  er_move(pt):.   
+0000c420: 2072 6574 7572 6e20 6622 7b70 742e 7265   return f"{pt.re
+0000c430: 6e64 6572 2829 7d20 6d22 0a0a 0a64 6566  nder()} m"...def
+0000c440: 205f 7265 6e64 6572 5f6c 696e 6528 7074   _render_line(pt
+0000c450: 293a 0a20 2020 2072 6574 7572 6e20 6622  ):.    return f"
+0000c460: 7b70 742e 7265 6e64 6572 2829 7d20 6c22  {pt.render()} l"
+0000c470: 0a0a 0a64 6566 205f 7265 6e64 6572 5f63  ...def _render_c
+0000c480: 7572 7665 2863 7472 6c31 2c20 6374 726c  urve(ctrl1, ctrl
+0000c490: 322c 2065 6e64 293a 0a20 2020 2072 6574  2, end):.    ret
+0000c4a0: 7572 6e20 6622 7b63 7472 6c31 2e72 656e  urn f"{ctrl1.ren
+0000c4b0: 6465 7228 297d 207b 6374 726c 322e 7265  der()} {ctrl2.re
+0000c4c0: 6e64 6572 2829 7d20 7b65 6e64 2e72 656e  nder()} {end.ren
+0000c4d0: 6465 7228 297d 2063 220a 0a0a 636c 6173  der()} c"...clas
+0000c4e0: 7320 4d6f 7665 284e 616d 6564 5475 706c  s Move(NamedTupl
+0000c4f0: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
+0000c500: 4120 7061 7468 206d 6f76 6520 656c 656d  A path move elem
+0000c510: 656e 742e 0a0a 2020 2020 4966 2061 2070  ent...    If a p
+0000c520: 6174 6820 6861 7320 6265 656e 2063 7265  ath has been cre
+0000c530: 6174 6564 2062 7574 206e 6f74 2079 6574  ated but not yet
+0000c540: 2070 6169 6e74 6564 2c20 7468 6973 2077   painted, this w
+0000c550: 696c 6c20 6372 6561 7465 2061 206e 6577  ill create a new
+0000c560: 2073 7562 7061 7468 2e0a 0a20 2020 2053   subpath...    S
+0000c570: 6565 3a20 6050 6169 6e74 6564 5061 7468  ee: `PaintedPath
+0000c580: 2e6d 6f76 655f 746f 600a 2020 2020 2222  .move_to`.    ""
+0000c590: 220a 0a20 2020 2070 743a 2050 6f69 6e74  "..    pt: Point
+0000c5a0: 0a20 2020 2022 2222 5468 6520 706f 696e  .    """The poin
+0000c5b0: 7420 746f 2077 6869 6368 2074 6f20 6d6f  t to which to mo
+0000c5c0: 7665 2e22 2222 0a0a 2020 2020 4070 726f  ve."""..    @pro
+0000c5d0: 7065 7274 790a 2020 2020 6465 6620 656e  perty.    def en
+0000c5e0: 645f 706f 696e 7428 7365 6c66 293a 0a20  d_point(self):. 
+0000c5f0: 2020 2020 2020 2022 2222 5468 6520 656e         """The en
+0000c600: 6420 706f 696e 7420 6f66 2074 6869 7320  d point of this 
+0000c610: 7061 7468 2065 6c65 6d65 6e74 2e22 2222  path element."""
+0000c620: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000c630: 7365 6c66 2e70 740a 0a20 2020 2040 666f  self.pt..    @fo
+0000c640: 7263 655f 6e6f 646f 6375 6d65 6e74 0a20  rce_nodocument. 
+0000c650: 2020 2064 6566 2072 656e 6465 7228 7365     def render(se
+0000c660: 6c66 2c20 6773 645f 7265 6769 7374 7279  lf, gsd_registry
+0000c670: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+0000c680: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+0000c690: 7429 3a0a 2020 2020 2020 2020 2222 220a  t):.        """.
+0000c6a0: 2020 2020 2020 2020 5265 6e64 6572 2074          Render t
+0000c6b0: 6869 7320 7061 7468 2065 6c65 6d65 6e74  his path element
+0000c6c0: 2074 6f20 6974 7320 5044 4620 7265 7072   to its PDF repr
+0000c6d0: 6573 656e 7461 7469 6f6e 2e0a 0a20 2020  esentation...   
+0000c6e0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+0000c6f0: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+0000c700: 7472 7920 2847 7261 7068 6963 7353 7461  try (GraphicsSta
+0000c710: 7465 4469 6374 5265 6769 7374 7279 293a  teDictRegistry):
+0000c720: 2074 6865 206f 776e 6572 2773 2067 7261   the owner's gra
+0000c730: 7068 6963 7320 7374 6174 650a 2020 2020  phics state.    
+0000c740: 2020 2020 2020 2020 2020 2020 6469 6374              dict
+0000c750: 696f 6e61 7279 2072 6567 6973 7472 792e  ionary registry.
+0000c760: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
+0000c770: 6c65 2028 4772 6170 6869 6373 5374 796c  le (GraphicsStyl
+0000c780: 6529 3a20 7468 6520 6375 7272 656e 7420  e): the current 
+0000c790: 7265 736f 6c76 6564 2067 7261 7068 6963  resolved graphic
+0000c7a0: 7320 7374 796c 650a 2020 2020 2020 2020  s style.        
+0000c7b0: 2020 2020 6c61 7374 5f69 7465 6d3a 2074      last_item: t
+0000c7c0: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+0000c7d0: 2065 6c65 6d65 6e74 2e0a 2020 2020 2020   element..      
+0000c7e0: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
+0000c7f0: 696e 743a 206c 6173 7420 706f 7369 7469  int: last positi
+0000c800: 6f6e 2073 6574 2062 7920 6120 224d 2220  on set by a "M" 
+0000c810: 6f72 2022 6d22 2063 6f6d 6d61 6e64 0a0a  or "m" command..
+0000c820: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+0000c830: 0a20 2020 2020 2020 2020 2020 2061 2074  .            a t
+0000c840: 7570 6c65 206f 6620 6028 7374 722c 206e  uple of `(str, n
+0000c850: 6577 5f6c 6173 745f 6974 656d 2960 2c20  ew_last_item)`, 
+0000c860: 7768 6572 6520 606e 6577 5f6c 6173 745f  where `new_last_
+0000c870: 6974 656d 6020 6973 2060 7365 6c66 600a  item` is `self`.
+0000c880: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000c890: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
+0000c8a0: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
+0000c8b0: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
+0000c8c0: 7475 726e 205f 7265 6e64 6572 5f6d 6f76  turn _render_mov
+0000c8d0: 6528 7365 6c66 2e70 7429 2c20 7365 6c66  e(self.pt), self
+0000c8e0: 2c20 7365 6c66 2e70 740a 0a20 2020 2040  , self.pt..    @
+0000c8f0: 666f 7263 655f 6e6f 646f 6375 6d65 6e74  force_nodocument
+0000c900: 0a20 2020 2064 6566 2072 656e 6465 725f  .    def render_
+0000c910: 6465 6275 6728 0a20 2020 2020 2020 2073  debug(.        s
+0000c920: 656c 662c 2067 7364 5f72 6567 6973 7472  elf, gsd_registr
+0000c930: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
+0000c940: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
+0000c950: 6e74 2c20 6465 6275 675f 7374 7265 616d  nt, debug_stream
+0000c960: 2c20 7066 780a 2020 2020 293a 0a20 2020  , pfx.    ):.   
+0000c970: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000c980: 2052 656e 6465 7220 7468 6973 2070 6174   Render this pat
+0000c990: 6820 656c 656d 656e 7420 746f 2069 7473  h element to its
+0000c9a0: 2050 4446 2072 6570 7265 7365 6e74 6174   PDF representat
+0000c9b0: 696f 6e20 616e 6420 7072 6f64 7563 6520  ion and produce 
+0000c9c0: 6465 6275 670a 2020 2020 2020 2020 696e  debug.        in
+0000c9d0: 666f 726d 6174 696f 6e2e 0a0a 2020 2020  formation...    
+0000c9e0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+0000c9f0: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+0000ca00: 7279 2028 4772 6170 6869 6373 5374 6174  ry (GraphicsStat
+0000ca10: 6544 6963 7452 6567 6973 7472 7929 3a20  eDictRegistry): 
+0000ca20: 7468 6520 6f77 6e65 7227 7320 6772 6170  the owner's grap
+0000ca30: 6869 6373 2073 7461 7465 0a20 2020 2020  hics state.     
+0000ca40: 2020 2020 2020 2020 2020 2064 6963 7469             dicti
+0000ca50: 6f6e 6172 7920 7265 6769 7374 7279 2e0a  onary registry..
+0000ca60: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+0000ca70: 6520 2847 7261 7068 6963 7353 7479 6c65  e (GraphicsStyle
+0000ca80: 293a 2074 6865 2063 7572 7265 6e74 2072  ): the current r
+0000ca90: 6573 6f6c 7665 6420 6772 6170 6869 6373  esolved graphics
+0000caa0: 2073 7479 6c65 0a20 2020 2020 2020 2020   style.         
+0000cab0: 2020 206c 6173 745f 6974 656d 3a20 7468     last_item: th
+0000cac0: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
+0000cad0: 656c 656d 656e 742e 0a20 2020 2020 2020  element..       
+0000cae0: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
+0000caf0: 6e74 3a20 6c61 7374 2070 6f73 6974 696f  nt: last positio
+0000cb00: 6e20 7365 7420 6279 2061 2022 4d22 206f  n set by a "M" o
+0000cb10: 7220 226d 2220 636f 6d6d 616e 640a 2020  r "m" command.  
+0000cb20: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+0000cb30: 7374 7265 616d 2028 696f 2e54 6578 7449  stream (io.TextI
+0000cb40: 4f29 3a20 7468 6520 7374 7265 616d 2074  O): the stream t
+0000cb50: 6f20 7768 6963 6820 7468 6520 6465 6275  o which the debu
+0000cb60: 6720 6f75 7470 7574 2073 686f 756c 6420  g output should 
+0000cb70: 6265 0a20 2020 2020 2020 2020 2020 2020  be.             
+0000cb80: 2020 2077 7269 7474 656e 2e20 5468 6973     written. This
+0000cb90: 2069 7320 6e6f 7420 6775 6172 616e 7465   is not guarante
+0000cba0: 6564 2074 6f20 6265 2073 6565 6b61 626c  ed to be seekabl
+0000cbb0: 6520 2865 2e67 2e20 6974 206d 6179 2062  e (e.g. it may b
+0000cbc0: 6520 7374 646f 7574 206f 720a 2020 2020  e stdout or.    
+0000cbd0: 2020 2020 2020 2020 2020 2020 7374 6465              stde
+0000cbe0: 7272 292e 0a20 2020 2020 2020 2020 2020  rr)..           
+0000cbf0: 2070 6678 2028 7374 7229 3a20 7468 6520   pfx (str): the 
+0000cc00: 6375 7272 656e 7420 6465 6275 6720 6f75  current debug ou
+0000cc10: 7470 7574 2070 7265 6669 7820 7374 7269  tput prefix stri
+0000cc20: 6e67 2028 6f6e 6c79 206e 6565 6465 6420  ng (only needed 
+0000cc30: 6966 2065 6d69 7474 696e 670a 2020 2020  if emitting.    
+0000cc40: 2020 2020 2020 2020 2020 2020 6d6f 7265              more
+0000cc50: 2074 6861 6e20 6f6e 6520 6c69 6e65 292e   than one line).
+0000cc60: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000cc70: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
+0000cc80: 6865 2073 616d 6520 7475 706c 6520 6173  he same tuple as
+0000cc90: 2060 4d6f 7665 2e72 656e 6465 7260 2e0a   `Move.render`..
+0000cca0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000ccb0: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
+0000ccc0: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
+0000ccd0: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
+0000cce0: 6e64 6572 6564 2c20 7265 736f 6c76 6564  ndered, resolved
+0000ccf0: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
+0000cd00: 3d20 7365 6c66 2e72 656e 6465 7228 0a20  = self.render(. 
+0000cd10: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
+0000cd20: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
+0000cd30: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
+0000cd40: 616c 5f70 6f69 6e74 0a20 2020 2020 2020  al_point.       
+0000cd50: 2029 0a20 2020 2020 2020 2064 6562 7567   ).        debug
+0000cd60: 5f73 7472 6561 6d2e 7772 6974 6528 7374  _stream.write(st
+0000cd70: 7228 7365 6c66 2920 2b20 225c 6e22 290a  r(self) + "\n").
+0000cd80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000cd90: 7265 6e64 6572 6564 2c20 7265 736f 6c76  rendered, resolv
+0000cda0: 6564 2c20 696e 6974 6961 6c5f 706f 696e  ed, initial_poin
+0000cdb0: 740a 0a0a 636c 6173 7320 5265 6c61 7469  t...class Relati
+0000cdc0: 7665 4d6f 7665 284e 616d 6564 5475 706c  veMove(NamedTupl
+0000cdd0: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
+0000cde0: 4120 7061 7468 206d 6f76 6520 656c 656d  A path move elem
+0000cdf0: 656e 7420 7769 7468 2061 6e20 656e 6420  ent with an end 
+0000ce00: 706f 696e 7420 7265 6c61 7469 7665 2074  point relative t
+0000ce10: 6f20 7468 6520 656e 6420 6f66 2074 6865  o the end of the
+0000ce20: 2070 7265 7669 6f75 7320 7061 7468 0a20   previous path. 
+0000ce30: 2020 2065 6c65 6d65 6e74 2e0a 0a20 2020     element...   
+0000ce40: 2049 6620 6120 7061 7468 2068 6173 2062   If a path has b
+0000ce50: 6565 6e20 6372 6561 7465 6420 6275 7420  een created but 
+0000ce60: 6e6f 7420 7965 7420 7061 696e 7465 642c  not yet painted,
+0000ce70: 2074 6869 7320 7769 6c6c 2063 7265 6174   this will creat
+0000ce80: 6520 6120 6e65 7720 7375 6270 6174 682e  e a new subpath.
+0000ce90: 0a0a 2020 2020 5365 653a 2060 5061 696e  ..    See: `Pain
+0000cea0: 7465 6450 6174 682e 6d6f 7665 5f72 656c  tedPath.move_rel
+0000ceb0: 6174 6976 6560 0a20 2020 2022 2222 0a0a  ative`.    """..
+0000cec0: 2020 2020 7074 3a20 506f 696e 740a 2020      pt: Point.  
+0000ced0: 2020 2222 2254 6865 206f 6666 7365 7420    """The offset 
+0000cee0: 6279 2077 6869 6368 2074 6f20 6d6f 7665  by which to move
+0000cef0: 2e22 2222 0a0a 2020 2020 4066 6f72 6365  ."""..    @force
+0000cf00: 5f6e 6f64 6f63 756d 656e 740a 2020 2020  _nodocument.    
+0000cf10: 6465 6620 7265 6e64 6572 2873 656c 662c  def render(self,
+0000cf20: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
+0000cf30: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
+0000cf40: 2069 6e69 7469 616c 5f70 6f69 6e74 293a   initial_point):
+0000cf50: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000cf60: 2020 2020 2052 656e 6465 7220 7468 6973       Render this
+0000cf70: 2070 6174 6820 656c 656d 656e 7420 746f   path element to
+0000cf80: 2069 7473 2050 4446 2072 6570 7265 7365   its PDF represe
+0000cf90: 6e74 6174 696f 6e2e 0a0a 2020 2020 2020  ntation...      
+0000cfa0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+0000cfb0: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+0000cfc0: 2028 4772 6170 6869 6373 5374 6174 6544   (GraphicsStateD
+0000cfd0: 6963 7452 6567 6973 7472 7929 3a20 7468  ictRegistry): th
+0000cfe0: 6520 6f77 6e65 7227 7320 6772 6170 6869  e owner's graphi
+0000cff0: 6373 2073 7461 7465 0a20 2020 2020 2020  cs state.       
+0000d000: 2020 2020 2020 2020 2064 6963 7469 6f6e           diction
+0000d010: 6172 7920 7265 6769 7374 7279 2e0a 2020  ary registry..  
+0000d020: 2020 2020 2020 2020 2020 7374 796c 6520            style 
+0000d030: 2847 7261 7068 6963 7353 7479 6c65 293a  (GraphicsStyle):
+0000d040: 2074 6865 2063 7572 7265 6e74 2072 6573   the current res
+0000d050: 6f6c 7665 6420 6772 6170 6869 6373 2073  olved graphics s
+0000d060: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
+0000d070: 206c 6173 745f 6974 656d 3a20 7468 6520   last_item: the 
+0000d080: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
+0000d090: 656d 656e 742e 0a20 2020 2020 2020 2020  ement..         
+0000d0a0: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
+0000d0b0: 3a20 6c61 7374 2070 6f73 6974 696f 6e20  : last position 
+0000d0c0: 7365 7420 6279 2061 2022 4d22 206f 7220  set by a "M" or 
+0000d0d0: 226d 2220 636f 6d6d 616e 640a 0a20 2020  "m" command..   
+0000d0e0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+0000d0f0: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
+0000d100: 6520 6f66 2060 2873 7472 2c20 6e65 775f  e of `(str, new_
+0000d110: 6c61 7374 5f69 7465 6d29 602c 2077 6865  last_item)`, whe
+0000d120: 7265 2060 6e65 775f 6c61 7374 5f69 7465  re `new_last_ite
+0000d130: 6d60 2069 7320 7468 6520 7265 736f 6c76  m` is the resolv
+0000d140: 6564 0a20 2020 2020 2020 2020 2020 2060  ed.            `
+0000d150: 4d6f 7665 600a 2020 2020 2020 2020 2222  Move`.        ""
+0000d160: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
+0000d170: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
+0000d180: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
+0000d190: 2020 2020 706f 696e 7420 3d20 6c61 7374      point = last
+0000d1a0: 5f69 7465 6d2e 656e 645f 706f 696e 7420  _item.end_point 
+0000d1b0: 2b20 7365 6c66 2e70 740a 2020 2020 2020  + self.pt.      
+0000d1c0: 2020 7265 7475 726e 205f 7265 6e64 6572    return _render
+0000d1d0: 5f6d 6f76 6528 706f 696e 7429 2c20 4d6f  _move(point), Mo
+0000d1e0: 7665 2870 6f69 6e74 292c 2070 6f69 6e74  ve(point), point
+0000d1f0: 0a0a 2020 2020 4066 6f72 6365 5f6e 6f64  ..    @force_nod
+0000d200: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+0000d210: 7265 6e64 6572 5f64 6562 7567 280a 2020  render_debug(.  
+0000d220: 2020 2020 2020 7365 6c66 2c20 6773 645f        self, gsd_
+0000d230: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+0000d240: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+0000d250: 6961 6c5f 706f 696e 742c 2064 6562 7567  ial_point, debug
+0000d260: 5f73 7472 6561 6d2c 2070 6678 0a20 2020  _stream, pfx.   
+0000d270: 2029 3a0a 2020 2020 2020 2020 2222 220a   ):.        """.
+0000d280: 2020 2020 2020 2020 5265 6e64 6572 2074          Render t
+0000d290: 6869 7320 7061 7468 2065 6c65 6d65 6e74  his path element
+0000d2a0: 2074 6f20 6974 7320 5044 4620 7265 7072   to its PDF repr
+0000d2b0: 6573 656e 7461 7469 6f6e 2061 6e64 2070  esentation and p
+0000d2c0: 726f 6475 6365 2064 6562 7567 0a20 2020  roduce debug.   
+0000d2d0: 2020 2020 2069 6e66 6f72 6d61 7469 6f6e       information
+0000d2e0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+0000d2f0: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
+0000d300: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
+0000d310: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
+0000d320: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
+0000d330: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
+0000d340: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000d350: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
+0000d360: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
+0000d370: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
+0000d380: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
+0000d390: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
+0000d3a0: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
+0000d3b0: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
+0000d3c0: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
+0000d3d0: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
+0000d3e0: 2020 2020 2020 2020 2020 2020 696e 6974              init
+0000d3f0: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
+0000d400: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
+0000d410: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
+0000d420: 6d61 6e64 0a20 2020 2020 2020 2020 2020  mand.           
+0000d430: 2064 6562 7567 5f73 7472 6561 6d20 2869   debug_stream (i
+0000d440: 6f2e 5465 7874 494f 293a 2074 6865 2073  o.TextIO): the s
+0000d450: 7472 6561 6d20 746f 2077 6869 6368 2074  tream to which t
+0000d460: 6865 2064 6562 7567 206f 7574 7075 7420  he debug output 
+0000d470: 7368 6f75 6c64 2062 650a 2020 2020 2020  should be.      
+0000d480: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+0000d490: 6e2e 2054 6869 7320 6973 206e 6f74 2067  n. This is not g
+0000d4a0: 7561 7261 6e74 6565 6420 746f 2062 6520  uaranteed to be 
+0000d4b0: 7365 656b 6162 6c65 2028 652e 672e 2069  seekable (e.g. i
+0000d4c0: 7420 6d61 7920 6265 2073 7464 6f75 7420  t may be stdout 
+0000d4d0: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
+0000d4e0: 2020 2073 7464 6572 7229 2e0a 2020 2020     stderr)..    
+0000d4f0: 2020 2020 2020 2020 7066 7820 2873 7472          pfx (str
+0000d500: 293a 2074 6865 2063 7572 7265 6e74 2064  ): the current d
+0000d510: 6562 7567 206f 7574 7075 7420 7072 6566  ebug output pref
+0000d520: 6978 2073 7472 696e 6720 286f 6e6c 7920  ix string (only 
+0000d530: 6e65 6564 6564 2069 6620 656d 6974 7469  needed if emitti
+0000d540: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
+0000d550: 2020 206d 6f72 6520 7468 616e 206f 6e65     more than one
+0000d560: 206c 696e 6529 2e0a 0a20 2020 2020 2020   line)...       
+0000d570: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+0000d580: 2020 2020 2020 5468 6520 7361 6d65 2074        The same t
+0000d590: 7570 6c65 2061 7320 6052 656c 6174 6976  uple as `Relativ
+0000d5a0: 654d 6f76 652e 7265 6e64 6572 602e 0a20  eMove.render`.. 
+0000d5b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000d5c0: 2020 2023 2070 796c 696e 743a 2064 6973     # pylint: dis
+0000d5d0: 6162 6c65 3d75 6e75 7365 642d 6172 6775  able=unused-argu
+0000d5e0: 6d65 6e74 0a20 2020 2020 2020 2072 656e  ment.        ren
+0000d5f0: 6465 7265 642c 2072 6573 6f6c 7665 642c  dered, resolved,
+0000d600: 2069 6e69 7469 616c 5f70 6f69 6e74 203d   initial_point =
+0000d610: 2073 656c 662e 7265 6e64 6572 280a 2020   self.render(.  
+0000d620: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
+0000d630: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
+0000d640: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
+0000d650: 6c5f 706f 696e 740a 2020 2020 2020 2020  l_point.        
+0000d660: 290a 2020 2020 2020 2020 6465 6275 675f  ).        debug_
+0000d670: 7374 7265 616d 2e77 7269 7465 2866 227b  stream.write(f"{
+0000d680: 7365 6c66 7d20 7265 736f 6c76 6564 2074  self} resolved t
+0000d690: 6f20 7b72 6573 6f6c 7665 647d 5c6e 2229  o {resolved}\n")
+0000d6a0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0000d6b0: 2072 656e 6465 7265 642c 2072 6573 6f6c   rendered, resol
+0000d6c0: 7665 642c 2069 6e69 7469 616c 5f70 6f69  ved, initial_poi
+0000d6d0: 6e74 0a0a 0a63 6c61 7373 204c 696e 6528  nt...class Line(
+0000d6e0: 4e61 6d65 6454 7570 6c65 293a 0a20 2020  NamedTuple):.   
+0000d6f0: 2022 2222 0a20 2020 2041 2070 6174 6820   """.    A path 
+0000d700: 6c69 6e65 2065 6c65 6d65 6e74 2e0a 0a20  line element... 
+0000d710: 2020 2054 6869 7320 6472 6177 7320 6120     This draws a 
+0000d720: 7374 7261 6967 6874 206c 696e 6520 6672  straight line fr
+0000d730: 6f6d 2074 6865 2065 6e64 2070 6f69 6e74  om the end point
+0000d740: 206f 6620 7468 6520 7072 6576 696f 7573   of the previous
+0000d750: 2070 6174 6820 656c 656d 656e 7420 746f   path element to
+0000d760: 2074 6865 0a20 2020 2070 6f69 6e74 2073   the.    point s
+0000d770: 7065 6369 6669 6564 2062 7920 6070 7460  pecified by `pt`
+0000d780: 2e0a 0a20 2020 2053 6565 3a20 6050 6169  ...    See: `Pai
+0000d790: 6e74 6564 5061 7468 2e6c 696e 655f 746f  ntedPath.line_to
+0000d7a0: 600a 2020 2020 2222 220a 0a20 2020 2070  `.    """..    p
+0000d7b0: 743a 2050 6f69 6e74 0a20 2020 2022 2222  t: Point.    """
+0000d7c0: 5468 6520 706f 696e 7420 746f 2077 6869  The point to whi
+0000d7d0: 6368 2074 6865 206c 696e 6520 6973 2064  ch the line is d
+0000d7e0: 7261 776e 2e22 2222 0a0a 2020 2020 4070  rawn."""..    @p
+0000d7f0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0000d800: 656e 645f 706f 696e 7428 7365 6c66 293a  end_point(self):
+0000d810: 0a20 2020 2020 2020 2022 2222 5468 6520  .        """The 
+0000d820: 656e 6420 706f 696e 7420 6f66 2074 6869  end point of thi
+0000d830: 7320 7061 7468 2065 6c65 6d65 6e74 2e22  s path element."
+0000d840: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000d850: 6e20 7365 6c66 2e70 740a 0a20 2020 2040  n self.pt..    @
+0000d860: 666f 7263 655f 6e6f 646f 6375 6d65 6e74  force_nodocument
+0000d870: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
+0000d880: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
+0000d890: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+0000d8a0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+0000d8b0: 696e 7429 3a0a 2020 2020 2020 2020 2222  int):.        ""
+0000d8c0: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
+0000d8d0: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
+0000d8e0: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
+0000d8f0: 7072 6573 656e 7461 7469 6f6e 2e0a 0a20  presentation... 
+0000d900: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+0000d910: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
+0000d920: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
+0000d930: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
+0000d940: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
+0000d950: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
+0000d960: 2020 2020 2020 2020 2020 2020 2020 6469                di
+0000d970: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
+0000d980: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
+0000d990: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
+0000d9a0: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
+0000d9b0: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
+0000d9c0: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
+0000d9d0: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
+0000d9e0: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+0000d9f0: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
+0000da00: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
+0000da10: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
+0000da20: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
+0000da30: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
+0000da40: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000da50: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
+0000da60: 2074 7570 6c65 206f 6620 6028 7374 722c   tuple of `(str,
+0000da70: 206e 6577 5f6c 6173 745f 6974 656d 2960   new_last_item)`
+0000da80: 2c20 7768 6572 6520 606e 6577 5f6c 6173  , where `new_las
+0000da90: 745f 6974 656d 6020 6973 2060 7365 6c66  t_item` is `self
+0000daa0: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0000dab0: 2020 2020 2020 2320 7079 6c69 6e74 3a20        # pylint: 
+0000dac0: 6469 7361 626c 653d 756e 7573 6564 2d61  disable=unused-a
+0000dad0: 7267 756d 656e 740a 2020 2020 2020 2020  rgument.        
+0000dae0: 7265 7475 726e 205f 7265 6e64 6572 5f6c  return _render_l
+0000daf0: 696e 6528 7365 6c66 2e70 7429 2c20 7365  ine(self.pt), se
+0000db00: 6c66 2c20 696e 6974 6961 6c5f 706f 696e  lf, initial_poin
+0000db10: 740a 0a20 2020 2040 666f 7263 655f 6e6f  t..    @force_no
+0000db20: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
+0000db30: 2072 656e 6465 725f 6465 6275 6728 0a20   render_debug(. 
+0000db40: 2020 2020 2020 2073 656c 662c 2067 7364         self, gsd
+0000db50: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
+0000db60: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
+0000db70: 7469 616c 5f70 6f69 6e74 2c20 6465 6275  tial_point, debu
+0000db80: 675f 7374 7265 616d 2c20 7066 780a 2020  g_stream, pfx.  
+0000db90: 2020 293a 0a20 2020 2020 2020 2022 2222    ):.        """
+0000dba0: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
+0000dbb0: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
+0000dbc0: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
+0000dbd0: 7265 7365 6e74 6174 696f 6e20 616e 6420  resentation and 
+0000dbe0: 7072 6f64 7563 6520 6465 6275 670a 2020  produce debug.  
+0000dbf0: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
+0000dc00: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
+0000dc10: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
+0000dc20: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
+0000dc30: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
+0000dc40: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
+0000dc50: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
+0000dc60: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
+0000dc70: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
+0000dc80: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
+0000dc90: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
+0000dca0: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
+0000dcb0: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
+0000dcc0: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
+0000dcd0: 2020 2020 2020 2020 2020 206c 6173 745f             last_
+0000dce0: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
+0000dcf0: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
+0000dd00: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
+0000dd10: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
+0000dd20: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
+0000dd30: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
+0000dd40: 6d6d 616e 640a 2020 2020 2020 2020 2020  mmand.          
+0000dd50: 2020 6465 6275 675f 7374 7265 616d 2028    debug_stream (
+0000dd60: 696f 2e54 6578 7449 4f29 3a20 7468 6520  io.TextIO): the 
+0000dd70: 7374 7265 616d 2074 6f20 7768 6963 6820  stream to which 
+0000dd80: 7468 6520 6465 6275 6720 6f75 7470 7574  the debug output
+0000dd90: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
+0000dda0: 2020 2020 2020 2020 2020 2077 7269 7474             writt
+0000ddb0: 656e 2e20 5468 6973 2069 7320 6e6f 7420  en. This is not 
+0000ddc0: 6775 6172 616e 7465 6564 2074 6f20 6265  guaranteed to be
+0000ddd0: 2073 6565 6b61 626c 6520 2865 2e67 2e20   seekable (e.g. 
+0000dde0: 6974 206d 6179 2062 6520 7374 646f 7574  it may be stdout
+0000ddf0: 206f 720a 2020 2020 2020 2020 2020 2020   or.            
+0000de00: 2020 2020 7374 6465 7272 292e 0a20 2020      stderr)..   
+0000de10: 2020 2020 2020 2020 2070 6678 2028 7374           pfx (st
+0000de20: 7229 3a20 7468 6520 6375 7272 656e 7420  r): the current 
+0000de30: 6465 6275 6720 6f75 7470 7574 2070 7265  debug output pre
+0000de40: 6669 7820 7374 7269 6e67 2028 6f6e 6c79  fix string (only
+0000de50: 206e 6565 6465 6420 6966 2065 6d69 7474   needed if emitt
+0000de60: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
+0000de70: 2020 2020 6d6f 7265 2074 6861 6e20 6f6e      more than on
+0000de80: 6520 6c69 6e65 292e 0a0a 2020 2020 2020  e line)...      
+0000de90: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+0000dea0: 2020 2020 2020 2054 6865 2073 616d 6520         The same 
+0000deb0: 7475 706c 6520 6173 2060 4c69 6e65 2e72  tuple as `Line.r
+0000dec0: 656e 6465 7260 2e0a 2020 2020 2020 2020  ender`..        
+0000ded0: 2222 220a 2020 2020 2020 2020 2320 7079  """.        # py
+0000dee0: 6c69 6e74 3a20 6469 7361 626c 653d 756e  lint: disable=un
+0000def0: 7573 6564 2d61 7267 756d 656e 740a 2020  used-argument.  
+0000df00: 2020 2020 2020 7265 6e64 6572 6564 2c20        rendered, 
+0000df10: 7265 736f 6c76 6564 2c20 696e 6974 6961  resolved, initia
+0000df20: 6c5f 706f 696e 7420 3d20 7365 6c66 2e72  l_point = self.r
+0000df30: 656e 6465 7228 0a20 2020 2020 2020 2020  ender(.         
+0000df40: 2020 2067 7364 5f72 6567 6973 7472 792c     gsd_registry,
+0000df50: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
+0000df60: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+0000df70: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000df80: 2020 2064 6562 7567 5f73 7472 6561 6d2e     debug_stream.
+0000df90: 7772 6974 6528 7374 7228 7365 6c66 2920  write(str(self) 
+0000dfa0: 2b20 225c 6e22 290a 0a20 2020 2020 2020  + "\n")..       
+0000dfb0: 2072 6574 7572 6e20 7265 6e64 6572 6564   return rendered
+0000dfc0: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
+0000dfd0: 6961 6c5f 706f 696e 740a 0a0a 636c 6173  ial_point...clas
+0000dfe0: 7320 5265 6c61 7469 7665 4c69 6e65 284e  s RelativeLine(N
+0000dff0: 616d 6564 5475 706c 6529 3a0a 2020 2020  amedTuple):.    
+0000e000: 2222 220a 2020 2020 4120 7061 7468 206c  """.    A path l
+0000e010: 696e 6520 656c 656d 656e 7420 7769 7468  ine element with
+0000e020: 2061 6e20 656e 6470 6f69 6e74 2072 656c   an endpoint rel
+0000e030: 6174 6976 6520 746f 2074 6865 2065 6e64  ative to the end
+0000e040: 206f 6620 7468 6520 7072 6576 696f 7573   of the previous
+0000e050: 2065 6c65 6d65 6e74 2e0a 0a20 2020 2054   element...    T
+0000e060: 6869 7320 6472 6177 7320 6120 7374 7261  his draws a stra
+0000e070: 6967 6874 206c 696e 6520 6672 6f6d 2074  ight line from t
+0000e080: 6865 2065 6e64 2070 6f69 6e74 206f 6620  he end point of 
+0000e090: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+0000e0a0: 6820 656c 656d 656e 7420 746f 2074 6865  h element to the
+0000e0b0: 0a20 2020 2070 6f69 6e74 2073 7065 6369  .    point speci
+0000e0c0: 6669 6564 2062 7920 606c 6173 745f 6974  fied by `last_it
+0000e0d0: 656d 2e65 6e64 5f70 6f69 6e74 202b 2070  em.end_point + p
+0000e0e0: 7460 2e20 5468 6520 6162 736f 6c75 7465  t`. The absolute
+0000e0f0: 2063 6f6f 7264 696e 6174 6573 206f 6620   coordinates of 
+0000e100: 7468 6520 656e 640a 2020 2020 706f 696e  the end.    poin
+0000e110: 7420 6172 6520 7265 736f 6c76 6564 2064  t are resolved d
+0000e120: 7572 696e 6720 7468 6520 7265 6e64 6572  uring the render
+0000e130: 696e 6720 7072 6f63 6573 732e 0a0a 2020  ing process...  
+0000e140: 2020 5365 653a 2060 5061 696e 7465 6450    See: `PaintedP
+0000e150: 6174 682e 6c69 6e65 5f72 656c 6174 6976  ath.line_relativ
+0000e160: 6560 0a20 2020 2022 2222 0a0a 2020 2020  e`.    """..    
+0000e170: 7074 3a20 506f 696e 740a 2020 2020 2222  pt: Point.    ""
+0000e180: 2254 6865 2065 6e64 706f 696e 7420 6f66  "The endpoint of
+0000e190: 2074 6865 206c 696e 6520 7265 6c61 7469   the line relati
+0000e1a0: 7665 2074 6f20 7468 6520 7072 6576 696f  ve to the previo
+0000e1b0: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
+0000e1c0: 2222 220a 0a20 2020 2040 666f 7263 655f  """..    @force_
+0000e1d0: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+0000e1e0: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
+0000e1f0: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
+0000e200: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
+0000e210: 696e 6974 6961 6c5f 706f 696e 7429 3a0a  initial_point):.
+0000e220: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0000e230: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
+0000e240: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
+0000e250: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
+0000e260: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
+0000e270: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+0000e280: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
+0000e290: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
+0000e2a0: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
+0000e2b0: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
+0000e2c0: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
+0000e2d0: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
+0000e2e0: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
+0000e2f0: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
+0000e300: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
+0000e310: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
+0000e320: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
+0000e330: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
+0000e340: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
+0000e350: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
+0000e360: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
+0000e370: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
+0000e380: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
+0000e390: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
+0000e3a0: 6d22 2063 6f6d 6d61 6e64 0a0a 2020 2020  m" command..    
+0000e3b0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+0000e3c0: 2020 2020 2020 2020 2061 2074 7570 6c65           a tuple
+0000e3d0: 206f 6620 6028 7374 722c 206e 6577 5f6c   of `(str, new_l
+0000e3e0: 6173 745f 6974 656d 2960 2c20 7768 6572  ast_item)`, wher
+0000e3f0: 6520 606e 6577 5f6c 6173 745f 6974 656d  e `new_last_item
+0000e400: 6020 6973 2074 6865 2072 6573 6f6c 7665  ` is the resolve
+0000e410: 640a 2020 2020 2020 2020 2020 2020 604c  d.            `L
+0000e420: 696e 6560 2e0a 2020 2020 2020 2020 2222  ine`..        ""
+0000e430: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
+0000e440: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
+0000e450: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
+0000e460: 2020 2020 706f 696e 7420 3d20 6c61 7374      point = last
+0000e470: 5f69 7465 6d2e 656e 645f 706f 696e 7420  _item.end_point 
+0000e480: 2b20 7365 6c66 2e70 740a 2020 2020 2020  + self.pt.      
+0000e490: 2020 7265 7475 726e 205f 7265 6e64 6572    return _render
+0000e4a0: 5f6c 696e 6528 706f 696e 7429 2c20 4c69  _line(point), Li
+0000e4b0: 6e65 2870 6f69 6e74 292c 2069 6e69 7469  ne(point), initi
+0000e4c0: 616c 5f70 6f69 6e74 0a0a 2020 2020 4066  al_point..    @f
+0000e4d0: 6f72 6365 5f6e 6f64 6f63 756d 656e 740a  orce_nodocument.
+0000e4e0: 2020 2020 6465 6620 7265 6e64 6572 5f64      def render_d
+0000e4f0: 6562 7567 280a 2020 2020 2020 2020 7365  ebug(.        se
+0000e500: 6c66 2c20 6773 645f 7265 6769 7374 7279  lf, gsd_registry
+0000e510: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+0000e520: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+0000e530: 742c 2064 6562 7567 5f73 7472 6561 6d2c  t, debug_stream,
+0000e540: 2070 6678 0a20 2020 2029 3a0a 2020 2020   pfx.    ):.    
+0000e550: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000e560: 5265 6e64 6572 2074 6869 7320 7061 7468  Render this path
+0000e570: 2065 6c65 6d65 6e74 2074 6f20 6974 7320   element to its 
+0000e580: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
+0000e590: 6f6e 2061 6e64 2070 726f 6475 6365 2064  on and produce d
+0000e5a0: 6562 7567 0a20 2020 2020 2020 2069 6e66  ebug.        inf
+0000e5b0: 6f72 6d61 7469 6f6e 2e0a 0a20 2020 2020  ormation...     
+0000e5c0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+0000e5d0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
+0000e5e0: 7920 2847 7261 7068 6963 7353 7461 7465  y (GraphicsState
+0000e5f0: 4469 6374 5265 6769 7374 7279 293a 2074  DictRegistry): t
+0000e600: 6865 206f 776e 6572 2773 2067 7261 7068  he owner's graph
+0000e610: 6963 7320 7374 6174 650a 2020 2020 2020  ics state.      
+0000e620: 2020 2020 2020 2020 2020 6469 6374 696f            dictio
+0000e630: 6e61 7279 2072 6567 6973 7472 792e 0a20  nary registry.. 
+0000e640: 2020 2020 2020 2020 2020 2073 7479 6c65             style
+0000e650: 2028 4772 6170 6869 6373 5374 796c 6529   (GraphicsStyle)
+0000e660: 3a20 7468 6520 6375 7272 656e 7420 7265  : the current re
+0000e670: 736f 6c76 6564 2067 7261 7068 6963 7320  solved graphics 
+0000e680: 7374 796c 650a 2020 2020 2020 2020 2020  style.          
+0000e690: 2020 6c61 7374 5f69 7465 6d3a 2074 6865    last_item: the
+0000e6a0: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+0000e6b0: 6c65 6d65 6e74 2e0a 2020 2020 2020 2020  lement..        
+0000e6c0: 2020 2020 696e 6974 6961 6c5f 706f 696e      initial_poin
+0000e6d0: 743a 206c 6173 7420 706f 7369 7469 6f6e  t: last position
+0000e6e0: 2073 6574 2062 7920 6120 224d 2220 6f72   set by a "M" or
+0000e6f0: 2022 6d22 2063 6f6d 6d61 6e64 0a20 2020   "m" command.   
+0000e700: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
+0000e710: 7472 6561 6d20 2869 6f2e 5465 7874 494f  tream (io.TextIO
+0000e720: 293a 2074 6865 2073 7472 6561 6d20 746f  ): the stream to
+0000e730: 2077 6869 6368 2074 6865 2064 6562 7567   which the debug
+0000e740: 206f 7574 7075 7420 7368 6f75 6c64 2062   output should b
+0000e750: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000e760: 2020 7772 6974 7465 6e2e 2054 6869 7320    written. This 
+0000e770: 6973 206e 6f74 2067 7561 7261 6e74 6565  is not guarantee
+0000e780: 6420 746f 2062 6520 7365 656b 6162 6c65  d to be seekable
+0000e790: 2028 652e 672e 2069 7420 6d61 7920 6265   (e.g. it may be
+0000e7a0: 2073 7464 6f75 7420 6f72 0a20 2020 2020   stdout or.     
+0000e7b0: 2020 2020 2020 2020 2020 2073 7464 6572             stder
+0000e7c0: 7229 2e0a 2020 2020 2020 2020 2020 2020  r)..            
+0000e7d0: 7066 7820 2873 7472 293a 2074 6865 2063  pfx (str): the c
+0000e7e0: 7572 7265 6e74 2064 6562 7567 206f 7574  urrent debug out
+0000e7f0: 7075 7420 7072 6566 6978 2073 7472 696e  put prefix strin
+0000e800: 6720 286f 6e6c 7920 6e65 6564 6564 2069  g (only needed i
+0000e810: 6620 656d 6974 7469 6e67 0a20 2020 2020  f emitting.     
+0000e820: 2020 2020 2020 2020 2020 206d 6f72 6520             more 
+0000e830: 7468 616e 206f 6e65 206c 696e 6529 2e0a  than one line)..
+0000e840: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0000e850: 3a0a 2020 2020 2020 2020 2020 2020 5468  :.            Th
+0000e860: 6520 7361 6d65 2074 7570 6c65 2061 7320  e same tuple as 
+0000e870: 6052 656c 6174 6976 654c 696e 652e 7265  `RelativeLine.re
+0000e880: 6e64 6572 602e 0a20 2020 2020 2020 2022  nder`..        "
+0000e890: 2222 0a20 2020 2020 2020 2023 2070 796c  "".        # pyl
+0000e8a0: 696e 743a 2064 6973 6162 6c65 3d75 6e75  int: disable=unu
+0000e8b0: 7365 642d 6172 6775 6d65 6e74 0a20 2020  sed-argument.   
+0000e8c0: 2020 2020 2072 656e 6465 7265 642c 2072       rendered, r
+0000e8d0: 6573 6f6c 7665 642c 2069 6e69 7469 616c  esolved, initial
+0000e8e0: 5f70 6f69 6e74 203d 2073 656c 662e 7265  _point = self.re
+0000e8f0: 6e64 6572 280a 2020 2020 2020 2020 2020  nder(.          
+0000e900: 2020 6773 645f 7265 6769 7374 7279 2c20    gsd_registry, 
+0000e910: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+0000e920: 2c20 696e 6974 6961 6c5f 706f 696e 740a  , initial_point.
+0000e930: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000e940: 2020 6465 6275 675f 7374 7265 616d 2e77    debug_stream.w
+0000e950: 7269 7465 2866 227b 7365 6c66 7d20 7265  rite(f"{self} re
+0000e960: 736f 6c76 6564 2074 6f20 7b72 6573 6f6c  solved to {resol
+0000e970: 7665 647d 5c6e 2229 0a0a 2020 2020 2020  ved}\n")..      
+0000e980: 2020 7265 7475 726e 2072 656e 6465 7265    return rendere
+0000e990: 642c 2072 6573 6f6c 7665 642c 2069 6e69  d, resolved, ini
+0000e9a0: 7469 616c 5f70 6f69 6e74 0a0a 0a63 6c61  tial_point...cla
+0000e9b0: 7373 2048 6f72 697a 6f6e 7461 6c4c 696e  ss HorizontalLin
+0000e9c0: 6528 4e61 6d65 6454 7570 6c65 293a 0a20  e(NamedTuple):. 
+0000e9d0: 2020 2022 2222 0a20 2020 2041 2070 6174     """.    A pat
+0000e9e0: 6820 6c69 6e65 2065 6c65 6d65 6e74 2074  h line element t
+0000e9f0: 6861 7420 7461 6b65 7320 6974 7320 6f72  hat takes its or
+0000ea00: 6469 6e61 7465 2066 726f 6d20 7468 6520  dinate from the 
+0000ea10: 656e 6420 6f66 2074 6865 2070 7265 7669  end of the previ
+0000ea20: 6f75 7320 656c 656d 656e 742e 0a0a 2020  ous element...  
+0000ea30: 2020 5365 653a 2060 5061 696e 7465 6450    See: `PaintedP
+0000ea40: 6174 682e 686f 7269 7a6f 6e74 616c 5f6c  ath.horizontal_l
+0000ea50: 696e 655f 746f 600a 2020 2020 2222 220a  ine_to`.    """.
+0000ea60: 0a20 2020 2078 3a20 4e75 6d62 6572 0a20  .    x: Number. 
+0000ea70: 2020 2022 2222 5468 6520 6162 7363 6973     """The abscis
+0000ea80: 7361 206f 6620 7468 6520 686f 7269 7a6f  sa of the horizo
+0000ea90: 6e74 616c 206c 696e 6527 7320 656e 6420  ntal line's end 
+0000eaa0: 706f 696e 742e 2222 220a 0a20 2020 2040  point."""..    @
+0000eab0: 666f 7263 655f 6e6f 646f 6375 6d65 6e74  force_nodocument
+0000eac0: 0a20 2020 2064 6566 2072 656e 6465 7228  .    def render(
+0000ead0: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
+0000eae0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+0000eaf0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+0000eb00: 696e 7429 3a0a 2020 2020 2020 2020 2222  int):.        ""
+0000eb10: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
+0000eb20: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
+0000eb30: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
+0000eb40: 7072 6573 656e 7461 7469 6f6e 2e0a 0a20  presentation... 
+0000eb50: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+0000eb60: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
+0000eb70: 6973 7472 7920 2847 7261 7068 6963 7353  istry (GraphicsS
+0000eb80: 7461 7465 4469 6374 5265 6769 7374 7279  tateDictRegistry
+0000eb90: 293a 2074 6865 206f 776e 6572 2773 2067  ): the owner's g
+0000eba0: 7261 7068 6963 7320 7374 6174 650a 2020  raphics state.  
+0000ebb0: 2020 2020 2020 2020 2020 2020 2020 6469                di
+0000ebc0: 6374 696f 6e61 7279 2072 6567 6973 7472  ctionary registr
+0000ebd0: 792e 0a20 2020 2020 2020 2020 2020 2073  y..            s
+0000ebe0: 7479 6c65 2028 4772 6170 6869 6373 5374  tyle (GraphicsSt
+0000ebf0: 796c 6529 3a20 7468 6520 6375 7272 656e  yle): the curren
+0000ec00: 7420 7265 736f 6c76 6564 2067 7261 7068  t resolved graph
+0000ec10: 6963 7320 7374 796c 650a 2020 2020 2020  ics style.      
+0000ec20: 2020 2020 2020 6c61 7374 5f69 7465 6d3a        last_item:
+0000ec30: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+0000ec40: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
+0000ec50: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
+0000ec60: 706f 696e 743a 206c 6173 7420 706f 7369  point: last posi
+0000ec70: 7469 6f6e 2073 6574 2062 7920 6120 224d  tion set by a "M
+0000ec80: 2220 6f72 2022 6d22 2063 6f6d 6d61 6e64  " or "m" command
+0000ec90: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0000eca0: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
+0000ecb0: 2074 7570 6c65 206f 6620 6028 7374 722c   tuple of `(str,
+0000ecc0: 206e 6577 5f6c 6173 745f 6974 656d 2960   new_last_item)`
+0000ecd0: 2c20 7768 6572 6520 606e 6577 5f6c 6173  , where `new_las
+0000ece0: 745f 6974 656d 6020 6973 2074 6865 2072  t_item` is the r
+0000ecf0: 6573 6f6c 7665 640a 2020 2020 2020 2020  esolved.        
+0000ed00: 2020 2020 604c 696e 6560 2e0a 2020 2020      `Line`..    
+0000ed10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000ed20: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
+0000ed30: 653d 756e 7573 6564 2d61 7267 756d 656e  e=unused-argumen
+0000ed40: 740a 2020 2020 2020 2020 656e 645f 706f  t.        end_po
+0000ed50: 696e 7420 3d20 506f 696e 7428 783d 7365  int = Point(x=se
+0000ed60: 6c66 2e78 2c20 793d 6c61 7374 5f69 7465  lf.x, y=last_ite
+0000ed70: 6d2e 656e 645f 706f 696e 742e 7929 0a20  m.end_point.y). 
+0000ed80: 2020 2020 2020 2072 6574 7572 6e20 5f72         return _r
+0000ed90: 656e 6465 725f 6c69 6e65 2865 6e64 5f70  ender_line(end_p
+0000eda0: 6f69 6e74 292c 204c 696e 6528 656e 645f  oint), Line(end_
+0000edb0: 706f 696e 7429 2c20 696e 6974 6961 6c5f  point), initial_
+0000edc0: 706f 696e 740a 0a20 2020 2040 666f 7263  point..    @forc
+0000edd0: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
+0000ede0: 2064 6566 2072 656e 6465 725f 6465 6275   def render_debu
+0000edf0: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+0000ee00: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
+0000ee10: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
+0000ee20: 2069 6e69 7469 616c 5f70 6f69 6e74 2c20   initial_point, 
+0000ee30: 6465 6275 675f 7374 7265 616d 2c20 7066  debug_stream, pf
+0000ee40: 780a 2020 2020 293a 0a20 2020 2020 2020  x.    ):.       
+0000ee50: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
+0000ee60: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
+0000ee70: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
+0000ee80: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
+0000ee90: 616e 6420 7072 6f64 7563 6520 6465 6275  and produce debu
+0000eea0: 670a 2020 2020 2020 2020 696e 666f 726d  g.        inform
+0000eeb0: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
+0000eec0: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+0000eed0: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
+0000eee0: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
+0000eef0: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
+0000ef00: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
+0000ef10: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
+0000ef20: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
+0000ef30: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
+0000ef40: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
+0000ef50: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
+0000ef60: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
+0000ef70: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
+0000ef80: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
+0000ef90: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
+0000efa0: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
+0000efb0: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
+0000efc0: 2069 6e69 7469 616c 5f70 6f69 6e74 3a20   initial_point: 
+0000efd0: 6c61 7374 2070 6f73 6974 696f 6e20 7365  last position se
+0000efe0: 7420 6279 2061 2022 4d22 206f 7220 226d  t by a "M" or "m
+0000eff0: 2220 636f 6d6d 616e 640a 2020 2020 2020  " command.      
+0000f000: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+0000f010: 616d 2028 696f 2e54 6578 7449 4f29 3a20  am (io.TextIO): 
+0000f020: 7468 6520 7374 7265 616d 2074 6f20 7768  the stream to wh
+0000f030: 6963 6820 7468 6520 6465 6275 6720 6f75  ich the debug ou
+0000f040: 7470 7574 2073 686f 756c 6420 6265 0a20  tput should be. 
+0000f050: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0000f060: 7269 7474 656e 2e20 5468 6973 2069 7320  ritten. This is 
+0000f070: 6e6f 7420 6775 6172 616e 7465 6564 2074  not guaranteed t
+0000f080: 6f20 6265 2073 6565 6b61 626c 6520 2865  o be seekable (e
+0000f090: 2e67 2e20 6974 206d 6179 2062 6520 7374  .g. it may be st
+0000f0a0: 646f 7574 206f 720a 2020 2020 2020 2020  dout or.        
+0000f0b0: 2020 2020 2020 2020 7374 6465 7272 292e          stderr).
+0000f0c0: 0a20 2020 2020 2020 2020 2020 2070 6678  .            pfx
+0000f0d0: 2028 7374 7229 3a20 7468 6520 6375 7272   (str): the curr
+0000f0e0: 656e 7420 6465 6275 6720 6f75 7470 7574  ent debug output
+0000f0f0: 2070 7265 6669 7820 7374 7269 6e67 2028   prefix string (
+0000f100: 6f6e 6c79 206e 6565 6465 6420 6966 2065  only needed if e
+0000f110: 6d69 7474 696e 670a 2020 2020 2020 2020  mitting.        
+0000f120: 2020 2020 2020 2020 6d6f 7265 2074 6861          more tha
+0000f130: 6e20 6f6e 6520 6c69 6e65 292e 0a0a 2020  n one line)...  
+0000f140: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+0000f150: 2020 2020 2020 2020 2020 2054 6865 2073             The s
+0000f160: 616d 6520 7475 706c 6520 6173 2060 486f  ame tuple as `Ho
+0000f170: 7269 7a6f 6e74 616c 4c69 6e65 2e72 656e  rizontalLine.ren
+0000f180: 6465 7260 2e0a 2020 2020 2020 2020 2222  der`..        ""
+0000f190: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
+0000f1a0: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
+0000f1b0: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
+0000f1c0: 2020 2020 7265 6e64 6572 6564 2c20 7265      rendered, re
+0000f1d0: 736f 6c76 6564 2c20 696e 6974 6961 6c5f  solved, initial_
+0000f1e0: 706f 696e 7420 3d20 7365 6c66 2e72 656e  point = self.ren
+0000f1f0: 6465 7228 0a20 2020 2020 2020 2020 2020  der(.           
+0000f200: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
+0000f210: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
+0000f220: 2069 6e69 7469 616c 5f70 6f69 6e74 0a20   initial_point. 
+0000f230: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000f240: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
+0000f250: 6974 6528 6622 7b73 656c 667d 2072 6573  ite(f"{self} res
+0000f260: 6f6c 7665 6420 746f 207b 7265 736f 6c76  olved to {resolv
+0000f270: 6564 7d5c 6e22 290a 0a20 2020 2020 2020  ed}\n")..       
+0000f280: 2072 6574 7572 6e20 7265 6e64 6572 6564   return rendered
+0000f290: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
+0000f2a0: 6961 6c5f 706f 696e 740a 0a0a 636c 6173  ial_point...clas
+0000f2b0: 7320 5265 6c61 7469 7665 486f 7269 7a6f  s RelativeHorizo
+0000f2c0: 6e74 616c 4c69 6e65 284e 616d 6564 5475  ntalLine(NamedTu
+0000f2d0: 706c 6529 3a0a 2020 2020 2222 220a 2020  ple):.    """.  
+0000f2e0: 2020 4120 7061 7468 206c 696e 6520 656c    A path line el
+0000f2f0: 656d 656e 7420 7468 6174 2074 616b 6573  ement that takes
+0000f300: 2069 7473 206f 7264 696e 6174 6520 6672   its ordinate fr
+0000f310: 6f6d 2074 6865 2065 6e64 206f 6620 7468  om the end of th
+0000f320: 6520 7072 6576 696f 7573 2065 6c65 6d65  e previous eleme
+0000f330: 6e74 2061 6e64 0a20 2020 2063 6f6d 7075  nt and.    compu
+0000f340: 7465 7320 6974 7320 6162 7363 6973 7361  tes its abscissa
+0000f350: 206f 6666 7365 7420 6672 6f6d 2074 6865   offset from the
+0000f360: 2065 6e64 206f 6620 7468 6174 2065 6c65   end of that ele
+0000f370: 6d65 6e74 2e0a 0a20 2020 2053 6565 3a20  ment...    See: 
+0000f380: 6050 6169 6e74 6564 5061 7468 2e68 6f72  `PaintedPath.hor
+0000f390: 697a 6f6e 7461 6c5f 6c69 6e65 5f72 656c  izontal_line_rel
+0000f3a0: 6174 6976 6560 0a20 2020 2022 2222 0a0a  ative`.    """..
+0000f3b0: 2020 2020 783a 204e 756d 6265 720a 2020      x: Number.  
+0000f3c0: 2020 2222 220a 2020 2020 5468 6520 6162    """.    The ab
+0000f3d0: 7363 6973 7361 206f 6620 7468 6520 686f  scissa of the ho
+0000f3e0: 7269 7a6f 6e74 616c 206c 696e 6527 7320  rizontal line's 
+0000f3f0: 656e 6420 706f 696e 7420 7265 6c61 7469  end point relati
+0000f400: 7665 2074 6f20 7468 6520 6162 7363 6973  ve to the abscis
+0000f410: 7361 206f 6620 7468 650a 2020 2020 7072  sa of the.    pr
+0000f420: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
+0000f430: 656e 742e 0a20 2020 2022 2222 0a0a 2020  ent..    """..  
+0000f440: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
+0000f450: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
+0000f460: 6572 2873 656c 662c 2067 7364 5f72 6567  er(self, gsd_reg
+0000f470: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+0000f480: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+0000f490: 5f70 6f69 6e74 293a 0a20 2020 2020 2020  _point):.       
+0000f4a0: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
+0000f4b0: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
+0000f4c0: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
+0000f4d0: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
+0000f4e0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+0000f4f0: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
+0000f500: 7265 6769 7374 7279 2028 4772 6170 6869  registry (Graphi
+0000f510: 6373 5374 6174 6544 6963 7452 6567 6973  csStateDictRegis
+0000f520: 7472 7929 3a20 7468 6520 6f77 6e65 7227  try): the owner'
+0000f530: 7320 6772 6170 6869 6373 2073 7461 7465  s graphics state
+0000f540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f550: 2064 6963 7469 6f6e 6172 7920 7265 6769   dictionary regi
+0000f560: 7374 7279 2e0a 2020 2020 2020 2020 2020  stry..          
+0000f570: 2020 7374 796c 6520 2847 7261 7068 6963    style (Graphic
+0000f580: 7353 7479 6c65 293a 2074 6865 2063 7572  sStyle): the cur
+0000f590: 7265 6e74 2072 6573 6f6c 7665 6420 6772  rent resolved gr
+0000f5a0: 6170 6869 6373 2073 7479 6c65 0a20 2020  aphics style.   
+0000f5b0: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
+0000f5c0: 656d 3a20 7468 6520 7072 6576 696f 7573  em: the previous
+0000f5d0: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
+0000f5e0: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+0000f5f0: 616c 5f70 6f69 6e74 3a20 6c61 7374 2070  al_point: last p
+0000f600: 6f73 6974 696f 6e20 7365 7420 6279 2061  osition set by a
+0000f610: 2022 4d22 206f 7220 226d 2220 636f 6d6d   "M" or "m" comm
+0000f620: 616e 640a 0a20 2020 2020 2020 2052 6574  and..        Ret
+0000f630: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+0000f640: 2020 6120 7475 706c 6520 6f66 2060 2873    a tuple of `(s
+0000f650: 7472 2c20 6e65 775f 6c61 7374 5f69 7465  tr, new_last_ite
+0000f660: 6d29 602c 2077 6865 7265 2060 6e65 775f  m)`, where `new_
+0000f670: 6c61 7374 5f69 7465 6d60 2069 7320 7468  last_item` is th
+0000f680: 6520 7265 736f 6c76 6564 0a20 2020 2020  e resolved.     
+0000f690: 2020 2020 2020 2060 4c69 6e65 602e 0a20         `Line`.. 
+0000f6a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000f6b0: 2020 2023 2070 796c 696e 743a 2064 6973     # pylint: dis
+0000f6c0: 6162 6c65 3d75 6e75 7365 642d 6172 6775  able=unused-argu
+0000f6d0: 6d65 6e74 0a20 2020 2020 2020 2065 6e64  ment.        end
+0000f6e0: 5f70 6f69 6e74 203d 2050 6f69 6e74 2878  _point = Point(x
+0000f6f0: 3d6c 6173 745f 6974 656d 2e65 6e64 5f70  =last_item.end_p
+0000f700: 6f69 6e74 2e78 202b 2073 656c 662e 782c  oint.x + self.x,
+0000f710: 2079 3d6c 6173 745f 6974 656d 2e65 6e64   y=last_item.end
+0000f720: 5f70 6f69 6e74 2e79 290a 2020 2020 2020  _point.y).      
+0000f730: 2020 7265 7475 726e 205f 7265 6e64 6572    return _render
+0000f740: 5f6c 696e 6528 656e 645f 706f 696e 7429  _line(end_point)
+0000f750: 2c20 4c69 6e65 2865 6e64 5f70 6f69 6e74  , Line(end_point
+0000f760: 292c 2069 6e69 7469 616c 5f70 6f69 6e74  ), initial_point
+0000f770: 0a0a 2020 2020 4066 6f72 6365 5f6e 6f64  ..    @force_nod
+0000f780: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+0000f790: 7265 6e64 6572 5f64 6562 7567 280a 2020  render_debug(.  
+0000f7a0: 2020 2020 2020 7365 6c66 2c20 6773 645f        self, gsd_
+0000f7b0: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+0000f7c0: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+0000f7d0: 6961 6c5f 706f 696e 742c 2064 6562 7567  ial_point, debug
+0000f7e0: 5f73 7472 6561 6d2c 2070 6678 0a20 2020  _stream, pfx.   
+0000f7f0: 2029 3a0a 2020 2020 2020 2020 2222 220a   ):.        """.
+0000f800: 2020 2020 2020 2020 5265 6e64 6572 2074          Render t
+0000f810: 6869 7320 7061 7468 2065 6c65 6d65 6e74  his path element
+0000f820: 2074 6f20 6974 7320 5044 4620 7265 7072   to its PDF repr
+0000f830: 6573 656e 7461 7469 6f6e 2061 6e64 2070  esentation and p
+0000f840: 726f 6475 6365 2064 6562 7567 0a20 2020  roduce debug.   
+0000f850: 2020 2020 2069 6e66 6f72 6d61 7469 6f6e       information
+0000f860: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+0000f870: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
+0000f880: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
+0000f890: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
+0000f8a0: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
+0000f8b0: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
+0000f8c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000f8d0: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
+0000f8e0: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
+0000f8f0: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
+0000f900: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
+0000f910: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
+0000f920: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
+0000f930: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
+0000f940: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
+0000f950: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
+0000f960: 2020 2020 2020 2020 2020 2020 696e 6974              init
+0000f970: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
+0000f980: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
+0000f990: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
+0000f9a0: 6d61 6e64 0a20 2020 2020 2020 2020 2020  mand.           
+0000f9b0: 2064 6562 7567 5f73 7472 6561 6d20 2869   debug_stream (i
+0000f9c0: 6f2e 5465 7874 494f 293a 2074 6865 2073  o.TextIO): the s
+0000f9d0: 7472 6561 6d20 746f 2077 6869 6368 2074  tream to which t
+0000f9e0: 6865 2064 6562 7567 206f 7574 7075 7420  he debug output 
+0000f9f0: 7368 6f75 6c64 2062 650a 2020 2020 2020  should be.      
+0000fa00: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+0000fa10: 6e2e 2054 6869 7320 6973 206e 6f74 2067  n. This is not g
+0000fa20: 7561 7261 6e74 6565 6420 746f 2062 6520  uaranteed to be 
+0000fa30: 7365 656b 6162 6c65 2028 652e 672e 2069  seekable (e.g. i
+0000fa40: 7420 6d61 7920 6265 2073 7464 6f75 7420  t may be stdout 
+0000fa50: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
+0000fa60: 2020 2073 7464 6572 7229 2e0a 2020 2020     stderr)..    
+0000fa70: 2020 2020 2020 2020 7066 7820 2873 7472          pfx (str
+0000fa80: 293a 2074 6865 2063 7572 7265 6e74 2064  ): the current d
+0000fa90: 6562 7567 206f 7574 7075 7420 7072 6566  ebug output pref
+0000faa0: 6978 2073 7472 696e 6720 286f 6e6c 7920  ix string (only 
+0000fab0: 6e65 6564 6564 2069 6620 656d 6974 7469  needed if emitti
+0000fac0: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
+0000fad0: 2020 206d 6f72 6520 7468 616e 206f 6e65     more than one
+0000fae0: 206c 696e 6529 2e0a 0a20 2020 2020 2020   line)...       
+0000faf0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+0000fb00: 2020 2020 2020 5468 6520 7361 6d65 2074        The same t
+0000fb10: 7570 6c65 2061 7320 6052 656c 6174 6976  uple as `Relativ
+0000fb20: 6548 6f72 697a 6f6e 7461 6c4c 696e 652e  eHorizontalLine.
+0000fb30: 7265 6e64 6572 602e 0a20 2020 2020 2020  render`..       
+0000fb40: 2022 2222 0a20 2020 2020 2020 2023 2070   """.        # p
+0000fb50: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
+0000fb60: 6e75 7365 642d 6172 6775 6d65 6e74 0a20  nused-argument. 
+0000fb70: 2020 2020 2020 2072 656e 6465 7265 642c         rendered,
+0000fb80: 2072 6573 6f6c 7665 642c 2069 6e69 7469   resolved, initi
+0000fb90: 616c 5f70 6f69 6e74 203d 2073 656c 662e  al_point = self.
+0000fba0: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
+0000fbb0: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+0000fbc0: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+0000fbd0: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+0000fbe0: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
+0000fbf0: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
+0000fc00: 2e77 7269 7465 2866 227b 7365 6c66 7d20  .write(f"{self} 
+0000fc10: 7265 736f 6c76 6564 2074 6f20 7b72 6573  resolved to {res
+0000fc20: 6f6c 7665 647d 5c6e 2229 0a0a 2020 2020  olved}\n")..    
+0000fc30: 2020 2020 7265 7475 726e 2072 656e 6465      return rende
+0000fc40: 7265 642c 2072 6573 6f6c 7665 642c 2069  red, resolved, i
+0000fc50: 6e69 7469 616c 5f70 6f69 6e74 0a0a 0a63  nitial_point...c
+0000fc60: 6c61 7373 2056 6572 7469 6361 6c4c 696e  lass VerticalLin
+0000fc70: 6528 4e61 6d65 6454 7570 6c65 293a 0a20  e(NamedTuple):. 
+0000fc80: 2020 2022 2222 0a20 2020 2041 2070 6174     """.    A pat
+0000fc90: 6820 6c69 6e65 2065 6c65 6d65 6e74 2074  h line element t
+0000fca0: 6861 7420 7461 6b65 7320 6974 7320 6162  hat takes its ab
+0000fcb0: 7363 6973 7361 2066 726f 6d20 7468 6520  scissa from the 
+0000fcc0: 656e 6420 6f66 2074 6865 2070 7265 7669  end of the previ
+0000fcd0: 6f75 7320 656c 656d 656e 742e 0a0a 2020  ous element...  
+0000fce0: 2020 5365 653a 2060 5061 696e 7465 6450    See: `PaintedP
+0000fcf0: 6174 682e 7665 7274 6963 616c 5f6c 696e  ath.vertical_lin
+0000fd00: 655f 746f 600a 2020 2020 2222 220a 0a20  e_to`.    """.. 
+0000fd10: 2020 2079 3a20 4e75 6d62 6572 0a20 2020     y: Number.   
+0000fd20: 2022 2222 5468 6520 6f72 6469 6e61 7465   """The ordinate
+0000fd30: 206f 6620 7468 6520 7665 7274 6963 616c   of the vertical
+0000fd40: 206c 696e 6527 7320 656e 6420 706f 696e   line's end poin
+0000fd50: 742e 2222 220a 0a20 2020 2040 666f 7263  t."""..    @forc
+0000fd60: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
+0000fd70: 2064 6566 2072 656e 6465 7228 7365 6c66   def render(self
+0000fd80: 2c20 6773 645f 7265 6769 7374 7279 2c20  , gsd_registry, 
+0000fd90: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+0000fda0: 2c20 696e 6974 6961 6c5f 706f 696e 7429  , initial_point)
+0000fdb0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0000fdc0: 2020 2020 2020 5265 6e64 6572 2074 6869        Render thi
+0000fdd0: 7320 7061 7468 2065 6c65 6d65 6e74 2074  s path element t
+0000fde0: 6f20 6974 7320 5044 4620 7265 7072 6573  o its PDF repres
+0000fdf0: 656e 7461 7469 6f6e 2e0a 0a20 2020 2020  entation...     
+0000fe00: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+0000fe10: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
+0000fe20: 7920 2847 7261 7068 6963 7353 7461 7465  y (GraphicsState
+0000fe30: 4469 6374 5265 6769 7374 7279 293a 2074  DictRegistry): t
+0000fe40: 6865 206f 776e 6572 2773 2067 7261 7068  he owner's graph
+0000fe50: 6963 7320 7374 6174 650a 2020 2020 2020  ics state.      
+0000fe60: 2020 2020 2020 2020 2020 6469 6374 696f            dictio
+0000fe70: 6e61 7279 2072 6567 6973 7472 792e 0a20  nary registry.. 
+0000fe80: 2020 2020 2020 2020 2020 2073 7479 6c65             style
+0000fe90: 2028 4772 6170 6869 6373 5374 796c 6529   (GraphicsStyle)
+0000fea0: 3a20 7468 6520 6375 7272 656e 7420 7265  : the current re
+0000feb0: 736f 6c76 6564 2067 7261 7068 6963 7320  solved graphics 
+0000fec0: 7374 796c 650a 2020 2020 2020 2020 2020  style.          
+0000fed0: 2020 6c61 7374 5f69 7465 6d3a 2074 6865    last_item: the
+0000fee0: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+0000fef0: 6c65 6d65 6e74 2e0a 2020 2020 2020 2020  lement..        
+0000ff00: 2020 2020 696e 6974 6961 6c5f 706f 696e      initial_poin
+0000ff10: 743a 206c 6173 7420 706f 7369 7469 6f6e  t: last position
+0000ff20: 2073 6574 2062 7920 6120 224d 2220 6f72   set by a "M" or
+0000ff30: 2022 6d22 2063 6f6d 6d61 6e64 0a0a 2020   "m" command..  
+0000ff40: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+0000ff50: 2020 2020 2020 2020 2020 2061 2074 7570             a tup
+0000ff60: 6c65 206f 6620 6028 7374 722c 206e 6577  le of `(str, new
+0000ff70: 5f6c 6173 745f 6974 656d 2960 2c20 7768  _last_item)`, wh
+0000ff80: 6572 6520 606e 6577 5f6c 6173 745f 6974  ere `new_last_it
+0000ff90: 656d 6020 6973 2074 6865 2072 6573 6f6c  em` is the resol
+0000ffa0: 7665 640a 2020 2020 2020 2020 2020 2020  ved.            
+0000ffb0: 604c 696e 6560 2e0a 2020 2020 2020 2020  `Line`..        
+0000ffc0: 2222 220a 2020 2020 2020 2020 2320 7079  """.        # py
+0000ffd0: 6c69 6e74 3a20 6469 7361 626c 653d 756e  lint: disable=un
+0000ffe0: 7573 6564 2d61 7267 756d 656e 740a 2020  used-argument.  
+0000fff0: 2020 2020 2020 656e 645f 706f 696e 7420        end_point 
+00010000: 3d20 506f 696e 7428 783d 6c61 7374 5f69  = Point(x=last_i
+00010010: 7465 6d2e 656e 645f 706f 696e 742e 782c  tem.end_point.x,
+00010020: 2079 3d73 656c 662e 7929 0a20 2020 2020   y=self.y).     
+00010030: 2020 2072 6574 7572 6e20 5f72 656e 6465     return _rende
+00010040: 725f 6c69 6e65 2865 6e64 5f70 6f69 6e74  r_line(end_point
+00010050: 292c 204c 696e 6528 656e 645f 706f 696e  ), Line(end_poin
+00010060: 7429 2c20 696e 6974 6961 6c5f 706f 696e  t), initial_poin
+00010070: 740a 0a20 2020 2040 666f 7263 655f 6e6f  t..    @force_no
+00010080: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
+00010090: 2072 656e 6465 725f 6465 6275 6728 0a20   render_debug(. 
+000100a0: 2020 2020 2020 2073 656c 662c 2067 7364         self, gsd
+000100b0: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
+000100c0: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
+000100d0: 7469 616c 5f70 6f69 6e74 2c20 6465 6275  tial_point, debu
+000100e0: 675f 7374 7265 616d 2c20 7066 780a 2020  g_stream, pfx.  
+000100f0: 2020 293a 0a20 2020 2020 2020 2022 2222    ):.        """
+00010100: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
+00010110: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
+00010120: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
+00010130: 7265 7365 6e74 6174 696f 6e20 616e 6420  resentation and 
+00010140: 7072 6f64 7563 6520 6465 6275 670a 2020  produce debug.  
+00010150: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
+00010160: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
+00010170: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
+00010180: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
+00010190: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
+000101a0: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
+000101b0: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
+000101c0: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
+000101d0: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
+000101e0: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
+000101f0: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
+00010200: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
+00010210: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
+00010220: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
+00010230: 2020 2020 2020 2020 2020 206c 6173 745f             last_
+00010240: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
+00010250: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
+00010260: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
+00010270: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
+00010280: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
+00010290: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
+000102a0: 6d6d 616e 640a 2020 2020 2020 2020 2020  mmand.          
+000102b0: 2020 6465 6275 675f 7374 7265 616d 2028    debug_stream (
+000102c0: 696f 2e54 6578 7449 4f29 3a20 7468 6520  io.TextIO): the 
+000102d0: 7374 7265 616d 2074 6f20 7768 6963 6820  stream to which 
+000102e0: 7468 6520 6465 6275 6720 6f75 7470 7574  the debug output
+000102f0: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
+00010300: 2020 2020 2020 2020 2020 2077 7269 7474             writt
+00010310: 656e 2e20 5468 6973 2069 7320 6e6f 7420  en. This is not 
+00010320: 6775 6172 616e 7465 6564 2074 6f20 6265  guaranteed to be
+00010330: 2073 6565 6b61 626c 6520 2865 2e67 2e20   seekable (e.g. 
+00010340: 6974 206d 6179 2062 6520 7374 646f 7574  it may be stdout
+00010350: 206f 720a 2020 2020 2020 2020 2020 2020   or.            
+00010360: 2020 2020 7374 6465 7272 292e 0a20 2020      stderr)..   
+00010370: 2020 2020 2020 2020 2070 6678 2028 7374           pfx (st
+00010380: 7229 3a20 7468 6520 6375 7272 656e 7420  r): the current 
+00010390: 6465 6275 6720 6f75 7470 7574 2070 7265  debug output pre
+000103a0: 6669 7820 7374 7269 6e67 2028 6f6e 6c79  fix string (only
+000103b0: 206e 6565 6465 6420 6966 2065 6d69 7474   needed if emitt
+000103c0: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
+000103d0: 2020 2020 6d6f 7265 2074 6861 6e20 6f6e      more than on
+000103e0: 6520 6c69 6e65 292e 0a0a 2020 2020 2020  e line)...      
+000103f0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+00010400: 2020 2020 2020 2054 6865 2073 616d 6520         The same 
+00010410: 7475 706c 6520 6173 2060 5665 7274 6963  tuple as `Vertic
+00010420: 616c 4c69 6e65 2e72 656e 6465 7260 2e0a  alLine.render`..
+00010430: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00010440: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
+00010450: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
+00010460: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
+00010470: 6e64 6572 6564 2c20 7265 736f 6c76 6564  ndered, resolved
+00010480: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
+00010490: 3d20 7365 6c66 2e72 656e 6465 7228 0a20  = self.render(. 
+000104a0: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
+000104b0: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
+000104c0: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
+000104d0: 616c 5f70 6f69 6e74 0a20 2020 2020 2020  al_point.       
+000104e0: 2029 0a20 2020 2020 2020 2064 6562 7567   ).        debug
+000104f0: 5f73 7472 6561 6d2e 7772 6974 6528 6622  _stream.write(f"
+00010500: 7b73 656c 667d 2072 6573 6f6c 7665 6420  {self} resolved 
+00010510: 746f 207b 7265 736f 6c76 6564 7d5c 6e22  to {resolved}\n"
+00010520: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00010530: 6e20 7265 6e64 6572 6564 2c20 7265 736f  n rendered, reso
+00010540: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
+00010550: 696e 740a 0a0a 636c 6173 7320 5265 6c61  int...class Rela
+00010560: 7469 7665 5665 7274 6963 616c 4c69 6e65  tiveVerticalLine
+00010570: 284e 616d 6564 5475 706c 6529 3a0a 2020  (NamedTuple):.  
+00010580: 2020 2222 220a 2020 2020 4120 7061 7468    """.    A path
+00010590: 206c 696e 6520 656c 656d 656e 7420 7468   line element th
+000105a0: 6174 2074 616b 6573 2069 7473 2061 6273  at takes its abs
+000105b0: 6369 7373 6120 6672 6f6d 2074 6865 2065  cissa from the e
+000105c0: 6e64 206f 6620 7468 6520 7072 6576 696f  nd of the previo
+000105d0: 7573 2065 6c65 6d65 6e74 2061 6e64 0a20  us element and. 
+000105e0: 2020 2063 6f6d 7075 7465 7320 6974 7320     computes its 
+000105f0: 6f72 6469 6e61 7465 206f 6666 7365 7420  ordinate offset 
+00010600: 6672 6f6d 2074 6865 2065 6e64 206f 6620  from the end of 
+00010610: 7468 6174 2065 6c65 6d65 6e74 2e0a 0a20  that element... 
+00010620: 2020 2053 6565 3a20 6050 6169 6e74 6564     See: `Painted
+00010630: 5061 7468 2e76 6572 7469 6361 6c5f 6c69  Path.vertical_li
+00010640: 6e65 5f72 656c 6174 6976 6560 0a20 2020  ne_relative`.   
+00010650: 2022 2222 0a0a 2020 2020 793a 204e 756d   """..    y: Num
+00010660: 6265 720a 2020 2020 2222 220a 2020 2020  ber.    """.    
+00010670: 5468 6520 6f72 6469 6e61 7465 206f 6620  The ordinate of 
+00010680: 7468 6520 7665 7274 6963 616c 206c 696e  the vertical lin
+00010690: 6527 7320 656e 6420 706f 696e 7420 7265  e's end point re
+000106a0: 6c61 7469 7665 2074 6f20 7468 6520 6f72  lative to the or
+000106b0: 6469 6e61 7465 206f 6620 7468 650a 2020  dinate of the.  
+000106c0: 2020 7072 6576 696f 7573 2070 6174 6820    previous path 
+000106d0: 656c 656d 656e 742e 0a20 2020 2022 2222  element..    """
+000106e0: 0a0a 2020 2020 4066 6f72 6365 5f6e 6f64  ..    @force_nod
+000106f0: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+00010700: 7265 6e64 6572 2873 656c 662c 2067 7364  render(self, gsd
+00010710: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
+00010720: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
+00010730: 7469 616c 5f70 6f69 6e74 293a 0a20 2020  tial_point):.   
+00010740: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00010750: 2052 656e 6465 7220 7468 6973 2070 6174   Render this pat
+00010760: 6820 656c 656d 656e 7420 746f 2069 7473  h element to its
+00010770: 2050 4446 2072 6570 7265 7365 6e74 6174   PDF representat
+00010780: 696f 6e2e 0a0a 2020 2020 2020 2020 4172  ion...        Ar
+00010790: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+000107a0: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
+000107b0: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
+000107c0: 6567 6973 7472 7929 3a20 7468 6520 6f77  egistry): the ow
+000107d0: 6e65 7227 7320 6772 6170 6869 6373 2073  ner's graphics s
+000107e0: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
+000107f0: 2020 2020 2064 6963 7469 6f6e 6172 7920       dictionary 
+00010800: 7265 6769 7374 7279 2e0a 2020 2020 2020  registry..      
+00010810: 2020 2020 2020 7374 796c 6520 2847 7261        style (Gra
+00010820: 7068 6963 7353 7479 6c65 293a 2074 6865  phicsStyle): the
+00010830: 2063 7572 7265 6e74 2072 6573 6f6c 7665   current resolve
+00010840: 6420 6772 6170 6869 6373 2073 7479 6c65  d graphics style
+00010850: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
+00010860: 745f 6974 656d 3a20 7468 6520 7072 6576  t_item: the prev
+00010870: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
+00010880: 742e 0a20 2020 2020 2020 2020 2020 2069  t..            i
+00010890: 6e69 7469 616c 5f70 6f69 6e74 3a20 6c61  nitial_point: la
+000108a0: 7374 2070 6f73 6974 696f 6e20 7365 7420  st position set 
+000108b0: 6279 2061 2022 4d22 206f 7220 226d 2220  by a "M" or "m" 
+000108c0: 636f 6d6d 616e 640a 0a20 2020 2020 2020  command..       
+000108d0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+000108e0: 2020 2020 2020 6120 7475 706c 6520 6f66        a tuple of
+000108f0: 2060 2873 7472 2c20 6e65 775f 6c61 7374   `(str, new_last
+00010900: 5f69 7465 6d29 602c 2077 6865 7265 2060  _item)`, where `
+00010910: 6e65 775f 6c61 7374 5f69 7465 6d60 2069  new_last_item` i
+00010920: 7320 7468 6520 7265 736f 6c76 6564 0a20  s the resolved. 
+00010930: 2020 2020 2020 2020 2020 2060 4c69 6e65             `Line
+00010940: 602e 0a20 2020 2020 2020 2022 2222 0a20  `..        """. 
+00010950: 2020 2020 2020 2023 2070 796c 696e 743a         # pylint:
+00010960: 2064 6973 6162 6c65 3d75 6e75 7365 642d   disable=unused-
+00010970: 6172 6775 6d65 6e74 0a20 2020 2020 2020  argument.       
+00010980: 2065 6e64 5f70 6f69 6e74 203d 2050 6f69   end_point = Poi
+00010990: 6e74 2878 3d6c 6173 745f 6974 656d 2e65  nt(x=last_item.e
+000109a0: 6e64 5f70 6f69 6e74 2e78 2c20 793d 6c61  nd_point.x, y=la
+000109b0: 7374 5f69 7465 6d2e 656e 645f 706f 696e  st_item.end_poin
+000109c0: 742e 7920 2b20 7365 6c66 2e79 290a 2020  t.y + self.y).  
+000109d0: 2020 2020 2020 7265 7475 726e 205f 7265        return _re
+000109e0: 6e64 6572 5f6c 696e 6528 656e 645f 706f  nder_line(end_po
+000109f0: 696e 7429 2c20 4c69 6e65 2865 6e64 5f70  int), Line(end_p
+00010a00: 6f69 6e74 292c 2069 6e69 7469 616c 5f70  oint), initial_p
+00010a10: 6f69 6e74 0a0a 2020 2020 4066 6f72 6365  oint..    @force
+00010a20: 5f6e 6f64 6f63 756d 656e 740a 2020 2020  _nodocument.    
+00010a30: 6465 6620 7265 6e64 6572 5f64 6562 7567  def render_debug
+00010a40: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00010a50: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
+00010a60: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
+00010a70: 696e 6974 6961 6c5f 706f 696e 742c 2064  initial_point, d
+00010a80: 6562 7567 5f73 7472 6561 6d2c 2070 6678  ebug_stream, pfx
+00010a90: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00010aa0: 2222 220a 2020 2020 2020 2020 5265 6e64  """.        Rend
+00010ab0: 6572 2074 6869 7320 7061 7468 2065 6c65  er this path ele
+00010ac0: 6d65 6e74 2074 6f20 6974 7320 5044 4620  ment to its PDF 
+00010ad0: 7265 7072 6573 656e 7461 7469 6f6e 2061  representation a
+00010ae0: 6e64 2070 726f 6475 6365 2064 6562 7567  nd produce debug
+00010af0: 0a20 2020 2020 2020 2069 6e66 6f72 6d61  .        informa
+00010b00: 7469 6f6e 2e0a 0a20 2020 2020 2020 2041  tion...        A
+00010b10: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00010b20: 2067 7364 5f72 6567 6973 7472 7920 2847   gsd_registry (G
+00010b30: 7261 7068 6963 7353 7461 7465 4469 6374  raphicsStateDict
+00010b40: 5265 6769 7374 7279 293a 2074 6865 206f  Registry): the o
+00010b50: 776e 6572 2773 2067 7261 7068 6963 7320  wner's graphics 
+00010b60: 7374 6174 650a 2020 2020 2020 2020 2020  state.          
+00010b70: 2020 2020 2020 6469 6374 696f 6e61 7279        dictionary
+00010b80: 2072 6567 6973 7472 792e 0a20 2020 2020   registry..     
+00010b90: 2020 2020 2020 2073 7479 6c65 2028 4772         style (Gr
+00010ba0: 6170 6869 6373 5374 796c 6529 3a20 7468  aphicsStyle): th
+00010bb0: 6520 6375 7272 656e 7420 7265 736f 6c76  e current resolv
+00010bc0: 6564 2067 7261 7068 6963 7320 7374 796c  ed graphics styl
+00010bd0: 650a 2020 2020 2020 2020 2020 2020 6c61  e.            la
+00010be0: 7374 5f69 7465 6d3a 2074 6865 2070 7265  st_item: the pre
+00010bf0: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
+00010c00: 6e74 2e0a 2020 2020 2020 2020 2020 2020  nt..            
+00010c10: 696e 6974 6961 6c5f 706f 696e 743a 206c  initial_point: l
+00010c20: 6173 7420 706f 7369 7469 6f6e 2073 6574  ast position set
+00010c30: 2062 7920 6120 224d 2220 6f72 2022 6d22   by a "M" or "m"
+00010c40: 2063 6f6d 6d61 6e64 0a20 2020 2020 2020   command.       
+00010c50: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
+00010c60: 6d20 2869 6f2e 5465 7874 494f 293a 2074  m (io.TextIO): t
+00010c70: 6865 2073 7472 6561 6d20 746f 2077 6869  he stream to whi
+00010c80: 6368 2074 6865 2064 6562 7567 206f 7574  ch the debug out
+00010c90: 7075 7420 7368 6f75 6c64 2062 650a 2020  put should be.  
+00010ca0: 2020 2020 2020 2020 2020 2020 2020 7772                wr
+00010cb0: 6974 7465 6e2e 2054 6869 7320 6973 206e  itten. This is n
+00010cc0: 6f74 2067 7561 7261 6e74 6565 6420 746f  ot guaranteed to
+00010cd0: 2062 6520 7365 656b 6162 6c65 2028 652e   be seekable (e.
+00010ce0: 672e 2069 7420 6d61 7920 6265 2073 7464  g. it may be std
+00010cf0: 6f75 7420 6f72 0a20 2020 2020 2020 2020  out or.         
+00010d00: 2020 2020 2020 2073 7464 6572 7229 2e0a         stderr)..
+00010d10: 2020 2020 2020 2020 2020 2020 7066 7820              pfx 
+00010d20: 2873 7472 293a 2074 6865 2063 7572 7265  (str): the curre
+00010d30: 6e74 2064 6562 7567 206f 7574 7075 7420  nt debug output 
+00010d40: 7072 6566 6978 2073 7472 696e 6720 286f  prefix string (o
+00010d50: 6e6c 7920 6e65 6564 6564 2069 6620 656d  nly needed if em
+00010d60: 6974 7469 6e67 0a20 2020 2020 2020 2020  itting.         
+00010d70: 2020 2020 2020 206d 6f72 6520 7468 616e         more than
+00010d80: 206f 6e65 206c 696e 6529 2e0a 0a20 2020   one line)...   
+00010d90: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+00010da0: 2020 2020 2020 2020 2020 5468 6520 7361            The sa
+00010db0: 6d65 2074 7570 6c65 2061 7320 6052 656c  me tuple as `Rel
+00010dc0: 6174 6976 6556 6572 7469 6361 6c4c 696e  ativeVerticalLin
+00010dd0: 652e 7265 6e64 6572 602e 0a20 2020 2020  e.render`..     
+00010de0: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
+00010df0: 2070 796c 696e 743a 2064 6973 6162 6c65   pylint: disable
+00010e00: 3d75 6e75 7365 642d 6172 6775 6d65 6e74  =unused-argument
+00010e10: 0a20 2020 2020 2020 2072 656e 6465 7265  .        rendere
+00010e20: 642c 2072 6573 6f6c 7665 642c 2069 6e69  d, resolved, ini
+00010e30: 7469 616c 5f70 6f69 6e74 203d 2073 656c  tial_point = sel
+00010e40: 662e 7265 6e64 6572 280a 2020 2020 2020  f.render(.      
+00010e50: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+00010e60: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+00010e70: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+00010e80: 696e 740a 2020 2020 2020 2020 290a 2020  int.        ).  
+00010e90: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00010ea0: 616d 2e77 7269 7465 2866 227b 7365 6c66  am.write(f"{self
+00010eb0: 7d20 7265 736f 6c76 6564 2074 6f20 7b72  } resolved to {r
+00010ec0: 6573 6f6c 7665 647d 5c6e 2229 0a0a 2020  esolved}\n")..  
+00010ed0: 2020 2020 2020 7265 7475 726e 2072 656e        return ren
+00010ee0: 6465 7265 642c 2072 6573 6f6c 7665 642c  dered, resolved,
+00010ef0: 2069 6e69 7469 616c 5f70 6f69 6e74 0a0a   initial_point..
+00010f00: 0a63 6c61 7373 2042 657a 6965 7243 7572  .class BezierCur
+00010f10: 7665 284e 616d 6564 5475 706c 6529 3a0a  ve(NamedTuple):.
+00010f20: 2020 2020 2222 220a 2020 2020 4120 6375      """.    A cu
+00010f30: 6269 6320 42c3 a97a 6965 7220 6375 7276  bic B..zier curv
+00010f40: 6520 7061 7468 2065 6c65 6d65 6e74 2e0a  e path element..
+00010f50: 0a20 2020 2054 6869 7320 6472 6177 7320  .    This draws 
+00010f60: 6120 42c3 a97a 6965 7220 6375 7276 6520  a B..zier curve 
+00010f70: 7061 7261 6d65 7465 7269 7a65 6420 6279  parameterized by
+00010f80: 2074 6865 2065 6e64 2070 6f69 6e74 206f   the end point o
+00010f90: 6620 7468 6520 7072 6576 696f 7573 2070  f the previous p
+00010fa0: 6174 680a 2020 2020 656c 656d 656e 742c  ath.    element,
+00010fb0: 2074 776f 206f 6666 2d63 7572 7665 2063   two off-curve c
+00010fc0: 6f6e 7472 6f6c 2070 6f69 6e74 732c 2061  ontrol points, a
+00010fd0: 6e64 2061 6e20 656e 6420 706f 696e 742e  nd an end point.
+00010fe0: 0a0a 2020 2020 5365 653a 2060 5061 696e  ..    See: `Pain
+00010ff0: 7465 6450 6174 682e 6375 7276 655f 746f  tedPath.curve_to
+00011000: 600a 2020 2020 2222 220a 0a20 2020 2063  `.    """..    c
+00011010: 313a 2050 6f69 6e74 0a20 2020 2022 2222  1: Point.    """
+00011020: 5468 6520 6375 7276 6527 7320 6669 7273  The curve's firs
+00011030: 7420 636f 6e74 726f 6c20 706f 696e 742e  t control point.
+00011040: 2222 220a 2020 2020 6332 3a20 506f 696e  """.    c2: Poin
+00011050: 740a 2020 2020 2222 2254 6865 2063 7572  t.    """The cur
+00011060: 7665 2773 2073 6563 6f6e 6420 636f 6e74  ve's second cont
+00011070: 726f 6c20 706f 696e 742e 2222 220a 2020  rol point.""".  
+00011080: 2020 656e 643a 2050 6f69 6e74 0a20 2020    end: Point.   
+00011090: 2022 2222 5468 6520 6375 7276 6527 7320   """The curve's 
+000110a0: 656e 6420 706f 696e 742e 2222 220a 0a20  end point.""".. 
+000110b0: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+000110c0: 2064 6566 2065 6e64 5f70 6f69 6e74 2873   def end_point(s
+000110d0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+000110e0: 2254 6865 2065 6e64 2070 6f69 6e74 206f  "The end point o
+000110f0: 6620 7468 6973 2070 6174 6820 656c 656d  f this path elem
+00011100: 656e 742e 2222 220a 2020 2020 2020 2020  ent.""".        
+00011110: 7265 7475 726e 2073 656c 662e 656e 640a  return self.end.
+00011120: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
+00011130: 6375 6d65 6e74 0a20 2020 2064 6566 2072  cument.    def r
+00011140: 656e 6465 7228 7365 6c66 2c20 6773 645f  ender(self, gsd_
+00011150: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+00011160: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+00011170: 6961 6c5f 706f 696e 7429 3a0a 2020 2020  ial_point):.    
+00011180: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00011190: 5265 6e64 6572 2074 6869 7320 7061 7468  Render this path
+000111a0: 2065 6c65 6d65 6e74 2074 6f20 6974 7320   element to its 
+000111b0: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
+000111c0: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+000111d0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
+000111e0: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
+000111f0: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
+00011200: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
+00011210: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
+00011220: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00011230: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
+00011240: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+00011250: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
+00011260: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+00011270: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
+00011280: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
+00011290: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+000112a0: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
+000112b0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+000112c0: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+000112d0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
+000112e0: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
+000112f0: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
+00011300: 6f6d 6d61 6e64 0a0a 2020 2020 2020 2020  ommand..        
+00011310: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
+00011320: 2020 2020 2061 2074 7570 6c65 206f 6620       a tuple of 
+00011330: 6028 7374 722c 206e 6577 5f6c 6173 745f  `(str, new_last_
+00011340: 6974 656d 2960 2c20 7768 6572 6520 606e  item)`, where `n
+00011350: 6577 5f6c 6173 745f 6974 656d 6020 6973  ew_last_item` is
+00011360: 2060 7365 6c66 600a 2020 2020 2020 2020   `self`.        
+00011370: 2222 220a 2020 2020 2020 2020 2320 7079  """.        # py
+00011380: 6c69 6e74 3a20 6469 7361 626c 653d 756e  lint: disable=un
+00011390: 7573 6564 2d61 7267 756d 656e 740a 2020  used-argument.  
+000113a0: 2020 2020 2020 7265 7475 726e 205f 7265        return _re
+000113b0: 6e64 6572 5f63 7572 7665 2873 656c 662e  nder_curve(self.
+000113c0: 6331 2c20 7365 6c66 2e63 322c 2073 656c  c1, self.c2, sel
+000113d0: 662e 656e 6429 2c20 7365 6c66 2c20 696e  f.end), self, in
+000113e0: 6974 6961 6c5f 706f 696e 740a 0a20 2020  itial_point..   
+000113f0: 2040 666f 7263 655f 6e6f 646f 6375 6d65   @force_nodocume
+00011400: 6e74 0a20 2020 2064 6566 2072 656e 6465  nt.    def rende
+00011410: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
+00011420: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
+00011430: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00011440: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00011450: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
+00011460: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
+00011470: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00011480: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
+00011490: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
+000114a0: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
+000114b0: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
+000114c0: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
+000114d0: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
+000114e0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+000114f0: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+00011500: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
+00011510: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
+00011520: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
+00011530: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
+00011540: 2020 2020 2020 2020 2020 2020 2064 6963               dic
+00011550: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
+00011560: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+00011570: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
+00011580: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
+00011590: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
+000115a0: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
+000115b0: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
+000115c0: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+000115d0: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
+000115e0: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
+000115f0: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
+00011600: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
+00011610: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
+00011620: 2020 2020 2020 2020 2020 2020 6465 6275              debu
+00011630: 675f 7374 7265 616d 2028 696f 2e54 6578  g_stream (io.Tex
+00011640: 7449 4f29 3a20 7468 6520 7374 7265 616d  tIO): the stream
+00011650: 2074 6f20 7768 6963 6820 7468 6520 6465   to which the de
+00011660: 6275 6720 6f75 7470 7574 2073 686f 756c  bug output shoul
+00011670: 6420 6265 0a20 2020 2020 2020 2020 2020  d be.           
+00011680: 2020 2020 2077 7269 7474 656e 2e20 5468       written. Th
+00011690: 6973 2069 7320 6e6f 7420 6775 6172 616e  is is not guaran
+000116a0: 7465 6564 2074 6f20 6265 2073 6565 6b61  teed to be seeka
+000116b0: 626c 6520 2865 2e67 2e20 6974 206d 6179  ble (e.g. it may
+000116c0: 2062 6520 7374 646f 7574 206f 720a 2020   be stdout or.  
+000116d0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+000116e0: 6465 7272 292e 0a20 2020 2020 2020 2020  derr)..         
+000116f0: 2020 2070 6678 2028 7374 7229 3a20 7468     pfx (str): th
+00011700: 6520 6375 7272 656e 7420 6465 6275 6720  e current debug 
+00011710: 6f75 7470 7574 2070 7265 6669 7820 7374  output prefix st
+00011720: 7269 6e67 2028 6f6e 6c79 206e 6565 6465  ring (only neede
+00011730: 6420 6966 2065 6d69 7474 696e 670a 2020  d if emitting.  
+00011740: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+00011750: 7265 2074 6861 6e20 6f6e 6520 6c69 6e65  re than one line
+00011760: 292e 0a0a 2020 2020 2020 2020 5265 7475  )...        Retu
+00011770: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00011780: 2054 6865 2073 616d 6520 7475 706c 6520   The same tuple 
+00011790: 6173 2060 4265 7a69 6572 4375 7276 652e  as `BezierCurve.
+000117a0: 7265 6e64 6572 602e 0a20 2020 2020 2020  render`..       
+000117b0: 2022 2222 0a20 2020 2020 2020 2023 2070   """.        # p
+000117c0: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
+000117d0: 6e75 7365 642d 6172 6775 6d65 6e74 0a20  nused-argument. 
+000117e0: 2020 2020 2020 2072 656e 6465 7265 642c         rendered,
+000117f0: 2072 6573 6f6c 7665 642c 2069 6e69 7469   resolved, initi
+00011800: 616c 5f70 6f69 6e74 203d 2073 656c 662e  al_point = self.
+00011810: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
+00011820: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+00011830: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+00011840: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+00011850: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
+00011860: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
+00011870: 2e77 7269 7465 2873 7472 2873 656c 6629  .write(str(self)
+00011880: 202b 2022 5c6e 2229 0a0a 2020 2020 2020   + "\n")..      
+00011890: 2020 7265 7475 726e 2072 656e 6465 7265    return rendere
+000118a0: 642c 2072 6573 6f6c 7665 642c 2069 6e69  d, resolved, ini
+000118b0: 7469 616c 5f70 6f69 6e74 0a0a 0a63 6c61  tial_point...cla
+000118c0: 7373 2052 656c 6174 6976 6542 657a 6965  ss RelativeBezie
+000118d0: 7243 7572 7665 284e 616d 6564 5475 706c  rCurve(NamedTupl
+000118e0: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
+000118f0: 4120 6375 6269 6320 42c3 a97a 6965 7220  A cubic B..zier 
+00011900: 6375 7276 6520 7061 7468 2065 6c65 6d65  curve path eleme
+00011910: 6e74 2077 686f 7365 2070 6f69 6e74 7320  nt whose points 
+00011920: 6172 6520 7370 6563 6966 6965 6420 7265  are specified re
+00011930: 6c61 7469 7665 2074 6f20 7468 6520 656e  lative to the en
+00011940: 640a 2020 2020 706f 696e 7420 6f66 2074  d.    point of t
+00011950: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+00011960: 2065 6c65 6d65 6e74 2e0a 0a20 2020 2053   element...    S
+00011970: 6565 3a20 6050 6169 6e74 6564 5061 7468  ee: `PaintedPath
+00011980: 2e63 7572 7665 5f72 656c 6174 6976 6560  .curve_relative`
+00011990: 0a20 2020 2022 2222 0a0a 2020 2020 6331  .    """..    c1
+000119a0: 3a20 506f 696e 740a 2020 2020 2222 220a  : Point.    """.
+000119b0: 2020 2020 5468 6520 6375 7276 6527 7320      The curve's 
+000119c0: 6669 7273 7420 636f 6e74 726f 6c20 706f  first control po
+000119d0: 696e 7420 7265 6c61 7469 7665 2074 6f20  int relative to 
+000119e0: 7468 6520 656e 6420 6f66 2074 6865 2070  the end of the p
+000119f0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
+00011a00: 6d65 6e74 2e0a 2020 2020 2222 220a 2020  ment..    """.  
+00011a10: 2020 6332 3a20 506f 696e 740a 2020 2020    c2: Point.    
+00011a20: 2222 220a 2020 2020 5468 6520 6375 7276  """.    The curv
+00011a30: 6527 7320 7365 636f 6e64 2063 6f6e 7472  e's second contr
+00011a40: 6f6c 2070 6f69 6e74 2072 656c 6174 6976  ol point relativ
+00011a50: 6520 746f 2074 6865 2065 6e64 206f 6620  e to the end of 
+00011a60: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+00011a70: 6820 656c 656d 656e 742e 0a20 2020 2022  h element..    "
+00011a80: 2222 0a20 2020 2065 6e64 3a20 506f 696e  "".    end: Poin
+00011a90: 740a 2020 2020 2222 2254 6865 2063 7572  t.    """The cur
+00011aa0: 7665 2773 2065 6e64 2070 6f69 6e74 2072  ve's end point r
+00011ab0: 656c 6174 6976 6520 746f 2074 6865 2065  elative to the e
+00011ac0: 6e64 206f 6620 7468 6520 7072 6576 696f  nd of the previo
+00011ad0: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
+00011ae0: 2222 220a 0a20 2020 2040 666f 7263 655f  """..    @force_
+00011af0: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+00011b00: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
+00011b10: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
+00011b20: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
+00011b30: 696e 6974 6961 6c5f 706f 696e 7429 3a0a  initial_point):.
+00011b40: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00011b50: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
+00011b60: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
+00011b70: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
+00011b80: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
+00011b90: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+00011ba0: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
+00011bb0: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
+00011bc0: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
+00011bd0: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
+00011be0: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
+00011bf0: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
+00011c00: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
+00011c10: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
+00011c20: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
+00011c30: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
+00011c40: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
+00011c50: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
+00011c60: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
+00011c70: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
+00011c80: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
+00011c90: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
+00011ca0: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
+00011cb0: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
+00011cc0: 6d22 2063 6f6d 6d61 6e64 0a0a 2020 2020  m" command..    
+00011cd0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+00011ce0: 2020 2020 2020 2020 2061 2074 7570 6c65           a tuple
+00011cf0: 206f 6620 6028 7374 722c 206e 6577 5f6c   of `(str, new_l
+00011d00: 6173 745f 6974 656d 2960 2c20 7768 6572  ast_item)`, wher
+00011d10: 6520 606e 6577 5f6c 6173 745f 6974 656d  e `new_last_item
+00011d20: 6020 6973 2074 6865 2072 6573 6f6c 7665  ` is the resolve
+00011d30: 640a 2020 2020 2020 2020 2020 2020 6042  d.            `B
+00011d40: 657a 6965 7243 7572 7665 602e 0a20 2020  ezierCurve`..   
+00011d50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00011d60: 2023 2070 796c 696e 743a 2064 6973 6162   # pylint: disab
+00011d70: 6c65 3d75 6e75 7365 642d 6172 6775 6d65  le=unused-argume
+00011d80: 6e74 0a20 2020 2020 2020 206c 6173 745f  nt.        last_
+00011d90: 706f 696e 7420 3d20 6c61 7374 5f69 7465  point = last_ite
+00011da0: 6d2e 656e 645f 706f 696e 740a 0a20 2020  m.end_point..   
+00011db0: 2020 2020 2063 3120 3d20 6c61 7374 5f70       c1 = last_p
+00011dc0: 6f69 6e74 202b 2073 656c 662e 6331 0a20  oint + self.c1. 
+00011dd0: 2020 2020 2020 2063 3220 3d20 6c61 7374         c2 = last
+00011de0: 5f70 6f69 6e74 202b 2073 656c 662e 6332  _point + self.c2
+00011df0: 0a20 2020 2020 2020 2065 6e64 203d 206c  .        end = l
+00011e00: 6173 745f 706f 696e 7420 2b20 7365 6c66  ast_point + self
+00011e10: 2e65 6e64 0a0a 2020 2020 2020 2020 7265  .end..        re
+00011e20: 7475 726e 2028 0a20 2020 2020 2020 2020  turn (.         
+00011e30: 2020 205f 7265 6e64 6572 5f63 7572 7665     _render_curve
+00011e40: 2863 312c 2063 322c 2065 6e64 292c 0a20  (c1, c2, end),. 
+00011e50: 2020 2020 2020 2020 2020 2042 657a 6965             Bezie
+00011e60: 7243 7572 7665 2863 313d 6331 2c20 6332  rCurve(c1=c1, c2
+00011e70: 3d63 322c 2065 6e64 3d65 6e64 292c 0a20  =c2, end=end),. 
+00011e80: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+00011e90: 616c 5f70 6f69 6e74 2c0a 2020 2020 2020  al_point,.      
+00011ea0: 2020 290a 0a20 2020 2040 666f 7263 655f    )..    @force_
+00011eb0: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+00011ec0: 6566 2072 656e 6465 725f 6465 6275 6728  ef render_debug(
+00011ed0: 0a20 2020 2020 2020 2073 656c 662c 2067  .        self, g
+00011ee0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
+00011ef0: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
+00011f00: 6e69 7469 616c 5f70 6f69 6e74 2c20 6465  nitial_point, de
+00011f10: 6275 675f 7374 7265 616d 2c20 7066 780a  bug_stream, pfx.
+00011f20: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
+00011f30: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
+00011f40: 7220 7468 6973 2070 6174 6820 656c 656d  r this path elem
+00011f50: 656e 7420 746f 2069 7473 2050 4446 2072  ent to its PDF r
+00011f60: 6570 7265 7365 6e74 6174 696f 6e20 616e  epresentation an
+00011f70: 6420 7072 6f64 7563 6520 6465 6275 670a  d produce debug.
+00011f80: 2020 2020 2020 2020 696e 666f 726d 6174          informat
+00011f90: 696f 6e2e 0a0a 2020 2020 2020 2020 4172  ion...        Ar
+00011fa0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00011fb0: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
+00011fc0: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
+00011fd0: 6567 6973 7472 7929 3a20 7468 6520 6f77  egistry): the ow
+00011fe0: 6e65 7227 7320 6772 6170 6869 6373 2073  ner's graphics s
+00011ff0: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
+00012000: 2020 2020 2064 6963 7469 6f6e 6172 7920       dictionary 
+00012010: 7265 6769 7374 7279 2e0a 2020 2020 2020  registry..      
+00012020: 2020 2020 2020 7374 796c 6520 2847 7261        style (Gra
+00012030: 7068 6963 7353 7479 6c65 293a 2074 6865  phicsStyle): the
+00012040: 2063 7572 7265 6e74 2072 6573 6f6c 7665   current resolve
+00012050: 6420 6772 6170 6869 6373 2073 7479 6c65  d graphics style
+00012060: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
+00012070: 745f 6974 656d 3a20 7468 6520 7072 6576  t_item: the prev
+00012080: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
+00012090: 742e 0a20 2020 2020 2020 2020 2020 2069  t..            i
+000120a0: 6e69 7469 616c 5f70 6f69 6e74 3a20 6c61  nitial_point: la
+000120b0: 7374 2070 6f73 6974 696f 6e20 7365 7420  st position set 
+000120c0: 6279 2061 2022 4d22 206f 7220 226d 2220  by a "M" or "m" 
+000120d0: 636f 6d6d 616e 640a 2020 2020 2020 2020  command.        
+000120e0: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
+000120f0: 2028 696f 2e54 6578 7449 4f29 3a20 7468   (io.TextIO): th
+00012100: 6520 7374 7265 616d 2074 6f20 7768 6963  e stream to whic
+00012110: 6820 7468 6520 6465 6275 6720 6f75 7470  h the debug outp
+00012120: 7574 2073 686f 756c 6420 6265 0a20 2020  ut should be.   
+00012130: 2020 2020 2020 2020 2020 2020 2077 7269               wri
+00012140: 7474 656e 2e20 5468 6973 2069 7320 6e6f  tten. This is no
+00012150: 7420 6775 6172 616e 7465 6564 2074 6f20  t guaranteed to 
+00012160: 6265 2073 6565 6b61 626c 6520 2865 2e67  be seekable (e.g
+00012170: 2e20 6974 206d 6179 2062 6520 7374 646f  . it may be stdo
+00012180: 7574 206f 720a 2020 2020 2020 2020 2020  ut or.          
+00012190: 2020 2020 2020 7374 6465 7272 292e 0a20        stderr).. 
+000121a0: 2020 2020 2020 2020 2020 2070 6678 2028             pfx (
+000121b0: 7374 7229 3a20 7468 6520 6375 7272 656e  str): the curren
+000121c0: 7420 6465 6275 6720 6f75 7470 7574 2070  t debug output p
+000121d0: 7265 6669 7820 7374 7269 6e67 2028 6f6e  refix string (on
+000121e0: 6c79 206e 6565 6465 6420 6966 2065 6d69  ly needed if emi
+000121f0: 7474 696e 670a 2020 2020 2020 2020 2020  tting.          
+00012200: 2020 2020 2020 6d6f 7265 2074 6861 6e20        more than 
+00012210: 6f6e 6520 6c69 6e65 292e 0a0a 2020 2020  one line)...    
+00012220: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+00012230: 2020 2020 2020 2020 2054 6865 2073 616d           The sam
+00012240: 6520 7475 706c 6520 6173 2060 5265 6c61  e tuple as `Rela
+00012250: 7469 7665 4265 7a69 6572 4375 7276 652e  tiveBezierCurve.
+00012260: 7265 6e64 6572 602e 0a20 2020 2020 2020  render`..       
+00012270: 2022 2222 0a20 2020 2020 2020 2023 2070   """.        # p
+00012280: 796c 696e 743a 2064 6973 6162 6c65 3d75  ylint: disable=u
+00012290: 6e75 7365 642d 6172 6775 6d65 6e74 0a20  nused-argument. 
+000122a0: 2020 2020 2020 2072 656e 6465 7265 642c         rendered,
+000122b0: 2072 6573 6f6c 7665 642c 2069 6e69 7469   resolved, initi
+000122c0: 616c 5f70 6f69 6e74 203d 2073 656c 662e  al_point = self.
+000122d0: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
+000122e0: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+000122f0: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+00012300: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+00012310: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
+00012320: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
+00012330: 2e77 7269 7465 2866 227b 7365 6c66 7d20  .write(f"{self} 
+00012340: 7265 736f 6c76 6564 2074 6f20 7b72 6573  resolved to {res
+00012350: 6f6c 7665 647d 5c6e 2229 0a0a 2020 2020  olved}\n")..    
+00012360: 2020 2020 7265 7475 726e 2072 656e 6465      return rende
+00012370: 7265 642c 2072 6573 6f6c 7665 642c 2069  red, resolved, i
+00012380: 6e69 7469 616c 5f70 6f69 6e74 0a0a 0a63  nitial_point...c
+00012390: 6c61 7373 2051 7561 6472 6174 6963 4265  lass QuadraticBe
+000123a0: 7a69 6572 4375 7276 6528 4e61 6d65 6454  zierCurve(NamedT
+000123b0: 7570 6c65 293a 0a20 2020 2022 2222 0a20  uple):.    """. 
+000123c0: 2020 2041 2071 7561 6472 6174 6963 2042     A quadratic B
+000123d0: c3a9 7a69 6572 2063 7572 7665 2070 6174  ..zier curve pat
+000123e0: 6820 656c 656d 656e 742e 0a0a 2020 2020  h element...    
+000123f0: 5468 6973 2064 7261 7773 2061 2042 c3a9  This draws a B..
+00012400: 7a69 6572 2063 7572 7665 2070 6172 616d  zier curve param
+00012410: 6574 6572 697a 6564 2062 7920 7468 6520  eterized by the 
+00012420: 656e 6420 706f 696e 7420 6f66 2074 6865  end point of the
+00012430: 2070 7265 7669 6f75 7320 7061 7468 0a20   previous path. 
+00012440: 2020 2065 6c65 6d65 6e74 2c20 6f6e 6520     element, one 
+00012450: 6f66 662d 6375 7276 6520 636f 6e74 726f  off-curve contro
+00012460: 6c20 706f 696e 742c 2061 6e64 2061 6e20  l point, and an 
+00012470: 656e 6420 706f 696e 742e 0a0a 2020 2020  end point...    
+00012480: 5365 653a 2060 5061 696e 7465 6450 6174  See: `PaintedPat
+00012490: 682e 7175 6164 7261 7469 635f 6375 7276  h.quadratic_curv
+000124a0: 655f 746f 600a 2020 2020 2222 220a 0a20  e_to`.    """.. 
+000124b0: 2020 2063 7472 6c3a 2050 6f69 6e74 0a20     ctrl: Point. 
+000124c0: 2020 2022 2222 5468 6520 6375 7276 6527     """The curve'
+000124d0: 7320 636f 6e74 726f 6c20 706f 696e 742e  s control point.
+000124e0: 2222 220a 2020 2020 656e 643a 2050 6f69  """.    end: Poi
+000124f0: 6e74 0a20 2020 2022 2222 5468 6520 6375  nt.    """The cu
+00012500: 7276 6527 7320 656e 6420 706f 696e 742e  rve's end point.
+00012510: 2222 220a 0a20 2020 2040 7072 6f70 6572  """..    @proper
+00012520: 7479 0a20 2020 2064 6566 2065 6e64 5f70  ty.    def end_p
+00012530: 6f69 6e74 2873 656c 6629 3a0a 2020 2020  oint(self):.    
+00012540: 2020 2020 2222 2254 6865 2065 6e64 2070      """The end p
+00012550: 6f69 6e74 206f 6620 7468 6973 2070 6174  oint of this pat
+00012560: 6820 656c 656d 656e 742e 2222 220a 2020  h element.""".  
+00012570: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012580: 662e 656e 640a 0a20 2020 2064 6566 2074  f.end..    def t
+00012590: 6f5f 6375 6269 635f 6375 7276 6528 7365  o_cubic_curve(se
+000125a0: 6c66 2c20 7374 6172 745f 706f 696e 7429  lf, start_point)
+000125b0: 3a0a 2020 2020 2020 2020 6374 726c 203d  :.        ctrl =
+000125c0: 2073 656c 662e 6374 726c 0a20 2020 2020   self.ctrl.     
+000125d0: 2020 2065 6e64 203d 2073 656c 662e 656e     end = self.en
+000125e0: 640a 0a20 2020 2020 2020 2063 7472 6c31  d..        ctrl1
+000125f0: 203d 2050 6f69 6e74 280a 2020 2020 2020   = Point(.      
+00012600: 2020 2020 2020 783d 7374 6172 745f 706f        x=start_po
+00012610: 696e 742e 7820 2b20 3220 2a20 2863 7472  int.x + 2 * (ctr
+00012620: 6c2e 7820 2d20 7374 6172 745f 706f 696e  l.x - start_poin
+00012630: 742e 7829 202f 2033 2c0a 2020 2020 2020  t.x) / 3,.      
+00012640: 2020 2020 2020 793d 7374 6172 745f 706f        y=start_po
+00012650: 696e 742e 7920 2b20 3220 2a20 2863 7472  int.y + 2 * (ctr
+00012660: 6c2e 7920 2d20 7374 6172 745f 706f 696e  l.y - start_poin
+00012670: 742e 7929 202f 2033 2c0a 2020 2020 2020  t.y) / 3,.      
+00012680: 2020 290a 2020 2020 2020 2020 6374 726c    ).        ctrl
+00012690: 3220 3d20 506f 696e 7428 0a20 2020 2020  2 = Point(.     
+000126a0: 2020 2020 2020 2078 3d65 6e64 2e78 202b         x=end.x +
+000126b0: 2032 202a 2028 6374 726c 2e78 202d 2065   2 * (ctrl.x - e
+000126c0: 6e64 2e78 2920 2f20 332c 0a20 2020 2020  nd.x) / 3,.     
+000126d0: 2020 2020 2020 2079 3d65 6e64 2e79 202b         y=end.y +
+000126e0: 2032 202a 2028 6374 726c 2e79 202d 2065   2 * (ctrl.y - e
+000126f0: 6e64 2e79 2920 2f20 332c 0a20 2020 2020  nd.y) / 3,.     
+00012700: 2020 2029 0a0a 2020 2020 2020 2020 7265     )..        re
+00012710: 7475 726e 2042 657a 6965 7243 7572 7665  turn BezierCurve
+00012720: 2863 7472 6c31 2c20 6374 726c 322c 2065  (ctrl1, ctrl2, e
+00012730: 6e64 290a 0a20 2020 2040 666f 7263 655f  nd)..    @force_
+00012740: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+00012750: 6566 2072 656e 6465 7228 7365 6c66 2c20  ef render(self, 
+00012760: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
+00012770: 796c 652c 206c 6173 745f 6974 656d 2c20  yle, last_item, 
+00012780: 696e 6974 6961 6c5f 706f 696e 7429 3a0a  initial_point):.
+00012790: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000127a0: 2020 2020 5265 6e64 6572 2074 6869 7320      Render this 
+000127b0: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
+000127c0: 6974 7320 5044 4620 7265 7072 6573 656e  its PDF represen
+000127d0: 7461 7469 6f6e 2e0a 0a20 2020 2020 2020  tation...       
+000127e0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+000127f0: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
+00012800: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
+00012810: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
+00012820: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
+00012830: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
+00012840: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
+00012850: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
+00012860: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
+00012870: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
+00012880: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
+00012890: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
+000128a0: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
+000128b0: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
+000128c0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
+000128d0: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
+000128e0: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
+000128f0: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
+00012900: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
+00012910: 6d22 2063 6f6d 6d61 6e64 0a0a 2020 2020  m" command..    
+00012920: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+00012930: 2020 2020 2020 2020 2061 2074 7570 6c65           a tuple
+00012940: 206f 6620 6028 7374 722c 206e 6577 5f6c   of `(str, new_l
+00012950: 6173 745f 6974 656d 2960 2c20 7768 6572  ast_item)`, wher
+00012960: 6520 606e 6577 5f6c 6173 745f 6974 656d  e `new_last_item
+00012970: 6020 6973 2060 7365 6c66 602e 0a20 2020  ` is `self`..   
+00012980: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00012990: 2072 6574 7572 6e20 280a 2020 2020 2020   return (.      
+000129a0: 2020 2020 2020 7365 6c66 2e74 6f5f 6375        self.to_cu
+000129b0: 6269 635f 6375 7276 6528 6c61 7374 5f69  bic_curve(last_i
+000129c0: 7465 6d2e 656e 645f 706f 696e 7429 2e72  tem.end_point).r
+000129d0: 656e 6465 7228 0a20 2020 2020 2020 2020  ender(.         
+000129e0: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+000129f0: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00012a00: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00012a10: 6f69 6e74 0a20 2020 2020 2020 2020 2020  oint.           
+00012a20: 2029 5b30 5d2c 0a20 2020 2020 2020 2020   )[0],.         
+00012a30: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00012a40: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
+00012a50: 6e74 2c0a 2020 2020 2020 2020 290a 0a20  nt,.        ).. 
+00012a60: 2020 2040 666f 7263 655f 6e6f 646f 6375     @force_nodocu
+00012a70: 6d65 6e74 0a20 2020 2064 6566 2072 656e  ment.    def ren
+00012a80: 6465 725f 6465 6275 6728 0a20 2020 2020  der_debug(.     
+00012a90: 2020 2073 656c 662c 2067 7364 5f72 6567     self, gsd_reg
+00012aa0: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+00012ab0: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00012ac0: 5f70 6f69 6e74 2c20 6465 6275 675f 7374  _point, debug_st
+00012ad0: 7265 616d 2c20 7066 780a 2020 2020 293a  ream, pfx.    ):
+00012ae0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00012af0: 2020 2020 2052 656e 6465 7220 7468 6973       Render this
+00012b00: 2070 6174 6820 656c 656d 656e 7420 746f   path element to
+00012b10: 2069 7473 2050 4446 2072 6570 7265 7365   its PDF represe
+00012b20: 6e74 6174 696f 6e20 616e 6420 7072 6f64  ntation and prod
+00012b30: 7563 6520 6465 6275 670a 2020 2020 2020  uce debug.      
+00012b40: 2020 696e 666f 726d 6174 696f 6e2e 0a0a    information...
+00012b50: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00012b60: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
+00012b70: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
+00012b80: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
+00012b90: 7929 3a20 7468 6520 6f77 6e65 7227 7320  y): the owner's 
+00012ba0: 6772 6170 6869 6373 2073 7461 7465 0a20  graphics state. 
+00012bb0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00012bc0: 6963 7469 6f6e 6172 7920 7265 6769 7374  ictionary regist
+00012bd0: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
+00012be0: 7374 796c 6520 2847 7261 7068 6963 7353  style (GraphicsS
+00012bf0: 7479 6c65 293a 2074 6865 2063 7572 7265  tyle): the curre
+00012c00: 6e74 2072 6573 6f6c 7665 6420 6772 6170  nt resolved grap
+00012c10: 6869 6373 2073 7479 6c65 0a20 2020 2020  hics style.     
+00012c20: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
+00012c30: 3a20 7468 6520 7072 6576 696f 7573 2070  : the previous p
+00012c40: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
+00012c50: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
+00012c60: 5f70 6f69 6e74 3a20 6c61 7374 2070 6f73  _point: last pos
+00012c70: 6974 696f 6e20 7365 7420 6279 2061 2022  ition set by a "
+00012c80: 4d22 206f 7220 226d 2220 636f 6d6d 616e  M" or "m" comman
+00012c90: 640a 2020 2020 2020 2020 2020 2020 6465  d.            de
+00012ca0: 6275 675f 7374 7265 616d 2028 696f 2e54  bug_stream (io.T
+00012cb0: 6578 7449 4f29 3a20 7468 6520 7374 7265  extIO): the stre
+00012cc0: 616d 2074 6f20 7768 6963 6820 7468 6520  am to which the 
+00012cd0: 6465 6275 6720 6f75 7470 7574 2073 686f  debug output sho
+00012ce0: 756c 6420 6265 0a20 2020 2020 2020 2020  uld be.         
+00012cf0: 2020 2020 2020 2077 7269 7474 656e 2e20         written. 
+00012d00: 5468 6973 2069 7320 6e6f 7420 6775 6172  This is not guar
+00012d10: 616e 7465 6564 2074 6f20 6265 2073 6565  anteed to be see
+00012d20: 6b61 626c 6520 2865 2e67 2e20 6974 206d  kable (e.g. it m
+00012d30: 6179 2062 6520 7374 646f 7574 206f 720a  ay be stdout or.
+00012d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d50: 7374 6465 7272 292e 0a20 2020 2020 2020  stderr)..       
+00012d60: 2020 2020 2070 6678 2028 7374 7229 3a20       pfx (str): 
+00012d70: 7468 6520 6375 7272 656e 7420 6465 6275  the current debu
+00012d80: 6720 6f75 7470 7574 2070 7265 6669 7820  g output prefix 
+00012d90: 7374 7269 6e67 2028 6f6e 6c79 206e 6565  string (only nee
+00012da0: 6465 6420 6966 2065 6d69 7474 696e 670a  ded if emitting.
+00012db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012dc0: 6d6f 7265 2074 6861 6e20 6f6e 6520 6c69  more than one li
+00012dd0: 6e65 292e 0a0a 2020 2020 2020 2020 5265  ne)...        Re
+00012de0: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
+00012df0: 2020 2054 6865 2073 616d 6520 7475 706c     The same tupl
+00012e00: 6520 6173 2060 5175 6164 7261 7469 6342  e as `QuadraticB
+00012e10: 657a 6965 7243 7572 7665 2e72 656e 6465  ezierCurve.rende
+00012e20: 7260 2e0a 2020 2020 2020 2020 2222 220a  r`..        """.
+00012e30: 2020 2020 2020 2020 2320 7079 6c69 6e74          # pylint
+00012e40: 3a20 6469 7361 626c 653d 756e 7573 6564  : disable=unused
+00012e50: 2d61 7267 756d 656e 740a 2020 2020 2020  -argument.      
+00012e60: 2020 7265 6e64 6572 6564 2c20 7265 736f    rendered, reso
+00012e70: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
+00012e80: 696e 7420 3d20 7365 6c66 2e72 656e 6465  int = self.rende
+00012e90: 7228 0a20 2020 2020 2020 2020 2020 2067  r(.            g
+00012ea0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
+00012eb0: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
+00012ec0: 6e69 7469 616c 5f70 6f69 6e74 0a20 2020  nitial_point.   
+00012ed0: 2020 2020 2029 0a20 2020 2020 2020 2064       ).        d
+00012ee0: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
+00012ef0: 6528 0a20 2020 2020 2020 2020 2020 2066  e(.            f
+00012f00: 227b 7365 6c66 7d20 7265 736f 6c76 6564  "{self} resolved
+00012f10: 2074 6f20 7b73 656c 662e 746f 5f63 7562   to {self.to_cub
+00012f20: 6963 5f63 7572 7665 286c 6173 745f 6974  ic_curve(last_it
+00012f30: 656d 2e65 6e64 5f70 6f69 6e74 297d 5c6e  em.end_point)}\n
+00012f40: 220a 2020 2020 2020 2020 290a 0a20 2020  ".        )..   
+00012f50: 2020 2020 2072 6574 7572 6e20 7265 6e64       return rend
+00012f60: 6572 6564 2c20 7265 736f 6c76 6564 2c20  ered, resolved, 
+00012f70: 696e 6974 6961 6c5f 706f 696e 740a 0a0a  initial_point...
+00012f80: 636c 6173 7320 5265 6c61 7469 7665 5175  class RelativeQu
+00012f90: 6164 7261 7469 6342 657a 6965 7243 7572  adraticBezierCur
+00012fa0: 7665 284e 616d 6564 5475 706c 6529 3a0a  ve(NamedTuple):.
+00012fb0: 2020 2020 2222 220a 2020 2020 4120 7175      """.    A qu
+00012fc0: 6164 7261 7469 6320 42c3 a97a 6965 7220  adratic B..zier 
+00012fd0: 6375 7276 6520 7061 7468 2065 6c65 6d65  curve path eleme
+00012fe0: 6e74 2077 686f 7365 2070 6f69 6e74 7320  nt whose points 
+00012ff0: 6172 6520 7370 6563 6966 6965 6420 7265  are specified re
+00013000: 6c61 7469 7665 2074 6f20 7468 6520 656e  lative to the en
+00013010: 640a 2020 2020 706f 696e 7420 6f66 2074  d.    point of t
+00013020: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+00013030: 2065 6c65 6d65 6e74 2e0a 0a20 2020 2053   element...    S
+00013040: 6565 3a20 6050 6169 6e74 6564 5061 7468  ee: `PaintedPath
+00013050: 2e71 7561 6472 6174 6963 5f63 7572 7665  .quadratic_curve
+00013060: 5f72 656c 6174 6976 6560 0a20 2020 2022  _relative`.    "
+00013070: 2222 0a0a 2020 2020 6374 726c 3a20 506f  ""..    ctrl: Po
+00013080: 696e 740a 2020 2020 2222 2254 6865 2063  int.    """The c
+00013090: 7572 7665 2773 2063 6f6e 7472 6f6c 2070  urve's control p
+000130a0: 6f69 6e74 2072 656c 6174 6976 6520 746f  oint relative to
+000130b0: 2074 6865 2065 6e64 206f 6620 7468 6520   the end of the 
+000130c0: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
+000130d0: 656d 656e 742e 2222 220a 2020 2020 656e  ement.""".    en
+000130e0: 643a 2050 6f69 6e74 0a20 2020 2022 2222  d: Point.    """
+000130f0: 5468 6520 6375 7276 6527 7320 656e 6420  The curve's end 
+00013100: 706f 696e 7420 7265 6c61 7469 7665 2074  point relative t
+00013110: 6f20 7468 6520 656e 6420 6f66 2074 6865  o the end of the
+00013120: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+00013130: 6c65 6d65 6e74 2e22 2222 0a0a 2020 2020  lement."""..    
+00013140: 4066 6f72 6365 5f6e 6f64 6f63 756d 656e  @force_nodocumen
+00013150: 740a 2020 2020 6465 6620 7265 6e64 6572  t.    def render
+00013160: 2873 656c 662c 2067 7364 5f72 6567 6973  (self, gsd_regis
+00013170: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00013180: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00013190: 6f69 6e74 293a 0a20 2020 2020 2020 2022  oint):.        "
+000131a0: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
+000131b0: 7220 7468 6973 2070 6174 6820 656c 656d  r this path elem
+000131c0: 656e 7420 746f 2069 7473 2050 4446 2072  ent to its PDF r
+000131d0: 6570 7265 7365 6e74 6174 696f 6e2e 0a0a  epresentation...
+000131e0: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+000131f0: 2020 2020 2020 2020 2020 6773 645f 7265            gsd_re
+00013200: 6769 7374 7279 2028 4772 6170 6869 6373  gistry (Graphics
+00013210: 5374 6174 6544 6963 7452 6567 6973 7472  StateDictRegistr
+00013220: 7929 3a20 7468 6520 6f77 6e65 7227 7320  y): the owner's 
+00013230: 6772 6170 6869 6373 2073 7461 7465 0a20  graphics state. 
+00013240: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00013250: 6963 7469 6f6e 6172 7920 7265 6769 7374  ictionary regist
+00013260: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
+00013270: 7374 796c 6520 2847 7261 7068 6963 7353  style (GraphicsS
+00013280: 7479 6c65 293a 2074 6865 2063 7572 7265  tyle): the curre
+00013290: 6e74 2072 6573 6f6c 7665 6420 6772 6170  nt resolved grap
+000132a0: 6869 6373 2073 7479 6c65 0a20 2020 2020  hics style.     
+000132b0: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
+000132c0: 3a20 7468 6520 7072 6576 696f 7573 2070  : the previous p
+000132d0: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
+000132e0: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
+000132f0: 5f70 6f69 6e74 3a20 6c61 7374 2070 6f73  _point: last pos
+00013300: 6974 696f 6e20 7365 7420 6279 2061 2022  ition set by a "
+00013310: 4d22 206f 7220 226d 2220 636f 6d6d 616e  M" or "m" comman
+00013320: 640a 0a20 2020 2020 2020 2052 6574 7572  d..        Retur
+00013330: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00013340: 6120 7475 706c 6520 6f66 2060 2873 7472  a tuple of `(str
+00013350: 2c20 6e65 775f 6c61 7374 5f69 7465 6d29  , new_last_item)
+00013360: 602c 2077 6865 7265 2060 6e65 775f 6c61  `, where `new_la
+00013370: 7374 5f69 7465 6d60 2069 7320 7468 6520  st_item` is the 
+00013380: 7265 736f 6c76 6564 0a20 2020 2020 2020  resolved.       
+00013390: 2020 2020 2060 5175 6164 7261 7469 6342       `QuadraticB
+000133a0: 657a 6965 7243 7572 7665 602e 0a20 2020  ezierCurve`..   
+000133b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000133c0: 206c 6173 745f 706f 696e 7420 3d20 6c61   last_point = la
+000133d0: 7374 5f69 7465 6d2e 656e 645f 706f 696e  st_item.end_poin
+000133e0: 740a 0a20 2020 2020 2020 2063 7472 6c20  t..        ctrl 
+000133f0: 3d20 6c61 7374 5f70 6f69 6e74 202b 2073  = last_point + s
+00013400: 656c 662e 6374 726c 0a20 2020 2020 2020  elf.ctrl.       
+00013410: 2065 6e64 203d 206c 6173 745f 706f 696e   end = last_poin
+00013420: 7420 2b20 7365 6c66 2e65 6e64 0a0a 2020  t + self.end..  
+00013430: 2020 2020 2020 6162 736f 6c75 7465 203d        absolute =
+00013440: 2051 7561 6472 6174 6963 4265 7a69 6572   QuadraticBezier
+00013450: 4375 7276 6528 6374 726c 3d63 7472 6c2c  Curve(ctrl=ctrl,
+00013460: 2065 6e64 3d65 6e64 290a 2020 2020 2020   end=end).      
+00013470: 2020 7265 7475 726e 2061 6273 6f6c 7574    return absolut
+00013480: 652e 7265 6e64 6572 2867 7364 5f72 6567  e.render(gsd_reg
+00013490: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+000134a0: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+000134b0: 5f70 6f69 6e74 290a 0a20 2020 2040 666f  _point)..    @fo
+000134c0: 7263 655f 6e6f 646f 6375 6d65 6e74 0a20  rce_nodocument. 
+000134d0: 2020 2064 6566 2072 656e 6465 725f 6465     def render_de
+000134e0: 6275 6728 0a20 2020 2020 2020 2073 656c  bug(.        sel
+000134f0: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
+00013500: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
+00013510: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+00013520: 2c20 6465 6275 675f 7374 7265 616d 2c20  , debug_stream, 
+00013530: 7066 780a 2020 2020 293a 0a20 2020 2020  pfx.    ):.     
+00013540: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
+00013550: 656e 6465 7220 7468 6973 2070 6174 6820  ender this path 
+00013560: 656c 656d 656e 7420 746f 2069 7473 2050  element to its P
+00013570: 4446 2072 6570 7265 7365 6e74 6174 696f  DF representatio
+00013580: 6e20 616e 6420 7072 6f64 7563 6520 6465  n and produce de
+00013590: 6275 670a 2020 2020 2020 2020 696e 666f  bug.        info
+000135a0: 726d 6174 696f 6e2e 0a0a 2020 2020 2020  rmation...      
+000135b0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+000135c0: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+000135d0: 2028 4772 6170 6869 6373 5374 6174 6544   (GraphicsStateD
+000135e0: 6963 7452 6567 6973 7472 7929 3a20 7468  ictRegistry): th
+000135f0: 6520 6f77 6e65 7227 7320 6772 6170 6869  e owner's graphi
+00013600: 6373 2073 7461 7465 0a20 2020 2020 2020  cs state.       
+00013610: 2020 2020 2020 2020 2064 6963 7469 6f6e           diction
+00013620: 6172 7920 7265 6769 7374 7279 2e0a 2020  ary registry..  
+00013630: 2020 2020 2020 2020 2020 7374 796c 6520            style 
+00013640: 2847 7261 7068 6963 7353 7479 6c65 293a  (GraphicsStyle):
+00013650: 2074 6865 2063 7572 7265 6e74 2072 6573   the current res
+00013660: 6f6c 7665 6420 6772 6170 6869 6373 2073  olved graphics s
+00013670: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
+00013680: 206c 6173 745f 6974 656d 3a20 7468 6520   last_item: the 
+00013690: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
+000136a0: 656d 656e 742e 0a20 2020 2020 2020 2020  ement..         
+000136b0: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
+000136c0: 3a20 6c61 7374 2070 6f73 6974 696f 6e20  : last position 
+000136d0: 7365 7420 6279 2061 2022 4d22 206f 7220  set by a "M" or 
+000136e0: 226d 2220 636f 6d6d 616e 640a 2020 2020  "m" command.    
+000136f0: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
+00013700: 7265 616d 2028 696f 2e54 6578 7449 4f29  ream (io.TextIO)
+00013710: 3a20 7468 6520 7374 7265 616d 2074 6f20  : the stream to 
+00013720: 7768 6963 6820 7468 6520 6465 6275 6720  which the debug 
+00013730: 6f75 7470 7574 2073 686f 756c 6420 6265  output should be
+00013740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013750: 2077 7269 7474 656e 2e20 5468 6973 2069   written. This i
+00013760: 7320 6e6f 7420 6775 6172 616e 7465 6564  s not guaranteed
+00013770: 2074 6f20 6265 2073 6565 6b61 626c 6520   to be seekable 
+00013780: 2865 2e67 2e20 6974 206d 6179 2062 6520  (e.g. it may be 
+00013790: 7374 646f 7574 206f 720a 2020 2020 2020  stdout or.      
+000137a0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
+000137b0: 292e 0a20 2020 2020 2020 2020 2020 2070  )..            p
+000137c0: 6678 2028 7374 7229 3a20 7468 6520 6375  fx (str): the cu
+000137d0: 7272 656e 7420 6465 6275 6720 6f75 7470  rrent debug outp
+000137e0: 7574 2070 7265 6669 7820 7374 7269 6e67  ut prefix string
+000137f0: 2028 6f6e 6c79 206e 6565 6465 6420 6966   (only needed if
+00013800: 2065 6d69 7474 696e 670a 2020 2020 2020   emitting.      
+00013810: 2020 2020 2020 2020 2020 6d6f 7265 2074            more t
+00013820: 6861 6e20 6f6e 6520 6c69 6e65 292e 0a0a  han one line)...
+00013830: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+00013840: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+00013850: 2073 616d 6520 7475 706c 6520 6173 2060   same tuple as `
+00013860: 5265 6c61 7469 7665 5175 6164 7261 7469  RelativeQuadrati
+00013870: 6342 657a 6965 7243 7572 7665 2e72 656e  cBezierCurve.ren
+00013880: 6465 7260 2e0a 2020 2020 2020 2020 2222  der`..        ""
+00013890: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
+000138a0: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
+000138b0: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
+000138c0: 2020 2020 7265 6e64 6572 6564 2c20 7265      rendered, re
+000138d0: 736f 6c76 6564 2c20 696e 6974 6961 6c5f  solved, initial_
+000138e0: 706f 696e 7420 3d20 7365 6c66 2e72 656e  point = self.ren
+000138f0: 6465 7228 0a20 2020 2020 2020 2020 2020  der(.           
+00013900: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
+00013910: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
+00013920: 2069 6e69 7469 616c 5f70 6f69 6e74 0a20   initial_point. 
+00013930: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00013940: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
+00013950: 6974 6528 0a20 2020 2020 2020 2020 2020  ite(.           
+00013960: 2066 227b 7365 6c66 7d20 7265 736f 6c76   f"{self} resolv
+00013970: 6564 2074 6f20 7b72 6573 6f6c 7665 647d  ed to {resolved}
+00013980: 2022 0a20 2020 2020 2020 2020 2020 2066   ".            f
+00013990: 2274 6865 6e20 746f 207b 7265 736f 6c76  "then to {resolv
+000139a0: 6564 2e74 6f5f 6375 6269 635f 6375 7276  ed.to_cubic_curv
+000139b0: 6528 6c61 7374 5f69 7465 6d2e 656e 645f  e(last_item.end_
+000139c0: 706f 696e 7429 7d5c 6e22 0a20 2020 2020  point)}\n".     
+000139d0: 2020 2029 0a0a 2020 2020 2020 2020 7265     )..        re
+000139e0: 7475 726e 2072 656e 6465 7265 642c 2072  turn rendered, r
+000139f0: 6573 6f6c 7665 642c 2069 6e69 7469 616c  esolved, initial
+00013a00: 5f70 6f69 6e74 0a0a 0a63 6c61 7373 2041  _point...class A
+00013a10: 7263 284e 616d 6564 5475 706c 6529 3a0a  rc(NamedTuple):.
+00013a20: 2020 2020 2222 220a 2020 2020 416e 2065      """.    An e
+00013a30: 6c6c 6970 7469 6361 6c20 6172 6320 7061  lliptical arc pa
+00013a40: 7468 2065 6c65 6d65 6e74 2e0a 0a20 2020  th element...   
+00013a50: 2054 6865 2061 7263 2069 7320 6472 6177   The arc is draw
+00013a60: 6e20 6672 6f6d 2074 6865 2065 6e64 206f  n from the end o
+00013a70: 6620 7468 6520 6375 7272 656e 7420 7061  f the current pa
+00013a80: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
+00013a90: 7320 7370 6563 6966 6965 6420 656e 6420  s specified end 
+00013aa0: 706f 696e 740a 2020 2020 7573 696e 6720  point.    using 
+00013ab0: 6120 6e75 6d62 6572 206f 6620 7061 7261  a number of para
+00013ac0: 6d65 7465 7273 2074 6f20 6465 7465 726d  meters to determ
+00013ad0: 696e 6520 686f 7720 6974 2069 7320 636f  ine how it is co
+00013ae0: 6e73 7472 7563 7465 642e 0a0a 2020 2020  nstructed...    
+00013af0: 5365 653a 2060 5061 696e 7465 6450 6174  See: `PaintedPat
+00013b00: 682e 6172 635f 746f 600a 2020 2020 2222  h.arc_to`.    ""
+00013b10: 220a 0a20 2020 2072 6164 6969 3a20 506f  "..    radii: Po
+00013b20: 696e 740a 2020 2020 2222 220a 2020 2020  int.    """.    
+00013b30: 5468 6520 782d 2061 6e64 2079 2d72 6164  The x- and y-rad
+00013b40: 6969 206f 6620 7468 6520 6172 632e 2049  ii of the arc. I
+00013b50: 6620 6072 6164 6969 2e78 203d 3d20 7261  f `radii.x == ra
+00013b60: 6469 692e 7960 2074 6865 2061 7263 2077  dii.y` the arc w
+00013b70: 696c 6c20 6265 2063 6972 6375 6c61 722e  ill be circular.
+00013b80: 0a20 2020 2022 2222 0a20 2020 2072 6f74  .    """.    rot
+00013b90: 6174 696f 6e3a 204e 756d 6265 720a 2020  ation: Number.  
+00013ba0: 2020 2222 2254 6865 2072 6f74 6174 696f    """The rotatio
+00013bb0: 6e20 6f66 2074 6865 2061 7263 2773 206d  n of the arc's m
+00013bc0: 616a 6f72 2f6d 696e 6f72 2061 7865 7320  ajor/minor axes 
+00013bd0: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
+00013be0: 636f 6f72 6469 6e61 7465 2066 7261 6d65  coordinate frame
+00013bf0: 2e22 2222 0a20 2020 206c 6172 6765 3a20  .""".    large: 
+00013c00: 626f 6f6c 0a20 2020 2022 2222 4966 2054  bool.    """If T
+00013c10: 7275 652c 2073 7765 6570 2074 6865 2061  rue, sweep the a
+00013c20: 7263 206f 7665 7220 616e 2061 6e67 6c65  rc over an angle
+00013c30: 2067 7265 6174 6572 2074 6861 6e20 6f72   greater than or
+00013c40: 2065 7175 616c 2074 6f20 3138 3020 6465   equal to 180 de
+00013c50: 6772 6565 732e 2222 220a 2020 2020 7377  grees.""".    sw
+00013c60: 6565 703a 2062 6f6f 6c0a 2020 2020 2222  eep: bool.    ""
+00013c70: 2249 6620 5472 7565 2c20 7468 6520 6172  "If True, the ar
+00013c80: 6320 6973 2073 7765 7074 2069 6e20 7468  c is swept in th
+00013c90: 6520 706f 7369 7469 7665 2061 6e67 756c  e positive angul
+00013ca0: 6172 2064 6972 6563 7469 6f6e 2e22 2222  ar direction."""
+00013cb0: 0a20 2020 2065 6e64 3a20 506f 696e 740a  .    end: Point.
+00013cc0: 2020 2020 2222 2254 6865 2065 6e64 2070      """The end p
+00013cd0: 6f69 6e74 206f 6620 7468 6520 6172 632e  oint of the arc.
+00013ce0: 2222 220a 0a20 2020 2040 7374 6174 6963  """..    @static
+00013cf0: 6d65 7468 6f64 0a20 2020 2040 666f 7263  method.    @forc
+00013d00: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
+00013d10: 2064 6566 2073 7562 6469 7664 655f 7377   def subdivde_sw
+00013d20: 6565 7028 7377 6565 705f 616e 676c 6529  eep(sweep_angle)
+00013d30: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00013d40: 2020 2020 2020 4120 6765 6e65 7261 746f        A generato
+00013d50: 7220 7468 6174 2073 7562 6469 7669 6465  r that subdivide
+00013d60: 7320 6120 7377 6570 7420 616e 676c 6520  s a swept angle 
+00013d70: 696e 746f 2073 6567 6d65 6e74 7320 6e6f  into segments no
+00013d80: 206c 6172 6765 7220 7468 616e 2061 2071   larger than a q
+00013d90: 7561 7274 6572 0a20 2020 2020 2020 2074  uarter.        t
+00013da0: 7572 6e2e 0a0a 2020 2020 2020 2020 416e  urn...        An
+00013db0: 7920 7377 6565 7020 7468 6174 2069 7320  y sweep that is 
+00013dc0: 6c61 7267 6572 2074 6861 6e20 6120 7175  larger than a qu
+00013dd0: 6172 7465 7220 7475 726e 2069 7320 7375  arter turn is su
+00013de0: 6264 6976 6964 6564 2069 6e74 6f20 6173  bdivided into as
+00013df0: 206d 616e 7920 6571 7561 6c6c 790a 2020   many equally.  
+00013e00: 2020 2020 2020 7369 7a65 6420 7365 676d        sized segm
+00013e10: 656e 7473 2061 7320 6e65 6365 7373 6172  ents as necessar
+00013e20: 7920 746f 2070 7265 7665 6e74 2061 6e79  y to prevent any
+00013e30: 2069 6e64 6976 6964 7561 6c20 7365 676d   individual segm
+00013e40: 656e 7420 6672 6f6d 2062 6569 6e67 206c  ent from being l
+00013e50: 6172 6765 720a 2020 2020 2020 2020 7468  arger.        th
+00013e60: 616e 2061 2071 7561 7274 6572 2074 7572  an a quarter tur
+00013e70: 6e2e 0a0a 2020 2020 2020 2020 5468 6973  n...        This
+00013e80: 2069 7320 7573 6564 2066 6f72 2061 7070   is used for app
+00013e90: 726f 7869 6d61 7469 6e67 2061 2063 6972  roximating a cir
+00013ea0: 6375 6c61 7220 6375 7276 6520 7365 676d  cular curve segm
+00013eb0: 656e 7420 7573 696e 6720 6375 6269 6320  ent using cubic 
+00013ec0: 42c3 a97a 6965 720a 2020 2020 2020 2020  B..zier.        
+00013ed0: 6375 7276 6573 2e20 5468 6973 2063 6f6d  curves. This com
+00013ee0: 7075 7465 7320 7468 6520 7061 7261 6d65  putes the parame
+00013ef0: 7465 7273 2075 7365 6420 666f 7220 7468  ters used for th
+00013f00: 6520 42c3 a97a 6965 7220 6170 7072 6f78  e B..zier approx
+00013f10: 696d 6174 696f 6e20 7570 0a20 2020 2020  imation up.     
+00013f20: 2020 2066 726f 6e74 2c20 6173 2077 656c     front, as wel
+00013f30: 6c20 6173 2074 6865 2074 7261 6e73 666f  l as the transfo
+00013f40: 726d 206e 6563 6573 7361 7279 2074 6f20  rm necessary to 
+00013f50: 706c 6163 6520 7468 6520 7365 676d 656e  place the segmen
+00013f60: 7420 696e 2074 6865 2063 6f72 7265 6374  t in the correct
+00013f70: 0a20 2020 2020 2020 2070 6f73 6974 696f  .        positio
+00013f80: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
+00013f90: 3a0a 2020 2020 2020 2020 2020 2020 7377  :.            sw
+00013fa0: 6565 705f 616e 676c 6520 284e 756d 6265  eep_angle (Numbe
+00013fb0: 7229 3a20 7468 6520 616e 676c 6520 746f  r): the angle to
+00013fc0: 2073 7562 6469 7669 6465 2e0a 0a20 2020   subdivide...   
+00013fd0: 2020 2020 2059 6965 6c64 733a 0a20 2020       Yields:.   
+00013fe0: 2020 2020 2020 2020 2041 2074 7570 6c65           A tuple
+00013ff0: 206f 6620 2863 7472 6c31 2c20 6374 726c   of (ctrl1, ctrl
+00014000: 322c 2065 6e64 2920 7265 7072 6573 656e  2, end) represen
+00014010: 7469 6e67 2074 6865 2063 6f6e 7472 6f6c  ting the control
+00014020: 2061 6e64 2065 6e64 2070 6f69 6e74 7320   and end points 
+00014030: 6f66 0a20 2020 2020 2020 2020 2020 2074  of.            t
+00014040: 6865 2063 7562 6963 2042 c3a9 7a69 6572  he cubic B..zier
+00014050: 2063 7572 7665 2061 7070 726f 7869 6d61   curve approxima
+00014060: 7469 6e67 2074 6865 2073 6567 6d65 6e74  ting the segment
+00014070: 2061 7320 6120 756e 6974 2063 6972 636c   as a unit circl
+00014080: 6520 6365 6e74 6572 6564 0a20 2020 2020  e centered.     
+00014090: 2020 2020 2020 2061 7420 7468 6520 6f72         at the or
+000140a0: 6967 696e 2e0a 2020 2020 2020 2020 2222  igin..        ""
+000140b0: 220a 2020 2020 2020 2020 7377 6565 705f  ".        sweep_
+000140c0: 616e 676c 6520 3d20 6162 7328 7377 6565  angle = abs(swee
+000140d0: 705f 616e 676c 6529 0a20 2020 2020 2020  p_angle).       
+000140e0: 2073 7765 6570 5f6c 6566 7420 3d20 7377   sweep_left = sw
+000140f0: 6565 705f 616e 676c 650a 0a20 2020 2020  eep_angle..     
+00014100: 2020 2071 7561 7274 6572 7475 726e 203d     quarterturn =
+00014110: 206d 6174 682e 7069 202f 2032 0a20 2020   math.pi / 2.   
+00014120: 2020 2020 2063 6875 6e6b 7320 3d20 6d61       chunks = ma
+00014130: 7468 2e63 6569 6c28 7377 6565 705f 616e  th.ceil(sweep_an
+00014140: 676c 6520 2f20 7175 6172 7465 7274 7572  gle / quartertur
+00014150: 6e29 0a0a 2020 2020 2020 2020 7377 6565  n)..        swee
+00014160: 705f 7365 676d 656e 7420 3d20 7377 6565  p_segment = swee
+00014170: 705f 616e 676c 6520 2f20 6368 756e 6b73  p_angle / chunks
+00014180: 0a20 2020 2020 2020 2063 6f73 5f74 203d  .        cos_t =
+00014190: 206d 6174 682e 636f 7328 7377 6565 705f   math.cos(sweep_
+000141a0: 7365 676d 656e 7429 0a20 2020 2020 2020  segment).       
+000141b0: 2073 696e 5f74 203d 206d 6174 682e 7369   sin_t = math.si
+000141c0: 6e28 7377 6565 705f 7365 676d 656e 7429  n(sweep_segment)
+000141d0: 0a20 2020 2020 2020 206b 6170 7061 203d  .        kappa =
+000141e0: 2034 202f 2033 202a 206d 6174 682e 7461   4 / 3 * math.ta
+000141f0: 6e28 7377 6565 705f 7365 676d 656e 7420  n(sweep_segment 
+00014200: 2f20 3429 0a0a 2020 2020 2020 2020 6374  / 4)..        ct
+00014210: 726c 3120 3d20 506f 696e 7428 312c 206b  rl1 = Point(1, k
+00014220: 6170 7061 290a 2020 2020 2020 2020 6374  appa).        ct
+00014230: 726c 3220 3d20 506f 696e 7428 636f 735f  rl2 = Point(cos_
+00014240: 7420 2b20 6b61 7070 6120 2a20 7369 6e5f  t + kappa * sin_
+00014250: 742c 2073 696e 5f74 202d 206b 6170 7061  t, sin_t - kappa
+00014260: 202a 2063 6f73 5f74 290a 2020 2020 2020   * cos_t).      
+00014270: 2020 656e 6420 3d20 506f 696e 7428 636f    end = Point(co
+00014280: 735f 742c 2073 696e 5f74 290a 0a20 2020  s_t, sin_t)..   
+00014290: 2020 2020 2066 6f72 205f 2069 6e20 7261       for _ in ra
+000142a0: 6e67 6528 6368 756e 6b73 293a 0a20 2020  nge(chunks):.   
+000142b0: 2020 2020 2020 2020 206f 6666 7365 7420           offset 
+000142c0: 3d20 7377 6565 705f 616e 676c 6520 2d20  = sweep_angle - 
+000142d0: 7377 6565 705f 6c65 6674 0a0a 2020 2020  sweep_left..    
+000142e0: 2020 2020 2020 2020 7472 616e 7366 6f72          transfor
+000142f0: 6d20 3d20 5472 616e 7366 6f72 6d2e 726f  m = Transform.ro
+00014300: 7461 7469 6f6e 286f 6666 7365 7429 0a20  tation(offset). 
+00014310: 2020 2020 2020 2020 2020 2079 6965 6c64             yield
+00014320: 2063 7472 6c31 2040 2074 7261 6e73 666f   ctrl1 @ transfo
+00014330: 726d 2c20 6374 726c 3220 4020 7472 616e  rm, ctrl2 @ tran
+00014340: 7366 6f72 6d2c 2065 6e64 2040 2074 7261  sform, end @ tra
+00014350: 6e73 666f 726d 0a0a 2020 2020 2020 2020  nsform..        
+00014360: 2020 2020 7377 6565 705f 6c65 6674 202d      sweep_left -
+00014370: 3d20 7377 6565 705f 7365 676d 656e 740a  = sweep_segment.
+00014380: 0a20 2020 2064 6566 205f 6170 7072 6f78  .    def _approx
+00014390: 696d 6174 655f 6172 6328 7365 6c66 2c20  imate_arc(self, 
+000143a0: 6c61 7374 5f69 7465 6d29 3a0a 2020 2020  last_item):.    
+000143b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000143c0: 4170 7072 6f78 696d 6174 6520 7468 6973  Approximate this
+000143d0: 2061 7263 2077 6974 6820 6120 7365 7175   arc with a sequ
+000143e0: 656e 6365 206f 6620 6042 657a 6965 7243  ence of `BezierC
+000143f0: 7572 7665 602e 0a0a 2020 2020 2020 2020  urve`...        
+00014400: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00014410: 2020 6c61 7374 5f69 7465 6d3a 2074 6865    last_item: the
+00014420: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+00014430: 6c65 6d65 6e74 2028 7573 6564 2066 6f72  lement (used for
+00014440: 2069 7473 2065 6e64 2070 6f69 6e74 290a   its end point).
+00014450: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00014460: 3a0a 2020 2020 2020 2020 2020 2020 6120  :.            a 
+00014470: 6c69 7374 206f 6620 6042 657a 6965 7243  list of `BezierC
+00014480: 7572 7665 602e 0a20 2020 2020 2020 2022  urve`..        "
+00014490: 2222 0a20 2020 2020 2020 2072 6164 6969  "".        radii
+000144a0: 203d 2073 656c 662e 7261 6469 690a 0a20   = self.radii.. 
+000144b0: 2020 2020 2020 2072 6576 6572 7365 203d         reverse =
+000144c0: 2054 7261 6e73 666f 726d 2e72 6f74 6174   Transform.rotat
+000144d0: 696f 6e28 2d73 656c 662e 726f 7461 7469  ion(-self.rotati
+000144e0: 6f6e 290a 2020 2020 2020 2020 666f 7277  on).        forw
+000144f0: 6172 6420 3d20 5472 616e 7366 6f72 6d2e  ard = Transform.
+00014500: 726f 7461 7469 6f6e 2873 656c 662e 726f  rotation(self.ro
+00014510: 7461 7469 6f6e 290a 0a20 2020 2020 2020  tation)..       
+00014520: 2070 7269 6d65 203d 2028 286c 6173 745f   prime = ((last_
+00014530: 6974 656d 2e65 6e64 5f70 6f69 6e74 202d  item.end_point -
+00014540: 2073 656c 662e 656e 6429 202a 2030 2e35   self.end) * 0.5
+00014550: 2920 4020 7265 7665 7273 650a 0a20 2020  ) @ reverse..   
+00014560: 2020 2020 206c 616d 5f64 6120 3d20 2870       lam_da = (p
+00014570: 7269 6d65 2e78 202f 2072 6164 6969 2e78  rime.x / radii.x
+00014580: 2920 2a2a 2032 202b 2028 7072 696d 652e  ) ** 2 + (prime.
+00014590: 7920 2f20 7261 6469 692e 7929 202a 2a20  y / radii.y) ** 
+000145a0: 320a 0a20 2020 2020 2020 2069 6620 6c61  2..        if la
+000145b0: 6d5f 6461 203e 2031 3a0a 2020 2020 2020  m_da > 1:.      
+000145c0: 2020 2020 2020 7261 6469 6920 3d20 506f        radii = Po
+000145d0: 696e 7428 783d 286c 616d 5f64 612a 2a30  int(x=(lam_da**0
+000145e0: 2e35 2920 2a20 7261 6469 692e 782c 2079  .5) * radii.x, y
+000145f0: 3d28 6c61 6d5f 6461 2a2a 302e 3529 202a  =(lam_da**0.5) *
+00014600: 2072 6164 6969 2e79 290a 0a20 2020 2020   radii.y)..     
+00014610: 2020 2073 6967 6e20 3d20 2873 656c 662e     sign = (self.
+00014620: 6c61 7267 6520 213d 2073 656c 662e 7377  large != self.sw
+00014630: 6565 7029 202d 2028 7365 6c66 2e6c 6172  eep) - (self.lar
+00014640: 6765 203d 3d20 7365 6c66 2e73 7765 6570  ge == self.sweep
+00014650: 290a 2020 2020 2020 2020 7278 7279 3220  ).        rxry2 
+00014660: 3d20 2872 6164 6969 2e78 202a 2072 6164  = (radii.x * rad
+00014670: 6969 2e79 2920 2a2a 2032 0a20 2020 2020  ii.y) ** 2.     
+00014680: 2020 2072 7870 7932 203d 2028 7261 6469     rxpy2 = (radi
+00014690: 692e 7820 2a20 7072 696d 652e 7929 202a  i.x * prime.y) *
+000146a0: 2a20 320a 2020 2020 2020 2020 7279 7078  * 2.        rypx
+000146b0: 3220 3d20 2872 6164 6969 2e79 202a 2070  2 = (radii.y * p
+000146c0: 7269 6d65 2e78 2920 2a2a 2032 0a0a 2020  rime.x) ** 2..  
+000146d0: 2020 2020 2020 6365 6e74 6572 7072 696d        centerprim
+000146e0: 6520 3d20 280a 2020 2020 2020 2020 2020  e = (.          
+000146f0: 2020 7369 676e 0a20 2020 2020 2020 2020    sign.         
+00014700: 2020 202a 206d 6174 682e 7371 7274 2872     * math.sqrt(r
+00014710: 6f75 6e64 2872 7872 7932 202d 2072 7870  ound(rxry2 - rxp
+00014720: 7932 202d 2072 7970 7832 2c20 3829 202f  y2 - rypx2, 8) /
+00014730: 2028 7278 7079 3220 2b20 7279 7078 3229   (rxpy2 + rypx2)
+00014740: 290a 2020 2020 2020 2020 2020 2020 2a20  ).            * 
+00014750: 506f 696e 7428 0a20 2020 2020 2020 2020  Point(.         
+00014760: 2020 2020 2020 2078 3d72 6164 6969 2e78         x=radii.x
+00014770: 202a 2070 7269 6d65 2e79 202f 2072 6164   * prime.y / rad
+00014780: 6969 2e79 2c0a 2020 2020 2020 2020 2020  ii.y,.          
+00014790: 2020 2020 2020 793d 2d72 6164 6969 2e79        y=-radii.y
+000147a0: 202a 2070 7269 6d65 2e78 202f 2072 6164   * prime.x / rad
+000147b0: 6969 2e78 2c0a 2020 2020 2020 2020 2020  ii.x,.          
+000147c0: 2020 290a 2020 2020 2020 2020 290a 0a20    ).        ).. 
+000147d0: 2020 2020 2020 2063 656e 7465 7220 3d20         center = 
+000147e0: 2863 656e 7465 7270 7269 6d65 2040 2066  (centerprime @ f
+000147f0: 6f72 7761 7264 2920 2b20 2828 6c61 7374  orward) + ((last
+00014800: 5f69 7465 6d2e 656e 645f 706f 696e 7420  _item.end_point 
+00014810: 2b20 7365 6c66 2e65 6e64 2920 2a20 302e  + self.end) * 0.
+00014820: 3529 0a0a 2020 2020 2020 2020 6172 6373  5)..        arcs
+00014830: 7461 7274 203d 2050 6f69 6e74 280a 2020  tart = Point(.  
+00014840: 2020 2020 2020 2020 2020 783d 2870 7269            x=(pri
+00014850: 6d65 2e78 202d 2063 656e 7465 7270 7269  me.x - centerpri
+00014860: 6d65 2e78 2920 2f20 7261 6469 692e 782c  me.x) / radii.x,
+00014870: 0a20 2020 2020 2020 2020 2020 2079 3d28  .            y=(
+00014880: 7072 696d 652e 7920 2d20 6365 6e74 6572  prime.y - center
+00014890: 7072 696d 652e 7929 202f 2072 6164 6969  prime.y) / radii
+000148a0: 2e79 2c0a 2020 2020 2020 2020 290a 2020  .y,.        ).  
+000148b0: 2020 2020 2020 6172 6365 6e64 203d 2050        arcend = P
+000148c0: 6f69 6e74 280a 2020 2020 2020 2020 2020  oint(.          
+000148d0: 2020 783d 282d 7072 696d 652e 7820 2d20    x=(-prime.x - 
+000148e0: 6365 6e74 6572 7072 696d 652e 7829 202f  centerprime.x) /
+000148f0: 2072 6164 6969 2e78 2c0a 2020 2020 2020   radii.x,.      
+00014900: 2020 2020 2020 793d 282d 7072 696d 652e        y=(-prime.
+00014910: 7920 2d20 6365 6e74 6572 7072 696d 652e  y - centerprime.
+00014920: 7929 202f 2072 6164 6969 2e79 2c0a 2020  y) / radii.y,.  
+00014930: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00014940: 2074 6865 7461 203d 2050 6f69 6e74 2831   theta = Point(1
+00014950: 2c20 3029 2e61 6e67 6c65 2861 7263 7374  , 0).angle(arcst
+00014960: 6172 7429 0a20 2020 2020 2020 2064 656c  art).        del
+00014970: 7461 7468 6574 6120 3d20 6172 6373 7461  tatheta = arcsta
+00014980: 7274 2e61 6e67 6c65 2861 7263 656e 6429  rt.angle(arcend)
+00014990: 0a0a 2020 2020 2020 2020 6966 2028 7365  ..        if (se
+000149a0: 6c66 2e73 7765 6570 2069 7320 4661 6c73  lf.sweep is Fals
+000149b0: 6529 2061 6e64 2028 6465 6c74 6174 6865  e) and (deltathe
+000149c0: 7461 203e 2030 293a 0a20 2020 2020 2020  ta > 0):.       
+000149d0: 2020 2020 2064 656c 7461 7468 6574 6120       deltatheta 
+000149e0: 2d3d 206d 6174 682e 7461 750a 2020 2020  -= math.tau.    
+000149f0: 2020 2020 656c 6966 2028 7365 6c66 2e73      elif (self.s
+00014a00: 7765 6570 2069 7320 5472 7565 2920 616e  weep is True) an
+00014a10: 6420 2864 656c 7461 7468 6574 6120 3c20  d (deltatheta < 
+00014a20: 3029 3a0a 2020 2020 2020 2020 2020 2020  0):.            
+00014a30: 6465 6c74 6174 6865 7461 202b 3d20 6d61  deltatheta += ma
+00014a40: 7468 2e74 6175 0a0a 2020 2020 2020 2020  th.tau..        
+00014a50: 7377 6565 705f 7369 676e 203d 2028 6465  sweep_sign = (de
+00014a60: 6c74 6174 6865 7461 203e 3d20 3029 202d  ltatheta >= 0) -
+00014a70: 2028 6465 6c74 6174 6865 7461 203c 2030   (deltatheta < 0
+00014a80: 290a 2020 2020 2020 2020 6669 6e61 6c5f  ).        final_
+00014a90: 7466 203d 2028 0a20 2020 2020 2020 2020  tf = (.         
+00014aa0: 2020 2054 7261 6e73 666f 726d 2e73 6361     Transform.sca
+00014ab0: 6c69 6e67 2878 3d31 2c20 793d 7377 6565  ling(x=1, y=swee
+00014ac0: 705f 7369 676e 2920 2023 2066 6c69 7020  p_sign)  # flip 
+00014ad0: 6e65 6761 7469 7665 2073 7765 6570 730a  negative sweeps.
+00014ae0: 2020 2020 2020 2020 2020 2020 2e72 6f74              .rot
+00014af0: 6174 6528 7468 6574 6129 2020 2320 726f  ate(theta)  # ro
+00014b00: 7461 7465 2073 7461 7274 206f 6620 6172  tate start of ar
+00014b10: 6320 746f 2063 6f72 7265 6374 2070 6f73  c to correct pos
+00014b20: 6974 696f 6e0a 2020 2020 2020 2020 2020  ition.          
+00014b30: 2020 2e73 6361 6c65 2872 6164 6969 2e78    .scale(radii.x
+00014b40: 2c20 7261 6469 692e 7929 2020 2320 7363  , radii.y)  # sc
+00014b50: 616c 6520 756e 6974 2063 6972 636c 6520  ale unit circle 
+00014b60: 696e 746f 2074 6865 2066 696e 616c 2065  into the final e
+00014b70: 6c6c 6970 7365 2073 6861 7065 0a20 2020  llipse shape.   
+00014b80: 2020 2020 2020 2020 202e 726f 7461 7465           .rotate
+00014b90: 2873 656c 662e 726f 7461 7469 6f6e 2920  (self.rotation) 
+00014ba0: 2023 2072 6f74 6174 6520 7468 6520 656c   # rotate the el
+00014bb0: 6c69 7073 6520 7468 6520 7370 6563 6966  lipse the specif
+00014bc0: 6965 6420 616e 676c 650a 2020 2020 2020  ied angle.      
+00014bd0: 2020 2020 2020 2e74 7261 6e73 6c61 7465        .translate
+00014be0: 2863 656e 7465 722e 782c 2063 656e 7465  (center.x, cente
+00014bf0: 722e 7929 2020 2320 7472 616e 736c 6174  r.y)  # translat
+00014c00: 6520 746f 2074 6865 2066 696e 616c 2063  e to the final c
+00014c10: 6f6f 7264 696e 6174 6573 0a20 2020 2020  oordinates.     
+00014c20: 2020 2029 0a0a 2020 2020 2020 2020 6375     )..        cu
+00014c30: 7276 6573 203d 205b 5d0a 0a20 2020 2020  rves = []..     
+00014c40: 2020 2066 6f72 2063 7472 6c31 2c20 6374     for ctrl1, ct
+00014c50: 726c 322c 2065 6e64 2069 6e20 7365 6c66  rl2, end in self
+00014c60: 2e73 7562 6469 7664 655f 7377 6565 7028  .subdivde_sweep(
+00014c70: 6465 6c74 6174 6865 7461 293a 0a20 2020  deltatheta):.   
+00014c80: 2020 2020 2020 2020 2063 7572 7665 732e           curves.
+00014c90: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
+00014ca0: 2020 2020 2020 2020 4265 7a69 6572 4375          BezierCu
+00014cb0: 7276 6528 6374 726c 3120 4020 6669 6e61  rve(ctrl1 @ fina
+00014cc0: 6c5f 7466 2c20 6374 726c 3220 4020 6669  l_tf, ctrl2 @ fi
+00014cd0: 6e61 6c5f 7466 2c20 656e 6420 4020 6669  nal_tf, end @ fi
+00014ce0: 6e61 6c5f 7466 290a 2020 2020 2020 2020  nal_tf).        
+00014cf0: 2020 2020 290a 0a20 2020 2020 2020 2072      )..        r
+00014d00: 6574 7572 6e20 6375 7276 6573 0a0a 2020  eturn curves..  
+00014d10: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
+00014d20: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
+00014d30: 6572 2873 656c 662c 2067 7364 5f72 6567  er(self, gsd_reg
+00014d40: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+00014d50: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00014d60: 5f70 6f69 6e74 293a 0a20 2020 2020 2020  _point):.       
+00014d70: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
+00014d80: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
+00014d90: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
+00014da0: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
+00014db0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00014dc0: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
+00014dd0: 7265 6769 7374 7279 2028 4772 6170 6869  registry (Graphi
+00014de0: 6373 5374 6174 6544 6963 7452 6567 6973  csStateDictRegis
+00014df0: 7472 7929 3a20 7468 6520 6f77 6e65 7227  try): the owner'
+00014e00: 7320 6772 6170 6869 6373 2073 7461 7465  s graphics state
+00014e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014e20: 2064 6963 7469 6f6e 6172 7920 7265 6769   dictionary regi
+00014e30: 7374 7279 2e0a 2020 2020 2020 2020 2020  stry..          
+00014e40: 2020 7374 796c 6520 2847 7261 7068 6963    style (Graphic
+00014e50: 7353 7479 6c65 293a 2074 6865 2063 7572  sStyle): the cur
+00014e60: 7265 6e74 2072 6573 6f6c 7665 6420 6772  rent resolved gr
+00014e70: 6170 6869 6373 2073 7479 6c65 0a20 2020  aphics style.   
+00014e80: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
+00014e90: 656d 3a20 7468 6520 7072 6576 696f 7573  em: the previous
+00014ea0: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
+00014eb0: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+00014ec0: 616c 5f70 6f69 6e74 3a20 6c61 7374 2070  al_point: last p
+00014ed0: 6f73 6974 696f 6e20 7365 7420 6279 2061  osition set by a
+00014ee0: 2022 4d22 206f 7220 226d 2220 636f 6d6d   "M" or "m" comm
+00014ef0: 616e 640a 0a20 2020 2020 2020 2052 6574  and..        Ret
+00014f00: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+00014f10: 2020 6120 7475 706c 6520 6f66 2060 2873    a tuple of `(s
+00014f20: 7472 2c20 6e65 775f 6c61 7374 5f69 7465  tr, new_last_ite
+00014f30: 6d29 602c 2077 6865 7265 2060 6e65 775f  m)`, where `new_
+00014f40: 6c61 7374 5f69 7465 6d60 2069 7320 6120  last_item` is a 
+00014f50: 7265 736f 6c76 6564 0a20 2020 2020 2020  resolved.       
+00014f60: 2020 2020 2060 4265 7a69 6572 4375 7276       `BezierCurv
+00014f70: 6560 2e0a 2020 2020 2020 2020 2222 220a  e`..        """.
+00014f80: 2020 2020 2020 2020 6375 7276 6573 203d          curves =
+00014f90: 2073 656c 662e 5f61 7070 726f 7869 6d61   self._approxima
+00014fa0: 7465 5f61 7263 286c 6173 745f 6974 656d  te_arc(last_item
+00014fb0: 290a 0a20 2020 2020 2020 2069 6620 6e6f  )..        if no
+00014fc0: 7420 6375 7276 6573 3a0a 2020 2020 2020  t curves:.      
+00014fd0: 2020 2020 2020 7265 7475 726e 2022 222c        return "",
+00014fe0: 206c 6173 745f 6974 656d 0a0a 2020 2020   last_item..    
+00014ff0: 2020 2020 7265 7475 726e 2028 0a20 2020      return (.   
+00015000: 2020 2020 2020 2020 2022 2022 2e6a 6f69           " ".joi
+00015010: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00015020: 2020 2063 7572 7665 2e72 656e 6465 7228     curve.render(
+00015030: 6773 645f 7265 6769 7374 7279 2c20 7374  gsd_registry, st
+00015040: 796c 652c 2070 7265 762c 2069 6e69 7469  yle, prev, initi
+00015050: 616c 5f70 6f69 6e74 295b 305d 0a20 2020  al_point)[0].   
+00015060: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00015070: 2070 7265 762c 2063 7572 7665 2069 6e20   prev, curve in 
+00015080: 7a69 7028 5b6c 6173 745f 6974 656d 2c20  zip([last_item, 
+00015090: 2a63 7572 7665 735b 3a2d 315d 5d2c 2063  *curves[:-1]], c
+000150a0: 7572 7665 7329 0a20 2020 2020 2020 2020  urves).         
+000150b0: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
+000150c0: 2020 6375 7276 6573 5b2d 315d 2c0a 2020    curves[-1],.  
+000150d0: 2020 2020 2020 2020 2020 696e 6974 6961            initia
+000150e0: 6c5f 706f 696e 742c 0a20 2020 2020 2020  l_point,.       
+000150f0: 2029 0a0a 2020 2020 4066 6f72 6365 5f6e   )..    @force_n
+00015100: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
+00015110: 6620 7265 6e64 6572 5f64 6562 7567 280a  f render_debug(.
+00015120: 2020 2020 2020 2020 7365 6c66 2c20 6773          self, gs
+00015130: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
+00015140: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
+00015150: 6974 6961 6c5f 706f 696e 742c 2064 6562  itial_point, deb
+00015160: 7567 5f73 7472 6561 6d2c 2070 6678 0a20  ug_stream, pfx. 
+00015170: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
+00015180: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
+00015190: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
+000151a0: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
+000151b0: 7072 6573 656e 7461 7469 6f6e 2061 6e64  presentation and
+000151c0: 2070 726f 6475 6365 2064 6562 7567 0a20   produce debug. 
+000151d0: 2020 2020 2020 2069 6e66 6f72 6d61 7469         informati
+000151e0: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+000151f0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
+00015200: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
+00015210: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
+00015220: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
+00015230: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
+00015240: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00015250: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
+00015260: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+00015270: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
+00015280: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+00015290: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
+000152a0: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
+000152b0: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+000152c0: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
+000152d0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+000152e0: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+000152f0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
+00015300: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
+00015310: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
+00015320: 6f6d 6d61 6e64 0a20 2020 2020 2020 2020  ommand.         
+00015330: 2020 2064 6562 7567 5f73 7472 6561 6d20     debug_stream 
+00015340: 2869 6f2e 5465 7874 494f 293a 2074 6865  (io.TextIO): the
+00015350: 2073 7472 6561 6d20 746f 2077 6869 6368   stream to which
+00015360: 2074 6865 2064 6562 7567 206f 7574 7075   the debug outpu
+00015370: 7420 7368 6f75 6c64 2062 650a 2020 2020  t should be.    
+00015380: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+00015390: 7465 6e2e 2054 6869 7320 6973 206e 6f74  ten. This is not
+000153a0: 2067 7561 7261 6e74 6565 6420 746f 2062   guaranteed to b
+000153b0: 6520 7365 656b 6162 6c65 2028 652e 672e  e seekable (e.g.
+000153c0: 2069 7420 6d61 7920 6265 2073 7464 6f75   it may be stdou
+000153d0: 7420 6f72 0a20 2020 2020 2020 2020 2020  t or.           
+000153e0: 2020 2020 2073 7464 6572 7229 2e0a 2020       stderr)..  
+000153f0: 2020 2020 2020 2020 2020 7066 7820 2873            pfx (s
+00015400: 7472 293a 2074 6865 2063 7572 7265 6e74  tr): the current
+00015410: 2064 6562 7567 206f 7574 7075 7420 7072   debug output pr
+00015420: 6566 6978 2073 7472 696e 6720 286f 6e6c  efix string (onl
+00015430: 7920 6e65 6564 6564 2069 6620 656d 6974  y needed if emit
+00015440: 7469 6e67 0a20 2020 2020 2020 2020 2020  ting.           
+00015450: 2020 2020 206d 6f72 6520 7468 616e 206f       more than o
+00015460: 6e65 206c 696e 6529 2e0a 0a20 2020 2020  ne line)...     
+00015470: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00015480: 2020 2020 2020 2020 5468 6520 7361 6d65          The same
+00015490: 2074 7570 6c65 2061 7320 6041 7263 2e72   tuple as `Arc.r
+000154a0: 656e 6465 7260 2e0a 2020 2020 2020 2020  ender`..        
+000154b0: 2222 220a 2020 2020 2020 2020 6375 7276  """.        curv
+000154c0: 6573 203d 2073 656c 662e 5f61 7070 726f  es = self._appro
+000154d0: 7869 6d61 7465 5f61 7263 286c 6173 745f  ximate_arc(last_
+000154e0: 6974 656d 290a 0a20 2020 2020 2020 2064  item)..        d
+000154f0: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
+00015500: 6528 6622 7b73 656c 667d 2072 6573 6f6c  e(f"{self} resol
+00015510: 7665 6420 746f 3a5c 6e22 290a 2020 2020  ved to:\n").    
+00015520: 2020 2020 6966 206e 6f74 2063 7572 7665      if not curve
+00015530: 733a 0a20 2020 2020 2020 2020 2020 2064  s:.            d
+00015540: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
+00015550: 6528 7066 7820 2b20 2220 e294 94e2 9480  e(pfx + " ......
+00015560: 206e 6f74 6869 6e67 5c6e 2229 0a20 2020   nothing\n").   
+00015570: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00015580: 2222 2c20 6c61 7374 5f69 7465 6d0a 0a20  "", last_item.. 
+00015590: 2020 2020 2020 2070 7265 7669 6f75 7320         previous 
+000155a0: 3d20 5b6c 6173 745f 6974 656d 5d0a 2020  = [last_item].  
+000155b0: 2020 2020 2020 666f 7220 6375 7276 6520        for curve 
+000155c0: 696e 2063 7572 7665 735b 3a2d 315d 3a0a  in curves[:-1]:.
+000155d0: 2020 2020 2020 2020 2020 2020 7072 6576              prev
+000155e0: 696f 7573 2e61 7070 656e 6428 6375 7276  ious.append(curv
+000155f0: 6529 0a20 2020 2020 2020 2020 2020 2064  e).            d
+00015600: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
+00015610: 6528 7066 7820 2b20 6622 20e2 949c e294  e(pfx + f" .....
+00015620: 8020 7b63 7572 7665 7d5c 6e22 290a 2020  . {curve}\n").  
+00015630: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00015640: 616d 2e77 7269 7465 2870 6678 202b 2066  am.write(pfx + f
+00015650: 2220 e294 94e2 9480 207b 6375 7276 6573  " ...... {curves
+00015660: 5b2d 315d 7d5c 6e22 290a 0a20 2020 2020  [-1]}\n")..     
+00015670: 2020 2072 6574 7572 6e20 280a 2020 2020     return (.    
+00015680: 2020 2020 2020 2020 2220 222e 6a6f 696e          " ".join
+00015690: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000156a0: 2020 6375 7276 652e 7265 6e64 6572 2867    curve.render(g
+000156b0: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
+000156c0: 6c65 2c20 7072 6576 2c20 696e 6974 6961  le, prev, initia
+000156d0: 6c5f 706f 696e 7429 5b30 5d0a 2020 2020  l_point)[0].    
+000156e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000156f0: 7072 6576 2c20 6375 7276 6520 696e 207a  prev, curve in z
+00015700: 6970 2870 7265 7669 6f75 732c 2063 7572  ip(previous, cur
+00015710: 7665 7329 0a20 2020 2020 2020 2020 2020  ves).           
+00015720: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00015730: 6375 7276 6573 5b2d 315d 2c0a 2020 2020  curves[-1],.    
+00015740: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
+00015750: 706f 696e 742c 0a20 2020 2020 2020 2029  point,.        )
+00015760: 0a0a 0a63 6c61 7373 2052 656c 6174 6976  ...class Relativ
+00015770: 6541 7263 284e 616d 6564 5475 706c 6529  eArc(NamedTuple)
+00015780: 3a0a 2020 2020 2222 220a 2020 2020 416e  :.    """.    An
+00015790: 2065 6c6c 6970 7469 6361 6c20 6172 6320   elliptical arc 
+000157a0: 7061 7468 2065 6c65 6d65 6e74 2e0a 0a20  path element... 
+000157b0: 2020 2054 6865 2061 7263 2069 7320 6472     The arc is dr
+000157c0: 6177 6e20 6672 6f6d 2074 6865 2065 6e64  awn from the end
+000157d0: 206f 6620 7468 6520 6375 7272 656e 7420   of the current 
+000157e0: 7061 7468 2065 6c65 6d65 6e74 2074 6f20  path element to 
+000157f0: 6974 7320 7370 6563 6966 6965 6420 656e  its specified en
+00015800: 6420 706f 696e 740a 2020 2020 7573 696e  d point.    usin
+00015810: 6720 6120 6e75 6d62 6572 206f 6620 7061  g a number of pa
+00015820: 7261 6d65 7465 7273 2074 6f20 6465 7465  rameters to dete
+00015830: 726d 696e 6520 686f 7720 6974 2069 7320  rmine how it is 
+00015840: 636f 6e73 7472 7563 7465 642e 0a0a 2020  constructed...  
+00015850: 2020 5365 653a 2060 5061 696e 7465 6450    See: `PaintedP
+00015860: 6174 682e 6172 635f 7265 6c61 7469 7665  ath.arc_relative
+00015870: 600a 2020 2020 2222 220a 0a20 2020 2072  `.    """..    r
+00015880: 6164 6969 3a20 506f 696e 740a 2020 2020  adii: Point.    
+00015890: 2222 220a 2020 2020 5468 6520 782d 2061  """.    The x- a
+000158a0: 6e64 2079 2d72 6164 6969 206f 6620 7468  nd y-radii of th
+000158b0: 6520 6172 632e 2049 6620 6072 6164 6969  e arc. If `radii
+000158c0: 2e78 203d 3d20 7261 6469 692e 7960 2074  .x == radii.y` t
+000158d0: 6865 2061 7263 2077 696c 6c20 6265 2063  he arc will be c
+000158e0: 6972 6375 6c61 722e 0a20 2020 2022 2222  ircular..    """
+000158f0: 0a20 2020 2072 6f74 6174 696f 6e3a 204e  .    rotation: N
+00015900: 756d 6265 720a 2020 2020 2222 2254 6865  umber.    """The
+00015910: 2072 6f74 6174 696f 6e20 6f66 2074 6865   rotation of the
+00015920: 2061 7263 2773 206d 616a 6f72 2f6d 696e   arc's major/min
+00015930: 6f72 2061 7865 7320 7265 6c61 7469 7665  or axes relative
+00015940: 2074 6f20 7468 6520 636f 6f72 6469 6e61   to the coordina
+00015950: 7465 2066 7261 6d65 2e22 2222 0a20 2020  te frame.""".   
+00015960: 206c 6172 6765 3a20 626f 6f6c 0a20 2020   large: bool.   
+00015970: 2022 2222 4966 2054 7275 652c 2073 7765   """If True, swe
+00015980: 6570 2074 6865 2061 7263 206f 7665 7220  ep the arc over 
+00015990: 616e 2061 6e67 6c65 2067 7265 6174 6572  an angle greater
+000159a0: 2074 6861 6e20 6f72 2065 7175 616c 2074   than or equal t
+000159b0: 6f20 3138 3020 6465 6772 6565 732e 2222  o 180 degrees.""
+000159c0: 220a 2020 2020 7377 6565 703a 2062 6f6f  ".    sweep: boo
+000159d0: 6c0a 2020 2020 2222 2249 6620 5472 7565  l.    """If True
+000159e0: 2c20 7468 6520 6172 6320 6973 2073 7765  , the arc is swe
+000159f0: 7074 2069 6e20 7468 6520 706f 7369 7469  pt in the positi
+00015a00: 7665 2061 6e67 756c 6172 2064 6972 6563  ve angular direc
+00015a10: 7469 6f6e 2e22 2222 0a20 2020 2065 6e64  tion.""".    end
+00015a20: 3a20 506f 696e 740a 2020 2020 2222 2254  : Point.    """T
+00015a30: 6865 2065 6e64 2070 6f69 6e74 206f 6620  he end point of 
+00015a40: 7468 6520 6172 6320 7265 6c61 7469 7665  the arc relative
+00015a50: 2074 6f20 7468 6520 656e 6420 6f66 2074   to the end of t
+00015a60: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+00015a70: 2065 6c65 6d65 6e74 2e22 2222 0a0a 2020   element."""..  
+00015a80: 2020 4066 6f72 6365 5f6e 6f64 6f63 756d    @force_nodocum
+00015a90: 656e 740a 2020 2020 6465 6620 7265 6e64  ent.    def rend
+00015aa0: 6572 2873 656c 662c 2067 7364 5f72 6567  er(self, gsd_reg
+00015ab0: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+00015ac0: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00015ad0: 5f70 6f69 6e74 293a 0a20 2020 2020 2020  _point):.       
+00015ae0: 2022 2222 0a20 2020 2020 2020 2052 656e   """.        Ren
+00015af0: 6465 7220 7468 6973 2070 6174 6820 656c  der this path el
+00015b00: 656d 656e 7420 746f 2069 7473 2050 4446  ement to its PDF
+00015b10: 2072 6570 7265 7365 6e74 6174 696f 6e2e   representation.
+00015b20: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00015b30: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
+00015b40: 7265 6769 7374 7279 2028 4772 6170 6869  registry (Graphi
+00015b50: 6373 5374 6174 6544 6963 7452 6567 6973  csStateDictRegis
+00015b60: 7472 7929 3a20 7468 6520 6f77 6e65 7227  try): the owner'
+00015b70: 7320 6772 6170 6869 6373 2073 7461 7465  s graphics state
+00015b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015b90: 2064 6963 7469 6f6e 6172 7920 7265 6769   dictionary regi
+00015ba0: 7374 7279 2e0a 2020 2020 2020 2020 2020  stry..          
+00015bb0: 2020 7374 796c 6520 2847 7261 7068 6963    style (Graphic
+00015bc0: 7353 7479 6c65 293a 2074 6865 2063 7572  sStyle): the cur
+00015bd0: 7265 6e74 2072 6573 6f6c 7665 6420 6772  rent resolved gr
+00015be0: 6170 6869 6373 2073 7479 6c65 0a20 2020  aphics style.   
+00015bf0: 2020 2020 2020 2020 206c 6173 745f 6974           last_it
+00015c00: 656d 3a20 7468 6520 7072 6576 696f 7573  em: the previous
+00015c10: 2070 6174 6820 656c 656d 656e 742e 0a20   path element.. 
+00015c20: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+00015c30: 616c 5f70 6f69 6e74 3a20 6c61 7374 2070  al_point: last p
+00015c40: 6f73 6974 696f 6e20 7365 7420 6279 2061  osition set by a
+00015c50: 2022 4d22 206f 7220 226d 2220 636f 6d6d   "M" or "m" comm
+00015c60: 616e 640a 0a20 2020 2020 2020 2052 6574  and..        Ret
+00015c70: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+00015c80: 2020 6120 7475 706c 6520 6f66 2060 2873    a tuple of `(s
+00015c90: 7472 2c20 6e65 775f 6c61 7374 5f69 7465  tr, new_last_ite
+00015ca0: 6d29 602c 2077 6865 7265 2060 6e65 775f  m)`, where `new_
+00015cb0: 6c61 7374 5f69 7465 6d60 2069 7320 6120  last_item` is a 
+00015cc0: 7265 736f 6c76 6564 0a20 2020 2020 2020  resolved.       
+00015cd0: 2020 2020 2060 4265 7a69 6572 4375 7276       `BezierCurv
+00015ce0: 6560 2e0a 2020 2020 2020 2020 2222 220a  e`..        """.
+00015cf0: 2020 2020 2020 2020 7265 7475 726e 2041          return A
+00015d00: 7263 280a 2020 2020 2020 2020 2020 2020  rc(.            
+00015d10: 7365 6c66 2e72 6164 6969 2c0a 2020 2020  self.radii,.    
+00015d20: 2020 2020 2020 2020 7365 6c66 2e72 6f74          self.rot
+00015d30: 6174 696f 6e2c 0a20 2020 2020 2020 2020  ation,.         
+00015d40: 2020 2073 656c 662e 6c61 7267 652c 0a20     self.large,. 
+00015d50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00015d60: 7377 6565 702c 0a20 2020 2020 2020 2020  sweep,.         
+00015d70: 2020 206c 6173 745f 6974 656d 2e65 6e64     last_item.end
+00015d80: 5f70 6f69 6e74 202b 2073 656c 662e 656e  _point + self.en
+00015d90: 642c 0a20 2020 2020 2020 2029 2e72 656e  d,.        ).ren
+00015da0: 6465 7228 6773 645f 7265 6769 7374 7279  der(gsd_registry
+00015db0: 2c20 7374 796c 652c 206c 6173 745f 6974  , style, last_it
+00015dc0: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+00015dd0: 7429 0a0a 2020 2020 4066 6f72 6365 5f6e  t)..    @force_n
+00015de0: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
+00015df0: 6620 7265 6e64 6572 5f64 6562 7567 280a  f render_debug(.
+00015e00: 2020 2020 2020 2020 7365 6c66 2c20 6773          self, gs
+00015e10: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
+00015e20: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
+00015e30: 6974 6961 6c5f 706f 696e 742c 2064 6562  itial_point, deb
+00015e40: 7567 5f73 7472 6561 6d2c 2070 6678 0a20  ug_stream, pfx. 
+00015e50: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
+00015e60: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
+00015e70: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
+00015e80: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
+00015e90: 7072 6573 656e 7461 7469 6f6e 2061 6e64  presentation and
+00015ea0: 2070 726f 6475 6365 2064 6562 7567 0a20   produce debug. 
+00015eb0: 2020 2020 2020 2069 6e66 6f72 6d61 7469         informati
+00015ec0: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+00015ed0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
+00015ee0: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
+00015ef0: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
+00015f00: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
+00015f10: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
+00015f20: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00015f30: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
+00015f40: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+00015f50: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
+00015f60: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+00015f70: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
+00015f80: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
+00015f90: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+00015fa0: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
+00015fb0: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+00015fc0: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00015fd0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
+00015fe0: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
+00015ff0: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
+00016000: 6f6d 6d61 6e64 0a20 2020 2020 2020 2020  ommand.         
+00016010: 2020 2064 6562 7567 5f73 7472 6561 6d20     debug_stream 
+00016020: 2869 6f2e 5465 7874 494f 293a 2074 6865  (io.TextIO): the
+00016030: 2073 7472 6561 6d20 746f 2077 6869 6368   stream to which
+00016040: 2074 6865 2064 6562 7567 206f 7574 7075   the debug outpu
+00016050: 7420 7368 6f75 6c64 2062 650a 2020 2020  t should be.    
+00016060: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+00016070: 7465 6e2e 2054 6869 7320 6973 206e 6f74  ten. This is not
+00016080: 2067 7561 7261 6e74 6565 6420 746f 2062   guaranteed to b
+00016090: 6520 7365 656b 6162 6c65 2028 652e 672e  e seekable (e.g.
+000160a0: 2069 7420 6d61 7920 6265 2073 7464 6f75   it may be stdou
+000160b0: 7420 6f72 0a20 2020 2020 2020 2020 2020  t or.           
+000160c0: 2020 2020 2073 7464 6572 7229 2e0a 2020       stderr)..  
+000160d0: 2020 2020 2020 2020 2020 7066 7820 2873            pfx (s
+000160e0: 7472 293a 2074 6865 2063 7572 7265 6e74  tr): the current
+000160f0: 2064 6562 7567 206f 7574 7075 7420 7072   debug output pr
+00016100: 6566 6978 2073 7472 696e 6720 286f 6e6c  efix string (onl
+00016110: 7920 6e65 6564 6564 2069 6620 656d 6974  y needed if emit
+00016120: 7469 6e67 0a20 2020 2020 2020 2020 2020  ting.           
+00016130: 2020 2020 206d 6f72 6520 7468 616e 206f       more than o
+00016140: 6e65 206c 696e 6529 2e0a 0a20 2020 2020  ne line)...     
+00016150: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00016160: 2020 2020 2020 2020 5468 6520 7361 6d65          The same
+00016170: 2074 7570 6c65 2061 7320 6052 656c 6174   tuple as `Relat
+00016180: 6976 6541 7263 2e72 656e 6465 7260 2e0a  iveArc.render`..
+00016190: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000161a0: 2020 2020 2320 6e65 776c 696e 6520 6973      # newline is
+000161b0: 2069 6e74 656e 7469 6f6e 616c 6c79 206d   intentionally m
+000161c0: 6973 7369 6e67 2068 6572 650a 2020 2020  issing here.    
+000161d0: 2020 2020 6465 6275 675f 7374 7265 616d      debug_stream
+000161e0: 2e77 7269 7465 2866 227b 7365 6c66 7d20  .write(f"{self} 
+000161f0: 7265 736f 6c76 6564 2074 6f20 2229 0a0a  resolved to ")..
+00016200: 2020 2020 2020 2020 7265 7475 726e 2041          return A
+00016210: 7263 280a 2020 2020 2020 2020 2020 2020  rc(.            
+00016220: 7365 6c66 2e72 6164 6969 2c0a 2020 2020  self.radii,.    
+00016230: 2020 2020 2020 2020 7365 6c66 2e72 6f74          self.rot
+00016240: 6174 696f 6e2c 0a20 2020 2020 2020 2020  ation,.         
+00016250: 2020 2073 656c 662e 6c61 7267 652c 0a20     self.large,. 
+00016260: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00016270: 7377 6565 702c 0a20 2020 2020 2020 2020  sweep,.         
+00016280: 2020 206c 6173 745f 6974 656d 2e65 6e64     last_item.end
+00016290: 5f70 6f69 6e74 202b 2073 656c 662e 656e  _point + self.en
+000162a0: 642c 0a20 2020 2020 2020 2029 2e72 656e  d,.        ).ren
+000162b0: 6465 725f 6465 6275 6728 6773 645f 7265  der_debug(gsd_re
+000162c0: 6769 7374 7279 2c20 7374 796c 652c 206c  gistry, style, l
+000162d0: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
+000162e0: 6c5f 706f 696e 742c 2064 6562 7567 5f73  l_point, debug_s
+000162f0: 7472 6561 6d2c 2070 6678 290a 0a0a 636c  tream, pfx)...cl
+00016300: 6173 7320 5265 6374 616e 676c 6528 4e61  ass Rectangle(Na
+00016310: 6d65 6454 7570 6c65 293a 0a20 2020 2022  medTuple):.    "
+00016320: 2222 4120 7064 6620 7072 696d 6974 6976  ""A pdf primitiv
+00016330: 6520 7265 6374 616e 676c 652e 2222 220a  e rectangle.""".
+00016340: 0a20 2020 206f 7267 3a20 506f 696e 740a  .    org: Point.
+00016350: 2020 2020 2222 2254 6865 2074 6f70 2d6c      """The top-l
+00016360: 6566 7420 636f 726e 6572 206f 6620 7468  eft corner of th
+00016370: 6520 7265 6374 616e 676c 652e 2222 220a  e rectangle.""".
+00016380: 2020 2020 7369 7a65 3a20 506f 696e 740a      size: Point.
+00016390: 2020 2020 2222 2254 6865 2077 6964 7468      """The width
+000163a0: 2061 6e64 2068 6569 6768 7420 6f66 2074   and height of t
+000163b0: 6865 2072 6563 7461 6e67 6c65 2e22 2222  he rectangle."""
+000163c0: 0a0a 2020 2020 4066 6f72 6365 5f6e 6f64  ..    @force_nod
+000163d0: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+000163e0: 7265 6e64 6572 2873 656c 662c 2067 7364  render(self, gsd
+000163f0: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
+00016400: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
+00016410: 7469 616c 5f70 6f69 6e74 293a 0a20 2020  tial_point):.   
+00016420: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00016430: 2052 656e 6465 7220 7468 6973 2070 6174   Render this pat
+00016440: 6820 656c 656d 656e 7420 746f 2069 7473  h element to its
+00016450: 2050 4446 2072 6570 7265 7365 6e74 6174   PDF representat
+00016460: 696f 6e2e 0a0a 2020 2020 2020 2020 4172  ion...        Ar
+00016470: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00016480: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
+00016490: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
+000164a0: 6567 6973 7472 7929 3a20 7468 6520 6f77  egistry): the ow
+000164b0: 6e65 7227 7320 6772 6170 6869 6373 2073  ner's graphics s
+000164c0: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
+000164d0: 2020 2020 2064 6963 7469 6f6e 6172 7920       dictionary 
+000164e0: 7265 6769 7374 7279 2e0a 2020 2020 2020  registry..      
+000164f0: 2020 2020 2020 7374 796c 6520 2847 7261        style (Gra
+00016500: 7068 6963 7353 7479 6c65 293a 2074 6865  phicsStyle): the
+00016510: 2063 7572 7265 6e74 2072 6573 6f6c 7665   current resolve
+00016520: 6420 6772 6170 6869 6373 2073 7479 6c65  d graphics style
+00016530: 0a20 2020 2020 2020 2020 2020 206c 6173  .            las
+00016540: 745f 6974 656d 3a20 7468 6520 7072 6576  t_item: the prev
+00016550: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
+00016560: 742e 0a20 2020 2020 2020 2020 2020 2069  t..            i
+00016570: 6e69 7469 616c 5f70 6f69 6e74 3a20 6c61  nitial_point: la
+00016580: 7374 2070 6f73 6974 696f 6e20 7365 7420  st position set 
+00016590: 6279 2061 2022 4d22 206f 7220 226d 2220  by a "M" or "m" 
+000165a0: 636f 6d6d 616e 640a 0a20 2020 2020 2020  command..       
+000165b0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+000165c0: 2020 2020 2020 6120 7475 706c 6520 6f66        a tuple of
+000165d0: 2060 2873 7472 2c20 6e65 775f 6c61 7374   `(str, new_last
+000165e0: 5f69 7465 6d29 602c 2077 6865 7265 2060  _item)`, where `
+000165f0: 6e65 775f 6c61 7374 5f69 7465 6d60 2069  new_last_item` i
+00016600: 7320 6120 604c 696e 6560 2062 6163 6b20  s a `Line` back 
+00016610: 746f 0a20 2020 2020 2020 2020 2020 2074  to.            t
+00016620: 6865 2072 6563 7461 6e67 6c65 2773 206f  he rectangle's o
+00016630: 7269 6769 6e2e 0a20 2020 2020 2020 2022  rigin..        "
+00016640: 2222 0a20 2020 2020 2020 2023 2070 796c  "".        # pyl
+00016650: 696e 743a 2064 6973 6162 6c65 3d75 6e75  int: disable=unu
+00016660: 7365 642d 6172 6775 6d65 6e74 0a0a 2020  sed-argument..  
+00016670: 2020 2020 2020 7265 7475 726e 2028 0a20        return (. 
+00016680: 2020 2020 2020 2020 2020 2066 227b 7365             f"{se
+00016690: 6c66 2e6f 7267 2e72 656e 6465 7228 297d  lf.org.render()}
+000166a0: 207b 7365 6c66 2e73 697a 652e 7265 6e64   {self.size.rend
+000166b0: 6572 2829 7d20 7265 222c 0a20 2020 2020  er()} re",.     
+000166c0: 2020 2020 2020 204c 696e 6528 7365 6c66         Line(self
+000166d0: 2e6f 7267 292c 0a20 2020 2020 2020 2020  .org),.         
+000166e0: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
+000166f0: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00016700: 2040 666f 7263 655f 6e6f 646f 6375 6d65   @force_nodocume
+00016710: 6e74 0a20 2020 2064 6566 2072 656e 6465  nt.    def rende
+00016720: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
+00016730: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
+00016740: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00016750: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00016760: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
+00016770: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
+00016780: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00016790: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
+000167a0: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
+000167b0: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
+000167c0: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
+000167d0: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
+000167e0: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
+000167f0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00016800: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+00016810: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
+00016820: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
+00016830: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
+00016840: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
+00016850: 2020 2020 2020 2020 2020 2020 2064 6963               dic
+00016860: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
+00016870: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+00016880: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
+00016890: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
+000168a0: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
+000168b0: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
+000168c0: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
+000168d0: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+000168e0: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
+000168f0: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
+00016900: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
+00016910: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
+00016920: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
+00016930: 2020 2020 2020 2020 2020 2020 6465 6275              debu
+00016940: 675f 7374 7265 616d 2028 696f 2e54 6578  g_stream (io.Tex
+00016950: 7449 4f29 3a20 7468 6520 7374 7265 616d  tIO): the stream
+00016960: 2074 6f20 7768 6963 6820 7468 6520 6465   to which the de
+00016970: 6275 6720 6f75 7470 7574 2073 686f 756c  bug output shoul
+00016980: 6420 6265 0a20 2020 2020 2020 2020 2020  d be.           
+00016990: 2020 2020 2077 7269 7474 656e 2e20 5468       written. Th
+000169a0: 6973 2069 7320 6e6f 7420 6775 6172 616e  is is not guaran
+000169b0: 7465 6564 2074 6f20 6265 2073 6565 6b61  teed to be seeka
+000169c0: 626c 6520 2865 2e67 2e20 6974 206d 6179  ble (e.g. it may
+000169d0: 2062 6520 7374 646f 7574 206f 720a 2020   be stdout or.  
+000169e0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+000169f0: 6465 7272 292e 0a20 2020 2020 2020 2020  derr)..         
+00016a00: 2020 2070 6678 2028 7374 7229 3a20 7468     pfx (str): th
+00016a10: 6520 6375 7272 656e 7420 6465 6275 6720  e current debug 
+00016a20: 6f75 7470 7574 2070 7265 6669 7820 7374  output prefix st
+00016a30: 7269 6e67 2028 6f6e 6c79 206e 6565 6465  ring (only neede
+00016a40: 6420 6966 2065 6d69 7474 696e 670a 2020  d if emitting.  
+00016a50: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
+00016a60: 7265 2074 6861 6e20 6f6e 6520 6c69 6e65  re than one line
+00016a70: 292e 0a0a 2020 2020 2020 2020 5265 7475  )...        Retu
+00016a80: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00016a90: 2054 6865 2073 616d 6520 7475 706c 6520   The same tuple 
+00016aa0: 6173 2060 5265 6374 616e 676c 652e 7265  as `Rectangle.re
+00016ab0: 6e64 6572 602e 0a20 2020 2020 2020 2022  nder`..        "
+00016ac0: 2222 0a20 2020 2020 2020 2023 2070 796c  "".        # pyl
+00016ad0: 696e 743a 2064 6973 6162 6c65 3d75 6e75  int: disable=unu
+00016ae0: 7365 642d 6172 6775 6d65 6e74 0a20 2020  sed-argument.   
+00016af0: 2020 2020 2072 656e 6465 7265 642c 2072       rendered, r
+00016b00: 6573 6f6c 7665 642c 2069 6e69 7469 616c  esolved, initial
+00016b10: 5f70 6f69 6e74 203d 2073 656c 662e 7265  _point = self.re
+00016b20: 6e64 6572 280a 2020 2020 2020 2020 2020  nder(.          
+00016b30: 2020 6773 645f 7265 6769 7374 7279 2c20    gsd_registry, 
+00016b40: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+00016b50: 2c20 696e 6974 6961 6c5f 706f 696e 740a  , initial_point.
+00016b60: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00016b70: 2020 6465 6275 675f 7374 7265 616d 2e77    debug_stream.w
+00016b80: 7269 7465 2866 227b 7365 6c66 7d20 7265  rite(f"{self} re
+00016b90: 736f 6c76 6564 2074 6f20 7b72 656e 6465  solved to {rende
+00016ba0: 7265 647d 5c6e 2229 0a0a 2020 2020 2020  red}\n")..      
+00016bb0: 2020 7265 7475 726e 2072 656e 6465 7265    return rendere
+00016bc0: 642c 2072 6573 6f6c 7665 642c 2069 6e69  d, resolved, ini
+00016bd0: 7469 616c 5f70 6f69 6e74 0a0a 0a63 6c61  tial_point...cla
+00016be0: 7373 2052 6f75 6e64 6564 5265 6374 616e  ss RoundedRectan
+00016bf0: 676c 6528 4e61 6d65 6454 7570 6c65 293a  gle(NamedTuple):
+00016c00: 0a20 2020 2022 2222 0a20 2020 2041 2072  .    """.    A r
+00016c10: 6563 7461 6e67 6c65 2077 6974 6820 726f  ectangle with ro
+00016c20: 756e 6465 6420 636f 726e 6572 732e 0a0a  unded corners...
+00016c30: 2020 2020 5365 653a 2060 5061 696e 7465      See: `Painte
+00016c40: 6450 6174 682e 7265 6374 616e 676c 6560  dPath.rectangle`
+00016c50: 0a20 2020 2022 2222 0a0a 2020 2020 6f72  .    """..    or
+00016c60: 673a 2050 6f69 6e74 0a20 2020 2022 2222  g: Point.    """
+00016c70: 5468 6520 746f 702d 6c65 6674 2063 6f72  The top-left cor
+00016c80: 6e65 7220 6f66 2074 6865 2072 6563 7461  ner of the recta
+00016c90: 6e67 6c65 2e22 2222 0a20 2020 2073 697a  ngle.""".    siz
+00016ca0: 653a 2050 6f69 6e74 0a20 2020 2022 2222  e: Point.    """
+00016cb0: 5468 6520 7769 6474 6820 616e 6420 6865  The width and he
+00016cc0: 6967 6874 206f 6620 7468 6520 7265 6374  ight of the rect
+00016cd0: 616e 676c 652e 2222 220a 2020 2020 636f  angle.""".    co
+00016ce0: 726e 6572 5f72 6164 6969 3a20 506f 696e  rner_radii: Poin
+00016cf0: 740a 2020 2020 2222 2254 6865 2078 2d20  t.    """The x- 
+00016d00: 616e 6420 792d 7261 6469 7573 206f 6620  and y-radius of 
+00016d10: 7468 6520 636f 726e 6572 732e 2222 220a  the corners.""".
+00016d20: 0a20 2020 2064 6566 205f 6465 636f 6d70  .    def _decomp
+00016d30: 6f73 6528 7365 6c66 293a 0a20 2020 2020  ose(self):.     
+00016d40: 2020 2069 7465 6d73 203d 205b 5d0a 0a20     items = [].. 
+00016d50: 2020 2020 2020 2069 6620 2873 656c 662e         if (self.
+00016d60: 7369 7a65 2e78 203d 3d20 3029 2061 6e64  size.x == 0) and
+00016d70: 2028 7365 6c66 2e73 697a 652e 7920 3d3d   (self.size.y ==
+00016d80: 2030 293a 0a20 2020 2020 2020 2020 2020   0):.           
+00016d90: 2070 6173 730a 2020 2020 2020 2020 656c   pass.        el
+00016da0: 6966 2028 7365 6c66 2e73 697a 652e 7820  if (self.size.x 
+00016db0: 3d3d 2030 2920 6f72 2028 7365 6c66 2e73  == 0) or (self.s
+00016dc0: 697a 652e 7920 3d3d 2030 293a 0a20 2020  ize.y == 0):.   
+00016dd0: 2020 2020 2020 2020 2069 7465 6d73 2e61           items.a
+00016de0: 7070 656e 6428 4d6f 7665 2873 656c 662e  ppend(Move(self.
+00016df0: 6f72 6729 290a 2020 2020 2020 2020 2020  org)).          
+00016e00: 2020 6974 656d 732e 6170 7065 6e64 284c    items.append(L
+00016e10: 696e 6528 7365 6c66 2e6f 7267 202b 2073  ine(self.org + s
+00016e20: 656c 662e 7369 7a65 2929 0a20 2020 2020  elf.size)).     
+00016e30: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
+00016e40: 656e 6428 436c 6f73 6528 2929 0a20 2020  end(Close()).   
+00016e50: 2020 2020 2065 6c69 6620 2873 656c 662e       elif (self.
+00016e60: 636f 726e 6572 5f72 6164 6969 2e78 203d  corner_radii.x =
+00016e70: 3d20 3029 206f 7220 2873 656c 662e 636f  = 0) or (self.co
+00016e80: 726e 6572 5f72 6164 6969 2e79 203d 3d20  rner_radii.y == 
+00016e90: 3029 3a0a 2020 2020 2020 2020 2020 2020  0):.            
+00016ea0: 6974 656d 732e 6170 7065 6e64 2852 6563  items.append(Rec
+00016eb0: 7461 6e67 6c65 2873 656c 662e 6f72 672c  tangle(self.org,
+00016ec0: 2073 656c 662e 7369 7a65 2929 0a20 2020   self.size)).   
+00016ed0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00016ee0: 2020 2020 2020 2078 2c20 7920 3d20 7365         x, y = se
+00016ef0: 6c66 2e6f 7267 0a20 2020 2020 2020 2020  lf.org.         
+00016f00: 2020 2077 2c20 6820 3d20 7365 6c66 2e73     w, h = self.s
+00016f10: 697a 650a 2020 2020 2020 2020 2020 2020  ize.            
+00016f20: 7278 2c20 7279 203d 2073 656c 662e 636f  rx, ry = self.co
+00016f30: 726e 6572 5f72 6164 6969 0a20 2020 2020  rner_radii.     
+00016f40: 2020 2020 2020 2073 6967 6e5f 7769 6474         sign_widt
+00016f50: 6820 3d20 2873 656c 662e 7369 7a65 2e78  h = (self.size.x
+00016f60: 203e 3d20 3029 202d 2028 7365 6c66 2e73   >= 0) - (self.s
+00016f70: 697a 652e 7820 3c20 3029 0a20 2020 2020  ize.x < 0).     
+00016f80: 2020 2020 2020 2073 6967 6e5f 6865 6967         sign_heig
+00016f90: 6874 203d 2028 7365 6c66 2e73 697a 652e  ht = (self.size.
+00016fa0: 7920 3e3d 2030 2920 2d20 2873 656c 662e  y >= 0) - (self.
+00016fb0: 7369 7a65 2e79 203c 2030 290a 0a20 2020  size.y < 0)..   
+00016fc0: 2020 2020 2020 2020 2069 6620 6162 7328           if abs(
+00016fd0: 7278 2920 3e20 6162 7328 7729 3a0a 2020  rx) > abs(w):.  
+00016fe0: 2020 2020 2020 2020 2020 2020 2020 7278                rx
+00016ff0: 203d 2073 656c 662e 7369 7a65 2e78 0a0a   = self.size.x..
+00017000: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00017010: 6273 2872 7929 203e 2061 6273 2868 293a  bs(ry) > abs(h):
+00017020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017030: 2072 7920 3d20 7365 6c66 2e73 697a 652e   ry = self.size.
+00017040: 790a 0a20 2020 2020 2020 2020 2020 2072  y..            r
+00017050: 7820 3d20 7369 676e 5f77 6964 7468 202a  x = sign_width *
+00017060: 2061 6273 2872 7829 0a20 2020 2020 2020   abs(rx).       
+00017070: 2020 2020 2072 7920 3d20 7369 676e 5f68       ry = sign_h
+00017080: 6569 6768 7420 2a20 6162 7328 7279 290a  eight * abs(ry).
+00017090: 2020 2020 2020 2020 2020 2020 6172 635f              arc_
+000170a0: 7261 6420 3d20 506f 696e 7428 7278 2c20  rad = Point(rx, 
+000170b0: 7279 290a 0a20 2020 2020 2020 2020 2020  ry)..           
+000170c0: 2069 7465 6d73 2e61 7070 656e 6428 4d6f   items.append(Mo
+000170d0: 7665 2850 6f69 6e74 2878 202b 2072 782c  ve(Point(x + rx,
+000170e0: 2079 2929 290a 2020 2020 2020 2020 2020   y))).          
+000170f0: 2020 6974 656d 732e 6170 7065 6e64 284c    items.append(L
+00017100: 696e 6528 506f 696e 7428 7820 2b20 7720  ine(Point(x + w 
+00017110: 2d20 7278 2c20 7929 2929 0a20 2020 2020  - rx, y))).     
+00017120: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
+00017130: 656e 6428 4172 6328 6172 635f 7261 642c  end(Arc(arc_rad,
+00017140: 2030 2c20 4661 6c73 652c 2054 7275 652c   0, False, True,
+00017150: 2050 6f69 6e74 2878 202b 2077 2c20 7920   Point(x + w, y 
+00017160: 2b20 7279 2929 290a 2020 2020 2020 2020  + ry))).        
+00017170: 2020 2020 6974 656d 732e 6170 7065 6e64      items.append
+00017180: 284c 696e 6528 506f 696e 7428 7820 2b20  (Line(Point(x + 
+00017190: 772c 2079 202b 2068 202d 2072 7929 2929  w, y + h - ry)))
+000171a0: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
+000171b0: 6d73 2e61 7070 656e 6428 4172 6328 6172  ms.append(Arc(ar
+000171c0: 635f 7261 642c 2030 2c20 4661 6c73 652c  c_rad, 0, False,
+000171d0: 2054 7275 652c 2050 6f69 6e74 2878 202b   True, Point(x +
+000171e0: 2077 202d 2072 782c 2079 202b 2068 2929   w - rx, y + h))
+000171f0: 290a 2020 2020 2020 2020 2020 2020 6974  ).            it
+00017200: 656d 732e 6170 7065 6e64 284c 696e 6528  ems.append(Line(
+00017210: 506f 696e 7428 7820 2b20 7278 2c20 7920  Point(x + rx, y 
+00017220: 2b20 6829 2929 0a20 2020 2020 2020 2020  + h))).         
+00017230: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
+00017240: 4172 6328 6172 635f 7261 642c 2030 2c20  Arc(arc_rad, 0, 
+00017250: 4661 6c73 652c 2054 7275 652c 2050 6f69  False, True, Poi
+00017260: 6e74 2878 2c20 7920 2b20 6820 2d20 7279  nt(x, y + h - ry
+00017270: 2929 290a 2020 2020 2020 2020 2020 2020  ))).            
+00017280: 6974 656d 732e 6170 7065 6e64 284c 696e  items.append(Lin
+00017290: 6528 506f 696e 7428 782c 2079 202b 2072  e(Point(x, y + r
+000172a0: 7929 2929 0a20 2020 2020 2020 2020 2020  y))).           
+000172b0: 2069 7465 6d73 2e61 7070 656e 6428 4172   items.append(Ar
+000172c0: 6328 6172 635f 7261 642c 2030 2c20 4661  c(arc_rad, 0, Fa
+000172d0: 6c73 652c 2054 7275 652c 2050 6f69 6e74  lse, True, Point
+000172e0: 2878 202b 2072 782c 2079 2929 290a 2020  (x + rx, y))).  
+000172f0: 2020 2020 2020 2020 2020 6974 656d 732e            items.
+00017300: 6170 7065 6e64 2843 6c6f 7365 2829 290a  append(Close()).
+00017310: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00017320: 6974 656d 730a 0a20 2020 2040 666f 7263  items..    @forc
+00017330: 655f 6e6f 646f 6375 6d65 6e74 0a20 2020  e_nodocument.   
+00017340: 2064 6566 2072 656e 6465 7228 7365 6c66   def render(self
+00017350: 2c20 6773 645f 7265 6769 7374 7279 2c20  , gsd_registry, 
+00017360: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+00017370: 2c20 696e 6974 6961 6c5f 706f 696e 7429  , initial_point)
+00017380: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00017390: 2020 2020 2020 5265 6e64 6572 2074 6869        Render thi
+000173a0: 7320 7061 7468 2065 6c65 6d65 6e74 2074  s path element t
+000173b0: 6f20 6974 7320 5044 4620 7265 7072 6573  o its PDF repres
+000173c0: 656e 7461 7469 6f6e 2e0a 0a20 2020 2020  entation...     
+000173d0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+000173e0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
+000173f0: 7920 2847 7261 7068 6963 7353 7461 7465  y (GraphicsState
+00017400: 4469 6374 5265 6769 7374 7279 293a 2074  DictRegistry): t
+00017410: 6865 206f 776e 6572 2773 2067 7261 7068  he owner's graph
+00017420: 6963 7320 7374 6174 650a 2020 2020 2020  ics state.      
+00017430: 2020 2020 2020 2020 2020 6469 6374 696f            dictio
+00017440: 6e61 7279 2072 6567 6973 7472 792e 0a20  nary registry.. 
+00017450: 2020 2020 2020 2020 2020 2073 7479 6c65             style
+00017460: 2028 4772 6170 6869 6373 5374 796c 6529   (GraphicsStyle)
+00017470: 3a20 7468 6520 6375 7272 656e 7420 7265  : the current re
+00017480: 736f 6c76 6564 2067 7261 7068 6963 7320  solved graphics 
+00017490: 7374 796c 650a 2020 2020 2020 2020 2020  style.          
+000174a0: 2020 6c61 7374 5f69 7465 6d3a 2074 6865    last_item: the
+000174b0: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+000174c0: 6c65 6d65 6e74 2e0a 2020 2020 2020 2020  lement..        
+000174d0: 2020 2020 696e 6974 6961 6c5f 706f 696e      initial_poin
+000174e0: 743a 206c 6173 7420 706f 7369 7469 6f6e  t: last position
+000174f0: 2073 6574 2062 7920 6120 224d 2220 6f72   set by a "M" or
+00017500: 2022 6d22 2063 6f6d 6d61 6e64 0a0a 2020   "m" command..  
+00017510: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+00017520: 2020 2020 2020 2020 2020 2061 2074 7570             a tup
+00017530: 6c65 206f 6620 6028 7374 722c 206e 6577  le of `(str, new
+00017540: 5f6c 6173 745f 6974 656d 2960 2c20 7768  _last_item)`, wh
+00017550: 6572 6520 606e 6577 5f6c 6173 745f 6974  ere `new_last_it
+00017560: 656d 6020 6973 2061 2072 6573 6f6c 7665  em` is a resolve
+00017570: 640a 2020 2020 2020 2020 2020 2020 604c  d.            `L
+00017580: 696e 6560 2e0a 2020 2020 2020 2020 2222  ine`..        ""
+00017590: 220a 2020 2020 2020 2020 636f 6d70 6f6e  ".        compon
+000175a0: 656e 7473 203d 2073 656c 662e 5f64 6563  ents = self._dec
+000175b0: 6f6d 706f 7365 2829 0a0a 2020 2020 2020  ompose()..      
+000175c0: 2020 6966 206e 6f74 2063 6f6d 706f 6e65    if not compone
+000175d0: 6e74 733a 0a20 2020 2020 2020 2020 2020  nts:.           
+000175e0: 2072 6574 7572 6e20 2222 2c20 6c61 7374   return "", last
+000175f0: 5f69 7465 6d0a 0a20 2020 2020 2020 2072  _item..        r
+00017600: 656e 6465 725f 6c69 7374 203d 205b 5d0a  ender_list = [].
+00017610: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+00017620: 2069 6e20 636f 6d70 6f6e 656e 7473 3a0a   in components:.
+00017630: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
+00017640: 6572 6564 2c20 6c61 7374 5f69 7465 6d2c  ered, last_item,
+00017650: 2069 6e69 7469 616c 5f70 6f69 6e74 203d   initial_point =
+00017660: 2069 7465 6d2e 7265 6e64 6572 280a 2020   item.render(.  
+00017670: 2020 2020 2020 2020 2020 2020 2020 6773                gs
+00017680: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
+00017690: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
+000176a0: 6974 6961 6c5f 706f 696e 740a 2020 2020  itial_point.    
+000176b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000176c0: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+000176d0: 742e 6170 7065 6e64 2872 656e 6465 7265  t.append(rendere
+000176e0: 6429 0a0a 2020 2020 2020 2020 7265 7475  d)..        retu
+000176f0: 726e 2022 2022 2e6a 6f69 6e28 7265 6e64  rn " ".join(rend
+00017700: 6572 5f6c 6973 7429 2c20 4c69 6e65 2873  er_list), Line(s
+00017710: 656c 662e 6f72 6729 2c20 696e 6974 6961  elf.org), initia
+00017720: 6c5f 706f 696e 740a 0a20 2020 2040 666f  l_point..    @fo
+00017730: 7263 655f 6e6f 646f 6375 6d65 6e74 0a20  rce_nodocument. 
+00017740: 2020 2064 6566 2072 656e 6465 725f 6465     def render_de
+00017750: 6275 6728 0a20 2020 2020 2020 2073 656c  bug(.        sel
+00017760: 662c 2067 7364 5f72 6567 6973 7472 792c  f, gsd_registry,
+00017770: 2073 7479 6c65 2c20 6c61 7374 5f69 7465   style, last_ite
+00017780: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+00017790: 2c20 6465 6275 675f 7374 7265 616d 2c20  , debug_stream, 
+000177a0: 7066 780a 2020 2020 293a 0a20 2020 2020  pfx.    ):.     
+000177b0: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
+000177c0: 656e 6465 7220 7468 6973 2070 6174 6820  ender this path 
+000177d0: 656c 656d 656e 7420 746f 2069 7473 2050  element to its P
+000177e0: 4446 2072 6570 7265 7365 6e74 6174 696f  DF representatio
+000177f0: 6e20 616e 6420 7072 6f64 7563 6520 6465  n and produce de
+00017800: 6275 670a 2020 2020 2020 2020 696e 666f  bug.        info
+00017810: 726d 6174 696f 6e2e 0a0a 2020 2020 2020  rmation...      
+00017820: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+00017830: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+00017840: 2028 4772 6170 6869 6373 5374 6174 6544   (GraphicsStateD
+00017850: 6963 7452 6567 6973 7472 7929 3a20 7468  ictRegistry): th
+00017860: 6520 6f77 6e65 7227 7320 6772 6170 6869  e owner's graphi
+00017870: 6373 2073 7461 7465 0a20 2020 2020 2020  cs state.       
+00017880: 2020 2020 2020 2020 2064 6963 7469 6f6e           diction
+00017890: 6172 7920 7265 6769 7374 7279 2e0a 2020  ary registry..  
+000178a0: 2020 2020 2020 2020 2020 7374 796c 6520            style 
+000178b0: 2847 7261 7068 6963 7353 7479 6c65 293a  (GraphicsStyle):
+000178c0: 2074 6865 2063 7572 7265 6e74 2072 6573   the current res
+000178d0: 6f6c 7665 6420 6772 6170 6869 6373 2073  olved graphics s
+000178e0: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
+000178f0: 206c 6173 745f 6974 656d 3a20 7468 6520   last_item: the 
+00017900: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
+00017910: 656d 656e 742e 0a20 2020 2020 2020 2020  ement..         
+00017920: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
+00017930: 3a20 6c61 7374 2070 6f73 6974 696f 6e20  : last position 
+00017940: 7365 7420 6279 2061 2022 4d22 206f 7220  set by a "M" or 
+00017950: 226d 2220 636f 6d6d 616e 640a 2020 2020  "m" command.    
+00017960: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
+00017970: 7265 616d 2028 696f 2e54 6578 7449 4f29  ream (io.TextIO)
+00017980: 3a20 7468 6520 7374 7265 616d 2074 6f20  : the stream to 
+00017990: 7768 6963 6820 7468 6520 6465 6275 6720  which the debug 
+000179a0: 6f75 7470 7574 2073 686f 756c 6420 6265  output should be
+000179b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000179c0: 2077 7269 7474 656e 2e20 5468 6973 2069   written. This i
+000179d0: 7320 6e6f 7420 6775 6172 616e 7465 6564  s not guaranteed
+000179e0: 2074 6f20 6265 2073 6565 6b61 626c 6520   to be seekable 
+000179f0: 2865 2e67 2e20 6974 206d 6179 2062 6520  (e.g. it may be 
+00017a00: 7374 646f 7574 206f 720a 2020 2020 2020  stdout or.      
+00017a10: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
+00017a20: 292e 0a20 2020 2020 2020 2020 2020 2070  )..            p
+00017a30: 6678 2028 7374 7229 3a20 7468 6520 6375  fx (str): the cu
+00017a40: 7272 656e 7420 6465 6275 6720 6f75 7470  rrent debug outp
+00017a50: 7574 2070 7265 6669 7820 7374 7269 6e67  ut prefix string
+00017a60: 2028 6f6e 6c79 206e 6565 6465 6420 6966   (only needed if
+00017a70: 2065 6d69 7474 696e 670a 2020 2020 2020   emitting.      
+00017a80: 2020 2020 2020 2020 2020 6d6f 7265 2074            more t
+00017a90: 6861 6e20 6f6e 6520 6c69 6e65 292e 0a0a  han one line)...
+00017aa0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+00017ab0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+00017ac0: 2073 616d 6520 7475 706c 6520 6173 2060   same tuple as `
+00017ad0: 526f 756e 6465 6452 6563 7461 6e67 6c65  RoundedRectangle
+00017ae0: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
+00017af0: 2020 2222 220a 2020 2020 2020 2020 636f    """.        co
+00017b00: 6d70 6f6e 656e 7473 203d 2073 656c 662e  mponents = self.
+00017b10: 5f64 6563 6f6d 706f 7365 2829 0a0a 2020  _decompose()..  
+00017b20: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00017b30: 616d 2e77 7269 7465 2866 227b 7365 6c66  am.write(f"{self
+00017b40: 7d20 7265 736f 6c76 6564 2074 6f3a 5c6e  } resolved to:\n
+00017b50: 2229 0a20 2020 2020 2020 2069 6620 6e6f  ").        if no
+00017b60: 7420 636f 6d70 6f6e 656e 7473 3a0a 2020  t components:.  
+00017b70: 2020 2020 2020 2020 2020 6465 6275 675f            debug_
+00017b80: 7374 7265 616d 2e77 7269 7465 2870 6678  stream.write(pfx
+00017b90: 202b 2022 20e2 9494 e294 8020 6e6f 7468   + " ...... noth
+00017ba0: 696e 675c 6e22 290a 2020 2020 2020 2020  ing\n").        
+00017bb0: 2020 2020 7265 7475 726e 2022 222c 206c      return "", l
+00017bc0: 6173 745f 6974 656d 0a0a 2020 2020 2020  ast_item..      
+00017bd0: 2020 7265 6e64 6572 5f6c 6973 7420 3d20    render_list = 
+00017be0: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
+00017bf0: 7465 6d20 696e 2063 6f6d 706f 6e65 6e74  tem in component
+00017c00: 735b 3a2d 315d 3a0a 2020 2020 2020 2020  s[:-1]:.        
+00017c10: 2020 2020 7265 6e64 6572 6564 2c20 6c61      rendered, la
+00017c20: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00017c30: 5f70 6f69 6e74 203d 2069 7465 6d2e 7265  _point = item.re
+00017c40: 6e64 6572 280a 2020 2020 2020 2020 2020  nder(.          
+00017c50: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+00017c60: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+00017c70: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+00017c80: 696e 740a 2020 2020 2020 2020 2020 2020  int.            
+00017c90: 290a 2020 2020 2020 2020 2020 2020 6465  ).            de
+00017ca0: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
+00017cb0: 2870 6678 202b 2066 2220 e294 9ce2 9480  (pfx + f" ......
+00017cc0: 207b 6974 656d 7d5c 6e22 290a 2020 2020   {item}\n").    
+00017cd0: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
+00017ce0: 6973 742e 6170 7065 6e64 2872 656e 6465  ist.append(rende
+00017cf0: 7265 6429 0a0a 2020 2020 2020 2020 7265  red)..        re
+00017d00: 6e64 6572 6564 2c20 6c61 7374 5f69 7465  ndered, last_ite
+00017d10: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+00017d20: 203d 2063 6f6d 706f 6e65 6e74 735b 2d31   = components[-1
+00017d30: 5d2e 7265 6e64 6572 280a 2020 2020 2020  ].render(.      
+00017d40: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+00017d50: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+00017d60: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+00017d70: 696e 740a 2020 2020 2020 2020 290a 2020  int.        ).  
+00017d80: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00017d90: 616d 2e77 7269 7465 2870 6678 202b 2066  am.write(pfx + f
+00017da0: 2220 e294 94e2 9480 207b 636f 6d70 6f6e  " ...... {compon
+00017db0: 656e 7473 5b2d 315d 7d5c 6e22 290a 2020  ents[-1]}\n").  
+00017dc0: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+00017dd0: 742e 6170 7065 6e64 2872 656e 6465 7265  t.append(rendere
+00017de0: 6429 0a0a 2020 2020 2020 2020 7265 7475  d)..        retu
+00017df0: 726e 2022 2022 2e6a 6f69 6e28 7265 6e64  rn " ".join(rend
+00017e00: 6572 5f6c 6973 7429 2c20 4c69 6e65 2873  er_list), Line(s
+00017e10: 656c 662e 6f72 6729 2c20 696e 6974 6961  elf.org), initia
+00017e20: 6c5f 706f 696e 740a 0a0a 636c 6173 7320  l_point...class 
+00017e30: 456c 6c69 7073 6528 4e61 6d65 6454 7570  Ellipse(NamedTup
+00017e40: 6c65 293a 0a20 2020 2022 2222 0a20 2020  le):.    """.   
+00017e50: 2041 6e20 656c 6c69 7073 652e 0a0a 2020   An ellipse...  
+00017e60: 2020 5365 653a 2060 5061 696e 7465 6450    See: `PaintedP
+00017e70: 6174 682e 656c 6c69 7073 6560 0a20 2020  ath.ellipse`.   
+00017e80: 2022 2222 0a0a 2020 2020 7261 6469 693a   """..    radii:
+00017e90: 2050 6f69 6e74 0a20 2020 2022 2222 5468   Point.    """Th
+00017ea0: 6520 782d 2061 6e64 2079 2d72 6164 6969  e x- and y-radii
+00017eb0: 206f 6620 7468 6520 656c 6c69 7073 6522   of the ellipse"
+00017ec0: 2222 0a20 2020 2063 656e 7465 723a 2050  "".    center: P
+00017ed0: 6f69 6e74 0a20 2020 2022 2222 5468 6520  oint.    """The 
+00017ee0: 6162 7363 6973 7361 2061 6e64 206f 7264  abscissa and ord
+00017ef0: 696e 6174 6520 6f66 2074 6865 2063 656e  inate of the cen
+00017f00: 7465 7220 6f66 2074 6865 2065 6c6c 6970  ter of the ellip
+00017f10: 7365 2222 220a 0a20 2020 2064 6566 205f  se"""..    def _
+00017f20: 6465 636f 6d70 6f73 6528 7365 6c66 293a  decompose(self):
+00017f30: 0a20 2020 2020 2020 2069 7465 6d73 203d  .        items =
+00017f40: 205b 5d0a 0a20 2020 2020 2020 2072 7820   []..        rx 
+00017f50: 3d20 6162 7328 7365 6c66 2e72 6164 6969  = abs(self.radii
+00017f60: 2e78 290a 2020 2020 2020 2020 7279 203d  .x).        ry =
+00017f70: 2061 6273 2873 656c 662e 7261 6469 692e   abs(self.radii.
+00017f80: 7929 0a20 2020 2020 2020 2063 782c 2063  y).        cx, c
+00017f90: 7920 3d20 7365 6c66 2e63 656e 7465 720a  y = self.center.
+00017fa0: 0a20 2020 2020 2020 2061 7263 5f72 6164  .        arc_rad
+00017fb0: 203d 2050 6f69 6e74 2872 782c 2072 7929   = Point(rx, ry)
+00017fc0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
+00017fd0: 2069 736e 2774 2074 6865 206d 6f73 7420   isn't the most 
+00017fe0: 6566 6669 6369 656e 7420 7761 7920 746f  efficient way to
+00017ff0: 2064 6f20 7468 6973 2c20 636f 6d70 7574   do this, comput
+00018000: 6174 696f 6e61 6c6c 792c 2062 7574 2069  ationally, but i
+00018010: 7427 730a 2020 2020 2020 2020 2320 696e  t's.        # in
+00018020: 7465 726e 616c 6c79 2063 6f6e 7369 7374  ternally consist
+00018030: 656e 742e 0a20 2020 2020 2020 2069 6620  ent..        if 
+00018040: 2872 7820 213d 2030 2920 616e 6420 2872  (rx != 0) and (r
+00018050: 7920 213d 2030 293a 0a20 2020 2020 2020  y != 0):.       
+00018060: 2020 2020 2069 7465 6d73 2e61 7070 656e       items.appen
+00018070: 6428 4d6f 7665 2850 6f69 6e74 2863 7820  d(Move(Point(cx 
+00018080: 2b20 7278 2c20 6379 2929 290a 2020 2020  + rx, cy))).    
+00018090: 2020 2020 2020 2020 6974 656d 732e 6170          items.ap
+000180a0: 7065 6e64 2841 7263 2861 7263 5f72 6164  pend(Arc(arc_rad
+000180b0: 2c20 302c 2046 616c 7365 2c20 5472 7565  , 0, False, True
+000180c0: 2c20 506f 696e 7428 6378 2c20 6379 202b  , Point(cx, cy +
+000180d0: 2072 7929 2929 0a20 2020 2020 2020 2020   ry))).         
+000180e0: 2020 2069 7465 6d73 2e61 7070 656e 6428     items.append(
+000180f0: 4172 6328 6172 635f 7261 642c 2030 2c20  Arc(arc_rad, 0, 
+00018100: 4661 6c73 652c 2054 7275 652c 2050 6f69  False, True, Poi
+00018110: 6e74 2863 7820 2d20 7278 2c20 6379 2929  nt(cx - rx, cy))
+00018120: 290a 2020 2020 2020 2020 2020 2020 6974  ).            it
+00018130: 656d 732e 6170 7065 6e64 2841 7263 2861  ems.append(Arc(a
+00018140: 7263 5f72 6164 2c20 302c 2046 616c 7365  rc_rad, 0, False
+00018150: 2c20 5472 7565 2c20 506f 696e 7428 6378  , True, Point(cx
+00018160: 2c20 6379 202d 2072 7929 2929 0a20 2020  , cy - ry))).   
+00018170: 2020 2020 2020 2020 2069 7465 6d73 2e61           items.a
+00018180: 7070 656e 6428 4172 6328 6172 635f 7261  ppend(Arc(arc_ra
+00018190: 642c 2030 2c20 4661 6c73 652c 2054 7275  d, 0, False, Tru
+000181a0: 652c 2050 6f69 6e74 2863 7820 2b20 7278  e, Point(cx + rx
+000181b0: 2c20 6379 2929 290a 2020 2020 2020 2020  , cy))).        
+000181c0: 2020 2020 6974 656d 732e 6170 7065 6e64      items.append
+000181d0: 2843 6c6f 7365 2829 290a 0a20 2020 2020  (Close())..     
+000181e0: 2020 2072 6574 7572 6e20 6974 656d 730a     return items.
+000181f0: 0a20 2020 2040 666f 7263 655f 6e6f 646f  .    @force_nodo
+00018200: 6375 6d65 6e74 0a20 2020 2064 6566 2072  cument.    def r
+00018210: 656e 6465 7228 7365 6c66 2c20 6773 645f  ender(self, gsd_
+00018220: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+00018230: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+00018240: 6961 6c5f 706f 696e 7429 3a0a 2020 2020  ial_point):.    
+00018250: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00018260: 5265 6e64 6572 2074 6869 7320 7061 7468  Render this path
+00018270: 2065 6c65 6d65 6e74 2074 6f20 6974 7320   element to its 
+00018280: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
+00018290: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+000182a0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
+000182b0: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
+000182c0: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
+000182d0: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
+000182e0: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
+000182f0: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00018300: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
+00018310: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+00018320: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
+00018330: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+00018340: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
+00018350: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
+00018360: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+00018370: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
+00018380: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+00018390: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+000183a0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
+000183b0: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
+000183c0: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
+000183d0: 6f6d 6d61 6e64 0a0a 2020 2020 2020 2020  ommand..        
+000183e0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
+000183f0: 2020 2020 2061 2074 7570 6c65 206f 6620       a tuple of 
+00018400: 6028 7374 722c 206e 6577 5f6c 6173 745f  `(str, new_last_
+00018410: 6974 656d 2960 2c20 7768 6572 6520 606e  item)`, where `n
+00018420: 6577 5f6c 6173 745f 6974 656d 6020 6973  ew_last_item` is
+00018430: 2061 2072 6573 6f6c 7665 640a 2020 2020   a resolved.    
+00018440: 2020 2020 2020 2020 604d 6f76 6560 2074          `Move` t
+00018450: 6f20 7468 6520 6365 6e74 6572 206f 6620  o the center of 
+00018460: 7468 6520 656c 6c69 7073 652e 0a20 2020  the ellipse..   
+00018470: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00018480: 2063 6f6d 706f 6e65 6e74 7320 3d20 7365   components = se
+00018490: 6c66 2e5f 6465 636f 6d70 6f73 6528 290a  lf._decompose().
+000184a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+000184b0: 636f 6d70 6f6e 656e 7473 3a0a 2020 2020  components:.    
+000184c0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000184d0: 222c 206c 6173 745f 6974 656d 0a0a 2020  ", last_item..  
+000184e0: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+000184f0: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
+00018500: 6f72 2069 7465 6d20 696e 2063 6f6d 706f  or item in compo
+00018510: 6e65 6e74 733a 0a20 2020 2020 2020 2020  nents:.         
+00018520: 2020 2072 656e 6465 7265 642c 206c 6173     rendered, las
+00018530: 745f 6974 656d 2c20 696e 6974 6961 6c5f  t_item, initial_
+00018540: 706f 696e 7420 3d20 6974 656d 2e72 656e  point = item.ren
+00018550: 6465 7228 0a20 2020 2020 2020 2020 2020  der(.           
+00018560: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
+00018570: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
+00018580: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
+00018590: 6e74 0a20 2020 2020 2020 2020 2020 2029  nt.            )
+000185a0: 0a20 2020 2020 2020 2020 2020 2072 656e  .            ren
+000185b0: 6465 725f 6c69 7374 2e61 7070 656e 6428  der_list.append(
+000185c0: 7265 6e64 6572 6564 290a 0a20 2020 2020  rendered)..     
+000185d0: 2020 2072 6574 7572 6e20 2220 222e 6a6f     return " ".jo
+000185e0: 696e 2872 656e 6465 725f 6c69 7374 292c  in(render_list),
+000185f0: 204d 6f76 6528 7365 6c66 2e63 656e 7465   Move(self.cente
+00018600: 7229 2c20 696e 6974 6961 6c5f 706f 696e  r), initial_poin
+00018610: 740a 0a20 2020 2040 666f 7263 655f 6e6f  t..    @force_no
+00018620: 646f 6375 6d65 6e74 0a20 2020 2064 6566  document.    def
+00018630: 2072 656e 6465 725f 6465 6275 6728 0a20   render_debug(. 
+00018640: 2020 2020 2020 2073 656c 662c 2067 7364         self, gsd
+00018650: 5f72 6567 6973 7472 792c 2073 7479 6c65  _registry, style
+00018660: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
+00018670: 7469 616c 5f70 6f69 6e74 2c20 6465 6275  tial_point, debu
+00018680: 675f 7374 7265 616d 2c20 7066 780a 2020  g_stream, pfx.  
+00018690: 2020 293a 0a20 2020 2020 2020 2022 2222    ):.        """
+000186a0: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
+000186b0: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
+000186c0: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
+000186d0: 7265 7365 6e74 6174 696f 6e20 616e 6420  resentation and 
+000186e0: 7072 6f64 7563 6520 6465 6275 670a 2020  produce debug.  
+000186f0: 2020 2020 2020 696e 666f 726d 6174 696f        informatio
+00018700: 6e2e 0a0a 2020 2020 2020 2020 4172 6773  n...        Args
+00018710: 3a0a 2020 2020 2020 2020 2020 2020 6773  :.            gs
+00018720: 645f 7265 6769 7374 7279 2028 4772 6170  d_registry (Grap
+00018730: 6869 6373 5374 6174 6544 6963 7452 6567  hicsStateDictReg
+00018740: 6973 7472 7929 3a20 7468 6520 6f77 6e65  istry): the owne
+00018750: 7227 7320 6772 6170 6869 6373 2073 7461  r's graphics sta
+00018760: 7465 0a20 2020 2020 2020 2020 2020 2020  te.             
+00018770: 2020 2064 6963 7469 6f6e 6172 7920 7265     dictionary re
+00018780: 6769 7374 7279 2e0a 2020 2020 2020 2020  gistry..        
+00018790: 2020 2020 7374 796c 6520 2847 7261 7068      style (Graph
+000187a0: 6963 7353 7479 6c65 293a 2074 6865 2063  icsStyle): the c
+000187b0: 7572 7265 6e74 2072 6573 6f6c 7665 6420  urrent resolved 
+000187c0: 6772 6170 6869 6373 2073 7479 6c65 0a20  graphics style. 
+000187d0: 2020 2020 2020 2020 2020 206c 6173 745f             last_
+000187e0: 6974 656d 3a20 7468 6520 7072 6576 696f  item: the previo
+000187f0: 7573 2070 6174 6820 656c 656d 656e 742e  us path element.
+00018800: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
+00018810: 7469 616c 5f70 6f69 6e74 3a20 6c61 7374  tial_point: last
+00018820: 2070 6f73 6974 696f 6e20 7365 7420 6279   position set by
+00018830: 2061 2022 4d22 206f 7220 226d 2220 636f   a "M" or "m" co
+00018840: 6d6d 616e 640a 2020 2020 2020 2020 2020  mmand.          
+00018850: 2020 6465 6275 675f 7374 7265 616d 2028    debug_stream (
+00018860: 696f 2e54 6578 7449 4f29 3a20 7468 6520  io.TextIO): the 
+00018870: 7374 7265 616d 2074 6f20 7768 6963 6820  stream to which 
+00018880: 7468 6520 6465 6275 6720 6f75 7470 7574  the debug output
+00018890: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
+000188a0: 2020 2020 2020 2020 2020 2077 7269 7474             writt
+000188b0: 656e 2e20 5468 6973 2069 7320 6e6f 7420  en. This is not 
+000188c0: 6775 6172 616e 7465 6564 2074 6f20 6265  guaranteed to be
+000188d0: 2073 6565 6b61 626c 6520 2865 2e67 2e20   seekable (e.g. 
+000188e0: 6974 206d 6179 2062 6520 7374 646f 7574  it may be stdout
+000188f0: 206f 720a 2020 2020 2020 2020 2020 2020   or.            
+00018900: 2020 2020 7374 6465 7272 292e 0a20 2020      stderr)..   
+00018910: 2020 2020 2020 2020 2070 6678 2028 7374           pfx (st
+00018920: 7229 3a20 7468 6520 6375 7272 656e 7420  r): the current 
+00018930: 6465 6275 6720 6f75 7470 7574 2070 7265  debug output pre
+00018940: 6669 7820 7374 7269 6e67 2028 6f6e 6c79  fix string (only
+00018950: 206e 6565 6465 6420 6966 2065 6d69 7474   needed if emitt
+00018960: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
+00018970: 2020 2020 6d6f 7265 2074 6861 6e20 6f6e      more than on
+00018980: 6520 6c69 6e65 292e 0a0a 2020 2020 2020  e line)...      
+00018990: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+000189a0: 2020 2020 2020 2054 6865 2073 616d 6520         The same 
+000189b0: 7475 706c 6520 6173 2060 456c 6c69 7073  tuple as `Ellips
+000189c0: 652e 7265 6e64 6572 602e 0a20 2020 2020  e.render`..     
+000189d0: 2020 2022 2222 0a20 2020 2020 2020 2063     """.        c
+000189e0: 6f6d 706f 6e65 6e74 7320 3d20 7365 6c66  omponents = self
+000189f0: 2e5f 6465 636f 6d70 6f73 6528 290a 0a20  ._decompose().. 
+00018a00: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
+00018a10: 6561 6d2e 7772 6974 6528 6622 7b73 656c  eam.write(f"{sel
+00018a20: 667d 2072 6573 6f6c 7665 6420 746f 3a5c  f} resolved to:\
+00018a30: 6e22 290a 2020 2020 2020 2020 6966 206e  n").        if n
+00018a40: 6f74 2063 6f6d 706f 6e65 6e74 733a 0a20  ot components:. 
+00018a50: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+00018a60: 5f73 7472 6561 6d2e 7772 6974 6528 7066  _stream.write(pf
+00018a70: 7820 2b20 2220 e294 94e2 9480 206e 6f74  x + " ...... not
+00018a80: 6869 6e67 5c6e 2229 0a20 2020 2020 2020  hing\n").       
+00018a90: 2020 2020 2072 6574 7572 6e20 2222 2c20       return "", 
+00018aa0: 6c61 7374 5f69 7465 6d0a 0a20 2020 2020  last_item..     
+00018ab0: 2020 2072 656e 6465 725f 6c69 7374 203d     render_list =
+00018ac0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+00018ad0: 6974 656d 2069 6e20 636f 6d70 6f6e 656e  item in componen
+00018ae0: 7473 5b3a 2d31 5d3a 0a20 2020 2020 2020  ts[:-1]:.       
+00018af0: 2020 2020 2072 656e 6465 7265 642c 206c       rendered, l
+00018b00: 6173 745f 6974 656d 2c20 696e 6974 6961  ast_item, initia
+00018b10: 6c5f 706f 696e 7420 3d20 6974 656d 2e72  l_point = item.r
+00018b20: 656e 6465 7228 0a20 2020 2020 2020 2020  ender(.         
+00018b30: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+00018b40: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00018b50: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00018b60: 6f69 6e74 0a20 2020 2020 2020 2020 2020  oint.           
+00018b70: 2029 0a20 2020 2020 2020 2020 2020 2064   ).            d
+00018b80: 6562 7567 5f73 7472 6561 6d2e 7772 6974  ebug_stream.writ
+00018b90: 6528 7066 7820 2b20 6622 20e2 949c e294  e(pfx + f" .....
+00018ba0: 8020 7b69 7465 6d7d 5c6e 2229 0a20 2020  . {item}\n").   
+00018bb0: 2020 2020 2020 2020 2072 656e 6465 725f           render_
+00018bc0: 6c69 7374 2e61 7070 656e 6428 7265 6e64  list.append(rend
+00018bd0: 6572 6564 290a 0a20 2020 2020 2020 2072  ered)..        r
+00018be0: 656e 6465 7265 642c 206c 6173 745f 6974  endered, last_it
+00018bf0: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+00018c00: 7420 3d20 636f 6d70 6f6e 656e 7473 5b2d  t = components[-
+00018c10: 315d 2e72 656e 6465 7228 0a20 2020 2020  1].render(.     
+00018c20: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+00018c30: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00018c40: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00018c50: 6f69 6e74 0a20 2020 2020 2020 2029 0a20  oint.        ). 
+00018c60: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
+00018c70: 6561 6d2e 7772 6974 6528 7066 7820 2b20  eam.write(pfx + 
+00018c80: 6622 20e2 9494 e294 8020 7b63 6f6d 706f  f" ...... {compo
+00018c90: 6e65 6e74 735b 2d31 5d7d 5c6e 2229 0a20  nents[-1]}\n"). 
+00018ca0: 2020 2020 2020 2072 656e 6465 725f 6c69         render_li
+00018cb0: 7374 2e61 7070 656e 6428 7265 6e64 6572  st.append(render
+00018cc0: 6564 290a 0a20 2020 2020 2020 2072 6574  ed)..        ret
+00018cd0: 7572 6e20 2220 222e 6a6f 696e 2872 656e  urn " ".join(ren
+00018ce0: 6465 725f 6c69 7374 292c 204d 6f76 6528  der_list), Move(
+00018cf0: 7365 6c66 2e63 656e 7465 7229 2c20 696e  self.center), in
+00018d00: 6974 6961 6c5f 706f 696e 740a 0a0a 636c  itial_point...cl
+00018d10: 6173 7320 496d 706c 6963 6974 436c 6f73  ass ImplicitClos
+00018d20: 6528 4e61 6d65 6454 7570 6c65 293a 0a20  e(NamedTuple):. 
+00018d30: 2020 2022 2222 0a20 2020 2041 2070 6174     """.    A pat
+00018d40: 6820 636c 6f73 6520 656c 656d 656e 7420  h close element 
+00018d50: 7468 6174 2069 7320 636f 6e64 6974 696f  that is conditio
+00018d60: 6e61 6c6c 7920 7265 6e64 6572 6564 2064  nally rendered d
+00018d70: 6570 656e 6469 6e67 206f 6e20 7468 6520  epending on the 
+00018d80: 7661 6c75 6520 6f66 0a20 2020 2060 4772  value of.    `Gr
+00018d90: 6170 6869 6373 5374 796c 652e 6175 746f  aphicsStyle.auto
+00018da0: 5f63 6c6f 7365 602e 0a20 2020 2022 2222  _close`..    """
+00018db0: 0a0a 2020 2020 2320 7079 6c69 6e74 3a20  ..    # pylint: 
+00018dc0: 6469 7361 626c 653d 6e6f 2d73 656c 662d  disable=no-self-
+00018dd0: 7573 650a 2020 2020 4066 6f72 6365 5f6e  use.    @force_n
+00018de0: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
+00018df0: 6620 7265 6e64 6572 2873 656c 662c 2067  f render(self, g
+00018e00: 7364 5f72 6567 6973 7472 792c 2073 7479  sd_registry, sty
+00018e10: 6c65 2c20 6c61 7374 5f69 7465 6d2c 2069  le, last_item, i
+00018e20: 6e69 7469 616c 5f70 6f69 6e74 293a 0a20  nitial_point):. 
+00018e30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00018e40: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
+00018e50: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
+00018e60: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
+00018e70: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
+00018e80: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00018e90: 2020 6773 645f 7265 6769 7374 7279 2028    gsd_registry (
+00018ea0: 4772 6170 6869 6373 5374 6174 6544 6963  GraphicsStateDic
+00018eb0: 7452 6567 6973 7472 7929 3a20 7468 6520  tRegistry): the 
+00018ec0: 6f77 6e65 7227 7320 6772 6170 6869 6373  owner's graphics
+00018ed0: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
+00018ee0: 2020 2020 2020 2064 6963 7469 6f6e 6172         dictionar
+00018ef0: 7920 7265 6769 7374 7279 2e0a 2020 2020  y registry..    
+00018f00: 2020 2020 2020 2020 7374 796c 6520 2847          style (G
+00018f10: 7261 7068 6963 7353 7479 6c65 293a 2074  raphicsStyle): t
+00018f20: 6865 2063 7572 7265 6e74 2072 6573 6f6c  he current resol
+00018f30: 7665 6420 6772 6170 6869 6373 2073 7479  ved graphics sty
+00018f40: 6c65 0a20 2020 2020 2020 2020 2020 206c  le.            l
+00018f50: 6173 745f 6974 656d 3a20 7468 6520 7072  ast_item: the pr
+00018f60: 6576 696f 7573 2070 6174 6820 656c 656d  evious path elem
+00018f70: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
+00018f80: 2069 6e69 7469 616c 5f70 6f69 6e74 3a20   initial_point: 
+00018f90: 6c61 7374 2070 6f73 6974 696f 6e20 7365  last position se
+00018fa0: 7420 6279 2061 2022 4d22 206f 7220 226d  t by a "M" or "m
+00018fb0: 2220 636f 6d6d 616e 640a 0a20 2020 2020  " command..     
+00018fc0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00018fd0: 2020 2020 2020 2020 6120 7475 706c 6520          a tuple 
+00018fe0: 6f66 2060 2873 7472 2c20 6e65 775f 6c61  of `(str, new_la
+00018ff0: 7374 5f69 7465 6d29 602c 2077 6865 7265  st_item)`, where
+00019000: 2060 6e65 775f 6c61 7374 5f69 7465 6d60   `new_last_item`
+00019010: 2069 7320 7768 6174 6576 6572 2074 6865   is whatever the
+00019020: 206f 6c64 0a20 2020 2020 2020 2020 2020   old.           
+00019030: 206c 6173 745f 6974 656d 2077 6173 2e0a   last_item was..
+00019040: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00019050: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
+00019060: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
+00019070: 756d 656e 740a 2020 2020 2020 2020 6966  ument.        if
+00019080: 2073 7479 6c65 2e61 7574 6f5f 636c 6f73   style.auto_clos
+00019090: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000190a0: 6574 7572 6e20 2268 222c 206c 6173 745f  eturn "h", last_
+000190b0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+000190c0: 696e 740a 0a20 2020 2020 2020 2072 6574  int..        ret
+000190d0: 7572 6e20 2222 2c20 6c61 7374 5f69 7465  urn "", last_ite
+000190e0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+000190f0: 0a0a 2020 2020 4066 6f72 6365 5f6e 6f64  ..    @force_nod
+00019100: 6f63 756d 656e 740a 2020 2020 6465 6620  ocument.    def 
+00019110: 7265 6e64 6572 5f64 6562 7567 280a 2020  render_debug(.  
+00019120: 2020 2020 2020 7365 6c66 2c20 6773 645f        self, gsd_
+00019130: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+00019140: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+00019150: 6961 6c5f 706f 696e 742c 2064 6562 7567  ial_point, debug
+00019160: 5f73 7472 6561 6d2c 2070 6678 0a20 2020  _stream, pfx.   
+00019170: 2029 3a0a 2020 2020 2020 2020 2222 220a   ):.        """.
+00019180: 2020 2020 2020 2020 5265 6e64 6572 2074          Render t
+00019190: 6869 7320 7061 7468 2065 6c65 6d65 6e74  his path element
+000191a0: 2074 6f20 6974 7320 5044 4620 7265 7072   to its PDF repr
+000191b0: 6573 656e 7461 7469 6f6e 2061 6e64 2070  esentation and p
+000191c0: 726f 6475 6365 2064 6562 7567 0a20 2020  roduce debug.   
+000191d0: 2020 2020 2069 6e66 6f72 6d61 7469 6f6e       information
+000191e0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+000191f0: 0a20 2020 2020 2020 2020 2020 2067 7364  .            gsd
+00019200: 5f72 6567 6973 7472 7920 2847 7261 7068  _registry (Graph
+00019210: 6963 7353 7461 7465 4469 6374 5265 6769  icsStateDictRegi
+00019220: 7374 7279 293a 2074 6865 206f 776e 6572  stry): the owner
+00019230: 2773 2067 7261 7068 6963 7320 7374 6174  's graphics stat
+00019240: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00019250: 2020 6469 6374 696f 6e61 7279 2072 6567    dictionary reg
+00019260: 6973 7472 792e 0a20 2020 2020 2020 2020  istry..         
+00019270: 2020 2073 7479 6c65 2028 4772 6170 6869     style (Graphi
+00019280: 6373 5374 796c 6529 3a20 7468 6520 6375  csStyle): the cu
+00019290: 7272 656e 7420 7265 736f 6c76 6564 2067  rrent resolved g
+000192a0: 7261 7068 6963 7320 7374 796c 650a 2020  raphics style.  
+000192b0: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
+000192c0: 7465 6d3a 2074 6865 2070 7265 7669 6f75  tem: the previou
+000192d0: 7320 7061 7468 2065 6c65 6d65 6e74 2e0a  s path element..
+000192e0: 2020 2020 2020 2020 2020 2020 696e 6974              init
+000192f0: 6961 6c5f 706f 696e 743a 206c 6173 7420  ial_point: last 
+00019300: 706f 7369 7469 6f6e 2073 6574 2062 7920  position set by 
+00019310: 6120 224d 2220 6f72 2022 6d22 2063 6f6d  a "M" or "m" com
+00019320: 6d61 6e64 0a20 2020 2020 2020 2020 2020  mand.           
+00019330: 2064 6562 7567 5f73 7472 6561 6d20 2869   debug_stream (i
+00019340: 6f2e 5465 7874 494f 293a 2074 6865 2073  o.TextIO): the s
+00019350: 7472 6561 6d20 746f 2077 6869 6368 2074  tream to which t
+00019360: 6865 2064 6562 7567 206f 7574 7075 7420  he debug output 
+00019370: 7368 6f75 6c64 2062 650a 2020 2020 2020  should be.      
+00019380: 2020 2020 2020 2020 2020 7772 6974 7465            writte
+00019390: 6e2e 2054 6869 7320 6973 206e 6f74 2067  n. This is not g
+000193a0: 7561 7261 6e74 6565 6420 746f 2062 6520  uaranteed to be 
+000193b0: 7365 656b 6162 6c65 2028 652e 672e 2069  seekable (e.g. i
+000193c0: 7420 6d61 7920 6265 2073 7464 6f75 7420  t may be stdout 
+000193d0: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
+000193e0: 2020 2073 7464 6572 7229 2e0a 2020 2020     stderr)..    
+000193f0: 2020 2020 2020 2020 7066 7820 2873 7472          pfx (str
+00019400: 293a 2074 6865 2063 7572 7265 6e74 2064  ): the current d
+00019410: 6562 7567 206f 7574 7075 7420 7072 6566  ebug output pref
+00019420: 6978 2073 7472 696e 6720 286f 6e6c 7920  ix string (only 
+00019430: 6e65 6564 6564 2069 6620 656d 6974 7469  needed if emitti
+00019440: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
+00019450: 2020 206d 6f72 6520 7468 616e 206f 6e65     more than one
+00019460: 206c 696e 6529 2e0a 0a20 2020 2020 2020   line)...       
+00019470: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00019480: 2020 2020 2020 5468 6520 7361 6d65 2074        The same t
+00019490: 7570 6c65 2061 7320 6049 6d70 6c69 6369  uple as `Implici
+000194a0: 7443 6c6f 7365 2e72 656e 6465 7260 2e0a  tClose.render`..
+000194b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000194c0: 2020 2020 2320 7079 6c69 6e74 3a20 6469      # pylint: di
+000194d0: 7361 626c 653d 756e 7573 6564 2d61 7267  sable=unused-arg
+000194e0: 756d 656e 740a 2020 2020 2020 2020 7265  ument.        re
+000194f0: 6e64 6572 6564 2c20 7265 736f 6c76 6564  ndered, resolved
+00019500: 2c20 696e 6974 6961 6c5f 706f 696e 7420  , initial_point 
+00019510: 3d20 7365 6c66 2e72 656e 6465 7228 0a20  = self.render(. 
+00019520: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
+00019530: 6567 6973 7472 792c 2073 7479 6c65 2c20  egistry, style, 
+00019540: 6c61 7374 5f69 7465 6d2c 2069 6e69 7469  last_item, initi
+00019550: 616c 5f70 6f69 6e74 0a20 2020 2020 2020  al_point.       
+00019560: 2029 0a20 2020 2020 2020 2064 6562 7567   ).        debug
+00019570: 5f73 7472 6561 6d2e 7772 6974 6528 6622  _stream.write(f"
+00019580: 7b73 656c 667d 2072 6573 6f6c 7665 6420  {self} resolved 
+00019590: 746f 207b 7265 6e64 6572 6564 7d5c 6e22  to {rendered}\n"
+000195a0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+000195b0: 6e20 7265 6e64 6572 6564 2c20 7265 736f  n rendered, reso
+000195c0: 6c76 6564 2c20 696e 6974 6961 6c5f 706f  lved, initial_po
+000195d0: 696e 740a 0a0a 636c 6173 7320 436c 6f73  int...class Clos
+000195e0: 6528 4e61 6d65 6454 7570 6c65 293a 0a20  e(NamedTuple):. 
+000195f0: 2020 2022 2222 0a20 2020 2041 2070 6174     """.    A pat
+00019600: 6820 636c 6f73 6520 656c 656d 656e 742e  h close element.
+00019610: 0a0a 2020 2020 496e 7374 7275 6374 7320  ..    Instructs 
+00019620: 7468 6520 7265 6e64 6572 6572 2074 6f20  the renderer to 
+00019630: 6472 6177 2061 2073 7472 6169 6768 7420  draw a straight 
+00019640: 6c69 6e65 2066 726f 6d20 7468 6520 656e  line from the en
+00019650: 6420 6f66 2074 6865 206c 6173 7420 7061  d of the last pa
+00019660: 7468 2065 6c65 6d65 6e74 0a20 2020 2074  th element.    t
+00019670: 6f20 7468 6520 7374 6172 7420 6f66 2074  o the start of t
+00019680: 6865 2063 7572 7265 6e74 2070 6174 682e  he current path.
+00019690: 0a0a 2020 2020 5365 653a 2060 5061 696e  ..    See: `Pain
+000196a0: 7465 6450 6174 682e 636c 6f73 6560 0a20  tedPath.close`. 
+000196b0: 2020 2022 2222 0a0a 2020 2020 2320 7079     """..    # py
+000196c0: 6c69 6e74 3a20 6469 7361 626c 653d 6e6f  lint: disable=no
+000196d0: 2d73 656c 662d 7573 650a 2020 2020 4066  -self-use.    @f
+000196e0: 6f72 6365 5f6e 6f64 6f63 756d 656e 740a  orce_nodocument.
+000196f0: 2020 2020 6465 6620 7265 6e64 6572 2873      def render(s
+00019700: 656c 662c 2067 7364 5f72 6567 6973 7472  elf, gsd_registr
+00019710: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
+00019720: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
+00019730: 6e74 293a 0a20 2020 2020 2020 2022 2222  nt):.        """
+00019740: 0a20 2020 2020 2020 2052 656e 6465 7220  .        Render 
+00019750: 7468 6973 2070 6174 6820 656c 656d 656e  this path elemen
+00019760: 7420 746f 2069 7473 2050 4446 2072 6570  t to its PDF rep
+00019770: 7265 7365 6e74 6174 696f 6e2e 0a0a 2020  resentation...  
+00019780: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00019790: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+000197a0: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
+000197b0: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
+000197c0: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
+000197d0: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
+000197e0: 2020 2020 2020 2020 2020 2020 2064 6963               dic
+000197f0: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
+00019800: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+00019810: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
+00019820: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
+00019830: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
+00019840: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
+00019850: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
+00019860: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+00019870: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
+00019880: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
+00019890: 6f69 6e74 3a20 6c61 7374 2070 6f73 6974  oint: last posit
+000198a0: 696f 6e20 7365 7420 6279 2061 2022 4d22  ion set by a "M"
+000198b0: 206f 7220 226d 2220 636f 6d6d 616e 640a   or "m" command.
+000198c0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+000198d0: 3a0a 2020 2020 2020 2020 2020 2020 6120  :.            a 
+000198e0: 7475 706c 6520 6f66 2060 2873 7472 2c20  tuple of `(str, 
+000198f0: 6e65 775f 6c61 7374 5f69 7465 6d29 602c  new_last_item)`,
+00019900: 2077 6865 7265 2060 6e65 775f 6c61 7374   where `new_last
+00019910: 5f69 7465 6d60 2069 7320 7768 6174 6576  _item` is whatev
+00019920: 6572 2074 6865 206f 6c64 0a20 2020 2020  er the old.     
+00019930: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
+00019940: 2077 6173 2e0a 2020 2020 2020 2020 2222   was..        ""
+00019950: 220a 2020 2020 2020 2020 2320 7079 6c69  ".        # pyli
+00019960: 6e74 3a20 6469 7361 626c 653d 756e 7573  nt: disable=unus
+00019970: 6564 2d61 7267 756d 656e 740a 2020 2020  ed-argument.    
+00019980: 2020 2020 7265 7475 726e 2022 6822 2c20      return "h", 
+00019990: 4d6f 7665 2869 6e69 7469 616c 5f70 6f69  Move(initial_poi
+000199a0: 6e74 292c 2069 6e69 7469 616c 5f70 6f69  nt), initial_poi
+000199b0: 6e74 0a0a 2020 2020 4066 6f72 6365 5f6e  nt..    @force_n
+000199c0: 6f64 6f63 756d 656e 740a 2020 2020 6465  odocument.    de
+000199d0: 6620 7265 6e64 6572 5f64 6562 7567 280a  f render_debug(.
+000199e0: 2020 2020 2020 2020 7365 6c66 2c20 6773          self, gs
+000199f0: 645f 7265 6769 7374 7279 2c20 7374 796c  d_registry, styl
+00019a00: 652c 206c 6173 745f 6974 656d 2c20 696e  e, last_item, in
+00019a10: 6974 6961 6c5f 706f 696e 742c 2064 6562  itial_point, deb
+00019a20: 7567 5f73 7472 6561 6d2c 2070 6678 0a20  ug_stream, pfx. 
+00019a30: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
+00019a40: 220a 2020 2020 2020 2020 5265 6e64 6572  ".        Render
+00019a50: 2074 6869 7320 7061 7468 2065 6c65 6d65   this path eleme
+00019a60: 6e74 2074 6f20 6974 7320 5044 4620 7265  nt to its PDF re
+00019a70: 7072 6573 656e 7461 7469 6f6e 2061 6e64  presentation and
+00019a80: 2070 726f 6475 6365 2064 6562 7567 0a20   produce debug. 
+00019a90: 2020 2020 2020 2069 6e66 6f72 6d61 7469         informati
+00019aa0: 6f6e 2e0a 0a20 2020 2020 2020 2041 7267  on...        Arg
+00019ab0: 733a 0a20 2020 2020 2020 2020 2020 2067  s:.            g
+00019ac0: 7364 5f72 6567 6973 7472 7920 2847 7261  sd_registry (Gra
+00019ad0: 7068 6963 7353 7461 7465 4469 6374 5265  phicsStateDictRe
+00019ae0: 6769 7374 7279 293a 2074 6865 206f 776e  gistry): the own
+00019af0: 6572 2773 2067 7261 7068 6963 7320 7374  er's graphics st
+00019b00: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+00019b10: 2020 2020 6469 6374 696f 6e61 7279 2072      dictionary r
+00019b20: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+00019b30: 2020 2020 2073 7479 6c65 2028 4772 6170       style (Grap
+00019b40: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+00019b50: 6375 7272 656e 7420 7265 736f 6c76 6564  current resolved
+00019b60: 2067 7261 7068 6963 7320 7374 796c 650a   graphics style.
+00019b70: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+00019b80: 5f69 7465 6d3a 2074 6865 2070 7265 7669  _item: the previ
+00019b90: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+00019ba0: 2e0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00019bb0: 6974 6961 6c5f 706f 696e 743a 206c 6173  itial_point: las
+00019bc0: 7420 706f 7369 7469 6f6e 2073 6574 2062  t position set b
+00019bd0: 7920 6120 224d 2220 6f72 2022 6d22 2063  y a "M" or "m" c
+00019be0: 6f6d 6d61 6e64 0a20 2020 2020 2020 2020  ommand.         
+00019bf0: 2020 2064 6562 7567 5f73 7472 6561 6d20     debug_stream 
+00019c00: 2869 6f2e 5465 7874 494f 293a 2074 6865  (io.TextIO): the
+00019c10: 2073 7472 6561 6d20 746f 2077 6869 6368   stream to which
+00019c20: 2074 6865 2064 6562 7567 206f 7574 7075   the debug outpu
+00019c30: 7420 7368 6f75 6c64 2062 650a 2020 2020  t should be.    
+00019c40: 2020 2020 2020 2020 2020 2020 7772 6974              writ
+00019c50: 7465 6e2e 2054 6869 7320 6973 206e 6f74  ten. This is not
+00019c60: 2067 7561 7261 6e74 6565 6420 746f 2062   guaranteed to b
+00019c70: 6520 7365 656b 6162 6c65 2028 652e 672e  e seekable (e.g.
+00019c80: 2069 7420 6d61 7920 6265 2073 7464 6f75   it may be stdou
+00019c90: 7420 6f72 0a20 2020 2020 2020 2020 2020  t or.           
+00019ca0: 2020 2020 2073 7464 6572 7229 2e0a 2020       stderr)..  
+00019cb0: 2020 2020 2020 2020 2020 7066 7820 2873            pfx (s
+00019cc0: 7472 293a 2074 6865 2063 7572 7265 6e74  tr): the current
+00019cd0: 2064 6562 7567 206f 7574 7075 7420 7072   debug output pr
+00019ce0: 6566 6978 2073 7472 696e 6720 286f 6e6c  efix string (onl
+00019cf0: 7920 6e65 6564 6564 2069 6620 656d 6974  y needed if emit
+00019d00: 7469 6e67 0a20 2020 2020 2020 2020 2020  ting.           
+00019d10: 2020 2020 206d 6f72 6520 7468 616e 206f       more than o
+00019d20: 6e65 206c 696e 6529 2e0a 0a20 2020 2020  ne line)...     
+00019d30: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00019d40: 2020 2020 2020 2020 5468 6520 7361 6d65          The same
+00019d50: 2074 7570 6c65 2061 7320 6043 6c6f 7365   tuple as `Close
+00019d60: 2e72 656e 6465 7260 2e0a 2020 2020 2020  .render`..      
+00019d70: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
+00019d80: 7079 6c69 6e74 3a20 6469 7361 626c 653d  pylint: disable=
+00019d90: 756e 7573 6564 2d61 7267 756d 656e 740a  unused-argument.
+00019da0: 2020 2020 2020 2020 7265 6e64 6572 6564          rendered
+00019db0: 2c20 7265 736f 6c76 6564 2c20 696e 6974  , resolved, init
+00019dc0: 6961 6c5f 706f 696e 7420 3d20 7365 6c66  ial_point = self
+00019dd0: 2e72 656e 6465 7228 0a20 2020 2020 2020  .render(.       
+00019de0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
+00019df0: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
+00019e00: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
+00019e10: 6e74 0a20 2020 2020 2020 2029 0a20 2020  nt.        ).   
+00019e20: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
+00019e30: 6d2e 7772 6974 6528 7374 7228 7365 6c66  m.write(str(self
+00019e40: 2920 2b20 225c 6e22 290a 0a20 2020 2020  ) + "\n")..     
+00019e50: 2020 2072 6574 7572 6e20 7265 6e64 6572     return render
+00019e60: 6564 2c20 7265 736f 6c76 6564 2c20 696e  ed, resolved, in
+00019e70: 6974 6961 6c5f 706f 696e 740a 0a0a 636c  itial_point...cl
+00019e80: 6173 7320 4472 6177 696e 6743 6f6e 7465  ass DrawingConte
+00019e90: 7874 3a0a 2020 2020 2222 220a 2020 2020  xt:.    """.    
+00019ea0: 4261 7365 2063 6f6e 7465 7874 2066 6f72  Base context for
+00019eb0: 2061 2064 7261 7769 6e67 2069 6e20 6120   a drawing in a 
+00019ec0: 5044 460a 0a20 2020 2054 6869 7320 636f  PDF..    This co
+00019ed0: 6e74 6578 7420 6973 206e 6f74 2073 7479  ntext is not sty
+00019ee0: 6c61 626c 6520 616e 6420 6973 206d 6169  lable and is mai
+00019ef0: 6e6c 7920 7265 7370 6f6e 7369 626c 6520  nly responsible 
+00019f00: 666f 7220 7472 616e 7366 6f72 6d69 6e67  for transforming
+00019f10: 2070 6174 680a 2020 2020 6472 6177 696e   path.    drawin
+00019f20: 6720 636f 6f72 6469 6e61 7465 7320 696e  g coordinates in
+00019f30: 746f 2075 7365 7220 636f 6f72 6469 6e61  to user coordina
+00019f40: 7465 7320 2869 2e65 2e20 6974 2065 6e73  tes (i.e. it ens
+00019f50: 7572 6573 2074 6861 7420 7468 6520 6f75  ures that the ou
+00019f60: 7470 7574 2064 7261 7769 6e67 0a20 2020  tput drawing.   
+00019f70: 2069 7320 636f 7272 6563 746c 7920 7363   is correctly sc
+00019f80: 616c 6564 292e 0a20 2020 2022 2222 0a0a  aled)..    """..
+00019f90: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00019fa0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00019fb0: 7365 6c66 2e5f 7375 6269 7465 6d73 203d  self._subitems =
+00019fc0: 205b 5d0a 0a20 2020 2064 6566 2061 6464   []..    def add
+00019fd0: 5f69 7465 6d28 7365 6c66 2c20 6974 656d  _item(self, item
+00019fe0: 2c20 5f63 6f70 793d 5472 7565 293a 0a20  , _copy=True):. 
+00019ff0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001a000: 2020 2041 7070 656e 6420 616e 2069 7465     Append an ite
+0001a010: 6d20 746f 2074 6869 7320 6472 6177 696e  m to this drawin
+0001a020: 6720 636f 6e74 6578 740a 0a20 2020 2020  g context..     
+0001a030: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+0001a040: 2020 2020 2069 7465 6d20 2847 7261 7068       item (Graph
+0001a050: 6963 7343 6f6e 7465 7874 2c20 5061 696e  icsContext, Pain
+0001a060: 7465 6450 6174 6829 3a20 7468 6520 6974  tedPath): the it
+0001a070: 656d 2074 6f20 6265 2061 7070 656e 6465  em to be appende
+0001a080: 642e 0a20 2020 2020 2020 2020 2020 205f  d..            _
+0001a090: 636f 7079 2028 626f 6f6c 293a 2069 6620  copy (bool): if 
+0001a0a0: 7472 7565 2028 7468 6520 6465 6661 756c  true (the defaul
+0001a0b0: 7429 2c20 7468 6520 6974 656d 2077 696c  t), the item wil
+0001a0c0: 6c20 6265 2063 6f70 6965 6420 6265 666f  l be copied befo
+0001a0d0: 7265 2062 6569 6e67 0a20 2020 2020 2020  re being.       
+0001a0e0: 2020 2020 2020 2020 2061 7070 656e 6465           appende
+0001a0f0: 642e 2054 6869 7320 7072 6576 656e 7473  d. This prevents
+0001a100: 206d 6f64 6966 6963 6174 696f 6e73 2074   modifications t
+0001a110: 6f20 6120 7265 6665 7265 6e63 6564 206f  o a referenced o
+0001a120: 626a 6563 7420 6672 6f6d 0a20 2020 2020  bject from.     
+0001a130: 2020 2020 2020 2020 2020 2022 7265 7472             "retr
+0001a140: 6f61 6374 6976 656c 7922 2061 6c74 6572  oactively" alter
+0001a150: 696e 6720 6974 7320 7374 796c 652f 7368  ing its style/sh
+0001a160: 6170 6520 616e 6420 7368 6f75 6c64 2062  ape and should b
+0001a170: 6520 6469 7361 626c 6564 2077 6974 680a  e disabled with.
+0001a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a190: 6361 7574 696f 6e2e 0a20 2020 2020 2020  caution..       
+0001a1a0: 2022 2222 0a0a 2020 2020 2020 2020 6966   """..        if
+0001a1b0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0001a1c0: 6974 656d 2c20 2847 7261 7068 6963 7343  item, (GraphicsC
+0001a1d0: 6f6e 7465 7874 2c20 5061 696e 7465 6450  ontext, PaintedP
+0001a1e0: 6174 6829 293a 0a20 2020 2020 2020 2020  ath)):.         
+0001a1f0: 2020 2072 6169 7365 2054 7970 6545 7272     raise TypeErr
+0001a200: 6f72 2866 227b 6974 656d 7d20 646f 6573  or(f"{item} does
+0001a210: 6e27 7420 6265 6c6f 6e67 2069 6e20 6120  n't belong in a 
+0001a220: 4472 6177 696e 6743 6f6e 7465 7874 2229  DrawingContext")
+0001a230: 0a0a 2020 2020 2020 2020 6966 205f 636f  ..        if _co
+0001a240: 7079 3a0a 2020 2020 2020 2020 2020 2020  py:.            
+0001a250: 6974 656d 203d 2063 6f70 792e 6465 6570  item = copy.deep
+0001a260: 636f 7079 2869 7465 6d29 0a0a 2020 2020  copy(item)..    
+0001a270: 2020 2020 7365 6c66 2e5f 7375 6269 7465      self._subite
+0001a280: 6d73 2e61 7070 656e 6428 6974 656d 290a  ms.append(item).
+0001a290: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0001a2a0: 6f64 0a20 2020 2064 6566 205f 7365 7475  od.    def _setu
+0001a2b0: 705f 7265 6e64 6572 5f70 7265 7265 7173  p_render_prereqs
+0001a2c0: 2873 7479 6c65 2c20 6669 7273 745f 706f  (style, first_po
+0001a2d0: 696e 742c 2073 6361 6c65 2c20 6865 6967  int, scale, heig
+0001a2e0: 6874 293a 0a20 2020 2020 2020 2073 7479  ht):.        sty
+0001a2f0: 6c65 2e61 7574 6f5f 636c 6f73 6520 3d20  le.auto_close = 
+0001a300: 5472 7565 0a20 2020 2020 2020 2073 7479  True.        sty
+0001a310: 6c65 2e70 6169 6e74 5f72 756c 6520 3d20  le.paint_rule = 
+0001a320: 5061 7468 5061 696e 7452 756c 652e 4155  PathPaintRule.AU
+0001a330: 544f 0a20 2020 2020 2020 2073 7479 6c65  TO.        style
+0001a340: 2e69 6e74 6572 7365 6374 696f 6e5f 7275  .intersection_ru
+0001a350: 6c65 203d 2049 6e74 6572 7365 6374 696f  le = Intersectio
+0001a360: 6e52 756c 652e 4e4f 4e5a 4552 4f0a 0a20  nRule.NONZERO.. 
+0001a370: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
+0001a380: 203d 204d 6f76 6528 6669 7273 745f 706f   = Move(first_po
+0001a390: 696e 7429 0a20 2020 2020 2020 2073 6361  int).        sca
+0001a3a0: 6c65 2c20 6c61 7374 5f69 7465 6d20 3d20  le, last_item = 
+0001a3b0: 280a 2020 2020 2020 2020 2020 2020 5472  (.            Tr
+0001a3c0: 616e 7366 6f72 6d2e 7363 616c 696e 6728  ansform.scaling(
+0001a3d0: 783d 312c 2079 3d2d 3129 0a20 2020 2020  x=1, y=-1).     
+0001a3e0: 2020 2020 2020 202e 6162 6f75 7428 783d         .about(x=
+0001a3f0: 302c 2079 3d68 6569 6768 7420 2f20 3229  0, y=height / 2)
+0001a400: 0a20 2020 2020 2020 2020 2020 202e 7363  .            .sc
+0001a410: 616c 6528 7363 616c 6529 0a20 2020 2020  ale(scale).     
+0001a420: 2020 2020 2020 202e 7265 6e64 6572 286c         .render(l
+0001a430: 6173 745f 6974 656d 290a 2020 2020 2020  ast_item).      
+0001a440: 2020 290a 0a20 2020 2020 2020 2072 656e    )..        ren
+0001a450: 6465 725f 6c69 7374 203d 205b 2271 222c  der_list = ["q",
+0001a460: 2073 6361 6c65 5d0a 0a20 2020 2020 2020   scale]..       
+0001a470: 2072 6574 7572 6e20 7265 6e64 6572 5f6c   return render_l
+0001a480: 6973 742c 2073 7479 6c65 2c20 6c61 7374  ist, style, last
+0001a490: 5f69 7465 6d0a 0a20 2020 2064 6566 2072  _item..    def r
+0001a4a0: 656e 6465 7228 7365 6c66 2c20 6773 645f  ender(self, gsd_
+0001a4b0: 7265 6769 7374 7279 2c20 6669 7273 745f  registry, first_
+0001a4c0: 706f 696e 742c 2073 6361 6c65 2c20 6865  point, scale, he
+0001a4d0: 6967 6874 2c20 7374 6172 7469 6e67 5f73  ight, starting_s
+0001a4e0: 7479 6c65 293a 0a20 2020 2020 2020 2022  tyle):.        "
+0001a4f0: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
+0001a500: 7220 7468 6520 6472 6177 696e 6720 636f  r the drawing co
+0001a510: 6e74 6578 7420 746f 2050 4446 2066 6f72  ntext to PDF for
+0001a520: 6d61 742e 0a0a 2020 2020 2020 2020 4172  mat...        Ar
+0001a530: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+0001a540: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
+0001a550: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
+0001a560: 6567 6973 7472 7929 3a20 7468 6520 7061  egistry): the pa
+0001a570: 7265 6e74 2064 6f63 756d 656e 7427 7320  rent document's 
+0001a580: 6772 6170 6869 6373 0a20 2020 2020 2020  graphics.       
+0001a590: 2020 2020 2020 2020 2073 7461 7465 2072           state r
+0001a5a0: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+0001a5b0: 2020 2020 2066 6972 7374 5f70 6f69 6e74       first_point
+0001a5c0: 2028 506f 696e 7429 3a20 7468 6520 7374   (Point): the st
+0001a5d0: 6172 7469 6e67 2070 6f69 6e74 2074 6f20  arting point to 
+0001a5e0: 7573 6520 6966 2074 6865 2066 6972 7374  use if the first
+0001a5f0: 2070 6174 6820 656c 656d 656e 7420 6973   path element is
+0001a600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a610: 2061 2072 656c 6174 6976 6520 656c 656d   a relative elem
+0001a620: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
+0001a630: 2073 6361 6c65 2028 4e75 6d62 6572 293a   scale (Number):
+0001a640: 2074 6865 2073 6361 6c65 2066 6163 746f   the scale facto
+0001a650: 7220 746f 2063 6f6e 7665 7274 2066 726f  r to convert fro
+0001a660: 6d20 5044 4620 7074 2075 6e69 7473 2069  m PDF pt units i
+0001a670: 6e74 6f20 7468 650a 2020 2020 2020 2020  nto the.        
+0001a680: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+0001a690: 2773 2073 656d 616e 7469 6320 756e 6974  's semantic unit
+0001a6a0: 7320 2865 2e67 2e20 6d6d 206f 7220 696e  s (e.g. mm or in
+0001a6b0: 292e 0a20 2020 2020 2020 2020 2020 2068  )..            h
+0001a6c0: 6569 6768 7420 284e 756d 6265 7229 3a20  eight (Number): 
+0001a6d0: 7468 6520 7061 6765 2068 6569 6768 742e  the page height.
+0001a6e0: 2054 6869 7320 6973 2075 7365 6420 746f   This is used to
+0001a6f0: 2072 656d 6170 2074 6865 2063 6f6f 7264   remap the coord
+0001a700: 696e 6174 6573 2074 6f0a 2020 2020 2020  inates to.      
+0001a710: 2020 2020 2020 2020 2020 6265 2066 726f            be fro
+0001a720: 6d20 7468 6520 746f 702d 6c65 6674 2063  m the top-left c
+0001a730: 6f72 6e65 7220 6f66 2074 6865 2070 6167  orner of the pag
+0001a740: 6520 286d 6174 6368 696e 6720 6670 6466  e (matching fpdf
+0001a750: 2773 2062 6568 6176 696f 7229 0a20 2020  's behavior).   
+0001a760: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+0001a770: 7465 6164 206f 6620 7468 6520 5044 4620  tead of the PDF 
+0001a780: 6e61 7469 7665 2062 6568 6176 696f 7220  native behavior 
+0001a790: 6f66 2062 6f74 746f 6d2d 6c65 6674 2e0a  of bottom-left..
+0001a7a0: 2020 2020 2020 2020 2020 2020 7374 6172              star
+0001a7b0: 7469 6e67 5f73 7479 6c65 2028 4772 6170  ting_style (Grap
+0001a7c0: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+0001a7d0: 6261 7365 2073 7479 6c65 2066 6f72 2074  base style for t
+0001a7e0: 6869 7320 6472 6177 696e 6720 636f 6e74  his drawing cont
+0001a7f0: 6578 742c 0a20 2020 2020 2020 2020 2020  ext,.           
+0001a800: 2020 2020 2064 6572 6976 6564 2066 726f       derived fro
+0001a810: 6d20 7468 6520 646f 6375 6d65 6e74 2773  m the document's
+0001a820: 2063 7572 7265 6e74 2073 7479 6c65 2064   current style d
+0001a830: 6566 6175 6c74 732e 0a0a 2020 2020 2020  efaults...      
+0001a840: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+0001a850: 2020 2020 2020 2041 2073 7472 696e 6720         A string 
+0001a860: 636f 6d70 6f73 6564 206f 6620 7468 6520  composed of the 
+0001a870: 5044 4620 7265 7072 6573 656e 7461 7469  PDF representati
+0001a880: 6f6e 206f 6620 616c 6c20 7468 6520 7061  on of all the pa
+0001a890: 7468 7320 616e 6420 6772 6f75 7073 2069  ths and groups i
+0001a8a0: 6e0a 2020 2020 2020 2020 2020 2020 7468  n.            th
+0001a8b0: 6973 2063 6f6e 7465 7874 2028 616e 2065  is context (an e
+0001a8c0: 6d70 7479 2073 7472 696e 6720 6973 2072  mpty string is r
+0001a8d0: 6574 7572 6e65 6420 6966 2074 6865 7265  eturned if there
+0001a8e0: 2061 7265 206e 6f20 7061 7468 7320 6f72   are no paths or
+0001a8f0: 2067 726f 7570 7329 0a20 2020 2020 2020   groups).       
+0001a900: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+0001a910: 6e6f 7420 7365 6c66 2e5f 7375 6269 7465  not self._subite
+0001a920: 6d73 3a0a 2020 2020 2020 2020 2020 2020  ms:.            
+0001a930: 7265 7475 726e 2022 220a 0a20 2020 2020  return ""..     
+0001a940: 2020 2072 656e 6465 725f 6c69 7374 2c20     render_list, 
+0001a950: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+0001a960: 203d 2073 656c 662e 5f73 6574 7570 5f72   = self._setup_r
+0001a970: 656e 6465 725f 7072 6572 6571 7328 0a20  ender_prereqs(. 
+0001a980: 2020 2020 2020 2020 2020 2073 7461 7274             start
+0001a990: 696e 675f 7374 796c 652c 2066 6972 7374  ing_style, first
+0001a9a0: 5f70 6f69 6e74 2c20 7363 616c 652c 2068  _point, scale, h
+0001a9b0: 6569 6768 740a 2020 2020 2020 2020 290a  eight.        ).
+0001a9c0: 0a20 2020 2020 2020 2066 6f72 2069 7465  .        for ite
+0001a9d0: 6d20 696e 2073 656c 662e 5f73 7562 6974  m in self._subit
+0001a9e0: 656d 733a 0a20 2020 2020 2020 2020 2020  ems:.           
+0001a9f0: 2072 656e 6465 7265 642c 206c 6173 745f   rendered, last_
+0001aa00: 6974 656d 2c20 6669 7273 745f 706f 696e  item, first_poin
+0001aa10: 7420 3d20 6974 656d 2e72 656e 6465 7228  t = item.render(
+0001aa20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aa30: 2067 7364 5f72 6567 6973 7472 792c 2073   gsd_registry, s
+0001aa40: 7479 6c65 2c20 6c61 7374 5f69 7465 6d2c  tyle, last_item,
+0001aa50: 2066 6972 7374 5f70 6f69 6e74 0a20 2020   first_point.   
+0001aa60: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001aa70: 2020 2020 2020 2069 6620 7265 6e64 6572         if render
+0001aa80: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+0001aa90: 2020 2020 7265 6e64 6572 5f6c 6973 742e      render_list.
+0001aaa0: 6170 7065 6e64 2872 656e 6465 7265 6429  append(rendered)
+0001aab0: 0a0a 2020 2020 2020 2020 2320 7468 6572  ..        # ther
+0001aac0: 6520 7761 7320 6e6f 7468 696e 6720 746f  e was nothing to
+0001aad0: 2072 656e 6465 723a 2074 6865 206f 6e6c   render: the onl
+0001aae0: 7920 6974 656d 7320 6172 6520 7468 6520  y items are the 
+0001aaf0: 7374 6172 7420 6772 6f75 7020 616e 6420  start group and 
+0001ab00: 7363 616c 650a 2020 2020 2020 2020 2320  scale.        # 
+0001ab10: 7472 616e 7366 6f72 6d2e 0a20 2020 2020  transform..     
+0001ab20: 2020 2069 6620 6c65 6e28 7265 6e64 6572     if len(render
+0001ab30: 5f6c 6973 7429 203d 3d20 323a 0a20 2020  _list) == 2:.   
+0001ab40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001ab50: 2222 0a0a 2020 2020 2020 2020 7374 796c  ""..        styl
+0001ab60: 655f 6469 6374 5f6e 616d 6520 3d20 6773  e_dict_name = gs
+0001ab70: 645f 7265 6769 7374 7279 2e72 6567 6973  d_registry.regis
+0001ab80: 7465 725f 7374 796c 6528 7374 796c 6529  ter_style(style)
+0001ab90: 0a20 2020 2020 2020 2069 6620 7374 796c  .        if styl
+0001aba0: 655f 6469 6374 5f6e 616d 6520 6973 206e  e_dict_name is n
+0001abb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0001abc0: 2020 2020 2072 656e 6465 725f 6c69 7374       render_list
+0001abd0: 2e69 6e73 6572 7428 322c 2066 227b 7265  .insert(2, f"{re
+0001abe0: 6e64 6572 5f70 6466 5f70 7269 6d69 7469  nder_pdf_primiti
+0001abf0: 7665 2873 7479 6c65 5f64 6963 745f 6e61  ve(style_dict_na
+0001ac00: 6d65 297d 2067 7322 290a 2020 2020 2020  me)} gs").      
+0001ac10: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+0001ac20: 742e 696e 7365 7274 280a 2020 2020 2020  t.insert(.      
+0001ac30: 2020 2020 2020 2020 2020 332c 0a20 2020            3,.   
+0001ac40: 2020 2020 2020 2020 2020 2020 2072 656e               ren
+0001ac50: 6465 725f 7064 665f 7072 696d 6974 6976  der_pdf_primitiv
+0001ac60: 6528 7374 796c 652e 7374 726f 6b65 5f64  e(style.stroke_d
+0001ac70: 6173 685f 7061 7474 6572 6e29 0a20 2020  ash_pattern).   
+0001ac80: 2020 2020 2020 2020 2020 2020 202b 2066               + f
+0001ac90: 2220 7b6e 756d 6265 725f 746f 5f73 7472  " {number_to_str
+0001aca0: 2873 7479 6c65 2e73 7472 6f6b 655f 6461  (style.stroke_da
+0001acb0: 7368 5f70 6861 7365 297d 2064 222c 0a20  sh_phase)} d",. 
+0001acc0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+0001acd0: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+0001ace0: 742e 6170 7065 6e64 2822 5122 290a 0a20  t.append("Q").. 
+0001acf0: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
+0001ad00: 222e 6a6f 696e 2872 656e 6465 725f 6c69  ".join(render_li
+0001ad10: 7374 290a 0a20 2020 2064 6566 2072 656e  st)..    def ren
+0001ad20: 6465 725f 6465 6275 6728 0a20 2020 2020  der_debug(.     
+0001ad30: 2020 2073 656c 662c 2067 7364 5f72 6567     self, gsd_reg
+0001ad40: 6973 7472 792c 2066 6972 7374 5f70 6f69  istry, first_poi
+0001ad50: 6e74 2c20 7363 616c 652c 2068 6569 6768  nt, scale, heigh
+0001ad60: 742c 2073 7461 7274 696e 675f 7374 796c  t, starting_styl
+0001ad70: 652c 2064 6562 7567 5f73 7472 6561 6d0a  e, debug_stream.
+0001ad80: 2020 2020 293a 0a20 2020 2020 2020 2022      ):.        "
+0001ad90: 2222 0a20 2020 2020 2020 2052 656e 6465  "".        Rende
+0001ada0: 7220 7468 6520 6472 6177 696e 6720 636f  r the drawing co
+0001adb0: 6e74 6578 7420 746f 2050 4446 2066 6f72  ntext to PDF for
+0001adc0: 6d61 742e 0a0a 2020 2020 2020 2020 4172  mat...        Ar
+0001add0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+0001ade0: 6773 645f 7265 6769 7374 7279 2028 4772  gsd_registry (Gr
+0001adf0: 6170 6869 6373 5374 6174 6544 6963 7452  aphicsStateDictR
+0001ae00: 6567 6973 7472 7929 3a20 7468 6520 7061  egistry): the pa
+0001ae10: 7265 6e74 2064 6f63 756d 656e 7427 7320  rent document's 
+0001ae20: 6772 6170 6869 6373 0a20 2020 2020 2020  graphics.       
+0001ae30: 2020 2020 2020 2020 2073 7461 7465 2072           state r
+0001ae40: 6567 6973 7472 792e 0a20 2020 2020 2020  egistry..       
+0001ae50: 2020 2020 2066 6972 7374 5f70 6f69 6e74       first_point
+0001ae60: 2028 506f 696e 7429 3a20 7468 6520 7374   (Point): the st
+0001ae70: 6172 7469 6e67 2070 6f69 6e74 2074 6f20  arting point to 
+0001ae80: 7573 6520 6966 2074 6865 2066 6972 7374  use if the first
+0001ae90: 2070 6174 6820 656c 656d 656e 7420 6973   path element is
+0001aea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aeb0: 2061 2072 656c 6174 6976 6520 656c 656d   a relative elem
+0001aec0: 656e 742e 0a20 2020 2020 2020 2020 2020  ent..           
+0001aed0: 2073 6361 6c65 2028 4e75 6d62 6572 293a   scale (Number):
+0001aee0: 2074 6865 2073 6361 6c65 2066 6163 746f   the scale facto
+0001aef0: 7220 746f 2063 6f6e 7665 7274 2066 726f  r to convert fro
+0001af00: 6d20 5044 4620 7074 2075 6e69 7473 2069  m PDF pt units i
+0001af10: 6e74 6f20 7468 650a 2020 2020 2020 2020  nto the.        
+0001af20: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+0001af30: 2773 2073 656d 616e 7469 6320 756e 6974  's semantic unit
+0001af40: 7320 2865 2e67 2e20 6d6d 206f 7220 696e  s (e.g. mm or in
+0001af50: 292e 0a20 2020 2020 2020 2020 2020 2068  )..            h
+0001af60: 6569 6768 7420 284e 756d 6265 7229 3a20  eight (Number): 
+0001af70: 7468 6520 7061 6765 2068 6569 6768 742e  the page height.
+0001af80: 2054 6869 7320 6973 2075 7365 6420 746f   This is used to
+0001af90: 2072 656d 6170 2074 6865 2063 6f6f 7264   remap the coord
+0001afa0: 696e 6174 6573 2074 6f0a 2020 2020 2020  inates to.      
+0001afb0: 2020 2020 2020 2020 2020 6265 2066 726f            be fro
+0001afc0: 6d20 7468 6520 746f 702d 6c65 6674 2063  m the top-left c
+0001afd0: 6f72 6e65 7220 6f66 2074 6865 2070 6167  orner of the pag
+0001afe0: 6520 286d 6174 6368 696e 6720 6670 6466  e (matching fpdf
+0001aff0: 2773 2062 6568 6176 696f 7229 0a20 2020  's behavior).   
+0001b000: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+0001b010: 7465 6164 206f 6620 7468 6520 5044 4620  tead of the PDF 
+0001b020: 6e61 7469 7665 2062 6568 6176 696f 7220  native behavior 
+0001b030: 6f66 2062 6f74 746f 6d2d 6c65 6674 2e0a  of bottom-left..
+0001b040: 2020 2020 2020 2020 2020 2020 7374 6172              star
+0001b050: 7469 6e67 5f73 7479 6c65 2028 4772 6170  ting_style (Grap
+0001b060: 6869 6373 5374 796c 6529 3a20 7468 6520  hicsStyle): the 
+0001b070: 6261 7365 2073 7479 6c65 2066 6f72 2074  base style for t
+0001b080: 6869 7320 6472 6177 696e 6720 636f 6e74  his drawing cont
+0001b090: 6578 742c 0a20 2020 2020 2020 2020 2020  ext,.           
+0001b0a0: 2020 2020 2064 6572 6976 6564 2066 726f       derived fro
+0001b0b0: 6d20 7468 6520 646f 6375 6d65 6e74 2773  m the document's
+0001b0c0: 2063 7572 7265 6e74 2073 7479 6c65 2064   current style d
+0001b0d0: 6566 6175 6c74 732e 0a20 2020 2020 2020  efaults..       
+0001b0e0: 2020 2020 2064 6562 7567 5f73 7472 6561       debug_strea
+0001b0f0: 6d20 2854 6578 7449 4f29 3a20 6120 7465  m (TextIO): a te
+0001b100: 7874 2073 7472 6561 6d20 746f 2077 6869  xt stream to whi
+0001b110: 6368 2061 2064 6562 7567 2072 6570 7265  ch a debug repre
+0001b120: 7365 6e74 6174 696f 6e20 6f66 2074 6865  sentation of the
+0001b130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b140: 2064 7261 7769 6e67 2073 7472 7563 7475   drawing structu
+0001b150: 7265 2077 696c 6c20 6265 2077 7269 7474  re will be writt
+0001b160: 656e 2e0a 0a20 2020 2020 2020 2052 6574  en...        Ret
+0001b170: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+0001b180: 2020 4120 7374 7269 6e67 2063 6f6d 706f    A string compo
+0001b190: 7365 6420 6f66 2074 6865 2050 4446 2072  sed of the PDF r
+0001b1a0: 6570 7265 7365 6e74 6174 696f 6e20 6f66  epresentation of
+0001b1b0: 2061 6c6c 2074 6865 2070 6174 6873 2061   all the paths a
+0001b1c0: 6e64 2067 726f 7570 7320 696e 0a20 2020  nd groups in.   
+0001b1d0: 2020 2020 2020 2020 2074 6869 7320 636f           this co
+0001b1e0: 6e74 6578 7420 2861 6e20 656d 7074 7920  ntext (an empty 
+0001b1f0: 7374 7269 6e67 2069 7320 7265 7475 726e  string is return
+0001b200: 6564 2069 6620 7468 6572 6520 6172 6520  ed if there are 
+0001b210: 6e6f 2070 6174 6873 206f 7220 6772 6f75  no paths or grou
+0001b220: 7073 290a 2020 2020 2020 2020 2222 220a  ps).        """.
+0001b230: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
+0001b240: 6973 742c 2073 7479 6c65 2c20 6c61 7374  ist, style, last
+0001b250: 5f69 7465 6d20 3d20 7365 6c66 2e5f 7365  _item = self._se
+0001b260: 7475 705f 7265 6e64 6572 5f70 7265 7265  tup_render_prere
+0001b270: 7173 280a 2020 2020 2020 2020 2020 2020  qs(.            
+0001b280: 7374 6172 7469 6e67 5f73 7479 6c65 2c20  starting_style, 
+0001b290: 6669 7273 745f 706f 696e 742c 2073 6361  first_point, sca
+0001b2a0: 6c65 2c20 6865 6967 6874 0a20 2020 2020  le, height.     
+0001b2b0: 2020 2029 0a0a 2020 2020 2020 2020 6465     )..        de
+0001b2c0: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
+0001b2d0: 2822 524f 4f54 5c6e 2229 0a20 2020 2020  ("ROOT\n").     
+0001b2e0: 2020 2066 6f72 2063 6869 6c64 2069 6e20     for child in 
+0001b2f0: 7365 6c66 2e5f 7375 6269 7465 6d73 5b3a  self._subitems[:
+0001b300: 2d31 5d3a 0a20 2020 2020 2020 2020 2020  -1]:.           
+0001b310: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
+0001b320: 6974 6528 2220 e294 9ce2 9480 2022 290a  ite(" ...... ").
+0001b330: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
+0001b340: 6572 6564 2c20 6c61 7374 5f69 7465 6d20  ered, last_item 
+0001b350: 3d20 6368 696c 642e 7265 6e64 6572 5f64  = child.render_d
+0001b360: 6562 7567 280a 2020 2020 2020 2020 2020  ebug(.          
+0001b370: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+0001b380: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+0001b390: 6974 656d 2c20 6465 6275 675f 7374 7265  item, debug_stre
+0001b3a0: 616d 2c20 2220 e294 8220 2022 0a20 2020  am, " ...  ".   
+0001b3b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001b3c0: 2020 2020 2020 2069 6620 7265 6e64 6572         if render
+0001b3d0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+0001b3e0: 2020 2020 7265 6e64 6572 5f6c 6973 742e      render_list.
+0001b3f0: 6170 7065 6e64 2872 656e 6465 7265 6429  append(rendered)
+0001b400: 0a0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+0001b410: 662e 5f73 7562 6974 656d 733a 0a20 2020  f._subitems:.   
+0001b420: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
+0001b430: 7472 6561 6d2e 7772 6974 6528 2220 e294  tream.write(" ..
+0001b440: 94e2 9480 2022 290a 2020 2020 2020 2020  .... ").        
+0001b450: 2020 2020 7265 6e64 6572 6564 2c20 6c61      rendered, la
+0001b460: 7374 5f69 7465 6d2c 2066 6972 7374 5f70  st_item, first_p
+0001b470: 6f69 6e74 203d 2073 656c 662e 5f73 7562  oint = self._sub
+0001b480: 6974 656d 735b 2d31 5d2e 7265 6e64 6572  items[-1].render
+0001b490: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
+0001b4a0: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+0001b4b0: 7374 7279 2c20 7374 796c 652c 206c 6173  stry, style, las
+0001b4c0: 745f 6974 656d 2c20 6669 7273 745f 706f  t_item, first_po
+0001b4d0: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
+0001b4e0: 6d2c 2022 2020 2020 220a 2020 2020 2020  m, "    ".      
+0001b4f0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001b500: 2020 2020 6966 2072 656e 6465 7265 643a      if rendered:
+0001b510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b520: 2072 656e 6465 725f 6c69 7374 2e61 7070   render_list.app
+0001b530: 656e 6428 7265 6e64 6572 6564 290a 0a20  end(rendered).. 
+0001b540: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+0001b550: 7265 2077 6173 206e 6f74 6869 6e67 2074  re was nothing t
+0001b560: 6f20 7265 6e64 6572 3a20 7468 6520 6f6e  o render: the on
+0001b570: 6c79 2069 7465 6d73 2061 7265 2074 6865  ly items are the
+0001b580: 2073 7461 7274 2067 726f 7570 2061 6e64   start group and
+0001b590: 2073 6361 6c65 0a20 2020 2020 2020 2020   scale.         
+0001b5a0: 2020 2023 2074 7261 6e73 666f 726d 2e0a     # transform..
+0001b5b0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0001b5c0: 656e 2872 656e 6465 725f 6c69 7374 2920  en(render_list) 
+0001b5d0: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
+0001b5e0: 2020 2020 2020 7265 7475 726e 2022 220a        return "".
+0001b5f0: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
+0001b600: 6c65 5f64 6963 745f 6e61 6d65 203d 2067  le_dict_name = g
+0001b610: 7364 5f72 6567 6973 7472 792e 7265 6769  sd_registry.regi
+0001b620: 7374 6572 5f73 7479 6c65 2873 7479 6c65  ster_style(style
+0001b630: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0001b640: 2073 7479 6c65 5f64 6963 745f 6e61 6d65   style_dict_name
+0001b650: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001b660: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001b670: 6e64 6572 5f6c 6973 742e 696e 7365 7274  nder_list.insert
+0001b680: 2832 2c20 6622 7b72 656e 6465 725f 7064  (2, f"{render_pd
+0001b690: 665f 7072 696d 6974 6976 6528 7374 796c  f_primitive(styl
+0001b6a0: 655f 6469 6374 5f6e 616d 6529 7d20 6773  e_dict_name)} gs
+0001b6b0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0001b6c0: 2020 2072 656e 6465 725f 6c69 7374 2e69     render_list.i
+0001b6d0: 6e73 6572 7428 0a20 2020 2020 2020 2020  nsert(.         
+0001b6e0: 2020 2020 2020 2020 2020 2033 2c0a 2020             3,.  
+0001b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b700: 2020 7265 6e64 6572 5f70 6466 5f70 7269    render_pdf_pri
+0001b710: 6d69 7469 7665 2873 7479 6c65 2e73 7472  mitive(style.str
+0001b720: 6f6b 655f 6461 7368 5f70 6174 7465 726e  oke_dash_pattern
+0001b730: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001b740: 2020 2020 2020 2b20 6622 207b 6e75 6d62        + f" {numb
+0001b750: 6572 5f74 6f5f 7374 7228 7374 796c 652e  er_to_str(style.
+0001b760: 7374 726f 6b65 5f64 6173 685f 7068 6173  stroke_dash_phas
+0001b770: 6529 7d20 6422 2c0a 2020 2020 2020 2020  e)} d",.        
+0001b780: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0001b790: 2020 2020 2020 2072 656e 6465 725f 6c69         render_li
+0001b7a0: 7374 2e61 7070 656e 6428 2251 2229 0a0a  st.append("Q")..
+0001b7b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001b7c0: 726e 2022 2022 2e6a 6f69 6e28 7265 6e64  rn " ".join(rend
+0001b7d0: 6572 5f6c 6973 7429 0a0a 2020 2020 2020  er_list)..      
+0001b7e0: 2020 7265 7475 726e 2022 220a 0a0a 636c    return ""...cl
+0001b7f0: 6173 7320 5061 696e 7465 6450 6174 683a  ass PaintedPath:
+0001b800: 0a20 2020 2022 2222 0a20 2020 2041 2070  .    """.    A p
+0001b810: 6174 6820 746f 2062 6520 6472 6177 6e20  ath to be drawn 
+0001b820: 6279 2074 6865 2050 4446 2072 656e 6465  by the PDF rende
+0001b830: 7265 722e 0a0a 2020 2020 4120 7061 696e  rer...    A pain
+0001b840: 7465 6420 7061 7468 2069 7320 6465 6669  ted path is defi
+0001b850: 6e65 6420 6279 2061 2073 7479 6c65 2061  ned by a style a
+0001b860: 6e64 2061 6e20 6172 6269 7472 6172 7920  nd an arbitrary 
+0001b870: 7365 7175 656e 6365 206f 6620 7061 7468  sequence of path
+0001b880: 2065 6c65 6d65 6e74 732c 0a20 2020 2077   elements,.    w
+0001b890: 6869 6368 2069 6e63 6c75 6465 2074 6865  hich include the
+0001b8a0: 2070 7269 6d69 7469 7665 2070 6174 6820   primitive path 
+0001b8b0: 656c 656d 656e 7473 2028 604d 6f76 6560  elements (`Move`
+0001b8c0: 2c20 604c 696e 6560 2c20 6042 657a 6965  , `Line`, `Bezie
+0001b8d0: 7243 7572 7665 602c 202e 2e2e 2920 6173  rCurve`, ...) as
+0001b8e0: 0a20 2020 2077 656c 6c20 6173 2061 7262  .    well as arb
+0001b8f0: 6974 7261 7269 6c79 206e 6573 7465 6420  itrarily nested 
+0001b900: 6047 7261 7068 6963 7343 6f6e 7465 7874  `GraphicsContext
+0001b910: 6020 636f 6e74 6169 6e69 6e67 2074 6865  ` containing the
+0001b920: 6972 206f 776e 2073 6571 7565 6e63 6520  ir own sequence 
+0001b930: 6f66 0a20 2020 2070 7269 6d69 7469 7665  of.    primitive
+0001b940: 2070 6174 6820 656c 656d 656e 7473 2061   path elements a
+0001b950: 6e64 2060 4772 6170 6869 6373 436f 6e74  nd `GraphicsCont
+0001b960: 6578 7460 2e0a 2020 2020 2222 220a 0a20  ext`..    """.. 
+0001b970: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0001b980: 7365 6c66 2c20 783d 302c 2079 3d30 293a  self, x=0, y=0):
+0001b990: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
+0001b9a0: 6f6f 745f 6772 6170 6869 6373 5f63 6f6e  oot_graphics_con
+0001b9b0: 7465 7874 203d 2047 7261 7068 6963 7343  text = GraphicsC
+0001b9c0: 6f6e 7465 7874 2829 0a20 2020 2020 2020  ontext().       
+0001b9d0: 2073 656c 662e 5f67 7261 7068 6963 735f   self._graphics_
+0001b9e0: 636f 6e74 6578 7420 3d20 7365 6c66 2e5f  context = self._
+0001b9f0: 726f 6f74 5f67 7261 7068 6963 735f 636f  root_graphics_co
+0001ba00: 6e74 6578 740a 0a20 2020 2020 2020 2073  ntext..        s
+0001ba10: 656c 662e 5f63 6c6f 7365 6420 3d20 5472  elf._closed = Tr
+0001ba20: 7565 0a20 2020 2020 2020 2073 656c 662e  ue.        self.
+0001ba30: 5f63 6c6f 7365 5f63 6f6e 7465 7874 203d  _close_context =
+0001ba40: 2073 656c 662e 5f67 7261 7068 6963 735f   self._graphics_
+0001ba50: 636f 6e74 6578 740a 0a20 2020 2020 2020  context..       
+0001ba60: 2073 656c 662e 5f73 7461 7274 6572 5f6d   self._starter_m
+0001ba70: 6f76 6520 3d20 4d6f 7665 2850 6f69 6e74  ove = Move(Point
+0001ba80: 2878 2c20 7929 290a 0a20 2020 2064 6566  (x, y))..    def
+0001ba90: 205f 5f64 6565 7063 6f70 795f 5f28 7365   __deepcopy__(se
+0001baa0: 6c66 2c20 6d65 6d6f 293a 0a20 2020 2020  lf, memo):.     
+0001bab0: 2020 2023 2074 6865 7265 2773 206e 6f20     # there's no 
+0001bac0: 7265 616c 2077 6179 2074 6f20 7265 636f  real way to reco
+0001bad0: 7665 7220 7468 6520 6d61 7463 6869 6e67  ver the matching
+0001bae0: 2063 7572 7265 6e74 205f 6772 6170 6869   current _graphi
+0001baf0: 6373 5f63 6f6e 7465 7874 2061 6674 6572  cs_context after
+0001bb00: 0a20 2020 2020 2020 2023 2063 6f70 7969  .        # copyi
+0001bb10: 6e67 2074 6865 2072 6f6f 7420 636f 6e74  ng the root cont
+0001bb20: 6578 742c 2062 7574 2074 6861 7427 7320  ext, but that's 
+0001bb30: 6f6b 2062 6563 6175 7365 2077 6520 6361  ok because we ca
+0001bb40: 6e20 6a75 7374 2064 6973 616c 6c6f 7720  n just disallow 
+0001bb50: 636f 7079 696e 670a 2020 2020 2020 2020  copying.        
+0001bb60: 2320 6f66 2070 6174 6873 2075 6e64 6572  # of paths under
+0001bb70: 206d 6f64 6966 6963 6174 696f 6e20 6173   modification as
+0001bb80: 2074 6861 7420 6973 2061 6c6d 6f73 7420   that is almost 
+0001bb90: 6365 7274 6169 6e6c 7920 7772 6f6e 6720  certainly wrong 
+0001bba0: 7573 6167 652e 0a20 2020 2020 2020 2069  usage..        i
+0001bbb0: 6620 7365 6c66 2e5f 6772 6170 6869 6373  f self._graphics
+0001bbc0: 5f63 6f6e 7465 7874 2069 7320 6e6f 7420  _context is not 
+0001bbd0: 7365 6c66 2e5f 726f 6f74 5f67 7261 7068  self._root_graph
+0001bbe0: 6963 735f 636f 6e74 6578 743a 0a20 2020  ics_context:.   
+0001bbf0: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+0001bc00: 756e 7469 6d65 4572 726f 7228 6622 6361  untimeError(f"ca
+0001bc10: 6e6e 6f74 2063 6f70 7920 7061 7468 207b  nnot copy path {
+0001bc20: 7365 6c66 7d20 7768 696c 6520 6974 2069  self} while it i
+0001bc30: 7320 6265 696e 6720 6d6f 6469 6669 6564  s being modified
+0001bc40: 2229 0a0a 2020 2020 2020 2020 636f 7069  ")..        copi
+0001bc50: 6564 203d 2073 656c 662e 5f5f 636c 6173  ed = self.__clas
+0001bc60: 735f 5f28 290a 2020 2020 2020 2020 636f  s__().        co
+0001bc70: 7069 6564 2e5f 726f 6f74 5f67 7261 7068  pied._root_graph
+0001bc80: 6963 735f 636f 6e74 6578 7420 3d20 636f  ics_context = co
+0001bc90: 7079 2e64 6565 7063 6f70 7928 7365 6c66  py.deepcopy(self
+0001bca0: 2e5f 726f 6f74 5f67 7261 7068 6963 735f  ._root_graphics_
+0001bcb0: 636f 6e74 6578 742c 206d 656d 6f29 0a20  context, memo). 
+0001bcc0: 2020 2020 2020 2063 6f70 6965 642e 5f67         copied._g
+0001bcd0: 7261 7068 6963 735f 636f 6e74 6578 7420  raphics_context 
+0001bce0: 3d20 636f 7069 6564 2e5f 726f 6f74 5f67  = copied._root_g
+0001bcf0: 7261 7068 6963 735f 636f 6e74 6578 740a  raphics_context.
+0001bd00: 2020 2020 2020 2020 636f 7069 6564 2e5f          copied._
+0001bd10: 636c 6f73 6564 203d 2073 656c 662e 5f63  closed = self._c
+0001bd20: 6c6f 7365 640a 2020 2020 2020 2020 636f  losed.        co
+0001bd30: 7069 6564 2e5f 636c 6f73 655f 636f 6e74  pied._close_cont
+0001bd40: 6578 7420 3d20 636f 7069 6564 2e5f 6772  ext = copied._gr
+0001bd50: 6170 6869 6373 5f63 6f6e 7465 7874 0a0a  aphics_context..
+0001bd60: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+0001bd70: 6f70 6965 640a 0a20 2020 2040 7072 6f70  opied..    @prop
+0001bd80: 6572 7479 0a20 2020 2064 6566 2073 7479  erty.    def sty
+0001bd90: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
+0001bda0: 2020 2222 2254 6865 2060 4772 6170 6869    """The `Graphi
+0001bdb0: 6373 5374 796c 6560 2061 7070 6c69 6564  csStyle` applied
+0001bdc0: 2074 6f20 616c 6c20 656c 656d 656e 7473   to all elements
+0001bdd0: 206f 6620 7468 6973 2070 6174 682e 2222   of this path.""
+0001bde0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+0001bdf0: 2073 656c 662e 5f72 6f6f 745f 6772 6170   self._root_grap
+0001be00: 6869 6373 5f63 6f6e 7465 7874 2e73 7479  hics_context.sty
+0001be10: 6c65 0a0a 2020 2020 4070 726f 7065 7274  le..    @propert
+0001be20: 790a 2020 2020 6465 6620 7472 616e 7366  y.    def transf
+0001be30: 6f72 6d28 7365 6c66 293a 0a20 2020 2020  orm(self):.     
+0001be40: 2020 2022 2222 5468 6520 6054 7261 6e73     """The `Trans
+0001be50: 666f 726d 6020 7468 6174 2061 7070 6c69  form` that appli
+0001be60: 6573 2074 6f20 616c 6c20 6f66 2074 6865  es to all of the
+0001be70: 2065 6c65 6d65 6e74 7320 6f66 2074 6869   elements of thi
+0001be80: 7320 7061 7468 2e22 2222 0a20 2020 2020  s path.""".     
+0001be90: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+0001bea0: 726f 6f74 5f67 7261 7068 6963 735f 636f  root_graphics_co
+0001beb0: 6e74 6578 742e 7472 616e 7366 6f72 6d0a  ntext.transform.
+0001bec0: 0a20 2020 2040 7472 616e 7366 6f72 6d2e  .    @transform.
+0001bed0: 7365 7474 6572 0a20 2020 2064 6566 2074  setter.    def t
+0001bee0: 7261 6e73 666f 726d 2873 656c 662c 2074  ransform(self, t
+0001bef0: 6629 3a0a 2020 2020 2020 2020 7365 6c66  f):.        self
+0001bf00: 2e5f 726f 6f74 5f67 7261 7068 6963 735f  ._root_graphics_
+0001bf10: 636f 6e74 6578 742e 7472 616e 7366 6f72  context.transfor
+0001bf20: 6d20 3d20 7466 0a0a 2020 2020 4070 726f  m = tf..    @pro
+0001bf30: 7065 7274 790a 2020 2020 6465 6620 6175  perty.    def au
+0001bf40: 746f 5f63 6c6f 7365 2873 656c 6629 3a0a  to_close(self):.
+0001bf50: 2020 2020 2020 2020 2222 2249 6620 7472          """If tr
+0001bf60: 7565 2c20 7468 6520 7061 7468 2073 686f  ue, the path sho
+0001bf70: 756c 6420 6175 746f 6d61 7469 6361 6c6c  uld automaticall
+0001bf80: 7920 636c 6f73 6520 6974 7365 6c66 2062  y close itself b
+0001bf90: 6566 6f72 6520 7061 696e 7469 6e67 2e22  efore painting."
+0001bfa0: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0001bfb0: 6e20 7365 6c66 2e73 7479 6c65 2e61 7574  n self.style.aut
+0001bfc0: 6f5f 636c 6f73 650a 0a20 2020 2040 6175  o_close..    @au
+0001bfd0: 746f 5f63 6c6f 7365 2e73 6574 7465 720a  to_close.setter.
+0001bfe0: 2020 2020 6465 6620 6175 746f 5f63 6c6f      def auto_clo
+0001bff0: 7365 2873 656c 662c 2073 686f 756c 6429  se(self, should)
+0001c000: 3a0a 2020 2020 2020 2020 7365 6c66 2e73  :.        self.s
+0001c010: 7479 6c65 2e61 7574 6f5f 636c 6f73 6520  tyle.auto_close 
+0001c020: 3d20 7368 6f75 6c64 0a0a 2020 2020 4070  = should..    @p
+0001c030: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+0001c040: 7061 696e 745f 7275 6c65 2873 656c 6629  paint_rule(self)
+0001c050: 3a0a 2020 2020 2020 2020 2222 224d 616e  :.        """Man
+0001c060: 7561 6c6c 7920 7370 6563 6966 7920 7468  ually specify th
+0001c070: 6520 6050 6174 6850 6169 6e74 5275 6c65  e `PathPaintRule
+0001c080: 6020 746f 2075 7365 2066 6f72 2072 656e  ` to use for ren
+0001c090: 6465 7269 6e67 2074 6865 2070 6174 682e  dering the path.
+0001c0a0: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+0001c0b0: 726e 2073 656c 662e 7374 796c 652e 7061  rn self.style.pa
+0001c0c0: 696e 745f 7275 6c65 0a0a 2020 2020 4070  int_rule..    @p
+0001c0d0: 6169 6e74 5f72 756c 652e 7365 7474 6572  aint_rule.setter
+0001c0e0: 0a20 2020 2064 6566 2070 6169 6e74 5f72  .    def paint_r
+0001c0f0: 756c 6528 7365 6c66 2c20 7374 796c 6529  ule(self, style)
+0001c100: 3a0a 2020 2020 2020 2020 7365 6c66 2e73  :.        self.s
+0001c110: 7479 6c65 2e70 6169 6e74 5f72 756c 6520  tyle.paint_rule 
+0001c120: 3d20 7374 796c 650a 0a20 2020 2040 7072  = style..    @pr
+0001c130: 6f70 6572 7479 0a20 2020 2064 6566 2063  operty.    def c
+0001c140: 6c69 7070 696e 675f 7061 7468 2873 656c  lipping_path(sel
+0001c150: 6629 3a0a 2020 2020 2020 2020 2222 2253  f):.        """S
+0001c160: 6574 2074 6865 2063 6c69 7070 696e 6720  et the clipping 
+0001c170: 7061 7468 2066 6f72 2074 6869 7320 7061  path for this pa
+0001c180: 7468 2e22 2222 0a20 2020 2020 2020 2072  th.""".        r
+0001c190: 6574 7572 6e20 7365 6c66 2e5f 726f 6f74  eturn self._root
+0001c1a0: 5f67 7261 7068 6963 735f 636f 6e74 6578  _graphics_contex
+0001c1b0: 742e 636c 6970 7069 6e67 5f70 6174 680a  t.clipping_path.
+0001c1c0: 0a20 2020 2040 636c 6970 7069 6e67 5f70  .    @clipping_p
+0001c1d0: 6174 682e 7365 7474 6572 0a20 2020 2064  ath.setter.    d
+0001c1e0: 6566 2063 6c69 7070 696e 675f 7061 7468  ef clipping_path
+0001c1f0: 2873 656c 662c 206e 6577 5f63 6c69 7061  (self, new_clipa
+0001c200: 7468 293a 0a20 2020 2020 2020 2073 656c  th):.        sel
+0001c210: 662e 5f72 6f6f 745f 6772 6170 6869 6373  f._root_graphics
+0001c220: 5f63 6f6e 7465 7874 2e63 6c69 7070 696e  _context.clippin
+0001c230: 675f 7061 7468 203d 206e 6577 5f63 6c69  g_path = new_cli
+0001c240: 7061 7468 0a0a 2020 2020 4063 6f6e 7465  path..    @conte
+0001c250: 7874 6d61 6e61 6765 720a 2020 2020 6465  xtmanager.    de
+0001c260: 6620 5f6e 6577 5f67 7261 7068 6963 735f  f _new_graphics_
+0001c270: 636f 6e74 6578 7428 7365 6c66 2c20 5f61  context(self, _a
+0001c280: 7474 6163 683d 5472 7565 293a 0a20 2020  ttach=True):.   
+0001c290: 2020 2020 206f 6c64 5f67 7261 7068 6963       old_graphic
+0001c2a0: 735f 636f 6e74 6578 7420 3d20 7365 6c66  s_context = self
+0001c2b0: 2e5f 6772 6170 6869 6373 5f63 6f6e 7465  ._graphics_conte
+0001c2c0: 7874 0a20 2020 2020 2020 206e 6577 5f67  xt.        new_g
+0001c2d0: 7261 7068 6963 735f 636f 6e74 6578 7420  raphics_context 
+0001c2e0: 3d20 4772 6170 6869 6373 436f 6e74 6578  = GraphicsContex
+0001c2f0: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
+0001c300: 2e5f 6772 6170 6869 6373 5f63 6f6e 7465  ._graphics_conte
+0001c310: 7874 203d 206e 6577 5f67 7261 7068 6963  xt = new_graphic
+0001c320: 735f 636f 6e74 6578 740a 2020 2020 2020  s_context.      
+0001c330: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+0001c340: 2020 2079 6965 6c64 206e 6577 5f67 7261     yield new_gra
+0001c350: 7068 6963 735f 636f 6e74 6578 740a 2020  phics_context.  
+0001c360: 2020 2020 2020 2020 2020 6966 205f 6174            if _at
+0001c370: 7461 6368 3a0a 2020 2020 2020 2020 2020  tach:.          
+0001c380: 2020 2020 2020 6f6c 645f 6772 6170 6869        old_graphi
+0001c390: 6373 5f63 6f6e 7465 7874 2e61 6464 5f69  cs_context.add_i
+0001c3a0: 7465 6d28 6e65 775f 6772 6170 6869 6373  tem(new_graphics
+0001c3b0: 5f63 6f6e 7465 7874 290a 2020 2020 2020  _context).      
+0001c3c0: 2020 6669 6e61 6c6c 793a 0a20 2020 2020    finally:.     
+0001c3d0: 2020 2020 2020 2073 656c 662e 5f67 7261         self._gra
+0001c3e0: 7068 6963 735f 636f 6e74 6578 7420 3d20  phics_context = 
+0001c3f0: 6f6c 645f 6772 6170 6869 6373 5f63 6f6e  old_graphics_con
+0001c400: 7465 7874 0a0a 2020 2020 4063 6f6e 7465  text..    @conte
+0001c410: 7874 6d61 6e61 6765 720a 2020 2020 6465  xtmanager.    de
+0001c420: 6620 7472 616e 7366 6f72 6d5f 6772 6f75  f transform_grou
+0001c430: 7028 7365 6c66 2c20 7472 616e 7366 6f72  p(self, transfor
+0001c440: 6d29 3a0a 2020 2020 2020 2020 2222 220a  m):.        """.
+0001c450: 2020 2020 2020 2020 4170 706c 7920 7468          Apply th
+0001c460: 6520 7072 6f76 6964 6564 2060 5472 616e  e provided `Tran
+0001c470: 7366 6f72 6d60 2074 6f20 616c 6c20 706f  sform` to all po
+0001c480: 696e 7473 2061 6464 6564 2077 6974 6869  ints added withi
+0001c490: 6e20 7468 6973 2063 6f6e 7465 7874 2e0a  n this context..
+0001c4a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001c4b0: 2020 2020 7769 7468 2073 656c 662e 5f6e      with self._n
+0001c4c0: 6577 5f67 7261 7068 6963 735f 636f 6e74  ew_graphics_cont
+0001c4d0: 6578 7428 2920 6173 2063 7478 743a 0a20  ext() as ctxt:. 
+0001c4e0: 2020 2020 2020 2020 2020 2063 7478 742e             ctxt.
+0001c4f0: 7472 616e 7366 6f72 6d20 3d20 7472 616e  transform = tran
+0001c500: 7366 6f72 6d0a 2020 2020 2020 2020 2020  sform.          
+0001c510: 2020 7969 656c 6420 7365 6c66 0a0a 2020    yield self..  
+0001c520: 2020 6465 6620 6164 645f 7061 7468 5f65    def add_path_e
+0001c530: 6c65 6d65 6e74 2873 656c 662c 2069 7465  lement(self, ite
+0001c540: 6d2c 205f 636f 7079 3d54 7275 6529 3a0a  m, _copy=True):.
+0001c550: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001c560: 2020 2020 4164 6420 7468 6520 6769 7665      Add the give
+0001c570: 6e20 656c 656d 656e 7420 6173 2061 2070  n element as a p
+0001c580: 6174 6820 6974 656d 206f 6620 7468 6973  ath item of this
+0001c590: 2070 6174 682e 0a0a 2020 2020 2020 2020   path...        
+0001c5a0: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+0001c5b0: 2020 6974 656d 3a20 7468 6520 6974 656d    item: the item
+0001c5c0: 2074 6f20 6164 6420 746f 2074 6869 7320   to add to this 
+0001c5d0: 7061 7468 2e0a 2020 2020 2020 2020 2020  path..          
+0001c5e0: 2020 5f63 6f70 7920 2862 6f6f 6c29 3a20    _copy (bool): 
+0001c5f0: 6966 2074 7275 6520 2874 6865 2064 6566  if true (the def
+0001c600: 6175 6c74 292c 2074 6865 2069 7465 6d20  ault), the item 
+0001c610: 7769 6c6c 2062 6520 636f 7069 6564 2062  will be copied b
+0001c620: 6566 6f72 6520 6265 696e 670a 2020 2020  efore being.    
+0001c630: 2020 2020 2020 2020 2020 2020 6170 7065              appe
+0001c640: 6e64 6564 2e20 5468 6973 2070 7265 7665  nded. This preve
+0001c650: 6e74 7320 6d6f 6469 6669 6361 7469 6f6e  nts modification
+0001c660: 7320 746f 2061 2072 6566 6572 656e 6365  s to a reference
+0001c670: 6420 6f62 6a65 6374 2066 726f 6d0a 2020  d object from.  
+0001c680: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+0001c690: 6574 726f 6163 7469 7665 6c79 2220 616c  etroactively" al
+0001c6a0: 7465 7269 6e67 2069 7473 2073 7479 6c65  tering its style
+0001c6b0: 2f73 6861 7065 2061 6e64 2073 686f 756c  /shape and shoul
+0001c6c0: 6420 6265 2064 6973 6162 6c65 6420 7769  d be disabled wi
+0001c6d0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+0001c6e0: 2020 2063 6175 7469 6f6e 2e0a 2020 2020     caution..    
+0001c6f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001c700: 6966 2073 656c 662e 5f73 7461 7274 6572  if self._starter
+0001c710: 5f6d 6f76 6520 6973 206e 6f74 204e 6f6e  _move is not Non
+0001c720: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+0001c730: 656c 662e 5f63 6c6f 7365 6420 3d20 4661  elf._closed = Fa
+0001c740: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+0001c750: 7365 6c66 2e5f 6772 6170 6869 6373 5f63  self._graphics_c
+0001c760: 6f6e 7465 7874 2e61 6464 5f69 7465 6d28  ontext.add_item(
+0001c770: 7365 6c66 2e5f 7374 6172 7465 725f 6d6f  self._starter_mo
+0001c780: 7665 2c20 5f63 6f70 793d 4661 6c73 6529  ve, _copy=False)
+0001c790: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001c7a0: 662e 5f63 6c6f 7365 5f63 6f6e 7465 7874  f._close_context
+0001c7b0: 203d 2073 656c 662e 5f67 7261 7068 6963   = self._graphic
+0001c7c0: 735f 636f 6e74 6578 740a 2020 2020 2020  s_context.      
+0001c7d0: 2020 2020 2020 7365 6c66 2e5f 7374 6172        self._star
+0001c7e0: 7465 725f 6d6f 7665 203d 204e 6f6e 650a  ter_move = None.
+0001c7f0: 0a20 2020 2020 2020 2073 656c 662e 5f67  .        self._g
+0001c800: 7261 7068 6963 735f 636f 6e74 6578 742e  raphics_context.
+0001c810: 6164 645f 6974 656d 2869 7465 6d2c 205f  add_item(item, _
+0001c820: 636f 7079 3d5f 636f 7079 290a 0a20 2020  copy=_copy)..   
+0001c830: 2064 6566 2072 656d 6f76 655f 6c61 7374   def remove_last
+0001c840: 5f70 6174 685f 656c 656d 656e 7428 7365  _path_element(se
+0001c850: 6c66 293a 0a20 2020 2020 2020 2073 656c  lf):.        sel
+0001c860: 662e 5f67 7261 7068 6963 735f 636f 6e74  f._graphics_cont
+0001c870: 6578 742e 7265 6d6f 7665 5f6c 6173 745f  ext.remove_last_
+0001c880: 6974 656d 2829 0a0a 2020 2020 6465 6620  item()..    def 
+0001c890: 7265 6374 616e 676c 6528 7365 6c66 2c20  rectangle(self, 
+0001c8a0: 782c 2079 2c20 772c 2068 2c20 7278 3d30  x, y, w, h, rx=0
+0001c8b0: 2c20 7279 3d30 293a 0a20 2020 2020 2020  , ry=0):.       
+0001c8c0: 2022 2222 0a20 2020 2020 2020 2041 7070   """.        App
+0001c8d0: 656e 6420 6120 7265 6374 616e 676c 6520  end a rectangle 
+0001c8e0: 6173 2061 2063 6c6f 7365 6420 7375 6270  as a closed subp
+0001c8f0: 6174 6820 746f 2074 6865 2063 7572 7265  ath to the curre
+0001c900: 6e74 2070 6174 682e 0a0a 2020 2020 2020  nt path...      
+0001c910: 2020 4966 2074 6865 2077 6964 7468 206f    If the width o
+0001c920: 7220 7468 6520 6865 6967 6874 2061 7265  r the height are
+0001c930: 2030 2c20 7468 6520 7265 6374 616e 676c   0, the rectangl
+0001c940: 6520 7769 6c6c 2062 6520 636f 6c6c 6170  e will be collap
+0001c950: 7365 6420 746f 2061 206c 696e 650a 2020  sed to a line.  
+0001c960: 2020 2020 2020 2875 6e6c 6573 7320 7468        (unless th
+0001c970: 6579 2772 6520 626f 7468 2030 2c20 696e  ey're both 0, in
+0001c980: 2077 6869 6368 2063 6173 6520 6974 2773   which case it's
+0001c990: 2063 6f6c 6c61 7073 6564 2074 6f20 6e6f   collapsed to no
+0001c9a0: 7468 696e 6729 2e0a 0a20 2020 2020 2020  thing)...       
+0001c9b0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+0001c9c0: 2020 2078 2028 4e75 6d62 6572 293a 2074     x (Number): t
+0001c9d0: 6865 2061 6273 6369 7373 6120 6f66 2074  he abscissa of t
+0001c9e0: 6865 2073 7461 7274 696e 6720 636f 726e  he starting corn
+0001c9f0: 6572 206f 6620 7468 6520 7265 6374 616e  er of the rectan
+0001ca00: 676c 652e 0a20 2020 2020 2020 2020 2020  gle..           
+0001ca10: 2079 2028 4e75 6d62 6572 293a 2074 6865   y (Number): the
+0001ca20: 206f 7264 696e 6174 6520 6f66 2074 6865   ordinate of the
+0001ca30: 2073 7461 7274 696e 6720 636f 726e 6572   starting corner
+0001ca40: 206f 6620 7468 6520 7265 6374 616e 676c   of the rectangl
+0001ca50: 652e 0a20 2020 2020 2020 2020 2020 2077  e..            w
+0001ca60: 2028 4e75 6d62 6572 293a 2074 6865 2077   (Number): the w
+0001ca70: 6964 7468 206f 6620 7468 6520 7265 6374  idth of the rect
+0001ca80: 616e 676c 6520 2869 6620 302c 2074 6865  angle (if 0, the
+0001ca90: 2072 6563 7461 6e67 6c65 2077 696c 6c20   rectangle will 
+0001caa0: 6265 0a20 2020 2020 2020 2020 2020 2020  be.             
+0001cab0: 2020 2072 656e 6465 7265 6420 6173 2061     rendered as a
+0001cac0: 2076 6572 7469 6361 6c20 6c69 6e65 292e   vertical line).
+0001cad0: 0a20 2020 2020 2020 2020 2020 2068 2028  .            h (
+0001cae0: 4e75 6d62 6572 293a 2074 6865 2068 6569  Number): the hei
+0001caf0: 6768 7420 6f66 2074 6865 2072 6563 7461  ght of the recta
+0001cb00: 6e67 6c65 2028 6966 2030 2c20 7468 6520  ngle (if 0, the 
+0001cb10: 7265 6374 616e 676c 6520 7769 6c6c 2062  rectangle will b
+0001cb20: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001cb30: 2020 7265 6e64 6572 6564 2061 7320 6120    rendered as a 
+0001cb40: 686f 7269 7a6f 6e74 616c 206c 696e 6529  horizontal line)
+0001cb50: 2e0a 2020 2020 2020 2020 2020 2020 7278  ..            rx
+0001cb60: 2028 4e75 6d62 6572 293a 2074 6865 2078   (Number): the x
+0001cb70: 2d72 6164 6975 7320 6f66 2074 6865 2072  -radius of the r
+0001cb80: 6563 7461 6e67 6c65 2072 6f75 6e64 6564  ectangle rounded
+0001cb90: 2063 6f72 6e65 7220 2869 6620 3020 7468   corner (if 0 th
+0001cba0: 6520 636f 726e 6572 730a 2020 2020 2020  e corners.      
+0001cbb0: 2020 2020 2020 2020 2020 7769 6c6c 206e            will n
+0001cbc0: 6f74 2062 6520 726f 756e 6465 6429 2e0a  ot be rounded)..
+0001cbd0: 2020 2020 2020 2020 2020 2020 7279 2028              ry (
+0001cbe0: 4e75 6d62 6572 293a 2074 6865 2079 2d72  Number): the y-r
+0001cbf0: 6164 6975 7320 6f66 2074 6865 2072 6563  adius of the rec
+0001cc00: 7461 6e67 6c65 2072 6f75 6e64 6564 2063  tangle rounded c
+0001cc10: 6f72 6e65 7220 2869 6620 3020 7468 6520  orner (if 0 the 
+0001cc20: 636f 726e 6572 730a 2020 2020 2020 2020  corners.        
+0001cc30: 2020 2020 2020 2020 7769 6c6c 206e 6f74          will not
+0001cc40: 2062 6520 726f 756e 6465 6429 2e0a 0a20   be rounded)... 
+0001cc50: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+0001cc60: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0001cc70: 7061 7468 2c20 746f 2061 6c6c 6f77 2063  path, to allow c
+0001cc80: 6861 696e 696e 6720 6d65 7468 6f64 2063  haining method c
+0001cc90: 616c 6c73 2e0a 2020 2020 2020 2020 2222  alls..        ""
+0001cca0: 220a 0a20 2020 2020 2020 2073 656c 662e  "..        self.
+0001ccb0: 5f69 6e73 6572 745f 696d 706c 6963 6974  _insert_implicit
+0001ccc0: 5f63 6c6f 7365 5f69 665f 6f70 656e 2829  _close_if_open()
+0001ccd0: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+0001cce0: 645f 7061 7468 5f65 6c65 6d65 6e74 280a  d_path_element(.
+0001ccf0: 2020 2020 2020 2020 2020 2020 526f 756e              Roun
+0001cd00: 6465 6452 6563 7461 6e67 6c65 2850 6f69  dedRectangle(Poi
+0001cd10: 6e74 2878 2c20 7929 2c20 506f 696e 7428  nt(x, y), Point(
+0001cd20: 772c 2068 292c 2050 6f69 6e74 2872 782c  w, h), Point(rx,
+0001cd30: 2072 7929 292c 205f 636f 7079 3d46 616c   ry)), _copy=Fal
+0001cd40: 7365 0a20 2020 2020 2020 2029 0a20 2020  se.        ).   
+0001cd50: 2020 2020 2073 656c 662e 5f63 6c6f 7365       self._close
+0001cd60: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+0001cd70: 2073 656c 662e 6d6f 7665 5f74 6f28 782c   self.move_to(x,
+0001cd80: 2079 290a 0a20 2020 2020 2020 2072 6574   y)..        ret
+0001cd90: 7572 6e20 7365 6c66 0a0a 2020 2020 6465  urn self..    de
+0001cda0: 6620 6369 7263 6c65 2873 656c 662c 2063  f circle(self, c
+0001cdb0: 782c 2063 792c 2072 293a 0a20 2020 2020  x, cy, r):.     
+0001cdc0: 2020 2022 2222 0a20 2020 2020 2020 2041     """.        A
+0001cdd0: 7070 656e 6420 6120 6369 7263 6c65 2061  ppend a circle a
+0001cde0: 7320 6120 636c 6f73 6564 2073 7562 7061  s a closed subpa
+0001cdf0: 7468 2074 6f20 7468 6520 6375 7272 656e  th to the curren
+0001ce00: 7420 7061 7468 2e0a 0a20 2020 2020 2020  t path...       
+0001ce10: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+0001ce20: 2020 2063 7820 284e 756d 6265 7229 3a20     cx (Number): 
+0001ce30: 7468 6520 6162 7363 6973 7361 206f 6620  the abscissa of 
+0001ce40: 7468 6520 6369 7263 6c65 2773 2063 656e  the circle's cen
+0001ce50: 7465 7220 706f 696e 742e 0a20 2020 2020  ter point..     
+0001ce60: 2020 2020 2020 2063 7920 284e 756d 6265         cy (Numbe
+0001ce70: 7229 3a20 7468 6520 6f72 6469 6e61 7465  r): the ordinate
+0001ce80: 206f 6620 7468 6520 6369 7263 6c65 2773   of the circle's
+0001ce90: 2063 656e 7465 7220 706f 696e 742e 0a20   center point.. 
+0001cea0: 2020 2020 2020 2020 2020 2072 2028 4e75             r (Nu
+0001ceb0: 6d62 6572 293a 2074 6865 2072 6164 6975  mber): the radiu
+0001cec0: 7320 6f66 2074 6865 2063 6972 636c 652e  s of the circle.
+0001ced0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0001cee0: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
+0001cef0: 6865 2070 6174 682c 2074 6f20 616c 6c6f  he path, to allo
+0001cf00: 7720 6368 6169 6e69 6e67 206d 6574 686f  w chaining metho
+0001cf10: 6420 6361 6c6c 732e 0a20 2020 2020 2020  d calls..       
+0001cf20: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+0001cf30: 7572 6e20 7365 6c66 2e65 6c6c 6970 7365  urn self.ellipse
+0001cf40: 2863 782c 2063 792c 2072 2c20 7229 0a0a  (cx, cy, r, r)..
+0001cf50: 2020 2020 6465 6620 656c 6c69 7073 6528      def ellipse(
+0001cf60: 7365 6c66 2c20 6378 2c20 6379 2c20 7278  self, cx, cy, rx
+0001cf70: 2c20 7279 293a 0a20 2020 2020 2020 2022  , ry):.        "
+0001cf80: 2222 0a20 2020 2020 2020 2041 7070 656e  "".        Appen
+0001cf90: 6420 616e 2065 6c6c 6970 7365 2061 7320  d an ellipse as 
+0001cfa0: 6120 636c 6f73 6564 2073 7562 7061 7468  a closed subpath
+0001cfb0: 2074 6f20 7468 6520 6375 7272 656e 7420   to the current 
+0001cfc0: 7061 7468 2e0a 0a20 2020 2020 2020 2041  path...        A
+0001cfd0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+0001cfe0: 2063 7820 284e 756d 6265 7229 3a20 7468   cx (Number): th
+0001cff0: 6520 6162 7363 6973 7361 206f 6620 7468  e abscissa of th
+0001d000: 6520 656c 6c69 7073 6527 7320 6365 6e74  e ellipse's cent
+0001d010: 6572 2070 6f69 6e74 2e0a 2020 2020 2020  er point..      
+0001d020: 2020 2020 2020 6379 2028 4e75 6d62 6572        cy (Number
+0001d030: 293a 2074 6865 206f 7264 696e 6174 6520  ): the ordinate 
+0001d040: 6f66 2074 6865 2065 6c6c 6970 7365 2773  of the ellipse's
+0001d050: 2063 656e 7465 7220 706f 696e 742e 0a20   center point.. 
+0001d060: 2020 2020 2020 2020 2020 2072 7820 284e             rx (N
+0001d070: 756d 6265 7229 3a20 7468 6520 782d 7261  umber): the x-ra
+0001d080: 6469 7573 206f 6620 7468 6520 656c 6c69  dius of the elli
+0001d090: 7073 652e 0a20 2020 2020 2020 2020 2020  pse..           
+0001d0a0: 2072 7920 284e 756d 6265 7229 3a20 7468   ry (Number): th
+0001d0b0: 6520 792d 7261 6469 7573 206f 6620 7468  e y-radius of th
+0001d0c0: 6520 656c 6c69 7073 652e 0a0a 2020 2020  e ellipse...    
+0001d0d0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+0001d0e0: 2020 2020 2020 2020 2054 6865 2070 6174           The pat
+0001d0f0: 682c 2074 6f20 616c 6c6f 7720 6368 6169  h, to allow chai
+0001d100: 6e69 6e67 206d 6574 686f 6420 6361 6c6c  ning method call
+0001d110: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+0001d120: 2020 2020 2020 2073 656c 662e 5f69 6e73         self._ins
+0001d130: 6572 745f 696d 706c 6963 6974 5f63 6c6f  ert_implicit_clo
+0001d140: 7365 5f69 665f 6f70 656e 2829 0a20 2020  se_if_open().   
+0001d150: 2020 2020 2073 656c 662e 6164 645f 7061       self.add_pa
+0001d160: 7468 5f65 6c65 6d65 6e74 2845 6c6c 6970  th_element(Ellip
+0001d170: 7365 2850 6f69 6e74 2872 782c 2072 7929  se(Point(rx, ry)
+0001d180: 2c20 506f 696e 7428 6378 2c20 6379 2929  , Point(cx, cy))
+0001d190: 2c20 5f63 6f70 793d 4661 6c73 6529 0a20  , _copy=False). 
+0001d1a0: 2020 2020 2020 2073 656c 662e 5f63 6c6f         self._clo
+0001d1b0: 7365 6420 3d20 5472 7565 0a20 2020 2020  sed = True.     
+0001d1c0: 2020 2073 656c 662e 6d6f 7665 5f74 6f28     self.move_to(
+0001d1d0: 6378 2c20 6379 290a 0a20 2020 2020 2020  cx, cy)..       
+0001d1e0: 2072 6574 7572 6e20 7365 6c66 0a0a 2020   return self..  
+0001d1f0: 2020 6465 6620 6d6f 7665 5f74 6f28 7365    def move_to(se
+0001d200: 6c66 2c20 782c 2079 293a 0a20 2020 2020  lf, x, y):.     
+0001d210: 2020 2022 2222 0a20 2020 2020 2020 2053     """.        S
+0001d220: 7461 7274 2061 206e 6577 2073 7562 7061  tart a new subpa
+0001d230: 7468 206f 7220 6d6f 7665 2074 6865 2070  th or move the p
+0001d240: 6174 6820 7374 6172 7469 6e67 2070 6f69  ath starting poi
+0001d250: 6e74 2e0a 0a20 2020 2020 2020 2049 6620  nt...        If 
+0001d260: 6e6f 2070 6174 6820 656c 656d 656e 7473  no path elements
+0001d270: 2068 6176 6520 6265 656e 2061 6464 6564   have been added
+0001d280: 2079 6574 2c20 7468 6973 2077 696c 6c20   yet, this will 
+0001d290: 6368 616e 6765 2074 6865 2070 6174 6820  change the path 
+0001d2a0: 7374 6172 7469 6e67 0a20 2020 2020 2020  starting.       
+0001d2b0: 2070 6f69 6e74 2e20 4966 2070 6174 6820   point. If path 
+0001d2c0: 656c 656d 656e 7473 2068 6176 6520 6265  elements have be
+0001d2d0: 656e 2061 6464 6564 2c20 7468 6973 2077  en added, this w
+0001d2e0: 696c 6c20 696e 7365 7274 2061 6e20 696d  ill insert an im
+0001d2f0: 706c 6963 6974 2063 6c6f 7365 2069 6e0a  plicit close in.
+0001d300: 2020 2020 2020 2020 6f72 6465 7220 746f          order to
+0001d310: 2073 7461 7274 2061 206e 6577 2073 7562   start a new sub
+0001d320: 7061 7468 2e0a 0a20 2020 2020 2020 2041  path...        A
+0001d330: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+0001d340: 2078 2028 4e75 6d62 6572 293a 2061 6273   x (Number): abs
+0001d350: 6369 7373 6120 6f66 2074 6865 2028 7375  cissa of the (su
+0001d360: 6229 7061 7468 2073 7461 7274 696e 6720  b)path starting 
+0001d370: 706f 696e 742e 0a20 2020 2020 2020 2020  point..         
+0001d380: 2020 2079 2028 4e75 6d62 6572 293a 206f     y (Number): o
+0001d390: 7264 696e 6174 6520 6f66 2074 6865 2028  rdinate of the (
+0001d3a0: 7375 6229 7061 7468 2073 7461 7274 696e  sub)path startin
+0001d3b0: 6720 706f 696e 742e 0a0a 2020 2020 2020  g point...      
+0001d3c0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+0001d3d0: 2020 2020 2020 2054 6865 2070 6174 682c         The path,
+0001d3e0: 2074 6f20 616c 6c6f 7720 6368 6169 6e69   to allow chaini
+0001d3f0: 6e67 206d 6574 686f 6420 6361 6c6c 732e  ng method calls.
+0001d400: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0001d410: 2020 2020 2073 656c 662e 5f69 6e73 6572       self._inser
+0001d420: 745f 696d 706c 6963 6974 5f63 6c6f 7365  t_implicit_close
+0001d430: 5f69 665f 6f70 656e 2829 0a20 2020 2020  _if_open().     
+0001d440: 2020 2073 656c 662e 5f73 7461 7274 6572     self._starter
+0001d450: 5f6d 6f76 6520 3d20 4d6f 7665 2850 6f69  _move = Move(Poi
+0001d460: 6e74 2878 2c20 7929 290a 2020 2020 2020  nt(x, y)).      
+0001d470: 2020 7265 7475 726e 2073 656c 660a 0a20    return self.. 
+0001d480: 2020 2064 6566 206d 6f76 655f 7265 6c61     def move_rela
+0001d490: 7469 7665 2873 656c 662c 2078 2c20 7929  tive(self, x, y)
+0001d4a0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0001d4b0: 2020 2020 2020 5374 6172 7420 6120 6e65        Start a ne
+0001d4c0: 7720 7375 6270 6174 6820 6f72 206d 6f76  w subpath or mov
+0001d4d0: 6520 7468 6520 7061 7468 2073 7461 7274  e the path start
+0001d4e0: 2070 6f69 6e74 2072 656c 6174 6976 6520   point relative 
+0001d4f0: 746f 2074 6865 2070 7265 7669 6f75 7320  to the previous 
+0001d500: 706f 696e 742e 0a0a 2020 2020 2020 2020  point...        
+0001d510: 4966 206e 6f20 7061 7468 2065 6c65 6d65  If no path eleme
+0001d520: 6e74 7320 6861 7665 2062 6565 6e20 6164  nts have been ad
+0001d530: 6465 6420 7965 742c 2074 6869 7320 7769  ded yet, this wi
+0001d540: 6c6c 2063 6861 6e67 6520 7468 6520 7061  ll change the pa
+0001d550: 7468 2073 7461 7274 696e 670a 2020 2020  th starting.    
+0001d560: 2020 2020 706f 696e 742e 2049 6620 7061      point. If pa
+0001d570: 7468 2065 6c65 6d65 6e74 7320 6861 7665  th elements have
+0001d580: 2062 6565 6e20 6164 6465 642c 2074 6869   been added, thi
+0001d590: 7320 7769 6c6c 2069 6e73 6572 7420 616e  s will insert an
+0001d5a0: 2069 6d70 6c69 6369 7420 636c 6f73 6520   implicit close 
+0001d5b0: 696e 0a20 2020 2020 2020 206f 7264 6572  in.        order
+0001d5c0: 2074 6f20 7374 6172 7420 6120 6e65 7720   to start a new 
+0001d5d0: 7375 6270 6174 682e 0a0a 2020 2020 2020  subpath...      
+0001d5e0: 2020 5468 6973 2077 696c 6c20 6f76 6572    This will over
+0001d5f0: 7772 6974 6520 616e 2061 6273 6f6c 7574  write an absolut
+0001d600: 6520 6d6f 7665 5f74 6f20 6173 206c 6f6e  e move_to as lon
+0001d610: 6720 6173 206e 6f20 6e6f 6e2d 6d6f 7665  g as no non-move
+0001d620: 2070 6174 6820 6974 656d 7320 6861 7665   path items have
+0001d630: 0a20 2020 2020 2020 2062 6565 6e20 6170  .        been ap
+0001d640: 7065 6e64 6564 2e20 5468 6520 7265 6c61  pended. The rela
+0001d650: 7469 7665 2070 6f73 6974 696f 6e20 6973  tive position is
+0001d660: 2072 6573 6f6c 7665 6420 6672 6f6d 2074   resolved from t
+0001d670: 6865 2070 7265 7669 6f75 7320 6974 656d  he previous item
+0001d680: 2077 6865 6e0a 2020 2020 2020 2020 7468   when.        th
+0001d690: 6520 7061 7468 2069 7320 6265 696e 6720  e path is being 
+0001d6a0: 7265 6e64 6572 6564 2c20 6f72 2066 726f  rendered, or fro
+0001d6b0: 6d20 302c 2030 2069 6620 6974 2069 7320  m 0, 0 if it is 
+0001d6c0: 7468 6520 6669 7273 7420 6974 656d 2e0a  the first item..
+0001d6d0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+0001d6e0: 2020 2020 2020 2020 2020 2078 2028 4e75             x (Nu
+0001d6f0: 6d62 6572 293a 2061 6273 6369 7373 6120  mber): abscissa 
+0001d700: 6f66 2074 6865 2028 7375 6229 7061 7468  of the (sub)path
+0001d710: 2073 7461 7274 696e 6720 706f 696e 7420   starting point 
+0001d720: 7265 6c61 7469 7665 2074 6f20 7468 652e  relative to the.
+0001d730: 0a20 2020 2020 2020 2020 2020 2079 2028  .            y (
+0001d740: 4e75 6d62 6572 293a 206f 7264 696e 6174  Number): ordinat
+0001d750: 6520 6f66 2074 6865 2028 7375 6229 7061  e of the (sub)pa
+0001d760: 7468 2073 7461 7274 696e 6720 706f 696e  th starting poin
+0001d770: 7420 7265 6c61 7469 7665 2074 6f20 7468  t relative to th
+0001d780: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
+0001d790: 2020 2020 2020 2073 656c 662e 5f69 6e73         self._ins
+0001d7a0: 6572 745f 696d 706c 6963 6974 5f63 6c6f  ert_implicit_clo
+0001d7b0: 7365 5f69 665f 6f70 656e 2829 0a20 2020  se_if_open().   
+0001d7c0: 2020 2020 2069 6620 7365 6c66 2e5f 7374       if self._st
+0001d7d0: 6172 7465 725f 6d6f 7665 2069 7320 6e6f  arter_move is no
+0001d7e0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0001d7f0: 2020 2020 7365 6c66 2e5f 636c 6f73 6564      self._closed
+0001d800: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+0001d810: 2020 2020 2073 656c 662e 5f67 7261 7068       self._graph
+0001d820: 6963 735f 636f 6e74 6578 742e 6164 645f  ics_context.add_
+0001d830: 6974 656d 2873 656c 662e 5f73 7461 7274  item(self._start
+0001d840: 6572 5f6d 6f76 652c 205f 636f 7079 3d46  er_move, _copy=F
+0001d850: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
+0001d860: 2020 7365 6c66 2e5f 636c 6f73 655f 636f    self._close_co
+0001d870: 6e74 6578 7420 3d20 7365 6c66 2e5f 6772  ntext = self._gr
+0001d880: 6170 6869 6373 5f63 6f6e 7465 7874 0a20  aphics_context. 
+0001d890: 2020 2020 2020 2073 656c 662e 5f73 7461         self._sta
+0001d8a0: 7274 6572 5f6d 6f76 6520 3d20 5265 6c61  rter_move = Rela
+0001d8b0: 7469 7665 4d6f 7665 2850 6f69 6e74 2878  tiveMove(Point(x
+0001d8c0: 2c20 7929 290a 2020 2020 2020 2020 7265  , y)).        re
+0001d8d0: 7475 726e 2073 656c 660a 0a20 2020 2064  turn self..    d
+0001d8e0: 6566 206c 696e 655f 746f 2873 656c 662c  ef line_to(self,
+0001d8f0: 2078 2c20 7929 3a0a 2020 2020 2020 2020   x, y):.        
+0001d900: 2222 220a 2020 2020 2020 2020 4170 7065  """.        Appe
+0001d910: 6e64 2061 2073 7472 6169 6768 7420 6c69  nd a straight li
+0001d920: 6e65 2074 6f20 7468 6973 2070 6174 682e  ne to this path.
+0001d930: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+0001d940: 2020 2020 2020 2020 2020 2020 7820 284e              x (N
+0001d950: 756d 6265 7229 3a20 6162 7363 6973 7361  umber): abscissa
+0001d960: 2074 6865 206c 696e 6527 7320 656e 6420   the line's end 
+0001d970: 706f 696e 742e 0a20 2020 2020 2020 2020  point..         
+0001d980: 2020 2079 2028 4e75 6d62 6572 293a 206f     y (Number): o
+0001d990: 7264 696e 6174 6520 6f66 2074 6865 206c  rdinate of the l
+0001d9a0: 696e 6527 7320 656e 6420 706f 696e 742e  ine's end point.
+0001d9b0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0001d9c0: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
+0001d9d0: 6865 2070 6174 682c 2074 6f20 616c 6c6f  he path, to allo
+0001d9e0: 7720 6368 6169 6e69 6e67 206d 6574 686f  w chaining metho
+0001d9f0: 6420 6361 6c6c 732e 0a20 2020 2020 2020  d calls..       
+0001da00: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+0001da10: 662e 6164 645f 7061 7468 5f65 6c65 6d65  f.add_path_eleme
+0001da20: 6e74 284c 696e 6528 506f 696e 7428 782c  nt(Line(Point(x,
+0001da30: 2079 2929 2c20 5f63 6f70 793d 4661 6c73   y)), _copy=Fals
+0001da40: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
+0001da50: 6e20 7365 6c66 0a0a 2020 2020 6465 6620  n self..    def 
+0001da60: 6c69 6e65 5f72 656c 6174 6976 6528 7365  line_relative(se
+0001da70: 6c66 2c20 6478 2c20 6479 293a 0a20 2020  lf, dx, dy):.   
+0001da80: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001da90: 2041 7070 656e 6420 6120 7374 7261 6967   Append a straig
+0001daa0: 6874 206c 696e 6520 7768 6f73 6520 656e  ht line whose en
+0001dab0: 6420 6973 2063 6f6d 7075 7465 6420 6173  d is computed as
+0001dac0: 2061 6e20 6f66 6673 6574 2066 726f 6d20   an offset from 
+0001dad0: 7468 6520 656e 6420 6f66 2074 6865 0a20  the end of the. 
+0001dae0: 2020 2020 2020 2070 7265 7669 6f75 7320         previous 
+0001daf0: 7061 7468 2065 6c65 6d65 6e74 2e0a 0a20  path element... 
+0001db00: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+0001db10: 2020 2020 2020 2020 2078 2028 4e75 6d62           x (Numb
+0001db20: 6572 293a 2061 6273 6369 7373 6120 7468  er): abscissa th
+0001db30: 6520 6c69 6e65 2773 2065 6e64 2070 6f69  e line's end poi
+0001db40: 6e74 2072 656c 6174 6976 6520 746f 2074  nt relative to t
+0001db50: 6865 2065 6e64 2070 6f69 6e74 206f 6620  he end point of 
+0001db60: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
+0001db70: 2020 2020 7072 6576 696f 7573 2070 6174      previous pat
+0001db80: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
+0001db90: 2020 2020 2020 2079 2028 4e75 6d62 6572         y (Number
+0001dba0: 293a 206f 7264 696e 6174 6520 6f66 2074  ): ordinate of t
+0001dbb0: 6865 206c 696e 6527 7320 656e 6420 706f  he line's end po
+0001dbc0: 696e 7420 7265 6c61 7469 7665 2074 6f20  int relative to 
+0001dbd0: 7468 6520 656e 6420 706f 696e 7420 6f66  the end point of
+0001dbe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dbf0: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+0001dc00: 7468 2065 6c65 6d65 6e74 2e0a 0a20 2020  th element...   
+0001dc10: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+0001dc20: 2020 2020 2020 2020 2020 5468 6520 7061            The pa
+0001dc30: 7468 2c20 746f 2061 6c6c 6f77 2063 6861  th, to allow cha
+0001dc40: 696e 696e 6720 6d65 7468 6f64 2063 616c  ining method cal
+0001dc50: 6c73 2e0a 2020 2020 2020 2020 2222 220a  ls..        """.
+0001dc60: 2020 2020 2020 2020 7365 6c66 2e61 6464          self.add
+0001dc70: 5f70 6174 685f 656c 656d 656e 7428 5265  _path_element(Re
+0001dc80: 6c61 7469 7665 4c69 6e65 2850 6f69 6e74  lativeLine(Point
+0001dc90: 2864 782c 2064 7929 292c 205f 636f 7079  (dx, dy)), _copy
+0001dca0: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+0001dcb0: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
+0001dcc0: 2064 6566 2068 6f72 697a 6f6e 7461 6c5f   def horizontal_
+0001dcd0: 6c69 6e65 5f74 6f28 7365 6c66 2c20 7829  line_to(self, x)
+0001dce0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0001dcf0: 2020 2020 2020 4170 7065 6e64 2061 2073        Append a s
+0001dd00: 7472 6169 6768 7420 686f 7269 7a6f 6e74  traight horizont
+0001dd10: 616c 206c 696e 6520 746f 2074 6865 2067  al line to the g
+0001dd20: 6976 656e 2061 6273 6369 7373 612e 2054  iven abscissa. T
+0001dd30: 6865 206f 7264 696e 6174 6520 6973 0a20  he ordinate is. 
+0001dd40: 2020 2020 2020 2072 6574 7269 6576 6564         retrieved
+0001dd50: 2066 726f 6d20 7468 6520 656e 6420 706f   from the end po
+0001dd60: 696e 7420 6f66 2074 6865 2070 7265 7669  int of the previ
+0001dd70: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+0001dd80: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+0001dd90: 0a20 2020 2020 2020 2020 2020 2078 2028  .            x (
+0001dda0: 4e75 6d62 6572 293a 2061 6273 6369 7373  Number): absciss
+0001ddb0: 6120 6f66 2074 6865 206c 696e 6527 7320  a of the line's 
+0001ddc0: 656e 6420 706f 696e 742e 0a0a 2020 2020  end point...    
+0001ddd0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+0001dde0: 2020 2020 2020 2020 2054 6865 2070 6174           The pat
+0001ddf0: 682c 2074 6f20 616c 6c6f 7720 6368 6169  h, to allow chai
+0001de00: 6e69 6e67 206d 6574 686f 6420 6361 6c6c  ning method call
+0001de10: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+0001de20: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+0001de30: 7061 7468 5f65 6c65 6d65 6e74 2848 6f72  path_element(Hor
+0001de40: 697a 6f6e 7461 6c4c 696e 6528 7829 2c20  izontalLine(x), 
+0001de50: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
+0001de60: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001de70: 0a0a 2020 2020 6465 6620 686f 7269 7a6f  ..    def horizo
+0001de80: 6e74 616c 5f6c 696e 655f 7265 6c61 7469  ntal_line_relati
+0001de90: 7665 2873 656c 662c 2064 7829 3a0a 2020  ve(self, dx):.  
+0001dea0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001deb0: 2020 4170 7065 6e64 2061 2073 7472 6169    Append a strai
+0001dec0: 6768 7420 686f 7269 7a6f 6e74 616c 206c  ght horizontal l
+0001ded0: 696e 6520 746f 2074 6865 2067 6976 656e  ine to the given
+0001dee0: 206f 6666 7365 7420 6672 6f6d 2074 6865   offset from the
+0001def0: 2070 7265 7669 6f75 7320 7061 7468 0a20   previous path. 
+0001df00: 2020 2020 2020 2065 6c65 6d65 6e74 2e20         element. 
+0001df10: 5468 6520 6f72 6469 6e61 7465 2069 7320  The ordinate is 
+0001df20: 7265 7472 6965 7665 6420 6672 6f6d 2074  retrieved from t
+0001df30: 6865 2065 6e64 2070 6f69 6e74 206f 6620  he end point of 
+0001df40: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+0001df50: 680a 2020 2020 2020 2020 656c 656d 656e  h.        elemen
+0001df60: 742e 0a0a 2020 2020 2020 2020 4172 6773  t...        Args
+0001df70: 3a0a 2020 2020 2020 2020 2020 2020 7820  :.            x 
+0001df80: 284e 756d 6265 7229 3a20 6162 7363 6973  (Number): abscis
+0001df90: 7361 206f 6620 7468 6520 6c69 6e65 2773  sa of the line's
+0001dfa0: 2065 6e64 2070 6f69 6e74 2072 656c 6174   end point relat
+0001dfb0: 6976 6520 746f 2074 6865 2065 6e64 2070  ive to the end p
+0001dfc0: 6f69 6e74 206f 660a 2020 2020 2020 2020  oint of.        
+0001dfd0: 2020 2020 2020 2020 7468 6520 7072 6576          the prev
+0001dfe0: 696f 7573 2070 6174 6820 656c 656d 656e  ious path elemen
+0001dff0: 742e 0a0a 2020 2020 2020 2020 5265 7475  t...        Retu
+0001e000: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+0001e010: 2054 6865 2070 6174 682c 2074 6f20 616c   The path, to al
+0001e020: 6c6f 7720 6368 6169 6e69 6e67 206d 6574  low chaining met
+0001e030: 686f 6420 6361 6c6c 732e 0a20 2020 2020  hod calls..     
+0001e040: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0001e050: 656c 662e 6164 645f 7061 7468 5f65 6c65  elf.add_path_ele
+0001e060: 6d65 6e74 2852 656c 6174 6976 6548 6f72  ment(RelativeHor
+0001e070: 697a 6f6e 7461 6c4c 696e 6528 6478 292c  izontalLine(dx),
+0001e080: 205f 636f 7079 3d46 616c 7365 290a 2020   _copy=False).  
+0001e090: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001e0a0: 660a 0a20 2020 2064 6566 2076 6572 7469  f..    def verti
+0001e0b0: 6361 6c5f 6c69 6e65 5f74 6f28 7365 6c66  cal_line_to(self
+0001e0c0: 2c20 7929 3a0a 2020 2020 2020 2020 2222  , y):.        ""
+0001e0d0: 220a 2020 2020 2020 2020 4170 7065 6e64  ".        Append
+0001e0e0: 2061 2073 7472 6169 6768 7420 7665 7274   a straight vert
+0001e0f0: 6963 616c 206c 696e 6520 746f 2074 6865  ical line to the
+0001e100: 2067 6976 656e 206f 7264 696e 6174 652e   given ordinate.
+0001e110: 2054 6865 2061 6273 6369 7373 6120 6973   The abscissa is
+0001e120: 0a20 2020 2020 2020 2072 6574 7269 6576  .        retriev
+0001e130: 6564 2066 726f 6d20 7468 6520 656e 6420  ed from the end 
+0001e140: 706f 696e 7420 6f66 2074 6865 2070 7265  point of the pre
+0001e150: 7669 6f75 7320 7061 7468 2065 6c65 6d65  vious path eleme
+0001e160: 6e74 2e0a 0a20 2020 2020 2020 2041 7267  nt...        Arg
+0001e170: 733a 0a20 2020 2020 2020 2020 2020 2079  s:.            y
+0001e180: 2028 4e75 6d62 6572 293a 206f 7264 696e   (Number): ordin
+0001e190: 6174 6520 6f66 2074 6865 206c 696e 6527  ate of the line'
+0001e1a0: 7320 656e 6420 706f 696e 742e 0a0a 2020  s end point...  
+0001e1b0: 2020 2020 2020 5265 7475 726e 733a 0a20        Returns:. 
+0001e1c0: 2020 2020 2020 2020 2020 2054 6865 2070             The p
+0001e1d0: 6174 682c 2074 6f20 616c 6c6f 7720 6368  ath, to allow ch
+0001e1e0: 6169 6e69 6e67 206d 6574 686f 6420 6361  aining method ca
+0001e1f0: 6c6c 732e 0a20 2020 2020 2020 2022 2222  lls..        """
+0001e200: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+0001e210: 645f 7061 7468 5f65 6c65 6d65 6e74 2856  d_path_element(V
+0001e220: 6572 7469 6361 6c4c 696e 6528 7929 2c20  erticalLine(y), 
+0001e230: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
+0001e240: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001e250: 0a0a 2020 2020 6465 6620 7665 7274 6963  ..    def vertic
+0001e260: 616c 5f6c 696e 655f 7265 6c61 7469 7665  al_line_relative
+0001e270: 2873 656c 662c 2064 7929 3a0a 2020 2020  (self, dy):.    
+0001e280: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001e290: 4170 7065 6e64 2061 2073 7472 6169 6768  Append a straigh
+0001e2a0: 7420 7665 7274 6963 616c 206c 696e 6520  t vertical line 
+0001e2b0: 746f 2074 6865 2067 6976 656e 206f 6666  to the given off
+0001e2c0: 7365 7420 6672 6f6d 2074 6865 2070 7265  set from the pre
+0001e2d0: 7669 6f75 7320 7061 7468 0a20 2020 2020  vious path.     
+0001e2e0: 2020 2065 6c65 6d65 6e74 2e20 5468 6520     element. The 
+0001e2f0: 6162 7363 6973 7361 2069 7320 7265 7472  abscissa is retr
+0001e300: 6965 7665 6420 6672 6f6d 2074 6865 2065  ieved from the e
+0001e310: 6e64 2070 6f69 6e74 206f 6620 7468 6520  nd point of the 
+0001e320: 7072 6576 696f 7573 2070 6174 680a 2020  previous path.  
+0001e330: 2020 2020 2020 656c 656d 656e 742e 0a0a        element...
+0001e340: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+0001e350: 2020 2020 2020 2020 2020 7920 284e 756d            y (Num
+0001e360: 6265 7229 3a20 6f72 6469 6e61 7465 206f  ber): ordinate o
+0001e370: 6620 7468 6520 6c69 6e65 2773 2065 6e64  f the line's end
+0001e380: 2070 6f69 6e74 2072 656c 6174 6976 6520   point relative 
+0001e390: 746f 2074 6865 2065 6e64 2070 6f69 6e74  to the end point
+0001e3a0: 206f 660a 2020 2020 2020 2020 2020 2020   of.            
+0001e3b0: 2020 2020 7468 6520 7072 6576 696f 7573      the previous
+0001e3c0: 2070 6174 6820 656c 656d 656e 742e 0a0a   path element...
+0001e3d0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+0001e3e0: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0001e3f0: 2070 6174 682c 2074 6f20 616c 6c6f 7720   path, to allow 
+0001e400: 6368 6169 6e69 6e67 206d 6574 686f 6420  chaining method 
+0001e410: 6361 6c6c 732e 0a20 2020 2020 2020 2022  calls..        "
+0001e420: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0001e430: 6164 645f 7061 7468 5f65 6c65 6d65 6e74  add_path_element
+0001e440: 2852 656c 6174 6976 6556 6572 7469 6361  (RelativeVertica
+0001e450: 6c4c 696e 6528 6479 292c 205f 636f 7079  lLine(dy), _copy
+0001e460: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+0001e470: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
+0001e480: 2064 6566 2063 7572 7665 5f74 6f28 7365   def curve_to(se
+0001e490: 6c66 2c20 7831 2c20 7931 2c20 7832 2c20  lf, x1, y1, x2, 
+0001e4a0: 7932 2c20 7833 2c20 7933 293a 0a20 2020  y2, x3, y3):.   
+0001e4b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001e4c0: 2041 7070 656e 6420 6120 6375 6269 6320   Append a cubic 
+0001e4d0: 42c3 a97a 6965 7220 6375 7276 6520 746f  B..zier curve to
+0001e4e0: 2074 6869 7320 7061 7468 2e0a 0a20 2020   this path...   
+0001e4f0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+0001e500: 2020 2020 2020 2078 3120 284e 756d 6265         x1 (Numbe
+0001e510: 7229 3a20 6162 7363 6973 7361 206f 6620  r): abscissa of 
+0001e520: 7468 6520 6669 7273 7420 636f 6e74 726f  the first contro
+0001e530: 6c20 706f 696e 740a 2020 2020 2020 2020  l point.        
+0001e540: 2020 2020 7931 2028 4e75 6d62 6572 293a      y1 (Number):
+0001e550: 206f 7264 696e 6174 6520 6f66 2074 6865   ordinate of the
+0001e560: 2066 6972 7374 2063 6f6e 7472 6f6c 2070   first control p
+0001e570: 6f69 6e74 0a20 2020 2020 2020 2020 2020  oint.           
+0001e580: 2078 3220 284e 756d 6265 7229 3a20 6162   x2 (Number): ab
+0001e590: 7363 6973 7361 206f 6620 7468 6520 7365  scissa of the se
+0001e5a0: 636f 6e64 2063 6f6e 7472 6f6c 2070 6f69  cond control poi
+0001e5b0: 6e74 0a20 2020 2020 2020 2020 2020 2079  nt.            y
+0001e5c0: 3220 284e 756d 6265 7229 3a20 6f72 6469  2 (Number): ordi
+0001e5d0: 6e61 7465 206f 6620 7468 6520 7365 636f  nate of the seco
+0001e5e0: 6e64 2063 6f6e 7472 6f6c 2070 6f69 6e74  nd control point
+0001e5f0: 0a20 2020 2020 2020 2020 2020 2078 3320  .            x3 
+0001e600: 284e 756d 6265 7229 3a20 6162 7363 6973  (Number): abscis
+0001e610: 7361 206f 6620 7468 6520 656e 6420 706f  sa of the end po
+0001e620: 696e 740a 2020 2020 2020 2020 2020 2020  int.            
+0001e630: 7933 2028 4e75 6d62 6572 293a 206f 7264  y3 (Number): ord
+0001e640: 696e 6174 6520 6f66 2074 6865 2065 6e64  inate of the end
+0001e650: 2070 6f69 6e74 0a0a 2020 2020 2020 2020   point..        
+0001e660: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
+0001e670: 2020 2020 2054 6865 2070 6174 682c 2074       The path, t
+0001e680: 6f20 616c 6c6f 7720 6368 6169 6e69 6e67  o allow chaining
+0001e690: 206d 6574 686f 6420 6361 6c6c 732e 0a20   method calls.. 
+0001e6a0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001e6b0: 2020 2063 7472 6c31 203d 2050 6f69 6e74     ctrl1 = Point
+0001e6c0: 2878 312c 2079 3129 0a20 2020 2020 2020  (x1, y1).       
+0001e6d0: 2063 7472 6c32 203d 2050 6f69 6e74 2878   ctrl2 = Point(x
+0001e6e0: 322c 2079 3229 0a20 2020 2020 2020 2065  2, y2).        e
+0001e6f0: 6e64 203d 2050 6f69 6e74 2878 332c 2079  nd = Point(x3, y
+0001e700: 3329 0a0a 2020 2020 2020 2020 7365 6c66  3)..        self
+0001e710: 2e61 6464 5f70 6174 685f 656c 656d 656e  .add_path_elemen
+0001e720: 7428 4265 7a69 6572 4375 7276 6528 6374  t(BezierCurve(ct
+0001e730: 726c 312c 2063 7472 6c32 2c20 656e 6429  rl1, ctrl2, end)
+0001e740: 2c20 5f63 6f70 793d 4661 6c73 6529 0a20  , _copy=False). 
+0001e750: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0001e760: 6c66 0a0a 2020 2020 6465 6620 6375 7276  lf..    def curv
+0001e770: 655f 7265 6c61 7469 7665 2873 656c 662c  e_relative(self,
+0001e780: 2064 7831 2c20 6479 312c 2064 7832 2c20   dx1, dy1, dx2, 
+0001e790: 6479 322c 2064 7833 2c20 6479 3329 3a0a  dy2, dx3, dy3):.
+0001e7a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001e7b0: 2020 2020 4170 7065 6e64 2061 2063 7562      Append a cub
+0001e7c0: 6963 2042 c3a9 7a69 6572 2063 7572 7665  ic B..zier curve
+0001e7d0: 2077 686f 7365 2070 6f69 6e74 7320 6172   whose points ar
+0001e7e0: 6520 6578 7072 6573 7365 6420 7265 6c61  e expressed rela
+0001e7f0: 7469 7665 2074 6f20 7468 650a 2020 2020  tive to the.    
+0001e800: 2020 2020 656e 6420 706f 696e 7420 6f66      end point of
+0001e810: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+0001e820: 7468 2065 6c65 6d65 6e74 2e0a 0a20 2020  th element...   
+0001e830: 2020 2020 2045 2e67 2e20 7769 7468 2061       E.g. with a
+0001e840: 2073 7461 7274 2070 6f69 6e74 206f 6620   start point of 
+0001e850: 2830 2c20 3029 2c20 6769 7665 6e20 2831  (0, 0), given (1
+0001e860: 2c20 3129 2c20 2832 2c20 3229 2c20 2833  , 1), (2, 2), (3
+0001e870: 2c20 3329 2c20 7468 6520 6f75 7470 7574  , 3), the output
+0001e880: 0a20 2020 2020 2020 2063 7572 7665 2077  .        curve w
+0001e890: 6f75 6c64 2068 6176 6520 7468 6520 706f  ould have the po
+0001e8a0: 696e 7473 3a0a 0a20 2020 2020 2020 2028  ints:..        (
+0001e8b0: 302c 2030 2920 6331 2028 312c 2031 2920  0, 0) c1 (1, 1) 
+0001e8c0: 6332 2028 332c 2033 2920 6520 2836 2c20  c2 (3, 3) e (6, 
+0001e8d0: 3629 0a0a 2020 2020 2020 2020 4172 6773  6)..        Args
+0001e8e0: 3a0a 2020 2020 2020 2020 2020 2020 6478  :.            dx
+0001e8f0: 3120 284e 756d 6265 7229 3a20 6162 7363  1 (Number): absc
+0001e900: 6973 7361 206f 6620 7468 6520 6669 7273  issa of the firs
+0001e910: 7420 636f 6e74 726f 6c20 706f 696e 7420  t control point 
+0001e920: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
+0001e930: 656e 6420 706f 696e 740a 2020 2020 2020  end point.      
+0001e940: 2020 2020 2020 2020 2020 6f66 2074 6865            of the
+0001e950: 2070 7265 7669 6f75 7320 7061 7468 2065   previous path e
+0001e960: 6c65 6d65 6e74 0a20 2020 2020 2020 2020  lement.         
+0001e970: 2020 2064 7931 2028 4e75 6d62 6572 293a     dy1 (Number):
+0001e980: 206f 7264 696e 6174 6520 6f66 2074 6865   ordinate of the
+0001e990: 2066 6972 7374 2063 6f6e 7472 6f6c 2070   first control p
+0001e9a0: 6f69 6e74 2072 656c 6174 6976 6520 746f  oint relative to
+0001e9b0: 2074 6865 2065 6e64 2070 6f69 6e74 0a20   the end point. 
+0001e9c0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0001e9d0: 6620 7468 6520 7072 6576 696f 7573 2070  f the previous p
+0001e9e0: 6174 6820 656c 656d 656e 740a 2020 2020  ath element.    
+0001e9f0: 2020 2020 2020 2020 6478 3220 284e 756d          dx2 (Num
+0001ea00: 6265 7229 3a20 6162 7363 6973 7361 206f  ber): abscissa o
+0001ea10: 6666 7365 7420 6f66 2074 6865 2073 6563  ffset of the sec
+0001ea20: 6f6e 6420 636f 6e74 726f 6c20 706f 696e  ond control poin
+0001ea30: 7420 7265 6c61 7469 7665 2074 6f20 7468  t relative to th
+0001ea40: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001ea50: 2020 656e 6420 706f 696e 7420 6f66 2074    end point of t
+0001ea60: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+0001ea70: 2065 6c65 6d65 6e74 0a20 2020 2020 2020   element.       
+0001ea80: 2020 2020 2064 7932 2028 4e75 6d62 6572       dy2 (Number
+0001ea90: 293a 206f 7264 696e 6174 6520 6f66 6673  ): ordinate offs
+0001eaa0: 6574 206f 6620 7468 6520 7365 636f 6e64  et of the second
+0001eab0: 2063 6f6e 7472 6f6c 2070 6f69 6e74 2072   control point r
+0001eac0: 656c 6174 6976 6520 746f 2074 6865 0a20  elative to the. 
+0001ead0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001eae0: 6e64 2070 6f69 6e74 206f 6620 7468 6520  nd point of the 
+0001eaf0: 7072 6576 696f 7573 2070 6174 6820 656c  previous path el
+0001eb00: 656d 656e 740a 2020 2020 2020 2020 2020  ement.          
+0001eb10: 2020 6478 3320 284e 756d 6265 7229 3a20    dx3 (Number): 
+0001eb20: 6162 7363 6973 7361 206f 6666 7365 7420  abscissa offset 
+0001eb30: 6f66 2074 6865 2065 6e64 2070 6f69 6e74  of the end point
+0001eb40: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
+0001eb50: 2065 6e64 2070 6f69 6e74 206f 660a 2020   end point of.  
+0001eb60: 2020 2020 2020 2020 2020 2020 2020 7468                th
+0001eb70: 6520 7072 6576 696f 7573 2070 6174 6820  e previous path 
+0001eb80: 656c 656d 656e 740a 2020 2020 2020 2020  element.        
+0001eb90: 2020 2020 6479 3320 284e 756d 6265 7229      dy3 (Number)
+0001eba0: 3a20 6f72 6469 6e61 7465 206f 6666 7365  : ordinate offse
+0001ebb0: 7420 6f66 2074 6865 2065 6e64 2070 6f69  t of the end poi
+0001ebc0: 6e74 2072 656c 6174 6976 6520 746f 2074  nt relative to t
+0001ebd0: 6865 2065 6e64 2070 6f69 6e74 206f 660a  he end point of.
+0001ebe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ebf0: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+0001ec00: 6820 656c 656d 656e 740a 0a20 2020 2020  h element..     
+0001ec10: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+0001ec20: 2020 2020 2020 2020 5468 6520 7061 7468          The path
+0001ec30: 2c20 746f 2061 6c6c 6f77 2063 6861 696e  , to allow chain
+0001ec40: 696e 6720 6d65 7468 6f64 2063 616c 6c73  ing method calls
+0001ec50: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0001ec60: 2020 2020 2020 6331 6420 3d20 506f 696e        c1d = Poin
+0001ec70: 7428 6478 312c 2064 7931 290a 2020 2020  t(dx1, dy1).    
+0001ec80: 2020 2020 6332 6420 3d20 506f 696e 7428      c2d = Point(
+0001ec90: 6478 322c 2064 7932 290a 2020 2020 2020  dx2, dy2).      
+0001eca0: 2020 656e 6420 3d20 506f 696e 7428 6478    end = Point(dx
+0001ecb0: 332c 2064 7933 290a 0a20 2020 2020 2020  3, dy3)..       
+0001ecc0: 2073 656c 662e 6164 645f 7061 7468 5f65   self.add_path_e
+0001ecd0: 6c65 6d65 6e74 2852 656c 6174 6976 6542  lement(RelativeB
+0001ece0: 657a 6965 7243 7572 7665 2863 3164 2c20  ezierCurve(c1d, 
+0001ecf0: 6332 642c 2065 6e64 292c 205f 636f 7079  c2d, end), _copy
+0001ed00: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+0001ed10: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
+0001ed20: 2064 6566 2071 7561 6472 6174 6963 5f63   def quadratic_c
+0001ed30: 7572 7665 5f74 6f28 7365 6c66 2c20 7831  urve_to(self, x1
+0001ed40: 2c20 7931 2c20 7832 2c20 7932 293a 0a20  , y1, x2, y2):. 
+0001ed50: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001ed60: 2020 2041 7070 656e 6420 6120 6375 6269     Append a cubi
+0001ed70: 6320 42c3 a97a 6965 7220 6375 7276 6520  c B..zier curve 
+0001ed80: 6d69 6d69 636b 696e 6720 7468 6520 7370  mimicking the sp
+0001ed90: 6563 6966 6965 6420 7175 6164 7261 7469  ecified quadrati
+0001eda0: 6320 42c3 a97a 6965 7220 6375 7276 652e  c B..zier curve.
+0001edb0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+0001edc0: 2020 2020 2020 2020 2020 2020 7831 2028              x1 (
+0001edd0: 4e75 6d62 6572 293a 2061 6273 6369 7373  Number): absciss
+0001ede0: 6120 6f66 2074 6865 2063 6f6e 7472 6f6c  a of the control
+0001edf0: 2070 6f69 6e74 0a20 2020 2020 2020 2020   point.         
+0001ee00: 2020 2079 3120 284e 756d 6265 7229 3a20     y1 (Number): 
+0001ee10: 6f72 6469 6e61 7465 206f 6620 7468 6520  ordinate of the 
+0001ee20: 636f 6e74 726f 6c20 706f 696e 740a 2020  control point.  
+0001ee30: 2020 2020 2020 2020 2020 7832 2028 4e75            x2 (Nu
+0001ee40: 6d62 6572 293a 2061 6273 6369 7373 6120  mber): abscissa 
+0001ee50: 6f66 2074 6865 2065 6e64 2070 6f69 6e74  of the end point
+0001ee60: 0a20 2020 2020 2020 2020 2020 2079 3220  .            y2 
+0001ee70: 284e 756d 6265 7229 3a20 6f72 6469 6e61  (Number): ordina
+0001ee80: 7465 206f 6620 7468 6520 656e 6420 706f  te of the end po
+0001ee90: 696e 740a 0a20 2020 2020 2020 2052 6574  int..        Ret
+0001eea0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+0001eeb0: 2020 5468 6520 7061 7468 2c20 746f 2061    The path, to a
+0001eec0: 6c6c 6f77 2063 6861 696e 696e 6720 6d65  llow chaining me
+0001eed0: 7468 6f64 2063 616c 6c73 2e0a 2020 2020  thod calls..    
+0001eee0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001eef0: 6374 726c 203d 2050 6f69 6e74 2878 312c  ctrl = Point(x1,
+0001ef00: 2079 3129 0a20 2020 2020 2020 2065 6e64   y1).        end
+0001ef10: 203d 2050 6f69 6e74 2878 322c 2079 3229   = Point(x2, y2)
+0001ef20: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+0001ef30: 645f 7061 7468 5f65 6c65 6d65 6e74 2851  d_path_element(Q
+0001ef40: 7561 6472 6174 6963 4265 7a69 6572 4375  uadraticBezierCu
+0001ef50: 7276 6528 6374 726c 2c20 656e 6429 2c20  rve(ctrl, end), 
+0001ef60: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
+0001ef70: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001ef80: 0a0a 2020 2020 6465 6620 7175 6164 7261  ..    def quadra
+0001ef90: 7469 635f 6375 7276 655f 7265 6c61 7469  tic_curve_relati
+0001efa0: 7665 2873 656c 662c 2064 7831 2c20 6479  ve(self, dx1, dy
+0001efb0: 312c 2064 7832 2c20 6479 3229 3a0a 2020  1, dx2, dy2):.  
+0001efc0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001efd0: 2020 4170 7065 6e64 2061 2063 7562 6963    Append a cubic
+0001efe0: 2042 c3a9 7a69 6572 2063 7572 7665 206d   B..zier curve m
+0001eff0: 696d 6963 6b69 6e67 2074 6865 2073 7065  imicking the spe
+0001f000: 6369 6669 6564 2071 7561 6472 6174 6963  cified quadratic
+0001f010: 2042 c3a9 7a69 6572 2063 7572 7665 2e0a   B..zier curve..
+0001f020: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+0001f030: 2020 2020 2020 2020 2020 2064 7831 2028             dx1 (
+0001f040: 4e75 6d62 6572 293a 2061 6273 6369 7373  Number): absciss
+0001f050: 6120 6f66 2074 6865 2063 6f6e 7472 6f6c  a of the control
+0001f060: 2070 6f69 6e74 2072 656c 6174 6976 6520   point relative 
+0001f070: 746f 2074 6865 2065 6e64 2070 6f69 6e74  to the end point
+0001f080: 206f 660a 2020 2020 2020 2020 2020 2020   of.            
+0001f090: 2020 2020 7468 6520 7072 6576 696f 7573      the previous
+0001f0a0: 2070 6174 6820 656c 656d 656e 740a 2020   path element.  
+0001f0b0: 2020 2020 2020 2020 2020 6479 3120 284e            dy1 (N
+0001f0c0: 756d 6265 7229 3a20 6f72 6469 6e61 7465  umber): ordinate
+0001f0d0: 206f 6620 7468 6520 636f 6e74 726f 6c20   of the control 
+0001f0e0: 706f 696e 7420 7265 6c61 7469 7665 2074  point relative t
+0001f0f0: 6f20 7468 6520 656e 6420 706f 696e 7420  o the end point 
+0001f100: 6f66 0a20 2020 2020 2020 2020 2020 2020  of.             
+0001f110: 2020 2074 6865 2070 7265 7669 6f75 7320     the previous 
+0001f120: 7061 7468 2065 6c65 6d65 6e74 0a20 2020  path element.   
+0001f130: 2020 2020 2020 2020 2064 7832 2028 4e75           dx2 (Nu
+0001f140: 6d62 6572 293a 2061 6273 6369 7373 6120  mber): abscissa 
+0001f150: 6f66 6673 6574 206f 6620 7468 6520 656e  offset of the en
+0001f160: 6420 706f 696e 7420 7265 6c61 7469 7665  d point relative
+0001f170: 2074 6f20 7468 6520 656e 6420 706f 696e   to the end poin
+0001f180: 7420 6f66 0a20 2020 2020 2020 2020 2020  t of.           
+0001f190: 2020 2020 2074 6865 2070 7265 7669 6f75       the previou
+0001f1a0: 7320 7061 7468 2065 6c65 6d65 6e74 0a20  s path element. 
+0001f1b0: 2020 2020 2020 2020 2020 2064 7932 2028             dy2 (
+0001f1c0: 4e75 6d62 6572 293a 206f 7264 696e 6174  Number): ordinat
+0001f1d0: 6520 6f66 6673 6574 206f 6620 7468 6520  e offset of the 
+0001f1e0: 656e 6420 706f 696e 7420 7265 6c61 7469  end point relati
+0001f1f0: 7665 2074 6f20 7468 6520 656e 6420 706f  ve to the end po
+0001f200: 696e 7420 6f66 0a20 2020 2020 2020 2020  int of.         
+0001f210: 2020 2020 2020 2074 6865 2070 7265 7669         the previ
+0001f220: 6f75 7320 7061 7468 2065 6c65 6d65 6e74  ous path element
+0001f230: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+0001f240: 733a 0a20 2020 2020 2020 2020 2020 2054  s:.            T
+0001f250: 6865 2070 6174 682c 2074 6f20 616c 6c6f  he path, to allo
+0001f260: 7720 6368 6169 6e69 6e67 206d 6574 686f  w chaining metho
+0001f270: 6420 6361 6c6c 732e 0a20 2020 2020 2020  d calls..       
+0001f280: 2022 2222 0a20 2020 2020 2020 2063 7472   """.        ctr
+0001f290: 6c20 3d20 506f 696e 7428 6478 312c 2064  l = Point(dx1, d
+0001f2a0: 7931 290a 2020 2020 2020 2020 656e 6420  y1).        end 
+0001f2b0: 3d20 506f 696e 7428 6478 322c 2064 7932  = Point(dx2, dy2
+0001f2c0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0001f2d0: 6464 5f70 6174 685f 656c 656d 656e 7428  dd_path_element(
+0001f2e0: 5265 6c61 7469 7665 5175 6164 7261 7469  RelativeQuadrati
+0001f2f0: 6342 657a 6965 7243 7572 7665 2863 7472  cBezierCurve(ctr
+0001f300: 6c2c 2065 6e64 292c 205f 636f 7079 3d46  l, end), _copy=F
+0001f310: 616c 7365 290a 2020 2020 2020 2020 7265  alse).        re
+0001f320: 7475 726e 2073 656c 660a 0a20 2020 2064  turn self..    d
+0001f330: 6566 2061 7263 5f74 6f28 7365 6c66 2c20  ef arc_to(self, 
+0001f340: 7278 2c20 7279 2c20 726f 7461 7469 6f6e  rx, ry, rotation
+0001f350: 2c20 6c61 7267 655f 6172 632c 2070 6f73  , large_arc, pos
+0001f360: 6974 6976 655f 7377 6565 702c 2078 2c20  itive_sweep, x, 
+0001f370: 7929 3a0a 2020 2020 2020 2020 2222 220a  y):.        """.
+0001f380: 2020 2020 2020 2020 4170 7065 6e64 2061          Append a
+0001f390: 6e20 656c 6c69 7074 6963 616c 2061 7263  n elliptical arc
+0001f3a0: 2066 726f 6d20 7468 6520 656e 6420 6f66   from the end of
+0001f3b0: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+0001f3c0: 7468 2070 6f69 6e74 2074 6f20 7468 650a  th point to the.
+0001f3d0: 2020 2020 2020 2020 7370 6563 6966 6965          specifie
+0001f3e0: 6420 656e 6420 706f 696e 742e 0a0a 2020  d end point...  
+0001f3f0: 2020 2020 2020 5468 6520 6172 6320 6973        The arc is
+0001f400: 2061 7070 726f 7869 6d61 7465 6420 7573   approximated us
+0001f410: 696e 6720 42c3 a97a 6965 7220 6375 7276  ing B..zier curv
+0001f420: 6573 2c20 736f 2069 7420 6973 206e 6f74  es, so it is not
+0001f430: 2070 6572 6665 6374 6c79 2061 6363 7572   perfectly accur
+0001f440: 6174 652e 0a20 2020 2020 2020 2048 6f77  ate..        How
+0001f450: 6576 6572 2c20 7468 6520 6572 726f 7220  ever, the error 
+0001f460: 6973 2073 6d61 6c6c 2065 6e6f 7567 6820  is small enough 
+0001f470: 746f 206e 6f74 2062 6520 6e6f 7469 6365  to not be notice
+0001f480: 6162 6c65 2061 7420 616e 7920 7265 6173  able at any reas
+0001f490: 6f6e 6162 6c65 0a20 2020 2020 2020 2028  onable.        (
+0001f4a0: 616e 6420 6576 656e 206d 6f73 7420 756e  and even most un
+0001f4b0: 7265 6173 6f6e 6162 6c65 2920 7363 616c  reasonable) scal
+0001f4c0: 6573 2c20 7769 7468 2061 2077 6f72 7374  es, with a worst
+0001f4d0: 2d63 6173 6520 6465 7669 6174 696f 6e20  -case deviation 
+0001f4e0: 6f66 2061 726f 756e 6420 33e2 80b1 2e0a  of around 3.....
+0001f4f0: 0a20 2020 2020 2020 204e 6f74 6573 3a0a  .        Notes:.
+0001f500: 2020 2020 2020 2020 2020 2020 2d20 5468              - Th
+0001f510: 6520 7369 676e 7320 6f66 2074 6865 2072  e signs of the r
+0001f520: 6164 6969 2061 7267 756d 656e 7473 2028  adii arguments (
+0001f530: 6072 7860 2061 6e64 2060 7279 6029 2061  `rx` and `ry`) a
+0001f540: 7265 2069 676e 6f72 6564 2028 692e 652e  re ignored (i.e.
+0001f550: 2074 6865 6972 0a20 2020 2020 2020 2020   their.         
+0001f560: 2020 2020 2061 6273 6f6c 7574 6520 7661       absolute va
+0001f570: 6c75 6573 2061 7265 2075 7365 6420 696e  lues are used in
+0001f580: 7374 6561 6429 2e0a 2020 2020 2020 2020  stead)..        
+0001f590: 2020 2020 2d20 4966 2065 6974 6865 7220      - If either 
+0001f5a0: 7261 6469 7573 2069 7320 302c 2074 6865  radius is 0, the
+0001f5b0: 6e20 6120 7374 7261 6967 6874 206c 696e  n a straight lin
+0001f5c0: 6520 7769 6c6c 2062 6520 656d 6974 7465  e will be emitte
+0001f5d0: 6420 696e 7374 6561 6420 6f66 2061 6e0a  d instead of an.
+0001f5e0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0001f5f0: 632e 0a20 2020 2020 2020 2020 2020 202d  c..            -
+0001f600: 2049 6620 7468 6520 7261 6469 6920 6172   If the radii ar
+0001f610: 6520 746f 6f20 736d 616c 6c20 666f 7220  e too small for 
+0001f620: 7468 6520 6172 6320 746f 2072 6561 6368  the arc to reach
+0001f630: 2066 726f 6d20 7468 6520 6375 7272 656e   from the curren
+0001f640: 7420 706f 696e 7420 746f 0a20 2020 2020  t point to.     
+0001f650: 2020 2020 2020 2020 2074 6865 2073 7065           the spe
+0001f660: 6369 6669 6564 2065 6e64 2070 6f69 6e74  cified end point
+0001f670: 2028 6078 6020 616e 6420 6079 6029 2c20   (`x` and `y`), 
+0001f680: 7468 656e 2074 6865 7920 7769 6c6c 2062  then they will b
+0001f690: 6520 7072 6f70 6f72 7469 6f6e 616c 6c79  e proportionally
+0001f6a0: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
+0001f6b0: 6361 6c65 6420 7570 2075 6e74 696c 2074  caled up until t
+0001f6c0: 6865 7920 6172 6520 6269 6720 656e 6f75  hey are big enou
+0001f6d0: 6768 2c20 7768 6963 6820 7769 6c6c 2061  gh, which will a
+0001f6e0: 6c77 6179 7320 7265 7375 6c74 2069 6e20  lways result in 
+0001f6f0: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
+0001f700: 6861 6c66 2d65 6c6c 6970 7365 2061 7263  half-ellipse arc
+0001f710: 2028 692e 652e 2061 6e20 3138 3020 6465   (i.e. an 180 de
+0001f720: 6772 6565 2073 7765 6570 290a 0a20 2020  gree sweep)..   
+0001f730: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+0001f740: 2020 2020 2020 2072 7820 284e 756d 6265         rx (Numbe
+0001f750: 7229 3a20 7261 6469 7573 2069 6e20 7468  r): radius in th
+0001f760: 6520 782d 6469 7265 6374 696f 6e2e 0a20  e x-direction.. 
+0001f770: 2020 2020 2020 2020 2020 2072 7920 284e             ry (N
+0001f780: 756d 6265 7229 3a20 7261 6469 7573 2069  umber): radius i
+0001f790: 6e20 7468 6520 792d 6469 7265 6374 696f  n the y-directio
+0001f7a0: 6e2e 0a20 2020 2020 2020 2020 2020 2072  n..            r
+0001f7b0: 6f74 6174 696f 6e20 284e 756d 6265 7229  otation (Number)
+0001f7c0: 3a20 616e 676c 6520 2869 6e20 6465 6772  : angle (in degr
+0001f7d0: 6565 7329 2074 6861 7420 7468 6520 6172  ees) that the ar
+0001f7e0: 6320 7368 6f75 6c64 2062 6520 726f 7461  c should be rota
+0001f7f0: 7465 640a 2020 2020 2020 2020 2020 2020  ted.            
+0001f800: 2020 2020 636c 6f63 6b77 6973 6520 6672      clockwise fr
+0001f810: 6f6d 2074 6865 2070 7269 6e63 6970 6c65  om the principle
+0001f820: 2061 7865 732e 2054 6869 7320 7061 7261   axes. This para
+0001f830: 6d65 7465 7220 646f 6573 206e 6f74 2068  meter does not h
+0001f840: 6176 650a 2020 2020 2020 2020 2020 2020  ave.            
+0001f850: 2020 2020 6120 7669 7375 616c 2065 6666      a visual eff
+0001f860: 6563 7420 696e 2074 6865 2063 6173 6520  ect in the case 
+0001f870: 7468 6174 2060 7278 203d 3d20 7279 602e  that `rx == ry`.
+0001f880: 0a20 2020 2020 2020 2020 2020 206c 6172  .            lar
+0001f890: 6765 5f61 7263 2028 626f 6f6c 293a 2069  ge_arc (bool): i
+0001f8a0: 6620 5472 7565 2c20 7468 6520 6172 6320  f True, the arc 
+0001f8b0: 7769 6c6c 2063 6f76 6572 2061 2073 7765  will cover a swe
+0001f8c0: 6570 2061 6e67 6c65 206f 6620 6174 206c  ep angle of at l
+0001f8d0: 6561 7374 2031 3830 0a20 2020 2020 2020  east 180.       
+0001f8e0: 2020 2020 2020 2020 2064 6567 7265 6573           degrees
+0001f8f0: 2e20 4f74 6865 7277 6973 652c 2074 6865  . Otherwise, the
+0001f900: 2073 7765 6570 2061 6e67 6c65 2077 696c   sweep angle wil
+0001f910: 6c20 6265 2061 7420 6d6f 7374 2031 3830  l be at most 180
+0001f920: 2064 6567 7265 6573 2e0a 2020 2020 2020   degrees..      
+0001f930: 2020 2020 2020 706f 7369 7469 7665 5f73        positive_s
+0001f940: 7765 6570 2028 626f 6f6c 293a 2069 6620  weep (bool): if 
+0001f950: 5472 7565 2c20 7468 6520 6172 6320 7769  True, the arc wi
+0001f960: 6c6c 2062 6520 7377 6570 7420 6f76 6572  ll be swept over
+0001f970: 2061 2070 6f73 6974 6976 6520 616e 676c   a positive angl
+0001f980: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0001f990: 2020 2069 2e65 2e20 636c 6f63 6b77 6973     i.e. clockwis
+0001f9a0: 652e 204f 7468 6572 7769 7365 2c20 7468  e. Otherwise, th
+0001f9b0: 6520 6172 6320 7769 6c6c 2062 6520 7377  e arc will be sw
+0001f9c0: 6570 7420 6f76 6572 2061 206e 6567 6174  ept over a negat
+0001f9d0: 6976 650a 2020 2020 2020 2020 2020 2020  ive.            
+0001f9e0: 2020 2020 616e 676c 652e 0a20 2020 2020      angle..     
+0001f9f0: 2020 2020 2020 2078 2028 4e75 6d62 6572         x (Number
+0001fa00: 293a 2061 6273 6369 7373 6120 6f66 2074  ): abscissa of t
+0001fa10: 6865 2061 7263 2773 2065 6e64 2070 6f69  he arc's end poi
+0001fa20: 6e74 2e0a 2020 2020 2020 2020 2020 2020  nt..            
+0001fa30: 7920 284e 756d 6265 7229 3a20 6f72 6469  y (Number): ordi
+0001fa40: 6e61 7465 206f 6620 7468 6520 6172 6327  nate of the arc'
+0001fa50: 7320 656e 6420 706f 696e 742e 0a20 2020  s end point..   
+0001fa60: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+0001fa70: 2020 6966 2072 7820 3d3d 2030 206f 7220    if rx == 0 or 
+0001fa80: 7279 203d 3d20 303a 0a20 2020 2020 2020  ry == 0:.       
+0001fa90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001faa0: 2e6c 696e 655f 746f 2878 2c20 7929 0a0a  .line_to(x, y)..
+0001fab0: 2020 2020 2020 2020 7261 6469 6920 3d20          radii = 
+0001fac0: 506f 696e 7428 6162 7328 7278 292c 2061  Point(abs(rx), a
+0001fad0: 6273 2872 7929 290a 2020 2020 2020 2020  bs(ry)).        
+0001fae0: 6c61 7267 655f 6172 6320 3d20 626f 6f6c  large_arc = bool
+0001faf0: 286c 6172 6765 5f61 7263 290a 2020 2020  (large_arc).    
+0001fb00: 2020 2020 726f 7461 7469 6f6e 203d 206d      rotation = m
+0001fb10: 6174 682e 7261 6469 616e 7328 726f 7461  ath.radians(rota
+0001fb20: 7469 6f6e 290a 2020 2020 2020 2020 706f  tion).        po
+0001fb30: 7369 7469 7665 5f73 7765 6570 203d 2062  sitive_sweep = b
+0001fb40: 6f6f 6c28 706f 7369 7469 7665 5f73 7765  ool(positive_swe
+0001fb50: 6570 290a 2020 2020 2020 2020 656e 6420  ep).        end 
+0001fb60: 3d20 506f 696e 7428 782c 2079 290a 0a20  = Point(x, y).. 
+0001fb70: 2020 2020 2020 2073 656c 662e 6164 645f         self.add_
+0001fb80: 7061 7468 5f65 6c65 6d65 6e74 280a 2020  path_element(.  
+0001fb90: 2020 2020 2020 2020 2020 4172 6328 7261            Arc(ra
+0001fba0: 6469 692c 2072 6f74 6174 696f 6e2c 206c  dii, rotation, l
+0001fbb0: 6172 6765 5f61 7263 2c20 706f 7369 7469  arge_arc, positi
+0001fbc0: 7665 5f73 7765 6570 2c20 656e 6429 2c20  ve_sweep, end), 
+0001fbd0: 5f63 6f70 793d 4661 6c73 650a 2020 2020  _copy=False.    
+0001fbe0: 2020 2020 290a 2020 2020 2020 2020 7265      ).        re
+0001fbf0: 7475 726e 2073 656c 660a 0a20 2020 2064  turn self..    d
+0001fc00: 6566 2061 7263 5f72 656c 6174 6976 6528  ef arc_relative(
+0001fc10: 7365 6c66 2c20 7278 2c20 7279 2c20 726f  self, rx, ry, ro
+0001fc20: 7461 7469 6f6e 2c20 6c61 7267 655f 6172  tation, large_ar
+0001fc30: 632c 2070 6f73 6974 6976 655f 7377 6565  c, positive_swee
+0001fc40: 702c 2064 782c 2064 7929 3a0a 2020 2020  p, dx, dy):.    
+0001fc50: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001fc60: 4170 7065 6e64 2061 6e20 656c 6c69 7074  Append an ellipt
+0001fc70: 6963 616c 2061 7263 2066 726f 6d20 7468  ical arc from th
+0001fc80: 6520 656e 6420 6f66 2074 6865 2070 7265  e end of the pre
+0001fc90: 7669 6f75 7320 7061 7468 2070 6f69 6e74  vious path point
+0001fca0: 2074 6f20 616e 206f 6666 7365 740a 2020   to an offset.  
+0001fcb0: 2020 2020 2020 706f 696e 742e 0a0a 2020        point...  
+0001fcc0: 2020 2020 2020 5468 6520 6172 6320 6973        The arc is
+0001fcd0: 2061 7070 726f 7869 6d61 7465 6420 7573   approximated us
+0001fce0: 696e 6720 42c3 a97a 6965 7220 6375 7276  ing B..zier curv
+0001fcf0: 6573 2c20 736f 2069 7420 6973 206e 6f74  es, so it is not
+0001fd00: 2070 6572 6665 6374 6c79 2061 6363 7572   perfectly accur
+0001fd10: 6174 652e 0a20 2020 2020 2020 2048 6f77  ate..        How
+0001fd20: 6576 6572 2c20 7468 6520 6572 726f 7220  ever, the error 
+0001fd30: 6973 2073 6d61 6c6c 2065 6e6f 7567 6820  is small enough 
+0001fd40: 746f 206e 6f74 2062 6520 6e6f 7469 6365  to not be notice
+0001fd50: 6162 6c65 2061 7420 616e 7920 7265 6173  able at any reas
+0001fd60: 6f6e 6162 6c65 0a20 2020 2020 2020 2028  onable.        (
+0001fd70: 616e 6420 6576 656e 206d 6f73 7420 756e  and even most un
+0001fd80: 7265 6173 6f6e 6162 6c65 2920 7363 616c  reasonable) scal
+0001fd90: 6573 2c20 7769 7468 2061 2077 6f72 7374  es, with a worst
+0001fda0: 2d63 6173 6520 6465 7669 6174 696f 6e20  -case deviation 
+0001fdb0: 6f66 2061 726f 756e 6420 33e2 80b1 2e0a  of around 3.....
+0001fdc0: 0a20 2020 2020 2020 204e 6f74 6573 3a0a  .        Notes:.
+0001fdd0: 2020 2020 2020 2020 2020 2020 2d20 5468              - Th
+0001fde0: 6520 7369 676e 7320 6f66 2074 6865 2072  e signs of the r
+0001fdf0: 6164 6969 2061 7267 756d 656e 7473 2028  adii arguments (
+0001fe00: 6072 7860 2061 6e64 2060 7279 6029 2061  `rx` and `ry`) a
+0001fe10: 7265 2069 676e 6f72 6564 2028 692e 652e  re ignored (i.e.
+0001fe20: 2074 6865 6972 0a20 2020 2020 2020 2020   their.         
+0001fe30: 2020 2020 2061 6273 6f6c 7574 6520 7661       absolute va
+0001fe40: 6c75 6573 2061 7265 2075 7365 6420 696e  lues are used in
+0001fe50: 7374 6561 6429 2e0a 2020 2020 2020 2020  stead)..        
+0001fe60: 2020 2020 2d20 4966 2065 6974 6865 7220      - If either 
+0001fe70: 7261 6469 7573 2069 7320 302c 2074 6865  radius is 0, the
+0001fe80: 6e20 6120 7374 7261 6967 6874 206c 696e  n a straight lin
+0001fe90: 6520 7769 6c6c 2062 6520 656d 6974 7465  e will be emitte
+0001fea0: 6420 696e 7374 6561 6420 6f66 2061 6e0a  d instead of an.
+0001feb0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+0001fec0: 632e 0a20 2020 2020 2020 2020 2020 202d  c..            -
+0001fed0: 2049 6620 7468 6520 7261 6469 6920 6172   If the radii ar
+0001fee0: 6520 746f 6f20 736d 616c 6c20 666f 7220  e too small for 
+0001fef0: 7468 6520 6172 6320 746f 2072 6561 6368  the arc to reach
+0001ff00: 2066 726f 6d20 7468 6520 6375 7272 656e   from the curren
+0001ff10: 7420 706f 696e 7420 746f 0a20 2020 2020  t point to.     
+0001ff20: 2020 2020 2020 2020 2074 6865 2073 7065           the spe
+0001ff30: 6369 6669 6564 2065 6e64 2070 6f69 6e74  cified end point
+0001ff40: 2028 6078 6020 616e 6420 6079 6029 2c20   (`x` and `y`), 
+0001ff50: 7468 656e 2074 6865 7920 7769 6c6c 2062  then they will b
+0001ff60: 6520 7072 6f70 6f72 7469 6f6e 616c 6c79  e proportionally
+0001ff70: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
+0001ff80: 6361 6c65 6420 7570 2075 6e74 696c 2074  caled up until t
+0001ff90: 6865 7920 6172 6520 6269 6720 656e 6f75  hey are big enou
+0001ffa0: 6768 2c20 7768 6963 6820 7769 6c6c 2061  gh, which will a
+0001ffb0: 6c77 6179 7320 7265 7375 6c74 2069 6e20  lways result in 
+0001ffc0: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
+0001ffd0: 6861 6c66 2d65 6c6c 6970 7365 2061 7263  half-ellipse arc
+0001ffe0: 2028 692e 652e 2061 6e20 3138 3020 6465   (i.e. an 180 de
+0001fff0: 6772 6565 2073 7765 6570 290a 0a20 2020  gree sweep)..   
+00020000: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+00020010: 2020 2020 2020 2072 7820 284e 756d 6265         rx (Numbe
+00020020: 7229 3a20 7261 6469 7573 2069 6e20 7468  r): radius in th
+00020030: 6520 782d 6469 7265 6374 696f 6e2e 0a20  e x-direction.. 
+00020040: 2020 2020 2020 2020 2020 2072 7920 284e             ry (N
+00020050: 756d 6265 7229 3a20 7261 6469 7573 2069  umber): radius i
+00020060: 6e20 7468 6520 792d 6469 7265 6374 696f  n the y-directio
+00020070: 6e2e 0a20 2020 2020 2020 2020 2020 2072  n..            r
+00020080: 6f74 6174 696f 6e20 284e 756d 6265 7229  otation (Number)
+00020090: 3a20 616e 676c 6520 2869 6e20 6465 6772  : angle (in degr
+000200a0: 6565 7329 2074 6861 7420 7468 6520 6172  ees) that the ar
+000200b0: 6320 7368 6f75 6c64 2062 6520 726f 7461  c should be rota
+000200c0: 7465 640a 2020 2020 2020 2020 2020 2020  ted.            
+000200d0: 2020 2020 636c 6f63 6b77 6973 6520 6672      clockwise fr
+000200e0: 6f6d 2074 6865 2070 7269 6e63 6970 6c65  om the principle
+000200f0: 2061 7865 732e 2054 6869 7320 7061 7261   axes. This para
+00020100: 6d65 7465 7220 646f 6573 206e 6f74 2068  meter does not h
+00020110: 6176 650a 2020 2020 2020 2020 2020 2020  ave.            
+00020120: 2020 2020 6120 7669 7375 616c 2065 6666      a visual eff
+00020130: 6563 7420 696e 2074 6865 2063 6173 6520  ect in the case 
+00020140: 7468 6174 2060 7278 203d 3d20 7279 602e  that `rx == ry`.
+00020150: 0a20 2020 2020 2020 2020 2020 206c 6172  .            lar
+00020160: 6765 5f61 7263 2028 626f 6f6c 293a 2069  ge_arc (bool): i
+00020170: 6620 5472 7565 2c20 7468 6520 6172 6320  f True, the arc 
+00020180: 7769 6c6c 2063 6f76 6572 2061 2073 7765  will cover a swe
+00020190: 6570 2061 6e67 6c65 206f 6620 6174 206c  ep angle of at l
+000201a0: 6561 7374 2031 3830 0a20 2020 2020 2020  east 180.       
+000201b0: 2020 2020 2020 2020 2064 6567 7265 6573           degrees
+000201c0: 2e20 4f74 6865 7277 6973 652c 2074 6865  . Otherwise, the
+000201d0: 2073 7765 6570 2061 6e67 6c65 2077 696c   sweep angle wil
+000201e0: 6c20 6265 2061 7420 6d6f 7374 2031 3830  l be at most 180
+000201f0: 2064 6567 7265 6573 2e0a 2020 2020 2020   degrees..      
+00020200: 2020 2020 2020 706f 7369 7469 7665 5f73        positive_s
+00020210: 7765 6570 2028 626f 6f6c 293a 2069 6620  weep (bool): if 
+00020220: 5472 7565 2c20 7468 6520 6172 6320 7769  True, the arc wi
+00020230: 6c6c 2062 6520 7377 6570 7420 6f76 6572  ll be swept over
+00020240: 2061 2070 6f73 6974 6976 6520 616e 676c   a positive angl
+00020250: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00020260: 2020 2069 2e65 2e20 636c 6f63 6b77 6973     i.e. clockwis
+00020270: 652e 204f 7468 6572 7769 7365 2c20 7468  e. Otherwise, th
+00020280: 6520 6172 6320 7769 6c6c 2062 6520 7377  e arc will be sw
+00020290: 6570 7420 6f76 6572 2061 206e 6567 6174  ept over a negat
+000202a0: 6976 650a 2020 2020 2020 2020 2020 2020  ive.            
+000202b0: 2020 2020 616e 676c 652e 0a20 2020 2020      angle..     
+000202c0: 2020 2020 2020 2064 7820 284e 756d 6265         dx (Numbe
+000202d0: 7229 3a20 6162 7363 6973 7361 206f 6620  r): abscissa of 
+000202e0: 7468 6520 6172 6327 7320 656e 6420 706f  the arc's end po
+000202f0: 696e 7420 7265 6c61 7469 7665 2074 6f20  int relative to 
+00020300: 7468 6520 656e 6420 706f 696e 7420 6f66  the end point of
+00020310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020320: 2074 6865 2070 7265 7669 6f75 7320 7061   the previous pa
+00020330: 7468 2065 6c65 6d65 6e74 2e0a 2020 2020  th element..    
+00020340: 2020 2020 2020 2020 6479 2028 4e75 6d62          dy (Numb
+00020350: 6572 293a 206f 7264 696e 6174 6520 6f66  er): ordinate of
+00020360: 2074 6865 2061 7263 2773 2065 6e64 2070   the arc's end p
+00020370: 6f69 6e74 2072 656c 6174 6976 6520 746f  oint relative to
+00020380: 2074 6865 2065 6e64 2070 6f69 6e74 206f   the end point o
+00020390: 660a 2020 2020 2020 2020 2020 2020 2020  f.              
+000203a0: 2020 7468 6520 7072 6576 696f 7573 2070    the previous p
+000203b0: 6174 6820 656c 656d 656e 742e 0a20 2020  ath element..   
+000203c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000203d0: 2069 6620 7278 203d 3d20 3020 6f72 2072   if rx == 0 or r
+000203e0: 7920 3d3d 2030 3a0a 2020 2020 2020 2020  y == 0:.        
+000203f0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00020400: 6c69 6e65 5f72 656c 6174 6976 6528 6478  line_relative(dx
+00020410: 2c20 6479 290a 0a20 2020 2020 2020 2072  , dy)..        r
+00020420: 6164 6969 203d 2050 6f69 6e74 2861 6273  adii = Point(abs
+00020430: 2872 7829 2c20 6162 7328 7279 2929 0a20  (rx), abs(ry)). 
+00020440: 2020 2020 2020 206c 6172 6765 5f61 7263         large_arc
+00020450: 203d 2062 6f6f 6c28 6c61 7267 655f 6172   = bool(large_ar
+00020460: 6329 0a20 2020 2020 2020 2072 6f74 6174  c).        rotat
+00020470: 696f 6e20 3d20 6d61 7468 2e72 6164 6961  ion = math.radia
+00020480: 6e73 2872 6f74 6174 696f 6e29 0a20 2020  ns(rotation).   
+00020490: 2020 2020 2070 6f73 6974 6976 655f 7377       positive_sw
+000204a0: 6565 7020 3d20 626f 6f6c 2870 6f73 6974  eep = bool(posit
+000204b0: 6976 655f 7377 6565 7029 0a20 2020 2020  ive_sweep).     
+000204c0: 2020 2065 6e64 203d 2050 6f69 6e74 2864     end = Point(d
+000204d0: 782c 2064 7929 0a0a 2020 2020 2020 2020  x, dy)..        
+000204e0: 7365 6c66 2e61 6464 5f70 6174 685f 656c  self.add_path_el
+000204f0: 656d 656e 7428 0a20 2020 2020 2020 2020  ement(.         
+00020500: 2020 2052 656c 6174 6976 6541 7263 2872     RelativeArc(r
+00020510: 6164 6969 2c20 726f 7461 7469 6f6e 2c20  adii, rotation, 
+00020520: 6c61 7267 655f 6172 632c 2070 6f73 6974  large_arc, posit
+00020530: 6976 655f 7377 6565 702c 2065 6e64 292c  ive_sweep, end),
+00020540: 205f 636f 7079 3d46 616c 7365 0a20 2020   _copy=False.   
+00020550: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
+00020560: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
+00020570: 6465 6620 636c 6f73 6528 7365 6c66 293a  def close(self):
+00020580: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00020590: 2020 2020 2045 7870 6c69 6369 746c 7920       Explicitly 
+000205a0: 636c 6f73 6520 7468 6520 6375 7272 656e  close the curren
+000205b0: 7420 2873 7562 2970 6174 682e 0a20 2020  t (sub)path..   
+000205c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000205d0: 2073 656c 662e 6164 645f 7061 7468 5f65   self.add_path_e
+000205e0: 6c65 6d65 6e74 2843 6c6f 7365 2829 2c20  lement(Close(), 
+000205f0: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
+00020600: 2020 2020 2073 656c 662e 5f63 6c6f 7365       self._close
+00020610: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+00020620: 2073 656c 662e 6d6f 7665 5f72 656c 6174   self.move_relat
+00020630: 6976 6528 302c 2030 290a 0a20 2020 2064  ive(0, 0)..    d
+00020640: 6566 205f 696e 7365 7274 5f69 6d70 6c69  ef _insert_impli
+00020650: 6369 745f 636c 6f73 655f 6966 5f6f 7065  cit_close_if_ope
+00020660: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00020670: 2069 6620 6e6f 7420 7365 6c66 2e5f 636c   if not self._cl
+00020680: 6f73 6564 3a0a 2020 2020 2020 2020 2020  osed:.          
+00020690: 2020 7365 6c66 2e5f 636c 6f73 655f 636f    self._close_co
+000206a0: 6e74 6578 742e 6164 645f 6974 656d 2849  ntext.add_item(I
+000206b0: 6d70 6c69 6369 7443 6c6f 7365 2829 2c20  mplicitClose(), 
+000206c0: 5f63 6f70 793d 4661 6c73 6529 0a20 2020  _copy=False).   
+000206d0: 2020 2020 2020 2020 2073 656c 662e 5f63           self._c
+000206e0: 6c6f 7365 5f63 6f6e 7465 7874 203d 2073  lose_context = s
+000206f0: 656c 662e 5f67 7261 7068 6963 735f 636f  elf._graphics_co
+00020700: 6e74 6578 740a 2020 2020 2020 2020 2020  ntext.          
+00020710: 2020 7365 6c66 2e5f 636c 6f73 6564 203d    self._closed =
+00020720: 2054 7275 650a 0a20 2020 2064 6566 2072   True..    def r
+00020730: 656e 6465 7228 0a20 2020 2020 2020 2073  ender(.        s
+00020740: 656c 662c 2067 7364 5f72 6567 6973 7472  elf, gsd_registr
+00020750: 792c 2073 7479 6c65 2c20 6c61 7374 5f69  y, style, last_i
+00020760: 7465 6d2c 2069 6e69 7469 616c 5f70 6f69  tem, initial_poi
+00020770: 6e74 2c20 6465 6275 675f 7374 7265 616d  nt, debug_stream
+00020780: 3d4e 6f6e 652c 2070 6678 3d4e 6f6e 650a  =None, pfx=None.
+00020790: 2020 2020 293a 0a20 2020 2020 2020 2073      ):.        s
+000207a0: 656c 662e 5f69 6e73 6572 745f 696d 706c  elf._insert_impl
+000207b0: 6963 6974 5f63 6c6f 7365 5f69 665f 6f70  icit_close_if_op
+000207c0: 656e 2829 0a0a 2020 2020 2020 2020 280a  en()..        (.
+000207d0: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
+000207e0: 6572 5f6c 6973 742c 0a20 2020 2020 2020  er_list,.       
+000207f0: 2020 2020 206c 6173 745f 6974 656d 2c0a       last_item,.
+00020800: 2020 2020 2020 2020 2020 2020 696e 6974              init
+00020810: 6961 6c5f 706f 696e 742c 0a20 2020 2020  ial_point,.     
+00020820: 2020 2029 203d 2073 656c 662e 5f72 6f6f     ) = self._roo
+00020830: 745f 6772 6170 6869 6373 5f63 6f6e 7465  t_graphics_conte
+00020840: 7874 2e62 7569 6c64 5f72 656e 6465 725f  xt.build_render_
+00020850: 6c69 7374 280a 2020 2020 2020 2020 2020  list(.          
+00020860: 2020 6773 645f 7265 6769 7374 7279 2c20    gsd_registry, 
+00020870: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+00020880: 2c20 696e 6974 6961 6c5f 706f 696e 742c  , initial_point,
+00020890: 2064 6562 7567 5f73 7472 6561 6d2c 2070   debug_stream, p
+000208a0: 6678 0a20 2020 2020 2020 2029 0a0a 2020  fx.        )..  
+000208b0: 2020 2020 2020 7061 696e 745f 7275 6c65        paint_rule
+000208c0: 203d 2047 7261 7068 6963 7353 7479 6c65   = GraphicsStyle
+000208d0: 2e6d 6572 6765 2873 7479 6c65 2c20 7365  .merge(style, se
+000208e0: 6c66 2e73 7479 6c65 292e 7265 736f 6c76  lf.style).resolv
+000208f0: 655f 7061 696e 745f 7275 6c65 2829 0a0a  e_paint_rule()..
+00020900: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
+00020910: 6973 742e 696e 7365 7274 282d 312c 2070  ist.insert(-1, p
+00020920: 6169 6e74 5f72 756c 652e 7661 6c75 6529  aint_rule.value)
+00020930: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00020940: 2022 2022 2e6a 6f69 6e28 7265 6e64 6572   " ".join(render
+00020950: 5f6c 6973 7429 2c20 6c61 7374 5f69 7465  _list), last_ite
+00020960: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+00020970: 0a0a 2020 2020 6465 6620 7265 6e64 6572  ..    def render
+00020980: 5f64 6562 7567 280a 2020 2020 2020 2020  _debug(.        
+00020990: 7365 6c66 2c20 6773 645f 7265 6769 7374  self, gsd_regist
+000209a0: 7279 2c20 7374 796c 652c 206c 6173 745f  ry, style, last_
+000209b0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+000209c0: 696e 742c 2064 6562 7567 5f73 7472 6561  int, debug_strea
+000209d0: 6d2c 2070 6678 0a20 2020 2029 3a0a 2020  m, pfx.    ):.  
+000209e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000209f0: 2020 5265 6e64 6572 2074 6869 7320 7061    Render this pa
+00020a00: 7468 2065 6c65 6d65 6e74 2074 6f20 6974  th element to it
+00020a10: 7320 5044 4620 7265 7072 6573 656e 7461  s PDF representa
+00020a20: 7469 6f6e 2061 6e64 2070 726f 6475 6365  tion and produce
+00020a30: 2064 6562 7567 0a20 2020 2020 2020 2069   debug.        i
+00020a40: 6e66 6f72 6d61 7469 6f6e 2e0a 0a20 2020  nformation...   
+00020a50: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+00020a60: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+00020a70: 7472 7920 2847 7261 7068 6963 7353 7461  try (GraphicsSta
+00020a80: 7465 4469 6374 5265 6769 7374 7279 293a  teDictRegistry):
+00020a90: 2074 6865 206f 776e 6572 2773 2067 7261   the owner's gra
+00020aa0: 7068 6963 7320 7374 6174 650a 2020 2020  phics state.    
+00020ab0: 2020 2020 2020 2020 2020 2020 6469 6374              dict
+00020ac0: 696f 6e61 7279 2072 6567 6973 7472 792e  ionary registry.
+00020ad0: 0a20 2020 2020 2020 2020 2020 2073 7479  .            sty
+00020ae0: 6c65 2028 4772 6170 6869 6373 5374 796c  le (GraphicsStyl
+00020af0: 6529 3a20 7468 6520 6375 7272 656e 7420  e): the current 
+00020b00: 7265 736f 6c76 6564 2067 7261 7068 6963  resolved graphic
+00020b10: 7320 7374 796c 650a 2020 2020 2020 2020  s style.        
+00020b20: 2020 2020 6c61 7374 5f69 7465 6d3a 2074      last_item: t
+00020b30: 6865 2070 7265 7669 6f75 7320 7061 7468  he previous path
+00020b40: 2065 6c65 6d65 6e74 2e0a 2020 2020 2020   element..      
+00020b50: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
+00020b60: 696e 743a 206c 6173 7420 706f 7369 7469  int: last positi
+00020b70: 6f6e 2073 6574 2062 7920 6120 224d 2220  on set by a "M" 
+00020b80: 6f72 2022 6d22 2063 6f6d 6d61 6e64 0a20  or "m" command. 
+00020b90: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+00020ba0: 5f73 7472 6561 6d20 2869 6f2e 5465 7874  _stream (io.Text
+00020bb0: 494f 293a 2074 6865 2073 7472 6561 6d20  IO): the stream 
+00020bc0: 746f 2077 6869 6368 2074 6865 2064 6562  to which the deb
+00020bd0: 7567 206f 7574 7075 7420 7368 6f75 6c64  ug output should
+00020be0: 2062 650a 2020 2020 2020 2020 2020 2020   be.            
+00020bf0: 2020 2020 7772 6974 7465 6e2e 2054 6869      written. Thi
+00020c00: 7320 6973 206e 6f74 2067 7561 7261 6e74  s is not guarant
+00020c10: 6565 6420 746f 2062 6520 7365 656b 6162  eed to be seekab
+00020c20: 6c65 2028 652e 672e 2069 7420 6d61 7920  le (e.g. it may 
+00020c30: 6265 2073 7464 6f75 7420 6f72 0a20 2020  be stdout or.   
+00020c40: 2020 2020 2020 2020 2020 2020 2073 7464               std
+00020c50: 6572 7229 2e0a 2020 2020 2020 2020 2020  err)..          
+00020c60: 2020 7066 7820 2873 7472 293a 2074 6865    pfx (str): the
+00020c70: 2063 7572 7265 6e74 2064 6562 7567 206f   current debug o
+00020c80: 7574 7075 7420 7072 6566 6978 2073 7472  utput prefix str
+00020c90: 696e 6720 286f 6e6c 7920 6e65 6564 6564  ing (only needed
+00020ca0: 2069 6620 656d 6974 7469 6e67 0a20 2020   if emitting.   
+00020cb0: 2020 2020 2020 2020 2020 2020 206d 6f72               mor
+00020cc0: 6520 7468 616e 206f 6e65 206c 696e 6529  e than one line)
+00020cd0: 2e0a 0a20 2020 2020 2020 2052 6574 7572  ...        Retur
+00020ce0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00020cf0: 5468 6520 7361 6d65 2074 7570 6c65 2061  The same tuple a
+00020d00: 7320 6050 6169 6e74 6564 5061 7468 2e72  s `PaintedPath.r
+00020d10: 656e 6465 7260 2e0a 2020 2020 2020 2020  ender`..        
+00020d20: 2222 220a 2020 2020 2020 2020 7265 7475  """.        retu
+00020d30: 726e 2073 656c 662e 7265 6e64 6572 280a  rn self.render(.
+00020d40: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
+00020d50: 7265 6769 7374 7279 2c20 7374 796c 652c  registry, style,
+00020d60: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
+00020d70: 6961 6c5f 706f 696e 742c 2064 6562 7567  ial_point, debug
+00020d80: 5f73 7472 6561 6d2c 2070 6678 0a20 2020  _stream, pfx.   
+00020d90: 2020 2020 2029 0a0a 0a63 6c61 7373 2043       )...class C
+00020da0: 6c69 7070 696e 6750 6174 6828 5061 696e  lippingPath(Pain
+00020db0: 7465 6450 6174 6829 3a0a 2020 2020 2222  tedPath):.    ""
+00020dc0: 220a 2020 2020 5468 6520 5061 696e 7465  ".    The Painte
+00020dd0: 6450 6174 6820 4150 4920 6275 7420 746f  dPath API but to
+00020de0: 2062 6520 7573 6564 2074 6f20 6372 6561   be used to crea
+00020df0: 7465 2063 6c69 7070 696e 6720 7061 7468  te clipping path
+00020e00: 732e 0a0a 2020 2020 2e2e 2077 6172 6e69  s...    .. warni
+00020e10: 6e67 3a3a 0a20 2020 2020 2020 2055 6e6c  ng::.        Unl
+00020e20: 6573 7320 796f 7520 7265 616c 6c79 206b  ess you really k
+00020e30: 6e6f 7720 7768 6174 2079 6f75 2772 6520  now what you're 
+00020e40: 646f 696e 672c 2063 6861 6e67 696e 6720  doing, changing 
+00020e50: 6174 7472 6962 7574 6573 206f 6620 7468  attributes of th
+00020e60: 6520 636c 6970 7069 6e67 0a20 2020 2020  e clipping.     
+00020e70: 2020 2070 6174 6820 7374 796c 6520 6973     path style is
+00020e80: 206c 696b 656c 7920 746f 2070 726f 6475   likely to produ
+00020e90: 6365 2075 6e65 7870 6563 7465 6420 7265  ce unexpected re
+00020ea0: 7375 6c74 732e 2054 6869 7320 6973 2062  sults. This is b
+00020eb0: 6563 6175 7365 2074 6865 0a20 2020 2020  ecause the.     
+00020ec0: 2020 2063 6c69 7070 696e 6720 7061 7468     clipping path
+00020ed0: 2073 7479 6c65 7320 6f76 6572 7269 6465   styles override
+00020ee0: 2069 6d70 6c69 6369 7420 7374 796c 6520   implicit style 
+00020ef0: 696e 6865 7269 7461 6e63 6520 6f66 2074  inheritance of t
+00020f00: 6865 2060 5061 696e 7465 6450 6174 6860  he `PaintedPath`
+00020f10: 0a20 2020 2020 2020 2069 7420 6170 706c  .        it appl
+00020f20: 6965 7320 746f 2e0a 0a20 2020 2020 2020  ies to...       
+00020f30: 2046 6f72 2065 7861 6d70 6c65 2c20 6063   For example, `c
+00020f40: 6c69 7070 6174 682e 7374 796c 652e 7374  lippath.style.st
+00020f50: 726f 6b65 5f77 6964 7468 203d 2032 6020  roke_width = 2` 
+00020f60: 6361 6e20 756e 6578 7065 6374 6564 6c79  can unexpectedly
+00020f70: 206f 7665 7272 6964 650a 2020 2020 2020   override.      
+00020f80: 2020 6070 6169 6e74 7061 7468 2e73 7479    `paintpath.sty
+00020f90: 6c65 2e73 7472 6f6b 655f 7769 6474 6820  le.stroke_width 
+00020fa0: 3d20 4772 6170 6869 6373 5374 796c 652e  = GraphicsStyle.
+00020fb0: 494e 4845 5249 5460 2061 6e64 2063 6175  INHERIT` and cau
+00020fc0: 7365 2074 6865 2070 6169 6e74 6564 0a20  se the painted. 
+00020fd0: 2020 2020 2020 2070 6174 6820 746f 2062         path to b
+00020fe0: 6520 7265 6e64 6572 6564 2077 6974 6820  e rendered with 
+00020ff0: 6120 7374 726f 6b65 206f 6620 3220 696e  a stroke of 2 in
+00021000: 7374 6561 6420 6f66 2077 6861 7420 6974  stead of what it
+00021010: 2077 6f75 6c64 2068 6176 6520 6e6f 726d   would have norm
+00021020: 616c 6c79 0a20 2020 2020 2020 2069 6e68  ally.        inh
+00021030: 6572 6974 6564 2e20 4265 6361 7573 6520  erited. Because 
+00021040: 6120 6043 6c69 7070 696e 6750 6174 6860  a `ClippingPath`
+00021050: 2063 616e 2062 6520 7061 696e 7465 6420   can be painted 
+00021060: 6c69 6b65 2061 206e 6f72 6d61 6c20 6050  like a normal `P
+00021070: 6169 6e74 6564 5061 7468 602c 0a20 2020  aintedPath`,.   
+00021080: 2020 2020 2069 7420 776f 756c 6420 6265       it would be
+00021090: 206f 7665 726c 7920 7265 7374 7269 6374   overly restrict
+000210a0: 6976 6520 746f 2072 656d 6f76 6520 7468  ive to remove th
+000210b0: 6520 6162 696c 6974 7920 746f 2073 7479  e ability to sty
+000210c0: 6c65 2069 742c 2073 6f20 696e 7374 6561  le it, so instea
+000210d0: 640a 2020 2020 2020 2020 7468 6973 2077  d.        this w
+000210e0: 6172 6e69 6e67 2069 7320 6865 7265 2e0a  arning is here..
+000210f0: 2020 2020 2222 220a 0a20 2020 2023 2062      """..    # b
+00021100: 6563 6175 7365 2063 6c69 7070 696e 6720  ecause clipping 
+00021110: 7061 7468 7320 6361 6e20 6265 2070 6169  paths can be pai
+00021120: 6e74 6564 2c20 7765 2069 6e68 6572 6974  nted, we inherit
+00021130: 2066 726f 6d20 5061 696e 7465 6450 6174   from PaintedPat
+00021140: 682e 2048 6f77 6576 6572 2c20 7768 656e  h. However, when
+00021150: 0a20 2020 2023 2073 6574 7469 6e67 2074  .    # setting t
+00021160: 6865 2073 7479 6c69 6e67 206f 6e20 7468  he styling on th
+00021170: 6520 636c 6970 7069 6e67 2070 6174 682c  e clipping path,
+00021180: 2074 686f 7365 2076 616c 7565 7320 7769   those values wi
+00021190: 6c6c 2061 6c73 6f20 6265 2061 7070 6c69  ll also be appli
+000211a0: 6564 2074 6f0a 2020 2020 2320 7468 6520  ed to.    # the 
+000211b0: 5061 696e 7465 6450 6174 6820 7468 6520  PaintedPath the 
+000211c0: 436c 6970 7069 6e67 5061 7468 2069 7320  ClippingPath is 
+000211d0: 6170 706c 6965 6420 746f 2075 6e6c 6573  applied to unles
+000211e0: 7320 7468 6579 2061 7265 2065 7870 6c69  s they are expli
+000211f0: 6369 746c 7920 7365 7420 666f 720a 2020  citly set for.  
+00021200: 2020 2320 7468 6174 2070 6169 6e74 6564    # that painted
+00021210: 2070 6174 682e 2054 6869 7320 6973 206e   path. This is n
+00021220: 6f74 2069 6465 616c 2c20 6275 7420 7468  ot ideal, but th
+00021230: 6572 6527 7320 6e6f 2077 6179 2074 6f20  ere's no way to 
+00021240: 7265 616c 6c79 2066 6978 2069 7420 6672  really fix it fr
+00021250: 6f6d 0a20 2020 2023 2074 6865 2050 4446  om.    # the PDF
+00021260: 2072 656e 6465 7269 6e67 206d 6f64 656c   rendering model
+00021270: 2c20 616e 6420 7472 7969 6e67 2074 6f20  , and trying to 
+00021280: 7472 6163 6b20 7468 6520 6170 7072 6f70  track the approp
+00021290: 7269 6174 6520 7374 6174 652f 6465 6661  riate state/defa
+000212a0: 756c 7473 2073 6565 6d73 0a20 2020 2023  ults seems.    #
+000212b0: 2073 696d 696c 6172 6c79 2065 7272 6f72   similarly error
+000212c0: 2070 726f 6e65 2e0a 0a20 2020 2023 2049   prone...    # I
+000212d0: 6e20 6765 6e65 7261 6c2c 2074 6865 2065  n general, the e
+000212e0: 7870 6563 7461 7469 6f6e 2069 7320 7468  xpectation is th
+000212f0: 6174 2070 6169 6e74 6564 2063 6c69 7070  at painted clipp
+00021300: 696e 6720 7061 7468 7320 6172 6520 6c69  ing paths are li
+00021310: 6b65 6c79 2074 6f20 6265 2076 6572 790a  kely to be very.
+00021320: 2020 2020 2320 756e 636f 6d6d 6f6e 2c20      # uncommon, 
+00021330: 736f 2069 7427 7320 616e 2065 6467 6520  so it's an edge 
+00021340: 6361 7365 2074 6861 7420 6973 6e27 7420  case that isn't 
+00021350: 776f 7274 6820 776f 7272 7969 6e67 2074  worth worrying t
+00021360: 6f6f 206d 7563 6820 6162 6f75 742e 0a0a  oo much about...
+00021370: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00021380: 2873 656c 662c 2078 3d30 2c20 793d 3029  (self, x=0, y=0)
+00021390: 3a0a 2020 2020 2020 2020 7375 7065 7228  :.        super(
+000213a0: 292e 5f5f 696e 6974 5f5f 2878 3d78 2c20  ).__init__(x=x, 
+000213b0: 793d 7929 0a20 2020 2020 2020 2073 656c  y=y).        sel
+000213c0: 662e 7061 696e 745f 7275 6c65 203d 2050  f.paint_rule = P
+000213d0: 6174 6850 6169 6e74 5275 6c65 2e44 4f4e  athPaintRule.DON
+000213e0: 545f 5041 494e 540a 0a20 2020 2064 6566  T_PAINT..    def
+000213f0: 2072 656e 6465 7228 0a20 2020 2020 2020   render(.       
+00021400: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
+00021410: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00021420: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00021430: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
+00021440: 616d 3d4e 6f6e 652c 2070 6678 3d4e 6f6e  am=None, pfx=Non
+00021450: 650a 2020 2020 293a 0a20 2020 2020 2020  e.    ):.       
+00021460: 2023 2070 6169 6e74 696e 6720 7468 6520   # painting the 
+00021470: 636c 6970 7069 6e67 2070 6174 6820 6f75  clipping path ou
+00021480: 7473 6964 6520 6f66 2069 7473 2072 6f6f  tside of its roo
+00021490: 7420 6772 6170 6869 6373 2063 6f6e 7465  t graphics conte
+000214a0: 7874 2061 6c6c 6f77 7320 6974 2074 6f0a  xt allows it to.
+000214b0: 2020 2020 2020 2020 2320 6265 2074 7261          # be tra
+000214c0: 6e73 666f 726d 6564 2077 6974 686f 7574  nsformed without
+000214d0: 2061 6666 6563 7469 6e67 2074 6865 2074   affecting the t
+000214e0: 7261 6e73 666f 726d 206f 6620 7468 6520  ransform of the 
+000214f0: 6772 6170 6869 6373 2063 6f6e 7465 7874  graphics context
+00021500: 206f 6620 7468 650a 2020 2020 2020 2020   of the.        
+00021510: 2320 7061 7468 2069 7420 6973 2062 6569  # path it is bei
+00021520: 6e67 2075 7365 6420 746f 2063 6c69 702e  ng used to clip.
+00021530: 2054 6869 7320 6973 2062 6563 6175 7365   This is because
+00021540: 2c20 756e 6c69 6b65 2061 6c6c 206f 6620  , unlike all of 
+00021550: 7468 6520 6f74 6865 7220 7374 796c 650a  the other style.
+00021560: 2020 2020 2020 2020 2320 7365 7474 696e          # settin
+00021570: 6773 2c20 7472 616e 7366 6f72 6d61 7469  gs, transformati
+00021580: 6f6e 7320 696d 6d65 6469 6174 656c 7920  ons immediately 
+00021590: 6166 6665 6374 2074 6865 2070 6f69 6e74  affect the point
+000215a0: 7320 666f 6c6c 6f77 696e 6720 7468 656d  s following them
+000215b0: 2c0a 2020 2020 2020 2020 2320 7261 7468  ,.        # rath
+000215c0: 6572 2074 6861 6e20 6f6e 6c79 2061 6666  er than only aff
+000215d0: 6563 7469 6e67 2074 6865 6d20 6174 2070  ecting them at p
+000215e0: 6169 6e74 696e 6720 7469 6d65 2e20 7374  ainting time. st
+000215f0: 726f 6b65 2073 6574 7469 6e67 7320 616e  roke settings an
+00021600: 6420 636f 6c6f 720a 2020 2020 2020 2020  d color.        
+00021610: 2320 7365 7474 696e 6773 2061 7265 2061  # settings are a
+00021620: 7070 6c69 6564 206f 6e6c 7920 6174 2070  pplied only at p
+00021630: 6169 6e74 2074 696d 652e 0a0a 2020 2020  aint time...    
+00021640: 2020 2020 6966 2064 6562 7567 5f73 7472      if debug_str
+00021650: 6561 6d3a 0a20 2020 2020 2020 2020 2020  eam:.           
+00021660: 2064 6562 7567 5f73 7472 6561 6d2e 7772   debug_stream.wr
+00021670: 6974 6528 223c 436c 6970 7069 6e67 5061  ite("<ClippingPa
+00021680: 7468 3e20 2229 0a0a 2020 2020 2020 2020  th> ")..        
+00021690: 280a 2020 2020 2020 2020 2020 2020 7265  (.            re
+000216a0: 6e64 6572 5f6c 6973 742c 0a20 2020 2020  nder_list,.     
+000216b0: 2020 2020 2020 206c 6173 745f 6974 656d         last_item
+000216c0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
+000216d0: 6974 6961 6c5f 706f 696e 742c 0a20 2020  itial_point,.   
+000216e0: 2020 2020 2029 203d 2073 656c 662e 5f72       ) = self._r
+000216f0: 6f6f 745f 6772 6170 6869 6373 5f63 6f6e  oot_graphics_con
+00021700: 7465 7874 2e62 7569 6c64 5f72 656e 6465  text.build_rende
+00021710: 725f 6c69 7374 280a 2020 2020 2020 2020  r_list(.        
+00021720: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+00021730: 2c0a 2020 2020 2020 2020 2020 2020 7374  ,.            st
+00021740: 796c 652c 0a20 2020 2020 2020 2020 2020  yle,.           
+00021750: 206c 6173 745f 6974 656d 2c0a 2020 2020   last_item,.    
+00021760: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
+00021770: 706f 696e 742c 0a20 2020 2020 2020 2020  point,.         
+00021780: 2020 2064 6562 7567 5f73 7472 6561 6d2c     debug_stream,
+00021790: 0a20 2020 2020 2020 2020 2020 2070 6678  .            pfx
+000217a0: 2c0a 2020 2020 2020 2020 2020 2020 5f70  ,.            _p
+000217b0: 7573 685f 7374 6163 6b3d 4661 6c73 652c  ush_stack=False,
+000217c0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+000217d0: 2020 2020 6d65 7267 6564 5f73 7479 6c65      merged_style
+000217e0: 203d 2047 7261 7068 6963 7353 7479 6c65   = GraphicsStyle
+000217f0: 2e6d 6572 6765 2873 7479 6c65 2c20 7365  .merge(style, se
+00021800: 6c66 2e73 7479 6c65 290a 2020 2020 2020  lf.style).      
+00021810: 2020 2320 7765 2073 686f 756c 6420 6e65    # we should ne
+00021820: 7665 7220 6765 7420 6120 636f 6c6c 6973  ver get a collis
+00021830: 696f 6e20 6572 726f 7220 6865 7265 0a20  ion error here. 
+00021840: 2020 2020 2020 2069 6e74 6572 7365 6374         intersect
+00021850: 696f 6e5f 7275 6c65 203d 206d 6572 6765  ion_rule = merge
+00021860: 645f 7374 796c 652e 696e 7465 7273 6563  d_style.intersec
+00021870: 7469 6f6e 5f72 756c 650a 2020 2020 2020  tion_rule.      
+00021880: 2020 6966 2069 6e74 6572 7365 6374 696f    if intersectio
+00021890: 6e5f 7275 6c65 2069 7320 6d65 7267 6564  n_rule is merged
+000218a0: 5f73 7479 6c65 2e49 4e48 4552 4954 3a0a  _style.INHERIT:.
+000218b0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+000218c0: 7273 6563 7469 6f6e 5f72 756c 6520 3d20  rsection_rule = 
+000218d0: 436c 6970 7069 6e67 5061 7468 496e 7465  ClippingPathInte
+000218e0: 7273 6563 7469 6f6e 5275 6c65 2e4e 4f4e  rsectionRule.NON
+000218f0: 5a45 524f 0a20 2020 2020 2020 2065 6c73  ZERO.        els
+00021900: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+00021910: 6e74 6572 7365 6374 696f 6e5f 7275 6c65  ntersection_rule
+00021920: 203d 2043 6c69 7070 696e 6750 6174 6849   = ClippingPathI
+00021930: 6e74 6572 7365 6374 696f 6e52 756c 655b  ntersectionRule[
+00021940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021950: 2069 6e74 6572 7365 6374 696f 6e5f 7275   intersection_ru
+00021960: 6c65 2e6e 616d 6520 2023 2070 796c 696e  le.name  # pylin
+00021970: 743a 2064 6973 6162 6c65 3d6e 6f2d 6d65  t: disable=no-me
+00021980: 6d62 6572 2c20 7573 656c 6573 732d 7375  mber, useless-su
+00021990: 7070 7265 7373 696f 6e0a 2020 2020 2020  ppression.      
+000219a0: 2020 2020 2020 5d0a 0a20 2020 2020 2020        ]..       
+000219b0: 2070 6169 6e74 5f72 756c 6520 3d20 6d65   paint_rule = me
+000219c0: 7267 6564 5f73 7479 6c65 2e72 6573 6f6c  rged_style.resol
+000219d0: 7665 5f70 6169 6e74 5f72 756c 6528 290a  ve_paint_rule().
+000219e0: 0a20 2020 2020 2020 2072 656e 6465 725f  .        render_
+000219f0: 6c69 7374 2e61 7070 656e 6428 696e 7465  list.append(inte
+00021a00: 7273 6563 7469 6f6e 5f72 756c 652e 7661  rsection_rule.va
+00021a10: 6c75 6529 0a20 2020 2020 2020 2072 656e  lue).        ren
+00021a20: 6465 725f 6c69 7374 2e61 7070 656e 6428  der_list.append(
+00021a30: 7061 696e 745f 7275 6c65 2e76 616c 7565  paint_rule.value
+00021a40: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00021a50: 6e20 2220 222e 6a6f 696e 2872 656e 6465  n " ".join(rende
+00021a60: 725f 6c69 7374 292c 206c 6173 745f 6974  r_list), last_it
+00021a70: 656d 2c20 696e 6974 6961 6c5f 706f 696e  em, initial_poin
+00021a80: 740a 0a20 2020 2064 6566 2072 656e 6465  t..    def rende
+00021a90: 725f 6465 6275 6728 0a20 2020 2020 2020  r_debug(.       
+00021aa0: 2073 656c 662c 2067 7364 5f72 6567 6973   self, gsd_regis
+00021ab0: 7472 792c 2073 7479 6c65 2c20 6c61 7374  try, style, last
+00021ac0: 5f69 7465 6d2c 2069 6e69 7469 616c 5f70  _item, initial_p
+00021ad0: 6f69 6e74 2c20 6465 6275 675f 7374 7265  oint, debug_stre
+00021ae0: 616d 2c20 7066 780a 2020 2020 293a 0a20  am, pfx.    ):. 
+00021af0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00021b00: 2020 2052 656e 6465 7220 7468 6973 2070     Render this p
+00021b10: 6174 6820 656c 656d 656e 7420 746f 2069  ath element to i
+00021b20: 7473 2050 4446 2072 6570 7265 7365 6e74  ts PDF represent
+00021b30: 6174 696f 6e20 616e 6420 7072 6f64 7563  ation and produc
+00021b40: 6520 6465 6275 670a 2020 2020 2020 2020  e debug.        
+00021b50: 696e 666f 726d 6174 696f 6e2e 0a0a 2020  information...  
+00021b60: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
+00021b70: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+00021b80: 7374 7279 2028 4772 6170 6869 6373 5374  stry (GraphicsSt
+00021b90: 6174 6544 6963 7452 6567 6973 7472 7929  ateDictRegistry)
+00021ba0: 3a20 7468 6520 6f77 6e65 7227 7320 6772  : the owner's gr
+00021bb0: 6170 6869 6373 2073 7461 7465 0a20 2020  aphics state.   
+00021bc0: 2020 2020 2020 2020 2020 2020 2064 6963               dic
+00021bd0: 7469 6f6e 6172 7920 7265 6769 7374 7279  tionary registry
+00021be0: 2e0a 2020 2020 2020 2020 2020 2020 7374  ..            st
+00021bf0: 796c 6520 2847 7261 7068 6963 7353 7479  yle (GraphicsSty
+00021c00: 6c65 293a 2074 6865 2063 7572 7265 6e74  le): the current
+00021c10: 2072 6573 6f6c 7665 6420 6772 6170 6869   resolved graphi
+00021c20: 6373 2073 7479 6c65 0a20 2020 2020 2020  cs style.       
+00021c30: 2020 2020 206c 6173 745f 6974 656d 3a20       last_item: 
+00021c40: 7468 6520 7072 6576 696f 7573 2070 6174  the previous pat
+00021c50: 6820 656c 656d 656e 742e 0a20 2020 2020  h element..     
+00021c60: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
+00021c70: 6561 6d20 2869 6f2e 5465 7874 494f 293a  eam (io.TextIO):
+00021c80: 2074 6865 2073 7472 6561 6d20 746f 2077   the stream to w
+00021c90: 6869 6368 2074 6865 2064 6562 7567 206f  hich the debug o
+00021ca0: 7574 7075 7420 7368 6f75 6c64 2062 650a  utput should be.
+00021cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021cc0: 7772 6974 7465 6e2e 2054 6869 7320 6973  written. This is
+00021cd0: 206e 6f74 2067 7561 7261 6e74 6565 6420   not guaranteed 
+00021ce0: 746f 2062 6520 7365 656b 6162 6c65 2028  to be seekable (
+00021cf0: 652e 672e 2069 7420 6d61 7920 6265 2073  e.g. it may be s
+00021d00: 7464 6f75 7420 6f72 0a20 2020 2020 2020  tdout or.       
+00021d10: 2020 2020 2020 2020 2073 7464 6572 7229           stderr)
+00021d20: 2e0a 2020 2020 2020 2020 2020 2020 7066  ..            pf
+00021d30: 7820 2873 7472 293a 2074 6865 2063 7572  x (str): the cur
+00021d40: 7265 6e74 2064 6562 7567 206f 7574 7075  rent debug outpu
+00021d50: 7420 7072 6566 6978 2073 7472 696e 6720  t prefix string 
+00021d60: 286f 6e6c 7920 6e65 6564 6564 2069 6620  (only needed if 
+00021d70: 656d 6974 7469 6e67 0a20 2020 2020 2020  emitting.       
+00021d80: 2020 2020 2020 2020 206d 6f72 6520 7468           more th
+00021d90: 616e 206f 6e65 206c 696e 6529 2e0a 0a20  an one line)... 
+00021da0: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+00021db0: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+00021dc0: 7361 6d65 2074 7570 6c65 2061 7320 6043  same tuple as `C
+00021dd0: 6c69 7070 696e 6750 6174 682e 7265 6e64  lippingPath.rend
+00021de0: 6572 602e 0a20 2020 2020 2020 2022 2222  er`..        """
+00021df0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00021e00: 7365 6c66 2e72 656e 6465 7228 0a20 2020  self.render(.   
+00021e10: 2020 2020 2020 2020 2067 7364 5f72 6567           gsd_reg
+00021e20: 6973 7472 792c 2073 7479 6c65 2c20 6c61  istry, style, la
+00021e30: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00021e40: 5f70 6f69 6e74 2c20 6465 6275 675f 7374  _point, debug_st
+00021e50: 7265 616d 2c20 7066 780a 2020 2020 2020  ream, pfx.      
+00021e60: 2020 290a 0a0a 636c 6173 7320 4772 6170    )...class Grap
+00021e70: 6869 6373 436f 6e74 6578 743a 0a20 2020  hicsContext:.   
+00021e80: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+00021e90: 6c66 293a 0a20 2020 2020 2020 2073 656c  lf):.        sel
+00021ea0: 662e 7374 796c 6520 3d20 4772 6170 6869  f.style = Graphi
+00021eb0: 6373 5374 796c 6528 290a 2020 2020 2020  csStyle().      
+00021ec0: 2020 7365 6c66 2e70 6174 685f 6974 656d    self.path_item
+00021ed0: 7320 3d20 5b5d 0a0a 2020 2020 2020 2020  s = []..        
+00021ee0: 7365 6c66 2e5f 7472 616e 7366 6f72 6d20  self._transform 
+00021ef0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+00021f00: 656c 662e 5f63 6c69 7070 696e 675f 7061  elf._clipping_pa
+00021f10: 7468 203d 204e 6f6e 650a 0a20 2020 2064  th = None..    d
+00021f20: 6566 205f 5f64 6565 7063 6f70 795f 5f28  ef __deepcopy__(
+00021f30: 7365 6c66 2c20 6d65 6d6f 293a 0a20 2020  self, memo):.   
+00021f40: 2020 2020 2063 6f70 6965 6420 3d20 7365       copied = se
+00021f50: 6c66 2e5f 5f63 6c61 7373 5f5f 2829 0a20  lf.__class__(). 
+00021f60: 2020 2020 2020 2063 6f70 6965 642e 7374         copied.st
+00021f70: 796c 6520 3d20 636f 7079 2e64 6565 7063  yle = copy.deepc
+00021f80: 6f70 7928 7365 6c66 2e73 7479 6c65 2c20  opy(self.style, 
+00021f90: 6d65 6d6f 290a 2020 2020 2020 2020 636f  memo).        co
+00021fa0: 7069 6564 2e70 6174 685f 6974 656d 7320  pied.path_items 
+00021fb0: 3d20 636f 7079 2e64 6565 7063 6f70 7928  = copy.deepcopy(
+00021fc0: 7365 6c66 2e70 6174 685f 6974 656d 732c  self.path_items,
+00021fd0: 206d 656d 6f29 0a0a 2020 2020 2020 2020   memo)..        
+00021fe0: 636f 7069 6564 2e5f 7472 616e 7366 6f72  copied._transfor
+00021ff0: 6d20 3d20 636f 7079 2e64 6565 7063 6f70  m = copy.deepcop
+00022000: 7928 7365 6c66 2e74 7261 6e73 666f 726d  y(self.transform
+00022010: 2c20 6d65 6d6f 290a 2020 2020 2020 2020  , memo).        
+00022020: 636f 7069 6564 2e5f 636c 6970 7069 6e67  copied._clipping
+00022030: 5f70 6174 6820 3d20 636f 7079 2e64 6565  _path = copy.dee
+00022040: 7063 6f70 7928 7365 6c66 2e63 6c69 7070  pcopy(self.clipp
+00022050: 696e 675f 7061 7468 2c20 6d65 6d6f 290a  ing_path, memo).
+00022060: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00022070: 636f 7069 6564 0a0a 2020 2020 4070 726f  copied..    @pro
+00022080: 7065 7274 790a 2020 2020 6465 6620 7472  perty.    def tr
+00022090: 616e 7366 6f72 6d28 7365 6c66 293a 0a20  ansform(self):. 
+000220a0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000220b0: 6c66 2e5f 7472 616e 7366 6f72 6d0a 0a20  lf._transform.. 
+000220c0: 2020 2040 7472 616e 7366 6f72 6d2e 7365     @transform.se
+000220d0: 7474 6572 0a20 2020 2064 6566 2074 7261  tter.    def tra
+000220e0: 6e73 666f 726d 2873 656c 662c 2074 6629  nsform(self, tf)
+000220f0: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
+00022100: 7472 616e 7366 6f72 6d20 3d20 7466 0a0a  transform = tf..
+00022110: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+00022120: 2020 6465 6620 636c 6970 7069 6e67 5f70    def clipping_p
+00022130: 6174 6828 7365 6c66 293a 0a20 2020 2020  ath(self):.     
+00022140: 2020 2022 2222 5468 6520 6043 6c69 7070     """The `Clipp
+00022150: 696e 6750 6174 6860 2066 6f72 2074 6869  ingPath` for thi
+00022160: 7320 6772 6170 6869 6373 2063 6f6e 7465  s graphics conte
+00022170: 7874 2e22 2222 0a20 2020 2020 2020 2072  xt.""".        r
+00022180: 6574 7572 6e20 7365 6c66 2e5f 636c 6970  eturn self._clip
+00022190: 7069 6e67 5f70 6174 680a 0a20 2020 2040  ping_path..    @
+000221a0: 636c 6970 7069 6e67 5f70 6174 682e 7365  clipping_path.se
+000221b0: 7474 6572 0a20 2020 2064 6566 2063 6c69  tter.    def cli
+000221c0: 7070 696e 675f 7061 7468 2873 656c 662c  pping_path(self,
+000221d0: 206e 6577 5f63 6c69 7061 7468 293a 0a20   new_clipath):. 
+000221e0: 2020 2020 2020 2073 656c 662e 5f63 6c69         self._cli
+000221f0: 7070 696e 675f 7061 7468 203d 206e 6577  pping_path = new
+00022200: 5f63 6c69 7061 7468 0a0a 2020 2020 6465  _clipath..    de
+00022210: 6620 6164 645f 6974 656d 2873 656c 662c  f add_item(self,
+00022220: 2069 7465 6d2c 205f 636f 7079 3d54 7275   item, _copy=Tru
+00022230: 6529 3a0a 2020 2020 2020 2020 2222 220a  e):.        """.
+00022240: 2020 2020 2020 2020 4164 6420 6120 7061          Add a pa
+00022250: 7468 2065 6c65 6d65 6e74 2074 6f20 7468  th element to th
+00022260: 6973 2067 7261 7068 6963 7320 636f 6e74  is graphics cont
+00022270: 6578 742e 0a0a 2020 2020 2020 2020 4172  ext...        Ar
+00022280: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00022290: 6974 656d 3a20 7468 6520 7061 7468 2065  item: the path e
+000222a0: 6c65 6d65 6e74 2074 6f20 6164 642e 204d  lement to add. M
+000222b0: 6179 2062 6520 6120 7072 696d 6974 6976  ay be a primitiv
+000222c0: 6520 656c 656d 656e 7420 6f72 2061 6e6f  e element or ano
+000222d0: 7468 6572 0a20 2020 2020 2020 2020 2020  ther.           
+000222e0: 2020 2020 2060 4772 6170 6869 6373 436f       `GraphicsCo
+000222f0: 6e74 6578 7460 206f 7220 6120 6050 6169  ntext` or a `Pai
+00022300: 6e74 6564 5061 7468 602e 0a20 2020 2020  ntedPath`..     
+00022310: 2020 2020 2020 205f 636f 7079 2028 626f         _copy (bo
+00022320: 6f6c 293a 2069 6620 7472 7565 2028 7468  ol): if true (th
+00022330: 6520 6465 6661 756c 7429 2c20 7468 6520  e default), the 
+00022340: 6974 656d 2077 696c 6c20 6265 2063 6f70  item will be cop
+00022350: 6965 6420 6265 666f 7265 2062 6569 6e67  ied before being
+00022360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022370: 2061 7070 656e 6465 642e 2054 6869 7320   appended. This 
+00022380: 7072 6576 656e 7473 206d 6f64 6966 6963  prevents modific
+00022390: 6174 696f 6e73 2074 6f20 6120 7265 6665  ations to a refe
+000223a0: 7265 6e63 6564 206f 626a 6563 7420 6672  renced object fr
+000223b0: 6f6d 0a20 2020 2020 2020 2020 2020 2020  om.             
+000223c0: 2020 2022 7265 7472 6f61 6374 6976 656c     "retroactivel
+000223d0: 7922 2061 6c74 6572 696e 6720 6974 7320  y" altering its 
+000223e0: 7374 796c 652f 7368 6170 6520 616e 6420  style/shape and 
+000223f0: 7368 6f75 6c64 2062 6520 6469 7361 626c  should be disabl
+00022400: 6564 2077 6974 680a 2020 2020 2020 2020  ed with.        
+00022410: 2020 2020 2020 2020 6361 7574 696f 6e2e          caution.
+00022420: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00022430: 2020 2020 2069 6620 5f63 6f70 793a 0a20       if _copy:. 
+00022440: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+00022450: 3d20 636f 7079 2e64 6565 7063 6f70 7928  = copy.deepcopy(
+00022460: 6974 656d 290a 0a20 2020 2020 2020 2073  item)..        s
+00022470: 656c 662e 7061 7468 5f69 7465 6d73 2e61  elf.path_items.a
+00022480: 7070 656e 6428 6974 656d 290a 0a20 2020  ppend(item)..   
+00022490: 2064 6566 2072 656d 6f76 655f 6c61 7374   def remove_last
+000224a0: 5f69 7465 6d28 7365 6c66 293a 0a20 2020  _item(self):.   
+000224b0: 2020 2020 2064 656c 2073 656c 662e 7061       del self.pa
+000224c0: 7468 5f69 7465 6d73 5b2d 315d 0a0a 2020  th_items[-1]..  
+000224d0: 2020 6465 6620 6d65 7267 6528 7365 6c66    def merge(self
+000224e0: 2c20 6f74 6865 725f 636f 6e74 6578 7429  , other_context)
+000224f0: 3a0a 2020 2020 2020 2020 2222 2243 6f70  :.        """Cop
+00022500: 7920 616e 6f74 6865 7220 6047 7261 7068  y another `Graph
+00022510: 6963 7343 6f6e 7465 7874 6027 7320 7061  icsContext`'s pa
+00022520: 7468 2069 7465 6d73 2069 6e74 6f20 7468  th items into th
+00022530: 6973 206f 6e65 2e22 2222 0a20 2020 2020  is one.""".     
+00022540: 2020 2073 656c 662e 7061 7468 5f69 7465     self.path_ite
+00022550: 6d73 2e65 7874 656e 6428 6f74 6865 725f  ms.extend(other_
+00022560: 636f 6e74 6578 742e 7061 7468 5f69 7465  context.path_ite
+00022570: 6d73 290a 0a20 2020 2040 666f 7263 655f  ms)..    @force_
+00022580: 6e6f 646f 6375 6d65 6e74 0a20 2020 2064  nodocument.    d
+00022590: 6566 2062 7569 6c64 5f72 656e 6465 725f  ef build_render_
+000225a0: 6c69 7374 280a 2020 2020 2020 2020 7365  list(.        se
+000225b0: 6c66 2c0a 2020 2020 2020 2020 6773 645f  lf,.        gsd_
+000225c0: 7265 6769 7374 7279 2c0a 2020 2020 2020  registry,.      
+000225d0: 2020 7374 796c 652c 0a20 2020 2020 2020    style,.       
+000225e0: 206c 6173 745f 6974 656d 2c0a 2020 2020   last_item,.    
+000225f0: 2020 2020 696e 6974 6961 6c5f 706f 696e      initial_poin
+00022600: 742c 0a20 2020 2020 2020 2064 6562 7567  t,.        debug
+00022610: 5f73 7472 6561 6d3d 4e6f 6e65 2c0a 2020  _stream=None,.  
+00022620: 2020 2020 2020 7066 783d 4e6f 6e65 2c0a        pfx=None,.
+00022630: 2020 2020 2020 2020 5f70 7573 685f 7374          _push_st
+00022640: 6163 6b3d 5472 7565 2c0a 2020 2020 293a  ack=True,.    ):
+00022650: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00022660: 2020 2020 2042 7569 6c64 2061 206c 6973       Build a lis
+00022670: 7420 636f 6d70 6f73 6564 206f 6620 616c  t composed of al
+00022680: 6c20 616c 6c20 7468 6520 696e 6469 7669  l all the indivi
+00022690: 6475 616c 2065 6c65 6d65 6e74 7320 7265  dual elements re
+000226a0: 6e64 6572 6564 2e0a 0a20 2020 2020 2020  ndered...       
+000226b0: 2054 6869 7320 6973 2075 7365 6420 6279   This is used by
+000226c0: 2060 5061 696e 7465 6450 6174 6860 2061   `PaintedPath` a
+000226d0: 6e64 2060 436c 6970 7069 6e67 5061 7468  nd `ClippingPath
+000226e0: 6020 746f 2072 6575 7365 2074 6865 2060  ` to reuse the `
+000226f0: 4772 6170 6869 6373 436f 6e74 6578 7460  GraphicsContext`
+00022700: 0a20 2020 2020 2020 2072 656e 6465 7269  .        renderi
+00022710: 6e67 2070 726f 6365 7373 2077 6869 6c65  ng process while
+00022720: 2073 7469 6c6c 2062 6569 6e67 2061 626c   still being abl
+00022730: 6520 746f 2069 6e6a 6563 7420 736f 6d65  e to inject some
+00022740: 2070 6174 6820 7370 6563 6966 6963 2069   path specific i
+00022750: 7465 6d73 0a20 2020 2020 2020 2028 652e  tems.        (e.
+00022760: 672e 2074 6865 2070 6169 6e74 696e 6720  g. the painting 
+00022770: 6469 7265 6374 6976 6529 2062 6566 6f72  directive) befor
+00022780: 6520 7468 6520 7265 6e64 6572 2069 7320  e the render is 
+00022790: 636f 6c6c 6170 7365 6420 696e 746f 2061  collapsed into a
+000227a0: 2073 696e 676c 650a 2020 2020 2020 2020   single.        
+000227b0: 7374 7269 6e67 2e0a 0a20 2020 2020 2020  string...       
+000227c0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+000227d0: 2020 2067 7364 5f72 6567 6973 7472 7920     gsd_registry 
+000227e0: 2847 7261 7068 6963 7353 7461 7465 4469  (GraphicsStateDi
+000227f0: 6374 5265 6769 7374 7279 293a 2074 6865  ctRegistry): the
+00022800: 206f 776e 6572 2773 2067 7261 7068 6963   owner's graphic
+00022810: 7320 7374 6174 650a 2020 2020 2020 2020  s state.        
+00022820: 2020 2020 2020 2020 6469 6374 696f 6e61          dictiona
+00022830: 7279 2072 6567 6973 7472 792e 0a20 2020  ry registry..   
+00022840: 2020 2020 2020 2020 2073 7479 6c65 2028           style (
+00022850: 4772 6170 6869 6373 5374 796c 6529 3a20  GraphicsStyle): 
+00022860: 7468 6520 6375 7272 656e 7420 7265 736f  the current reso
+00022870: 6c76 6564 2067 7261 7068 6963 7320 7374  lved graphics st
+00022880: 796c 650a 2020 2020 2020 2020 2020 2020  yle.            
+00022890: 6c61 7374 5f69 7465 6d3a 2074 6865 2070  last_item: the p
+000228a0: 7265 7669 6f75 7320 7061 7468 2065 6c65  revious path ele
+000228b0: 6d65 6e74 2e0a 2020 2020 2020 2020 2020  ment..          
+000228c0: 2020 696e 6974 6961 6c5f 706f 696e 743a    initial_point:
+000228d0: 206c 6173 7420 706f 7369 7469 6f6e 2073   last position s
+000228e0: 6574 2062 7920 6120 224d 2220 6f72 2022  et by a "M" or "
+000228f0: 6d22 2063 6f6d 6d61 6e64 0a20 2020 2020  m" command.     
+00022900: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
+00022910: 6561 6d20 2869 6f2e 5465 7874 494f 293a  eam (io.TextIO):
+00022920: 2074 6865 2073 7472 6561 6d20 746f 2077   the stream to w
+00022930: 6869 6368 2074 6865 2064 6562 7567 206f  hich the debug o
+00022940: 7574 7075 7420 7368 6f75 6c64 2062 650a  utput should be.
+00022950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022960: 7772 6974 7465 6e2e 2054 6869 7320 6973  written. This is
+00022970: 206e 6f74 2067 7561 7261 6e74 6565 6420   not guaranteed 
+00022980: 746f 2062 6520 7365 656b 6162 6c65 2028  to be seekable (
+00022990: 652e 672e 2069 7420 6d61 7920 6265 2073  e.g. it may be s
+000229a0: 7464 6f75 7420 6f72 0a20 2020 2020 2020  tdout or.       
+000229b0: 2020 2020 2020 2020 2073 7464 6572 7229           stderr)
+000229c0: 2e0a 2020 2020 2020 2020 2020 2020 7066  ..            pf
+000229d0: 7820 2873 7472 293a 2074 6865 2063 7572  x (str): the cur
+000229e0: 7265 6e74 2064 6562 7567 206f 7574 7075  rent debug outpu
+000229f0: 7420 7072 6566 6978 2073 7472 696e 6720  t prefix string 
+00022a00: 286f 6e6c 7920 6e65 6564 6564 2069 6620  (only needed if 
+00022a10: 656d 6974 7469 6e67 0a20 2020 2020 2020  emitting.       
+00022a20: 2020 2020 2020 2020 206d 6f72 6520 7468           more th
+00022a30: 616e 206f 6e65 206c 696e 6529 2e0a 2020  an one line)..  
+00022a40: 2020 2020 2020 2020 2020 5f70 7573 685f            _push_
+00022a50: 7374 6163 6b20 2862 6f6f 6c29 3a20 6966  stack (bool): if
+00022a60: 2054 7275 652c 2077 7261 7020 7468 6520   True, wrap the 
+00022a70: 7265 7375 6c74 696e 6720 7265 6e64 6572  resulting render
+00022a80: 206c 6973 7420 696e 2061 2070 7573 682f   list in a push/
+00022a90: 706f 700a 2020 2020 2020 2020 2020 2020  pop.            
+00022aa0: 2020 2020 6772 6170 6869 6373 2073 7461      graphics sta
+00022ab0: 636b 2064 6972 6563 7469 7665 2070 6169  ck directive pai
+00022ac0: 722e 0a0a 2020 2020 2020 2020 5265 7475  r...        Retu
+00022ad0: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00022ae0: 2060 7475 706c 655b 6c69 7374 5b73 7472   `tuple[list[str
+00022af0: 5d2c 206c 6173 745f 6974 656d 5d60 2077  ], last_item]` w
+00022b00: 6865 7265 2060 6c61 7374 5f69 7465 6d60  here `last_item`
+00022b10: 2069 7320 7468 6520 7061 7374 2070 6174   is the past pat
+00022b20: 6820 656c 656d 656e 7420 696e 0a20 2020  h element in.   
+00022b30: 2020 2020 2020 2020 2074 6869 7320 6047           this `G
+00022b40: 7261 7068 6963 7343 6f6e 7465 7874 600a  raphicsContext`.
+00022b50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00022b60: 2020 2020 7265 6e64 6572 5f6c 6973 7420      render_list 
+00022b70: 3d20 5b5d 0a0a 2020 2020 2020 2020 6966  = []..        if
+00022b80: 2073 656c 662e 7061 7468 5f69 7465 6d73   self.path_items
+00022b90: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00022ba0: 2064 6562 7567 5f73 7472 6561 6d20 6973   debug_stream is
+00022bb0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00022bc0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+00022bd0: 5f73 7472 6561 6d2e 7772 6974 6528 6622  _stream.write(f"
+00022be0: 7b73 656c 662e 5f5f 636c 6173 735f 5f2e  {self.__class__.
+00022bf0: 5f5f 6e61 6d65 5f5f 7d22 290a 0a20 2020  __name__}")..   
+00022c00: 2020 2020 2020 2020 206d 6572 6765 645f           merged_
+00022c10: 7374 796c 6520 3d20 7374 796c 652e 5f5f  style = style.__
+00022c20: 636c 6173 735f 5f2e 6d65 7267 6528 7374  class__.merge(st
+00022c30: 796c 652c 2073 656c 662e 7374 796c 6529  yle, self.style)
+00022c40: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00022c50: 2064 6562 7567 5f73 7472 6561 6d20 6973   debug_stream is
+00022c60: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00022c70: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00022c80: 6c66 2e5f 7472 616e 7366 6f72 6d3a 0a20  lf._transform:. 
+00022c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022ca0: 2020 2064 6562 7567 5f73 7472 6561 6d2e     debug_stream.
+00022cb0: 7772 6974 6528 6622 287b 7365 6c66 2e5f  write(f"({self._
+00022cc0: 7472 616e 7366 6f72 6d7d 2922 290a 0a20  transform})").. 
+00022cd0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00022ce0: 7479 6c65 735f 6462 6720 3d20 5b5d 0a20  tyles_dbg = []. 
+00022cf0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00022d00: 6f72 2061 7474 7220 696e 206d 6572 6765  or attr in merge
+00022d10: 645f 7374 796c 652e 4d45 5247 455f 5052  d_style.MERGE_PR
+00022d20: 4f50 4552 5449 4553 3a0a 2020 2020 2020  OPERTIES:.      
+00022d30: 2020 2020 2020 2020 2020 2020 2020 7661                va
+00022d40: 6c20 3d20 6765 7461 7474 7228 6d65 7267  l = getattr(merg
+00022d50: 6564 5f73 7479 6c65 2c20 6174 7472 290a  ed_style, attr).
+00022d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022d70: 2020 2020 6966 2076 616c 2069 7320 6e6f      if val is no
+00022d80: 7420 6d65 7267 6564 5f73 7479 6c65 2e49  t merged_style.I
+00022d90: 4e48 4552 4954 3a0a 2020 2020 2020 2020  NHERIT:.        
+00022da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022db0: 6966 2067 6574 6174 7472 2873 656c 662e  if getattr(self.
+00022dc0: 7374 796c 652c 2061 7474 7229 2069 7320  style, attr) is 
+00022dd0: 6d65 7267 6564 5f73 7479 6c65 2e49 4e48  merged_style.INH
+00022de0: 4552 4954 3a0a 2020 2020 2020 2020 2020  ERIT:.          
+00022df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022e00: 2020 696e 6820 3d20 2220 2869 6e68 6572    inh = " (inher
+00022e10: 6974 6564 2922 0a20 2020 2020 2020 2020  ited)".         
+00022e20: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00022e30: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00022e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022e50: 2069 6e68 203d 2022 220a 0a20 2020 2020   inh = ""..     
+00022e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022e70: 2020 2073 7479 6c65 735f 6462 672e 6170     styles_dbg.ap
+00022e80: 7065 6e64 2866 227b 6174 7472 7d3a 207b  pend(f"{attr}: {
+00022e90: 7661 6c7d 7b69 6e68 7d22 290a 0a20 2020  val}{inh}")..   
+00022ea0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00022eb0: 7374 796c 6573 5f64 6267 3a0a 2020 2020  styles_dbg:.    
+00022ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022ed0: 6465 6275 675f 7374 7265 616d 2e77 7269  debug_stream.wri
+00022ee0: 7465 2822 207b 5c6e 2229 0a20 2020 2020  te(" {\n").     
+00022ef0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00022f00: 6f72 2073 7479 6c65 5f64 6267 5f6c 696e  or style_dbg_lin
+00022f10: 6520 696e 2073 7479 6c65 735f 6462 673a  e in styles_dbg:
+00022f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022f30: 2020 2020 2020 2020 2064 6562 7567 5f73           debug_s
+00022f40: 7472 6561 6d2e 7772 6974 6528 7066 7820  tream.write(pfx 
+00022f50: 2b20 2220 2020 2022 290a 2020 2020 2020  + "    ").      
+00022f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022f70: 2020 6465 6275 675f 7374 7265 616d 2e77    debug_stream.w
+00022f80: 7269 7465 2873 7479 6c65 5f64 6267 5f6c  rite(style_dbg_l
+00022f90: 696e 6529 0a20 2020 2020 2020 2020 2020  ine).           
+00022fa0: 2020 2020 2020 2020 2020 2020 2064 6562               deb
+00022fb0: 7567 5f73 7472 6561 6d2e 7772 6974 6528  ug_stream.write(
+00022fc0: 225c 6e22 290a 0a20 2020 2020 2020 2020  "\n")..         
+00022fd0: 2020 2020 2020 2020 2020 2064 6562 7567             debug
+00022fe0: 5f73 7472 6561 6d2e 7772 6974 6528 7066  _stream.write(pf
+00022ff0: 7820 2b20 227d e294 905c 6e22 290a 2020  x + "}...\n").  
+00023000: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00023010: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00023020: 2020 2020 2020 2020 6465 6275 675f 7374          debug_st
+00023030: 7265 616d 2e77 7269 7465 2822 5c6e 2229  ream.write("\n")
+00023040: 0a0a 2020 2020 2020 2020 2020 2020 4e4f  ..            NO
+00023050: 5f45 4d49 545f 5345 5420 3d20 7b4e 6f6e  _EMIT_SET = {Non
+00023060: 652c 206d 6572 6765 645f 7374 796c 652e  e, merged_style.
+00023070: 494e 4845 5249 547d 0a0a 2020 2020 2020  INHERIT}..      
+00023080: 2020 2020 2020 656d 6974 5f73 7479 6c65        emit_style
+00023090: 203d 2073 656c 662e 7374 796c 650a 2020   = self.style.  
+000230a0: 2020 2020 2020 2020 2020 6966 206d 6572            if mer
+000230b0: 6765 645f 7374 796c 652e 616c 6c6f 775f  ged_style.allow_
+000230c0: 7472 616e 7370 6172 656e 6379 2021 3d20  transparency != 
+000230d0: 7365 6c66 2e73 7479 6c65 2e61 6c6c 6f77  self.style.allow
+000230e0: 5f74 7261 6e73 7061 7265 6e63 793a 0a20  _transparency:. 
+000230f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00023100: 6d69 745f 7374 796c 6520 3d20 636f 7079  mit_style = copy
+00023110: 2e64 6565 7063 6f70 7928 7365 6c66 2e73  .deepcopy(self.s
+00023120: 7479 6c65 290a 2020 2020 2020 2020 2020  tyle).          
+00023130: 2020 2020 2020 656d 6974 5f73 7479 6c65        emit_style
+00023140: 2e61 6c6c 6f77 5f74 7261 6e73 7061 7265  .allow_transpare
+00023150: 6e63 7920 3d20 6d65 7267 6564 5f73 7479  ncy = merged_sty
+00023160: 6c65 2e61 6c6c 6f77 5f74 7261 6e73 7061  le.allow_transpa
+00023170: 7265 6e63 790a 0a20 2020 2020 2020 2020  rency..         
+00023180: 2020 2023 2069 6e20 6f72 6465 7220 746f     # in order to
+00023190: 2064 6563 6f75 706c 6520 7468 6520 6461   decouple the da
+000231a0: 7368 2070 6174 7465 726e 2061 6e64 2074  sh pattern and t
+000231b0: 6865 2064 6173 6820 7068 6173 6520 6174  he dash phase at
+000231c0: 2074 6865 2041 5049 206c 6179 6572 2c0a   the API layer,.
+000231d0: 2020 2020 2020 2020 2020 2020 2320 7765              # we
+000231e0: 2068 6176 6520 746f 2070 6572 666f 726d   have to perform
+000231f0: 2061 6464 6974 696f 6e61 6c20 6c6f 6769   additional logi
+00023200: 6320 6865 7265 2074 6f20 7265 636f 6d62  c here to recomb
+00023210: 696e 6520 7468 656d 2e20 5765 2063 616e  ine them. We can
+00023220: 2072 656c 790a 2020 2020 2020 2020 2020   rely.          
+00023230: 2020 2320 6f6e 2074 6865 7365 2062 6569    # on these bei
+00023240: 6e67 2073 6572 6961 6c69 7a61 626c 6520  ng serializable 
+00023250: 6265 6361 7573 6520 7765 2061 6c77 6179  because we alway
+00023260: 7320 6765 7420 6120 7361 6e65 2073 7479  s get a sane sty
+00023270: 6c65 206f 6e20 7468 650a 2020 2020 2020  le on the.      
+00023280: 2020 2020 2020 2320 6472 6177 696e 6720        # drawing 
+00023290: 636f 6e74 6578 742e 0a20 2020 2020 2020  context..       
+000232a0: 2020 2020 2064 6173 685f 7061 7474 6572       dash_patter
+000232b0: 6e20 3d20 6d65 7267 6564 5f73 7479 6c65  n = merged_style
+000232c0: 2e73 7472 6f6b 655f 6461 7368 5f70 6174  .stroke_dash_pat
+000232d0: 7465 726e 0a20 2020 2020 2020 2020 2020  tern.           
+000232e0: 2064 6173 685f 7068 6173 6520 3d20 6d65   dash_phase = me
+000232f0: 7267 6564 5f73 7479 6c65 2e73 7472 6f6b  rged_style.strok
+00023300: 655f 6461 7368 5f70 6861 7365 0a20 2020  e_dash_phase.   
+00023310: 2020 2020 2020 2020 2069 6620 2864 6173           if (das
+00023320: 685f 7061 7474 6572 6e20 213d 2073 7479  h_pattern != sty
+00023330: 6c65 2e73 7472 6f6b 655f 6461 7368 5f70  le.stroke_dash_p
+00023340: 6174 7465 726e 2920 6f72 2028 0a20 2020  attern) or (.   
+00023350: 2020 2020 2020 2020 2020 2020 2064 6173               das
+00023360: 685f 7068 6173 6520 213d 2073 7479 6c65  h_phase != style
+00023370: 2e73 7472 6f6b 655f 6461 7368 5f70 6861  .stroke_dash_pha
+00023380: 7365 0a20 2020 2020 2020 2020 2020 2029  se.            )
+00023390: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000233a0: 2020 6966 2065 6d69 745f 7374 796c 6520    if emit_style 
+000233b0: 6973 2073 656c 662e 7374 796c 653a 0a20  is self.style:. 
+000233c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000233d0: 2020 2065 6d69 745f 7374 796c 6520 3d20     emit_style = 
+000233e0: 636f 7079 2e64 6565 7063 6f70 7928 656d  copy.deepcopy(em
+000233f0: 6974 5f73 7479 6c65 290a 2020 2020 2020  it_style).      
+00023400: 2020 2020 2020 2020 2020 656d 6974 5f73            emit_s
+00023410: 7479 6c65 2e73 7472 6f6b 655f 6461 7368  tyle.stroke_dash
+00023420: 5f70 6174 7465 726e 203d 2064 6173 685f  _pattern = dash_
+00023430: 7061 7474 6572 6e0a 2020 2020 2020 2020  pattern.        
+00023440: 2020 2020 2020 2020 656d 6974 5f73 7479          emit_sty
+00023450: 6c65 2e73 7472 6f6b 655f 6461 7368 5f70  le.stroke_dash_p
+00023460: 6861 7365 203d 2064 6173 685f 7068 6173  hase = dash_phas
+00023470: 650a 0a20 2020 2020 2020 2020 2020 2020  e..             
+00023480: 2020 2065 6d69 745f 6461 7368 203d 2028     emit_dash = (
+00023490: 6461 7368 5f70 6174 7465 726e 2c20 6461  dash_pattern, da
+000234a0: 7368 5f70 6861 7365 290a 2020 2020 2020  sh_phase).      
+000234b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000234c0: 2020 2020 2020 2020 2020 2020 656d 6974              emit
+000234d0: 5f64 6173 6820 3d20 4e6f 6e65 0a0a 2020  _dash = None..  
+000234e0: 2020 2020 2020 2020 2020 7374 796c 655f            style_
+000234f0: 6469 6374 5f6e 616d 6520 3d20 6773 645f  dict_name = gsd_
+00023500: 7265 6769 7374 7279 2e72 6567 6973 7465  registry.registe
+00023510: 725f 7374 796c 6528 656d 6974 5f73 7479  r_style(emit_sty
+00023520: 6c65 290a 0a20 2020 2020 2020 2020 2020  le)..           
+00023530: 2069 6620 7374 796c 655f 6469 6374 5f6e   if style_dict_n
+00023540: 616d 6520 6973 206e 6f74 204e 6f6e 653a  ame is not None:
+00023550: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023560: 2072 656e 6465 725f 6c69 7374 2e61 7070   render_list.app
+00023570: 656e 6428 6622 7b72 656e 6465 725f 7064  end(f"{render_pd
+00023580: 665f 7072 696d 6974 6976 6528 7374 796c  f_primitive(styl
+00023590: 655f 6469 6374 5f6e 616d 6529 7d20 6773  e_dict_name)} gs
+000235a0: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
+000235b0: 2320 7765 2063 616e 2774 2073 6574 2063  # we can't set c
+000235c0: 6f6c 6f72 2069 6e20 7468 6520 6772 6170  olor in the grap
+000235d0: 6869 6373 2073 7461 7465 2063 6f6e 7465  hics state conte
+000235e0: 7874 2064 6963 7469 6f6e 6172 792c 2073  xt dictionary, s
+000235f0: 6f20 7765 2068 6176 6520 746f 0a20 2020  o we have to.   
+00023600: 2020 2020 2020 2020 2023 206d 616e 7561           # manua
+00023610: 6c6c 7920 696e 6865 7269 7420 6974 2061  lly inherit it a
+00023620: 6e64 2065 6d69 7420 6974 2068 6572 652e  nd emit it here.
+00023630: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+00023640: 6c5f 636f 6c6f 7220 3d20 7365 6c66 2e73  l_color = self.s
+00023650: 7479 6c65 2e66 696c 6c5f 636f 6c6f 720a  tyle.fill_color.
+00023660: 2020 2020 2020 2020 2020 2020 7374 726f              stro
+00023670: 6b65 5f63 6f6c 6f72 203d 2073 656c 662e  ke_color = self.
+00023680: 7374 796c 652e 7374 726f 6b65 5f63 6f6c  style.stroke_col
+00023690: 6f72 0a0a 2020 2020 2020 2020 2020 2020  or..            
+000236a0: 6966 2066 696c 6c5f 636f 6c6f 7220 6e6f  if fill_color no
+000236b0: 7420 696e 204e 4f5f 454d 4954 5f53 4554  t in NO_EMIT_SET
+000236c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000236d0: 2020 7265 6e64 6572 5f6c 6973 742e 6170    render_list.ap
+000236e0: 7065 6e64 2866 696c 6c5f 636f 6c6f 722e  pend(fill_color.
+000236f0: 7365 7269 616c 697a 6528 292e 6c6f 7765  serialize().lowe
+00023700: 7228 2929 0a0a 2020 2020 2020 2020 2020  r())..          
+00023710: 2020 6966 2073 7472 6f6b 655f 636f 6c6f    if stroke_colo
+00023720: 7220 6e6f 7420 696e 204e 4f5f 454d 4954  r not in NO_EMIT
+00023730: 5f53 4554 3a0a 2020 2020 2020 2020 2020  _SET:.          
+00023740: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+00023750: 742e 6170 7065 6e64 2873 7472 6f6b 655f  t.append(stroke_
+00023760: 636f 6c6f 722e 7365 7269 616c 697a 6528  color.serialize(
+00023770: 292e 7570 7065 7228 2929 0a0a 2020 2020  ).upper())..    
+00023780: 2020 2020 2020 2020 6966 2065 6d69 745f          if emit_
+00023790: 6461 7368 2069 7320 6e6f 7420 4e6f 6e65  dash is not None
+000237a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000237b0: 2020 7265 6e64 6572 5f6c 6973 742e 6170    render_list.ap
+000237c0: 7065 6e64 280a 2020 2020 2020 2020 2020  pend(.          
+000237d0: 2020 2020 2020 2020 2020 7265 6e64 6572            render
+000237e0: 5f70 6466 5f70 7269 6d69 7469 7665 2865  _pdf_primitive(e
+000237f0: 6d69 745f 6461 7368 5b30 5d29 0a20 2020  mit_dash[0]).   
+00023800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023810: 202b 2066 2220 7b6e 756d 6265 725f 746f   + f" {number_to
+00023820: 5f73 7472 2865 6d69 745f 6461 7368 5b31  _str(emit_dash[1
+00023830: 5d29 7d20 6422 0a20 2020 2020 2020 2020  ])} d".         
+00023840: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00023850: 2020 2020 2020 6966 2064 6562 7567 5f73        if debug_s
+00023860: 7472 6561 6d3a 0a20 2020 2020 2020 2020  tream:.         
+00023870: 2020 2020 2020 2069 6620 7365 6c66 2e63         if self.c
+00023880: 6c69 7070 696e 675f 7061 7468 2069 7320  lipping_path is 
+00023890: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000238a0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+000238b0: 6275 675f 7374 7265 616d 2e77 7269 7465  bug_stream.write
+000238c0: 2870 6678 202b 2022 20e2 949c e294 8020  (pfx + " ...... 
+000238d0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+000238e0: 2020 2020 2020 2072 656e 6465 7265 645f         rendered_
+000238f0: 6370 6174 682c 205f 2c20 5f5f 203d 2073  cpath, _, __ = s
+00023900: 656c 662e 636c 6970 7069 6e67 5f70 6174  elf.clipping_pat
+00023910: 682e 7265 6e64 6572 5f64 6562 7567 280a  h.render_debug(.
+00023920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023930: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
+00023940: 7374 7279 2c0a 2020 2020 2020 2020 2020  stry,.          
+00023950: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+00023960: 7267 6564 5f73 7479 6c65 2c0a 2020 2020  rged_style,.    
+00023970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023980: 2020 2020 6c61 7374 5f69 7465 6d2c 0a20      last_item,. 
+00023990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000239a0: 2020 2020 2020 2069 6e69 7469 616c 5f70         initial_p
+000239b0: 6f69 6e74 2c0a 2020 2020 2020 2020 2020  oint,.          
+000239c0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+000239d0: 6275 675f 7374 7265 616d 2c0a 2020 2020  bug_stream,.    
+000239e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000239f0: 2020 2020 7066 7820 2b20 2220 e294 8220      pfx + " ... 
+00023a00: 2022 2c0a 2020 2020 2020 2020 2020 2020   ",.            
+00023a10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00023a20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00023a30: 2072 656e 6465 7265 645f 6370 6174 683a   rendered_cpath:
+00023a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023a50: 2020 2020 2020 2020 2072 656e 6465 725f           render_
+00023a60: 6c69 7374 2e61 7070 656e 6428 7265 6e64  list.append(rend
+00023a70: 6572 6564 5f63 7061 7468 290a 0a20 2020  ered_cpath)..   
+00023a80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00023a90: 2069 7465 6d20 696e 2073 656c 662e 7061   item in self.pa
+00023aa0: 7468 5f69 7465 6d73 5b3a 2d31 5d3a 0a20  th_items[:-1]:. 
+00023ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ac0: 2020 2064 6562 7567 5f73 7472 6561 6d2e     debug_stream.
+00023ad0: 7772 6974 6528 7066 7820 2b20 2220 e294  write(pfx + " ..
+00023ae0: 9ce2 9480 2022 290a 2020 2020 2020 2020  .... ").        
+00023af0: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
+00023b00: 6572 6564 2c20 6c61 7374 5f69 7465 6d2c  ered, last_item,
+00023b10: 2069 6e69 7469 616c 5f70 6f69 6e74 203d   initial_point =
+00023b20: 2069 7465 6d2e 7265 6e64 6572 5f64 6562   item.render_deb
+00023b30: 7567 280a 2020 2020 2020 2020 2020 2020  ug(.            
+00023b40: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
+00023b50: 7265 6769 7374 7279 2c0a 2020 2020 2020  registry,.      
+00023b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b70: 2020 6d65 7267 6564 5f73 7479 6c65 2c0a    merged_style,.
+00023b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b90: 2020 2020 2020 2020 6c61 7374 5f69 7465          last_ite
+00023ba0: 6d2c 0a20 2020 2020 2020 2020 2020 2020  m,.             
+00023bb0: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+00023bc0: 616c 5f70 6f69 6e74 2c0a 2020 2020 2020  al_point,.      
 00023bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023be0: 2020 6d65 7267 6564 5f73 7479 6c65 2c0a    merged_style,.
+00023be0: 2020 6465 6275 675f 7374 7265 616d 2c0a    debug_stream,.
 00023bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c00: 2020 2020 6c61 7374 5f69 7465 6d2c 0a20      last_item,. 
-00023c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c20: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
-00023c30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00023c40: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
-00023c50: 616d 2c0a 2020 2020 2020 2020 2020 2020  am,.            
-00023c60: 2020 2020 2020 2020 7066 7820 2b20 2220          pfx + " 
-00023c70: 2020 2022 2c0a 2020 2020 2020 2020 2020     ",.          
-00023c80: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00023c90: 2020 2020 2020 2020 2069 6620 7265 6e64           if rend
-00023ca0: 6572 6564 3a0a 2020 2020 2020 2020 2020  ered:.          
-00023cb0: 2020 2020 2020 2020 2020 7265 6e64 6572            render
-00023cc0: 5f6c 6973 742e 6170 7065 6e64 2872 656e  _list.append(ren
-00023cd0: 6465 7265 6429 0a0a 2020 2020 2020 2020  dered)..        
-00023ce0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00023cf0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00023d00: 662e 636c 6970 7069 6e67 5f70 6174 6820  f.clipping_path 
-00023d10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00023d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d30: 2072 656e 6465 7265 645f 6370 6174 682c   rendered_cpath,
-00023d40: 205f 2c20 5f5f 203d 2073 656c 662e 636c   _, __ = self.cl
-00023d50: 6970 7069 6e67 5f70 6174 682e 7265 6e64  ipping_path.rend
-00023d60: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-00023d70: 2020 2020 2020 2020 2020 2020 6773 645f              gsd_
-00023d80: 7265 6769 7374 7279 2c20 6d65 7267 6564  registry, merged
-00023d90: 5f73 7479 6c65 2c20 6c61 7374 5f69 7465  _style, last_ite
-00023da0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-00023db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023dc0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00023dd0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
-00023de0: 6e64 6572 6564 5f63 7061 7468 3a0a 2020  ndered_cpath:.  
-00023df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023e00: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
-00023e10: 742e 6170 7065 6e64 2872 656e 6465 7265  t.append(rendere
-00023e20: 645f 6370 6174 6829 0a0a 2020 2020 2020  d_cpath)..      
-00023e30: 2020 2020 2020 2020 2020 666f 7220 6974            for it
-00023e40: 656d 2069 6e20 7365 6c66 2e70 6174 685f  em in self.path_
-00023e50: 6974 656d 733a 0a20 2020 2020 2020 2020  items:.         
-00023e60: 2020 2020 2020 2020 2020 2072 656e 6465             rende
-00023e70: 7265 642c 206c 6173 745f 6974 656d 2c20  red, last_item, 
-00023e80: 696e 6974 6961 6c5f 706f 696e 7420 3d20  initial_point = 
-00023e90: 6974 656d 2e72 656e 6465 7228 0a20 2020  item.render(.   
-00023ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023eb0: 2020 2020 2067 7364 5f72 6567 6973 7472       gsd_registr
-00023ec0: 792c 206d 6572 6765 645f 7374 796c 652c  y, merged_style,
-00023ed0: 206c 6173 745f 6974 656d 2c20 696e 6974   last_item, init
-00023ee0: 6961 6c5f 706f 696e 740a 2020 2020 2020  ial_point.      
-00023ef0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00023f00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023f10: 2020 2020 2069 6620 7265 6e64 6572 6564       if rendered
-00023f20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023f30: 2020 2020 2020 2020 2020 7265 6e64 6572            render
-00023f40: 5f6c 6973 742e 6170 7065 6e64 2872 656e  _list.append(ren
-00023f50: 6465 7265 6429 0a0a 2020 2020 2020 2020  dered)..        
-00023f60: 2020 2020 2320 696e 7365 7274 2074 7261      # insert tra
-00023f70: 6e73 666f 726d 2062 6566 6f72 6520 706f  nsform before po
-00023f80: 696e 7473 0a20 2020 2020 2020 2020 2020  ints.           
-00023f90: 2069 6620 7365 6c66 2e74 7261 6e73 666f   if self.transfo
-00023fa0: 726d 2069 7320 6e6f 7420 4e6f 6e65 3a0a  rm is not None:.
-00023fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023fc0: 7265 6e64 6572 5f6c 6973 742e 696e 7365  render_list.inse
-00023fd0: 7274 2830 2c20 7365 6c66 2e74 7261 6e73  rt(0, self.trans
-00023fe0: 666f 726d 2e72 656e 6465 7228 6c61 7374  form.render(last
-00023ff0: 5f69 7465 6d29 5b30 5d29 0a0a 2020 2020  _item)[0])..    
-00024000: 2020 2020 2020 2020 6966 205f 7075 7368          if _push
-00024010: 5f73 7461 636b 3a0a 2020 2020 2020 2020  _stack:.        
-00024020: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
-00024030: 6973 742e 696e 7365 7274 2830 2c20 2271  ist.insert(0, "q
-00024040: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00024050: 2020 2072 656e 6465 725f 6c69 7374 2e61     render_list.a
-00024060: 7070 656e 6428 2251 2229 0a0a 2020 2020  ppend("Q")..    
-00024070: 2020 2020 7265 7475 726e 2072 656e 6465      return rende
-00024080: 725f 6c69 7374 2c20 6c61 7374 5f69 7465  r_list, last_ite
-00024090: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
-000240a0: 0a0a 2020 2020 6465 6620 7265 6e64 6572  ..    def render
-000240b0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-000240c0: 2020 2020 2020 2020 6773 645f 7265 6769          gsd_regi
-000240d0: 7374 7279 2c0a 2020 2020 2020 2020 7374  stry,.        st
-000240e0: 796c 653a 2044 7261 7769 6e67 436f 6e74  yle: DrawingCont
-000240f0: 6578 742c 0a20 2020 2020 2020 206c 6173  ext,.        las
-00024100: 745f 6974 656d 2c0a 2020 2020 2020 2020  t_item,.        
-00024110: 696e 6974 6961 6c5f 706f 696e 742c 0a20  initial_point,. 
-00024120: 2020 2020 2020 2064 6562 7567 5f73 7472         debug_str
-00024130: 6561 6d3d 4e6f 6e65 2c0a 2020 2020 2020  eam=None,.      
-00024140: 2020 7066 783d 4e6f 6e65 2c0a 2020 2020    pfx=None,.    
-00024150: 2020 2020 5f70 7573 685f 7374 6163 6b3d      _push_stack=
-00024160: 5472 7565 2c0a 2020 2020 293a 0a20 2020  True,.    ):.   
-00024170: 2020 2020 2072 656e 6465 725f 6c69 7374       render_list
-00024180: 2c20 6c61 7374 5f69 7465 6d2c 2069 6e69  , last_item, ini
-00024190: 7469 616c 5f70 6f69 6e74 203d 2073 656c  tial_point = sel
-000241a0: 662e 6275 696c 645f 7265 6e64 6572 5f6c  f.build_render_l
-000241b0: 6973 7428 0a20 2020 2020 2020 2020 2020  ist(.           
-000241c0: 2067 7364 5f72 6567 6973 7472 792c 0a20   gsd_registry,. 
-000241d0: 2020 2020 2020 2020 2020 2073 7479 6c65             style
-000241e0: 2c0a 2020 2020 2020 2020 2020 2020 6c61  ,.            la
-000241f0: 7374 5f69 7465 6d2c 0a20 2020 2020 2020  st_item,.       
-00024200: 2020 2020 2069 6e69 7469 616c 5f70 6f69       initial_poi
-00024210: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
-00024220: 6465 6275 675f 7374 7265 616d 2c0a 2020  debug_stream,.  
-00024230: 2020 2020 2020 2020 2020 7066 782c 0a20            pfx,. 
-00024240: 2020 2020 2020 2020 2020 205f 7075 7368             _push
-00024250: 5f73 7461 636b 3d5f 7075 7368 5f73 7461  _stack=_push_sta
-00024260: 636b 2c0a 2020 2020 2020 2020 290a 0a20  ck,.        ).. 
-00024270: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
-00024280: 222e 6a6f 696e 2872 656e 6465 725f 6c69  ".join(render_li
-00024290: 7374 292c 206c 6173 745f 6974 656d 2c20  st), last_item, 
-000242a0: 696e 6974 6961 6c5f 706f 696e 740a 0a20  initial_point.. 
-000242b0: 2020 2064 6566 2072 656e 6465 725f 6465     def render_de
-000242c0: 6275 6728 0a20 2020 2020 2020 2073 656c  bug(.        sel
-000242d0: 662c 0a20 2020 2020 2020 2067 7364 5f72  f,.        gsd_r
-000242e0: 6567 6973 7472 792c 0a20 2020 2020 2020  egistry,.       
-000242f0: 2073 7479 6c65 3a20 4472 6177 696e 6743   style: DrawingC
-00024300: 6f6e 7465 7874 2c0a 2020 2020 2020 2020  ontext,.        
-00024310: 6c61 7374 5f69 7465 6d2c 0a20 2020 2020  last_item,.     
-00024320: 2020 2069 6e69 7469 616c 5f70 6f69 6e74     initial_point
-00024330: 2c0a 2020 2020 2020 2020 6465 6275 675f  ,.        debug_
-00024340: 7374 7265 616d 2c0a 2020 2020 2020 2020  stream,.        
-00024350: 7066 782c 0a20 2020 2020 2020 205f 7075  pfx,.        _pu
-00024360: 7368 5f73 7461 636b 3d54 7275 652c 0a20  sh_stack=True,. 
-00024370: 2020 2029 3a0a 2020 2020 2020 2020 7265     ):.        re
-00024380: 7475 726e 2073 656c 662e 7265 6e64 6572  turn self.render
-00024390: 280a 2020 2020 2020 2020 2020 2020 6773  (.            gs
-000243a0: 645f 7265 6769 7374 7279 2c0a 2020 2020  d_registry,.    
-000243b0: 2020 2020 2020 2020 7374 796c 652c 0a20          style,. 
-000243c0: 2020 2020 2020 2020 2020 206c 6173 745f             last_
-000243d0: 6974 656d 2c0a 2020 2020 2020 2020 2020  item,.          
-000243e0: 2020 696e 6974 6961 6c5f 706f 696e 742c    initial_point,
-000243f0: 0a20 2020 2020 2020 2020 2020 2064 6562  .            deb
-00024400: 7567 5f73 7472 6561 6d2c 0a20 2020 2020  ug_stream,.     
-00024410: 2020 2020 2020 2070 6678 2c0a 2020 2020         pfx,.    
-00024420: 2020 2020 2020 2020 5f70 7573 685f 7374          _push_st
-00024430: 6163 6b3d 5f70 7573 685f 7374 6163 6b2c  ack=_push_stack,
-00024440: 0a20 2020 2020 2020 2029 0a              .        ).
+00023c00: 2020 2020 2020 2020 7066 7820 2b20 2220          pfx + " 
+00023c10: e294 8220 2022 2c0a 2020 2020 2020 2020  ...  ",.        
+00023c20: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00023c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c40: 2020 2069 6620 7265 6e64 6572 6564 3a0a     if rendered:.
+00023c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c60: 2020 2020 2020 2020 7265 6e64 6572 5f6c          render_l
+00023c70: 6973 742e 6170 7065 6e64 2872 656e 6465  ist.append(rende
+00023c80: 7265 6429 0a0a 2020 2020 2020 2020 2020  red)..          
+00023c90: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00023ca0: 616d 2e77 7269 7465 2870 6678 202b 2022  am.write(pfx + "
+00023cb0: 20e2 9494 e294 8020 2229 0a20 2020 2020   ...... ").     
+00023cc0: 2020 2020 2020 2020 2020 2072 656e 6465             rende
+00023cd0: 7265 642c 206c 6173 745f 6974 656d 2c20  red, last_item, 
+00023ce0: 696e 6974 6961 6c5f 706f 696e 7420 3d20  initial_point = 
+00023cf0: 7365 6c66 2e70 6174 685f 6974 656d 735b  self.path_items[
+00023d00: 2d31 5d2e 7265 6e64 6572 5f64 6562 7567  -1].render_debug
+00023d10: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00023d20: 2020 2020 2020 6773 645f 7265 6769 7374        gsd_regist
+00023d30: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
+00023d40: 2020 2020 2020 2020 6d65 7267 6564 5f73          merged_s
+00023d50: 7479 6c65 2c0a 2020 2020 2020 2020 2020  tyle,.          
+00023d60: 2020 2020 2020 2020 2020 6c61 7374 5f69            last_i
+00023d70: 7465 6d2c 0a20 2020 2020 2020 2020 2020  tem,.           
+00023d80: 2020 2020 2020 2020 2069 6e69 7469 616c           initial
+00023d90: 5f70 6f69 6e74 2c0a 2020 2020 2020 2020  _point,.        
+00023da0: 2020 2020 2020 2020 2020 2020 6465 6275              debu
+00023db0: 675f 7374 7265 616d 2c0a 2020 2020 2020  g_stream,.      
+00023dc0: 2020 2020 2020 2020 2020 2020 2020 7066                pf
+00023dd0: 7820 2b20 2220 2020 2022 2c0a 2020 2020  x + "    ",.    
+00023de0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00023df0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00023e00: 6620 7265 6e64 6572 6564 3a0a 2020 2020  f rendered:.    
+00023e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023e20: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
+00023e30: 6e64 2872 656e 6465 7265 6429 0a0a 2020  nd(rendered)..  
+00023e40: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00023e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023e60: 6966 2073 656c 662e 636c 6970 7069 6e67  if self.clipping
+00023e70: 5f70 6174 6820 6973 206e 6f74 204e 6f6e  _path is not Non
+00023e80: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00023e90: 2020 2020 2020 2072 656e 6465 7265 645f         rendered_
+00023ea0: 6370 6174 682c 205f 2c20 5f5f 203d 2073  cpath, _, __ = s
+00023eb0: 656c 662e 636c 6970 7069 6e67 5f70 6174  elf.clipping_pat
+00023ec0: 682e 7265 6e64 6572 280a 2020 2020 2020  h.render(.      
+00023ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023ee0: 2020 6773 645f 7265 6769 7374 7279 2c20    gsd_registry, 
+00023ef0: 6d65 7267 6564 5f73 7479 6c65 2c20 6c61  merged_style, la
+00023f00: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00023f10: 5f70 6f69 6e74 0a20 2020 2020 2020 2020  _point.         
+00023f20: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00023f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023f40: 2069 6620 7265 6e64 6572 6564 5f63 7061   if rendered_cpa
+00023f50: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+00023f60: 2020 2020 2020 2020 2020 2020 7265 6e64              rend
+00023f70: 6572 5f6c 6973 742e 6170 7065 6e64 2872  er_list.append(r
+00023f80: 656e 6465 7265 645f 6370 6174 6829 0a0a  endered_cpath)..
+00023f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023fa0: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
+00023fb0: 2e70 6174 685f 6974 656d 733a 0a20 2020  .path_items:.   
+00023fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023fd0: 2072 656e 6465 7265 642c 206c 6173 745f   rendered, last_
+00023fe0: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+00023ff0: 696e 7420 3d20 6974 656d 2e72 656e 6465  int = item.rende
+00024000: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+00024010: 2020 2020 2020 2020 2020 2067 7364 5f72             gsd_r
+00024020: 6567 6973 7472 792c 206d 6572 6765 645f  egistry, merged_
+00024030: 7374 796c 652c 206c 6173 745f 6974 656d  style, last_item
+00024040: 2c20 696e 6974 6961 6c5f 706f 696e 740a  , initial_point.
+00024050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024060: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
+00024070: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00024080: 6e64 6572 6564 3a0a 2020 2020 2020 2020  ndered:.        
+00024090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000240a0: 7265 6e64 6572 5f6c 6973 742e 6170 7065  render_list.appe
+000240b0: 6e64 2872 656e 6465 7265 6429 0a0a 2020  nd(rendered)..  
+000240c0: 2020 2020 2020 2020 2020 2320 696e 7365            # inse
+000240d0: 7274 2074 7261 6e73 666f 726d 2062 6566  rt transform bef
+000240e0: 6f72 6520 706f 696e 7473 0a20 2020 2020  ore points.     
+000240f0: 2020 2020 2020 2069 6620 7365 6c66 2e74         if self.t
+00024100: 7261 6e73 666f 726d 2069 7320 6e6f 7420  ransform is not 
+00024110: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00024120: 2020 2020 2020 7265 6e64 6572 5f6c 6973        render_lis
+00024130: 742e 696e 7365 7274 2830 2c20 7365 6c66  t.insert(0, self
+00024140: 2e74 7261 6e73 666f 726d 2e72 656e 6465  .transform.rende
+00024150: 7228 6c61 7374 5f69 7465 6d29 5b30 5d29  r(last_item)[0])
+00024160: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00024170: 205f 7075 7368 5f73 7461 636b 3a0a 2020   _push_stack:.  
+00024180: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00024190: 6e64 6572 5f6c 6973 742e 696e 7365 7274  nder_list.insert
+000241a0: 2830 2c20 2271 2229 0a20 2020 2020 2020  (0, "q").       
+000241b0: 2020 2020 2020 2020 2072 656e 6465 725f           render_
+000241c0: 6c69 7374 2e61 7070 656e 6428 2251 2229  list.append("Q")
+000241d0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000241e0: 2072 656e 6465 725f 6c69 7374 2c20 6c61   render_list, la
+000241f0: 7374 5f69 7465 6d2c 2069 6e69 7469 616c  st_item, initial
+00024200: 5f70 6f69 6e74 0a0a 2020 2020 6465 6620  _point..    def 
+00024210: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
+00024220: 7365 6c66 2c0a 2020 2020 2020 2020 6773  self,.        gs
+00024230: 645f 7265 6769 7374 7279 2c0a 2020 2020  d_registry,.    
+00024240: 2020 2020 7374 796c 653a 2044 7261 7769      style: Drawi
+00024250: 6e67 436f 6e74 6578 742c 0a20 2020 2020  ngContext,.     
+00024260: 2020 206c 6173 745f 6974 656d 2c0a 2020     last_item,.  
+00024270: 2020 2020 2020 696e 6974 6961 6c5f 706f        initial_po
+00024280: 696e 742c 0a20 2020 2020 2020 2064 6562  int,.        deb
+00024290: 7567 5f73 7472 6561 6d3d 4e6f 6e65 2c0a  ug_stream=None,.
+000242a0: 2020 2020 2020 2020 7066 783d 4e6f 6e65          pfx=None
+000242b0: 2c0a 2020 2020 2020 2020 5f70 7573 685f  ,.        _push_
+000242c0: 7374 6163 6b3d 5472 7565 2c0a 2020 2020  stack=True,.    
+000242d0: 293a 0a20 2020 2020 2020 2072 656e 6465  ):.        rende
+000242e0: 725f 6c69 7374 2c20 6c61 7374 5f69 7465  r_list, last_ite
+000242f0: 6d2c 2069 6e69 7469 616c 5f70 6f69 6e74  m, initial_point
+00024300: 203d 2073 656c 662e 6275 696c 645f 7265   = self.build_re
+00024310: 6e64 6572 5f6c 6973 7428 0a20 2020 2020  nder_list(.     
+00024320: 2020 2020 2020 2067 7364 5f72 6567 6973         gsd_regis
+00024330: 7472 792c 0a20 2020 2020 2020 2020 2020  try,.           
+00024340: 2073 7479 6c65 2c0a 2020 2020 2020 2020   style,.        
+00024350: 2020 2020 6c61 7374 5f69 7465 6d2c 0a20      last_item,. 
+00024360: 2020 2020 2020 2020 2020 2069 6e69 7469             initi
+00024370: 616c 5f70 6f69 6e74 2c0a 2020 2020 2020  al_point,.      
+00024380: 2020 2020 2020 6465 6275 675f 7374 7265        debug_stre
+00024390: 616d 2c0a 2020 2020 2020 2020 2020 2020  am,.            
+000243a0: 7066 782c 0a20 2020 2020 2020 2020 2020  pfx,.           
+000243b0: 205f 7075 7368 5f73 7461 636b 3d5f 7075   _push_stack=_pu
+000243c0: 7368 5f73 7461 636b 2c0a 2020 2020 2020  sh_stack,.      
+000243d0: 2020 290a 0a20 2020 2020 2020 2072 6574    )..        ret
+000243e0: 7572 6e20 2220 222e 6a6f 696e 2872 656e  urn " ".join(ren
+000243f0: 6465 725f 6c69 7374 292c 206c 6173 745f  der_list), last_
+00024400: 6974 656d 2c20 696e 6974 6961 6c5f 706f  item, initial_po
+00024410: 696e 740a 0a20 2020 2064 6566 2072 656e  int..    def ren
+00024420: 6465 725f 6465 6275 6728 0a20 2020 2020  der_debug(.     
+00024430: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00024440: 2067 7364 5f72 6567 6973 7472 792c 0a20   gsd_registry,. 
+00024450: 2020 2020 2020 2073 7479 6c65 3a20 4472         style: Dr
+00024460: 6177 696e 6743 6f6e 7465 7874 2c0a 2020  awingContext,.  
+00024470: 2020 2020 2020 6c61 7374 5f69 7465 6d2c        last_item,
+00024480: 0a20 2020 2020 2020 2069 6e69 7469 616c  .        initial
+00024490: 5f70 6f69 6e74 2c0a 2020 2020 2020 2020  _point,.        
+000244a0: 6465 6275 675f 7374 7265 616d 2c0a 2020  debug_stream,.  
+000244b0: 2020 2020 2020 7066 782c 0a20 2020 2020        pfx,.     
+000244c0: 2020 205f 7075 7368 5f73 7461 636b 3d54     _push_stack=T
+000244d0: 7275 652c 0a20 2020 2029 3a0a 2020 2020  rue,.    ):.    
+000244e0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000244f0: 7265 6e64 6572 280a 2020 2020 2020 2020  render(.        
+00024500: 2020 2020 6773 645f 7265 6769 7374 7279      gsd_registry
+00024510: 2c0a 2020 2020 2020 2020 2020 2020 7374  ,.            st
+00024520: 796c 652c 0a20 2020 2020 2020 2020 2020  yle,.           
+00024530: 206c 6173 745f 6974 656d 2c0a 2020 2020   last_item,.    
+00024540: 2020 2020 2020 2020 696e 6974 6961 6c5f          initial_
+00024550: 706f 696e 742c 0a20 2020 2020 2020 2020  point,.         
+00024560: 2020 2064 6562 7567 5f73 7472 6561 6d2c     debug_stream,
+00024570: 0a20 2020 2020 2020 2020 2020 2070 6678  .            pfx
+00024580: 2c0a 2020 2020 2020 2020 2020 2020 5f70  ,.            _p
+00024590: 7573 685f 7374 6163 6b3d 5f70 7573 685f  ush_stack=_push_
+000245a0: 7374 6163 6b2c 0a20 2020 2020 2020 2029  stack,.        )
+000245b0: 0a                                       .
```

### Comparing `fpdf2-2.7.8/fpdf/encryption.py` & `fpdf2-2.7.9/fpdf/encryption.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/enums.py` & `fpdf2-2.7.9/fpdf/enums.py`

 * *Files 0% similar despite different names*

```diff
@@ -50,15 +50,15 @@
             try:
                 return cls[value.upper()]
             except KeyError:
                 pass
 
             raise ValueError(f"{value} is not a valid {cls.__name__}")
 
-        raise TypeError(f"{value} cannot convert to a {cls.__name__}")
+        raise TypeError(f"{value} cannot be converted to a {cls.__name__}")
 
 
 class CoerciveIntEnum(IntEnum):
     """
     An enumeration that provides a helper to coerce strings and integers into
     enumeration members.
     """
@@ -223,14 +223,17 @@
     """
     Indicates use of bold / italics / underline.
 
     This enum values can be combined with & and | operators:
         style = B | I
     """
 
+    NONE = 0
+    "No emphasis"
+
     B = 1
     "Bold"
 
     I = 2
     "Italics"
 
     U = 4
@@ -242,15 +245,15 @@
             name for name, value in self.__class__.__members__.items() if value & self
         )
 
     @classmethod
     def coerce(cls, value):
         if isinstance(value, str):
             if value == "":
-                return 0
+                return cls.NONE
             if value.upper() == "BOLD":
                 return cls.B
             if value.upper() == "ITALICS":
                 return cls.I
             if value.upper() == "UNDERLINE":
                 return cls.U
         return super(cls, cls).coerce(value)
@@ -310,34 +313,61 @@
 
     ROWS = intern("ROWS")
     "Fill only table cells in odd rows"
 
     COLUMNS = intern("COLUMNS")
     "Fill only table cells in odd columns"
 
+    EVEN_ROWS = intern("EVEN_ROWS")
+    "Fill only table cells in even rows"
+
+    EVEN_COLUMNS = intern("EVEN_COLUMNS")
+    "Fill only table cells in even columns"
+
+    @classmethod
+    def coerce(cls, value):
+        "Any class that has a .should_fill_cell() method is considered a valid 'TableCellFillMode' (duck-typing)"
+        if callable(getattr(value, "should_fill_cell", None)):
+            return value
+        return super().coerce(value)
+
     def should_fill_cell(self, i, j):
         if self is self.NONE:
             return False
         if self is self.ALL:
             return True
         if self is self.ROWS:
-            return bool(i % 2)
+            return i % 2 == 1
         if self is self.COLUMNS:
-            return bool(j % 2)
+            return j % 2 == 1
+        if self is self.EVEN_ROWS:
+            return i % 2 == 0
+        if self is self.EVEN_COLUMNS:
+            return j % 2 == 0
         raise NotImplementedError
 
 
 class TableSpan(CoerciveEnum):
     ROW = intern("ROW")
     "Mark this cell as a continuation of the previous row"
 
     COL = intern("COL")
     "Mark this cell as a continuation of the previous column"
 
 
+class TableHeadingsDisplay(CoerciveIntEnum):
+    "Defines how the table headings should be displayed"
+
+    NONE = 0
+    "0: Only render the table headings at the beginning of the table"
+
+    ON_TOP_OF_EVERY_PAGE = 1
+    "1: When a page break occurs, repeat the table headings at the top of every table fragment"
+
+
 class RenderStyle(CoerciveEnum):
     "Defines how to render shapes"
 
     D = intern("DRAW")
     """
     Draw lines.
     Line color can be controlled with `fpdf.fpdf.FPDF.set_draw_color()`.
@@ -881,7 +911,22 @@
 class EncryptionMethod(Enum):
     "Algorithm to be used to encrypt the document"
 
     NO_ENCRYPTION = 0
     RC4 = 1
     AES_128 = 2
     AES_256 = 3
+
+
+class TextDirection(CoerciveEnum):
+    "Text rendering direction for text shaping"
+    LTR = intern("LTR")
+    "left to right"
+
+    RTL = intern("RTL")
+    "right to left"
+
+    TTB = intern("TTB")
+    "top to bottom"
+
+    BTT = intern("BTT")
+    "bottom to top"
```

### Comparing `fpdf2-2.7.8/fpdf/errors.py` & `fpdf2-2.7.9/fpdf/errors.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/fonts.py` & `fpdf2-2.7.9/fpdf/fonts.py`

 * *Files 0% similar despite different names*

```diff
@@ -47,25 +47,27 @@
         "family",
         "emphasis",
         "size_pt",
         "color",
         "fill_color",
     )
     family: Optional[str]
-    emphasis: Optional[TextEmphasis]  # can be a combination: B | U
+    emphasis: Optional[TextEmphasis]  # None means "no override"
+    #                                   Whereas "" means "no emphasis"
+    #                                   This can be a combination: B | U
     size_pt: Optional[int]
     # Colors are single number grey scales or (red, green, blue) tuples:
     color: Optional[Union[DeviceGray, DeviceRGB]]
     fill_color: Optional[Union[DeviceGray, DeviceRGB]]
 
     def __init__(
         self, family=None, emphasis=None, size_pt=None, color=None, fill_color=None
     ):
         self.family = family
-        self.emphasis = TextEmphasis.coerce(emphasis) if emphasis else None
+        self.emphasis = None if emphasis is None else TextEmphasis.coerce(emphasis)
         self.size_pt = size_pt
         self.color = None if color is None else convert_to_device_color(color)
         self.fill_color = (
             None if fill_color is None else convert_to_device_color(fill_color)
         )
 
     replace = replace
@@ -285,17 +287,15 @@
         self.hbfont.ptem = font_size_pt
         buf = hb.Buffer()
         buf.cluster_level = 1
         buf.add_str("".join(text))
         buf.guess_segment_properties()
         features = text_shaping_parms["features"]
         if text_shaping_parms["fragment_direction"]:
-            buf.direction = (
-                "RTL" if text_shaping_parms["fragment_direction"] == "R" else "LTR"
-            )
+            buf.direction = text_shaping_parms["fragment_direction"].value
         if text_shaping_parms["script"]:
             buf.script = text_shaping_parms["script"]
         if text_shaping_parms["language"]:
             buf.language = text_shaping_parms["language"]
         hb.shape(self.hbfont, buf, features)
         return buf.glyph_infos, buf.glyph_positions
```

### Comparing `fpdf2-2.7.8/fpdf/fpdf.py` & `fpdf2-2.7.9/fpdf/fpdf.py`

 * *Files 1% similar despite different names*

```diff
@@ -72,14 +72,15 @@
     EncryptionMethod,
     FileAttachmentAnnotationName,
     MethodReturnValue,
     PageLayout,
     PageMode,
     PathPaintRule,
     RenderStyle,
+    TextDirection,
     TextEmphasis,
     TextMarkupType,
     TextMode,
     WrapMode,
     XPos,
     YPos,
 )
@@ -114,15 +115,15 @@
 from .svg import Percent, SVGObject
 from .syntax import DestinationXYZ, PDFArray, PDFDate
 from .table import Table, draw_box_borders
 from .text_region import TextRegionMixin, TextColumns
 from .util import get_scale_factor, Padding
 
 # Public global variables:
-FPDF_VERSION = "2.7.8"
+FPDF_VERSION = "2.7.9"
 PAGE_FORMATS = {
     "a3": (841.89, 1190.55),
     "a4": (595.28, 841.89),
     "a5": (420.94, 595.28),
     "letter": (612, 792),
     "legal": (612, 1008),
 }
@@ -139,33 +140,40 @@
     "two": PageLayout.TWO_COLUMN_LEFT,
 }
 
 
 class TitleStyle(FontFace):
     def __init__(
         self,
-        font_family: Optional[str] = None,
+        font_family: Optional[str] = None,  # None means "no override"
+        #                                     Whereas "" means "no emphasis"
         font_style: Optional[str] = None,
         font_size_pt: Optional[int] = None,
         color: Union[int, tuple] = None,  # grey scale or (red, green, blue),
         underline: bool = False,
         t_margin: Optional[int] = None,
         l_margin: Optional[int] = None,
         b_margin: Optional[int] = None,
     ):
         super().__init__(
             font_family,
-            (font_style or "") + ("U" if underline else ""),
+            ((font_style or "") + "U") if underline else font_style,
             font_size_pt,
             color,
         )
         self.t_margin = t_margin
         self.l_margin = l_margin
         self.b_margin = b_margin
 
+    def __repr__(self):
+        return (
+            super().__repr__()[:-1]
+            + f", t_margin={self.t_margin}, l_margin={self.l_margin}, b_margin={self.b_margin})"
+        )
+
 
 class ToCPlaceholder(NamedTuple):
     render_function: Callable
     start_page: int
     y: int
     pages: int = 1
 
@@ -390,21 +398,25 @@
         Parse HTML and convert it to PDF.
         cf. https://py-pdf.github.io/fpdf2/HTML.html
 
         Args:
             text (str): HTML content to render
             image_map (function): an optional one-argument function that map <img> "src"
                 to new image URLs
-            li_tag_indent (int): numeric indentation of <li> elements
-            dd_tag_indent (int): numeric indentation of <dd> elements
+            li_tag_indent (int): [**DEPRECATED since v2.7.8**] numeric indentation of <li> elements - Set tag_indents instead
+            dd_tag_indent (int): [**DEPRECATED since v2.7.8**] numeric indentation of <dd> elements - Set tag_indents instead
             table_line_separators (bool): enable horizontal line separators in <table>
-            ul_bullet_char (str): bullet character for <ul> elements
-            heading_sizes (dict): font size per heading level names ("h1", "h2"...)
-            pre_code_font (str): font to use for <pre> & <code> blocks
+            ul_bullet_char (str): bullet character preceding <li> items in <ul> lists.
+            li_prefix_color (tuple | str | drawing.Device* instance): color for bullets or numbers preceding <li> tags.
+                This applies to both <ul> & <ol> lists.
+            heading_sizes (dict): [**DEPRECATED since v2.7.8**] font size per heading level names ("h1", "h2"...) - Set tag_styles instead
+            pre_code_font (str): [**DEPRECATED since v2.7.8**] font to use for <pre> & <code> blocks - Set tag_styles instead
             warn_on_tags_not_matching (bool): control warnings production for unmatched HTML tags
+            tag_indents (dict): mapping of HTML tag names to numeric values representing their horizontal left identation
+            tag_styles (dict): mapping of HTML tag names to colors
         """
         kwargs2 = vars(self)
         # Method arguments must override class & instance attributes:
         kwargs2.update(kwargs)
         html2pdf = self.HTML2FPDF_CLASS(self, *args, **kwargs2)
         html2pdf.feed(text)
 
@@ -571,15 +583,15 @@
 
     # Disabling this check - importing outside toplevel to check module is present
     # pylint: disable=import-outside-toplevel, unused-import
     def set_text_shaping(
         self,
         use_shaping_engine: bool = True,
         features: dict = None,
-        direction: str = None,
+        direction: Union[str, TextDirection] = None,
         script: str = None,
         language: str = None,
     ):
         """
         Enable or disable text shaping engine when rendering text.
         If features, direction, script or language are not specified the shaping engine will try
         to guess the values based on the input text.
@@ -602,15 +614,15 @@
                     "The uharfbuzz package could not be imported, but is required for text shaping. Try: pip install uharfbuzz"
                 ) from exc
         else:
             self.text_shaping = None
             return
         #
         # Features must be a dictionary contaning opentype features and a boolean flag
-        # stating wether the feature should be enabled or disabled.
+        # stating whether the feature should be enabled or disabled.
         #
         # e.g. features={"liga": True, "kern": False}
         #
         # https://harfbuzz.github.io/shaping-opentype-features.html
         #
 
         if features and not isinstance(features, dict):
@@ -622,23 +634,30 @@
 
         # Buffer properties (direction, script and language)
         # if the properties are not provided, Harfbuzz "guessing" logic is used.
         # https://harfbuzz.github.io/setting-buffer-properties.html
         # Valid harfbuzz directions are ltr (left to right), rtl (right to left),
         # ttb (top to bottom) or btt (bottom to top)
 
-        if direction and direction not in ("ltr", "rtl"):
-            raise FPDFException(
-                "FPDF2 only accept ltr (left to right) or rtl (right to left) directions for now."
+        text_direction = None
+        if direction:
+            text_direction = (
+                direction
+                if isinstance(direction, TextDirection)
+                else TextDirection.coerce(direction)
             )
+            if text_direction not in [TextDirection.LTR, TextDirection.RTL]:
+                raise FPDFException(
+                    "FPDF2 only accept ltr (left to right) or rtl (right to left) directions for now."
+                )
 
         self.text_shaping = {
             "use_shaping_engine": True,
             "features": features,
-            "direction": direction,
+            "direction": text_direction,
             "script": script,
             "language": language,
             "fragment_direction": None,
             "paragraph_direction": None,
         }
 
     @property
@@ -875,15 +894,15 @@
             new_page=not self._has_next_page(),
         )
 
         if self.page_background:
             if isinstance(self.page_background, tuple):
                 self.set_fill_color(*self.page_background)
                 self.rect(0, 0, self.w, self.h, style="F")
-                self.set_fill_color(*(255 * v for v in fc.colors))
+                self.set_fill_color(*fc.colors255)
             else:
                 self.image(self.page_background, 0, 0, self.w, self.h)
 
         self._out("2 J")  # Set line cap style to square
         self.line_width = lw  # Set line width
         self._out(f"{lw * self.k:.2f} w")
 
@@ -1085,15 +1104,15 @@
                 or a RGB tuple representing a color to fill the background with or `None` to remove the background
         """
 
         if isinstance(
             background, (str, io.BytesIO, Image, DeviceRGB, tuple, type(None))
         ):
             if isinstance(background, DeviceRGB):
-                self.page_background = tuple(255 * v for v in background.colors)
+                self.page_background = background.colors255
             else:
                 self.page_background = background
         else:
             raise TypeError(
                 f"""background must be of type str, io.BytesIO, PIL.Image.Image, drawing.DeviceRGB, tuple or None
         got: {type(background)}"""
             )
@@ -1906,15 +1925,15 @@
             warnings.warn(
                 f"Built-in font {family} only has a single 'style' "
                 "and can't be bold or italic",
                 stacklevel=get_stack_level(),
             )
             style = ""
 
-        if size == 0:
+        if not size:
             size = self.font_size_pt
 
         # Test if font is already selected
         if (
             self.font_family == family
             and self.font_style == style
             and isclose(self.font_size_pt, size)
@@ -4851,31 +4870,41 @@
         if strict and self._outline and level > self._outline[-1].level + 1:
             raise ValueError(
                 f"Incoherent hierarchy: cannot start a level {level} section after a level {self._outline[-1].level} one"
             )
         dest = DestinationXYZ(self.page, top=self.h_pt - self.y * self.k)
         outline_struct_elem = None
         if self.section_title_styles:
+            title_style = self.section_title_styles[level]
             # We first check if adding this multi-cell will trigger a page break:
-            with self.offset_rendering() as pdf:
-                # pylint: disable=protected-access
-                with pdf._use_title_style(pdf.section_title_styles[level]):
-                    pdf.multi_cell(
-                        w=pdf.epw,
-                        h=pdf.font_size,
-                        text=name,
-                        new_x=XPos.LMARGIN,
-                        new_y=YPos.NEXT,
-                    )
-            if pdf.page_break_triggered:
+            if title_style.size_pt is not None:
+                prev_font_size_pt = self.font_size_pt
+                self.font_size_pt = title_style.size_pt
+            page_break_triggered = self.multi_cell(
+                w=self.epw,
+                h=self.font_size,
+                text=name,
+                new_x=XPos.LMARGIN,
+                new_y=YPos.NEXT,
+                dry_run=True,  # => does not produce any output
+                output=MethodReturnValue.PAGE_BREAK,
+                padding=Padding(
+                    top=title_style.t_margin or 0,
+                    left=title_style.l_margin or 0,
+                    bottom=title_style.b_margin or 0,
+                ),
+            )
+            if title_style.size_pt is not None:
+                self.font_size_pt = prev_font_size_pt
+            if page_break_triggered:
                 # If so, we trigger a page break manually beforehand:
                 self.add_page()
             with self._marked_sequence(title=name) as struct_elem:
                 outline_struct_elem = struct_elem
-                with self._use_title_style(self.section_title_styles[level]):
+                with self._use_title_style(title_style):
                     self.multi_cell(
                         w=self.epw,
                         h=self.font_size,
                         text=name,
                         new_x=XPos.LMARGIN,
                         new_y=YPos.NEXT,
                     )
@@ -4907,15 +4936,19 @@
         """
         if not font_face:
             yield
             return
         prev_font = (self.font_family, self.font_style, self.font_size_pt)
         self.set_font(
             font_face.family or self.font_family,
-            font_face.emphasis.style if font_face.emphasis is not None else "",
+            (
+                font_face.emphasis.style
+                if font_face.emphasis is not None
+                else self.font_style
+            ),
             font_face.size_pt or self.font_size_pt,
         )
         prev_text_color = self.text_color
         if font_face.color is not None and font_face.color != self.text_color:
             self.set_text_color(font_face.color)
         prev_fill_color = self.fill_color
         if font_face.fill_color is not None:
@@ -4961,14 +4994,15 @@
                 of numbers, default:0
                 If padding for left or right ends up being non-zero then the respective c_margin is ignored.
             outer_border_width (number): optional. The outer_border_width will trigger rendering of the outer
                 border of the table with the given width regardless of any other defined border styles.
             num_heading_rows (number): optional. Sets the number of heading rows, default value is 1. If this value is not 1,
                 first_row_as_headings needs to be True if num_heading_rows>1 and False if num_heading_rows=0. For backwards compatibility,
                 first_row_as_headings is used in case num_heading_rows is 1.
+            repeat_headings (fpdf.enums.TableHeadingsDisplay): optional, indicates whether to print table headings on every page, default to 1.
         """
         table = Table(self, *args, **kwargs)
         yield table
         table.render()
 
     def output(
         self, name="", dest="", linearize=False, output_producer_class=OutputProducer
```

### Comparing `fpdf2-2.7.8/fpdf/graphics_state.py` & `fpdf2-2.7.9/fpdf/graphics_state.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/html.py` & `fpdf2-2.7.9/fpdf/html.py`

 * *Files 27% similar despite different names*

```diff
@@ -3,25 +3,46 @@
 
 The contents of this module are internal to fpdf2, and not part of the public API.
 They may change at any time without prior warning or any deprecation period,
 in non-backward-compatible ways.
 """
 
 from html.parser import HTMLParser
+from string import ascii_lowercase, ascii_uppercase
 import logging, re, warnings
 
+from .deprecation import get_stack_level
+from .drawing import color_from_hex_string, convert_to_device_color
 from .enums import TextEmphasis, XPos, YPos
 from .errors import FPDFException
-from .deprecation import get_stack_level
 from .fonts import FontFace
 from .table import Table
+from .util import int2roman
 
 LOGGER = logging.getLogger(__name__)
 BULLET_WIN1252 = "\x95"  # BULLET character in Windows-1252 encoding
-DEFAULT_HEADING_SIZES = dict(h1=24, h2=18, h3=14, h4=12, h5=10, h6=8)
+DEGREE_WIN1252 = "\xb0"
+HEADING_TAGS = ("h1", "h2", "h3", "h4", "h5", "h6")
+DEFAULT_TAG_STYLES = {
+    "a": FontFace(color=(0, 0, 255)),
+    "blockquote": FontFace(color=(100, 0, 45)),
+    "code": FontFace(family="Courier"),
+    "h1": FontFace(color=(150, 0, 0), size_pt=24),
+    "h2": FontFace(color=(150, 0, 0), size_pt=18),
+    "h3": FontFace(color=(150, 0, 0), size_pt=14),
+    "h4": FontFace(color=(150, 0, 0), size_pt=12),
+    "h5": FontFace(color=(150, 0, 0), size_pt=10),
+    "h6": FontFace(color=(150, 0, 0), size_pt=8),
+    "pre": FontFace(family="Courier"),
+}
+DEFAULT_TAG_INDENTS = {
+    "blockquote": 0,
+    "dd": 10,
+    "li": 5,
+}
 
 # Pattern to substitute whitespace sequences with a single space character each.
 # The following are all Unicode characters with White_Space classification plus the newline.
 # The pattern excludes the non-breaking spaces that are included in "\s".
 # We also exclude the OGHAM SPACE MARK for now, because while being a word separator,
 # it is usually a graphically visible glyph.
 _WS_CHARS = "".join(
@@ -211,109 +232,193 @@
 
 def color_as_decimal(color="#000000"):
     if not color:
         return None
 
     # Checks if color is a name and gets the hex value
     hexcolor = COLOR_DICT.get(color.lower(), color)
+    return color_from_hex_string(hexcolor).colors255
 
-    if len(hexcolor) == 4:
-        r = int(hexcolor[1] * 2, 16)
-        g = int(hexcolor[2] * 2, 16)
-        b = int(hexcolor[3] * 2, 16)
-        return r, g, b
-
-    r = int(hexcolor[1:3], 16)
-    g = int(hexcolor[3:5], 16)
-    b = int(hexcolor[5:7], 16)
-    return r, g, b
+
+def parse_style(elem_attrs):
+    """Parse `style="..."` making it's key-value pairs element's attributes"""
+    try:
+        style = elem_attrs["style"]
+    except KeyError:
+        pass
+    else:
+        for element in style.split(";"):
+            if not element:
+                continue
+
+            pair = element.split(":")
+            if len(pair) == 2 and pair[0] and pair[1]:
+                attr, value = pair
+
+                elem_attrs[attr.strip()] = value.strip()
 
 
 class HTML2FPDF(HTMLParser):
     "Render basic HTML to FPDF"
 
     HTML_UNCLOSED_TAGS = ("br", "dd", "dt", "hr", "img", "li", "td", "tr")
+    TABLE_LINE_HEIGHT = 1.3
 
     def __init__(
         self,
         pdf,
         image_map=None,
         li_tag_indent=5,
         dd_tag_indent=10,
         table_line_separators=False,
         ul_bullet_char=BULLET_WIN1252,
+        li_prefix_color=(190, 0, 0),
         heading_sizes=None,
-        pre_code_font="courier",
+        pre_code_font=DEFAULT_TAG_STYLES["pre"].family,
         warn_on_tags_not_matching=True,
+        tag_indents=None,
+        tag_styles=None,
         **_,
     ):
         """
         Args:
             pdf (FPDF): an instance of `fpdf.FPDF`
             image_map (function): an optional one-argument function that map <img> "src"
                 to new image URLs
-            li_tag_indent (int): numeric indentation of <li> elements
-            dd_tag_indent (int): numeric indentation of <dd> elements
+            li_tag_indent (int): [**DEPRECATED since v2.7.9**] numeric indentation of <li> elements - Set tag_indents instead
+            dd_tag_indent (int): [**DEPRECATED since v2.7.9**] numeric indentation of <dd> elements - Set tag_indents instead
             table_line_separators (bool): enable horizontal line separators in <table>
-            ul_bullet_char (str): bullet character for <ul> elements
-            heading_sizes (dict): font size per heading level names ("h1", "h2"...)
-            pre_code_font (str): font to use for <pre> & <code> blocks
+            ul_bullet_char (str): bullet character preceding <li> items in <ul> lists.
+            li_prefix_color (tuple | str | drawing.Device* instance): color for bullets or numbers preceding <li> tags.
+                This applies to both <ul> & <ol> lists.
+            heading_sizes (dict): [**DEPRECATED since v2.7.9**] font size per heading level names ("h1", "h2"...) - Set tag_styles instead
+            pre_code_font (str): [**DEPRECATED since v2.7.9**] font to use for <pre> & <code> blocks - Set tag_styles instead
             warn_on_tags_not_matching (bool): control warnings production for unmatched HTML tags
+            tag_indents (dict): mapping of HTML tag names to numeric values representing their horizontal left identation
+            tag_styles (dict): mapping of HTML tag names to colors
         """
         super().__init__()
         self.pdf = pdf
         self.image_map = image_map or (lambda src: src)
-        self.li_tag_indent = li_tag_indent
-        self.dd_tag_indent = dd_tag_indent
         self.ul_bullet_char = ul_bullet_char
-        self.heading_sizes = dict(**DEFAULT_HEADING_SIZES)
-        if heading_sizes:
-            self.heading_sizes.update(heading_sizes)
-        self.pre_code_font = pre_code_font
+        self.li_prefix_color = (
+            color_as_decimal(li_prefix_color)
+            if isinstance(li_prefix_color, str)
+            else convert_to_device_color(li_prefix_color).colors255
+        )
         self.warn_on_tags_not_matching = warn_on_tags_not_matching
 
         # We operate in a local context and will only temporarily switch to the outer one for rendering.
         # This is necessary because of the deferred execution of text region writes. Changing fonts and
         # colors in here must not affect the output and/or interfere with the settings during rendering.
         # The TOC gets rendered outside of our scope, so we need to set a font first, in order to
         # ensure that the TOC has one available.
         # If a font was defined previously, we reinstate that seperately after we're finished here.
         # In this case the TOC will be rendered with that font and not ours. But adding a TOC tag only
         # makes sense if the whole document gets converted from HTML, so this should be acceptable.
-        self.style = dict(b=False, i=False, u=False)
+        self.emphasis = dict(b=False, i=False, u=False)
         self.font_size = pdf.font_size_pt
         self.set_font(pdf.font_family or "times", size=self.font_size, set_default=True)
-        self._prev_font = (pdf.font_family, self.font_size, self.style)
+        self._prev_font = (pdf.font_family, self.font_size, self.emphasis)
         self.pdf._push_local_stack()  # xpylint: disable=protected-access
 
         self._pre_formatted = False  # preserve whitespace while True.
         self._pre_started = (
             False  # nothing written yet to <pre>, remove one initial nl.
         )
         self.follows_trailing_space = False  # The last write has ended with a space.
         self.follows_heading = False  # We don't want extra space below a heading.
         self.href = ""
         self.align = ""
-        self.font_stack = []
+        self.style_stack = []  # list of FontFace
         self.indent = 0
+        self.ol_type = []  # when inside a <ol> tag, can be "a", "A", "i", "I" or "1"
         self.bullet = []
-        self.font_color = tuple((255 * v for v in pdf.text_color.colors))
+        self.font_color = pdf.text_color.colors255
         self.heading_level = None
         self.heading_above = 0.2  # extra space above heading, relative to font size
         self.heading_below = 0.4  # extra space below heading, relative to font size
         self._tags_stack = []
         self._column = self.pdf.text_columns(skip_leading_spaces=True)
         self._paragraph = self._column.paragraph()
         # <table>-related properties:
         self.table_line_separators = table_line_separators
         self.table = None  # becomes a Table instance when processing <table> tags
         self.table_row = None  # becomes a Row instance when processing <tr> tags
         self.tr = None  # becomes a dict of attributes when processing <tr> tags
         self.td_th = None  # becomes a dict of attributes when processing <td>/<th> tags
-        # "inserted" is a special attribute indicating that a cell has be inserted in self.table_row
+        #                    "inserted" is a special attribute indicating that a cell has be inserted in self.table_row
+
+        if not tag_indents:
+            tag_indents = {}
+        if dd_tag_indent != DEFAULT_TAG_INDENTS["dd"]:
+            warnings.warn(
+                (
+                    "The dd_tag_indent parameter is deprecated since v2.7.9 "
+                    "and will be removed in a future release. "
+                    "Set the `tag_indents` parameter instead."
+                ),
+                DeprecationWarning,
+                stacklevel=get_stack_level(),
+            )
+            tag_indents["dd"] = dd_tag_indent
+        if li_tag_indent != DEFAULT_TAG_INDENTS["li"]:
+            warnings.warn(
+                (
+                    "The li_tag_indent parameter is deprecated since v2.7.9 "
+                    "and will be removed in a future release. "
+                    "Set the `tag_indents` parameter instead."
+                ),
+                DeprecationWarning,
+                stacklevel=get_stack_level(),
+            )
+            tag_indents["li"] = li_tag_indent
+        for tag in tag_indents:
+            if tag not in DEFAULT_TAG_INDENTS:
+                raise NotImplementedError(
+                    f"Cannot set indent for HTML tag <{tag}> (contributions are welcome to add support for this)"
+                )
+        self.tag_indents = {**DEFAULT_TAG_INDENTS, **tag_indents}
+
+        if not tag_styles:
+            tag_styles = {}
+        for tag in tag_styles:
+            if tag not in DEFAULT_TAG_STYLES:
+                raise NotImplementedError(
+                    f"Cannot set style for HTML tag <{tag}> (contributions are welcome to add support for this)"
+                )
+        self.tag_styles = {**DEFAULT_TAG_STYLES, **tag_styles}
+        if heading_sizes is not None:
+            warnings.warn(
+                (
+                    "The heading_sizes parameter is deprecated since v2.7.9 "
+                    "and will be removed in a future release. "
+                    "Set the `tag_styles` parameter instead."
+                ),
+                DeprecationWarning,
+                stacklevel=get_stack_level(),
+            )
+            for tag, size in heading_sizes.items():
+                self.tag_styles[tag] = self.tag_styles[tag].replace(size_pt=size)
+        if pre_code_font != DEFAULT_TAG_STYLES["pre"].family:
+            warnings.warn(
+                (
+                    "The pre_code_font parameter is deprecated since v2.7.9 "
+                    "and will be removed in a future release. "
+                    "Set the `tag_styles` parameter instead."
+                ),
+                DeprecationWarning,
+                stacklevel=get_stack_level(),
+            )
+            self.tag_styles["code"] = self.tag_styles["code"].replace(
+                family=pre_code_font
+            )
+            self.tag_styles["pre"] = self.tag_styles["pre"].replace(
+                family=pre_code_font
+            )
 
     def _new_paragraph(
         self, align=None, line_height=1.0, top_margin=0, bottom_margin=0
     ):
         self._end_paragraph()
         self.align = align or ""
         if not top_margin and not self.follows_heading:
@@ -430,20 +535,21 @@
             LOGGER.debug(f"write: '%s' h={self.h:.2f}", data)
             self._write_paragraph(data)
 
     def handle_starttag(self, tag, attrs):
         self._pre_started = False
         attrs = dict(attrs)
         LOGGER.debug("STARTTAG %s %s", tag, attrs)
+        parse_style(attrs)
         self._tags_stack.append(tag)
         if tag == "dt":
             self._write_paragraph("\n")
             tag = "b"
         if tag == "dd":
-            self._write_paragraph("\n" + "\u00a0" * self.dd_tag_indent)
+            self._write_paragraph("\n" + "\u00a0" * self.tag_indents["dd"])
         if tag == "strong":
             tag = "b"
         if tag == "em":
             tag = "i"
         if tag in ("b", "i", "u"):
             if self.td_th is not None:
                 self.td_th[tag] = True
@@ -455,100 +561,168 @@
                 page = int(self.href)
                 self.href = self.pdf.add_link(page=page)
             except ValueError:
                 pass
         if tag == "br":
             self._write_paragraph("\n")
         if tag == "p":
+            align = None
             if "align" in attrs:
                 align = attrs.get("align")[0].upper()
                 if not align in ["L", "R", "J", "C"]:
                     align = None
-            else:
-                align = None
+            line_height = None
             if "line-height" in attrs:
                 try:
                     # YYY parse and convert non-float line_height values
                     line_height = float(attrs.get("line-height"))
                 except ValueError:
-                    line_height = None
-            else:
-                line_height = None
+                    pass
             self._new_paragraph(align=align, line_height=line_height)
-        if tag in self.heading_sizes:
+        if tag in HEADING_TAGS:
             prev_font_height = self.font_size / self.pdf.k
-            self.font_stack.append((self.font_face, self.font_size, self.font_color))
+            self.style_stack.append(
+                FontFace(
+                    family=self.font_family,
+                    size_pt=self.font_size,
+                    color=self.font_color,
+                )
+            )
             self.heading_level = int(tag[1:])
-            hsize_pt = self.heading_sizes[tag]
-            hsize = hsize_pt / self.pdf.k
+            tag_style = self.tag_styles[tag]
+            hsize = (tag_style.size_pt or self.font_size) / self.pdf.k
             if attrs:
                 align = attrs.get("align")
                 if not align in ["L", "R", "J", "C"]:
                     align = None
             else:
                 align = None
             self._new_paragraph(
                 align=align,
                 top_margin=prev_font_height + self.heading_above * hsize,
                 bottom_margin=self.heading_below * hsize,
             )
-            color = (
-                color_as_decimal(attrs["color"]) if "color" in attrs else (150, 0, 0)
+            color = None
+            if "color" in attrs:
+                color = color_as_decimal(attrs["color"])
+            elif tag_style.color:
+                color = tag_style.color.colors255
+            if color:
+                self.set_text_color(*color)
+            self.set_font(
+                family=tag_style.family or self.font_family,
+                size=tag_style.size_pt or self.font_size,
             )
-            self.set_text_color(*color)
-            self.set_font(size=hsize_pt)
         if tag == "hr":
             self.pdf.add_page(same=True)
         if tag == "code":
-            self.font_stack.append((self.font_face, self.font_size, self.font_color))
-            self.set_font(self.pre_code_font, self.font_size)
+            self.style_stack.append(
+                FontFace(
+                    family=self.font_family,
+                    size_pt=self.font_size,
+                    color=self.font_color,
+                )
+            )
+            tag_style = self.tag_styles[tag]
+            if tag_style.color:
+                self.set_text_color(*tag_style.color.colors255)
+            self.set_font(
+                family=tag_style.family or self.font_family,
+                size=tag_style.size_pt or self.font_size,
+            )
         if tag == "pre":
-            self.font_stack.append((self.font_face, self.font_size, self.font_color))
-            self.set_font(self.pre_code_font, self.font_size)
+            self.style_stack.append(
+                FontFace(
+                    family=self.font_family,
+                    size_pt=self.font_size,
+                    color=self.font_color,
+                )
+            )
+            tag_style = self.tag_styles[tag]
+            if tag_style.color:
+                self.set_text_color(*tag_style.color.colors255)
+            self.set_font(
+                family=tag_style.family or self.font_family,
+                size=tag_style.size_pt or self.font_size,
+            )
             self._pre_formatted = True
             self._new_paragraph()
             self._pre_started = True
         if tag == "blockquote":
-            self.set_text_color(100, 0, 45)
+            tag_style = self.tag_styles[tag]
+            if tag_style.color:
+                self.set_text_color(*tag_style.color.colors255)
+            self.set_font(
+                family=tag_style.family or self.font_family,
+                size=tag_style.size_pt or self.font_size,
+            )
             self.indent += 1
             self._new_paragraph(top_margin=3, bottom_margin=3)
+            if self.tag_indents["blockquote"]:
+                self._write_paragraph("\u00a0" * self.tag_indents["blockquote"])
         if tag == "ul":
             self.indent += 1
-            self.bullet.append(self.ul_bullet_char)
-            self._new_paragraph()
+            bullet_char = (
+                ul_prefix(attrs["type"]) if "type" in attrs else self.ul_bullet_char
+            )
+            self.bullet.append(bullet_char)
+            line_height = None
+            if "line-height" in attrs:
+                try:
+                    # YYY parse and convert non-float line_height values
+                    line_height = float(attrs.get("line-height"))
+                except ValueError:
+                    pass
+            self._new_paragraph(line_height=line_height)
         if tag == "ol":
             self.indent += 1
-            self.bullet.append(0)
-            self._new_paragraph()
+            start = int(attrs["start"]) if "start" in attrs else 1
+            self.bullet.append(start - 1)
+            self.ol_type.append(attrs.get("type", "1"))
+            line_height = None
+            if "line-height" in attrs:
+                try:
+                    # YYY parse and convert non-float line_height values
+                    line_height = float(attrs.get("line-height"))
+                except ValueError:
+                    pass
+            self._new_paragraph(line_height=line_height)
         if tag == "li":
             self._ln(2)
-            self.set_text_color(190, 0, 0)
+            self.set_text_color(*self.li_prefix_color)
             if self.bullet:
                 bullet = self.bullet[self.indent - 1]
             else:
                 # Allow <li> to be used outside of <ul> or <ol>.
                 bullet = self.ul_bullet_char
             if not isinstance(bullet, str):
                 bullet += 1
                 self.bullet[self.indent - 1] = bullet
-                bullet = f"{bullet}. "
-            indent = "\u00a0" * self.li_tag_indent * self.indent
+                ol_type = self.ol_type[self.indent - 1]
+                bullet = f"{ol_prefix(ol_type, bullet)}. "
+            indent = "\u00a0" * self.tag_indents["li"] * self.indent
             self._write_paragraph(f"{indent}{bullet} ")
             self.set_text_color(*self.font_color)
         if tag == "font":
             # save previous font state:
-            self.font_stack.append((self.font_face, self.font_size, self.font_color))
+            self.style_stack.append(
+                FontFace(
+                    family=self.font_family,
+                    size_pt=self.font_size,
+                    color=self.font_color,
+                )
+            )
             if "color" in attrs:
                 color = color_as_decimal(attrs["color"])
                 self.font_color = color
             if "face" in attrs:
                 face = attrs.get("face").lower()
                 # This may result in a FPDFException "font not found".
                 self.set_font(face)
-                self.font_face = face
+                self.font_family = face
             if "size" in attrs:
                 self.font_size = int(attrs.get("size"))
             self.set_font()
             self.set_text_color(*self.font_color)
         if tag == "table":
             width = attrs.get("width")
             if width:
@@ -571,15 +745,15 @@
             align = attrs.get("align", "center").upper()
             padding = float(attrs["cellpadding"]) if "cellpadding" in attrs else None
             spacing = float(attrs.get("cellspacing", 0))
             self.table = Table(
                 self.pdf,
                 align=align,
                 borders_layout=borders_layout,
-                line_height=self.h * 1.30,
+                line_height=self.h * self.TABLE_LINE_HEIGHT,
                 width=width,
                 padding=padding,
                 gutter_width=spacing,
                 gutter_height=spacing,
             )
             self._ln()
         if tag == "tr":
@@ -682,30 +856,30 @@
             self._tags_stack.pop()
         elif self.warn_on_tags_not_matching:
             LOGGER.warning(
                 "Unexpected HTML end tag </%s>, start tag was <%s>",
                 tag,
                 self._tags_stack[-1],
             )
-        if tag in self.heading_sizes:
+        if tag in HEADING_TAGS:
             self.heading_level = None
-            face, size, color = self.font_stack.pop()
-            self.set_font(face, size)
-            self.set_text_color(*color)
+            font_face = self.style_stack.pop()
+            self.set_font(font_face.family, font_face.size_pt)
+            self.set_text_color(*font_face.color.colors255)
             self._end_paragraph()
             self.follows_heading = True  # We don't want extra space below a heading.
         if tag == "code":
-            face, size, color = self.font_stack.pop()
-            self.set_font(face, size)
-            self.set_text_color(*color)
+            font_face = self.style_stack.pop()
+            self.set_font(font_face.family, font_face.size_pt)
+            self.set_text_color(*font_face.color.colors255)
         if tag == "pre":
             self._end_paragraph()
-            face, size, color = self.font_stack.pop()
-            self.set_font(face, size)
-            self.set_text_color(*color)
+            font_face = self.style_stack.pop()
+            self.set_font(font_face.family, font_face.size_pt)
+            self.set_text_color(*font_face.color.colors255)
             self._pre_formatted = False
             self._pre_started = False
         if tag == "blockquote":
             self._end_paragraph()
             self.set_text_color(*self.font_color)
             self.indent -= 1
         if tag in ("strong", "dt"):
@@ -719,14 +893,16 @@
             self.href = ""
         if tag == "p":
             self._end_paragraph()
             self.align = ""
         if tag in ("ul", "ol"):
             self._end_paragraph()
             self.indent -= 1
+            if tag == "ol":
+                self.ol_type.pop()
             self.bullet.pop()
         if tag == "table":
             self.table.render()
             self.table = None
             self._ln(self.h)
         if tag == "tr":
             self.tr = None
@@ -738,74 +914,80 @@
                     self.td_th.get("bgcolor", self.tr.get("bgcolor", None))
                 )
                 style = FontFace(fill_color=bgcolor) if bgcolor else None
                 self.table_row.cell(text="", style=style)
             self.td_th = None
         if tag == "font":
             # recover last font state
-            face, size, color = self.font_stack.pop()
-            self.font_color = color
-            self.set_font(face, size)
-            self.set_text_color(*self.font_color)
+            font_face = self.style_stack.pop()
+            self.font_color = font_face.color.colors255
+            self.set_font(font_face.family, font_face.size_pt)
+            self.set_text_color(*font_face.color.colors255)
         if tag == "center":
             self._end_paragraph()
         if tag == "sup":
             self.pdf.char_vpos = "LINE"
         if tag == "sub":
             self.pdf.char_vpos = "LINE"
 
     def feed(self, data):
         super().feed(data)
         while self._tags_stack and self._tags_stack[-1] in self.HTML_UNCLOSED_TAGS:
             self._tags_stack.pop()
         self._end_paragraph()  # render the final chunk of text and clean up our local context.
         self.pdf._pop_local_stack()  # pylint: disable=protected-access
         if self._prev_font[0]:  # restore previously defined font settings
-            self.style = self._prev_font[2]
+            self.emphasis = self._prev_font[2]
             self.set_font(self._prev_font[0], size=self._prev_font[1], set_default=True)
         if self._tags_stack and self.warn_on_tags_not_matching:
             LOGGER.warning("Missing HTML end tag for <%s>", self._tags_stack[-1])
 
-    def set_font(self, face=None, size=None, set_default=False):
-        if face:
-            self.font_face = face
+    def set_font(self, family=None, size=None, set_default=False):
+        if family:
+            self.font_family = family
         if size:
             self.font_size = size
             self.h = size / self.pdf.k
-        style = "".join(s for s in ("b", "i", "u") if self.style.get(s)).upper()
-        LOGGER.debug(f"set_font: %s style=%s h={self.h:.2f}", self.font_face, style)
+        style = "".join(s for s in ("b", "i", "u") if self.emphasis.get(s)).upper()
+        LOGGER.debug(f"set_font: %s style=%s h={self.h:.2f}", self.font_family, style)
         prev_page = self.pdf.page
         if not set_default:  # make sure there's at least one font defined in the PDF.
             self.pdf.page = 0
-        if (self.font_face, style) != (self.pdf.font_family, self.pdf.font_style):
-            self.pdf.set_font(self.font_face, style, self.font_size)
+        if (self.font_family, style) != (self.pdf.font_family, self.pdf.font_style):
+            self.pdf.set_font(self.font_family, style, self.font_size)
         if self.font_size != self.pdf.font_size:
             self.pdf.set_font_size(self.font_size)
         self.pdf.page = prev_page
 
     def set_style(self, tag=None, enable=False):
         # Modify style and select corresponding font
         if tag:
-            self.style[tag.lower()] = enable
-        style = "".join(s for s in ("b", "i", "u") if self.style.get(s))
+            self.emphasis[tag.lower()] = enable
+        style = "".join(s for s in ("b", "i", "u") if self.emphasis.get(s))
         LOGGER.debug("SET_FONT_STYLE %s", style)
         prev_page = self.pdf.page
         self.pdf.page = 0
         self.pdf.set_font(style=style)
         self.pdf.page = prev_page
 
     def set_text_color(self, r=None, g=0, b=0):
         prev_page = self.pdf.page
         self.pdf.page = 0
         self.pdf.set_text_color(r, g, b)
         self.pdf.page = prev_page
 
     def put_link(self, text):
         # Put a hyperlink
-        self.set_text_color(0, 0, 255)
+        tag_style = self.tag_styles["a"]
+        if tag_style.color:
+            self.set_text_color(*tag_style.color.colors255)
+        self.set_font(
+            family=tag_style.family or self.font_family,
+            size=tag_style.size_pt or self.font_size,
+        )
         self.set_style("u", True)
         self._write_paragraph(text, link=self.href)
         self.set_style("u", False)
         self.set_text_color(*self.font_color)
 
     # pylint: disable=no-self-use
     def render_toc(self, pdf, outline):
@@ -825,14 +1007,38 @@
             )
 
     # Subclasses of _markupbase.ParserBase must implement this:
     def error(self, message):
         raise RuntimeError(message)
 
 
+def ul_prefix(ul_type):
+    if ul_type == "circle":
+        return DEGREE_WIN1252
+    if ul_type == "disc":
+        return BULLET_WIN1252
+    if len(ul_type) == 1:
+        return ul_type
+    raise NotImplementedError(f"Unsupported type: {ul_type}")
+
+
+def ol_prefix(ol_type, index):
+    if ol_type == "1":
+        return index
+    if ol_type == "a":
+        return ascii_lowercase[index - 1]
+    if ol_type == "A":
+        return ascii_uppercase[index - 1]
+    if ol_type == "I":
+        return int2roman(index)
+    if ol_type == "i":
+        return int2roman(index).lower()
+    raise NotImplementedError(f"Unsupported type: {ol_type}")
+
+
 class HTMLMixin:
     """
     [**DEPRECATED since v2.6.0**]
     You can now directly use the `FPDF.write_html()` method
     """
 
     def __init__(self, *args, **kwargs):
```

### Comparing `fpdf2-2.7.8/fpdf/image_datastructures.py` & `fpdf2-2.7.9/fpdf/image_datastructures.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/image_parsing.py` & `fpdf2-2.7.9/fpdf/image_parsing.py`

 * *Files 2% similar despite different names*

```diff
@@ -265,16 +265,18 @@
         # if we can use the original image bytes directly we do (JPEG and group4 TIFF only):
         if img.format == "JPEG" and image_filter == "DCTDecode":
             if img.mode in ("RGB", "RGBA"):
                 dpn, bpc, colspace = 3, 8, "DeviceRGB"
             elif img.mode == "CMYK":
                 dpn, bpc, colspace = 4, 8, "DeviceCMYK"
                 jpeg_inverted = True
-            if img.mode == "L":
+            elif img.mode == "L":
                 dpn, bpc, colspace = 1, 8, "DeviceGray"
+            else:
+                raise ValueError(f"Unsupported image mode: {img.mode}")
             img_raw_data.seek(0)
             info.update(
                 {
                     "data": img_raw_data.read(),
                     "w": w,
                     "h": h,
                     "cs": colspace,
```

### Comparing `fpdf2-2.7.8/fpdf/line_break.py` & `fpdf2-2.7.9/fpdf/line_break.py`

 * *Files 1% similar despite different names*

```diff
@@ -6,15 +6,15 @@
 They may change at any time without prior warning or any deprecation period,
 in non-backward-compatible ways.
 """
 
 from typing import NamedTuple, Any, List, Optional, Union, Sequence
 from numbers import Number
 
-from .enums import CharVPos, WrapMode, Align
+from .enums import Align, CharVPos, TextDirection, WrapMode
 from .errors import FPDFException
 from .fonts import CoreFont, TTFFont
 from .util import escape_parens
 
 SOFT_HYPHEN = "\u00ad"
 HYPHEN = "\u002d"
 SPACE = " "
@@ -152,23 +152,23 @@
         return self.graphics_state["text_shaping"]
 
     @property
     def paragraph_direction(self):
         return (
             self.text_shaping_parameters["paragraph_direction"]
             if self.text_shaping_parameters
-            else "L"
+            else TextDirection.LTR
         )
 
     @property
     def fragment_direction(self):
         return (
             self.text_shaping_parameters["fragment_direction"]
             if self.text_shaping_parameters
-            else "L"
+            else TextDirection.LTR
         )
 
     def trim(self, index: int):
         self.characters = self.characters[:index]
 
     def __eq__(self, other: Any):
         return (
@@ -342,29 +342,31 @@
     trailing_nl: bool = False
     trailing_form_feed: bool = False
 
     def get_ordered_fragments(self):
         if not self.fragments:
             return tuple()
         directional_runs = []
-        direction = ""
+        direction = None
         for fragment in self.fragments:
             if fragment.fragment_direction == direction:
                 directional_runs[-1].append(fragment)
             else:
                 directional_runs.append([fragment])
                 direction = fragment.fragment_direction
-        if self.fragments[0].paragraph_direction == "R" or (
+        if self.fragments[0].paragraph_direction == TextDirection.RTL or (
             not self.fragments[0].paragraph_direction
-            and self.fragments[0].fragment_direction == "R"
+            and self.fragments[0].fragment_direction == TextDirection.RTL
         ):
             directional_runs = directional_runs[::-1]
         ordered_fragments = []
         for run in directional_runs:
-            ordered_fragments += run[::1] if run[0].fragment_direction == "R" else run
+            ordered_fragments += (
+                run[::-1] if run[0].fragment_direction == TextDirection.RTL else run
+            )
         return tuple(ordered_fragments)
 
 
 class SpaceHint(NamedTuple):
     original_fragment_index: int
     original_character_index: int
     current_line_fragment_index: int
```

### Comparing `fpdf2-2.7.8/fpdf/linearization.py` & `fpdf2-2.7.9/fpdf/linearization.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/outline.py` & `fpdf2-2.7.9/fpdf/outline.py`

 * *Files 0% similar despite different names*

```diff
@@ -12,15 +12,15 @@
 
 from .syntax import Destination, PDFObject, PDFString
 from .structure_tree import StructElem
 
 
 class OutlineSection(NamedTuple):
     name: str
-    level: str
+    level: int
     page_number: int
     dest: Destination
     struct_elem: Optional[StructElem] = None
 
 
 class OutlineItemDictionary(PDFObject):
     __slots__ = (  # RAM usage optimization
```

### Comparing `fpdf2-2.7.8/fpdf/output.py` & `fpdf2-2.7.9/fpdf/output.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/prefs.py` & `fpdf2-2.7.9/fpdf/prefs.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/recorder.py` & `fpdf2-2.7.9/fpdf/recorder.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/sign.py` & `fpdf2-2.7.9/fpdf/sign.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/structure_tree.py` & `fpdf2-2.7.9/fpdf/structure_tree.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/svg.py` & `fpdf2-2.7.9/fpdf/svg.py`

 * *Files 1% similar despite different names*

```diff
@@ -9,14 +9,16 @@
 import logging, math, re, warnings
 from numbers import Number
 from typing import NamedTuple
 
 from fontTools.svgLib.path import parse_path
 from fontTools.pens.basePen import BasePen
 
+from .enums import PathPaintRule
+
 try:
     from defusedxml.ElementTree import fromstring as parse_xml_str
 except ImportError:
     warnings.warn(
         "defusedxml could not be imported - fpdf2 will not be able to sanitize SVG images provided"
     )
     # nosemgrep: python.lang.security.use-defused-xml.use-defused-xml
@@ -295,36 +297,17 @@
         "stroke_opacity",
         inheritable(stropstr, clamp_float(0.0, 1.0)),
     ),
 }
 
 
 @force_nodocument
-def parse_style(svg_element):
-    """Parse `style="..."` making it's key-value pairs element's attributes"""
-    try:
-        style = svg_element.attrib["style"]
-    except KeyError:
-        pass
-    else:
-        for element in style.split(";"):
-            if not element:
-                continue
-
-            pair = element.split(":")
-            if len(pair) == 2 and pair[0] and pair[1]:
-                attr, value = pair
-
-                svg_element.attrib[attr.strip()] = value.strip()
-
-
-@force_nodocument
 def apply_styles(stylable, svg_element):
     """Apply the known styles from `svg_element` to the pdf path/group `stylable`."""
-    parse_style(svg_element)
+    html.parse_style(svg_element.attrib)
 
     stylable.style.auto_close = False
 
     for attr_name, converter in svg_attr_map.items():
         value = svg_element.attrib.get(attr_name)
         if value:
             setattr(stylable.style, *converter(value))
@@ -978,14 +961,15 @@
     def build_clipping_path(self, shape, clip_id):
         if shape.tag in shape_tags:
             shape_builder = getattr(ShapeBuilder, shape_tags[shape.tag])
             clipping_path_shape = shape_builder(shape, True)
         elif shape.tag in xmlns_lookup("svg", "path"):
             clipping_path_shape = PaintedPath()
             apply_styles(clipping_path_shape, shape)
+            clipping_path_shape.paint_rule = PathPaintRule.DONT_PAINT
             svg_path = shape.attrib.get("d")
             if svg_path is not None:
                 svg_path_converter(clipping_path_shape, svg_path)
         else:
             LOGGER.warning(
                 "Ignoring unsupported <clipPath> child tag: <%s> (contributions are welcome to add support for it)",
                 without_ns(shape.tag),
```

### Comparing `fpdf2-2.7.8/fpdf/syntax.py` & `fpdf2-2.7.9/fpdf/syntax.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/table.py` & `fpdf2-2.7.9/fpdf/table.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,14 +3,15 @@
 from typing import Optional, Union
 
 from .enums import (
     Align,
     MethodReturnValue,
     TableBordersLayout,
     TableCellFillMode,
+    TableHeadingsDisplay,
     WrapMode,
     VAlign,
     TableSpan,
 )
 from .errors import FPDFException
 from .fonts import CORE_FONTS, FontFace
 from .util import Padding
@@ -43,14 +44,15 @@
         markdown=False,
         text_align="JUSTIFY",
         width=None,
         wrapmode=WrapMode.WORD,
         padding=None,
         outer_border_width=None,
         num_heading_rows=1,
+        repeat_headings=1,
     ):
         """
         Args:
             fpdf (fpdf.FPDF): FPDF current instance
             rows: optional. Sequence of rows (iterable) of str to initiate the table cells with text content
             align (str, fpdf.enums.Align): optional, default to CENTER. Sets the table horizontal position relative to the page,
                 when it's not using the full page width
@@ -75,14 +77,15 @@
             padding (number, tuple, Padding): optional. Sets the cell padding. Can be a single number or a sequence of numbers, default:0
                 If padding for left and right ends up being non-zero then c_margin is ignored.
             outer_border_width (number): optional. Sets the width of the outer borders of the table.
                 Only relevant when borders_layout is ALL or NO_HORIZONTAL_LINES. Otherwise, the border widths are controlled by FPDF.set_line_width()
             num_heading_rows (number): optional. Sets the number of heading rows, default value is 1. If this value is not 1,
                 first_row_as_headings needs to be True if num_heading_rows>1 and False if num_heading_rows=0. For backwards compatibility,
                 first_row_as_headings is used in case num_heading_rows is 1.
+            repeat_headings (fpdf.enums.TableHeadingsDisplay): optional, indicates whether to print table headings on every page, default to 1.
         """
         self._fpdf = fpdf
         self._align = align
         self._v_align = VAlign.coerce(v_align)
         self._borders_layout = TableBordersLayout.coerce(borders_layout)
         self._outer_border_width = outer_border_width
         self._cell_fill_color = cell_fill_color
@@ -94,14 +97,15 @@
         self._headings_style = headings_style
         self._line_height = 2 * fpdf.font_size if line_height is None else line_height
         self._markdown = markdown
         self._text_align = text_align
         self._width = fpdf.epw if width is None else width
         self._wrapmode = wrapmode
         self._num_heading_rows = num_heading_rows
+        self._repeat_headings = TableHeadingsDisplay.coerce(repeat_headings)
         self._initial_style = None
         self.rows = []
 
         if padding is None:
             self._padding = Padding.new(0)
         else:
             self._padding = Padding.new(padding)
@@ -207,21 +211,24 @@
         else:
             self._cols_count = 0
 
         # Process any rowspans
         row_info = list(self._process_rowpans_entries())
 
         # actually render the cells
+        repeat_headings = (
+            self._repeat_headings is TableHeadingsDisplay.ON_TOP_OF_EVERY_PAGE
+        )
         self._fpdf.y += self._outer_border_margin[1]
         for i, row in enumerate(self.rows):
             # pylint: disable=protected-access
             page_break = self._fpdf._perform_page_break_if_need_be(
                 row_info[i].pagebreak_height
             )
-            if page_break and i >= self._num_heading_rows:
+            if page_break and repeat_headings and i >= self._num_heading_rows:
                 # repeat headings on top:
                 self._fpdf.y += self._outer_border_margin[1]
                 for row_idx in range(self._num_heading_rows):
                     self._render_table_row(
                         row_idx,
                         row_info[row_idx],
                         cell_x_positions=cell_x_positions,
```

### Comparing `fpdf2-2.7.8/fpdf/template.py` & `fpdf2-2.7.9/fpdf/template.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/text_region.py` & `fpdf2-2.7.9/fpdf/text_region.py`

 * *Files 2% similar despite different names*

```diff
@@ -78,14 +78,21 @@
         self.skip_leading_spaces = skip_leading_spaces
         if wrapmode is None:
             self.wrapmode = self._region.wrapmode
         else:
             self.wrapmode = WrapMode.coerce(wrapmode)
         self._text_fragments = []
 
+    def __str__(self):
+        return (
+            f"Paragraph(text_align={self.text_align}, line_height={self.line_height}, top_margin={self.top_margin},"
+            f" bottom_margin={self.bottom_margin}, skip_leading_spaces={self.skip_leading_spaces}, wrapmode={self.wrapmode},"
+            f" #text_fragments={len(self._text_fragments)})"
+        )
+
     def __enter__(self):
         return self
 
     def __exit__(self, exc_type, exc_value, traceback):
         self._region.end_paragraph()
 
     def write(self, text: str, link=None):
@@ -183,14 +190,16 @@
 
     def render(self, col_left, col_width, max_height):
         if not self.img:
             raise RuntimeError(
                 "ImageParagraph.build_line() must be called before render()."
             )
         is_svg = isinstance(self.info, VectorImageInfo)
+
+        # pylint: disable=possibly-used-before-assignment
         if self.height:
             h = self.height
         else:
             native_h = self.info["h"] / self.region.pdf.k
         if self.width:
             w = self.width
         else:
```

### Comparing `fpdf2-2.7.8/fpdf/transitions.py` & `fpdf2-2.7.9/fpdf/transitions.py`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/fpdf/util.py` & `fpdf2-2.7.9/fpdf/util.py`

 * *Files 9% similar despite different names*

```diff
@@ -107,14 +107,41 @@
     """
     unit_conversion_factor = get_scale_factor(new_unit) / get_scale_factor(old_unit)
     if isinstance(to_convert, Iterable):
         return tuple(convert_unit(i, 1, unit_conversion_factor) for i in to_convert)
     return to_convert / unit_conversion_factor
 
 
+ROMAN_NUMERAL_MAP = (
+    ("M", 1000),
+    ("CM", 900),
+    ("D", 500),
+    ("CD", 400),
+    ("C", 100),
+    ("XC", 90),
+    ("L", 50),
+    ("XL", 40),
+    ("X", 10),
+    ("IX", 9),
+    ("V", 5),
+    ("IV", 4),
+    ("I", 1),
+)
+
+
+def int2roman(n):
+    "Convert an integer to Roman numeral"
+    result = ""
+    for numeral, integer in ROMAN_NUMERAL_MAP:
+        while n >= integer:
+            result += numeral
+            n -= integer
+    return result
+
+
 ################################################################################
 ################### Utility functions to track memory usage ####################
 ################################################################################
 
 
 def print_mem_usage(prefix):
     print(get_mem_usage(prefix))
```

### Comparing `fpdf2-2.7.8/fpdf2.egg-info/PKG-INFO` & `fpdf2-2.7.9/fpdf2.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: fpdf2
-Version: 2.7.8
+Version: 2.7.9
 Summary: Simple & fast PDF generation for Python
 Home-page: https://py-pdf.github.io/fpdf2/
-Download-URL: https://github.com/py-pdf/fpdf2/tarball/2.7.8
+Download-URL: https://github.com/py-pdf/fpdf2/tarball/2.7.9
 Author: Olivier PLATHEY ported by Max
 Maintainer: Lucas Cimon
 License: LGPLv3+
 Project-URL: Documentation, https://py-pdf.github.io/fpdf2/
 Project-URL: Code, https://github.com/py-pdf/fpdf2
 Project-URL: Issue tracker, https://github.com/py-pdf/fpdf2/issues
 Keywords: pdf,unicode,png,jpg,ttf,barcode
@@ -136,15 +136,15 @@
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-twitter-03A9F4?logo=twitter)](https://twitter.com/share?url=https://github.com/py-pdf/fpdf2&t=fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-facebook-1976D2?logo=facebook)](https://www.facebook.com/sharer/sharer.php?u=https://github.com/py-pdf/fpdf2)
 [![GitHub Repo stars](https://img.shields.io/badge/share%20on-linkedin-3949AB?logo=linkedin)](https://www.linkedin.com/shareArticle?url=https://github.com/py-pdf/fpdf2&title=fpdf2)
 
 ## Documentation
 
 - [Documentation Home](https://py-pdf.github.io/fpdf2/)
-- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html)
+- Tutorial in several languages: [English](https://py-pdf.github.io/fpdf2/Tutorial.html) - [Deutsch](https://py-pdf.github.io/fpdf2/Tutorial-de.html) - [español](https://py-pdf.github.io/fpdf2/Tutorial-es.html) - [हिंदी](https://py-pdf.github.io/fpdf2/Tutorial-hi.html) - [português](https://py-pdf.github.io/fpdf2/Tutorial-pt.html) - [Русский](https://py-pdf.github.io/fpdf2/Tutorial-ru.html) - [Italian](https://py-pdf.github.io/fpdf2/Tutorial-it.html) - [français](https://py-pdf.github.io/fpdf2/Tutorial-fr.html) - [Ελληνικά](https://py-pdf.github.io/fpdf2/Tutorial-gr.html) - [עברית](https://py-pdf.github.io/fpdf2/Tutorial-he.html) - [简体中文](https://py-pdf.github.io/fpdf2/Tutorial-zh.html) - [বাংলা](https://py-pdf.github.io/fpdf2/Tutorial-bn.html) - [ភាសខ្មែរ](https://py-pdf.github.io/fpdf2/Tutorial-km.md) - [日本語](https://py-pdf.github.io/fpdf2/Tutorial-ja.html) - [Dutch](https://py-pdf.github.io/fpdf2/Tutorial-nl.html) - [Polski](https://py-pdf.github.io/fpdf2/Tutorial-pl.html)
 - Release notes: [CHANGELOG.md](https://github.com/py-pdf/fpdf2/blob/master/CHANGELOG.md) 
 - A series of blog posts: [fpdf2 tag @ ludochaordic](https://chezsoi.org/lucas/blog/tag/fpdf2.html)
 
 You can also have a look at the `tests/`, they're great usage examples!
 
 ## Development
 
@@ -234,15 +234,15 @@
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://www.nuttapat.me"><img src="https://avatars.githubusercontent.com/u/2115896?v=4?s=100" width="100px;" alt="Nuttapat Koonarangsri"/><br /><sub><b>Nuttapat Koonarangsri</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=hackinteach" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ahackinteach" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/sokratisvas"><img src="https://avatars.githubusercontent.com/u/77175483?v=4?s=100" width="100px;" alt="Sokratis Vasiliou"/><br /><sub><b>Sokratis Vasiliou</b></sub></a><br /><a href="#translation-sokratisvas" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/semaeostomea"><img src="https://avatars.githubusercontent.com/u/100974908?v=4?s=100" width="100px;" alt="semaeostomea"/><br /><sub><b>semaeostomea</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Documentation">📖</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=semaeostomea" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Jmillan-Dev"><img src="https://avatars.githubusercontent.com/u/39383390?v=4?s=100" width="100px;" alt="Josué Millán Zamora"/><br /><sub><b>Josué Millán Zamora</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Jmillan-Dev" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/me-suzy"><img src="https://avatars.githubusercontent.com/u/2770489?v=4?s=100" width="100px;" alt="me-suzy"/><br /><sub><b>me-suzy</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ame-suzy" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/dmail00"><img src="https://avatars.githubusercontent.com/u/79044603?v=4?s=100" width="100px;" alt="dmail00"/><br /><sub><b>dmail00</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Admail00" title="Bug reports">🐛</a> <a href="https://github.com/py-pdf/fpdf2/commits?author=dmail00" title="Code">💻</a></td>
-      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/GerardoAllende"><img src="https://avatars.githubusercontent.com/u/8699267?v=4?s=100" width="100px;" alt="Gerardo Allende"/><br /><sub><b>Gerardo Allende</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=GerardoAllende" title="Code">💻</a> <a href="#research-GerardoAllende" title="Research">🔬</a></td>
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://nicholasjin.github.io/"><img src="https://avatars.githubusercontent.com/u/15252734?v=4?s=100" width="100px;" alt="Nicholas Jin"/><br /><sub><b>Nicholas Jin</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anicholasjin" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://portfolio-yk-jp.vercel.app/"><img src="https://avatars.githubusercontent.com/u/69574727?v=4?s=100" width="100px;" alt="Yusuke"/><br /><sub><b>Yusuke</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=yk-jp" title="Code">💻</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Tillrzhtgrfho"><img src="https://avatars.githubusercontent.com/u/86628355?v=4?s=100" width="100px;" alt="Tillrzhtgrfho"/><br /><sub><b>Tillrzhtgrfho</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3ATillrzhtgrfho" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="http://dario.icu/"><img src="https://avatars.githubusercontent.com/u/35274810?v=4?s=100" width="100px;" alt="Dario Ackermann"/><br /><sub><b>Dario Ackermann</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Adarioackermann" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/TzviGreenfeld"><img src="https://avatars.githubusercontent.com/u/43534411?v=4?s=100" width="100px;" alt="Tzvi Greenfeld"/><br /><sub><b>Tzvi Greenfeld</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=TzviGreenfeld" title="Documentation">📖</a> <a href="#translation-TzviGreenfeld" title="Translation">🌍</a></td>
@@ -305,14 +305,19 @@
     </tr>
     <tr>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/Polderrider"><img src="https://avatars.githubusercontent.com/u/51285379?v=4?s=100" width="100px;" alt="Polderrider"/><br /><sub><b>Polderrider</b></sub></a><br /><a href="#translation-Polderrider" title="Translation">🌍</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/valholl"><img src="https://avatars.githubusercontent.com/u/301204?v=4?s=100" width="100px;" alt="Elena ``of Valhalla''"/><br /><sub><b>Elena ``of Valhalla''</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=valholl" title="Tests">⚠️</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/nocalla"><img src="https://avatars.githubusercontent.com/u/16230431?v=4?s=100" width="100px;" alt="Niall O'Callaghan"/><br /><sub><b>Niall O'Callaghan</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Anocalla" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://github.com/jsid72"><img src="https://avatars.githubusercontent.com/u/51690199?v=4?s=100" width="100px;" alt="jsid72"/><br /><sub><b>jsid72</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/issues?q=author%3Ajsid72" title="Bug reports">🐛</a></td>
       <td align="center" valign="top" width="14.28%"><a href="https://www.linkedin.com/in/alan-collins/"><img src="https://avatars.githubusercontent.com/u/38288262?v=4?s=100" width="100px;" alt="Alan Collins"/><br /><sub><b>Alan Collins</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Alan-Collins" title="Code">💻</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/hyperstown"><img src="https://avatars.githubusercontent.com/u/64496017?v=4?s=100" width="100px;" alt="hyperstown"/><br /><sub><b>hyperstown</b></sub></a><br /><a href="#content-hyperstown" title="Content">🖋</a></td>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/Clock-Speed"><img src="https://avatars.githubusercontent.com/u/55024400?v=4?s=100" width="100px;" alt="Clock-Speed"/><br /><sub><b>Clock-Speed</b></sub></a><br /><a href="https://github.com/py-pdf/fpdf2/commits?author=Clock-Speed" title="Code">💻</a></td>
+    </tr>
+    <tr>
+      <td align="center" valign="top" width="14.28%"><a href="https://github.com/DarekRepos"><img src="https://avatars.githubusercontent.com/u/32545344?v=4?s=100" width="100px;" alt="Darek"/><br /><sub><b>Darek</b></sub></a><br /><a href="#translation-DarekRepos" title="Translation">🌍</a></td>
     </tr>
   </tbody>
 </table>
 
 <!-- markdownlint-restore -->
 <!-- prettier-ignore-end -->
```

### Comparing `fpdf2-2.7.8/fpdf2.egg-info/SOURCES.txt` & `fpdf2-2.7.9/fpdf2.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `fpdf2-2.7.8/setup.cfg` & `fpdf2-2.7.9/setup.cfg`

 * *Files identical despite different names*

