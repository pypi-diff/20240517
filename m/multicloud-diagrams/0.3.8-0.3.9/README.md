# Comparing `tmp/multicloud_diagrams-0.3.8.tar.gz` & `tmp/multicloud_diagrams-0.3.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "multicloud_diagrams-0.3.8.tar", max compression
+gzip compressed data, was "multicloud_diagrams-0.3.9.tar", max compression
```

## Comparing `multicloud_diagrams-0.3.8.tar` & `multicloud_diagrams-0.3.9.tar`

### file list

```diff
@@ -1,10 +1,10 @@
--rw-r--r--   0        0        0     1069 2023-05-14 15:36:37.276228 multicloud_diagrams-0.3.8/LICENSE
--rw-r--r--   0        0        0     8567 2023-07-23 08:37:02.246004 multicloud_diagrams-0.3.8/README.md
--rw-r--r--   0        0        0    17771 2023-07-24 07:50:24.803328 multicloud_diagrams-0.3.8/multicloud_diagrams/__init__.py
--rw-r--r--   0        0        0     3868 2023-07-23 07:39:33.823106 multicloud_diagrams-0.3.8/multicloud_diagrams/providers/aws_services.json
--rw-r--r--   0        0        0        2 2023-05-17 19:53:33.575412 multicloud_diagrams-0.3.8/multicloud_diagrams/providers/azure_services.json
--rw-r--r--   0        0        0      207 2023-05-19 12:11:15.381235 multicloud_diagrams-0.3.8/multicloud_diagrams/providers/fallback.json
--rw-r--r--   0        0        0        2 2023-05-17 19:53:33.570337 multicloud_diagrams-0.3.8/multicloud_diagrams/providers/gcp_services.json
--rw-r--r--   0        0        0      616 2023-07-23 07:39:33.816960 multicloud_diagrams-0.3.8/multicloud_diagrams/providers/on_prem_services.json
--rw-r--r--   0        0        0      525 2023-07-24 07:51:35.502861 multicloud_diagrams-0.3.8/pyproject.toml
--rw-r--r--   0        0        0     9085 1970-01-01 00:00:00.000000 multicloud_diagrams-0.3.8/PKG-INFO
+-rw-r--r--   0        0        0     1069 2023-05-14 15:36:37.276228 multicloud_diagrams-0.3.9/LICENSE
+-rw-r--r--   0        0        0     9501 2023-07-24 14:33:29.083639 multicloud_diagrams-0.3.9/README.md
+-rw-r--r--   0        0        0    17771 2023-07-24 07:50:24.803328 multicloud_diagrams-0.3.9/multicloud_diagrams/__init__.py
+-rw-r--r--   0        0        0     3868 2023-07-23 07:39:33.823106 multicloud_diagrams-0.3.9/multicloud_diagrams/providers/aws_services.json
+-rw-r--r--   0        0        0        2 2023-05-17 19:53:33.575412 multicloud_diagrams-0.3.9/multicloud_diagrams/providers/azure_services.json
+-rw-r--r--   0        0        0      207 2023-05-19 12:11:15.381235 multicloud_diagrams-0.3.9/multicloud_diagrams/providers/fallback.json
+-rw-r--r--   0        0        0        2 2023-05-17 19:53:33.570337 multicloud_diagrams-0.3.9/multicloud_diagrams/providers/gcp_services.json
+-rw-r--r--   0        0        0      616 2023-07-23 07:39:33.816960 multicloud_diagrams-0.3.9/multicloud_diagrams/providers/on_prem_services.json
+-rw-r--r--   0        0        0      525 2023-07-24 14:45:54.315121 multicloud_diagrams-0.3.9/pyproject.toml
+-rw-r--r--   0        0        0    10019 1970-01-01 00:00:00.000000 multicloud_diagrams-0.3.9/PKG-INFO
```

### Comparing `multicloud_diagrams-0.3.8/LICENSE` & `multicloud_diagrams-0.3.9/LICENSE`

 * *Files identical despite different names*

### Comparing `multicloud_diagrams-0.3.8/README.md` & `multicloud_diagrams-0.3.9/README.md`

 * *Files 9% similar despite different names*

```diff
@@ -1,536 +1,594 @@
-00000000: 4d75 6c74 6943 6c6f 7564 2044 6961 6772  MultiCloud Diagr
-00000010: 616d 7320 6973 2061 2070 6163 6b61 6765  ams is a package
-00000020: 2066 6f72 2067 656e 6572 6174 696e 6720   for generating 
-00000030: 616e 6420 7265 6e64 6572 696e 6720 4469  and rendering Di
-00000040: 6167 7261 6d73 2d41 732d 612d 436f 6465  agrams-As-a-Code
-00000050: 2028 4441 4729 2069 6e20 706f 7075 6c61   (DAG) in popula
-00000060: 7220 6472 6177 696f 2066 6f72 6d61 7420  r drawio format 
-00000070: 666f 7220 6469 6666 6572 656e 7420 436c  for different Cl
-00000080: 6f75 6420 7072 6f76 6964 6572 732e 0a0a  oud providers...
-00000090: 2d20 796f 7520 6361 6e20 7573 6520 6974  - you can use it
-000000a0: 2062 7920 6465 6669 6e69 6e67 2060 6044   by defining ``D
-000000b0: 6961 6772 616d 7320 6173 2061 2043 6f64  iagrams as a Cod
-000000c0: 6560 602c 2063 6f6d 7069 6c65 2074 6f20  e``, compile to 
-000000d0: 6472 6177 696f 2076 6563 746f 7220 666f  drawio vector fo
-000000e0: 726d 6174 2c20 6564 6974 2076 6563 746f  rmat, edit vecto
-000000f0: 7220 6472 6177 696f 2072 6570 7265 7365  r drawio represe
-00000100: 6e74 6174 696f 6e20 2861 6c69 676e 2063  ntation (align c
-00000110: 6f6d 706f 6e65 6e74 7320 6c6f 6361 7469  omponents locati
-00000120: 6f6e 292e 0a2d 206f 7468 6572 206f 7074  on)..- other opt
-00000130: 696f 6e20 6973 2074 6f20 7175 6572 7920  ion is to query 
-00000140: 696e 6672 6173 7472 7563 7475 7265 2065  infrastructure e
-00000150: 6c65 6d65 6e74 7320 7769 7468 2070 6f70  lements with pop
-00000160: 756c 6172 206c 6962 7261 7269 6573 2c20  ular libraries, 
-00000170: 6c69 6b65 2061 7773 2062 6f74 6f2c 2070  like aws boto, p
-00000180: 7265 7072 6f63 6573 7320 6465 7369 7265  reprocess desire
-00000190: 6420 656c 656d 656e 7473 2061 6e64 2063  d elements and c
-000001a0: 6f6d 7069 6c65 2074 6865 6d20 696e 746f  ompile them into
-000001b0: 2064 7261 7769 6f20 7573 696e 6720 6060   drawio using ``
-000001c0: 6d75 6c74 6963 6c6f 7564 2d64 6961 6772  multicloud-diagr
-000001d0: 616d 7360 602e 0a0a 2d20 2a2a 536f 7572  ams``...- **Sour
-000001e0: 6365 2063 6f64 653a 2a2a 2068 7474 7073  ce code:** https
-000001f0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7473  ://github.com/ts
-00000200: 7970 756b 2f6d 756c 7469 636c 6f75 642d  ypuk/multicloud-
-00000210: 6469 6167 7261 6d73 0a2d 202a 2a50 7950  diagrams.- **PyP
-00000220: 4920 6d75 6c74 6963 6c6f 7564 2d64 6961  I multicloud-dia
-00000230: 6772 616d 733a 2a2a 2068 7474 7073 3a2f  grams:** https:/
-00000240: 2f70 7970 692e 6f72 672f 7072 6f6a 6563  /pypi.org/projec
-00000250: 742f 6d75 6c74 6963 6c6f 7564 2d64 6961  t/multicloud-dia
-00000260: 6772 616d 732f 0a2d 202a 2a53 706f 6e73  grams/.- **Spons
-00000270: 6f72 2070 726f 6a65 6374 3a2a 2a20 6874  or project:** ht
-00000280: 7470 733a 2f2f 7061 7472 656f 6e2e 636f  tps://patreon.co
-00000290: 6d2f 7473 7970 756b 0a2d 202a 2a56 6965  m/tsypuk.- **Vie
-000002a0: 7720 6368 616e 6765 6c6f 673a 2a2a 2068  w changelog:** h
-000002b0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-000002c0: 6d2f 7473 7970 756b 2f6d 756c 7469 636c  m/tsypuk/multicl
-000002d0: 6f75 642d 6469 6167 7261 6d73 2f62 6c6f  oud-diagrams/blo
-000002e0: 622f 6d61 696e 2f43 4841 4e47 454c 4f47  b/main/CHANGELOG
-000002f0: 2e4d 440a 2d20 2a2a 4275 6720 7265 706f  .MD.- **Bug repo
-00000300: 7274 733a 2a2a 2068 7474 7073 3a2f 2f67  rts:** https://g
-00000310: 6974 6875 622e 636f 6d2f 7473 7970 756b  ithub.com/tsypuk
-00000320: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
-00000330: 7261 6d73 2f69 7373 7565 730a 2d20 2a2a  rams/issues.- **
-00000340: 5361 6d70 6c65 7320 616e 6420 6578 616d  Samples and exam
-00000350: 706c 6573 3a2a 2a20 6874 7470 733a 2f2f  ples:** https://
-00000360: 6769 7468 7562 2e63 6f6d 2f74 7379 7075  github.com/tsypu
-00000370: 6b2f 6d75 6c74 6963 6c6f 7564 2d64 6961  k/multicloud-dia
-00000380: 6772 616d 732f 7472 6565 2f6d 6169 6e2f  grams/tree/main/
-00000390: 7361 6d70 6c65 732f 7361 6d70 6c65 730a  samples/samples.
-000003a0: 0a23 2323 2046 6561 7475 7265 733a 0a2d  .### Features:.-
-000003b0: 2061 6c6c 6f77 7320 746f 2067 656e 6572   allows to gener
-000003c0: 6174 6520 6472 6177 696f 2064 6961 6772  ate drawio diagr
-000003d0: 616d 2077 6974 6820 7072 6564 6566 696e  am with predefin
-000003e0: 6564 2073 7479 6c65 7320 666f 7220 706f  ed styles for po
-000003f0: 7075 6c61 7220 6177 7320 7365 7276 6963  pular aws servic
-00000400: 6573 2c20 7375 7070 6f72 7420 6772 6170  es, support grap
-00000410: 682d 6261 7365 6420 636f 6e6e 6563 7469  h-based connecti
-00000420: 6f6e 2077 6974 6820 6e61 6d65 6420 6564  on with named ed
-00000430: 6765 730a 2d20 7375 7070 6f72 7473 2073  ges.- supports s
-00000440: 696e 676c 6520 616e 6420 6261 7463 6820  ingle and batch 
-00000450: 656c 656d 656e 7473 2061 7070 656e 6420  elements append 
-00000460: 746f 2064 6961 6772 616d 0a2d 2064 7570  to diagram.- dup
-00000470: 6c69 6361 7465 7320 6465 7465 6374 696f  licates detectio
-00000480: 6e20 746f 2070 7265 7665 6e74 2062 616c  n to prevent bal
-00000490: 6c20 6f66 206d 7564 2069 6e20 6669 6c65  l of mud in file
-000004a0: 2066 6f72 6d61 7420 616e 6420 6469 6167   format and diag
-000004b0: 7261 6d0a 2d20 7665 7269 6669 6361 7469  ram.- verificati
-000004c0: 6f6e 2074 6861 7420 626f 7468 2076 6572  on that both ver
-000004d0: 7469 6365 7320 7072 6573 656e 7420 6f6e  tices present on
-000004e0: 2064 6961 6772 616d 2077 6865 6e20 6164   diagram when ad
-000004f0: 6469 6e67 2065 6467 6520 636f 6e6e 6563  ding edge connec
-00000500: 7469 6f6e 2062 6574 7765 656e 2074 6865  tion between the
-00000510: 6d20 0a2d 2069 6620 7468 6520 6e6f 6465  m .- if the node
-00000520: 2069 7320 6e6f 7420 7072 6573 656e 742c   is not present,
-00000530: 2066 616c 6c62 6163 6b20 746f 2064 6566   fallback to def
-00000540: 6175 6c74 2069 636f 6e20 7768 656e 2072  ault icon when r
-00000550: 656e 6465 7269 6e67 0a2d 2072 6561 6420  endering.- read 
-00000560: 7072 6576 696f 7573 2076 6572 7369 6f6e  previous version
-00000570: 206f 6620 6472 6177 696f 2066 696c 6520   of drawio file 
-00000580: 616e 6420 7265 7573 6573 2065 7869 7374  and reuses exist
-00000590: 696e 6720 7665 7274 6963 6573 2063 6f6f  ing vertices coo
-000005a0: 7264 696e 6174 6573 2077 6865 6e20 6765  rdinates when ge
-000005b0: 6e65 7261 7469 6e67 2061 206e 6577 2076  nerating a new v
-000005c0: 6572 7369 6f6e 0a2d 2067 656e 6572 6174  ersion.- generat
-000005d0: 6520 6469 6167 7261 6d20 6672 6f6d 2060  e diagram from `
-000005e0: 6059 414d 4c60 6020 6465 6669 6e69 7469  `YAML`` definiti
-000005f0: 6f6e 0a2d 206d 6978 2061 6e64 2061 7567  on.- mix and aug
-00000600: 6d65 6e74 2044 6961 6772 616d 2d61 732d  ment Diagram-as-
-00000610: 636f 6465 2c20 7265 616c 2069 6e66 7261  code, real infra
-00000620: 2063 7261 776c 6572 2c20 7374 6174 6963   crawler, static
-00000630: 2079 616d 6c2d 6261 7365 6420 636f 6e74   yaml-based cont
-00000640: 656e 7420 746f 2064 6961 6772 616d 0a0a  ent to diagram..
-00000650: 2323 2320 5375 7070 6f72 7465 6420 4157  ### Supported AW
-00000660: 5320 7365 7276 6963 6573 3a0a 0a2d 206c  S services:..- l
-00000670: 616d 6264 615f 6675 6e63 7469 6f6e 0a2d  ambda_function.-
-00000680: 2073 7173 0a2d 2073 6e73 0a2d 2069 616d   sqs.- sns.- iam
-00000690: 5f72 6f6c 652f 6961 6d5f 706f 6c69 6379  _role/iam_policy
-000006a0: 2f69 616d 5f70 6572 6d69 7373 696f 6e0a  /iam_permission.
-000006b0: 2d20 6479 6e61 6d6f 2f64 796e 616d 6f5f  - dynamo/dynamo_
-000006c0: 7374 7265 616d 0a2d 2061 7069 5f67 770a  stream.- api_gw.
-000006d0: 2d20 7333 0a2d 206b 6d73 0a2d 2073 736d  - s3.- kms.- ssm
-000006e0: 0a0a 2323 2320 4c69 6272 6172 7920 6361  ..### Library ca
-000006f0: 6e20 6265 2075 7365 6420 7769 7468 2064  n be used with d
-00000700: 6966 6665 7265 6e74 2061 7070 726f 6163  ifferent approac
-00000710: 6865 7320 616e 6420 6576 656e 206d 6978  hes and even mix
-00000720: 2061 6c6c 206f 6620 7468 656d 2e20 5361   all of them. Sa
-00000730: 6d70 6c65 7320 616e 6420 7573 6167 653a  mples and usage:
-00000740: 0a0a 2323 2323 2031 2e20 4765 6e65 7261  ..#### 1. Genera
-00000750: 7469 6e67 2041 5753 2044 796e 616d 6f44  ting AWS DynamoD
-00000760: 4220 4465 7461 696c 7320 6472 6177 696f  B Details drawio
-00000770: 2064 6961 6772 616d 2062 6173 6564 206f   diagram based o
-00000780: 6e20 6c69 6272 6172 792c 2068 7474 702c  n library, http,
-00000790: 2061 7773 636c 692c 2065 7463 2e20 4578   awscli, etc. Ex
-000007a0: 616d 706c 6520 6261 7365 6420 6f6e 2062  ample based on b
-000007b0: 6f74 6f33 2044 796e 616d 6f44 4220 7265  oto3 DynamoDB re
-000007c0: 7370 6f6e 7365 0a0a 6060 606a 736f 6e0a  sponse..```json.
-000007d0: 7b0a 2020 2020 2020 2020 2741 7474 7269  {.        'Attri
-000007e0: 6275 7465 4465 6669 6e69 7469 6f6e 7327  buteDefinitions'
-000007f0: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
-00000800: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00000810: 2020 2741 7474 7269 6275 7465 4e61 6d65    'AttributeName
-00000820: 273a 2027 6669 7273 7427 2c0a 2020 2020  ': 'first',.    
-00000830: 2020 2020 2020 2020 2020 2020 2741 7474              'Att
-00000840: 7269 6275 7465 5479 7065 273a 2027 5327  ributeType': 'S'
-00000850: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
-00000860: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00000870: 2020 2020 2020 2020 2020 2020 2020 2741                'A
-00000880: 7474 7269 6275 7465 4e61 6d65 273a 2027  ttributeName': '
-00000890: 7365 636f 6e64 272c 0a20 2020 2020 2020  second',.       
-000008a0: 2020 2020 2020 2020 2027 4174 7472 6962           'Attrib
-000008b0: 7574 6554 7970 6527 3a20 274e 270a 2020  uteType': 'N'.  
-000008c0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-000008d0: 2020 2020 2020 2020 207b 0a20 2020 2020           {.     
-000008e0: 2020 2020 2020 2020 2020 2027 4174 7472             'Attr
-000008f0: 6962 7574 654e 616d 6527 3a20 2774 6869  ibuteName': 'thi
-00000900: 7264 272c 0a20 2020 2020 2020 2020 2020  rd',.           
-00000910: 2020 2020 2027 4174 7472 6962 7574 6554       'AttributeT
-00000920: 7970 6527 3a20 2742 270a 2020 2020 2020  ype': 'B'.      
-00000930: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00000940: 205d 2c0a 2020 2020 2020 2020 2754 6162   ],.        'Tab
-00000950: 6c65 4e61 6d65 273a 2027 7072 6f64 2d64  leName': 'prod-d
-00000960: 796e 616d 6f2d 7461 626c 6527 2c0a 2020  ynamo-table',.  
-00000970: 2020 2020 2020 274b 6579 5363 6865 6d61        'KeySchema
-00000980: 273a 205b 0a20 2020 2020 2020 2020 2020  ': [.           
-00000990: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-000009a0: 2020 2027 4174 7472 6962 7574 654e 616d     'AttributeNam
-000009b0: 6527 3a20 2773 7472 696e 6727 2c0a 2020  e': 'string',.  
-000009c0: 2020 2020 2020 2020 2020 2020 2020 274b                'K
-000009d0: 6579 5479 7065 273a 2027 4841 5348 270a  eyType': 'HASH'.
-000009e0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-000009f0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-00000a00: 2020 2754 6162 6c65 5369 7a65 4279 7465    'TableSizeByte
-00000a10: 7327 3a20 3132 332c 0a20 2020 2020 2020  s': 123,.       
-00000a20: 2027 4974 656d 436f 756e 7427 3a20 3132   'ItemCount': 12
-00000a30: 332c 0a20 2020 2020 2020 2027 5461 626c  3,.        'Tabl
-00000a40: 6541 726e 273a 2027 6172 6e3a 6177 733a  eArn': 'arn:aws:
-00000a50: 6479 6e61 6d6f 6462 3a65 752d 7765 7374  dynamodb:eu-west
-00000a60: 2d31 3a31 3233 3435 3637 3839 3a74 6162  -1:123456789:tab
-00000a70: 6c65 2f70 726f 642d 6479 6e61 6d6f 2d74  le/prod-dynamo-t
-00000a80: 6162 6c65 272c 0a20 2020 2020 2020 2027  able',.        '
-00000a90: 4c6f 6361 6c53 6563 6f6e 6461 7279 496e  LocalSecondaryIn
-00000aa0: 6465 7865 7327 3a20 5b7b 0a2e 2e2e 2020  dexes': [{....  
-00000ab0: 2020 2020 200a 2e2e 2e0a 2e2e 2e0a 2020       .........  
-00000ac0: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-00000ad0: 2020 2027 5353 4544 6573 6372 6970 7469     'SSEDescripti
-00000ae0: 6f6e 273a 207b 0a20 2020 2020 2020 2020  on': {.         
-00000af0: 2020 2027 5374 6174 7573 273a 2027 454e     'Status': 'EN
-00000b00: 4142 4c45 4427 2c0a 2020 2020 2020 2020  ABLED',.        
-00000b10: 2020 2020 2753 5345 5479 7065 273a 2027      'SSEType': '
-00000b20: 4b4d 5327 2c0a 2020 2020 2020 2020 2020  KMS',.          
-00000b30: 2020 274b 4d53 4d61 7374 6572 4b65 7941    'KMSMasterKeyA
-00000b40: 726e 273a 2027 7374 7269 6e67 272c 0a20  rn': 'string',. 
-00000b50: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-00000b60: 2020 2020 2020 2744 656c 6574 696f 6e50        'DeletionP
-00000b70: 726f 7465 6374 696f 6e45 6e61 626c 6564  rotectionEnabled
-00000b80: 273a 2054 7275 650a 2020 2020 2020 2020  ': True.        
-00000b90: 7d0a 6060 600a 0a2d 2053 6f75 7263 6520  }.```..- Source 
-00000ba0: 5b61 7773 5f64 796e 616d 6f5f 626f 746f  [aws_dynamo_boto
-00000bb0: 335f 7265 7370 6f6e 7365 2e70 795d 2868  3_response.py](h
-00000bc0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-00000bd0: 6d2f 7473 7970 756b 2f6d 756c 7469 636c  m/tsypuk/multicl
-00000be0: 6f75 642d 6469 6167 7261 6d73 2f62 6c6f  oud-diagrams/blo
-00000bf0: 622f 6d61 696e 2f73 616d 706c 6573 2f73  b/main/samples/s
-00000c00: 616d 706c 6573 2f61 7773 5f64 796e 616d  amples/aws_dynam
-00000c10: 6f5f 626f 746f 335f 7265 7370 6f6e 7365  o_boto3_response
-00000c20: 2e70 7929 0a2d 204f 7574 7075 7420 636f  .py).- Output co
-00000c30: 6d70 696c 6564 205b 6f75 7470 7574 2e70  mpiled [output.p
-00000c40: 726f 642e 6479 6e61 6d6f 2e64 7261 7769  rod.dynamo.drawi
-00000c50: 6f5d 2868 7474 7073 3a2f 2f72 6177 2e67  o](https://raw.g
-00000c60: 6974 6875 6275 7365 7263 6f6e 7465 6e74  ithubusercontent
-00000c70: 2e63 6f6d 2f74 7379 7075 6b2f 6d75 6c74  .com/tsypuk/mult
-00000c80: 6963 6c6f 7564 2d64 6961 6772 616d 732f  icloud-diagrams/
-00000c90: 6d61 696e 2f73 616d 706c 6573 2f6f 7574  main/samples/out
-00000ca0: 7075 742f 6f75 7470 7574 2e70 726f 642e  put/output.prod.
-00000cb0: 6479 6e61 6d6f 2e64 7261 7769 6f29 3a0a  dynamo.drawio):.
-00000cc0: 0a21 5b6f 7574 7075 742e 7072 6f64 2e64  .![output.prod.d
-00000cd0: 796e 616d 6f2e 706e 675d 2868 7474 7073  ynamo.png](https
-00000ce0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7473  ://github.com/ts
-00000cf0: 7970 756b 2f6d 756c 7469 636c 6f75 642d  ypuk/multicloud-
-00000d00: 6469 6167 7261 6d73 2f72 6177 2f6d 6169  diagrams/raw/mai
-00000d10: 6e2f 7361 6d70 6c65 732f 6f75 7470 7574  n/samples/output
-00000d20: 2f70 6e67 2f6f 7574 7075 742e 7072 6f64  /png/output.prod
-00000d30: 2e64 796e 616d 6f2e 706e 673f 7261 773d  .dynamo.png?raw=
-00000d40: 5472 7565 290a 0a23 2323 2320 322e 2044  True)..#### 2. D
-00000d50: 6961 6772 616d 7320 6173 2061 2043 6f64  iagrams as a Cod
-00000d60: 652e 2044 4147 2e20 4765 6e65 7261 7469  e. DAG. Generati
-00000d70: 6e67 2041 5753 2049 414d 2047 7261 7068  ng AWS IAM Graph
-00000d80: 2066 726f 6d20 7468 6520 636f 6465 2062   from the code b
-00000d90: 6173 6564 206f 6e20 4441 4720 6465 636c  ased on DAG decl
-00000da0: 6172 6174 696f 6e3a 0a0a 6060 6070 7974  aration:..```pyt
-00000db0: 686f 6e0a 2020 2020 7072 6f64 7563 6572  hon.    producer
-00000dc0: 5f66 756e 635f 6172 6e20 3d20 2761 726e  _func_arn = 'arn
-00000dd0: 3a61 7773 3a6c 616d 6264 613a 6575 2d77  :aws:lambda:eu-w
-00000de0: 6573 742d 313a 3132 3334 3536 3738 393a  est-1:123456789:
-00000df0: 6675 6e63 7469 6f6e 3a70 726f 6475 6365  function:produce
-00000e00: 722d 6c61 6d62 6461 270a 2020 2020 6d65  r-lambda'.    me
-00000e10: 7461 6461 7461 203d 207b 0a20 2020 2020  tadata = {.     
-00000e20: 2020 2022 436f 6465 5369 7a65 223a 2031     "CodeSize": 1
-00000e30: 3233 342c 0a20 2020 2020 2020 2022 4861  234,.        "Ha
-00000e40: 6e64 6c65 7222 3a20 226d 6169 6e22 2c0a  ndler": "main",.
-00000e50: 2020 2020 2020 2020 224c 6179 6572 7322          "Layers"
-00000e60: 3a20 302c 0a20 2020 2020 2020 2022 4d65  : 0,.        "Me
-00000e70: 6d6f 7279 223a 2031 3238 2c0a 2020 2020  mory": 128,.    
-00000e80: 2020 2020 2250 6163 6b61 6765 5479 7065      "PackageType
-00000e90: 223a 2022 5a69 7022 2c0a 2020 2020 2020  ": "Zip",.      
-00000ea0: 2020 2252 756e 7469 6d65 223a 2022 676f    "Runtime": "go
-00000eb0: 312e 7822 2c0a 2020 2020 2020 2020 2254  1.x",.        "T
-00000ec0: 696d 656f 7574 223a 2033 302c 0a20 2020  imeout": 30,.   
-00000ed0: 2020 2020 2022 5472 6163 696e 6743 6f6e       "TracingCon
-00000ee0: 6669 6722 3a20 227b 274d 6f64 6527 3a20  fig": "{'Mode': 
-00000ef0: 2741 6374 6976 6527 7d22 2c0a 2020 2020  'Active'}",.    
-00000f00: 2020 2020 2256 6572 7369 6f6e 223a 2022      "Version": "
-00000f10: 244c 4154 4553 5422 0a20 2020 207d 0a20  $LATEST".    }. 
-00000f20: 2020 206d 6364 2e61 6464 5f76 6572 7465     mcd.add_verte
-00000f30: 7828 6964 3d70 726f 6475 6365 725f 6675  x(id=producer_fu
-00000f40: 6e63 5f61 726e 2c20 6e6f 6465 5f6e 616d  nc_arn, node_nam
-00000f50: 653d 2770 726f 6475 6365 722d 6c61 6d62  e='producer-lamb
-00000f60: 6461 272c 2061 726e 3d70 726f 6475 6365  da', arn=produce
-00000f70: 725f 6675 6e63 5f61 726e 2c20 6e6f 6465  r_func_arn, node
-00000f80: 5f74 7970 653d 276c 616d 6264 615f 6675  _type='lambda_fu
-00000f90: 6e63 7469 6f6e 272c 206d 6574 6164 6174  nction', metadat
-00000fa0: 613d 6d65 7461 6461 7461 290a 2020 2020  a=metadata).    
-00000fb0: 0a20 2020 2063 6f6e 7375 6d65 725f 6675  .    consumer_fu
-00000fc0: 6e63 5f61 726e 203d 2027 6172 6e3a 6177  nc_arn = 'arn:aw
-00000fd0: 733a 6c61 6d62 6461 3a65 752d 7765 7374  s:lambda:eu-west
-00000fe0: 2d31 3a31 3233 3435 3637 3839 3a66 756e  -1:123456789:fun
-00000ff0: 6374 696f 6e3a 636f 6e73 756d 6572 2d6c  ction:consumer-l
-00001000: 616d 6264 6127 0a20 2020 206d 6364 2e61  ambda'.    mcd.a
-00001010: 6464 5f76 6572 7465 7828 6964 3d63 6f6e  dd_vertex(id=con
-00001020: 7375 6d65 725f 6675 6e63 5f61 726e 2c20  sumer_func_arn, 
-00001030: 6e6f 6465 5f6e 616d 653d 2763 6f6e 7375  node_name='consu
-00001040: 6d65 722d 6c61 6d62 6461 272c 2061 726e  mer-lambda', arn
-00001050: 3d63 6f6e 7375 6d65 725f 6675 6e63 5f61  =consumer_func_a
-00001060: 726e 2c20 6e6f 6465 5f74 7970 653d 276c  rn, node_type='l
-00001070: 616d 6264 615f 6675 6e63 7469 6f6e 2729  ambda_function')
-00001080: 0a20 2020 200a 2020 2020 6479 6e61 6d6f  .    .    dynamo
-00001090: 5f61 726e 203d 2027 6172 6e3a 6177 733a  _arn = 'arn:aws:
-000010a0: 6479 6e61 6d6f 6462 3a65 752d 7765 7374  dynamodb:eu-west
-000010b0: 2d31 3a31 3233 3435 3637 3839 3a74 6162  -1:123456789:tab
-000010c0: 6c65 2f74 6162 6c65 3127 0a20 2020 206d  le/table1'.    m
-000010d0: 6364 2e61 6464 5f76 6572 7465 7828 6964  cd.add_vertex(id
-000010e0: 3d64 796e 616d 6f5f 6172 6e2c 206e 6f64  =dynamo_arn, nod
-000010f0: 655f 6e61 6d65 3d27 7461 626c 6531 272c  e_name='table1',
-00001100: 2061 726e 3d64 796e 616d 6f5f 6172 6e2c   arn=dynamo_arn,
-00001110: 206e 6f64 655f 7479 7065 3d27 6479 6e61   node_type='dyna
-00001120: 6d6f 2729 0a20 2020 200a 2020 2020 736e  mo').    .    sn
-00001130: 735f 6172 6e20 3d20 2761 726e 3a61 7773  s_arn = 'arn:aws
-00001140: 3a73 6e73 3a65 752d 7765 7374 2d31 3a31  :sns:eu-west-1:1
-00001150: 3233 3435 3637 3839 3a69 6e74 6572 6e61  23456789:interna
-00001160: 6c2e 6669 666f 270a 2020 2020 6d65 7461  l.fifo'.    meta
-00001170: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
-00001180: 2022 4f77 6e65 7222 3a20 3132 3334 3536   "Owner": 123456
-00001190: 3738 392c 0a20 2020 2020 2020 2022 5375  789,.        "Su
-000011a0: 6273 6372 6970 7469 6f6e 7343 6f6e 6669  bscriptionsConfi
-000011b0: 726d 6564 223a 2033 2c0a 2020 2020 2020  rmed": 3,.      
-000011c0: 2020 2253 7562 7363 7269 7074 696f 6e73    "Subscriptions
-000011d0: 5065 6e64 696e 6722 3a20 300a 2020 2020  Pending": 0.    
-000011e0: 7d0a 2020 2020 6d63 642e 6164 645f 7665  }.    mcd.add_ve
-000011f0: 7274 6578 2869 643d 736e 735f 6172 6e2c  rtex(id=sns_arn,
-00001200: 206e 6f64 655f 6e61 6d65 3d27 696e 7465   node_name='inte
-00001210: 726e 616c 272c 2061 726e 3d73 6e73 5f61  rnal', arn=sns_a
-00001220: 726e 2c20 6e6f 6465 5f74 7970 653d 2773  rn, node_type='s
-00001230: 6e73 272c 206d 6574 6164 6174 613d 6d65  ns', metadata=me
-00001240: 7461 6461 7461 290a 2020 2020 0a20 2020  tadata).    .   
-00001250: 2073 7173 5f61 726e 203d 2027 6172 6e3a   sqs_arn = 'arn:
-00001260: 6177 733a 7371 733a 6575 2d77 6573 742d  aws:sqs:eu-west-
-00001270: 313a 3132 3334 3536 3738 393a 696e 742d  1:123456789:int-
-00001280: 6575 2d6c 6976 652d 6576 656e 7473 2e66  eu-live-events.f
-00001290: 6966 6f27 0a20 2020 206d 6574 6164 6174  ifo'.    metadat
-000012a0: 6120 3d20 7b0a 2020 2020 2020 2020 2244  a = {.        "D
-000012b0: 656c 6179 5365 636f 6e64 7322 3a20 302c  elaySeconds": 0,
-000012c0: 0a20 2020 2020 2020 2022 4669 666f 5175  .        "FifoQu
-000012d0: 6575 6522 3a20 2254 5255 4522 2c0a 2020  eue": "TRUE",.  
-000012e0: 2020 2020 2020 2252 6563 6569 7665 4d65        "ReceiveMe
-000012f0: 7373 6167 6557 6169 7454 696d 6553 6563  ssageWaitTimeSec
-00001300: 6f6e 6473 223a 2030 2c0a 2020 2020 2020  onds": 0,.      
-00001310: 2020 2253 7173 4d61 6e61 6765 6453 7365    "SqsManagedSse
-00001320: 456e 6162 6c65 6422 3a20 2266 616c 7365  Enabled": "false
-00001330: 222c 0a20 2020 2020 2020 2022 5669 7369  ",.        "Visi
-00001340: 6269 6c69 7479 5469 6d65 6f75 7422 3a20  bilityTimeout": 
-00001350: 3330 0a20 2020 207d 0a20 2020 206d 6364  30.    }.    mcd
-00001360: 2e61 6464 5f76 6572 7465 7828 6964 3d73  .add_vertex(id=s
-00001370: 7173 5f61 726e 2c20 6e6f 6465 5f6e 616d  qs_arn, node_nam
-00001380: 653d 2765 7665 6e74 7327 2c20 6172 6e3d  e='events', arn=
-00001390: 7371 735f 6172 6e2c 206e 6f64 655f 7479  sqs_arn, node_ty
-000013a0: 7065 3d27 7371 7327 2c20 6d65 7461 6461  pe='sqs', metada
-000013b0: 7461 3d6d 6574 6164 6174 6129 0a20 2020  ta=metadata).   
-000013c0: 200a 2020 2020 7371 735f 6172 6e32 203d   .    sqs_arn2 =
-000013d0: 2027 6172 6e3a 6177 733a 7371 733a 6575   'arn:aws:sqs:eu
-000013e0: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
-000013f0: 393a 696e 742d 6575 2d6c 6976 652d 6576  9:int-eu-live-ev
-00001400: 656e 7473 322e 6669 666f 270a 2020 2020  ents2.fifo'.    
-00001410: 6d63 642e 6164 645f 7665 7274 6578 2869  mcd.add_vertex(i
-00001420: 643d 7371 735f 6172 6e32 2c20 6e6f 6465  d=sqs_arn2, node
-00001430: 5f6e 616d 653d 2765 7665 6e74 7332 272c  _name='events2',
-00001440: 2061 726e 3d73 7173 5f61 726e 322c 206e   arn=sqs_arn2, n
-00001450: 6f64 655f 7479 7065 3d27 7371 7327 290a  ode_type='sqs').
-00001460: 2020 2020 0a20 2020 2073 335f 6172 6e20      .    s3_arn 
-00001470: 3d20 2761 726e 3a61 7773 3a73 333a 3a3a  = 'arn:aws:s3:::
-00001480: 6275 636b 6574 5f6e 616d 652f 6b65 795f  bucket_name/key_
-00001490: 6e61 6d65 270a 2020 2020 6d63 642e 6164  name'.    mcd.ad
-000014a0: 645f 7665 7274 6578 2869 643d 7333 5f61  d_vertex(id=s3_a
-000014b0: 726e 2c20 6e6f 6465 5f6e 616d 653d 276b  rn, node_name='k
-000014c0: 6579 5f6e 616d 6527 2c20 6172 6e3d 7333  ey_name', arn=s3
-000014d0: 5f61 726e 2c20 6e6f 6465 5f74 7970 653d  _arn, node_type=
-000014e0: 2773 3327 290a 2020 2020 0a20 2020 206d  's3').    .    m
-000014f0: 6364 2e61 6464 5f6c 696e 6b28 7372 635f  cd.add_link(src_
-00001500: 6e6f 6465 5f69 643d 6627 6c61 6d62 6461  node_id=f'lambda
-00001510: 5f66 756e 6374 696f 6e3a 7b70 726f 6475  _function:{produ
-00001520: 6365 725f 6675 6e63 5f61 726e 7d27 2c20  cer_func_arn}', 
-00001530: 6473 745f 6e6f 6465 5f69 643d 6627 736e  dst_node_id=f'sn
-00001540: 733a 7b73 6e73 5f61 726e 7d27 290a 2020  s:{sns_arn}').  
-00001550: 2020 6d63 642e 6164 645f 6c69 6e6b 2873    mcd.add_link(s
-00001560: 7263 5f6e 6f64 655f 6964 3d66 276c 616d  rc_node_id=f'lam
-00001570: 6264 615f 6675 6e63 7469 6f6e 3a7b 7072  bda_function:{pr
-00001580: 6f64 7563 6572 5f66 756e 635f 6172 6e7d  oducer_func_arn}
-00001590: 272c 2064 7374 5f6e 6f64 655f 6964 3d66  ', dst_node_id=f
-000015a0: 2773 333a 7b73 335f 6172 6e7d 2729 0a20  's3:{s3_arn}'). 
-000015b0: 2020 206d 6364 2e61 6464 5f6c 696e 6b28     mcd.add_link(
-000015c0: 7372 635f 6e6f 6465 5f69 643d 6627 736e  src_node_id=f'sn
-000015d0: 733a 7b73 6e73 5f61 726e 7d27 2c20 6473  s:{sns_arn}', ds
-000015e0: 745f 6e6f 6465 5f69 643d 6627 7371 733a  t_node_id=f'sqs:
-000015f0: 7b73 7173 5f61 726e 7d27 290a 2020 2020  {sqs_arn}').    
-00001600: 6d63 642e 6164 645f 6c69 6e6b 2873 7263  mcd.add_link(src
-00001610: 5f6e 6f64 655f 6964 3d66 2773 6e73 3a7b  _node_id=f'sns:{
-00001620: 736e 735f 6172 6e7d 272c 2064 7374 5f6e  sns_arn}', dst_n
-00001630: 6f64 655f 6964 3d66 2773 7173 3a7b 7371  ode_id=f'sqs:{sq
-00001640: 735f 6172 6e32 7d27 290a 2020 2020 6d63  s_arn2}').    mc
-00001650: 642e 6164 645f 6c69 6e6b 2873 7263 5f6e  d.add_link(src_n
-00001660: 6f64 655f 6964 3d66 2773 7173 3a7b 7371  ode_id=f'sqs:{sq
-00001670: 735f 6172 6e7d 272c 2064 7374 5f6e 6f64  s_arn}', dst_nod
-00001680: 655f 6964 3d66 276c 616d 6264 615f 6675  e_id=f'lambda_fu
-00001690: 6e63 7469 6f6e 3a7b 636f 6e73 756d 6572  nction:{consumer
-000016a0: 5f66 756e 635f 6172 6e7d 2729 0a20 2020  _func_arn}').   
-000016b0: 206d 6364 2e61 6464 5f6c 696e 6b28 7372   mcd.add_link(sr
-000016c0: 635f 6e6f 6465 5f69 643d 6627 6c61 6d62  c_node_id=f'lamb
-000016d0: 6461 5f66 756e 6374 696f 6e3a 7b63 6f6e  da_function:{con
-000016e0: 7375 6d65 725f 6675 6e63 5f61 726e 7d27  sumer_func_arn}'
-000016f0: 2c20 6473 745f 6e6f 6465 5f69 643d 6627  , dst_node_id=f'
-00001700: 6479 6e61 6d6f 3a7b 6479 6e61 6d6f 5f61  dynamo:{dynamo_a
-00001710: 726e 7d27 290a 6060 600a 0a2d 2053 6f75  rn}').```..- Sou
-00001720: 7263 6520 5b61 7773 5f73 6572 7669 6365  rce [aws_service
-00001730: 5f65 6e64 5f32 5f65 6e64 5d28 6874 7470  _end_2_end](http
-00001740: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f74  s://github.com/t
-00001750: 7379 7075 6b2f 6d75 6c74 6963 6c6f 7564  sypuk/multicloud
-00001760: 2d64 6961 6772 616d 732f 626c 6f62 2f6d  -diagrams/blob/m
-00001770: 6169 6e2f 7361 6d70 6c65 732f 7361 6d70  ain/samples/samp
-00001780: 6c65 732f 6177 735f 7365 7276 6963 655f  les/aws_service_
-00001790: 656e 645f 325f 656e 642e 7079 290a 2d20  end_2_end.py).- 
-000017a0: 4f75 7470 7574 2063 6f6d 7069 6c65 6420  Output compiled 
-000017b0: 5b6f 7574 7075 742e 7072 6f64 2e65 6e64  [output.prod.end
-000017c0: 3265 6e64 2e64 7261 7769 6f5d 2868 7474  2end.drawio](htt
-000017d0: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
-000017e0: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f74  sercontent.com/t
-000017f0: 7379 7075 6b2f 6d75 6c74 6963 6c6f 7564  sypuk/multicloud
-00001800: 2d64 6961 6772 616d 732f 6d61 696e 2f73  -diagrams/main/s
-00001810: 616d 706c 6573 2f6f 7574 7075 742f 6f75  amples/output/ou
-00001820: 7470 7574 2e70 726f 642e 656e 6432 656e  tput.prod.end2en
-00001830: 642e 6472 6177 696f 290a 0a21 5b6f 7574  d.drawio)..![out
-00001840: 7075 742e 7072 6f64 2e69 616d 2d72 6f6c  put.prod.iam-rol
-00001850: 6573 2e70 6e67 5d28 6874 7470 733a 2f2f  es.png](https://
-00001860: 6769 7468 7562 2e63 6f6d 2f74 7379 7075  github.com/tsypu
-00001870: 6b2f 6d75 6c74 6963 6c6f 7564 2d64 6961  k/multicloud-dia
-00001880: 6772 616d 732f 626c 6f62 2f6d 6169 6e2f  grams/blob/main/
-00001890: 7361 6d70 6c65 732f 6f75 7470 7574 2f70  samples/output/p
-000018a0: 6e67 2f6f 7574 7075 742e 7072 6f64 2e65  ng/output.prod.e
-000018b0: 6e64 3265 6e64 2e70 6e67 3f72 6177 3d54  nd2end.png?raw=T
-000018c0: 7275 6529 0a0a 0a23 2323 2320 332e 2047  rue)...#### 3. G
-000018d0: 656e 6572 6174 696e 6720 4469 6167 7261  enerating Diagra
-000018e0: 6d20 6672 6f6d 2059 414d 4c20 736f 7572  m from YAML sour
-000018f0: 6365 0a0a 6060 6079 616d 6c0a 7665 7274  ce..```yaml.vert
-00001900: 6963 6573 3a0a 2020 2d20 6e61 6d65 3a20  ices:.  - name: 
-00001910: 7072 6f64 2d6c 616d 6264 612d 6e61 6d65  prod-lambda-name
-00001920: 0a20 2020 2074 7970 653a 206c 616d 6264  .    type: lambd
-00001930: 615f 6675 6e63 7469 6f6e 0a20 2020 2061  a_function.    a
-00001940: 726e 3a20 6172 6e3a 6177 733a 6c61 6d62  rn: arn:aws:lamb
-00001950: 6461 3a65 752d 7765 7374 2d31 3a31 3233  da:eu-west-1:123
-00001960: 3435 3637 3839 3a66 756e 6374 696f 6e3a  456789:function:
-00001970: 7072 6f64 2d6c 616d 6264 612d 6e61 6d65  prod-lambda-name
-00001980: 0a20 202d 206e 616d 653a 2072 6f6c 652d  .  - name: role-
-00001990: 6c61 6d62 6461 2d6e 616d 650a 2020 2020  lambda-name.    
-000019a0: 7479 7065 3a20 6961 6d5f 726f 6c65 0a20  type: iam_role. 
-000019b0: 2020 2061 726e 3a20 6172 6e3a 6177 733a     arn: arn:aws:
-000019c0: 6961 6d3a 3a31 3233 3435 3637 3839 3a72  iam::123456789:r
-000019d0: 6f6c 652f 7072 6f64 2d6c 616d 6264 612d  ole/prod-lambda-
-000019e0: 6e61 6d65 0a20 202d 206e 616d 653a 2070  name.  - name: p
-000019f0: 726f 642d 636c 6f75 6477 6174 6368 2d70  rod-cloudwatch-p
-00001a00: 6f6c 6963 790a 2020 2020 6963 6f6e 3a20  olicy.    icon: 
-00001a10: 6272 6f6b 6572 0a20 2020 2074 7970 653a  broker.    type:
-00001a20: 2069 616d 5f70 6f6c 6963 790a 2020 2020   iam_policy.    
-00001a30: 6172 6e3a 2061 726e 3a61 7773 3a69 616d  arn: arn:aws:iam
-00001a40: 3a3a 3132 3334 3536 3738 393a 706f 6c69  ::123456789:poli
-00001a50: 6379 2f70 726f 642d 636c 6f75 6477 6174  cy/prod-cloudwat
-00001a60: 6368 2d70 6f6c 6963 790a 2020 2d20 6e61  ch-policy.  - na
-00001a70: 6d65 3a20 7072 6f64 2d73 332d 706f 6c69  me: prod-s3-poli
-00001a80: 6379 0a20 2020 2074 7970 653a 2069 616d  cy.    type: iam
-00001a90: 5f70 6f6c 6963 790a 2020 2020 6172 6e3a  _policy.    arn:
-00001aa0: 2061 726e 3a61 7773 3a69 616d 3a3a 3132   arn:aws:iam::12
-00001ab0: 3334 3536 3738 393a 706f 6c69 6379 2f70  3456789:policy/p
-00001ac0: 726f 642d 7333 2d70 6f6c 6963 790a 2020  rod-s3-policy.  
-00001ad0: 2d20 6e61 6d65 3a20 7072 6f64 2d64 796e  - name: prod-dyn
-00001ae0: 616d 6f64 622d 706f 6c69 6379 0a20 2020  amodb-policy.   
-00001af0: 2074 7970 653a 2069 616d 5f70 6f6c 6963   type: iam_polic
-00001b00: 790a 2020 2020 6172 6e3a 2061 726e 3a61  y.    arn: arn:a
-00001b10: 7773 3a69 616d 3a3a 3132 3334 3536 3738  ws:iam::12345678
-00001b20: 393a 706f 6c69 6379 2f70 726f 642d 6479  9:policy/prod-dy
-00001b30: 6e61 6d6f 2d70 6f6c 6963 790a 6564 6765  namo-policy.edge
-00001b40: 733a 0a23 2020 3173 7420 6170 7072 6f61  s:.#  1st approa
-00001b50: 6368 2073 7263 2f64 7374 2061 7265 206c  ch src/dst are l
-00001b60: 696e 6b65 6420 746f 2079 616d 6c20 7665  inked to yaml ve
-00001b70: 7274 6963 6573 2062 7920 6e61 6d65 0a20  rtices by name. 
-00001b80: 202d 207b 2073 7263 3a20 7072 6f64 2d6c   - { src: prod-l
-00001b90: 616d 6264 612d 6e61 6d65 2c20 6473 743a  ambda-name, dst:
-00001ba0: 2072 6f6c 652d 6c61 6d62 6461 2d6e 616d   role-lambda-nam
-00001bb0: 652c 206c 6162 656c 3a20 4861 7352 6f6c  e, label: HasRol
-00001bc0: 652c 206c 696e 6b5f 7479 7065 3a20 6e6f  e, link_type: no
-00001bd0: 6e65 207d 0a20 202d 207b 2073 7263 3a20  ne }.  - { src: 
-00001be0: 726f 6c65 2d6c 616d 6264 612d 6e61 6d65  role-lambda-name
-00001bf0: 2c20 6473 743a 2070 726f 642d 636c 6f75  , dst: prod-clou
-00001c00: 6477 6174 6368 2d70 6f6c 6963 792c 206c  dwatch-policy, l
-00001c10: 6162 656c 3a20 416c 6c6f 7720 436c 6f75  abel: Allow Clou
-00001c20: 6457 6174 6368 206c 6f67 732c 206c 696e  dWatch logs, lin
-00001c30: 6b5f 7479 7065 3a20 6e6f 6e65 207d 0a23  k_type: none }.#
-00001c40: 2020 326e 6420 6170 7072 6f61 6368 2073    2nd approach s
-00001c50: 7263 2f64 7374 2061 7265 206c 696e 6b65  rc/dst are linke
-00001c60: 6420 6279 2041 524e 2028 4152 4e20 6361  d by ARN (ARN ca
-00001c70: 6e20 6265 2070 7265 7365 6e74 2069 6e20  n be present in 
-00001c80: 7361 6d65 2079 616d 6c2c 206f 7220 6c6f  same yaml, or lo
-00001c90: 6164 6564 2070 726f 6772 616d 6d61 7469  aded programmati
-00001ca0: 6361 6c6c 7929 0a20 202d 207b 0a20 2020  cally).  - {.   
-00001cb0: 2073 7263 5f61 726e 3a20 6172 6e3a 6177   src_arn: arn:aw
-00001cc0: 733a 6961 6d3a 3a31 3233 3435 3637 3839  s:iam::123456789
-00001cd0: 3a72 6f6c 652f 7072 6f64 2d6c 616d 6264  :role/prod-lambd
-00001ce0: 612d 6e61 6d65 2c0a 2020 2020 7372 635f  a-name,.    src_
-00001cf0: 7479 7065 3a20 6961 6d5f 726f 6c65 2c0a  type: iam_role,.
-00001d00: 2020 2020 6473 745f 6172 6e3a 2061 726e      dst_arn: arn
-00001d10: 3a61 7773 3a69 616d 3a3a 3132 3334 3536  :aws:iam::123456
-00001d20: 3738 393a 706f 6c69 6379 2f70 726f 642d  789:policy/prod-
-00001d30: 7333 2d70 6f6c 6963 792c 0a20 2020 2064  s3-policy,.    d
-00001d40: 7374 5f74 7970 653a 2069 616d 5f70 6f6c  st_type: iam_pol
-00001d50: 6963 792c 0a20 2020 206c 6162 656c 3a20  icy,.    label: 
-00001d60: 416c 6c6f 7720 5333 2061 6363 6573 732c  Allow S3 access,
-00001d70: 0a20 2020 206c 696e 6b5f 7479 7065 3a20  .    link_type: 
-00001d80: 6e6f 6e65 207d 0a23 2033 7264 2061 7070  none }.# 3rd app
-00001d90: 726f 6163 6820 6973 206d 6978 6564 206f  roach is mixed o
-00001da0: 6620 3173 7420 616e 6420 326e 640a 2020  f 1st and 2nd.  
-00001db0: 2d20 7b0a 2020 2020 7372 635f 6172 6e3a  - {.    src_arn:
-00001dc0: 2061 726e 3a61 7773 3a69 616d 3a3a 3132   arn:aws:iam::12
-00001dd0: 3334 3536 3738 393a 726f 6c65 2f70 726f  3456789:role/pro
-00001de0: 642d 6c61 6d62 6461 2d6e 616d 652c 0a20  d-lambda-name,. 
-00001df0: 2020 2073 7263 5f74 7970 653a 2069 616d     src_type: iam
-00001e00: 5f72 6f6c 652c 0a20 2020 2064 7374 3a20  _role,.    dst: 
-00001e10: 7072 6f64 2d64 796e 616d 6f64 622d 706f  prod-dynamodb-po
-00001e20: 6c69 6379 2c0a 2020 2020 6c61 6265 6c3a  licy,.    label:
-00001e30: 2041 6c6c 6f77 2044 796e 616d 6f44 4220   Allow DynamoDB 
-00001e40: 7265 6164 2061 6363 6573 732c 0a20 2020  read access,.   
-00001e50: 206c 696e 6b5f 7479 7065 3a20 6e6f 6e65   link_type: none
-00001e60: 207d 0a60 6060 0a2d 2053 6f75 7263 6520   }.```.- Source 
-00001e70: 5b61 7773 5f69 616d 5f66 726f 6d5f 7961  [aws_iam_from_ya
-00001e80: 6d6c 2e70 795d 2868 7474 7073 3a2f 2f67  ml.py](https://g
-00001e90: 6974 6875 622e 636f 6d2f 7473 7970 756b  ithub.com/tsypuk
-00001ea0: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
-00001eb0: 7261 6d73 2f62 6c6f 622f 6d61 696e 2f73  rams/blob/main/s
-00001ec0: 616d 706c 6573 2f73 616d 706c 6573 2f61  amples/samples/a
-00001ed0: 7773 5f69 616d 5f66 726f 6d5f 7961 6d6c  ws_iam_from_yaml
-00001ee0: 2e70 7929 0a2d 204f 7574 7075 7420 636f  .py).- Output co
-00001ef0: 6d70 696c 6564 205b 6f75 7470 7574 2e70  mpiled [output.p
-00001f00: 726f 642e 6961 6d2d 726f 6c65 732d 6672  rod.iam-roles-fr
-00001f10: 6f6d 2d79 616d 6c2e 6472 6177 696f 5d28  om-yaml.drawio](
-00001f20: 6874 7470 733a 2f2f 7261 772e 6769 7468  https://raw.gith
-00001f30: 7562 7573 6572 636f 6e74 656e 742e 636f  ubusercontent.co
-00001f40: 6d2f 7473 7970 756b 2f6d 756c 7469 636c  m/tsypuk/multicl
-00001f50: 6f75 642d 6469 6167 7261 6d73 2f6d 6169  oud-diagrams/mai
-00001f60: 6e2f 7361 6d70 6c65 732f 6f75 7470 7574  n/samples/output
-00001f70: 2f6f 7574 7075 742e 7072 6f64 2e69 616d  /output.prod.iam
-00001f80: 2d72 6f6c 6573 2d66 726f 6d2d 7961 6d6c  -roles-from-yaml
-00001f90: 2e64 7261 7769 6f29 0a0a 2d20 215b 6f75  .drawio)..- ![ou
-00001fa0: 7470 7574 2e70 726f 642e 6961 6d2d 726f  tput.prod.iam-ro
-00001fb0: 6c65 732e 706e 675d 2868 7474 7073 3a2f  les.png](https:/
-00001fc0: 2f67 6974 6875 622e 636f 6d2f 7473 7970  /github.com/tsyp
-00001fd0: 756b 2f6d 756c 7469 636c 6f75 642d 6469  uk/multicloud-di
-00001fe0: 6167 7261 6d73 2f62 6c6f 622f 6d61 696e  agrams/blob/main
-00001ff0: 2f73 616d 706c 6573 2f6f 7574 7075 742f  /samples/output/
-00002000: 706e 672f 6f75 7470 7574 2e70 726f 642e  png/output.prod.
-00002010: 6961 6d2d 726f 6c65 732d 6672 6f6d 2d79  iam-roles-from-y
-00002020: 616d 6c2e 706e 673f 7261 773d 5472 7565  aml.png?raw=True
-00002030: 290a 0a60 6060 7368 656c 6c0a 706f 6574  )..```shell.poet
-00002040: 7279 2062 7569 6c64 0a65 7870 6f72 7420  ry build.export 
-00002050: 5059 5049 5f55 5345 524e 414d 453d 0a65  PYPI_USERNAME=.e
-00002060: 7870 6f72 7420 5059 5049 5f50 4153 5357  xport PYPI_PASSW
-00002070: 4f52 443d 0a70 6f65 7472 7920 7075 626c  ORD=.poetry publ
-00002080: 6973 6820 2d2d 6275 696c 6420 2d2d 7573  ish --build --us
-00002090: 6572 6e61 6d65 2024 5059 5049 5f55 5345  ername $PYPI_USE
-000020a0: 524e 414d 4520 2d2d 7061 7373 776f 7264  RNAME --password
-000020b0: 2024 5059 5049 5f50 4153 5357 4f52 440a   $PYPI_PASSWORD.
-000020c0: 0a63 6420 7361 6d70 6c65 732f 7361 6d70  .cd samples/samp
-000020d0: 6c65 730a 706f 6574 7279 2069 6e73 7461  les.poetry insta
-000020e0: 6c6c 0a70 6f65 7472 7920 7275 6e20 7079  ll.poetry run py
-000020f0: 7468 6f6e 2061 7773 5f69 616d 5f72 6f6c  thon aws_iam_rol
-00002100: 6573 5f66 726f 6d5f 636f 6465 5f77 6974  es_from_code_wit
-00002110: 685f 656e 756d 2e70 790a 6060 600a 0a23  h_enum.py.```..#
-00002120: 2323 2046 5949 3a0a 0a4f 7065 6e53 6f75  ## FYI:..OpenSou
-00002130: 7263 6520 4775 6964 652c 205b 486f 7720  rce Guide, [How 
-00002140: 746f 2063 6f6e 7472 6962 7574 6520 746f  to contribute to
-00002150: 206f 7065 6e73 6f75 7263 655d 2868 7474   opensource](htt
-00002160: 7073 3a2f 2f6f 7065 6e73 6f75 7263 652e  ps://opensource.
-00002170: 6775 6964 652f 29                        guide/)
+00000000: 2320 4d75 6c74 6943 6c6f 7564 2044 6961  # MultiCloud Dia
+00000010: 6772 616d 730a 0a5b 215b 6c69 6365 6e73  grams..[![licens
+00000020: 655d 2868 7474 7073 3a2f 2f69 6d67 2e73  e](https://img.s
+00000030: 6869 656c 6473 2e69 6f2f 6261 6467 652f  hields.io/badge/
+00000040: 6c69 6365 6e73 652d 4d49 542d 626c 7565  license-MIT-blue
+00000050: 2e73 7667 295d 282f 4c49 4345 4e53 4529  .svg)](/LICENSE)
+00000060: 0a5b 215b 5079 5049 2076 6572 7369 6f6e  .[![PyPI version
+00000070: 5d28 6874 7470 733a 2f2f 6261 6467 652e  ](https://badge.
+00000080: 6675 7279 2e69 6f2f 7079 2f6d 756c 7469  fury.io/py/multi
+00000090: 636c 6f75 642d 6469 6167 7261 6d73 2e73  cloud-diagrams.s
+000000a0: 7667 295d 2868 7474 7073 3a2f 2f62 6164  vg)](https://bad
+000000b0: 6765 2e66 7572 792e 696f 2f70 792f 6d75  ge.fury.io/py/mu
+000000c0: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
+000000d0: 7329 0a21 5b70 7974 686f 6e20 7665 7273  s).![python vers
+000000e0: 696f 6e5d 2868 7474 7073 3a2f 2f69 6d67  ion](https://img
+000000f0: 2e73 6869 656c 6473 2e69 6f2f 6261 6467  .shields.io/badg
+00000100: 652f 7079 7468 6f6e 2d25 3345 2533 4425  e/python-%3E%3D%
+00000110: 3230 332e 3130 2d62 6c75 653f 6c6f 676f  203.10-blue?logo
+00000120: 3d70 7974 686f 6e29 0a0a 4765 6e65 7261  =python)..Genera
+00000130: 7465 2061 6e64 2072 656e 6465 7220 4469  te and render Di
+00000140: 6167 7261 6d73 2d41 732d 612d 436f 6465  agrams-As-a-Code
+00000150: 2028 4441 4729 2069 6e20 706f 7075 6c61   (DAG) in popula
+00000160: 7220 6060 6472 6177 696f 6060 2066 6f72  r ``drawio`` for
+00000170: 6d61 7420 666f 7220 6d75 6c74 6970 6c65  mat for multiple
+00000180: 2043 6c6f 7564 2070 726f 7669 6465 7273   Cloud providers
+00000190: 2e0a 0a3c 6120 6872 6566 3d22 6874 7470  ...<a href="http
+000001a0: 733a 2f2f 7777 772e 6275 796d 6561 636f  s://www.buymeaco
+000001b0: 6666 6565 2e63 6f6d 2f74 7379 7075 6b22  ffee.com/tsypuk"
+000001c0: 2074 6172 6765 743d 225f 626c 616e 6b22   target="_blank"
+000001d0: 3e3c 696d 6720 7372 633d 2268 7474 7073  ><img src="https
+000001e0: 3a2f 2f77 7777 2e62 7579 6d65 6163 6f66  ://www.buymeacof
+000001f0: 6665 652e 636f 6d2f 6173 7365 7473 2f69  fee.com/assets/i
+00000200: 6d67 2f63 7573 746f 6d5f 696d 6167 6573  mg/custom_images
+00000210: 2f6f 7261 6e67 655f 696d 672e 706e 6722  /orange_img.png"
+00000220: 2061 6c74 3d22 4275 7920 4d65 2041 2043   alt="Buy Me A C
+00000230: 6f66 6665 6522 2073 7479 6c65 3d22 6865  offee" style="he
+00000240: 6967 6874 3a20 3431 7078 2021 696d 706f  ight: 41px !impo
+00000250: 7274 616e 743b 7769 6474 683a 2031 3734  rtant;width: 174
+00000260: 7078 2021 696d 706f 7274 616e 743b 626f  px !important;bo
+00000270: 782d 7368 6164 6f77 3a20 3070 7820 3370  x-shadow: 0px 3p
+00000280: 7820 3270 7820 3070 7820 7267 6261 2831  x 2px 0px rgba(1
+00000290: 3930 2c20 3139 302c 2031 3930 2c20 302e  90, 190, 190, 0.
+000002a0: 3529 2021 696d 706f 7274 616e 743b 2220  5) !important;" 
+000002b0: 3e3c 2f61 3e0a 0a0a 2d20 796f 7520 6361  ></a>...- you ca
+000002c0: 6e20 7573 6520 6974 2062 7920 6465 6669  n use it by defi
+000002d0: 6e69 6e67 2060 6044 6961 6772 616d 7320  ning ``Diagrams 
+000002e0: 6173 2061 2043 6f64 6560 602c 2063 6f6d  as a Code``, com
+000002f0: 7069 6c65 2074 6f20 6472 6177 696f 2076  pile to drawio v
+00000300: 6563 746f 7220 666f 726d 6174 2c20 6564  ector format, ed
+00000310: 6974 2076 6563 746f 7220 6472 6177 696f  it vector drawio
+00000320: 2072 6570 7265 7365 6e74 6174 696f 6e20   representation 
+00000330: 2861 6c69 676e 2063 6f6d 706f 6e65 6e74  (align component
+00000340: 7320 6c6f 6361 7469 6f6e 292e 0a2d 206f  s location)..- o
+00000350: 7468 6572 206f 7074 696f 6e20 6973 2074  ther option is t
+00000360: 6f20 7175 6572 7920 696e 6672 6173 7472  o query infrastr
+00000370: 7563 7475 7265 2065 6c65 6d65 6e74 7320  ucture elements 
+00000380: 7769 7468 2070 6f70 756c 6172 206c 6962  with popular lib
+00000390: 7261 7269 6573 2c20 6c69 6b65 2061 7773  raries, like aws
+000003a0: 2062 6f74 6f2c 2070 7265 7072 6f63 6573   boto, preproces
+000003b0: 7320 6465 7369 7265 6420 656c 656d 656e  s desired elemen
+000003c0: 7473 2061 6e64 2063 6f6d 7069 6c65 2074  ts and compile t
+000003d0: 6865 6d20 696e 746f 2064 7261 7769 6f20  hem into drawio 
+000003e0: 7573 696e 6720 6060 6d75 6c74 6963 6c6f  using ``multiclo
+000003f0: 7564 2d64 6961 6772 616d 7360 602e 0a0a  ud-diagrams``...
+00000400: 2d20 2a2a 536f 7572 6365 2063 6f64 653a  - **Source code:
+00000410: 2a2a 2068 7474 7073 3a2f 2f67 6974 6875  ** https://githu
+00000420: 622e 636f 6d2f 7473 7970 756b 2f6d 756c  b.com/tsypuk/mul
+00000430: 7469 636c 6f75 642d 6469 6167 7261 6d73  ticloud-diagrams
+00000440: 0a2d 202a 2a50 7950 4920 6d75 6c74 6963  .- **PyPI multic
+00000450: 6c6f 7564 2d64 6961 6772 616d 733a 2a2a  loud-diagrams:**
+00000460: 2068 7474 7073 3a2f 2f70 7970 692e 6f72   https://pypi.or
+00000470: 672f 7072 6f6a 6563 742f 6d75 6c74 6963  g/project/multic
+00000480: 6c6f 7564 2d64 6961 6772 616d 732f 0a2d  loud-diagrams/.-
+00000490: 202a 2a53 706f 6e73 6f72 2070 726f 6a65   **Sponsor proje
+000004a0: 6374 3a2a 2a20 6874 7470 733a 2f2f 7061  ct:** https://pa
+000004b0: 7472 656f 6e2e 636f 6d2f 7473 7970 756b  treon.com/tsypuk
+000004c0: 0a2d 202a 2a56 6965 7720 6368 616e 6765  .- **View change
+000004d0: 6c6f 673a 2a2a 2068 7474 7073 3a2f 2f67  log:** https://g
+000004e0: 6974 6875 622e 636f 6d2f 7473 7970 756b  ithub.com/tsypuk
+000004f0: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
+00000500: 7261 6d73 2f62 6c6f 622f 6d61 696e 2f43  rams/blob/main/C
+00000510: 4841 4e47 454c 4f47 2e4d 440a 2d20 2a2a  HANGELOG.MD.- **
+00000520: 4275 6720 7265 706f 7274 733a 2a2a 2068  Bug reports:** h
+00000530: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00000540: 6d2f 7473 7970 756b 2f6d 756c 7469 636c  m/tsypuk/multicl
+00000550: 6f75 642d 6469 6167 7261 6d73 2f69 7373  oud-diagrams/iss
+00000560: 7565 730a 2d20 2a2a 5361 6d70 6c65 7320  ues.- **Samples 
+00000570: 616e 6420 6578 616d 706c 6573 3a2a 2a20  and examples:** 
+00000580: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+00000590: 6f6d 2f74 7379 7075 6b2f 6d75 6c74 6963  om/tsypuk/multic
+000005a0: 6c6f 7564 2d64 6961 6772 616d 732f 7472  loud-diagrams/tr
+000005b0: 6565 2f6d 6169 6e2f 7361 6d70 6c65 732f  ee/main/samples/
+000005c0: 7361 6d70 6c65 730a 0a23 2320 5375 7070  samples..## Supp
+000005d0: 6f72 7465 6420 436c 6f75 6420 5072 6f76  orted Cloud Prov
+000005e0: 6964 6573 0a0a 215b 6177 7320 7072 6f76  ides..![aws prov
+000005f0: 6964 6572 5d28 6874 7470 733a 2f2f 696d  ider](https://im
+00000600: 672e 7368 6965 6c64 732e 696f 2f62 6164  g.shields.io/bad
+00000610: 6765 2f41 5753 2d6f 7261 6e67 653f 6c6f  ge/AWS-orange?lo
+00000620: 676f 3d61 6d61 7a6f 6e2d 6177 7326 636f  go=amazon-aws&co
+00000630: 6c6f 723d 6666 3939 3030 290a 215b 617a  lor=ff9900).![az
+00000640: 7572 6520 7072 6f76 6964 6572 5d28 6874  ure provider](ht
+00000650: 7470 733a 2f2f 696d 672e 7368 6965 6c64  tps://img.shield
+00000660: 732e 696f 2f62 6164 6765 2f41 7a75 7265  s.io/badge/Azure
+00000670: 2d6f 7261 6e67 653f 6c6f 676f 3d6d 6963  -orange?logo=mic
+00000680: 726f 736f 6674 2d61 7a75 7265 2663 6f6c  rosoft-azure&col
+00000690: 6f72 3d30 3038 3964 3629 0a21 5b67 6370  or=0089d6).![gcp
+000006a0: 2070 726f 7669 6465 725d 2868 7474 7073   provider](https
+000006b0: 3a2f 2f69 6d67 2e73 6869 656c 6473 2e69  ://img.shields.i
+000006c0: 6f2f 6261 6467 652f 4743 502d 6f72 616e  o/badge/GCP-oran
+000006d0: 6765 3f6c 6f67 6f3d 676f 6f67 6c65 2d63  ge?logo=google-c
+000006e0: 6c6f 7564 2663 6f6c 6f72 3d34 3238 3566  loud&color=4285f
+000006f0: 3429 0a21 5b6f 6e20 7072 656d 6973 6520  4).![on premise 
+00000700: 7072 6f76 6964 6572 5d28 6874 7470 733a  provider](https:
+00000710: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
+00000720: 2f62 6164 6765 2f4f 6e50 7265 6d69 7365  /badge/OnPremise
+00000730: 2d6f 7261 6e67 653f 636f 6c6f 723d 3566  -orange?color=5f
+00000740: 3837 6266 290a 0a23 2323 2046 6561 7475  87bf)..### Featu
+00000750: 7265 733a 0a2d 2061 6c6c 6f77 7320 746f  res:.- allows to
+00000760: 2067 656e 6572 6174 6520 6472 6177 696f   generate drawio
+00000770: 2064 6961 6772 616d 2077 6974 6820 7072   diagram with pr
+00000780: 6564 6566 696e 6564 2073 7479 6c65 7320  edefined styles 
+00000790: 666f 7220 706f 7075 6c61 7220 6177 7320  for popular aws 
+000007a0: 7365 7276 6963 6573 2c20 7375 7070 6f72  services, suppor
+000007b0: 7420 6772 6170 682d 6261 7365 6420 636f  t graph-based co
+000007c0: 6e6e 6563 7469 6f6e 2077 6974 6820 6e61  nnection with na
+000007d0: 6d65 6420 6564 6765 730a 2d20 7375 7070  med edges.- supp
+000007e0: 6f72 7473 2073 696e 676c 6520 616e 6420  orts single and 
+000007f0: 6261 7463 6820 656c 656d 656e 7473 2061  batch elements a
+00000800: 7070 656e 6420 746f 2064 6961 6772 616d  ppend to diagram
+00000810: 0a2d 2064 7570 6c69 6361 7465 7320 6465  .- duplicates de
+00000820: 7465 6374 696f 6e20 746f 2070 7265 7665  tection to preve
+00000830: 6e74 2062 616c 6c20 6f66 206d 7564 2069  nt ball of mud i
+00000840: 6e20 6669 6c65 2066 6f72 6d61 7420 616e  n file format an
+00000850: 6420 6469 6167 7261 6d0a 2d20 7665 7269  d diagram.- veri
+00000860: 6669 6361 7469 6f6e 2074 6861 7420 626f  fication that bo
+00000870: 7468 2076 6572 7469 6365 7320 7072 6573  th vertices pres
+00000880: 656e 7420 6f6e 2064 6961 6772 616d 2077  ent on diagram w
+00000890: 6865 6e20 6164 6469 6e67 2065 6467 6520  hen adding edge 
+000008a0: 636f 6e6e 6563 7469 6f6e 2062 6574 7765  connection betwe
+000008b0: 656e 2074 6865 6d20 0a2d 2069 6620 7468  en them .- if th
+000008c0: 6520 6e6f 6465 2069 7320 6e6f 7420 7072  e node is not pr
+000008d0: 6573 656e 742c 2066 616c 6c62 6163 6b20  esent, fallback 
+000008e0: 746f 2064 6566 6175 6c74 2069 636f 6e20  to default icon 
+000008f0: 7768 656e 2072 656e 6465 7269 6e67 0a2d  when rendering.-
+00000900: 2072 6561 6420 7072 6576 696f 7573 2076   read previous v
+00000910: 6572 7369 6f6e 206f 6620 6472 6177 696f  ersion of drawio
+00000920: 2066 696c 6520 616e 6420 7265 7573 6573   file and reuses
+00000930: 2065 7869 7374 696e 6720 7665 7274 6963   existing vertic
+00000940: 6573 2063 6f6f 7264 696e 6174 6573 2077  es coordinates w
+00000950: 6865 6e20 6765 6e65 7261 7469 6e67 2061  hen generating a
+00000960: 206e 6577 2076 6572 7369 6f6e 0a2d 2067   new version.- g
+00000970: 656e 6572 6174 6520 6469 6167 7261 6d20  enerate diagram 
+00000980: 6672 6f6d 2060 6059 414d 4c60 6020 6465  from ``YAML`` de
+00000990: 6669 6e69 7469 6f6e 0a2d 206d 6978 2061  finition.- mix a
+000009a0: 6e64 2061 7567 6d65 6e74 2044 6961 6772  nd augment Diagr
+000009b0: 616d 2d61 732d 636f 6465 2c20 7265 616c  am-as-code, real
+000009c0: 2069 6e66 7261 2063 7261 776c 6572 2c20   infra crawler, 
+000009d0: 7374 6174 6963 2079 616d 6c2d 6261 7365  static yaml-base
+000009e0: 6420 636f 6e74 656e 7420 746f 2064 6961  d content to dia
+000009f0: 6772 616d 0a0a 2323 2320 5375 7070 6f72  gram..### Suppor
+00000a00: 7465 6420 4157 5320 7365 7276 6963 6573  ted AWS services
+00000a10: 3a0a 0a2d 206c 616d 6264 615f 6675 6e63  :..- lambda_func
+00000a20: 7469 6f6e 0a2d 2073 7173 0a2d 2073 6e73  tion.- sqs.- sns
+00000a30: 0a2d 2069 616d 5f72 6f6c 652f 6961 6d5f  .- iam_role/iam_
+00000a40: 706f 6c69 6379 2f69 616d 5f70 6572 6d69  policy/iam_permi
+00000a50: 7373 696f 6e0a 2d20 6479 6e61 6d6f 2f64  ssion.- dynamo/d
+00000a60: 796e 616d 6f5f 7374 7265 616d 0a2d 2061  ynamo_stream.- a
+00000a70: 7069 5f67 770a 2d20 7333 0a2d 206b 6d73  pi_gw.- s3.- kms
+00000a80: 0a2d 2073 736d 0a0a 2323 2320 4c69 6272  .- ssm..### Libr
+00000a90: 6172 7920 6361 6e20 6265 2075 7365 6420  ary can be used 
+00000aa0: 7769 7468 2064 6966 6665 7265 6e74 2061  with different a
+00000ab0: 7070 726f 6163 6865 7320 616e 6420 6576  pproaches and ev
+00000ac0: 656e 206d 6978 2061 6c6c 206f 6620 7468  en mix all of th
+00000ad0: 656d 2e20 5361 6d70 6c65 7320 616e 6420  em. Samples and 
+00000ae0: 7573 6167 653a 0a0a 2323 2323 2031 2e20  usage:..#### 1. 
+00000af0: 4765 6e65 7261 7469 6e67 2041 5753 2044  Generating AWS D
+00000b00: 796e 616d 6f44 4220 4465 7461 696c 7320  ynamoDB Details 
+00000b10: 6472 6177 696f 2064 6961 6772 616d 2062  drawio diagram b
+00000b20: 6173 6564 206f 6e20 6c69 6272 6172 792c  ased on library,
+00000b30: 2068 7474 702c 2061 7773 636c 692c 2065   http, awscli, e
+00000b40: 7463 2e20 4578 616d 706c 6520 6261 7365  tc. Example base
+00000b50: 6420 6f6e 2062 6f74 6f33 2044 796e 616d  d on boto3 Dynam
+00000b60: 6f44 4220 7265 7370 6f6e 7365 0a0a 6060  oDB response..``
+00000b70: 606a 736f 6e0a 7b0a 2020 2020 2020 2020  `json.{.        
+00000b80: 2741 7474 7269 6275 7465 4465 6669 6e69  'AttributeDefini
+00000b90: 7469 6f6e 7327 3a20 5b0a 2020 2020 2020  tions': [.      
+00000ba0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00000bb0: 2020 2020 2020 2020 2741 7474 7269 6275          'Attribu
+00000bc0: 7465 4e61 6d65 273a 2027 6669 7273 7427  teName': 'first'
+00000bd0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000be0: 2020 2741 7474 7269 6275 7465 5479 7065    'AttributeType
+00000bf0: 273a 2027 5327 0a20 2020 2020 2020 2020  ': 'S'.         
+00000c00: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+00000c10: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
+00000c20: 2020 2020 2741 7474 7269 6275 7465 4e61      'AttributeNa
+00000c30: 6d65 273a 2027 7365 636f 6e64 272c 0a20  me': 'second',. 
+00000c40: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00000c50: 4174 7472 6962 7574 6554 7970 6527 3a20  AttributeType': 
+00000c60: 274e 270a 2020 2020 2020 2020 2020 2020  'N'.            
+00000c70: 7d2c 0a20 2020 2020 2020 2020 2020 207b  },.            {
+00000c80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000c90: 2027 4174 7472 6962 7574 654e 616d 6527   'AttributeName'
+00000ca0: 3a20 2774 6869 7264 272c 0a20 2020 2020  : 'third',.     
+00000cb0: 2020 2020 2020 2020 2020 2027 4174 7472             'Attr
+00000cc0: 6962 7574 6554 7970 6527 3a20 2742 270a  ibuteType': 'B'.
+00000cd0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00000ce0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+00000cf0: 2020 2754 6162 6c65 4e61 6d65 273a 2027    'TableName': '
+00000d00: 7072 6f64 2d64 796e 616d 6f2d 7461 626c  prod-dynamo-tabl
+00000d10: 6527 2c0a 2020 2020 2020 2020 274b 6579  e',.        'Key
+00000d20: 5363 6865 6d61 273a 205b 0a20 2020 2020  Schema': [.     
+00000d30: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00000d40: 2020 2020 2020 2020 2027 4174 7472 6962           'Attrib
+00000d50: 7574 654e 616d 6527 3a20 2773 7472 696e  uteName': 'strin
+00000d60: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
+00000d70: 2020 2020 274b 6579 5479 7065 273a 2027      'KeyType': '
+00000d80: 4841 5348 270a 2020 2020 2020 2020 2020  HASH'.          
+00000d90: 2020 7d2c 0a20 2020 2020 2020 205d 2c0a    },.        ],.
+00000da0: 2020 2020 2020 2020 2754 6162 6c65 5369          'TableSi
+00000db0: 7a65 4279 7465 7327 3a20 3132 332c 0a20  zeBytes': 123,. 
+00000dc0: 2020 2020 2020 2027 4974 656d 436f 756e         'ItemCoun
+00000dd0: 7427 3a20 3132 332c 0a20 2020 2020 2020  t': 123,.       
+00000de0: 2027 5461 626c 6541 726e 273a 2027 6172   'TableArn': 'ar
+00000df0: 6e3a 6177 733a 6479 6e61 6d6f 6462 3a65  n:aws:dynamodb:e
+00000e00: 752d 7765 7374 2d31 3a31 3233 3435 3637  u-west-1:1234567
+00000e10: 3839 3a74 6162 6c65 2f70 726f 642d 6479  89:table/prod-dy
+00000e20: 6e61 6d6f 2d74 6162 6c65 272c 0a20 2020  namo-table',.   
+00000e30: 2020 2020 2027 4c6f 6361 6c53 6563 6f6e       'LocalSecon
+00000e40: 6461 7279 496e 6465 7865 7327 3a20 5b7b  daryIndexes': [{
+00000e50: 0a2e 2e2e 2020 2020 2020 200a 2e2e 2e0a  ....       .....
+00000e60: 2e2e 2e0a 2020 2020 2020 2020 2020 0a20  ....          . 
+00000e70: 2020 2020 2020 2020 2027 5353 4544 6573           'SSEDes
+00000e80: 6372 6970 7469 6f6e 273a 207b 0a20 2020  cription': {.   
+00000e90: 2020 2020 2020 2020 2027 5374 6174 7573           'Status
+00000ea0: 273a 2027 454e 4142 4c45 4427 2c0a 2020  ': 'ENABLED',.  
+00000eb0: 2020 2020 2020 2020 2020 2753 5345 5479            'SSETy
+00000ec0: 7065 273a 2027 4b4d 5327 2c0a 2020 2020  pe': 'KMS',.    
+00000ed0: 2020 2020 2020 2020 274b 4d53 4d61 7374          'KMSMast
+00000ee0: 6572 4b65 7941 726e 273a 2027 7374 7269  erKeyArn': 'stri
+00000ef0: 6e67 272c 0a20 2020 2020 2020 2020 207d  ng',.          }
+00000f00: 2c0a 2020 2020 2020 2020 2020 2744 656c  ,.          'Del
+00000f10: 6574 696f 6e50 726f 7465 6374 696f 6e45  etionProtectionE
+00000f20: 6e61 626c 6564 273a 2054 7275 650a 2020  nabled': True.  
+00000f30: 2020 2020 2020 7d0a 6060 600a 0a2d 2053        }.```..- S
+00000f40: 6f75 7263 6520 5b61 7773 5f64 796e 616d  ource [aws_dynam
+00000f50: 6f5f 626f 746f 335f 7265 7370 6f6e 7365  o_boto3_response
+00000f60: 2e70 795d 2868 7474 7073 3a2f 2f67 6974  .py](https://git
+00000f70: 6875 622e 636f 6d2f 7473 7970 756b 2f6d  hub.com/tsypuk/m
+00000f80: 756c 7469 636c 6f75 642d 6469 6167 7261  ulticloud-diagra
+00000f90: 6d73 2f62 6c6f 622f 6d61 696e 2f73 616d  ms/blob/main/sam
+00000fa0: 706c 6573 2f73 616d 706c 6573 2f61 7773  ples/samples/aws
+00000fb0: 5f64 796e 616d 6f5f 626f 746f 335f 7265  _dynamo_boto3_re
+00000fc0: 7370 6f6e 7365 2e70 7929 0a2d 204f 7574  sponse.py).- Out
+00000fd0: 7075 7420 636f 6d70 696c 6564 205b 6f75  put compiled [ou
+00000fe0: 7470 7574 2e70 726f 642e 6479 6e61 6d6f  tput.prod.dynamo
+00000ff0: 2e64 7261 7769 6f5d 2868 7474 7073 3a2f  .drawio](https:/
+00001000: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+00001010: 6f6e 7465 6e74 2e63 6f6d 2f74 7379 7075  ontent.com/tsypu
+00001020: 6b2f 6d75 6c74 6963 6c6f 7564 2d64 6961  k/multicloud-dia
+00001030: 6772 616d 732f 6d61 696e 2f73 616d 706c  grams/main/sampl
+00001040: 6573 2f6f 7574 7075 742f 6f75 7470 7574  es/output/output
+00001050: 2e70 726f 642e 6479 6e61 6d6f 2e64 7261  .prod.dynamo.dra
+00001060: 7769 6f29 3a0a 0a21 5b6f 7574 7075 742e  wio):..![output.
+00001070: 7072 6f64 2e64 796e 616d 6f2e 706e 675d  prod.dynamo.png]
+00001080: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
+00001090: 636f 6d2f 7473 7970 756b 2f6d 756c 7469  com/tsypuk/multi
+000010a0: 636c 6f75 642d 6469 6167 7261 6d73 2f72  cloud-diagrams/r
+000010b0: 6177 2f6d 6169 6e2f 7361 6d70 6c65 732f  aw/main/samples/
+000010c0: 6f75 7470 7574 2f70 6e67 2f6f 7574 7075  output/png/outpu
+000010d0: 742e 7072 6f64 2e64 796e 616d 6f2e 706e  t.prod.dynamo.pn
+000010e0: 673f 7261 773d 5472 7565 290a 0a23 2323  g?raw=True)..###
+000010f0: 2320 322e 2044 6961 6772 616d 7320 6173  # 2. Diagrams as
+00001100: 2061 2043 6f64 652e 2044 4147 2e20 4765   a Code. DAG. Ge
+00001110: 6e65 7261 7469 6e67 2041 5753 2049 414d  nerating AWS IAM
+00001120: 2047 7261 7068 2066 726f 6d20 7468 6520   Graph from the 
+00001130: 636f 6465 2062 6173 6564 206f 6e20 4441  code based on DA
+00001140: 4720 6465 636c 6172 6174 696f 6e3a 0a0a  G declaration:..
+00001150: 6060 6070 7974 686f 6e0a 2020 2020 7072  ```python.    pr
+00001160: 6f64 7563 6572 5f66 756e 635f 6172 6e20  oducer_func_arn 
+00001170: 3d20 2761 726e 3a61 7773 3a6c 616d 6264  = 'arn:aws:lambd
+00001180: 613a 6575 2d77 6573 742d 313a 3132 3334  a:eu-west-1:1234
+00001190: 3536 3738 393a 6675 6e63 7469 6f6e 3a70  56789:function:p
+000011a0: 726f 6475 6365 722d 6c61 6d62 6461 270a  roducer-lambda'.
+000011b0: 2020 2020 6d65 7461 6461 7461 203d 207b      metadata = {
+000011c0: 0a20 2020 2020 2020 2022 436f 6465 5369  .        "CodeSi
+000011d0: 7a65 223a 2031 3233 342c 0a20 2020 2020  ze": 1234,.     
+000011e0: 2020 2022 4861 6e64 6c65 7222 3a20 226d     "Handler": "m
+000011f0: 6169 6e22 2c0a 2020 2020 2020 2020 224c  ain",.        "L
+00001200: 6179 6572 7322 3a20 302c 0a20 2020 2020  ayers": 0,.     
+00001210: 2020 2022 4d65 6d6f 7279 223a 2031 3238     "Memory": 128
+00001220: 2c0a 2020 2020 2020 2020 2250 6163 6b61  ,.        "Packa
+00001230: 6765 5479 7065 223a 2022 5a69 7022 2c0a  geType": "Zip",.
+00001240: 2020 2020 2020 2020 2252 756e 7469 6d65          "Runtime
+00001250: 223a 2022 676f 312e 7822 2c0a 2020 2020  ": "go1.x",.    
+00001260: 2020 2020 2254 696d 656f 7574 223a 2033      "Timeout": 3
+00001270: 302c 0a20 2020 2020 2020 2022 5472 6163  0,.        "Trac
+00001280: 696e 6743 6f6e 6669 6722 3a20 227b 274d  ingConfig": "{'M
+00001290: 6f64 6527 3a20 2741 6374 6976 6527 7d22  ode': 'Active'}"
+000012a0: 2c0a 2020 2020 2020 2020 2256 6572 7369  ,.        "Versi
+000012b0: 6f6e 223a 2022 244c 4154 4553 5422 0a20  on": "$LATEST". 
+000012c0: 2020 207d 0a20 2020 206d 6364 2e61 6464     }.    mcd.add
+000012d0: 5f76 6572 7465 7828 6964 3d70 726f 6475  _vertex(id=produ
+000012e0: 6365 725f 6675 6e63 5f61 726e 2c20 6e6f  cer_func_arn, no
+000012f0: 6465 5f6e 616d 653d 2770 726f 6475 6365  de_name='produce
+00001300: 722d 6c61 6d62 6461 272c 2061 726e 3d70  r-lambda', arn=p
+00001310: 726f 6475 6365 725f 6675 6e63 5f61 726e  roducer_func_arn
+00001320: 2c20 6e6f 6465 5f74 7970 653d 276c 616d  , node_type='lam
+00001330: 6264 615f 6675 6e63 7469 6f6e 272c 206d  bda_function', m
+00001340: 6574 6164 6174 613d 6d65 7461 6461 7461  etadata=metadata
+00001350: 290a 2020 2020 0a20 2020 2063 6f6e 7375  ).    .    consu
+00001360: 6d65 725f 6675 6e63 5f61 726e 203d 2027  mer_func_arn = '
+00001370: 6172 6e3a 6177 733a 6c61 6d62 6461 3a65  arn:aws:lambda:e
+00001380: 752d 7765 7374 2d31 3a31 3233 3435 3637  u-west-1:1234567
+00001390: 3839 3a66 756e 6374 696f 6e3a 636f 6e73  89:function:cons
+000013a0: 756d 6572 2d6c 616d 6264 6127 0a20 2020  umer-lambda'.   
+000013b0: 206d 6364 2e61 6464 5f76 6572 7465 7828   mcd.add_vertex(
+000013c0: 6964 3d63 6f6e 7375 6d65 725f 6675 6e63  id=consumer_func
+000013d0: 5f61 726e 2c20 6e6f 6465 5f6e 616d 653d  _arn, node_name=
+000013e0: 2763 6f6e 7375 6d65 722d 6c61 6d62 6461  'consumer-lambda
+000013f0: 272c 2061 726e 3d63 6f6e 7375 6d65 725f  ', arn=consumer_
+00001400: 6675 6e63 5f61 726e 2c20 6e6f 6465 5f74  func_arn, node_t
+00001410: 7970 653d 276c 616d 6264 615f 6675 6e63  ype='lambda_func
+00001420: 7469 6f6e 2729 0a20 2020 200a 2020 2020  tion').    .    
+00001430: 6479 6e61 6d6f 5f61 726e 203d 2027 6172  dynamo_arn = 'ar
+00001440: 6e3a 6177 733a 6479 6e61 6d6f 6462 3a65  n:aws:dynamodb:e
+00001450: 752d 7765 7374 2d31 3a31 3233 3435 3637  u-west-1:1234567
+00001460: 3839 3a74 6162 6c65 2f74 6162 6c65 3127  89:table/table1'
+00001470: 0a20 2020 206d 6364 2e61 6464 5f76 6572  .    mcd.add_ver
+00001480: 7465 7828 6964 3d64 796e 616d 6f5f 6172  tex(id=dynamo_ar
+00001490: 6e2c 206e 6f64 655f 6e61 6d65 3d27 7461  n, node_name='ta
+000014a0: 626c 6531 272c 2061 726e 3d64 796e 616d  ble1', arn=dynam
+000014b0: 6f5f 6172 6e2c 206e 6f64 655f 7479 7065  o_arn, node_type
+000014c0: 3d27 6479 6e61 6d6f 2729 0a20 2020 200a  ='dynamo').    .
+000014d0: 2020 2020 736e 735f 6172 6e20 3d20 2761      sns_arn = 'a
+000014e0: 726e 3a61 7773 3a73 6e73 3a65 752d 7765  rn:aws:sns:eu-we
+000014f0: 7374 2d31 3a31 3233 3435 3637 3839 3a69  st-1:123456789:i
+00001500: 6e74 6572 6e61 6c2e 6669 666f 270a 2020  nternal.fifo'.  
+00001510: 2020 6d65 7461 6461 7461 203d 207b 0a20    metadata = {. 
+00001520: 2020 2020 2020 2022 4f77 6e65 7222 3a20         "Owner": 
+00001530: 3132 3334 3536 3738 392c 0a20 2020 2020  123456789,.     
+00001540: 2020 2022 5375 6273 6372 6970 7469 6f6e     "Subscription
+00001550: 7343 6f6e 6669 726d 6564 223a 2033 2c0a  sConfirmed": 3,.
+00001560: 2020 2020 2020 2020 2253 7562 7363 7269          "Subscri
+00001570: 7074 696f 6e73 5065 6e64 696e 6722 3a20  ptionsPending": 
+00001580: 300a 2020 2020 7d0a 2020 2020 6d63 642e  0.    }.    mcd.
+00001590: 6164 645f 7665 7274 6578 2869 643d 736e  add_vertex(id=sn
+000015a0: 735f 6172 6e2c 206e 6f64 655f 6e61 6d65  s_arn, node_name
+000015b0: 3d27 696e 7465 726e 616c 272c 2061 726e  ='internal', arn
+000015c0: 3d73 6e73 5f61 726e 2c20 6e6f 6465 5f74  =sns_arn, node_t
+000015d0: 7970 653d 2773 6e73 272c 206d 6574 6164  ype='sns', metad
+000015e0: 6174 613d 6d65 7461 6461 7461 290a 2020  ata=metadata).  
+000015f0: 2020 0a20 2020 2073 7173 5f61 726e 203d    .    sqs_arn =
+00001600: 2027 6172 6e3a 6177 733a 7371 733a 6575   'arn:aws:sqs:eu
+00001610: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
+00001620: 393a 696e 742d 6575 2d6c 6976 652d 6576  9:int-eu-live-ev
+00001630: 656e 7473 2e66 6966 6f27 0a20 2020 206d  ents.fifo'.    m
+00001640: 6574 6164 6174 6120 3d20 7b0a 2020 2020  etadata = {.    
+00001650: 2020 2020 2244 656c 6179 5365 636f 6e64      "DelaySecond
+00001660: 7322 3a20 302c 0a20 2020 2020 2020 2022  s": 0,.        "
+00001670: 4669 666f 5175 6575 6522 3a20 2254 5255  FifoQueue": "TRU
+00001680: 4522 2c0a 2020 2020 2020 2020 2252 6563  E",.        "Rec
+00001690: 6569 7665 4d65 7373 6167 6557 6169 7454  eiveMessageWaitT
+000016a0: 696d 6553 6563 6f6e 6473 223a 2030 2c0a  imeSeconds": 0,.
+000016b0: 2020 2020 2020 2020 2253 7173 4d61 6e61          "SqsMana
+000016c0: 6765 6453 7365 456e 6162 6c65 6422 3a20  gedSseEnabled": 
+000016d0: 2266 616c 7365 222c 0a20 2020 2020 2020  "false",.       
+000016e0: 2022 5669 7369 6269 6c69 7479 5469 6d65   "VisibilityTime
+000016f0: 6f75 7422 3a20 3330 0a20 2020 207d 0a20  out": 30.    }. 
+00001700: 2020 206d 6364 2e61 6464 5f76 6572 7465     mcd.add_verte
+00001710: 7828 6964 3d73 7173 5f61 726e 2c20 6e6f  x(id=sqs_arn, no
+00001720: 6465 5f6e 616d 653d 2765 7665 6e74 7327  de_name='events'
+00001730: 2c20 6172 6e3d 7371 735f 6172 6e2c 206e  , arn=sqs_arn, n
+00001740: 6f64 655f 7479 7065 3d27 7371 7327 2c20  ode_type='sqs', 
+00001750: 6d65 7461 6461 7461 3d6d 6574 6164 6174  metadata=metadat
+00001760: 6129 0a20 2020 200a 2020 2020 7371 735f  a).    .    sqs_
+00001770: 6172 6e32 203d 2027 6172 6e3a 6177 733a  arn2 = 'arn:aws:
+00001780: 7371 733a 6575 2d77 6573 742d 313a 3132  sqs:eu-west-1:12
+00001790: 3334 3536 3738 393a 696e 742d 6575 2d6c  3456789:int-eu-l
+000017a0: 6976 652d 6576 656e 7473 322e 6669 666f  ive-events2.fifo
+000017b0: 270a 2020 2020 6d63 642e 6164 645f 7665  '.    mcd.add_ve
+000017c0: 7274 6578 2869 643d 7371 735f 6172 6e32  rtex(id=sqs_arn2
+000017d0: 2c20 6e6f 6465 5f6e 616d 653d 2765 7665  , node_name='eve
+000017e0: 6e74 7332 272c 2061 726e 3d73 7173 5f61  nts2', arn=sqs_a
+000017f0: 726e 322c 206e 6f64 655f 7479 7065 3d27  rn2, node_type='
+00001800: 7371 7327 290a 2020 2020 0a20 2020 2073  sqs').    .    s
+00001810: 335f 6172 6e20 3d20 2761 726e 3a61 7773  3_arn = 'arn:aws
+00001820: 3a73 333a 3a3a 6275 636b 6574 5f6e 616d  :s3:::bucket_nam
+00001830: 652f 6b65 795f 6e61 6d65 270a 2020 2020  e/key_name'.    
+00001840: 6d63 642e 6164 645f 7665 7274 6578 2869  mcd.add_vertex(i
+00001850: 643d 7333 5f61 726e 2c20 6e6f 6465 5f6e  d=s3_arn, node_n
+00001860: 616d 653d 276b 6579 5f6e 616d 6527 2c20  ame='key_name', 
+00001870: 6172 6e3d 7333 5f61 726e 2c20 6e6f 6465  arn=s3_arn, node
+00001880: 5f74 7970 653d 2773 3327 290a 2020 2020  _type='s3').    
+00001890: 0a20 2020 206d 6364 2e61 6464 5f6c 696e  .    mcd.add_lin
+000018a0: 6b28 7372 635f 6e6f 6465 5f69 643d 6627  k(src_node_id=f'
+000018b0: 6c61 6d62 6461 5f66 756e 6374 696f 6e3a  lambda_function:
+000018c0: 7b70 726f 6475 6365 725f 6675 6e63 5f61  {producer_func_a
+000018d0: 726e 7d27 2c20 6473 745f 6e6f 6465 5f69  rn}', dst_node_i
+000018e0: 643d 6627 736e 733a 7b73 6e73 5f61 726e  d=f'sns:{sns_arn
+000018f0: 7d27 290a 2020 2020 6d63 642e 6164 645f  }').    mcd.add_
+00001900: 6c69 6e6b 2873 7263 5f6e 6f64 655f 6964  link(src_node_id
+00001910: 3d66 276c 616d 6264 615f 6675 6e63 7469  =f'lambda_functi
+00001920: 6f6e 3a7b 7072 6f64 7563 6572 5f66 756e  on:{producer_fun
+00001930: 635f 6172 6e7d 272c 2064 7374 5f6e 6f64  c_arn}', dst_nod
+00001940: 655f 6964 3d66 2773 333a 7b73 335f 6172  e_id=f's3:{s3_ar
+00001950: 6e7d 2729 0a20 2020 206d 6364 2e61 6464  n}').    mcd.add
+00001960: 5f6c 696e 6b28 7372 635f 6e6f 6465 5f69  _link(src_node_i
+00001970: 643d 6627 736e 733a 7b73 6e73 5f61 726e  d=f'sns:{sns_arn
+00001980: 7d27 2c20 6473 745f 6e6f 6465 5f69 643d  }', dst_node_id=
+00001990: 6627 7371 733a 7b73 7173 5f61 726e 7d27  f'sqs:{sqs_arn}'
+000019a0: 290a 2020 2020 6d63 642e 6164 645f 6c69  ).    mcd.add_li
+000019b0: 6e6b 2873 7263 5f6e 6f64 655f 6964 3d66  nk(src_node_id=f
+000019c0: 2773 6e73 3a7b 736e 735f 6172 6e7d 272c  'sns:{sns_arn}',
+000019d0: 2064 7374 5f6e 6f64 655f 6964 3d66 2773   dst_node_id=f's
+000019e0: 7173 3a7b 7371 735f 6172 6e32 7d27 290a  qs:{sqs_arn2}').
+000019f0: 2020 2020 6d63 642e 6164 645f 6c69 6e6b      mcd.add_link
+00001a00: 2873 7263 5f6e 6f64 655f 6964 3d66 2773  (src_node_id=f's
+00001a10: 7173 3a7b 7371 735f 6172 6e7d 272c 2064  qs:{sqs_arn}', d
+00001a20: 7374 5f6e 6f64 655f 6964 3d66 276c 616d  st_node_id=f'lam
+00001a30: 6264 615f 6675 6e63 7469 6f6e 3a7b 636f  bda_function:{co
+00001a40: 6e73 756d 6572 5f66 756e 635f 6172 6e7d  nsumer_func_arn}
+00001a50: 2729 0a20 2020 206d 6364 2e61 6464 5f6c  ').    mcd.add_l
+00001a60: 696e 6b28 7372 635f 6e6f 6465 5f69 643d  ink(src_node_id=
+00001a70: 6627 6c61 6d62 6461 5f66 756e 6374 696f  f'lambda_functio
+00001a80: 6e3a 7b63 6f6e 7375 6d65 725f 6675 6e63  n:{consumer_func
+00001a90: 5f61 726e 7d27 2c20 6473 745f 6e6f 6465  _arn}', dst_node
+00001aa0: 5f69 643d 6627 6479 6e61 6d6f 3a7b 6479  _id=f'dynamo:{dy
+00001ab0: 6e61 6d6f 5f61 726e 7d27 290a 6060 600a  namo_arn}').```.
+00001ac0: 0a2d 2053 6f75 7263 6520 5b61 7773 5f73  .- Source [aws_s
+00001ad0: 6572 7669 6365 5f65 6e64 5f32 5f65 6e64  ervice_end_2_end
+00001ae0: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00001af0: 2e63 6f6d 2f74 7379 7075 6b2f 6d75 6c74  .com/tsypuk/mult
+00001b00: 6963 6c6f 7564 2d64 6961 6772 616d 732f  icloud-diagrams/
+00001b10: 626c 6f62 2f6d 6169 6e2f 7361 6d70 6c65  blob/main/sample
+00001b20: 732f 7361 6d70 6c65 732f 6177 735f 7365  s/samples/aws_se
+00001b30: 7276 6963 655f 656e 645f 325f 656e 642e  rvice_end_2_end.
+00001b40: 7079 290a 2d20 4f75 7470 7574 2063 6f6d  py).- Output com
+00001b50: 7069 6c65 6420 5b6f 7574 7075 742e 7072  piled [output.pr
+00001b60: 6f64 2e65 6e64 3265 6e64 2e64 7261 7769  od.end2end.drawi
+00001b70: 6f5d 2868 7474 7073 3a2f 2f72 6177 2e67  o](https://raw.g
+00001b80: 6974 6875 6275 7365 7263 6f6e 7465 6e74  ithubusercontent
+00001b90: 2e63 6f6d 2f74 7379 7075 6b2f 6d75 6c74  .com/tsypuk/mult
+00001ba0: 6963 6c6f 7564 2d64 6961 6772 616d 732f  icloud-diagrams/
+00001bb0: 6d61 696e 2f73 616d 706c 6573 2f6f 7574  main/samples/out
+00001bc0: 7075 742f 6f75 7470 7574 2e70 726f 642e  put/output.prod.
+00001bd0: 656e 6432 656e 642e 6472 6177 696f 290a  end2end.drawio).
+00001be0: 0a21 5b6f 7574 7075 742e 7072 6f64 2e69  .![output.prod.i
+00001bf0: 616d 2d72 6f6c 6573 2e70 6e67 5d28 6874  am-roles.png](ht
+00001c00: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+00001c10: 2f74 7379 7075 6b2f 6d75 6c74 6963 6c6f  /tsypuk/multiclo
+00001c20: 7564 2d64 6961 6772 616d 732f 626c 6f62  ud-diagrams/blob
+00001c30: 2f6d 6169 6e2f 7361 6d70 6c65 732f 6f75  /main/samples/ou
+00001c40: 7470 7574 2f70 6e67 2f6f 7574 7075 742e  tput/png/output.
+00001c50: 7072 6f64 2e65 6e64 3265 6e64 2e70 6e67  prod.end2end.png
+00001c60: 3f72 6177 3d54 7275 6529 0a0a 0a23 2323  ?raw=True)...###
+00001c70: 2320 332e 2047 656e 6572 6174 696e 6720  # 3. Generating 
+00001c80: 4469 6167 7261 6d20 6672 6f6d 2059 414d  Diagram from YAM
+00001c90: 4c20 736f 7572 6365 0a0a 6060 6079 616d  L source..```yam
+00001ca0: 6c0a 7665 7274 6963 6573 3a0a 2020 2d20  l.vertices:.  - 
+00001cb0: 6e61 6d65 3a20 7072 6f64 2d6c 616d 6264  name: prod-lambd
+00001cc0: 612d 6e61 6d65 0a20 2020 2074 7970 653a  a-name.    type:
+00001cd0: 206c 616d 6264 615f 6675 6e63 7469 6f6e   lambda_function
+00001ce0: 0a20 2020 2061 726e 3a20 6172 6e3a 6177  .    arn: arn:aw
+00001cf0: 733a 6c61 6d62 6461 3a65 752d 7765 7374  s:lambda:eu-west
+00001d00: 2d31 3a31 3233 3435 3637 3839 3a66 756e  -1:123456789:fun
+00001d10: 6374 696f 6e3a 7072 6f64 2d6c 616d 6264  ction:prod-lambd
+00001d20: 612d 6e61 6d65 0a20 202d 206e 616d 653a  a-name.  - name:
+00001d30: 2072 6f6c 652d 6c61 6d62 6461 2d6e 616d   role-lambda-nam
+00001d40: 650a 2020 2020 7479 7065 3a20 6961 6d5f  e.    type: iam_
+00001d50: 726f 6c65 0a20 2020 2061 726e 3a20 6172  role.    arn: ar
+00001d60: 6e3a 6177 733a 6961 6d3a 3a31 3233 3435  n:aws:iam::12345
+00001d70: 3637 3839 3a72 6f6c 652f 7072 6f64 2d6c  6789:role/prod-l
+00001d80: 616d 6264 612d 6e61 6d65 0a20 202d 206e  ambda-name.  - n
+00001d90: 616d 653a 2070 726f 642d 636c 6f75 6477  ame: prod-cloudw
+00001da0: 6174 6368 2d70 6f6c 6963 790a 2020 2020  atch-policy.    
+00001db0: 6963 6f6e 3a20 6272 6f6b 6572 0a20 2020  icon: broker.   
+00001dc0: 2074 7970 653a 2069 616d 5f70 6f6c 6963   type: iam_polic
+00001dd0: 790a 2020 2020 6172 6e3a 2061 726e 3a61  y.    arn: arn:a
+00001de0: 7773 3a69 616d 3a3a 3132 3334 3536 3738  ws:iam::12345678
+00001df0: 393a 706f 6c69 6379 2f70 726f 642d 636c  9:policy/prod-cl
+00001e00: 6f75 6477 6174 6368 2d70 6f6c 6963 790a  oudwatch-policy.
+00001e10: 2020 2d20 6e61 6d65 3a20 7072 6f64 2d73    - name: prod-s
+00001e20: 332d 706f 6c69 6379 0a20 2020 2074 7970  3-policy.    typ
+00001e30: 653a 2069 616d 5f70 6f6c 6963 790a 2020  e: iam_policy.  
+00001e40: 2020 6172 6e3a 2061 726e 3a61 7773 3a69    arn: arn:aws:i
+00001e50: 616d 3a3a 3132 3334 3536 3738 393a 706f  am::123456789:po
+00001e60: 6c69 6379 2f70 726f 642d 7333 2d70 6f6c  licy/prod-s3-pol
+00001e70: 6963 790a 2020 2d20 6e61 6d65 3a20 7072  icy.  - name: pr
+00001e80: 6f64 2d64 796e 616d 6f64 622d 706f 6c69  od-dynamodb-poli
+00001e90: 6379 0a20 2020 2074 7970 653a 2069 616d  cy.    type: iam
+00001ea0: 5f70 6f6c 6963 790a 2020 2020 6172 6e3a  _policy.    arn:
+00001eb0: 2061 726e 3a61 7773 3a69 616d 3a3a 3132   arn:aws:iam::12
+00001ec0: 3334 3536 3738 393a 706f 6c69 6379 2f70  3456789:policy/p
+00001ed0: 726f 642d 6479 6e61 6d6f 2d70 6f6c 6963  rod-dynamo-polic
+00001ee0: 790a 6564 6765 733a 0a23 2020 3173 7420  y.edges:.#  1st 
+00001ef0: 6170 7072 6f61 6368 2073 7263 2f64 7374  approach src/dst
+00001f00: 2061 7265 206c 696e 6b65 6420 746f 2079   are linked to y
+00001f10: 616d 6c20 7665 7274 6963 6573 2062 7920  aml vertices by 
+00001f20: 6e61 6d65 0a20 202d 207b 2073 7263 3a20  name.  - { src: 
+00001f30: 7072 6f64 2d6c 616d 6264 612d 6e61 6d65  prod-lambda-name
+00001f40: 2c20 6473 743a 2072 6f6c 652d 6c61 6d62  , dst: role-lamb
+00001f50: 6461 2d6e 616d 652c 206c 6162 656c 3a20  da-name, label: 
+00001f60: 4861 7352 6f6c 652c 206c 696e 6b5f 7479  HasRole, link_ty
+00001f70: 7065 3a20 6e6f 6e65 207d 0a20 202d 207b  pe: none }.  - {
+00001f80: 2073 7263 3a20 726f 6c65 2d6c 616d 6264   src: role-lambd
+00001f90: 612d 6e61 6d65 2c20 6473 743a 2070 726f  a-name, dst: pro
+00001fa0: 642d 636c 6f75 6477 6174 6368 2d70 6f6c  d-cloudwatch-pol
+00001fb0: 6963 792c 206c 6162 656c 3a20 416c 6c6f  icy, label: Allo
+00001fc0: 7720 436c 6f75 6457 6174 6368 206c 6f67  w CloudWatch log
+00001fd0: 732c 206c 696e 6b5f 7479 7065 3a20 6e6f  s, link_type: no
+00001fe0: 6e65 207d 0a23 2020 326e 6420 6170 7072  ne }.#  2nd appr
+00001ff0: 6f61 6368 2073 7263 2f64 7374 2061 7265  oach src/dst are
+00002000: 206c 696e 6b65 6420 6279 2041 524e 2028   linked by ARN (
+00002010: 4152 4e20 6361 6e20 6265 2070 7265 7365  ARN can be prese
+00002020: 6e74 2069 6e20 7361 6d65 2079 616d 6c2c  nt in same yaml,
+00002030: 206f 7220 6c6f 6164 6564 2070 726f 6772   or loaded progr
+00002040: 616d 6d61 7469 6361 6c6c 7929 0a20 202d  ammatically).  -
+00002050: 207b 0a20 2020 2073 7263 5f61 726e 3a20   {.    src_arn: 
+00002060: 6172 6e3a 6177 733a 6961 6d3a 3a31 3233  arn:aws:iam::123
+00002070: 3435 3637 3839 3a72 6f6c 652f 7072 6f64  456789:role/prod
+00002080: 2d6c 616d 6264 612d 6e61 6d65 2c0a 2020  -lambda-name,.  
+00002090: 2020 7372 635f 7479 7065 3a20 6961 6d5f    src_type: iam_
+000020a0: 726f 6c65 2c0a 2020 2020 6473 745f 6172  role,.    dst_ar
+000020b0: 6e3a 2061 726e 3a61 7773 3a69 616d 3a3a  n: arn:aws:iam::
+000020c0: 3132 3334 3536 3738 393a 706f 6c69 6379  123456789:policy
+000020d0: 2f70 726f 642d 7333 2d70 6f6c 6963 792c  /prod-s3-policy,
+000020e0: 0a20 2020 2064 7374 5f74 7970 653a 2069  .    dst_type: i
+000020f0: 616d 5f70 6f6c 6963 792c 0a20 2020 206c  am_policy,.    l
+00002100: 6162 656c 3a20 416c 6c6f 7720 5333 2061  abel: Allow S3 a
+00002110: 6363 6573 732c 0a20 2020 206c 696e 6b5f  ccess,.    link_
+00002120: 7479 7065 3a20 6e6f 6e65 207d 0a23 2033  type: none }.# 3
+00002130: 7264 2061 7070 726f 6163 6820 6973 206d  rd approach is m
+00002140: 6978 6564 206f 6620 3173 7420 616e 6420  ixed of 1st and 
+00002150: 326e 640a 2020 2d20 7b0a 2020 2020 7372  2nd.  - {.    sr
+00002160: 635f 6172 6e3a 2061 726e 3a61 7773 3a69  c_arn: arn:aws:i
+00002170: 616d 3a3a 3132 3334 3536 3738 393a 726f  am::123456789:ro
+00002180: 6c65 2f70 726f 642d 6c61 6d62 6461 2d6e  le/prod-lambda-n
+00002190: 616d 652c 0a20 2020 2073 7263 5f74 7970  ame,.    src_typ
+000021a0: 653a 2069 616d 5f72 6f6c 652c 0a20 2020  e: iam_role,.   
+000021b0: 2064 7374 3a20 7072 6f64 2d64 796e 616d   dst: prod-dynam
+000021c0: 6f64 622d 706f 6c69 6379 2c0a 2020 2020  odb-policy,.    
+000021d0: 6c61 6265 6c3a 2041 6c6c 6f77 2044 796e  label: Allow Dyn
+000021e0: 616d 6f44 4220 7265 6164 2061 6363 6573  amoDB read acces
+000021f0: 732c 0a20 2020 206c 696e 6b5f 7479 7065  s,.    link_type
+00002200: 3a20 6e6f 6e65 207d 0a60 6060 0a2d 2053  : none }.```.- S
+00002210: 6f75 7263 6520 5b61 7773 5f69 616d 5f66  ource [aws_iam_f
+00002220: 726f 6d5f 7961 6d6c 2e70 795d 2868 7474  rom_yaml.py](htt
+00002230: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00002240: 7473 7970 756b 2f6d 756c 7469 636c 6f75  tsypuk/multiclou
+00002250: 642d 6469 6167 7261 6d73 2f62 6c6f 622f  d-diagrams/blob/
+00002260: 6d61 696e 2f73 616d 706c 6573 2f73 616d  main/samples/sam
+00002270: 706c 6573 2f61 7773 5f69 616d 5f66 726f  ples/aws_iam_fro
+00002280: 6d5f 7961 6d6c 2e70 7929 0a2d 204f 7574  m_yaml.py).- Out
+00002290: 7075 7420 636f 6d70 696c 6564 205b 6f75  put compiled [ou
+000022a0: 7470 7574 2e70 726f 642e 6961 6d2d 726f  tput.prod.iam-ro
+000022b0: 6c65 732d 6672 6f6d 2d79 616d 6c2e 6472  les-from-yaml.dr
+000022c0: 6177 696f 5d28 6874 7470 733a 2f2f 7261  awio](https://ra
+000022d0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
+000022e0: 656e 742e 636f 6d2f 7473 7970 756b 2f6d  ent.com/tsypuk/m
+000022f0: 756c 7469 636c 6f75 642d 6469 6167 7261  ulticloud-diagra
+00002300: 6d73 2f6d 6169 6e2f 7361 6d70 6c65 732f  ms/main/samples/
+00002310: 6f75 7470 7574 2f6f 7574 7075 742e 7072  output/output.pr
+00002320: 6f64 2e69 616d 2d72 6f6c 6573 2d66 726f  od.iam-roles-fro
+00002330: 6d2d 7961 6d6c 2e64 7261 7769 6f29 0a0a  m-yaml.drawio)..
+00002340: 2d20 215b 6f75 7470 7574 2e70 726f 642e  - ![output.prod.
+00002350: 6961 6d2d 726f 6c65 732e 706e 675d 2868  iam-roles.png](h
+00002360: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00002370: 6d2f 7473 7970 756b 2f6d 756c 7469 636c  m/tsypuk/multicl
+00002380: 6f75 642d 6469 6167 7261 6d73 2f62 6c6f  oud-diagrams/blo
+00002390: 622f 6d61 696e 2f73 616d 706c 6573 2f6f  b/main/samples/o
+000023a0: 7574 7075 742f 706e 672f 6f75 7470 7574  utput/png/output
+000023b0: 2e70 726f 642e 6961 6d2d 726f 6c65 732d  .prod.iam-roles-
+000023c0: 6672 6f6d 2d79 616d 6c2e 706e 673f 7261  from-yaml.png?ra
+000023d0: 773d 5472 7565 290a 0a60 6060 7368 656c  w=True)..```shel
+000023e0: 6c0a 706f 6574 7279 2062 7569 6c64 0a65  l.poetry build.e
+000023f0: 7870 6f72 7420 5059 5049 5f55 5345 524e  xport PYPI_USERN
+00002400: 414d 453d 0a65 7870 6f72 7420 5059 5049  AME=.export PYPI
+00002410: 5f50 4153 5357 4f52 443d 0a70 6f65 7472  _PASSWORD=.poetr
+00002420: 7920 7075 626c 6973 6820 2d2d 6275 696c  y publish --buil
+00002430: 6420 2d2d 7573 6572 6e61 6d65 2024 5059  d --username $PY
+00002440: 5049 5f55 5345 524e 414d 4520 2d2d 7061  PI_USERNAME --pa
+00002450: 7373 776f 7264 2024 5059 5049 5f50 4153  ssword $PYPI_PAS
+00002460: 5357 4f52 440a 0a63 6420 7361 6d70 6c65  SWORD..cd sample
+00002470: 732f 7361 6d70 6c65 730a 706f 6574 7279  s/samples.poetry
+00002480: 2069 6e73 7461 6c6c 0a70 6f65 7472 7920   install.poetry 
+00002490: 7275 6e20 7079 7468 6f6e 2061 7773 5f69  run python aws_i
+000024a0: 616d 5f72 6f6c 6573 5f66 726f 6d5f 636f  am_roles_from_co
+000024b0: 6465 5f77 6974 685f 656e 756d 2e70 790a  de_with_enum.py.
+000024c0: 6060 600a 0a23 2323 2046 5949 3a0a 0a4f  ```..### FYI:..O
+000024d0: 7065 6e53 6f75 7263 6520 4775 6964 652c  penSource Guide,
+000024e0: 205b 486f 7720 746f 2063 6f6e 7472 6962   [How to contrib
+000024f0: 7574 6520 746f 206f 7065 6e73 6f75 7263  ute to opensourc
+00002500: 655d 2868 7474 7073 3a2f 2f6f 7065 6e73  e](https://opens
+00002510: 6f75 7263 652e 6775 6964 652f 29         ource.guide/)
```

### Comparing `multicloud_diagrams-0.3.8/multicloud_diagrams/__init__.py` & `multicloud_diagrams-0.3.9/multicloud_diagrams/__init__.py`

 * *Files identical despite different names*

### Comparing `multicloud_diagrams-0.3.8/multicloud_diagrams/providers/aws_services.json` & `multicloud_diagrams-0.3.9/multicloud_diagrams/providers/aws_services.json`

 * *Files identical despite different names*

### Comparing `multicloud_diagrams-0.3.8/multicloud_diagrams/providers/on_prem_services.json` & `multicloud_diagrams-0.3.9/multicloud_diagrams/providers/on_prem_services.json`

 * *Files identical despite different names*

### Comparing `multicloud_diagrams-0.3.8/pyproject.toml` & `multicloud_diagrams-0.3.9/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "multicloud-diagrams"
-version = "0.3.8"
+version = "0.3.9"
 description = "Library to generate DRAW.IO compatible diagrams to represent Cloud infrastructure. AWS Cloud supported."
 authors = ["Roman Tsypuk <tsypuk.conf@gmail.com>"]
 license = "MIT"
 readme = "README.md"
 packages = [{include = "multicloud_diagrams"}]
 
 [tool.poetry.dependencies]
```

### Comparing `multicloud_diagrams-0.3.8/PKG-INFO` & `multicloud_diagrams-0.3.9/PKG-INFO`

 * *Files 10% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 00000000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
 00000010: 3a20 322e 310a 4e61 6d65 3a20 6d75 6c74  : 2.1.Name: mult
 00000020: 6963 6c6f 7564 2d64 6961 6772 616d 730a  icloud-diagrams.
-00000030: 5665 7273 696f 6e3a 2030 2e33 2e38 0a53  Version: 0.3.8.S
+00000030: 5665 7273 696f 6e3a 2030 2e33 2e39 0a53  Version: 0.3.9.S
 00000040: 756d 6d61 7279 3a20 4c69 6272 6172 7920  ummary: Library 
 00000050: 746f 2067 656e 6572 6174 6520 4452 4157  to generate DRAW
 00000060: 2e49 4f20 636f 6d70 6174 6962 6c65 2064  .IO compatible d
 00000070: 6961 6772 616d 7320 746f 2072 6570 7265  iagrams to repre
 00000080: 7365 6e74 2043 6c6f 7564 2069 6e66 7261  sent Cloud infra
 00000090: 7374 7275 6374 7572 652e 2041 5753 2043  structure. AWS C
 000000a0: 6c6f 7564 2073 7570 706f 7274 6564 2e0a  loud supported..
@@ -26,543 +26,602 @@
 00000190: 6e67 7561 6765 203a 3a20 5079 7468 6f6e  nguage :: Python
 000001a0: 203a 3a20 332e 3130 0a43 6c61 7373 6966   :: 3.10.Classif
 000001b0: 6965 723a 2050 726f 6772 616d 6d69 6e67  ier: Programming
 000001c0: 204c 616e 6775 6167 6520 3a3a 2050 7974   Language :: Pyt
 000001d0: 686f 6e20 3a3a 2033 2e31 310a 4465 7363  hon :: 3.11.Desc
 000001e0: 7269 7074 696f 6e2d 436f 6e74 656e 742d  ription-Content-
 000001f0: 5479 7065 3a20 7465 7874 2f6d 6172 6b64  Type: text/markd
-00000200: 6f77 6e0a 0a4d 756c 7469 436c 6f75 6420  own..MultiCloud 
-00000210: 4469 6167 7261 6d73 2069 7320 6120 7061  Diagrams is a pa
-00000220: 636b 6167 6520 666f 7220 6765 6e65 7261  ckage for genera
-00000230: 7469 6e67 2061 6e64 2072 656e 6465 7269  ting and renderi
-00000240: 6e67 2044 6961 6772 616d 732d 4173 2d61  ng Diagrams-As-a
-00000250: 2d43 6f64 6520 2844 4147 2920 696e 2070  -Code (DAG) in p
-00000260: 6f70 756c 6172 2064 7261 7769 6f20 666f  opular drawio fo
-00000270: 726d 6174 2066 6f72 2064 6966 6665 7265  rmat for differe
-00000280: 6e74 2043 6c6f 7564 2070 726f 7669 6465  nt Cloud provide
-00000290: 7273 2e0a 0a2d 2079 6f75 2063 616e 2075  rs...- you can u
-000002a0: 7365 2069 7420 6279 2064 6566 696e 696e  se it by definin
-000002b0: 6720 6060 4469 6167 7261 6d73 2061 7320  g ``Diagrams as 
-000002c0: 6120 436f 6465 6060 2c20 636f 6d70 696c  a Code``, compil
-000002d0: 6520 746f 2064 7261 7769 6f20 7665 6374  e to drawio vect
-000002e0: 6f72 2066 6f72 6d61 742c 2065 6469 7420  or format, edit 
-000002f0: 7665 6374 6f72 2064 7261 7769 6f20 7265  vector drawio re
-00000300: 7072 6573 656e 7461 7469 6f6e 2028 616c  presentation (al
-00000310: 6967 6e20 636f 6d70 6f6e 656e 7473 206c  ign components l
-00000320: 6f63 6174 696f 6e29 2e0a 2d20 6f74 6865  ocation)..- othe
-00000330: 7220 6f70 7469 6f6e 2069 7320 746f 2071  r option is to q
-00000340: 7565 7279 2069 6e66 7261 7374 7275 6374  uery infrastruct
-00000350: 7572 6520 656c 656d 656e 7473 2077 6974  ure elements wit
-00000360: 6820 706f 7075 6c61 7220 6c69 6272 6172  h popular librar
-00000370: 6965 732c 206c 696b 6520 6177 7320 626f  ies, like aws bo
-00000380: 746f 2c20 7072 6570 726f 6365 7373 2064  to, preprocess d
-00000390: 6573 6972 6564 2065 6c65 6d65 6e74 7320  esired elements 
-000003a0: 616e 6420 636f 6d70 696c 6520 7468 656d  and compile them
-000003b0: 2069 6e74 6f20 6472 6177 696f 2075 7369   into drawio usi
-000003c0: 6e67 2060 606d 756c 7469 636c 6f75 642d  ng ``multicloud-
-000003d0: 6469 6167 7261 6d73 6060 2e0a 0a2d 202a  diagrams``...- *
-000003e0: 2a53 6f75 7263 6520 636f 6465 3a2a 2a20  *Source code:** 
-000003f0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00000400: 6f6d 2f74 7379 7075 6b2f 6d75 6c74 6963  om/tsypuk/multic
-00000410: 6c6f 7564 2d64 6961 6772 616d 730a 2d20  loud-diagrams.- 
-00000420: 2a2a 5079 5049 206d 756c 7469 636c 6f75  **PyPI multiclou
-00000430: 642d 6469 6167 7261 6d73 3a2a 2a20 6874  d-diagrams:** ht
-00000440: 7470 733a 2f2f 7079 7069 2e6f 7267 2f70  tps://pypi.org/p
-00000450: 726f 6a65 6374 2f6d 756c 7469 636c 6f75  roject/multiclou
-00000460: 642d 6469 6167 7261 6d73 2f0a 2d20 2a2a  d-diagrams/.- **
-00000470: 5370 6f6e 736f 7220 7072 6f6a 6563 743a  Sponsor project:
-00000480: 2a2a 2068 7474 7073 3a2f 2f70 6174 7265  ** https://patre
-00000490: 6f6e 2e63 6f6d 2f74 7379 7075 6b0a 2d20  on.com/tsypuk.- 
-000004a0: 2a2a 5669 6577 2063 6861 6e67 656c 6f67  **View changelog
-000004b0: 3a2a 2a20 6874 7470 733a 2f2f 6769 7468  :** https://gith
-000004c0: 7562 2e63 6f6d 2f74 7379 7075 6b2f 6d75  ub.com/tsypuk/mu
-000004d0: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
-000004e0: 732f 626c 6f62 2f6d 6169 6e2f 4348 414e  s/blob/main/CHAN
-000004f0: 4745 4c4f 472e 4d44 0a2d 202a 2a42 7567  GELOG.MD.- **Bug
-00000500: 2072 6570 6f72 7473 3a2a 2a20 6874 7470   reports:** http
-00000510: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f74  s://github.com/t
-00000520: 7379 7075 6b2f 6d75 6c74 6963 6c6f 7564  sypuk/multicloud
-00000530: 2d64 6961 6772 616d 732f 6973 7375 6573  -diagrams/issues
-00000540: 0a2d 202a 2a53 616d 706c 6573 2061 6e64  .- **Samples and
-00000550: 2065 7861 6d70 6c65 733a 2a2a 2068 7474   examples:** htt
-00000560: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00000570: 7473 7970 756b 2f6d 756c 7469 636c 6f75  tsypuk/multiclou
-00000580: 642d 6469 6167 7261 6d73 2f74 7265 652f  d-diagrams/tree/
-00000590: 6d61 696e 2f73 616d 706c 6573 2f73 616d  main/samples/sam
-000005a0: 706c 6573 0a0a 2323 2320 4665 6174 7572  ples..### Featur
-000005b0: 6573 3a0a 2d20 616c 6c6f 7773 2074 6f20  es:.- allows to 
-000005c0: 6765 6e65 7261 7465 2064 7261 7769 6f20  generate drawio 
-000005d0: 6469 6167 7261 6d20 7769 7468 2070 7265  diagram with pre
-000005e0: 6465 6669 6e65 6420 7374 796c 6573 2066  defined styles f
-000005f0: 6f72 2070 6f70 756c 6172 2061 7773 2073  or popular aws s
-00000600: 6572 7669 6365 732c 2073 7570 706f 7274  ervices, support
-00000610: 2067 7261 7068 2d62 6173 6564 2063 6f6e   graph-based con
-00000620: 6e65 6374 696f 6e20 7769 7468 206e 616d  nection with nam
-00000630: 6564 2065 6467 6573 0a2d 2073 7570 706f  ed edges.- suppo
-00000640: 7274 7320 7369 6e67 6c65 2061 6e64 2062  rts single and b
-00000650: 6174 6368 2065 6c65 6d65 6e74 7320 6170  atch elements ap
-00000660: 7065 6e64 2074 6f20 6469 6167 7261 6d0a  pend to diagram.
-00000670: 2d20 6475 706c 6963 6174 6573 2064 6574  - duplicates det
-00000680: 6563 7469 6f6e 2074 6f20 7072 6576 656e  ection to preven
-00000690: 7420 6261 6c6c 206f 6620 6d75 6420 696e  t ball of mud in
-000006a0: 2066 696c 6520 666f 726d 6174 2061 6e64   file format and
-000006b0: 2064 6961 6772 616d 0a2d 2076 6572 6966   diagram.- verif
-000006c0: 6963 6174 696f 6e20 7468 6174 2062 6f74  ication that bot
-000006d0: 6820 7665 7274 6963 6573 2070 7265 7365  h vertices prese
-000006e0: 6e74 206f 6e20 6469 6167 7261 6d20 7768  nt on diagram wh
-000006f0: 656e 2061 6464 696e 6720 6564 6765 2063  en adding edge c
-00000700: 6f6e 6e65 6374 696f 6e20 6265 7477 6565  onnection betwee
-00000710: 6e20 7468 656d 200a 2d20 6966 2074 6865  n them .- if the
-00000720: 206e 6f64 6520 6973 206e 6f74 2070 7265   node is not pre
-00000730: 7365 6e74 2c20 6661 6c6c 6261 636b 2074  sent, fallback t
-00000740: 6f20 6465 6661 756c 7420 6963 6f6e 2077  o default icon w
-00000750: 6865 6e20 7265 6e64 6572 696e 670a 2d20  hen rendering.- 
-00000760: 7265 6164 2070 7265 7669 6f75 7320 7665  read previous ve
-00000770: 7273 696f 6e20 6f66 2064 7261 7769 6f20  rsion of drawio 
-00000780: 6669 6c65 2061 6e64 2072 6575 7365 7320  file and reuses 
-00000790: 6578 6973 7469 6e67 2076 6572 7469 6365  existing vertice
-000007a0: 7320 636f 6f72 6469 6e61 7465 7320 7768  s coordinates wh
-000007b0: 656e 2067 656e 6572 6174 696e 6720 6120  en generating a 
-000007c0: 6e65 7720 7665 7273 696f 6e0a 2d20 6765  new version.- ge
-000007d0: 6e65 7261 7465 2064 6961 6772 616d 2066  nerate diagram f
-000007e0: 726f 6d20 6060 5941 4d4c 6060 2064 6566  rom ``YAML`` def
-000007f0: 696e 6974 696f 6e0a 2d20 6d69 7820 616e  inition.- mix an
-00000800: 6420 6175 676d 656e 7420 4469 6167 7261  d augment Diagra
-00000810: 6d2d 6173 2d63 6f64 652c 2072 6561 6c20  m-as-code, real 
-00000820: 696e 6672 6120 6372 6177 6c65 722c 2073  infra crawler, s
-00000830: 7461 7469 6320 7961 6d6c 2d62 6173 6564  tatic yaml-based
-00000840: 2063 6f6e 7465 6e74 2074 6f20 6469 6167   content to diag
-00000850: 7261 6d0a 0a23 2323 2053 7570 706f 7274  ram..### Support
-00000860: 6564 2041 5753 2073 6572 7669 6365 733a  ed AWS services:
-00000870: 0a0a 2d20 6c61 6d62 6461 5f66 756e 6374  ..- lambda_funct
-00000880: 696f 6e0a 2d20 7371 730a 2d20 736e 730a  ion.- sqs.- sns.
-00000890: 2d20 6961 6d5f 726f 6c65 2f69 616d 5f70  - iam_role/iam_p
-000008a0: 6f6c 6963 792f 6961 6d5f 7065 726d 6973  olicy/iam_permis
-000008b0: 7369 6f6e 0a2d 2064 796e 616d 6f2f 6479  sion.- dynamo/dy
-000008c0: 6e61 6d6f 5f73 7472 6561 6d0a 2d20 6170  namo_stream.- ap
-000008d0: 695f 6777 0a2d 2073 330a 2d20 6b6d 730a  i_gw.- s3.- kms.
-000008e0: 2d20 7373 6d0a 0a23 2323 204c 6962 7261  - ssm..### Libra
-000008f0: 7279 2063 616e 2062 6520 7573 6564 2077  ry can be used w
-00000900: 6974 6820 6469 6666 6572 656e 7420 6170  ith different ap
-00000910: 7072 6f61 6368 6573 2061 6e64 2065 7665  proaches and eve
-00000920: 6e20 6d69 7820 616c 6c20 6f66 2074 6865  n mix all of the
-00000930: 6d2e 2053 616d 706c 6573 2061 6e64 2075  m. Samples and u
-00000940: 7361 6765 3a0a 0a23 2323 2320 312e 2047  sage:..#### 1. G
-00000950: 656e 6572 6174 696e 6720 4157 5320 4479  enerating AWS Dy
-00000960: 6e61 6d6f 4442 2044 6574 6169 6c73 2064  namoDB Details d
-00000970: 7261 7769 6f20 6469 6167 7261 6d20 6261  rawio diagram ba
-00000980: 7365 6420 6f6e 206c 6962 7261 7279 2c20  sed on library, 
-00000990: 6874 7470 2c20 6177 7363 6c69 2c20 6574  http, awscli, et
-000009a0: 632e 2045 7861 6d70 6c65 2062 6173 6564  c. Example based
-000009b0: 206f 6e20 626f 746f 3320 4479 6e61 6d6f   on boto3 Dynamo
-000009c0: 4442 2072 6573 706f 6e73 650a 0a60 6060  DB response..```
-000009d0: 6a73 6f6e 0a7b 0a20 2020 2020 2020 2027  json.{.        '
-000009e0: 4174 7472 6962 7574 6544 6566 696e 6974  AttributeDefinit
-000009f0: 696f 6e73 273a 205b 0a20 2020 2020 2020  ions': [.       
-00000a00: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-00000a10: 2020 2020 2020 2027 4174 7472 6962 7574         'Attribut
-00000a20: 654e 616d 6527 3a20 2766 6972 7374 272c  eName': 'first',
-00000a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000a40: 2027 4174 7472 6962 7574 6554 7970 6527   'AttributeType'
-00000a50: 3a20 2753 270a 2020 2020 2020 2020 2020  : 'S'.          
-00000a60: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-00000a70: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00000a80: 2020 2027 4174 7472 6962 7574 654e 616d     'AttributeNam
-00000a90: 6527 3a20 2773 6563 6f6e 6427 2c0a 2020  e': 'second',.  
-00000aa0: 2020 2020 2020 2020 2020 2020 2020 2741                'A
-00000ab0: 7474 7269 6275 7465 5479 7065 273a 2027  ttributeType': '
-00000ac0: 4e27 0a20 2020 2020 2020 2020 2020 207d  N'.            }
-00000ad0: 2c0a 2020 2020 2020 2020 2020 2020 7b0a  ,.            {.
-00000ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000af0: 2741 7474 7269 6275 7465 4e61 6d65 273a  'AttributeName':
-00000b00: 2027 7468 6972 6427 2c0a 2020 2020 2020   'third',.      
-00000b10: 2020 2020 2020 2020 2020 2741 7474 7269            'Attri
-00000b20: 6275 7465 5479 7065 273a 2027 4227 0a20  buteType': 'B'. 
-00000b30: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-00000b40: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
-00000b50: 2027 5461 626c 654e 616d 6527 3a20 2770   'TableName': 'p
-00000b60: 726f 642d 6479 6e61 6d6f 2d74 6162 6c65  rod-dynamo-table
-00000b70: 272c 0a20 2020 2020 2020 2027 4b65 7953  ',.        'KeyS
-00000b80: 6368 656d 6127 3a20 5b0a 2020 2020 2020  chema': [.      
-00000b90: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00000ba0: 2020 2020 2020 2020 2741 7474 7269 6275          'Attribu
-00000bb0: 7465 4e61 6d65 273a 2027 7374 7269 6e67  teName': 'string
-00000bc0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-00000bd0: 2020 2027 4b65 7954 7970 6527 3a20 2748     'KeyType': 'H
-00000be0: 4153 4827 0a20 2020 2020 2020 2020 2020  ASH'.           
-00000bf0: 207d 2c0a 2020 2020 2020 2020 5d2c 0a20   },.        ],. 
-00000c00: 2020 2020 2020 2027 5461 626c 6553 697a         'TableSiz
-00000c10: 6542 7974 6573 273a 2031 3233 2c0a 2020  eBytes': 123,.  
-00000c20: 2020 2020 2020 2749 7465 6d43 6f75 6e74        'ItemCount
-00000c30: 273a 2031 3233 2c0a 2020 2020 2020 2020  ': 123,.        
-00000c40: 2754 6162 6c65 4172 6e27 3a20 2761 726e  'TableArn': 'arn
-00000c50: 3a61 7773 3a64 796e 616d 6f64 623a 6575  :aws:dynamodb:eu
-00000c60: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
-00000c70: 393a 7461 626c 652f 7072 6f64 2d64 796e  9:table/prod-dyn
-00000c80: 616d 6f2d 7461 626c 6527 2c0a 2020 2020  amo-table',.    
-00000c90: 2020 2020 274c 6f63 616c 5365 636f 6e64      'LocalSecond
-00000ca0: 6172 7949 6e64 6578 6573 273a 205b 7b0a  aryIndexes': [{.
-00000cb0: 2e2e 2e20 2020 2020 2020 0a2e 2e2e 0a2e  ...       ......
-00000cc0: 2e2e 0a20 2020 2020 2020 2020 200a 2020  ...          .  
-00000cd0: 2020 2020 2020 2020 2753 5345 4465 7363          'SSEDesc
-00000ce0: 7269 7074 696f 6e27 3a20 7b0a 2020 2020  ription': {.    
-00000cf0: 2020 2020 2020 2020 2753 7461 7475 7327          'Status'
-00000d00: 3a20 2745 4e41 424c 4544 272c 0a20 2020  : 'ENABLED',.   
-00000d10: 2020 2020 2020 2020 2027 5353 4554 7970           'SSETyp
-00000d20: 6527 3a20 274b 4d53 272c 0a20 2020 2020  e': 'KMS',.     
-00000d30: 2020 2020 2020 2027 4b4d 534d 6173 7465         'KMSMaste
-00000d40: 724b 6579 4172 6e27 3a20 2773 7472 696e  rKeyArn': 'strin
-00000d50: 6727 2c0a 2020 2020 2020 2020 2020 7d2c  g',.          },
-00000d60: 0a20 2020 2020 2020 2020 2027 4465 6c65  .          'Dele
-00000d70: 7469 6f6e 5072 6f74 6563 7469 6f6e 456e  tionProtectionEn
-00000d80: 6162 6c65 6427 3a20 5472 7565 0a20 2020  abled': True.   
-00000d90: 2020 2020 207d 0a60 6060 0a0a 2d20 536f       }.```..- So
-00000da0: 7572 6365 205b 6177 735f 6479 6e61 6d6f  urce [aws_dynamo
-00000db0: 5f62 6f74 6f33 5f72 6573 706f 6e73 652e  _boto3_response.
-00000dc0: 7079 5d28 6874 7470 733a 2f2f 6769 7468  py](https://gith
-00000dd0: 7562 2e63 6f6d 2f74 7379 7075 6b2f 6d75  ub.com/tsypuk/mu
-00000de0: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
-00000df0: 732f 626c 6f62 2f6d 6169 6e2f 7361 6d70  s/blob/main/samp
-00000e00: 6c65 732f 7361 6d70 6c65 732f 6177 735f  les/samples/aws_
-00000e10: 6479 6e61 6d6f 5f62 6f74 6f33 5f72 6573  dynamo_boto3_res
-00000e20: 706f 6e73 652e 7079 290a 2d20 4f75 7470  ponse.py).- Outp
-00000e30: 7574 2063 6f6d 7069 6c65 6420 5b6f 7574  ut compiled [out
-00000e40: 7075 742e 7072 6f64 2e64 796e 616d 6f2e  put.prod.dynamo.
-00000e50: 6472 6177 696f 5d28 6874 7470 733a 2f2f  drawio](https://
-00000e60: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
-00000e70: 6e74 656e 742e 636f 6d2f 7473 7970 756b  ntent.com/tsypuk
-00000e80: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
-00000e90: 7261 6d73 2f6d 6169 6e2f 7361 6d70 6c65  rams/main/sample
-00000ea0: 732f 6f75 7470 7574 2f6f 7574 7075 742e  s/output/output.
-00000eb0: 7072 6f64 2e64 796e 616d 6f2e 6472 6177  prod.dynamo.draw
-00000ec0: 696f 293a 0a0a 215b 6f75 7470 7574 2e70  io):..![output.p
-00000ed0: 726f 642e 6479 6e61 6d6f 2e70 6e67 5d28  rod.dynamo.png](
-00000ee0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00000ef0: 6f6d 2f74 7379 7075 6b2f 6d75 6c74 6963  om/tsypuk/multic
-00000f00: 6c6f 7564 2d64 6961 6772 616d 732f 7261  loud-diagrams/ra
-00000f10: 772f 6d61 696e 2f73 616d 706c 6573 2f6f  w/main/samples/o
-00000f20: 7574 7075 742f 706e 672f 6f75 7470 7574  utput/png/output
-00000f30: 2e70 726f 642e 6479 6e61 6d6f 2e70 6e67  .prod.dynamo.png
-00000f40: 3f72 6177 3d54 7275 6529 0a0a 2323 2323  ?raw=True)..####
-00000f50: 2032 2e20 4469 6167 7261 6d73 2061 7320   2. Diagrams as 
-00000f60: 6120 436f 6465 2e20 4441 472e 2047 656e  a Code. DAG. Gen
-00000f70: 6572 6174 696e 6720 4157 5320 4941 4d20  erating AWS IAM 
-00000f80: 4772 6170 6820 6672 6f6d 2074 6865 2063  Graph from the c
-00000f90: 6f64 6520 6261 7365 6420 6f6e 2044 4147  ode based on DAG
-00000fa0: 2064 6563 6c61 7261 7469 6f6e 3a0a 0a60   declaration:..`
-00000fb0: 6060 7079 7468 6f6e 0a20 2020 2070 726f  ``python.    pro
-00000fc0: 6475 6365 725f 6675 6e63 5f61 726e 203d  ducer_func_arn =
-00000fd0: 2027 6172 6e3a 6177 733a 6c61 6d62 6461   'arn:aws:lambda
-00000fe0: 3a65 752d 7765 7374 2d31 3a31 3233 3435  :eu-west-1:12345
-00000ff0: 3637 3839 3a66 756e 6374 696f 6e3a 7072  6789:function:pr
-00001000: 6f64 7563 6572 2d6c 616d 6264 6127 0a20  oducer-lambda'. 
-00001010: 2020 206d 6574 6164 6174 6120 3d20 7b0a     metadata = {.
-00001020: 2020 2020 2020 2020 2243 6f64 6553 697a          "CodeSiz
-00001030: 6522 3a20 3132 3334 2c0a 2020 2020 2020  e": 1234,.      
-00001040: 2020 2248 616e 646c 6572 223a 2022 6d61    "Handler": "ma
-00001050: 696e 222c 0a20 2020 2020 2020 2022 4c61  in",.        "La
-00001060: 7965 7273 223a 2030 2c0a 2020 2020 2020  yers": 0,.      
-00001070: 2020 224d 656d 6f72 7922 3a20 3132 382c    "Memory": 128,
-00001080: 0a20 2020 2020 2020 2022 5061 636b 6167  .        "Packag
-00001090: 6554 7970 6522 3a20 225a 6970 222c 0a20  eType": "Zip",. 
-000010a0: 2020 2020 2020 2022 5275 6e74 696d 6522         "Runtime"
-000010b0: 3a20 2267 6f31 2e78 222c 0a20 2020 2020  : "go1.x",.     
-000010c0: 2020 2022 5469 6d65 6f75 7422 3a20 3330     "Timeout": 30
-000010d0: 2c0a 2020 2020 2020 2020 2254 7261 6369  ,.        "Traci
-000010e0: 6e67 436f 6e66 6967 223a 2022 7b27 4d6f  ngConfig": "{'Mo
-000010f0: 6465 273a 2027 4163 7469 7665 277d 222c  de': 'Active'}",
-00001100: 0a20 2020 2020 2020 2022 5665 7273 696f  .        "Versio
-00001110: 6e22 3a20 2224 4c41 5445 5354 220a 2020  n": "$LATEST".  
-00001120: 2020 7d0a 2020 2020 6d63 642e 6164 645f    }.    mcd.add_
-00001130: 7665 7274 6578 2869 643d 7072 6f64 7563  vertex(id=produc
-00001140: 6572 5f66 756e 635f 6172 6e2c 206e 6f64  er_func_arn, nod
-00001150: 655f 6e61 6d65 3d27 7072 6f64 7563 6572  e_name='producer
-00001160: 2d6c 616d 6264 6127 2c20 6172 6e3d 7072  -lambda', arn=pr
-00001170: 6f64 7563 6572 5f66 756e 635f 6172 6e2c  oducer_func_arn,
-00001180: 206e 6f64 655f 7479 7065 3d27 6c61 6d62   node_type='lamb
-00001190: 6461 5f66 756e 6374 696f 6e27 2c20 6d65  da_function', me
-000011a0: 7461 6461 7461 3d6d 6574 6164 6174 6129  tadata=metadata)
-000011b0: 0a20 2020 200a 2020 2020 636f 6e73 756d  .    .    consum
-000011c0: 6572 5f66 756e 635f 6172 6e20 3d20 2761  er_func_arn = 'a
-000011d0: 726e 3a61 7773 3a6c 616d 6264 613a 6575  rn:aws:lambda:eu
-000011e0: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
-000011f0: 393a 6675 6e63 7469 6f6e 3a63 6f6e 7375  9:function:consu
-00001200: 6d65 722d 6c61 6d62 6461 270a 2020 2020  mer-lambda'.    
-00001210: 6d63 642e 6164 645f 7665 7274 6578 2869  mcd.add_vertex(i
-00001220: 643d 636f 6e73 756d 6572 5f66 756e 635f  d=consumer_func_
-00001230: 6172 6e2c 206e 6f64 655f 6e61 6d65 3d27  arn, node_name='
-00001240: 636f 6e73 756d 6572 2d6c 616d 6264 6127  consumer-lambda'
-00001250: 2c20 6172 6e3d 636f 6e73 756d 6572 5f66  , arn=consumer_f
-00001260: 756e 635f 6172 6e2c 206e 6f64 655f 7479  unc_arn, node_ty
-00001270: 7065 3d27 6c61 6d62 6461 5f66 756e 6374  pe='lambda_funct
-00001280: 696f 6e27 290a 2020 2020 0a20 2020 2064  ion').    .    d
-00001290: 796e 616d 6f5f 6172 6e20 3d20 2761 726e  ynamo_arn = 'arn
-000012a0: 3a61 7773 3a64 796e 616d 6f64 623a 6575  :aws:dynamodb:eu
-000012b0: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
-000012c0: 393a 7461 626c 652f 7461 626c 6531 270a  9:table/table1'.
-000012d0: 2020 2020 6d63 642e 6164 645f 7665 7274      mcd.add_vert
-000012e0: 6578 2869 643d 6479 6e61 6d6f 5f61 726e  ex(id=dynamo_arn
-000012f0: 2c20 6e6f 6465 5f6e 616d 653d 2774 6162  , node_name='tab
-00001300: 6c65 3127 2c20 6172 6e3d 6479 6e61 6d6f  le1', arn=dynamo
-00001310: 5f61 726e 2c20 6e6f 6465 5f74 7970 653d  _arn, node_type=
-00001320: 2764 796e 616d 6f27 290a 2020 2020 0a20  'dynamo').    . 
-00001330: 2020 2073 6e73 5f61 726e 203d 2027 6172     sns_arn = 'ar
-00001340: 6e3a 6177 733a 736e 733a 6575 2d77 6573  n:aws:sns:eu-wes
-00001350: 742d 313a 3132 3334 3536 3738 393a 696e  t-1:123456789:in
-00001360: 7465 726e 616c 2e66 6966 6f27 0a20 2020  ternal.fifo'.   
-00001370: 206d 6574 6164 6174 6120 3d20 7b0a 2020   metadata = {.  
-00001380: 2020 2020 2020 224f 776e 6572 223a 2031        "Owner": 1
-00001390: 3233 3435 3637 3839 2c0a 2020 2020 2020  23456789,.      
-000013a0: 2020 2253 7562 7363 7269 7074 696f 6e73    "Subscriptions
-000013b0: 436f 6e66 6972 6d65 6422 3a20 332c 0a20  Confirmed": 3,. 
-000013c0: 2020 2020 2020 2022 5375 6273 6372 6970         "Subscrip
-000013d0: 7469 6f6e 7350 656e 6469 6e67 223a 2030  tionsPending": 0
-000013e0: 0a20 2020 207d 0a20 2020 206d 6364 2e61  .    }.    mcd.a
-000013f0: 6464 5f76 6572 7465 7828 6964 3d73 6e73  dd_vertex(id=sns
-00001400: 5f61 726e 2c20 6e6f 6465 5f6e 616d 653d  _arn, node_name=
-00001410: 2769 6e74 6572 6e61 6c27 2c20 6172 6e3d  'internal', arn=
-00001420: 736e 735f 6172 6e2c 206e 6f64 655f 7479  sns_arn, node_ty
-00001430: 7065 3d27 736e 7327 2c20 6d65 7461 6461  pe='sns', metada
-00001440: 7461 3d6d 6574 6164 6174 6129 0a20 2020  ta=metadata).   
-00001450: 200a 2020 2020 7371 735f 6172 6e20 3d20   .    sqs_arn = 
-00001460: 2761 726e 3a61 7773 3a73 7173 3a65 752d  'arn:aws:sqs:eu-
-00001470: 7765 7374 2d31 3a31 3233 3435 3637 3839  west-1:123456789
-00001480: 3a69 6e74 2d65 752d 6c69 7665 2d65 7665  :int-eu-live-eve
-00001490: 6e74 732e 6669 666f 270a 2020 2020 6d65  nts.fifo'.    me
-000014a0: 7461 6461 7461 203d 207b 0a20 2020 2020  tadata = {.     
-000014b0: 2020 2022 4465 6c61 7953 6563 6f6e 6473     "DelaySeconds
-000014c0: 223a 2030 2c0a 2020 2020 2020 2020 2246  ": 0,.        "F
-000014d0: 6966 6f51 7565 7565 223a 2022 5452 5545  ifoQueue": "TRUE
-000014e0: 222c 0a20 2020 2020 2020 2022 5265 6365  ",.        "Rece
-000014f0: 6976 654d 6573 7361 6765 5761 6974 5469  iveMessageWaitTi
-00001500: 6d65 5365 636f 6e64 7322 3a20 302c 0a20  meSeconds": 0,. 
-00001510: 2020 2020 2020 2022 5371 734d 616e 6167         "SqsManag
-00001520: 6564 5373 6545 6e61 626c 6564 223a 2022  edSseEnabled": "
-00001530: 6661 6c73 6522 2c0a 2020 2020 2020 2020  false",.        
-00001540: 2256 6973 6962 696c 6974 7954 696d 656f  "VisibilityTimeo
-00001550: 7574 223a 2033 300a 2020 2020 7d0a 2020  ut": 30.    }.  
-00001560: 2020 6d63 642e 6164 645f 7665 7274 6578    mcd.add_vertex
-00001570: 2869 643d 7371 735f 6172 6e2c 206e 6f64  (id=sqs_arn, nod
-00001580: 655f 6e61 6d65 3d27 6576 656e 7473 272c  e_name='events',
-00001590: 2061 726e 3d73 7173 5f61 726e 2c20 6e6f   arn=sqs_arn, no
-000015a0: 6465 5f74 7970 653d 2773 7173 272c 206d  de_type='sqs', m
-000015b0: 6574 6164 6174 613d 6d65 7461 6461 7461  etadata=metadata
-000015c0: 290a 2020 2020 0a20 2020 2073 7173 5f61  ).    .    sqs_a
-000015d0: 726e 3220 3d20 2761 726e 3a61 7773 3a73  rn2 = 'arn:aws:s
-000015e0: 7173 3a65 752d 7765 7374 2d31 3a31 3233  qs:eu-west-1:123
-000015f0: 3435 3637 3839 3a69 6e74 2d65 752d 6c69  456789:int-eu-li
-00001600: 7665 2d65 7665 6e74 7332 2e66 6966 6f27  ve-events2.fifo'
-00001610: 0a20 2020 206d 6364 2e61 6464 5f76 6572  .    mcd.add_ver
-00001620: 7465 7828 6964 3d73 7173 5f61 726e 322c  tex(id=sqs_arn2,
-00001630: 206e 6f64 655f 6e61 6d65 3d27 6576 656e   node_name='even
-00001640: 7473 3227 2c20 6172 6e3d 7371 735f 6172  ts2', arn=sqs_ar
-00001650: 6e32 2c20 6e6f 6465 5f74 7970 653d 2773  n2, node_type='s
-00001660: 7173 2729 0a20 2020 200a 2020 2020 7333  qs').    .    s3
-00001670: 5f61 726e 203d 2027 6172 6e3a 6177 733a  _arn = 'arn:aws:
-00001680: 7333 3a3a 3a62 7563 6b65 745f 6e61 6d65  s3:::bucket_name
-00001690: 2f6b 6579 5f6e 616d 6527 0a20 2020 206d  /key_name'.    m
-000016a0: 6364 2e61 6464 5f76 6572 7465 7828 6964  cd.add_vertex(id
-000016b0: 3d73 335f 6172 6e2c 206e 6f64 655f 6e61  =s3_arn, node_na
-000016c0: 6d65 3d27 6b65 795f 6e61 6d65 272c 2061  me='key_name', a
-000016d0: 726e 3d73 335f 6172 6e2c 206e 6f64 655f  rn=s3_arn, node_
-000016e0: 7479 7065 3d27 7333 2729 0a20 2020 200a  type='s3').    .
-000016f0: 2020 2020 6d63 642e 6164 645f 6c69 6e6b      mcd.add_link
-00001700: 2873 7263 5f6e 6f64 655f 6964 3d66 276c  (src_node_id=f'l
-00001710: 616d 6264 615f 6675 6e63 7469 6f6e 3a7b  ambda_function:{
-00001720: 7072 6f64 7563 6572 5f66 756e 635f 6172  producer_func_ar
-00001730: 6e7d 272c 2064 7374 5f6e 6f64 655f 6964  n}', dst_node_id
-00001740: 3d66 2773 6e73 3a7b 736e 735f 6172 6e7d  =f'sns:{sns_arn}
-00001750: 2729 0a20 2020 206d 6364 2e61 6464 5f6c  ').    mcd.add_l
-00001760: 696e 6b28 7372 635f 6e6f 6465 5f69 643d  ink(src_node_id=
-00001770: 6627 6c61 6d62 6461 5f66 756e 6374 696f  f'lambda_functio
-00001780: 6e3a 7b70 726f 6475 6365 725f 6675 6e63  n:{producer_func
-00001790: 5f61 726e 7d27 2c20 6473 745f 6e6f 6465  _arn}', dst_node
-000017a0: 5f69 643d 6627 7333 3a7b 7333 5f61 726e  _id=f's3:{s3_arn
-000017b0: 7d27 290a 2020 2020 6d63 642e 6164 645f  }').    mcd.add_
-000017c0: 6c69 6e6b 2873 7263 5f6e 6f64 655f 6964  link(src_node_id
-000017d0: 3d66 2773 6e73 3a7b 736e 735f 6172 6e7d  =f'sns:{sns_arn}
-000017e0: 272c 2064 7374 5f6e 6f64 655f 6964 3d66  ', dst_node_id=f
-000017f0: 2773 7173 3a7b 7371 735f 6172 6e7d 2729  'sqs:{sqs_arn}')
-00001800: 0a20 2020 206d 6364 2e61 6464 5f6c 696e  .    mcd.add_lin
-00001810: 6b28 7372 635f 6e6f 6465 5f69 643d 6627  k(src_node_id=f'
-00001820: 736e 733a 7b73 6e73 5f61 726e 7d27 2c20  sns:{sns_arn}', 
-00001830: 6473 745f 6e6f 6465 5f69 643d 6627 7371  dst_node_id=f'sq
-00001840: 733a 7b73 7173 5f61 726e 327d 2729 0a20  s:{sqs_arn2}'). 
-00001850: 2020 206d 6364 2e61 6464 5f6c 696e 6b28     mcd.add_link(
-00001860: 7372 635f 6e6f 6465 5f69 643d 6627 7371  src_node_id=f'sq
-00001870: 733a 7b73 7173 5f61 726e 7d27 2c20 6473  s:{sqs_arn}', ds
-00001880: 745f 6e6f 6465 5f69 643d 6627 6c61 6d62  t_node_id=f'lamb
-00001890: 6461 5f66 756e 6374 696f 6e3a 7b63 6f6e  da_function:{con
-000018a0: 7375 6d65 725f 6675 6e63 5f61 726e 7d27  sumer_func_arn}'
-000018b0: 290a 2020 2020 6d63 642e 6164 645f 6c69  ).    mcd.add_li
-000018c0: 6e6b 2873 7263 5f6e 6f64 655f 6964 3d66  nk(src_node_id=f
-000018d0: 276c 616d 6264 615f 6675 6e63 7469 6f6e  'lambda_function
-000018e0: 3a7b 636f 6e73 756d 6572 5f66 756e 635f  :{consumer_func_
-000018f0: 6172 6e7d 272c 2064 7374 5f6e 6f64 655f  arn}', dst_node_
-00001900: 6964 3d66 2764 796e 616d 6f3a 7b64 796e  id=f'dynamo:{dyn
-00001910: 616d 6f5f 6172 6e7d 2729 0a60 6060 0a0a  amo_arn}').```..
-00001920: 2d20 536f 7572 6365 205b 6177 735f 7365  - Source [aws_se
-00001930: 7276 6963 655f 656e 645f 325f 656e 645d  rvice_end_2_end]
-00001940: 2868 7474 7073 3a2f 2f67 6974 6875 622e  (https://github.
-00001950: 636f 6d2f 7473 7970 756b 2f6d 756c 7469  com/tsypuk/multi
-00001960: 636c 6f75 642d 6469 6167 7261 6d73 2f62  cloud-diagrams/b
-00001970: 6c6f 622f 6d61 696e 2f73 616d 706c 6573  lob/main/samples
-00001980: 2f73 616d 706c 6573 2f61 7773 5f73 6572  /samples/aws_ser
-00001990: 7669 6365 5f65 6e64 5f32 5f65 6e64 2e70  vice_end_2_end.p
-000019a0: 7929 0a2d 204f 7574 7075 7420 636f 6d70  y).- Output comp
-000019b0: 696c 6564 205b 6f75 7470 7574 2e70 726f  iled [output.pro
-000019c0: 642e 656e 6432 656e 642e 6472 6177 696f  d.end2end.drawio
-000019d0: 5d28 6874 7470 733a 2f2f 7261 772e 6769  ](https://raw.gi
-000019e0: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
-000019f0: 636f 6d2f 7473 7970 756b 2f6d 756c 7469  com/tsypuk/multi
-00001a00: 636c 6f75 642d 6469 6167 7261 6d73 2f6d  cloud-diagrams/m
-00001a10: 6169 6e2f 7361 6d70 6c65 732f 6f75 7470  ain/samples/outp
-00001a20: 7574 2f6f 7574 7075 742e 7072 6f64 2e65  ut/output.prod.e
-00001a30: 6e64 3265 6e64 2e64 7261 7769 6f29 0a0a  nd2end.drawio)..
-00001a40: 215b 6f75 7470 7574 2e70 726f 642e 6961  ![output.prod.ia
-00001a50: 6d2d 726f 6c65 732e 706e 675d 2868 7474  m-roles.png](htt
-00001a60: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00001a70: 7473 7970 756b 2f6d 756c 7469 636c 6f75  tsypuk/multiclou
-00001a80: 642d 6469 6167 7261 6d73 2f62 6c6f 622f  d-diagrams/blob/
-00001a90: 6d61 696e 2f73 616d 706c 6573 2f6f 7574  main/samples/out
-00001aa0: 7075 742f 706e 672f 6f75 7470 7574 2e70  put/png/output.p
-00001ab0: 726f 642e 656e 6432 656e 642e 706e 673f  rod.end2end.png?
-00001ac0: 7261 773d 5472 7565 290a 0a0a 2323 2323  raw=True)...####
-00001ad0: 2033 2e20 4765 6e65 7261 7469 6e67 2044   3. Generating D
-00001ae0: 6961 6772 616d 2066 726f 6d20 5941 4d4c  iagram from YAML
-00001af0: 2073 6f75 7263 650a 0a60 6060 7961 6d6c   source..```yaml
-00001b00: 0a76 6572 7469 6365 733a 0a20 202d 206e  .vertices:.  - n
-00001b10: 616d 653a 2070 726f 642d 6c61 6d62 6461  ame: prod-lambda
-00001b20: 2d6e 616d 650a 2020 2020 7479 7065 3a20  -name.    type: 
-00001b30: 6c61 6d62 6461 5f66 756e 6374 696f 6e0a  lambda_function.
-00001b40: 2020 2020 6172 6e3a 2061 726e 3a61 7773      arn: arn:aws
-00001b50: 3a6c 616d 6264 613a 6575 2d77 6573 742d  :lambda:eu-west-
-00001b60: 313a 3132 3334 3536 3738 393a 6675 6e63  1:123456789:func
-00001b70: 7469 6f6e 3a70 726f 642d 6c61 6d62 6461  tion:prod-lambda
-00001b80: 2d6e 616d 650a 2020 2d20 6e61 6d65 3a20  -name.  - name: 
-00001b90: 726f 6c65 2d6c 616d 6264 612d 6e61 6d65  role-lambda-name
-00001ba0: 0a20 2020 2074 7970 653a 2069 616d 5f72  .    type: iam_r
-00001bb0: 6f6c 650a 2020 2020 6172 6e3a 2061 726e  ole.    arn: arn
-00001bc0: 3a61 7773 3a69 616d 3a3a 3132 3334 3536  :aws:iam::123456
-00001bd0: 3738 393a 726f 6c65 2f70 726f 642d 6c61  789:role/prod-la
-00001be0: 6d62 6461 2d6e 616d 650a 2020 2d20 6e61  mbda-name.  - na
-00001bf0: 6d65 3a20 7072 6f64 2d63 6c6f 7564 7761  me: prod-cloudwa
-00001c00: 7463 682d 706f 6c69 6379 0a20 2020 2069  tch-policy.    i
-00001c10: 636f 6e3a 2062 726f 6b65 720a 2020 2020  con: broker.    
-00001c20: 7479 7065 3a20 6961 6d5f 706f 6c69 6379  type: iam_policy
-00001c30: 0a20 2020 2061 726e 3a20 6172 6e3a 6177  .    arn: arn:aw
-00001c40: 733a 6961 6d3a 3a31 3233 3435 3637 3839  s:iam::123456789
-00001c50: 3a70 6f6c 6963 792f 7072 6f64 2d63 6c6f  :policy/prod-clo
-00001c60: 7564 7761 7463 682d 706f 6c69 6379 0a20  udwatch-policy. 
-00001c70: 202d 206e 616d 653a 2070 726f 642d 7333   - name: prod-s3
-00001c80: 2d70 6f6c 6963 790a 2020 2020 7479 7065  -policy.    type
-00001c90: 3a20 6961 6d5f 706f 6c69 6379 0a20 2020  : iam_policy.   
-00001ca0: 2061 726e 3a20 6172 6e3a 6177 733a 6961   arn: arn:aws:ia
-00001cb0: 6d3a 3a31 3233 3435 3637 3839 3a70 6f6c  m::123456789:pol
-00001cc0: 6963 792f 7072 6f64 2d73 332d 706f 6c69  icy/prod-s3-poli
-00001cd0: 6379 0a20 202d 206e 616d 653a 2070 726f  cy.  - name: pro
-00001ce0: 642d 6479 6e61 6d6f 6462 2d70 6f6c 6963  d-dynamodb-polic
-00001cf0: 790a 2020 2020 7479 7065 3a20 6961 6d5f  y.    type: iam_
-00001d00: 706f 6c69 6379 0a20 2020 2061 726e 3a20  policy.    arn: 
-00001d10: 6172 6e3a 6177 733a 6961 6d3a 3a31 3233  arn:aws:iam::123
-00001d20: 3435 3637 3839 3a70 6f6c 6963 792f 7072  456789:policy/pr
-00001d30: 6f64 2d64 796e 616d 6f2d 706f 6c69 6379  od-dynamo-policy
-00001d40: 0a65 6467 6573 3a0a 2320 2031 7374 2061  .edges:.#  1st a
-00001d50: 7070 726f 6163 6820 7372 632f 6473 7420  pproach src/dst 
-00001d60: 6172 6520 6c69 6e6b 6564 2074 6f20 7961  are linked to ya
-00001d70: 6d6c 2076 6572 7469 6365 7320 6279 206e  ml vertices by n
-00001d80: 616d 650a 2020 2d20 7b20 7372 633a 2070  ame.  - { src: p
-00001d90: 726f 642d 6c61 6d62 6461 2d6e 616d 652c  rod-lambda-name,
-00001da0: 2064 7374 3a20 726f 6c65 2d6c 616d 6264   dst: role-lambd
-00001db0: 612d 6e61 6d65 2c20 6c61 6265 6c3a 2048  a-name, label: H
-00001dc0: 6173 526f 6c65 2c20 6c69 6e6b 5f74 7970  asRole, link_typ
-00001dd0: 653a 206e 6f6e 6520 7d0a 2020 2d20 7b20  e: none }.  - { 
-00001de0: 7372 633a 2072 6f6c 652d 6c61 6d62 6461  src: role-lambda
-00001df0: 2d6e 616d 652c 2064 7374 3a20 7072 6f64  -name, dst: prod
-00001e00: 2d63 6c6f 7564 7761 7463 682d 706f 6c69  -cloudwatch-poli
-00001e10: 6379 2c20 6c61 6265 6c3a 2041 6c6c 6f77  cy, label: Allow
-00001e20: 2043 6c6f 7564 5761 7463 6820 6c6f 6773   CloudWatch logs
-00001e30: 2c20 6c69 6e6b 5f74 7970 653a 206e 6f6e  , link_type: non
-00001e40: 6520 7d0a 2320 2032 6e64 2061 7070 726f  e }.#  2nd appro
-00001e50: 6163 6820 7372 632f 6473 7420 6172 6520  ach src/dst are 
-00001e60: 6c69 6e6b 6564 2062 7920 4152 4e20 2841  linked by ARN (A
-00001e70: 524e 2063 616e 2062 6520 7072 6573 656e  RN can be presen
-00001e80: 7420 696e 2073 616d 6520 7961 6d6c 2c20  t in same yaml, 
-00001e90: 6f72 206c 6f61 6465 6420 7072 6f67 7261  or loaded progra
-00001ea0: 6d6d 6174 6963 616c 6c79 290a 2020 2d20  mmatically).  - 
-00001eb0: 7b0a 2020 2020 7372 635f 6172 6e3a 2061  {.    src_arn: a
-00001ec0: 726e 3a61 7773 3a69 616d 3a3a 3132 3334  rn:aws:iam::1234
-00001ed0: 3536 3738 393a 726f 6c65 2f70 726f 642d  56789:role/prod-
-00001ee0: 6c61 6d62 6461 2d6e 616d 652c 0a20 2020  lambda-name,.   
-00001ef0: 2073 7263 5f74 7970 653a 2069 616d 5f72   src_type: iam_r
-00001f00: 6f6c 652c 0a20 2020 2064 7374 5f61 726e  ole,.    dst_arn
-00001f10: 3a20 6172 6e3a 6177 733a 6961 6d3a 3a31  : arn:aws:iam::1
-00001f20: 3233 3435 3637 3839 3a70 6f6c 6963 792f  23456789:policy/
-00001f30: 7072 6f64 2d73 332d 706f 6c69 6379 2c0a  prod-s3-policy,.
-00001f40: 2020 2020 6473 745f 7479 7065 3a20 6961      dst_type: ia
-00001f50: 6d5f 706f 6c69 6379 2c0a 2020 2020 6c61  m_policy,.    la
-00001f60: 6265 6c3a 2041 6c6c 6f77 2053 3320 6163  bel: Allow S3 ac
-00001f70: 6365 7373 2c0a 2020 2020 6c69 6e6b 5f74  cess,.    link_t
-00001f80: 7970 653a 206e 6f6e 6520 7d0a 2320 3372  ype: none }.# 3r
-00001f90: 6420 6170 7072 6f61 6368 2069 7320 6d69  d approach is mi
-00001fa0: 7865 6420 6f66 2031 7374 2061 6e64 2032  xed of 1st and 2
-00001fb0: 6e64 0a20 202d 207b 0a20 2020 2073 7263  nd.  - {.    src
-00001fc0: 5f61 726e 3a20 6172 6e3a 6177 733a 6961  _arn: arn:aws:ia
-00001fd0: 6d3a 3a31 3233 3435 3637 3839 3a72 6f6c  m::123456789:rol
-00001fe0: 652f 7072 6f64 2d6c 616d 6264 612d 6e61  e/prod-lambda-na
-00001ff0: 6d65 2c0a 2020 2020 7372 635f 7479 7065  me,.    src_type
-00002000: 3a20 6961 6d5f 726f 6c65 2c0a 2020 2020  : iam_role,.    
-00002010: 6473 743a 2070 726f 642d 6479 6e61 6d6f  dst: prod-dynamo
-00002020: 6462 2d70 6f6c 6963 792c 0a20 2020 206c  db-policy,.    l
-00002030: 6162 656c 3a20 416c 6c6f 7720 4479 6e61  abel: Allow Dyna
-00002040: 6d6f 4442 2072 6561 6420 6163 6365 7373  moDB read access
-00002050: 2c0a 2020 2020 6c69 6e6b 5f74 7970 653a  ,.    link_type:
-00002060: 206e 6f6e 6520 7d0a 6060 600a 2d20 536f   none }.```.- So
-00002070: 7572 6365 205b 6177 735f 6961 6d5f 6672  urce [aws_iam_fr
-00002080: 6f6d 5f79 616d 6c2e 7079 5d28 6874 7470  om_yaml.py](http
-00002090: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f74  s://github.com/t
-000020a0: 7379 7075 6b2f 6d75 6c74 6963 6c6f 7564  sypuk/multicloud
-000020b0: 2d64 6961 6772 616d 732f 626c 6f62 2f6d  -diagrams/blob/m
-000020c0: 6169 6e2f 7361 6d70 6c65 732f 7361 6d70  ain/samples/samp
-000020d0: 6c65 732f 6177 735f 6961 6d5f 6672 6f6d  les/aws_iam_from
-000020e0: 5f79 616d 6c2e 7079 290a 2d20 4f75 7470  _yaml.py).- Outp
-000020f0: 7574 2063 6f6d 7069 6c65 6420 5b6f 7574  ut compiled [out
-00002100: 7075 742e 7072 6f64 2e69 616d 2d72 6f6c  put.prod.iam-rol
-00002110: 6573 2d66 726f 6d2d 7961 6d6c 2e64 7261  es-from-yaml.dra
-00002120: 7769 6f5d 2868 7474 7073 3a2f 2f72 6177  wio](https://raw
-00002130: 2e67 6974 6875 6275 7365 7263 6f6e 7465  .githubuserconte
-00002140: 6e74 2e63 6f6d 2f74 7379 7075 6b2f 6d75  nt.com/tsypuk/mu
-00002150: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
-00002160: 732f 6d61 696e 2f73 616d 706c 6573 2f6f  s/main/samples/o
-00002170: 7574 7075 742f 6f75 7470 7574 2e70 726f  utput/output.pro
-00002180: 642e 6961 6d2d 726f 6c65 732d 6672 6f6d  d.iam-roles-from
-00002190: 2d79 616d 6c2e 6472 6177 696f 290a 0a2d  -yaml.drawio)..-
-000021a0: 2021 5b6f 7574 7075 742e 7072 6f64 2e69   ![output.prod.i
-000021b0: 616d 2d72 6f6c 6573 2e70 6e67 5d28 6874  am-roles.png](ht
-000021c0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-000021d0: 2f74 7379 7075 6b2f 6d75 6c74 6963 6c6f  /tsypuk/multiclo
-000021e0: 7564 2d64 6961 6772 616d 732f 626c 6f62  ud-diagrams/blob
-000021f0: 2f6d 6169 6e2f 7361 6d70 6c65 732f 6f75  /main/samples/ou
-00002200: 7470 7574 2f70 6e67 2f6f 7574 7075 742e  tput/png/output.
-00002210: 7072 6f64 2e69 616d 2d72 6f6c 6573 2d66  prod.iam-roles-f
-00002220: 726f 6d2d 7961 6d6c 2e70 6e67 3f72 6177  rom-yaml.png?raw
-00002230: 3d54 7275 6529 0a0a 6060 6073 6865 6c6c  =True)..```shell
-00002240: 0a70 6f65 7472 7920 6275 696c 640a 6578  .poetry build.ex
-00002250: 706f 7274 2050 5950 495f 5553 4552 4e41  port PYPI_USERNA
-00002260: 4d45 3d0a 6578 706f 7274 2050 5950 495f  ME=.export PYPI_
-00002270: 5041 5353 574f 5244 3d0a 706f 6574 7279  PASSWORD=.poetry
-00002280: 2070 7562 6c69 7368 202d 2d62 7569 6c64   publish --build
-00002290: 202d 2d75 7365 726e 616d 6520 2450 5950   --username $PYP
-000022a0: 495f 5553 4552 4e41 4d45 202d 2d70 6173  I_USERNAME --pas
-000022b0: 7377 6f72 6420 2450 5950 495f 5041 5353  sword $PYPI_PASS
-000022c0: 574f 5244 0a0a 6364 2073 616d 706c 6573  WORD..cd samples
-000022d0: 2f73 616d 706c 6573 0a70 6f65 7472 7920  /samples.poetry 
-000022e0: 696e 7374 616c 6c0a 706f 6574 7279 2072  install.poetry r
-000022f0: 756e 2070 7974 686f 6e20 6177 735f 6961  un python aws_ia
-00002300: 6d5f 726f 6c65 735f 6672 6f6d 5f63 6f64  m_roles_from_cod
-00002310: 655f 7769 7468 5f65 6e75 6d2e 7079 0a60  e_with_enum.py.`
-00002320: 6060 0a0a 2323 2320 4659 493a 0a0a 4f70  ``..### FYI:..Op
-00002330: 656e 536f 7572 6365 2047 7569 6465 2c20  enSource Guide, 
-00002340: 5b48 6f77 2074 6f20 636f 6e74 7269 6275  [How to contribu
-00002350: 7465 2074 6f20 6f70 656e 736f 7572 6365  te to opensource
-00002360: 5d28 6874 7470 733a 2f2f 6f70 656e 736f  ](https://openso
-00002370: 7572 6365 2e67 7569 6465 2f29 0a         urce.guide/).
+00000200: 6f77 6e0a 0a23 204d 756c 7469 436c 6f75  own..# MultiClou
+00000210: 6420 4469 6167 7261 6d73 0a0a 5b21 5b6c  d Diagrams..[![l
+00000220: 6963 656e 7365 5d28 6874 7470 733a 2f2f  icense](https://
+00000230: 696d 672e 7368 6965 6c64 732e 696f 2f62  img.shields.io/b
+00000240: 6164 6765 2f6c 6963 656e 7365 2d4d 4954  adge/license-MIT
+00000250: 2d62 6c75 652e 7376 6729 5d28 2f4c 4943  -blue.svg)](/LIC
+00000260: 454e 5345 290a 5b21 5b50 7950 4920 7665  ENSE).[![PyPI ve
+00000270: 7273 696f 6e5d 2868 7474 7073 3a2f 2f62  rsion](https://b
+00000280: 6164 6765 2e66 7572 792e 696f 2f70 792f  adge.fury.io/py/
+00000290: 6d75 6c74 6963 6c6f 7564 2d64 6961 6772  multicloud-diagr
+000002a0: 616d 732e 7376 6729 5d28 6874 7470 733a  ams.svg)](https:
+000002b0: 2f2f 6261 6467 652e 6675 7279 2e69 6f2f  //badge.fury.io/
+000002c0: 7079 2f6d 756c 7469 636c 6f75 642d 6469  py/multicloud-di
+000002d0: 6167 7261 6d73 290a 215b 7079 7468 6f6e  agrams).![python
+000002e0: 2076 6572 7369 6f6e 5d28 6874 7470 733a   version](https:
+000002f0: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
+00000300: 2f62 6164 6765 2f70 7974 686f 6e2d 2533  /badge/python-%3
+00000310: 4525 3344 2532 3033 2e31 302d 626c 7565  E%3D%203.10-blue
+00000320: 3f6c 6f67 6f3d 7079 7468 6f6e 290a 0a47  ?logo=python)..G
+00000330: 656e 6572 6174 6520 616e 6420 7265 6e64  enerate and rend
+00000340: 6572 2044 6961 6772 616d 732d 4173 2d61  er Diagrams-As-a
+00000350: 2d43 6f64 6520 2844 4147 2920 696e 2070  -Code (DAG) in p
+00000360: 6f70 756c 6172 2060 6064 7261 7769 6f60  opular ``drawio`
+00000370: 6020 666f 726d 6174 2066 6f72 206d 756c  ` format for mul
+00000380: 7469 706c 6520 436c 6f75 6420 7072 6f76  tiple Cloud prov
+00000390: 6964 6572 732e 0a0a 3c61 2068 7265 663d  iders...<a href=
+000003a0: 2268 7474 7073 3a2f 2f77 7777 2e62 7579  "https://www.buy
+000003b0: 6d65 6163 6f66 6665 652e 636f 6d2f 7473  meacoffee.com/ts
+000003c0: 7970 756b 2220 7461 7267 6574 3d22 5f62  ypuk" target="_b
+000003d0: 6c61 6e6b 223e 3c69 6d67 2073 7263 3d22  lank"><img src="
+000003e0: 6874 7470 733a 2f2f 7777 772e 6275 796d  https://www.buym
+000003f0: 6561 636f 6666 6565 2e63 6f6d 2f61 7373  eacoffee.com/ass
+00000400: 6574 732f 696d 672f 6375 7374 6f6d 5f69  ets/img/custom_i
+00000410: 6d61 6765 732f 6f72 616e 6765 5f69 6d67  mages/orange_img
+00000420: 2e70 6e67 2220 616c 743d 2242 7579 204d  .png" alt="Buy M
+00000430: 6520 4120 436f 6666 6565 2220 7374 796c  e A Coffee" styl
+00000440: 653d 2268 6569 6768 743a 2034 3170 7820  e="height: 41px 
+00000450: 2169 6d70 6f72 7461 6e74 3b77 6964 7468  !important;width
+00000460: 3a20 3137 3470 7820 2169 6d70 6f72 7461  : 174px !importa
+00000470: 6e74 3b62 6f78 2d73 6861 646f 773a 2030  nt;box-shadow: 0
+00000480: 7078 2033 7078 2032 7078 2030 7078 2072  px 3px 2px 0px r
+00000490: 6762 6128 3139 302c 2031 3930 2c20 3139  gba(190, 190, 19
+000004a0: 302c 2030 2e35 2920 2169 6d70 6f72 7461  0, 0.5) !importa
+000004b0: 6e74 3b22 203e 3c2f 613e 0a0a 0a2d 2079  nt;" ></a>...- y
+000004c0: 6f75 2063 616e 2075 7365 2069 7420 6279  ou can use it by
+000004d0: 2064 6566 696e 696e 6720 6060 4469 6167   defining ``Diag
+000004e0: 7261 6d73 2061 7320 6120 436f 6465 6060  rams as a Code``
+000004f0: 2c20 636f 6d70 696c 6520 746f 2064 7261  , compile to dra
+00000500: 7769 6f20 7665 6374 6f72 2066 6f72 6d61  wio vector forma
+00000510: 742c 2065 6469 7420 7665 6374 6f72 2064  t, edit vector d
+00000520: 7261 7769 6f20 7265 7072 6573 656e 7461  rawio representa
+00000530: 7469 6f6e 2028 616c 6967 6e20 636f 6d70  tion (align comp
+00000540: 6f6e 656e 7473 206c 6f63 6174 696f 6e29  onents location)
+00000550: 2e0a 2d20 6f74 6865 7220 6f70 7469 6f6e  ..- other option
+00000560: 2069 7320 746f 2071 7565 7279 2069 6e66   is to query inf
+00000570: 7261 7374 7275 6374 7572 6520 656c 656d  rastructure elem
+00000580: 656e 7473 2077 6974 6820 706f 7075 6c61  ents with popula
+00000590: 7220 6c69 6272 6172 6965 732c 206c 696b  r libraries, lik
+000005a0: 6520 6177 7320 626f 746f 2c20 7072 6570  e aws boto, prep
+000005b0: 726f 6365 7373 2064 6573 6972 6564 2065  rocess desired e
+000005c0: 6c65 6d65 6e74 7320 616e 6420 636f 6d70  lements and comp
+000005d0: 696c 6520 7468 656d 2069 6e74 6f20 6472  ile them into dr
+000005e0: 6177 696f 2075 7369 6e67 2060 606d 756c  awio using ``mul
+000005f0: 7469 636c 6f75 642d 6469 6167 7261 6d73  ticloud-diagrams
+00000600: 6060 2e0a 0a2d 202a 2a53 6f75 7263 6520  ``...- **Source 
+00000610: 636f 6465 3a2a 2a20 6874 7470 733a 2f2f  code:** https://
+00000620: 6769 7468 7562 2e63 6f6d 2f74 7379 7075  github.com/tsypu
+00000630: 6b2f 6d75 6c74 6963 6c6f 7564 2d64 6961  k/multicloud-dia
+00000640: 6772 616d 730a 2d20 2a2a 5079 5049 206d  grams.- **PyPI m
+00000650: 756c 7469 636c 6f75 642d 6469 6167 7261  ulticloud-diagra
+00000660: 6d73 3a2a 2a20 6874 7470 733a 2f2f 7079  ms:** https://py
+00000670: 7069 2e6f 7267 2f70 726f 6a65 6374 2f6d  pi.org/project/m
+00000680: 756c 7469 636c 6f75 642d 6469 6167 7261  ulticloud-diagra
+00000690: 6d73 2f0a 2d20 2a2a 5370 6f6e 736f 7220  ms/.- **Sponsor 
+000006a0: 7072 6f6a 6563 743a 2a2a 2068 7474 7073  project:** https
+000006b0: 3a2f 2f70 6174 7265 6f6e 2e63 6f6d 2f74  ://patreon.com/t
+000006c0: 7379 7075 6b0a 2d20 2a2a 5669 6577 2063  sypuk.- **View c
+000006d0: 6861 6e67 656c 6f67 3a2a 2a20 6874 7470  hangelog:** http
+000006e0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f74  s://github.com/t
+000006f0: 7379 7075 6b2f 6d75 6c74 6963 6c6f 7564  sypuk/multicloud
+00000700: 2d64 6961 6772 616d 732f 626c 6f62 2f6d  -diagrams/blob/m
+00000710: 6169 6e2f 4348 414e 4745 4c4f 472e 4d44  ain/CHANGELOG.MD
+00000720: 0a2d 202a 2a42 7567 2072 6570 6f72 7473  .- **Bug reports
+00000730: 3a2a 2a20 6874 7470 733a 2f2f 6769 7468  :** https://gith
+00000740: 7562 2e63 6f6d 2f74 7379 7075 6b2f 6d75  ub.com/tsypuk/mu
+00000750: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
+00000760: 732f 6973 7375 6573 0a2d 202a 2a53 616d  s/issues.- **Sam
+00000770: 706c 6573 2061 6e64 2065 7861 6d70 6c65  ples and example
+00000780: 733a 2a2a 2068 7474 7073 3a2f 2f67 6974  s:** https://git
+00000790: 6875 622e 636f 6d2f 7473 7970 756b 2f6d  hub.com/tsypuk/m
+000007a0: 756c 7469 636c 6f75 642d 6469 6167 7261  ulticloud-diagra
+000007b0: 6d73 2f74 7265 652f 6d61 696e 2f73 616d  ms/tree/main/sam
+000007c0: 706c 6573 2f73 616d 706c 6573 0a0a 2323  ples/samples..##
+000007d0: 2053 7570 706f 7274 6564 2043 6c6f 7564   Supported Cloud
+000007e0: 2050 726f 7669 6465 730a 0a21 5b61 7773   Provides..![aws
+000007f0: 2070 726f 7669 6465 725d 2868 7474 7073   provider](https
+00000800: 3a2f 2f69 6d67 2e73 6869 656c 6473 2e69  ://img.shields.i
+00000810: 6f2f 6261 6467 652f 4157 532d 6f72 616e  o/badge/AWS-oran
+00000820: 6765 3f6c 6f67 6f3d 616d 617a 6f6e 2d61  ge?logo=amazon-a
+00000830: 7773 2663 6f6c 6f72 3d66 6639 3930 3029  ws&color=ff9900)
+00000840: 0a21 5b61 7a75 7265 2070 726f 7669 6465  .![azure provide
+00000850: 725d 2868 7474 7073 3a2f 2f69 6d67 2e73  r](https://img.s
+00000860: 6869 656c 6473 2e69 6f2f 6261 6467 652f  hields.io/badge/
+00000870: 417a 7572 652d 6f72 616e 6765 3f6c 6f67  Azure-orange?log
+00000880: 6f3d 6d69 6372 6f73 6f66 742d 617a 7572  o=microsoft-azur
+00000890: 6526 636f 6c6f 723d 3030 3839 6436 290a  e&color=0089d6).
+000008a0: 215b 6763 7020 7072 6f76 6964 6572 5d28  ![gcp provider](
+000008b0: 6874 7470 733a 2f2f 696d 672e 7368 6965  https://img.shie
+000008c0: 6c64 732e 696f 2f62 6164 6765 2f47 4350  lds.io/badge/GCP
+000008d0: 2d6f 7261 6e67 653f 6c6f 676f 3d67 6f6f  -orange?logo=goo
+000008e0: 676c 652d 636c 6f75 6426 636f 6c6f 723d  gle-cloud&color=
+000008f0: 3432 3835 6634 290a 215b 6f6e 2070 7265  4285f4).![on pre
+00000900: 6d69 7365 2070 726f 7669 6465 725d 2868  mise provider](h
+00000910: 7474 7073 3a2f 2f69 6d67 2e73 6869 656c  ttps://img.shiel
+00000920: 6473 2e69 6f2f 6261 6467 652f 4f6e 5072  ds.io/badge/OnPr
+00000930: 656d 6973 652d 6f72 616e 6765 3f63 6f6c  emise-orange?col
+00000940: 6f72 3d35 6638 3762 6629 0a0a 2323 2320  or=5f87bf)..### 
+00000950: 4665 6174 7572 6573 3a0a 2d20 616c 6c6f  Features:.- allo
+00000960: 7773 2074 6f20 6765 6e65 7261 7465 2064  ws to generate d
+00000970: 7261 7769 6f20 6469 6167 7261 6d20 7769  rawio diagram wi
+00000980: 7468 2070 7265 6465 6669 6e65 6420 7374  th predefined st
+00000990: 796c 6573 2066 6f72 2070 6f70 756c 6172  yles for popular
+000009a0: 2061 7773 2073 6572 7669 6365 732c 2073   aws services, s
+000009b0: 7570 706f 7274 2067 7261 7068 2d62 6173  upport graph-bas
+000009c0: 6564 2063 6f6e 6e65 6374 696f 6e20 7769  ed connection wi
+000009d0: 7468 206e 616d 6564 2065 6467 6573 0a2d  th named edges.-
+000009e0: 2073 7570 706f 7274 7320 7369 6e67 6c65   supports single
+000009f0: 2061 6e64 2062 6174 6368 2065 6c65 6d65   and batch eleme
+00000a00: 6e74 7320 6170 7065 6e64 2074 6f20 6469  nts append to di
+00000a10: 6167 7261 6d0a 2d20 6475 706c 6963 6174  agram.- duplicat
+00000a20: 6573 2064 6574 6563 7469 6f6e 2074 6f20  es detection to 
+00000a30: 7072 6576 656e 7420 6261 6c6c 206f 6620  prevent ball of 
+00000a40: 6d75 6420 696e 2066 696c 6520 666f 726d  mud in file form
+00000a50: 6174 2061 6e64 2064 6961 6772 616d 0a2d  at and diagram.-
+00000a60: 2076 6572 6966 6963 6174 696f 6e20 7468   verification th
+00000a70: 6174 2062 6f74 6820 7665 7274 6963 6573  at both vertices
+00000a80: 2070 7265 7365 6e74 206f 6e20 6469 6167   present on diag
+00000a90: 7261 6d20 7768 656e 2061 6464 696e 6720  ram when adding 
+00000aa0: 6564 6765 2063 6f6e 6e65 6374 696f 6e20  edge connection 
+00000ab0: 6265 7477 6565 6e20 7468 656d 200a 2d20  between them .- 
+00000ac0: 6966 2074 6865 206e 6f64 6520 6973 206e  if the node is n
+00000ad0: 6f74 2070 7265 7365 6e74 2c20 6661 6c6c  ot present, fall
+00000ae0: 6261 636b 2074 6f20 6465 6661 756c 7420  back to default 
+00000af0: 6963 6f6e 2077 6865 6e20 7265 6e64 6572  icon when render
+00000b00: 696e 670a 2d20 7265 6164 2070 7265 7669  ing.- read previ
+00000b10: 6f75 7320 7665 7273 696f 6e20 6f66 2064  ous version of d
+00000b20: 7261 7769 6f20 6669 6c65 2061 6e64 2072  rawio file and r
+00000b30: 6575 7365 7320 6578 6973 7469 6e67 2076  euses existing v
+00000b40: 6572 7469 6365 7320 636f 6f72 6469 6e61  ertices coordina
+00000b50: 7465 7320 7768 656e 2067 656e 6572 6174  tes when generat
+00000b60: 696e 6720 6120 6e65 7720 7665 7273 696f  ing a new versio
+00000b70: 6e0a 2d20 6765 6e65 7261 7465 2064 6961  n.- generate dia
+00000b80: 6772 616d 2066 726f 6d20 6060 5941 4d4c  gram from ``YAML
+00000b90: 6060 2064 6566 696e 6974 696f 6e0a 2d20  `` definition.- 
+00000ba0: 6d69 7820 616e 6420 6175 676d 656e 7420  mix and augment 
+00000bb0: 4469 6167 7261 6d2d 6173 2d63 6f64 652c  Diagram-as-code,
+00000bc0: 2072 6561 6c20 696e 6672 6120 6372 6177   real infra craw
+00000bd0: 6c65 722c 2073 7461 7469 6320 7961 6d6c  ler, static yaml
+00000be0: 2d62 6173 6564 2063 6f6e 7465 6e74 2074  -based content t
+00000bf0: 6f20 6469 6167 7261 6d0a 0a23 2323 2053  o diagram..### S
+00000c00: 7570 706f 7274 6564 2041 5753 2073 6572  upported AWS ser
+00000c10: 7669 6365 733a 0a0a 2d20 6c61 6d62 6461  vices:..- lambda
+00000c20: 5f66 756e 6374 696f 6e0a 2d20 7371 730a  _function.- sqs.
+00000c30: 2d20 736e 730a 2d20 6961 6d5f 726f 6c65  - sns.- iam_role
+00000c40: 2f69 616d 5f70 6f6c 6963 792f 6961 6d5f  /iam_policy/iam_
+00000c50: 7065 726d 6973 7369 6f6e 0a2d 2064 796e  permission.- dyn
+00000c60: 616d 6f2f 6479 6e61 6d6f 5f73 7472 6561  amo/dynamo_strea
+00000c70: 6d0a 2d20 6170 695f 6777 0a2d 2073 330a  m.- api_gw.- s3.
+00000c80: 2d20 6b6d 730a 2d20 7373 6d0a 0a23 2323  - kms.- ssm..###
+00000c90: 204c 6962 7261 7279 2063 616e 2062 6520   Library can be 
+00000ca0: 7573 6564 2077 6974 6820 6469 6666 6572  used with differ
+00000cb0: 656e 7420 6170 7072 6f61 6368 6573 2061  ent approaches a
+00000cc0: 6e64 2065 7665 6e20 6d69 7820 616c 6c20  nd even mix all 
+00000cd0: 6f66 2074 6865 6d2e 2053 616d 706c 6573  of them. Samples
+00000ce0: 2061 6e64 2075 7361 6765 3a0a 0a23 2323   and usage:..###
+00000cf0: 2320 312e 2047 656e 6572 6174 696e 6720  # 1. Generating 
+00000d00: 4157 5320 4479 6e61 6d6f 4442 2044 6574  AWS DynamoDB Det
+00000d10: 6169 6c73 2064 7261 7769 6f20 6469 6167  ails drawio diag
+00000d20: 7261 6d20 6261 7365 6420 6f6e 206c 6962  ram based on lib
+00000d30: 7261 7279 2c20 6874 7470 2c20 6177 7363  rary, http, awsc
+00000d40: 6c69 2c20 6574 632e 2045 7861 6d70 6c65  li, etc. Example
+00000d50: 2062 6173 6564 206f 6e20 626f 746f 3320   based on boto3 
+00000d60: 4479 6e61 6d6f 4442 2072 6573 706f 6e73  DynamoDB respons
+00000d70: 650a 0a60 6060 6a73 6f6e 0a7b 0a20 2020  e..```json.{.   
+00000d80: 2020 2020 2027 4174 7472 6962 7574 6544       'AttributeD
+00000d90: 6566 696e 6974 696f 6e73 273a 205b 0a20  efinitions': [. 
+00000da0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
+00000db0: 2020 2020 2020 2020 2020 2020 2027 4174               'At
+00000dc0: 7472 6962 7574 654e 616d 6527 3a20 2766  tributeName': 'f
+00000dd0: 6972 7374 272c 0a20 2020 2020 2020 2020  irst',.         
+00000de0: 2020 2020 2020 2027 4174 7472 6962 7574         'Attribut
+00000df0: 6554 7970 6527 3a20 2753 270a 2020 2020  eType': 'S'.    
+00000e00: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00000e10: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00000e20: 2020 2020 2020 2020 2027 4174 7472 6962           'Attrib
+00000e30: 7574 654e 616d 6527 3a20 2773 6563 6f6e  uteName': 'secon
+00000e40: 6427 2c0a 2020 2020 2020 2020 2020 2020  d',.            
+00000e50: 2020 2020 2741 7474 7269 6275 7465 5479      'AttributeTy
+00000e60: 7065 273a 2027 4e27 0a20 2020 2020 2020  pe': 'N'.       
+00000e70: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
+00000e80: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00000e90: 2020 2020 2020 2741 7474 7269 6275 7465        'Attribute
+00000ea0: 4e61 6d65 273a 2027 7468 6972 6427 2c0a  Name': 'third',.
+00000eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ec0: 2741 7474 7269 6275 7465 5479 7065 273a  'AttributeType':
+00000ed0: 2027 4227 0a20 2020 2020 2020 2020 2020   'B'.           
+00000ee0: 207d 2c0a 2020 2020 2020 2020 5d2c 0a20   },.        ],. 
+00000ef0: 2020 2020 2020 2027 5461 626c 654e 616d         'TableNam
+00000f00: 6527 3a20 2770 726f 642d 6479 6e61 6d6f  e': 'prod-dynamo
+00000f10: 2d74 6162 6c65 272c 0a20 2020 2020 2020  -table',.       
+00000f20: 2027 4b65 7953 6368 656d 6127 3a20 5b0a   'KeySchema': [.
+00000f30: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00000f40: 2020 2020 2020 2020 2020 2020 2020 2741                'A
+00000f50: 7474 7269 6275 7465 4e61 6d65 273a 2027  ttributeName': '
+00000f60: 7374 7269 6e67 272c 0a20 2020 2020 2020  string',.       
+00000f70: 2020 2020 2020 2020 2027 4b65 7954 7970           'KeyTyp
+00000f80: 6527 3a20 2748 4153 4827 0a20 2020 2020  e': 'HASH'.     
+00000f90: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00000fa0: 2020 5d2c 0a20 2020 2020 2020 2027 5461    ],.        'Ta
+00000fb0: 626c 6553 697a 6542 7974 6573 273a 2031  bleSizeBytes': 1
+00000fc0: 3233 2c0a 2020 2020 2020 2020 2749 7465  23,.        'Ite
+00000fd0: 6d43 6f75 6e74 273a 2031 3233 2c0a 2020  mCount': 123,.  
+00000fe0: 2020 2020 2020 2754 6162 6c65 4172 6e27        'TableArn'
+00000ff0: 3a20 2761 726e 3a61 7773 3a64 796e 616d  : 'arn:aws:dynam
+00001000: 6f64 623a 6575 2d77 6573 742d 313a 3132  odb:eu-west-1:12
+00001010: 3334 3536 3738 393a 7461 626c 652f 7072  3456789:table/pr
+00001020: 6f64 2d64 796e 616d 6f2d 7461 626c 6527  od-dynamo-table'
+00001030: 2c0a 2020 2020 2020 2020 274c 6f63 616c  ,.        'Local
+00001040: 5365 636f 6e64 6172 7949 6e64 6578 6573  SecondaryIndexes
+00001050: 273a 205b 7b0a 2e2e 2e20 2020 2020 2020  ': [{....       
+00001060: 0a2e 2e2e 0a2e 2e2e 0a20 2020 2020 2020  .........       
+00001070: 2020 200a 2020 2020 2020 2020 2020 2753     .          'S
+00001080: 5345 4465 7363 7269 7074 696f 6e27 3a20  SEDescription': 
+00001090: 7b0a 2020 2020 2020 2020 2020 2020 2753  {.            'S
+000010a0: 7461 7475 7327 3a20 2745 4e41 424c 4544  tatus': 'ENABLED
+000010b0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+000010c0: 5353 4554 7970 6527 3a20 274b 4d53 272c  SSEType': 'KMS',
+000010d0: 0a20 2020 2020 2020 2020 2020 2027 4b4d  .            'KM
+000010e0: 534d 6173 7465 724b 6579 4172 6e27 3a20  SMasterKeyArn': 
+000010f0: 2773 7472 696e 6727 2c0a 2020 2020 2020  'string',.      
+00001100: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00001110: 2027 4465 6c65 7469 6f6e 5072 6f74 6563   'DeletionProtec
+00001120: 7469 6f6e 456e 6162 6c65 6427 3a20 5472  tionEnabled': Tr
+00001130: 7565 0a20 2020 2020 2020 207d 0a60 6060  ue.        }.```
+00001140: 0a0a 2d20 536f 7572 6365 205b 6177 735f  ..- Source [aws_
+00001150: 6479 6e61 6d6f 5f62 6f74 6f33 5f72 6573  dynamo_boto3_res
+00001160: 706f 6e73 652e 7079 5d28 6874 7470 733a  ponse.py](https:
+00001170: 2f2f 6769 7468 7562 2e63 6f6d 2f74 7379  //github.com/tsy
+00001180: 7075 6b2f 6d75 6c74 6963 6c6f 7564 2d64  puk/multicloud-d
+00001190: 6961 6772 616d 732f 626c 6f62 2f6d 6169  iagrams/blob/mai
+000011a0: 6e2f 7361 6d70 6c65 732f 7361 6d70 6c65  n/samples/sample
+000011b0: 732f 6177 735f 6479 6e61 6d6f 5f62 6f74  s/aws_dynamo_bot
+000011c0: 6f33 5f72 6573 706f 6e73 652e 7079 290a  o3_response.py).
+000011d0: 2d20 4f75 7470 7574 2063 6f6d 7069 6c65  - Output compile
+000011e0: 6420 5b6f 7574 7075 742e 7072 6f64 2e64  d [output.prod.d
+000011f0: 796e 616d 6f2e 6472 6177 696f 5d28 6874  ynamo.drawio](ht
+00001200: 7470 733a 2f2f 7261 772e 6769 7468 7562  tps://raw.github
+00001210: 7573 6572 636f 6e74 656e 742e 636f 6d2f  usercontent.com/
+00001220: 7473 7970 756b 2f6d 756c 7469 636c 6f75  tsypuk/multiclou
+00001230: 642d 6469 6167 7261 6d73 2f6d 6169 6e2f  d-diagrams/main/
+00001240: 7361 6d70 6c65 732f 6f75 7470 7574 2f6f  samples/output/o
+00001250: 7574 7075 742e 7072 6f64 2e64 796e 616d  utput.prod.dynam
+00001260: 6f2e 6472 6177 696f 293a 0a0a 215b 6f75  o.drawio):..![ou
+00001270: 7470 7574 2e70 726f 642e 6479 6e61 6d6f  tput.prod.dynamo
+00001280: 2e70 6e67 5d28 6874 7470 733a 2f2f 6769  .png](https://gi
+00001290: 7468 7562 2e63 6f6d 2f74 7379 7075 6b2f  thub.com/tsypuk/
+000012a0: 6d75 6c74 6963 6c6f 7564 2d64 6961 6772  multicloud-diagr
+000012b0: 616d 732f 7261 772f 6d61 696e 2f73 616d  ams/raw/main/sam
+000012c0: 706c 6573 2f6f 7574 7075 742f 706e 672f  ples/output/png/
+000012d0: 6f75 7470 7574 2e70 726f 642e 6479 6e61  output.prod.dyna
+000012e0: 6d6f 2e70 6e67 3f72 6177 3d54 7275 6529  mo.png?raw=True)
+000012f0: 0a0a 2323 2323 2032 2e20 4469 6167 7261  ..#### 2. Diagra
+00001300: 6d73 2061 7320 6120 436f 6465 2e20 4441  ms as a Code. DA
+00001310: 472e 2047 656e 6572 6174 696e 6720 4157  G. Generating AW
+00001320: 5320 4941 4d20 4772 6170 6820 6672 6f6d  S IAM Graph from
+00001330: 2074 6865 2063 6f64 6520 6261 7365 6420   the code based 
+00001340: 6f6e 2044 4147 2064 6563 6c61 7261 7469  on DAG declarati
+00001350: 6f6e 3a0a 0a60 6060 7079 7468 6f6e 0a20  on:..```python. 
+00001360: 2020 2070 726f 6475 6365 725f 6675 6e63     producer_func
+00001370: 5f61 726e 203d 2027 6172 6e3a 6177 733a  _arn = 'arn:aws:
+00001380: 6c61 6d62 6461 3a65 752d 7765 7374 2d31  lambda:eu-west-1
+00001390: 3a31 3233 3435 3637 3839 3a66 756e 6374  :123456789:funct
+000013a0: 696f 6e3a 7072 6f64 7563 6572 2d6c 616d  ion:producer-lam
+000013b0: 6264 6127 0a20 2020 206d 6574 6164 6174  bda'.    metadat
+000013c0: 6120 3d20 7b0a 2020 2020 2020 2020 2243  a = {.        "C
+000013d0: 6f64 6553 697a 6522 3a20 3132 3334 2c0a  odeSize": 1234,.
+000013e0: 2020 2020 2020 2020 2248 616e 646c 6572          "Handler
+000013f0: 223a 2022 6d61 696e 222c 0a20 2020 2020  ": "main",.     
+00001400: 2020 2022 4c61 7965 7273 223a 2030 2c0a     "Layers": 0,.
+00001410: 2020 2020 2020 2020 224d 656d 6f72 7922          "Memory"
+00001420: 3a20 3132 382c 0a20 2020 2020 2020 2022  : 128,.        "
+00001430: 5061 636b 6167 6554 7970 6522 3a20 225a  PackageType": "Z
+00001440: 6970 222c 0a20 2020 2020 2020 2022 5275  ip",.        "Ru
+00001450: 6e74 696d 6522 3a20 2267 6f31 2e78 222c  ntime": "go1.x",
+00001460: 0a20 2020 2020 2020 2022 5469 6d65 6f75  .        "Timeou
+00001470: 7422 3a20 3330 2c0a 2020 2020 2020 2020  t": 30,.        
+00001480: 2254 7261 6369 6e67 436f 6e66 6967 223a  "TracingConfig":
+00001490: 2022 7b27 4d6f 6465 273a 2027 4163 7469   "{'Mode': 'Acti
+000014a0: 7665 277d 222c 0a20 2020 2020 2020 2022  ve'}",.        "
+000014b0: 5665 7273 696f 6e22 3a20 2224 4c41 5445  Version": "$LATE
+000014c0: 5354 220a 2020 2020 7d0a 2020 2020 6d63  ST".    }.    mc
+000014d0: 642e 6164 645f 7665 7274 6578 2869 643d  d.add_vertex(id=
+000014e0: 7072 6f64 7563 6572 5f66 756e 635f 6172  producer_func_ar
+000014f0: 6e2c 206e 6f64 655f 6e61 6d65 3d27 7072  n, node_name='pr
+00001500: 6f64 7563 6572 2d6c 616d 6264 6127 2c20  oducer-lambda', 
+00001510: 6172 6e3d 7072 6f64 7563 6572 5f66 756e  arn=producer_fun
+00001520: 635f 6172 6e2c 206e 6f64 655f 7479 7065  c_arn, node_type
+00001530: 3d27 6c61 6d62 6461 5f66 756e 6374 696f  ='lambda_functio
+00001540: 6e27 2c20 6d65 7461 6461 7461 3d6d 6574  n', metadata=met
+00001550: 6164 6174 6129 0a20 2020 200a 2020 2020  adata).    .    
+00001560: 636f 6e73 756d 6572 5f66 756e 635f 6172  consumer_func_ar
+00001570: 6e20 3d20 2761 726e 3a61 7773 3a6c 616d  n = 'arn:aws:lam
+00001580: 6264 613a 6575 2d77 6573 742d 313a 3132  bda:eu-west-1:12
+00001590: 3334 3536 3738 393a 6675 6e63 7469 6f6e  3456789:function
+000015a0: 3a63 6f6e 7375 6d65 722d 6c61 6d62 6461  :consumer-lambda
+000015b0: 270a 2020 2020 6d63 642e 6164 645f 7665  '.    mcd.add_ve
+000015c0: 7274 6578 2869 643d 636f 6e73 756d 6572  rtex(id=consumer
+000015d0: 5f66 756e 635f 6172 6e2c 206e 6f64 655f  _func_arn, node_
+000015e0: 6e61 6d65 3d27 636f 6e73 756d 6572 2d6c  name='consumer-l
+000015f0: 616d 6264 6127 2c20 6172 6e3d 636f 6e73  ambda', arn=cons
+00001600: 756d 6572 5f66 756e 635f 6172 6e2c 206e  umer_func_arn, n
+00001610: 6f64 655f 7479 7065 3d27 6c61 6d62 6461  ode_type='lambda
+00001620: 5f66 756e 6374 696f 6e27 290a 2020 2020  _function').    
+00001630: 0a20 2020 2064 796e 616d 6f5f 6172 6e20  .    dynamo_arn 
+00001640: 3d20 2761 726e 3a61 7773 3a64 796e 616d  = 'arn:aws:dynam
+00001650: 6f64 623a 6575 2d77 6573 742d 313a 3132  odb:eu-west-1:12
+00001660: 3334 3536 3738 393a 7461 626c 652f 7461  3456789:table/ta
+00001670: 626c 6531 270a 2020 2020 6d63 642e 6164  ble1'.    mcd.ad
+00001680: 645f 7665 7274 6578 2869 643d 6479 6e61  d_vertex(id=dyna
+00001690: 6d6f 5f61 726e 2c20 6e6f 6465 5f6e 616d  mo_arn, node_nam
+000016a0: 653d 2774 6162 6c65 3127 2c20 6172 6e3d  e='table1', arn=
+000016b0: 6479 6e61 6d6f 5f61 726e 2c20 6e6f 6465  dynamo_arn, node
+000016c0: 5f74 7970 653d 2764 796e 616d 6f27 290a  _type='dynamo').
+000016d0: 2020 2020 0a20 2020 2073 6e73 5f61 726e      .    sns_arn
+000016e0: 203d 2027 6172 6e3a 6177 733a 736e 733a   = 'arn:aws:sns:
+000016f0: 6575 2d77 6573 742d 313a 3132 3334 3536  eu-west-1:123456
+00001700: 3738 393a 696e 7465 726e 616c 2e66 6966  789:internal.fif
+00001710: 6f27 0a20 2020 206d 6574 6164 6174 6120  o'.    metadata 
+00001720: 3d20 7b0a 2020 2020 2020 2020 224f 776e  = {.        "Own
+00001730: 6572 223a 2031 3233 3435 3637 3839 2c0a  er": 123456789,.
+00001740: 2020 2020 2020 2020 2253 7562 7363 7269          "Subscri
+00001750: 7074 696f 6e73 436f 6e66 6972 6d65 6422  ptionsConfirmed"
+00001760: 3a20 332c 0a20 2020 2020 2020 2022 5375  : 3,.        "Su
+00001770: 6273 6372 6970 7469 6f6e 7350 656e 6469  bscriptionsPendi
+00001780: 6e67 223a 2030 0a20 2020 207d 0a20 2020  ng": 0.    }.   
+00001790: 206d 6364 2e61 6464 5f76 6572 7465 7828   mcd.add_vertex(
+000017a0: 6964 3d73 6e73 5f61 726e 2c20 6e6f 6465  id=sns_arn, node
+000017b0: 5f6e 616d 653d 2769 6e74 6572 6e61 6c27  _name='internal'
+000017c0: 2c20 6172 6e3d 736e 735f 6172 6e2c 206e  , arn=sns_arn, n
+000017d0: 6f64 655f 7479 7065 3d27 736e 7327 2c20  ode_type='sns', 
+000017e0: 6d65 7461 6461 7461 3d6d 6574 6164 6174  metadata=metadat
+000017f0: 6129 0a20 2020 200a 2020 2020 7371 735f  a).    .    sqs_
+00001800: 6172 6e20 3d20 2761 726e 3a61 7773 3a73  arn = 'arn:aws:s
+00001810: 7173 3a65 752d 7765 7374 2d31 3a31 3233  qs:eu-west-1:123
+00001820: 3435 3637 3839 3a69 6e74 2d65 752d 6c69  456789:int-eu-li
+00001830: 7665 2d65 7665 6e74 732e 6669 666f 270a  ve-events.fifo'.
+00001840: 2020 2020 6d65 7461 6461 7461 203d 207b      metadata = {
+00001850: 0a20 2020 2020 2020 2022 4465 6c61 7953  .        "DelayS
+00001860: 6563 6f6e 6473 223a 2030 2c0a 2020 2020  econds": 0,.    
+00001870: 2020 2020 2246 6966 6f51 7565 7565 223a      "FifoQueue":
+00001880: 2022 5452 5545 222c 0a20 2020 2020 2020   "TRUE",.       
+00001890: 2022 5265 6365 6976 654d 6573 7361 6765   "ReceiveMessage
+000018a0: 5761 6974 5469 6d65 5365 636f 6e64 7322  WaitTimeSeconds"
+000018b0: 3a20 302c 0a20 2020 2020 2020 2022 5371  : 0,.        "Sq
+000018c0: 734d 616e 6167 6564 5373 6545 6e61 626c  sManagedSseEnabl
+000018d0: 6564 223a 2022 6661 6c73 6522 2c0a 2020  ed": "false",.  
+000018e0: 2020 2020 2020 2256 6973 6962 696c 6974        "Visibilit
+000018f0: 7954 696d 656f 7574 223a 2033 300a 2020  yTimeout": 30.  
+00001900: 2020 7d0a 2020 2020 6d63 642e 6164 645f    }.    mcd.add_
+00001910: 7665 7274 6578 2869 643d 7371 735f 6172  vertex(id=sqs_ar
+00001920: 6e2c 206e 6f64 655f 6e61 6d65 3d27 6576  n, node_name='ev
+00001930: 656e 7473 272c 2061 726e 3d73 7173 5f61  ents', arn=sqs_a
+00001940: 726e 2c20 6e6f 6465 5f74 7970 653d 2773  rn, node_type='s
+00001950: 7173 272c 206d 6574 6164 6174 613d 6d65  qs', metadata=me
+00001960: 7461 6461 7461 290a 2020 2020 0a20 2020  tadata).    .   
+00001970: 2073 7173 5f61 726e 3220 3d20 2761 726e   sqs_arn2 = 'arn
+00001980: 3a61 7773 3a73 7173 3a65 752d 7765 7374  :aws:sqs:eu-west
+00001990: 2d31 3a31 3233 3435 3637 3839 3a69 6e74  -1:123456789:int
+000019a0: 2d65 752d 6c69 7665 2d65 7665 6e74 7332  -eu-live-events2
+000019b0: 2e66 6966 6f27 0a20 2020 206d 6364 2e61  .fifo'.    mcd.a
+000019c0: 6464 5f76 6572 7465 7828 6964 3d73 7173  dd_vertex(id=sqs
+000019d0: 5f61 726e 322c 206e 6f64 655f 6e61 6d65  _arn2, node_name
+000019e0: 3d27 6576 656e 7473 3227 2c20 6172 6e3d  ='events2', arn=
+000019f0: 7371 735f 6172 6e32 2c20 6e6f 6465 5f74  sqs_arn2, node_t
+00001a00: 7970 653d 2773 7173 2729 0a20 2020 200a  ype='sqs').    .
+00001a10: 2020 2020 7333 5f61 726e 203d 2027 6172      s3_arn = 'ar
+00001a20: 6e3a 6177 733a 7333 3a3a 3a62 7563 6b65  n:aws:s3:::bucke
+00001a30: 745f 6e61 6d65 2f6b 6579 5f6e 616d 6527  t_name/key_name'
+00001a40: 0a20 2020 206d 6364 2e61 6464 5f76 6572  .    mcd.add_ver
+00001a50: 7465 7828 6964 3d73 335f 6172 6e2c 206e  tex(id=s3_arn, n
+00001a60: 6f64 655f 6e61 6d65 3d27 6b65 795f 6e61  ode_name='key_na
+00001a70: 6d65 272c 2061 726e 3d73 335f 6172 6e2c  me', arn=s3_arn,
+00001a80: 206e 6f64 655f 7479 7065 3d27 7333 2729   node_type='s3')
+00001a90: 0a20 2020 200a 2020 2020 6d63 642e 6164  .    .    mcd.ad
+00001aa0: 645f 6c69 6e6b 2873 7263 5f6e 6f64 655f  d_link(src_node_
+00001ab0: 6964 3d66 276c 616d 6264 615f 6675 6e63  id=f'lambda_func
+00001ac0: 7469 6f6e 3a7b 7072 6f64 7563 6572 5f66  tion:{producer_f
+00001ad0: 756e 635f 6172 6e7d 272c 2064 7374 5f6e  unc_arn}', dst_n
+00001ae0: 6f64 655f 6964 3d66 2773 6e73 3a7b 736e  ode_id=f'sns:{sn
+00001af0: 735f 6172 6e7d 2729 0a20 2020 206d 6364  s_arn}').    mcd
+00001b00: 2e61 6464 5f6c 696e 6b28 7372 635f 6e6f  .add_link(src_no
+00001b10: 6465 5f69 643d 6627 6c61 6d62 6461 5f66  de_id=f'lambda_f
+00001b20: 756e 6374 696f 6e3a 7b70 726f 6475 6365  unction:{produce
+00001b30: 725f 6675 6e63 5f61 726e 7d27 2c20 6473  r_func_arn}', ds
+00001b40: 745f 6e6f 6465 5f69 643d 6627 7333 3a7b  t_node_id=f's3:{
+00001b50: 7333 5f61 726e 7d27 290a 2020 2020 6d63  s3_arn}').    mc
+00001b60: 642e 6164 645f 6c69 6e6b 2873 7263 5f6e  d.add_link(src_n
+00001b70: 6f64 655f 6964 3d66 2773 6e73 3a7b 736e  ode_id=f'sns:{sn
+00001b80: 735f 6172 6e7d 272c 2064 7374 5f6e 6f64  s_arn}', dst_nod
+00001b90: 655f 6964 3d66 2773 7173 3a7b 7371 735f  e_id=f'sqs:{sqs_
+00001ba0: 6172 6e7d 2729 0a20 2020 206d 6364 2e61  arn}').    mcd.a
+00001bb0: 6464 5f6c 696e 6b28 7372 635f 6e6f 6465  dd_link(src_node
+00001bc0: 5f69 643d 6627 736e 733a 7b73 6e73 5f61  _id=f'sns:{sns_a
+00001bd0: 726e 7d27 2c20 6473 745f 6e6f 6465 5f69  rn}', dst_node_i
+00001be0: 643d 6627 7371 733a 7b73 7173 5f61 726e  d=f'sqs:{sqs_arn
+00001bf0: 327d 2729 0a20 2020 206d 6364 2e61 6464  2}').    mcd.add
+00001c00: 5f6c 696e 6b28 7372 635f 6e6f 6465 5f69  _link(src_node_i
+00001c10: 643d 6627 7371 733a 7b73 7173 5f61 726e  d=f'sqs:{sqs_arn
+00001c20: 7d27 2c20 6473 745f 6e6f 6465 5f69 643d  }', dst_node_id=
+00001c30: 6627 6c61 6d62 6461 5f66 756e 6374 696f  f'lambda_functio
+00001c40: 6e3a 7b63 6f6e 7375 6d65 725f 6675 6e63  n:{consumer_func
+00001c50: 5f61 726e 7d27 290a 2020 2020 6d63 642e  _arn}').    mcd.
+00001c60: 6164 645f 6c69 6e6b 2873 7263 5f6e 6f64  add_link(src_nod
+00001c70: 655f 6964 3d66 276c 616d 6264 615f 6675  e_id=f'lambda_fu
+00001c80: 6e63 7469 6f6e 3a7b 636f 6e73 756d 6572  nction:{consumer
+00001c90: 5f66 756e 635f 6172 6e7d 272c 2064 7374  _func_arn}', dst
+00001ca0: 5f6e 6f64 655f 6964 3d66 2764 796e 616d  _node_id=f'dynam
+00001cb0: 6f3a 7b64 796e 616d 6f5f 6172 6e7d 2729  o:{dynamo_arn}')
+00001cc0: 0a60 6060 0a0a 2d20 536f 7572 6365 205b  .```..- Source [
+00001cd0: 6177 735f 7365 7276 6963 655f 656e 645f  aws_service_end_
+00001ce0: 325f 656e 645d 2868 7474 7073 3a2f 2f67  2_end](https://g
+00001cf0: 6974 6875 622e 636f 6d2f 7473 7970 756b  ithub.com/tsypuk
+00001d00: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
+00001d10: 7261 6d73 2f62 6c6f 622f 6d61 696e 2f73  rams/blob/main/s
+00001d20: 616d 706c 6573 2f73 616d 706c 6573 2f61  amples/samples/a
+00001d30: 7773 5f73 6572 7669 6365 5f65 6e64 5f32  ws_service_end_2
+00001d40: 5f65 6e64 2e70 7929 0a2d 204f 7574 7075  _end.py).- Outpu
+00001d50: 7420 636f 6d70 696c 6564 205b 6f75 7470  t compiled [outp
+00001d60: 7574 2e70 726f 642e 656e 6432 656e 642e  ut.prod.end2end.
+00001d70: 6472 6177 696f 5d28 6874 7470 733a 2f2f  drawio](https://
+00001d80: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
+00001d90: 6e74 656e 742e 636f 6d2f 7473 7970 756b  ntent.com/tsypuk
+00001da0: 2f6d 756c 7469 636c 6f75 642d 6469 6167  /multicloud-diag
+00001db0: 7261 6d73 2f6d 6169 6e2f 7361 6d70 6c65  rams/main/sample
+00001dc0: 732f 6f75 7470 7574 2f6f 7574 7075 742e  s/output/output.
+00001dd0: 7072 6f64 2e65 6e64 3265 6e64 2e64 7261  prod.end2end.dra
+00001de0: 7769 6f29 0a0a 215b 6f75 7470 7574 2e70  wio)..![output.p
+00001df0: 726f 642e 6961 6d2d 726f 6c65 732e 706e  rod.iam-roles.pn
+00001e00: 675d 2868 7474 7073 3a2f 2f67 6974 6875  g](https://githu
+00001e10: 622e 636f 6d2f 7473 7970 756b 2f6d 756c  b.com/tsypuk/mul
+00001e20: 7469 636c 6f75 642d 6469 6167 7261 6d73  ticloud-diagrams
+00001e30: 2f62 6c6f 622f 6d61 696e 2f73 616d 706c  /blob/main/sampl
+00001e40: 6573 2f6f 7574 7075 742f 706e 672f 6f75  es/output/png/ou
+00001e50: 7470 7574 2e70 726f 642e 656e 6432 656e  tput.prod.end2en
+00001e60: 642e 706e 673f 7261 773d 5472 7565 290a  d.png?raw=True).
+00001e70: 0a0a 2323 2323 2033 2e20 4765 6e65 7261  ..#### 3. Genera
+00001e80: 7469 6e67 2044 6961 6772 616d 2066 726f  ting Diagram fro
+00001e90: 6d20 5941 4d4c 2073 6f75 7263 650a 0a60  m YAML source..`
+00001ea0: 6060 7961 6d6c 0a76 6572 7469 6365 733a  ``yaml.vertices:
+00001eb0: 0a20 202d 206e 616d 653a 2070 726f 642d  .  - name: prod-
+00001ec0: 6c61 6d62 6461 2d6e 616d 650a 2020 2020  lambda-name.    
+00001ed0: 7479 7065 3a20 6c61 6d62 6461 5f66 756e  type: lambda_fun
+00001ee0: 6374 696f 6e0a 2020 2020 6172 6e3a 2061  ction.    arn: a
+00001ef0: 726e 3a61 7773 3a6c 616d 6264 613a 6575  rn:aws:lambda:eu
+00001f00: 2d77 6573 742d 313a 3132 3334 3536 3738  -west-1:12345678
+00001f10: 393a 6675 6e63 7469 6f6e 3a70 726f 642d  9:function:prod-
+00001f20: 6c61 6d62 6461 2d6e 616d 650a 2020 2d20  lambda-name.  - 
+00001f30: 6e61 6d65 3a20 726f 6c65 2d6c 616d 6264  name: role-lambd
+00001f40: 612d 6e61 6d65 0a20 2020 2074 7970 653a  a-name.    type:
+00001f50: 2069 616d 5f72 6f6c 650a 2020 2020 6172   iam_role.    ar
+00001f60: 6e3a 2061 726e 3a61 7773 3a69 616d 3a3a  n: arn:aws:iam::
+00001f70: 3132 3334 3536 3738 393a 726f 6c65 2f70  123456789:role/p
+00001f80: 726f 642d 6c61 6d62 6461 2d6e 616d 650a  rod-lambda-name.
+00001f90: 2020 2d20 6e61 6d65 3a20 7072 6f64 2d63    - name: prod-c
+00001fa0: 6c6f 7564 7761 7463 682d 706f 6c69 6379  loudwatch-policy
+00001fb0: 0a20 2020 2069 636f 6e3a 2062 726f 6b65  .    icon: broke
+00001fc0: 720a 2020 2020 7479 7065 3a20 6961 6d5f  r.    type: iam_
+00001fd0: 706f 6c69 6379 0a20 2020 2061 726e 3a20  policy.    arn: 
+00001fe0: 6172 6e3a 6177 733a 6961 6d3a 3a31 3233  arn:aws:iam::123
+00001ff0: 3435 3637 3839 3a70 6f6c 6963 792f 7072  456789:policy/pr
+00002000: 6f64 2d63 6c6f 7564 7761 7463 682d 706f  od-cloudwatch-po
+00002010: 6c69 6379 0a20 202d 206e 616d 653a 2070  licy.  - name: p
+00002020: 726f 642d 7333 2d70 6f6c 6963 790a 2020  rod-s3-policy.  
+00002030: 2020 7479 7065 3a20 6961 6d5f 706f 6c69    type: iam_poli
+00002040: 6379 0a20 2020 2061 726e 3a20 6172 6e3a  cy.    arn: arn:
+00002050: 6177 733a 6961 6d3a 3a31 3233 3435 3637  aws:iam::1234567
+00002060: 3839 3a70 6f6c 6963 792f 7072 6f64 2d73  89:policy/prod-s
+00002070: 332d 706f 6c69 6379 0a20 202d 206e 616d  3-policy.  - nam
+00002080: 653a 2070 726f 642d 6479 6e61 6d6f 6462  e: prod-dynamodb
+00002090: 2d70 6f6c 6963 790a 2020 2020 7479 7065  -policy.    type
+000020a0: 3a20 6961 6d5f 706f 6c69 6379 0a20 2020  : iam_policy.   
+000020b0: 2061 726e 3a20 6172 6e3a 6177 733a 6961   arn: arn:aws:ia
+000020c0: 6d3a 3a31 3233 3435 3637 3839 3a70 6f6c  m::123456789:pol
+000020d0: 6963 792f 7072 6f64 2d64 796e 616d 6f2d  icy/prod-dynamo-
+000020e0: 706f 6c69 6379 0a65 6467 6573 3a0a 2320  policy.edges:.# 
+000020f0: 2031 7374 2061 7070 726f 6163 6820 7372   1st approach sr
+00002100: 632f 6473 7420 6172 6520 6c69 6e6b 6564  c/dst are linked
+00002110: 2074 6f20 7961 6d6c 2076 6572 7469 6365   to yaml vertice
+00002120: 7320 6279 206e 616d 650a 2020 2d20 7b20  s by name.  - { 
+00002130: 7372 633a 2070 726f 642d 6c61 6d62 6461  src: prod-lambda
+00002140: 2d6e 616d 652c 2064 7374 3a20 726f 6c65  -name, dst: role
+00002150: 2d6c 616d 6264 612d 6e61 6d65 2c20 6c61  -lambda-name, la
+00002160: 6265 6c3a 2048 6173 526f 6c65 2c20 6c69  bel: HasRole, li
+00002170: 6e6b 5f74 7970 653a 206e 6f6e 6520 7d0a  nk_type: none }.
+00002180: 2020 2d20 7b20 7372 633a 2072 6f6c 652d    - { src: role-
+00002190: 6c61 6d62 6461 2d6e 616d 652c 2064 7374  lambda-name, dst
+000021a0: 3a20 7072 6f64 2d63 6c6f 7564 7761 7463  : prod-cloudwatc
+000021b0: 682d 706f 6c69 6379 2c20 6c61 6265 6c3a  h-policy, label:
+000021c0: 2041 6c6c 6f77 2043 6c6f 7564 5761 7463   Allow CloudWatc
+000021d0: 6820 6c6f 6773 2c20 6c69 6e6b 5f74 7970  h logs, link_typ
+000021e0: 653a 206e 6f6e 6520 7d0a 2320 2032 6e64  e: none }.#  2nd
+000021f0: 2061 7070 726f 6163 6820 7372 632f 6473   approach src/ds
+00002200: 7420 6172 6520 6c69 6e6b 6564 2062 7920  t are linked by 
+00002210: 4152 4e20 2841 524e 2063 616e 2062 6520  ARN (ARN can be 
+00002220: 7072 6573 656e 7420 696e 2073 616d 6520  present in same 
+00002230: 7961 6d6c 2c20 6f72 206c 6f61 6465 6420  yaml, or loaded 
+00002240: 7072 6f67 7261 6d6d 6174 6963 616c 6c79  programmatically
+00002250: 290a 2020 2d20 7b0a 2020 2020 7372 635f  ).  - {.    src_
+00002260: 6172 6e3a 2061 726e 3a61 7773 3a69 616d  arn: arn:aws:iam
+00002270: 3a3a 3132 3334 3536 3738 393a 726f 6c65  ::123456789:role
+00002280: 2f70 726f 642d 6c61 6d62 6461 2d6e 616d  /prod-lambda-nam
+00002290: 652c 0a20 2020 2073 7263 5f74 7970 653a  e,.    src_type:
+000022a0: 2069 616d 5f72 6f6c 652c 0a20 2020 2064   iam_role,.    d
+000022b0: 7374 5f61 726e 3a20 6172 6e3a 6177 733a  st_arn: arn:aws:
+000022c0: 6961 6d3a 3a31 3233 3435 3637 3839 3a70  iam::123456789:p
+000022d0: 6f6c 6963 792f 7072 6f64 2d73 332d 706f  olicy/prod-s3-po
+000022e0: 6c69 6379 2c0a 2020 2020 6473 745f 7479  licy,.    dst_ty
+000022f0: 7065 3a20 6961 6d5f 706f 6c69 6379 2c0a  pe: iam_policy,.
+00002300: 2020 2020 6c61 6265 6c3a 2041 6c6c 6f77      label: Allow
+00002310: 2053 3320 6163 6365 7373 2c0a 2020 2020   S3 access,.    
+00002320: 6c69 6e6b 5f74 7970 653a 206e 6f6e 6520  link_type: none 
+00002330: 7d0a 2320 3372 6420 6170 7072 6f61 6368  }.# 3rd approach
+00002340: 2069 7320 6d69 7865 6420 6f66 2031 7374   is mixed of 1st
+00002350: 2061 6e64 2032 6e64 0a20 202d 207b 0a20   and 2nd.  - {. 
+00002360: 2020 2073 7263 5f61 726e 3a20 6172 6e3a     src_arn: arn:
+00002370: 6177 733a 6961 6d3a 3a31 3233 3435 3637  aws:iam::1234567
+00002380: 3839 3a72 6f6c 652f 7072 6f64 2d6c 616d  89:role/prod-lam
+00002390: 6264 612d 6e61 6d65 2c0a 2020 2020 7372  bda-name,.    sr
+000023a0: 635f 7479 7065 3a20 6961 6d5f 726f 6c65  c_type: iam_role
+000023b0: 2c0a 2020 2020 6473 743a 2070 726f 642d  ,.    dst: prod-
+000023c0: 6479 6e61 6d6f 6462 2d70 6f6c 6963 792c  dynamodb-policy,
+000023d0: 0a20 2020 206c 6162 656c 3a20 416c 6c6f  .    label: Allo
+000023e0: 7720 4479 6e61 6d6f 4442 2072 6561 6420  w DynamoDB read 
+000023f0: 6163 6365 7373 2c0a 2020 2020 6c69 6e6b  access,.    link
+00002400: 5f74 7970 653a 206e 6f6e 6520 7d0a 6060  _type: none }.``
+00002410: 600a 2d20 536f 7572 6365 205b 6177 735f  `.- Source [aws_
+00002420: 6961 6d5f 6672 6f6d 5f79 616d 6c2e 7079  iam_from_yaml.py
+00002430: 5d28 6874 7470 733a 2f2f 6769 7468 7562  ](https://github
+00002440: 2e63 6f6d 2f74 7379 7075 6b2f 6d75 6c74  .com/tsypuk/mult
+00002450: 6963 6c6f 7564 2d64 6961 6772 616d 732f  icloud-diagrams/
+00002460: 626c 6f62 2f6d 6169 6e2f 7361 6d70 6c65  blob/main/sample
+00002470: 732f 7361 6d70 6c65 732f 6177 735f 6961  s/samples/aws_ia
+00002480: 6d5f 6672 6f6d 5f79 616d 6c2e 7079 290a  m_from_yaml.py).
+00002490: 2d20 4f75 7470 7574 2063 6f6d 7069 6c65  - Output compile
+000024a0: 6420 5b6f 7574 7075 742e 7072 6f64 2e69  d [output.prod.i
+000024b0: 616d 2d72 6f6c 6573 2d66 726f 6d2d 7961  am-roles-from-ya
+000024c0: 6d6c 2e64 7261 7769 6f5d 2868 7474 7073  ml.drawio](https
+000024d0: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+000024e0: 7263 6f6e 7465 6e74 2e63 6f6d 2f74 7379  rcontent.com/tsy
+000024f0: 7075 6b2f 6d75 6c74 6963 6c6f 7564 2d64  puk/multicloud-d
+00002500: 6961 6772 616d 732f 6d61 696e 2f73 616d  iagrams/main/sam
+00002510: 706c 6573 2f6f 7574 7075 742f 6f75 7470  ples/output/outp
+00002520: 7574 2e70 726f 642e 6961 6d2d 726f 6c65  ut.prod.iam-role
+00002530: 732d 6672 6f6d 2d79 616d 6c2e 6472 6177  s-from-yaml.draw
+00002540: 696f 290a 0a2d 2021 5b6f 7574 7075 742e  io)..- ![output.
+00002550: 7072 6f64 2e69 616d 2d72 6f6c 6573 2e70  prod.iam-roles.p
+00002560: 6e67 5d28 6874 7470 733a 2f2f 6769 7468  ng](https://gith
+00002570: 7562 2e63 6f6d 2f74 7379 7075 6b2f 6d75  ub.com/tsypuk/mu
+00002580: 6c74 6963 6c6f 7564 2d64 6961 6772 616d  lticloud-diagram
+00002590: 732f 626c 6f62 2f6d 6169 6e2f 7361 6d70  s/blob/main/samp
+000025a0: 6c65 732f 6f75 7470 7574 2f70 6e67 2f6f  les/output/png/o
+000025b0: 7574 7075 742e 7072 6f64 2e69 616d 2d72  utput.prod.iam-r
+000025c0: 6f6c 6573 2d66 726f 6d2d 7961 6d6c 2e70  oles-from-yaml.p
+000025d0: 6e67 3f72 6177 3d54 7275 6529 0a0a 6060  ng?raw=True)..``
+000025e0: 6073 6865 6c6c 0a70 6f65 7472 7920 6275  `shell.poetry bu
+000025f0: 696c 640a 6578 706f 7274 2050 5950 495f  ild.export PYPI_
+00002600: 5553 4552 4e41 4d45 3d0a 6578 706f 7274  USERNAME=.export
+00002610: 2050 5950 495f 5041 5353 574f 5244 3d0a   PYPI_PASSWORD=.
+00002620: 706f 6574 7279 2070 7562 6c69 7368 202d  poetry publish -
+00002630: 2d62 7569 6c64 202d 2d75 7365 726e 616d  -build --usernam
+00002640: 6520 2450 5950 495f 5553 4552 4e41 4d45  e $PYPI_USERNAME
+00002650: 202d 2d70 6173 7377 6f72 6420 2450 5950   --password $PYP
+00002660: 495f 5041 5353 574f 5244 0a0a 6364 2073  I_PASSWORD..cd s
+00002670: 616d 706c 6573 2f73 616d 706c 6573 0a70  amples/samples.p
+00002680: 6f65 7472 7920 696e 7374 616c 6c0a 706f  oetry install.po
+00002690: 6574 7279 2072 756e 2070 7974 686f 6e20  etry run python 
+000026a0: 6177 735f 6961 6d5f 726f 6c65 735f 6672  aws_iam_roles_fr
+000026b0: 6f6d 5f63 6f64 655f 7769 7468 5f65 6e75  om_code_with_enu
+000026c0: 6d2e 7079 0a60 6060 0a0a 2323 2320 4659  m.py.```..### FY
+000026d0: 493a 0a0a 4f70 656e 536f 7572 6365 2047  I:..OpenSource G
+000026e0: 7569 6465 2c20 5b48 6f77 2074 6f20 636f  uide, [How to co
+000026f0: 6e74 7269 6275 7465 2074 6f20 6f70 656e  ntribute to open
+00002700: 736f 7572 6365 5d28 6874 7470 733a 2f2f  source](https://
+00002710: 6f70 656e 736f 7572 6365 2e67 7569 6465  opensource.guide
+00002720: 2f29 0a                                  /).
```

