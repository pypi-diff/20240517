# Comparing `tmp/odoo_addon_mail_multicompany-16.0.1.1.0-py3-none-any.whl.zip` & `tmp/odoo_addon_mail_multicompany-17.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 26389 bytes, number of entries: 23
--rw-r--r--  2.0 unx     3502 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/README.rst
--rw-r--r--  2.0 unx       92 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/__init__.py
--rw-r--r--  2.0 unx      497 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/__manifest__.py
--rw-r--r--  2.0 unx     1074 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/i18n/es.po
--rw-r--r--  2.0 unx     1121 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/i18n/it.po
--rw-r--r--  2.0 unx      933 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/i18n/mail_multicompany.pot
--rw-r--r--  2.0 unx      127 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/models/__init__.py
--rw-r--r--  2.0 unx      232 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/models/ir_mail_server.py
--rw-r--r--  2.0 unx     1721 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/models/mail_message.py
--rw-r--r--  2.0 unx       77 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      138 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      150 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx       87 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/readme/USAGE.rst
--rw-r--r--  2.0 unx      887 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/security/mail_security.xml
--rw-r--r--  2.0 unx     9455 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/static/description/icon.png
--rw-r--r--  2.0 unx    13386 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/static/description/index.html
--rw-r--r--  2.0 unx      108 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/tests/__init__.py
--rw-r--r--  2.0 unx     3430 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/tests/test_mail_multicompany.py
--rw-r--r--  2.0 unx      986 b- defN 24-May-07 15:42 odoo/addons/mail_multicompany/views/ir_mail_server_view.xml
--rw-r--r--  2.0 unx     4042 b- defN 24-May-07 15:42 odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-07 15:42 odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-May-07 15:42 odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2426 b- defN 24-May-07 15:42 odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/RECORD
-23 files, 44568 bytes uncompressed, 22243 bytes compressed:  50.1%
+Zip file size: 25993 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     3510 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/README.rst
+-rw-r--r--  2.0 unx       92 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/__init__.py
+-rw-r--r--  2.0 unx      497 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/__manifest__.py
+-rw-r--r--  2.0 unx     1074 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/i18n/es.po
+-rw-r--r--  2.0 unx      752 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/i18n/mail_multicompany.pot
+-rw-r--r--  2.0 unx      465 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/migrations/17.0.1.0.0/pre-migration.py
+-rw-r--r--  2.0 unx      127 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/models/__init__.py
+-rw-r--r--  2.0 unx      231 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/models/ir_mail_server.py
+-rw-r--r--  2.0 unx     1133 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/models/mail_message.py
+-rw-r--r--  2.0 unx       79 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/readme/CONFIGURE.md
+-rw-r--r--  2.0 unx      150 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/readme/CONTRIBUTORS.md
+-rw-r--r--  2.0 unx      150 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/readme/DESCRIPTION.md
+-rw-r--r--  2.0 unx       87 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/readme/USAGE.md
+-rw-r--r--  2.0 unx      901 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/security/mail_security.xml
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/static/description/icon.png
+-rw-r--r--  2.0 unx    13386 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/static/description/index.html
+-rw-r--r--  2.0 unx      108 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/tests/__init__.py
+-rw-r--r--  2.0 unx     3026 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/tests/test_mail_multicompany.py
+-rw-r--r--  2.0 unx      986 b- defN 24-May-16 14:18 odoo/addons/mail_multicompany/views/ir_mail_server_view.xml
+-rw-r--r--  2.0 unx     4031 b- defN 24-May-16 14:18 odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       83 b- defN 24-May-16 14:18 odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        4 b- defN 24-May-16 14:18 odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2457 b- defN 24-May-16 14:18 odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/RECORD
+23 files, 42784 bytes uncompressed, 21783 bytes compressed:  49.1%
```

## zipnote {}

```diff
@@ -6,39 +6,39 @@
 
 Filename: odoo/addons/mail_multicompany/__manifest__.py
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/i18n/es.po
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/i18n/it.po
+Filename: odoo/addons/mail_multicompany/i18n/mail_multicompany.pot
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/i18n/mail_multicompany.pot
+Filename: odoo/addons/mail_multicompany/migrations/17.0.1.0.0/pre-migration.py
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/models/ir_mail_server.py
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/models/mail_message.py
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/readme/CONFIGURE.rst
+Filename: odoo/addons/mail_multicompany/readme/CONFIGURE.md
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/readme/CONTRIBUTORS.rst
+Filename: odoo/addons/mail_multicompany/readme/CONTRIBUTORS.md
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/readme/DESCRIPTION.rst
+Filename: odoo/addons/mail_multicompany/readme/DESCRIPTION.md
 Comment: 
 
-Filename: odoo/addons/mail_multicompany/readme/USAGE.rst
+Filename: odoo/addons/mail_multicompany/readme/USAGE.md
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/security/mail_security.xml
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/static/description/icon.png
 Comment: 
@@ -51,20 +51,20 @@
 
 Filename: odoo/addons/mail_multicompany/tests/test_mail_multicompany.py
 Comment: 
 
 Filename: odoo/addons/mail_multicompany/views/ir_mail_server_view.xml
 Comment: 
 
-Filename: odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/METADATA
+Filename: odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/WHEEL
+Filename: odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/top_level.txt
+Filename: odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/RECORD
+Filename: odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/mail_multicompany/README.rst

```diff
@@ -3,81 +3,84 @@
 ===========================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:c844f628e5f56e26d2ca9490465e79ad1344b3734906420f78571ba6e57c8300
+   !! source digest: sha256:a384d2ea5c0cbcba2a09921be67c9950825e310b373fe1bcb6fe6e2a33441023
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fmulti--company-lightgray.png?logo=github
-    :target: https://github.com/OCA/multi-company/tree/16.0/mail_multicompany
+    :target: https://github.com/OCA/multi-company/tree/17.0/mail_multicompany
     :alt: OCA/multi-company
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/multi-company-16-0/multi-company-16-0-mail_multicompany
+    :target: https://translation.odoo-community.org/projects/multi-company-17-0/multi-company-17-0-mail_multicompany
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/multi-company&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/multi-company&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This module adds company_id to the models ir.mail_server and mail.message. Also inherits mail.message create function to set the company mail_server.
+This module adds company_id to the models ir.mail_server and
+mail.message. Also inherits mail.message create function to set the
+company mail_server.
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Configuration
 =============
 
-* Go to 'Settings / Technical / Outgoing Mail Servers', and add the company.
+-  Go to 'Settings / Technical / Outgoing Mail Servers', and add the
+   company.
 
 Usage
 =====
 
 To use this module, you need to:
 
-* Send some email or message that comes out of Odoo.
+-  Send some email or message that comes out of Odoo.
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/multi-company/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * Comunitea
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Jesús Ventosinos Mayor <jesus@comunitea.com>
-* Cédric Pigeon <cedric.pigeon@acsone.eu>
-* Valentin Vinagre <valentin.vinagre@sygel.es>
+-  Jesús Ventosinos Mayor <jesus@comunitea.com>
+-  Cédric Pigeon <cedric.pigeon@acsone.eu>
+-  Valentin Vinagre <valentin.vinagre@sygel.es>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -89,10 +92,10 @@
     :target: https://github.com/luisg123v
     :alt: luisg123v
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-luisg123v| 
 
-This module is part of the `OCA/multi-company <https://github.com/OCA/multi-company/tree/16.0/mail_multicompany>`_ project on GitHub.
+This module is part of the `OCA/multi-company <https://github.com/OCA/multi-company/tree/17.0/mail_multicompany>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/mail_multicompany/__manifest__.py

```diff
@@ -1,11 +1,11 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html).
 {
     "name": "Email Gateway Multi company",
-    "version": "16.0.1.1.0",
+    "version": "17.0.1.0.0",
     "category": "Extra Tools",
     "author": "Odoo Community Association (OCA), " "Comunitea",
     "maintainers": [
         "luisg123v",
     ],
     "website": "https://github.com/OCA/multi-company",
     "license": "AGPL-3",
```

## odoo/addons/mail_multicompany/i18n/mail_multicompany.pot

```diff
@@ -1,26 +1,24 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* mail_multicompany
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 16.0\n"
+"Project-Id-Version: Odoo Server 17.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: mail_multicompany
 #: model:ir.model.fields,field_description:mail_multicompany.field_ir_mail_server__company_id
-#: model:ir.model.fields,field_description:mail_multicompany.field_mail_mail__company_id
-#: model:ir.model.fields,field_description:mail_multicompany.field_mail_message__company_id
 msgid "Company"
 msgstr ""
 
 #. module: mail_multicompany
 #: model:ir.model,name:mail_multicompany.model_ir_mail_server
 msgid "Mail Server"
 msgstr ""
```

## odoo/addons/mail_multicompany/models/ir_mail_server.py

```diff
@@ -1,10 +1,9 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html).
 
 from odoo import fields, models
 
 
 class IrMailServer(models.Model):
-
     _inherit = "ir.mail_server"
 
     company_id = fields.Many2one("res.company", "Company")
```

## odoo/addons/mail_multicompany/models/mail_message.py

```diff
@@ -1,43 +1,29 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl.html).
 
-from odoo import api, fields, models
+from odoo import api, models
 
 
 class MailMessage(models.Model):
-
     _inherit = "mail.message"
 
-    company_id = fields.Many2one("res.company", "Company")
-
     @api.model_create_multi
     def create(self, vals_list):
         for vals in vals_list:
             if vals.get("model") and vals.get("res_id"):
                 current_object = self.env[vals["model"]].browse(vals["res_id"])
                 if hasattr(current_object, "company_id") and current_object.company_id:
-                    vals["company_id"] = current_object.company_id.id
-            if not vals.get("company_id"):
-                vals["company_id"] = self.env.company.id
+                    vals["record_company_id"] = current_object.company_id.id
+            if not vals.get("record_company_id"):
+                vals["record_company_id"] = self.env.company.id
             if not vals.get("mail_server_id"):
-                mail_server, email_from = self._find_company_mail_server(
-                    vals.get("email_from", False), vals.get("company_id", False)
-                )
-                vals.update(
-                    {
-                        "mail_server_id": mail_server.id if mail_server else False,
-                        "email_from": email_from,
-                    }
+                vals["mail_server_id"] = (
+                    self.sudo()
+                    .env["ir.mail_server"]
+                    .search(
+                        [("company_id", "=", vals.get("record_company_id", False))],
+                        order="sequence",
+                        limit=1,
+                    )
+                    .id
                 )
-
-        return super(MailMessage, self).create(vals_list)
-
-    def _find_company_mail_server(self, email_from, company_id):
-        # We want to find the most appropriate mail server for the given email_from
-        # but limiting it to the current active company mail servers.
-        mail_servers = (
-            self.sudo().env["ir.mail_server"].search([("company_id", "=", company_id)])
-        )
-        if not mail_servers:
-            return None, email_from
-
-        return self.env["ir.mail_server"]._find_mail_server(email_from, mail_servers)
+        return super().create(vals_list)
```

## odoo/addons/mail_multicompany/security/mail_security.xml

### odoo/addons/mail_multicompany/security/mail_security.xml

```diff
@@ -6,10 +6,10 @@
     <field name="global" eval="True"/>
     <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
   </record>
   <record model="ir.rule" id="mail_mail_rule">
     <field name="name">mail_mail multi-company</field>
     <field name="model_id" search="[('model','=','mail.mail')]" model="ir.model"/>
     <field name="global" eval="True"/>
-    <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
+    <field name="domain_force">['|',('record_company_id','=',False),('record_company_id', 'in', company_ids)]</field>
   </record>
 </odoo>
```

## odoo/addons/mail_multicompany/static/description/index.html

```diff
@@ -362,18 +362,20 @@
 <div class="document" id="email-gateway-multi-company">
 <h1 class="title">Email Gateway Multi company</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:c844f628e5f56e26d2ca9490465e79ad1344b3734906420f78571ba6e57c8300
+!! source digest: sha256:a384d2ea5c0cbcba2a09921be67c9950825e310b373fe1bcb6fe6e2a33441023
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
-<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/multi-company/tree/16.0/mail_multicompany"><img alt="OCA/multi-company" src="https://img.shields.io/badge/github-OCA%2Fmulti--company-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/multi-company-16-0/multi-company-16-0-mail_multicompany"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/multi-company&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
-<p>This module adds company_id to the models ir.mail_server and mail.message. Also inherits mail.message create function to set the company mail_server.</p>
+<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/multi-company/tree/17.0/mail_multicompany"><img alt="OCA/multi-company" src="https://img.shields.io/badge/github-OCA%2Fmulti--company-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/multi-company-17-0/multi-company-17-0-mail_multicompany"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/multi-company&amp;target_branch=17.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
+<p>This module adds company_id to the models ir.mail_server and
+mail.message. Also inherits mail.message create function to set the
+company mail_server.</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
 <ul class="simple">
 <li><a class="reference internal" href="#configuration" id="toc-entry-1">Configuration</a></li>
 <li><a class="reference internal" href="#usage" id="toc-entry-2">Usage</a></li>
 <li><a class="reference internal" href="#bug-tracker" id="toc-entry-3">Bug Tracker</a></li>
 <li><a class="reference internal" href="#credits" id="toc-entry-4">Credits</a><ul>
@@ -383,30 +385,31 @@
 </ul>
 </li>
 </ul>
 </div>
 <div class="section" id="configuration">
 <h1><a class="toc-backref" href="#toc-entry-1">Configuration</a></h1>
 <ul class="simple">
-<li>Go to ‘Settings / Technical / Outgoing Mail Servers’, and add the company.</li>
+<li>Go to ‘Settings / Technical / Outgoing Mail Servers’, and add the
+company.</li>
 </ul>
 </div>
 <div class="section" id="usage">
 <h1><a class="toc-backref" href="#toc-entry-2">Usage</a></h1>
 <p>To use this module, you need to:</p>
 <ul class="simple">
 <li>Send some email or message that comes out of Odoo.</li>
 </ul>
 </div>
 <div class="section" id="bug-tracker">
 <h1><a class="toc-backref" href="#toc-entry-3">Bug Tracker</a></h1>
 <p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/multi-company/issues">GitHub Issues</a>.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-<a class="reference external" href="https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
+<a class="reference external" href="https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
 <p>Do not contact contributors directly about support or help with technical issues.</p>
 </div>
 <div class="section" id="credits">
 <h1><a class="toc-backref" href="#toc-entry-4">Credits</a></h1>
 <div class="section" id="authors">
 <h2><a class="toc-backref" href="#toc-entry-5">Authors</a></h2>
 <ul class="simple">
@@ -426,14 +429,14 @@
 <p>This module is maintained by the OCA.</p>
 <a class="reference external image-reference" href="https://odoo-community.org"><img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" /></a>
 <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
 <p>Current <a class="reference external" href="https://odoo-community.org/page/maintainer-role">maintainer</a>:</p>
 <p><a class="reference external image-reference" href="https://github.com/luisg123v"><img alt="luisg123v" src="https://github.com/luisg123v.png?size=40px" /></a></p>
-<p>This module is part of the <a class="reference external" href="https://github.com/OCA/multi-company/tree/16.0/mail_multicompany">OCA/multi-company</a> project on GitHub.</p>
+<p>This module is part of the <a class="reference external" href="https://github.com/OCA/multi-company/tree/17.0/mail_multicompany">OCA/multi-company</a> project on GitHub.</p>
 <p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>.</p>
 </div>
 </div>
 </div>
 </body>
 </html>
```

## odoo/addons/mail_multicompany/tests/test_mail_multicompany.py

```diff
@@ -49,15 +49,15 @@
         # set company 1 on server 1
         # server on message should be server 1
         self.server1.write({"company_id": self.company1.id})
         msg = self._create_message()
         self.assertEqual(msg.mail_server_id.id, self.server1.id)
 
         # Set company 2 on server 1
-        # Server on message should be empty as the company on user is still
+        # Server on message should be empty as the copany on user is still
         # Company 1
         self.server1.write({"company_id": self.company2.id})
         msg = self._create_message()
         self.assertFalse(msg.mail_server_id)
 
         # Set company 2 on user
         # Server on message should be server 1
@@ -74,15 +74,7 @@
         self.assertEqual(msg.mail_server_id.id, self.server2.id)
 
         # Set Company 1 on user
         # Server on message should be server 1
         self.user_demo.write({"company_id": self.company1.id})
         msg = self._create_message()
         self.assertEqual(msg.mail_server_id.id, self.server1.id)
-
-        # Set Company 1 in both servers
-        # Server on message should be server 1 as no from_filters are set
-        # and it will be the first to appear on the search
-        self.server2.write({"company_id": self.company1.id})
-        msg = self._create_message()
-        self.assertEqual(msg.mail_server_id.id, self.server1.id)
-        self.assertEqual(msg.email_from, "test.from@example.com")
```

## Comparing `odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/METADATA` & `odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,99 +1,101 @@
 Metadata-Version: 2.1
-Name: odoo-addon-mail-multicompany
-Version: 16.0.1.1.0
+Name: odoo-addon-mail_multicompany
+Version: 17.0.1.0.0.2
+Requires-Python: >=3.10
+Requires-Dist: odoo>=17.0a,<17.1dev
 Summary: Email Gateway Multi company
 Home-page: https://github.com/OCA/multi-company
+License: AGPL-3
 Author: Odoo Community Association (OCA), Comunitea
 Author-email: support@odoo-community.org
-License: AGPL-3
-Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 16.0
+Classifier: Framework :: Odoo :: 17.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.10
-Requires-Dist: odoo <16.1dev,>=16.0a
 
 ===========================
 Email Gateway Multi company
 ===========================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:c844f628e5f56e26d2ca9490465e79ad1344b3734906420f78571ba6e57c8300
+   !! source digest: sha256:a384d2ea5c0cbcba2a09921be67c9950825e310b373fe1bcb6fe6e2a33441023
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fmulti--company-lightgray.png?logo=github
-    :target: https://github.com/OCA/multi-company/tree/16.0/mail_multicompany
+    :target: https://github.com/OCA/multi-company/tree/17.0/mail_multicompany
     :alt: OCA/multi-company
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/multi-company-16-0/multi-company-16-0-mail_multicompany
+    :target: https://translation.odoo-community.org/projects/multi-company-17-0/multi-company-17-0-mail_multicompany
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/multi-company&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/multi-company&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This module adds company_id to the models ir.mail_server and mail.message. Also inherits mail.message create function to set the company mail_server.
+This module adds company_id to the models ir.mail_server and
+mail.message. Also inherits mail.message create function to set the
+company mail_server.
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Configuration
 =============
 
-* Go to 'Settings / Technical / Outgoing Mail Servers', and add the company.
+-  Go to 'Settings / Technical / Outgoing Mail Servers', and add the
+   company.
 
 Usage
 =====
 
 To use this module, you need to:
 
-* Send some email or message that comes out of Odoo.
+-  Send some email or message that comes out of Odoo.
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/multi-company/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/multi-company/issues/new?body=module:%20mail_multicompany%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * Comunitea
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Jesús Ventosinos Mayor <jesus@comunitea.com>
-* Cédric Pigeon <cedric.pigeon@acsone.eu>
-* Valentin Vinagre <valentin.vinagre@sygel.es>
+-  Jesús Ventosinos Mayor <jesus@comunitea.com>
+-  Cédric Pigeon <cedric.pigeon@acsone.eu>
+-  Valentin Vinagre <valentin.vinagre@sygel.es>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -105,12 +107,10 @@
     :target: https://github.com/luisg123v
     :alt: luisg123v
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-luisg123v| 
 
-This module is part of the `OCA/multi-company <https://github.com/OCA/multi-company/tree/16.0/mail_multicompany>`_ project on GitHub.
+This module is part of the `OCA/multi-company <https://github.com/OCA/multi-company/tree/17.0/mail_multicompany>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
-
-
```

## Comparing `odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/RECORD` & `odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,23 +1,23 @@
-odoo/addons/mail_multicompany/README.rst,sha256=V-NXdkY5nGH2S9_zUHbEkOnS-uWrGeXS1oibaUdSkxg,3502
+odoo/addons/mail_multicompany/README.rst,sha256=c9CU41kY_nOPcjXXIc8Bd3mkdTCLypos61lBuwhGFGc,3510
 odoo/addons/mail_multicompany/__init__.py,sha256=QXl_U5mKDJfzIWJDZpUzH9Rf4Zda8Ko8Q1Df6Lc0MF8,92
-odoo/addons/mail_multicompany/__manifest__.py,sha256=UMoCHbofxxp5e8mPcvOTT8vT5tndlb3U_F7JggqdzTs,497
+odoo/addons/mail_multicompany/__manifest__.py,sha256=guvj6eOcezLg4LuSSC2rX5oFRsZ7P2pgys-VSnyImG8,497
 odoo/addons/mail_multicompany/i18n/es.po,sha256=GcJ6XkaZroY370-739aRTNcShCWjqdkBKGNeXj0WJuc,1074
-odoo/addons/mail_multicompany/i18n/it.po,sha256=2r_KEvIu9I6acL0boDFBfnMidd5eP8R2Jp1Uze7B-mg,1121
-odoo/addons/mail_multicompany/i18n/mail_multicompany.pot,sha256=ShUNCL15cq_LVacfzNO4OmQVXPPntsitQFzvAa1d2hc,933
+odoo/addons/mail_multicompany/i18n/mail_multicompany.pot,sha256=Fnsbs-uRkRlskYkVnW0bkYwADGJ6VWT1Gj1P4_K7wzg,752
+odoo/addons/mail_multicompany/migrations/17.0.1.0.0/pre-migration.py,sha256=K2gWYvWfqz49lbKH2cuHgRHFE0Uw-3OCiL9iGAnl3T8,465
 odoo/addons/mail_multicompany/models/__init__.py,sha256=XJmJp1emwGR1nAM4zVkYs9bZztOjGwbDlYjH_7K8x1A,127
-odoo/addons/mail_multicompany/models/ir_mail_server.py,sha256=_NnizFo90m_50bnxv_Vvmd6AgOURzmwZZ4HJsB0oqLc,232
-odoo/addons/mail_multicompany/models/mail_message.py,sha256=V96BwnpqVndGZCVLPD1ElO3lJO8KhBvaeoxnwKnIHRY,1721
-odoo/addons/mail_multicompany/readme/CONFIGURE.rst,sha256=el0_MnxG1yv1zSkeeDqjcJ24aF_TmbR3zJbhSCSoNLg,77
-odoo/addons/mail_multicompany/readme/CONTRIBUTORS.rst,sha256=JEfr6FDACrN65guMP1uGC0br7gsKyqCvkpzPnhr59ZY,138
-odoo/addons/mail_multicompany/readme/DESCRIPTION.rst,sha256=Ot56gynT0MGrOq6--aaRoAi9nuWeGaEzq588X2QBODk,150
-odoo/addons/mail_multicompany/readme/USAGE.rst,sha256=_L8XXoHsM3Y_5j2ogRq2ty3i3GKkpM5on-y3z2L617M,87
-odoo/addons/mail_multicompany/security/mail_security.xml,sha256=zYsgQaj6OrGR9KzcsMEfYg2UVdhvr-ts4UxPnNL_taE,887
+odoo/addons/mail_multicompany/models/ir_mail_server.py,sha256=OIblcMyBIyq2rSxIzWuk1LEmIlyNa1feohzsrsSjc8w,231
+odoo/addons/mail_multicompany/models/mail_message.py,sha256=IDliC91BcfPGpj_NvQhJwQxN3Rh5E_qEc2BEzZzzfIg,1133
+odoo/addons/mail_multicompany/readme/CONFIGURE.md,sha256=3jEv7M25i7ftCduOuBJ6xiimdDP70E2b3YBf5KN4k44,79
+odoo/addons/mail_multicompany/readme/CONTRIBUTORS.md,sha256=rnVVJ5lkUe0lXpim65-Js7cG0uo8DdYvSof58fkGdwM,150
+odoo/addons/mail_multicompany/readme/DESCRIPTION.md,sha256=ohh0uiQlgE7e1X4Z8UrqoPA3suwHiyZuXX6SiNMJKOY,150
+odoo/addons/mail_multicompany/readme/USAGE.md,sha256=uxK8vbk3iNNm-T6KyP5uHg2GsoJqYGom0Rip0x3v7rk,87
+odoo/addons/mail_multicompany/security/mail_security.xml,sha256=Ym0E1H0oNncXkLO6_dXmhVP7ipxIfxJna7bzHMSevRo,901
 odoo/addons/mail_multicompany/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/mail_multicompany/static/description/index.html,sha256=Obo-nFqp0n3tJ5e10A-ixYjDnQD5sZV9yRAF7JMr2ro,13386
+odoo/addons/mail_multicompany/static/description/index.html,sha256=5NVj9-wbPtBTwlVCuDW24WzoD5UvhBLJAIoCP-vFgQE,13386
 odoo/addons/mail_multicompany/tests/__init__.py,sha256=AS_IoXGm0-ooF1hAW_17PAv8tKDyW7GjKMuaIBsskhM,108
-odoo/addons/mail_multicompany/tests/test_mail_multicompany.py,sha256=vqqRDWMWvdaawNPxZ4aIakjgE1o6X99vFDksMHmvDsY,3430
+odoo/addons/mail_multicompany/tests/test_mail_multicompany.py,sha256=gtOs7pcyA1q65FXPBZ2bpK7DtBQQNy2Y7AdDyL0bsj4,3026
 odoo/addons/mail_multicompany/views/ir_mail_server_view.xml,sha256=v-uLfMO-IYZaGXUOhsQqjKz_Dru6Hj8n5Cw1sm5F5IY,986
-odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/METADATA,sha256=kNsjjoRcbvoGpGpPLJ8JWESvULYi19PmiQSNe3fSA20,4042
-odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_mail_multicompany-16.0.1.1.0.dist-info/RECORD,,
+odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/METADATA,sha256=ggllEyzczo7odYRX5fdhwljuEDIm4v4N8bVEXHJ_FA0,4031
+odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/WHEEL,sha256=8Rd4enx1PCuyDWP4SABqO5Fv8rpaknqp3VzjoFFLa6c,83
+odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/top_level.txt,sha256=QE6RBQ0QX5f4eFuUcGgU5Kbq1A_qJcDs-e_vpr6pmfU,4
+odoo_addon_mail_multicompany-17.0.1.0.0.2.dist-info/RECORD,,
```

